(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "./node_modules/mapillary-js/dist/mapillary.min.js":
/*!*********************************************************!*\
  !*** ./node_modules/mapillary-js/dist/mapillary.min.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;(function(e){if(true){module.exports=e()}else { var t; }})(function(){var o,e,t;return function o(a,s,u){function c(r,e){if(!s[r]){if(!a[r]){var t=typeof require=="function"&&require;if(!e&&t)return require(r,!0);if(l)return l(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};a[r][0].call(i.exports,function(e){var t=a[r][1][e];return c(t?t:e)},i,i.exports,o,a,s,u)}return s[r].exports}var l=typeof require=="function"&&require;for(var e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,r){"use strict";var b=e("tinyqueue");t.exports=n;t.exports.default=n;function n(e,t,r){t=t||1;var n,i,o,a;for(var s=0;s<e[0].length;s++){var u=e[0][s];if(!s||u[0]<n)n=u[0];if(!s||u[1]<i)i=u[1];if(!s||u[0]>o)o=u[0];if(!s||u[1]>a)a=u[1]}var c=o-n;var l=a-i;var h=Math.min(c,l);var p=h/2;var f=new b(null,x);if(h===0)return[n,i];for(var d=n;d<o;d+=h){for(var v=i;v<a;v+=h){f.push(new w(d+p,v+p,p,e))}}var m=S(e);var g=new w(n+c/2,i+l/2,0,e);if(g.d>m.d)m=g;var _=f.length;while(f.length){var y=f.pop();if(y.d>m.d){m=y;if(r)console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,_)}if(y.max-m.d<=t)continue;p=y.h/2;f.push(new w(y.x-p,y.y-p,p,e));f.push(new w(y.x+p,y.y-p,p,e));f.push(new w(y.x-p,y.y+p,p,e));f.push(new w(y.x+p,y.y+p,p,e));_+=4}if(r){console.log("num probes: "+_);console.log("best distance: "+m.d)}return[m.x,m.y]}function x(e,t){return t.max-e.max}function w(e,t,r,n){this.x=e;this.y=t;this.h=r;this.d=i(e,t,n);this.max=this.d+this.h*Math.SQRT2}function i(e,t,r){var n=false;var i=Infinity;for(var o=0;o<r.length;o++){var a=r[o];for(var s=0,u=a.length,c=u-1;s<u;c=s++){var l=a[s];var h=a[c];if(l[1]>t!==h[1]>t&&e<(h[0]-l[0])*(t-l[1])/(h[1]-l[1])+l[0])n=!n;i=Math.min(i,p(e,t,l,h))}}return(n?1:-1)*Math.sqrt(i)}function S(e){var t=0;var r=0;var n=0;var i=e[0];for(var o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o];var c=i[s];var l=u[0]*c[1]-c[0]*u[1];r+=(u[0]+c[0])*l;n+=(u[1]+c[1])*l;t+=l*3}if(t===0)return new w(i[0][0],i[0][1],0,e);return new w(r/t,n/t,0,e)}function p(e,t,r,n){var i=r[0];var o=r[1];var a=n[0]-i;var s=n[1]-o;if(a!==0||s!==0){var u=((e-i)*a+(t-o)*s)/(a*a+s*s);if(u>1){i=n[0];o=n[1]}else if(u>0){i+=a*u;o+=s*u}}a=e-i;s=t-o;return a*a+s*s}},{tinyqueue:243}],2:[function(e,t,r){t.exports=n;function n(e,t,r,n){this.cx=3*e;this.bx=3*(r-e)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*t;this.by=3*(n-t)-this.cy;this.ay=1-this.cy-this.by;this.p1x=e;this.p1y=n;this.p2x=r;this.p2y=n}n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e};n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e};n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx};n.prototype.solveCurveX=function(e,t){if(typeof t==="undefined")t=1e-6;var r,n,i,o,a;for(i=e,a=0;a<8;a++){o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}r=0;n=1;i=e;if(i<r)return r;if(i>n)return n;while(r<n){o=this.sampleCurveX(i);if(Math.abs(o-e)<t)return i;if(e>o){r=i}else{n=i}i=(n-r)*.5+r}return i};n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],3:[function(e,t,r){"use strict";r.byteLength=a;r.toByteArray=s;r.fromByteArray=d;var c=[];var u=[];var l=typeof Uint8Array!=="undefined"?Uint8Array:Array;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,o=n.length;i<o;++i){c[i]=n[i];u[n.charCodeAt(i)]=i}u["-".charCodeAt(0)]=62;u["_".charCodeAt(0)]=63;function h(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}return e[t-2]==="="?2:e[t-1]==="="?1:0}function a(e){return e.length*3/4-h(e)}function s(e){var t,r,n,i,o;var a=e.length;i=h(e);o=new l(a*3/4-i);r=i>0?a-4:a;var s=0;for(t=0;t<r;t+=4){n=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)];o[s++]=n>>16&255;o[s++]=n>>8&255;o[s++]=n&255}if(i===2){n=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4;o[s++]=n&255}else if(i===1){n=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2;o[s++]=n>>8&255;o[s++]=n&255}return o}function p(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[e&63]}function f(e,t,r){var n;var i=[];for(var o=t;o<r;o+=3){n=(e[o]<<16)+(e[o+1]<<8)+e[o+2];i.push(p(n))}return i.join("")}function d(e){var t;var r=e.length;var n=r%3;var i="";var o=[];var a=16383;for(var s=0,u=r-n;s<u;s+=a){o.push(f(e,s,s+a>u?u:s+a))}if(n===1){t=e[r-1];i+=c[t>>2];i+=c[t<<4&63];i+="=="}else if(n===2){t=(e[r-2]<<8)+e[r-1];i+=c[t>>10];i+=c[t>>4&63];i+=c[t<<2&63];i+="="}o.push(i);return o.join("")}},{}],4:[function(e,t,r){},{}],5:[function(e,t,r){t.exports=function e(l){var h=String.prototype.split,p=/()??/.exec("")[1]===l,t;t=function(e,t,r){if(Object.prototype.toString.call(t)!=="[object RegExp]"){return h.call(e,t,r)}var n=[],i=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),o=0,t=new RegExp(t.source,i+"g"),a,s,u,c;e+="";if(!p){a=new RegExp("^"+t.source+"$(?!\\s)",i)}r=r===l?-1>>>0:r>>>0;while(s=t.exec(e)){u=s.index+s[0].length;if(u>o){n.push(e.slice(o,s.index));if(!p&&s.length>1){s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++){if(arguments[e]===l){s[e]=l}}})}if(s.length>1&&s.index<e.length){Array.prototype.push.apply(n,s.slice(1))}c=s[0].length;o=u;if(n.length>=r){break}}if(t.lastIndex===s.index){t.lastIndex++}}if(o===e.length){if(c||!t.test("")){n.push("")}}else{n.push(e.slice(o))}return n.length>r?n.slice(0,r):n};return t}()},{}],6:[function(e,t,n){"use strict";var i=e("base64-js");var o=e("ieee754");n.Buffer=p;n.SlowBuffer=_;n.INSPECT_MAX_BYTES=50;var r=2147483647;n.kMaxLength=r;p.TYPED_ARRAY_SUPPORT=a();if(!p.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function a(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}Object.defineProperty(p.prototype,"parent",{enumerable:true,get:function(){if(!p.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(p.prototype,"offset",{enumerable:true,get:function(){if(!p.isBuffer(this))return undefined;return this.byteOffset}});function s(e){if(e>r){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var t=new Uint8Array(e);t.__proto__=p.prototype;return t}function p(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return h(e)}return u(e,t,r)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&p[Symbol.species]===p){Object.defineProperty(p,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}p.poolSize=8192;function u(e,t,r){if(typeof e==="string"){return f(e,t)}if(ArrayBuffer.isView(e)){return d(e)}if(e==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer)){return v(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e){return p.from(n,t,r)}var i=m(e);if(i)return i;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return p.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}p.from=function(e,t,r){return u(e,t,r)};p.prototype.__proto__=Uint8Array.prototype;p.__proto__=Uint8Array;function c(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function l(e,t,r){c(e);if(e<=0){return s(e)}if(t!==undefined){return typeof r==="string"?s(e).fill(t,r):s(e).fill(t)}return s(e)}p.alloc=function(e,t,r){return l(e,t,r)};function h(e){c(e);return s(e<0?0:g(e)|0)}p.allocUnsafe=function(e){return h(e)};p.allocUnsafeSlow=function(e){return h(e)};function f(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!p.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=y(e,t)|0;var n=s(r);var i=n.write(e,t);if(i!==r){n=n.slice(0,i)}return n}function d(e){var t=e.length<0?0:g(e.length)|0;var r=s(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function v(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}n.__proto__=p.prototype;return n}function m(e){if(p.isBuffer(e)){var t=g(e.length)|0;var r=s(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||J(e.length)){return s(0)}return d(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return d(e.data)}}function g(e){if(e>=r){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r.toString(16)+" bytes")}return e|0}function _(e){if(+e!=e){e=0}return p.alloc(+e)}p.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==p.prototype};p.compare=function e(t,r){if(Z(t,Uint8Array))t=p.from(t,t.offset,t.byteLength);if(Z(r,Uint8Array))r=p.from(r,r.offset,r.byteLength);if(!p.isBuffer(t)||!p.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;var n=t.length;var i=r.length;for(var o=0,a=Math.min(n,i);o<a;++o){if(t[o]!==r[o]){n=t[o];i=r[o];break}}if(n<i)return-1;if(i<n)return 1;return 0};p.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};p.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return p.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=p.allocUnsafe(r);var o=0;for(n=0;n<t.length;++n){var a=t[n];if(Z(a,Uint8Array)){a=p.from(a)}if(!p.isBuffer(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(i,o);o+=a.length}return i};function y(e,t){if(p.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}var r=e.length;var n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;var i=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(i){return n?-1:q(e).length}t=(""+t).toLowerCase();i=true}}}p.byteLength=y;function b(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return j(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}p.prototype._isBuffer=true;function x(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}p.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){x(this,r,r+1)}return this};p.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){x(this,r,r+3);x(this,r+1,r+2)}return this};p.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){x(this,r,r+7);x(this,r+1,r+6);x(this,r+2,r+5);x(this,r+3,r+4)}return this};p.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return j(this,0,t);return b.apply(this,arguments)};p.prototype.toLocaleString=p.prototype.toString;p.prototype.equals=function e(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return p.compare(this,t)===0};p.prototype.inspect=function e(){var t="";var r=n.INSPECT_MAX_BYTES;t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim();if(this.length>r)t+=" ... ";return"<Buffer "+t+">"};p.prototype.compare=function e(t,r,n,i,o){if(Z(t,Uint8Array)){t=p.from(t,t.offset,t.byteLength)}if(!p.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(o===undefined){o=this.length}if(r<0||n>t.length||i<0||o>this.length){throw new RangeError("out of range index")}if(i>=o&&r>=n){return 0}if(i>=o){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;o>>>=0;if(this===t)return 0;var a=o-i;var s=n-r;var u=Math.min(a,s);var c=this.slice(i,o);var l=t.slice(r,n);for(var h=0;h<u;++h){if(c[h]!==l[h]){a=c[h];s=l[h];break}}if(a<s)return-1;if(s<a)return 1;return 0};function w(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(J(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=p.from(t,n)}if(p.isBuffer(t)){if(t.length===0){return-1}return S(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return S(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){var o=1;var a=e.length;var s=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}o=2;a/=2;s/=2;r/=2}}function u(e,t){if(o===1){return e[t]}else{return e.readUInt16BE(t*o)}}var c;if(i){var l=-1;for(c=r;c<a;c++){if(u(e,c)===u(t,l===-1?0:c-l)){if(l===-1)l=c;if(c-l+1===s)return l*o}else{if(l!==-1)c-=c-l;l=-1}}}else{if(r+s>a)r=a-s;for(c=r;c>=0;c--){var h=true;for(var p=0;p<s;p++){if(u(e,c+p)!==u(t,p)){h=false;break}}if(h)return c}}return-1}p.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};p.prototype.indexOf=function e(t,r,n){return w(this,t,r,n,true)};p.prototype.lastIndexOf=function e(t,r,n){return w(this,t,r,n,false)};function M(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var o=t.length;if(n>o/2){n=o/2}for(var a=0;a<n;++a){var s=parseInt(t.substr(a*2,2),16);if(J(s))return a;e[r+a]=s}return a}function C(e,t,r,n){return K(q(t,e.length-r),e,r,n)}function T(e,t,r,n){return K(W(t),e,r,n)}function E(e,t,r,n){return T(e,t,r,n)}function O(e,t,r,n){return K(Y(t),e,r,n)}function P(e,t,r,n){return K(X(t,e.length-r),e,r,n)}p.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-r;if(n===undefined||n>o)n=o;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var a=false;for(;;){switch(i){case"hex":return M(this,t,r,n);case"utf8":case"utf-8":return C(this,t,r,n);case"ascii":return T(this,t,r,n);case"latin1":case"binary":return E(this,t,r,n);case"base64":return O(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};p.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,r){if(t===0&&r===e.length){return i.fromByteArray(e)}else{return i.fromByteArray(e.slice(t,r))}}function j(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var o=e[i];var a=null;var s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,c,l,h;switch(s){case 1:if(o<128){a=o}break;case 2:u=e[i+1];if((u&192)===128){h=(o&31)<<6|u&63;if(h>127){a=h}}break;case 3:u=e[i+1];c=e[i+2];if((u&192)===128&&(c&192)===128){h=(o&15)<<12|(u&63)<<6|c&63;if(h>2047&&(h<55296||h>57343)){a=h}}break;case 4:u=e[i+1];c=e[i+2];l=e[i+3];if((u&192)===128&&(c&192)===128&&(l&192)===128){h=(o&15)<<18|(u&63)<<12|(c&63)<<6|l&63;if(h>65535&&h<1114112){a=h}}}}if(a===null){a=65533;s=1}else if(a>65535){a-=65536;n.push(a>>>10&1023|55296);a=56320|a&1023}n.push(a);i+=s}return k(n)}var R=4096;function k(e){var t=e.length;if(t<=R){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=R))}return r}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function I(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var o=t;o<r;++o){i+=U(e[o])}return i}function D(e,t,r){var n=e.slice(t,r);var i="";for(var o=0;o<n.length;o+=2){i+=String.fromCharCode(n[o]+n[o+1]*256)}return i}p.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i=this.subarray(t,r);i.__proto__=p.prototype;return i};function B(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);var i=this[t];var o=1;var a=0;while(++a<r&&(o*=256)){i+=this[t+a]*o}return i};p.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){B(t,r,this.length)}var i=this[t+--r];var o=1;while(r>0&&(o*=256)){i+=this[t+--r]*o}return i};p.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)B(t,1,this.length);return this[t]};p.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);return this[t]|this[t+1]<<8};p.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);return this[t]<<8|this[t+1]};p.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};p.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};p.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);var i=this[t];var o=1;var a=0;while(++a<r&&(o*=256)){i+=this[t+a]*o}o*=128;if(i>=o)i-=Math.pow(2,8*r);return i};p.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);var i=r;var o=1;var a=this[t+--i];while(i>0&&(o*=256)){a+=this[t+--i]*o}o*=128;if(a>=o)a-=Math.pow(2,8*r);return a};p.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)B(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};p.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};p.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};p.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};p.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};p.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return o.read(this,t,true,23,4)};p.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return o.read(this,t,false,23,4)};p.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)B(t,8,this.length);return o.read(this,t,true,52,8)};p.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)B(t,8,this.length);return o.read(this,t,false,52,8)};function F(e,t,r,n,i,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}p.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;F(this,t,r,n,o,0)}var a=1;var s=0;this[r]=t&255;while(++s<n&&(a*=256)){this[r+s]=t/a&255}return r+n};p.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;F(this,t,r,n,o,0)}var a=n-1;var s=1;this[r+a]=t&255;while(--a>=0&&(s*=256)){this[r+a]=t/s&255}return r+n};p.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,1,255,0);this[r]=t&255;return r+1};p.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};p.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};p.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};p.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};p.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);F(this,t,r,n,o-1,-o)}var a=0;var s=1;var u=0;this[r]=t&255;while(++a<n&&(s*=256)){if(t<0&&u===0&&this[r+a-1]!==0){u=1}this[r+a]=(t/s>>0)-u&255}return r+n};p.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);F(this,t,r,n,o-1,-o)}var a=n-1;var s=1;var u=0;this[r+a]=t&255;while(--a>=0&&(s*=256)){if(t<0&&u===0&&this[r+a+1]!==0){u=1}this[r+a]=(t/s>>0)-u&255}return r+n};p.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};p.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};p.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};p.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};p.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function z(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $(e,t,r,n,i){t=+t;r=r>>>0;if(!i){z(e,t,r,4,34028234663852886e22,-34028234663852886e22)}o.write(e,t,r,n,23,4);return r+4}p.prototype.writeFloatLE=function e(t,r,n){return $(this,t,r,true,n)};p.prototype.writeFloatBE=function e(t,r,n){return $(this,t,r,false,n)};function G(e,t,r,n,i){t=+t;r=r>>>0;if(!i){z(e,t,r,8,17976931348623157e292,-17976931348623157e292)}o.write(e,t,r,n,52,8);return r+8}p.prototype.writeDoubleLE=function e(t,r,n){return G(this,t,r,true,n)};p.prototype.writeDoubleBE=function e(t,r,n){return G(this,t,r,false,n)};p.prototype.copy=function e(t,r,n,i){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var o=i-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,i)}else if(this===t&&n<r&&r<i){for(var a=o-1;a>=0;--a){t[a+r]=this[a+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,i),r)}return o};p.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!p.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}if(t.length===1){var o=t.charCodeAt(0);if(i==="utf8"&&o<128||i==="latin1"){t=o}}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=r;a<n;++a){this[a]=t}}else{var s=p.isBuffer(t)?t:p.from(t,i);var u=s.length;if(u===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(a=0;a<n-r;++a){this[a+r]=s[a%u]}}return this};var V=/[^+/0-9A-Za-z-_]/g;function H(e){e=e.split("=")[0];e=e.trim().replace(V,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function U(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function q(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var o=[];for(var a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)o.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)o.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)o.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)o.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return o}function W(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function X(e,t){var r,n,i;var o=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;o.push(i);o.push(n)}return o}function Y(e){return i.toByteArray(H(e))}function K(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function Z(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function J(e){return e!==e}},{"base64-js":3,ieee754:17}],7:[function(e,t,r){var n=t.exports={};var i;var o;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=a}}catch(e){i=a}try{if(typeof clearTimeout==="function"){o=clearTimeout}else{o=s}}catch(e){o=s}})();function u(t){if(i===setTimeout){return setTimeout(t,0)}if((i===a||!i)&&setTimeout){i=setTimeout;return setTimeout(t,0)}try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function c(t){if(o===clearTimeout){return clearTimeout(t)}if((o===s||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(t)}try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}var l=[];var h=false;var p;var f=-1;function d(){if(!h||!p){return}h=false;if(p.length){l=p.concat(l)}else{f=-1}if(l.length){v()}}function v(){if(h){return}var e=u(d);h=true;var t=l.length;while(t){p=l;l=[];while(++f<t){if(p){p[f].run()}}f=-1;t=l.length}p=null;h=false;c(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}l.push(new m(e,t));if(l.length===1&&!h){u(v)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function g(){}n.on=g;n.addListener=g;n.once=g;n.off=g;n.removeListener=g;n.removeAllListeners=g;n.emit=g;n.prependListener=g;n.prependOnceListener=g;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],8:[function(e,t,r){"use strict";t.exports=n;t.exports.default=n;function n(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=v(e,0,i,r,true),a=[];if(!o||o.next===o.prev)return a;var s,u,c,l,h,p,f;if(n)o=g(e,t,o,r);if(e.length>80*r){s=c=e[0];u=l=e[1];for(var d=r;d<i;d+=r){h=e[d];p=e[d+1];if(h<s)s=h;if(p<u)u=p;if(h>c)c=h;if(p>l)l=p}f=Math.max(c-s,l-u);f=f!==0?1/f:0}m(o,a,r,s,u,f);return a}function v(e,t,r,n,i){var o,a;if(i===L(e,t,r,n)>0){for(o=t;o<r;o+=n)a=j(o,e[o],e[o+1],a)}else{for(o=r-n;o>=t;o-=n)a=j(o,e[o],e[o+1],a)}if(a&&s(a,a.next)){R(a);a=a.next}return a}function l(e,t){if(!e)return e;if(!t)t=e;var r=e,n;do{n=false;if(!r.steiner&&(s(r,r.next)||C(r.prev,r,r.next)===0)){R(r);r=t=r.prev;if(r===r.next)break;n=true}else{r=r.next}}while(n||r!==t);return t}function m(e,t,r,n,i,o,a){if(!e)return;if(!a&&o)x(e,n,i,o);var s=e,u,c;while(e.prev!==e.next){u=e.prev;c=e.next;if(o?p(e,n,i,o):h(e)){t.push(u.i/r);t.push(e.i/r);t.push(c.i/r);R(e);e=c.next;s=c.next;continue}e=c;if(e===s){if(!a){m(l(e),t,r,n,i,o,1)}else if(a===1){e=f(l(e),t,r);m(e,t,r,n,i,o,2)}else if(a===2){d(e,t,r,n,i,o)}break}}}function h(e){var t=e.prev,r=e,n=e.next;if(C(t,r,n)>=0)return false;var i=e.next.next;while(i!==e.prev){if(M(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&C(i.prev,i,i.next)>=0)return false;i=i.next}return true}function p(e,t,r,n){var i=e.prev,o=e,a=e.next;if(C(i,o,a)>=0)return false;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y;var h=w(s,u,t,r,n),p=w(c,l,t,r,n);var f=e.prevZ,d=e.nextZ;while(f&&f.z>=h&&d&&d.z<=p){if(f!==e.prev&&f!==e.next&&M(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&C(f.prev,f,f.next)>=0)return false;f=f.prevZ;if(d!==e.prev&&d!==e.next&&M(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&C(d.prev,d,d.next)>=0)return false;d=d.nextZ}while(f&&f.z>=h){if(f!==e.prev&&f!==e.next&&M(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&C(f.prev,f,f.next)>=0)return false;f=f.prevZ}while(d&&d.z<=p){if(d!==e.prev&&d!==e.next&&M(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&C(d.prev,d,d.next)>=0)return false;d=d.nextZ}return true}function f(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;if(!s(i,o)&&a(i,n,n.next,o)&&O(i,o)&&O(o,i)){t.push(i.i/r);t.push(n.i/r);t.push(o.i/r);R(n);R(n.next);n=e=o}n=n.next}while(n!==e);return l(n)}function d(e,t,r,n,i,o){var a=e;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&c(a,s)){var u=A(a,s);a=l(a,a.next);u=l(u,u.next);m(a,t,r,n,i,o);m(u,t,r,n,i,o);return}s=s.next}a=a.next}while(a!==e)}function g(e,t,r,n){var i=[],o,a,s,u,c;for(o=0,a=t.length;o<a;o++){s=t[o]*n;u=o<a-1?t[o+1]*n:e.length;c=v(e,s,u,n,false);if(c===c.next)c.steiner=true;i.push(S(c))}i.sort(_);for(o=0;o<i.length;o++){y(i[o],r);r=l(r,r.next)}return r}function _(e,t){return e.x-t.x}function y(e,t){t=i(e,t);if(t){var r=A(t,e);l(t,t.next);l(r,r.next)}}function i(e,t){var r=t,n=e.x,i=e.y,o=-Infinity,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o){o=s;if(s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!a)return null;if(n===o)return a;var u=a,c=a.x,l=a.y,h=Infinity,p;r=a;do{if(n>=r.x&&r.x>=c&&n!==r.x&&M(i<l?n:o,i,c,l,i<l?o:n,i,r.x,r.y)){p=Math.abs(i-r.y)/(n-r.x);if(O(r,e)&&(p<h||p===h&&(r.x>a.x||r.x===a.x&&b(a,r)))){a=r;h=p}}r=r.next}while(r!==u);return a}function b(e,t){return C(e.prev,e,t.prev)<0&&C(t.next,e,e.next)<0}function x(e,t,r,n){var i=e;do{if(i.z===null)i.z=w(i.x,i.y,t,r,n);i.prevZ=i.prev;i.nextZ=i.next;i=i.next}while(i!==e);i.prevZ.nextZ=null;i.prevZ=null;o(i)}function o(e){var t,r,n,i,o,a,s,u,c=1;do{r=e;e=null;o=null;a=0;while(r){a++;n=r;s=0;for(t=0;t<c;t++){s++;n=n.nextZ;if(!n)break}u=c;while(s>0||u>0&&n){if(s!==0&&(u===0||!n||r.z<=n.z)){i=r;r=r.nextZ;s--}else{i=n;n=n.nextZ;u--}if(o)o.nextZ=i;else e=i;i.prevZ=o;o=i}r=n}o.nextZ=null;c*=2}while(a>1);return e}function w(e,t,r,n,i){e=32767*(e-r)*i;t=32767*(t-n)*i;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function S(e){var t=e,r=e;do{if(t.x<r.x||t.x===r.x&&t.y<r.y)r=t;t=t.next}while(t!==e);return r}function M(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function c(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!E(e,t)&&(O(e,t)&&O(t,e)&&P(e,t)&&(C(e.prev,e,t.prev)||C(e,t.prev,t))||s(e,t)&&C(e.prev,e,e.next)>0&&C(t.prev,t,t.next)>0)}function C(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function s(e,t){return e.x===t.x&&e.y===t.y}function a(e,t,r,n){var i=T(C(e,t,r));var o=T(C(e,t,n));var a=T(C(r,n,e));var s=T(C(r,n,t));if(i!==o&&a!==s)return true;if(i===0&&u(e,r,t))return true;if(o===0&&u(e,n,t))return true;if(a===0&&u(r,e,n))return true;if(s===0&&u(r,t,n))return true;return false}function u(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function T(e){return e>0?1:e<0?-1:0}function E(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&a(r,r.next,e,t))return true;r=r.next}while(r!==e);return false}function O(e,t){return C(e.prev,e,e.next)<0?C(e,t,e.next)>=0&&C(e,e.prev,t)>=0:C(e,t,e.prev)<0||C(e,e.next,t)<0}function P(e,t){var r=e,n=false,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{if(r.y>o!==r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x)n=!n;r=r.next}while(r!==e);return n}function A(e,t){var r=new k(e.i,e.x,e.y),n=new k(t.i,t.x,t.y),i=e.next,o=t.prev;e.next=t;t.prev=e;r.next=i;i.prev=r;n.next=r;r.prev=n;o.next=n;n.prev=o;return n}function j(e,t,r,n){var i=new k(e,t,r);if(!n){i.prev=i;i.next=i}else{i.next=n.next;i.prev=n;n.next.prev=i;n.next=i}return i}function R(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function k(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}n.deviation=function(e,t,r,n){var i=t&&t.length;var o=i?t[0]*r:e.length;var a=Math.abs(L(e,0,o,r));if(i){for(var s=0,u=t.length;s<u;s++){var c=t[s]*r;var l=s<u-1?t[s+1]*r:e.length;a-=Math.abs(L(e,c,l,r))}}var h=0;for(s=0;s<n.length;s+=3){var p=n[s]*r;var f=n[s+1]*r;var d=n[s+2]*r;h+=Math.abs((e[p]-e[d])*(e[f+1]-e[p+1])-(e[p]-e[f])*(e[d+1]-e[p+1]))}return a===0&&h===0?0:Math.abs((h-a)/a)};function L(e,t,r,n){var i=0;for(var o=t,a=r-n;o<r;o+=n){i+=(e[a]-e[o])*(e[o+1]+e[a+1]);a=o}return i}n.flatten=function(e){var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0;for(var i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++){for(var a=0;a<t;a++)r.vertices.push(e[i][o][a])}if(i>0){n+=e[i-1].length;r.holes.push(n)}}return r}},{}],9:[function(e,t,r){"use strict";var n=e("individual/one-version");var i="7";n("ev-store",i);var o="__EV_STORE_KEY@"+i;t.exports=a;function a(e){var t=e[o];if(!t){t=e[o]={}}return t}},{"individual/one-version":19}],10:[function(e,t,r){"use strict";var l=e("./request");var n=e("./buildQueryObject");var i=Array.isArray;function h(e,t){var r;for(r in t){e[r]=t[r]}return e}function o(e,t){this._jsongUrl=e;if(typeof t==="number"){var r={timeout:t};t=r}this._config=h({timeout:15e3,headers:{}},t||{})}o.prototype={constructor:o,buildQueryObject:n,get:function e(t){var r="GET";var n=this.buildQueryObject(this._jsongUrl,r,{paths:t,method:"get"});var i=h(n,this._config);var o=this;return l(r,i,o)},set:function e(t){var r="POST";var n=this.buildQueryObject(this._jsongUrl,r,{jsonGraph:t,method:"set"});var i=h(n,this._config);i.headers["Content-Type"]="application/x-www-form-urlencoded";var o=this;return l(r,i,o)},call:function e(t,r,n,i){r=r||[];n=n||[];i=i||[];var o="POST";var a=[];a.push("method=call");a.push("callPath="+encodeURIComponent(JSON.stringify(t)));a.push("arguments="+encodeURIComponent(JSON.stringify(r)));a.push("pathSuffixes="+encodeURIComponent(JSON.stringify(n)));a.push("paths="+encodeURIComponent(JSON.stringify(i)));var s=this.buildQueryObject(this._jsongUrl,o,a.join("&"));var u=h(s,this._config);u.headers["Content-Type"]="application/x-www-form-urlencoded";var c=this;return l(o,u,c)}};o.XMLHttpSource=o;o["default"]=o;t.exports=o},{"./buildQueryObject":11,"./request":14}],11:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var i=[];var o;var a={url:t};var s=t.indexOf("?")!==-1;var u=s?"&":"?";if(typeof n==="string"){i.push(n)}else{o=Object.keys(n);o.forEach(function(e){var t=typeof n[e]==="object"?JSON.stringify(n[e]):n[e];i.push(e+"="+encodeURIComponent(t))})}if(r==="GET"){a.url+=u+i.join("&")}else{a.data=i.join("&")}return a}},{}],12:[function(e,t,r){(function(r){"use strict";t.exports=function e(){var t=new r.XMLHttpRequest;if("withCredentials"in t){return t}else if(!!r.XDomainRequest){return new XDomainRequest}else{throw new Error("CORS is not supported by your browser")}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],13:[function(e,t,r){(function(i){"use strict";t.exports=function e(){var t,r,n;if(i.XMLHttpRequest){return new i.XMLHttpRequest}else{try{r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];for(n=0;n<3;n++){try{t=r[n];if(new i.ActiveXObject(t)){break}}catch(e){}}return new i.ActiveXObject(t)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],14:[function(e,t,r){"use strict";var h=e("./getXMLHttpRequest");var p=e("./getCORSRequest");var f=Object.prototype.hasOwnProperty;var a=function(){};function n(){}n.create=function(o){var e=new n;e.subscribe=function(e,t,r){var n;var i;if(typeof e==="function"){n={onNext:e,onError:t||a,onCompleted:r||a}}else{n=e}i=o(n);if(typeof i==="function"){return{dispose:i}}else{return i}};return e};function i(u,c,l){return n.create(function e(r){var t={method:u||"GET",crossDomain:false,async:true,headers:{},responseType:"json"};var n,i,o,a,s;for(s in c){if(f.call(c,s)){t[s]=c[s]}}if(!t.crossDomain&&!t.headers["X-Requested-With"]){t.headers["X-Requested-With"]="XMLHttpRequest"}if(l.onBeforeRequest!=null){l.onBeforeRequest(t)}try{n=t.crossDomain?p():h()}catch(e){r.onError(e)}try{if(t.user){n.open(t.method,t.url,t.async,t.user,t.password)}else{n.open(t.method,t.url,t.async)}n.timeout=t.timeout;n.withCredentials=t.withCredentials!==false;o=t.headers;for(a in o){if(f.call(o,a)){n.setRequestHeader(a,o[a])}}if(t.responseType){try{n.responseType=t.responseType}catch(e){if(t.responseType!=="json"){throw e}}}n.onreadystatechange=function e(t){if(n.readyState===4){if(!i){i=true;d(r,n,t)}}};n.ontimeout=function e(t){if(!i){i=true;v(r,n,"timeout error",t)}};n.send(t.data)}catch(e){r.onError(e)}return function e(){if(!i&&n.readyState!==4){i=true;n.abort()}}})}function s(e,t,r){if(!r){r=new Error(t)}e.onError(r)}function d(e,t,r){var n,i,o;if(t&&e){o=t.responseType;n="response"in t?t.response:t.responseText;var a=t.status===1223?204:t.status;if(a>=200&&a<=399){try{if(o!=="json"){n=JSON.parse(n||"")}if(typeof n==="string"){n=JSON.parse(n||"")}}catch(r){s(e,"invalid json",r)}e.onNext(n);e.onCompleted();return}else if(a===401||a===403||a===407){return s(e,n)}else if(a===410){return s(e,n)}else if(a===408||a===504){return s(e,n)}else{return s(e,n||"Response code "+a)}}}function v(e,t,r,n){s(e,r||t.statusText||"request error",n)}t.exports=i},{"./getCORSRequest":12,"./getXMLHttpRequest":13}],15:[function(h,r,i){(function(n){!function(e){if("object"==typeof i&&"undefined"!=typeof r)r.exports=e();else if("function"==typeof o&&o.amd)o([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:this,t.falcor=e()}}(function(){var Ir;return function o(a,s,u){function c(r,e){if(!s[r]){if(!a[r]){var t="function"==typeof h&&h;if(!e&&t)return t(r,!0);if(l)return l(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};a[r][0].call(i.exports,function(e){var t=a[r][1][e];return c(t?t:e)},i,i.exports,o,a,s,u)}return s[r].exports}for(var l="function"==typeof h&&h,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,r){var n=e(32),i=e(130);n.atom=i.atom,n.ref=i.ref,n.error=i.error,n.pathValue=i.pathValue,n.HttpDataSource=e(125),t.exports=n},{125:125,130:130,32:32}],2:[function(e,t,r){function i(e){var t=e||{};this._root=t._root||new n(t),this._path=t.path||t._path||[],this._scheduler=t.scheduler||t._scheduler||new f,this._source=t.source||t._source,this._request=t.request||t._request||new a(this,this._scheduler),this._ID=E++,"number"==typeof t.maxSize?this._maxSize=t.maxSize:this._maxSize=t._maxSize||i.prototype._maxSize,"number"==typeof t.collectRatio?this._collectRatio=t.collectRatio:this._collectRatio=t._collectRatio||i.prototype._collectRatio,(t.boxed||t.hasOwnProperty("_boxed"))&&(this._boxed=t.boxed||t._boxed),(t.materialized||t.hasOwnProperty("_materialized"))&&(this._materialized=t.materialized||t._materialized),"boolean"==typeof t.treatErrorsAsValues?this._treatErrorsAsValues=t.treatErrorsAsValues:t.hasOwnProperty("_treatErrorsAsValues")&&(this._treatErrorsAsValues=t._treatErrorsAsValues),t.cache&&this.setCache(t.cache)}var n=e(4),o=e(3),a=e(55),s=e(64),u=e(65),c=e(61),l=e(63),h=e(73),p=e(75),f=e(74),d=e(81),v=e(84),m=e(49),g=e(134),_=e(88),y=e(100),b=e(96),x=e(102),w=e(98),S=e(99),M=e(77),C=e(76),T=e(130),E=0,O=e(116),P=function(){},A=e(14),j=e(19),R={pathValue:!0,pathSyntax:!0,json:!0,jsonGraph:!0},k=e(72);t.exports=i,i.ref=T.ref,i.atom=T.atom,i.error=T.error,i.pathValue=T.pathValue,i.prototype.constructor=i,i.prototype._materialized=!1,i.prototype._boxed=!1,i.prototype._progressive=!1,i.prototype._treatErrorsAsValues=!1,i.prototype._maxSize=Math.pow(2,53)-1,i.prototype._collectRatio=.75,i.prototype.get=e(71),i.prototype._getWithPaths=e(70),i.prototype.set=function(){var t=O(arguments,R,"set");return t!==!0?new s(function(e){e.onError(t)}):this._set.apply(this,arguments)},i.prototype.preload=function(){var t=O(arguments,k,"preload");if(t!==!0)return new s(function(e){e.onError(t)});var e=Array.prototype.slice.call(arguments),r=this;return new s(function(t){return r.get.apply(r,e).subscribe(function(){},function(e){t.onError(e)},function(){t.onCompleted()})})},i.prototype._set=function(){var e,t=-1,r=arguments.length,n=arguments[r-1];for(b(n)?r-=1:n=void 0,e=new Array(r);++t<r;)e[t]=arguments[t];return u.create(this,e,n)},i.prototype.call=function(){var e,t=-1,r=arguments.length;for(e=new Array(r);++t<r;){var n=arguments[t];e[t]=n;var i=typeof n;if(t>1&&!Array.isArray(n)||0===t&&!Array.isArray(n)&&"string"!==i||1===t&&!Array.isArray(n)&&!x(n))return new s(function(e){e.onError(new Error("Invalid argument"))})}return c.create(this,e)},i.prototype.invalidate=function(){var e,t=-1,r=arguments.length,n=arguments[r-1];for(e=new Array(r);++t<r;)if(e[t]=g.fromPath(arguments[t]),"object"!=typeof e[t])throw new Error("Invalid argument");l.create(this,e,n).subscribe(P,function(e){throw e})},i.prototype.deref=e(5),i.prototype.getValue=e(16),i.prototype.setValue=e(79),i.prototype._getValueSync=e(24),i.prototype._setValueSync=e(80),i.prototype._derefSync=e(6),i.prototype.setCache=function(e){var t=this._root.cache;if(e!==t){var r=this._root,n=this._path;this._path=[],this._root.cache={},"undefined"!=typeof t&&m(r,r.expired,_(t),0),S(e)?C(this,[e]):w(e)?M(this,[e]):y(e)&&M(this,[{json:e}]),this._path=n}else"undefined"==typeof t&&(this._root.cache={});return this},i.prototype.getCache=function(){var e=v(arguments);if(0===e.length)return A(this._root.cache);var t=[{}],r=this._path;return j.getWithPathsAsJSONGraph(this,e,t),this._path=r,t[0].jsonGraph},i.prototype.getVersion=function(e){var t=e&&g.fromPath(e)||[];if(Array.isArray(t)===!1)throw new Error("Model#getVersion must be called with an Array path.");return this._path.length&&(t=this._path.concat(t)),this._getVersion(this,t)},i.prototype._syncCheck=function(e){if(Boolean(this._source)&&this._root.syncRefCount<=0&&this._root.unsafeMode===!1)throw new Error("Model#"+e+" may only be called within the context of a request selector.");return!0},i.prototype._clone=function(e){var t=new i(this);for(var r in e){var n=e[r];"delete"===n?delete t[r]:t[r]=n}return t.setCache=void 0,t},i.prototype.batch=function(e){var t=e;"number"==typeof t?t=new p(Math.round(Math.abs(t))):t&&t.schedule||(t=new h);var r=this._clone();return r._request=new a(r,t),r},i.prototype.unbatch=function(){var e=this._clone();return e._request=new a(e,new f),e},i.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})},i.prototype.asDataSource=function(){return new o(this)},i.prototype._materialize=function(){return this._clone({_materialized:!0})},i.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})},i.prototype.boxValues=function(){return this._clone({_boxed:!0})},i.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})},i.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})},i.prototype.toJSON=function(){return{$type:"ref",value:this._path}},i.prototype.getPath=function(){return d(this._path)},i.prototype._getBoundValue=e(13),i.prototype._getVersion=e(18),i.prototype._getValueSync=e(17),i.prototype._getPathValuesAsPathMap=j.getWithPathsAsPathMap,i.prototype._getPathValuesAsJSONG=j.getWithPathsAsJSONGraph,i.prototype._setPathValuesAsJSON=e(78),i.prototype._setPathValuesAsJSONG=e(78),i.prototype._setPathValuesAsPathMap=e(78),i.prototype._setPathValuesAsValues=e(78),i.prototype._setPathMapsAsJSON=e(77),i.prototype._setPathMapsAsJSONG=e(77),i.prototype._setPathMapsAsPathMap=e(77),i.prototype._setPathMapsAsValues=e(77),i.prototype._setJSONGsAsJSON=e(76),i.prototype._setJSONGsAsJSONG=e(76),i.prototype._setJSONGsAsPathMap=e(76),i.prototype._setJSONGsAsValues=e(76),i.prototype._setCache=e(77),i.prototype._invalidatePathValuesAsJSON=e(48),i.prototype._invalidatePathMapsAsJSON=e(47)},{100:100,102:102,116:116,13:13,130:130,134:134,14:14,16:16,17:17,18:18,19:19,24:24,3:3,4:4,47:47,48:48,49:49,5:5,55:55,6:6,61:61,63:63,64:64,65:65,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,84:84,88:88,96:96,98:98,99:99}],3:[function(e,t,r){function n(e){this._model=e._materialize().treatErrorsAsValues()}n.prototype.get=function(e){return this._model.get.apply(this._model,e)._toJSONG()},n.prototype.set=function(e){return this._model.set(e)._toJSONG()},n.prototype.call=function(e,t,r,n){var i=[e,t,r].concat(n);return this._model.call.apply(this._model,i)._toJSONG()},t.exports=n},{}],4:[function(e,t,r){function n(e){var t=e||{};this.syncRefCount=0,this.expired=t.expired||[],this.unsafeMode=t.unsafeMode||!1,this.collectionScheduler=t.collectionScheduler||new a,this.cache={},i(t.comparator)&&(this.comparator=t.comparator),i(t.errorSelector)&&(this.errorSelector=t.errorSelector),i(t.onChange)&&(this.onChange=t.onChange)}var i=e(96),o=e(91),a=e(74);n.prototype.errorSelector=function(e,t){return t},n.prototype.comparator=function(e,t){return o(e,"value")&&o(t,"value")?e.value===t.value&&e.$type===t.$type&&e.$expires===t.$expires:e===t},t.exports=n},{74:74,91:91,96:96}],5:[function(e,t,r){function s(e,t){var r,n=!1;try{++e._root.syncRefCount,r=e._derefSync(t)}catch(e){r=e,n=!0}finally{--e._root.syncRefCount}return n?u.Observable["throw"](r):u.Observable["return"](r)}var u=e(159),c=e(134);t.exports=function(e){for(var n=this,t=-1,i=arguments.length-1,o=new Array(i),a=c.fromPath(e);++t<i;)o[t]=c.fromPath(arguments[t+1]);if(0===i)throw new Error("Model#deref requires at least one value path.");return u.Observable.defer(function(){return s(n,a)}).flatMap(function(e){if(Boolean(e)){if(i>0){var t=u.Observable.of(e);return e.get.apply(e,o)["catch"](u.Observable.empty()).concat(t).last().flatMap(function(){return s(n,a)}).filter(function(e){return e})}return u.Observable["return"](e)}if(i>0){var r=o.map(function(e){return a.concat(e)});return n.get.apply(n,r).concat(u.Observable.defer(function(){return s(n,a)})).last().filter(function(e){return e})}return u.Observable.empty()})}},{134:134,159:159}],6:[function(e,t,r){var a=e(134),s=e(13),u=e(8),c=e(118);t.exports=function(e){var t=a.fromPath(e);if(!Array.isArray(t))throw new Error("Model#derefSync must be called with an Array path.");var r=s(this,this._path.concat(t),!1),n=r.path,i=r.value,o=r.found;if(o&&void 0!==i&&(i.$type!==c||void 0!==i.value)){if(i.$type)throw new u;return this._clone({_path:n})}}},{118:118,13:13,134:134,8:8}],7:[function(e,t,r){function n(){this.message=n.message,this.stack=(new Error).stack}n.prototype=new Error,n.prototype.name="BoundJSONGraphModelError",n.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.",t.exports=n},{}],8:[function(e,t,r){function n(e,t){this.message=o,this.stack=(new Error).stack,this.boundPath=e,this.shortedPath=t}var i="InvalidModelError",o="The boundPath of the model is not valid since a value or error was found before the path end.";n.prototype=new Error,n.prototype.name=i,n.message=o,t.exports=n},{}],9:[function(e,t,r){function n(e){this.message="An exception was thrown when making a request.",this.stack=(new Error).stack,this.innerError=e}var i="InvalidSourceError";n.prototype=new Error,n.prototype.name=i,n.is=function(e){return e&&e.name===i},t.exports=n},{}],10:[function(e,t,r){function n(){this.message="The allowed number of retries have been exceeded.",this.stack=(new Error).stack}var i="MaxRetryExceededError";n.prototype=new Error,n.prototype.name=i,n.is=function(e){return e&&e.name===i},t.exports=n},{}],11:[function(e,t,r){function n(e,t,r,n,i,o,a){for(var s,u,c=r,l=i,h=n,p=0;;){if(0===p&&h[x]?(p=l.length,u=h[x]):(s=l[p++],u=c[s]),u){var f=u.$type,d=f&&u.value||u;if(p<l.length){if(f){c=u;break}c=u;continue}if(c=u,f&&y(u))break;if(h[x]||g(h,u),f===b){a?_(e,u,o,null,null,null,l,l.length,a):w(e,u),p=0,l=d,h=u,c=t;continue}break}c=void 0;break}if(p<l.length&&void 0!==c){for(var v=[],m=0;p>m;m++)v[m]=l[m];l=v}return[c,l]}var i=e(26),g=i.create,_=e(22),y=e(27),b=e(120),x=e(33),w=e(29).promote;t.exports=n},{120:120,22:22,26:26,27:27,29:29,33:33}],12:[function(e,t,r){var v=e(15),m=e(8),g=e(7);t.exports=function(f,d){return function(e,t,r){var n,i,o,a=r[0],s={values:r,optimizedPaths:[]},u=e._root.cache,c=e._path,l=u,h=c.length,p=[];if(h){if(d)return{criticalError:new g};if(l=v(e,c),l.$type)return{criticalError:new m(c,c)};for(n=[],i=0;h>i;++i)n[i]=c[i]}else n=[],h=0;for(i=0,o=t.length;o>i;i++)f(e,u,l,t[i],0,a,s,p,n,h,d);return s}}},{15:15,7:7,8:8}],13:[function(e,t,r){var l=e(17),h=e(8);t.exports=function(e,t,r){var n,i,o,a,s,u=t,c=t;for(n=e._boxed,r=e._materialized,i=e._treatErrorsAsValues,e._boxed=!0,e._materialized=void 0===r||r,e._treatErrorsAsValues=!0,o=l(e,u.concat(null),!0),e._boxed=n,e._materialized=r,e._treatErrorsAsValues=i,u=o.optimizedPath,a=o.shorted,s=o.found,o=o.value;u.length&&null===u[u.length-1];)u.pop();if(s&&a)throw new h(c,u);return{path:u,value:o,shorted:a,found:s}}},{17:17,8:8}],14:[function(e,t,r){function u(e){var t,r,n,i={},o=Object.keys(e);for(r=0,n=o.length;n>r;r++)t=o[r],h(t)||(i[t]=e[t]);return i}function c(a,s,e){Object.keys(a).filter(function(e){return!h(e)&&a[e]}).forEach(function(e){var t=a[e],r=s[e];if(r||(r=s[e]={}),t.$type){var n,i=t.value&&"object"==typeof t.value,o=!a[l];return n=i||o?u(t):t.value,void(s[e]=n)}c(t,r,e)})}var l=e(37),h=e(97);t.exports=function(e){var t={};return c(e,t),t}},{37:37,97:97}],15:[function(e,t,r){t.exports=function(e,t){for(var r=e._root.cache,n=-1,i=t.length;++n<i&&r&&!r.$type;)r=r[t[n]];return r}},{}],16:[function(e,t,r){var i=e(64),a=e(134);t.exports=function(e){for(var o=a.fromPath(e),t=0,r=o.length;++t<r;)if("object"==typeof o[t])return new i(function(e){e.onError(new Error("Paths must be simple paths"))});var n=this;return new i(function(i){return n.get(o).subscribe(function(e){for(var t=e.json,r=-1,n=o.length;t&&++r<n;)t=t[o[r]];i.onNext(t)},function(e){i.onError(e)},function(){i.onCompleted()})})}},{134:134,64:64}],17:[function(e,t,r){var y=e(11),b=e(25),x=e(27),w=e(29).promote,S=e(120),M=e(118),C=e(119);t.exports=function(e,t,r){for(var n,i,o,a,s,u=e._root.cache,c=t.length,l=[],h=!1,p=!1,f=0,d=u,v=u,m=u,g=!0,_=!1;d&&c>f;){if(n=t[f++],null!==n&&(d=v[n],l[l.length]=n),!d){m=void 0,h=!0,g=!1;break}if(o=d.$type,o===M&&void 0===d.value){m=void 0,g=!1,h=c>f;break}if(c>f){if(o===S){if(x(d)){_=!0,m=void 0,g=!1;break}if(a=y(e,u,u,d,d.value),s=a[0],!s){m=void 0,d=void 0,g=!1;break}o=s.$type,d=s,l=a[1].slice(0)}if(o)break}else m=d;v=d}if(c>f&&!_){for(i=f;c>i;++i)if(null!==t[f]){p=!0;break}for(p?(h=!0,m=void 0):m=d,i=f;c>i;++i)null!==t[i]&&(l[l.length]=t[i])}if(m&&o&&(x(m)?m=void 0:w(e,m)),m&&o===C&&!e._treatErrorsAsValues)throw{path:f===c?t:t.slice(0,f),value:m.value};return m&&e._boxed?m=Boolean(o)&&!r?b(m):m:!m&&e._materialized?m={$type:M}:m&&(m=m.value),{value:m,shorted:h,optimizedPath:l,found:g}}},{11:11,118:118,119:119,120:120,25:25,27:27,29:29}],18:[function(e,t,r){var i=e(46);t.exports=function(e,t){var r=e._getValueSync({_boxed:!0,_root:e._root,_treatErrorsAsValues:e._treatErrorsAsValues},t,!0).value,n=r&&r[i];return null==n?-1:n}},{46:46}],19:[function(e,t,r){var n=e(12),i=e(31),o=n(i,!1),a=n(i,!0);t.exports={getValueSync:e(17),getBoundValue:e(13),getWithPathsAsPathMap:o,getWithPathsAsJSONGraph:a}},{12:12,13:13,17:17,31:31}],20:[function(e,t,r){var n=e(29),a=e(25),s=n.promote;t.exports=function(e,t,r,n,i){var o=t.value;i.errors||(i.errors=[]),e._boxed&&(o=a(t)),i.errors.push({path:n.slice(0,r+1),value:o}),s(e,t)}},{25:25,29:29}],21:[function(e,t,r){function u(e,t,r,n,i,o,a){a.requestedMissingPaths.push(n.slice(0,r).concat(t)),a.optimizedMissingPaths.push(i.slice(0,o).concat(t))}var n=e(30),c=n.fastCopy;t.exports=function(e,t,r,n,i,o,a){var s;n.requestedMissingPaths||(n.requestedMissingPaths=[],n.optimizedMissingPaths=[]),s=r<t.length?c(t,r):[],u(e,s,r,i,o,a,n)}},{30:30}],22:[function(e,t,r){var n=e(29),x=e(25),w=n.promote,S=e(120),M=e(118),C=e(119),T=e(37);t.exports=function(e,t,r,n,i,o,a,s,u,c){if(r){var l,h,p,f,d,v,m,g,_=!1;if(t&&w(e,t),t&&void 0!==t.value||(_=e._materialized),_)g={$type:M};else if(e._boxed)g=x(t);else if(t.$type===S||t.$type===C)g=u?x(t):t.value;else if(u){var y=t.value&&"object"==typeof t.value,b=!t[T];g=y||b?x(t):t.value}else g=t.value;if(i&&(i.hasValue=!0),u){for(d=r.jsonGraph,d||(d=r.jsonGraph={},r.paths=[]),l=0,h=s-1;h>l;l++)f=a[l],d[f]||(d[f]={}),d=d[f];f=a[l],d[f]=_?{$type:M}:g,o&&r.paths.push(o.slice(0,n))}else if(0===n)r.json=g;else{for(d=r.json,d||(d=r.json={}),l=0;n-1>l;l++)p=o[l],d[p]||(d[p]={}),v=d,m=p,d=d[p];p=o[l],null!==p?d[p]=g:v[m]=g}}}},{118:118,119:119,120:120,25:25,29:29,37:37}],23:[function(e,t,r){var f=e(27),n=e(26),i=e(29),d=n.remove,v=i.splice,m=e(119),g=e(20),_=e(22),y=e(21),b=e(28),x=e(35);t.exports=function(e,t,r,n,i,o,a,s,u,c,l){var h=t&&t.$type,p=t&&void 0===t.value;return t&&h?void(f(t)?(t[x]||(v(e,t),d(t)),y(e,r,n,o,a,s,u)):h===m?(l&&(a[n]=null),c||e._treatErrorsAsValues?_(e,t,i,n,o,a,s,u,c,l):g(e,t,n,a,o)):(l&&(a[n]=null),(!p||p&&e._materialized)&&_(e,t,i,n,o,a,s,u,c,l))):void(b(e)?_(e,t,i,n,o,a,s,u,c,l):y(e,r,n,o,a,s,u))}},{119:119,20:20,21:21,22:22,26:26,27:27,28:28,29:29,35:35}],24:[function(e,t,r){var n=e(134);t.exports=function(e){var t=n.fromPath(e);if(Array.isArray(t)===!1)throw new Error("Model#getValueSync must be called with an Array path.");return this._path.length&&(t=this._path.concat(t)),this._syncCheck("getValueSync")&&this._getValueSync(this,t).value}},{134:134}],25:[function(e,t,r){var a=e(40);t.exports=function(e){var t,r,n,i=Object.keys(e);for(t={},r=0,n=i.length;n>r;r++){var o=i[r];o[0]!==a&&(t[o]=e[o])}return t}},{40:40}],26:[function(e,t,r){function n(e,t){var r=t[u]||0;t[o+r]=e,t[u]=r+1,e[s]=r,e[a]=t}function i(e){var t=e[a];if(t){for(var r=e[s],n=t[u];n>r;)t[o+r]=t[o+r+1],++r;t[u]=n-1,e[a]=void 0,e[s]=void 0}}var o=e(43),a=e(33),s=e(42),u=e(44);t.exports={create:n,remove:i}},{33:33,42:42,43:43,44:44}],27:[function(e,t,r){var n=e(106);t.exports=function(e){var t=void 0===e.$expires&&-1||e.$expires;return-1!==t&&1!==t&&(0===t||t<n())}},{106:106}],28:[function(e,t,r){t.exports=function(e){return e._materialized&&!e._source}},{}],29:[function(e,t,r){function n(e,t){var r=e._root,n=r[a];if(n!==t){var i=t[u],o=t[s];o&&(o[u]=i),i&&(i[s]=o),t[u]=void 0,r[a]=t,t[s]=n,n[u]=t}}function i(e,t){var r=e._root,n=t[u],i=t[s];i&&(i[u]=n),n&&(n[s]=i),t[u]=void 0,t===r[a]&&(r[a]=void 0),t===r[o]&&(r[o]=void 0),t[c]=!0,r.expired.push(t)}var a=e(34),o=e(45),s=e(38),u=e(41),c=e(35);t.exports={promote:n,splice:i}},{34:34,35:35,38:38,41:41,45:45}],30:[function(e,t,r){function n(e,t){var r,n,i,o=[];for(n=0,i=t||0,r=e.length;r>i;n++,i++)o[n]=e[i];return o}function i(e,t){var r,n,i,o=[];for(r=0,n=e.length;n>r;r++)o[r]=e[r];for(i=0,n=t.length;n>i;i++)null!==t[i]&&(o[r++]=t[i]);return o}function o(e,t){var r,n,i,o=[];for(r=0,n=e.length;n>r;r++)o[r]=e[r];for(i=0,n=t.length;n>i;i++)o[r++]=t[i];return o}t.exports={fastCat:o,fastCatSkipNulls:i,fastCopy:n}},{}],31:[function(e,t,r){var P=e(11),A=e(23),j=e(27),R=e(143).iterateKeySet,k=e(120),L=e(29).promote;t.exports=function e(t,r,n,i,o,a,s,u,c,l,h,p){var f=p,d=c;if(!n||n&&n.$type||o===i.length)return void A(t,n,i,o,a,s,u,d,l,h,f);var v,m;v=i[o];var g="object"==typeof v,_=o+1,y=!1,b=v;if(g&&(y={},b=R(v,y)),void 0!==b||!y.done){var x=l+1;do{f=!1;var w;null===b?w=n:(w=n[b],d[l]=b,u[o]=b);var S=d,M=x;if(w){var C=w.$type,T=C&&w.value||w;if(_<i.length&&C&&C===k&&!j(w)){h&&A(t,w,i,_,a,s,null,d,M,h,f),L(t,w);var E=P(t,r,r,w,T,a,h);f=!0,w=E[0];var O=E[1];for(S=[],M=O.length,m=0;M>m;++m)S[m]=O[m]}}e(t,r,w,i,_,a,s,u,S,M,h,f),y&&!y.done&&(b=R(v,y))}while(y&&!y.done)}}},{11:11,120:120,143:143,23:23,27:27,29:29}],32:[function(e,t,r){"use strict";function n(e){return new n.Model(e)}"function"==typeof Promise?n.Promise=Promise:n.Promise=e(151),t.exports=n,n.Model=e(2)},{151:151,2:2}],33:[function(e,t,r){t.exports=e(40)+"context"},{40:40}],34:[function(e,t,r){t.exports=e(40)+"head"},{40:40}],35:[function(e,t,r){t.exports=e(40)+"invalidated"},{40:40}],36:[function(e,t,r){t.exports=e(40)+"key"},{40:40}],37:[function(e,t,r){t.exports="$modelCreated"},{}],38:[function(e,t,r){t.exports=e(40)+"next"},{40:40}],39:[function(e,t,r){t.exports=e(40)+"parent"},{40:40}],40:[function(e,t,r){t.exports=String.fromCharCode(30)},{}],41:[function(e,t,r){t.exports=e(40)+"prev"},{40:40}],42:[function(e,t,r){t.exports=e(40)+"ref-index"},{40:40}],43:[function(e,t,r){t.exports=e(40)+"ref"},{40:40}],44:[function(e,t,r){t.exports=e(40)+"refs-length"},{40:40}],45:[function(e,t,r){t.exports=e(40)+"tail"},{40:40}],46:[function(e,t,r){t.exports=e(40)+"version"},{40:40}],47:[function(e,t,r){function _(e,t,r,n,i,o,a,s,u,c){if(!k(e)&&!e.$type)for(var l in e)if(l[0]!==m&&"$"!==l[0]&&P(e,l)){var h=e[l],p=A(h)&&!h.$type,f=g(r,n,i,l,h,p,!1,o,a,s,u,c),d=f[0],v=f[1];d&&(p?_(h,t+1,r,v,d,o,a,s,u,c):D(d,v,l,s)&&I(v,O(d),s,o))}}function d(e,t,r,n,i,o,a,s){if(j(r))return L(r,i,o),[void 0,t];E(o,r);var u=r,c=r.value,l=t;if(r=r[x],null!=r)l=r[b]||t;else{var h=0,p=c.length-1;l=r=t;do{var f=c[h],d=p>h,v=g(t,l,r,f,e,d,!0,n,i,o,a,s);if(r=v[0],k(r))return v;l=v[1]}while(h++<p);if(u[x]!==r){var m=r[M]||0;r[M]=m+1,r[y+m]=u,u[x]=r,u[S]=m}}return[r,l]}function g(e,t,r,n,i,o,a,s,u,c,l,h){for(var p=r.$type;p===C;){var f=d(i,e,r,s,u,c,l,h);if(r=f[0],k(r))return f;t=f[1],p=r&&r.$type}if(void 0!==p)return[r,t];if(null==n){if(o)throw new Error("`null` is not allowed in branch key positions.");r&&(n=r[v])}else t=r,r=t[n];return[r,t]}var v=e(36),y=e(43),m=e(40),b=e(39),x=e(33),w=e(46),S=e(42),M=e(44),C=e(120),T=e(13),E=e(50),O=e(88),P=e(91),A=e(100),j=e(95),R=e(96),k=e(102),L=e(86),N=e(92),I=e(115),D=e(109);t.exports=function(e,t){for(var r=e._root,n=r,i=r.expired,o=N(),a=r._comparator,s=r._errorSelector,u=e._path,c=r.cache,l=u.length?T(e,u).value:c,h=l[b]||c,p=c[w],f=-1,d=t.length;++f<d;){var v=t[f];_(v.json,0,c,h,l,o,i,n,a,s)}var m=c[w],g=r.onChange;R(g)&&p!==m&&g()}},{100:100,102:102,109:109,115:115,120:120,13:13,33:33,36:36,39:39,40:40,42:42,43:43,44:44,46:46,50:50,86:86,88:88,91:91,92:92,95:95,96:96}],48:[function(e,t,r){function m(e,t,r,n,i,o,a,s){var u={},c=t<e.length-1,l=e[t],h=P(l,u);do{var p=v(r,n,i,h,c,!1,o,a,s),f=p[0],d=p[1];f&&(c?m(e,t+1,r,d,f,o,a,s):R(f,d,h,s)&&j(d,M(f),s,o)),h=P(l,u)}while(!u.done)}function h(e,t,r,n,i){if(C(t))return O(t,n,i),[void 0,e];S(i,t);var o=t,a=t.value,s=e;if(t=t[_],null!=t)s=t[g]||e;else{var u=0,c=a.length-1;s=t=e;do{var l=a[u],h=c>u,p=v(e,s,t,l,h,!0,r,n,i);if(t=p[0],E(t))return p;s=p[1]}while(u++<c);if(o[_]!==t){var f=t[x]||0;t[x]=f+1,t[d+f]=o,o[_]=t,o[b]=f}}return[t,s]}function v(e,t,r,n,i,o,a,s,u){for(var c=r.$type;c===f;){var l=h(e,r,a,s,u);if(r=l[0],E(r))return l;t=l[1],c=r.$type}if(void 0!==c)return[r,t];if(null==n){if(i)throw new Error("`null` is not allowed in branch key positions.");r&&(n=r[p])}else t=r,r=t[n];return[r,t]}var p=e(36),d=e(43),g=e(39),_=e(33),y=e(46),b=e(42),x=e(44),f=e(120),w=e(13),S=e(50),M=e(88),C=e(95),T=e(96),E=e(102),O=e(86),P=e(143).iterateKeySet,A=e(92),j=e(115),R=e(109);t.exports=function(e,t){for(var r=e._root,n=r,i=r.expired,o=A(),a=e._path,s=r.cache,u=a.length?w(e,a).value:s,c=u[g]||s,l=s[y],h=-1,p=t.length;++h<p;){var f=t[h];m(f,0,s,c,u,o,i,n)}var d=s[y],v=r.onChange;T(v)&&l!==d&&v()}},{102:102,109:109,115:115,120:120,13:13,143:143,33:33,36:36,39:39,42:42,43:43,44:44,46:46,50:50,86:86,88:88,92:92,95:95,96:96}],49:[function(e,t,r){var d=e(36),v=e(39),m=e(34),g=e(45),_=e(38),y=e(41),b=e(108),x=e(115);t.exports=function(e,t,r,n,i,o){var a=r,s=i;"number"!=typeof s&&(s=.75);var u,c,l,h="number"==typeof o,p=n*s;for(c=t.pop();c;)l=c.$size||0,a-=l,h===!0?x(c,l,e,o):(u=c[v])&&b(c,u,c[d],e),c=t.pop();if(a>=n){var f=e[g];for(c=f;a>=p&&c;)f=f[y],l=c.$size||0,a-=l,h===!0&&x(c,l,e,o),c=f;e[g]=e[y]=c,null==c?e[m]=e[_]=void 0:c[_]=void 0}}},{108:108,115:115,34:34,36:36,38:38,39:39,41:41,45:45}],50:[function(e,t,r){var a=e(121),s=e(34),u=e(45),c=e(38),l=e(41),h=e(100);t.exports=function(e,t){if(h(t)&&t.$expires!==a){var r=e[s],n=e[u],i=t[c],o=t[l];t!==r&&(null!=i&&"object"==typeof i&&(i[l]=o),null!=o&&"object"==typeof o&&(o[c]=i),i=r,null!=r&&"object"==typeof r&&(r[l]=t),e[s]=e[c]=r=t,r[c]=i,r[l]=void 0),null!=n&&t!==n||(e[u]=e[l]=n=o||t)}return t}},{100:100,121:121,34:34,38:38,41:41,45:45}],51:[function(e,t,r){var a=e(34),s=e(45),u=e(38),c=e(41);t.exports=function(e,t){var r=e[a],n=e[s],i=t[u],o=t[c];null!=i&&"object"==typeof i&&(i[c]=o),null!=o&&"object"==typeof o&&(o[u]=i),t===r&&(e[a]=e[u]=i),t===n&&(e[s]=e[c]=o),t[u]=t[c]=void 0,r=n=i=o=void 0}},{34:34,38:38,41:41,45:45}],52:[function(e,t,r){function l(t,r){var n=!1;return function(){if(!n&&!t._disposed){n=!0,t._callbacks[r]=null,t._optimizedPaths[r]=[],t._requestedPaths[r]=[];var e=--t._count;0!==e||t.sent||(t._disposable.dispose(),t.requestQueue.removeRequest(t))}}}function p(e){for(var t=[],r=-1,n=0,i=e.length;i>n;++n)for(var o=e[n],a=0,s=o.length;s>a;++a)t[++r]=o[a];return t}var h=e(59),u=e(60),n=0,i=e(57).GetRequest,f=e(76),d=e(78),v=e(119),m=[],o=function(e,t){this.sent=!1,this.scheduled=!1,this.requestQueue=t,this.id=++n,this.type=i,this._scheduler=e,this._pathMap={},this._optimizedPaths=[],this._requestedPaths=[],this._callbacks=[],this._count=0,this._disposable=null,this._collapsed=null,this._disposed=!1};o.prototype={batch:function(e,t,r){var o=this,n=o._optimizedPaths,a=o._requestedPaths,s=o._callbacks,i=n.length;return n[i]=t,a[i]=e,s[i]=r,++o._count,o.scheduled||(o.scheduled=!0,o._disposable=o._scheduler.schedule(function(){u(o,n,function(e,t){if(o.requestQueue.removeRequest(o),o._disposed=!0,o._count){o._merge(a,e,t);for(var r=0,n=s.length;n>r;++r){var i=s[r];i&&i(e,t)}}})})),l(o,i)},add:function(e,t,r){var n,i,o=this,a=h(e,t,o._pathMap);a?(i=a[2],n=a[1]):(i=e,n=t);var s=!1,u=!1;if(n.length<t.length){s=!0;var c=o._callbacks.length;o._callbacks[c]=r,o._requestedPaths[c]=a[0],o._optimizedPaths[c]=[],++o._count,u=l(o,c)}return[s,i,n,u]},_merge:function(e,t,r){var n=this,i=n.requestQueue.model,o=i._root,a=o.errorSelector,s=o.comparator,u=i._path;i._path=m;var c=p(e);if(t){var l=t;l instanceof Error&&(l={message:l.message}),l.$type||(l={$type:v,value:l});var h=c.map(function(e){return{path:e,value:l}});d(i,h,null,a,s)}else f(i,[{paths:c,jsonGraph:r.jsonGraph}],null,a,s);i._path=u}},t.exports=o},{119:119,57:57,59:59,60:60,76:76,78:78}],53:[function(e,t,r){function n(){this.length=0,this.pending=!1,this.pathmaps=[],a.call(this,this._subscribe)}var i=e(159),o=i.Observer,a=i.Observable,s=i.Disposable,u=i.SerialDisposable,c=i.CompositeDisposable,l=e(9),h=e(143),f=h.iterateKeySet;n.create=function(e,t,r){var n=new this;return n.queue=e,n.model=t,n.index=r,n},n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.insertPath=function(e,t,r,n,i){var o=n||0,a=i||e.length-1,s=r||this.pathmaps[a+1]||(this.pathmaps[a+1]=Object.create(null));if(void 0===s||null===s)return!1;var u,c,l=e[o],h={};u=f(l,h);do{if(c=s[u],a>o){if(null==c){if(t)return!1;c=s[u]=Object.create(null)}if(this.insertPath(e,t,c,o+1,a)===!1)return!1}else s[u]=(c||0)+1,this.length+=1;h.done||(u=f(l,h))}while(!h.done);return!0},n.prototype.removePath=function(e,t,r,n){var i=r||0,o=n||e.length-1,a=t||this.pathmaps[o+1];if(void 0===a||null===a)return!0;var s,u,c=0,l=e[i],h={};s=f(l,h);do{if(u=a[s],void 0!==u&&null!==u){if(o>i){c+=this.removePath(e,u,i+1,o);var p=void 0;for(p in u)break;void 0===p&&delete a[s]}else u=a[s]=(u||1)-1,0===u&&delete a[s],c+=1,this.length-=1;h.done||(s=f(l,h))}}while(!h.done);return c},n.prototype.getSourceObserver=function(t){var r=this;return o.create(function(e){e.jsonGraph=e.jsonGraph||e.jsong||e.values||e.value,e.index=r.index,t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},n.prototype._subscribe=function(e){var t=this,r=this.queue;t.pending=!0;var n=!1,i=new u,o=s.create(function(){n||(n=!0,r&&r._remove(t))}),a=new c(i,o);try{i.setDisposable(this.model._source[this.method](this.getSourceArgs()).subscribe(this.getSourceObserver(e)))}catch(e){throw new l(e)}return a},t.exports=n},{143:143,159:159,9:9}],54:[function(e,t,r){function n(e,t){this.total=0,this.model=e,this.requests=[],this.scheduler=t}var i=e(58),m=e(40),g=e(90),_=e(100),o=e(143);n.prototype.set=function(e){return e.paths=o.collapse(e.paths),i.create(this.model,e)},n.prototype._remove=function(e){var t=this.requests,r=t.indexOf(e);-1!==r&&t.splice(r,1)},n.prototype.distributePaths=function(e,t,r){var n,i,o=this.model,a=-1,s=e.length,u=-1,c=t.length,l=[];e:for(;++a<s;){var h=e[a];for(u=-1;++u<c;)if(i=t[u],i.insertPath(h,i.pending)){l[u]=i;continue e}n||(n=r.create(this,o,this.total++),t[u]=n,l[c++]=n),n.insertPath(h,!1)}var p=[],f=-1;for(u=-1;++u<c;)i=l[u],null!=i&&(p[++f]=i);return p},n.prototype.mergeJSONGraphs=function(e,t){var r=0,n=[],i=[],o=[],a=e.index,s=t.index;e.index=Math.max(a,s),n[-1]=e.jsonGraph||{},i[-1]=t.jsonGraph||{};e:for(;r>-1;){for(var u=n[r-1],c=i[r-1],l=o[r-1]||(o[r-1]=Object.keys(c));l.length>0;){var h=l.pop();if(h[0]!==m)if(u.hasOwnProperty(h)){var p=u[h],f=g(p),d=c[h],v=g(d);if(_(p)&&_(d)&&!f&&!v){n[r]=p,i[r]=d,r+=1;continue e}s>a&&(u[h]=d)}else u[h]=c[h]}r-=1}return e},t.exports=n},{100:100,143:143,40:40,58:58,90:90}],55:[function(e,t,r){function n(e,t){this.model=e,this.scheduler=t,this.requests=this._requests=[]}var i=e(54),o=e(56);n.prototype.get=o.prototype.get,n.prototype.removeRequest=o.prototype.removeRequest,n.prototype.set=i.prototype.set,n.prototype.call=i.prototype.call,t.exports=n},{54:54,56:56}],56:[function(e,t,r){function n(e,t){this.model=e,this.scheduler=t,this.requests=this._requests=[]}var m=e(57),g=e(52);n.prototype={setScheduler:function(e){this.scheduler=e},get:function(e,t,r){function n(){f||(--c,0===c&&r())}var i,o,a,s=this,u=[],c=0,l=s._requests,h=t,p=e,f=!1;for(i=0,o=l.length;o>i;++i)if(a=l[i],a.type===m.GetRequest){if(a.sent){var d=a.add(p,h,n);d[0]&&(p=d[1],h=d[2],u[u.length]=d[3],++c)}else a.batch(p,h,n),h=[],p=[],++c;if(!h.length)break}if(h.length){a=new g(s.scheduler,s),l[l.length]=a,++c;var v=a.batch(p,h,n);u[u.length]=v}return function(){if(!f&&0!==c){f=!0;for(var e=u.length,t=0;e>t;++t)u[t]()}}},removeRequest:function(e){for(var t=this._requests,r=t.length;--r>=0;)if(t[r].id===e.id){t.splice(r,1);break}}},t.exports=n},{52:52,57:57}],57:[function(e,t,r){t.exports={GetRequest:"GET"}},{}],58:[function(e,t,r){function n(){c.call(this)}var i=e(159),u=i.Observer,c=e(53),l=e(83),h=e(76),p=e(78),f=new Array(0);n.create=function(e,t){var r=new n;return r.model=e,r.jsonGraphEnvelope=t,r},n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.prototype.method="set",n.prototype.insertPath=function(){return!1},n.prototype.removePath=function(){return 0},n.prototype.getSourceArgs=function(){return this.jsonGraphEnvelope},n.prototype.getSourceObserver=function(r){var n=this.model,i=n._path,o=this.jsonGraphEnvelope.paths,e=n._root,a=e.errorSelector,s=e.comparator;return c.prototype.getSourceObserver.call(this,u.create(function(e){n._path=f;var t=h(n,[{paths:o,jsonGraph:e.jsonGraph}],null,a,s);e.paths=t[1],n._path=i,r.onNext(e)},function(t){n._path=f,p(n,l(o,function(e){return{path:e,value:t}}),null,a,s),n._path=i,r.onError(t)},function(){r.onCompleted()}))},t.exports=n},{159:159,53:53,76:76,78:78,83:83}],59:[function(e,t,r){var f=e(143).hasIntersection,d=e(84);t.exports=function(e,t,r){for(var n=[],i=[],o=[],a=-1,s=-1,u=!1,c=0,l=t.length;l>c;++c){var h=t[c],p=r[h.length];p&&f(p,h,0)?(!u&&c>0&&(i=d(e,0,c),n=d(t,0,c)),o[++a]=e[c],u=!0):u&&(n[++s]=h,i[s]=e[c])}return u?[o,n,i]:null}},{143:143,84:84}],60:[function(e,t,r){var n=e(143),y=n.toTree,b=n.toPaths;t.exports=function(e,t,r){if(0===e._count)return void e.requestQueue.removeRequest(e);e.sent=!0,e.scheduled=!1;for(var n=e._pathMap,i=Object.keys(t),o=0,a=i.length;a>o;++o)for(var s=t[o],u=0,c=s.length;c>u;++u){var l=s[u],h=l.length;if(n[h]){var p=n[h];p[p.length]=l}else n[h]=[l]}for(var f=Object.keys(n),d=0,v=f.length;v>d;++d){var m=f[d];n[m]=y(n[m])}var g,_=e._collasped=b(n);e.requestQueue.model._source.get(_).subscribe(function(e){g=e},function(e){r(e,g)},function(){r(null,g)})}},{143:143}],61:[function(e,t,r){function n(e){b.call(this,e||i)}function _(e){return y.Observable.defer(function(){return e})}function i(i){function e(e){function t(e,t){if(Boolean(t.invalidated))e.invalidations.push(e.localThisPath.concat(t.path));else{var r=t.path,n=t.value;Boolean(n)&&"object"==typeof n&&n.$type===M?e.references.push({path:f(r),value:t.value}):e.values.push({path:f(r),value:t.value})}return e}function r(t){var e=t.values.concat(t.references);return e.length>0?_(l.set.apply(l,e)._toJSONG()).map(function(e){return{results:t,envelope:e}}):b["return"]({results:t,envelope:{jsonGraph:{},paths:[]}})}function n(e){var t,r=e.envelope,n=e.results,i=n.values,o=n.references,a=n.invalidations,s=i.map(p).map(f),u=o.reduce(h,[]),c=d.map(f),l=u.concat(c);return t=l.length>0?_(v.get.apply(v,s.concat(l))._toJSONG()):b["return"](r),t.doAction(function(e){e.invalidated=a})}function h(e,t){var r=t.path;return e.push.apply(e,c.map(function(e){return r.concat(e)})),e}function p(e){return e.path}var i=e&&e.localFn;if("function"==typeof i){var o=e.model,a=o._path,s=i.apply(o,u).reduce(t,{values:[],references:[],invalidations:[],localThisPath:a}).flatMap(r).flatMap(n);return b["return"](s)}return b.empty()}function t(e){function t(e){var t=e.invalidated;return t&&t.length&&v.invalidate.apply(v,t),e}return e&&"object"==typeof e?y.Observable.defer(function(){var t;try{t=e.call(h,u,c,d)}catch(e){t=b["throw"](new w(e))}return t}).map(t):b.empty()}function r(e){return _(l.set(e)).reduce(function(e){return e},null).map(function(){return{invalidated:e.invalidated,paths:e.paths.map(function(e){return e.slice(s.length)})}})}function f(e){return p.concat(e)}var n=this.args,o=this.model,a=S.fromPath(n[0]),u=n[1]||[],c=(n[2]||[]).map(S.fromPath),d=(n[3]||[]).map(S.fromPath),v=o._clone({_path:[]}),l=v.withoutDataSource(),s=o._path,h=s.concat(a),p=h.slice(0,-1),m=_(o.withoutDataSource().get(a)).map(function(e){for(var t=e.json,r=-1,n=a.length;t&&++r<n;)t=t[a[r]];var i=v._derefSync(p).boxValues();return{model:i,localFn:t}}).flatMap(e).defaultIfEmpty(t(o._source)).mergeAll().flatMap(r),g=new x;return g.add(m.subscribe(function(e){var t=e.paths,r=e.invalidated,n=o.get.apply(o,t);"AsJSONG"===i.outputFormat&&(n=_(n._toJSONG()).doAction(function(e){e.invalidated=r})),g.add(n.subscribe(i))},function(e){i.onError(e)})),g}var y=e(159)&&e(158),b=y.Observable,x=y.CompositeDisposable,o=e(64),w=e(9),S=e(134),M=e(120);n.create=o.create,n.prototype=Object.create(b.prototype),n.prototype.constructor=n,n.prototype.invokeSourceRequest=function(e){return this},n.prototype.ensureCollect=function(e){return this},n.prototype.initialize=function(){return this},t.exports=n},{120:120,134:134,158:158,159:159,64:64,9:9}],62:[function(e,t,r){function n(e){o.call(this,e)}var i=e(159),o=i.Observable,a=e(64),p=e(134),s=e(88),u=e(49),f=e(81),c=e(46),d=Array.isArray,v=e(101),m=e(98),g=e(99);n.create=a.create,n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.subscribeCount=0,n.prototype.subscribeLimit=10,n.prototype.initialize=function(){for(var e,t,r=this.model,n=this.outputFormat||"AsPathMap",i=this.isProgressive,o=[{}],a=[],s=this.args,u=-1,c=s.length;++u<c;){var l,h=s[u];d(h)||"string"==typeof h?(h=p.fromPath(h),l="PathValues"):v(h)?(h.path=p.fromPath(h.path),l="PathValues"):g(h)?l="JSONGs":m(h)&&(l="PathMaps"),t!==l&&(t=l,e={inputType:l,arguments:[]},a.push(e),e.values=o),e.arguments.push(h)}return this.boundPath=f(r._path),this.groups=a,this.outputFormat=n,this.isProgressive=i,this.isCompleted=!1,this.isMaster=null==r._source,this.values=o,this},n.prototype.invokeSourceRequest=function(e){return this},n.prototype.ensureCollect=function(r){var t=this["finally"](function(){var e=r._root,t=e.cache;e.collectionScheduler.schedule(function(){u(e,e.expired,s(t),r._maxSize,r._collectRatio,t[c])})});return new this.constructor(function(e){return t.subscribe(e)})},t.exports=n},{101:101,134:134,159:159,46:46,49:49,64:64,81:81,88:88,98:98,99:99}],63:[function(e,t,r){function n(e){a.call(this,e||i)}function i(e){for(var t=this.model,r=this.method,n=this.groups,i=-1,o=n.length;++i<o;){var a=n[i],s=a.inputType,u=a.arguments;if(u.length>0){var c="_"+r+s+"AsJSON",l=t[c];l(t,u)}}return e.onCompleted(),h.empty}var o=e(159),h=o.Disposable,a=e(62);n.create=a.create,n.prototype=Object.create(a.prototype),n.prototype.method="invalidate",n.prototype.constructor=n,t.exports=n},{159:159,62:62}],64:[function(e,t,r){function n(e){this._subscribe=e}function i(e){var t=this.model,r=new this.type;return r.model=t,r.args=this.args,r.outputFormat=e.outputFormat||"AsPathMap",r.isProgressive=e.isProgressive||!1,r.subscribeCount=0,r.subscribeLimit=e.retryLimit||10,r.initialize().invokeSourceRequest(t).ensureCollect(t).subscribe(e)}var o=e(32),a=e(159)&&e(158),s=a.Observable,u=e(84),c=e(105),l={outputFormat:{value:"AsJSONG"}},h={isProgressive:{value:!0}};n.create=function(e,t){var r=new n(i);return r.args=t,r.type=this,r.model=e,r},n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype._mixin=function(){var t=this,r=u(arguments);return new t.constructor(function(e){return t.subscribe(r.reduce(function(e,t){return Object.create(e,t)},e))})},n.prototype._toJSONG=function(){return this._mixin(l)},n.prototype.progressively=function(){return this._mixin(h)},n.prototype.subscribe=function(e,t,r){var n=e;n&&"object"==typeof n||(n={onNext:e||c,onError:t||c,onCompleted:r||c});var i=this._subscribe(n);switch(typeof i){case"function":return{dispose:i};case"object":return i||{dispose:c};default:return{dispose:c}}},n.prototype.then=function(e,t){var i=this;return new o.Promise(function(e,t){var r,n=!1;i.toArray().subscribe(function(e){r=e.length<=1?e[0]:e},function(e){n=!0,t(e)},function(){n===!1&&e(r)})}).then(e,t)},t.exports=n},{105:105,158:158,159:159,32:32,84:84}],65:[function(e,t,r){function n(e){c.call(this,e||i)}function i(e){return this.isCompleted?_.call(this,e):o.call(this,e)}function o(e){if(this.subscribeCount++>this.subscribeLimit)return e.onError("Loop kill switch thrown."),x.empty;for(var t=[],r=[],n=this.model,i=this.isMaster,o=n._root,a=this.outputFormat,s=o.errorSelector,u=this.method,c=this.groups,l=-1,h=c.length;++l<h;){var p=c[l],f=p.inputType,d=p.arguments;if(d.length>0){var v="_"+u+f+a,m=n[v],g=m(n,d,null,s);r.push.apply(r,g[1]),"PathValues"===f?t.push.apply(t,d.map(y)):"JSONGs"===f?t.push.apply(t,w(d,b)):t.push.apply(t,g[0])}}return this.requestedPaths=t,i?(this.isCompleted=!0,_.call(this,e)):void e.onError({method:u,optimizedPaths:r,invokeSourceRequest:!0})}function _(e){var t=new s(this.model,this.requestedPaths);return"AsJSONG"===this.outputFormat&&(t=t._toJSONG()),this.isProgressive&&(t=t.progressively()),t.subscribe(e)}function y(e){return e.path}function b(e){return e.paths}var a=e(159),u=a.Observable,x=a.Disposable,s=e(67),c=e(62),l=e(9),w=e(82),h=new Array(0);n.create=c.create,n.prototype=Object.create(c.prototype),n.prototype.method="set",n.prototype.constructor=n,n.prototype.invokeSourceRequest=function(o){var a=this,s=this["catch"](function(e){var t;if(e&&e.invokeSourceRequest===!0){var r={},n=o._path,i=e.optimizedPaths;o._path=h,o._getPathValuesAsJSONG(o._materialize().withoutDataSource(),i,[r]),o._path=n,t=o._request.set(r)["do"](function(e){a.isCompleted=i.length===e.paths.length},function(){a.isCompleted=!0}).materialize().flatMap(function(e){if("C"===e.kind)return u.empty();if("E"===e.kind){var t=e.exception;if(l.is(t))return u["throw"](e.exception)}return s})}else t=u["throw"](e);return t});return new this.constructor(function(e){return s.subscribe(e)})},t.exports=n},{159:159,62:62,67:67,82:82,9:9}],66:[function(e,t,r){var n=function(e){this.disposed=!1,this.currentDisposable=e};n.prototype={dispose:function(){if(!this.disposed&&this.currentDisposable){this.disposed=!0;var e=this.currentDisposable;e.dispose?e.dispose():e()}}},t.exports=n},{}],67:[function(e,t,r){var n=e(64),a=e(68),s=e(69),u={dispose:function(){}},i=e(159).Observable,o=t.exports=function(e,t,r,n){this.model=e,this.currentRemainingPaths=t,this.isJSONGraph=r||!1,this.isProgressive=n||!1};o.prototype=Object.create(i.prototype),o.prototype.subscribe=n.prototype.subscribe,o.prototype.then=n.prototype.then,o.prototype._toJSONG=function(){return new o(this.model,this.currentRemainingPaths,!0,this.isProgressive)},o.prototype.progressively=function(){return new o(this.model,this.currentRemainingPaths,this.isJSONGraph,!0)},o.prototype._subscribe=function(e){var t=[{}],r=[],n=e.isJSONG=this.isJSONGraph,i=this.isProgressive,o=a(this.model,this.currentRemainingPaths,e,i,n,t,r);return o?s(this,this.model,o,e,t,r,1):u}},{159:159,64:64,68:68,69:69}],68:[function(e,t,r){var n=e(19),v=n.getWithPathsAsJSONGraph,m=n.getWithPathsAsPathMap;t.exports=function(e,t,r,n,i,o,a){var s;if(s=i?v(e,t,o):m(e,t,o),s.criticalError)return r.onError(s.criticalError),null;var u=s.hasValue,c=!s.requestedMissingPaths||!e._source,l=o[0].json||o[0].jsonGraph;if(s.errors)for(var h=s.errors,p=a.length,f=0,d=h.length;d>f;++f,++p)a[p]=h[f];if(u&&n||l&&c)try{++e._root.syncRefCount,r.onNext(o[0])}catch(e){throw e}finally{--e._root.syncRefCount}return c?(a.length?r.onError(a):r.onCompleted(),null):s}},{19:19}],69:[function(e,t,r){var g=e(68),_=e(10),y=e(30).fastCat,b=e(49),x=e(88),w=e(66),S=e(46);t.exports=function i(o,a,e,s,u,c,l){if(10===l)throw new _;var t=a._request,h=e.requestedMissingPaths,r=e.optimizedMissingPaths,p=new w,n=[],f=a._path;if(f.length)for(var d=0,v=h.length;v>d;++d)n[d]=y(f,h[d]);else n=h;var m=t.get(n,r,function(){var e=g(a,h,s,o.isProgressive,o.isJSONGraph,u,c);if(e)p.currentDisposable=i(o,a,e,s,u,c,l+1);else{var t=a._root,r=t.cache,n=r[S];b(t,t.expired,x(r),a._maxSize,a._collectRatio,n)}});return p.currentDisposable=m,p}},{10:10,30:30,46:46,49:49,66:66,68:68,88:88}],70:[function(e,t,r){var n=e(67);t.exports=function(e){return new n(this,e)}},{67:67}],71:[function(e,t,r){var n=e(134),i=e(64),o=e(72),a=e(116),s=e(67);t.exports=function(){var t=a(arguments,o,"get");if(t!==!0)return new i(function(e){e.onError(t)});var e=n.fromPathsOrPathValues(arguments);return new s(this,e)}},{116:116,134:134,64:64,67:67,72:72}],72:[function(e,t,r){t.exports={path:!0,pathSyntax:!0}},{}],73:[function(e,t,r){function n(){}var i=e(123),o=e(159),a=o.Disposable;n.prototype.schedule=function(e){return i(e),a.empty},n.prototype.scheduleWithState=function(e,t){var r=this;return i(function(){t(r,e)}),a.empty},t.exports=n},{123:123,159:159}],74:[function(e,t,r){function n(){}var i=e(159),o=i.Disposable;n.prototype.schedule=function(e){return e(),o.empty},n.prototype.scheduleWithState=function(e,t){return t(this,e),o.empty},t.exports=n},{159:159}],75:[function(e,t,r){function n(e){this.delay=e}var i=e(159),o=i.Disposable;n.prototype.schedule=function(e){var t=setTimeout(e,this.delay);return o.create(function(){void 0!==t&&(clearTimeout(t),t=void 0)})},n.prototype.scheduleWithState=function(e,t){var r=this,n=setTimeout(function(){t(r,e)},this.delay);return o.create(function(){void 0!==n&&(clearTimeout(n),n=void 0)})},t.exports=n},{159:159}],76:[function(e,t,r){function C(e,t,r,n,i,o,a,s,u,c,l,h,p,f,d,v,m){for(var g={},_=t<e.length-1,y=e[t],b=k(y,g),x=h.index;;){l.depth=t;var w=T(r,n,i,o,a,s,b,_,!1,l,h,p,f,d,v,m);l[t]=b,l.index=t,h[h.index++]=b;var S=w[0],M=w[1];if(S&&(_?C(e,t+1,r,M,S,o,w[3],w[2],u,c,l,h,p,f,d,v,m):(O(d,S),u.push(l.slice(0,l.index+1)),c.push(h.slice(0,h.index)))),b=k(y,g),g.done)break;h.index=x}}function _(e,t,r,n,i,o,a,s,u,c,l){var h=t.value;if(o.splice(0,o.length),o.push.apply(o,h),P(t))return o.index=h.length,R(t,s,u),[void 0,e,n,r];O(u,t);var p=0,f=t,d=h.length-1,v=t=e,m=n=r;do{var g=h[p],_=d>p,y=T(e,v,t,r,m,n,g,_,!0,i,o,a,s,u,c,l);if(t=y[0],j(t))return o.index=p,y;v=y[1],n=y[2],m=y[3]}while(p++<d);if(o.index=p,f[w]!==t){var b=t[M]||0;t[M]=b+1,t[x+b]=f,f[w]=t,f[S]=b}return[t,v,n,m]}function T(e,t,r,n,i,o,a,s,u,c,l,h,p,f,d,v){for(var m=r.$type;m===b;){var g=_(e,r,n,o,c,l,h,p,f,d,v);if(r=g[0],j(r))return g;t=g[1],o=g[2],i=g[3],m=r.$type}if(void 0!==m)return[r,t,o,i];if(null==a){if(s)throw new Error("`null` is not allowed in branch key positions.");r&&(a=r[y])}else t=r,i=o,r=t[a],o=i&&i[a];return r=N(t,r,o,a,c,l,h,p,f,d,v),[r,t,o,i]}var y=e(36),x=e(43),w=e(33),E=e(46),S=e(42),M=e(44),b=e(120),O=e(50),P=e(94),A=e(96),j=e(102),R=e(86),k=e(143).iterateKeySet,L=e(92),N=e(103);t.exports=function(e,t,r,n,i){for(var o=e._root,a=o,s=o.expired,u=L(),c=o.cache,l=c[E],h=[],p=[],f=[],d=[],v=-1,m=t.length;++v<m;)for(var g=t[v],_=g.paths,y=g.jsonGraph,b=-1,x=_.length;++b<x;){var w=_[b];p.index=0,C(w,0,c,c,c,y,y,y,f,d,h,p,u,s,a,i,n)}var S=c[E],M=o.onChange;return A(M)&&l!==S&&M(),[f,d]}},{102:102,103:103,120:120,143:143,33:33,36:36,42:42,43:43,44:44,46:46,50:50,86:86,92:92,94:94,96:96}],77:[function(e,t,r){function M(e,t,r,n,i,o,a,s,u,c,l,h,p,f){var d=T(e);if(d&&d.length)for(var v=0,m=d.length,g=u.index;;){var _=d[v],y=e[_],b=j(y)&&!y.$type;s.depth=t;var x=C(r,n,i,_,y,b,!1,s,u,c,l,h,p,f);s[t]=_,s.index=t,u[u.index++]=_;var w=x[0],S=x[1];if(w&&(b?M(y,t+1,r,S,w,o,a,s,u,c,l,h,p,f):(A(h,w),o.push(s.slice(0,s.index+1)),a.push(u.slice(0,u.index)))),++v>=m)break;u.index=g}}function m(e,t,r,n,i,o,a,s,u,c){var l=r.value;if(i.splice(0,i.length),i.push.apply(i,l),S(r))return i.index=l.length,L(r,a,s),[void 0,t];A(s,r);var h=r,p=t;if(r=r[b],null!=r)p=r[E]||t,i.index=l.length;else{var f=0,d=l.length-1;p=r=t;do{var v=l[f],m=d>f,g=C(t,p,r,v,e,m,!0,n,i,o,a,s,u,c);if(r=g[0],k(r))return i.index=f,g;p=g[1]}while(f++<d);if(i.index=f,h[b]!==r){var _=r[w]||0;r[w]=_+1,r[y+_]=h,h[b]=r,h[x]=_}}return[r,p]}function C(e,t,r,n,i,o,a,s,u,c,l,h,p,f){for(var d=r.$type;d===_;){var v=m(i,e,r,s,u,c,l,h,p,f);if(r=v[0],k(r))return v;t=v[1],d=r&&r.$type}if(void 0!==d)return[r,t];if(null==n){if(o)throw new Error("`null` is not allowed in branch key positions.");r&&(n=r[g])}else t=r,r=t[n];return r=I(t,r,n,i,o,a,s,u,c,l,h,p,f),[r,t]}function T(e){if(j(e)&&!e.$type){var t=[],r=0;o(e)&&(t[r++]="length");for(var n in e)n[0]!==i&&"$"!==n[0]&&a(e,n)&&(t[r++]=n);return t}}var g=e(36),y=e(43),i=e(40),E=e(39),b=e(33),O=e(46),x=e(42),w=e(44),_=e(120),P=e(13),o=Array.isArray,A=e(50),a=e(91),j=e(100),S=e(95),R=e(96),k=e(102),L=e(86),N=e(92),I=e(104);t.exports=function(e,t,r,n,i){for(var o=e._root,a=o,s=o.expired,u=N(),c=e._path,l=o.cache,h=c.length?P(e,c).value:l,p=h[E]||l,f=l[O],d=[],v=[],m=[],g=c.length,_=-1,y=t.length;++_<y;){var b=t[_],x=c.slice(0);x.index=g,M(b.json,0,l,p,h,v,m,d,x,u,s,a,i,n)}var w=l[O],S=o.onChange;return R(S)&&f!==w&&S(),[v,m]}},{100:100,102:102,104:104,120:120,13:13,33:33,36:36,39:39,40:40,42:42,43:43,44:44,46:46,50:50,86:86,91:91,92:92,95:95,96:96}],78:[function(e,t,r){function T(e,t,r,n,i,o,a,s,u,c,l,h,p,f,d){for(var v={},m=r<t.length-1,g=t[r],_=k(g,v),y=c.index;;){u.depth=r;var b=S(n,i,o,_,e,m,!1,u,c,l,h,p,f,d);u[r]=_,u.index=r,c[c.index++]=_;var x=b[0],w=b[1];if(x&&(m?T(e,t,r+1,n,w,x,a,s,u,c,l,h,p,f,d):(M(p,x),a.push(u.slice(0,u.index+1)),s.push(c.slice(0,c.index)))),_=k(g,v),v.done)break;c.index=y}}function m(e,t,r,n,i,o,a,s,u,c){var l=r.value;if(i.splice(0,i.length),i.push.apply(i,l),C(r))return i.index=l.length,R(r,a,s),[void 0,t];M(s,r);var h=r,p=t;if(r=r[b],null!=r)p=r[E]||t,i.index=l.length;else{var f=0,d=l.length-1;p=r=t;do{var v=l[f],m=d>f,g=S(t,p,r,v,e,m,!0,n,i,o,a,s,u,c);if(r=g[0],j(r))return i.index=f,g;p=g[1]}while(f++<d);if(i.index=f,h[b]!==r){var _=r[w]||0;r[w]=_+1,r[y+_]=h,h[b]=r,h[x]=_}}return[r,p]}function S(e,t,r,n,i,o,a,s,u,c,l,h,p,f){for(var d=r.$type;d===_;){var v=m(i,e,r,s,u,c,l,h,p,f);if(r=v[0],j(r))return v;t=v[1],d=r.$type}if(void 0!==d)return[r,t];if(null==n){if(o)throw new Error("`null` is not allowed in branch key positions.");r&&(n=r[g])}else t=r,r=t[n];return r=N(t,r,n,i,o,a,s,u,c,l,h,p,f),[r,t]}var g=e(36),y=e(43),E=e(39),b=e(33),O=e(46),x=e(42),w=e(44),_=e(120),P=e(13),M=e(50),C=e(95),A=e(96),j=e(102),R=e(86),k=e(143).iterateKeySet,L=e(92),N=e(104);t.exports=function(e,t,r,n,i){for(var o=e._root,a=o,s=o.expired,u=L(),c=e._path,l=o.cache,h=c.length?P(e,c).value:l,p=h[E]||l,f=l[O],d=[],v=[],m=[],g=c.length,_=-1,y=t.length;++_<y;){var b=t[_],x=b.path,w=b.value,S=c.slice(0);S.index=g,T(w,x,0,l,p,h,v,m,d,S,u,s,a,i,n)}var M=l[O],C=o.onChange;return A(C)&&f!==M&&C(),[v,m]}},{102:102,104:104,120:120,13:13,143:143,33:33,36:36,39:39,42:42,43:43,44:44,46:46,50:50,86:86,92:92,95:95,96:96}],79:[function(e,t,r){var s=e(130),u=e(64),c=e(101);t.exports=function(e,t){for(var r=c(e)?e:s.pathValue(e,t),n=0,o=r.path,i=o.length;++n<i;)if("object"==typeof o[n])return new u(function(e){e.onError(new Error("Paths must be simple paths"))});var a=this;return new u(function(i){return a._set(r).subscribe(function(e){for(var t=e.json,r=-1,n=o.length;t&&++r<n;)t=t[o[r]];i.onNext(t)},function(e){i.onError(e)},function(){i.onCompleted()})})}},{101:101,130:130,64:64}],80:[function(e,t,r){var u=e(134),c=e(101),l=e(78);t.exports=function(e,t,r,n){var i=u.fromPath(e),o=t,a=r,s=n;if(c(i)?(s=a,a=o,o=i):o={path:i,value:o},c(o)===!1)throw new Error("Model#setValueSync must be called with an Array path.");return"function"!=typeof a&&(a=this._root._errorSelector),"function"!=typeof s&&(s=this._root._comparator),this._syncCheck("setValueSync")?(l(this,[o]),this._getValueSync(this,o.path).value):void 0}},{101:101,134:134,78:78}],81:[function(e,t,r){t.exports=function(e){if(!e)return e;for(var t=-1,r=e.length,n=[];++t<r;)n[t]=e[t];return n}},{}],82:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=-1,i=e.length,o=[];++n<i;)for(var a=t(e[n],n,e),s=-1,u=a.length;++s<u;)o[++r]=a[s];return o}},{}],83:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=e.length,i=new Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},{}],84:[function(e,t,r){t.exports=function(e,t,r){var n=t||0,i=-1,o=e.length-n;0>o&&(o=0),r>0&&o>r&&(o=r);for(var a=new Array(o);++i<o;)a[i]=e[i+n];return a}},{}],85:[function(e,t,r){var i=e(40),o=e(91),a=Array.isArray,s=e(100);t.exports=function(e){var t=e;if(s(t)){t=a(e)?[]:{};var r=e;for(var n in r)n[0]!==i&&o(r,n)&&(t[n]=r[n])}return t}},{100:100,40:40,91:91}],86:[function(e,t,r){var n=e(51),i=e(35);t.exports=function(e,t,r){return e[i]||(e[i]=!0,t.push(e),n(r,e)),e}},{35:35,51:51}],87:[function(e,t,r){var n=e(100);t.exports=function(e){return n(e)&&e.$expires||void 0}},{100:100}],88:[function(e,t,r){var n=e(100);t.exports=function(e){return n(e)&&e.$size||0}},{100:100}],89:[function(e,t,r){var n=e(100);t.exports=function(e){return n(e)&&e.$timestamp||void 0}},{100:100}],90:[function(e,t,r){var n=e(100);t.exports=function(e,t){var r=n(e)&&e.$type||void 0;return t&&r?"branch":r}},{100:100}],91:[function(e,t,r){var n=e(100),i=Object.prototype.hasOwnProperty;t.exports=function(e,t){return n(e)&&i.call(e,t)}},{100:100}],92:[function(e,t,r){var n=1;t.exports=function(){return n++}},{}],93:[function(e,t,r){var i=e(36),o=e(39),a=e(46);t.exports=function(e,t,r,n){return e[i]=r,e[o]=t,e[a]=n,t[r]=e,e}},{36:36,39:39,46:46}],94:[function(e,t,r){var n=e(106),i=e(122),o=e(121);t.exports=function(e){var t=e.$expires;return null!=t&&t!==o&&t!==i&&t<n()}},{106:106,121:121,122:122}],95:[function(e,t,r){var n=e(106),i=e(122),o=e(121);t.exports=function(e){var t=e.$expires;return null!=t&&t!==o&&(t===i||t<n())}},{106:106,121:121,122:122}],96:[function(e,t,r){var n="function";t.exports=function(e){return Boolean(e)&&typeof e===n}},{}],97:[function(e,t,r){var n=e(40);t.exports=function(e){return"$size"===e||e&&e.charAt(0)===n}},{40:40}],98:[function(e,t,r){var n=e(100);t.exports=function(e){return n(e)&&"json"in e}},{100:100}],99:[function(e,t,r){var n=Array.isArray,i=e(100);t.exports=function(e){return i(e)&&n(e.paths)&&(i(e.jsonGraph)||i(e.jsong)||i(e.json)||i(e.values)||i(e.value))}},{100:100}],100:[function(e,t,r){var n="object";t.exports=function(e){return null!==e&&typeof e===n}},{}],101:[function(e,t,r){var n=Array.isArray,i=e(100);t.exports=function(e){return i(e)&&(n(e.path)||"string"==typeof e.path)}},{100:100}],102:[function(e,t,r){var n="object";t.exports=function(e){return null==e||typeof e!==n}},{}],103:[function(e,t,r){var y=e(36),b=e(39),x=e(120),w=e(119),S=e(88),M=e(89),C=e(100),T=e(95),E=e(96),O=e(50),P=e(117),A=e(93),j=e(86),R=e(110),k=e(115),L=e(107);t.exports=function(e,t,r,n,i,o,a,s,u,c,l){var h,p,f,d,v,m,g;if(t===r){if(null===r)return t=P(r,void 0,r),e=k(e,-t.$size,u,a),t=A(t,e,n),O(u,t),t;if(void 0===r)return r;if(d=C(t),d&&(p=t.$type,null==p))return null==t[b]&&(t[y]=n,t[b]=e),t}else d=C(t),d&&(p=t.$type);if(p!==x){if(v=C(r),v&&(f=r.$type),d&&!p&&(null==r||v&&!f))return t}else{if(null==r)return T(t)?void j(t,s,u):t;if(v=C(r),v&&(f=r.$type,f===x))if(t===r){if(null!=t[b])return t}else if(m=t.$timestamp,g=r.$timestamp,!T(t)&&!T(r)&&m>g)return}if(p&&v&&!f)return A(R(t,r,e,n,u),e,n);if(f||!v){if(f===w&&E(l)&&(r=l(L(i,n),r)),f&&t===r)null==t[b]&&(t=P(t,p,t.value),e=k(e,-t.$size,u,a),t=A(t,e,n,a));else{var _=!0;!p&&d||(_=M(r)<M(t)==!1,(p||f)&&E(c)&&(_=!c(t,r,o.slice(0,o.index)))),_&&(r=P(r,f,f?r.value:r),h=S(t)-S(r),t=R(t,r,e,n,u),e=k(e,h,u,a),t=A(t,e,n,a))}T(t)?j(t,s,u):O(u,t)}else null==t&&(t=A(r,e,n));return t}},{100:100,107:107,110:110,115:115,117:117,119:119,120:120,36:36,39:39,50:50,86:86,88:88,89:89,93:93,95:95,96:96}],104:[function(e,t,r){var _=e(120),y=e(119),b=e(90),x=e(88),w=e(89),S=e(95),M=e(102),C=e(96),T=e(117),E=e(86),O=e(93),P=e(110),A=e(115),j=e(114),R=e(107);t.exports=function(e,t,r,n,i,o,a,s,u,c,l,h,p){var f=b(t,o);if(i||o)f&&S(t)&&(f="expired",E(t,c,l)),(f&&f!==_||M(t))&&(t=P(t,{},e,r,l),t=O(t,e,r,u),t=j(t,u));else{var d=n,v=b(d),m=w(d)<w(t)==!1;if((f||v)&&C(h)&&(m=!h(t,d,s.slice(0,s.index))),m){v===y&&C(p)&&(d=p(R(a,r),d)),d=T(d,v,v?d.value:d);var g=x(t)-x(d);t=P(t,d,e,r,l),e=A(e,g,l,u),t=O(t,e,r,u)}}return t}},{102:102,107:107,110:110,114:114,115:115,117:117,119:119,120:120,86:86,88:88,89:89,90:90,93:93,95:95,96:96}],105:[function(e,t,r){t.exports=function(){}},{}],106:[function(e,t,r){t.exports=Date.now},{}],107:[function(e,t,r){t.exports=function(e,t){var r=e.slice(0,e.depth);return r[r.length]=t,r}},{}],108:[function(e,t,r){var o=e(120),a=e(39),s=e(51),u=e(100),c=e(112),l=e(113);t.exports=function(e,t,r,n){if(u(e)){var i=e.$type;return Boolean(i)&&(i===o&&l(e),s(n,e)),c(e),t[r]=e[a]=void 0,!0}return!1}},{100:100,112:112,113:113,120:120,39:39,51:51}],109:[function(e,t,r){var a=e(91),s=e(40),u=e(108);t.exports=function e(t,r,n,i){if(u(t,r,n,i)){if(null==t.$type)for(var o in t)o[0]!==s&&"$"!==o[0]&&a(t,o)&&e(t[o],t,o,i);return!0}return!1}},{108:108,40:40,91:91}],110:[function(e,t,r){var o=e(100),a=e(111),s=e(109);t.exports=function(e,t,r,n,i){return e===t?e:(o(e)&&(a(e,t),s(e,r,n,i)),r[n]=t,t)}},{100:100,109:109,111:111}],111:[function(e,t,r){var a=e(43),s=e(33),u=e(44);t.exports=function(e,t){for(var r=e[u]||0,n=t[u]||0,i=-1;++i<r;){var o=e[a+i];void 0!==o&&(o[s]=t,t[a+(n+i)]=o,e[a+i]=void 0)}return t[u]=r+n,e[u]=void 0,t}},{33:33,43:43,44:44}],112:[function(e,t,r){var i=e(43),o=e(33),a=e(42),s=e(44);t.exports=function(e){for(var t=-1,r=e[s]||0;++t<r;){var n=e[i+t];null!=n&&(n[o]=n[a]=e[i+t]=void 0)}return e[s]=void 0,e}},{33:33,42:42,43:43,44:44}],113:[function(e,t,r){var i=e(43),o=e(33),a=e(42),s=e(44);t.exports=function(e){var t=e[o];if(t){for(var r=(e[a]||0)-1,n=(t[s]||0)-1;++r<=n;)t[i+r]=t[i+(r+1)];t[s]=n,e[a]=e[o]=t=void 0}return e}},{33:33,42:42,43:43,44:44}],114:[function(e,t,r){var s=e(43),u=e(39),c=e(46),l=e(44);t.exports=function(e,t){var r=[e],n=0;do{var i=r[n--];if(i&&i[c]!==t){i[c]=t,r[n++]=i[u];for(var o=-1,a=i[l]||0;++o<a;)r[n++]=i[s+o]}}while(n>-1);return e}},{39:39,43:43,44:44,46:46}],115:[function(e,t,r){var s=e(36),u=e(46),c=e(39),l=e(108),h=e(114);t.exports=function(e,t,r,n){var i=e;do{var o=i[c],a=i.$size=(i.$size||0)-t;0>=a&&null!=o?l(i,o,i[s],r):i[u]!==n&&h(i,n),i=o}while(i);return e}},{108:108,114:114,36:36,39:39,46:46}],116:[function(e,t,r){var s=Array.isArray,u=e(101),c=e(99),l=e(98),h=e(134);t.exports=function(e,t,r){for(var n=0,i=e.length;i>n;++n){var o=e[n],a=!1;if(s(o)&&t.path?a=!0:"string"==typeof o&&t.pathSyntax?a=!0:u(o)&&t.pathValue?(o.path=h.fromPath(o.path),a=!0):c(o)&&t.jsonGraph?a=!0:l(o)&&t.json?a=!0:"function"==typeof o&&n+1===i&&t.selector&&(a=!0),!a)return new Error("Unrecognized argument "+typeof o+" ["+String(o)+"] to Model#"+r)}return!0}},{101:101,134:134,98:98,99:99}],117:[function(e,t,r){var n=e(130),s=n.atom,u=e(106),c=e(122),l=e(37),h=50,p=e(85),f=Array.isArray,d=e(88),v=e(87);t.exports=function(e,t,r){var n=0,i=e,o=t;if(o?(i=p(i),n=d(i),i.$type=o):(i=s(r),o=i.$type,i[l]=!0),null==r)n=h+1;else if(null==n||0>=n)switch(typeof r){case"object":n=f(r)?h+r.length:h+1;break;case"string":n=h+r.length;break;default:n=h+1}var a=v(i);return"number"==typeof a&&c>a&&(i.$expires=u()+-1*a),i.$size=n,i}},{106:106,122:122,130:130,37:37,85:85,87:87,88:88}],118:[function(e,t,r){t.exports="atom"},{}],119:[function(e,t,r){t.exports="error"},{}],120:[function(e,t,r){t.exports="ref"},{}],121:[function(e,t,r){t.exports=1},{}],122:[function(e,t,r){t.exports=0},{}],123:[function(e,t,r){"use strict";function n(){if(u.length)throw u.shift()}function i(e){var t;t=s.length?s.pop():new o,t.task=e,a(t)}function o(){this.task=null}var a=e(124),s=[],u=[],c=a.makeRequestCallFromTimer(n);t.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(u.push(e),c())}finally{this.task=null,s[s.length]=this}}},{124:124}],124:[function(e,h,t){(function(e){"use strict";function t(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>c){for(var t=0,r=a.length-u;r>t;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function n(e){var t=1,r=new l(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}function i(n){return function(){function e(){clearTimeout(t),clearInterval(r),n()}var t=setTimeout(e,0),r=setInterval(e,50)}}h.exports=t;var o,a=[],s=!1,u=0,c=1024,l=e.MutationObserver||e.WebKitMutationObserver;o="function"==typeof l?n(r):i(r),t.requestFlush=o,t.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],125:[function(e,t,r){"use strict";function c(e,t){var r;for(r in t)e[r]=t[r];return e}function n(e,t){if(this._jsongUrl=e,"number"==typeof t){var r={timeout:t};t=r}this._config=c({timeout:15e3,headers:{}},t||{})}var l=e(129),i=e(126);Array.isArray;n.prototype={constructor:n,buildQueryObject:i,get:function(e){var t="GET",r=this.buildQueryObject(this._jsongUrl,t,{paths:e,method:"get"}),n=c(r,this._config),i=this;return l(t,n,i)},set:function(e){var t="POST",r=this.buildQueryObject(this._jsongUrl,t,{jsonGraph:e,method:"set"}),n=c(r,this._config);n.headers["Content-Type"]="application/x-www-form-urlencoded";var i=this;return l(t,n,i)},call:function(e,t,r,n){t=t||[],r=r||[],n=n||[];var i="POST",o=[];o.push("method=call"),o.push("callPath="+encodeURIComponent(JSON.stringify(e))),o.push("arguments="+encodeURIComponent(JSON.stringify(t))),o.push("pathSuffixes="+encodeURIComponent(JSON.stringify(r))),o.push("paths="+encodeURIComponent(JSON.stringify(n)));var a=this.buildQueryObject(this._jsongUrl,i,o.join("&")),s=c(a,this._config);s.headers["Content-Type"]="application/x-www-form-urlencoded";var u=this;return l(i,s,u)}},n.XMLHttpSource=n,n["default"]=n,t.exports=n},{126:126,129:129}],126:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n,i=[],o={url:e},a=-1!==e.indexOf("?"),s=a?"&":"?";return"string"==typeof r?i.push(r):(n=Object.keys(r),n.forEach(function(e){var t="object"==typeof r[e]?JSON.stringify(r[e]):r[e];i.push(e+"="+encodeURIComponent(t))})),"GET"===t?o.url+=s+i.join("&"):o.data=i.join("&"),o}},{}],127:[function(e,r,t){(function(t){"use strict";r.exports=function(){var e=new t.XMLHttpRequest;if("withCredentials"in e)return e;if(t.XDomainRequest)return new XDomainRequest;throw new Error("CORS is not supported by your browser")}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],128:[function(e,t,r){(function(n){"use strict";t.exports=function(){var e,t,r;if(n.XMLHttpRequest)return new n.XMLHttpRequest;try{for(t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;3>r;r++)try{if(e=t[r],new n.ActiveXObject(e))break}catch(e){}return new n.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],129:[function(e,t,r){"use strict";function n(){}function i(s,u,c){return n.create(function(t){var r,n,e,i,o,a={method:s||"GET",crossDomain:!1,async:!0,headers:{},responseType:"json"};for(o in u)d.call(u,o)&&(a[o]=u[o]);a.crossDomain||a.headers["X-Requested-With"]||(a.headers["X-Requested-With"]="XMLHttpRequest"),null!=c.onBeforeRequest&&c.onBeforeRequest(a);try{r=a.crossDomain?f():p()}catch(e){t.onError(e)}try{a.user?r.open(a.method,a.url,a.async,a.user,a.password):r.open(a.method,a.url,a.async),r.timeout=a.timeout,r.withCredentials=a.withCredentials!==!1,e=a.headers;for(i in e)d.call(e,i)&&r.setRequestHeader(i,e[i]);if(a.responseType)try{r.responseType=a.responseType}catch(e){if("json"!==a.responseType)throw e}r.onreadystatechange=function(e){4===r.readyState&&(n||(n=!0,l(t,r,e)))},r.ontimeout=function(e){n||(n=!0,h(t,r,"timeout error",e))},r.send(a.data)}catch(e){t.onError(e)}return function(){n||4===r.readyState||(n=!0,r.abort())}})}function a(e,t,r){r||(r=new Error(t)),e.onError(r)}function l(e,t,r){var n,i;if(t&&e){i=t.responseType,n="response"in t?t.response:t.responseText;var o=1223===t.status?204:t.status;if(o>=200&&399>=o){try{"json"!==i&&(n=JSON.parse(n||"")),"string"==typeof n&&(n=JSON.parse(n||""))}catch(r){a(e,"invalid json",r)}return e.onNext(n),void e.onCompleted()}return 401===o||403===o||407===o?a(e,n):410===o?a(e,n):408===o||504===o?a(e,n):a(e,n||"Response code "+o)}}function h(e,t,r,n){a(e,r||t.statusText||"request error",n)}var p=e(128),f=e(127),d=Object.prototype.hasOwnProperty,s=function(){};n.create=function(o){var e=new n;return e.subscribe=function(e,t,r){var n,i;return n="function"==typeof e?{onNext:e,onError:t||s,onCompleted:r||s}:e,i=o(n),"function"==typeof i?{dispose:i}:i},e},t.exports=i},{127:127,128:128}],130:[function(e,t,r){function n(e,t,r){var n=Object.create(null);if(null!=r){for(var i in r)n[i]=r[i];return n.$type=e,n.value=t,n}return{$type:e,value:t}}var i=e(134);t.exports={ref:function(e,t){return n("ref",i.fromPath(e),t)},atom:function(e,t){return n("atom",e,t)},undefined:function(){return n("atom")},error:function(e,t){return n("error",e,t)},pathValue:function(e,t){return{path:i.fromPath(e),value:t}},pathInvalidation:function(e){return{path:i.fromPath(e),invalidated:!0}}}},{134:134}],131:[function(e,t,r){t.exports={integers:"integers",ranges:"ranges",keys:"keys"}},{}],132:[function(e,t,r){var n={token:"token",dotSeparator:".",commaSeparator:",",openingBracket:"[",closingBracket:"]",openingBrace:"{",closingBrace:"}",escape:"\\",space:" ",colon:":",quote:"quote",unknown:"unknown"};t.exports=n},{}],133:[function(e,t,r){t.exports={indexer:{nested:"Indexers cannot be nested.",needQuotes:"unquoted indexers must be numeric.",empty:"cannot have empty indexers.",leadingDot:"Indexers cannot have leading dots.",leadingComma:"Indexers cannot have leading comma.",requiresComma:"Indexers require commas between indexer args.",routedTokens:"Only one token can be used per indexer when specifying routed tokens."},range:{precedingNaN:"ranges must be preceded by numbers.",suceedingNaN:"ranges must be suceeded by numbers."},routed:{invalid:"Invalid routed token.  only integers|ranges|keys are supported."},quote:{empty:"cannot have empty quoted keys.",illegalEscape:"Invalid escape character.  Only quotes are escapable."},unexpectedToken:"Unexpected token.",invalidIdentifier:"Invalid Identifier.",invalidPath:"Please provide a valid path.",throwError:function(e,t,r){if(r)throw e+" -- "+t.parseString+" with next token: "+r;throw e+" -- "+t.parseString}}},{}],134:[function(e,t,r){var n=e(140),i=e(135),o=e(131),a=function(e,t){return i(new n(e,t))};t.exports=a,a.fromPathsOrPathValues=function(e,t){if(!e)return[];for(var r=[],n=0,i=e.length;i>n;n++)"string"==typeof e[n]?r[n]=a(e[n],t):"string"==typeof e[n].path?r[n]={path:a(e[n].path,t),value:e[n].value}:r[n]=e[n];return r},a.fromPath=function(e,t){return e?"string"==typeof e?a(e,t):e:[]},a.RoutedTokens=o},{131:131,135:135,140:140}],135:[function(e,t,r){var o=e(132),a=e(133),s=e(136);t.exports=function(e){for(var t=e.next(),r={},n=[];!t.done;){switch(t.type){case o.token:var i=+t.token[0];isNaN(i)||a.throwError(a.invalidIdentifier,e),n[n.length]=t.token;break;case o.dotSeparator:0===n.length&&a.throwError(a.unexpectedToken,e);break;case o.space:break;case o.openingBracket:s(e,t,r,n);break;default:a.throwError(a.unexpectedToken,e)}t=e.next()}return 0===n.length&&a.throwError(a.invalidPath,e),n}},{132:132,133:133,136:136}],136:[function(e,t,r){var c=e(132),l=e(133),h=l.indexer,p=e(138),f=e(137),d=e(139);t.exports=function(e,t,r,n){var i=e.next(),o=!1,a=1,s=!1;for(r.indexer=[];!i.done;){switch(i.type){case c.token:case c.quote:r.indexer.length===a&&l.throwError(h.requiresComma,e)}switch(i.type){case c.openingBrace:s=!0,d(e,i,r,n);break;case c.token:var u=+i.token;isNaN(u)&&l.throwError(h.needQuotes,e),r.indexer[r.indexer.length]=u;break;case c.dotSeparator:r.indexer.length||l.throwError(h.leadingDot,e),p(e,i,r,n);break;case c.space:break;case c.closingBracket:o=!0;break;case c.quote:f(e,i,r,n);break;case c.openingBracket:l.throwError(h.nested,e);break;case c.commaSeparator:++a;break;default:l.throwError(l.unexpectedToken,e)}if(o)break;i=e.next()}0===r.indexer.length&&l.throwError(h.empty,e),r.indexer.length>1&&s&&l.throwError(h.routedTokens,e),1===r.indexer.length&&(r.indexer=r.indexer[0]),n[n.length]=r.indexer,r.indexer=void 0}},{132:132,133:133,137:137,138:138,139:139}],137:[function(e,t,r){var c=e(132),l=e(133),h=l.quote;t.exports=function(e,t,r,n){for(var i=e.next(),o="",a=t.token,s=!1,u=!1;!i.done;){switch(i.type){case c.token:case c.space:case c.dotSeparator:case c.commaSeparator:case c.openingBracket:case c.closingBracket:case c.openingBrace:case c.closingBrace:s&&l.throwError(h.illegalEscape,e),o+=i.token;break;case c.quote:s?(o+=i.token,s=!1):i.token!==a?o+=i.token:u=!0;break;case c.escape:s=!0;break;default:l.throwError(l.unexpectedToken,e)}if(u)break;i=e.next()}0===o.length&&l.throwError(h.empty,e),r.indexer[r.indexer.length]=o}},{132:132,133:133}],138:[function(e,t,r){var h=e(140),p=e(132),f=e(133);t.exports=function(e,t,r,n){var i,o=e.peek(),a=1,s=!1,u=!0,c=r.indexer.length-1,l=h.toNumber(r.indexer[c]);for(isNaN(l)&&f.throwError(f.range.precedingNaN,e);!s&&!o.done;){switch(o.type){case p.dotSeparator:3===a&&f.throwError(f.unexpectedToken,e),++a,3===a&&(u=!1);break;case p.token:i=h.toNumber(e.next().token),isNaN(i)&&f.throwError(f.range.suceedingNaN,e),s=!0;break;default:s=!0}if(s)break;e.next(),o=e.peek()}r.indexer[c]={from:l,to:u?i:i-1}}},{132:132,133:133,140:140}],139:[function(e,t,r){var c=e(132),l=e(131),h=e(133),p=h.routed;t.exports=function(e,t,r,n){var i=e.next(),o=!1,a="";switch(i.token){case l.integers:case l.ranges:case l.keys:break;default:h.throwError(p.invalid,e)}var s=e.next();if(s.type===c.colon&&(o=!0,s=e.next(),s.type!==c.token&&h.throwError(p.invalid,e),a=s.token,s=e.next()),s.type===c.closingBrace){var u={type:i.token,named:o,name:a};r.indexer[r.indexer.length]=u}else h.throwError(p.invalid,e)}},{131:131,132:132,133:133}],140:[function(e,t,r){function c(e,t,r){return{token:e,done:r,type:t}}function n(e,t,r){var n,i=!1,o="",a=r?S:w;do{if(n=t+1>=e.length)break;var s=e[t+1];if(void 0===s||-1!==a.indexOf(s)){if(o.length)break;++t;var u;switch(s){case h:u=l.dotSeparator;break;case p:u=l.commaSeparator;break;case f:u=l.openingBracket;break;case d:u=l.closingBracket;break;case v:u=l.openingBrace;break;case m:u=l.closingBrace;break;case x:u=l.space;break;case y:case b:u=l.quote;break;case _:u=l.escape;break;case g:u=l.colon;break;default:u=l.unknown}i=c(s,u,!1);break}o+=s,++t}while(!n);return!i&&o.length&&(i=c(o,l.token,!1)),i||(i={done:!0}),{token:i,idx:t}}var l=e(132),h=".",p=",",f="[",d="]",v="{",m="}",g=":",_="\\",y='"',b="'",x=" ",w="\\'\"[]., ",S="\\{}'\"[]., :",i=t.exports=function(e,t){this._string=e,this._idx=-1,this._extended=t,this.parseString=""};i.prototype={next:function(){var e=this._nextToken?this._nextToken:n(this._string,this._idx,this._extended);return this._idx=e.idx,this._nextToken=!1,this.parseString+=e.token.token,e.token},peek:function(){var e=this._nextToken?this._nextToken:n(this._string,this._idx,this._extended);return this._nextToken=e,e.token}},i.toNumber=function(e){return isNaN(+e)?NaN:+e}},{132:132}],141:[function(e,t,r){var n=e(147),i=e(148);t.exports=function(e){var t=e.reduce(function(e,t){var r=t.length;return e[r]||(e[r]=[]),e[r].push(t),e},{});return Object.keys(t).forEach(function(e){t[e]=i(t[e])}),n(t)}},{147:147,148:148}],142:[function(e,t,r){var p=e(144);t.exports=function e(t,r,n){for(var i=t,o=!0;o&&n<r.length;++n){var a=r[n],s=typeof a;if(a&&"object"===s){var u={},c=p(a,u),l=n+1;do{var h=i[c];o=void 0!==h,o&&(o=e(h,r,l)),c=p(a,u)}while(o&&!u.done);break}i=i[a],o=void 0!==i}return o}},{144:144}],143:[function(e,t,r){t.exports={iterateKeySet:e(144),toTree:e(148),toTreeWithUnion:e(149),pathsComplementFromTree:e(146),pathsComplementFromLengthTree:e(145),hasIntersection:e(142),toPaths:e(147),collapse:e(141)}},{141:141,142:142,144:144,145:145,146:146,147:147,148:148,149:149}],144:[function(e,t,r){function s(e,t){var r=t.from=e.from||0,n=t.to=e.to||"number"==typeof e.length&&t.from+e.length-1||0;t.rangeOffset=t.from,t.loaded=!0,r>n&&(t.empty=!0)}function u(e,t){t.done=!1;var r=t.isObject=!(!e||"object"!=typeof e);t.isArray=r&&n(e),t.arrayOffset=0}var n=Array.isArray;t.exports=function(e,t){if(void 0===t.isArray&&u(e,t),t.isArray){var r;do{t.loaded&&t.rangeOffset>t.to&&(++t.arrayOffset,t.loaded=!1);var n=t.arrayOffset,i=e.length;if(n>=i){t.done=!0;break}var o=e[t.arrayOffset],a=typeof o;if("object"===a){if(t.loaded||s(o,t),t.empty)continue;r=t.rangeOffset++}else++t.arrayOffset,r=o}while(void 0===r);return r}return t.isObject?(t.loaded||s(e,t),t.rangeOffset>t.to?void(t.done=!0):t.rangeOffset++):(t.done=!0,e)}},{}],145:[function(e,t,r){var s=e(142);t.exports=function(e,t){for(var r=[],n=-1,i=0,o=e.length;o>i;++i){var a=e[i];s(t[a.length],a,0)||(r[++n]=a)}return r}},{142:142}],146:[function(e,t,r){var a=e(142);t.exports=function(e,t){for(var r=[],n=-1,i=0,o=e.length;o>i;++i)a(t,e[i],0)||(r[++n]=e[i]);return r}},{142:142}],147:[function(e,t,r){function u(e){return null!==e&&typeof e===n}function M(e,t,r){var n,i,o,a,s,u,c,l,h,p,f,d,v,m,g=T(String(t)),_=Object.create(null),y=[],b=-1,x=0,w=[],S=0;if(a=[],s=-1,r-1>t){for(u=C(e,a);++s<u;)n=a[s],i=M(e[n],t+1,r),o=i.code,_[o]?i=_[o]:(y[x++]=o,i=_[o]={keys:[],sets:i.sets}),g=T(g+n+o),E(n)&&i.keys.push(parseInt(n,10))||i.keys.push(n);for(;++b<x;)if(n=y[b],i=_[n],a=i.keys,u=a.length,u>0)for(c=i.sets,l=-1,h=c.length,v=a[0];++l<h;){for(p=c[l],f=-1,d=p.length,m=new Array(d+1),m[0]=u>1&&a||v;++f<d;)m[f+1]=p[f];w[S++]=m}}else for(u=C(e,a),u>1?w[S++]=[a]:w[S++]=a;++s<u;)g=T(g+a[s]);return{code:g,sets:w}}function c(e){for(var t=-1,r=e.length;++t<r;){var n=e[t];o(n)&&(e[t]=i(n))}return e}function i(e){for(var t=-1,r=e.length-1,n=r>0;++t<=r;){var i=e[t];if(!E(i)){n=!1;break}e[t]=parseInt(i,10)}if(n===!0){e.sort(s);var o=e[0],a=e[r];if(r>=a-o)return{from:o,to:a}}return e}function s(e,t){return e-t}function C(e,t,r){var n=0;for(var i in e)t[n++]=i;return n>1&&t.sort(r),n}function T(e){for(var t=5381,r=-1,n=e.length;++r<n;)t=(t<<5)+t+e.charCodeAt(r);return String(t)}function E(e){return!o(e)&&e-parseFloat(e)+1>=0}var o=Array.isArray,n="object";t.exports=function(e){var t,r=[],n=0;for(var i in e)if(E(i)&&u(t=e[i]))for(var o=M(t,0,parseInt(i,10)).sets,a=-1,s=o.length;++a<s;)r[n++]=c(o[a]);return r}},{}],148:[function(e,t,r){function u(e,t,r){var n,i=t[r],o={},a=r+1;n=c(i,o);do{var s=e[n];s||(a===t.length?e[n]=null:s=e[n]={}),a<t.length&&u(s,t,a),o.done||(n=c(i,o))}while(!o.done)}var c=e(144);Array.isArray;t.exports=function(e){return e.reduce(function(e,t){return u(e,t,0),e},{})}},{144:144}],149:[function(e,t,r){},{}],150:[function(e,t,r){function n(){l=!1,s.length?c=s.concat(c):h=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(n);l=!0;for(var t=c.length;t;){for(s=c,c=[];++h<t;)s&&s[h].run();h=-1,t=c.length}s=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},c=[],l=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],151:[function(e,t,r){"use strict";t.exports=e(156)},{156:156}],152:[function(e,t,r){"use strict";function a(){}function n(e){try{return e.then}catch(e){return m=e,g}}function i(e,t){try{return e(t)}catch(e){return m=e,g}}function o(e,t,r){try{e(t,r)}catch(e){return m=e,g}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==a&&d(e,this)}function u(n,i,o){return new n.constructor(function(e,t){var r=new s(a);r.then(e,t),c(n,new f(i,o,r))})}function c(r,n){for(;3===r._37;)r=r._12;return 0===r._37?void r._59.push(n):void v(function(){var e=1===r._37?n.onFulfilled:n.onRejected;if(null===e)return void(1===r._37?l(n.promise,r._12):h(n.promise,r._12));var t=i(e,r._12);t===g?h(n.promise,m):l(n.promise,t)})}function l(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=n(t);if(r===g)return h(e,m);if(r===e.then&&t instanceof s)return e._37=3,e._12=t,void p(e);if("function"==typeof r)return void d(r.bind(t),e)}e._37=1,e._12=t,p(e)}function h(e,t){e._37=2,e._12=t,p(e)}function p(e){for(var t=0;t<e._59.length;t++)c(e,e._59[t]);e._59=null}function f(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function d(e,t){var r=!1,n=o(e,function(e){r||(r=!0,l(t,e))},function(e){r||(r=!0,h(t,e))});r||n!==g||(r=!0,h(t,m))}var v=e(124),m=null,g={};t.exports=s,s._99=a,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var r=new s(a);return c(this,new f(e,t,r)),r}},{124:124}],153:[function(e,t,r){"use strict";var n=e(152);t.exports=n,n.prototype.done=function(e,t){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(e){setTimeout(function(){throw e},0)})}},{152:152}],154:[function(e,t,r){"use strict";function n(e){var t=new c(c._99);return t._37=1,t._12=e,t}var c=e(152);t.exports=c;var i=n(!0),o=n(!1),a=n(null),s=n(void 0),u=n(0),l=n("");c.resolve=function(e){if(e instanceof c)return e;if(null===e)return a;if(void 0===e)return s;if(e===!0)return i;if(e===!1)return o;if(0===e)return u;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new c(t.bind(e))}catch(r){return new c(function(e,t){t(r)})}return n(e)},c.all=function(e){var u=Array.prototype.slice.call(e);return new c(function(i,o){function a(t,e){if(e&&("object"==typeof e||"function"==typeof e)){if(e instanceof c&&e.then===c.prototype.then){for(;3===e._37;)e=e._12;return 1===e._37?a(t,e._12):(2===e._37&&o(e._12),void e.then(function(e){a(t,e)},o))}var r=e.then;if("function"==typeof r){var n=new c(r.bind(e));return void n.then(function(e){a(t,e)},o)}}u[t]=e,0===--s&&i(u)}if(0===u.length)return i([]);for(var s=u.length,e=0;e<u.length;e++)a(e,u[e])})},c.reject=function(r){return new c(function(e,t){t(r)})},c.race=function(e){return new c(function(t,r){e.forEach(function(e){c.resolve(e).then(t,r)})})},c.prototype["catch"]=function(e){return this.then(null,e)}},{152:152}],155:[function(e,t,r){"use strict";var n=e(152);t.exports=n,n.prototype["finally"]=function(t){return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})}},{152:152}],156:[function(e,t,r){"use strict";t.exports=e(152),e(153),e(155),e(154),e(157)},{152:152,153:153,154:154,155:155,157:157}],157:[function(e,t,r){"use strict";var a=e(152),i=e(123);t.exports=a,a.denodeify=function(o,e){return e=e||1/0,function(){var t=this,i=Array.prototype.slice.call(arguments,0,e>0?e:0);return new a(function(r,n){i.push(function(e,t){e?n(e):r(t)});var e=o.apply(t,i);!e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.then||r(e)})}},a.nodeify=function(r){return function(){var e=Array.prototype.slice.call(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=this;try{return r.apply(this,arguments).nodeify(t,n)}catch(r){if(null===t||"undefined"==typeof t)return new a(function(e,t){t(r)});i(function(){t.call(n,r)})}}},a.prototype.nodeify=function(t,r){return"function"!=typeof t?this:void this.then(function(e){i(function(){t.call(r,null,e)})},function(e){i(function(){t.call(r,e)})})}},{123:123,152:152}],158:[function(s,u,c){(function(a){(function(r){var e={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},n=e[typeof window]&&window||this,t=e[typeof c]&&c&&!c.nodeType&&c,i=e[typeof u]&&u&&!u.nodeType&&u,o=(i&&i.exports===t&&t,e[typeof a]&&a);!o||o.global!==o&&o.window!==o||(n=o),"function"==typeof Ir&&Ir.amd?Ir(["rx"],function(e,t){return r(n,t,e)}):"object"==typeof u&&u&&u.exports===t?u.exports=r(n,u.exports,s(159)):n.Rx=r(n,{},n.Rx)}).call(this,function(s,e,t,u){function r(){try{return f.apply(this,arguments)}catch(e){return N.e=e,N}}function n(e){if(!M(e))throw new TypeError("fn must be a function");return f=e,r}function i(e,s,u){return new g(function(n){var i=!1,o=null,a=[];return e.subscribe(function(e){var t,r;try{r=s(e)}catch(e){return void n.onError(e)}if(t=0,i)try{t=u(r,o)}catch(e){return void n.onError(e)}else i=!0,o=r;t>0&&(o=r,a=[]),t>=0&&a.push(e)},function(e){n.onError(e)},function(){n.onNext(a),n.onCompleted()})},e)}function o(e){if(0===e.length)throw new R;return e[0]}function a(e,n,i,o){if(0>n)throw new L;return new g(function(t){var r=n;return e.subscribe(function(e){0===r--&&(t.onNext(e),t.onCompleted())},function(e){t.onError(e)},function(){i?(t.onNext(o),t.onCompleted()):t.onError(new L)})},e)}function c(e,i,o){return new g(function(t){var r=o,n=!1;return e.subscribe(function(e){n?t.onError(new Error("Sequence contains more than one element")):(r=e,n=!0)},function(e){t.onError(e)},function(){n||i?(t.onNext(r),t.onCompleted()):t.onError(new R)})},e)}function l(e,r,n){return new g(function(t){return e.subscribe(function(e){t.onNext(e),t.onCompleted()},function(e){t.onError(e)},function(){r?(t.onNext(n),t.onCompleted()):t.onError(new R)})},e)}function h(e,i,o){return new g(function(t){var r=o,n=!1;return e.subscribe(function(e){r=e,n=!0},function(e){t.onError(e)},function(){n||i?(t.onNext(r),t.onCompleted()):t.onError(new R)})},e)}function p(i,e,t,o){var a=j(e,t,3);return new g(function(r){var n=0;return i.subscribe(function(e){var t;try{t=a(e,n,i)}catch(e){return void r.onError(e)}t?(r.onNext(o?n:e),r.onCompleted()):n++},function(e){r.onError(e)},function(){r.onNext(o?-1:u),r.onCompleted()})},i)}var f,d=t.Observable,v=d.prototype,m=t.CompositeDisposable,g=t.AnonymousObservable,_=t.Disposable.empty,y=(t.internals.isEqual,t.helpers),b=y.not,x=y.defaultComparer,w=y.identity,S=y.defaultSubComparer,M=y.isFunction,C=y.isPromise,T=y.isArrayLike,E=y.isIterable,O=t.internals.inherits,P=d.fromPromise,A=d.from,j=t.internals.bindCallback,R=t.EmptyError,k=t.ObservableBase,L=t.ArgumentOutOfRangeError,N={e:{}};v.aggregate=function(){var o,a,s=!1,e=this;return 2===arguments.length?(s=!0,a=arguments[0],o=arguments[1]):o=arguments[0],new g(function(t){var r,n,i;return e.subscribe(function(e){!i&&(i=!0);try{r?n=o(n,e):(n=s?o(a,e):e,r=!0)}catch(e){return t.onError(e)}},function(e){t.onError(e)},function(){i&&t.onNext(n),!i&&s&&t.onNext(a),!i&&!s&&t.onError(new R),t.onCompleted()})},e)};var I=function(i){function e(e,t,r,n){this.source=e,this.acc=t,this.hasSeed=r,this.seed=n,i.call(this)}function t(e,t){this.o=e,this.acc=t.acc,this.hasSeed=t.hasSeed,this.seed=t.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return O(e,i),e.prototype.subscribeCore=function(e){return this.source.subscribe(new t(e,this))},t.prototype.onNext=function(e){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=n(this.acc)(this.result,e):(this.result=this.hasSeed?n(this.acc)(this.seed,e):e,this.hasAccumulation=!0),this.result===N&&this.o.onError(this.result.e))},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new R),this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},e}(k);return v.reduce=function(e){var t=!1;if(2===arguments.length){t=!0;var r=arguments[1]}return new I(this,e,t,r)},v.some=function(e,t){var r=this;return e?r.filter(e,t).some():new g(function(t){return r.subscribe(function(){t.onNext(!0),t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})},r)},v.any=function(){return this.some.apply(this,arguments)},v.isEmpty=function(){return this.any().map(b)},v.every=function(t,e){return this.filter(function(e){return!t(e)},e).some().map(b)},v.all=function(){return this.every.apply(this,arguments)},v.includes=function(i,e){function o(e,t){return 0===e&&0===t||e===t||isNaN(e)&&isNaN(t)}var a=this;return new g(function(t){var r=0,n=+e||0;return Math.abs(n)===1/0&&(n=0),0>n?(t.onNext(!1),t.onCompleted(),_):a.subscribe(function(e){r++>=n&&o(e,i)&&(t.onNext(!0),t.onCompleted())},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})},this)},v.contains=function(e,t){v.includes(e,t)},v.count=function(e,t){return e?this.filter(e,t).count():this.reduce(function(e){return e+1},0)},v.indexOf=function(i,e){var o=this;return new g(function(t){var r=0,n=+e||0;return Math.abs(n)===1/0&&(n=0),0>n?(t.onNext(-1),t.onCompleted(),_):o.subscribe(function(e){r>=n&&e===i&&(t.onNext(r),t.onCompleted()),r++},function(e){t.onError(e)},function(){t.onNext(-1),t.onCompleted()})},o)},v.sum=function(e,t){return e&&M(e)?this.map(e,t).sum():this.reduce(function(e,t){return e+t},0)},v.minBy=function(e,r){return r||(r=S),i(this,e,function(e,t){return-1*r(e,t)})},v.min=function(e){return this.minBy(w,e).map(function(e){return o(e)})},v.maxBy=function(e,t){return t||(t=S),i(this,e,t)},v.max=function(e){return this.maxBy(w,e).map(function(e){return o(e)})},v.average=function(e,t){return e&&M(e)?this.map(e,t).average():this.reduce(function(e,t){return{sum:e.sum+t,count:e.count+1}},{sum:0,count:0}).map(function(e){if(0===e.count)throw new R;return e.sum/e.count})},v.sequenceEqual=function(r,u){var c=this;return u||(u=x),new g(function(n){var i=!1,o=!1,a=[],s=[],e=c.subscribe(function(e){var t,r;if(s.length>0){r=s.shift();try{t=u(r,e)}catch(e){return void n.onError(e)}t||(n.onNext(!1),n.onCompleted())}else o?(n.onNext(!1),n.onCompleted()):a.push(e)},function(e){n.onError(e)},function(){i=!0,0===a.length&&(s.length>0?(n.onNext(!1),n.onCompleted()):o&&(n.onNext(!0),n.onCompleted()))});(T(r)||E(r))&&(r=A(r)),C(r)&&(r=P(r));var t=r.subscribe(function(e){var t;if(a.length>0){var r=a.shift();try{t=u(r,e)}catch(e){return void n.onError(e)}t||(n.onNext(!1),n.onCompleted())}else i?(n.onNext(!1),n.onCompleted()):s.push(e)},function(e){n.onError(e)},function(){o=!0,0===s.length&&(a.length>0?(n.onNext(!1),n.onCompleted()):i&&(n.onNext(!0),n.onCompleted()))});return new m(e,t)},c)},v.elementAt=function(e){return a(this,e,!1)},v.elementAtOrDefault=function(e,t){return a(this,e,!0,t)},v.single=function(e,t){return e&&M(e)?this.where(e,t).single():c(this,!1)},v.singleOrDefault=function(e,t,r){return e&&M(e)?this.filter(e,r).singleOrDefault(null,t):c(this,!0,t)},v.first=function(e,t){return e?this.where(e,t).first():l(this,!1)},v.firstOrDefault=function(e,t,r){return e?this.where(e).firstOrDefault(null,t):l(this,!0,t)},v.last=function(e,t){return e?this.where(e,t).last():h(this,!1)},v.lastOrDefault=function(e,t,r){return e?this.where(e,r).lastOrDefault(null,t):h(this,!0,t)},v.find=function(e,t){return p(this,e,t,!1)},v.findIndex=function(e,t){return p(this,e,t,!0)},v.toSet=function(){if("undefined"==typeof s.Set)throw new TypeError;var e=this;return new g(function(t){var r=new s.Set;return e.subscribe(function(e){r.add(e)},function(e){t.onError(e)},function(){t.onNext(r),t.onCompleted()})},e)},v.toMap=function(o,a){if("undefined"==typeof s.Map)throw new TypeError;var e=this;return new g(function(n){var i=new s.Map;return e.subscribe(function(e){var t;try{t=o(e)}catch(e){return void n.onError(e)}var r=e;if(a)try{r=a(e)}catch(e){return void n.onError(e)}i.set(t,r)},function(e){n.onError(e)},function(){n.onNext(i),n.onCompleted()})},e)},t})}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{159:159}],159:[function(e,Lr,Nr){(function(Rr,kr){(function(a){function i(e){for(var t=[],r=0,n=e.length;n>r;r++)t.push(e[r]);return t}function o(e,t){if(ie&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(se)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var i=r.join("\n"+se+"\n");e.stack=u(i)}}function u(e){for(var t=e.split("\n"),r=[],n=0,i=t.length;i>n;n++){var o=t[n];c(o)||l(o)||!o||r.push(o)}return r.join("\n")}function c(e){var t=h(e);if(!t)return!1;var r=t[0],n=t[1];return r===oe&&n>=ae&&jr>=n}function l(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function e(){if(ie)try{throw new Error}catch(e){var t=e.stack.split("\n"),r=t[0].indexOf("@")>0?t[1]:t[2],n=h(r);if(!n)return;return oe=n[0],n[1]}}function h(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function r(e){var t=[];if(!Ge(e))return t;$e.nonEnumArgs&&e.length&&Ve(e)&&(e=qe.call(e));var r=$e.enumPrototypes&&"function"==typeof e,n=$e.enumErrorProps&&(e===Ie||e instanceof Error);for(var i in e)r&&"prototype"==i||n&&("message"==i||"name"==i)||t.push(i);if($e.nonEnumShadows&&e!==De){var o=e.constructor,a=-1,s=we;if(e===(o&&o.prototype))var u=e===Be?Re:e===Ie?Ee:ke.call(e),c=ze[u];for(;++a<s;)i=xe[a],c&&c[i]||!Le.call(e,i)||t.push(i)}return t}function n(e,t,r){for(var n=-1,i=r(e),o=i.length;++n<o;){var a=i[n];if(t(e[a],a,e)===!1)break}return e}function v(e,t){return n(e,t,r)}function m(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function g(n,e,i,o){if(n===e)return 0!==n||1/n==1/e;var t=typeof n,r=typeof e;if(n===n&&(null==n||null==e||"function"!=t&&"object"!=t&&"function"!=r&&"object"!=r))return!1;var a=ke.call(n),s=ke.call(e);if(a==Se&&(a=Ae),s==Se&&(s=Ae),a!=s)return!1;switch(a){case Ce:case Te:return+n==+e;case Pe:return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case je:case Re:return n==String(e)}var u=a==Me;if(!u){if(a!=Ae||!$e.nodeClass&&(m(n)||m(e)))return!1;var c=!$e.argsObject&&Ve(n)?Object:n.constructor,l=!$e.argsObject&&Ve(e)?Object:e.constructor;if(!(c==l||Le.call(n,"constructor")&&Le.call(e,"constructor")||ne(c)&&c instanceof c&&ne(l)&&l instanceof l||!("constructor"in n&&"constructor"in e)))return!1}i||(i=[]),o||(o=[]);for(var h=i.length;h--;)if(i[h]==n)return o[h]==e;var p=0,f=!0;if(i.push(n),o.push(e),u){if(h=n.length,p=e.length,f=p==h)for(;p--;){var d=e[p];if(!(f=g(n[p],d,i,o)))break}}else v(e,function(e,t,r){return Le.call(r,t)?(p++,f=Le.call(n,t)&&g(n[t],e,i,o)):void 0}),f&&v(n,function(e,t,r){return Le.call(r,t)?f=--p>-1:void 0});return i.pop(),o.pop(),f}function f(e,t){for(var r=new Array(e),n=0;e>n;n++)r[n]=t();return r}function t(){try{return He.apply(this,arguments)}catch(e){return Ke.e=e,Ke}}function p(e){if(!ne(e))throw new TypeError("fn must be a function");return He=e,t}function d(e){throw e}function _(e,t){this.id=e,this.value=t}function y(e,t){this.scheduler=e,this.disposable=t,this.isDisposed=!1}function b(e,t){t.isDisposed||(t.isDisposed=!0,t.disposable.dispose())}function x(e){this._s=s}function w(e){this._s=s,this._l=s.length,this._i=0}function S(e){this._a=e}function M(e){this._a=e,this._l=O(e),this._i=0}function C(e){return"number"==typeof e&&H.isFinite(e)}function T(e){var t,r=e[ve];if(!r&&"string"==typeof e)return t=new x(e),t[ve]();if(!r&&e.length!==a)return t=new S(e),t[ve]();if(!r)throw new TypeError("Object is not iterable");return e[ve]()}function E(e){var t=+e;return 0===t?t:isNaN(t)?t:0>t?-1:1}function O(e){var t=+e.length;return isNaN(t)?0:0!==t&&C(t)?(t=E(t)*Math.floor(Math.abs(t)),0>=t?0:t>Yt?Yt:t):t}function P(e,t){this.observer=e,this.parent=t}function A(e,t){return pt(e)||(e=mt),new Zt(t,e)}function j(e,t){this.observer=e,this.parent=t}function R(e,t){this.observer=e,this.parent=t}function k(t,o){return new Tr(function(n){var e=new at,i=new st;return i.setDisposable(e),e.setDisposable(t.subscribe(function(e){n.onNext(e)},function(e){try{var t=o(e)}catch(e){return n.onError(e)}re(t)&&(t=Vt(t));var r=new at;i.setDisposable(r),r.setDisposable(t.subscribe(n))},function(e){n.onCompleted(e)})),i},t)}function L(){return!1}function N(a,s){var e=this;return new Tr(function(n){var i=0,o=a.length;return e.subscribe(function(e){if(o>i){var t=a[i++],r=p(s)(e,t);if(r===Ke)return n.onError(r.e);n.onNext(r)}else n.onCompleted()},function(e){n.onError(e)},function(){n.onCompleted()})},e)}function L(){return!1}function I(){return[]}function L(){return!1}function D(){return[]}function B(e,t){this.observer=e,this.accumulator=t.accumulator,this.hasSeed=t.hasSeed,this.seed=t.seed,this.hasAccumulation=!1,this.accumulation=null,this.hasValue=!1,this.isStopped=!1}function F(n,e,t){var i=be(e,t,3);return n.map(function(e,t){var r=i(e,t,n);return re(r)&&(r=Vt(r)),(_e(r)||ge(r))&&(r=Kt(r)),r}).concatAll()}function z(e,t,r){for(var n=0,i=e.length;i>n;n++)if(r(e[n],t))return n;return-1}function $(e){this.comparer=e,this.set=[]}function G(n,e,t){var i=be(e,t,3);return n.map(function(e,t){var r=i(e,t,n);return re(r)&&(r=Vt(r)),(_e(r)||ge(r))&&(r=Kt(r)),r}).mergeAll()}var V={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},H=V[typeof window]&&window||this,U=V[typeof Nr]&&Nr&&!Nr.nodeType&&Nr,q=V[typeof Lr]&&Lr&&!Lr.nodeType&&Lr,W=q&&q.exports===U&&U,X=V[typeof kr]&&kr;!X||X.global!==X&&X.window!==X||(H=X);var Y={internals:{},config:{Promise:H.Promise},helpers:{}},K=Y.helpers.noop=function(){},Z=(Y.helpers.notDefined=function(e){return"undefined"==typeof e},Y.helpers.identity=function(e){return e}),J=(Y.helpers.pluck=function(t){return function(e){return e[t]}},Y.helpers.just=function(e){return function(){return e}},Y.helpers.defaultNow=Date.now),Q=Y.helpers.defaultComparer=function(e,t){return Ue(e,t)},ee=Y.helpers.defaultSubComparer=function(e,t){return e>t?1:t>e?-1:0},te=(Y.helpers.defaultKeySerializer=function(e){return e.toString()},Y.helpers.defaultError=function(e){throw e}),re=Y.helpers.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then},ne=(Y.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},Y.helpers.not=function(e){return!e},Y.helpers.isFunction=function(){var e=function(e){return"function"==typeof e||!1};return e(/x/)&&(e=function(e){return"function"==typeof e&&"[object Function]"==ke.call(e)}),e}());Y.config.longStackSupport=!1;var ie=!1;try{throw new Error}catch(e){ie=!!e.stack}var oe,ae=e(),se="From previous event:",ue=Y.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};ue.prototype=Error.prototype;var ce=Y.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ce.prototype=Error.prototype;var le=Y.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};le.prototype=Error.prototype;var he=Y.NotSupportedError=function(e){this.message=e||"This operation is not supported",Error.call(this)};he.prototype=Error.prototype;var pe=Y.NotImplementedError=function(e){this.message=e||"This operation is not implemented",Error.call(this)};pe.prototype=Error.prototype;var fe=Y.helpers.notImplemented=function(){throw new pe},de=Y.helpers.notSupported=function(){throw new he},ve="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";H.Set&&"function"==typeof(new H.Set)["@@iterator"]&&(ve="@@iterator");var me=Y.doneEnumerator={done:!0,value:a},ge=Y.helpers.isIterable=function(e){return e[ve]!==a},_e=Y.helpers.isArrayLike=function(e){return e&&e.length!==a};Y.helpers.iterator=ve;var ye,be=Y.internals.bindCallback=function(n,i,e){if("undefined"==typeof i)return n;switch(e){case 0:return function(){return n.call(i)};case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}},xe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],we=xe.length,Se="[object Arguments]",Me="[object Array]",Ce="[object Boolean]",Te="[object Date]",Ee="[object Error]",Oe="[object Function]",Pe="[object Number]",Ae="[object Object]",je="[object RegExp]",Re="[object String]",ke=Object.prototype.toString,Le=Object.prototype.hasOwnProperty,Ne=ke.call(arguments)==Se,Ie=Error.prototype,De=Object.prototype,Be=String.prototype,Fe=De.propertyIsEnumerable;try{ye=!(ke.call(document)==Ae&&!({toString:0}+""))}catch(e){ye=!0}var ze={};ze[Me]=ze[Te]=ze[Pe]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ze[Ce]=ze[Re]={constructor:!0,toString:!0,valueOf:!0},ze[Ee]=ze[Oe]=ze[je]={constructor:!0,toString:!0},ze[Ae]={constructor:!0};var $e={};!function(){var e=function(){this.x=1},t=[];e.prototype={valueOf:1,y:1};for(var r in new e)t.push(r);for(r in arguments);$e.enumErrorProps=Fe.call(Ie,"message")||Fe.call(Ie,"name"),$e.enumPrototypes=Fe.call(e,"prototype"),$e.nonEnumArgs=0!=r,$e.nonEnumShadows=!/valueOf/.test(t)}(1);var Ge=Y.internals.isObject=function(e){var t=typeof e;return e&&("function"==t||"object"==t)||!1},Ve=function(e){return e&&"object"==typeof e?ke.call(e)==Se:!1};Ne||(Ve=function(e){return e&&"object"==typeof e?Le.call(e,"callee"):!1});var He,Ue=Y.internals.isEqual=function(e,t){return g(e,t,[],[])},qe=({}.hasOwnProperty,Array.prototype.slice),We=this.inherits=Y.internals.inherits=function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r},Xe=Y.internals.addProperties=function(e){for(var t=[],r=1,n=arguments.length;n>r;r++)t.push(arguments[r]);for(var i=0,o=t.length;o>i;i++){var a=t[i];for(var s in a)e[s]=a[s]}},Ye=Y.internals.addRef=function(t,r){return new Tr(function(e){return new Qe(r.getDisposable(),t.subscribe(e))})},Ke={e:{}};_.prototype.compareTo=function(e){var t=this.value.compareTo(e.value);return 0===t&&(t=this.id-e.id),t};var Ze=Y.internals.PriorityQueue=function(e){this.items=new Array(e),this.length=0},Je=Ze.prototype;Je.isHigherPriority=function(e,t){return this.items[e].compareTo(this.items[t])<0},Je.percolate=function(e){if(!(e>=this.length||0>e)){var t=e-1>>1;if(!(0>t||t===e)&&this.isHigherPriority(e,t)){var r=this.items[e];this.items[e]=this.items[t],this.items[t]=r,this.percolate(t)}}},Je.heapify=function(e){if(+e||(e=0),!(e>=this.length||0>e)){var t=2*e+1,r=2*e+2,n=e;if(t<this.length&&this.isHigherPriority(t,n)&&(n=t),r<this.length&&this.isHigherPriority(r,n)&&(n=r),n!==e){var i=this.items[e];this.items[e]=this.items[n],this.items[n]=i,this.heapify(n)}}},Je.peek=function(){return this.items[0].value},Je.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=a,this.heapify()},Je.dequeue=function(){var e=this.peek();return this.removeAt(0),e},Je.enqueue=function(e){var t=this.length++;this.items[t]=new _(Ze.count++,e),this.percolate(t)},Je.remove=function(e){for(var t=0;t<this.length;t++)if(this.items[t].value===e)return this.removeAt(t),!0;return!1},Ze.count=0;var Qe=Y.CompositeDisposable=function(){var e,t,r=[];if(Array.isArray(arguments[0]))r=arguments[0],t=r.length;else for(t=arguments.length,r=new Array(t),e=0;t>e;e++)r[e]=arguments[e];for(e=0;t>e;e++)if(!it(r[e]))throw new TypeError("Not a disposable");this.disposables=r,this.isDisposed=!1,this.length=r.length},et=Qe.prototype;et.add=function(e){this.isDisposed?e.dispose():(this.disposables.push(e),this.length++)},et.remove=function(e){var t=!1;if(!this.isDisposed){var r=this.disposables.indexOf(e);-1!==r&&(t=!0,this.disposables.splice(r,1),this.length--,e.dispose())}return t},et.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),r=0;e>r;r++)t[r]=this.disposables[r];for(this.disposables=[],this.length=0,r=0;e>r;r++)t[r].dispose()}};var tt=Y.Disposable=function(e){this.isDisposed=!1,this.action=e||K};tt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var rt=tt.create=function(e){return new tt(e)},nt=tt.empty={dispose:K},it=tt.isDisposable=function(e){return e&&ne(e.dispose)},ot=tt.checkDisposed=function(e){if(e.isDisposed)throw new ce},at=Y.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};at.prototype.getDisposable=function(){return this.current},at.prototype.setDisposable=function(e){if(this.current)throw new Error("Disposable has already been assigned");var t=this.isDisposed;!t&&(this.current=e),t&&e&&e.dispose()},at.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var st=Y.SerialDisposable=function(){this.isDisposed=!1,this.current=null};st.prototype.getDisposable=function(){return this.current},st.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var r=this.current;this.current=e}r&&r.dispose(),t&&e&&e.dispose()},st.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var ut=Y.RefCountDisposable=function(){function e(e){this.disposable=e,this.disposable.count++,this.isInnerDisposed=!1}function t(e){this.underlyingDisposable=e,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return e.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?nt:new e(this)},t}();y.prototype.dispose=function(){this.scheduler.scheduleWithState(this,b)};var ct=Y.internals.ScheduledItem=function(e,t,r,n,i){this.scheduler=e,this.state=t,this.action=r,this.dueTime=n,this.comparer=i||ee,this.disposable=new at};ct.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ct.prototype.compareTo=function(e){return this.comparer(this.dueTime,e.dueTime)},ct.prototype.isCancelled=function(){return this.disposable.isDisposed},ct.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var lt=Y.Scheduler=function(){function t(e,t,r,n){this.now=e,this._schedule=t,this._scheduleRelative=r,this._scheduleAbsolute=n}function r(e,t){return t(),nt}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(e){return this._schedule(e,r)},e.scheduleWithState=function(e,t){return this._schedule(e,t)},e.scheduleWithRelative=function(e,t){return this._scheduleRelative(t,e,r)},e.scheduleWithRelativeAndState=function(e,t,r){return this._scheduleRelative(e,t,r)},e.scheduleWithAbsolute=function(e,t){return this._scheduleAbsolute(t,e,r)},e.scheduleWithAbsoluteAndState=function(e,t,r){return this._scheduleAbsolute(e,t,r)},t.now=J,t.normalize=function(e){return 0>e&&(e=0),e},t}(),ht=lt.normalize,pt=lt.isScheduler;!function(e){function r(t,e){function o(e){n(e,function(e){var r=!1,n=!1,i=t.scheduleWithState(e,function(e,t){return r?a.remove(i):n=!0,o(t),nt});n||(a.add(i),r=!0)})}var r=e[0],n=e[1],a=new Qe;return o(r),a}function n(o,e,a){function s(e){r(e,function(e,t){var r=!1,n=!1,i=o[a](e,t,function(e,t){return r?u.remove(i):n=!0,s(t),nt});n||(u.add(i),r=!0)})}var t=e[0],r=e[1],u=new Qe;return s(t),u}function i(t,r){t(function(e){r(t,e)})}e.scheduleRecursive=function(e){return this.scheduleRecursiveWithState(e,i)},e.scheduleRecursiveWithState=function(e,t){return this.scheduleWithState([e,t],r)},e.scheduleRecursiveWithRelative=function(e,t){return this.scheduleRecursiveWithRelativeAndState(t,e,i)},e.scheduleRecursiveWithRelativeAndState=function(e,t,r){return this._scheduleRelative([e,r],t,function(e,t){return n(e,t,"scheduleWithRelativeAndState")})},e.scheduleRecursiveWithAbsolute=function(e,t){return this.scheduleRecursiveWithAbsoluteAndState(t,e,i)},e.scheduleRecursiveWithAbsoluteAndState=function(e,t,r){return this._scheduleAbsolute([e,r],t,function(e,t){return n(e,t,"scheduleWithAbsoluteAndState")})}}(lt.prototype),function(e){lt.prototype.schedulePeriodic=function(e,t){return this.schedulePeriodicWithState(null,e,t)},lt.prototype.schedulePeriodicWithState=function(e,t,r){if("undefined"==typeof H.setInterval)throw new he;t=ht(t);var n=e,i=H.setInterval(function(){n=r(n)},t);return rt(function(){H.clearInterval(i)})}}(lt.prototype),function(e){e.catchError=e["catch"]=function(e){return new bt(this,e)}}(lt.prototype);var ft,dt,vt=(Y.internals.SchedulePeriodicRecursive=function(){function t(e,t){t(0,this._period);try{this._state=this._action(this._state)}catch(e){throw this._cancel.dispose(),e}}function e(e,t,r,n){this._scheduler=e,this._state=t,this._period=r,this._action=n}return e.prototype.start=function(){var e=new at;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,t.bind(this))),e},e}(),lt.immediate=function(){function e(e,t){return t(this,e)}return new lt(J,e,de,de)}()),mt=lt.currentThread=function(){function i(){for(;o.length>0;){var e=o.dequeue();!e.isCancelled()&&e.invoke()}}function e(e,t){var r=new ct(this,e,t,this.now());if(o)o.enqueue(r);else{o=new Ze(4),o.enqueue(r);var n=p(i)();if(o=null,n===Ke)return d(n.e)}return r.disposable}var o,t=new lt(J,e,de,de);return t.scheduleRequired=function(){return!o},t}(),gt=function(){var e,t=K;if(H.setTimeout)e=H.setTimeout,t=H.clearTimeout;else{if(!H.WScript)throw new he;e=function(e,t){H.WScript.Sleep(t),e()}}return{setTimeout:e,clearTimeout:t}}(),_t=gt.setTimeout,yt=gt.clearTimeout;!function(){function n(e){if(a)_t(function(){n(e)},0);else{var t=o[e];if(t){a=!0;var r=p(t)();if(dt(e),a=!1,r===Ke)return d(r.e)}}}function e(){if(!H.postMessage||H.importScripts)return!1;var e=!1,t=H.onmessage;return H.onmessage=function(){e=!0},H.postMessage("","*"),H.onmessage=t,e}function t(e){"string"==typeof e.data&&e.data.substring(0,u.length)===u&&n(e.data.substring(u.length))}var i=1,o={},a=!1;dt=function(e){delete o[e]};var r=RegExp("^"+String(ke).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),s="function"==typeof(s=X&&W&&X.setImmediate)&&!r.test(s)&&s;if(ne(s))ft=function(e){var t=i++;return o[t]=e,s(function(){n(t)}),t};else if("undefined"!=typeof Rr&&"[object process]"==={}.toString.call(Rr))ft=function(e){var t=i++;return o[t]=e,Rr.nextTick(function(){n(t)}),t};else if(e()){var u="ms.rx.schedule"+Math.random();H.addEventListener?H.addEventListener("message",t,!1):H.attachEvent?H.attachEvent("onmessage",t):H.onmessage=t,ft=function(e){var t=i++;return o[t]=e,H.postMessage(u+currentId,"*"),t}}else if(H.MessageChannel){var c=new H.MessageChannel;c.port1.onmessage=function(e){n(e.data)},ft=function(e){var t=i++;return o[t]=e,c.port2.postMessage(t),t}}else ft="document"in H&&"onreadystatechange"in H.document.createElement("script")?function(e){var t=H.document.createElement("script"),r=i++;return o[r]=e,t.onreadystatechange=function(){n(r),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},H.document.documentElement.appendChild(t),r}:function(e){var t=i++;return o[t]=e,_t(function(){n(t)},0),t}}();var bt=(lt.timeout=lt["default"]=function(){function e(e,t){var r=this,n=new at,i=ft(function(){!n.isDisposed&&n.setDisposable(t(r,e))});return new Qe(n,rt(function(){dt(i)}))}function t(e,t,r){var n=this,i=lt.normalize(t),o=new at;if(0===i)return n.scheduleWithState(e,r);var a=_t(function(){!o.isDisposed&&o.setDisposable(r(n,e))},i);return new Qe(o,rt(function(){yt(a)}))}function r(e,t,r){return this.scheduleWithRelativeAndState(e,t-this.now(),r)}return new lt(J,e,t,r)}(),function(r){function n(e,t){return this._scheduler.scheduleWithState(e,this._wrap(t))}function i(e,t,r){return this._scheduler.scheduleWithRelativeAndState(e,t,this._wrap(r))}function o(e,t,r){return this._scheduler.scheduleWithAbsoluteAndState(e,t,this._wrap(r))}function t(e,t){this._scheduler=e,this._handler=t,this._recursiveOriginal=null,this._recursiveWrapper=null,r.call(this,this._scheduler.now.bind(this._scheduler),n,i,o)}return We(t,r),t.prototype._clone=function(e){return new t(e,this._handler)},t.prototype._wrap=function(r){var n=this;return function(e,t){try{return r(n._getRecursiveWrapper(e),t)}catch(e){if(!n._handler(e))throw e;return nt}}},t.prototype._getRecursiveWrapper=function(e){if(this._recursiveOriginal!==e){this._recursiveOriginal=e;var t=this._clone(e);t._recursiveOriginal=e,t._recursiveWrapper=t,this._recursiveWrapper=t}return this._recursiveWrapper},t.prototype.schedulePeriodicWithState=function(e,t,r){var n=this,i=!1,o=new at;return o.setDisposable(this._scheduler.schedulePeriodicWithState(e,t,function(e){if(i)return null;try{return r(e)}catch(e){if(i=!0,!n._handler(e))throw e;return o.dispose(),null}})),o},t}(lt)),xt=Y.Notification=function(){function e(e,t,r,n,i,o){this.kind=e,this.value=t,this.exception=r,this._accept=n,this._acceptObservable=i,this.toString=o}return e.prototype.accept=function(e,t,r){return e&&"object"==typeof e?this._acceptObservable(e):this._accept(e,t,r)},e.prototype.toObservable=function(e){var t=this;return pt(e)||(e=vt),new Tr(function(r){return e.scheduleWithState(t,function(e,t){t._acceptObservable(r),"N"===t.kind&&r.onCompleted()})})},e}(),wt=xt.createOnNext=function(){function t(e){return e(this.value)}function r(e){return e.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(e){return new xt("N",e,null,t,r,n)}}(),St=xt.createOnError=function(){function t(e,t){return t(this.exception)}function r(e){return e.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(e){return new xt("E",null,e,t,r,n)}}(),Mt=xt.createOnCompleted=function(){function e(e,t,r){return r()}function t(e){return e.onCompleted()}function r(){return"OnCompleted()"}return function(){return new xt("C",null,null,e,t,r)}}(),Ct=Y.Observer=function(){};Ct.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},Ct.prototype.asObserver=function(){return new Pt(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},Ct.prototype.checked=function(){return new At(this)};var Tt=Ct.create=function(e,t,r){return e||(e=K),t||(t=te),r||(r=K),new Pt(e,t,r)};Ct.fromNotifier=function(t,r){return new Pt(function(e){return t.call(r,wt(e))},function(e){return t.call(r,St(e))},function(){return t.call(r,Mt())})},Ct.prototype.notifyOn=function(e){return new Rt(e,this)},Ct.prototype.makeSafe=function(e){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,e)};var Et,Ot=Y.internals.AbstractObserver=function(e){function t(){this.isStopped=!1,e.call(this)}return We(t,e),t.prototype.next=fe,t.prototype.error=fe,t.prototype.completed=fe,t.prototype.onNext=function(e){this.isStopped||this.next(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.error(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.error(e),!0)},t}(Ct),Pt=Y.AnonymousObserver=function(n){function e(e,t,r){n.call(this),this._onNext=e,this._onError=t,this._onCompleted=r}return We(e,n),e.prototype.next=function(e){this._onNext(e)},e.prototype.error=function(e){this._onError(e)},e.prototype.completed=function(){this._onCompleted()},e}(Ot),At=function(t){function e(e){t.call(this),this._observer=e,this._state=0}We(e,t);var r=e.prototype;return r.onNext=function(e){this.checkAccess();var t=p(this._observer.onNext).call(this._observer,e);this._state=0,t===Ke&&d(t.e)},r.onError=function(e){this.checkAccess();var t=p(this._observer.onError).call(this._observer,e);this._state=2,t===Ke&&d(t.e)},r.onCompleted=function(){this.checkAccess();var e=p(this._observer.onCompleted).call(this._observer);this._state=2,e===Ke&&d(e.e)},r.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(Ct),jt=Y.internals.ScheduledObserver=function(r){function e(e,t){r.call(this),this.scheduler=e,this.observer=t,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new st}return We(e,r),e.prototype.next=function(e){var t=this;this.queue.push(function(){t.observer.onNext(e)})},e.prototype.error=function(e){var t=this;this.queue.push(function(){t.observer.onError(e)})},e.prototype.completed=function(){var e=this;this.queue.push(function(){e.observer.onCompleted()})},e.prototype.ensureActive=function(){var e=!1,r=this;!this.hasFaulted&&this.queue.length>0&&(e=!this.isAcquired,this.isAcquired=!0),e&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(e){var t;if(!(r.queue.length>0))return void(r.isAcquired=!1);t=r.queue.shift();try{t()}catch(e){throw r.queue=[],r.hasFaulted=!0,e}e()}))},e.prototype.dispose=function(){r.prototype.dispose.call(this),this.disposable.dispose()},e}(Ot),Rt=function(n){function e(e,t,r){n.call(this,e,t),this._cancel=r}return We(e,n),e.prototype.next=function(e){n.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){n.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){n.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(jt),kt=Y.Observable=function(){function e(r){if(Y.config.longStackSupport&&ie){try{throw new Error}catch(e){this.stack=e.stack.substring(e.stack.indexOf("\n")+1)}var n=this;this._subscribe=function(e){var t=e.onError.bind(e);return e.onError=function(e){o(e,n),t(e)},r.call(n,e)}}else this._subscribe=r}return Et=e.prototype,Et.subscribe=Et.forEach=function(e,t,r){return this._subscribe("object"==typeof e?e:Tt(e,t,r))},Et.subscribeOnNext=function(t,r){return this._subscribe(Tt("undefined"!=typeof r?function(e){t.call(r,e)}:t))},Et.subscribeOnError=function(t,r){return this._subscribe(Tt(null,"undefined"!=typeof r?function(e){t.call(r,e)}:t))},Et.subscribeOnCompleted=function(e,t){return this._subscribe(Tt(null,null,"undefined"!=typeof t?function(){e.call(t)}:e))},e}(),Lt=Y.ObservableBase=function(e){function o(e){return e&&ne(e.dispose)?e:ne(e)?rt(e):nt}function n(e,t){var r=t[0],n=t[1],i=p(n.subscribeCore).call(n,r);return i!==Ke||r.fail(Ke.e)?void r.setDisposable(o(i)):d(Ke.e)}function t(e){var t=new Er(e),r=[t,this];return mt.scheduleRequired()?mt.scheduleWithState(r,n):n(null,r),t}function r(){e.call(this,t)}return We(r,e),r.prototype.subscribeCore=fe,r}(kt),Nt=Y.internals.Enumerable=function(){},It=function(t){function e(e){this.sources=e,t.call(this)}function u(e,t,r){this.o=e,this.s=t,this.e=r,this.isStopped=!1}return We(e,t),e.prototype.subscribeCore=function(o){var a,s=new st,e=vt.scheduleRecursiveWithState(this.sources[ve](),function(e,t){if(!a){var r=p(e.next).call(e);if(r===Ke)return o.onError(r.e);if(r.done)return o.onCompleted();var n=r.value;re(n)&&(n=Vt(n));var i=new at;s.setDisposable(i),i.setDisposable(n.subscribe(new u(o,t,e)))}});return new Qe(s,e,rt(function(){a=!0}))},u.prototype.onNext=function(e){this.isStopped||this.o.onNext(e)},u.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},u.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.s(this.e))},u.prototype.dispose=function(){this.isStopped=!0},u.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},e}(Lt);Nt.prototype.concat=function(){return new It(this)};var Dt=function(t){function e(e){this.sources=e,t.call(this)}return We(e,t),e.prototype.subscribeCore=function(o){var a,s=this.sources[ve](),u=new st,e=vt.scheduleRecursiveWithState(null,function(e,t){if(!a){var r=p(s.next).call(s);if(r===Ke)return o.onError(r.e);if(r.done)return null!==e?o.onError(e):o.onCompleted();var n=r.value;re(n)&&(n=Vt(n));var i=new at;u.setDisposable(i),i.setDisposable(n.subscribe(function(e){o.onNext(e)},t,function(){o.onCompleted()}))}});return new Qe(u,e,rt(function(){a=!0}))},e}(Lt);Nt.prototype.catchError=function(){return new Dt(this)},Nt.prototype.catchErrorWhen=function(n){var i=this;return new Tr(function(o){var a,s,u=new Pr,c=new Pr,e=n(u),t=e.subscribe(c),l=i[ve](),h=new st,r=vt.scheduleRecursive(function(t){if(!a){var e=p(l.next).call(l);if(e===Ke)return o.onError(e.e);if(e.done)return void(s?o.onError(s):o.onCompleted());var r=e.value;re(r)&&(r=Vt(r));var n=new at,i=new at;h.setDisposable(new Qe(i,n)),n.setDisposable(r.subscribe(function(e){o.onNext(e)},function(e){i.setDisposable(c.subscribe(t,function(e){o.onError(e)},function(){o.onCompleted()})),u.onNext(e)},function(){o.onCompleted()}))}});return new Qe(t,h,r,rt(function(){a=!0}))})};var Bt=function(e){function t(e,t){this.v=e,this.c=null==t?-1:t}function r(e){this.v=e.v,this.l=e.c}return We(t,e),t.prototype[ve]=function(){return new r(this)},r.prototype.next=function(){return 0===this.l?me:(this.l>0&&this.l--,{done:!1,value:this.v})},t}(Nt),Ft=Nt.repeat=function(e,t){return new Bt(e,t)},zt=function(e){function t(e,t,r){this.s=e,this.fn=t?be(t,r,3):null}function r(e){this.i=-1,this.s=e.s,this.l=this.s.length,this.fn=e.fn}return We(t,e),t.prototype[ve]=function(){return new r(this)},r.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:me},t}(Nt),$t=Nt.of=function(e,t,r){return new zt(e,t,r)};Et.observeOn=function(t){var r=this;return new Tr(function(e){return r.subscribe(new Rt(t,e))},r)},Et.subscribeOn=function(n){var i=this;return new Tr(function(e){var t=new at,r=new st;return r.setDisposable(t),t.setDisposable(n.schedule(function(){r.setDisposable(new y(n,i.subscribe(e)))})),r},i)};var Gt=function(t){function e(e){this.p=e,t.call(this)}return We(e,t),e.prototype.subscribeCore=function(t){return this.p.then(function(e){t.onNext(e),t.onCompleted()},function(e){t.onError(e)}),nt},e}(Lt),Vt=kt.fromPromise=function(e){return new Gt(e)};Et.toPromise=function(e){if(e||(e=Y.config.Promise),!e)throw new he("Promise type not provided nor in Rx.config.Promise");var i=this;return new e(function(e,t){var r,n=!1;i.subscribe(function(e){r=e,n=!0},t,function(){n&&e(r)})})};var Ht=function(t){function e(e){this.source=e,t.call(this)}function r(e){this.o=e,this.a=[],this.isStopped=!1}return We(e,t),e.prototype.subscribeCore=function(e){return this.source.subscribe(new r(e))},r.prototype.onNext=function(e){this.isStopped||this.a.push(e)},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onNext(this.a),this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},e}(Lt);Et.toArray=function(){return new Ht(this)},kt.create=kt.createWithDisposable=function(e,t){return new Tr(e,t)};var Ut=(kt.defer=function(r){return new Tr(function(t){var e;try{e=r()}catch(e){return sr(e).subscribe(t)}return re(e)&&(e=Vt(e)),e.subscribe(t)})},function(t){function e(e){this.scheduler=e,t.call(this)}function r(e,t){this.observer=e,this.parent=t}function n(e,t){t.onCompleted()}return We(e,t),e.prototype.subscribeCore=function(e){var t=new r(e,this);return t.run()},r.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,n)},e}(Lt)),qt=kt.empty=function(e){return pt(e)||(e=vt),new Ut(e)},Wt=function(n){function e(e,t,r){this.iterable=e,this.mapper=t,this.scheduler=r,n.call(this)}return We(e,n),e.prototype.subscribeCore=function(e){var t=new Xt(e,this);return t.run()},e}(Lt),Xt=function(){function e(e,t){this.observer=e,this.parent=t}return e.prototype.run=function(){function e(e,t){try{var r=i.next()}catch(e){return o.onError(e)}if(r.done)return o.onCompleted();var n=r.value;if(a)try{n=a(n,e)}catch(e){return o.onError(e)}o.onNext(n),t(e+1)}var t=Object(this.parent.iterable),i=T(t),o=this.observer,a=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},e}(),Yt=Math.pow(2,53)-1;x.prototype[ve]=function(){return new w(this._s)},w.prototype[ve]=function(){return this},w.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:me},S.prototype[ve]=function(){return new M(this._a)},M.prototype[ve]=function(){return this},M.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:me};var Kt=kt.from=function(e,t,r,n){if(null==e)throw new Error("iterable cannot be null.");if(t&&!ne(t))throw new Error("mapFn when provided must be a function");if(t)var i=be(t,r,2);return pt(n)||(n=mt),new Wt(e,i,n)},Zt=function(r){function e(e,t){this.args=e,this.scheduler=t,r.call(this)}return We(e,r),e.prototype.subscribeCore=function(e){var t=new P(e,this);return t.run()},e}(Lt);P.prototype.run=function(){function e(e,t){i>e?(r.onNext(n[e]),t(e+1)):r.onCompleted()}var r=this.observer,n=this.parent.args,i=n.length;return this.parent.scheduler.scheduleRecursiveWithState(0,e)};var Jt=kt.fromArray=function(e,t){return pt(t)||(t=mt),new Zt(e,t)};kt.generate=function(e,a,s,u,t){return pt(t)||(t=mt),new Tr(function(i){var o=!0;return t.scheduleRecursiveWithState(e,function(e,t){var r,n;try{o?o=!1:e=s(e),r=a(e),r&&(n=u(e))}catch(e){return i.onError(e)}r?(i.onNext(n),t(e)):i.onCompleted()})})};var Qt=function(e){function t(){e.call(this)}return We(t,e),t.prototype.subscribeCore=function(e){return nt},t}(Lt),er=kt.never=function(){return new Qt};kt.of=function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];return new Zt(t,mt)},kt.ofWithScheduler=function(e){for(var t=arguments.length,r=new Array(t-1),n=1;t>n;n++)r[n-1]=arguments[n];return new Zt(r,e)};var tr=function(r){function e(e,t){this.obj=e,this.keys=Object.keys(e),this.scheduler=t,r.call(this)}return We(e,r),e.prototype.subscribeCore=function(e){var t=new j(e,this);return t.run()},e}(Lt);j.prototype.run=function(){function e(e,t){if(a>e){var r=o[e];n.onNext([r,i[r]]),t(e+1)}else n.onCompleted()}var n=this.observer,i=this.parent.obj,o=this.parent.keys,a=o.length;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},kt.pairs=function(e,t){return t||(t=mt),new tr(e,t)};var rr=function(n){function e(e,t,r){this.start=e,this.rangeCount=t,this.scheduler=r,n.call(this)}return We(e,n),e.prototype.subscribeCore=function(e){var t=new nr(e,this);return t.run()},e}(Lt),nr=function(){function e(e,t){this.observer=e,this.parent=t}return e.prototype.run=function(){function e(e,t){n>e?(i.onNext(r+e),t(e+1)):i.onCompleted()}var r=this.parent.start,n=this.parent.rangeCount,i=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,e)},e}();kt.range=function(e,t,r){return pt(r)||(r=mt),new rr(e,t,r)};var ir=function(n){function e(e,t,r){this.value=e,this.repeatCount=null==t?-1:t,this.scheduler=r,n.call(this)}return We(e,n),e.prototype.subscribeCore=function(e){var t=new R(e,this);return t.run()},e}(Lt);R.prototype.run=function(){function e(e,t){return(-1===e||e>0)&&(r.onNext(n),e>0&&e--),0===e?r.onCompleted():void t(e)}var r=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,e)},kt.repeat=function(e,t,r){return pt(r)||(r=mt),new ir(e,t,r)};var or=function(r){function e(e,t){this.value=e,this.scheduler=t,r.call(this)}function n(e,t){this.observer=e,this.parent=t}function t(e,t){var r=t[0],n=t[1];n.onNext(r),n.onCompleted()}return We(e,r),e.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],t)},e}(Lt),ar=(kt["return"]=kt.just=kt.returnValue=function(e,t){return pt(t)||(t=vt),new or(e,t)},function(r){function e(e,t){this.error=e,this.scheduler=t,r.call(this)}function n(e,t){this.o=e,this.p=t}function t(e,t){var r=t[0],n=t[1];n.onError(r)}return We(e,r),e.prototype.subscribeCore=function(e){var t=new n(e,this);return t.run()},n.prototype.run=function(){return this.p.scheduler.scheduleWithState([this.p.error,this.o],t)},e}(Lt)),sr=kt["throw"]=kt.throwError=kt.throwException=function(e,t){return pt(t)||(t=vt),new ar(e,t)};kt.using=function(i,o){return new Tr(function(t){var e,r,n=nt;try{e=i(),e&&(n=e),r=o(e)}catch(e){return new Qe(sr(e).subscribe(t),n)}return new Qe(r.subscribe(t),n)})},Et.amb=function(u){var c=this;return new Tr(function(t){function r(){i||(i=o,s.dispose())}function n(){i||(i=a,e.dispose())}var i,o="L",a="R",e=new at,s=new at;return re(u)&&(u=Vt(u)),e.setDisposable(c.subscribe(function(e){r(),i===o&&t.onNext(e)},function(e){r(),i===o&&t.onError(e)},function(){r(),i===o&&t.onCompleted()})),s.setDisposable(u.subscribe(function(e){n(),i===a&&t.onNext(e)},function(e){n(),i===a&&t.onError(e)},function(){n(),i===a&&t.onCompleted()})),new Qe(e,s)})},kt.amb=function(){function e(e,t){return e.amb(t)}var t=er(),r=[];if(Array.isArray(arguments[0]))r=arguments[0];else for(var n=0,i=arguments.length;i>n;n++)r.push(arguments[n]);for(var n=0,i=r.length;i>n;n++)t=e(t,r[n]);return t},Et["catch"]=Et.catchError=Et.catchException=function(e){return"function"==typeof e?k(this,e):ur([this,e])};var ur=kt.catchError=kt["catch"]=kt.catchException=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(var t=0,r=arguments.length;r>t;t++)e.push(arguments[t]);return $t(e).catchError()};Et.combineLatest=function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];return Array.isArray(t[0])?t[0].unshift(this):t.unshift(this),cr.apply(this,t)};var cr=kt.combineLatest=function(){for(var e=arguments.length,h=new Array(e),t=0;e>t;t++)h[t]=arguments[t];var p=h.pop();return Array.isArray(h[0])&&(h=h[0]),new Tr(function(n){function i(r){if(a[r]=!0,s||(s=a.every(Z))){try{var e=p.apply(null,c)}catch(e){return n.onError(e)}n.onNext(e)}else u.filter(function(e,t){return t!==r}).every(Z)&&n.onCompleted()}function o(e){u[e]=!0,u.every(Z)&&n.onCompleted()}for(var e=h.length,t=function(){return!1},a=f(e,t),s=!1,u=f(e,t),c=new Array(e),l=new Array(e),r=0;e>r;r++)!function(t){var e=h[t],r=new at;re(e)&&(e=Vt(e)),r.setDisposable(e.subscribe(function(e){c[t]=e,i(t)},function(e){n.onError(e)},function(){o(t)})),l[t]=r}(r);return new Qe(l)},this)};Et.concat=function(){for(var e=[],t=0,r=arguments.length;r>t;t++)e.push(arguments[t]);return e.unshift(this),hr.apply(null,e)};var lr=function(t){function e(e){this.sources=e,t.call(this)}function r(e,t){this.sources=e,this.o=t}return We(e,t),e.prototype.subscribeCore=function(e){var t=new r(this.sources,e);return t.run()},r.prototype.run=function(){var i,o=new st,a=this.sources,s=a.length,u=this.o,e=vt.scheduleRecursiveWithState(0,function(e,t){if(!i){if(e===s)return u.onCompleted();var r=a[e];re(r)&&(r=Vt(r));var n=new at;o.setDisposable(n),n.setDisposable(r.subscribe(function(e){u.onNext(e)},function(e){u.onError(e)},function(){t(e+1)}))}});return new Qe(o,e,rt(function(){i=!0}))},e}(Lt),hr=kt.concat=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(arguments.length);for(var t=0,r=arguments.length;r>t;t++)e[t]=arguments[t]}return new lr(e)};Et.concatAll=Et.concatObservable=function(){return this.merge(1)};var pr=function(r){function e(e,t){this.source=e,this.maxConcurrent=t,r.call(this)}return We(e,r),e.prototype.subscribeCore=function(e){var t=new Qe;return t.add(this.source.subscribe(new fr(e,this.maxConcurrent,t))),t},e}(Lt),fr=function(){function e(e,t,r){this.o=e,this.max=t,this.g=r,this.done=!1,this.q=[],this.activeCount=0,this.isStopped=!1}function r(e,t){this.parent=e,this.sad=t,this.isStopped=!1}return e.prototype.handleSubscribe=function(e){var t=new at;this.g.add(t),re(e)&&(e=Vt(e)),t.setDisposable(e.subscribe(new r(this,t)))},e.prototype.onNext=function(e){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(e)):this.q.push(e))},e.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,0===this.activeCount&&this.o.onCompleted())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},r.prototype.onNext=function(e){this.isStopped||this.parent.o.onNext(e)},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.o.onError(e))},r.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var e=this.parent;e.g.remove(this.sad),e.q.length>0?e.handleSubscribe(e.q.shift()):(e.activeCount--,e.done&&0===e.activeCount&&e.o.onCompleted())}},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},e}();Et.merge=function(e){return"number"!=typeof e?dr(this,e):new pr(this,e)};var dr=kt.merge=function(){var e,t,r=[],n=arguments.length;if(arguments[0])if(pt(arguments[0]))for(e=arguments[0],t=1;n>t;t++)r.push(arguments[t]);else for(e=vt,t=0;n>t;t++)r.push(arguments[t]);else for(e=vt,t=1;n>t;t++)r.push(arguments[t]);return Array.isArray(r[0])&&(r=r[0]),A(e,r).mergeAll()},vr=Y.CompositeError=function(e){this.name="NotImplementedError",this.innerErrors=e,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};vr.prototype=Error.prototype,kt.mergeDelayError=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var r=0;t>r;r++)e[r]=arguments[r]}var s=A(null,e);return new Tr(function(r){function n(){0===a.length?r.onCompleted():1===a.length?r.onError(a[0]):r.onError(new vr(a))}var i=new Qe,e=new at,o=!1,a=[];return i.add(e),e.setDisposable(s.subscribe(function(e){var t=new at;i.add(t),re(e)&&(e=Vt(e)),t.setDisposable(e.subscribe(function(e){r.onNext(e)},function(e){a.push(e),i.remove(t),o&&1===i.length&&n()},function(){i.remove(t),o&&1===i.length&&n()}))},function(e){a.push(e),o=!0,1===i.length&&n()},function(){o=!0,1===i.length&&n()})),i})};var mr=function(t){function e(e){this.source=e,t.call(this)}function n(e,t){this.o=e,this.g=t,this.isStopped=!1,this.done=!1}function r(e,t,r){this.parent=e,this.g=t,this.sad=r,this.isStopped=!1}return We(e,t),e.prototype.subscribeCore=function(e){var t=new Qe,r=new at;return t.add(r),r.setDisposable(this.source.subscribe(new n(e,t))),t},n.prototype.onNext=function(e){if(!this.isStopped){var t=new at;this.g.add(t),re(e)&&(e=Vt(e)),t.setDisposable(e.subscribe(new r(this,this.g,t)))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,1===this.g.length&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},r.prototype.onNext=function(e){this.isStopped||this.parent.o.onNext(e)},r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.o.onError(e))},r.prototype.onCompleted=function(){if(!this.isStopped){var e=this.parent;this.isStopped=!0,e.g.remove(this.sad),e.done&&1===e.g.length&&e.o.onCompleted()}},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},e}(Lt);Et.mergeAll=Et.mergeObservable=function(){return new mr(this)},Et.onErrorResumeNext=function(e){if(!e)throw new Error("Second observable is required");return gr([this,e])};var gr=kt.onErrorResumeNext=function(){var a=[];if(Array.isArray(arguments[0]))a=arguments[0];else for(var e=0,t=arguments.length;t>e;e++)a.push(arguments[e]);return new Tr(function(n){var i=0,o=new st,e=vt.scheduleRecursive(function(e){var t,r;i<a.length?(t=a[i++],re(t)&&(t=Vt(t)),r=new at,o.setDisposable(r),r.setDisposable(t.subscribe(n.onNext.bind(n),e,e))):n.onCompleted()});return new Qe(o,e)})};Et.skipUntil=function(i){var o=this;return new Tr(function(t){var r=!1,e=new Qe(o.subscribe(function(e){r&&t.onNext(e)},function(e){t.onError(e)},function(){r&&t.onCompleted()}));re(i)&&(i=Vt(i));var n=new at;return e.add(n),n.setDisposable(i.subscribe(function(){r=!0,n.dispose()},function(e){t.onError(e)},function(){n.dispose()})),e},o)};var _r=function(t){function e(e){this.source=e,t.call(this)}function n(e,t){this.o=e,this.inner=t,this.stopped=!1,this.latest=0,this.hasLatest=!1,this.isStopped=!1}function i(e,t){this.parent=e,this.id=t,this.isStopped=!1}return We(e,t),e.prototype.subscribeCore=function(e){var t=new st,r=this.source.subscribe(new n(e,t));return new Qe(r,t)},n.prototype.onNext=function(e){if(!this.isStopped){var t=new at,r=++this.latest;this.hasLatest=!0,this.inner.setDisposable(t),re(e)&&(e=Vt(e)),t.setDisposable(e.subscribe(new i(this,r)))}},n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.stopped=!0,!this.hasLatest&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},i.prototype.onNext=function(e){this.isStopped||this.parent.latest===this.id&&this.parent.o.onNext(e)},i.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&this.parent.o.onError(e))},i.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.isStopped&&this.parent.o.onCompleted()))},i.prototype.dispose=function(){this.isStopped=!0},i.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(e),!0)},e}(Lt);Et["switch"]=Et.switchLatest=function(){return new _r(this)};var yr=function(r){function e(e,t){this.source=e,this.other=re(t)?Vt(t):t,r.call(this)}function t(e){this.o=e,this.isStopped=!1}return We(e,r),e.prototype.subscribeCore=function(e){return new Qe(this.source.subscribe(e),this.other.subscribe(new t(e)))},t.prototype.onNext=function(e){this.isStopped||this.o.onCompleted()},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},t.prototype.onCompleted=function(){!this.isStopped&&(this.isStopped=!0)},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},e}(Lt);Et.takeUntil=function(e){return new yr(this,e)},Et.withLatestFrom=function(){for(var e=arguments.length,u=new Array(e),t=0;e>t;t++)u[t]=arguments[t];var c=u.pop(),l=this;return Array.isArray(u[0])&&(u=u[0]),new Tr(function(n){for(var e=u.length,i=f(e,L),o=!1,a=new Array(e),s=new Array(e+1),t=0;e>t;t++)!function(t){var e=u[t],r=new at;re(e)&&(e=Vt(e)),r.setDisposable(e.subscribe(function(e){a[t]=e,i[t]=!0,o=i.every(Z)},function(e){n.onError(e)},K)),s[t]=r}(t);var r=new at;return r.setDisposable(l.subscribe(function(e){var t=[e].concat(a);if(o){var r=p(c).apply(null,t);return r===Ke?n.onError(r.e):void n.onNext(r)}},function(e){n.onError(e)},function(){n.onCompleted()})),s[e]=r,new Qe(s)},this)},Et.zip=function(){if(Array.isArray(arguments[0]))return N.apply(this,arguments);for(var e=arguments.length,s=new Array(e),t=0;e>t;t++)s[t]=arguments[t];var u=this,c=s.pop();return s.unshift(u),new Tr(function(i){for(var e=s.length,o=f(e,I),a=f(e,L),r=new Array(e),t=0;e>t;t++)!function(n){var e=s[n],t=new at;re(e)&&(e=Vt(e)),t.setDisposable(e.subscribe(function(e){if(o[n].push(e),o.every(function(e){return e.length>0})){var t=o.map(function(e){return e.shift()}),r=p(c).apply(u,t);if(r===Ke)return i.onError(r.e);i.onNext(r)}else a.filter(function(e,t){return t!==n}).every(Z)&&i.onCompleted()},function(e){i.onError(e)},function(){a[n]=!0,a.every(Z)&&i.onCompleted()})),r[n]=t}(t);return new Qe(r)},u)},kt.zip=function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];var n=t.shift();return n.zip.apply(n,t)},kt.zipArray=function(){var a;if(Array.isArray(arguments[0]))a=arguments[0];else{var e=arguments.length;a=new Array(e);for(var t=0;e>t;t++)a[t]=arguments[t]}return new Tr(function(n){for(var e=a.length,i=f(e,D),o=f(e,L),t=new Array(e),r=0;e>r;r++)!function(r){t[r]=new at,t[r].setDisposable(a[r].subscribe(function(e){if(i[r].push(e),i.every(function(e){return e.length>0})){var t=i.map(function(e){return e.shift()});n.onNext(t)}else if(o.filter(function(e,t){return t!==r}).every(Z))return n.onCompleted()},function(e){n.onError(e)},function(){o[r]=!0,o.every(Z)&&n.onCompleted()}))}(r);return new Qe(t)})},Et.asObservable=function(){var t=this;return new Tr(function(e){return t.subscribe(e)},t)},Et.bufferWithCount=function(e,t){return"number"!=typeof t&&(t=e),this.windowWithCount(e,t).selectMany(function(e){return e.toArray()}).where(function(e){return e.length>0})},Et.dematerialize=function(){var e=this;return new Tr(function(t){return e.subscribe(function(e){return e.accept(t)},function(e){t.onError(e)},function(){t.onCompleted()})},this)},Et.distinctUntilChanged=function(a,s){var e=this;return s||(s=Q),new Tr(function(n){var i,o=!1;return e.subscribe(function(e){var t=e;if(a&&(t=p(a)(e),t===Ke))return n.onError(t.e);if(o){var r=p(s)(i,t);if(r===Ke)return n.onError(r.e)}o&&r||(o=!0,i=t,n.onNext(e))},function(e){n.onError(e)},function(){n.onCompleted()})},this)};var br=function(i){function e(e,t,r,n){this.source=e,this.t=!t||ne(t)?Tt(t||K,r||K,n||K):t,i.call(this)}function t(e,t){this.o=e,this.t=t,this.isStopped=!1}return We(e,i),e.prototype.subscribeCore=function(e){return this.source.subscribe(new t(e,this.t))},t.prototype.onNext=function(e){if(!this.isStopped){var t=p(this.t.onNext).call(this.t,e);t===Ke&&this.o.onError(t.e),this.o.onNext(e)}},t.prototype.onError=function(e){if(!this.isStopped){this.isStopped=!0;var t=p(this.t.onError).call(this.t,e);if(t===Ke)return this.o.onError(t.e);this.o.onError(e)}},t.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var e=p(this.t.onCompleted).call(this.t);if(e===Ke)return this.o.onError(e.e);this.o.onCompleted()}},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},e}(Lt);Et["do"]=Et.tap=Et.doAction=function(e,t,r){return new br(this,e,t,r)},Et.doOnNext=Et.tapOnNext=function(t,r){return this.tap("undefined"!=typeof r?function(e){t.call(r,e)}:t)},Et.doOnError=Et.tapOnError=function(t,r){return this.tap(K,"undefined"!=typeof r?function(e){t.call(r,e)}:t)},Et.doOnCompleted=Et.tapOnCompleted=function(e,t){return this.tap(K,null,"undefined"!=typeof t?function(){e.call(t)}:e)},Et["finally"]=Et.ensure=function(r){var n=this;return new Tr(function(e){var t;try{t=n.subscribe(e)}catch(e){throw r(),e}return rt(function(){try{t.dispose()}catch(e){throw e}finally{r()}})},this)},Et.finallyAction=function(e){return this.ensure(e)};var xr=function(t){function e(e){this.source=e,t.call(this)}function r(e){this.o=e,this.isStopped=!1}return We(e,t),e.prototype.subscribeCore=function(e){return this.source.subscribe(new r(e))},r.prototype.onNext=K,r.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(e),!0)},e}(Lt);Et.ignoreElements=function(){return new xr(this)},Et.materialize=function(){var e=this;return new Tr(function(t){return e.subscribe(function(e){t.onNext(wt(e))},function(e){t.onNext(St(e)),t.onCompleted()},function(){t.onNext(Mt()),t.onCompleted()})},e)},Et.repeat=function(e){return Ft(this,e).concat()},Et.retry=function(e){return Ft(this,e).catchError()},Et.retryWhen=function(e){return Ft(this).catchErrorWhen(e)};var wr=function(i){function e(e,t,r,n){this.source=e,this.accumulator=t,this.hasSeed=r,this.seed=n,i.call(this)}return We(e,i),e.prototype.subscribeCore=function(e){return this.source.subscribe(new B(e,this))},e}(Lt);B.prototype.onNext=function(e){if(!this.isStopped){!this.hasValue&&(this.hasValue=!0);try{this.hasAccumulation?this.accumulation=this.accumulator(this.accumulation,e):(this.accumulation=this.hasSeed?this.accumulator(this.seed,e):e,this.hasAccumulation=!0)}catch(e){return this.observer.onError(e)}this.observer.onNext(this.accumulation)}},B.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.observer.onError(e))},B.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,!this.hasValue&&this.hasSeed&&this.observer.onNext(this.seed),this.observer.onCompleted())},B.prototype.dispose=function(){this.isStopped=!0},B.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(e),!0)},Et.scan=function(){var e,t,r=!1;return 2===arguments.length?(r=!0,e=arguments[0],t=arguments[1]):t=arguments[0],new wr(this,t,r,e)},Et.skipLast=function(n){if(0>n)throw new le;var e=this;return new Tr(function(t){var r=[];return e.subscribe(function(e){r.push(e),r.length>n&&t.onNext(r.shift())},function(e){t.onError(e)},function(){t.onCompleted()})},e)},Et.startWith=function(){var e,t=0;arguments.length&&pt(arguments[0])?(e=arguments[0],t=1):e=vt;for(var r=[],n=t,i=arguments.length;i>n;n++)r.push(arguments[n]);return $t([Jt(r,e),this]).concat()},Et.takeLast=function(n){if(0>n)throw new le;var e=this;return new Tr(function(t){var r=[];return e.subscribe(function(e){r.push(e),r.length>n&&r.shift()},function(e){t.onError(e)},function(){for(;r.length>0;)t.onNext(r.shift());t.onCompleted()})},e)},Et.takeLastBuffer=function(n){var e=this;return new Tr(function(t){var r=[];return e.subscribe(function(e){r.push(e),r.length>n&&r.shift()},function(e){t.onError(e)},function(){t.onNext(r),t.onCompleted()})},e)},Et.windowWithCount=function(s,u){var n=this;if(+s||(s=0),Math.abs(s)===1/0&&(s=0),0>=s)throw new le;if(null==u&&(u=s),+u||(u=0),Math.abs(u)===1/0&&(u=0),0>=u)throw new le;return new Tr(function(t){function i(){var e=new Pr;a.push(e),t.onNext(Ye(e,r))}var e=new at,r=new ut(e),o=0,a=[];return i(),e.setDisposable(n.subscribe(function(e){for(var t=0,r=a.length;r>t;t++)a[t].onNext(e);var n=o-s+1;n>=0&&n%u===0&&a.shift().onCompleted(),++o%u===0&&i()},function(e){for(;a.length>0;)a.shift().onError(e);t.onError(e)},function(){for(;a.length>0;)a.shift().onCompleted();t.onCompleted()})),r},n)},Et.selectConcat=Et.concatMap=function(t,i,e){return ne(t)&&ne(i)?this.concatMap(function(r,n){var e=t(r,n);return re(e)&&(e=Vt(e)),(_e(e)||ge(e))&&(e=Kt(e)),e.map(function(e,t){return i(r,e,n,t)})}):ne(t)?F(this,t,e):F(this,function(){return t})},Et.concatMapObserver=Et.selectConcatObserver=function(e,t,r,n){var i=this,o=be(e,n,2),a=be(t,n,1),s=be(r,n,0);return new Tr(function(r){var n=0;return i.subscribe(function(e){var t;try{t=o(e,n++)}catch(e){return void r.onError(e)}re(t)&&(t=Vt(t)),r.onNext(t)},function(e){var t;try{t=a(e)}catch(e){return void r.onError(e)}re(t)&&(t=Vt(t)),r.onNext(t),r.onCompleted()},function(){var e;try{e=s()}catch(e){return void r.onError(e)}re(e)&&(e=Vt(e)),r.onNext(e),r.onCompleted()})},this).concatAll()},Et.defaultIfEmpty=function(e){var n=this;return e===a&&(e=null),new Tr(function(t){var r=!1;return n.subscribe(function(e){r=!0,t.onNext(e)},function(e){t.onError(e)},function(){!r&&t.onNext(e),t.onCompleted()})},n)},$.prototype.push=function(e){var t=-1===z(this.set,e,this.comparer);return t&&this.set.push(e),t},Et.distinct=function(i,e){var t=this;return e||(e=Q),new Tr(function(r){var n=new $(e);return t.subscribe(function(e){var t=e;if(i)try{t=i(e)}catch(e){return void r.onError(e)}n.push(t)&&r.onNext(e)},function(e){r.onError(e)},function(){r.onCompleted()})},this)};var Sr=function(n){function r(e,t,r){this.source=e,this.selector=be(t,r,3),n.call(this)}function i(n,i){return function(e,t,r){return n.call(this,i.selector(e,t,r),t,r)}}function t(e,t,r){this.o=e,this.selector=t,this.source=r,this.i=0,this.isStopped=!1}return We(r,n),r.prototype.internalMap=function(e,t){return new r(this.source,i(e,this),t)},r.prototype.subscribeCore=function(e){return this.source.subscribe(new t(e,this.selector,this))},t.prototype.onNext=function(e){if(!this.isStopped){var t=p(this.selector)(e,this.i++,this.source);return t===Ke?this.o.onError(t.e):void this.o.onNext(t)}},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},r}(Lt);Et.map=Et.select=function(e,t){var r="function"==typeof e?e:function(){return e};return this instanceof Sr?this.internalMap(r,t):new Sr(this,r,t)},Et.pluck=function(){var i=arguments,o=arguments.length;if(0===o)throw new Error("List of properties cannot be empty.");return this.map(function(e){for(var t=e,r=0;o>r;r++){var n=t[i[r]];if("undefined"==typeof n)return a;t=n}return t})},Et.flatMapObserver=Et.selectManyObserver=function(i,o,t,a){var e=this;return new Tr(function(r){var n=0;return e.subscribe(function(e){var t;try{t=i.call(a,e,n++)}catch(e){return void r.onError(e)}re(t)&&(t=Vt(t)),r.onNext(t)},function(e){var t;try{t=o.call(a,e)}catch(e){return void r.onError(e)}re(t)&&(t=Vt(t)),r.onNext(t),r.onCompleted()},function(){var e;try{e=t.call(a)}catch(e){return void r.onError(e)}re(e)&&(e=Vt(e)),r.onNext(e),r.onCompleted()})},e).mergeAll()},Et.selectMany=Et.flatMap=function(t,i,e){return ne(t)&&ne(i)?this.flatMap(function(r,n){var e=t(r,n);return re(e)&&(e=Vt(e)),(_e(e)||ge(e))&&(e=Kt(e)),e.map(function(e,t){return i(r,e,n,t)})},e):ne(t)?G(this,t,e):G(this,function(){return t})},Et.selectSwitch=Et.flatMapLatest=Et.switchMap=function(e,t){return this.select(e,t).switchLatest()};var Mr=function(r){function e(e,t){this.source=e,this.skipCount=t,r.call(this)}function t(e,t){this.c=t,this.r=t,this.o=e,this.isStopped=!1}return We(e,r),e.prototype.subscribeCore=function(e){return this.source.subscribe(new t(e,this.skipCount))},t.prototype.onNext=function(e){this.isStopped||(this.r<=0?this.o.onNext(e):this.r--)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},e}(Lt);Et.skip=function(e){if(0>e)throw new le;return new Mr(this,e)},Et.skipWhile=function(e,t){var i=this,o=be(e,t,3);return new Tr(function(t){var r=0,n=!1;return i.subscribe(function(e){if(!n)try{n=!o(e,r++,i)}catch(e){return void t.onError(e)}n&&t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},i)},Et.take=function(e,t){if(0>e)throw new le;if(0===e)return qt(t);var n=this;return new Tr(function(t){var r=e;return n.subscribe(function(e){r-- >0&&(t.onNext(e),0>=r&&t.onCompleted())},function(e){t.onError(e)},function(){t.onCompleted()})},n)},Et.takeWhile=function(e,t){var i=this,o=be(e,t,3);return new Tr(function(t){var r=0,n=!0;return i.subscribe(function(e){if(n){try{n=o(e,r++,i)}catch(e){return void t.onError(e)}n?t.onNext(e):t.onCompleted()}},function(e){t.onError(e)},function(){t.onCompleted()})},i)};var Cr=function(n){function r(e,t,r){this.source=e,this.predicate=be(t,r,3),n.call(this)}function i(n,i){return function(e,t,r){return i.predicate(e,t,r)&&n.call(this,e,t,r)}}function t(e,t,r){this.o=e,this.predicate=t,this.source=r,this.i=0,this.isStopped=!1}return We(r,n),r.prototype.subscribeCore=function(e){return this.source.subscribe(new t(e,this.predicate,this))},r.prototype.internalFilter=function(e,t){return new r(this.source,i(e,this),t)},t.prototype.onNext=function(e){if(!this.isStopped){var t=p(this.predicate)(e,this.i++,this.source);return t===Ke?this.o.onError(t.e):void(t&&this.o.onNext(e))}},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(e),!0)},r}(Lt);Et.filter=Et.where=function(e,t){return this instanceof Cr?this.internalFilter(e,t):new Cr(this,e,t)},Et.transduce=function(e){function n(e){return{"@@transducer/init":function(){return e},"@@transducer/step":function(e,t){return e.onNext(t)},"@@transducer/result":function(e){return e.onCompleted()}}}var i=this;return new Tr(function(t){var r=e(n(t));return i.subscribe(function(e){try{r["@@transducer/step"](t,e)}catch(e){t.onError(e)}},function(e){t.onError(e)},function(){r["@@transducer/result"](t)})},i)};var Tr=Y.AnonymousObservable=function(r){function o(e){return e&&ne(e.dispose)?e:ne(e)?rt(e):nt}function i(e,t){var r=t[0],n=t[1],i=p(n)(r);return i!==Ke||r.fail(Ke.e)?void r.setDisposable(o(i)):d(Ke.e)}function e(n,e){function t(e){var t=new Er(e),r=[t,n];return mt.scheduleRequired()?mt.scheduleWithState(r,i):i(null,r),t}this.source=e,r.call(this,t)}return We(e,r),e}(kt),Er=function(t){function e(e){t.call(this),this.observer=e,this.m=new at}We(e,t);var r=e.prototype;return r.next=function(e){var t=p(this.observer.onNext).call(this.observer,e);t===Ke&&(this.dispose(),d(t.e))},r.error=function(e){var t=p(this.observer.onError).call(this.observer,e);this.dispose(),t===Ke&&d(t.e)},r.completed=function(){var e=p(this.observer.onCompleted).call(this.observer);this.dispose(),e===Ke&&d(e.e)},r.setDisposable=function(e){this.m.setDisposable(e)},r.getDisposable=function(){return this.m.getDisposable()},r.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Ot),Or=function(e,t){this.subject=e,this.observer=t};Or.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var Pr=Y.Subject=function(e){function t(e){return ot(this),this.isStopped?this.hasError?(e.onError(this.error),nt):(e.onCompleted(),nt):(this.observers.push(e),new Or(this,e))}function r(){e.call(this,t),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return We(r,e),Xe(r.prototype,Ct.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(ot(this),!this.isStopped){this.isStopped=!0;for(var e=0,t=i(this.observers),r=t.length;r>e;e++)t[e].onCompleted();this.observers.length=0}},onError:function(e){if(ot(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;for(var t=0,r=i(this.observers),n=r.length;n>t;t++)r[t].onError(e);this.observers.length=0}},onNext:function(e){if(ot(this),!this.isStopped)for(var t=0,r=i(this.observers),n=r.length;n>t;t++)r[t].onNext(e)},dispose:function(){this.isDisposed=!0,this.observers=null}}),r.create=function(e,t){return new Ar(e,t)},r}(kt),Ar=(Y.AsyncSubject=function(e){function t(e){return ot(this),this.isStopped?(this.hasError?e.onError(this.error):this.hasValue?(e.onNext(this.value),e.onCompleted()):e.onCompleted(),nt):(this.observers.push(e),new Or(this,e))}function r(){e.call(this,t),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return We(r,e),Xe(r.prototype,Ct,{hasObservers:function(){return ot(this),this.observers.length>0},onCompleted:function(){var e,t;if(ot(this),!this.isStopped){this.isStopped=!0;var r=i(this.observers),t=r.length;if(this.hasValue)for(e=0;t>e;e++){var n=r[e];n.onNext(this.value),n.onCompleted()}else for(e=0;t>e;e++)r[e].onCompleted();this.observers.length=0}},onError:function(e){if(ot(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var t=0,r=i(this.observers),n=r.length;n>t;t++)r[t].onError(e);this.observers.length=0}},onNext:function(e){ot(this),this.isStopped||(this.value=e,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),r}(kt),Y.AnonymousSubject=function(r){function n(e){return this.observable.subscribe(e)}function e(e,t){this.observer=e,this.observable=t,r.call(this,n)}return We(e,r),Xe(e.prototype,Ct.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(e){this.observer.onError(e)},onNext:function(e){this.observer.onNext(e)}}),e}(kt));"function"==typeof Ir&&"object"==typeof Ir.amd&&Ir.amd?(H.Rx=Y,Ir(function(){return Y})):U&&q?W?(q.exports=Y).Rx=Y:U.Rx=Y:H.Rx=Y;var jr=e()}).call(this)}).call(this,e(150),"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{150:150}]},{},[1])(1)})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],16:[function(i,o,e){(function(e){var t=typeof e!=="undefined"?e:typeof window!=="undefined"?window:{};var r=i("min-document");var n;if(typeof document!=="undefined"){n=document}else{n=t["__GLOBAL_DOCUMENT_CACHE@4"];if(!n){n=t["__GLOBAL_DOCUMENT_CACHE@4"]=r}}o.exports=n}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"min-document":4}],17:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a;var s=i*8-n-1;var u=(1<<s)-1;var c=u>>1;var l=-7;var h=r?i-1:0;var p=r?-1:1;var f=e[t+h];h+=p;o=f&(1<<-l)-1;f>>=-l;l+=s;for(;l>0;o=o*256+e[t+h],h+=p,l-=8){}a=o&(1<<-l)-1;o>>=-l;l+=n;for(;l>0;a=a*256+e[t+h],h+=p,l-=8){}if(o===0){o=1-c}else if(o===u){return a?NaN:(f?-1:1)*Infinity}else{a=a+Math.pow(2,n);o=o-c}return(f?-1:1)*a*Math.pow(2,o-n)};r.write=function(e,t,r,n,i,o){var a,s,u;var c=o*8-i-1;var l=(1<<c)-1;var h=l>>1;var p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var f=n?0:o-1;var d=n?1:-1;var v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;a=l}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-a))<1){a--;u*=2}if(a+h>=1){t+=p/u}else{t+=p*Math.pow(2,1-h)}if(t*u>=2){a++;u/=2}if(a+h>=l){s=0;a=l}else if(a+h>=1){s=(t*u-1)*Math.pow(2,i);a=a+h}else{s=t*Math.pow(2,h-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+f]=s&255,f+=d,s/=256,i-=8){}a=a<<i|s;c+=i;for(;c>0;e[r+f]=a&255,f+=d,a/=256,c-=8){}e[r+f-d]|=v*128}},{}],18:[function(e,n,t){(function(e){"use strict";var r=typeof window!=="undefined"?window:typeof e!=="undefined"?e:{};n.exports=t;function t(e,t){if(e in r){return r[e]}r[e]=t;return t}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],19:[function(e,t,r){"use strict";var a=e("./index.js");t.exports=n;function n(e,t,r){var n="__INDIVIDUAL_ONE_VERSION_"+e;var i=n+"_ENFORCE_SINGLETON";var o=a(i,t);if(o!==t){throw new Error("Can only have one copy of "+e+".\n"+"You already have version "+o+" installed.\n"+"This means you cannot install version "+t)}return a(n,r)}},{"./index.js":18}],20:[function(e,t,r){"use strict";t.exports=function e(t){return typeof t==="object"&&t!==null}},{}],21:[function(e,t,r){"use strict";var m={};m.base32="0123456789bcdefghjkmnpqrstuvwxyz";m.encode=function(e,t,r){if(typeof r=="undefined"){for(var n=1;n<=12;n++){var i=m.encode(e,t,n);var o=m.decode(i);if(o.lat==e&&o.lon==t)return i}r=12}e=Number(e);t=Number(t);r=Number(r);if(isNaN(e)||isNaN(t)||isNaN(r))throw new Error("Invalid geohash");var a=0;var s=0;var u=true;var c="";var l=-90,h=90;var p=-180,f=180;while(c.length<r){if(u){var d=(p+f)/2;if(t>=d){a=a*2+1;p=d}else{a=a*2;f=d}}else{var v=(l+h)/2;if(e>=v){a=a*2+1;l=v}else{a=a*2;h=v}}u=!u;if(++s==5){c+=m.base32.charAt(a);s=0;a=0}}return c};m.decode=function(e){var t=m.bounds(e);var r=t.sw.lat,n=t.sw.lon;var i=t.ne.lat,o=t.ne.lon;var a=(r+i)/2;var s=(n+o)/2;a=a.toFixed(Math.floor(2-Math.log(i-r)/Math.LN10));s=s.toFixed(Math.floor(2-Math.log(o-n)/Math.LN10));return{lat:Number(a),lon:Number(s)}};m.bounds=function(e){if(e.length===0)throw new Error("Invalid geohash");e=e.toLowerCase();var t=true;var r=-90,n=90;var i=-180,o=180;for(var a=0;a<e.length;a++){var s=e.charAt(a);var u=m.base32.indexOf(s);if(u==-1)throw new Error("Invalid geohash");for(var c=4;c>=0;c--){var l=u>>c&1;if(t){var h=(i+o)/2;if(l==1){i=h}else{o=h}}else{var p=(r+n)/2;if(l==1){r=p}else{n=p}}t=!t}}var f={sw:{lat:r,lon:i},ne:{lat:n,lon:o}};return f};m.adjacent=function(e,t){e=e.toLowerCase();t=t.toLowerCase();if(e.length===0)throw new Error("Invalid geohash");if("nsew".indexOf(t)==-1)throw new Error("Invalid direction");var r={n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]};var n={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]};var i=e.slice(-1);var o=e.slice(0,-1);var a=e.length%2;if(n[t][a].indexOf(i)!=-1&&o!==""){o=m.adjacent(o,t)}return o+m.base32.charAt(r[t][a].indexOf(i))};m.neighbours=function(e){return{n:m.adjacent(e,"n"),ne:m.adjacent(m.adjacent(e,"n"),"e"),e:m.adjacent(e,"e"),se:m.adjacent(m.adjacent(e,"s"),"e"),s:m.adjacent(e,"s"),sw:m.adjacent(m.adjacent(e,"s"),"w"),w:m.adjacent(e,"w"),nw:m.adjacent(m.adjacent(e,"n"),"w")}};if(typeof t!="undefined"&&t.exports)t.exports=m},{}],22:[function(e,r,n){(function(e,t){typeof n==="object"&&typeof r!=="undefined"?t(n):typeof o==="function"&&o.amd?o(["exports"],t):(e=e||self,t(e.martinez={}))})(this,function(e){"use strict";function n(e,t){return e>t?1:e<t?-1:0}var m=function e(t,r){if(t===void 0)t=n;if(r===void 0)r=false;this._compare=t;this._root=null;this._size=0;this._noDuplicates=!!r};var t={size:{configurable:true}};m.prototype.rotateLeft=function e(t){var r=t.right;if(r){t.right=r.left;if(r.left){r.left.parent=t}r.parent=t.parent}if(!t.parent){this._root=r}else if(t===t.parent.left){t.parent.left=r}else{t.parent.right=r}if(r){r.left=t}t.parent=r};m.prototype.rotateRight=function e(t){var r=t.left;if(r){t.left=r.right;if(r.right){r.right.parent=t}r.parent=t.parent}if(!t.parent){this._root=r}else if(t===t.parent.left){t.parent.left=r}else{t.parent.right=r}if(r){r.right=t}t.parent=r};m.prototype._splay=function e(t){while(t.parent){var r=t.parent;if(!r.parent){if(r.left===t){this.rotateRight(r)}else{this.rotateLeft(r)}}else if(r.left===t&&r.parent.left===r){this.rotateRight(r.parent);this.rotateRight(r)}else if(r.right===t&&r.parent.right===r){this.rotateLeft(r.parent);this.rotateLeft(r)}else if(r.left===t&&r.parent.right===r){this.rotateRight(r);this.rotateLeft(r)}else{this.rotateLeft(r);this.rotateRight(r)}}};m.prototype.splay=function e(t){var r,n,i,o,a;while(t.parent){r=t.parent;n=r.parent;if(n&&n.parent){i=n.parent;if(i.left===n){i.left=t}else{i.right=t}t.parent=i}else{t.parent=null;this._root=t}o=t.left;a=t.right;if(t===r.left){if(n){if(n.left===r){if(r.right){n.left=r.right;n.left.parent=n}else{n.left=null}r.right=n;n.parent=r}else{if(o){n.right=o;o.parent=n}else{n.right=null}t.left=n;n.parent=t}}if(a){r.left=a;a.parent=r}else{r.left=null}t.right=r;r.parent=t}else{if(n){if(n.right===r){if(r.left){n.right=r.left;n.right.parent=n}else{n.right=null}r.left=n;n.parent=r}else{if(a){n.left=a;a.parent=n}else{n.left=null}t.right=n;n.parent=t}}if(o){r.right=o;o.parent=r}else{r.right=null}t.left=r;r.parent=t}}};m.prototype.replace=function e(t,r){if(!t.parent){this._root=r}else if(t===t.parent.left){t.parent.left=r}else{t.parent.right=r}if(r){r.parent=t.parent}};m.prototype.minNode=function e(t){if(t===void 0)t=this._root;if(t){while(t.left){t=t.left}}return t};m.prototype.maxNode=function e(t){if(t===void 0)t=this._root;if(t){while(t.right){t=t.right}}return t};m.prototype.insert=function e(t,r){var n=this._root;var i=null;var o=this._compare;var a;if(this._noDuplicates){while(n){i=n;a=o(n.key,t);if(a===0){return}else if(o(n.key,t)<0){n=n.right}else{n=n.left}}}else{while(n){i=n;if(o(n.key,t)<0){n=n.right}else{n=n.left}}}n={key:t,data:r,left:null,right:null,parent:i};if(!i){this._root=n}else if(o(i.key,n.key)<0){i.right=n}else{i.left=n}this.splay(n);this._size++;return n};m.prototype.find=function e(t){var r=this._root;var n=this._compare;while(r){var i=n(r.key,t);if(i<0){r=r.right}else if(i>0){r=r.left}else{return r}}return null};m.prototype.contains=function e(t){var r=this._root;var n=this._compare;while(r){var i=n(t,r.key);if(i===0){return true}else if(i<0){r=r.left}else{r=r.right}}return false};m.prototype.remove=function e(t){var r=this.find(t);if(!r){return false}this.splay(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var n=this.minNode(r.right);if(n.parent!==r){this.replace(n,n.right);n.right=r.right;n.right.parent=n}this.replace(r,n);n.left=r.left;n.left.parent=n}this._size--;return true};m.prototype.removeNode=function e(t){if(!t){return false}this.splay(t);if(!t.left){this.replace(t,t.right)}else if(!t.right){this.replace(t,t.left)}else{var r=this.minNode(t.right);if(r.parent!==t){this.replace(r,r.right);r.right=t.right;r.right.parent=r}this.replace(t,r);r.left=t.left;r.left.parent=r}this._size--;return true};m.prototype.erase=function e(t){var r=this.find(t);if(!r){return}this.splay(r);var n=r.left;var i=r.right;var o=null;if(n){n.parent=null;o=this.maxNode(n);this.splay(o);this._root=o}if(i){if(n){o.right=i}else{this._root=i}i.parent=o}this._size--};m.prototype.pop=function e(){var t=this._root,r=null;if(t){while(t.left){t=t.left}r={key:t.key,data:t.data};this.remove(t.key)}return r};m.prototype.next=function e(t){var r=t;if(r){if(r.right){r=r.right;while(r&&r.left){r=r.left}}else{r=t.parent;while(r&&r.right===t){t=r;r=r.parent}}}return r};m.prototype.prev=function e(t){var r=t;if(r){if(r.left){r=r.left;while(r&&r.right){r=r.right}}else{r=t.parent;while(r&&r.left===t){t=r;r=r.parent}}}return r};m.prototype.forEach=function e(t){var r=this._root;var n=[],i=false,o=0;while(!i){if(r){n.push(r);r=r.left}else{if(n.length>0){r=n.pop();t(r,o++);r=r.right}else{i=true}}}return this};m.prototype.range=function e(t,r,n,i){var o=[];var a=this._compare;var s=this._root,u;while(o.length!==0||s){if(s){o.push(s);s=s.left}else{s=o.pop();u=a(s.key,r);if(u>0){break}else if(a(s.key,t)>=0){if(n.call(i,s)){return this}}s=s.right}}return this};m.prototype.keys=function e(){var t=this._root;var r=[],n=[],i=false;while(!i){if(t){r.push(t);t=t.left}else{if(r.length>0){t=r.pop();n.push(t.key);t=t.right}else{i=true}}}return n};m.prototype.values=function e(){var t=this._root;var r=[],n=[],i=false;while(!i){if(t){r.push(t);t=t.left}else{if(r.length>0){t=r.pop();n.push(t.data);t=t.right}else{i=true}}}return n};m.prototype.at=function e(t){var r=this._root;var n=[],i=false,o=0;while(!i){if(r){n.push(r);r=r.left}else{if(n.length>0){r=n.pop();if(o===t){return r}o++;r=r.right}else{i=true}}}return null};m.prototype.load=function e(t,r,n){if(t===void 0)t=[];if(r===void 0)r=[];if(n===void 0)n=false;if(this._size!==0){throw new Error("bulk-load: tree is not empty")}var i=t.length;if(n){c(t,r,0,i-1,this._compare)}this._root=l(null,t,r,0,i);this._size=i;return this};m.prototype.min=function e(){var t=this.minNode(this._root);if(t){return t.key}else{return null}};m.prototype.max=function e(){var t=this.maxNode(this._root);if(t){return t.key}else{return null}};m.prototype.isEmpty=function e(){return this._root===null};t.size.get=function(){return this._size};m.createTree=function e(t,r,n,i,o){return new m(n,o).load(t,r,i)};Object.defineProperties(m.prototype,t);function l(e,t,r,n,i){var o=i-n;if(o>0){var a=n+Math.floor(o/2);var s=t[a];var u=r[a];var c={key:s,data:u,parent:e};c.left=l(c,t,r,n,a);c.right=l(c,t,r,a+1,i);return c}return null}function c(e,t,r,n,i){if(r>=n){return}var o=e[r+n>>1];var a=r-1;var s=n+1;while(true){do{a++}while(i(e[a],o)<0);do{s--}while(i(e[s],o)>0);if(a>=s){break}var u=e[a];e[a]=e[s];e[s]=u;u=t[a];t[a]=t[s];t[s]=u}c(e,t,r,s,i);c(e,t,s+1,n,i)}var a=0;var u=1;var h=2;var p=3;var g=0;var s=1;var _=2;var f=3;function y(e,t,r){if(t===null){e.inOut=false;e.otherInOut=true}else{if(e.isSubject===t.isSubject){e.inOut=!t.inOut;e.otherInOut=t.otherInOut}else{e.inOut=!t.otherInOut;e.otherInOut=t.isVertical()?!t.inOut:t.inOut}if(t){e.prevInResult=!i(t,r)||t.isVertical()?t.prevInResult:t}}var n=i(e,r);if(n){e.resultTransition=o(e,r)}else{e.resultTransition=0}}function i(e,t){switch(e.type){case a:switch(t){case g:return!e.otherInOut;case s:return e.otherInOut;case _:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case f:return true}break;case h:return t===g||t===s;case p:return t===_;case u:return false}return false}function o(e,t){var r=!e.inOut;var n=!e.otherInOut;var i;switch(t){case g:i=r&&n;break;case s:i=r||n;break;case f:i=r^n;break;case _:if(e.isSubject){i=r&&!n}else{i=n&&!r}break}return i?+1:-1}var d=function e(t,r,n,i,o){this.left=r;this.point=t;this.otherEvent=n;this.isSubject=i;this.type=o||a;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.resultTransition=0;this.otherPos=-1;this.outputContourId=-1;this.isExteriorRing=true};var r={inResult:{configurable:true}};d.prototype.isBelow=function e(t){var r=this.point,n=this.otherEvent.point;return this.left?(r[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(r[1]-t[1])>0:(n[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(n[1]-t[1])>0};d.prototype.isAbove=function e(t){return!this.isBelow(t)};d.prototype.isVertical=function e(){return this.point[0]===this.otherEvent.point[0]};r.inResult.get=function(){return this.resultTransition!==0};d.prototype.clone=function e(){var t=new d(this.point,this.left,this.otherEvent,this.isSubject,this.type);t.contourId=this.contourId;t.resultTransition=this.resultTransition;t.prevInResult=this.prevInResult;t.isExteriorRing=this.isExteriorRing;t.inOut=this.inOut;t.otherInOut=this.otherInOut;return t};Object.defineProperties(d.prototype,r);function v(e,t){if(e[0]===t[0]){if(e[1]===t[1]){return true}else{return false}}return false}var b=11102230246251565e-32;var L=134217729;var N=(3+8*b)*b;function I(e,t,r,n,i){var o,a,s,u;var c=t[0];var l=n[0];var h=0;var p=0;if(l>c===l>-c){o=c;c=t[++h]}else{o=l;l=n[++p]}var f=0;if(h<e&&p<r){if(l>c===l>-c){a=c+o;s=o-(a-c);c=t[++h]}else{a=l+o;s=o-(a-l);l=n[++p]}o=a;if(s!==0){i[f++]=s}while(h<e&&p<r){if(l>c===l>-c){a=o+c;u=a-o;s=o-(a-u)+(c-u);c=t[++h]}else{a=o+l;u=a-o;s=o-(a-u)+(l-u);l=n[++p]}o=a;if(s!==0){i[f++]=s}}}while(h<e){a=o+c;u=a-o;s=o-(a-u)+(c-u);c=t[++h];o=a;if(s!==0){i[f++]=s}}while(p<r){a=o+l;u=a-o;s=o-(a-u)+(l-u);l=n[++p];o=a;if(s!==0){i[f++]=s}}if(o!==0||f===0){i[f++]=o}return f}function D(e,t){var r=t[0];for(var n=1;n<e;n++){r+=t[n]}return r}function x(e){return new Float64Array(e)}var w=(3+16*b)*b;var B=(2+12*b)*b;var F=(9+64*b)*b*b;var z=x(4);var $=x(8);var G=x(12);var V=x(16);var H=x(4);function S(e,t,r,n,i,o,a){var s,u,c,l;var h,p,f,d,v,m,g,_,y,b,x,w,S,M;var C=e-i;var T=r-i;var E=t-o;var O=n-o;b=C*O;p=L*C;f=p-(p-C);d=C-f;p=L*O;v=p-(p-O);m=O-v;x=d*m-(b-f*v-d*v-f*m);w=E*T;p=L*E;f=p-(p-E);d=E-f;p=L*T;v=p-(p-T);m=T-v;S=d*m-(w-f*v-d*v-f*m);g=x-S;h=x-g;z[0]=x-(g+h)+(h-S);_=b+g;h=_-b;y=b-(_-h)+(g-h);g=y-w;h=y-g;z[1]=y-(g+h)+(h-w);M=_+g;h=M-_;z[2]=_-(M-h)+(g-h);z[3]=M;var P=D(4,z);var A=B*a;if(P>=A||-P>=A){return P}h=e-C;s=e-(C+h)+(h-i);h=r-T;c=r-(T+h)+(h-i);h=t-E;u=t-(E+h)+(h-o);h=n-O;l=n-(O+h)+(h-o);if(s===0&&u===0&&c===0&&l===0){return P}A=F*a+N*Math.abs(P);P+=C*l+O*s-(E*c+T*u);if(P>=A||-P>=A){return P}b=s*O;p=L*s;f=p-(p-s);d=s-f;p=L*O;v=p-(p-O);m=O-v;x=d*m-(b-f*v-d*v-f*m);w=u*T;p=L*u;f=p-(p-u);d=u-f;p=L*T;v=p-(p-T);m=T-v;S=d*m-(w-f*v-d*v-f*m);g=x-S;h=x-g;H[0]=x-(g+h)+(h-S);_=b+g;h=_-b;y=b-(_-h)+(g-h);g=y-w;h=y-g;H[1]=y-(g+h)+(h-w);M=_+g;h=M-_;H[2]=_-(M-h)+(g-h);H[3]=M;var j=I(4,z,4,H,$);b=C*l;p=L*C;f=p-(p-C);d=C-f;p=L*l;v=p-(p-l);m=l-v;x=d*m-(b-f*v-d*v-f*m);w=E*c;p=L*E;f=p-(p-E);d=E-f;p=L*c;v=p-(p-c);m=c-v;S=d*m-(w-f*v-d*v-f*m);g=x-S;h=x-g;H[0]=x-(g+h)+(h-S);_=b+g;h=_-b;y=b-(_-h)+(g-h);g=y-w;h=y-g;H[1]=y-(g+h)+(h-w);M=_+g;h=M-_;H[2]=_-(M-h)+(g-h);H[3]=M;var R=I(j,$,4,H,G);b=s*l;p=L*s;f=p-(p-s);d=s-f;p=L*l;v=p-(p-l);m=l-v;x=d*m-(b-f*v-d*v-f*m);w=u*c;p=L*u;f=p-(p-u);d=u-f;p=L*c;v=p-(p-c);m=c-v;S=d*m-(w-f*v-d*v-f*m);g=x-S;h=x-g;H[0]=x-(g+h)+(h-S);_=b+g;h=_-b;y=b-(_-h)+(g-h);g=y-w;h=y-g;H[1]=y-(g+h)+(h-w);M=_+g;h=M-_;H[2]=_-(M-h)+(g-h);H[3]=M;var k=I(R,G,4,H,V);return V[k-1]}function M(e,t,r,n,i,o){var a=(t-o)*(r-i);var s=(e-i)*(n-o);var u=a-s;if(a===0||s===0||a>0!==s>0){return u}var c=Math.abs(a+s);if(Math.abs(u)>=w*c){return u}return-S(e,t,r,n,i,o,c)}function C(e,t,r){var n=M(e[0],e[1],t[0],t[1],r[0],r[1]);if(n>0){return-1}if(n<0){return 1}return 0}function T(e,t){var r=e.point;var n=t.point;if(r[0]>n[0]){return 1}if(r[0]<n[0]){return-1}if(r[1]!==n[1]){return r[1]>n[1]?1:-1}return E(e,t,r)}function E(e,t,r,n){if(e.left!==t.left){return e.left?1:-1}if(C(r,e.otherEvent.point,t.otherEvent.point)!==0){return!e.isBelow(t.otherEvent.point)?1:-1}return!e.isSubject&&t.isSubject?1:-1}function O(e,t,r){var n=new d(t,false,e,e.isSubject);var i=new d(t,true,e.otherEvent,e.isSubject);if(v(e.point,e.otherEvent.point)){console.warn("what is that, a collapsed segment?",e)}n.contourId=i.contourId=e.contourId;if(T(i,e.otherEvent)>0){e.otherEvent.left=true;i.left=false}e.otherEvent.otherEvent=i;e.otherEvent=n;r.push(i);r.push(n);return r}function P(e,t){return e[0]*t[1]-e[1]*t[0]}function A(e,t){return e[0]*t[0]+e[1]*t[1]}function j(e,t,r,n,i){var o=[t[0]-e[0],t[1]-e[1]];var a=[n[0]-r[0],n[1]-r[1]];function s(e,t,r){return[e[0]+t*r[0],e[1]+t*r[1]]}var u=[r[0]-e[0],r[1]-e[1]];var c=P(o,a);var l=c*c;var h=A(o,o);if(l>0){var p=P(u,a)/c;if(p<0||p>1){return null}var f=P(u,o)/c;if(f<0||f>1){return null}if(p===0||p===1){return i?null:[s(e,p,o)]}if(f===0||f===1){return i?null:[s(r,f,a)]}return[s(e,p,o)]}c=P(u,o);l=c*c;if(l>0){return null}var d=A(o,u)/h;var v=d+A(o,a)/h;var m=Math.min(d,v);var g=Math.max(d,v);if(m<=1&&g>=0){if(m===1){return i?null:[s(e,m>0?m:0,o)]}if(g===0){return i?null:[s(e,g<1?g:1,o)]}if(i&&m===0&&g===1){return null}return[s(e,m>0?m:0,o),s(e,g<1?g:1,o)]}return null}function R(e,t,r){var n=j(e.point,e.otherEvent.point,t.point,t.otherEvent.point);var i=n?n.length:0;if(i===0){return 0}if(i===1&&(v(e.point,t.point)||v(e.otherEvent.point,t.otherEvent.point))){return 0}if(i===2&&e.isSubject===t.isSubject){return 0}if(i===1){if(!v(e.point,n[0])&&!v(e.otherEvent.point,n[0])){O(e,n[0],r)}if(!v(t.point,n[0])&&!v(t.otherEvent.point,n[0])){O(t,n[0],r)}return 1}var o=[];var a=false;var s=false;if(v(e.point,t.point)){a=true}else if(T(e,t)===1){o.push(t,e)}else{o.push(e,t)}if(v(e.otherEvent.point,t.otherEvent.point)){s=true}else if(T(e.otherEvent,t.otherEvent)===1){o.push(t.otherEvent,e.otherEvent)}else{o.push(e.otherEvent,t.otherEvent)}if(a&&s||a){t.type=u;e.type=t.inOut===e.inOut?h:p;if(a&&!s){O(o[1].otherEvent,o[0].point,r)}return 2}if(s){O(o[0],o[1].point,r);return 3}if(o[0]!==o[3].otherEvent){O(o[0],o[1].point,r);O(o[1],o[2].point,r);return 3}O(o[0],o[1].point,r);O(o[3].otherEvent,o[2].point,r);return 3}function k(e,t){if(e===t){return 0}if(C(e.point,e.otherEvent.point,t.point)!==0||C(e.point,e.otherEvent.point,t.otherEvent.point)!==0){if(v(e.point,t.point)){return e.isBelow(t.otherEvent.point)?-1:1}if(e.point[0]===t.point[0]){return e.point[1]<t.point[1]?-1:1}if(T(e,t)===1){return t.isAbove(e.point)?-1:1}return e.isBelow(t.point)?-1:1}if(e.isSubject===t.isSubject){var r=e.point,n=t.point;if(r[0]===n[0]&&r[1]===n[1]){r=e.otherEvent.point;n=t.otherEvent.point;if(r[0]===n[0]&&r[1]===n[1]){return 0}else{return e.contourId>t.contourId?1:-1}}}else{return e.isSubject?-1:1}return T(e,t)===1?1:-1}function U(e,t,r,n,i,o){var a=new m(k);var s=[];var u=Math.min(n[2],i[2]);var c,l,h;while(e.length!==0){var p=e.pop();s.push(p);if(o===g&&p.point[0]>u||o===_&&p.point[0]>n[2]){break}if(p.left){l=c=a.insert(p);h=a.minNode();if(c!==h){c=a.prev(c)}else{c=null}l=a.next(l);var f=c?c.key:null;var d=void 0;y(p,f,o);if(l){if(R(p,l.key,e)===2){y(p,f,o);y(p,l.key,o)}}if(c){if(R(c.key,p,e)===2){var v=c;if(v!==h){v=a.prev(v)}else{v=null}d=v?v.key:null;y(f,d,o);y(p,f,o)}}}else{p=p.otherEvent;l=c=a.find(p);if(c&&l){if(c!==h){c=a.prev(c)}else{c=null}l=a.next(l);a.remove(p);if(l&&c){R(c.key,l.key,e)}}}}return s}var q=function e(){this.points=[];this.holeIds=[];this.holeOf=null;this.depth=null};q.prototype.isExterior=function e(){return this.holeOf==null};function W(e){var t,r,n,i;var o=[];for(r=0,n=e.length;r<n;r++){t=e[r];if(t.left&&t.inResult||!t.left&&t.otherEvent.inResult){o.push(t)}}var a=false;while(!a){a=true;for(r=0,n=o.length;r<n;r++){if(r+1<n&&T(o[r],o[r+1])===1){i=o[r];o[r]=o[r+1];o[r+1]=i;a=false}}}for(r=0,n=o.length;r<n;r++){t=o[r];t.otherPos=r}for(r=0,n=o.length;r<n;r++){t=o[r];if(!t.left){i=t.otherPos;t.otherPos=t.otherEvent.otherPos;t.otherEvent.otherPos=i}}return o}function X(e,t,r,n){var i=e+1,o=t[e].point,a;var s=t.length;if(i<s){a=t[i].point}while(i<s&&a[0]===o[0]&&a[1]===o[1]){if(!r[i]){return i}else{i++}a=t[i].point}i=e-1;while(r[i]&&i>n){i--}return i}function Y(e,t,r){var n=new q;if(e.prevInResult!=null){var i=e.prevInResult;var o=i.outputContourId;var a=i.resultTransition;if(a>0){var s=t[o];if(s.holeOf!=null){var u=s.holeOf;t[u].holeIds.push(r);n.holeOf=u;n.depth=t[o].depth}else{t[o].holeIds.push(r);n.holeOf=o;n.depth=t[o].depth+1}}else{n.holeOf=null;n.depth=t[o].depth}}else{n.holeOf=null;n.depth=0}return n}function K(e){var a,t;var s=W(e);var u={};var c=[];var r=function(){if(u[a]){return}var t=c.length;var e=Y(s[a],c,t);var r=function(e){u[e]=true;s[e].outputContourId=t};var n=a;var i=a;var o=s[a].point;e.points.push(o);while(true){r(n);n=s[n].otherPos;r(n);e.points.push(s[n].point);n=X(n,s,u,i);if(n==i){break}}c.push(e)};for(a=0,t=s.length;a<t;a++)r();return c}var Z=Q;var J=Q;function Q(e,t){if(!(this instanceof Q)){return new Q(e,t)}this.data=e||[];this.length=this.data.length;this.compare=t||ee;if(this.length>0){for(var r=(this.length>>1)-1;r>=0;r--){this._down(r)}}}function ee(e,t){return e<t?-1:e>t?1:0}Q.prototype={push:function(e){this.data.push(e);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0){return undefined}var e=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return e},peek:function(){return this.data[0]},_up:function(e){var t=this.data;var r=this.compare;var n=t[e];while(e>0){var i=e-1>>1;var o=t[i];if(r(n,o)>=0){break}t[e]=o;e=i}t[e]=n},_down:function(e){var t=this.data;var r=this.compare;var n=this.length>>1;var i=t[e];while(e<n){var o=(e<<1)+1;var a=o+1;var s=t[o];if(a<this.length&&r(t[a],s)<0){o=a;s=t[a]}if(r(s,i)>=0){break}t[e]=s;e=o}t[e]=i}};Z.default=J;var te=Math.max;var re=Math.min;var ne=0;function ie(e,t,r,n,i,o){var a,s,u,c,l,h;for(a=0,s=e.length-1;a<s;a++){u=e[a];c=e[a+1];l=new d(u,false,undefined,t);h=new d(c,false,l,t);l.otherEvent=h;if(u[0]===c[0]&&u[1]===c[1]){continue}l.contourId=h.contourId=r;if(!o){l.isExteriorRing=false;h.isExteriorRing=false}if(T(l,h)>0){h.left=true}else{l.left=true}var p=u[0],f=u[1];i[0]=re(i[0],p);i[1]=re(i[1],f);i[2]=te(i[2],p);i[3]=te(i[3],f);n.push(l);n.push(h)}}function oe(e,t,r,n,i){var o=new Z(null,T);var a,s,u,c,l,h;for(u=0,c=e.length;u<c;u++){a=e[u];for(l=0,h=a.length;l<h;l++){s=l===0;if(s){ne++}ie(a[l],true,ne,o,r,s)}}for(u=0,c=t.length;u<c;u++){a=t[u];for(l=0,h=a.length;l<h;l++){s=l===0;if(i===_){s=false}if(s){ne++}ie(a[l],false,ne,o,n,s)}}return o}var ae=[];function se(e,t,r){var n=null;if(e.length*t.length===0){if(r===g){n=ae}else if(r===_){n=e}else if(r===s||r===f){n=e.length===0?t:e}}return n}function ue(e,t,r,n,i){var o=null;if(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3]){if(i===g){o=ae}else if(i===_){o=e}else if(i===s||i===f){o=e.concat(t)}}return o}function ce(e,t,r){if(typeof e[0][0][0]==="number"){e=[e]}if(typeof t[0][0][0]==="number"){t=[t]}var n=se(e,t,r);if(n){return n===ae?null:n}var i=[Infinity,Infinity,-Infinity,-Infinity];var o=[Infinity,Infinity,-Infinity,-Infinity];var a=oe(e,t,i,o,r);n=ue(e,t,i,o,r);if(n){return n===ae?null:n}var s=U(a,e,t,i,o,r);var u=K(s);var c=[];for(var l=0;l<u.length;l++){var h=u[l];if(h.isExterior()){var p=[h.points];for(var f=0;f<h.holeIds.length;f++){var d=h.holeIds[f];p.push(u[d].points)}c.push(p)}}return c}function le(e,t){return ce(e,t,s)}function he(e,t){return ce(e,t,_)}function pe(e,t){return ce(e,t,f)}function fe(e,t){return ce(e,t,g)}var de={UNION:s,DIFFERENCE:_,INTERSECTION:g,XOR:f};e.diff=he;e.intersection=fe;e.operations=de;e.union=le;e.xor=pe;Object.defineProperty(e,"__esModule",{value:true})})},{}],23:[function(e,t,r){"use strict";var n=e("./lib/utils/common").assign;var i=e("./lib/deflate");var o=e("./lib/inflate");var a=e("./lib/zlib/constants");var s={};n(s,i,o,a);t.exports=s},{"./lib/deflate":24,"./lib/inflate":25,"./lib/utils/common":26,"./lib/zlib/constants":29}],24:[function(e,t,r){"use strict";var a=e("./zlib/deflate");var s=e("./utils/common");var u=e("./utils/strings");var i=e("./zlib/messages");var o=e("./zlib/zstream");var c=Object.prototype.toString;var l=0;var h=4;var p=0;var f=1;var d=2;var v=-1;var m=0;var g=8;function _(e){if(!(this instanceof _))return new _(e);this.options=s.assign({level:v,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},e||{});var t=this.options;if(t.raw&&t.windowBits>0){t.windowBits=-t.windowBits}else if(t.gzip&&t.windowBits>0&&t.windowBits<16){t.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new o;this.strm.avail_out=0;var r=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==p){throw new Error(i[r])}if(t.header){a.deflateSetHeader(this.strm,t.header)}if(t.dictionary){var n;if(typeof t.dictionary==="string"){n=u.string2buf(t.dictionary)}else if(c.call(t.dictionary)==="[object ArrayBuffer]"){n=new Uint8Array(t.dictionary)}else{n=t.dictionary}r=a.deflateSetDictionary(this.strm,n);if(r!==p){throw new Error(i[r])}this._dict_set=true}}_.prototype.push=function(e,t){var r=this.strm;var n=this.options.chunkSize;var i,o;if(this.ended){return false}o=t===~~t?t:t===true?h:l;if(typeof e==="string"){r.input=u.string2buf(e)}else if(c.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;do{if(r.avail_out===0){r.output=new s.Buf8(n);r.next_out=0;r.avail_out=n}i=a.deflate(r,o);if(i!==f&&i!==p){this.onEnd(i);this.ended=true;return false}if(r.avail_out===0||r.avail_in===0&&(o===h||o===d)){if(this.options.to==="string"){this.onData(u.buf2binstring(s.shrinkBuf(r.output,r.next_out)))}else{this.onData(s.shrinkBuf(r.output,r.next_out))}}}while((r.avail_in>0||r.avail_out===0)&&i!==f);if(o===h){i=a.deflateEnd(this.strm);this.onEnd(i);this.ended=true;return i===p}if(o===d){this.onEnd(p);r.avail_out=0;return true}return true};_.prototype.onData=function(e){this.chunks.push(e)};_.prototype.onEnd=function(e){if(e===p){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=s.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function n(e,t){var r=new _(t);r.push(e,true);if(r.err){throw r.msg||i[r.err]}return r.result}function y(e,t){t=t||{};t.raw=true;return n(e,t)}function b(e,t){t=t||{};t.gzip=true;return n(e,t)}r.Deflate=_;r.deflate=n;r.deflateRaw=y;r.gzip=b},{"./utils/common":26,"./utils/strings":27,"./zlib/deflate":31,"./zlib/messages":36,"./zlib/zstream":38}],25:[function(e,t,r){"use strict";var h=e("./zlib/inflate");var p=e("./utils/common");var f=e("./utils/strings");var d=e("./zlib/constants");var n=e("./zlib/messages");var i=e("./zlib/zstream");var o=e("./zlib/gzheader");var v=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;if(t.raw&&t.windowBits>=0&&t.windowBits<16){t.windowBits=-t.windowBits;if(t.windowBits===0){t.windowBits=-15}}if(t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)){t.windowBits+=32}if(t.windowBits>15&&t.windowBits<48){if((t.windowBits&15)===0){t.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new i;this.strm.avail_out=0;var r=h.inflateInit2(this.strm,t.windowBits);if(r!==d.Z_OK){throw new Error(n[r])}this.header=new o;h.inflateGetHeader(this.strm,this.header);if(t.dictionary){if(typeof t.dictionary==="string"){t.dictionary=f.string2buf(t.dictionary)}else if(v.call(t.dictionary)==="[object ArrayBuffer]"){t.dictionary=new Uint8Array(t.dictionary)}if(t.raw){r=h.inflateSetDictionary(this.strm,t.dictionary);if(r!==d.Z_OK){throw new Error(n[r])}}}}a.prototype.push=function(e,t){var r=this.strm;var n=this.options.chunkSize;var i=this.options.dictionary;var o,a;var s,u,c;var l=false;if(this.ended){return false}a=t===~~t?t:t===true?d.Z_FINISH:d.Z_NO_FLUSH;if(typeof e==="string"){r.input=f.binstring2buf(e)}else if(v.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;do{if(r.avail_out===0){r.output=new p.Buf8(n);r.next_out=0;r.avail_out=n}o=h.inflate(r,d.Z_NO_FLUSH);if(o===d.Z_NEED_DICT&&i){o=h.inflateSetDictionary(this.strm,i)}if(o===d.Z_BUF_ERROR&&l===true){o=d.Z_OK;l=false}if(o!==d.Z_STREAM_END&&o!==d.Z_OK){this.onEnd(o);this.ended=true;return false}if(r.next_out){if(r.avail_out===0||o===d.Z_STREAM_END||r.avail_in===0&&(a===d.Z_FINISH||a===d.Z_SYNC_FLUSH)){if(this.options.to==="string"){s=f.utf8border(r.output,r.next_out);u=r.next_out-s;c=f.buf2string(r.output,s);r.next_out=u;r.avail_out=n-u;if(u){p.arraySet(r.output,r.output,s,u,0)}this.onData(c)}else{this.onData(p.shrinkBuf(r.output,r.next_out))}}}if(r.avail_in===0&&r.avail_out===0){l=true}}while((r.avail_in>0||r.avail_out===0)&&o!==d.Z_STREAM_END);if(o===d.Z_STREAM_END){a=d.Z_FINISH}if(a===d.Z_FINISH){o=h.inflateEnd(this.strm);this.onEnd(o);this.ended=true;return o===d.Z_OK}if(a===d.Z_SYNC_FLUSH){this.onEnd(d.Z_OK);r.avail_out=0;return true}return true};a.prototype.onData=function(e){this.chunks.push(e)};a.prototype.onEnd=function(e){if(e===d.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=p.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function s(e,t){var r=new a(t);r.push(e,true);if(r.err){throw r.msg||n[r.err]}return r.result}function u(e,t){t=t||{};t.raw=true;return s(e,t)}r.Inflate=a;r.inflate=s;r.inflateRaw=u;r.ungzip=s},{"./utils/common":26,"./utils/strings":27,"./zlib/constants":29,"./zlib/gzheader":32,"./zlib/inflate":34,"./zlib/messages":36,"./zlib/zstream":38}],26:[function(e,t,r){"use strict";var n=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var r=t.shift();if(!r){continue}if(typeof r!=="object"){throw new TypeError(r+"must be non-object")}for(var n in r){if(i(r,n)){e[n]=r[n]}}}return e};r.shrinkBuf=function(e,t){if(e.length===t){return e}if(e.subarray){return e.subarray(0,t)}e.length=t;return e};var o={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var o=0;o<n;o++){e[i+o]=t[r+o]}},flattenChunks:function(e){var t,r,n,i,o,a;n=0;for(t=0,r=e.length;t<r;t++){n+=e[t].length}a=new Uint8Array(n);i=0;for(t=0,r=e.length;t<r;t++){o=e[t];a.set(o,i);i+=o.length}return a}};var a={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++){e[i+o]=t[r+o]}},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){if(e){r.Buf8=Uint8Array;r.Buf16=Uint16Array;r.Buf32=Int32Array;r.assign(r,o)}else{r.Buf8=Array;r.Buf16=Array;r.Buf32=Array;r.assign(r,a)}};r.setTyped(n)},{}],27:[function(e,t,r){"use strict";var u=e("./common");var i=true;var o=true;try{String.fromCharCode.apply(null,[0])}catch(e){i=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=false}var c=new u.Buf8(256);for(var n=0;n<256;n++){c[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1}c[254]=c[254]=1;r.string2buf=function(e){var t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++){r=e.charCodeAt(i);if((r&64512)===55296&&i+1<a){n=e.charCodeAt(i+1);if((n&64512)===56320){r=65536+(r-55296<<10)+(n-56320);i++}}s+=r<128?1:r<2048?2:r<65536?3:4}t=new u.Buf8(s);for(o=0,i=0;o<s;i++){r=e.charCodeAt(i);if((r&64512)===55296&&i+1<a){n=e.charCodeAt(i+1);if((n&64512)===56320){r=65536+(r-55296<<10)+(n-56320);i++}}if(r<128){t[o++]=r}else if(r<2048){t[o++]=192|r>>>6;t[o++]=128|r&63}else if(r<65536){t[o++]=224|r>>>12;t[o++]=128|r>>>6&63;t[o++]=128|r&63}else{t[o++]=240|r>>>18;t[o++]=128|r>>>12&63;t[o++]=128|r>>>6&63;t[o++]=128|r&63}}return t};function l(e,t){if(t<65534){if(e.subarray&&o||!e.subarray&&i){return String.fromCharCode.apply(null,u.shrinkBuf(e,t))}}var r="";for(var n=0;n<t;n++){r+=String.fromCharCode(e[n])}return r}r.buf2binstring=function(e){return l(e,e.length)};r.binstring2buf=function(e){var t=new u.Buf8(e.length);for(var r=0,n=t.length;r<n;r++){t[r]=e.charCodeAt(r)}return t};r.buf2string=function(e,t){var r,n,i,o;var a=t||e.length;var s=new Array(a*2);for(n=0,r=0;r<a;){i=e[r++];if(i<128){s[n++]=i;continue}o=c[i];if(o>4){s[n++]=65533;r+=o-1;continue}i&=o===2?31:o===3?15:7;while(o>1&&r<a){i=i<<6|e[r++]&63;o--}if(o>1){s[n++]=65533;continue}if(i<65536){s[n++]=i}else{i-=65536;s[n++]=55296|i>>10&1023;s[n++]=56320|i&1023}}return l(s,n)};r.utf8border=function(e,t){var r;t=t||e.length;if(t>e.length){t=e.length}r=t-1;while(r>=0&&(e[r]&192)===128){r--}if(r<0){return t}if(r===0){return t}return r+c[e[r]]>t?r:t}},{"./common":26}],28:[function(e,t,r){"use strict";function n(e,t,r,n){var i=e&65535|0,o=e>>>16&65535|0,a=0;while(r!==0){a=r>2e3?2e3:r;r-=a;do{i=i+t[n++]|0;o=o+i|0}while(--a);i%=65521;o%=65521}return i|o<<16|0}t.exports=n},{}],29:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],30:[function(e,t,r){"use strict";function n(){var e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++){e=e&1?3988292384^e>>>1:e>>>1}t[r]=e}return t}var s=n();function i(e,t,r,n){var i=s,o=n+r;e^=-1;for(var a=n;a<o;a++){e=e>>>8^i[(e^t[a])&255]}return e^-1}t.exports=i},{}],31:[function(e,t,r){"use strict";var h=e("../utils/common");var c=e("./trees");var p=e("./adler32");var l=e("./crc32");var n=e("./messages");var f=0;var d=1;var v=3;var m=4;var g=5;var _=0;var y=1;var b=-2;var i=-3;var x=-5;var u=-1;var o=1;var w=2;var S=3;var M=4;var a=0;var s=2;var C=8;var T=9;var E=15;var O=8;var P=29;var A=256;var j=A+1+P;var R=30;var k=19;var L=2*j+1;var N=15;var I=3;var D=258;var B=D+I+1;var F=32;var z=42;var $=69;var G=73;var V=91;var H=103;var U=113;var q=666;var W=1;var X=2;var Y=3;var K=4;var Z=3;function J(e,t){e.msg=n[t];return t}function Q(e){return(e<<1)-(e>4?9:0)}function ee(e){var t=e.length;while(--t>=0){e[t]=0}}function te(e){var t=e.state;var r=t.pending;if(r>e.avail_out){r=e.avail_out}if(r===0){return}h.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out);e.next_out+=r;t.pending_out+=r;e.total_out+=r;e.avail_out-=r;t.pending-=r;if(t.pending===0){t.pending_out=0}}function re(e,t){c._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t);e.block_start=e.strstart;te(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ie(e,t){e.pending_buf[e.pending++]=t>>>8&255;e.pending_buf[e.pending++]=t&255}function oe(e,t,r,n){var i=e.avail_in;if(i>n){i=n}if(i===0){return 0}e.avail_in-=i;h.arraySet(t,e.input,e.next_in,i,r);if(e.state.wrap===1){e.adler=p(e.adler,t,i,r)}else if(e.state.wrap===2){e.adler=l(e.adler,t,i,r)}e.next_in+=i;e.total_in+=i;return i}function ae(e,t){var r=e.max_chain_length;var n=e.strstart;var i;var o;var a=e.prev_length;var s=e.nice_match;var u=e.strstart>e.w_size-B?e.strstart-(e.w_size-B):0;var c=e.window;var l=e.w_mask;var h=e.prev;var p=e.strstart+D;var f=c[n+a-1];var d=c[n+a];if(e.prev_length>=e.good_match){r>>=2}if(s>e.lookahead){s=e.lookahead}do{i=t;if(c[i+a]!==d||c[i+a-1]!==f||c[i]!==c[n]||c[++i]!==c[n+1]){continue}n+=2;i++;do{}while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<p);o=D-(p-n);n=p-D;if(o>a){e.match_start=t;a=o;if(o>=s){break}f=c[n+a-1];d=c[n+a]}}while((t=h[t&l])>u&&--r!==0);if(a<=e.lookahead){return a}return e.lookahead}function se(e){var t=e.w_size;var r,n,i,o,a;do{o=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-B)){h.arraySet(e.window,e.window,t,t,0);e.match_start-=t;e.strstart-=t;e.block_start-=t;n=e.hash_size;r=n;do{i=e.head[--r];e.head[r]=i>=t?i-t:0}while(--n);n=t;r=n;do{i=e.prev[--r];e.prev[r]=i>=t?i-t:0}while(--n);o+=t}if(e.strm.avail_in===0){break}n=oe(e.strm,e.window,e.strstart+e.lookahead,o);e.lookahead+=n;if(e.lookahead+e.insert>=I){a=e.strstart-e.insert;e.ins_h=e.window[a];e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+I-1])&e.hash_mask;e.prev[a&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=a;a++;e.insert--;if(e.lookahead+e.insert<I){break}}}}while(e.lookahead<B&&e.strm.avail_in!==0)}function ue(e,t){var r=65535;if(r>e.pending_buf_size-5){r=e.pending_buf_size-5}for(;;){if(e.lookahead<=1){se(e);if(e.lookahead===0&&t===f){return W}if(e.lookahead===0){break}}e.strstart+=e.lookahead;e.lookahead=0;var n=e.block_start+r;if(e.strstart===0||e.strstart>=n){e.lookahead=e.strstart-n;e.strstart=n;re(e,false);if(e.strm.avail_out===0){return W}}if(e.strstart-e.block_start>=e.w_size-B){re(e,false);if(e.strm.avail_out===0){return W}}}e.insert=0;if(t===m){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.strstart>e.block_start){re(e,false);if(e.strm.avail_out===0){return W}}return W}function ce(e,t){var r;var n;for(;;){if(e.lookahead<B){se(e);if(e.lookahead<B&&t===f){return W}if(e.lookahead===0){break}}r=0;if(e.lookahead>=I){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(r!==0&&e.strstart-r<=e.w_size-B){e.match_length=ae(e,r)}if(e.match_length>=I){n=c._tr_tally(e,e.strstart-e.match_start,e.match_length-I);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=I){e.match_length--;do{e.strstart++;e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}}else{n=c._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(n){re(e,false);if(e.strm.avail_out===0){return W}}}e.insert=e.strstart<I-1?e.strstart:I-1;if(t===m){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return W}}return X}function le(e,t){var r;var n;var i;for(;;){if(e.lookahead<B){se(e);if(e.lookahead<B&&t===f){return W}if(e.lookahead===0){break}}r=0;if(e.lookahead>=I){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=I-1;if(r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-B){e.match_length=ae(e,r);if(e.match_length<=5&&(e.strategy===o||e.match_length===I&&e.strstart-e.match_start>4096)){e.match_length=I-1}}if(e.prev_length>=I&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-I;n=c._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-I);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=i){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=I-1;e.strstart++;if(n){re(e,false);if(e.strm.avail_out===0){return W}}}else if(e.match_available){n=c._tr_tally(e,0,e.window[e.strstart-1]);if(n){re(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return W}}else{e.match_available=1;e.strstart++;e.lookahead--}}if(e.match_available){n=c._tr_tally(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<I-1?e.strstart:I-1;if(t===m){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return W}}return X}function he(e,t){var r;var n;var i,o;var a=e.window;for(;;){if(e.lookahead<=D){se(e);if(e.lookahead<=D&&t===f){return W}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=I&&e.strstart>0){i=e.strstart-1;n=a[i];if(n===a[++i]&&n===a[++i]&&n===a[++i]){o=e.strstart+D;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=D-(o-i);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=I){r=c._tr_tally(e,1,e.match_length-I);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{r=c._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(r){re(e,false);if(e.strm.avail_out===0){return W}}}e.insert=0;if(t===m){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return W}}return X}function pe(e,t){var r;for(;;){if(e.lookahead===0){se(e);if(e.lookahead===0){if(t===f){return W}break}}e.match_length=0;r=c._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(r){re(e,false);if(e.strm.avail_out===0){return W}}}e.insert=0;if(t===m){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return W}}return X}function fe(e,t,r,n,i){this.good_length=e;this.max_lazy=t;this.nice_length=r;this.max_chain=n;this.func=i}var de;de=[new fe(0,0,0,0,ue),new fe(4,4,8,4,ce),new fe(4,5,16,8,ce),new fe(4,6,32,32,ce),new fe(4,4,16,16,le),new fe(8,16,32,32,le),new fe(8,16,128,128,le),new fe(8,32,128,256,le),new fe(32,128,258,1024,le),new fe(32,258,258,4096,le)];function ve(e){e.window_size=2*e.w_size;ee(e.head);e.max_lazy_match=de[e.level].max_lazy;e.good_match=de[e.level].good_length;e.nice_match=de[e.level].nice_length;e.max_chain_length=de[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=I-1;e.match_available=0;e.ins_h=0}function me(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=C;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new h.Buf16(L*2);this.dyn_dtree=new h.Buf16((2*R+1)*2);this.bl_tree=new h.Buf16((2*k+1)*2);ee(this.dyn_ltree);ee(this.dyn_dtree);ee(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new h.Buf16(N+1);this.heap=new h.Buf16(2*j+1);ee(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new h.Buf16(2*j+1);ee(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function ge(e){var t;if(!e||!e.state){return J(e,b)}e.total_in=e.total_out=0;e.data_type=s;t=e.state;t.pending=0;t.pending_out=0;if(t.wrap<0){t.wrap=-t.wrap}t.status=t.wrap?z:U;e.adler=t.wrap===2?0:1;t.last_flush=f;c._tr_init(t);return _}function _e(e){var t=ge(e);if(t===_){ve(e.state)}return t}function ye(e,t){if(!e||!e.state){return b}if(e.state.wrap!==2){return b}e.state.gzhead=t;return _}function be(e,t,r,n,i,o){if(!e){return b}var a=1;if(t===u){t=6}if(n<0){a=0;n=-n}else if(n>15){a=2;n-=16}if(i<1||i>T||r!==C||n<8||n>15||t<0||t>9||o<0||o>M){return J(e,b)}if(n===8){n=9}var s=new me;e.state=s;s.strm=e;s.wrap=a;s.gzhead=null;s.w_bits=n;s.w_size=1<<s.w_bits;s.w_mask=s.w_size-1;s.hash_bits=i+7;s.hash_size=1<<s.hash_bits;s.hash_mask=s.hash_size-1;s.hash_shift=~~((s.hash_bits+I-1)/I);s.window=new h.Buf8(s.w_size*2);s.head=new h.Buf16(s.hash_size);s.prev=new h.Buf16(s.w_size);s.lit_bufsize=1<<i+6;s.pending_buf_size=s.lit_bufsize*4;s.pending_buf=new h.Buf8(s.pending_buf_size);s.d_buf=1*s.lit_bufsize;s.l_buf=(1+2)*s.lit_bufsize;s.level=t;s.strategy=o;s.method=r;return _e(e)}function xe(e,t){return be(e,t,C,E,O,a)}function we(e,t){var r,n;var i,o;if(!e||!e.state||t>g||t<0){return e?J(e,b):b}n=e.state;if(!e.output||!e.input&&e.avail_in!==0||n.status===q&&t!==m){return J(e,e.avail_out===0?x:b)}n.strm=e;r=n.last_flush;n.last_flush=t;if(n.status===z){if(n.wrap===2){e.adler=0;ne(n,31);ne(n,139);ne(n,8);if(!n.gzhead){ne(n,0);ne(n,0);ne(n,0);ne(n,0);ne(n,0);ne(n,n.level===9?2:n.strategy>=w||n.level<2?4:0);ne(n,Z);n.status=U}else{ne(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(!n.gzhead.extra?0:4)+(!n.gzhead.name?0:8)+(!n.gzhead.comment?0:16));ne(n,n.gzhead.time&255);ne(n,n.gzhead.time>>8&255);ne(n,n.gzhead.time>>16&255);ne(n,n.gzhead.time>>24&255);ne(n,n.level===9?2:n.strategy>=w||n.level<2?4:0);ne(n,n.gzhead.os&255);if(n.gzhead.extra&&n.gzhead.extra.length){ne(n,n.gzhead.extra.length&255);ne(n,n.gzhead.extra.length>>8&255)}if(n.gzhead.hcrc){e.adler=l(e.adler,n.pending_buf,n.pending,0)}n.gzindex=0;n.status=$}}else{var a=C+(n.w_bits-8<<4)<<8;var s=-1;if(n.strategy>=w||n.level<2){s=0}else if(n.level<6){s=1}else if(n.level===6){s=2}else{s=3}a|=s<<6;if(n.strstart!==0){a|=F}a+=31-a%31;n.status=U;ie(n,a);if(n.strstart!==0){ie(n,e.adler>>>16);ie(n,e.adler&65535)}e.adler=1}}if(n.status===$){if(n.gzhead.extra){i=n.pending;while(n.gzindex<(n.gzhead.extra.length&65535)){if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i){e.adler=l(e.adler,n.pending_buf,n.pending-i,i)}te(e);i=n.pending;if(n.pending===n.pending_buf_size){break}}ne(n,n.gzhead.extra[n.gzindex]&255);n.gzindex++}if(n.gzhead.hcrc&&n.pending>i){e.adler=l(e.adler,n.pending_buf,n.pending-i,i)}if(n.gzindex===n.gzhead.extra.length){n.gzindex=0;n.status=G}}else{n.status=G}}if(n.status===G){if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i){e.adler=l(e.adler,n.pending_buf,n.pending-i,i)}te(e);i=n.pending;if(n.pending===n.pending_buf_size){o=1;break}}if(n.gzindex<n.gzhead.name.length){o=n.gzhead.name.charCodeAt(n.gzindex++)&255}else{o=0}ne(n,o)}while(o!==0);if(n.gzhead.hcrc&&n.pending>i){e.adler=l(e.adler,n.pending_buf,n.pending-i,i)}if(o===0){n.gzindex=0;n.status=V}}else{n.status=V}}if(n.status===V){if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i){e.adler=l(e.adler,n.pending_buf,n.pending-i,i)}te(e);i=n.pending;if(n.pending===n.pending_buf_size){o=1;break}}if(n.gzindex<n.gzhead.comment.length){o=n.gzhead.comment.charCodeAt(n.gzindex++)&255}else{o=0}ne(n,o)}while(o!==0);if(n.gzhead.hcrc&&n.pending>i){e.adler=l(e.adler,n.pending_buf,n.pending-i,i)}if(o===0){n.status=H}}else{n.status=H}}if(n.status===H){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size){te(e)}if(n.pending+2<=n.pending_buf_size){ne(n,e.adler&255);ne(n,e.adler>>8&255);e.adler=0;n.status=U}}else{n.status=U}}if(n.pending!==0){te(e);if(e.avail_out===0){n.last_flush=-1;return _}}else if(e.avail_in===0&&Q(t)<=Q(r)&&t!==m){return J(e,x)}if(n.status===q&&e.avail_in!==0){return J(e,x)}if(e.avail_in!==0||n.lookahead!==0||t!==f&&n.status!==q){var u=n.strategy===w?pe(n,t):n.strategy===S?he(n,t):de[n.level].func(n,t);if(u===Y||u===K){n.status=q}if(u===W||u===Y){if(e.avail_out===0){n.last_flush=-1}return _}if(u===X){if(t===d){c._tr_align(n)}else if(t!==g){c._tr_stored_block(n,0,0,false);if(t===v){ee(n.head);if(n.lookahead===0){n.strstart=0;n.block_start=0;n.insert=0}}}te(e);if(e.avail_out===0){n.last_flush=-1;return _}}}if(t!==m){return _}if(n.wrap<=0){return y}if(n.wrap===2){ne(n,e.adler&255);ne(n,e.adler>>8&255);ne(n,e.adler>>16&255);ne(n,e.adler>>24&255);ne(n,e.total_in&255);ne(n,e.total_in>>8&255);ne(n,e.total_in>>16&255);ne(n,e.total_in>>24&255)}else{ie(n,e.adler>>>16);ie(n,e.adler&65535)}te(e);if(n.wrap>0){n.wrap=-n.wrap}return n.pending!==0?_:y}function Se(e){var t;if(!e||!e.state){return b}t=e.state.status;if(t!==z&&t!==$&&t!==G&&t!==V&&t!==H&&t!==U&&t!==q){return J(e,b)}e.state=null;return t===U?J(e,i):_}function Me(e,t){var r=t.length;var n;var i,o;var a;var s;var u;var c;var l;if(!e||!e.state){return b}n=e.state;a=n.wrap;if(a===2||a===1&&n.status!==z||n.lookahead){return b}if(a===1){e.adler=p(e.adler,t,r,0)}n.wrap=0;if(r>=n.w_size){if(a===0){ee(n.head);n.strstart=0;n.block_start=0;n.insert=0}l=new h.Buf8(n.w_size);h.arraySet(l,t,r-n.w_size,n.w_size,0);t=l;r=n.w_size}s=e.avail_in;u=e.next_in;c=e.input;e.avail_in=r;e.next_in=0;e.input=t;se(n);while(n.lookahead>=I){i=n.strstart;o=n.lookahead-(I-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+I-1])&n.hash_mask;n.prev[i&n.w_mask]=n.head[n.ins_h];n.head[n.ins_h]=i;i++}while(--o);n.strstart=i;n.lookahead=I-1;se(n)}n.strstart+=n.lookahead;n.block_start=n.strstart;n.insert=n.lookahead;n.lookahead=0;n.match_length=n.prev_length=I-1;n.match_available=0;e.next_in=u;e.input=c;e.avail_in=s;n.wrap=a;return _}r.deflateInit=xe;r.deflateInit2=be;r.deflateReset=_e;r.deflateResetKeep=ge;r.deflateSetHeader=ye;r.deflate=we;r.deflateEnd=Se;r.deflateSetDictionary=Me;r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":26,"./adler32":28,"./crc32":30,"./messages":36,"./trees":37}],32:[function(e,t,r){"use strict";function n(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}t.exports=n},{}],33:[function(e,t,r){"use strict";var O=30;var P=12;t.exports=function e(t,r){var n;var i;var o;var a;var s;var u;var c;var l;var h;var p;var f;var d;var v;var m;var g;var _;var y;var b;var x;var w;var S;var M;var C;var T,E;n=t.state;i=t.next_in;T=t.input;o=i+(t.avail_in-5);a=t.next_out;E=t.output;s=a-(r-t.avail_out);u=a+(t.avail_out-257);c=n.dmax;l=n.wsize;h=n.whave;p=n.wnext;f=n.window;d=n.hold;v=n.bits;m=n.lencode;g=n.distcode;_=(1<<n.lenbits)-1;y=(1<<n.distbits)-1;e:do{if(v<15){d+=T[i++]<<v;v+=8;d+=T[i++]<<v;v+=8}b=m[d&_];t:for(;;){x=b>>>24;d>>>=x;v-=x;x=b>>>16&255;if(x===0){E[a++]=b&65535}else if(x&16){w=b&65535;x&=15;if(x){if(v<x){d+=T[i++]<<v;v+=8}w+=d&(1<<x)-1;d>>>=x;v-=x}if(v<15){d+=T[i++]<<v;v+=8;d+=T[i++]<<v;v+=8}b=g[d&y];r:for(;;){x=b>>>24;d>>>=x;v-=x;x=b>>>16&255;if(x&16){S=b&65535;x&=15;if(v<x){d+=T[i++]<<v;v+=8;if(v<x){d+=T[i++]<<v;v+=8}}S+=d&(1<<x)-1;if(S>c){t.msg="invalid distance too far back";n.mode=O;break e}d>>>=x;v-=x;x=a-s;if(S>x){x=S-x;if(x>h){if(n.sane){t.msg="invalid distance too far back";n.mode=O;break e}}M=0;C=f;if(p===0){M+=l-x;if(x<w){w-=x;do{E[a++]=f[M++]}while(--x);M=a-S;C=E}}else if(p<x){M+=l+p-x;x-=p;if(x<w){w-=x;do{E[a++]=f[M++]}while(--x);M=0;if(p<w){x=p;w-=x;do{E[a++]=f[M++]}while(--x);M=a-S;C=E}}}else{M+=p-x;if(x<w){w-=x;do{E[a++]=f[M++]}while(--x);M=a-S;C=E}}while(w>2){E[a++]=C[M++];E[a++]=C[M++];E[a++]=C[M++];w-=3}if(w){E[a++]=C[M++];if(w>1){E[a++]=C[M++]}}}else{M=a-S;do{E[a++]=E[M++];E[a++]=E[M++];E[a++]=E[M++];w-=3}while(w>2);if(w){E[a++]=E[M++];if(w>1){E[a++]=E[M++]}}}}else if((x&64)===0){b=g[(b&65535)+(d&(1<<x)-1)];continue r}else{t.msg="invalid distance code";n.mode=O;break e}break}}else if((x&64)===0){b=m[(b&65535)+(d&(1<<x)-1)];continue t}else if(x&32){n.mode=P;break e}else{t.msg="invalid literal/length code";n.mode=O;break e}break}}while(i<o&&a<u);w=v>>3;i-=w;v-=w<<3;d&=(1<<v)-1;t.next_in=i;t.next_out=a;t.avail_in=i<o?5+(o-i):5-(i-o);t.avail_out=a<u?257+(u-a):257-(a-u);n.hold=d;n.bits=v;return}},{}],34:[function(e,t,r){"use strict";var P=e("../utils/common");var A=e("./adler32");var j=e("./crc32");var R=e("./inffast");var k=e("./inftrees");var L=0;var N=1;var I=2;var D=4;var B=5;var F=6;var z=0;var $=1;var G=2;var V=-2;var H=-3;var U=-4;var q=-5;var W=8;var X=1;var Y=2;var K=3;var Z=4;var J=5;var Q=6;var ee=7;var te=8;var re=9;var ne=10;var ie=11;var oe=12;var ae=13;var se=14;var ue=15;var ce=16;var le=17;var he=18;var pe=19;var fe=20;var de=21;var ve=22;var me=23;var ge=24;var _e=25;var ye=26;var be=27;var xe=28;var we=29;var Se=30;var Me=31;var Ce=32;var n=852;var i=592;var o=15;var a=o;function Te(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function s(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new P.Buf16(320);this.work=new P.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function u(e){var t;if(!e||!e.state){return V}t=e.state;e.total_in=e.total_out=t.total=0;e.msg="";if(t.wrap){e.adler=t.wrap&1}t.mode=X;t.last=0;t.havedict=0;t.dmax=32768;t.head=null;t.hold=0;t.bits=0;t.lencode=t.lendyn=new P.Buf32(n);t.distcode=t.distdyn=new P.Buf32(i);t.sane=1;t.back=-1;return z}function c(e){var t;if(!e||!e.state){return V}t=e.state;t.wsize=0;t.whave=0;t.wnext=0;return u(e)}function l(e,t){var r;var n;if(!e||!e.state){return V}n=e.state;if(t<0){r=0;t=-t}else{r=(t>>4)+1;if(t<48){t&=15}}if(t&&(t<8||t>15)){return V}if(n.window!==null&&n.wbits!==t){n.window=null}n.wrap=r;n.wbits=t;return c(e)}function h(e,t){var r;var n;if(!e){return V}n=new s;e.state=n;n.window=null;r=l(e,t);if(r!==z){e.state=null}return r}function p(e){return h(e,a)}var f=true;var d,v;function Ee(e){if(f){var t;d=new P.Buf32(512);v=new P.Buf32(32);t=0;while(t<144){e.lens[t++]=8}while(t<256){e.lens[t++]=9}while(t<280){e.lens[t++]=7}while(t<288){e.lens[t++]=8}k(N,e.lens,0,288,d,0,e.work,{bits:9});t=0;while(t<32){e.lens[t++]=5}k(I,e.lens,0,32,v,0,e.work,{bits:5});f=false}e.lencode=d;e.lenbits=9;e.distcode=v;e.distbits=5}function Oe(e,t,r,n){var i;var o=e.state;if(o.window===null){o.wsize=1<<o.wbits;o.wnext=0;o.whave=0;o.window=new P.Buf8(o.wsize)}if(n>=o.wsize){P.arraySet(o.window,t,r-o.wsize,o.wsize,0);o.wnext=0;o.whave=o.wsize}else{i=o.wsize-o.wnext;if(i>n){i=n}P.arraySet(o.window,t,r-n,i,o.wnext);n-=i;if(n){P.arraySet(o.window,t,r-n,n,0);o.wnext=n;o.whave=o.wsize}else{o.wnext+=i;if(o.wnext===o.wsize){o.wnext=0}if(o.whave<o.wsize){o.whave+=i}}}return 0}function m(e,t){var r;var n,i;var o;var a;var s,u;var c;var l;var h,p;var f;var d;var v;var m=0;var g,_,y;var b,x,w;var S;var M;var C=new P.Buf8(4);var T;var E;var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0){return V}r=e.state;if(r.mode===oe){r.mode=ae}a=e.next_out;i=e.output;u=e.avail_out;o=e.next_in;n=e.input;s=e.avail_in;c=r.hold;l=r.bits;h=s;p=u;M=z;e:for(;;){switch(r.mode){case X:if(r.wrap===0){r.mode=ae;break}while(l<16){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(r.wrap&2&&c===35615){r.check=0;C[0]=c&255;C[1]=c>>>8&255;r.check=j(r.check,C,2,0);c=0;l=0;r.mode=Y;break}r.flags=0;if(r.head){r.head.done=false}if(!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check";r.mode=Se;break}if((c&15)!==W){e.msg="unknown compression method";r.mode=Se;break}c>>>=4;l-=4;S=(c&15)+8;if(r.wbits===0){r.wbits=S}else if(S>r.wbits){e.msg="invalid window size";r.mode=Se;break}r.dmax=1<<S;e.adler=r.check=1;r.mode=c&512?ne:oe;c=0;l=0;break;case Y:while(l<16){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.flags=c;if((r.flags&255)!==W){e.msg="unknown compression method";r.mode=Se;break}if(r.flags&57344){e.msg="unknown header flags set";r.mode=Se;break}if(r.head){r.head.text=c>>8&1}if(r.flags&512){C[0]=c&255;C[1]=c>>>8&255;r.check=j(r.check,C,2,0)}c=0;l=0;r.mode=K;case K:while(l<32){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(r.head){r.head.time=c}if(r.flags&512){C[0]=c&255;C[1]=c>>>8&255;C[2]=c>>>16&255;C[3]=c>>>24&255;r.check=j(r.check,C,4,0)}c=0;l=0;r.mode=Z;case Z:while(l<16){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(r.head){r.head.xflags=c&255;r.head.os=c>>8}if(r.flags&512){C[0]=c&255;C[1]=c>>>8&255;r.check=j(r.check,C,2,0)}c=0;l=0;r.mode=J;case J:if(r.flags&1024){while(l<16){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.length=c;if(r.head){r.head.extra_len=c}if(r.flags&512){C[0]=c&255;C[1]=c>>>8&255;r.check=j(r.check,C,2,0)}c=0;l=0}else if(r.head){r.head.extra=null}r.mode=Q;case Q:if(r.flags&1024){f=r.length;if(f>s){f=s}if(f){if(r.head){S=r.head.extra_len-r.length;if(!r.head.extra){r.head.extra=new Array(r.head.extra_len)}P.arraySet(r.head.extra,n,o,f,S)}if(r.flags&512){r.check=j(r.check,n,f,o)}s-=f;o+=f;r.length-=f}if(r.length){break e}}r.length=0;r.mode=ee;case ee:if(r.flags&2048){if(s===0){break e}f=0;do{S=n[o+f++];if(r.head&&S&&r.length<65536){r.head.name+=String.fromCharCode(S)}}while(S&&f<s);if(r.flags&512){r.check=j(r.check,n,f,o)}s-=f;o+=f;if(S){break e}}else if(r.head){r.head.name=null}r.length=0;r.mode=te;case te:if(r.flags&4096){if(s===0){break e}f=0;do{S=n[o+f++];if(r.head&&S&&r.length<65536){r.head.comment+=String.fromCharCode(S)}}while(S&&f<s);if(r.flags&512){r.check=j(r.check,n,f,o)}s-=f;o+=f;if(S){break e}}else if(r.head){r.head.comment=null}r.mode=re;case re:if(r.flags&512){while(l<16){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(c!==(r.check&65535)){e.msg="header crc mismatch";r.mode=Se;break}c=0;l=0}if(r.head){r.head.hcrc=r.flags>>9&1;r.head.done=true}e.adler=r.check=0;r.mode=oe;break;case ne:while(l<32){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}e.adler=r.check=Te(c);c=0;l=0;r.mode=ie;case ie:if(r.havedict===0){e.next_out=a;e.avail_out=u;e.next_in=o;e.avail_in=s;r.hold=c;r.bits=l;return G}e.adler=r.check=1;r.mode=oe;case oe:if(t===B||t===F){break e}case ae:if(r.last){c>>>=l&7;l-=l&7;r.mode=be;break}while(l<3){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.last=c&1;c>>>=1;l-=1;switch(c&3){case 0:r.mode=se;break;case 1:Ee(r);r.mode=fe;if(t===F){c>>>=2;l-=2;break e}break;case 2:r.mode=le;break;case 3:e.msg="invalid block type";r.mode=Se}c>>>=2;l-=2;break;case se:c>>>=l&7;l-=l&7;while(l<32){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths";r.mode=Se;break}r.length=c&65535;c=0;l=0;r.mode=ue;if(t===F){break e}case ue:r.mode=ce;case ce:f=r.length;if(f){if(f>s){f=s}if(f>u){f=u}if(f===0){break e}P.arraySet(i,n,o,f,a);s-=f;o+=f;u-=f;a+=f;r.length-=f;break}r.mode=oe;break;case le:while(l<14){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.nlen=(c&31)+257;c>>>=5;l-=5;r.ndist=(c&31)+1;c>>>=5;l-=5;r.ncode=(c&15)+4;c>>>=4;l-=4;if(r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols";r.mode=Se;break}r.have=0;r.mode=he;case he:while(r.have<r.ncode){while(l<3){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.lens[O[r.have++]]=c&7;c>>>=3;l-=3}while(r.have<19){r.lens[O[r.have++]]=0}r.lencode=r.lendyn;r.lenbits=7;T={bits:r.lenbits};M=k(L,r.lens,0,19,r.lencode,0,r.work,T);r.lenbits=T.bits;if(M){e.msg="invalid code lengths set";r.mode=Se;break}r.have=0;r.mode=pe;case pe:while(r.have<r.nlen+r.ndist){for(;;){m=r.lencode[c&(1<<r.lenbits)-1];g=m>>>24;_=m>>>16&255;y=m&65535;if(g<=l){break}if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(y<16){c>>>=g;l-=g;r.lens[r.have++]=y}else{if(y===16){E=g+2;while(l<E){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}c>>>=g;l-=g;if(r.have===0){e.msg="invalid bit length repeat";r.mode=Se;break}S=r.lens[r.have-1];f=3+(c&3);c>>>=2;l-=2}else if(y===17){E=g+3;while(l<E){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}c>>>=g;l-=g;S=0;f=3+(c&7);c>>>=3;l-=3}else{E=g+7;while(l<E){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}c>>>=g;l-=g;S=0;f=11+(c&127);c>>>=7;l-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat";r.mode=Se;break}while(f--){r.lens[r.have++]=S}}}if(r.mode===Se){break}if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block";r.mode=Se;break}r.lenbits=9;T={bits:r.lenbits};M=k(N,r.lens,0,r.nlen,r.lencode,0,r.work,T);r.lenbits=T.bits;if(M){e.msg="invalid literal/lengths set";r.mode=Se;break}r.distbits=6;r.distcode=r.distdyn;T={bits:r.distbits};M=k(I,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T);r.distbits=T.bits;if(M){e.msg="invalid distances set";r.mode=Se;break}r.mode=fe;if(t===F){break e}case fe:r.mode=de;case de:if(s>=6&&u>=258){e.next_out=a;e.avail_out=u;e.next_in=o;e.avail_in=s;r.hold=c;r.bits=l;R(e,p);a=e.next_out;i=e.output;u=e.avail_out;o=e.next_in;n=e.input;s=e.avail_in;c=r.hold;l=r.bits;if(r.mode===oe){r.back=-1}break}r.back=0;for(;;){m=r.lencode[c&(1<<r.lenbits)-1];g=m>>>24;_=m>>>16&255;y=m&65535;if(g<=l){break}if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(_&&(_&240)===0){b=g;x=_;w=y;for(;;){m=r.lencode[w+((c&(1<<b+x)-1)>>b)];g=m>>>24;_=m>>>16&255;y=m&65535;if(b+g<=l){break}if(s===0){break e}s--;c+=n[o++]<<l;l+=8}c>>>=b;l-=b;r.back+=b}c>>>=g;l-=g;r.back+=g;r.length=y;if(_===0){r.mode=ye;break}if(_&32){r.back=-1;r.mode=oe;break}if(_&64){e.msg="invalid literal/length code";r.mode=Se;break}r.extra=_&15;r.mode=ve;case ve:if(r.extra){E=r.extra;while(l<E){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.length+=c&(1<<r.extra)-1;c>>>=r.extra;l-=r.extra;r.back+=r.extra}r.was=r.length;r.mode=me;case me:for(;;){m=r.distcode[c&(1<<r.distbits)-1];g=m>>>24;_=m>>>16&255;y=m&65535;if(g<=l){break}if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if((_&240)===0){b=g;x=_;w=y;for(;;){m=r.distcode[w+((c&(1<<b+x)-1)>>b)];g=m>>>24;_=m>>>16&255;y=m&65535;if(b+g<=l){break}if(s===0){break e}s--;c+=n[o++]<<l;l+=8}c>>>=b;l-=b;r.back+=b}c>>>=g;l-=g;r.back+=g;if(_&64){e.msg="invalid distance code";r.mode=Se;break}r.offset=y;r.extra=_&15;r.mode=ge;case ge:if(r.extra){E=r.extra;while(l<E){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}r.offset+=c&(1<<r.extra)-1;c>>>=r.extra;l-=r.extra;r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back";r.mode=Se;break}r.mode=_e;case _e:if(u===0){break e}f=p-u;if(r.offset>f){f=r.offset-f;if(f>r.whave){if(r.sane){e.msg="invalid distance too far back";r.mode=Se;break}}if(f>r.wnext){f-=r.wnext;d=r.wsize-f}else{d=r.wnext-f}if(f>r.length){f=r.length}v=r.window}else{v=i;d=a-r.offset;f=r.length}if(f>u){f=u}u-=f;r.length-=f;do{i[a++]=v[d++]}while(--f);if(r.length===0){r.mode=de}break;case ye:if(u===0){break e}i[a++]=r.length;u--;r.mode=de;break;case be:if(r.wrap){while(l<32){if(s===0){break e}s--;c|=n[o++]<<l;l+=8}p-=u;e.total_out+=p;r.total+=p;if(p){e.adler=r.check=r.flags?j(r.check,i,p,a-p):A(r.check,i,p,a-p)}p=u;if((r.flags?c:Te(c))!==r.check){e.msg="incorrect data check";r.mode=Se;break}c=0;l=0}r.mode=xe;case xe:if(r.wrap&&r.flags){while(l<32){if(s===0){break e}s--;c+=n[o++]<<l;l+=8}if(c!==(r.total&4294967295)){e.msg="incorrect length check";r.mode=Se;break}c=0;l=0}r.mode=we;case we:M=$;break e;case Se:M=H;break e;case Me:return U;case Ce:default:return V}}e.next_out=a;e.avail_out=u;e.next_in=o;e.avail_in=s;r.hold=c;r.bits=l;if(r.wsize||p!==e.avail_out&&r.mode<Se&&(r.mode<be||t!==D)){if(Oe(e,e.output,e.next_out,p-e.avail_out)){r.mode=Me;return U}}h-=e.avail_in;p-=e.avail_out;e.total_in+=h;e.total_out+=p;r.total+=p;if(r.wrap&&p){e.adler=r.check=r.flags?j(r.check,i,p,e.next_out-p):A(r.check,i,p,e.next_out-p)}e.data_type=r.bits+(r.last?64:0)+(r.mode===oe?128:0)+(r.mode===fe||r.mode===ue?256:0);if((h===0&&p===0||t===D)&&M===z){M=q}return M}function g(e){if(!e||!e.state){return V}var t=e.state;if(t.window){t.window=null}e.state=null;return z}function _(e,t){var r;if(!e||!e.state){return V}r=e.state;if((r.wrap&2)===0){return V}r.head=t;t.done=false;return z}function y(e,t){var r=t.length;var n;var i;var o;if(!e||!e.state){return V}n=e.state;if(n.wrap!==0&&n.mode!==ie){return V}if(n.mode===ie){i=1;i=A(i,t,r,0);if(i!==n.check){return H}}o=Oe(e,t,r,r);if(o){n.mode=Me;return U}n.havedict=1;return z}r.inflateReset=c;r.inflateReset2=l;r.inflateResetKeep=u;r.inflateInit=p;r.inflateInit2=h;r.inflate=m;r.inflateEnd=g;r.inflateGetHeader=_;r.inflateSetDictionary=y;r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":26,"./adler32":28,"./crc32":30,"./inffast":33,"./inftrees":35}],35:[function(e,t,r){"use strict";var N=e("../utils/common");var I=15;var D=852;var B=592;var F=0;var z=1;var $=2;var G=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var V=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var H=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var U=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function e(t,r,n,i,o,a,s,u){var c=u.bits;var l=0;var h=0;var p=0,f=0;var d=0;var v=0;var m=0;var g=0;var _=0;var y=0;var b;var x;var w;var S;var M;var C=null;var T=0;var E;var O=new N.Buf16(I+1);var P=new N.Buf16(I+1);var A=null;var j=0;var R,k,L;for(l=0;l<=I;l++){O[l]=0}for(h=0;h<i;h++){O[r[n+h]]++}d=c;for(f=I;f>=1;f--){if(O[f]!==0){break}}if(d>f){d=f}if(f===0){o[a++]=1<<24|64<<16|0;o[a++]=1<<24|64<<16|0;u.bits=1;return 0}for(p=1;p<f;p++){if(O[p]!==0){break}}if(d<p){d=p}g=1;for(l=1;l<=I;l++){g<<=1;g-=O[l];if(g<0){return-1}}if(g>0&&(t===F||f!==1)){return-1}P[1]=0;for(l=1;l<I;l++){P[l+1]=P[l]+O[l]}for(h=0;h<i;h++){if(r[n+h]!==0){s[P[r[n+h]]++]=h}}if(t===F){C=A=s;E=19}else if(t===z){C=G;T-=257;A=V;j-=257;E=256}else{C=H;A=U;E=-1}y=0;h=0;l=p;M=a;v=d;m=0;w=-1;_=1<<d;S=_-1;if(t===z&&_>D||t===$&&_>B){return 1}for(;;){R=l-m;if(s[h]<E){k=0;L=s[h]}else if(s[h]>E){k=A[j+s[h]];L=C[T+s[h]]}else{k=32+64;L=0}b=1<<l-m;x=1<<v;p=x;do{x-=b;o[M+(y>>m)+x]=R<<24|k<<16|L|0}while(x!==0);b=1<<l-1;while(y&b){b>>=1}if(b!==0){y&=b-1;y+=b}else{y=0}h++;if(--O[l]===0){if(l===f){break}l=r[n+s[h]]}if(l>d&&(y&S)!==w){if(m===0){m=d}M+=p;v=l-m;g=1<<v;while(v+m<f){g-=O[v+m];if(g<=0){break}v++;g<<=1}_+=1<<v;if(t===z&&_>D||t===$&&_>B){return 1}w=y&S;o[w]=d<<24|v<<16|M-a|0}}if(y!==0){o[M+y]=l-m<<24|64<<16|0}u.bits=d;return 0}},{"../utils/common":26}],36:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],37:[function(e,t,r){"use strict";var i=e("../utils/common");var s=4;var n=0;var o=1;var u=2;function a(e){var t=e.length;while(--t>=0){e[t]=0}}var c=0;var l=1;var h=2;var p=3;var f=258;var d=29;var v=256;var m=v+1+d;var g=30;var _=19;var y=2*m+1;var b=15;var x=16;var w=7;var S=256;var M=16;var C=17;var T=18;var E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var j=512;var R=new Array((m+2)*2);a(R);var k=new Array(g*2);a(k);var L=new Array(j);a(L);var N=new Array(f-p+1);a(N);var I=new Array(d);a(I);var D=new Array(g);a(D);function B(e,t,r,n,i){this.static_tree=e;this.extra_bits=t;this.extra_base=r;this.elems=n;this.max_length=i;this.has_stree=e&&e.length}var F;var z;var $;function G(e,t){this.dyn_tree=e;this.max_code=0;this.stat_desc=t}function V(e){return e<256?L[e]:L[256+(e>>>7)]}function H(e,t){e.pending_buf[e.pending++]=t&255;e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,r){if(e.bi_valid>x-r){e.bi_buf|=t<<e.bi_valid&65535;H(e,e.bi_buf);e.bi_buf=t>>x-e.bi_valid;e.bi_valid+=r-x}else{e.bi_buf|=t<<e.bi_valid&65535;e.bi_valid+=r}}function q(e,t,r){U(e,r[t*2],r[t*2+1])}function W(e,t){var r=0;do{r|=e&1;e>>>=1;r<<=1}while(--t>0);return r>>>1}function X(e){if(e.bi_valid===16){H(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}}function Y(e,t){var r=t.dyn_tree;var n=t.max_code;var i=t.stat_desc.static_tree;var o=t.stat_desc.has_stree;var a=t.stat_desc.extra_bits;var s=t.stat_desc.extra_base;var u=t.stat_desc.max_length;var c;var l,h;var p;var f;var d;var v=0;for(p=0;p<=b;p++){e.bl_count[p]=0}r[e.heap[e.heap_max]*2+1]=0;for(c=e.heap_max+1;c<y;c++){l=e.heap[c];p=r[r[l*2+1]*2+1]+1;if(p>u){p=u;v++}r[l*2+1]=p;if(l>n){continue}e.bl_count[p]++;f=0;if(l>=s){f=a[l-s]}d=r[l*2];e.opt_len+=d*(p+f);if(o){e.static_len+=d*(i[l*2+1]+f)}}if(v===0){return}do{p=u-1;while(e.bl_count[p]===0){p--}e.bl_count[p]--;e.bl_count[p+1]+=2;e.bl_count[u]--;v-=2}while(v>0);for(p=u;p!==0;p--){l=e.bl_count[p];while(l!==0){h=e.heap[--c];if(h>n){continue}if(r[h*2+1]!==p){e.opt_len+=(p-r[h*2+1])*r[h*2];r[h*2+1]=p}l--}}}function K(e,t,r){var n=new Array(b+1);var i=0;var o;var a;for(o=1;o<=b;o++){n[o]=i=i+r[o-1]<<1}for(a=0;a<=t;a++){var s=e[a*2+1];if(s===0){continue}e[a*2]=W(n[s]++,s)}}function Z(){var e;var t;var r;var n;var i;var o=new Array(b+1);r=0;for(n=0;n<d-1;n++){I[n]=r;for(e=0;e<1<<E[n];e++){N[r++]=n}}N[r-1]=n;i=0;for(n=0;n<16;n++){D[n]=i;for(e=0;e<1<<O[n];e++){L[i++]=n}}i>>=7;for(;n<g;n++){D[n]=i<<7;for(e=0;e<1<<O[n]-7;e++){L[256+i++]=n}}for(t=0;t<=b;t++){o[t]=0}e=0;while(e<=143){R[e*2+1]=8;e++;o[8]++}while(e<=255){R[e*2+1]=9;e++;o[9]++}while(e<=279){R[e*2+1]=7;e++;o[7]++}while(e<=287){R[e*2+1]=8;e++;o[8]++}K(R,m+1,o);for(e=0;e<g;e++){k[e*2+1]=5;k[e*2]=W(e,5)}F=new B(R,E,v+1,m,b);z=new B(k,O,0,g,b);$=new B(new Array(0),P,0,_,w)}function J(e){var t;for(t=0;t<m;t++){e.dyn_ltree[t*2]=0}for(t=0;t<g;t++){e.dyn_dtree[t*2]=0}for(t=0;t<_;t++){e.bl_tree[t*2]=0}e.dyn_ltree[S*2]=1;e.opt_len=e.static_len=0;e.last_lit=e.matches=0}function Q(e){if(e.bi_valid>8){H(e,e.bi_buf)}else if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}e.bi_buf=0;e.bi_valid=0}function ee(e,t,r,n){Q(e);if(n){H(e,r);H(e,~r)}i.arraySet(e.pending_buf,e.window,t,r,e.pending);e.pending+=r}function te(e,t,r,n){var i=t*2;var o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function re(e,t,r){var n=e.heap[r];var i=r<<1;while(i<=e.heap_len){if(i<e.heap_len&&te(t,e.heap[i+1],e.heap[i],e.depth)){i++}if(te(t,n,e.heap[i],e.depth)){break}e.heap[r]=e.heap[i];r=i;i<<=1}e.heap[r]=n}function ne(e,t,r){var n;var i;var o=0;var a;var s;if(e.last_lit!==0){do{n=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1];i=e.pending_buf[e.l_buf+o];o++;if(n===0){q(e,i,t)}else{a=N[i];q(e,a+v+1,t);s=E[a];if(s!==0){i-=I[a];U(e,i,s)}n--;a=V(n);q(e,a,r);s=O[a];if(s!==0){n-=D[a];U(e,n,s)}}}while(o<e.last_lit)}q(e,S,t)}function ie(e,t){var r=t.dyn_tree;var n=t.stat_desc.static_tree;var i=t.stat_desc.has_stree;var o=t.stat_desc.elems;var a,s;var u=-1;var c;e.heap_len=0;e.heap_max=y;for(a=0;a<o;a++){if(r[a*2]!==0){e.heap[++e.heap_len]=u=a;e.depth[a]=0}else{r[a*2+1]=0}}while(e.heap_len<2){c=e.heap[++e.heap_len]=u<2?++u:0;r[c*2]=1;e.depth[c]=0;e.opt_len--;if(i){e.static_len-=n[c*2+1]}}t.max_code=u;for(a=e.heap_len>>1;a>=1;a--){re(e,r,a)}c=o;do{a=e.heap[1];e.heap[1]=e.heap[e.heap_len--];re(e,r,1);s=e.heap[1];e.heap[--e.heap_max]=a;e.heap[--e.heap_max]=s;r[c*2]=r[a*2]+r[s*2];e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1;r[a*2+1]=r[s*2+1]=c;e.heap[1]=c++;re(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];Y(e,t);K(r,u,e.bl_count)}function oe(e,t,r){var n;var i=-1;var o;var a=t[0*2+1];var s=0;var u=7;var c=4;if(a===0){u=138;c=3}t[(r+1)*2+1]=65535;for(n=0;n<=r;n++){o=a;a=t[(n+1)*2+1];if(++s<u&&o===a){continue}else if(s<c){e.bl_tree[o*2]+=s}else if(o!==0){if(o!==i){e.bl_tree[o*2]++}e.bl_tree[M*2]++}else if(s<=10){e.bl_tree[C*2]++}else{e.bl_tree[T*2]++}s=0;i=o;if(a===0){u=138;c=3}else if(o===a){u=6;c=3}else{u=7;c=4}}}function ae(e,t,r){var n;var i=-1;var o;var a=t[0*2+1];var s=0;var u=7;var c=4;if(a===0){u=138;c=3}for(n=0;n<=r;n++){o=a;a=t[(n+1)*2+1];if(++s<u&&o===a){continue}else if(s<c){do{q(e,o,e.bl_tree)}while(--s!==0)}else if(o!==0){if(o!==i){q(e,o,e.bl_tree);s--}q(e,M,e.bl_tree);U(e,s-3,2)}else if(s<=10){q(e,C,e.bl_tree);U(e,s-3,3)}else{q(e,T,e.bl_tree);U(e,s-11,7)}s=0;i=o;if(a===0){u=138;c=3}else if(o===a){u=6;c=3}else{u=7;c=4}}}function se(e){var t;oe(e,e.dyn_ltree,e.l_desc.max_code);oe(e,e.dyn_dtree,e.d_desc.max_code);ie(e,e.bl_desc);for(t=_-1;t>=3;t--){if(e.bl_tree[A[t]*2+1]!==0){break}}e.opt_len+=3*(t+1)+5+5+4;return t}function ue(e,t,r,n){var i;U(e,t-257,5);U(e,r-1,5);U(e,n-4,4);for(i=0;i<n;i++){U(e,e.bl_tree[A[i]*2+1],3)}ae(e,e.dyn_ltree,t-1);ae(e,e.dyn_dtree,r-1)}function ce(e){var t=4093624447;var r;for(r=0;r<=31;r++,t>>>=1){if(t&1&&e.dyn_ltree[r*2]!==0){return n}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return o}for(r=32;r<v;r++){if(e.dyn_ltree[r*2]!==0){return o}}return n}var le=false;function he(e){if(!le){Z();le=true}e.l_desc=new G(e.dyn_ltree,F);e.d_desc=new G(e.dyn_dtree,z);e.bl_desc=new G(e.bl_tree,$);e.bi_buf=0;e.bi_valid=0;J(e)}function pe(e,t,r,n){U(e,(c<<1)+(n?1:0),3);ee(e,t,r,true)}function fe(e){U(e,l<<1,3);q(e,S,R);X(e)}function de(e,t,r,n){var i,o;var a=0;if(e.level>0){if(e.strm.data_type===u){e.strm.data_type=ce(e)}ie(e,e.l_desc);ie(e,e.d_desc);a=se(e);i=e.opt_len+3+7>>>3;o=e.static_len+3+7>>>3;if(o<=i){i=o}}else{i=o=r+5}if(r+4<=i&&t!==-1){pe(e,t,r,n)}else if(e.strategy===s||o===i){U(e,(l<<1)+(n?1:0),3);ne(e,R,k)}else{U(e,(h<<1)+(n?1:0),3);ue(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1);ne(e,e.dyn_ltree,e.dyn_dtree)}J(e);if(n){Q(e)}}function ve(e,t,r){e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255;e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255;e.pending_buf[e.l_buf+e.last_lit]=r&255;e.last_lit++;if(t===0){e.dyn_ltree[r*2]++}else{e.matches++;t--;e.dyn_ltree[(N[r]+v+1)*2]++;e.dyn_dtree[V(t)*2]++}return e.last_lit===e.lit_bufsize-1}r._tr_init=he;r._tr_stored_block=pe;r._tr_flush_block=de;r._tr_tally=ve;r._tr_align=fe},{"../utils/common":26}],38:[function(e,t,r){"use strict";function n(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}t.exports=n},{}],39:[function(e,t,c){(function(i){function o(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var a=function(e){return t.exec(e).slice(1)};c.resolve=function(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:i.cwd();if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=o(s(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."};c.normalize=function(e){var t=c.isAbsolute(e),r=n(e,-1)==="/";e=o(s(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e};c.isAbsolute=function(e){return e.charAt(0)==="/"};c.join=function(){var e=Array.prototype.slice.call(arguments,0);return c.normalize(s(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};c.relative=function(e,t){e=c.resolve(e).substr(1);t=c.resolve(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var o=Math.min(n.length,i.length);var a=o;for(var s=0;s<o;s++){if(n[s]!==i[s]){a=s;break}}var u=[];for(var s=a;s<n.length;s++){u.push("..")}u=u.concat(i.slice(a));return u.join("/")};c.sep="/";c.delimiter=":";c.dirname=function(e){var t=a(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n};c.basename=function(e,t){var r=a(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r};c.extname=function(e){return a(e)[3]};function s(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var n="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)}}).call(this,e("_process"))},{_process:7}],40:[function(e,t,r){"use strict";t.exports=i;var n=e("ieee754");function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0);this.pos=0;this.type=0;this.length=this.buf.length}i.Varint=0;i.Fixed64=1;i.Bytes=2;i.Fixed32=5;var o=(1<<16)*(1<<16),a=1/o;var s=12;var u=typeof TextDecoder==="undefined"?null:new TextDecoder("utf8");i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){r=r||this.length;while(this.pos<r){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=n&7;e(i,t,this);if(this.pos===o)this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=C(this.buf,this.pos);this.pos+=4;return e},readSFixed32:function(){var e=E(this.buf,this.pos);this.pos+=4;return e},readFixed64:function(){var e=C(this.buf,this.pos)+C(this.buf,this.pos+4)*o;this.pos+=8;return e},readSFixed64:function(){var e=C(this.buf,this.pos)+E(this.buf,this.pos+4)*o;this.pos+=8;return e},readFloat:function(){var e=n.read(this.buf,this.pos,true,23,4);this.pos+=4;return e},readDouble:function(){var e=n.read(this.buf,this.pos,true,52,8);this.pos+=8;return e},readVarint:function(e){var t=this.buf,r,n;n=t[this.pos++];r=n&127;if(n<128)return r;n=t[this.pos++];r|=(n&127)<<7;if(n<128)return r;n=t[this.pos++];r|=(n&127)<<14;if(n<128)return r;n=t[this.pos++];r|=(n&127)<<21;if(n<128)return r;n=t[this.pos];r|=(n&15)<<28;return c(r,e,this)},readVarint64:function(){return this.readVarint(true)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos;var t=this.pos;this.pos=e;if(e-t>=s&&u){return P(this.buf,t,e)}return O(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);this.pos=e;return t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var r=l(this);e=e||[];while(this.pos<r)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=l(this);e=e||[];while(this.pos<t)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===i.Varint)while(this.buf[this.pos++]>127){}else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else if(t===i.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){var t=this.length||16;while(t<this.pos+e)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf);this.buf=r;this.length=t}},finish:function(){this.length=this.pos;this.pos=0;return this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4);T(this.buf,e,this.pos);this.pos+=4},writeSFixed32:function(e){this.realloc(4);T(this.buf,e,this.pos);this.pos+=4},writeFixed64:function(e){this.realloc(8);T(this.buf,e&-1,this.pos);T(this.buf,Math.floor(e*a),this.pos+4);this.pos+=8},writeSFixed64:function(e){this.realloc(8);T(this.buf,e&-1,this.pos);T(this.buf,Math.floor(e*a),this.pos+4);this.pos+=8},writeVarint:function(e){e=+e||0;if(e>268435455||e<0){p(e,this);return}this.realloc(4);this.buf[this.pos++]=e&127|(e>127?128:0);if(e<=127)return;this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0);if(e<=127)return;this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0);if(e<=127)return;this.buf[this.pos++]=e>>>7&127},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e);this.realloc(e.length*4);this.pos++;var t=this.pos;this.pos=A(this.buf,e,this.pos);var r=this.pos-t;if(r>=128)v(t,r,this);this.pos=t-1;this.writeVarint(r);this.pos+=r},writeFloat:function(e){this.realloc(4);n.write(this.buf,e,this.pos,true,23,4);this.pos+=4},writeDouble:function(e){this.realloc(8);n.write(this.buf,e,this.pos,true,52,8);this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t);this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;if(n>=128)v(r,n,this);this.pos=r-1;this.writeVarint(n);this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,i.Bytes);this.writeRawMessage(t,r)},writePackedVarint:function(e,t){if(t.length)this.writeMessage(e,m,t)},writePackedSVarint:function(e,t){if(t.length)this.writeMessage(e,g,t)},writePackedBoolean:function(e,t){if(t.length)this.writeMessage(e,b,t)},writePackedFloat:function(e,t){if(t.length)this.writeMessage(e,_,t)},writePackedDouble:function(e,t){if(t.length)this.writeMessage(e,y,t)},writePackedFixed32:function(e,t){if(t.length)this.writeMessage(e,x,t)},writePackedSFixed32:function(e,t){if(t.length)this.writeMessage(e,w,t)},writePackedFixed64:function(e,t){if(t.length)this.writeMessage(e,S,t)},writePackedSFixed64:function(e,t){if(t.length)this.writeMessage(e,M,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes);this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32);this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32);this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64);this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64);this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint);this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint);this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes);this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32);this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64);this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function c(e,t,r){var n=r.buf,i,o;o=n[r.pos++];i=(o&112)>>4;if(o<128)return h(e,i,t);o=n[r.pos++];i|=(o&127)<<3;if(o<128)return h(e,i,t);o=n[r.pos++];i|=(o&127)<<10;if(o<128)return h(e,i,t);o=n[r.pos++];i|=(o&127)<<17;if(o<128)return h(e,i,t);o=n[r.pos++];i|=(o&127)<<24;if(o<128)return h(e,i,t);o=n[r.pos++];i|=(o&1)<<31;if(o<128)return h(e,i,t);throw new Error("Expected varint not more than 10 bytes")}function l(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function h(e,t,r){if(r){return t*4294967296+(e>>>0)}return(t>>>0)*4294967296+(e>>>0)}function p(e,t){var r,n;if(e>=0){r=e%4294967296|0;n=e/4294967296|0}else{r=~(-e%4294967296);n=~(-e/4294967296);if(r^4294967295){r=r+1|0}else{r=0;n=n+1|0}}if(e>=0x10000000000000000||e<-0x10000000000000000){throw new Error("Given varint doesn't fit into 10 bytes")}t.realloc(10);f(r,n,t);d(n,t)}function f(e,t,r){r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos++]=e&127|128;e>>>=7;r.buf[r.pos]=e&127}function d(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0);if(!e)return;t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e)return;t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e)return;t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e)return;t.buf[t.pos++]=e&127|((e>>>=7)?128:0);if(!e)return;t.buf[t.pos++]=e&127}function v(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function m(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function g(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function _(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function y(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function b(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function x(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function w(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function S(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function M(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function C(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function T(e,t,r){e[r]=t;e[r+1]=t>>>8;e[r+2]=t>>>16;e[r+3]=t>>>24}function E(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function O(e,t,r){var n="";var i=t;while(i<r){var o=e[i];var a=null;var s=o>239?4:o>223?3:o>191?2:1;if(i+s>r)break;var u,c,l;if(s===1){if(o<128){a=o}}else if(s===2){u=e[i+1];if((u&192)===128){a=(o&31)<<6|u&63;if(a<=127){a=null}}}else if(s===3){u=e[i+1];c=e[i+2];if((u&192)===128&&(c&192)===128){a=(o&15)<<12|(u&63)<<6|c&63;if(a<=2047||a>=55296&&a<=57343){a=null}}}else if(s===4){u=e[i+1];c=e[i+2];l=e[i+3];if((u&192)===128&&(c&192)===128&&(l&192)===128){a=(o&15)<<18|(u&63)<<12|(c&63)<<6|l&63;if(a<=65535||a>=1114112){a=null}}}if(a===null){a=65533;s=1}else if(a>65535){a-=65536;n+=String.fromCharCode(a>>>10&1023|55296);a=56320|a&1023}n+=String.fromCharCode(a);i+=s}return n}function P(e,t,r){return u.decode(e.subarray(t,r))}function A(e,t,r){for(var n=0,i,o;n<t.length;n++){i=t.charCodeAt(n);if(i>55295&&i<57344){if(o){if(i<56320){e[r++]=239;e[r++]=191;e[r++]=189;o=i;continue}else{i=o-55296<<10|i-56320|65536;o=null}}else{if(i>56319||n+1===t.length){e[r++]=239;e[r++]=191;e[r++]=189}else{o=i}continue}}else if(o){e[r++]=239;e[r++]=191;e[r++]=189;o=null}if(i<128){e[r++]=i}else{if(i<2048){e[r++]=i>>6|192}else{if(i<65536){e[r++]=i>>12|224}else{e[r++]=i>>18|240;e[r++]=i>>12&63|128}e[r++]=i>>6&63|128}e[r++]=i&63|128}}return r}},{ieee754:41}],41:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a;var s=i*8-n-1;var u=(1<<s)-1;var c=u>>1;var l=-7;var h=r?i-1:0;var p=r?-1:1;var f=e[t+h];h+=p;o=f&(1<<-l)-1;f>>=-l;l+=s;for(;l>0;o=o*256+e[t+h],h+=p,l-=8){}a=o&(1<<-l)-1;o>>=-l;l+=n;for(;l>0;a=a*256+e[t+h],h+=p,l-=8){}if(o===0){o=1-c}else if(o===u){return a?NaN:(f?-1:1)*Infinity}else{a=a+Math.pow(2,n);o=o-c}return(f?-1:1)*a*Math.pow(2,o-n)};r.write=function(e,t,r,n,i,o){var a,s,u;var c=o*8-i-1;var l=(1<<c)-1;var h=l>>1;var p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var f=n?0:o-1;var d=n?1:-1;var v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;a=l}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-a))<1){a--;u*=2}if(a+h>=1){t+=p/u}else{t+=p*Math.pow(2,1-h)}if(t*u>=2){a++;u/=2}if(a+h>=l){s=0;a=l}else if(a+h>=1){s=(t*u-1)*Math.pow(2,i);a=a+h}else{s=t*Math.pow(2,h-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+f]=s&255,f+=d,s/=256,i-=8){}a=a<<i|s;c+=i;for(;c>0;e[r+f]=a&255,f+=d,a/=256,c-=8){}e[r+f-d]|=v*128}},{}],42:[function(e,r,n){!function(e,t){"object"==typeof n&&"undefined"!=typeof r?r.exports=t():"function"==typeof o&&o.amd?o(t):(e=e||self).RBush=t()}(this,function(){"use strict";function s(e,t,r,n,i){!function e(t,r,n,i,o){for(;i>n;){if(i-n>600){var a=i-n+1,s=r-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1),h=Math.max(n,Math.floor(r-s*c/a+l)),p=Math.min(i,Math.floor(r+(a-s)*c/a+l));e(t,r,h,p,o)}var f=t[r],d=n,v=i;for(m(t,n,r),o(t[i],f)>0&&m(t,n,i);d<v;){for(m(t,d,v),d++,v--;o(t[d],f)<0;)d++;for(;o(t[v],f)>0;)v--}0===o(t[n],f)?m(t,n,v):m(t,++v,i),v<=r&&(n=v+1),r<=v&&(i=v-1)}}(e,t,r||0,n||e.length-1,i||o)}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function o(e,t){return e<t?-1:e>t?1:0}var e=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function f(e,t){g(e,0,e.children.length,t,e)}function g(e,t,r,n,i){i||(i=v(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<r;o++){var a=e.children[o];p(i,e.leaf?n(a):a)}return i}function p(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function a(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function _(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function c(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function v(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,t,r,n,i){for(var o=[t,r];o.length;)if(!((r=o.pop())-(t=o.pop())<=n)){var a=t+Math.ceil((r-t)/n/2)*n;s(e,a,t,r,i),o.push(t,a,a,r)}}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(e){var t=this.data,r=[];if(!c(e,t))return r;for(var n=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?n(a):a;c(e,s)&&(t.leaf?r.push(a):h(e,s)?this._all(a,r):i.push(a))}t=i.pop()}return r},e.prototype.collides=function(e){var t=this.data;if(!c(e,t))return!1;for(var r=[];t;){for(var n=0;n<t.children.length;n++){var i=t.children[n],o=t.leaf?this.toBBox(i):i;if(c(e,o)){if(t.leaf||h(e,o))return!0;r.push(i)}}t=r.pop()}return!1},e.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},e.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},e.prototype.clear=function(){return this.data=v([]),this},e.prototype.remove=function(e,t){if(!e)return this;for(var r,n,i,o=this.data,a=this.toBBox(e),s=[],u=[];o||s.length;){if(o||(o=s.pop(),n=s[s.length-1],r=u.pop(),i=!0),o.leaf){var c=l(e,o.children,t);if(-1!==c)return o.children.splice(c,1),s.push(o),this._condense(s),this}i||o.leaf||!h(o,a)?n?(r++,o=n.children[r],i=!1):o=null:(s.push(o),u.push(r),r=0,n=o,o=o.children[0])}return this},e.prototype.toBBox=function(e){return e},e.prototype.compareMinX=function(e,t){return e.minX-t.minX},e.prototype.compareMinY=function(e,t){return e.minY-t.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(e){return this.data=e,this},e.prototype._all=function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},e.prototype._build=function(e,t,r,n){var i,o=r-t+1,a=this._maxEntries;if(o<=a)return f(i=v(e.slice(t,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(i=v([])).leaf=!1,i.height=n;var s=Math.ceil(o/a),u=s*Math.ceil(Math.sqrt(a));y(e,t,r,u,this.compareMinX);for(var c=t;c<=r;c+=u){var l=Math.min(c+u-1,r);y(e,c,l,s,this.compareMinY);for(var h=c;h<=l;h+=s){var p=Math.min(h+s-1,l);i.children.push(this._build(e,h,p,n-1))}}return f(i,this.toBBox),i},e.prototype._chooseSubtree=function(e,t,r,n){for(;n.push(t),!t.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var u=t.children[s],c=_(u),l=(h=e,p=u,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-c);l<o?(o=l,i=c<i?c:i,a=u):l===o&&c<i&&(i=c,a=u)}t=a||t.children[0]}var h,p;return t},e.prototype._insert=function(e,t,r){var n=r?e:this.toBBox(e),i=[],o=this._chooseSubtree(n,this.data,t,i);for(o.children.push(e),p(o,n);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)},e.prototype._split=function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),a=v(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,f(r,this.toBBox),f(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)},e.prototype._splitRoot=function(e,t){this.data=v([e,t]),this.data.height=e.height+1,this.data.leaf=!1,f(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(e,t,r){for(var n,i,o,a,s,u,c,l=1/0,h=1/0,p=t;p<=r-t;p++){var f=g(e,0,p,this.toBBox),d=g(e,p,r,this.toBBox),v=(i=f,o=d,a=void 0,s=void 0,u=void 0,c=void 0,a=Math.max(i.minX,o.minX),s=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),c=Math.min(i.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,c-s)),m=_(f)+_(d);v<l?(l=v,n=p,h=m<h?m:h):v===l&&m<h&&(h=m,n=p)}return n||r-t},e.prototype._chooseSplitAxis=function(e,t,r){var n=e.leaf?this.compareMinX:a,i=e.leaf?this.compareMinY:u;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},e.prototype._allDistMargin=function(e,t,r,n){e.children.sort(n);for(var i=this.toBBox,o=g(e,0,t,i),a=g(e,r-t,r,i),s=d(o)+d(a),u=t;u<r-t;u++){var c=e.children[u];p(o,e.leaf?i(c):c),s+=d(o)}for(var l=r-t-1;l>=t;l--){var h=e.children[l];p(a,e.leaf?i(h):h),s+=d(a)}return s},e.prototype._adjustParentBBoxes=function(e,t,r){for(var n=r;n>=0;n--)p(t[n],e)},e.prototype._condense=function(e){for(var t=e.length-1,r=void 0;t>=0;t--)0===e[t].children.length?t>0?(r=e[t-1].children).splice(r.indexOf(e[t]),1):this.clear():f(e[t],this.toBBox)},e})},{}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./internal/Observable");r.Observable=n.Observable;var i=e("./internal/observable/ConnectableObservable");r.ConnectableObservable=i.ConnectableObservable;var o=e("./internal/operators/groupBy");r.GroupedObservable=o.GroupedObservable;var a=e("./internal/symbol/observable");r.observable=a.observable;var s=e("./internal/Subject");r.Subject=s.Subject;var u=e("./internal/BehaviorSubject");r.BehaviorSubject=u.BehaviorSubject;var c=e("./internal/ReplaySubject");r.ReplaySubject=c.ReplaySubject;var l=e("./internal/AsyncSubject");r.AsyncSubject=l.AsyncSubject;var h=e("./internal/scheduler/asap");r.asapScheduler=h.asap;var p=e("./internal/scheduler/async");r.asyncScheduler=p.async;var f=e("./internal/scheduler/queue");r.queueScheduler=f.queue;var d=e("./internal/scheduler/animationFrame");r.animationFrameScheduler=d.animationFrame;var v=e("./internal/scheduler/VirtualTimeScheduler");r.VirtualTimeScheduler=v.VirtualTimeScheduler;r.VirtualAction=v.VirtualAction;var m=e("./internal/Scheduler");r.Scheduler=m.Scheduler;var g=e("./internal/Subscription");r.Subscription=g.Subscription;var _=e("./internal/Subscriber");r.Subscriber=_.Subscriber;var y=e("./internal/Notification");r.Notification=y.Notification;r.NotificationKind=y.NotificationKind;var b=e("./internal/util/pipe");r.pipe=b.pipe;var x=e("./internal/util/noop");r.noop=x.noop;var w=e("./internal/util/identity");r.identity=w.identity;var S=e("./internal/util/isObservable");r.isObservable=S.isObservable;var M=e("./internal/util/ArgumentOutOfRangeError");r.ArgumentOutOfRangeError=M.ArgumentOutOfRangeError;var C=e("./internal/util/EmptyError");r.EmptyError=C.EmptyError;var T=e("./internal/util/ObjectUnsubscribedError");r.ObjectUnsubscribedError=T.ObjectUnsubscribedError;var E=e("./internal/util/UnsubscriptionError");r.UnsubscriptionError=E.UnsubscriptionError;var O=e("./internal/util/TimeoutError");r.TimeoutError=O.TimeoutError;var P=e("./internal/observable/bindCallback");r.bindCallback=P.bindCallback;var A=e("./internal/observable/bindNodeCallback");r.bindNodeCallback=A.bindNodeCallback;var j=e("./internal/observable/combineLatest");r.combineLatest=j.combineLatest;var R=e("./internal/observable/concat");r.concat=R.concat;var k=e("./internal/observable/defer");r.defer=k.defer;var L=e("./internal/observable/empty");r.empty=L.empty;var N=e("./internal/observable/forkJoin");r.forkJoin=N.forkJoin;var I=e("./internal/observable/from");r.from=I.from;var D=e("./internal/observable/fromEvent");r.fromEvent=D.fromEvent;var B=e("./internal/observable/fromEventPattern");r.fromEventPattern=B.fromEventPattern;var F=e("./internal/observable/generate");r.generate=F.generate;var z=e("./internal/observable/iif");r.iif=z.iif;var $=e("./internal/observable/interval");r.interval=$.interval;var G=e("./internal/observable/merge");r.merge=G.merge;var V=e("./internal/observable/never");r.never=V.never;var H=e("./internal/observable/of");r.of=H.of;var U=e("./internal/observable/onErrorResumeNext");r.onErrorResumeNext=U.onErrorResumeNext;var q=e("./internal/observable/pairs");r.pairs=q.pairs;var W=e("./internal/observable/partition");r.partition=W.partition;var X=e("./internal/observable/race");r.race=X.race;var Y=e("./internal/observable/range");r.range=Y.range;var K=e("./internal/observable/throwError");r.throwError=K.throwError;var Z=e("./internal/observable/timer");r.timer=Z.timer;var J=e("./internal/observable/using");r.using=J.using;var Q=e("./internal/observable/zip");r.zip=Q.zip;var ee=e("./internal/scheduled/scheduled");r.scheduled=ee.scheduled;var te=e("./internal/observable/empty");r.EMPTY=te.EMPTY;var re=e("./internal/observable/never");r.NEVER=re.NEVER;var ne=e("./internal/config");r.config=ne.config},{"./internal/AsyncSubject":44,"./internal/BehaviorSubject":45,"./internal/Notification":47,"./internal/Observable":48,"./internal/ReplaySubject":51,"./internal/Scheduler":52,"./internal/Subject":53,"./internal/Subscriber":55,"./internal/Subscription":56,"./internal/config":57,"./internal/observable/ConnectableObservable":58,"./internal/observable/bindCallback":60,"./internal/observable/bindNodeCallback":61,"./internal/observable/combineLatest":62,"./internal/observable/concat":63,"./internal/observable/defer":64,"./internal/observable/empty":65,"./internal/observable/forkJoin":66,"./internal/observable/from":67,"./internal/observable/fromEvent":69,"./internal/observable/fromEventPattern":70,"./internal/observable/generate":71,"./internal/observable/iif":72,"./internal/observable/interval":73,"./internal/observable/merge":74,"./internal/observable/never":75,"./internal/observable/of":76,"./internal/observable/onErrorResumeNext":77,"./internal/observable/pairs":78,"./internal/observable/partition":79,"./internal/observable/race":80,"./internal/observable/range":81,"./internal/observable/throwError":82,"./internal/observable/timer":83,"./internal/observable/using":84,"./internal/observable/zip":85,"./internal/operators/groupBy":121,"./internal/scheduled/scheduled":193,"./internal/scheduler/VirtualTimeScheduler":203,"./internal/scheduler/animationFrame":204,"./internal/scheduler/asap":205,"./internal/scheduler/async":206,"./internal/scheduler/queue":207,"./internal/symbol/observable":209,"./internal/util/ArgumentOutOfRangeError":211,"./internal/util/EmptyError":212,"./internal/util/ObjectUnsubscribedError":214,"./internal/util/TimeoutError":215,"./internal/util/UnsubscriptionError":216,"./internal/util/identity":219,"./internal/util/isObservable":228,"./internal/util/noop":231,"./internal/util/pipe":233}],44:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./Subject");var o=e("./Subscription");var a=function(t){n(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.value=null;e.hasNext=false;e.hasCompleted=false;return e}e.prototype._subscribe=function(e){if(this.hasError){e.error(this.thrownError);return o.Subscription.EMPTY}else if(this.hasCompleted&&this.hasNext){e.next(this.value);e.complete();return o.Subscription.EMPTY}return t.prototype._subscribe.call(this,e)};e.prototype.next=function(e){if(!this.hasCompleted){this.value=e;this.hasNext=true}};e.prototype.error=function(e){if(!this.hasCompleted){t.prototype.error.call(this,e)}};e.prototype.complete=function(){this.hasCompleted=true;if(this.hasNext){t.prototype.next.call(this,this.value)}t.prototype.complete.call(this)};return e}(i.Subject);r.AsyncSubject=a},{"./Subject":53,"./Subscription":56}],45:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./Subject");var o=e("./util/ObjectUnsubscribedError");var a=function(r){n(e,r);function e(e){var t=r.call(this)||this;t._value=e;return t}Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:true,configurable:true});e.prototype._subscribe=function(e){var t=r.prototype._subscribe.call(this,e);if(t&&!t.closed){e.next(this._value)}return t};e.prototype.getValue=function(){if(this.hasError){throw this.thrownError}else if(this.closed){throw new o.ObjectUnsubscribedError}else{return this._value}};e.prototype.next=function(e){r.prototype.next.call(this,this._value=e)};return e}(i.Subject);r.BehaviorSubject=a},{"./Subject":53,"./util/ObjectUnsubscribedError":214}],46:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./Subscriber");var o=function(i){n(e,i);function e(e,t,r){var n=i.call(this)||this;n.parent=e;n.outerValue=t;n.outerIndex=r;n.index=0;return n}e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)};e.prototype._error=function(e){this.parent.notifyError(e,this);this.unsubscribe()};e.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return e}(i.Subscriber);r.InnerSubscriber=o},{"./Subscriber":55}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./observable/empty");var i=e("./observable/of");var o=e("./observable/throwError");var a;(function(e){e["NEXT"]="N";e["ERROR"]="E";e["COMPLETE"]="C"})(a=r.NotificationKind||(r.NotificationKind={}));var s=function(){function t(e,t,r){this.kind=e;this.value=t;this.error=r;this.hasValue=e==="N"}t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}};t.prototype.do=function(e,t,r){var n=this.kind;switch(n){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}};t.prototype.accept=function(e,t,r){if(e&&typeof e.next==="function"){return this.observe(e)}else{return this.do(e,t,r)}};t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return i.of(this.value);case"E":return o.throwError(this.error);case"C":return n.empty()}throw new Error("unexpected notification kind value")};t.createNext=function(e){if(typeof e!=="undefined"){return new t("N",e)}return t.undefinedValueNotification};t.createError=function(e){return new t("E",undefined,e)};t.createComplete=function(){return t.completeNotification};t.completeNotification=new t("C");t.undefinedValueNotification=new t("N",undefined);return t}();r.Notification=s},{"./observable/empty":65,"./observable/of":76,"./observable/throwError":82}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./util/canReportError");var o=e("./util/toSubscriber");var i=e("./symbol/observable");var a=e("./util/pipe");var s=e("./config");var u=function(){function r(e){this._isScalar=false;if(e){this._subscribe=e}}r.prototype.lift=function(e){var t=new r;t.source=this;t.operator=e;return t};r.prototype.subscribe=function(e,t,r){var n=this.operator;var i=o.toSubscriber(e,t,r);if(n){i.add(n.call(i,this.source))}else{i.add(this.source||s.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i))}if(s.config.useDeprecatedSynchronousErrorHandling){if(i.syncErrorThrowable){i.syncErrorThrowable=false;if(i.syncErrorThrown){throw i.syncErrorValue}}}return i};r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){if(s.config.useDeprecatedSynchronousErrorHandling){t.syncErrorThrown=true;t.syncErrorValue=e}if(n.canReportError(t)){t.error(e)}else{console.warn(e)}}};r.prototype.forEach=function(n,e){var i=this;e=c(e);return new e(function(e,t){var r;r=i.subscribe(function(e){try{n(e)}catch(e){t(e);if(r){r.unsubscribe()}}},t,e)})};r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)};r.prototype[i.observable]=function(){return this};r.prototype.pipe=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===0){return this}return a.pipeFromArray(e)(this)};r.prototype.toPromise=function(e){var n=this;e=c(e);return new e(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})};r.create=function(e){return new r(e)};return r}();r.Observable=u;function c(e){if(!e){e=s.config.Promise||Promise}if(!e){throw new Error("no Promise impl found")}return e}},{"./config":57,"./symbol/observable":209,"./util/canReportError":217,"./util/pipe":233,"./util/toSubscriber":240}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./config");var i=e("./util/hostReportError");r.empty={closed:true,next:function(e){},error:function(e){if(n.config.useDeprecatedSynchronousErrorHandling){throw e}else{i.hostReportError(e)}},complete:function(){}}},{"./config":57,"./util/hostReportError":218}],50:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./Subscriber");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)};t.prototype.notifyError=function(e,t){this.destination.error(e)};t.prototype.notifyComplete=function(e){this.destination.complete()};return t}(i.Subscriber);r.OuterSubscriber=o},{"./Subscriber":55}],51:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./Subject");var o=e("./scheduler/queue");var s=e("./Subscription");var u=e("./operators/observeOn");var c=e("./util/ObjectUnsubscribedError");var l=e("./SubjectSubscription");var a=function(i){n(e,i);function e(e,t,r){if(e===void 0){e=Number.POSITIVE_INFINITY}if(t===void 0){t=Number.POSITIVE_INFINITY}var n=i.call(this)||this;n.scheduler=r;n._events=[];n._infiniteTimeWindow=false;n._bufferSize=e<1?1:e;n._windowTime=t<1?1:t;if(t===Number.POSITIVE_INFINITY){n._infiniteTimeWindow=true;n.next=n.nextInfiniteTimeWindow}else{n.next=n.nextTimeWindow}return n}e.prototype.nextInfiniteTimeWindow=function(e){var t=this._events;t.push(e);if(t.length>this._bufferSize){t.shift()}i.prototype.next.call(this,e)};e.prototype.nextTimeWindow=function(e){this._events.push(new h(this._getNow(),e));this._trimBufferThenGetEvents();i.prototype.next.call(this,e)};e.prototype._subscribe=function(e){var t=this._infiniteTimeWindow;var r=t?this._events:this._trimBufferThenGetEvents();var n=this.scheduler;var i=r.length;var o;if(this.closed){throw new c.ObjectUnsubscribedError}else if(this.isStopped||this.hasError){o=s.Subscription.EMPTY}else{this.observers.push(e);o=new l.SubjectSubscription(this,e)}if(n){e.add(e=new u.ObserveOnSubscriber(e,n))}if(t){for(var a=0;a<i&&!e.closed;a++){e.next(r[a])}}else{for(var a=0;a<i&&!e.closed;a++){e.next(r[a].value)}}if(this.hasError){e.error(this.thrownError)}else if(this.isStopped){e.complete()}return o};e.prototype._getNow=function(){return(this.scheduler||o.queue).now()};e.prototype._trimBufferThenGetEvents=function(){var e=this._getNow();var t=this._bufferSize;var r=this._windowTime;var n=this._events;var i=n.length;var o=0;while(o<i){if(e-n[o].time<r){break}o++}if(i>t){o=Math.max(o,i-t)}if(o>0){n.splice(0,o)}return n};return e}(i.Subject);r.ReplaySubject=a;var h=function(){function e(e,t){this.time=e;this.value=t}return e}()},{"./Subject":53,"./SubjectSubscription":54,"./Subscription":56,"./operators/observeOn":136,"./scheduler/queue":207,"./util/ObjectUnsubscribedError":214}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function r(e,t){if(t===void 0){t=r.now}this.SchedulerAction=e;this.now=t}r.prototype.schedule=function(e,t,r){if(t===void 0){t=0}return new this.SchedulerAction(this,e).schedule(r,t)};r.now=function(){return Date.now()};return r}();r.Scheduler=n},{}],53:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("./Observable");var o=e("./Subscriber");var a=e("./Subscription");var s=e("./util/ObjectUnsubscribedError");var u=e("./SubjectSubscription");var c=e("../internal/symbol/rxSubscriber");var l=function(r){i(e,r);function e(e){var t=r.call(this,e)||this;t.destination=e;return t}return e}(o.Subscriber);r.SubjectSubscriber=l;var h=function(t){i(e,t);function e(){var e=t.call(this)||this;e.observers=[];e.closed=false;e.isStopped=false;e.hasError=false;e.thrownError=null;return e}e.prototype[c.rxSubscriber]=function(){return new l(this)};e.prototype.lift=function(e){var t=new p(this,this);t.operator=e;return t};e.prototype.next=function(e){if(this.closed){throw new s.ObjectUnsubscribedError}if(!this.isStopped){var t=this.observers;var r=t.length;var n=t.slice();for(var i=0;i<r;i++){n[i].next(e)}}};e.prototype.error=function(e){if(this.closed){throw new s.ObjectUnsubscribedError}this.hasError=true;this.thrownError=e;this.isStopped=true;var t=this.observers;var r=t.length;var n=t.slice();for(var i=0;i<r;i++){n[i].error(e)}this.observers.length=0};e.prototype.complete=function(){if(this.closed){throw new s.ObjectUnsubscribedError}this.isStopped=true;var e=this.observers;var t=e.length;var r=e.slice();for(var n=0;n<t;n++){r[n].complete()}this.observers.length=0};e.prototype.unsubscribe=function(){this.isStopped=true;this.closed=true;this.observers=null};e.prototype._trySubscribe=function(e){if(this.closed){throw new s.ObjectUnsubscribedError}else{return t.prototype._trySubscribe.call(this,e)}};e.prototype._subscribe=function(e){if(this.closed){throw new s.ObjectUnsubscribedError}else if(this.hasError){e.error(this.thrownError);return a.Subscription.EMPTY}else if(this.isStopped){e.complete();return a.Subscription.EMPTY}else{this.observers.push(e);return new u.SubjectSubscription(this,e)}};e.prototype.asObservable=function(){var e=new n.Observable;e.source=this;return e};e.create=function(e,t){return new p(e,t)};return e}(n.Observable);r.Subject=h;var p=function(n){i(e,n);function e(e,t){var r=n.call(this)||this;r.destination=e;r.source=t;return r}e.prototype.next=function(e){var t=this.destination;if(t&&t.next){t.next(e)}};e.prototype.error=function(e){var t=this.destination;if(t&&t.error){this.destination.error(e)}};e.prototype.complete=function(){var e=this.destination;if(e&&e.complete){this.destination.complete()}};e.prototype._subscribe=function(e){var t=this.source;if(t){return this.source.subscribe(e)}else{return a.Subscription.EMPTY}};return e}(h);r.AnonymousSubject=p},{"../internal/symbol/rxSubscriber":210,"./Observable":48,"./SubjectSubscription":54,"./Subscriber":55,"./Subscription":56,"./util/ObjectUnsubscribedError":214}],54:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("./Subscription");var o=function(n){i(e,n);function e(e,t){var r=n.call(this)||this;r.subject=e;r.subscriber=t;r.closed=false;return r}e.prototype.unsubscribe=function(){if(this.closed){return}this.closed=true;var e=this.subject;var t=e.observers;this.subject=null;if(!t||t.length===0||e.isStopped||e.closed){return}var r=t.indexOf(this.subscriber);if(r!==-1){t.splice(r,1)}};return e}(n.Subscription);r.SubjectSubscription=o},{"./Subscription":56}],55:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var u=e("./util/isFunction");var c=e("./Observer");var i=e("./Subscription");var a=e("../internal/symbol/rxSubscriber");var o=e("./config");var l=e("./util/hostReportError");var s=function(i){n(o,i);function o(e,t,r){var n=i.call(this)||this;n.syncErrorValue=null;n.syncErrorThrown=false;n.syncErrorThrowable=false;n.isStopped=false;switch(arguments.length){case 0:n.destination=c.empty;break;case 1:if(!e){n.destination=c.empty;break}if(typeof e==="object"){if(e instanceof o){n.syncErrorThrowable=e.syncErrorThrowable;n.destination=e;e.add(n)}else{n.syncErrorThrowable=true;n.destination=new h(n,e)}break}default:n.syncErrorThrowable=true;n.destination=new h(n,e,t,r);break}return n}o.prototype[a.rxSubscriber]=function(){return this};o.create=function(e,t,r){var n=new o(e,t,r);n.syncErrorThrowable=false;return n};o.prototype.next=function(e){if(!this.isStopped){this._next(e)}};o.prototype.error=function(e){if(!this.isStopped){this.isStopped=true;this._error(e)}};o.prototype.complete=function(){if(!this.isStopped){this.isStopped=true;this._complete()}};o.prototype.unsubscribe=function(){if(this.closed){return}this.isStopped=true;i.prototype.unsubscribe.call(this)};o.prototype._next=function(e){this.destination.next(e)};o.prototype._error=function(e){this.destination.error(e);this.unsubscribe()};o.prototype._complete=function(){this.destination.complete();this.unsubscribe()};o.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;this._parentOrParents=null;this.unsubscribe();this.closed=false;this.isStopped=false;this._parentOrParents=e;return this};return o}(i.Subscription);r.Subscriber=s;var h=function(s){n(e,s);function e(e,t,r,n){var i=s.call(this)||this;i._parentSubscriber=e;var o;var a=i;if(u.isFunction(t)){o=t}else if(t){o=t.next;r=t.error;n=t.complete;if(t!==c.empty){a=Object.create(t);if(u.isFunction(a.unsubscribe)){i.add(a.unsubscribe.bind(a))}a.unsubscribe=i.unsubscribe.bind(i)}}i._context=a;i._next=o;i._error=r;i._complete=n;return i}e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;if(!o.config.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable){this.__tryOrUnsub(this._next,e)}else if(this.__tryOrSetError(t,this._next,e)){this.unsubscribe()}}};e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;var r=o.config.useDeprecatedSynchronousErrorHandling;if(this._error){if(!r||!t.syncErrorThrowable){this.__tryOrUnsub(this._error,e);this.unsubscribe()}else{this.__tryOrSetError(t,this._error,e);this.unsubscribe()}}else if(!t.syncErrorThrowable){this.unsubscribe();if(r){throw e}l.hostReportError(e)}else{if(r){t.syncErrorValue=e;t.syncErrorThrown=true}else{l.hostReportError(e)}this.unsubscribe()}}};e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};if(!o.config.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable){this.__tryOrUnsub(r);this.unsubscribe()}else{this.__tryOrSetError(t,r);this.unsubscribe()}}else{this.unsubscribe()}}};e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){this.unsubscribe();if(o.config.useDeprecatedSynchronousErrorHandling){throw e}else{l.hostReportError(e)}}};e.prototype.__tryOrSetError=function(t,e,r){if(!o.config.useDeprecatedSynchronousErrorHandling){throw new Error("bad call")}try{e.call(this._context,r)}catch(e){if(o.config.useDeprecatedSynchronousErrorHandling){t.syncErrorValue=e;t.syncErrorThrown=true;return true}else{l.hostReportError(e);return true}}return false};e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null;this._parentSubscriber=null;e.unsubscribe()};return e}(s);r.SafeSubscriber=h},{"../internal/symbol/rxSubscriber":210,"./Observer":49,"./Subscription":56,"./config":57,"./util/hostReportError":218,"./util/isFunction":223}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var l=e("./util/isArray");var h=e("./util/isObject");var p=e("./util/isFunction");var f=e("./util/UnsubscriptionError");var n=function(){function c(e){this.closed=false;this._parentOrParents=null;this._subscriptions=null;if(e){this._unsubscribe=e}}c.prototype.unsubscribe=function(){var t;if(this.closed){return}var e=this,r=e._parentOrParents,n=e._unsubscribe,i=e._subscriptions;this.closed=true;this._parentOrParents=null;this._subscriptions=null;if(r instanceof c){r.remove(this)}else if(r!==null){for(var o=0;o<r.length;++o){var a=r[o];a.remove(this)}}if(p.isFunction(n)){try{n.call(this)}catch(e){t=e instanceof f.UnsubscriptionError?d(e.errors):[e]}}if(l.isArray(i)){var o=-1;var s=i.length;while(++o<s){var u=i[o];if(h.isObject(u)){try{u.unsubscribe()}catch(e){t=t||[];if(e instanceof f.UnsubscriptionError){t=t.concat(d(e.errors))}else{t.push(e)}}}}}if(t){throw new f.UnsubscriptionError(t)}};c.prototype.add=function(e){var t=e;if(!e){return c.EMPTY}switch(typeof e){case"function":t=new c(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!=="function"){return t}else if(this.closed){t.unsubscribe();return t}else if(!(t instanceof c)){var r=t;t=new c;t._subscriptions=[r]}break;default:{throw new Error("unrecognized teardown "+e+" added to Subscription.")}}var n=t._parentOrParents;if(n===null){t._parentOrParents=this}else if(n instanceof c){if(n===this){return t}t._parentOrParents=[n,this]}else if(n.indexOf(this)===-1){n.push(this)}else{return t}var i=this._subscriptions;if(i===null){this._subscriptions=[t]}else{i.push(t)}return t};c.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);if(r!==-1){t.splice(r,1)}}};c.EMPTY=function(e){e.closed=true;return e}(new c);return c}();r.Subscription=n;function d(e){return e.reduce(function(e,t){return e.concat(t instanceof f.UnsubscriptionError?t.errors:t)},[])}},{"./util/UnsubscriptionError":216,"./util/isArray":220,"./util/isFunction":223,"./util/isObject":227}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=false;r.config={Promise:undefined,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else if(n){console.log("RxJS: Back to a better error behavior. Thank you. <3")}n=e},get useDeprecatedSynchronousErrorHandling(){return n}}},{}],58:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subject");var o=e("../Observable");var a=e("../Subscriber");var s=e("../Subscription");var u=e("../operators/refCount");var c=function(n){i(e,n);function e(e,t){var r=n.call(this)||this;r.source=e;r.subjectFactory=t;r._refCount=0;r._isComplete=false;return r}e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)};e.prototype.getSubject=function(){var e=this._subject;if(!e||e.isStopped){this._subject=this.subjectFactory()}return this._subject};e.prototype.connect=function(){var e=this._connection;if(!e){this._isComplete=false;e=this._connection=new s.Subscription;e.add(this.source.subscribe(new l(this.getSubject(),this)));if(e.closed){this._connection=null;e=s.Subscription.EMPTY}}return e};e.prototype.refCount=function(){return u.refCount()(this)};return e}(o.Observable);r.ConnectableObservable=c;r.connectableObservableDescriptor=function(){var e=c.prototype;return{operator:{value:null},_refCount:{value:0,writable:true},_subject:{value:null,writable:true},_connection:{value:null,writable:true},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:true},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}();var l=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.connectable=t;return r}e.prototype._error=function(e){this._unsubscribe();n.prototype._error.call(this,e)};e.prototype._complete=function(){this.connectable._isComplete=true;this._unsubscribe();n.prototype._complete.call(this)};e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0;e._subject=null;e._connection=null;if(t){t.unsubscribe()}}};return e}(n.SubjectSubscriber);var h=function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new p(e,r);var i=t.subscribe(n);if(!n.closed){n.connection=r.connect()}return i};return e}();var p=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.connectable=t;return r}e.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var t=e._refCount;if(t<=0){this.connection=null;return}e._refCount=t-1;if(t>1){this.connection=null;return}var r=this.connection;var n=e._connection;this.connection=null;if(n&&(!r||n===r)){n.unsubscribe()}};return e}(a.Subscriber)},{"../Observable":48,"../Subject":53,"../Subscriber":55,"../Subscription":56,"../operators/refCount":147}],59:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Observable");var a=e("../scheduler/asap");var s=e("../util/isNumeric");var o=function(i){n(o,i);function o(e,t,r){if(t===void 0){t=0}if(r===void 0){r=a.asap}var n=i.call(this)||this;n.source=e;n.delayTime=t;n.scheduler=r;if(!s.isNumeric(t)||t<0){n.delayTime=0}if(!r||typeof r.schedule!=="function"){n.scheduler=a.asap}return n}o.create=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=a.asap}return new o(e,t,r)};o.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))};o.prototype._subscribe=function(e){var t=this.delayTime;var r=this.source;var n=this.scheduler;return n.schedule(o.dispatch,t,{source:r,subscriber:e})};return o}(i.Observable);r.SubscribeOnObservable=o},{"../Observable":48,"../scheduler/asap":205,"../util/isNumeric":226}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var c=e("../Observable");var h=e("../AsyncSubject");var n=e("../operators/map");var l=e("../util/canReportError");var i=e("../util/isArray");var o=e("../util/isScheduler");function a(s,r,u){if(r){if(o.isScheduler(r)){u=r}else{return function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return a(s,u).apply(void 0,e).pipe(n.map(function(e){return i.isArray(e)?r.apply(void 0,e):r(e)}))}}}return function(){var n=[];for(var e=0;e<arguments.length;e++){n[e]=arguments[e]}var i=this;var o;var a={context:i,subject:o,callbackFunc:s,scheduler:u};return new c.Observable(function(e){if(!u){if(!o){o=new h.AsyncSubject;var t=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}o.next(e.length<=1?e[0]:e);o.complete()};try{s.apply(i,n.concat([t]))}catch(e){if(l.canReportError(o)){o.error(e)}else{console.warn(e)}}}return o.subscribe(e)}else{var r={args:n,subscriber:e,params:a};return u.schedule(p,0,r)}})}}r.bindCallback=a;function p(e){var n=this;var t=this;var r=e.args,i=e.subscriber,o=e.params;var a=o.callbackFunc,s=o.context,u=o.scheduler;var c=o.subject;if(!c){c=o.subject=new h.AsyncSubject;var l=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e.length<=1?e[0]:e;n.add(u.schedule(f,0,{value:r,subject:c}))};try{a.apply(s,r.concat([l]))}catch(e){c.error(e)}}this.add(c.subscribe(i))}function f(e){var t=e.value,r=e.subject;r.next(t);r.complete()}function s(e){var t=e.err,r=e.subject;r.error(t)}},{"../AsyncSubject":44,"../Observable":48,"../operators/map":125,"../util/canReportError":217,"../util/isArray":220,"../util/isScheduler":230}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var l=e("../AsyncSubject");var i=e("../operators/map");var u=e("../util/canReportError");var o=e("../util/isScheduler");var c=e("../util/isArray");function h(a,r,s){if(r){if(o.isScheduler(r)){s=r}else{return function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return h(a,s).apply(void 0,e).pipe(i.map(function(e){return c.isArray(e)?r.apply(void 0,e):r(e)}))}}}return function(){var i=[];for(var e=0;e<arguments.length;e++){i[e]=arguments[e]}var o={subject:undefined,args:i,callbackFunc:a,scheduler:s,context:this};return new n.Observable(function(e){var t=o.context;var n=o.subject;if(!s){if(!n){n=o.subject=new l.AsyncSubject;var r=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e.shift();if(r){n.error(r);return}n.next(e.length<=1?e[0]:e);n.complete()};try{a.apply(t,i.concat([r]))}catch(e){if(u.canReportError(n)){n.error(e)}else{console.warn(e)}}}return n.subscribe(e)}else{return s.schedule(p,0,{params:o,subscriber:e,context:t})}})}}r.bindNodeCallback=h;function p(e){var i=this;var t=e.params,r=e.subscriber,n=e.context;var o=t.callbackFunc,a=t.args,s=t.scheduler;var u=t.subject;if(!u){u=t.subject=new l.AsyncSubject;var c=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e.shift();if(r){i.add(s.schedule(d,0,{err:r,subject:u}))}else{var n=e.length<=1?e[0]:e;i.add(s.schedule(f,0,{value:n,subject:u}))}};try{o.apply(n,a.concat([c]))}catch(e){this.add(s.schedule(d,0,{err:e,subject:u}))}}this.add(u.subscribe(r))}function f(e){var t=e.value,r=e.subject;r.next(t);r.complete()}function d(e){var t=e.err,r=e.subject;r.error(t)}},{"../AsyncSubject":44,"../Observable":48,"../operators/map":125,"../util/canReportError":217,"../util/isArray":220,"../util/isScheduler":230}],62:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var o=e("../util/isScheduler");var a=e("../util/isArray");var n=e("../OuterSubscriber");var s=e("../util/subscribeToResult");var u=e("./fromArray");var c={};function l(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=null;var n=null;if(o.isScheduler(e[e.length-1])){n=e.pop()}if(typeof e[e.length-1]==="function"){r=e.pop()}if(e.length===1&&a.isArray(e[0])){e=e[0]}return u.fromArray(e,n).lift(new h(r))}r.combineLatest=l;var h=function(){function e(e){this.resultSelector=e}e.prototype.call=function(e,t){return t.subscribe(new p(e,this.resultSelector))};return e}();r.CombineLatestOperator=h;var p=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.resultSelector=t;r.active=0;r.values=[];r.observables=[];return r}e.prototype._next=function(e){this.values.push(c);this.observables.push(e)};e.prototype._complete=function(){var e=this.observables;var t=e.length;if(t===0){this.destination.complete()}else{this.active=t;this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(s.subscribeToResult(this,n,n,r))}}};e.prototype.notifyComplete=function(e){if((this.active-=1)===0){this.destination.complete()}};e.prototype.notifyNext=function(e,t,r,n,i){var o=this.values;var a=o[r];var s=!this.toRespond?0:a===c?--this.toRespond:this.toRespond;o[r]=t;if(s===0){if(this.resultSelector){this._tryResultSelector(o)}else{this.destination.next(o.slice())}}};e.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){this.destination.error(e);return}this.destination.next(t)};return e}(n.OuterSubscriber);r.CombineLatestSubscriber=p},{"../OuterSubscriber":50,"../util/isArray":220,"../util/isScheduler":230,"../util/subscribeToResult":239,"./fromArray":68}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./of");var i=e("../operators/concatAll");function o(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return i.concatAll()(n.of.apply(void 0,e))}r.concat=o},{"../operators/concatAll":97,"./of":76}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../Observable");var o=e("./from");var a=e("./empty");function n(n){return new i.Observable(function(t){var e;try{e=n()}catch(e){t.error(e);return undefined}var r=e?o.from(e):a.empty();return r.subscribe(t)})}r.defer=n},{"../Observable":48,"./empty":65,"./from":67}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");r.EMPTY=new n.Observable(function(e){return e.complete()});function i(e){return e?o(e):r.EMPTY}r.empty=i;function o(t){return new n.Observable(function(e){return t.schedule(function(){return e.complete()})})}},{"../Observable":48}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var o=e("../util/isArray");var a=e("../operators/map");var s=e("../util/isObject");var l=e("./from");function i(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===1){var r=e[0];if(o.isArray(r)){return u(r,null)}if(s.isObject(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return u(n.map(function(e){return r[e]}),n)}}if(typeof e[e.length-1]==="function"){var i=e.pop();e=e.length===1&&o.isArray(e[0])?e[0]:e;return u(e,null).pipe(a.map(function(e){return i.apply(void 0,e)}))}return u(e,null)}r.forkJoin=i;function u(u,c){return new n.Observable(function(n){var i=u.length;if(i===0){n.complete();return}var o=new Array(i);var a=0;var s=0;var e=function(t){var e=l.from(u[t]);var r=false;n.add(e.subscribe({next:function(e){if(!r){r=true;s++}o[t]=e},error:function(e){return n.error(e)},complete:function(){a++;if(a===i||!r){if(s===i){n.next(c?c.reduce(function(e,t,r){return e[t]=o[r],e},{}):o)}n.complete()}}}))};for(var t=0;t<i;t++){e(t)}})}},{"../Observable":48,"../operators/map":125,"../util/isArray":220,"../util/isObject":227,"./from":67}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var i=e("../util/subscribeTo");var o=e("../scheduled/scheduled");function a(e,t){if(!t){if(e instanceof n.Observable){return e}return new n.Observable(i.subscribeTo(e))}else{return o.scheduled(e,t)}}r.from=a},{"../Observable":48,"../scheduled/scheduled":193,"../util/subscribeTo":234}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var i=e("../util/subscribeToArray");var o=e("../scheduled/scheduleArray");function a(e,t){if(!t){return new n.Observable(i.subscribeToArray(e))}else{return o.scheduleArray(e,t)}}r.fromArray=a},{"../Observable":48,"../scheduled/scheduleArray":189,"../util/subscribeToArray":235}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../util/isArray");var s=e("../util/isFunction");var u=e("../operators/map");var n=function(){return Object.prototype.toString}();function c(r,n,i,t){if(s.isFunction(i)){t=i;i=undefined}if(t){return c(r,n,i).pipe(u.map(function(e){return a.isArray(e)?t.apply(void 0,e):t(e)}))}return new o.Observable(function(t){function e(e){if(arguments.length>1){t.next(Array.prototype.slice.call(arguments))}else{t.next(e)}}h(r,n,e,t,i)})}r.fromEvent=c;function h(e,t,r,n,i){var o;if(d(e)){var a=e;e.addEventListener(t,r,i);o=function(){return a.removeEventListener(t,r,i)}}else if(f(e)){var s=e;e.on(t,r);o=function(){return s.off(t,r)}}else if(p(e)){var u=e;e.addListener(t,r);o=function(){return u.removeListener(t,r)}}else if(e&&e.length){for(var c=0,l=e.length;c<l;c++){h(e[c],t,r,n,i)}}else{throw new TypeError("Invalid event target")}n.add(o)}function p(e){return e&&typeof e.addListener==="function"&&typeof e.removeListener==="function"}function f(e){return e&&typeof e.on==="function"&&typeof e.off==="function"}function d(e){return e&&typeof e.addEventListener==="function"&&typeof e.removeEventListener==="function"}},{"../Observable":48,"../operators/map":125,"../util/isArray":220,"../util/isFunction":223}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../util/isArray");var s=e("../util/isFunction");var u=e("../operators/map");function c(n,i,t){if(t){return c(n,i).pipe(u.map(function(e){return a.isArray(e)?t.apply(void 0,e):t(e)}))}return new o.Observable(function(r){var e=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return r.next(e.length===1?e[0]:e)};var t;try{t=n(e)}catch(e){r.error(e);return undefined}if(!s.isFunction(i)){return undefined}return function(){return i(e,t)}})}r.fromEventPattern=c},{"../Observable":48,"../operators/map":125,"../util/isArray":220,"../util/isFunction":223}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var c=e("../util/identity");var l=e("../util/isScheduler");function i(e,i,o,t,a){var s;var u;if(arguments.length==1){var r=e;u=r.initialState;i=r.condition;o=r.iterate;s=r.resultSelector||c.identity;a=r.scheduler}else if(t===undefined||l.isScheduler(t)){u=e;s=c.identity;a=t}else{u=e;s=t}return new n.Observable(function(t){var e=u;if(a){return a.schedule(h,0,{subscriber:t,iterate:o,condition:i,resultSelector:s,state:e})}do{if(i){var r=void 0;try{r=i(e)}catch(e){t.error(e);return undefined}if(!r){t.complete();break}}var n=void 0;try{n=s(e)}catch(e){t.error(e);return undefined}t.next(n);if(t.closed){break}try{e=o(e)}catch(e){t.error(e);return undefined}}while(true);return undefined})}r.generate=i;function h(e){var t=e.subscriber,r=e.condition;if(t.closed){return undefined}if(e.needIterate){try{e.state=e.iterate(e.state)}catch(e){t.error(e);return undefined}}else{e.needIterate=true}if(r){var n=void 0;try{n=r(e.state)}catch(e){t.error(e);return undefined}if(!n){t.complete();return undefined}if(t.closed){return undefined}}var i;try{i=e.resultSelector(e.state)}catch(e){t.error(e);return undefined}if(t.closed){return undefined}t.next(i);if(t.closed){return undefined}return this.schedule(e)}},{"../Observable":48,"../util/identity":219,"../util/isScheduler":230}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./defer");var i=e("./empty");function o(e,t,r){if(t===void 0){t=i.EMPTY}if(r===void 0){r=i.EMPTY}return n.defer(function(){return e()?t:r})}r.iif=o},{"./defer":64,"./empty":65}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var i=e("../scheduler/async");var o=e("../util/isNumeric");function a(t,r){if(t===void 0){t=0}if(r===void 0){r=i.async}if(!o.isNumeric(t)||t<0){t=0}if(!r||typeof r.schedule!=="function"){r=i.async}return new n.Observable(function(e){e.add(r.schedule(s,t,{subscriber:e,counter:0,period:t}));return e})}r.interval=a;function s(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r);this.schedule({subscriber:t,counter:r+1,period:n},n)}},{"../Observable":48,"../scheduler/async":206,"../util/isNumeric":226}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../util/isScheduler");var s=e("../operators/mergeAll");var u=e("./fromArray");function n(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=Number.POSITIVE_INFINITY;var n=null;var i=e[e.length-1];if(a.isScheduler(i)){n=e.pop();if(e.length>1&&typeof e[e.length-1]==="number"){r=e.pop()}}else if(typeof i==="number"){r=e.pop()}if(n===null&&e.length===1&&e[0]instanceof o.Observable){return e[0]}return s.mergeAll(r)(u.fromArray(e,n))}r.merge=n},{"../Observable":48,"../operators/mergeAll":130,"../util/isScheduler":230,"./fromArray":68}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var i=e("../util/noop");r.NEVER=new n.Observable(i.noop);function o(){return r.NEVER}r.never=o},{"../Observable":48,"../util/noop":231}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../util/isScheduler");var i=e("./fromArray");var o=e("../scheduled/scheduleArray");function a(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e[e.length-1];if(n.isScheduler(r)){e.pop();return o.scheduleArray(e,r)}else{return i.fromArray(e)}}r.of=a},{"../scheduled/scheduleArray":189,"../util/isScheduler":230,"./fromArray":68}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../Observable");var o=e("./from");var a=e("../util/isArray");var s=e("./empty");function u(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===0){return s.EMPTY}var r=e[0],n=e.slice(1);if(e.length===1&&a.isArray(r)){return u.apply(void 0,r)}return new i.Observable(function(t){var e=function(){return t.add(u.apply(void 0,n).subscribe(t))};return o.from(r).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}r.onErrorResumeNext=u},{"../Observable":48,"../util/isArray":220,"./empty":65,"./from":67}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../Subscription");function n(i,n){if(!n){return new o.Observable(function(e){var t=Object.keys(i);for(var r=0;r<t.length&&!e.closed;r++){var n=t[r];if(i.hasOwnProperty(n)){e.next([n,i[n]])}}e.complete()})}else{return new o.Observable(function(e){var t=Object.keys(i);var r=new a.Subscription;r.add(n.schedule(s,0,{keys:t,index:0,subscriber:e,subscription:r,obj:i}));return r})}}r.pairs=n;function s(e){var t=e.keys,r=e.index,n=e.subscriber,i=e.subscription,o=e.obj;if(!n.closed){if(r<t.length){var a=t[r];n.next([a,o[a]]);i.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:i,obj:o}))}else{n.complete()}}}r.dispatch=s},{"../Observable":48,"../Subscription":56}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../util/not");var i=e("../util/subscribeTo");var o=e("../operators/filter");var a=e("../Observable");function s(e,t,r){return[o.filter(t,r)(new a.Observable(i.subscribeTo(e))),o.filter(n.not(t,r))(new a.Observable(i.subscribeTo(e)))]}r.partition=s},{"../Observable":48,"../operators/filter":116,"../util/not":232,"../util/subscribeTo":234}],80:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../util/isArray");var o=e("./fromArray");var a=e("../OuterSubscriber");var s=e("../util/subscribeToResult");function u(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===1){if(i.isArray(e[0])){e=e[0]}else{return e[0]}}return o.fromArray(e,undefined).lift(new c)}r.race=u;var c=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new l(e))};return e}();r.RaceOperator=c;var l=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t.hasFirst=false;t.observables=[];t.subscriptions=[];return t}e.prototype._next=function(e){this.observables.push(e)};e.prototype._complete=function(){var e=this.observables;var t=e.length;if(t===0){this.destination.complete()}else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r];var i=s.subscribeToResult(this,n,n,r);if(this.subscriptions){this.subscriptions.push(i)}this.add(i)}this.observables=null}};e.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=true;for(var o=0;o<this.subscriptions.length;o++){if(o!==r){var a=this.subscriptions[o];a.unsubscribe();this.remove(a)}}this.subscriptions=null}this.destination.next(t)};return e}(a.OuterSubscriber);r.RaceSubscriber=l},{"../OuterSubscriber":50,"../util/isArray":220,"../util/subscribeToResult":239,"./fromArray":68}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=e("../Observable");function n(n,i,o){if(n===void 0){n=0}return new a.Observable(function(e){if(i===undefined){i=n;n=0}var t=0;var r=n;if(o){return o.schedule(s,0,{index:t,count:i,start:n,subscriber:e})}else{do{if(t++>=i){e.complete();break}e.next(r++);if(e.closed){break}}while(true)}return undefined})}r.range=n;function s(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;if(r>=n){i.complete();return}i.next(t);if(i.closed){return}e.index=r+1;e.start=t+1;this.schedule(e)}r.dispatch=s},{"../Observable":48}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");function i(t,r){if(!r){return new n.Observable(function(e){return e.error(t)})}else{return new n.Observable(function(e){return r.schedule(o,0,{error:t,subscriber:e})})}}r.throwError=i;function o(e){var t=e.error,r=e.subscriber;r.error(t)}},{"../Observable":48}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../scheduler/async");var s=e("../util/isNumeric");var u=e("../util/isScheduler");function n(r,e,n){if(r===void 0){r=0}var i=-1;if(s.isNumeric(e)){i=Number(e)<1&&1||Number(e)}else if(u.isScheduler(e)){n=e}if(!u.isScheduler(n)){n=a.async}return new o.Observable(function(e){var t=s.isNumeric(r)?r:+r-n.now();return n.schedule(c,t,{index:0,period:i,subscriber:e})})}r.timer=n;function c(e){var t=e.index,r=e.period,n=e.subscriber;n.next(t);if(n.closed){return}else if(r===-1){return n.complete()}e.index=t+1;this.schedule(e,r)}},{"../Observable":48,"../scheduler/async":206,"../util/isNumeric":226,"../util/isScheduler":230}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var s=e("./from");var u=e("./empty");function i(o,a){return new n.Observable(function(t){var e;try{e=o()}catch(e){t.error(e);return undefined}var r;try{r=a(e)}catch(e){t.error(e);return undefined}var n=r?s.from(r):u.EMPTY;var i=n.subscribe(t);return function(){i.unsubscribe();if(e){e.unsubscribe()}}})}r.using=i},{"../Observable":48,"./empty":65,"./from":67}],85:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./fromArray");var o=e("../util/isArray");var a=e("../Subscriber");var s=e("../OuterSubscriber");var u=e("../util/subscribeToResult");var c=e("../../internal/symbol/iterator");function l(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e[e.length-1];if(typeof r==="function"){e.pop()}return i.fromArray(e,undefined).lift(new h(r))}r.zip=l;var h=function(){function e(e){this.resultSelector=e}e.prototype.call=function(e,t){return t.subscribe(new p(e,this.resultSelector))};return e}();r.ZipOperator=h;var p=function(i){n(e,i);function e(e,t,r){if(r===void 0){r=Object.create(null)}var n=i.call(this,e)||this;n.iterators=[];n.active=0;n.resultSelector=typeof t==="function"?t:null;n.values=r;return n}e.prototype._next=function(e){var t=this.iterators;if(o.isArray(e)){t.push(new d(e))}else if(typeof e[c.iterator]==="function"){t.push(new f(e[c.iterator]()))}else{t.push(new v(this.destination,this,e))}};e.prototype._complete=function(){var e=this.iterators;var t=e.length;this.unsubscribe();if(t===0){this.destination.complete();return}this.active=t;for(var r=0;r<t;r++){var n=e[r];if(n.stillUnsubscribed){var i=this.destination;i.add(n.subscribe(n,r))}else{this.active--}}};e.prototype.notifyInactive=function(){this.active--;if(this.active===0){this.destination.complete()}};e.prototype.checkIterators=function(){var e=this.iterators;var t=e.length;var r=this.destination;for(var n=0;n<t;n++){var i=e[n];if(typeof i.hasValue==="function"&&!i.hasValue()){return}}var o=false;var a=[];for(var n=0;n<t;n++){var i=e[n];var s=i.next();if(i.hasCompleted()){o=true}if(s.done){r.complete();return}a.push(s.value)}if(this.resultSelector){this._tryresultSelector(a)}else{r.next(a)}if(o){r.complete()}};e.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){this.destination.error(e);return}this.destination.next(t)};return e}(a.Subscriber);r.ZipSubscriber=p;var f=function(){function e(e){this.iterator=e;this.nextResult=e.next()}e.prototype.hasValue=function(){return true};e.prototype.next=function(){var e=this.nextResult;this.nextResult=this.iterator.next();return e};e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done};return e}();var d=function(){function e(e){this.array=e;this.index=0;this.length=0;this.length=e.length}e.prototype[c.iterator]=function(){return this};e.prototype.next=function(e){var t=this.index++;var r=this.array;return t<this.length?{value:r[t],done:false}:{value:null,done:true}};e.prototype.hasValue=function(){return this.array.length>this.index};e.prototype.hasCompleted=function(){return this.array.length===this.index};return e}();var v=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.parent=t;n.observable=r;n.stillUnsubscribed=true;n.buffer=[];n.isComplete=false;return n}e.prototype[c.iterator]=function(){return this};e.prototype.next=function(){var e=this.buffer;if(e.length===0&&this.isComplete){return{value:null,done:true}}else{return{value:e.shift(),done:false}}};e.prototype.hasValue=function(){return this.buffer.length>0};e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete};e.prototype.notifyComplete=function(){if(this.buffer.length>0){this.isComplete=true;this.parent.notifyInactive()}else{this.destination.complete()}};e.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t);this.parent.checkIterators()};e.prototype.subscribe=function(e,t){return u.subscribeToResult(this,this.observable,this,t)};return e}(s.OuterSubscriber)},{"../../internal/symbol/iterator":208,"../OuterSubscriber":50,"../Subscriber":55,"../util/isArray":220,"../util/subscribeToResult":239,"./fromArray":68}],86:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(r){return function e(t){return t.lift(new s(r))}}r.audit=a;var s=function(){function e(e){this.durationSelector=e}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector))};return e}();var u=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.durationSelector=t;r.hasValue=false;return r}e.prototype._next=function(e){this.value=e;this.hasValue=true;if(!this.throttled){var t=void 0;try{var r=this.durationSelector;t=r(e)}catch(e){return this.destination.error(e)}var n=o.subscribeToResult(this,t);if(!n||n.closed){this.clearThrottle()}else{this.add(this.throttled=n)}}};e.prototype.clearThrottle=function(){var e=this,t=e.value,r=e.hasValue,n=e.throttled;if(n){this.remove(n);this.throttled=null;n.unsubscribe()}if(r){this.value=null;this.hasValue=false;this.destination.next(t)}};e.prototype.notifyNext=function(e,t,r,n){this.clearThrottle()};e.prototype.notifyComplete=function(){this.clearThrottle()};return e}(n.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../scheduler/async");var i=e("./audit");var o=e("../observable/timer");function a(e,t){if(t===void 0){t=n.async}return i.audit(function(){return o.timer(e,t)})}r.auditTime=a},{"../observable/timer":83,"../scheduler/async":206,"./audit":86}],88:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(r){return function e(t){return t.lift(new s(r))}}r.buffer=a;var s=function(){function e(e){this.closingNotifier=e}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingNotifier))};return e}();var u=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.buffer=[];r.add(o.subscribeToResult(r,t));return r}e.prototype._next=function(e){this.buffer.push(e)};e.prototype.notifyNext=function(e,t,r,n,i){var o=this.buffer;this.buffer=[];this.destination.next(o)};return e}(n.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],89:[function(e,t,r){"use strict";var o=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function i(r,n){if(n===void 0){n=null}return function e(t){return t.lift(new a(r,n))}}r.bufferCount=i;var a=function(){function e(e,t){this.bufferSize=e;this.startBufferEvery=t;if(!t||e===t){this.subscriberClass=s}else{this.subscriberClass=u}}e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))};return e}();var s=function(n){o(e,n);function e(e,t){var r=n.call(this,e)||this;r.bufferSize=t;r.buffer=[];return r}e.prototype._next=function(e){var t=this.buffer;t.push(e);if(t.length==this.bufferSize){this.destination.next(t);this.buffer=[]}};e.prototype._complete=function(){var e=this.buffer;if(e.length>0){this.destination.next(e)}n.prototype._complete.call(this)};return e}(n.Subscriber);var u=function(i){o(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.bufferSize=t;n.startBufferEvery=r;n.buffers=[];n.count=0;return n}e.prototype._next=function(e){var t=this,r=t.bufferSize,n=t.startBufferEvery,i=t.buffers,o=t.count;this.count++;if(o%n===0){i.push([])}for(var a=i.length;a--;){var s=i[a];s.push(e);if(s.length===r){i.splice(a,1);this.destination.next(s)}}};e.prototype._complete=function(){var e=this,t=e.buffers,r=e.destination;while(t.length>0){var n=t.shift();if(n.length>0){r.next(n)}}i.prototype._complete.call(this)};return e}(n.Subscriber)},{"../Subscriber":55}],90:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../scheduler/async");var i=e("../Subscriber");var s=e("../util/isScheduler");function o(r){var e=arguments.length;var n=a.async;if(s.isScheduler(arguments[arguments.length-1])){n=arguments[arguments.length-1];e--}var i=null;if(e>=2){i=arguments[1]}var o=Number.POSITIVE_INFINITY;if(e>=3){o=arguments[2]}return function e(t){return t.lift(new u(r,i,o,n))}}r.bufferTime=o;var u=function(){function e(e,t,r,n){this.bufferTimeSpan=e;this.bufferCreationInterval=t;this.maxBufferSize=r;this.scheduler=n}e.prototype.call=function(e,t){return t.subscribe(new l(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))};return e}();var c=function(){function e(){this.buffer=[]}return e}();var l=function(l){n(e,l);function e(e,t,r,n,i){var o=l.call(this,e)||this;o.bufferTimeSpan=t;o.bufferCreationInterval=r;o.maxBufferSize=n;o.scheduler=i;o.contexts=[];var a=o.openContext();o.timespanOnly=r==null||r<0;if(o.timespanOnly){var s={subscriber:o,context:a,bufferTimeSpan:t};o.add(a.closeAction=i.schedule(h,t,s))}else{var u={subscriber:o,context:a};var c={bufferTimeSpan:t,bufferCreationInterval:r,subscriber:o,scheduler:i};o.add(a.closeAction=i.schedule(f,t,u));o.add(i.schedule(p,r,c))}return o}e.prototype._next=function(e){var t=this.contexts;var r=t.length;var n;for(var i=0;i<r;i++){var o=t[i];var a=o.buffer;a.push(e);if(a.length==this.maxBufferSize){n=o}}if(n){this.onBufferFull(n)}};e.prototype._error=function(e){this.contexts.length=0;l.prototype._error.call(this,e)};e.prototype._complete=function(){var e=this,t=e.contexts,r=e.destination;while(t.length>0){var n=t.shift();r.next(n.buffer)}l.prototype._complete.call(this)};e.prototype._unsubscribe=function(){this.contexts=null};e.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;t.unsubscribe();this.remove(t);if(!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan;var n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(h,r,n))}};e.prototype.openContext=function(){var e=new c;this.contexts.push(e);return e};e.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;var r=t?t.indexOf(e):-1;if(r>=0){t.splice(t.indexOf(e),1)}};return e}(i.Subscriber);function h(e){var t=e.subscriber;var r=e.context;if(r){t.closeContext(r)}if(!t.closed){e.context=t.openContext();e.context.closeAction=this.schedule(e,e.bufferTimeSpan)}}function p(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler;var o=n.openContext();var a=this;if(!n.closed){n.add(o.closeAction=i.schedule(f,r,{subscriber:n,context:o}));a.schedule(e,t)}}function f(e){var t=e.subscriber,r=e.context;t.closeContext(r)}},{"../Subscriber":55,"../scheduler/async":206,"../util/isScheduler":230}],91:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../Subscription");var s=e("../util/subscribeToResult");var i=e("../OuterSubscriber");function o(r,n){return function e(t){return t.lift(new u(r,n))}}r.bufferToggle=o;var u=function(){function e(e,t){this.openings=e;this.closingSelector=t}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.openings,this.closingSelector))};return e}();var c=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.openings=t;n.closingSelector=r;n.contexts=[];n.add(s.subscribeToResult(n,t));return n}e.prototype._next=function(e){var t=this.contexts;var r=t.length;for(var n=0;n<r;n++){t[n].buffer.push(e)}};e.prototype._error=function(e){var t=this.contexts;while(t.length>0){var r=t.shift();r.subscription.unsubscribe();r.buffer=null;r.subscription=null}this.contexts=null;i.prototype._error.call(this,e)};e.prototype._complete=function(){var e=this.contexts;while(e.length>0){var t=e.shift();this.destination.next(t.buffer);t.subscription.unsubscribe();t.buffer=null;t.subscription=null}this.contexts=null;i.prototype._complete.call(this)};e.prototype.notifyNext=function(e,t,r,n,i){e?this.closeBuffer(e):this.openBuffer(t)};e.prototype.notifyComplete=function(e){this.closeBuffer(e.context)};e.prototype.openBuffer=function(e){try{var t=this.closingSelector;var r=t.call(this,e);if(r){this.trySubscribe(r)}}catch(e){this._error(e)}};e.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r);t.splice(t.indexOf(e),1);this.remove(n);n.unsubscribe()}};e.prototype.trySubscribe=function(e){var t=this.contexts;var r=[];var n=new a.Subscription;var i={buffer:r,subscription:n};t.push(i);var o=s.subscribeToResult(this,e,i);if(!o||o.closed){this.closeBuffer(i)}else{o.context=i;this.add(o);n.add(o)}};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../Subscription":56,"../util/subscribeToResult":239}],92:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var o=e("../Subscription");var n=e("../OuterSubscriber");var a=e("../util/subscribeToResult");function s(t){return function(e){return e.lift(new u(t))}}r.bufferWhen=s;var u=function(){function e(e){this.closingSelector=e}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))};return e}();var c=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.closingSelector=t;r.subscribing=false;r.openBuffer();return r}e.prototype._next=function(e){this.buffer.push(e)};e.prototype._complete=function(){var e=this.buffer;if(e){this.destination.next(e)}n.prototype._complete.call(this)};e.prototype._unsubscribe=function(){this.buffer=null;this.subscribing=false};e.prototype.notifyNext=function(e,t,r,n,i){this.openBuffer()};e.prototype.notifyComplete=function(){if(this.subscribing){this.complete()}else{this.openBuffer()}};e.prototype.openBuffer=function(){var e=this.closingSubscription;if(e){this.remove(e);e.unsubscribe()}var t=this.buffer;if(this.buffer){this.destination.next(t)}this.buffer=[];var r;try{var n=this.closingSelector;r=n()}catch(e){return this.error(e)}e=new o.Subscription;this.closingSubscription=e;this.add(e);this.subscribing=true;e.add(a.subscribeToResult(this,r));this.subscribing=false};return e}(n.OuterSubscriber)},{"../OuterSubscriber":50,"../Subscription":56,"../util/subscribeToResult":239}],93:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var o=e("../InnerSubscriber");var a=e("../util/subscribeToResult");function s(i){return function e(t){var r=new u(i);var n=t.lift(r);return r.caught=n}}r.catchError=s;var u=function(){function e(e){this.selector=e}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))};return e}();var c=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.selector=t;n.caught=r;return n}e.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){i.prototype.error.call(this,e);return}this._unsubscribeAndRecycle();var r=new o.InnerSubscriber(this,undefined,undefined);this.add(r);var n=a.subscribeToResult(this,t,undefined,undefined,r);if(n!==r){this.add(n)}}};return e}(i.OuterSubscriber)},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../util/subscribeToResult":239}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/combineLatest");function i(t){return function(e){return e.lift(new n.CombineLatestOperator(t))}}r.combineAll=i},{"../observable/combineLatest":62}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../util/isArray");var i=e("../observable/combineLatest");var o=e("../observable/from");var a={};function s(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}var r=null;if(typeof t[t.length-1]==="function"){r=t.pop()}if(t.length===1&&n.isArray(t[0])){t=t[0].slice()}return function(e){return e.lift.call(o.from([e].concat(t)),new i.CombineLatestOperator(r))}}r.combineLatest=s},{"../observable/combineLatest":62,"../observable/from":67,"../util/isArray":220}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/concat");function i(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return function(e){return e.lift.call(n.concat.apply(void 0,[e].concat(t)))}}r.concat=i},{"../observable/concat":63}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./mergeAll");function i(){return n.mergeAll(1)}r.concatAll=i},{"./mergeAll":130}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./mergeMap");function i(e,t){return n.mergeMap(e,t,1)}r.concatMap=i},{"./mergeMap":131}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./concatMap");function i(e,t){return n.concatMap(function(){return e},t)}r.concatMapTo=i},{"./concatMap":98}],100:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(t){return function(e){return e.lift(new a(t,e))}}r.count=o;var a=function(){function e(e,t){this.predicate=e;this.source=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))};return e}();var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.predicate=t;n.source=r;n.count=0;n.index=0;return n}e.prototype._next=function(e){if(this.predicate){this._tryPredicate(e)}else{this.count++}};e.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){this.destination.error(e);return}if(t){this.count++}};e.prototype._complete=function(){this.destination.next(this.count);this.destination.complete()};return e}(i.Subscriber)},{"../Subscriber":55}],101:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(t){return function(e){return e.lift(new s(t))}}r.debounce=a;var s=function(){function e(e){this.durationSelector=e}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector))};return e}();var u=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.durationSelector=t;r.hasValue=false;r.durationSubscription=null;return r}e.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);if(t){this._tryNext(e,t)}}catch(e){this.destination.error(e)}};e.prototype._complete=function(){this.emitValue();this.destination.complete()};e.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e;this.hasValue=true;if(r){r.unsubscribe();this.remove(r)}r=o.subscribeToResult(this,t);if(r&&!r.closed){this.add(this.durationSubscription=r)}};e.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()};e.prototype.notifyComplete=function(){this.emitValue()};e.prototype.emitValue=function(){if(this.hasValue){var e=this.value;var t=this.durationSubscription;if(t){this.durationSubscription=null;t.unsubscribe();this.remove(t)}this.value=null;this.hasValue=false;n.prototype._next.call(this,e)}};return e}(n.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],102:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../scheduler/async");function a(t,r){if(r===void 0){r=o.async}return function(e){return e.lift(new s(t,r))}}r.debounceTime=a;var s=function(){function e(e,t){this.dueTime=e;this.scheduler=t}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.dueTime,this.scheduler))};return e}();var u=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.dueTime=t;n.scheduler=r;n.debouncedSubscription=null;n.lastValue=null;n.hasValue=false;return n}e.prototype._next=function(e){this.clearDebounce();this.lastValue=e;this.hasValue=true;this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))};e.prototype._complete=function(){this.debouncedNext();this.destination.complete()};e.prototype.debouncedNext=function(){this.clearDebounce();if(this.hasValue){var e=this.lastValue;this.lastValue=null;this.hasValue=false;this.destination.next(e)}};e.prototype.clearDebounce=function(){var e=this.debouncedSubscription;if(e!==null){this.remove(e);e.unsubscribe();this.debouncedSubscription=null}};return e}(i.Subscriber);function c(e){e.debouncedNext()}},{"../Subscriber":55,"../scheduler/async":206}],103:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function o(t){if(t===void 0){t=null}return function(e){return e.lift(new a(t))}}r.defaultIfEmpty=o;var a=function(){function e(e){this.defaultValue=e}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.defaultValue))};return e}();var s=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.defaultValue=t;r.isEmpty=true;return r}e.prototype._next=function(e){this.isEmpty=false;this.destination.next(e)};e.prototype._complete=function(){if(this.isEmpty){this.destination.next(this.defaultValue)}this.destination.complete()};return e}(n.Subscriber)},{"../Subscriber":55}],104:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../scheduler/async");var o=e("../util/isDate");var a=e("../Subscriber");var s=e("../Notification");function u(e,t){if(t===void 0){t=i.async}var r=o.isDate(e);var n=r?+e-t.now():Math.abs(e);return function(e){return e.lift(new c(n,t))}}r.delay=u;var c=function(){function e(e,t){this.delay=e;this.scheduler=t}e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delay,this.scheduler))};return e}();var l=function(i){n(r,i);function r(e,t,r){var n=i.call(this,e)||this;n.delay=t;n.scheduler=r;n.queue=[];n.active=false;n.errored=false;return n}r.dispatch=function(e){var t=e.source;var r=t.queue;var n=e.scheduler;var i=e.destination;while(r.length>0&&r[0].time-n.now()<=0){r.shift().notification.observe(i)}if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else{this.unsubscribe();t.active=false}};r.prototype._schedule=function(e){this.active=true;var t=this.destination;t.add(e.schedule(r.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))};r.prototype.scheduleNotification=function(e){if(this.errored===true){return}var t=this.scheduler;var r=new h(t.now()+this.delay,e);this.queue.push(r);if(this.active===false){this._schedule(t)}};r.prototype._next=function(e){this.scheduleNotification(s.Notification.createNext(e))};r.prototype._error=function(e){this.errored=true;this.queue=[];this.destination.error(e);this.unsubscribe()};r.prototype._complete=function(){this.scheduleNotification(s.Notification.createComplete());this.unsubscribe()};return r}(a.Subscriber);var h=function(){function e(e,t){this.time=e;this.notification=t}return e}()},{"../Notification":47,"../Subscriber":55,"../scheduler/async":206,"../util/isDate":222}],105:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");var o=e("../Observable");var a=e("../OuterSubscriber");var s=e("../util/subscribeToResult");function u(t,r){if(r){return function(e){return new h(e,r).lift(new c(t))}}return function(e){return e.lift(new c(t))}}r.delayWhen=u;var c=function(){function e(e){this.delayDurationSelector=e}e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delayDurationSelector))};return e}();var l=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.delayDurationSelector=t;r.completed=false;r.delayNotifierSubscriptions=[];r.index=0;return r}e.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e);this.removeSubscription(i);this.tryComplete()};e.prototype.notifyError=function(e,t){this._error(e)};e.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);if(t){this.destination.next(t)}this.tryComplete()};e.prototype._next=function(e){var t=this.index++;try{var r=this.delayDurationSelector(e,t);if(r){this.tryDelay(r,e)}}catch(e){this.destination.error(e)}};e.prototype._complete=function(){this.completed=true;this.tryComplete();this.unsubscribe()};e.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);if(t!==-1){this.delayNotifierSubscriptions.splice(t,1)}return e.outerValue};e.prototype.tryDelay=function(e,t){var r=s.subscribeToResult(this,e,t);if(r&&!r.closed){var n=this.destination;n.add(r);this.delayNotifierSubscriptions.push(r)}};e.prototype.tryComplete=function(){if(this.completed&&this.delayNotifierSubscriptions.length===0){this.destination.complete()}};return e}(a.OuterSubscriber);var h=function(n){i(e,n);function e(e,t){var r=n.call(this)||this;r.source=e;r.subscriptionDelay=t;return r}e.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new p(e,this.source))};return e}(o.Observable);var p=function(n){i(e,n);function e(e,t){var r=n.call(this)||this;r.parent=e;r.source=t;r.sourceSubscribed=false;return r}e.prototype._next=function(e){this.subscribeToSource()};e.prototype._error=function(e){this.unsubscribe();this.parent.error(e)};e.prototype._complete=function(){this.unsubscribe();this.subscribeToSource()};e.prototype.subscribeToSource=function(){if(!this.sourceSubscribed){this.sourceSubscribed=true;this.unsubscribe();this.source.subscribe(this.parent)}};return e}(n.Subscriber)},{"../Observable":48,"../OuterSubscriber":50,"../Subscriber":55,"../util/subscribeToResult":239}],106:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(){return function e(t){return t.lift(new a)}}r.dematerialize=o;var a=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new s(e))};return e}();var s=function(t){n(e,t);function e(e){return t.call(this,e)||this}e.prototype._next=function(e){e.observe(this.destination)};return e}(i.Subscriber)},{"../Subscriber":55}],107:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(t,r){return function(e){return e.lift(new s(t,r))}}r.distinct=a;var s=function(){function e(e,t){this.keySelector=e;this.flushes=t}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.keySelector,this.flushes))};return e}();var u=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.keySelector=t;n.values=new Set;if(r){n.add(o.subscribeToResult(n,r))}return n}e.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()};e.prototype.notifyError=function(e,t){this._error(e)};e.prototype._next=function(e){if(this.keySelector){this._useKeySelector(e)}else{this._finalizeNext(e,e)}};e.prototype._useKeySelector=function(e){var t;var r=this.destination;try{t=this.keySelector(e)}catch(e){r.error(e);return}this._finalizeNext(t,e)};e.prototype._finalizeNext=function(e,t){var r=this.values;if(!r.has(e)){r.add(e);this.destination.next(t)}};return e}(i.OuterSubscriber);r.DistinctSubscriber=u},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],108:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(t,r){return function(e){return e.lift(new a(t,r))}}r.distinctUntilChanged=o;var a=function(){function e(e,t){this.compare=e;this.keySelector=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.compare,this.keySelector))};return e}();var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.keySelector=r;n.hasKey=false;if(typeof t==="function"){n.compare=t}return n}e.prototype.compare=function(e,t){return e===t};e.prototype._next=function(e){var t;try{var r=this.keySelector;t=r?r(e):e}catch(e){return this.destination.error(e)}var n=false;if(this.hasKey){try{var i=this.compare;n=i(this.key,t)}catch(e){return this.destination.error(e)}}else{this.hasKey=true}if(!n){this.key=t;this.destination.next(e)}};return e}(i.Subscriber)},{"../Subscriber":55}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("./distinctUntilChanged");function n(r,n){return i.distinctUntilChanged(function(e,t){return n?n(e[r],t[r]):e[r]===t[r]})}r.distinctUntilKeyChanged=n},{"./distinctUntilChanged":108}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../util/ArgumentOutOfRangeError");var o=e("./filter");var a=e("./throwIfEmpty");var s=e("./defaultIfEmpty");var u=e("./take");function n(r,t){if(r<0){throw new i.ArgumentOutOfRangeError}var n=arguments.length>=2;return function(e){return e.pipe(o.filter(function(e,t){return t===r}),u.take(1),n?s.defaultIfEmpty(t):a.throwIfEmpty(function(){return new i.ArgumentOutOfRangeError}))}}r.elementAt=n},{"../util/ArgumentOutOfRangeError":211,"./defaultIfEmpty":103,"./filter":116,"./take":168,"./throwIfEmpty":175}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/concat");var i=e("../observable/of");function o(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return function(e){return n.concat(e,i.of.apply(void 0,t))}}r.endWith=o},{"../observable/concat":63,"../observable/of":76}],112:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(t,r){return function(e){return e.lift(new a(t,r,e))}}r.every=o;var a=function(){function e(e,t,r){this.predicate=e;this.thisArg=t;this.source=r}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg,this.source))};return e}();var s=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e)||this;i.predicate=t;i.thisArg=r;i.source=n;i.index=0;i.thisArg=r||i;return i}e.prototype.notifyComplete=function(e){this.destination.next(e);this.destination.complete()};e.prototype._next=function(e){var t=false;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){this.destination.error(e);return}if(!t){this.notifyComplete(false)}};e.prototype._complete=function(){this.notifyComplete(true)};return e}(i.Subscriber)},{"../Subscriber":55}],113:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(){return function(e){return e.lift(new s)}}r.exhaust=a;var s=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new u(e))};return e}();var u=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t.hasCompleted=false;t.hasSubscription=false;return t}e.prototype._next=function(e){if(!this.hasSubscription){this.hasSubscription=true;this.add(o.subscribeToResult(this,e))}};e.prototype._complete=function(){this.hasCompleted=true;if(!this.hasSubscription){this.destination.complete()}};e.prototype.notifyComplete=function(e){this.remove(e);this.hasSubscription=false;if(this.hasCompleted){this.destination.complete()}};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],114:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../OuterSubscriber");var a=e("../InnerSubscriber");var s=e("../util/subscribeToResult");var o=e("./map");var u=e("../observable/from");function c(t,i){if(i){return function(e){return e.pipe(c(function(r,n){return u.from(t(r,n)).pipe(o.map(function(e,t){return i(r,e,n,t)}))}))}}return function(e){return e.lift(new l(t))}}r.exhaustMap=c;var l=function(){function e(e){this.project=e}e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))};return e}();var h=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.project=t;r.hasSubscription=false;r.hasCompleted=false;r.index=0;return r}e.prototype._next=function(e){if(!this.hasSubscription){this.tryNext(e)}};e.prototype.tryNext=function(e){var t;var r=this.index++;try{t=this.project(e,r)}catch(e){this.destination.error(e);return}this.hasSubscription=true;this._innerSub(t,e,r)};e.prototype._innerSub=function(e,t,r){var n=new a.InnerSubscriber(this,t,r);var i=this.destination;i.add(n);var o=s.subscribeToResult(this,e,undefined,undefined,n);if(o!==n){i.add(o)}};e.prototype._complete=function(){this.hasCompleted=true;if(!this.hasSubscription){this.destination.complete()}this.unsubscribe()};e.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)};e.prototype.notifyError=function(e){this.destination.error(e)};e.prototype.notifyComplete=function(e){var t=this.destination;t.remove(e);this.hasSubscription=false;if(this.hasCompleted){this.destination.complete()}};return e}(n.OuterSubscriber)},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../observable/from":67,"../util/subscribeToResult":239,"./map":125}],115:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var a=e("../util/subscribeToResult");function o(t,r,n){if(r===void 0){r=Number.POSITIVE_INFINITY}if(n===void 0){n=undefined}r=(r||0)<1?Number.POSITIVE_INFINITY:r;return function(e){return e.lift(new s(t,r,n))}}r.expand=o;var s=function(){function e(e,t,r){this.project=e;this.concurrent=t;this.scheduler=r}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.concurrent,this.scheduler))};return e}();r.ExpandOperator=s;var u=function(o){n(s,o);function s(e,t,r,n){var i=o.call(this,e)||this;i.project=t;i.concurrent=r;i.scheduler=n;i.index=0;i.active=0;i.hasCompleted=false;if(r<Number.POSITIVE_INFINITY){i.buffer=[]}return i}s.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)};s.prototype._next=function(e){var t=this.destination;if(t.closed){this._complete();return}var r=this.index++;if(this.active<this.concurrent){t.next(e);try{var n=this.project;var i=n(e,r);if(!this.scheduler){this.subscribeToProjection(i,e,r)}else{var o={subscriber:this,result:i,value:e,index:r};var a=this.destination;a.add(this.scheduler.schedule(s.dispatch,0,o))}}catch(e){t.error(e)}}else{this.buffer.push(e)}};s.prototype.subscribeToProjection=function(e,t,r){this.active++;var n=this.destination;n.add(a.subscribeToResult(this,e,t,r))};s.prototype._complete=function(){this.hasCompleted=true;if(this.hasCompleted&&this.active===0){this.destination.complete()}this.unsubscribe()};s.prototype.notifyNext=function(e,t,r,n,i){this._next(t)};s.prototype.notifyComplete=function(e){var t=this.buffer;var r=this.destination;r.remove(e);this.active--;if(t&&t.length>0){this._next(t.shift())}if(this.hasCompleted&&this.active===0){this.destination.complete()}};return s}(i.OuterSubscriber);r.ExpandSubscriber=u},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],116:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(r,n){return function e(t){return t.lift(new a(r,n))}}r.filter=o;var a=function(){function e(e,t){this.predicate=e;this.thisArg=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))};return e}();var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.predicate=t;n.thisArg=r;n.count=0;return n}e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){this.destination.error(e);return}if(t){this.destination.next(e)}};return e}(i.Subscriber)},{"../Subscriber":55}],117:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");var o=e("../Subscription");function a(t){return function(e){return e.lift(new s(t))}}r.finalize=a;var s=function(){function e(e){this.callback=e}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.callback))};return e}();var u=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.add(new o.Subscription(t));return r}return e}(n.Subscriber)},{"../Subscriber":55,"../Subscription":56}],118:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(t,r){if(typeof t!=="function"){throw new TypeError("predicate is not a function")}return function(e){return e.lift(new a(t,e,false,r))}}r.find=o;var a=function(){function e(e,t,r,n){this.predicate=e;this.source=t;this.yieldIndex=r;this.thisArg=n}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source,this.yieldIndex,this.thisArg))};return e}();r.FindValueOperator=a;var s=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e)||this;o.predicate=t;o.source=r;o.yieldIndex=n;o.thisArg=i;o.index=0;return o}e.prototype.notifyComplete=function(e){var t=this.destination;t.next(e);t.complete();this.unsubscribe()};e.prototype._next=function(e){var t=this,r=t.predicate,n=t.thisArg;var i=this.index++;try{var o=r.call(n||this,e,i,this.source);if(o){this.notifyComplete(this.yieldIndex?i:e)}}catch(e){this.destination.error(e)}};e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:undefined)};return e}(i.Subscriber);r.FindValueSubscriber=s},{"../Subscriber":55}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../operators/find");function i(t,r){return function(e){return e.lift(new n.FindValueOperator(t,e,true,r))}}r.findIndex=i},{"../operators/find":118}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../util/EmptyError");var o=e("./filter");var a=e("./take");var s=e("./defaultIfEmpty");var u=e("./throwIfEmpty");var c=e("../util/identity");function n(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?o.filter(function(e,t){return n(e,t,r)}):c.identity,a.take(1),t?s.defaultIfEmpty(e):u.throwIfEmpty(function(){return new i.EmptyError}))}}r.first=n},{"../util/EmptyError":212,"../util/identity":219,"./defaultIfEmpty":103,"./filter":116,"./take":168,"./throwIfEmpty":175}],121:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../Subscription");var a=e("../Observable");var s=e("../Subject");function u(t,r,n,i){return function(e){return e.lift(new c(t,r,n,i))}}r.groupBy=u;var c=function(){function e(e,t,r,n){this.keySelector=e;this.elementSelector=t;this.durationSelector=r;this.subjectSelector=n}e.prototype.call=function(e,t){return t.subscribe(new l(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))};return e}();var l=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e)||this;o.keySelector=t;o.elementSelector=r;o.durationSelector=n;o.subjectSelector=i;o.groups=null;o.attemptedToUnsubscribe=false;o.count=0;return o}e.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){this.error(e);return}this._group(e,t)};e.prototype._group=function(e,t){var r=this.groups;if(!r){r=this.groups=new Map}var n=r.get(t);var i;if(this.elementSelector){try{i=this.elementSelector(e)}catch(e){this.error(e)}}else{i=e}if(!n){n=this.subjectSelector?this.subjectSelector():new s.Subject;r.set(t,n);var o=new p(t,n,this);this.destination.next(o);if(this.durationSelector){var a=void 0;try{a=this.durationSelector(new p(t,n))}catch(e){this.error(e);return}this.add(a.subscribe(new h(t,n,this)))}}if(!n.closed){n.next(i)}};e.prototype._error=function(r){var e=this.groups;if(e){e.forEach(function(e,t){e.error(r)});e.clear()}this.destination.error(r)};e.prototype._complete=function(){var e=this.groups;if(e){e.forEach(function(e,t){e.complete()});e.clear()}this.destination.complete()};e.prototype.removeGroup=function(e){this.groups.delete(e)};e.prototype.unsubscribe=function(){if(!this.closed){this.attemptedToUnsubscribe=true;if(this.count===0){a.prototype.unsubscribe.call(this)}}};return e}(i.Subscriber);var h=function(i){n(e,i);function e(e,t,r){var n=i.call(this,t)||this;n.key=e;n.group=t;n.parent=r;return n}e.prototype._next=function(e){this.complete()};e.prototype._unsubscribe=function(){var e=this,t=e.parent,r=e.key;this.key=this.parent=null;if(t){t.removeGroup(r)}};return e}(i.Subscriber);var p=function(i){n(e,i);function e(e,t,r){var n=i.call(this)||this;n.key=e;n.groupSubject=t;n.refCountSubscription=r;return n}e.prototype._subscribe=function(e){var t=new o.Subscription;var r=this,n=r.refCountSubscription,i=r.groupSubject;if(n&&!n.closed){t.add(new f(n))}t.add(i.subscribe(e));return t};return e}(a.Observable);r.GroupedObservable=p;var f=function(r){n(e,r);function e(e){var t=r.call(this)||this;t.parent=e;e.count++;return t}e.prototype.unsubscribe=function(){var e=this.parent;if(!e.closed&&!this.closed){r.prototype.unsubscribe.call(this);e.count-=1;if(e.count===0&&e.attemptedToUnsubscribe){e.unsubscribe()}}};return e}(o.Subscription)},{"../Observable":48,"../Subject":53,"../Subscriber":55,"../Subscription":56}],122:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(){return function e(t){return t.lift(new a)}}r.ignoreElements=o;var a=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new s(e))};return e}();var s=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._next=function(e){};return t}(i.Subscriber)},{"../Subscriber":55}],123:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(){return function(e){return e.lift(new a)}}r.isEmpty=o;var a=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new s(e))};return e}();var s=function(t){n(e,t);function e(e){return t.call(this,e)||this}e.prototype.notifyComplete=function(e){var t=this.destination;t.next(e);t.complete()};e.prototype._next=function(e){this.notifyComplete(false)};e.prototype._complete=function(){this.notifyComplete(true)};return e}(i.Subscriber)},{"../Subscriber":55}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../util/EmptyError");var o=e("./filter");var a=e("./takeLast");var s=e("./throwIfEmpty");var u=e("./defaultIfEmpty");var c=e("../util/identity");function n(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?o.filter(function(e,t){return n(e,t,r)}):c.identity,a.takeLast(1),t?u.defaultIfEmpty(e):s.throwIfEmpty(function(){return new i.EmptyError}))}}r.last=n},{"../util/EmptyError":212,"../util/identity":219,"./defaultIfEmpty":103,"./filter":116,"./takeLast":169,"./throwIfEmpty":175}],125:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(r,n){return function e(t){if(typeof r!=="function"){throw new TypeError("argument is not a function. Are you looking for `mapTo()`?")}return t.lift(new a(r,n))}}r.map=o;var a=function(){function e(e,t){this.project=e;this.thisArg=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))};return e}();r.MapOperator=a;var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.project=t;n.count=0;n.thisArg=r||n;return n}e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){this.destination.error(e);return}this.destination.next(t)};return e}(i.Subscriber)},{"../Subscriber":55}],126:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function o(t){return function(e){return e.lift(new a(t))}}r.mapTo=o;var a=function(){function e(e){this.value=e}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.value))};return e}();var s=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.value=t;return r}e.prototype._next=function(e){this.destination.next(this.value)};return e}(n.Subscriber)},{"../Subscriber":55}],127:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../Notification");function a(){return function e(t){return t.lift(new s)}}r.materialize=a;var s=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new u(e))};return e}();var u=function(t){n(e,t);function e(e){return t.call(this,e)||this}e.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))};e.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e));t.complete()};e.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete());e.complete()};return e}(i.Subscriber)},{"../Notification":47,"../Subscriber":55}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./reduce");function i(r){var e=typeof r==="function"?function(e,t){return r(e,t)>0?e:t}:function(e,t){return e>t?e:t};return n.reduce(e)}r.max=i},{"./reduce":146}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/merge");function i(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return function(e){return e.lift.call(n.merge.apply(void 0,[e].concat(t)))}}r.merge=i},{"../observable/merge":74}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./mergeMap");var i=e("../util/identity");function o(e){if(e===void 0){e=Number.POSITIVE_INFINITY}return n.mergeMap(i.identity,e)}r.mergeAll=o},{"../util/identity":219,"./mergeMap":131}],131:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../util/subscribeToResult");var i=e("../OuterSubscriber");var s=e("../InnerSubscriber");var o=e("./map");var u=e("../observable/from");function c(t,i,r){if(r===void 0){r=Number.POSITIVE_INFINITY}if(typeof i==="function"){return function(e){return e.pipe(c(function(r,n){return u.from(t(r,n)).pipe(o.map(function(e,t){return i(r,e,n,t)}))},r))}}else if(typeof i==="number"){r=i}return function(e){return e.lift(new l(t,r))}}r.mergeMap=c;var l=function(){function e(e,t){if(t===void 0){t=Number.POSITIVE_INFINITY}this.project=e;this.concurrent=t}e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project,this.concurrent))};return e}();r.MergeMapOperator=l;var h=function(i){n(e,i);function e(e,t,r){if(r===void 0){r=Number.POSITIVE_INFINITY}var n=i.call(this,e)||this;n.project=t;n.concurrent=r;n.hasCompleted=false;n.buffer=[];n.active=0;n.index=0;return n}e.prototype._next=function(e){if(this.active<this.concurrent){this._tryNext(e)}else{this.buffer.push(e)}};e.prototype._tryNext=function(e){var t;var r=this.index++;try{t=this.project(e,r)}catch(e){this.destination.error(e);return}this.active++;this._innerSub(t,e,r)};e.prototype._innerSub=function(e,t,r){var n=new s.InnerSubscriber(this,t,r);var i=this.destination;i.add(n);var o=a.subscribeToResult(this,e,undefined,undefined,n);if(o!==n){i.add(o)}};e.prototype._complete=function(){this.hasCompleted=true;if(this.active===0&&this.buffer.length===0){this.destination.complete()}this.unsubscribe()};e.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)};e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e);this.active--;if(t.length>0){this._next(t.shift())}else if(this.active===0&&this.hasCompleted){this.destination.complete()}};return e}(i.OuterSubscriber);r.MergeMapSubscriber=h},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../observable/from":67,"../util/subscribeToResult":239,"./map":125}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./mergeMap");function i(e,t,r){if(r===void 0){r=Number.POSITIVE_INFINITY}if(typeof t==="function"){return n.mergeMap(function(){return e},t,r)}if(typeof t==="number"){r=t}return n.mergeMap(function(){return e},r)}r.mergeMapTo=i},{"./mergeMap":131}],133:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../util/subscribeToResult");var i=e("../OuterSubscriber");var s=e("../InnerSubscriber");function o(t,r,n){if(n===void 0){n=Number.POSITIVE_INFINITY}return function(e){return e.lift(new u(t,r,n))}}r.mergeScan=o;var u=function(){function e(e,t,r){this.accumulator=e;this.seed=t;this.concurrent=r}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.accumulator,this.seed,this.concurrent))};return e}();r.MergeScanOperator=u;var c=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e)||this;i.accumulator=t;i.acc=r;i.concurrent=n;i.hasValue=false;i.hasCompleted=false;i.buffer=[];i.active=0;i.index=0;return i}e.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++;var r=this.destination;var n=void 0;try{var i=this.accumulator;n=i(this.acc,e,t)}catch(e){return r.error(e)}this.active++;this._innerSub(n,e,t)}else{this.buffer.push(e)}};e.prototype._innerSub=function(e,t,r){var n=new s.InnerSubscriber(this,t,r);var i=this.destination;i.add(n);var o=a.subscribeToResult(this,e,undefined,undefined,n);if(o!==n){i.add(o)}};e.prototype._complete=function(){this.hasCompleted=true;if(this.active===0&&this.buffer.length===0){if(this.hasValue===false){this.destination.next(this.acc)}this.destination.complete()}this.unsubscribe()};e.prototype.notifyNext=function(e,t,r,n,i){var o=this.destination;this.acc=t;this.hasValue=true;o.next(t)};e.prototype.notifyComplete=function(e){var t=this.buffer;var r=this.destination;r.remove(e);this.active--;if(t.length>0){this._next(t.shift())}else if(this.active===0&&this.hasCompleted){if(this.hasValue===false){this.destination.next(this.acc)}this.destination.complete()}};return e}(i.OuterSubscriber);r.MergeScanSubscriber=c},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../util/subscribeToResult":239}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./reduce");function i(r){var e=typeof r==="function"?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t};return n.reduce(e)}r.min=i},{"./reduce":146}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=e("../observable/ConnectableObservable");function n(i,o){return function e(t){var r;if(typeof i==="function"){r=i}else{r=function e(){return i}}if(typeof o==="function"){return t.lift(new s(r,o))}var n=Object.create(t,a.connectableObservableDescriptor);n.source=t;n.subjectFactory=r;return n}}r.multicast=n;var s=function(){function e(e,t){this.subjectFactory=e;this.selector=t}e.prototype.call=function(e,t){var r=this.selector;var n=this.subjectFactory();var i=r(n).subscribe(e);i.add(t.subscribe(n));return i};return e}();r.MulticastOperator=s},{"../observable/ConnectableObservable":58}],136:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../Notification");function a(r,n){if(n===void 0){n=0}return function e(t){return t.lift(new s(r,n))}}r.observeOn=a;var s=function(){function e(e,t){if(t===void 0){t=0}this.scheduler=e;this.delay=t}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))};return e}();r.ObserveOnOperator=s;var u=function(i){n(r,i);function r(e,t,r){if(r===void 0){r=0}var n=i.call(this,e)||this;n.scheduler=t;n.delay=r;return n}r.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r);this.unsubscribe()};r.prototype.scheduleMessage=function(e){var t=this.destination;t.add(this.scheduler.schedule(r.dispatch,this.delay,new c(e,this.destination)))};r.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))};r.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e));this.unsubscribe()};r.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete());this.unsubscribe()};return r}(i.Subscriber);r.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e;this.destination=t}return e}();r.ObserveOnMessage=c},{"../Notification":47,"../Subscriber":55}],137:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/from");var o=e("../util/isArray");var a=e("../OuterSubscriber");var s=e("../InnerSubscriber");var u=e("../util/subscribeToResult");function c(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}if(t.length===1&&o.isArray(t[0])){t=t[0]}return function(e){return e.lift(new h(t))}}r.onErrorResumeNext=c;function l(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=null;if(e.length===1&&o.isArray(e[0])){e=e[0]}r=e.shift();return n.from(r,null).lift(new h(e))}r.onErrorResumeNextStatic=l;var h=function(){function e(e){this.nextSources=e}e.prototype.call=function(e,t){return t.subscribe(new p(e,this.nextSources))};return e}();var p=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.destination=e;r.nextSources=t;return r}e.prototype.notifyError=function(e,t){this.subscribeToNextSource()};e.prototype.notifyComplete=function(e){this.subscribeToNextSource()};e.prototype._error=function(e){this.subscribeToNextSource();this.unsubscribe()};e.prototype._complete=function(){this.subscribeToNextSource();this.unsubscribe()};e.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(!!e){var t=new s.InnerSubscriber(this,undefined,undefined);var r=this.destination;r.add(t);var n=u.subscribeToResult(this,e,undefined,undefined,t);if(n!==t){r.add(n)}}else{this.destination.complete()}};return e}(a.OuterSubscriber)},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../observable/from":67,"../util/isArray":220,"../util/subscribeToResult":239}],138:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(){return function(e){return e.lift(new a)}}r.pairwise=o;var a=function(){function e(){}e.prototype.call=function(e,t){return t.subscribe(new s(e))};return e}();var s=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t.hasPrev=false;return t}e.prototype._next=function(e){var t;if(this.hasPrev){t=[this.prev,e]}else{this.hasPrev=true}this.prev=e;if(t){this.destination.next(t)}};return e}(i.Subscriber)},{"../Subscriber":55}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../util/not");var i=e("./filter");function o(t,r){return function(e){return[i.filter(t,r)(e),i.filter(n.not(t,r))(e)]}}r.partition=o},{"../util/not":232,"./filter":116}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./map");function i(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}var r=t.length;if(r===0){throw new Error("list of properties cannot be empty.")}return function(e){return n.map(o(t,r))(e)}}r.pluck=i;function o(i,o){var e=function(e){var t=e;for(var r=0;r<o;r++){var n=t[i[r]];if(typeof n!=="undefined"){t=n}else{return undefined}}return t};return e}},{"./map":125}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subject");var i=e("./multicast");function o(e){return e?i.multicast(function(){return new n.Subject},e):i.multicast(new n.Subject)}r.publish=o},{"../Subject":53,"./multicast":135}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../BehaviorSubject");var i=e("./multicast");function o(t){return function(e){return i.multicast(new n.BehaviorSubject(t))(e)}}r.publishBehavior=o},{"../BehaviorSubject":45,"./multicast":135}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../AsyncSubject");var i=e("./multicast");function o(){return function(e){return i.multicast(new n.AsyncSubject)(e)}}r.publishLast=o},{"../AsyncSubject":44,"./multicast":135}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=e("../ReplaySubject");var s=e("./multicast");function n(e,t,r,n){if(r&&typeof r!=="function"){n=r}var i=typeof r==="function"?r:undefined;var o=new a.ReplaySubject(e,t,n);return function(e){return s.multicast(function(){return o},i)(e)}}r.publishReplay=n},{"../ReplaySubject":51,"./multicast":135}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../util/isArray");var i=e("../observable/race");function o(){var r=[];for(var e=0;e<arguments.length;e++){r[e]=arguments[e]}return function e(t){if(r.length===1&&n.isArray(r[0])){r=r[0]}return t.lift.call(i.race.apply(void 0,[t].concat(r)))}}r.race=o},{"../observable/race":80,"../util/isArray":220}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("./scan");var o=e("./takeLast");var a=e("./defaultIfEmpty");var s=e("../util/pipe");function n(n,r){if(arguments.length>=2){return function e(t){return s.pipe(i.scan(n,r),o.takeLast(1),a.defaultIfEmpty(r))(t)}}return function e(t){return s.pipe(i.scan(function(e,t,r){return n(e,t,r+1)}),o.takeLast(1))(t)}}r.reduce=n},{"../util/pipe":233,"./defaultIfEmpty":103,"./scan":154,"./takeLast":169}],147:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function o(){return function e(t){return t.lift(new a(t))}}r.refCount=o;var a=function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new s(e,r);var i=t.subscribe(n);if(!n.closed){n.connection=r.connect()}return i};return e}();var s=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.connectable=t;return r}e.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var t=e._refCount;if(t<=0){this.connection=null;return}e._refCount=t-1;if(t>1){this.connection=null;return}var r=this.connection;var n=e._connection;this.connection=null;if(n&&(!r||n===r)){n.unsubscribe()}};return e}(n.Subscriber)},{"../Subscriber":55}],148:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../observable/empty");function a(t){if(t===void 0){t=-1}return function(e){if(t===0){return o.empty()}else if(t<0){return e.lift(new s(-1,e))}else{return e.lift(new s(t-1,e))}}}r.repeat=a;var s=function(){function e(e,t){this.count=e;this.source=t}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.count,this.source))};return e}();var u=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.count=t;n.source=r;return n}e.prototype.complete=function(){if(!this.isStopped){var e=this,t=e.source,r=e.count;if(r===0){return i.prototype.complete.call(this)}else if(r>-1){this.count=r-1}t.subscribe(this._unsubscribeAndRecycle())}};return e}(i.Subscriber)},{"../Subscriber":55,"../observable/empty":65}],149:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var o=e("../Subject");var i=e("../OuterSubscriber");var a=e("../util/subscribeToResult");function s(t){return function(e){return e.lift(new u(t))}}r.repeatWhen=s;var u=function(){function e(e){this.notifier=e}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,t))};return e}();var c=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.notifier=t;n.source=r;n.sourceIsBeingSubscribedTo=true;return n}e.prototype.notifyNext=function(e,t,r,n,i){this.sourceIsBeingSubscribedTo=true;this.source.subscribe(this)};e.prototype.notifyComplete=function(e){if(this.sourceIsBeingSubscribedTo===false){return i.prototype.complete.call(this)}};e.prototype.complete=function(){this.sourceIsBeingSubscribedTo=false;if(!this.isStopped){if(!this.retries){this.subscribeToRetries()}if(!this.retriesSubscription||this.retriesSubscription.closed){return i.prototype.complete.call(this)}this._unsubscribeAndRecycle();this.notifications.next()}};e.prototype._unsubscribe=function(){var e=this,t=e.notifications,r=e.retriesSubscription;if(t){t.unsubscribe();this.notifications=null}if(r){r.unsubscribe();this.retriesSubscription=null}this.retries=null};e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;this._unsubscribe=null;i.prototype._unsubscribeAndRecycle.call(this);this._unsubscribe=e;return this};e.prototype.subscribeToRetries=function(){this.notifications=new o.Subject;var e;try{var t=this.notifier;e=t(this.notifications)}catch(e){return i.prototype.complete.call(this)}this.retries=e;this.retriesSubscription=a.subscribeToResult(this,e)};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../Subject":53,"../util/subscribeToResult":239}],150:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(t){if(t===void 0){t=-1}return function(e){return e.lift(new a(t,e))}}r.retry=o;var a=function(){function e(e,t){this.count=e;this.source=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))};return e}();var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.count=t;n.source=r;return n}e.prototype.error=function(e){if(!this.isStopped){var t=this,r=t.source,n=t.count;if(n===0){return i.prototype.error.call(this,e)}else if(n>-1){this.count=n-1}r.subscribe(this._unsubscribeAndRecycle())}};return e}(i.Subscriber)},{"../Subscriber":55}],151:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../Subject");var i=e("../OuterSubscriber");var s=e("../util/subscribeToResult");function o(t){return function(e){return e.lift(new u(t,e))}}r.retryWhen=o;var u=function(){function e(e,t){this.notifier=e;this.source=t}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier,this.source))};return e}();var c=function(o){n(e,o);function e(e,t,r){var n=o.call(this,e)||this;n.notifier=t;n.source=r;return n}e.prototype.error=function(e){if(!this.isStopped){var t=this.errors;var r=this.retries;var n=this.retriesSubscription;if(!r){t=new a.Subject;try{var i=this.notifier;r=i(t)}catch(e){return o.prototype.error.call(this,e)}n=s.subscribeToResult(this,r)}else{this.errors=null;this.retriesSubscription=null}this._unsubscribeAndRecycle();this.errors=t;this.retries=r;this.retriesSubscription=n;t.next(e)}};e.prototype._unsubscribe=function(){var e=this,t=e.errors,r=e.retriesSubscription;if(t){t.unsubscribe();this.errors=null}if(r){r.unsubscribe();this.retriesSubscription=null}this.retries=null};e.prototype.notifyNext=function(e,t,r,n,i){var o=this._unsubscribe;this._unsubscribe=null;this._unsubscribeAndRecycle();this._unsubscribe=o;this.source.subscribe(this)};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../Subject":53,"../util/subscribeToResult":239}],152:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(t){return function(e){return e.lift(new s(t))}}r.sample=a;var s=function(){function e(e){this.notifier=e}e.prototype.call=function(e,t){var r=new u(e);var n=t.subscribe(r);n.add(o.subscribeToResult(r,this.notifier));return n};return e}();var u=function(t){n(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.hasValue=false;return e}e.prototype._next=function(e){this.value=e;this.hasValue=true};e.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()};e.prototype.notifyComplete=function(){this.emitValue()};e.prototype.emitValue=function(){if(this.hasValue){this.hasValue=false;this.destination.next(this.value)}};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],153:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../scheduler/async");function a(t,r){if(r===void 0){r=o.async}return function(e){return e.lift(new s(t,r))}}r.sampleTime=a;var s=function(){function e(e,t){this.period=e;this.scheduler=t}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.period,this.scheduler))};return e}();var u=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.period=t;n.scheduler=r;n.hasValue=false;n.add(r.schedule(c,t,{subscriber:n,period:t}));return n}e.prototype._next=function(e){this.lastValue=e;this.hasValue=true};e.prototype.notifyNext=function(){if(this.hasValue){this.hasValue=false;this.destination.next(this.lastValue)}};return e}(i.Subscriber);function c(e){var t=e.subscriber,r=e.period;t.notifyNext();this.schedule(e,r)}},{"../Subscriber":55,"../scheduler/async":206}],154:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(r,n){var i=false;if(arguments.length>=2){i=true}return function e(t){return t.lift(new a(r,n,i))}}r.scan=o;var a=function(){function e(e,t,r){if(r===void 0){r=false}this.accumulator=e;this.seed=t;this.hasSeed=r}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))};return e}();var s=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e)||this;i.accumulator=t;i._seed=r;i.hasSeed=n;i.index=0;return i}Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=true;this._seed=e},enumerable:true,configurable:true});e.prototype._next=function(e){if(!this.hasSeed){this.seed=e;this.destination.next(e)}else{return this._tryNext(e)}};e.prototype._tryNext=function(e){var t=this.index++;var r;try{r=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=r;this.destination.next(r)};return e}(i.Subscriber)},{"../Subscriber":55}],155:[function(e,t,r){"use strict";var o=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function i(t,r){return function(e){return e.lift(new a(t,r))}}r.sequenceEqual=i;var a=function(){function e(e,t){this.compareTo=e;this.comparator=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.compareTo,this.comparator))};return e}();r.SequenceEqualOperator=a;var s=function(i){o(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.compareTo=t;n.comparator=r;n._a=[];n._b=[];n._oneComplete=false;n.destination.add(t.subscribe(new u(e,n)));return n}e.prototype._next=function(e){if(this._oneComplete&&this._b.length===0){this.emit(false)}else{this._a.push(e);this.checkValues()}};e.prototype._complete=function(){if(this._oneComplete){this.emit(this._a.length===0&&this._b.length===0)}else{this._oneComplete=true}this.unsubscribe()};e.prototype.checkValues=function(){var e=this,t=e._a,r=e._b,n=e.comparator;while(t.length>0&&r.length>0){var i=t.shift();var o=r.shift();var a=false;try{a=n?n(i,o):i===o}catch(e){this.destination.error(e)}if(!a){this.emit(false)}}};e.prototype.emit=function(e){var t=this.destination;t.next(e);t.complete()};e.prototype.nextB=function(e){if(this._oneComplete&&this._a.length===0){this.emit(false)}else{this._b.push(e);this.checkValues()}};e.prototype.completeB=function(){if(this._oneComplete){this.emit(this._a.length===0&&this._b.length===0)}else{this._oneComplete=true}};return e}(n.Subscriber);r.SequenceEqualSubscriber=s;var u=function(n){o(e,n);function e(e,t){var r=n.call(this,e)||this;r.parent=t;return r}e.prototype._next=function(e){this.parent.nextB(e)};e.prototype._error=function(e){this.parent.error(e);this.unsubscribe()};e.prototype._complete=function(){this.parent.completeB();this.unsubscribe()};return e}(n.Subscriber)},{"../Subscriber":55}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./multicast");var i=e("./refCount");var o=e("../Subject");function a(){return new o.Subject}function s(){return function(e){return i.refCount()(n.multicast(a)(e))}}r.share=s},{"../Subject":53,"./multicast":135,"./refCount":147}],157:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var p=e("../ReplaySubject");function n(e,t,r){var n;if(e&&typeof e==="object"){n=e}else{n={bufferSize:e,windowTime:t,refCount:false,scheduler:r}}return function(e){return e.lift(i(n))}}r.shareReplay=n;function i(e){var t=e.bufferSize,n=t===void 0?Number.POSITIVE_INFINITY:t,r=e.windowTime,i=r===void 0?Number.POSITIVE_INFINITY:r,o=e.refCount,a=e.scheduler;var s;var u=0;var c;var l=false;var h=false;return function e(t){u++;if(!s||l){l=false;s=new p.ReplaySubject(n,i,a);c=t.subscribe({next:function(e){s.next(e)},error:function(e){l=true;s.error(e)},complete:function(){h=true;c=undefined;s.complete()}})}var r=s.subscribe(this);this.add(function(){u--;r.unsubscribe();if(c&&!h&&o&&u===0){c.unsubscribe();c=undefined;s=undefined}})}}},{"../ReplaySubject":51}],158:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../util/EmptyError");function a(t){return function(e){return e.lift(new s(t,e))}}r.single=a;var s=function(){function e(e,t){this.predicate=e;this.source=t}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.source))};return e}();var u=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.predicate=t;n.source=r;n.seenValue=false;n.index=0;return n}e.prototype.applySingleValue=function(e){if(this.seenValue){this.destination.error("Sequence contains more than one element")}else{this.seenValue=true;this.singleValue=e}};e.prototype._next=function(e){var t=this.index++;if(this.predicate){this.tryNext(e,t)}else{this.applySingleValue(e)}};e.prototype.tryNext=function(e,t){try{if(this.predicate(e,t,this.source)){this.applySingleValue(e)}}catch(e){this.destination.error(e)}};e.prototype._complete=function(){var e=this.destination;if(this.index>0){e.next(this.seenValue?this.singleValue:undefined);e.complete()}else{e.error(new o.EmptyError)}};return e}(i.Subscriber)},{"../Subscriber":55,"../util/EmptyError":212}],159:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function o(t){return function(e){return e.lift(new a(t))}}r.skip=o;var a=function(){function e(e){this.total=e}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.total))};return e}();var s=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.total=t;r.count=0;return r}e.prototype._next=function(e){if(++this.count>this.total){this.destination.next(e)}};return e}(n.Subscriber)},{"../Subscriber":55}],160:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");var o=e("../util/ArgumentOutOfRangeError");function a(t){return function(e){return e.lift(new s(t))}}r.skipLast=a;var s=function(){function e(e){this._skipCount=e;if(this._skipCount<0){throw new o.ArgumentOutOfRangeError}}e.prototype.call=function(e,t){if(this._skipCount===0){return t.subscribe(new n.Subscriber(e))}else{return t.subscribe(new u(e,this._skipCount))}};return e}();var u=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r._skipCount=t;r._count=0;r._ring=new Array(t);return r}e.prototype._next=function(e){var t=this._skipCount;var r=this._count++;if(r<t){this._ring[r]=e}else{var n=r%t;var i=this._ring;var o=i[n];i[n]=e;this.destination.next(o)}};return e}(n.Subscriber)},{"../Subscriber":55,"../util/ArgumentOutOfRangeError":211}],161:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var a=e("../InnerSubscriber");var s=e("../util/subscribeToResult");function o(t){return function(e){return e.lift(new u(t))}}r.skipUntil=o;var u=function(){function e(e){this.notifier=e}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.notifier))};return e}();var c=function(o){n(e,o);function e(e,t){var r=o.call(this,e)||this;r.hasValue=false;var n=new a.InnerSubscriber(r,undefined,undefined);r.add(n);r.innerSubscription=n;var i=s.subscribeToResult(r,t,undefined,undefined,n);if(i!==n){r.add(i);r.innerSubscription=i}return r}e.prototype._next=function(e){if(this.hasValue){o.prototype._next.call(this,e)}};e.prototype.notifyNext=function(e,t,r,n,i){this.hasValue=true;if(this.innerSubscription){this.innerSubscription.unsubscribe()}};e.prototype.notifyComplete=function(){};return e}(i.OuterSubscriber)},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../util/subscribeToResult":239}],162:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");function o(t){return function(e){return e.lift(new a(t))}}r.skipWhile=o;var a=function(){function e(e){this.predicate=e}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))};return e}();var s=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.predicate=t;r.skipping=true;r.index=0;return r}e.prototype._next=function(e){var t=this.destination;if(this.skipping){this.tryCallPredicate(e)}if(!this.skipping){t.next(e)}};e.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}};return e}(n.Subscriber)},{"../Subscriber":55}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/concat");var i=e("../util/isScheduler");function o(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}var r=t[t.length-1];if(i.isScheduler(r)){t.pop();return function(e){return n.concat(t,e,r)}}else{return function(e){return n.concat(t,e)}}}r.startWith=o},{"../observable/concat":63,"../util/isScheduler":230}],164:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/SubscribeOnObservable");function i(r,n){if(n===void 0){n=0}return function e(t){return t.lift(new o(r,n))}}r.subscribeOn=i;var o=function(){function e(e,t){this.scheduler=e;this.delay=t}e.prototype.call=function(e,t){return new n.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)};return e}()},{"../observable/SubscribeOnObservable":59}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./switchMap");var i=e("../util/identity");function o(){return n.switchMap(i.identity)}r.switchAll=o},{"../util/identity":219,"./switchMap":166}],166:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../OuterSubscriber");var a=e("../InnerSubscriber");var s=e("../util/subscribeToResult");var o=e("./map");var u=e("../observable/from");function c(t,i){if(typeof i==="function"){return function(e){return e.pipe(c(function(r,n){return u.from(t(r,n)).pipe(o.map(function(e,t){return i(r,e,n,t)}))}))}}return function(e){return e.lift(new l(t))}}r.switchMap=c;var l=function(){function e(e){this.project=e}e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))};return e}();var h=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.project=t;r.index=0;return r}e.prototype._next=function(e){var t;var r=this.index++;try{t=this.project(e,r)}catch(e){this.destination.error(e);return}this._innerSub(t,e,r)};e.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;if(n){n.unsubscribe()}var i=new a.InnerSubscriber(this,t,r);var o=this.destination;o.add(i);this.innerSubscription=s.subscribeToResult(this,e,undefined,undefined,i);if(this.innerSubscription!==i){o.add(this.innerSubscription)}};e.prototype._complete=function(){var e=this.innerSubscription;if(!e||e.closed){n.prototype._complete.call(this)}this.unsubscribe()};e.prototype._unsubscribe=function(){this.innerSubscription=null};e.prototype.notifyComplete=function(e){var t=this.destination;t.remove(e);this.innerSubscription=null;if(this.isStopped){n.prototype._complete.call(this)}};e.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)};return e}(n.OuterSubscriber)},{"../InnerSubscriber":46,"../OuterSubscriber":50,"../observable/from":67,"../util/subscribeToResult":239,"./map":125}],167:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./switchMap");function i(e,t){return t?n.switchMap(function(){return e},t):n.switchMap(function(){return e})}r.switchMapTo=i},{"./switchMap":166}],168:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");var o=e("../util/ArgumentOutOfRangeError");var a=e("../observable/empty");function s(t){return function(e){if(t===0){return a.empty()}else{return e.lift(new u(t))}}}r.take=s;var u=function(){function e(e){this.total=e;if(this.total<0){throw new o.ArgumentOutOfRangeError}}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))};return e}();var c=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.total=t;r.count=0;return r}e.prototype._next=function(e){var t=this.total;var r=++this.count;if(r<=t){this.destination.next(e);if(r===t){this.destination.complete();this.unsubscribe()}}};return e}(n.Subscriber)},{"../Subscriber":55,"../observable/empty":65,"../util/ArgumentOutOfRangeError":211}],169:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");var o=e("../util/ArgumentOutOfRangeError");var a=e("../observable/empty");function s(r){return function e(t){if(r===0){return a.empty()}else{return t.lift(new u(r))}}}r.takeLast=s;var u=function(){function e(e){this.total=e;if(this.total<0){throw new o.ArgumentOutOfRangeError}}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))};return e}();var c=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.total=t;r.ring=new Array;r.count=0;return r}e.prototype._next=function(e){var t=this.ring;var r=this.total;var n=this.count++;if(t.length<r){t.push(e)}else{var i=n%r;t[i]=e}};e.prototype._complete=function(){var e=this.destination;var t=this.count;if(t>0){var r=this.count>=this.total?this.total:this.count;var n=this.ring;for(var i=0;i<r;i++){var o=t++%r;e.next(n[o])}}e.complete()};return e}(n.Subscriber)},{"../Subscriber":55,"../observable/empty":65,"../util/ArgumentOutOfRangeError":211}],170:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function a(t){return function(e){return e.lift(new s(t))}}r.takeUntil=a;var s=function(){function e(e){this.notifier=e}e.prototype.call=function(e,t){var r=new u(e);var n=o.subscribeToResult(r,this.notifier);if(n&&!r.seenValue){r.add(n);return t.subscribe(r)}return r};return e}();var u=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t.seenValue=false;return t}e.prototype.notifyNext=function(e,t,r,n,i){this.seenValue=true;this.complete()};e.prototype.notifyComplete=function(){};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],171:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");function o(t,r){if(r===void 0){r=false}return function(e){return e.lift(new a(t,r))}}r.takeWhile=o;var a=function(){function e(e,t){this.predicate=e;this.inclusive=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.inclusive))};return e}();var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.predicate=t;n.inclusive=r;n.index=0;return n}e.prototype._next=function(e){var t=this.destination;var r;try{r=this.predicate(e,this.index++)}catch(e){t.error(e);return}this.nextOrComplete(e,r)};e.prototype.nextOrComplete=function(e,t){var r=this.destination;if(Boolean(t)){r.next(e)}else{if(this.inclusive){r.next(e)}r.complete()}};return e}(i.Subscriber)},{"../Subscriber":55}],172:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var a=e("../util/noop");var s=e("../util/isFunction");function o(r,n,i){return function e(t){return t.lift(new u(r,n,i))}}r.tap=o;var u=function(){function e(e,t,r){this.nextOrObserver=e;this.error=t;this.complete=r}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))};return e}();var c=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e)||this;i._tapNext=a.noop;i._tapError=a.noop;i._tapComplete=a.noop;i._tapError=r||a.noop;i._tapComplete=n||a.noop;if(s.isFunction(t)){i._context=i;i._tapNext=t}else if(t){i._context=t;i._tapNext=t.next||a.noop;i._tapError=t.error||a.noop;i._tapComplete=t.complete||a.noop}return i}e.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){this.destination.error(e);return}this.destination.next(e)};e.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){this.destination.error(e);return}this.destination.error(e)};e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()};return e}(i.Subscriber)},{"../Subscriber":55,"../util/isFunction":223,"../util/noop":231}],173:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../OuterSubscriber");var a=e("../util/subscribeToResult");n.defaultThrottleConfig={leading:true,trailing:false};function o(t,r){if(r===void 0){r=n.defaultThrottleConfig}return function(e){return e.lift(new s(t,r.leading,r.trailing))}}n.throttle=o;var s=function(){function e(e,t,r){this.durationSelector=e;this.leading=t;this.trailing=r}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector,this.leading,this.trailing))};return e}();var u=function(o){r(e,o);function e(e,t,r,n){var i=o.call(this,e)||this;i.destination=e;i.durationSelector=t;i._leading=r;i._trailing=n;i._hasValue=false;return i}e.prototype._next=function(e){this._hasValue=true;this._sendValue=e;if(!this._throttled){if(this._leading){this.send()}else{this.throttle(e)}}};e.prototype.send=function(){var e=this,t=e._hasValue,r=e._sendValue;if(t){this.destination.next(r);this.throttle(r)}this._hasValue=false;this._sendValue=null};e.prototype.throttle=function(e){var t=this.tryDurationSelector(e);if(!!t){this.add(this._throttled=a.subscribeToResult(this,t))}};e.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){this.destination.error(e);return null}};e.prototype.throttlingDone=function(){var e=this,t=e._throttled,r=e._trailing;if(t){t.unsubscribe()}this._throttled=null;if(r){this.send()}};e.prototype.notifyNext=function(e,t,r,n,i){this.throttlingDone()};e.prototype.notifyComplete=function(){this.throttlingDone()};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],174:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var o=e("../scheduler/async");var a=e("./throttle");function s(t,r,n){if(r===void 0){r=o.async}if(n===void 0){n=a.defaultThrottleConfig}return function(e){return e.lift(new u(t,r,n.leading,n.trailing))}}r.throttleTime=s;var u=function(){function e(e,t,r,n){this.duration=e;this.scheduler=t;this.leading=r;this.trailing=n}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.duration,this.scheduler,this.leading,this.trailing))};return e}();var c=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e)||this;o.duration=t;o.scheduler=r;o.leading=n;o.trailing=i;o._hasTrailingValue=false;o._trailingValue=null;return o}e.prototype._next=function(e){if(this.throttled){if(this.trailing){this._trailingValue=e;this._hasTrailingValue=true}}else{this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this}));if(this.leading){this.destination.next(e)}else if(this.trailing){this._trailingValue=e;this._hasTrailingValue=true}}};e.prototype._complete=function(){if(this._hasTrailingValue){this.destination.next(this._trailingValue);this.destination.complete()}else{this.destination.complete()}};e.prototype.clearThrottle=function(){var e=this.throttled;if(e){if(this.trailing&&this._hasTrailingValue){this.destination.next(this._trailingValue);this._trailingValue=null;this._hasTrailingValue=false}e.unsubscribe();this.remove(e);this.throttled=null}};return e}(i.Subscriber);function l(e){var t=e.subscriber;t.clearThrottle()}},{"../Subscriber":55,"../scheduler/async":206,"./throttle":173}],175:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("../util/EmptyError");var o=e("../Subscriber");function a(t){if(t===void 0){t=c}return function(e){return e.lift(new s(t))}}r.throwIfEmpty=a;var s=function(){function e(e){this.errorFactory=e}e.prototype.call=function(e,t){return t.subscribe(new u(e,this.errorFactory))};return e}();var u=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.errorFactory=t;r.hasValue=false;return r}e.prototype._next=function(e){this.hasValue=true;this.destination.next(e)};e.prototype._complete=function(){if(!this.hasValue){var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}else{return this.destination.complete()}};return e}(o.Subscriber);function c(){return new n.EmptyError}},{"../Subscriber":55,"../util/EmptyError":212}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../scheduler/async");var o=e("./scan");var a=e("../observable/defer");var s=e("./map");function n(n){if(n===void 0){n=i.async}return function(e){return a.defer(function(){return e.pipe(o.scan(function(e,t){var r=e.current;return{value:t,current:n.now(),last:r}},{current:n.now(),value:undefined,last:undefined}),s.map(function(e){var t=e.current,r=e.last,n=e.value;return new u(n,t-r)}))})}}r.timeInterval=n;var u=function(){function e(e,t){this.value=e;this.interval=t}return e}();r.TimeInterval=u},{"../observable/defer":64,"../scheduler/async":206,"./map":125,"./scan":154}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../scheduler/async");var i=e("../util/TimeoutError");var o=e("./timeoutWith");var a=e("../observable/throwError");function s(e,t){if(t===void 0){t=n.async}return o.timeoutWith(e,a.throwError(new i.TimeoutError),t)}r.timeout=s},{"../observable/throwError":82,"../scheduler/async":206,"../util/TimeoutError":215,"./timeoutWith":178}],178:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../scheduler/async");var s=e("../util/isDate");var i=e("../OuterSubscriber");var o=e("../util/subscribeToResult");function u(n,i,o){if(o===void 0){o=a.async}return function(e){var t=s.isDate(n);var r=t?+n-o.now():Math.abs(n);return e.lift(new c(r,t,i,o))}}r.timeoutWith=u;var c=function(){function e(e,t,r,n){this.waitFor=e;this.absoluteTimeout=t;this.withObservable=r;this.scheduler=n}e.prototype.call=function(e,t){return t.subscribe(new l(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))};return e}();var l=function(a){n(t,a);function t(e,t,r,n,i){var o=a.call(this,e)||this;o.absoluteTimeout=t;o.waitFor=r;o.withObservable=n;o.scheduler=i;o.action=null;o.scheduleTimeout();return o}t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle();e.add(o.subscribeToResult(e,t))};t.prototype.scheduleTimeout=function(){var e=this.action;if(e){this.action=e.schedule(this,this.waitFor)}else{this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))}};t.prototype._next=function(e){if(!this.absoluteTimeout){this.scheduleTimeout()}a.prototype._next.call(this,e)};t.prototype._unsubscribe=function(){this.action=null;this.scheduler=null;this.withObservable=null};return t}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../scheduler/async":206,"../util/isDate":222,"../util/subscribeToResult":239}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../scheduler/async");var i=e("./map");function o(t){if(t===void 0){t=n.async}return i.map(function(e){return new a(e,t.now())})}r.timestamp=o;var a=function(){function e(e,t){this.value=e;this.timestamp=t}return e}();r.Timestamp=a},{"../scheduler/async":206,"./map":125}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./reduce");function i(e,t,r){if(r===0){return[t]}e.push(t);return e}function o(){return n.reduce(i,[])}r.toArray=o},{"./reduce":146}],181:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subject");var o=e("../OuterSubscriber");var a=e("../util/subscribeToResult");function s(r){return function e(t){return t.lift(new u(r))}}r.window=s;var u=function(){function e(e){this.windowBoundaries=e}e.prototype.call=function(e,t){var r=new c(e);var n=t.subscribe(r);if(!n.closed){r.add(a.subscribeToResult(r,this.windowBoundaries))}return n};return e}();var c=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t.window=new i.Subject;e.next(t.window);return t}e.prototype.notifyNext=function(e,t,r,n,i){this.openWindow()};e.prototype.notifyError=function(e,t){this._error(e)};e.prototype.notifyComplete=function(e){this._complete()};e.prototype._next=function(e){this.window.next(e)};e.prototype._error=function(e){this.window.error(e);this.destination.error(e)};e.prototype._complete=function(){this.window.complete();this.destination.complete()};e.prototype._unsubscribe=function(){this.window=null};e.prototype.openWindow=function(){var e=this.window;if(e){e.complete()}var t=this.destination;var r=this.window=new i.Subject;t.next(r)};return e}(o.OuterSubscriber)},{"../OuterSubscriber":50,"../Subject":53,"../util/subscribeToResult":239}],182:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscriber");var c=e("../Subject");function o(r,n){if(n===void 0){n=0}return function e(t){return t.lift(new a(r,n))}}r.windowCount=o;var a=function(){function e(e,t){this.windowSize=e;this.startWindowEvery=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.windowSize,this.startWindowEvery))};return e}();var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e)||this;n.destination=e;n.windowSize=t;n.startWindowEvery=r;n.windows=[new c.Subject];n.count=0;e.next(n.windows[0]);return n}e.prototype._next=function(e){var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize;var r=this.destination;var n=this.windowSize;var i=this.windows;var o=i.length;for(var a=0;a<o&&!this.closed;a++){i[a].next(e)}var s=this.count-n+1;if(s>=0&&s%t===0&&!this.closed){i.shift().complete()}if(++this.count%t===0&&!this.closed){var u=new c.Subject;i.push(u);r.next(u)}};e.prototype._error=function(e){var t=this.windows;if(t){while(t.length>0&&!this.closed){t.shift().error(e)}}this.destination.error(e)};e.prototype._complete=function(){var e=this.windows;if(e){while(e.length>0&&!this.closed){e.shift().complete()}}this.destination.complete()};e.prototype._unsubscribe=function(){this.count=0;this.windows=null};return e}(i.Subscriber)},{"../Subject":53,"../Subscriber":55}],183:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subject");var a=e("../scheduler/async");var o=e("../Subscriber");var s=e("../util/isNumeric");var u=e("../util/isScheduler");function c(r){var n=a.async;var i=null;var o=Number.POSITIVE_INFINITY;if(u.isScheduler(arguments[3])){n=arguments[3]}if(u.isScheduler(arguments[2])){n=arguments[2]}else if(s.isNumeric(arguments[2])){o=arguments[2]}if(u.isScheduler(arguments[1])){n=arguments[1]}else if(s.isNumeric(arguments[1])){i=arguments[1]}return function e(t){return t.lift(new l(r,i,o,n))}}r.windowTime=c;var l=function(){function e(e,t,r,n){this.windowTimeSpan=e;this.windowCreationInterval=t;this.maxWindowSize=r;this.scheduler=n}e.prototype.call=function(e,t){return t.subscribe(new p(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))};return e}();var h=function(t){n(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._numberOfNextedValues=0;return e}e.prototype.next=function(e){this._numberOfNextedValues++;t.prototype.next.call(this,e)};Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:true,configurable:true});return e}(i.Subject);var p=function(l){n(e,l);function e(e,t,r,n,i){var o=l.call(this,e)||this;o.destination=e;o.windowTimeSpan=t;o.windowCreationInterval=r;o.maxWindowSize=n;o.scheduler=i;o.windows=[];var a=o.openWindow();if(r!==null&&r>=0){var s={subscriber:o,window:a,context:null};var u={windowTimeSpan:t,windowCreationInterval:r,subscriber:o,scheduler:i};o.add(i.schedule(v,t,s));o.add(i.schedule(d,r,u))}else{var c={subscriber:o,window:a,windowTimeSpan:t};o.add(i.schedule(f,t,c))}return o}e.prototype._next=function(e){var t=this.windows;var r=t.length;for(var n=0;n<r;n++){var i=t[n];if(!i.closed){i.next(e);if(i.numberOfNextedValues>=this.maxWindowSize){this.closeWindow(i)}}}};e.prototype._error=function(e){var t=this.windows;while(t.length>0){t.shift().error(e)}this.destination.error(e)};e.prototype._complete=function(){var e=this.windows;while(e.length>0){var t=e.shift();if(!t.closed){t.complete()}}this.destination.complete()};e.prototype.openWindow=function(){var e=new h;this.windows.push(e);var t=this.destination;t.next(e);return e};e.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)};return e}(o.Subscriber);function f(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;if(n){t.closeWindow(n)}e.window=t.openWindow();this.schedule(e,r)}function d(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval;var o=r.openWindow();var a=this;var s={action:a,subscription:null};var u={subscriber:r,window:o,context:s};s.subscription=n.schedule(v,t,u);a.add(s.subscription);a.schedule(e,i)}function v(e){var t=e.subscriber,r=e.window,n=e.context;if(n&&n.action&&n.subscription){n.action.remove(n.subscription)}t.closeWindow(r)}},{"../Subject":53,"../Subscriber":55,"../scheduler/async":206,"../util/isNumeric":226,"../util/isScheduler":230}],184:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var h=e("../Subject");var p=e("../Subscription");var i=e("../OuterSubscriber");var f=e("../util/subscribeToResult");function o(t,r){return function(e){return e.lift(new a(t,r))}}r.windowToggle=o;var a=function(){function e(e,t){this.openings=e;this.closingSelector=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.openings,this.closingSelector))};return e}();var s=function(o){n(e,o);function e(e,t,r){var n=o.call(this,e)||this;n.openings=t;n.closingSelector=r;n.contexts=[];n.add(n.openSubscription=f.subscribeToResult(n,t,t));return n}e.prototype._next=function(e){var t=this.contexts;if(t){var r=t.length;for(var n=0;n<r;n++){t[n].window.next(e)}}};e.prototype._error=function(e){var t=this.contexts;this.contexts=null;if(t){var r=t.length;var n=-1;while(++n<r){var i=t[n];i.window.error(e);i.subscription.unsubscribe()}}o.prototype._error.call(this,e)};e.prototype._complete=function(){var e=this.contexts;this.contexts=null;if(e){var t=e.length;var r=-1;while(++r<t){var n=e[r];n.window.complete();n.subscription.unsubscribe()}}o.prototype._complete.call(this)};e.prototype._unsubscribe=function(){var e=this.contexts;this.contexts=null;if(e){var t=e.length;var r=-1;while(++r<t){var n=e[r];n.window.unsubscribe();n.subscription.unsubscribe()}}};e.prototype.notifyNext=function(e,t,r,n,i){if(e===this.openings){var o=void 0;try{var a=this.closingSelector;o=a(t)}catch(e){return this.error(e)}var s=new h.Subject;var u=new p.Subscription;var c={window:s,subscription:u};this.contexts.push(c);var l=f.subscribeToResult(this,o,c);if(l.closed){this.closeWindow(this.contexts.length-1)}else{l.context=c;u.add(l)}this.destination.next(s)}else{this.closeWindow(this.contexts.indexOf(e))}};e.prototype.notifyError=function(e){this.error(e)};e.prototype.notifyComplete=function(e){if(e!==this.openSubscription){this.closeWindow(this.contexts.indexOf(e.context))}};e.prototype.closeWindow=function(e){if(e===-1){return}var t=this.contexts;var r=t[e];var n=r.window,i=r.subscription;t.splice(e,1);n.complete();i.unsubscribe()};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../Subject":53,"../Subscription":56,"../util/subscribeToResult":239}],185:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var o=e("../Subject");var n=e("../OuterSubscriber");var a=e("../util/subscribeToResult");function s(r){return function e(t){return t.lift(new u(r))}}r.windowWhen=s;var u=function(){function e(e){this.closingSelector=e}e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingSelector))};return e}();var c=function(n){i(e,n);function e(e,t){var r=n.call(this,e)||this;r.destination=e;r.closingSelector=t;r.openWindow();return r}e.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)};e.prototype.notifyError=function(e,t){this._error(e)};e.prototype.notifyComplete=function(e){this.openWindow(e)};e.prototype._next=function(e){this.window.next(e)};e.prototype._error=function(e){this.window.error(e);this.destination.error(e);this.unsubscribeClosingNotification()};e.prototype._complete=function(){this.window.complete();this.destination.complete();this.unsubscribeClosingNotification()};e.prototype.unsubscribeClosingNotification=function(){if(this.closingNotification){this.closingNotification.unsubscribe()}};e.prototype.openWindow=function(e){if(e===void 0){e=null}if(e){this.remove(e);e.unsubscribe()}var t=this.window;if(t){t.complete()}var r=this.window=new o.Subject;this.destination.next(r);var n;try{var i=this.closingSelector;n=i()}catch(e){this.destination.error(e);this.window.error(e);return}this.add(this.closingNotification=a.subscribeToResult(this,n))};return e}(n.OuterSubscriber)},{"../OuterSubscriber":50,"../Subject":53,"../util/subscribeToResult":239}],186:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../OuterSubscriber");var u=e("../util/subscribeToResult");function o(){var n=[];for(var e=0;e<arguments.length;e++){n[e]=arguments[e]}return function(e){var t;if(typeof n[n.length-1]==="function"){t=n.pop()}var r=n;return e.lift(new a(r,t))}}r.withLatestFrom=o;var a=function(){function e(e,t){this.observables=e;this.project=t}e.prototype.call=function(e,t){return t.subscribe(new s(e,this.observables,this.project))};return e}();var s=function(s){n(e,s);function e(e,t,r){var n=s.call(this,e)||this;n.observables=t;n.project=r;n.toRespond=[];var i=t.length;n.values=new Array(i);for(var o=0;o<i;o++){n.toRespond.push(o)}for(var o=0;o<i;o++){var a=t[o];n.add(u.subscribeToResult(n,a,a,o))}return n}e.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t;var o=this.toRespond;if(o.length>0){var a=o.indexOf(r);if(a!==-1){o.splice(a,1)}}};e.prototype.notifyComplete=function(){};e.prototype._next=function(e){if(this.toRespond.length===0){var t=[e].concat(this.values);if(this.project){this._tryProject(t)}else{this.destination.next(t)}}};e.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){this.destination.error(e);return}this.destination.next(t)};return e}(i.OuterSubscriber)},{"../OuterSubscriber":50,"../util/subscribeToResult":239}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/zip");function i(){var r=[];for(var e=0;e<arguments.length;e++){r[e]=arguments[e]}return function e(t){return t.lift.call(n.zip.apply(void 0,[t].concat(r)))}}r.zip=i},{"../observable/zip":85}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../observable/zip");function i(t){return function(e){return e.lift(new n.ZipOperator(t))}}r.zipAll=i},{"../observable/zip":85}],189:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../Subscription");function n(n,i){return new o.Observable(function(e){var t=new a.Subscription;var r=0;t.add(i.schedule(function(){if(r===n.length){e.complete();return}e.next(n[r++]);if(!e.closed){t.add(this.schedule())}}));return t})}r.scheduleArray=n},{"../Observable":48,"../Subscription":56}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");var o=e("../Subscription");var a=e("../symbol/iterator");function i(t,r){if(!t){throw new Error("Iterable cannot be null")}return new n.Observable(function(n){var e=new o.Subscription;var i;e.add(function(){if(i&&typeof i.return==="function"){i.return()}});e.add(r.schedule(function(){i=t[a.iterator]();e.add(r.schedule(function(){if(n.closed){return}var e;var t;try{var r=i.next();e=r.value;t=r.done}catch(e){n.error(e);return}if(t){n.complete()}else{n.next(e);this.schedule()}}))}));return e})}r.scheduleIterable=i},{"../Observable":48,"../Subscription":56,"../symbol/iterator":208}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Observable");var a=e("../Subscription");var s=e("../symbol/observable");function n(n,i){return new o.Observable(function(t){var r=new a.Subscription;r.add(i.schedule(function(){var e=n[s.observable]();r.add(e.subscribe({next:function(e){r.add(i.schedule(function(){return t.next(e)}))},error:function(e){r.add(i.schedule(function(){return t.error(e)}))},complete:function(){r.add(i.schedule(function(){return t.complete()}))}}))}));return r})}r.scheduleObservable=n},{"../Observable":48,"../Subscription":56,"../symbol/observable":209}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../Observable");var o=e("../Subscription");function n(e,n){return new i.Observable(function(t){var r=new o.Subscription;r.add(n.schedule(function(){return e.then(function(e){r.add(n.schedule(function(){t.next(e);r.add(n.schedule(function(){return t.complete()}))}))},function(e){r.add(n.schedule(function(){return t.error(e)}))})}));return r})}r.schedulePromise=n},{"../Observable":48,"../Subscription":56}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./scheduleObservable");var i=e("./schedulePromise");var o=e("./scheduleArray");var a=e("./scheduleIterable");var s=e("../util/isInteropObservable");var u=e("../util/isPromise");var c=e("../util/isArrayLike");var l=e("../util/isIterable");function h(e,t){if(e!=null){if(s.isInteropObservable(e)){return n.scheduleObservable(e,t)}else if(u.isPromise(e)){return i.schedulePromise(e,t)}else if(c.isArrayLike(e)){return o.scheduleArray(e,t)}else if(l.isIterable(e)||typeof e==="string"){return a.scheduleIterable(e,t)}}throw new TypeError((e!==null&&typeof e||e)+" is not observable")}r.scheduled=h},{"../util/isArrayLike":221,"../util/isInteropObservable":224,"../util/isIterable":225,"../util/isPromise":229,"./scheduleArray":189,"./scheduleIterable":190,"./scheduleObservable":191,"./schedulePromise":192}],194:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("../Subscription");var o=function(r){n(e,r);function e(e,t){return r.call(this)||this}e.prototype.schedule=function(e,t){if(t===void 0){t=0}return this};return e}(i.Subscription);r.Action=o},{"../Subscription":56}],195:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("./AsyncAction");var o=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r.scheduler=e;r.work=t;return r}e.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!==null&&r>0){return n.prototype.requestAsyncId.call(this,e,t,r)}e.actions.push(this);return e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)}))};e.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!==null&&r>0||r===null&&this.delay>0){return n.prototype.recycleAsyncId.call(this,e,t,r)}if(e.actions.length===0){cancelAnimationFrame(t);e.scheduled=undefined}return undefined};return e}(n.AsyncAction);r.AnimationFrameAction=o},{"./AsyncAction":199}],196:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./AsyncScheduler");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.flush=function(e){this.active=true;this.scheduled=undefined;var t=this.actions;var r;var n=-1;var i=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay)){break}}while(++n<i&&(e=t.shift()));this.active=false;if(r){while(++n<i&&(e=t.shift())){e.unsubscribe()}throw r}};return t}(i.AsyncScheduler);r.AnimationFrameScheduler=o},{"./AsyncScheduler":200}],197:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var o=e("../util/Immediate");var n=e("./AsyncAction");var a=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r.scheduler=e;r.work=t;return r}e.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!==null&&r>0){return n.prototype.requestAsyncId.call(this,e,t,r)}e.actions.push(this);return e.scheduled||(e.scheduled=o.Immediate.setImmediate(e.flush.bind(e,null)))};e.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!==null&&r>0||r===null&&this.delay>0){return n.prototype.recycleAsyncId.call(this,e,t,r)}if(e.actions.length===0){o.Immediate.clearImmediate(t);e.scheduled=undefined}return undefined};return e}(n.AsyncAction);r.AsapAction=a},{"../util/Immediate":213,"./AsyncAction":199}],198:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./AsyncScheduler");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.flush=function(e){this.active=true;this.scheduled=undefined;var t=this.actions;var r;var n=-1;var i=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay)){break}}while(++n<i&&(e=t.shift()));this.active=false;if(r){while(++n<i&&(e=t.shift())){e.unsubscribe()}throw r}};return t}(i.AsyncScheduler);r.AsapScheduler=o},{"./AsyncScheduler":200}],199:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("./Action");var o=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r.scheduler=e;r.work=t;r.pending=false;return r}e.prototype.schedule=function(e,t){if(t===void 0){t=0}if(this.closed){return this}this.state=e;var r=this.id;var n=this.scheduler;if(r!=null){this.id=this.recycleAsyncId(n,r,t)}this.pending=true;this.delay=t;this.id=this.id||this.requestAsyncId(n,this.id,t);return this};e.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}return setInterval(e.flush.bind(e,this),r)};e.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!==null&&this.delay===r&&this.pending===false){return t}clearInterval(t);return undefined};e.prototype.execute=function(e,t){if(this.closed){return new Error("executing a cancelled action")}this.pending=false;var r=this._execute(e,t);if(r){return r}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null)}};e.prototype._execute=function(e,t){var r=false;var n=undefined;try{this.work(e)}catch(e){r=true;n=!!e&&e||new Error(e)}if(r){this.unsubscribe();return n}};e.prototype._unsubscribe=function(){var e=this.id;var t=this.scheduler;var r=t.actions;var n=r.indexOf(this);this.work=null;this.state=null;this.pending=false;this.scheduler=null;if(n!==-1){r.splice(n,1)}if(e!=null){this.id=this.recycleAsyncId(t,e,null)}this.delay=null};return e}(n.Action);r.AsyncAction=o},{"./Action":194}],200:[function(e,t,r){"use strict";var o=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var a=e("../Scheduler");var n=function(n){o(i,n);function i(e,t){if(t===void 0){t=a.Scheduler.now}var r=n.call(this,e,function(){if(i.delegate&&i.delegate!==r){return i.delegate.now()}else{return t()}})||this;r.actions=[];r.active=false;r.scheduled=undefined;return r}i.prototype.schedule=function(e,t,r){if(t===void 0){t=0}if(i.delegate&&i.delegate!==this){return i.delegate.schedule(e,t,r)}else{return n.prototype.schedule.call(this,e,t,r)}};i.prototype.flush=function(e){var t=this.actions;if(this.active){t.push(e);return}var r;this.active=true;do{if(r=e.execute(e.state,e.delay)){break}}while(e=t.shift());this.active=false;if(r){while(e=t.shift()){e.unsubscribe()}throw r}};return i}(a.Scheduler);r.AsyncScheduler=n},{"../Scheduler":52}],201:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("./AsyncAction");var o=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r.scheduler=e;r.work=t;return r}e.prototype.schedule=function(e,t){if(t===void 0){t=0}if(t>0){return n.prototype.schedule.call(this,e,t)}this.delay=t;this.state=e;this.scheduler.flush(this);return this};e.prototype.execute=function(e,t){return t>0||this.closed?n.prototype.execute.call(this,e,t):this._execute(e,t)};e.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!==null&&r>0||r===null&&this.delay>0){return n.prototype.requestAsyncId.call(this,e,t,r)}return e.flush(this)};return e}(n.AsyncAction);r.QueueAction=o},{"./AsyncAction":199}],202:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var i=e("./AsyncScheduler");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(i.AsyncScheduler);r.QueueScheduler=o},{"./AsyncScheduler":200}],203:[function(e,t,r){"use strict";var a=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});var n=e("./AsyncAction");var i=e("./AsyncScheduler");var o=function(n){a(e,n);function e(e,t){if(e===void 0){e=s}if(t===void 0){t=Number.POSITIVE_INFINITY}var r=n.call(this,e,function(){return r.frame})||this;r.maxFrames=t;r.frame=0;r.index=-1;return r}e.prototype.flush=function(){var e=this,t=e.actions,r=e.maxFrames;var n,i;while((i=t[0])&&i.delay<=r){t.shift();this.frame=i.delay;if(n=i.execute(i.state,i.delay)){break}}if(n){while(i=t.shift()){i.unsubscribe()}throw n}};e.frameTimeFactor=10;return e}(i.AsyncScheduler);r.VirtualTimeScheduler=o;var s=function(i){a(o,i);function o(e,t,r){if(r===void 0){r=e.index+=1}var n=i.call(this,e,t)||this;n.scheduler=e;n.work=t;n.index=r;n.active=true;n.index=e.index=r;return n}o.prototype.schedule=function(e,t){if(t===void 0){t=0}if(!this.id){return i.prototype.schedule.call(this,e,t)}this.active=false;var r=new o(this.scheduler,this.work);this.add(r);return r.schedule(e,t)};o.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}this.delay=e.frame+r;var n=e.actions;n.push(this);n.sort(o.sortActions);return true};o.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}return undefined};o.prototype._execute=function(e,t){if(this.active===true){return i.prototype._execute.call(this,e,t)}};o.sortActions=function(e,t){if(e.delay===t.delay){if(e.index===t.index){return 0}else if(e.index>t.index){return 1}else{return-1}}else if(e.delay>t.delay){return 1}else{return-1}};return o}(n.AsyncAction);r.VirtualAction=s},{"./AsyncAction":199,"./AsyncScheduler":200}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./AnimationFrameAction");var i=e("./AnimationFrameScheduler");r.animationFrame=new i.AnimationFrameScheduler(n.AnimationFrameAction)},{"./AnimationFrameAction":195,"./AnimationFrameScheduler":196}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./AsapAction");var i=e("./AsapScheduler");r.asap=new i.AsapScheduler(n.AsapAction)},{"./AsapAction":197,"./AsapScheduler":198}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./AsyncAction");var i=e("./AsyncScheduler");r.async=new i.AsyncScheduler(n.AsyncAction)},{"./AsyncAction":199,"./AsyncScheduler":200}],207:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./QueueAction");var i=e("./QueueScheduler");r.queue=new i.QueueScheduler(n.QueueAction)},{"./QueueAction":201,"./QueueScheduler":202}],208:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(){if(typeof Symbol!=="function"||!Symbol.iterator){return"@@iterator"}return Symbol.iterator}r.getSymbolIterator=n;r.iterator=n();r.$$iterator=r.iterator},{}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.observable=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}()},{}],210:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.rxSubscriber=function(){return typeof Symbol==="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();r.$$rxSubscriber=r.rxSubscriber},{}],211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(){Error.call(this);this.message="argument out of range";this.name="ArgumentOutOfRangeError";return this}e.prototype=Object.create(Error.prototype);return e}();r.ArgumentOutOfRangeError=n},{}],212:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(){Error.call(this);this.message="no elements in sequence";this.name="EmptyError";return this}e.prototype=Object.create(Error.prototype);return e}();r.EmptyError=n},{}],213:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=1;var i=function(){return Promise.resolve()}();var o={};function a(e){if(e in o){delete o[e];return true}return false}r.Immediate={setImmediate:function(e){var t=n++;o[t]=true;i.then(function(){return a(t)&&e()});return t},clearImmediate:function(e){a(e)}};r.TestTools={pending:function(){return Object.keys(o).length}}},{}],214:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(){Error.call(this);this.message="object unsubscribed";this.name="ObjectUnsubscribedError";return this}e.prototype=Object.create(Error.prototype);return e}();r.ObjectUnsubscribedError=n},{}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(){Error.call(this);this.message="Timeout has occurred";this.name="TimeoutError";return this}e.prototype=Object.create(Error.prototype);return e}();r.TimeoutError=n},{}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e){Error.call(this);this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"";this.name="UnsubscriptionError";this.errors=e;return this}e.prototype=Object.create(Error.prototype);return e}();r.UnsubscriptionError=n},{}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../Subscriber");function n(e){while(e){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i){return false}else if(n&&n instanceof o.Subscriber){e=n}else{e=null}}return true}r.canReportError=n},{"../Subscriber":55}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){setTimeout(function(){throw e},0)}r.hostReportError=n},{}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e}r.identity=n},{}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.isArray=function(){return Array.isArray||function(e){return e&&typeof e.length==="number"}}()},{}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.isArrayLike=function(e){return e&&typeof e.length==="number"&&typeof e!=="function"}},{}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e instanceof Date&&!isNaN(+e)}r.isDate=n},{}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return typeof e==="function"}r.isFunction=n},{}],224:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../symbol/observable");function i(e){return e&&typeof e[n.observable]==="function"}r.isInteropObservable=i},{"../symbol/observable":209}],225:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../symbol/iterator");function i(e){return e&&typeof e[n.iterator]==="function"}r.isIterable=i},{"../symbol/iterator":208}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./isArray");function i(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0}r.isNumeric=i},{"./isArray":220}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e!==null&&typeof e==="object"}r.isObject=n},{}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Observable");function i(e){return!!e&&(e instanceof n.Observable||typeof e.lift==="function"&&typeof e.subscribe==="function")}r.isObservable=i},{"../Observable":48}],229:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return!!e&&typeof e.subscribe!=="function"&&typeof e.then==="function"}r.isPromise=n},{}],230:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&typeof e.schedule==="function"}r.isScheduler=n},{}],231:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(){}r.noop=n},{}],232:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}r.pred=e;r.thisArg=t;return r}r.not=n},{}],233:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./identity");function i(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o(e)}r.pipe=i;function o(r){if(r.length===0){return n.identity}if(r.length===1){return r[0]}return function e(t){return r.reduce(function(e,t){return t(e)},t)}}r.pipeFromArray=o},{"./identity":219}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./subscribeToArray");var i=e("./subscribeToPromise");var o=e("./subscribeToIterable");var a=e("./subscribeToObservable");var s=e("./isArrayLike");var u=e("./isPromise");var c=e("./isObject");var l=e("../symbol/iterator");var h=e("../symbol/observable");r.subscribeTo=function(e){if(!!e&&typeof e[h.observable]==="function"){return a.subscribeToObservable(e)}else if(s.isArrayLike(e)){return n.subscribeToArray(e)}else if(u.isPromise(e)){return i.subscribeToPromise(e)}else if(!!e&&typeof e[l.iterator]==="function"){return o.subscribeToIterable(e)}else{var t=c.isObject(e)?"an invalid object":"'"+e+"'";var r="You provided "+t+" where a stream was expected."+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)}}},{"../symbol/iterator":208,"../symbol/observable":209,"./isArrayLike":221,"./isObject":227,"./isPromise":229,"./subscribeToArray":235,"./subscribeToIterable":236,"./subscribeToObservable":237,"./subscribeToPromise":238}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.subscribeToArray=function(n){return function(e){for(var t=0,r=n.length;t<r&&!e.closed;t++){e.next(n[t])}e.complete()}}},{}],236:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("../symbol/iterator");r.subscribeToIterable=function(n){return function(e){var t=n[i.iterator]();do{var r=t.next();if(r.done){e.complete();break}e.next(r.value);if(e.closed){break}}while(true);if(typeof t.return==="function"){e.add(function(){if(t.return){t.return()}})}return e}}},{"../symbol/iterator":208}],237:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../symbol/observable");r.subscribeToObservable=function(r){return function(e){var t=r[n.observable]();if(typeof t.subscribe!=="function"){throw new TypeError("Provided object does not correctly implement Symbol.observable")}else{return t.subscribe(e)}}}},{"../symbol/observable":209}],238:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./hostReportError");r.subscribeToPromise=function(e){return function(t){e.then(function(e){if(!t.closed){t.next(e);t.complete()}},function(e){return t.error(e)}).then(null,n.hostReportError);return t}}},{"./hostReportError":218}],239:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=e("../InnerSubscriber");var a=e("./subscribeTo");var s=e("../Observable");function n(e,t,r,n,i){if(i===void 0){i=new o.InnerSubscriber(e,r,n)}if(i.closed){return undefined}if(t instanceof s.Observable){return t.subscribe(i)}return a.subscribeTo(t)(i)}r.subscribeToResult=n},{"../InnerSubscriber":46,"../Observable":48,"./subscribeTo":234}],240:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../Subscriber");var i=e("../symbol/rxSubscriber");var o=e("../Observer");function a(e,t,r){if(e){if(e instanceof n.Subscriber){return e}if(e[i.rxSubscriber]){return e[i.rxSubscriber]()}}if(!e&&!t&&!r){return new n.Subscriber(o.empty)}return new n.Subscriber(e,t,r)}r.toSubscriber=a},{"../Observer":49,"../Subscriber":55,"../symbol/rxSubscriber":210}],241:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("../internal/operators/audit");r.audit=n.audit;var i=e("../internal/operators/auditTime");r.auditTime=i.auditTime;var o=e("../internal/operators/buffer");r.buffer=o.buffer;var a=e("../internal/operators/bufferCount");r.bufferCount=a.bufferCount;var s=e("../internal/operators/bufferTime");r.bufferTime=s.bufferTime;var u=e("../internal/operators/bufferToggle");r.bufferToggle=u.bufferToggle;var c=e("../internal/operators/bufferWhen");r.bufferWhen=c.bufferWhen;var l=e("../internal/operators/catchError");r.catchError=l.catchError;var h=e("../internal/operators/combineAll");r.combineAll=h.combineAll;var p=e("../internal/operators/combineLatest");r.combineLatest=p.combineLatest;var f=e("../internal/operators/concat");r.concat=f.concat;var d=e("../internal/operators/concatAll");r.concatAll=d.concatAll;var v=e("../internal/operators/concatMap");r.concatMap=v.concatMap;var m=e("../internal/operators/concatMapTo");r.concatMapTo=m.concatMapTo;var g=e("../internal/operators/count");r.count=g.count;var _=e("../internal/operators/debounce");r.debounce=_.debounce;var y=e("../internal/operators/debounceTime");r.debounceTime=y.debounceTime;var b=e("../internal/operators/defaultIfEmpty");r.defaultIfEmpty=b.defaultIfEmpty;var x=e("../internal/operators/delay");r.delay=x.delay;var w=e("../internal/operators/delayWhen");r.delayWhen=w.delayWhen;var S=e("../internal/operators/dematerialize");r.dematerialize=S.dematerialize;var M=e("../internal/operators/distinct");r.distinct=M.distinct;var C=e("../internal/operators/distinctUntilChanged");r.distinctUntilChanged=C.distinctUntilChanged;var T=e("../internal/operators/distinctUntilKeyChanged");r.distinctUntilKeyChanged=T.distinctUntilKeyChanged;var E=e("../internal/operators/elementAt");r.elementAt=E.elementAt;var O=e("../internal/operators/endWith");r.endWith=O.endWith;var P=e("../internal/operators/every");r.every=P.every;var A=e("../internal/operators/exhaust");r.exhaust=A.exhaust;var j=e("../internal/operators/exhaustMap");r.exhaustMap=j.exhaustMap;var R=e("../internal/operators/expand");r.expand=R.expand;var k=e("../internal/operators/filter");r.filter=k.filter;var L=e("../internal/operators/finalize");r.finalize=L.finalize;var N=e("../internal/operators/find");r.find=N.find;var I=e("../internal/operators/findIndex");r.findIndex=I.findIndex;var D=e("../internal/operators/first");r.first=D.first;var B=e("../internal/operators/groupBy");r.groupBy=B.groupBy;var F=e("../internal/operators/ignoreElements");r.ignoreElements=F.ignoreElements;var z=e("../internal/operators/isEmpty");r.isEmpty=z.isEmpty;var $=e("../internal/operators/last");r.last=$.last;var G=e("../internal/operators/map");r.map=G.map;var V=e("../internal/operators/mapTo");r.mapTo=V.mapTo;var H=e("../internal/operators/materialize");r.materialize=H.materialize;var U=e("../internal/operators/max");r.max=U.max;var q=e("../internal/operators/merge");r.merge=q.merge;var W=e("../internal/operators/mergeAll");r.mergeAll=W.mergeAll;var X=e("../internal/operators/mergeMap");r.mergeMap=X.mergeMap;var Y=e("../internal/operators/mergeMap");r.flatMap=Y.mergeMap;var K=e("../internal/operators/mergeMapTo");r.mergeMapTo=K.mergeMapTo;var Z=e("../internal/operators/mergeScan");r.mergeScan=Z.mergeScan;var J=e("../internal/operators/min");r.min=J.min;var Q=e("../internal/operators/multicast");r.multicast=Q.multicast;var ee=e("../internal/operators/observeOn");r.observeOn=ee.observeOn;var te=e("../internal/operators/onErrorResumeNext");r.onErrorResumeNext=te.onErrorResumeNext;var re=e("../internal/operators/pairwise");r.pairwise=re.pairwise;var ne=e("../internal/operators/partition");r.partition=ne.partition;var ie=e("../internal/operators/pluck");r.pluck=ie.pluck;var oe=e("../internal/operators/publish");r.publish=oe.publish;var ae=e("../internal/operators/publishBehavior");r.publishBehavior=ae.publishBehavior;var se=e("../internal/operators/publishLast");r.publishLast=se.publishLast;var ue=e("../internal/operators/publishReplay");r.publishReplay=ue.publishReplay;var ce=e("../internal/operators/race");r.race=ce.race;var le=e("../internal/operators/reduce");r.reduce=le.reduce;var he=e("../internal/operators/repeat");r.repeat=he.repeat;var pe=e("../internal/operators/repeatWhen");r.repeatWhen=pe.repeatWhen;var fe=e("../internal/operators/retry");r.retry=fe.retry;var de=e("../internal/operators/retryWhen");r.retryWhen=de.retryWhen;var ve=e("../internal/operators/refCount");r.refCount=ve.refCount;var me=e("../internal/operators/sample");r.sample=me.sample;var ge=e("../internal/operators/sampleTime");r.sampleTime=ge.sampleTime;var _e=e("../internal/operators/scan");r.scan=_e.scan;var ye=e("../internal/operators/sequenceEqual");r.sequenceEqual=ye.sequenceEqual;var be=e("../internal/operators/share");r.share=be.share;var xe=e("../internal/operators/shareReplay");r.shareReplay=xe.shareReplay;var we=e("../internal/operators/single");r.single=we.single;var Se=e("../internal/operators/skip");r.skip=Se.skip;var Me=e("../internal/operators/skipLast");r.skipLast=Me.skipLast;var Ce=e("../internal/operators/skipUntil");r.skipUntil=Ce.skipUntil;var Te=e("../internal/operators/skipWhile");r.skipWhile=Te.skipWhile;var Ee=e("../internal/operators/startWith");r.startWith=Ee.startWith;var Oe=e("../internal/operators/subscribeOn");r.subscribeOn=Oe.subscribeOn;var Pe=e("../internal/operators/switchAll");r.switchAll=Pe.switchAll;var Ae=e("../internal/operators/switchMap");r.switchMap=Ae.switchMap;var je=e("../internal/operators/switchMapTo");r.switchMapTo=je.switchMapTo;var Re=e("../internal/operators/take");r.take=Re.take;var ke=e("../internal/operators/takeLast");r.takeLast=ke.takeLast;var Le=e("../internal/operators/takeUntil");r.takeUntil=Le.takeUntil;var Ne=e("../internal/operators/takeWhile");r.takeWhile=Ne.takeWhile;var Ie=e("../internal/operators/tap");r.tap=Ie.tap;var De=e("../internal/operators/throttle");r.throttle=De.throttle;var Be=e("../internal/operators/throttleTime");r.throttleTime=Be.throttleTime;var Fe=e("../internal/operators/throwIfEmpty");r.throwIfEmpty=Fe.throwIfEmpty;var ze=e("../internal/operators/timeInterval");r.timeInterval=ze.timeInterval;var $e=e("../internal/operators/timeout");r.timeout=$e.timeout;var Ge=e("../internal/operators/timeoutWith");r.timeoutWith=Ge.timeoutWith;var Ve=e("../internal/operators/timestamp");r.timestamp=Ve.timestamp;var He=e("../internal/operators/toArray");r.toArray=He.toArray;var Ue=e("../internal/operators/window");r.window=Ue.window;var qe=e("../internal/operators/windowCount");r.windowCount=qe.windowCount;var We=e("../internal/operators/windowTime");r.windowTime=We.windowTime;var Xe=e("../internal/operators/windowToggle");r.windowToggle=Xe.windowToggle;var Ye=e("../internal/operators/windowWhen");r.windowWhen=Ye.windowWhen;var Ke=e("../internal/operators/withLatestFrom");r.withLatestFrom=Ke.withLatestFrom;var Ze=e("../internal/operators/zip");r.zip=Ze.zip;var Je=e("../internal/operators/zipAll");r.zipAll=Je.zipAll},{"../internal/operators/audit":86,"../internal/operators/auditTime":87,"../internal/operators/buffer":88,"../internal/operators/bufferCount":89,"../internal/operators/bufferTime":90,"../internal/operators/bufferToggle":91,"../internal/operators/bufferWhen":92,"../internal/operators/catchError":93,"../internal/operators/combineAll":94,"../internal/operators/combineLatest":95,"../internal/operators/concat":96,"../internal/operators/concatAll":97,"../internal/operators/concatMap":98,"../internal/operators/concatMapTo":99,"../internal/operators/count":100,"../internal/operators/debounce":101,"../internal/operators/debounceTime":102,"../internal/operators/defaultIfEmpty":103,"../internal/operators/delay":104,"../internal/operators/delayWhen":105,"../internal/operators/dematerialize":106,"../internal/operators/distinct":107,"../internal/operators/distinctUntilChanged":108,"../internal/operators/distinctUntilKeyChanged":109,"../internal/operators/elementAt":110,"../internal/operators/endWith":111,"../internal/operators/every":112,"../internal/operators/exhaust":113,"../internal/operators/exhaustMap":114,"../internal/operators/expand":115,"../internal/operators/filter":116,"../internal/operators/finalize":117,"../internal/operators/find":118,"../internal/operators/findIndex":119,"../internal/operators/first":120,"../internal/operators/groupBy":121,"../internal/operators/ignoreElements":122,"../internal/operators/isEmpty":123,"../internal/operators/last":124,"../internal/operators/map":125,"../internal/operators/mapTo":126,"../internal/operators/materialize":127,"../internal/operators/max":128,"../internal/operators/merge":129,"../internal/operators/mergeAll":130,"../internal/operators/mergeMap":131,"../internal/operators/mergeMapTo":132,"../internal/operators/mergeScan":133,"../internal/operators/min":134,"../internal/operators/multicast":135,"../internal/operators/observeOn":136,"../internal/operators/onErrorResumeNext":137,"../internal/operators/pairwise":138,"../internal/operators/partition":139,"../internal/operators/pluck":140,"../internal/operators/publish":141,"../internal/operators/publishBehavior":142,"../internal/operators/publishLast":143,"../internal/operators/publishReplay":144,"../internal/operators/race":145,"../internal/operators/reduce":146,"../internal/operators/refCount":147,"../internal/operators/repeat":148,"../internal/operators/repeatWhen":149,"../internal/operators/retry":150,"../internal/operators/retryWhen":151,"../internal/operators/sample":152,"../internal/operators/sampleTime":153,"../internal/operators/scan":154,"../internal/operators/sequenceEqual":155,"../internal/operators/share":156,"../internal/operators/shareReplay":157,"../internal/operators/single":158,"../internal/operators/skip":159,"../internal/operators/skipLast":160,"../internal/operators/skipUntil":161,"../internal/operators/skipWhile":162,"../internal/operators/startWith":163,"../internal/operators/subscribeOn":164,"../internal/operators/switchAll":165,"../internal/operators/switchMap":166,"../internal/operators/switchMapTo":167,"../internal/operators/take":168,"../internal/operators/takeLast":169,"../internal/operators/takeUntil":170,"../internal/operators/takeWhile":171,"../internal/operators/tap":172,"../internal/operators/throttle":173,"../internal/operators/throttleTime":174,"../internal/operators/throwIfEmpty":175,"../internal/operators/timeInterval":176,"../internal/operators/timeout":177,"../internal/operators/timeoutWith":178,"../internal/operators/timestamp":179,"../internal/operators/toArray":180,"../internal/operators/window":181,"../internal/operators/windowCount":182,"../internal/operators/windowTime":183,"../internal/operators/windowToggle":184,"../internal/operators/windowWhen":185,"../internal/operators/withLatestFrom":186,"../internal/operators/zip":187,"../internal/operators/zipAll":188}],242:[function(e,r,n){(function(e,t){"object"===typeof n&&"undefined"!==typeof r?t(n):"function"===typeof o&&o.amd?o(["exports"],t):(e=e||self,t(e.THREE={}))})(this,function(e){function t(){}function Me(e,t){this.x=e||0;this.y=t||0}function m(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function p(e,t,r,n,i,o,a,s,u,c){Object.defineProperty(this,"id",{value:qo++});this.uuid=Vo.generateUUID();this.name="";this.image=void 0!==e?e:p.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==t?t:p.DEFAULT_MAPPING;this.wrapS=void 0!==r?r:1001;this.wrapT=void 0!==n?n:1001;this.magFilter=void 0!==i?i:1006;this.minFilter=void 0!==o?o:1008;this.anisotropy=void 0!==u?u:1;this.format=void 0!==a?a:1023;this.internalFormat=null;this.type=void 0!==s?s:1009;this.offset=new Me(0,0);this.repeat=new Me(1,1);this.center=new Me(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new m;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==c?c:3e3;this.version=0;this.onUpdate=null}function Ce(e,t,r,n){this.x=e||0;this.y=t||0;this.z=r||0;this.w=void 0!==n?n:1}function T(e,t,r){this.width=e;this.height=t;this.scissor=new Ce(0,0,e,t);this.scissorTest=!1;this.viewport=new Ce(0,0,e,t);r=r||{};this.texture=new p(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding);this.texture.image={};this.texture.image.width=e;this.texture.image.height=t;this.texture.generateMipmaps=void 0!==r.generateMipmaps?r.generateMipmaps:!1;this.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006;this.depthBuffer=void 0!==r.depthBuffer?r.depthBuffer:!0;this.stencilBuffer=void 0!==r.stencilBuffer?r.stencilBuffer:!0;this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function r(e,t,r){T.call(this,e,t,r);this.samples=4}function d(e,t,r,n){this._x=e||0;this._y=t||0;this._z=r||0;this._w=void 0!==n?n:1}function Te(e,t,r){this.x=e||0;this.y=t||0;this.z=r||0}function Ee(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function i(e,t,r,n){this._x=e||0;this._y=t||0;this._z=r||0;this._order=n||i.DefaultOrder}function o(){this.mask=1}function f(){Object.defineProperty(this,"id",{value:ia++});this.uuid=Vo.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=f.DefaultUp.clone();var e=new Te,t=new i,r=new d,n=new Te(1,1,1);t._onChange(function(){r.setFromEuler(t,!1)});r._onChange(function(){t.setFromQuaternion(r,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Ee},normalMatrix:{value:new m}});this.matrix=new Ee;this.matrixWorld=new Ee;this.matrixAutoUpdate=f.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new o;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function Oe(){f.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.environment=this.background=null;this.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function n(e,t){this.min=void 0!==e?e:new Te(Infinity,Infinity,Infinity);this.max=void 0!==t?t:new Te(-Infinity,-Infinity,-Infinity)}function a(e,t,r,n,i){var o;var a=0;for(o=e.length-3;a<=o;a+=3){Pa.fromArray(e,a);var s=i.x*Math.abs(Pa.x)+i.y*Math.abs(Pa.y)+i.z*Math.abs(Pa.z),u=t.dot(Pa),c=r.dot(Pa),l=n.dot(Pa);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}function l(e,t){this.center=void 0!==e?e:new Te;this.radius=void 0!==t?t:-1}function s(e,t){this.origin=void 0!==e?e:new Te;this.direction=void 0!==t?t:new Te(0,0,-1)}function g(e,t){this.normal=void 0!==e?e:new Te(1,0,0);this.constant=void 0!==t?t:0}function b(e,t,r){this.a=void 0!==e?e:new Te;this.b=void 0!==t?t:new Te;this.c=void 0!==r?r:new Te}function v(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function u(e,t,r){0>r&&(r+=1);1<r&&--r;return r<1/6?e+6*(t-e)*r:.5>r?t:r<2/3?e+6*(t-e)*(2/3-r):e}function c(e){return.04045>e?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function h(e){return.0031308>e?12.92*e:1.055*Math.pow(e,.41666)-.055}function _(e,t,r,n,i,o){this.a=e;this.b=t;this.c=r;this.normal=n&&n.isVector3?n:new Te;this.vertexNormals=Array.isArray(n)?n:[];this.color=i&&i.isColor?i:new v;this.vertexColors=Array.isArray(i)?i:[];this.materialIndex=void 0!==o?o:0}function y(){Object.defineProperty(this,"id",{value:es++});this.uuid=Vo.generateUUID();this.name="";this.type="Material";this.fog=!0;this.blending=1;this.side=0;this.vertexColors=this.flatShading=!1;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.stencilWriteMask=255;this.stencilFunc=519;this.stencilRef=0;this.stencilFuncMask=255;this.stencilZPass=this.stencilZFail=this.stencilFail=7680;this.stencilWrite=!1;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.toneMapped=this.visible=!0;this.userData={};this.version=0}function x(e){y.call(this);this.type="MeshBasicMaterial";this.color=new v(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphTargets=this.skinning=!1;this.setValues(e)}function E(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="";this.array=e;this.itemSize=t;this.count=void 0!==e?e.length/t:0;this.normalized=!0===r;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0}function w(e,t,r){E.call(this,new Int8Array(e),t,r)}function S(e,t,r){E.call(this,new Uint8Array(e),t,r)}function M(e,t,r){E.call(this,new Uint8ClampedArray(e),t,r)}function C(e,t,r){E.call(this,new Int16Array(e),t,r)}function O(e,t,r){E.call(this,new Uint16Array(e),t,r)}function P(e,t,r){E.call(this,new Int32Array(e),t,r)}function A(e,t,r){E.call(this,new Uint32Array(e),t,r)}function j(e,t,r){E.call(this,new Float32Array(e),t,r)}function R(e,t,r){E.call(this,new Float64Array(e),t,r)}function k(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function L(e){if(0===e.length)return-Infinity;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}function N(){Object.defineProperty(this,"id",{value:rs+=2});this.uuid=Vo.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.morphTargetsRelative=!1;this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}function I(e,t){f.call(this);this.type="Mesh";this.geometry=void 0!==e?e:new N;this.material=void 0!==t?t:new x;this.updateMorphTargets()}function D(e,t,r,n,i,o,a,s){if(null===(1===t.side?n.intersectTriangle(a,o,i,!0,s):n.intersectTriangle(i,o,a,2!==t.side,s)))return null;Cs.copy(s);Cs.applyMatrix4(e.matrixWorld);t=r.ray.origin.distanceTo(Cs);return t<r.near||t>r.far?null:{distance:t,point:Cs.clone(),object:e}}function B(e,t,r,n,i,o,a,s,u,c,l,h){ps.fromBufferAttribute(i,c);fs.fromBufferAttribute(i,l);ds.fromBufferAttribute(i,h);i=e.morphTargetInfluences;if(t.morphTargets&&o&&i){_s.set(0,0,0);ys.set(0,0,0);bs.set(0,0,0);for(var p=0,f=o.length;p<f;p++){var d=i[p],v=o[p];0!==d&&(vs.fromBufferAttribute(v,c),ms.fromBufferAttribute(v,l),gs.fromBufferAttribute(v,h),a?(_s.addScaledVector(vs,d),ys.addScaledVector(ms,d),bs.addScaledVector(gs,d)):(_s.addScaledVector(vs.sub(ps),d),ys.addScaledVector(ms.sub(fs),d),bs.addScaledVector(gs.sub(ds),d)))}ps.add(_s);fs.add(ys);ds.add(bs)}e.isSkinnedMesh&&(e.boneTransform(c,ps),e.boneTransform(l,fs),e.boneTransform(h,ds));if(e=D(e,t,r,n,ps,fs,ds,Ms))s&&(xs.fromBufferAttribute(s,c),ws.fromBufferAttribute(s,l),Ss.fromBufferAttribute(s,h),e.uv=b.getUV(Ms,ps,fs,ds,xs,ws,Ss,new Me)),u&&(xs.fromBufferAttribute(u,c),ws.fromBufferAttribute(u,l),Ss.fromBufferAttribute(u,h),e.uv2=b.getUV(Ms,ps,fs,ds,xs,ws,Ss,new Me)),s=new _(c,l,h),b.getNormal(ps,fs,ds,s.normal),e.face=s;return e}function F(){Object.defineProperty(this,"id",{value:Ts+=2});this.uuid=Vo.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function z(e){var t={},r;for(r in e){t[r]={};for(var n in e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}function $(e){for(var t={},r=0;r<e.length;r++){var n=z(e[r]),i;for(i in n)t[i]=n[i]}return t}function G(e){y.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function V(){f.call(this);this.type="Camera";this.matrixWorldInverse=new Ee;this.projectionMatrix=new Ee;this.projectionMatrixInverse=new Ee}function H(e,t,r,n){V.call(this);this.type="PerspectiveCamera";this.fov=void 0!==e?e:50;this.zoom=1;this.near=void 0!==r?r:.1;this.far=void 0!==n?n:2e3;this.focus=10;this.aspect=void 0!==t?t:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function U(e,t,a){f.call(this);this.type="CubeCamera";if(!0!==a.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=a;var o=new H(90,1,e,t);o.layers=this.layers;o.up.set(0,-1,0);o.lookAt(new Te(1,0,0));this.add(o);var s=new H(90,1,e,t);s.layers=this.layers;s.up.set(0,-1,0);s.lookAt(new Te(-1,0,0));this.add(s);var u=new H(90,1,e,t);u.layers=this.layers;u.up.set(0,0,1);u.lookAt(new Te(0,1,0));this.add(u);var c=new H(90,1,e,t);c.layers=this.layers;c.up.set(0,0,-1);c.lookAt(new Te(0,-1,0));this.add(c);var l=new H(90,1,e,t);l.layers=this.layers;l.up.set(0,-1,0);l.lookAt(new Te(0,0,1));this.add(l);var h=new H(90,1,e,t);h.layers=this.layers;h.up.set(0,-1,0);h.lookAt(new Te(0,0,-1));this.add(h);this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=e.xr.enabled,n=e.getRenderTarget();e.xr.enabled=!1;var i=a.texture.generateMipmaps;a.texture.generateMipmaps=!1;e.setRenderTarget(a,0);e.render(t,o);e.setRenderTarget(a,1);e.render(t,s);e.setRenderTarget(a,2);e.render(t,u);e.setRenderTarget(a,3);e.render(t,c);e.setRenderTarget(a,4);e.render(t,l);a.texture.generateMipmaps=i;e.setRenderTarget(a,5);e.render(t,h);e.setRenderTarget(n);e.xr.enabled=r};this.clear=function(e,t,r,n){for(var i=e.getRenderTarget(),o=0;6>o;o++)e.setRenderTarget(a,o),e.clear(t,r,n);e.setRenderTarget(i)}}}function q(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);T.call(this,e,e,t)}function Pe(e,t,r,n,i,o,a,s,u,c,l,h){p.call(this,null,o,a,s,u,c,n,i,l,h);this.image={data:e||null,width:t||1,height:r||1};this.magFilter=void 0!==u?u:1003;this.minFilter=void 0!==c?c:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1;this.needsUpdate=!0}function Ae(e,t,r,n,i,o){this.planes=[void 0!==e?e:new g,void 0!==t?t:new g,void 0!==r?r:new g,void 0!==n?n:new g,void 0!==i?i:new g,void 0!==o?o:new g]}function je(){function r(e,t){!1!==i&&(o(e,t),n.requestAnimationFrame(r))}var n=null,i=!1,o=null;return{start:function(){!0!==i&&null!==o&&(n.requestAnimationFrame(r),i=!0)},stop:function(){i=!1},setAnimationLoop:function(e){o=e},setContext:function(e){n=e}}}function Re(o,e){function a(e,t){var r=e.array,n=e.usage,i=o.createBuffer();o.bindBuffer(t,i);o.bufferData(t,r,n);e.onUploadCallback();t=5126;r instanceof Float32Array?t=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t=5123:r instanceof Int16Array?t=5122:r instanceof Uint32Array?t=5125:r instanceof Int32Array?t=5124:r instanceof Int8Array?t=5120:r instanceof Uint8Array&&(t=5121);return{buffer:i,type:t,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}var s=e.isWebGL2,u=new WeakMap;return{get:function(e){e.isInterleavedBufferAttribute&&(e=e.data);return u.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=u.get(e);t&&(o.deleteBuffer(t.buffer),u.delete(e))},update:function(e,t){e.isInterleavedBufferAttribute&&(e=e.data);var r=u.get(e);if(void 0===r)u.set(e,a(e,t));else if(r.version<e.version){var n=e.array,i=e.updateRange;o.bindBuffer(t,r.buffer);-1===i.count?o.bufferSubData(t,0,n):(s?o.bufferSubData(t,i.offset*n.BYTES_PER_ELEMENT,n,i.offset,i.count):o.bufferSubData(t,i.offset*n.BYTES_PER_ELEMENT,n.subarray(i.offset,i.offset+i.count)),i.count=-1);r.version=e.version}}}}function W(e,t,r,n){F.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};this.fromBufferGeometry(new X(e,t,r,n));this.mergeVertices()}function X(e,t,r,n){N.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};e=e||1;t=t||1;var i=e/2,o=t/2;r=Math.floor(r)||1;n=Math.floor(n)||1;var a=r+1,s=n+1,u=e/r,c=t/n,l=[],h=[],p=[],f=[];for(e=0;e<s;e++){var d=e*c-o;for(t=0;t<a;t++)h.push(t*u-i,-d,0),p.push(0,0,1),f.push(t/r),f.push(1-e/n)}for(e=0;e<n;e++)for(t=0;t<r;t++)i=t+a*(e+1),o=t+1+a*(e+1),s=t+1+a*e,l.push(t+a*e,i,s),l.push(i,o,s);this.setIndex(l);this.setAttribute("position",new j(h,3));this.setAttribute("normal",new j(p,3));this.setAttribute("uv",new j(f,2))}function ke(i,r,o,n){function a(e,t){r.buffers.color.setClear(e.r,e.g,e.b,t,n)}var s=new v(0),u=0,c,l,h=null,p=0,f=null;return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e);u=void 0!==t?t:1;a(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e;a(s,u)},render:function(e,t,r,n){t=t.background;r=i.xr;(r=r.getSession&&r.getSession())&&"additive"===r.environmentBlendMode&&(t=null);null===t?a(s,u):t&&t.isColor&&(a(t,1),n=!0);(i.autoClear||n)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil);if(t&&(t.isCubeTexture||t.isWebGLCubeRenderTarget||306===t.mapping)){void 0===l&&(l=new I(new js(1,1,1),new G({type:"BackgroundCubeMaterial",uniforms:z(Ds.cube.uniforms),vertexShader:Ds.cube.vertexShader,fragmentShader:Ds.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(l));n=t.isWebGLCubeRenderTarget?t.texture:t;l.material.uniforms.envMap.value=n;l.material.uniforms.flipEnvMap.value=n.isCubeTexture?-1:1;if(h!==t||p!==n.version||f!==i.toneMapping)l.material.needsUpdate=!0,h=t,p=n.version,f=i.toneMapping;e.unshift(l,l.geometry,l.material,0,0,null)}else if(t&&t.isTexture){void 0===c&&(c=new I(new X(2,2),new G({type:"BackgroundMaterial",uniforms:z(Ds.background.uniforms),vertexShader:Ds.background.vertexShader,fragmentShader:Ds.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(c));c.material.uniforms.t2D.value=t;!0===t.matrixAutoUpdate&&t.updateMatrix();c.material.uniforms.uvTransform.value.copy(t.matrix);if(h!==t||p!==t.version||f!==i.toneMapping)c.material.needsUpdate=!0,h=t,p=t.version,f=i.toneMapping;e.unshift(c,c.geometry,c.material,0,0,null)}}}}function Le(o,a,s,e){var u=e.isWebGL2,c;this.setMode=function(e){c=e};this.render=function(e,t){o.drawArrays(c,e,t);s.update(t,c)};this.renderInstances=function(e,t,r,n){if(0!==n){if(u){e=o;var i="drawArraysInstanced"}else if(e=a.get("ANGLE_instanced_arrays"),i="drawArraysInstancedANGLE",null===e){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}e[i](c,t,r,n);s.update(r,c,n)}}}function Ne(t,r,e){function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var i,o="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,a=void 0!==e.precision?e.precision:"highp",s=n(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);e=!0===e.logarithmicDepthBuffer;s=t.getParameter(34930);var u=t.getParameter(35660),c=t.getParameter(3379),l=t.getParameter(34076),h=t.getParameter(34921),p=t.getParameter(36347),f=t.getParameter(36348),d=t.getParameter(36349),v=0<u,m=o||!!r.get("OES_texture_float"),g=v&&m,_=o?t.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var e=r.get("EXT_texture_filter_anisotropic");return i=null!==e?t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:e,maxTextures:s,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:l,maxAttributes:h,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:d,vertexTextures:v,floatFragmentTextures:m,floatVertexTextures:g,maxSamples:_}}function Ie(){function u(){v.value!==l&&(v.value=l,v.needsUpdate=0<h);a.numPlanes=h;a.numIntersection=0}function c(e,t,r,n){var i=null!==e?e.length:0,o=null;if(0!==i){o=v.value;if(!0!==n||null===o){n=r+4*i;t=t.matrixWorldInverse;d.getNormalMatrix(t);if(null===o||o.length<n)o=new Float32Array(n);for(n=0;n!==i;++n,r+=4)s.copy(e[n]).applyMatrix4(t,d),s.normal.toArray(o,r),o[r+3]=s.constant}v.value=o;v.needsUpdate=!0}a.numPlanes=i;a.numIntersection=0;return o}var a=this,l=null,h=0,p=!1,f=!1,s=new g,d=new m,v={value:null,needsUpdate:!1};this.uniform=v;this.numIntersection=this.numPlanes=0;this.init=function(e,t,r){var n=0!==e.length||t||0!==h||p;p=t;l=c(e,r,0);h=e.length;return n};this.beginShadows=function(){f=!0;c(null)};this.endShadows=function(){f=!1;u()};this.setState=function(e,t,r,n,i,o){if(!p||null===e||0===e.length||f&&!r)f?c(null):u();else{r=f?0:h;var a=4*r,s=i.clippingState||null;v.value=s;s=c(e,n,a,o);for(e=0;e!==a;++e)s[e]=l[e];i.clippingState=s;this.numIntersection=t?this.numPlanes:0;this.numPlanes+=r}}}function De(r){var n={};return{get:function(e){if(void 0!==n[e])return n[e];switch(e){case"WEBGL_depth_texture":var t=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=r.getExtension(e)}null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported.");return n[e]=t}}}function Be(e,c,n){function i(e){var t=e.target;e=a.get(t);null!==e.index&&c.remove(e.index);for(var r in e.attributes)c.remove(e.attributes[r]);t.removeEventListener("dispose",i);a.delete(t);if(r=l.get(e))c.remove(r),l.delete(e);n.memory.geometries--}function o(e){var t=[],r=e.index,n=e.attributes.position;if(null!==r){var i=r.array;r=r.version;n=0;for(var o=i.length;n<o;n+=3){var a=i[n+0],s=i[n+1],u=i[n+2];t.push(a,s,s,u,u,a)}}else for(i=n.array,r=n.version,n=0,o=i.length/3-1;n<o;n+=3)a=n+0,s=n+1,u=n+2,t.push(a,s,s,u,u,a);t=new(65535<L(t)?A:O)(t,1);t.version=r;c.update(t,34963);(i=l.get(e))&&c.remove(i);l.set(e,t)}var a=new WeakMap,l=new WeakMap;return{get:function(e,t){var r=a.get(t);if(r)return r;t.addEventListener("dispose",i);t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new N).setFromObject(e)),r=t._bufferGeometry);a.set(t,r);n.memory.geometries++;return r},update:function(e){var t=e.index,r=e.attributes;null!==t&&c.update(t,34963);for(var n in r)c.update(r[n],34962);e=e.morphAttributes;for(n in e){t=e[n];r=0;for(var i=t.length;r<i;r++)c.update(t[r],34962)}},getWireframeAttribute:function(e){var t=l.get(e);if(t){var r=e.index;null!==r&&t.version<r.version&&o(e)}else o(e);return l.get(e)}}}function Fe(o,a,s,e){var u=e.isWebGL2,c,l,h;this.setMode=function(e){c=e};this.setIndex=function(e){l=e.type;h=e.bytesPerElement};this.render=function(e,t){o.drawElements(c,t,l,e*h);s.update(t,c)};this.renderInstances=function(e,t,r,n){if(0!==n){if(u){e=o;var i="drawElementsInstanced"}else if(e=a.get("ANGLE_instanced_arrays"),i="drawElementsInstancedANGLE",null===e){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}e[i](c,r,l,t*h,n);s.update(r,c,n)}}}function ze(e){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++;n.calls=0;n.triangles=0;n.points=0;n.lines=0},update:function(e,t,r){r=r||1;n.calls++;switch(t){case 4:n.triangles+=e/3*r;break;case 1:n.lines+=e/2*r;break;case 3:n.lines+=r*(e-1);break;case 2:n.lines+=r*e;break;case 0:n.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function Y(e,t){return Math.abs(t[1])-Math.abs(e[1])}function $e(c){var l={},h=new Float32Array(8);return{update:function(e,t,r,n){var i=e.morphTargetInfluences,o=void 0===i?0:i.length;e=l[t.id];if(void 0===e){e=[];for(var a=0;a<o;a++)e[a]=[a,0];l[t.id]=e}var s=r.morphTargets&&t.morphAttributes.position;r=r.morphNormals&&t.morphAttributes.normal;for(a=0;a<o;a++){var u=e[a];0!==u[1]&&(s&&t.deleteAttribute("morphTarget"+a),r&&t.deleteAttribute("morphNormal"+a))}for(a=0;a<o;a++)u=e[a],u[0]=a,u[1]=i[a];e.sort(Y);for(a=i=0;8>a;a++){if(u=e[a])if(o=u[0],u=u[1]){s&&t.setAttribute("morphTarget"+a,s[o]);r&&t.setAttribute("morphNormal"+a,r[o]);h[a]=u;i+=u;continue}h[a]=0}t=t.morphTargetsRelative?1:1-i;n.getUniforms().setValue(c,"morphTargetBaseInfluence",t);n.getUniforms().setValue(c,"morphTargetInfluences",h)}}}function Ge(e,i,o,a){var s=new WeakMap;return{update:function(e){var t=a.render.frame,r=e.geometry,n=i.get(e,r);s.get(n)!==t&&(r.isGeometry&&n.updateFromObject(e),i.update(n),s.set(n,t));e.isInstancedMesh&&o.update(e.instanceMatrix,34962);return n},dispose:function(){s=new WeakMap}}}function K(e,t,r,n,i,o,a,s,u,c){e=void 0!==e?e:[];p.call(this,e,void 0!==t?t:301,r,n,i,o,void 0!==a?a:1022,s,u,c);this.flipY=!1}function Z(e,t,r,n){p.call(this,null);this.image={data:e||null,width:t||1,height:r||1,depth:n||1};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.needsUpdate=!0}function J(e,t,r,n){p.call(this,null);this.image={data:e||null,width:t||1,height:r||1,depth:n||1};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.needsUpdate=!0}function Q(e,t,r){var n=e[0];if(0>=n||0<n)return e;var i=t*r,o=Gs[i];void 0===o&&(o=new Float32Array(i),Gs[i]=o);if(0!==t)for(n.toArray(o,0),n=1,i=0;n!==t;++n)i+=r,e[n].toArray(o,i);return o}function ee(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function te(e,t){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}function re(e,t){var r=Vs[t];void 0===r&&(r=new Int32Array(t),Vs[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function ne(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function ie(e,t){var r=this.cache;if(void 0!==t.x){if(r[0]!==t.x||r[1]!==t.y)e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y}else ee(r,t)||(e.uniform2fv(this.addr,t),te(r,t))}function oe(e,t){var r=this.cache;if(void 0!==t.x){if(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z}else if(void 0!==t.r){if(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b}else ee(r,t)||(e.uniform3fv(this.addr,t),te(r,t))}function ae(e,t){var r=this.cache;if(void 0!==t.x){if(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w}else ee(r,t)||(e.uniform4fv(this.addr,t),te(r,t))}function se(e,t){var r=this.cache,n=t.elements;void 0===n?ee(r,t)||(e.uniformMatrix2fv(this.addr,!1,t),te(r,t)):ee(r,n)||(qs.set(n),e.uniformMatrix2fv(this.addr,!1,qs),te(r,n))}function ue(e,t){var r=this.cache,n=t.elements;void 0===n?ee(r,t)||(e.uniformMatrix3fv(this.addr,!1,t),te(r,t)):ee(r,n)||(Us.set(n),e.uniformMatrix3fv(this.addr,!1,Us),te(r,n))}function ce(e,t){var r=this.cache,n=t.elements;void 0===n?ee(r,t)||(e.uniformMatrix4fv(this.addr,!1,t),te(r,t)):ee(r,n)||(Hs.set(n),e.uniformMatrix4fv(this.addr,!1,Hs),te(r,n))}function le(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i);r.safeSetTexture2D(t||Bs,i)}function he(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i);r.setTexture2DArray(t||Fs,i)}function pe(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i);r.setTexture3D(t||zs,i)}function fe(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i);r.safeSetTextureCube(t||$s,i)}function de(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function ve(e,t){var r=this.cache;ee(r,t)||(e.uniform2iv(this.addr,t),te(r,t))}function me(e,t){var r=this.cache;ee(r,t)||(e.uniform3iv(this.addr,t),te(r,t))}function ge(e,t){var r=this.cache;ee(r,t)||(e.uniform4iv(this.addr,t),te(r,t))}function _e(e,t){var r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function ye(e){switch(e){case 5126:return ne;case 35664:return ie;case 35665:return oe;case 35666:return ae;case 35674:return se;case 35675:return ue;case 35676:return ce;case 5124:case 35670:return de;case 35667:case 35671:return ve;case 35668:case 35672:return me;case 35669:case 35673:return ge;case 5125:return _e;case 35678:case 36198:case 36298:case 36306:case 35682:return le;case 35679:case 36299:case 36307:return pe;case 35680:case 36300:case 36308:case 36293:return fe;case 36289:case 36303:case 36311:case 36292:return he}}function be(e,t){e.uniform1fv(this.addr,t)}function xe(e,t){e.uniform1iv(this.addr,t)}function we(e,t){e.uniform2iv(this.addr,t)}function Se(e,t){e.uniform3iv(this.addr,t)}function Ve(e,t){e.uniform4iv(this.addr,t)}function He(e,t){t=Q(t,this.size,2);e.uniform2fv(this.addr,t)}function Ue(e,t){t=Q(t,this.size,3);e.uniform3fv(this.addr,t)}function qe(e,t){t=Q(t,this.size,4);e.uniform4fv(this.addr,t)}function We(e,t){t=Q(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,t)}function Xe(e,t){t=Q(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,t)}function Ye(e,t){t=Q(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,t)}function Ke(e,t,r){var n=t.length,i=re(r,n);e.uniform1iv(this.addr,i);for(e=0;e!==n;++e)r.safeSetTexture2D(t[e]||Bs,i[e])}function Ze(e,t,r){var n=t.length,i=re(r,n);e.uniform1iv(this.addr,i);for(e=0;e!==n;++e)r.safeSetTextureCube(t[e]||$s,i[e])}function Je(e){switch(e){case 5126:return be;case 35664:return He;case 35665:return Ue;case 35666:return qe;case 35674:return We;case 35675:return Xe;case 35676:return Ye;case 5124:case 35670:return xe;case 35667:case 35671:return we;case 35668:case 35672:return Se;case 35669:case 35673:return Ve;case 35678:case 36198:case 36298:case 36306:case 35682:return Ke;case 35680:case 36300:case 36308:case 36293:return Ze}}function Qe(e,t,r){this.id=e;this.addr=r;this.cache=[];this.setValue=ye(t.type)}function et(e,t,r){this.id=e;this.addr=r;this.cache=[];this.size=t.size;this.setValue=Je(t.type)}function tt(e){this.id=e;this.seq=[];this.map={}}function rt(e,t){this.seq=[];this.map={};for(var r=e.getProgramParameter(t,35718),n=0;n<r;++n){var i=e.getActiveUniform(t,n),o=e.getUniformLocation(t,i.name),a=this,s=i.name,u=s.length;for(Ws.lastIndex=0;;){var c=Ws.exec(s),l=Ws.lastIndex,h=c[1],p=c[3];"]"===c[2]&&(h|=0);if(void 0===p||"["===p&&l+2===u){s=a;i=void 0===p?new Qe(h,i,o):new et(h,i,o);s.seq.push(i);s.map[i.id]=i;break}else p=a.map[h],void 0===p&&(p=new tt(h),h=a,a=p,h.seq.push(a),h.map[a.id]=a),a=p}}}function nt(e,t,r){t=e.createShader(t);e.shaderSource(t,r);e.compileShader(t);return t}function it(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+e)}}function ot(e,t,r){var n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(n&&""===i)return"";e=e.getShaderSource(t).split("\n");for(t=0;t<e.length;t++)e[t]=t+1+": "+e[t];e=e.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+i+e}function at(e,t){t=it(t);return"vec4 "+e+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function st(e,t){t=it(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function ut(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;case 5:t="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ct(e){var t=[],r;for(r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function lt(e){return""!==e}function ht(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function pt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ft(e,t){e=Is[t];if(void 0===e)throw Error("Can not resolve #include <"+t+">");return e.replace(Ys,ft)}function dt(e,t,r,n){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return vt(e,t,r,n)}function vt(e,t,r,n){e="";for(t=parseInt(t);t<parseInt(r);t++)e+=n.replace(/\[ i \]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return e}function mt(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION");return t}function gt(e){var t="SHADOWMAP_TYPE_BASIC";1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM");return t}function _t(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:t="ENVMAP_TYPE_EQUIREC";break;case 305:t="ENVMAP_TYPE_SPHERE"}return t}function yt(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 304:t="ENVMAP_MODE_REFRACTION"}return t}function bt(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}function xt(e,t,r){var i=e.getContext(),n=r.defines,o=r.vertexShader,a=r.fragmentShader,s=gt(r),u=_t(r),c=yt(r),l=bt(r),h=0<e.gammaFactor?e.gammaFactor:1,p=r.isWebGL2?"":[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||"physical"===r.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lt).join("\n"),f=ct(n),d=i.createProgram();r.isRawShaderMaterial?(n=[f].filter(lt).join("\n"),0<n.length&&(n+="\n"),s=[p,f].filter(lt).join("\n"),0<s.length&&(s+="\n")):(n=[mt(r),"#define SHADER_NAME "+r.shaderName,f,r.instancing?"#define USE_INSTANCING":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+s:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(lt).join("\n"),s=[p,mt(r),"#define SHADER_NAME "+r.shaderName,f,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+h,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+c:"",r.envMap?"#define "+l:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+s:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?Is.tonemapping_pars_fragment:"",0!==r.toneMapping?ut("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding||r.lightMapEncoding?Is.encodings_pars_fragment:"",r.mapEncoding?at("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?at("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?at("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?at("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMapEncoding?at("lightMapTexelToLinear",r.lightMapEncoding):"",r.outputEncoding?st("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(lt).join("\n"));o=o.replace(Ys,ft);o=ht(o,r);o=pt(o,r);a=a.replace(Ys,ft);a=ht(a,r);a=pt(a,r);o=o.replace(Zs,vt).replace(Ks,dt);a=a.replace(Zs,vt).replace(Ks,dt);r.isWebGL2&&!r.isRawShaderMaterial&&(u=!1,c=/^\s*#version\s+300\s+es\s*\n/,r.isShaderMaterial&&null!==o.match(c)&&null!==a.match(c)&&(u=!0,o=o.replace(c,""),a=a.replace(c,"")),n="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+n,s=["#version 300 es\n\n#define varying in",u?"":"out highp vec4 pc_fragColor;",u?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s);a=s+a;o=nt(i,35633,n+o);a=nt(i,35632,a);i.attachShader(d,o);i.attachShader(d,a);void 0!==r.index0AttributeName?i.bindAttribLocation(d,0,r.index0AttributeName):!0===r.morphTargets&&i.bindAttribLocation(d,0,"position");i.linkProgram(d);if(e.debug.checkShaderErrors){e=i.getProgramInfoLog(d).trim();u=i.getShaderInfoLog(o).trim();c=i.getShaderInfoLog(a).trim();h=l=!0;if(!1===i.getProgramParameter(d,35714))l=!1,p=ot(i,o,"vertex"),f=ot(i,a,"fragment"),console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(d,35715),"gl.getProgramInfoLog",e,p,f);else if(""!==e)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e);else if(""===u||""===c)h=!1;h&&(this.diagnostics={runnable:l,programLog:e,vertexShader:{log:u,prefix:n},fragmentShader:{log:c,prefix:s}})}i.deleteShader(o);i.deleteShader(a);var v;this.getUniforms=function(){void 0===v&&(v=new rt(i,d));return v};var m;this.getAttributes=function(){if(void 0===m){for(var e={},t=i.getProgramParameter(d,35721),r=0;r<t;r++){var n=i.getActiveAttrib(d,r).name;e[n]=i.getAttribLocation(d,n)}m=e}return m};this.destroy=function(){i.deleteProgram(d);this.program=void 0};this.name=r.shaderName;this.id=Xs++;this.cacheKey=t;this.usedTimes=1;this.program=d;this.vertexShader=o;this.fragmentShader=a;return this}function wt(p,f,d){function v(e){if(e)e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding);else var t=3e3;return t}var a=[],m=d.isWebGL2,g=d.logarithmicDepthBuffer,_=d.floatVertexTextures,y=d.precision,b=d.maxVertexUniforms,x=d.vertexTextures,w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},n="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(e,t,r,n,i,o,a){var s=n.fog;n=e.isMeshStandardMaterial?n.environment:null;n=e.envMap||n;var u=w[e.type];if(a.isSkinnedMesh){var c=a.skeleton.bones;if(_)c=1024;else{var l=Math.min(Math.floor((b-20)/4),c.length);l<c.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+c.length+" bones. This GPU supports "+l+"."),c=0):c=l}}else c=0;null!==e.precision&&(y=d.getMaxPrecision(e.precision),y!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",y,"instead."));u?(l=Ds[u],l={name:e.type,uniforms:Rs.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):l={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(l,p);var h=p.getRenderTarget();return{isWebGL2:m,shaderID:u,shaderName:l.name,uniforms:l.uniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:e.defines,isRawShaderMaterial:e.isRawShaderMaterial,isShaderMaterial:e.isShaderMaterial,precision:y,instancing:!0===a.isInstancedMesh,supportsVertexTextures:x,outputEncoding:null!==h?v(h.texture):p.outputEncoding,map:!!e.map,mapEncoding:v(e.map),matcap:!!e.matcap,matcapEncoding:v(e.matcap),envMap:!!n,envMapMode:n&&n.mapping,envMapEncoding:v(n),envMapCubeUV:!!n&&(306===n.mapping||307===n.mapping),lightMap:!!e.lightMap,lightMapEncoding:v(e.lightMap),aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:v(e.emissiveMap),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,tangentSpaceNormalMap:0===e.normalMapType,clearcoatMap:!!e.clearcoatMap,clearcoatRoughnessMap:!!e.clearcoatRoughnessMap,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!e.map||!!e.bumpMap||!!e.normalMap||!!e.specularMap||!!e.alphaMap||!!e.emissiveMap||!!e.roughnessMap||!!e.metalnessMap||!!e.clearcoatMap||!!e.clearcoatRoughnessMap||!!e.clearcoatNormalMap||!!e.displacementMap,uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap)&&!!e.displacementMap,fog:!!s,useFog:e.fog,fogExp2:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:g,skinning:e.skinning&&0<c,maxBones:c,useVertexTexture:_,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:p.maxMorphTargets,maxMorphNormals:p.maxMorphNormals,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numDirLightShadows:t.directionalShadowMap.length,numPointLightShadows:t.pointShadowMap.length,numSpotLightShadows:t.spotShadowMap.length,numClippingPlanes:i,numClipIntersection:o,dithering:e.dithering,shadowMapEnabled:p.shadowMap.enabled&&0<r.length,shadowMapType:p.shadowMap.type,toneMapping:e.toneMapped?p.toneMapping:0,physicallyCorrectLights:p.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking?e.depthPacking:!1,index0AttributeName:e.index0AttributeName,extensionDerivatives:e.extensions&&e.extensions.derivatives,extensionFragDepth:e.extensions&&e.extensions.fragDepth,extensionDrawBuffers:e.extensions&&e.extensions.drawBuffers,extensionShaderTextureLOD:e.extensions&&e.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||null!==f.get("EXT_frag_depth"),rendererExtensionDrawBuffers:m||null!==f.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||null!==f.get("EXT_shader_texture_lod"),onBeforeCompile:e.onBeforeCompile}};this.getProgramCacheKey=function(e){var t=[];e.shaderID?t.push(e.shaderID):(t.push(e.fragmentShader),t.push(e.vertexShader));if(void 0!==e.defines)for(var r in e.defines)t.push(r),t.push(e.defines[r]);if(void 0===e.isRawShaderMaterial){for(r=0;r<n.length;r++)t.push(e[n[r]]);t.push(p.outputEncoding);t.push(p.gammaFactor)}t.push(e.onBeforeCompile.toString());return t.join()};this.acquireProgram=function(e,t){for(var r,n=0,i=a.length;n<i;n++){var o=a[n];if(o.cacheKey===t){r=o;++r.usedTimes;break}}void 0===r&&(r=new xt(p,t,e),a.push(r));return r};this.releaseProgram=function(e){if(0===--e.usedTimes){var t=a.indexOf(e);a[t]=a[a.length-1];a.pop();e.destroy()}};this.programs=a}function St(){var n=new WeakMap;return{get:function(e){var t=n.get(e);void 0===t&&(t={},n.set(e,t));return t},remove:function(e){n.delete(e)},update:function(e,t,r){n.get(e)[t]=r},dispose:function(){n=new WeakMap}}}function Mt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ct(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Tt(){function a(e,t,r,n,i,o){var a=s[u];void 0===a?(a={id:e.id,object:e,geometry:t,material:r,program:r.program||h,groupOrder:n,renderOrder:e.renderOrder,z:i,group:o},s[u]=a):(a.id=e.id,a.object=e,a.geometry=t,a.material=r,a.program=r.program||h,a.groupOrder=n,a.renderOrder=e.renderOrder,a.z=i,a.group=o);u++;return a}var s=[],u=0,c=[],l=[],h={id:-1};return{opaque:c,transparent:l,init:function(){u=0;c.length=0;l.length=0},push:function(e,t,r,n,i,o){e=a(e,t,r,n,i,o);(!0===r.transparent?l:c).push(e)},unshift:function(e,t,r,n,i,o){e=a(e,t,r,n,i,o);(!0===r.transparent?l:c).unshift(e)},finish:function(){for(var e=u,t=s.length;e<t;e++){var r=s[e];if(null===r.id)break;r.id=null;r.object=null;r.geometry=null;r.material=null;r.program=null;r.group=null}},sort:function(e,t){1<c.length&&c.sort(e||Mt);1<l.length&&l.sort(t||Ct)}}}function Et(){function i(e){e=e.target;e.removeEventListener("dispose",i);o.delete(e)}var o=new WeakMap;return{get:function(e,t){var r=o.get(e);if(void 0===r){var n=new Tt;o.set(e,new WeakMap);o.get(e).set(t,n);e.addEventListener("dispose",i)}else n=r.get(t),void 0===n&&(n=new Tt,r.set(t,n));return n},dispose:function(){o=new WeakMap}}}function Ot(){var r={};return{get:function(e){if(void 0!==r[e.id])return r[e.id];switch(e.type){case"DirectionalLight":var t={direction:new Te,color:new v};break;case"SpotLight":t={position:new Te,direction:new Te,color:new v,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Te,color:new v,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Te,skyColor:new v,groundColor:new v};break;case"RectAreaLight":t={color:new v,position:new Te,halfWidth:new Te,halfHeight:new Te}}return r[e.id]=t}}}function Pt(){var r={};return{get:function(e){if(void 0!==r[e.id])return r[e.id];switch(e.type){case"DirectionalLight":var t={shadowBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"SpotLight":t={shadowBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":t={shadowBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return r[e.id]=t}}}function At(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function jt(){for(var x=new Ot,w=Pt(),S={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},e=0;9>e;e++)S.probe.push(new Te);var M=new Te,C=new Ee,T=new Ee;return{setup:function(e,t,r){for(var n=0,i=0,o=0,a=0;9>a;a++)S.probe[a].set(0,0,0);var s=t=0,u=0,c=0,l=0,h=0,p=0,f=0;r=r.matrixWorldInverse;e.sort(At);a=0;for(var d=e.length;a<d;a++){var v=e[a],m=v.color,g=v.intensity,_=v.distance,y=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)n+=m.r*g,i+=m.g*g,o+=m.b*g;else if(v.isLightProbe)for(y=0;9>y;y++)S.probe[y].addScaledVector(v.sh.coefficients[y],g);else if(v.isDirectionalLight){var b=x.get(v);b.color.copy(v.color).multiplyScalar(v.intensity);b.direction.setFromMatrixPosition(v.matrixWorld);M.setFromMatrixPosition(v.target.matrixWorld);b.direction.sub(M);b.direction.transformDirection(r);v.castShadow&&(g=v.shadow,m=w.get(v),m.shadowBias=g.bias,m.shadowRadius=g.radius,m.shadowMapSize=g.mapSize,S.directionalShadow[t]=m,S.directionalShadowMap[t]=y,S.directionalShadowMatrix[t]=v.shadow.matrix,h++);S.directional[t]=b;t++}else v.isSpotLight?(b=x.get(v),b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(r),b.color.copy(m).multiplyScalar(g),b.distance=_,b.direction.setFromMatrixPosition(v.matrixWorld),M.setFromMatrixPosition(v.target.matrixWorld),b.direction.sub(M),b.direction.transformDirection(r),b.coneCos=Math.cos(v.angle),b.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),b.decay=v.decay,v.castShadow&&(g=v.shadow,m=w.get(v),m.shadowBias=g.bias,m.shadowRadius=g.radius,m.shadowMapSize=g.mapSize,S.spotShadow[u]=m,S.spotShadowMap[u]=y,S.spotShadowMatrix[u]=v.shadow.matrix,f++),S.spot[u]=b,u++):v.isRectAreaLight?(b=x.get(v),b.color.copy(m).multiplyScalar(g),b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(r),T.identity(),C.copy(v.matrixWorld),C.premultiply(r),T.extractRotation(C),b.halfWidth.set(.5*v.width,0,0),b.halfHeight.set(0,.5*v.height,0),b.halfWidth.applyMatrix4(T),b.halfHeight.applyMatrix4(T),S.rectArea[c]=b,c++):v.isPointLight?(b=x.get(v),b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(r),b.color.copy(v.color).multiplyScalar(v.intensity),b.distance=v.distance,b.decay=v.decay,v.castShadow&&(g=v.shadow,m=w.get(v),m.shadowBias=g.bias,m.shadowRadius=g.radius,m.shadowMapSize=g.mapSize,m.shadowCameraNear=g.camera.near,m.shadowCameraFar=g.camera.far,S.pointShadow[s]=m,S.pointShadowMap[s]=y,S.pointShadowMatrix[s]=v.shadow.matrix,p++),S.point[s]=b,s++):v.isHemisphereLight&&(b=x.get(v),b.direction.setFromMatrixPosition(v.matrixWorld),b.direction.transformDirection(r),b.direction.normalize(),b.skyColor.copy(v.color).multiplyScalar(g),b.groundColor.copy(v.groundColor).multiplyScalar(g),S.hemi[l]=b,l++)}S.ambient[0]=n;S.ambient[1]=i;S.ambient[2]=o;e=S.hash;if(e.directionalLength!==t||e.pointLength!==s||e.spotLength!==u||e.rectAreaLength!==c||e.hemiLength!==l||e.numDirectionalShadows!==h||e.numPointShadows!==p||e.numSpotShadows!==f)S.directional.length=t,S.spot.length=u,S.rectArea.length=c,S.point.length=s,S.hemi.length=l,S.directionalShadow.length=h,S.directionalShadowMap.length=h,S.pointShadow.length=p,S.pointShadowMap.length=p,S.spotShadow.length=f,S.spotShadowMap.length=f,S.directionalShadowMatrix.length=h,S.pointShadowMatrix.length=p,S.spotShadowMatrix.length=f,e.directionalLength=t,e.pointLength=s,e.spotLength=u,e.rectAreaLength=c,e.hemiLength=l,e.numDirectionalShadows=h,e.numPointShadows=p,e.numSpotShadows=f,S.version=Js++},state:S}}function Rt(){var t=new jt,r=[],n=[];return{init:function(){r.length=0;n.length=0},state:{lightsArray:r,shadowsArray:n,lights:t},setupLights:function(e){t.setup(r,n,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){n.push(e)}}}function kt(){function n(e){e=e.target;e.removeEventListener("dispose",n);i.delete(e)}var i=new WeakMap;return{get:function(e,t){if(!1===i.has(e)){var r=new Rt;i.set(e,new WeakMap);i.get(e).set(t,r);e.addEventListener("dispose",n)}else!1===i.get(e).has(t)?(r=new Rt,i.get(e).set(t,r)):r=i.get(e).get(t);return r},dispose:function(){i=new WeakMap}}}function Lt(e){y.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.fog=!1;this.setValues(e)}function Nt(e){y.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new Te;this.nearDistance=1;this.farDistance=1e3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.fog=!1;this.setValues(e)}function It(d,v,m){function c(e,t,r){r=e<<0|t<<1|r<<2;var n=i[r];void 0===n&&(n=new Lt({depthPacking:3201,morphTargets:e,skinning:t}),i[r]=n);return n}function l(e,t,r){r=e<<0|t<<1|r<<2;var n=o[r];void 0===n&&(n=new Nt({morphTargets:e,skinning:t}),o[r]=n);return n}function p(e,t,r,n,i,o,a){var s=c,u=e.customDepthMaterial;!0===n.isPointLight&&(s=l,u=e.customDistanceMaterial);void 0===u?(u=!1,!0===r.morphTargets&&(u=t.morphAttributes&&t.morphAttributes.position&&0<t.morphAttributes.position.length),t=!1,!0===e.isSkinnedMesh&&(!0===r.skinning?t=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),e=s(u,t,!0===e.isInstancedMesh)):e=u;d.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length&&(u=e.uuid,s=r.uuid,t=h[u],void 0===t&&(t={},h[u]=t),u=t[s],void 0===u&&(u=e.clone(),t[s]=u),e=u);e.visible=r.visible;e.wireframe=r.wireframe;e.side=3===a?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:f[r.side];e.clipShadows=r.clipShadows;e.clippingPlanes=r.clippingPlanes;e.clipIntersection=r.clipIntersection;e.wireframeLinewidth=r.wireframeLinewidth;e.linewidth=r.linewidth;!0===n.isPointLight&&!0===e.isMeshDistanceMaterial&&(e.referencePosition.setFromMatrixPosition(n.matrixWorld),e.nearDistance=i,e.farDistance=o);return e}function g(e,t,r,n,i){if(!1!==e.visible){if(e.layers.test(t.layers)&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&3===i)&&(!e.frustumCulled||_.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);var o=v.update(e),a=e.material;if(Array.isArray(a))for(var s=o.groups,u=0,c=s.length;u<c;u++){var l=s[u],h=a[l.materialIndex];h&&h.visible&&(h=p(e,o,h,n,r.near,r.far,i),d.renderBufferDirect(r,null,o,h,e,l))}else a.visible&&(h=p(e,o,a,n,r.near,r.far,i),d.renderBufferDirect(r,null,o,h,e,null))}e=e.children;o=0;for(a=e.length;o<a;o++)g(e[o],t,r,n,i)}}var _=new Ae,y=new Me,b=new Me,x=new Ce,i=[],o=[],h={},f={0:1,1:0,2:2},w=new G({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),S=w.clone();S.defines.HORIZONAL_PASS=1;var e=new N;e.setAttribute("position",new E(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var M=new I(e,w),C=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(e,t,r){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==e.length){var n=d.getRenderTarget(),i=d.getActiveCubeFace(),o=d.getActiveMipmapLevel(),a=d.state;a.setBlending(0);a.buffers.color.setClear(1,1,1,1);a.buffers.depth.setTest(!0);a.setScissorTest(!1);for(var s=0,u=e.length;s<u;s++){var c=e[s],l=c.shadow;if(void 0===l)console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");else{y.copy(l.mapSize);var h=l.getFrameExtents();y.multiply(h);b.copy(l.mapSize);if(y.x>m||y.y>m)y.x>m&&(b.x=Math.floor(m/h.x),y.x=b.x*h.x,l.mapSize.x=b.x),y.y>m&&(b.y=Math.floor(m/h.y),y.y=b.y*h.y,l.mapSize.y=b.y);null!==l.map||l.isPointLightShadow||3!==this.type||(h={minFilter:1006,magFilter:1006,format:1023},l.map=new T(y.x,y.y,h),l.map.texture.name=c.name+".shadowMap",l.mapPass=new T(y.x,y.y,h),l.camera.updateProjectionMatrix());null===l.map&&(h={minFilter:1003,magFilter:1003,format:1023},l.map=new T(y.x,y.y,h),l.map.texture.name=c.name+".shadowMap",l.camera.updateProjectionMatrix());d.setRenderTarget(l.map);d.clear();h=l.getViewportCount();for(var p=0;p<h;p++){var f=l.getViewport(p);x.set(b.x*f.x,b.y*f.y,b.x*f.z,b.y*f.w);a.viewport(x);l.updateMatrices(c,p);_=l.getFrustum();g(t,r,l.camera,c,this.type)}l.isPointLightShadow||3!==this.type||(c=l,l=r,h=v.update(M),w.uniforms.shadow_pass.value=c.map.texture,w.uniforms.resolution.value=c.mapSize,w.uniforms.radius.value=c.radius,d.setRenderTarget(c.mapPass),d.clear(),d.renderBufferDirect(l,null,h,w,M,null),S.uniforms.shadow_pass.value=c.mapPass.texture,S.uniforms.resolution.value=c.mapSize,S.uniforms.radius.value=c.radius,d.setRenderTarget(c.map),d.clear(),d.renderBufferDirect(l,null,h,S,M,null))}}C.needsUpdate=!1;d.setRenderTarget(n,i,o)}}}function Dt(l,r,e){function t(e,t,r){var n=new Uint8Array(4),i=l.createTexture();l.bindTexture(e,i);l.texParameteri(e,10241,9728);l.texParameteri(e,10240,9728);for(e=0;e<r;e++)l.texImage2D(t+e,0,6408,1,1,0,6408,5121,n);return i}function n(e,t){m[e]=1;0===g[e]&&(l.enableVertexAttribArray(e),g[e]=1);_[e]!==t&&((c?l:r.get("ANGLE_instanced_arrays"))[c?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),_[e]=t)}function h(e){!0!==y[e]&&(l.enable(e),y[e]=!0)}function p(e){!1!==y[e]&&(l.disable(e),y[e]=!1)}function i(e,t,r,n,i,o,a,s){if(0===e)x&&(p(3042),x=!1);else if(x||(h(3042),x=!0),5!==e){if(e!==w||s!==P){if(100!==S||100!==T)l.blendEquation(32774),T=S=100;if(s)switch(e){case 1:l.blendFuncSeparate(1,771,1,771);break;case 2:l.blendFunc(1,1);break;case 3:l.blendFuncSeparate(0,0,769,771);break;case 4:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:l.blendFuncSeparate(770,771,1,771);break;case 2:l.blendFunc(770,1);break;case 3:l.blendFunc(0,769);break;case 4:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}O=E=C=M=null;w=e;P=s}}else{i=i||t;o=o||r;a=a||n;if(t!==S||i!==T)l.blendEquationSeparate(G[t],G[i]),S=t,T=i;if(r!==M||n!==C||o!==E||a!==O)l.blendFuncSeparate(V[r],V[n],V[o],V[a]),M=r,C=n,E=o,O=a;w=e;P=null}}function o(e){A!==e&&(e?l.frontFace(2304):l.frontFace(2305),A=e)}function a(e){0!==e?(h(2884),e!==j&&(1===e?l.cullFace(1029):2===e?l.cullFace(1028):l.cullFace(1032))):p(2884);j=e}function s(e,t,r){if(e){if(h(32823),k!==t||L!==r)l.polygonOffset(t,r),k=t,L=r}else p(32823)}function u(e){void 0===e&&(e=33984+N-1);D!==e&&(l.activeTexture(e),D=e)}var c=e.isWebGL2,f=new function(){var t=!1,o=new Ce,r=null,a=new Ce(0,0,0,0);return{setMask:function(e){r===e||t||(l.colorMask(e,e,e,e),r=e)},setLocked:function(e){t=e},setClear:function(e,t,r,n,i){!0===i&&(e*=n,t*=n,r*=n);o.set(e,t,r,n);!1===a.equals(o)&&(l.clearColor(e,t,r,n),a.copy(o))},reset:function(){t=!1;r=null;a.set(-1,0,0,0)}}},d=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(e){e?h(2929):p(2929)},setMask:function(e){r===e||t||(l.depthMask(e),r=e)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:l.depthFunc(512);break;case 1:l.depthFunc(519);break;case 2:l.depthFunc(513);break;case 3:l.depthFunc(515);break;case 4:l.depthFunc(514);break;case 5:l.depthFunc(518);break;case 6:l.depthFunc(516);break;case 7:l.depthFunc(517);break;default:l.depthFunc(515)}else l.depthFunc(515);n=e}},setLocked:function(e){t=e},setClear:function(e){i!==e&&(l.clearDepth(e),i=e)},reset:function(){t=!1;i=n=r=null}}},v=new function(){var t=!1,r=null,n=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?h(2960):p(2960))},setMask:function(e){r===e||t||(l.stencilMask(e),r=e)},setFunc:function(e,t,r){if(n!==e||i!==t||o!==r)l.stencilFunc(e,t,r),n=e,i=t,o=r},setOp:function(e,t,r){if(a!==e||s!==t||u!==r)l.stencilOp(e,t,r),a=e,s=t,u=r},setLocked:function(e){t=e},setClear:function(e){c!==e&&(l.clearStencil(e),c=e)},reset:function(){t=!1;c=u=s=a=o=i=n=r=null}}};e=l.getParameter(34921);var m=new Uint8Array(e),g=new Uint8Array(e),_=new Uint8Array(e),y={},b=null,x=null,w=null,S=null,M=null,C=null,T=null,E=null,O=null,P=!1,A=null,j=null,R=null,k=null,L=null,N=l.getParameter(35661),I=!1;e=0;e=l.getParameter(7938);-1!==e.indexOf("WebGL")?(e=parseFloat(/^WebGL ([0-9])/.exec(e)[1]),I=1<=e):-1!==e.indexOf("OpenGL ES")&&(e=parseFloat(/^OpenGL ES ([0-9])/.exec(e)[1]),I=2<=e);var D=null,B={},F=new Ce,z=new Ce,$={};$[3553]=t(3553,3553,1);$[34067]=t(34067,34069,6);f.setClear(0,0,0,1);d.setClear(1);v.setClear(0);h(2929);d.setFunc(3);o(!1);a(1);h(2884);i(0);var G={100:32774,101:32778,102:32779};c?(G[103]=32775,G[104]=32776):(e=r.get("EXT_blend_minmax"),null!==e&&(G[103]=e.MIN_EXT,G[104]=e.MAX_EXT));var V={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:f,depth:d,stencil:v},initAttributes:function(){for(var e=0,t=m.length;e<t;e++)m[e]=0},enableAttribute:function(e){n(e,0)},enableAttributeAndDivisor:n,disableUnusedAttributes:function(){for(var e=0,t=g.length;e!==t;++e)g[e]!==m[e]&&(l.disableVertexAttribArray(e),g[e]=0)},vertexAttribPointer:function(e,t,r,n,i,o){!0!==c||5124!==r&&5125!==r?l.vertexAttribPointer(e,t,r,n,i,o):l.vertexAttribIPointer(e,t,r,n,i,o)},enable:h,disable:p,useProgram:function(e){return b!==e?(l.useProgram(e),b=e,!0):!1},setBlending:i,setMaterial:function(e,t){2===e.side?p(2884):h(2884);var r=1===e.side;t&&(r=!r);o(r);1===e.blending&&!1===e.transparent?i(0):i(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha);d.setFunc(e.depthFunc);d.setTest(e.depthTest);d.setMask(e.depthWrite);f.setMask(e.colorWrite);t=e.stencilWrite;v.setTest(t);t&&(v.setMask(e.stencilWriteMask),v.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),v.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass));s(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:o,setCullFace:a,setLineWidth:function(e){e!==R&&(I&&l.lineWidth(e),R=e)},setPolygonOffset:s,setScissorTest:function(e){e?h(3089):p(3089)},activeTexture:u,bindTexture:function(e,t){null===D&&u();var r=B[D];void 0===r&&(r={type:void 0,texture:void 0},B[D]=r);if(r.type!==e||r.texture!==t)l.bindTexture(e,t||$[e]),r.type=e,r.texture=t},unbindTexture:function(){var e=B[D];void 0!==e&&void 0!==e.type&&(l.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{l.compressedTexImage2D.apply(l,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{l.texImage2D.apply(l,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{l.texImage3D.apply(l,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===F.equals(e)&&(l.scissor(e.x,e.y,e.z,e.w),F.copy(e))},viewport:function(e){!1===z.equals(e)&&(l.viewport(e.x,e.y,e.z,e.w),z.copy(e))},reset:function(){for(var e=0;e<g.length;e++)1===g[e]&&(l.disableVertexAttribArray(e),g[e]=0);y={};D=null;B={};j=A=w=b=null;f.reset();d.reset();v.reset()}}}function Bt(f,n,d,v,i,m,s){function o(e,t){return k?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,r,n){var i=1;if(e.width>n||e.height>n)i=n/Math.max(e.width,e.height);if(1>i||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)return n=t?Vo.floorPowerOfTwo:Math.floor,t=n(i*e.width),i=n(i*e.height),void 0===R&&(R=o(t,i)),r=r?o(t,i):R,r.width=t,r.height=i,r.getContext("2d").drawImage(e,0,0,t,i),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+t+"x"+i+")."),r;"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function _(e){return Vo.isPowerOfTwo(e.width)&&Vo.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function b(e,t,r,n){f.generateMipmap(e);v.get(t).__maxMipLevel=Math.log(Math.max(r,n))*Math.LOG2E}function x(e,t,r){if(!1===E)return t;if(null!==e){if(void 0!==f[e])return f[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}e=t;6403===t&&(5126===r&&(e=33326),5131===r&&(e=33325),5121===r&&(e=33321));6407===t&&(5126===r&&(e=34837),5131===r&&(e=34843),5121===r&&(e=32849));6408===t&&(5126===r&&(e=34836),5131===r&&(e=34842),5121===r&&(e=32856));33325!==e&&33326!==e&&34842!==e&&34836!==e||n.get("EXT_color_buffer_float");return e}function a(e){return 1003===e||1004===e||1005===e?9728:9729}function r(e){e=e.target;e.removeEventListener("dispose",r);var t=v.get(e);void 0!==t.__webglInit&&(f.deleteTexture(t.__webglTexture),v.remove(e));e.isVideoTexture&&j.delete(e);s.memory.textures--}function u(e){e=e.target;e.removeEventListener("dispose",u);var t=v.get(e),r=v.get(e.texture);if(e){void 0!==r.__webglTexture&&f.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(r=0;6>r;r++)f.deleteFramebuffer(t.__webglFramebuffer[r]),t.__webglDepthbuffer&&f.deleteRenderbuffer(t.__webglDepthbuffer[r]);else f.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&f.deleteRenderbuffer(t.__webglDepthbuffer),t.__webglMultisampledFramebuffer&&f.deleteFramebuffer(t.__webglMultisampledFramebuffer),t.__webglColorRenderbuffer&&f.deleteRenderbuffer(t.__webglColorRenderbuffer),t.__webglDepthRenderbuffer&&f.deleteRenderbuffer(t.__webglDepthRenderbuffer);v.remove(e.texture);v.remove(e)}s.memory.textures--}function c(e,t){var r=v.get(e);if(e.isVideoTexture){var n=s.render.frame;j.get(e)!==n&&(j.set(e,n),e.update())}if(0<e.version&&r.__version!==e.version)if(n=e.image,void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{p(r,e,t);return}d.activeTexture(33984+t);d.bindTexture(3553,r.__webglTexture)}function l(e,t){if(6===e.image.length){var r=v.get(e);if(0<e.version&&r.__version!==e.version){S(r,e);d.activeTexture(33984+t);d.bindTexture(34067,r.__webglTexture);f.pixelStorei(37440,e.flipY);var n=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture);t=e.image[0]&&e.image[0].isDataTexture;for(var i=[],o=0;6>o;o++)i[o]=n||t?t?e.image[o].image:e.image[o]:g(e.image[o],!1,!0,O);var a=i[0],s=_(a)||E,u=m.convert(e.format),c=m.convert(e.type),l=x(e.internalFormat,u,c);w(34067,e,s);if(n){for(o=0;6>o;o++){var h=i[o].mipmaps;for(n=0;n<h.length;n++){var p=h[n];1023!==e.format&&1022!==e.format?null!==u?d.compressedTexImage2D(34069+o,n,l,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):d.texImage2D(34069+o,n,l,p.width,p.height,0,u,c,p.data)}}r.__maxMipLevel=h.length-1}else{h=e.mipmaps;for(o=0;6>o;o++)if(t)for(d.texImage2D(34069+o,0,l,i[o].width,i[o].height,0,u,c,i[o].data),n=0;n<h.length;n++)p=h[n],p=p.image[o].image,d.texImage2D(34069+o,n+1,l,p.width,p.height,0,u,c,p.data);else for(d.texImage2D(34069+o,0,l,u,c,i[o]),n=0;n<h.length;n++)p=h[n],d.texImage2D(34069+o,n+1,l,u,c,p.image[o]);r.__maxMipLevel=h.length}y(e,s)&&b(34067,e,a.width,a.height);r.__version=e.version;if(e.onUpdate)e.onUpdate(e)}else d.activeTexture(33984+t),d.bindTexture(34067,r.__webglTexture)}}function h(e,t){d.activeTexture(33984+t);d.bindTexture(34067,v.get(e).__webglTexture)}function w(e,t,r){r?(f.texParameteri(e,10242,N[t.wrapS]),f.texParameteri(e,10243,N[t.wrapT]),32879!==e&&35866!==e||f.texParameteri(e,32882,N[t.wrapR]),f.texParameteri(e,10240,I[t.magFilter]),f.texParameteri(e,10241,I[t.minFilter])):(f.texParameteri(e,10242,33071),f.texParameteri(e,10243,33071),32879!==e&&35866!==e||f.texParameteri(e,32882,33071),1001===t.wrapS&&1001===t.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),f.texParameteri(e,10240,a(t.magFilter)),f.texParameteri(e,10241,a(t.minFilter)),1003!==t.minFilter&&1006!==t.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(r=n.get("EXT_texture_filter_anisotropic"))||1015===t.type&&null===n.get("OES_texture_float_linear")||1016===t.type&&null===(E||n.get("OES_texture_half_float_linear"))||!(1<t.anisotropy||v.get(t).__currentAnisotropy)||(f.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,i.getMaxAnisotropy())),v.get(t).__currentAnisotropy=t.anisotropy)}function S(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",r),e.__webglTexture=f.createTexture(),s.memory.textures++)}function p(e,t,r){var n=3553;t.isDataTexture2DArray&&(n=35866);t.isDataTexture3D&&(n=32879);S(e,t);d.activeTexture(33984+r);d.bindTexture(n,e.__webglTexture);f.pixelStorei(37440,t.flipY);f.pixelStorei(37441,t.premultiplyAlpha);f.pixelStorei(3317,t.unpackAlignment);r=E?!1:1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter;r=r&&!1===_(t.image);r=g(t.image,r,!1,P);var i=_(r)||E,o=m.convert(t.format),a=m.convert(t.type),s=x(t.internalFormat,o,a);w(n,t,i);var u=t.mipmaps;if(t.isDepthTexture)s=6402,E?s=1015===t.type?36012:1014===t.type?33190:1020===t.type?35056:33189:1015===t.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===t.format&&6402===s&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,a=m.convert(t.type)),1027===t.format&&6402===s&&(s=34041,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,a=m.convert(t.type))),d.texImage2D(3553,0,s,r.width,r.height,0,o,a,null);else if(t.isDataTexture)if(0<u.length&&i){for(var c=0,l=u.length;c<l;c++){var h=u[c];d.texImage2D(3553,c,s,h.width,h.height,0,o,a,h.data)}t.generateMipmaps=!1;e.__maxMipLevel=u.length-1}else d.texImage2D(3553,0,s,r.width,r.height,0,o,a,r.data),e.__maxMipLevel=0;else if(t.isCompressedTexture){c=0;for(l=u.length;c<l;c++)h=u[c],1023!==t.format&&1022!==t.format?null!==o?d.compressedTexImage2D(3553,c,s,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):d.texImage2D(3553,c,s,h.width,h.height,0,o,a,h.data);e.__maxMipLevel=u.length-1}else if(t.isDataTexture2DArray)d.texImage3D(35866,0,s,r.width,r.height,r.depth,0,o,a,r.data),e.__maxMipLevel=0;else if(t.isDataTexture3D)d.texImage3D(32879,0,s,r.width,r.height,r.depth,0,o,a,r.data),e.__maxMipLevel=0;else if(0<u.length&&i){c=0;for(l=u.length;c<l;c++)h=u[c],d.texImage2D(3553,c,s,o,a,h);t.generateMipmaps=!1;e.__maxMipLevel=u.length-1}else d.texImage2D(3553,0,s,o,a,r),e.__maxMipLevel=0;y(t,i)&&b(n,t,r.width,r.height);e.__version=t.version;if(t.onUpdate)t.onUpdate(t)}function M(e,t,r,n){var i=m.convert(t.texture.format),o=m.convert(t.texture.type),a=x(t.texture.internalFormat,i,o);d.texImage2D(n,0,a,t.width,t.height,0,i,o,null);f.bindFramebuffer(36160,e);f.framebufferTexture2D(36160,r,n,v.get(t.texture).__webglTexture,0);f.bindFramebuffer(36160,null)}function C(e,t,r){f.bindRenderbuffer(36161,e);if(t.depthBuffer&&!t.stencilBuffer){var n=33189;r?((r=t.depthTexture)&&r.isDepthTexture&&(1015===r.type?n=36012:1014===r.type&&(n=33190)),r=T(t),f.renderbufferStorageMultisample(36161,r,n,t.width,t.height)):f.renderbufferStorage(36161,n,t.width,t.height);f.framebufferRenderbuffer(36160,36096,36161,e)}else t.depthBuffer&&t.stencilBuffer?(r?(r=T(t),f.renderbufferStorageMultisample(36161,r,35056,t.width,t.height)):f.renderbufferStorage(36161,34041,t.width,t.height),f.framebufferRenderbuffer(36160,33306,36161,e)):(e=m.convert(t.texture.format),n=m.convert(t.texture.type),n=x(t.texture.internalFormat,e,n),r?(r=T(t),f.renderbufferStorageMultisample(36161,r,n,t.width,t.height)):f.renderbufferStorage(36161,n,t.width,t.height));f.bindRenderbuffer(36161,null)}function T(e){return E&&e.isWebGLMultisampleRenderTarget?Math.min(A,e.samples):0}var E=i.isWebGL2,t=i.maxTextures,O=i.maxCubemapSize,P=i.maxTextureSize,A=i.maxSamples,j=new WeakMap,R,k=!1;try{k="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}var L=0,N={1e3:10497,1001:33071,1002:33648},I={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},D=!1,B=!1;this.allocateTextureUnit=function(){var e=L;e>=t&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+t);L+=1;return e};this.resetTextureUnits=function(){L=0};this.setTexture2D=c;this.setTexture2DArray=function(e,t){var r=v.get(e);0<e.version&&r.__version!==e.version?p(r,e,t):(d.activeTexture(33984+t),d.bindTexture(35866,r.__webglTexture))};this.setTexture3D=function(e,t){var r=v.get(e);0<e.version&&r.__version!==e.version?p(r,e,t):(d.activeTexture(33984+t),d.bindTexture(32879,r.__webglTexture))};this.setTextureCube=l;this.setTextureCubeDynamic=h;this.setupRenderTarget=function(e){var t=v.get(e),r=v.get(e.texture);e.addEventListener("dispose",u);r.__webglTexture=f.createTexture();s.memory.textures++;var n=!0===e.isWebGLCubeRenderTarget,i=!0===e.isWebGLMultisampleRenderTarget,o=_(e)||E;!E||1022!==e.texture.format||1015!==e.texture.type&&1016!==e.texture.type||(e.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));if(n)for(t.__webglFramebuffer=[],i=0;6>i;i++)t.__webglFramebuffer[i]=f.createFramebuffer();else if(t.__webglFramebuffer=f.createFramebuffer(),i)if(E){t.__webglMultisampledFramebuffer=f.createFramebuffer();t.__webglColorRenderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,t.__webglColorRenderbuffer);i=m.convert(e.texture.format);var a=m.convert(e.texture.type);i=x(e.texture.internalFormat,i,a);a=T(e);f.renderbufferStorageMultisample(36161,a,i,e.width,e.height);f.bindFramebuffer(36160,t.__webglMultisampledFramebuffer);f.framebufferRenderbuffer(36160,36064,36161,t.__webglColorRenderbuffer);f.bindRenderbuffer(36161,null);e.depthBuffer&&(t.__webglDepthRenderbuffer=f.createRenderbuffer(),C(t.__webglDepthRenderbuffer,e,!0));f.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(n){d.bindTexture(34067,r.__webglTexture);w(34067,e.texture,o);for(i=0;6>i;i++)M(t.__webglFramebuffer[i],e,36064,34069+i);y(e.texture,o)&&b(34067,e.texture,e.width,e.height);d.bindTexture(34067,null)}else d.bindTexture(3553,r.__webglTexture),w(3553,e.texture,o),M(t.__webglFramebuffer,e,36064,3553),y(e.texture,o)&&b(3553,e.texture,e.width,e.height),d.bindTexture(3553,null);if(e.depthBuffer){t=v.get(e);r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(r)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");f.bindFramebuffer(36160,t.__webglFramebuffer);if(!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");v.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0);c(e.depthTexture,0);t=v.get(e.depthTexture).__webglTexture;if(1026===e.depthTexture.format)f.framebufferTexture2D(36160,36096,3553,t,0);else if(1027===e.depthTexture.format)f.framebufferTexture2D(36160,33306,3553,t,0);else throw Error("Unknown depthTexture format")}else if(r)for(t.__webglDepthbuffer=[],r=0;6>r;r++)f.bindFramebuffer(36160,t.__webglFramebuffer[r]),t.__webglDepthbuffer[r]=f.createRenderbuffer(),C(t.__webglDepthbuffer[r],e,!1);else f.bindFramebuffer(36160,t.__webglFramebuffer),t.__webglDepthbuffer=f.createRenderbuffer(),C(t.__webglDepthbuffer,e,!1);f.bindFramebuffer(36160,null)}};this.updateRenderTargetMipmap=function(e){var t=e.texture,r=_(e)||E;if(y(t,r)){r=e.isWebGLCubeRenderTarget?34067:3553;var n=v.get(t).__webglTexture;d.bindTexture(r,n);b(r,t,e.width,e.height);d.bindTexture(r,null)}};this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(E){var t=v.get(e);f.bindFramebuffer(36008,t.__webglMultisampledFramebuffer);f.bindFramebuffer(36009,t.__webglFramebuffer);var r=e.width,n=e.height,i=16384;e.depthBuffer&&(i|=256);e.stencilBuffer&&(i|=1024);f.blitFramebuffer(0,0,r,n,0,0,r,n,i,9728);f.bindFramebuffer(36160,t.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture);c(e,t)};this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture);e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?l(e,t):h(e,t)}}function Ft(e,r,t){var n=t.isWebGL2;return{convert:function(e){if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(n)return 5131;var t=r.get("OES_texture_half_float");return null!==t?t.HALF_FLOAT_OES:null}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e)if(t=r.get("WEBGL_compressed_texture_s3tc"),null!==t){if(33776===e)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===e||35841===e||35842===e||35843===e)if(t=r.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(35840===e)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===e)return t=r.get("WEBGL_compressed_texture_etc1"),null!==t?t.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===e||37496===e)if(t=r.get("WEBGL_compressed_texture_etc"),null!==t){if(37492===e)return t.COMPRESSED_RGB8_ETC2;if(37496===e)return t.COMPRESSED_RGBA8_ETC2_EAC}if(37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e)return t=r.get("WEBGL_compressed_texture_astc"),null!==t?e:null;if(36492===e)return t=r.get("EXT_texture_compression_bptc"),null!==t?e:null;if(1020===e){if(n)return 34042;t=r.get("WEBGL_depth_texture");return null!==t?t.UNSIGNED_INT_24_8_WEBGL:null}}}}function zt(e){H.call(this);this.cameras=e||[]}function $t(){f.call(this);this.type="Group"}function Gt(){this._grip=this._targetRay=null}function Vt(c,t){function r(e){var t=v.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function n(){v.forEach(function(e,t){e.disconnect(t)});v.clear();c.setFramebuffer(null);c.setRenderTarget(c.getRenderTarget());C.stop();a.isPresenting=!1;a.dispatchEvent({type:"sessionend"})}function i(e){p=e;C.setContext(h);C.start();a.isPresenting=!0;a.dispatchEvent({type:"sessionstart"})}function o(e){for(var t=h.inputSources,r=0;r<d.length;r++)v.set(t[r],d[r]);for(r=0;r<e.removed.length;r++){t=e.removed[r];var n=v.get(t);n&&(n.dispatchEvent({type:"disconnected",data:t}),v.delete(t))}for(r=0;r<e.added.length;r++)t=e.added[r],(n=v.get(t))&&n.dispatchEvent({type:"connected",data:t})}function l(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix);e.matrixWorldInverse.getInverse(e.matrixWorld)}var a=this,h=null,s=1,p=null,u="local-floor",f=null,d=[],v=new Map,m=new H;m.layers.enable(1);m.viewport=new Ce;var g=new H;g.layers.enable(2);g.viewport=new Ce;var _=[m,g],y=new zt;y.layers.enable(1);y.layers.enable(2);var b=null,x=null;this.isPresenting=this.enabled=!1;this.getController=function(e){var t=d[e];void 0===t&&(t=new Gt,d[e]=t);return t.getTargetRaySpace()};this.getControllerGrip=function(e){var t=d[e];void 0===t&&(t=new Gt,d[e]=t);return t.getGripSpace()};this.setFramebufferScaleFactor=function(e){s=e;!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};this.setReferenceSpaceType=function(e){u=e;!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};this.getReferenceSpace=function(){return p};this.getSession=function(){return h};this.setSession=function(e){h=e;null!==h&&(h.addEventListener("select",r),h.addEventListener("selectstart",r),h.addEventListener("selectend",r),h.addEventListener("squeeze",r),h.addEventListener("squeezestart",r),h.addEventListener("squeezeend",r),h.addEventListener("end",n),e=t.getContextAttributes(),!0!==e.xrCompatible&&t.makeXRCompatible(),e=new XRWebGLLayer(h,t,{antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:s}),h.updateRenderState({baseLayer:e}),h.requestReferenceSpace(u).then(i),h.addEventListener("inputsourceschange",o))};var w=new Te,S=new Te;this.getCamera=function(e){y.near=g.near=m.near=e.near;y.far=g.far=m.far=e.far;if(b!==y.near||x!==y.far)h.updateRenderState({depthNear:y.near,depthFar:y.far}),b=y.near,x=y.far;var t=e.parent,r=y.cameras;l(y,t);for(var n=0;n<r.length;n++)l(r[n],t);e.matrixWorld.copy(y.matrixWorld);e=e.children;n=0;for(t=e.length;n<t;n++)e[n].updateMatrixWorld(!0);if(2===r.length){w.setFromMatrixPosition(m.matrixWorld);S.setFromMatrixPosition(g.matrixWorld);r=w.distanceTo(S);var i=m.projectionMatrix.elements,o=g.projectionMatrix.elements,a=i[14]/(i[10]-1);n=i[14]/(i[10]+1);e=(i[9]+1)/i[5];t=(i[9]-1)/i[5];var s=(i[8]-1)/i[0],u=(o[8]+1)/o[0];o=a*s;i=a*u;u=r/(-s+u);s=u*-s;m.matrixWorld.decompose(y.position,y.quaternion,y.scale);y.translateX(s);y.translateZ(u);y.matrixWorld.compose(y.position,y.quaternion,y.scale);y.matrixWorldInverse.getInverse(y.matrixWorld);a+=u;u=n+u;y.projectionMatrix.makePerspective(o-s,i+(r-s),e*n/u*a,t*n/u*a,a,u)}else y.projectionMatrix.copy(m.projectionMatrix);return y};var M=null,C=new je;C.setAnimationLoop(function(e,t){f=t.getViewerPose(p);if(null!==f){var r=f.views,n=h.renderState.baseLayer;c.setFramebuffer(n.framebuffer);var i=!1;r.length!==y.cameras.length&&(y.cameras.length=0,i=!0);for(var o=0;o<r.length;o++){var a=r[o],s=n.getViewport(a),u=_[o];u.matrix.fromArray(a.transform.matrix);u.projectionMatrix.fromArray(a.projectionMatrix);u.viewport.set(s.x,s.y,s.width,s.height);0===o&&y.matrix.copy(u.matrix);!0===i&&y.cameras.push(u)}}r=h.inputSources;for(o=0;o<d.length;o++)d[o].update(r[o],t,p);M&&M(e,t)});this.setAnimationLoop=function(e){M=e};this.dispose=function(){}}function Ht(o){function s(e,t,r){e.opacity.value=t.opacity;t.color&&e.diffuse.value.copy(t.color);t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.specularMap&&(e.specularMap.value=t.specularMap);if(r=t.envMap||r)e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=o.get(r).__maxMipLevel;t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity);t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);if(t.map)var n=t.map;else t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap);void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix));if(t.aoMap)var i=t.aoMap;else t.lightMap&&(i=t.lightMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function u(e,t,r){e.roughness.value=t.roughness;e.metalness.value=t.metalness;t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap);t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);if(t.envMap||r)e.envMapIntensity.value=t.envMapIntensity}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color);t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,t,r,n,i){if(t.isMeshBasicMaterial)s(e,t);else if(t.isMeshLambertMaterial)s(e,t),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);else if(t.isMeshToonMaterial)s(e,t),e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);else if(t.isMeshPhongMaterial)s(e,t),e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);else if(t.isMeshStandardMaterial)s(e,t,r),t.isMeshPhysicalMaterial?(u(e,t,r),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()),e.transparency.value=t.transparency):u(e,t,r);else if(t.isMeshMatcapMaterial)s(e,t),t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);else if(t.isMeshDepthMaterial)s(e,t),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);else if(t.isMeshDistanceMaterial)s(e,t),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance;else if(t.isMeshNormalMaterial)s(e,t),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);else if(t.isLineBasicMaterial)e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.isLineDashedMaterial&&(e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale);else if(t.isPointsMaterial){e.diffuse.value.copy(t.color);e.opacity.value=t.opacity;e.size.value=t.size*n;e.scale.value=.5*i;t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);if(t.map)var o=t.map;else t.alphaMap&&(o=t.alphaMap);void 0!==o&&(!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uvTransform.value.copy(o.matrix))}else if(t.isSpriteMaterial){e.diffuse.value.copy(t.color);e.opacity.value=t.opacity;e.rotation.value=t.rotation;t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);if(t.map)var a=t.map;else t.alphaMap&&(a=t.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}else t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function Ut(e){var w;function t(){te=new De(ee);re=new Ne(ee,te,e);!1===re.isWebGL2&&(te.get("WEBGL_depth_texture"),te.get("OES_texture_float"),te.get("OES_texture_half_float"),te.get("OES_texture_half_float_linear"),te.get("OES_standard_derivatives"),te.get("OES_element_index_uint"),te.get("ANGLE_instanced_arrays"));te.get("OES_texture_float_linear");_e=new Ft(ee,te,re);ne=new Dt(ee,te,re);ne.scissor(B.copy(q).multiplyScalar(G).floor());ne.viewport(D.copy(U).multiplyScalar(G).floor());ie=new ze(ee);oe=new St;ae=new Bt(ee,te,ne,oe,re,_e,ie);se=new Re(ee,re);ue=new Be(ee,se,ie);ce=new Ge(ee,ue,se,ie);ve=new $e(ee);le=new wt(C,te,re);he=new Ht(oe);pe=new Et;fe=new kt;de=new ke(C,ne,ce,g);me=new Le(ee,te,ie,re);ge=new Fe(ee,te,ie,re);ie.programs=le.programs;C.capabilities=re;C.extensions=te;C.properties=oe;C.renderLists=pe;C.state=ne;C.info=ie}function r(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");T=!0}function n(){console.log("THREE.WebGLRenderer: Context Restored.");T=!1;t()}function c(e){e=e.target;e.removeEventListener("dispose",c);l(e);oe.remove(e)}function l(e){var t=oe.get(e).program;e.program=void 0;void 0!==t&&le.releaseProgram(t)}function s(e,t){e.render(function(e){C.renderBufferImmediate(e,t)})}function h(e,t,r,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)M.pushLight(e),e.castShadow&&M.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||X.intersectsSprite(e)){n&&Q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(J);var i=ce.update(e),o=e.material;o.visible&&x.push(e,i,o,r,Q.z,null)}}else if(e.isImmediateRenderObject)n&&Q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(J),x.push(e,null,e.material,r,Q.z,null);else if(e.isMesh||e.isLine||e.isPoints)if(e.isSkinnedMesh&&e.skeleton.frame!==ie.render.frame&&(e.skeleton.update(),e.skeleton.frame=ie.render.frame),!e.frustumCulled||X.intersectsObject(e))if(n&&Q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(J),i=ce.update(e),o=e.material,Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&x.push(e,i,l,r,Q.z,c)}else o.visible&&x.push(e,i,o,r,Q.z,null);e=e.children;s=0;for(u=e.length;s<u;s++)h(e[s],t,r,n)}}function a(e,t,r,n){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=void 0===n?a.material:n;a=a.group;if(r.isArrayCamera){I=r;for(var l=r.cameras,h=0,p=l.length;h<p;h++){var f=l[h];s.layers.test(f.layers)&&(ne.viewport(D.copy(f.viewport)),M.setupLights(f),d(s,t,f,u,c,a))}}else I=null,d(s,t,r,u,c,a)}}function d(e,t,r,n,i,o){e.onBeforeRender(C,t,r,n,i,o);M=fe.get(t,I||r);e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){var a=S(r,t,i,e);ne.setMaterial(i);k=w=null;L=!1;s(e,a)}else C.renderBufferDirect(r,t,n,i,e,o);e.onAfterRender(C,t,r,n,i,o);M=fe.get(t,I||r)}function v(e,t,r){var n=oe.get(e),i=M.state.lights,o=i.state.version;r=le.getParameters(e,i.state,M.state.shadowsArray,t,Y.numPlanes,Y.numIntersection,r);var a=le.getProgramCacheKey(r),s=n.program,u=!0;if(void 0===s)e.addEventListener("dispose",c);else if(s.cacheKey!==a)l(e);else{if(n.lightsStateVersion!==o)n.lightsStateVersion=o;else if(void 0!==r.shaderID)return;u=!1}u&&(s=le.acquireProgram(r,a),n.program=s,n.uniforms=r.uniforms,n.outputEncoding=r.outputEncoding,e.program=s);r=s.getAttributes();if(e.morphTargets)for(a=e.numSupportedMorphTargets=0;a<C.maxMorphTargets;a++)0<=r["morphTarget"+a]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(a=e.numSupportedMorphNormals=0;a<C.maxMorphNormals;a++)0<=r["morphNormal"+a]&&e.numSupportedMorphNormals++;r=n.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)n.numClippingPlanes=Y.numPlanes,n.numIntersection=Y.numIntersection,r.clippingPlanes=Y.uniform;n.environment=e.isMeshStandardMaterial?t.environment:null;n.fog=t.fog;n.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights;n.lightsStateVersion=o;n.needsLights&&(r.ambientLightColor.value=i.state.ambient,r.lightProbe.value=i.state.probe,r.directionalLights.value=i.state.directional,r.directionalLightShadows.value=i.state.directionalShadow,r.spotLights.value=i.state.spot,r.spotLightShadows.value=i.state.spotShadow,r.rectAreaLights.value=i.state.rectArea,r.pointLights.value=i.state.point,r.pointLightShadows.value=i.state.pointShadow,r.hemisphereLights.value=i.state.hemi,r.directionalShadowMap.value=i.state.directionalShadowMap,r.directionalShadowMatrix.value=i.state.directionalShadowMatrix,r.spotShadowMap.value=i.state.spotShadowMap,r.spotShadowMatrix.value=i.state.spotShadowMatrix,r.pointShadowMap.value=i.state.pointShadowMap,r.pointShadowMatrix.value=i.state.pointShadowMatrix);e=n.program.getUniforms();e=rt.seqWithValue(e.seq,r);n.uniformsList=e}function S(e,t,r,n){ae.resetTextureUnits();var i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===A?C.outputEncoding:A.texture.encoding,s=oe.get(r),u=M.state.lights;K&&(Z||e!==N)&&Y.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,s,e===N&&r.id===R);r.version===s.__version?void 0===s.program?v(r,t,n):r.fog&&s.fog!==i?v(r,t,n):s.environment!==o?v(r,t,n):s.needsLights&&s.lightsStateVersion!==u.state.version?v(r,t,n):void 0===s.numClippingPlanes||s.numClippingPlanes===Y.numPlanes&&s.numIntersection===Y.numIntersection?s.outputEncoding!==a&&v(r,t,n):v(r,t,n):(v(r,t,n),s.__version=r.version);var c=!1,l=!1,h=!1;t=s.program;a=t.getUniforms();u=s.uniforms;ne.useProgram(t.program)&&(h=l=c=!0);r.id!==R&&(R=r.id,l=!0);if(c||N!==e){a.setValue(ee,"projectionMatrix",e.projectionMatrix);re.logarithmicDepthBuffer&&a.setValue(ee,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2));N!==e&&(N=e,h=l=!0);if(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap)c=a.map.cameraPosition,void 0!==c&&c.setValue(ee,Q.setFromMatrixPosition(e.matrixWorld));(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&a.setValue(ee,"isOrthographic",!0===e.isOrthographicCamera);(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&a.setValue(ee,"viewMatrix",e.matrixWorldInverse)}if(r.skinning&&(a.setOptional(ee,n,"bindMatrix"),a.setOptional(ee,n,"bindMatrixInverse"),e=n.skeleton))if(c=e.bones,re.floatVertexTextures){if(void 0===e.boneTexture){c=Math.sqrt(4*c.length);c=Vo.ceilPowerOfTwo(c);c=Math.max(c,4);var p=new Float32Array(c*c*4);p.set(e.boneMatrices);var f=new Pe(p,c,c,1023,1015);e.boneMatrices=p;e.boneTexture=f;e.boneTextureSize=c}a.setValue(ee,"boneTexture",e.boneTexture,ae);a.setValue(ee,"boneTextureSize",e.boneTextureSize)}else a.setOptional(ee,e,"boneMatrices");if(l||s.receiveShadow!==n.receiveShadow)s.receiveShadow=n.receiveShadow,a.setValue(ee,"receiveShadow",n.receiveShadow);l&&(a.setValue(ee,"toneMappingExposure",C.toneMappingExposure),a.setValue(ee,"toneMappingWhitePoint",C.toneMappingWhitePoint),s.needsLights&&(l=h,u.ambientLightColor.needsUpdate=l,u.lightProbe.needsUpdate=l,u.directionalLights.needsUpdate=l,u.directionalLightShadows.needsUpdate=l,u.pointLights.needsUpdate=l,u.pointLightShadows.needsUpdate=l,u.spotLights.needsUpdate=l,u.spotLightShadows.needsUpdate=l,u.rectAreaLights.needsUpdate=l,u.hemisphereLights.needsUpdate=l),i&&r.fog&&he.refreshFogUniforms(u,i),he.refreshMaterialUniforms(u,r,o,G,$),void 0!==u.ltc_1&&(u.ltc_1.value=Ns.LTC_1),void 0!==u.ltc_2&&(u.ltc_2.value=Ns.LTC_2),rt.upload(ee,s.uniformsList,u,ae));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(rt.upload(ee,s.uniformsList,u,ae),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&a.setValue(ee,"center",n.center);a.setValue(ee,"modelViewMatrix",n.modelViewMatrix);a.setValue(ee,"normalMatrix",n.normalMatrix);a.setValue(ee,"modelMatrix",n.matrixWorld);return t}e=e||{};var i=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),o=void 0!==e.context?e.context:null,u=void 0!==e.alpha?e.alpha:!1,p=void 0!==e.depth?e.depth:!0,f=void 0!==e.stencil?e.stencil:!0,m=void 0!==e.antialias?e.antialias:!1,g=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,_=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,y=void 0!==e.powerPreference?e.powerPreference:"default",b=void 0!==e.failIfMajorPerformanceCaveat?e.failIfMajorPerformanceCaveat:!1,x=null,M=null;this.domElement=i;this.debug={checkShaderErrors:!0};this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.outputEncoding=3e3;this.physicallyCorrectLights=!1;this.toneMapping=0;this.toneMappingWhitePoint=this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var C=this,T=!1,E=null,O=0,P=0,A=null,j=null,R=-1;var k=w=null;var L=!1;var N=null,I=null,D=new Ce,B=new Ce,F=null,z=i.width,$=i.height,G=1,V=null,H=null,U=new Ce(0,0,z,$),q=new Ce(0,0,z,$),W=!1,X=new Ae,Y=new Ie,K=!1,Z=!1,J=new Ee,Q=new Te;try{u={alpha:u,depth:p,stencil:f,antialias:m,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:y,failIfMajorPerformanceCaveat:b};i.addEventListener("webglcontextlost",r,!1);i.addEventListener("webglcontextrestored",n,!1);var ee=o||i.getContext("webgl",u)||i.getContext("experimental-webgl",u);if(null===ee){if(null!==i.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===ee.getShaderPrecisionFormat&&(ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}var te,re,ne,ie,oe,ae,se,ue,ce,le,he,pe,fe,de,ve,me,ge,_e;t();var ye=new Vt(C,ee);this.xr=ye;var be=new It(C,ce,re.maxTextureSize);this.shadowMap=be;this.getContext=function(){return ee};this.getContextAttributes=function(){return ee.getContextAttributes()};this.forceContextLoss=function(){var e=te.get("WEBGL_lose_context");e&&e.loseContext()};this.forceContextRestore=function(){var e=te.get("WEBGL_lose_context");e&&e.restoreContext()};this.getPixelRatio=function(){return G};this.setPixelRatio=function(e){void 0!==e&&(G=e,this.setSize(z,$,!1))};this.getSize=function(e){void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Me);return e.set(z,$)};this.setSize=function(e,t,r){ye.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(z=e,$=t,i.width=Math.floor(e*G),i.height=Math.floor(t*G),!1!==r&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))};this.getDrawingBufferSize=function(e){void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Me);return e.set(z*G,$*G).floor()};this.setDrawingBufferSize=function(e,t,r){z=e;$=t;G=r;i.width=Math.floor(e*r);i.height=Math.floor(t*r);this.setViewport(0,0,e,t)};this.getCurrentViewport=function(e){void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Ce);return e.copy(D)};this.getViewport=function(e){return e.copy(U)};this.setViewport=function(e,t,r,n){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,r,n);ne.viewport(D.copy(U).multiplyScalar(G).floor())};this.getScissor=function(e){return e.copy(q)};this.setScissor=function(e,t,r,n){e.isVector4?q.set(e.x,e.y,e.z,e.w):q.set(e,t,r,n);ne.scissor(B.copy(q).multiplyScalar(G).floor())};this.getScissorTest=function(){return W};this.setScissorTest=function(e){ne.setScissorTest(W=e)};this.setOpaqueSort=function(e){V=e};this.setTransparentSort=function(e){H=e};this.getClearColor=function(){return de.getClearColor()};this.setClearColor=function(){de.setClearColor.apply(de,arguments)};this.getClearAlpha=function(){return de.getClearAlpha()};this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)};this.clear=function(e,t,r){var n=0;if(void 0===e||e)n|=16384;if(void 0===t||t)n|=256;if(void 0===r||r)n|=1024;ee.clear(n)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){i.removeEventListener("webglcontextlost",r,!1);i.removeEventListener("webglcontextrestored",n,!1);pe.dispose();fe.dispose();oe.dispose();ce.dispose();ye.dispose();Se.stop()};this.renderBufferImmediate=function(e,t){ne.initAttributes();var r=oe.get(e);e.hasPositions&&!r.position&&(r.position=ee.createBuffer());e.hasNormals&&!r.normal&&(r.normal=ee.createBuffer());e.hasUvs&&!r.uv&&(r.uv=ee.createBuffer());e.hasColors&&!r.color&&(r.color=ee.createBuffer());t=t.getAttributes();e.hasPositions&&(ee.bindBuffer(34962,r.position),ee.bufferData(34962,e.positionArray,35048),ne.enableAttribute(t.position),ee.vertexAttribPointer(t.position,3,5126,!1,0,0));e.hasNormals&&(ee.bindBuffer(34962,r.normal),ee.bufferData(34962,e.normalArray,35048),ne.enableAttribute(t.normal),ee.vertexAttribPointer(t.normal,3,5126,!1,0,0));e.hasUvs&&(ee.bindBuffer(34962,r.uv),ee.bufferData(34962,e.uvArray,35048),ne.enableAttribute(t.uv),ee.vertexAttribPointer(t.uv,2,5126,!1,0,0));e.hasColors&&(ee.bindBuffer(34962,r.color),ee.bufferData(34962,e.colorArray,35048),ne.enableAttribute(t.color),ee.vertexAttribPointer(t.color,3,5126,!1,0,0));ne.disableUnusedAttributes();ee.drawArrays(4,0,e.count);e.count=0};var xe=new Oe;this.renderBufferDirect=function(e,t,r,n,i,o){null===t&&(t=xe);var a=i.isMesh&&0>i.matrixWorld.determinant(),s=S(e,t,n,i);ne.setMaterial(n,a);var u=!1;if(w!==r.id||k!==s.id||L!==(!0===n.wireframe))w=r.id,k=s.id,L=!0===n.wireframe,u=!0;if(n.morphTargets||n.morphNormals)ve.update(i,r,n,s),u=!0;!0===i.isInstancedMesh&&(u=!0);e=r.index;t=r.attributes.position;if(null===e){if(void 0===t||0===t.count)return}else if(0===e.count)return;var c=1;!0===n.wireframe&&(e=ue.getWireframeAttribute(r),c=2);a=me;if(null!==e){var l=se.get(e);a=ge;a.setIndex(l)}if(u){if(!1!==re.isWebGL2||!i.isInstancedMesh&&!r.isInstancedBufferGeometry||null!==te.get("ANGLE_instanced_arrays")){ne.initAttributes();u=r.attributes;s=s.getAttributes();var h=n.defaultAttributeValues;for(x in s){var p=s[x];if(0<=p){var f=u[x];if(void 0!==f){var d=f.normalized,v=f.itemSize,m=se.get(f);if(void 0!==m){var g=m.buffer,_=m.type;m=m.bytesPerElement;if(f.isInterleavedBufferAttribute){var y=f.data,b=y.stride;f=f.offset;y&&y.isInstancedInterleavedBuffer?(ne.enableAttributeAndDivisor(p,y.meshPerAttribute),void 0===r._maxInstanceCount&&(r._maxInstanceCount=y.meshPerAttribute*y.count)):ne.enableAttribute(p);ee.bindBuffer(34962,g);ne.vertexAttribPointer(p,v,_,d,b*m,f*m)}else f.isInstancedBufferAttribute?(ne.enableAttributeAndDivisor(p,f.meshPerAttribute),void 0===r._maxInstanceCount&&(r._maxInstanceCount=f.meshPerAttribute*f.count)):ne.enableAttribute(p),ee.bindBuffer(34962,g),ne.vertexAttribPointer(p,v,_,d,0,0)}}else if("instanceMatrix"===x)m=se.get(i.instanceMatrix),void 0!==m&&(g=m.buffer,_=m.type,ne.enableAttributeAndDivisor(p+0,1),ne.enableAttributeAndDivisor(p+1,1),ne.enableAttributeAndDivisor(p+2,1),ne.enableAttributeAndDivisor(p+3,1),ee.bindBuffer(34962,g),ee.vertexAttribPointer(p+0,4,_,!1,64,0),ee.vertexAttribPointer(p+1,4,_,!1,64,16),ee.vertexAttribPointer(p+2,4,_,!1,64,32),ee.vertexAttribPointer(p+3,4,_,!1,64,48));else if(void 0!==h&&(d=h[x],void 0!==d))switch(d.length){case 2:ee.vertexAttrib2fv(p,d);break;case 3:ee.vertexAttrib3fv(p,d);break;case 4:ee.vertexAttrib4fv(p,d);break;default:ee.vertexAttrib1fv(p,d)}}}ne.disableUnusedAttributes()}null!==e&&ee.bindBuffer(34963,l.buffer)}var x=r.drawRange.start*c;u=null!==o?o.start*c:0;l=Math.max(x,u);o=Math.max(0,Math.min(null!==e?e.count:t.count,x+r.drawRange.count*c,u+(null!==o?o.count*c:Infinity))-1-l+1);0!==o&&(i.isMesh?!0===n.wireframe?(ne.setLineWidth(n.wireframeLinewidth*(null===A?G:1)),a.setMode(1)):a.setMode(4):i.isLine?(n=n.linewidth,void 0===n&&(n=1),ne.setLineWidth(n*(null===A?G:1)),i.isLineSegments?a.setMode(1):i.isLineLoop?a.setMode(2):a.setMode(3)):i.isPoints?a.setMode(0):i.isSprite&&a.setMode(4),i.isInstancedMesh?a.renderInstances(r,l,o,i.count):r.isInstancedBufferGeometry?a.renderInstances(r,l,o,Math.min(r.instanceCount,r._maxInstanceCount)):a.render(l,o))};this.compile=function(i,e){M=fe.get(i,e);M.init();i.traverse(function(e){e.isLight&&(M.pushLight(e),e.castShadow&&M.pushShadow(e))});M.setupLights(e);var o={};i.traverse(function(e){var t=e.material;if(t)if(Array.isArray(t))for(var r=0;r<t.length;r++){var n=t[r];!1===n.uuid in o&&(v(n,i,e),o[n.uuid]=!0)}else!1===t.uuid in o&&(v(t,i,e),o[t.uuid]=!0)})};var we=null,Se=new je;Se.setAnimationLoop(function(e){ye.isPresenting||we&&we(e)});"undefined"!==typeof window&&Se.setContext(window);this.setAnimationLoop=function(e){we=e;ye.setAnimationLoop(e);Se.start()};this.render=function(e,t,r,n){if(void 0!==r){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var i=r}if(void 0!==n){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var o=n}t&&t.isCamera?T||(k=w=null,L=!1,R=-1,N=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ye.enabled&&ye.isPresenting&&(t=ye.getCamera(t)),e.onBeforeRender(C,e,t,i||A),M=fe.get(e,t),M.init(),J.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),X.setFromProjectionMatrix(J),Z=this.localClippingEnabled,K=Y.init(this.clippingPlanes,Z,t),x=pe.get(e,t),x.init(),h(e,t,0,C.sortObjects),x.finish(),!0===C.sortObjects&&x.sort(V,H),K&&Y.beginShadows(),be.render(M.state.shadowsArray,e,t),M.setupLights(t),K&&Y.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),de.render(x,e,t,o),r=x.opaque,n=x.transparent,e.overrideMaterial?(i=e.overrideMaterial,r.length&&a(r,e,t,i),n.length&&a(n,e,t,i)):(r.length&&a(r,e,t),n.length&&a(n,e,t)),e.onAfterRender(C,e,t),null!==A&&(ae.updateRenderTargetMipmap(A),ae.updateMultisampleRenderTarget(A)),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1),M=x=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")};this.setFramebuffer=function(e){E!==e&&null===A&&ee.bindFramebuffer(36160,e);E=e};this.getActiveCubeFace=function(){return O};this.getActiveMipmapLevel=function(){return P};this.getRenderTarget=function(){return A};this.setRenderTarget=function(e,t,r){A=e;O=t;P=r;e&&void 0===oe.get(e).__webglFramebuffer&&ae.setupRenderTarget(e);var n=E,i=!1;e?(n=oe.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget?(n=n[t||0],i=!0):n=e.isWebGLMultisampleRenderTarget?oe.get(e).__webglMultisampledFramebuffer:n,D.copy(e.viewport),B.copy(e.scissor),F=e.scissorTest):(D.copy(U).multiplyScalar(G).floor(),B.copy(q).multiplyScalar(G).floor(),F=W);j!==n&&(ee.bindFramebuffer(36160,n),j=n);ne.viewport(D);ne.scissor(B);ne.setScissorTest(F);i&&(e=oe.get(e.texture),ee.framebufferTexture2D(36160,36064,34069+(t||0),e.__webglTexture,r||0))};this.readRenderTargetPixels=function(e,t,r,n,i,o,a){if(e&&e.isWebGLRenderTarget){var s=oe.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]);if(s){a=!1;s!==j&&(ee.bindFramebuffer(36160,s),a=!0);try{var u=e.texture,c=u.format,l=u.type;1023!==c&&_e.convert(c)!==ee.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===l||_e.convert(l)===ee.getParameter(35738)||1015===l&&(re.isWebGL2||te.get("OES_texture_float")||te.get("WEBGL_color_buffer_float"))||1016===l&&(re.isWebGL2?te.get("EXT_color_buffer_float"):te.get("EXT_color_buffer_half_float"))?36053===ee.checkFramebufferStatus(36160)?0<=t&&t<=e.width-n&&0<=r&&r<=e.height-i&&ee.readPixels(t,r,n,i,_e.convert(c),_e.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{a&&ee.bindFramebuffer(36160,j)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(e,t,r){void 0===r&&(r=0);var n=Math.pow(2,-r),i=Math.floor(t.image.width*n);n=Math.floor(t.image.height*n);var o=_e.convert(t.format);ae.setTexture2D(t,0);ee.copyTexImage2D(3553,r,o,e.x,e.y,i,n,0);ne.unbindTexture()};this.copyTextureToTexture=function(e,t,r,n){void 0===n&&(n=0);var i=t.image.width,o=t.image.height,a=_e.convert(r.format),s=_e.convert(r.type);ae.setTexture2D(r,0);t.isDataTexture?ee.texSubImage2D(3553,n,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ee.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ee.texSubImage2D(3553,n,e.x,e.y,a,s,t.image);0===n&&r.generateMipmaps&&ee.generateMipmap(3553);ne.unbindTexture()};this.initTexture=function(e){ae.setTexture2D(e,0);ne.unbindTexture()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function qt(e,t){this.name="";this.color=new v(e);this.density=void 0!==t?t:25e-5}function Wt(e,t,r){this.name="";this.color=new v(e);this.near=void 0!==t?t:1;this.far=void 0!==r?r:1e3}function Xt(e,t){this.array=e;this.stride=t;this.count=void 0!==e?e.length/t:0;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0}function Yt(e,t,r,n){this.name="";this.data=e;this.itemSize=t;this.offset=r;this.normalized=!0===n}function Kt(e){y.call(this);this.type="SpriteMaterial";this.color=new v(16777215);this.alphaMap=this.map=null;this.rotation=0;this.transparent=this.sizeAttenuation=!0;this.setValues(e)}function Zt(e){f.call(this);this.type="Sprite";if(void 0===eu){eu=new N;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new Xt(t,5);eu.setIndex([0,1,2,0,2,3]);eu.setAttribute("position",new Yt(t,3,0,!1));eu.setAttribute("uv",new Yt(t,2,3,!1))}this.geometry=eu;this.material=void 0!==e?e:new Kt;this.center=new Me(.5,.5)}function Jt(e,t,r,n,i,o){iu.subVectors(e,r).addScalar(.5).multiply(n);void 0!==i?(ou.x=o*iu.x-i*iu.y,ou.y=i*iu.x+o*iu.y):ou.copy(iu);e.copy(t);e.x+=ou.x;e.y+=ou.y;e.applyMatrix4(au)}function Qt(){f.call(this);this._currentLevel=0;this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}});this.autoUpdate=!0}function er(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");I.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new Ee;this.bindMatrixInverse=new Ee}function tr(e,t){e=e||[];this.bones=e.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);this.frame=-1;if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ee)}function rr(){f.call(this);this.type="Bone"}function nr(e,t,r){I.call(this,e,t);this.instanceMatrix=new E(new Float32Array(16*r),16);this.count=r;this.frustumCulled=!1}function ir(e){y.call(this);this.type="LineBasicMaterial";this.color=new v(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.morphTargets=!1;this.setValues(e)}function or(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");f.call(this);this.type="Line";this.geometry=void 0!==e?e:new N;this.material=void 0!==t?t:new ir;this.updateMorphTargets()}function ar(e,t){or.call(this,e,t);this.type="LineSegments"}function sr(e,t){or.call(this,e,t);this.type="LineLoop"}function ur(e){y.call(this);this.type="PointsMaterial";this.color=new v(16777215);this.alphaMap=this.map=null;this.size=1;this.sizeAttenuation=!0;this.morphTargets=!1;this.setValues(e)}function cr(e,t){f.call(this);this.type="Points";this.geometry=void 0!==e?e:new N;this.material=void 0!==t?t:new ur;this.updateMorphTargets()}function lr(e,t,r,n,i,o,a){var s=Pu.distanceSqToPoint(e);s<r&&(r=new Te,Pu.closestPointToPoint(e,r),r.applyMatrix4(n),e=i.ray.origin.distanceTo(r),e<i.near||e>i.far||o.push({distance:e,distanceToRay:Math.sqrt(s),point:r,index:t,face:null,object:a}))}function hr(e,t,r,n,i,o,a,s,u){p.call(this,e,t,r,n,i,o,a,s,u);this.format=void 0!==a?a:1022;this.minFilter=void 0!==o?o:1006;this.magFilter=void 0!==i?i:1006;this.generateMipmaps=!1}function pr(e,t,r,n,i,o,a,s,u,c,l,h){p.call(this,null,o,a,s,u,c,n,i,l,h);this.image={width:t,height:r};this.mipmaps=e;this.generateMipmaps=this.flipY=!1}function fr(e,t,r,n,i,o,a,s,u){p.call(this,e,t,r,n,i,o,a,s,u);this.needsUpdate=!0}function dr(e,t,r,n,i,o,a,s,u,c){c=void 0!==c?c:1026;if(1026!==c&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&1026===c&&(r=1012);void 0===r&&1027===c&&(r=1020);p.call(this,null,n,i,o,a,s,c,r,u);this.image={width:e,height:t};this.magFilter=void 0!==a?a:1003;this.minFilter=void 0!==s?s:1003;this.generateMipmaps=this.flipY=!1}function vr(e){N.call(this);this.type="WireframeGeometry";var t=[],r,n,i,o=[0,0],a={},s=["a","b","c"];if(e&&e.isGeometry){var u=e.faces;var c=0;for(n=u.length;c<n;c++){var l=u[c];for(r=0;3>r;r++){var h=l[s[r]];var p=l[s[(r+1)%3]];o[0]=Math.min(h,p);o[1]=Math.max(h,p);h=o[0]+","+o[1];void 0===a[h]&&(a[h]={index1:o[0],index2:o[1]})}}for(h in a)c=a[h],s=e.vertices[c.index1],t.push(s.x,s.y,s.z),s=e.vertices[c.index2],t.push(s.x,s.y,s.z)}else if(e&&e.isBufferGeometry)if(s=new Te,null!==e.index){u=e.attributes.position;l=e.index;var f=e.groups;0===f.length&&(f=[{start:0,count:l.count,materialIndex:0}]);e=0;for(i=f.length;e<i;++e)for(c=f[e],r=c.start,n=c.count,c=r,n=r+n;c<n;c+=3)for(r=0;3>r;r++)h=l.getX(c+r),p=l.getX(c+(r+1)%3),o[0]=Math.min(h,p),o[1]=Math.max(h,p),h=o[0]+","+o[1],void 0===a[h]&&(a[h]={index1:o[0],index2:o[1]});for(h in a)c=a[h],s.fromBufferAttribute(u,c.index1),t.push(s.x,s.y,s.z),s.fromBufferAttribute(u,c.index2),t.push(s.x,s.y,s.z)}else for(u=e.attributes.position,c=0,n=u.count/3;c<n;c++)for(r=0;3>r;r++)a=3*c+r,s.fromBufferAttribute(u,a),t.push(s.x,s.y,s.z),a=3*c+(r+1)%3,s.fromBufferAttribute(u,a),t.push(s.x,s.y,s.z);this.setAttribute("position",new j(t,3))}function mr(e,t,r){F.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:r};this.fromBufferGeometry(new gr(e,t,r));this.mergeVertices()}function gr(e,t,r){N.call(this);this.type="ParametricBufferGeometry";this.parameters={func:e,slices:t,stacks:r};var n=[],i=[],o=[],a=[],s=new Te,u=new Te,c=new Te,l=new Te,h=new Te,p,f;3>e.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var d=t+1;for(p=0;p<=r;p++){var v=p/r;for(f=0;f<=t;f++){var m=f/t;e(m,v,u);i.push(u.x,u.y,u.z);0<=m-1e-5?(e(m-1e-5,v,c),l.subVectors(u,c)):(e(m+1e-5,v,c),l.subVectors(c,u));0<=v-1e-5?(e(m,v-1e-5,c),h.subVectors(u,c)):(e(m,v+1e-5,c),h.subVectors(c,u));s.crossVectors(l,h).normalize();o.push(s.x,s.y,s.z);a.push(m,v)}}for(p=0;p<r;p++)for(f=0;f<t;f++)e=p*d+f+1,s=(p+1)*d+f+1,u=(p+1)*d+f,n.push(p*d+f,e,u),n.push(e,s,u);this.setIndex(n);this.setAttribute("position",new j(i,3));this.setAttribute("normal",new j(o,3));this.setAttribute("uv",new j(a,2))}function _r(e,t,r,n){F.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:r,detail:n};this.fromBufferGeometry(new yr(e,t,r,n));this.mergeVertices()}function yr(r,v,e,t){function m(e){h.push(e.x,e.y,e.z)}function g(e,t){e*=3;t.x=r[e+0];t.y=r[e+1];t.z=r[e+2]}function l(e,t,r,n){0>n&&1===e.x&&(p[t]=e.x-1);0===r.x&&0===r.z&&(p[t]=n/2/Math.PI+.5)}N.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:r,indices:v,radius:e,detail:t};e=e||1;t=t||0;var h=[],p=[];(function(e){for(var t=new Te,r=new Te,n=new Te,i=0;i<v.length;i+=3){g(v[i+0],t);g(v[i+1],r);g(v[i+2],n);var o,a,s=t,u=r,c=n,l=Math.pow(2,e),h=[];for(a=0;a<=l;a++){h[a]=[];var p=s.clone().lerp(c,a/l),f=u.clone().lerp(c,a/l),d=l-a;for(o=0;o<=d;o++)h[a][o]=0===o&&a===l?p:p.clone().lerp(f,o/d)}for(a=0;a<l;a++)for(o=0;o<2*(l-a)-1;o++)s=Math.floor(o/2),0===o%2?(m(h[a][s+1]),m(h[a+1][s]),m(h[a][s])):(m(h[a][s+1]),m(h[a+1][s+1]),m(h[a+1][s]))}})(t);(function(e){for(var t=new Te,r=0;r<h.length;r+=3)t.x=h[r+0],t.y=h[r+1],t.z=h[r+2],t.normalize().multiplyScalar(e),h[r+0]=t.x,h[r+1]=t.y,h[r+2]=t.z})(e);(function(){for(var e=new Te,t=0;t<h.length;t+=3)e.x=h[t+0],e.y=h[t+1],e.z=h[t+2],p.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new Te;t=new Te;for(var r=new Te,n=new Te,i=new Me,o=new Me,a=new Me,s=0,u=0;s<h.length;s+=9,u+=6){e.set(h[s+0],h[s+1],h[s+2]);t.set(h[s+3],h[s+4],h[s+5]);r.set(h[s+6],h[s+7],h[s+8]);i.set(p[u+0],p[u+1]);o.set(p[u+2],p[u+3]);a.set(p[u+4],p[u+5]);n.copy(e).add(t).add(r).divideScalar(3);var c=Math.atan2(n.z,-n.x);l(i,u+0,e,c);l(o,u+2,t,c);l(a,u+4,r,c)}for(e=0;e<p.length;e+=6)t=p[e+0],r=p[e+2],n=p[e+4],i=Math.min(t,r,n),.9<Math.max(t,r,n)&&.1>i&&(.2>t&&(p[e+0]+=1),.2>r&&(p[e+2]+=1),.2>n&&(p[e+4]+=1))})();this.setAttribute("position",new j(h,3));this.setAttribute("normal",new j(h.slice(),3));this.setAttribute("uv",new j(p,2));0===t?this.computeVertexNormals():this.normalizeNormals()}function br(e,t){F.call(this);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new xr(e,t));this.mergeVertices()}function xr(e,t){yr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t);this.type="TetrahedronBufferGeometry";this.parameters={radius:e,detail:t}}function wr(e,t){F.call(this);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Sr(e,t));this.mergeVertices()}function Sr(e,t){yr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t);this.type="OctahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Mr(e,t){F.call(this);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Cr(e,t));this.mergeVertices()}function Cr(e,t){var r=(1+Math.sqrt(5))/2;yr.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t);this.type="IcosahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Tr(e,t){F.call(this);this.type="DodecahedronGeometry";this.parameters={radius:e,detail:t};this.fromBufferGeometry(new Er(e,t));this.mergeVertices()}function Er(e,t){var r=(1+Math.sqrt(5))/2,n=1/r;yr.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t);this.type="DodecahedronBufferGeometry";this.parameters={radius:e,detail:t}}function Or(e,t,r,n,i,o){F.call(this);this.type="TubeGeometry";this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i};void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");e=new Pr(e,t,r,n,i);this.tangents=e.tangents;this.normals=e.normals;this.binormals=e.binormals;this.fromBufferGeometry(e);this.mergeVertices()}function Pr(i,o,a,s,e){function t(e){h=i.getPointAt(e/o,h);var t=u.normals[e];e=u.binormals[e];for(p=0;p<=s;p++){var r=p/s*Math.PI*2,n=Math.sin(r);r=-Math.cos(r);l.x=r*t.x+n*e.x;l.y=r*t.y+n*e.y;l.z=r*t.z+n*e.z;l.normalize();d.push(l.x,l.y,l.z);c.x=h.x+a*l.x;c.y=h.y+a*l.y;c.z=h.z+a*l.z;f.push(c.x,c.y,c.z)}}N.call(this);this.type="TubeBufferGeometry";this.parameters={path:i,tubularSegments:o,radius:a,radialSegments:s,closed:e};o=o||64;a=a||1;s=s||8;e=e||!1;var u=i.computeFrenetFrames(o,e);this.tangents=u.tangents;this.normals=u.normals;this.binormals=u.binormals;var c=new Te,l=new Te,r=new Me,h=new Te,n,p,f=[],d=[],v=[],m=[];for(n=0;n<o;n++)t(n);t(!1===e?o:0);for(n=0;n<=o;n++)for(p=0;p<=s;p++)r.x=n/o,r.y=p/s,v.push(r.x,r.y);(function(){for(p=1;p<=o;p++)for(n=1;n<=s;n++){var e=(s+1)*p+(n-1),t=(s+1)*p+n,r=(s+1)*(p-1)+n;m.push((s+1)*(p-1)+(n-1),e,r);m.push(e,t,r)}})();this.setIndex(m);this.setAttribute("position",new j(f,3));this.setAttribute("normal",new j(d,3));this.setAttribute("uv",new j(v,2))}function Ar(e,t,r,n,i,o,a){F.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o};void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new jr(e,t,r,n,i,o));this.mergeVertices()}function jr(e,t,r,n,i,o){function a(e,t,r,n,i){var o=Math.sin(e);t=r/t*e;r=Math.cos(t);i.x=n*(2+r)*.5*Math.cos(e);i.y=n*(2+r)*o*.5;i.z=n*Math.sin(t)*.5}N.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o};e=e||1;t=t||.4;r=Math.floor(r)||64;n=Math.floor(n)||8;i=i||2;o=o||3;var s=[],u=[],c=[],l=[],h,p=new Te,f=new Te,d=new Te,v=new Te,m=new Te,g=new Te,_=new Te;for(h=0;h<=r;++h){var y=h/r*i*Math.PI*2;a(y,i,o,e,d);a(y+.01,i,o,e,v);g.subVectors(v,d);_.addVectors(v,d);m.crossVectors(g,_);_.crossVectors(m,g);m.normalize();_.normalize();for(y=0;y<=n;++y){var b=y/n*Math.PI*2,x=-t*Math.cos(b);b=t*Math.sin(b);p.x=d.x+(x*_.x+b*m.x);p.y=d.y+(x*_.y+b*m.y);p.z=d.z+(x*_.z+b*m.z);u.push(p.x,p.y,p.z);f.subVectors(p,d).normalize();c.push(f.x,f.y,f.z);l.push(h/r);l.push(y/n)}}for(y=1;y<=r;y++)for(h=1;h<=n;h++)e=(n+1)*y+(h-1),t=(n+1)*y+h,i=(n+1)*(y-1)+h,s.push((n+1)*(y-1)+(h-1),e,i),s.push(e,t,i);this.setIndex(s);this.setAttribute("position",new j(u,3));this.setAttribute("normal",new j(c,3));this.setAttribute("uv",new j(l,2))}function Rr(e,t,r,n,i){F.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i};this.fromBufferGeometry(new kr(e,t,r,n,i));this.mergeVertices()}function kr(e,t,r,n,i){N.call(this);this.type="TorusBufferGeometry";this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i};e=e||1;t=t||.4;r=Math.floor(r)||8;n=Math.floor(n)||6;i=i||2*Math.PI;var o=[],a=[],s=[],u=[],c=new Te,l=new Te,h=new Te,p,f;for(p=0;p<=r;p++)for(f=0;f<=n;f++){var d=f/n*i,v=p/r*Math.PI*2;l.x=(e+t*Math.cos(v))*Math.cos(d);l.y=(e+t*Math.cos(v))*Math.sin(d);l.z=t*Math.sin(v);a.push(l.x,l.y,l.z);c.x=e*Math.cos(d);c.y=e*Math.sin(d);h.subVectors(l,c).normalize();s.push(h.x,h.y,h.z);u.push(f/n);u.push(p/r)}for(p=1;p<=r;p++)for(f=1;f<=n;f++)e=(n+1)*(p-1)+f-1,t=(n+1)*(p-1)+f,i=(n+1)*p+f,o.push((n+1)*p+f-1,e,i),o.push(e,t,i);this.setIndex(o);this.setAttribute("position",new j(a,3));this.setAttribute("normal",new j(s,3));this.setAttribute("uv",new j(u,2))}function Lr(e,t,r,n,i){for(var o,a=0,s=t,u=r-n;s<r;s+=n)a+=(e[u]-e[s])*(e[s+1]+e[u+1]),u=s;if(i===0<a)for(i=t;i<r;i+=n)o=Kr(i,e[i],e[i+1],o);else for(i=r-n;i>=t;i-=n)o=Kr(i,e[i],e[i+1],o);o&&Hr(o,o.next)&&(Zr(o),o=o.next);return o}function Nr(e,t){if(!e)return e;t||(t=e);do{var r=!1;if(e.steiner||!Hr(e,e.next)&&0!==Vr(e.prev,e,e.next))e=e.next;else{Zr(e);e=t=e.prev;if(e===e.next)break;r=!0}}while(r||e!==t);return t}function Ir(e,t,r,n,i,o,a){if(e){if(!a&&o){var s=e,u=s;do{null===u.z&&(u.z=zr(u.x,u.y,n,i,o)),u.prevZ=u.prev,u=u.nextZ=u.next}while(u!==s);u.prevZ.nextZ=null;u.prevZ=null;s=u;var c,l,h,p,f=1;do{u=s;var d=s=null;for(l=0;u;){l++;var v=u;for(c=h=0;c<f&&(h++,v=v.nextZ,v);c++);for(p=f;0<h||0<p&&v;)0!==h&&(0===p||!v||u.z<=v.z)?(c=u,u=u.nextZ,h--):(c=v,v=v.nextZ,p--),d?d.nextZ=c:s=c,c.prevZ=d,d=c;u=v}d.nextZ=null;f*=2}while(1<l)}for(s=e;e.prev!==e.next;){u=e.prev;v=e.next;if(o)d=Dr(e,n,i,o);else e:if(d=e,l=d.prev,h=d,f=d.next,0<=Vr(l,h,f))d=!1;else{for(c=d.next.next;c!==d.prev;){if(Gr(l.x,l.y,h.x,h.y,f.x,f.y,c.x,c.y)&&0<=Vr(c.prev,c,c.next)){d=!1;break e}c=c.next}d=!0}if(d)t.push(u.i/r),t.push(e.i/r),t.push(v.i/r),Zr(e),s=e=v.next;else if(e=v,e===s){if(!a)Ir(Nr(e),t,r,n,i,o,1);else if(1===a){e=Nr(e);a=t;s=r;u=e;do{v=u.prev,d=u.next.next,!Hr(v,d)&&Ur(v,u,u.next,d)&&Xr(v,d)&&Xr(d,v)&&(a.push(v.i/s),a.push(u.i/s),a.push(d.i/s),Zr(u),Zr(u.next),u=e=d),u=u.next}while(u!==e);e=Nr(u);Ir(e,t,r,n,i,o,2)}else if(2===a)e:{a=e;do{for(s=a.next.next;s!==a.prev;){if(u=a.i!==s.i){u=a;v=s;if(d=u.next.i!==v.i&&u.prev.i!==v.i){t:{d=u;do{if(d.i!==u.i&&d.next.i!==u.i&&d.i!==v.i&&d.next.i!==v.i&&Ur(d,d.next,u,v)){d=!0;break t}d=d.next}while(d!==u);d=!1}d=!d}if(d){if(d=Xr(u,v)&&Xr(v,u)){d=u;l=!1;h=(u.x+v.x)/2;f=(u.y+v.y)/2;do{d.y>f!==d.next.y>f&&d.next.y!==d.y&&h<(d.next.x-d.x)*(f-d.y)/(d.next.y-d.y)+d.x&&(l=!l),d=d.next}while(d!==u);d=l}d=d&&(Vr(u.prev,u,v.prev)||Vr(u,v.prev,v))||Hr(u,v)&&0<Vr(u.prev,u,u.next)&&0<Vr(v.prev,v,v.next)}u=d}if(u){e=Yr(a,s);a=Nr(a,a.next);e=Nr(e,e.next);Ir(a,t,r,n,i,o);Ir(e,t,r,n,i,o);break e}s=s.next}a=a.next}while(a!==e)}break}}}}function Dr(e,t,r,n){var i=e.prev,o=e.next;if(0<=Vr(i,e,o))return!1;var a=i.x>e.x?i.x>o.x?i.x:o.x:e.x>o.x?e.x:o.x,s=i.y>e.y?i.y>o.y?i.y:o.y:e.y>o.y?e.y:o.y,u=zr(i.x<e.x?i.x<o.x?i.x:o.x:e.x<o.x?e.x:o.x,i.y<e.y?i.y<o.y?i.y:o.y:e.y<o.y?e.y:o.y,t,r,n);t=zr(a,s,t,r,n);r=e.prevZ;for(n=e.nextZ;r&&r.z>=u&&n&&n.z<=t;){if(r!==e.prev&&r!==e.next&&Gr(i.x,i.y,e.x,e.y,o.x,o.y,r.x,r.y)&&0<=Vr(r.prev,r,r.next))return!1;r=r.prevZ;if(n!==e.prev&&n!==e.next&&Gr(i.x,i.y,e.x,e.y,o.x,o.y,n.x,n.y)&&0<=Vr(n.prev,n,n.next))return!1;n=n.nextZ}for(;r&&r.z>=u;){if(r!==e.prev&&r!==e.next&&Gr(i.x,i.y,e.x,e.y,o.x,o.y,r.x,r.y)&&0<=Vr(r.prev,r,r.next))return!1;r=r.prevZ}for(;n&&n.z<=t;){if(n!==e.prev&&n!==e.next&&Gr(i.x,i.y,e.x,e.y,o.x,o.y,n.x,n.y)&&0<=Vr(n.prev,n,n.next))return!1;n=n.nextZ}return!0}function Br(e,t){return e.x-t.x}function Fr(e,t){var r=t,n=e.x,i=e.y,o=-Infinity;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){o=a;if(a===n){if(i===r.y)return r;if(i===r.next.y)return r.next}var s=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!s)return null;if(n===o)return s;t=s;a=s.x;var u=s.y,c=Infinity;r=s;do{if(n>=r.x&&r.x>=a&&n!==r.x&&Gr(i<u?n:o,i,a,u,i<u?o:n,i,r.x,r.y)){var l=Math.abs(i-r.y)/(n-r.x);var h;if((h=Xr(r,e))&&!(h=l<c)&&(h=l===c)&&!(h=r.x>s.x)&&(h=r.x===s.x)){h=s;var p=r;h=0>Vr(h.prev,h,p.prev)&&0>Vr(p.next,h,h.next)}h&&(s=r,c=l)}r=r.next}while(r!==t);return s}function zr(e,t,r,n,i){e=32767*(e-r)*i;t=32767*(t-n)*i;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;return(e|e<<1)&1431655765|((t|t<<1)&1431655765)<<1}function $r(e){var t=e,r=e;do{if(t.x<r.x||t.x===r.x&&t.y<r.y)r=t;t=t.next}while(t!==e);return r}function Gr(e,t,r,n,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(r-a)*(t-s)&&0<=(r-a)*(o-s)-(i-a)*(n-s)}function Vr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Hr(e,t){return e.x===t.x&&e.y===t.y}function Ur(e,t,r,n){var i=Wr(Vr(e,t,r)),o=Wr(Vr(e,t,n)),a=Wr(Vr(r,n,e)),s=Wr(Vr(r,n,t));return i!==o&&a!==s||0===i&&qr(e,r,t)||0===o&&qr(e,n,t)||0===a&&qr(r,e,n)||0===s&&qr(r,t,n)?!0:!1}function qr(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Wr(e){return 0<e?1:0>e?-1:0}function Xr(e,t){return 0>Vr(e.prev,e,e.next)?0<=Vr(e,t,e.next)&&0<=Vr(e,e.prev,t):0>Vr(e,t,e.prev)||0>Vr(e,e.next,t)}function Yr(e,t){var r=new Jr(e.i,e.x,e.y),n=new Jr(t.i,t.x,t.y),i=e.next,o=t.prev;e.next=t;t.prev=e;r.next=i;i.prev=r;n.next=r;r.prev=n;o.next=n;n.prev=o;return n}function Kr(e,t,r,n){e=new Jr(e,t,r);n?(e.next=n.next,e.prev=n,n.next.prev=e,n.next=e):(e.prev=e,e.next=e);return e}function Zr(e){e.next.prev=e.prev;e.prev.next=e.next;e.prevZ&&(e.prevZ.nextZ=e.nextZ);e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Jr(e,t,r){this.i=e;this.x=t;this.y=r;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Qr(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function en(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function tn(e,t){F.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:e,options:t};this.fromBufferGeometry(new rn(e,t));this.mergeVertices()}function rn(e,G){function t(e){function t(e,t,r){t||console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(r).add(e)}function r(e,t,r){var n=e.x-t.x;var i=e.y-t.y;var o=r.x-e.x;var a=r.y-e.y,s=n*n+i*i;if(Math.abs(n*a-i*o)>Number.EPSILON){var u=Math.sqrt(s),c=Math.sqrt(o*o+a*a);s=t.x-i/u;t=t.y+n/u;a=((r.x-a/c-s)*a-(r.y+o/c-t)*o)/(n*a-i*o);o=s+n*a-e.x;n=t+i*a-e.y;i=o*o+n*n;if(2>=i)return new Me(o,n);i=Math.sqrt(i/2)}else e=!1,n>Number.EPSILON?o>Number.EPSILON&&(e=!0):n<-Number.EPSILON?o<-Number.EPSILON&&(e=!0):Math.sign(i)===Math.sign(a)&&(e=!0),e?(o=-i,i=Math.sqrt(s)):(o=n,n=i,i=Math.sqrt(s/2));return new Me(o/i,n/i)}function n(e,t){for(N=e.length;0<=--N;){var r=N;var n=N-1;0>n&&(n=e.length-1);var i,o=p+2*m;for(i=0;i<o;i++){var a=R*i,s=R*(i+1),u=t+n+a,c=t+n+s;s=t+r+s;l(t+r+a);l(u);l(s);l(u);l(c);l(s);a=H.length/3;a=_.generateSideWallUV(V,H,a-6,a-3,a-2,a-1);h(a[0]);h(a[1]);h(a[3]);h(a[1]);h(a[2]);h(a[3])}}}function i(e,t,r){a.push(e);a.push(t);a.push(r)}function o(e,t,r){l(e);l(t);l(r);e=H.length/3;e=_.generateTopUV(V,H,e-3,e-2,e-1);h(e[0]);h(e[1]);h(e[2])}function l(e){H.push(a[3*e]);H.push(a[3*e+1]);H.push(a[3*e+2])}function h(e){U.push(e.x);U.push(e.y)}var a=[],s=void 0!==G.curveSegments?G.curveSegments:12,p=void 0!==G.steps?G.steps:1,u=void 0!==G.depth?G.depth:100,c=void 0!==G.bevelEnabled?G.bevelEnabled:!0,f=void 0!==G.bevelThickness?G.bevelThickness:6,d=void 0!==G.bevelSize?G.bevelSize:f-2,v=void 0!==G.bevelOffset?G.bevelOffset:0,m=void 0!==G.bevelSegments?G.bevelSegments:3,g=G.extrudePath,_=void 0!==G.UVGenerator?G.UVGenerator:Lu;void 0!==G.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=G.amount);var y=!1;if(g){var b=g.getSpacedPoints(p);y=!0;c=!1;var x=g.computeFrenetFrames(p,!1);var w=new Te;var S=new Te;var M=new Te}c||(v=d=f=m=0);var C;s=e.extractPoints(s);e=s.shape;var T=s.holes;if(!ku.isClockWise(e)){e=e.reverse();var E=0;for(C=T.length;E<C;E++){var O=T[E];ku.isClockWise(O)&&(T[E]=O.reverse())}}var P=ku.triangulateShape(e,T),A=e;E=0;for(C=T.length;E<C;E++)O=T[E],e=e.concat(O);var j,R=e.length,k,L=P.length;s=[];var N=0;var I=A.length;var D=I-1;for(j=N+1;N<I;N++,D++,j++)D===I&&(D=0),j===I&&(j=0),s[N]=r(A[N],A[D],A[j]);g=[];var B=s.concat();E=0;for(C=T.length;E<C;E++){O=T[E];var F=[];N=0;I=O.length;D=I-1;for(j=N+1;N<I;N++,D++,j++)D===I&&(D=0),j===I&&(j=0),F[N]=r(O[N],O[D],O[j]);g.push(F);B=B.concat(F)}for(D=0;D<m;D++){I=D/m;var z=f*Math.cos(I*Math.PI/2);j=d*Math.sin(I*Math.PI/2)+v;N=0;for(I=A.length;N<I;N++){var $=t(A[N],s[N],j);i($.x,$.y,-z)}E=0;for(C=T.length;E<C;E++)for(O=T[E],F=g[E],N=0,I=O.length;N<I;N++)$=t(O[N],F[N],j),i($.x,$.y,-z)}j=d+v;for(N=0;N<R;N++)$=c?t(e[N],B[N],j):e[N],y?(S.copy(x.normals[0]).multiplyScalar($.x),w.copy(x.binormals[0]).multiplyScalar($.y),M.copy(b[0]).add(S).add(w),i(M.x,M.y,M.z)):i($.x,$.y,0);for(I=1;I<=p;I++)for(N=0;N<R;N++)$=c?t(e[N],B[N],j):e[N],y?(S.copy(x.normals[I]).multiplyScalar($.x),w.copy(x.binormals[I]).multiplyScalar($.y),M.copy(b[I]).add(S).add(w),i(M.x,M.y,M.z)):i($.x,$.y,u/p*I);for(D=m-1;0<=D;D--){I=D/m;z=f*Math.cos(I*Math.PI/2);j=d*Math.sin(I*Math.PI/2)+v;N=0;for(I=A.length;N<I;N++)$=t(A[N],s[N],j),i($.x,$.y,u+z);E=0;for(C=T.length;E<C;E++)for(O=T[E],F=g[E],N=0,I=O.length;N<I;N++)$=t(O[N],F[N],j),y?i($.x,$.y+b[p-1].y,b[p-1].x+z):i($.x,$.y,u+z)}(function(){var e=H.length/3;if(c){var t=0*R;for(N=0;N<L;N++)k=P[N],o(k[2]+t,k[1]+t,k[0]+t);t=R*(p+2*m);for(N=0;N<L;N++)k=P[N],o(k[0]+t,k[1]+t,k[2]+t)}else{for(N=0;N<L;N++)k=P[N],o(k[2],k[1],k[0]);for(N=0;N<L;N++)k=P[N],o(k[0]+R*p,k[1]+R*p,k[2]+R*p)}V.addGroup(e,H.length/3-e,0)})();(function(){var e=H.length/3,t=0;n(A,t);t+=A.length;E=0;for(C=T.length;E<C;E++)O=T[E],n(O,t),t+=O.length;V.addGroup(e,H.length/3-e,1)})()}N.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:e,options:G};e=Array.isArray(e)?e:[e];for(var V=this,H=[],U=[],r=0,n=e.length;r<n;r++)t(e[r]);this.setAttribute("position",new j(H,3));this.setAttribute("uv",new j(U,2));this.computeVertexNormals()}function nn(e,t,r){r.shapes=[];if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)r.shapes.push(e[n].uuid);else r.shapes.push(e.uuid);void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON());return r}function on(e,t){F.call(this);this.type="TextGeometry";this.parameters={text:e,parameters:t};this.fromBufferGeometry(new an(e,t));this.mergeVertices()}function an(e,t){t=t||{};var r=t.font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new F;e=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50;void 0===t.bevelThickness&&(t.bevelThickness=10);void 0===t.bevelSize&&(t.bevelSize=8);void 0===t.bevelEnabled&&(t.bevelEnabled=!1);rn.call(this,e,t);this.type="TextBufferGeometry"}function sn(e,t,r,n,i,o,a){F.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a};this.fromBufferGeometry(new un(e,t,r,n,i,o,a));this.mergeVertices()}function un(e,t,r,n,i,o,a){N.call(this);this.type="SphereBufferGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a};e=e||1;t=Math.max(3,Math.floor(t)||8);r=Math.max(2,Math.floor(r)||6);n=void 0!==n?n:0;i=void 0!==i?i:2*Math.PI;o=void 0!==o?o:0;a=void 0!==a?a:Math.PI;var s=Math.min(o+a,Math.PI),u,c,l=0,h=[],p=new Te,f=new Te,d=[],v=[],m=[],g=[];for(c=0;c<=r;c++){var _=[],y=c/r,b=0;0==c&&0==o?b=.5/t:c==r&&s==Math.PI&&(b=-.5/t);for(u=0;u<=t;u++){var x=u/t;p.x=-e*Math.cos(n+x*i)*Math.sin(o+y*a);p.y=e*Math.cos(o+y*a);p.z=e*Math.sin(n+x*i)*Math.sin(o+y*a);v.push(p.x,p.y,p.z);f.copy(p).normalize();m.push(f.x,f.y,f.z);g.push(x+b,1-y);_.push(l++)}h.push(_)}for(c=0;c<r;c++)for(u=0;u<t;u++)e=h[c][u+1],n=h[c][u],i=h[c+1][u],a=h[c+1][u+1],(0!==c||0<o)&&d.push(e,n,a),(c!==r-1||s<Math.PI)&&d.push(n,i,a);this.setIndex(d);this.setAttribute("position",new j(v,3));this.setAttribute("normal",new j(m,3));this.setAttribute("uv",new j(g,2))}function cn(e,t,r,n,i,o){F.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o};this.fromBufferGeometry(new ln(e,t,r,n,i,o));this.mergeVertices()}function ln(e,t,r,n,i,o){N.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o};e=e||.5;t=t||1;i=void 0!==i?i:0;o=void 0!==o?o:2*Math.PI;r=void 0!==r?Math.max(3,r):8;n=void 0!==n?Math.max(1,n):1;var a=[],s=[],u=[],c=[],l=e,h=(t-e)/n,p=new Te,f=new Me,d,v;for(d=0;d<=n;d++){for(v=0;v<=r;v++)e=i+v/r*o,p.x=l*Math.cos(e),p.y=l*Math.sin(e),s.push(p.x,p.y,p.z),u.push(0,0,1),f.x=(p.x/t+1)/2,f.y=(p.y/t+1)/2,c.push(f.x,f.y);l+=h}for(d=0;d<n;d++)for(t=d*(r+1),v=0;v<r;v++)e=v+t,i=e+r+1,o=e+r+2,l=e+1,a.push(e,i,l),a.push(i,o,l);this.setIndex(a);this.setAttribute("position",new j(s,3));this.setAttribute("normal",new j(u,3));this.setAttribute("uv",new j(c,2))}function hn(e,t,r,n){F.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:r,phiLength:n};this.fromBufferGeometry(new pn(e,t,r,n));this.mergeVertices()}function pn(e,t,r,n){N.call(this);this.type="LatheBufferGeometry";this.parameters={points:e,segments:t,phiStart:r,phiLength:n};t=Math.floor(t)||12;r=r||0;n=n||2*Math.PI;n=Vo.clamp(n,0,2*Math.PI);var i=[],o=[],a=[],s=1/t,u=new Te,c=new Me,l;for(l=0;l<=t;l++){var h=r+l*s*n;var p=Math.sin(h),f=Math.cos(h);for(h=0;h<=e.length-1;h++)u.x=e[h].x*p,u.y=e[h].y,u.z=e[h].x*f,o.push(u.x,u.y,u.z),c.x=l/t,c.y=h/(e.length-1),a.push(c.x,c.y)}for(l=0;l<t;l++)for(h=0;h<e.length-1;h++)r=h+l*e.length,s=r+e.length,u=r+e.length+1,c=r+1,i.push(r,s,c),i.push(s,u,c);this.setIndex(i);this.setAttribute("position",new j(o,3));this.setAttribute("uv",new j(a,2));this.computeVertexNormals();if(n===2*Math.PI)for(n=this.attributes.normal.array,i=new Te,o=new Te,a=new Te,r=t*e.length*3,h=l=0;l<e.length;l++,h+=3)i.x=n[h+0],i.y=n[h+1],i.z=n[h+2],o.x=n[r+h+0],o.y=n[r+h+1],o.z=n[r+h+2],a.addVectors(i,o).normalize(),n[h+0]=n[r+h+0]=a.x,n[h+1]=n[r+h+1]=a.y,n[h+2]=n[r+h+2]=a.z}function fn(e,t){F.call(this);this.type="ShapeGeometry";"object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments);this.parameters={shapes:e,curveSegments:t};this.fromBufferGeometry(new dn(e,t));this.mergeVertices()}function dn(e,s){function t(e){var t,r=c.length/3;e=e.extractPoints(s);var n=e.shape,i=e.holes;!1===ku.isClockWise(n)&&(n=n.reverse());e=0;for(t=i.length;e<t;e++){var o=i[e];!0===ku.isClockWise(o)&&(i[e]=o.reverse())}var a=ku.triangulateShape(n,i);e=0;for(t=i.length;e<t;e++)o=i[e],n=n.concat(o);e=0;for(t=n.length;e<t;e++)o=n[e],c.push(o.x,o.y,0),l.push(0,0,1),h.push(o.x,o.y);e=0;for(t=a.length;e<t;e++)n=a[e],u.push(n[0]+r,n[1]+r,n[2]+r),p+=3}N.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:e,curveSegments:s};s=s||12;var u=[],c=[],l=[],h=[],r=0,p=0;if(!1===Array.isArray(e))t(e);else for(var n=0;n<e.length;n++)t(e[n]),this.addGroup(r,p,n),r+=p,p=0;this.setIndex(u);this.setAttribute("position",new j(c,3));this.setAttribute("normal",new j(l,3));this.setAttribute("uv",new j(h,2))}function vn(e,t){t.shapes=[];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++)t.shapes.push(e[r].uuid);else t.shapes.push(e.uuid);return t}function mn(e,t){N.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:t};var r=[];t=Math.cos(Vo.DEG2RAD*(void 0!==t?t:1));var n=[0,0],i={},o=["a","b","c"];if(e.isBufferGeometry){var a=new F;a.fromBufferGeometry(e)}else a=e.clone();a.mergeVertices();a.computeFaceNormals();e=a.vertices;a=a.faces;for(var s=0,u=a.length;s<u;s++)for(var c=a[s],l=0;3>l;l++){var h=c[o[l]];var p=c[o[(l+1)%3]];n[0]=Math.min(h,p);n[1]=Math.max(h,p);h=n[0]+","+n[1];void 0===i[h]?i[h]={index1:n[0],index2:n[1],face1:s,face2:void 0}:i[h].face2=s}for(h in i)if(n=i[h],void 0===n.face2||a[n.face1].normal.dot(a[n.face2].normal)<=t)o=e[n.index1],r.push(o.x,o.y,o.z),o=e[n.index2],r.push(o.x,o.y,o.z);this.setAttribute("position",new j(r,3))}function gn(e,t,r,n,i,o,a,s){F.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};this.fromBufferGeometry(new _n(e,t,r,n,i,o,a,s));this.mergeVertices()}function _n(p,f,d,v,m,e,g,_){function t(e){var t,r=new Me,n=new Te,i=0,o=!0===e?p:f,a=!0===e?1:-1;var s=M;for(t=1;t<=v;t++)x.push(0,T*a,0),w.push(0,a,0),S.push(.5,.5),M++;var u=M;for(t=0;t<=v;t++){var c=t/v*_+g,l=Math.cos(c);c=Math.sin(c);n.x=o*c;n.y=T*a;n.z=o*l;x.push(n.x,n.y,n.z);w.push(0,a,0);r.x=.5*l+.5;r.y=.5*c*a+.5;S.push(r.x,r.y);M++}for(t=0;t<v;t++)r=s+t,n=u+t,!0===e?b.push(n,n+1,r):b.push(n+1,n,r),i+=3;y.addGroup(E,i,!0===e?1:2);E+=i}N.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:p,radiusBottom:f,height:d,radialSegments:v,heightSegments:m,openEnded:e,thetaStart:g,thetaLength:_};var y=this;p=void 0!==p?p:1;f=void 0!==f?f:1;d=d||1;v=Math.floor(v)||8;m=Math.floor(m)||1;e=void 0!==e?e:!1;g=void 0!==g?g:0;_=void 0!==_?_:2*Math.PI;var b=[],x=[],w=[],S=[],M=0,C=[],T=d/2,E=0;(function(){var e,t,r=new Te,n=new Te,i=0,o=(f-p)/d;for(t=0;t<=m;t++){var a=[],s=t/m,u=s*(f-p)+p;for(e=0;e<=v;e++){var c=e/v,l=c*_+g,h=Math.sin(l);l=Math.cos(l);n.x=u*h;n.y=-s*d+T;n.z=u*l;x.push(n.x,n.y,n.z);r.set(h,o,l).normalize();w.push(r.x,r.y,r.z);S.push(c,1-s);a.push(M++)}C.push(a)}for(e=0;e<v;e++)for(t=0;t<m;t++)r=C[t+1][e],n=C[t+1][e+1],o=C[t][e+1],b.push(C[t][e],r,o),b.push(r,n,o),i+=6;y.addGroup(E,i,0);E+=i})();!1===e&&(0<p&&t(!0),0<f&&t(!1));this.setIndex(b);this.setAttribute("position",new j(x,3));this.setAttribute("normal",new j(w,3));this.setAttribute("uv",new j(S,2))}function yn(e,t,r,n,i,o,a){gn.call(this,0,e,t,r,n,i,o,a);this.type="ConeGeometry";this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function bn(e,t,r,n,i,o,a){_n.call(this,0,e,t,r,n,i,o,a);this.type="ConeBufferGeometry";this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function xn(e,t,r,n){F.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n};this.fromBufferGeometry(new wn(e,t,r,n));this.mergeVertices()}function wn(e,t,r,n){N.call(this);this.type="CircleBufferGeometry";this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n};e=e||1;t=void 0!==t?Math.max(3,t):8;r=void 0!==r?r:0;n=void 0!==n?n:2*Math.PI;var i=[],o=[],a=[],s=[],u,c=new Te,l=new Me;o.push(0,0,0);a.push(0,0,1);s.push(.5,.5);var h=0;for(u=3;h<=t;h++,u+=3){var p=r+h/t*n;c.x=e*Math.cos(p);c.y=e*Math.sin(p);o.push(c.x,c.y,c.z);a.push(0,0,1);l.x=(o[u]/e+1)/2;l.y=(o[u+1]/e+1)/2;s.push(l.x,l.y)}for(u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i);this.setAttribute("position",new j(o,3));this.setAttribute("normal",new j(a,3));this.setAttribute("uv",new j(s,2))}function Sn(e){y.call(this);this.type="ShadowMaterial";this.color=new v(0);this.transparent=!0;this.setValues(e)}function Mn(e){G.call(this,e);this.type="RawShaderMaterial"}function Cn(e){y.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new v(16777215);this.roughness=1;this.metalness=0;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new v(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Me(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function Tn(e){Cn.call(this);this.defines={STANDARD:"",PHYSICAL:""};this.type="MeshPhysicalMaterial";this.clearcoat=0;this.clearcoatMap=null;this.clearcoatRoughness=0;this.clearcoatRoughnessMap=null;this.clearcoatNormalScale=new Me(1,1);this.clearcoatNormalMap=null;this.reflectivity=.5;this.sheen=null;this.transparency=0;this.setValues(e)}function En(e){y.call(this);this.type="MeshPhongMaterial";this.color=new v(16777215);this.specular=new v(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new v(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Me(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function On(e){y.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.color=new v(16777215);this.specular=new v(1118481);this.shininess=30;this.lightMap=this.gradientMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new v(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Me(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=this.specularMap=null;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function Pn(e){y.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Me(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.fog=!1;this.setValues(e)}function An(e){y.call(this);this.type="MeshLambertMaterial";this.color=new v(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new v(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function jn(e){y.call(this);this.defines={MATCAP:""};this.type="MeshMatcapMaterial";this.color=new v(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Me(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(e)}function Rn(e){ir.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(e)}function kn(e,t,r,n){this.parameterPositions=e;this._cachedIndex=0;this.resultBuffer=void 0!==n?n:new t.constructor(r);this.sampleValues=t;this.valueSize=r}function Ln(e,t,r,n){kn.call(this,e,t,r,n);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Nn(e,t,r,n){kn.call(this,e,t,r,n)}function In(e,t,r,n){kn.call(this,e,t,r,n)}function Dn(e,t,r,n){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e;this.times=Du.convertArray(t,this.TimeBufferType);this.values=Du.convertArray(r,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation)}function Bn(e,t,r){Dn.call(this,e,t,r)}function Fn(e,t,r,n){Dn.call(this,e,t,r,n)}function zn(e,t,r,n){Dn.call(this,e,t,r,n)}function $n(e,t,r,n){kn.call(this,e,t,r,n)}function Gn(e,t,r,n){Dn.call(this,e,t,r,n)}function Vn(e,t,r,n){Dn.call(this,e,t,r,n)}function Hn(e,t,r,n){Dn.call(this,e,t,r,n)}function Un(e,t,r,n){this.name=e;this.tracks=r;this.duration=void 0!==t?t:-1;this.blendMode=void 0!==n?n:2500;this.uuid=Vo.generateUUID();0>this.duration&&this.resetDuration()}function qn(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zn;case"vector":case"vector2":case"vector3":case"vector4":return Hn;case"color":return Fn;case"quaternion":return Gn;case"bool":case"boolean":return Bn;case"string":return Vn}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Wn(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=qn(e.type);if(void 0===e.times){var r=[],n=[];Du.flattenJSON(e.keys,r,n,"value");e.times=r;e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Xn(e,t,r){var n=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0;this.onLoad=e;this.onProgress=t;this.onError=r;this.itemStart=function(e){a++;if(!1===i&&void 0!==n.onStart)n.onStart(e,o,a);i=!0};this.itemEnd=function(e){o++;if(void 0!==n.onProgress)n.onProgress(e,o,a);if(o===a&&(i=!1,void 0!==n.onLoad))n.onLoad()};this.itemError=function(e){if(void 0!==n.onError)n.onError(e)};this.resolveURL=function(e){return s?s(e):e};this.setURLModifier=function(e){s=e;return this};this.addHandler=function(e,t){u.push(e,t);return this};this.removeHandler=function(e){e=u.indexOf(e);-1!==e&&u.splice(e,2);return this};this.getHandler=function(e){for(var t=0,r=u.length;t<r;t+=2){var n=u[t],i=u[t+1];n.global&&(n.lastIndex=0);if(n.test(e))return i}return null}}function Yn(e){this.manager=void 0!==e?e:Fu;this.crossOrigin="anonymous";this.resourcePath=this.path="";this.requestHeader={}}function Kn(e){Yn.call(this,e)}function Zn(e){Yn.call(this,e)}function Jn(e){Yn.call(this,e)}function Qn(e){Yn.call(this,e)}function ei(e){Yn.call(this,e)}function ti(e){Yn.call(this,e)}function ri(e){Yn.call(this,e)}function ni(){this.type="Curve";this.arcLengthDivisions=200}function ii(e,t,r,n,i,o,a,s){ni.call(this);this.type="EllipseCurve";this.aX=e||0;this.aY=t||0;this.xRadius=r||1;this.yRadius=n||1;this.aStartAngle=i||0;this.aEndAngle=o||2*Math.PI;this.aClockwise=a||!1;this.aRotation=s||0}function oi(e,t,r,n,i,o){ii.call(this,e,t,r,r,n,i,o);this.type="ArcCurve"}function ai(){var s=0,u=0,c=0,l=0;return{initCatmullRom:function(e,t,r,n,i){e=i*(r-e);n=i*(n-t);s=t;u=e;c=-3*t+3*r-2*e-n;l=2*t-2*r+e+n},initNonuniformCatmullRom:function(e,t,r,n,i,o,a){e=((t-e)/i-(r-e)/(i+o)+(r-t)/o)*o;n=((r-t)/o-(n-t)/(o+a)+(n-r)/a)*o;s=t;u=e;c=-3*t+3*r-2*e-n;l=2*t-2*r+e+n},calc:function(e){var t=e*e;return s+u*e+c*t+l*t*e}}}function si(e,t,r,n){ni.call(this);this.type="CatmullRomCurve3";this.points=e||[];this.closed=t||!1;this.curveType=r||"centripetal";this.tension=n||.5}function ui(e,t,r,n,i){t=.5*(n-t);i=.5*(i-r);var o=e*e;return(2*r-2*n+t+i)*e*o+(-3*r+3*n-2*t-i)*o+t*e+r}function ci(e,t,r,n){var i=1-e;return i*i*t+2*(1-e)*e*r+e*e*n}function li(e,t,r,n,i){var o=1-e,a=1-e;return o*o*o*t+3*a*a*e*r+3*(1-e)*e*e*n+e*e*e*i}function hi(e,t,r,n){ni.call(this);this.type="CubicBezierCurve";this.v0=e||new Me;this.v1=t||new Me;this.v2=r||new Me;this.v3=n||new Me}function pi(e,t,r,n){ni.call(this);this.type="CubicBezierCurve3";this.v0=e||new Te;this.v1=t||new Te;this.v2=r||new Te;this.v3=n||new Te}function fi(e,t){ni.call(this);this.type="LineCurve";this.v1=e||new Me;this.v2=t||new Me}function di(e,t){ni.call(this);this.type="LineCurve3";this.v1=e||new Te;this.v2=t||new Te}function vi(e,t,r){ni.call(this);this.type="QuadraticBezierCurve";this.v0=e||new Me;this.v1=t||new Me;this.v2=r||new Me}function mi(e,t,r){ni.call(this);this.type="QuadraticBezierCurve3";this.v0=e||new Te;this.v1=t||new Te;this.v2=r||new Te}function gi(e){ni.call(this);this.type="SplineCurve";this.points=e||[]}function _i(){ni.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function yi(e){_i.call(this);this.type="Path";this.currentPoint=new Me;e&&this.setFromPoints(e)}function bi(e){yi.call(this,e);this.uuid=Vo.generateUUID();this.type="Shape";this.holes=[]}function xi(e,t){f.call(this);this.type="Light";this.color=new v(e);this.intensity=void 0!==t?t:1;this.receiveShadow=void 0}function wi(e,t,r){xi.call(this,e,r);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(f.DefaultUp);this.updateMatrix();this.groundColor=new v(t)}function Si(e){this.camera=e;this.bias=0;this.radius=1;this.mapSize=new Me(512,512);this.mapPass=this.map=null;this.matrix=new Ee;this._frustum=new Ae;this._frameExtents=new Me(1,1);this._viewportCount=1;this._viewports=[new Ce(0,0,1,1)]}function Mi(){Si.call(this,new H(50,1,.5,500))}function Ci(e,t,r,n,i,o){xi.call(this,e,t);this.type="SpotLight";this.position.copy(f.DefaultUp);this.updateMatrix();this.target=new f;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}});this.distance=void 0!==r?r:0;this.angle=void 0!==n?n:Math.PI/3;this.penumbra=void 0!==i?i:0;this.decay=void 0!==o?o:1;this.shadow=new Mi}function Ti(){Si.call(this,new H(90,1,.5,500));this._frameExtents=new Me(4,2);this._viewportCount=6;this._viewports=[new Ce(2,1,1,1),new Ce(0,1,1,1),new Ce(3,1,1,1),new Ce(1,1,1,1),new Ce(3,0,1,1),new Ce(1,0,1,1)];this._cubeDirections=[new Te(1,0,0),new Te(-1,0,0),new Te(0,0,1),new Te(0,0,-1),new Te(0,1,0),new Te(0,-1,0)];this._cubeUps=[new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,0,1),new Te(0,0,-1)]}function Ei(e,t,r,n){xi.call(this,e,t);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=void 0!==r?r:0;this.decay=void 0!==n?n:1;this.shadow=new Ti}function Oi(e,t,r,n,i,o){V.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=void 0!==e?e:-1;this.right=void 0!==t?t:1;this.top=void 0!==r?r:1;this.bottom=void 0!==n?n:-1;this.near=void 0!==i?i:.1;this.far=void 0!==o?o:2e3;this.updateProjectionMatrix()}function Pi(){Si.call(this,new Oi(-5,5,5,-5,.5,500))}function Ai(e,t){xi.call(this,e,t);this.type="DirectionalLight";this.position.copy(f.DefaultUp);this.updateMatrix();this.target=new f;this.shadow=new Pi}function ji(e,t){xi.call(this,e,t);this.type="AmbientLight";this.castShadow=void 0}function Ri(e,t,r,n){xi.call(this,e,t);this.type="RectAreaLight";this.width=void 0!==r?r:10;this.height=void 0!==n?n:10}function ki(){this.coefficients=[];for(var e=0;9>e;e++)this.coefficients.push(new Te)}function Li(e,t){xi.call(this,void 0,t);this.type="LightProbe";this.sh=void 0!==e?e:new ki}function Ni(e){Yn.call(this,e);this.textures={}}function Ii(){N.call(this);this.type="InstancedBufferGeometry";this.instanceCount=Infinity}function Di(e,t,r,n){"number"===typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));E.call(this,e,t,r);this.meshPerAttribute=n||1}function Bi(e){Yn.call(this,e)}function Fi(e){Yn.call(this,e)}function zi(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");Yn.call(this,e);this.options=void 0}function $i(){this.type="ShapePath";this.color=new v;this.subPaths=[];this.currentPath=null}function Gi(e){this.type="Font";this.data=e}function Vi(e){Yn.call(this,e)}function Hi(e){Yn.call(this,e)}function Ui(e,t,r){Li.call(this,void 0,r);e=(new v).set(e);r=(new v).set(t);t=new Te(e.r,e.g,e.b);e=new Te(r.r,r.g,r.b);r=Math.sqrt(Math.PI);var n=r*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(e).multiplyScalar(r);this.sh.coefficients[1].copy(t).sub(e).multiplyScalar(n)}function qi(e,t){Li.call(this,void 0,t);e=(new v).set(e);this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Wi(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new H;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new H;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1;this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Xi(e){this.autoStart=void 0!==e?e:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function Yi(){f.call(this);this.type="AudioListener";this.context=Ju.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0;this._clock=new Xi}function Ki(e){f.call(this);this.type="Audio";this.listener=e;this.context=e.context;this.gain=this.context.createGain();this.gain.connect(e.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.loopEnd=this.loopStart=0;this.duration=void 0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this._progress=this._startedAt=0;this.filters=[]}function Zi(e){Ki.call(this,e);this.panner=this.context.createPanner();this.panner.panningModel="HRTF";this.panner.connect(this.gain)}function Ji(e,t){this.analyser=e.context.createAnalyser();this.analyser.fftSize=void 0!==t?t:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);e.getOutput().connect(this.analyser)}function Qi(e,t,r){this.binding=e;this.valueSize=r;switch(t){case"quaternion":e=this._slerp;t=this._slerpAdditive;var n=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*r);this._workIndex=5;break;case"string":case"bool":t=e=this._select;n=this._setAdditiveIdentityOther;this.buffer=Array(5*r);break;default:e=this._lerp,t=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=e;this._mixBufferRegionAdditive=t;this._setIdentity=n;this._origIndex=3;this._addIndex=4;this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function eo(e,t,r){r=r||to.parseTrackName(t);this._targetGroup=e;this._bindings=e.subscribe_(t,r)}function to(e,t,r){this.path=t;this.parsedPath=r||to.parseTrackName(t);this.node=to.findNode(e,this.parsedPath.nodeName)||e;this.rootNode=e}function ro(){this.uuid=Vo.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function no(e,t,r,n){this._mixer=e;this._clip=t;this._localRoot=r||null;this.blendMode=n||t.blendMode;e=t.tracks;t=e.length;r=Array(t);n={endingStart:2400,endingEnd:2400};for(var i=0;i!==t;++i){var o=e[i].createInterpolant(null);r[i]=o;o.settings=n}this._interpolantSettings=n;this._interpolants=r;this._propertyBindings=Array(t);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function io(e){this._root=e;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function oo(e,t){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t);this.value=e}function ao(e,t,r){Xt.call(this,e,t);this.meshPerAttribute=r||1}function so(e,t,r,n){this.ray=new s(e,t);this.near=r||0;this.far=n||Infinity;this.camera=null;this.layers=new o;this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function uo(e,t){return e.distance-t.distance}function co(e,t,r,n){e.layers.test(t.layers)&&e.raycast(t,r);if(!0===n){e=e.children;n=0;for(var i=e.length;n<i;n++)co(e[n],t,r,!0)}}function lo(e,t,r){this.radius=void 0!==e?e:1;this.phi=void 0!==t?t:0;this.theta=void 0!==r?r:0;return this}function ho(e,t,r){this.radius=void 0!==e?e:1;this.theta=void 0!==t?t:0;this.y=void 0!==r?r:0;return this}function po(e,t){this.min=void 0!==e?e:new Me(Infinity,Infinity);this.max=void 0!==t?t:new Me(-Infinity,-Infinity)}function fo(e,t){this.start=void 0!==e?e:new Te;this.end=void 0!==t?t:new Te}function vo(e){f.call(this);this.material=e;this.render=function(){};this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1;this.uvArray=this.colorArray=this.normalArray=this.positionArray=null;this.count=0}function mo(e,t){f.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;this.color=t;e=new N;t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var r=0,n=1;32>r;r++,n++){var i=r/32*Math.PI*2,o=n/32*Math.PI*2;t.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}e.setAttribute("position",new j(t,3));t=new ir({fog:!1,toneMapped:!1});this.cone=new ar(e,t);this.add(this.cone);this.update()}function go(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,go(e.children[r]));return t}function _o(e){for(var t=go(e),r=new N,n=[],i=[],o=new v(0,0,1),a=new v(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}r.setAttribute("position",new j(n,3));r.setAttribute("color",new j(i,3));n=new ir({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});ar.call(this,r,n);this.type="SkeletonHelper";this.root=e;this.bones=t;this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1}function yo(e,t,r){this.light=e;this.light.updateMatrixWorld();this.color=r;e=new un(t,4,2);t=new x({wireframe:!0,fog:!1,toneMapped:!1});I.call(this,e,t);this.type="PointLightHelper";this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function bo(e,t,r){f.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;this.color=r;e=new Sr(t);e.rotateY(.5*Math.PI);this.material=new x({wireframe:!0,fog:!1,toneMapped:!1});void 0===this.color&&(this.material.vertexColors=!0);t=e.getAttribute("position");t=new Float32Array(3*t.count);e.setAttribute("color",new E(t,3));this.add(new I(e,this.material));this.update()}function xo(e,t,r,n){e=e||10;t=t||10;r=new v(void 0!==r?r:4473924);n=new v(void 0!==n?n:8947848);var i=t/2,o=e/t,a=e/2;e=[];for(var s=[],u=0,c=0,l=-a;u<=t;u++,l+=o){e.push(-a,0,l,a,0,l);e.push(l,0,-a,l,0,a);var h=u===i?r:n;h.toArray(s,c);c+=3;h.toArray(s,c);c+=3;h.toArray(s,c);c+=3;h.toArray(s,c);c+=3}t=new N;t.setAttribute("position",new j(e,3));t.setAttribute("color",new j(s,3));r=new ir({vertexColors:!0,toneMapped:!1});ar.call(this,t,r);this.type="GridHelper"}function wo(e,t,r,n,i,o){e=e||10;t=t||16;r=r||8;n=n||64;i=new v(void 0!==i?i:4473924);o=new v(void 0!==o?o:8947848);var a=[],s=[],u;for(u=0;u<=t;u++){var c=u/t*2*Math.PI;var l=Math.sin(c)*e;c=Math.cos(c)*e;a.push(0,0,0);a.push(l,0,c);var h=u&1?i:o;s.push(h.r,h.g,h.b);s.push(h.r,h.g,h.b)}for(u=0;u<=r;u++){h=u&1?i:o;var p=e-e/r*u;for(t=0;t<n;t++)c=t/n*2*Math.PI,l=Math.sin(c)*p,c=Math.cos(c)*p,a.push(l,0,c),s.push(h.r,h.g,h.b),c=(t+1)/n*2*Math.PI,l=Math.sin(c)*p,c=Math.cos(c)*p,a.push(l,0,c),s.push(h.r,h.g,h.b)}e=new N;e.setAttribute("position",new j(a,3));e.setAttribute("color",new j(s,3));a=new ir({vertexColors:!0,toneMapped:!1});ar.call(this,e,a);this.type="PolarGridHelper"}function So(e,t,r){f.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;this.color=r;void 0===t&&(t=1);e=new N;e.setAttribute("position",new j([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));t=new ir({fog:!1,toneMapped:!1});this.lightPlane=new or(e,t);this.add(this.lightPlane);e=new N;e.setAttribute("position",new j([0,0,0,0,0,1],3));this.targetLine=new or(e,t);this.add(this.targetLine);this.update()}function Mo(e){function t(e,t,r){n(e,r);n(t,r)}function n(e,t){o.push(0,0,0);a.push(t.r,t.g,t.b);void 0===s[e]&&(s[e]=[]);s[e].push(o.length/3-1)}var r=new N,i=new ir({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],a=[],s={},u=new v(16755200),c=new v(16711680),l=new v(43775),h=new v(16777215),p=new v(3355443);t("n1","n2",u);t("n2","n4",u);t("n4","n3",u);t("n3","n1",u);t("f1","f2",u);t("f2","f4",u);t("f4","f3",u);t("f3","f1",u);t("n1","f1",u);t("n2","f2",u);t("n3","f3",u);t("n4","f4",u);t("p","n1",c);t("p","n2",c);t("p","n3",c);t("p","n4",c);t("u1","u2",l);t("u2","u3",l);t("u3","u1",l);t("c","t",h);t("p","c",p);t("cn1","cn2",p);t("cn3","cn4",p);t("cf1","cf2",p);t("cf3","cf4",p);r.setAttribute("position",new j(o,3));r.setAttribute("color",new j(a,3));ar.call(this,r,i);this.type="CameraHelper";this.camera=e;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=e.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=s;this.update()}function Co(e,t,r,n,i,o,a){Ac.set(i,o,a).unproject(n);e=t[e];if(void 0!==e)for(r=r.getAttribute("position"),t=0,n=e.length;t<n;t++)r.setXYZ(e[t],Ac.x,Ac.y,Ac.z)}function To(e,t){this.object=e;void 0===t&&(t=16776960);e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Float32Array(24),n=new N;n.setIndex(new E(e,1));n.setAttribute("position",new E(r,3));ar.call(this,n,new ir({color:t,toneMapped:!1}));this.type="BoxHelper";this.matrixAutoUpdate=!1;this.update()}function Eo(e,t){this.type="Box3Helper";this.box=e;t=t||16776960;e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new N;r.setIndex(new E(e,1));r.setAttribute("position",new j([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));ar.call(this,r,new ir({color:t,toneMapped:!1}));this.type="Box3Helper";this.geometry.computeBoundingSphere()}function Oo(e,t,r){this.plane=e;this.size=void 0===t?1:t;e=void 0!==r?r:16776960;t=new N;t.setAttribute("position",new j([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));t.computeBoundingSphere();or.call(this,t,new ir({color:e,toneMapped:!1}));this.type="PlaneHelper";t=new N;t.setAttribute("position",new j([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));t.computeBoundingSphere();this.add(new I(t,new x({color:e,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Po(e,t,r,n,i,o){f.call(this);this.type="ArrowHelper";void 0===e&&(e=new Te(0,0,1));void 0===t&&(t=new Te(0,0,0));void 0===r&&(r=1);void 0===n&&(n=16776960);void 0===i&&(i=.2*r);void 0===o&&(o=.2*i);void 0===Lc&&(Lc=new N,Lc.setAttribute("position",new j([0,0,0,0,1,0],3)),Nc=new _n(0,.5,1,5,1),Nc.translate(0,-.5,0));this.position.copy(t);this.line=new or(Lc,new ir({color:n,toneMapped:!1}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new I(Nc,new x({color:n,toneMapped:!1}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(e);this.setLength(r,i,o)}function Ao(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new N;e.setAttribute("position",new j(t,3));e.setAttribute("color",new j([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));t=new ir({vertexColors:!0,toneMapped:!1});ar.call(this,e,t);this.type="AxesHelper"}function jo(e){this._renderer=e;this._pingPongRenderTarget=null;e=new Float32Array(20);var t=new Te(0,1,0);e=new Mn({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Fc[3e3]},outputEncoding:{value:Fc[3e3]}},vertexShader:Io(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n"+Do()+"\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});e.type="SphericalGaussianBlur";this._blurMaterial=e;this._cubemapShader=this._equirectShader=null;this._compileMaterial(this._blurMaterial)}function Ro(e){e=new T(3*Ic,3*Ic,e);e.texture.mapping=306;e.texture.name="PMREM.cubeUv";e.scissorTest=!0;return e}function ko(e,t,r,n,i){e.viewport.set(t,r,n,i);e.scissor.set(t,r,n,i)}function Lo(){var e=new Me(1,1);e=new Mn({uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Fc[3e3]},outputEncoding:{value:Fc[3e3]}},vertexShader:Io(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n"+Do()+"\n\n#include <common>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv = equirectUv( outputDirection );\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});e.type="EquirectangularToCubeUV";return e}function No(){var e=new Mn({uniforms:{envMap:{value:null},inputEncoding:{value:Fc[3e3]},outputEncoding:{value:Fc[3e3]}},vertexShader:Io(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n"+Do()+"\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});e.type="CubemapToCubeUV";return e}function Io(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function Do(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}function Bo(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");si.call(this,e);this.type="catmullrom";this.closed=!0}function Fo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");si.call(this,e);this.type="catmullrom"}function zo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");si.call(this,e);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e});void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t});Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]);-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&(e=this._listeners[e],void 0!==e&&(t=e.indexOf(t),-1!==t&&e.splice(t,1)))},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;t=t.slice(0);for(var r=0,n=t.length;r<n;r++)t[r].call(this,e)}}}});for(var $o=[],Go=0;256>Go;Go++)$o[Go]=(16>Go?"0":"")+Go.toString(16);var Vo={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return($o[e&255]+$o[e>>8&255]+$o[e>>16&255]+$o[e>>24&255]+"-"+$o[t&255]+$o[t>>8&255]+"-"+$o[t>>16&15|64]+$o[t>>24&255]+"-"+$o[r&63|128]+$o[r>>8&255]+"-"+$o[r>>16&255]+$o[r>>24&255]+$o[n&255]+$o[n>>8&255]+$o[n>>16&255]+$o[n>>24&255]).toUpperCase()},clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*(3-2*e)},smootherstep:function(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Vo.DEG2RAD},radToDeg:function(e){return e*Vo.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,r,n,i){var o=Math.cos,a=Math.sin,s=o(r/2);r=a(r/2);var u=o((t+n)/2),c=a((t+n)/2),l=o((t-n)/2),h=a((t-n)/2);o=o((n-t)/2);t=a((n-t)/2);switch(i){case"XYX":e.set(s*c,r*l,r*h,s*u);break;case"YZY":e.set(r*h,s*c,r*l,s*u);break;case"ZXZ":e.set(r*l,r*h,s*c,s*u);break;case"XZX":e.set(s*c,r*t,r*o,s*u);break;case"YXY":e.set(r*o,s*c,r*t,s*u);break;case"ZYZ":e.set(r*t,r*o,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};Object.defineProperties(Me.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(Me.prototype,{isVector2:!0,set:function(e,t){this.x=e;this.y=t;return this},setScalar:function(e){this.y=this.x=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(void 0!==t)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t);this.x+=e.x;this.y+=e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;return this},sub:function(e,t){if(void 0!==t)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t);this.x-=e.x;this.y-=e.y;return this},subScalar:function(e){this.x-=e;this.y-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y;e=e.elements;this.x=e[0]*t+e[3]*r+e[6];this.y=e[1]*t+e[4]*r+e[7];return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));return this},clampScalar:function(e,t){this.x=Math.max(e,Math.min(t,this.x));this.y=Math.max(e,Math.min(t,this.y));return this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;e=this.y-e.y;return t*t+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},lerpVectors:function(e,t,r){this.x=e.x+(t.x-e.x)*r;this.y=e.y+(t.y-e.y)*r;return this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;return e},fromBufferAttribute:function(e,t,r){void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);return this},rotateAround:function(e,t){var r=Math.cos(t);t=Math.sin(t);var n=this.x-e.x,i=this.y-e.y;this.x=n*r-i*t+e.x;this.y=n*t+i*r+e.y;return this},random:function(){this.x=Math.random();this.y=Math.random();return this}});Object.assign(m.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,o,a,s,u){var c=this.elements;c[0]=e;c[1]=n;c[2]=a;c[3]=t;c[4]=i;c[5]=s;c[6]=r;c[7]=o;c[8]=u;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;e=e.elements;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return this},extractBasis:function(e,t,r){e.setFromMatrix3Column(this,0);t.setFromMatrix3Column(this,1);r.setFromMatrix3Column(this,2);return this},setFromMatrix4:function(e){e=e.elements;this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]);return this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements;t=this.elements;e=r[0];var i=r[3],o=r[6],a=r[1],s=r[4],u=r[7],c=r[2],l=r[5];r=r[8];var h=n[0],p=n[3],f=n[6],d=n[1],v=n[4],m=n[7],g=n[2],_=n[5];n=n[8];t[0]=e*h+i*d+o*g;t[3]=e*p+i*v+o*_;t[6]=e*f+i*m+o*n;t[1]=a*h+s*d+u*g;t[4]=a*p+s*v+u*_;t[7]=a*f+s*m+u*n;t[2]=c*h+l*d+r*g;t[5]=c*p+l*v+r*_;t[8]=c*f+l*m+r*n;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7];e=e[8];return t*o*e-t*a*u-r*i*e+r*a*s+n*i*u-n*o*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var r=e.elements;e=this.elements;t=r[0];var n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],c=r[7];r=r[8];var l=r*a-s*c,h=s*u-r*o,p=c*o-a*u,f=t*l+n*h+i*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);f=1/f;e[0]=l*f;e[1]=(i*c-r*n)*f;e[2]=(s*n-i*a)*f;e[3]=h*f;e[4]=(r*t-i*u)*f;e[5]=(i*o-s*t)*f;e[6]=p*f;e[7]=(n*u-c*t)*f;e[8]=(a*t-n*o)*f;return this},transpose:function(){var e=this.elements;var t=e[1];e[1]=e[3];e[3]=t;t=e[2];e[2]=e[6];e[6]=t;t=e[5];e[5]=e[7];e[7]=t;return this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},setUvTransform:function(e,t,r,n,i,o,a){var s=Math.cos(i);i=Math.sin(i);this.set(r*s,r*i,-r*(s*o+i*a)+o+e,-n*i,n*s,-n*(-i*o+s*a)+a+t,0,0,1)},scale:function(e,t){var r=this.elements;r[0]*=e;r[3]*=e;r[6]*=e;r[1]*=t;r[4]*=t;r[7]*=t;return this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var r=this.elements,n=r[0],i=r[3],o=r[6],a=r[1],s=r[4],u=r[7];r[0]=t*n+e*a;r[3]=t*i+e*s;r[6]=t*o+e*u;r[1]=-e*n+t*a;r[4]=-e*i+t*s;r[7]=-e*o+t*u;return this},translate:function(e,t){var r=this.elements;r[0]+=e*r[2];r[3]+=e*r[5];r[6]+=e*r[8];r[1]+=t*r[2];r[4]+=t*r[5];r[7]+=t*r[8];return this},equals:function(e){var t=this.elements;e=e.elements;for(var r=0;9>r;r++)if(t[r]!==e[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;9>r;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);var r=this.elements;e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=r[3];e[t+4]=r[4];e[t+5]=r[5];e[t+6]=r[6];e[t+7]=r[7];e[t+8]=r[8];return e}});var Ho,Uo={getDataURL:function(e){if("undefined"==typeof HTMLCanvasElement)return e.src;if(!(e instanceof HTMLCanvasElement)){void 0===Ho&&(Ho=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));Ho.width=e.width;Ho.height=e.height;var t=Ho.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height);e=Ho}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},qo=0;p.DEFAULT_IMAGE=void 0;p.DEFAULT_MAPPING=300;p.prototype=Object.assign(Object.create(t.prototype),{constructor:p,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.image=e.image;this.mipmaps=e.mipmaps.slice(0);this.mapping=e.mapping;this.wrapS=e.wrapS;this.wrapT=e.wrapT;this.magFilter=e.magFilter;this.minFilter=e.minFilter;this.anisotropy=e.anisotropy;this.format=e.format;this.internalFormat=e.internalFormat;this.type=e.type;this.offset.copy(e.offset);this.repeat.copy(e.repeat);this.center.copy(e.center);this.rotation=e.rotation;this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrix.copy(e.matrix);this.generateMipmaps=e.generateMipmaps;this.premultiplyAlpha=e.premultiplyAlpha;this.flipY=e.flipY;this.unpackAlignment=e.unpackAlignment;this.encoding=e.encoding;return this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=Vo.generateUUID());if(!t&&void 0===e.images[n.uuid]){if(Array.isArray(n)){var i=[];for(var o=0,a=n.length;o<a;o++)i.push(Uo.getDataURL(n[o]))}else i=Uo.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}t||(e.textures[this.uuid]=r);return r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;e.applyMatrix3(this.matrix);if(0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y);return e}});Object.defineProperty(p.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});Object.defineProperties(Ce.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}});Object.assign(Ce.prototype,{isVector4:!0,set:function(e,t,r,n){this.x=e;this.y=t;this.z=r;this.w=n;return this},setScalar:function(e){this.w=this.z=this.y=this.x=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=void 0!==e.w?e.w:1;return this},add:function(e,t){if(void 0!==t)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t);this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;this.w+=e.w*t;return this},sub:function(e,t){if(void 0!==t)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t);this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;this.w-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w;e=e.elements;this.x=e[0]*t+e[4]*r+e[8]*n+e[12]*i;this.y=e[1]*t+e[5]*r+e[9]*n+e[13]*i;this.z=e[2]*t+e[6]*r+e[10]*n+e[14]*i;this.w=e[3]*t+e[7]*r+e[11]*n+e[15]*i;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t);return this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var t=e[0];var r=e[4];var n=e[8],i=e[1],o=e[5],a=e[9];var s=e[2];var u=e[6];var c=e[10];if(.01>Math.abs(r-i)&&.01>Math.abs(n-s)&&.01>Math.abs(a-u)){if(.1>Math.abs(r+i)&&.1>Math.abs(n+s)&&.1>Math.abs(a+u)&&.1>Math.abs(t+o+c-3))return this.set(1,0,0,0),this;e=Math.PI;t=(t+1)/2;o=(o+1)/2;c=(c+1)/2;r=(r+i)/4;n=(n+s)/4;a=(a+u)/4;t>o&&t>c?.01>t?(u=0,r=s=.707106781):(u=Math.sqrt(t),s=r/u,r=n/u):o>c?.01>o?(u=.707106781,s=0,r=.707106781):(s=Math.sqrt(o),u=r/s,r=a/s):.01>c?(s=u=.707106781,r=0):(r=Math.sqrt(c),u=n/r,s=a/r);this.set(u,s,r,e);return this}e=Math.sqrt((u-a)*(u-a)+(n-s)*(n-s)+(i-r)*(i-r));.001>Math.abs(e)&&(e=1);this.x=(u-a)/e;this.y=(n-s)/e;this.z=(i-r)/e;this.w=Math.acos((t+o+c-1)/2);return this},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);this.w=Math.min(this.w,e.w);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);this.w=Math.max(this.w,e.w);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));this.w=Math.max(e.w,Math.min(t.w,this.w));return this},clampScalar:function(e,t){this.x=Math.max(e,Math.min(t,this.x));this.y=Math.max(e,Math.min(t,this.y));this.z=Math.max(e,Math.min(t,this.z));this.w=Math.max(e,Math.min(t,this.w));return this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},lerpVectors:function(e,t,r){this.x=e.x+(t.x-e.x)*r;this.y=e.y+(t.y-e.y)*r;this.z=e.z+(t.z-e.z)*r;this.w=e.w+(t.w-e.w)*r;return this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},fromBufferAttribute:function(e,t,r){void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);this.w=e.getW(t);return this},random:function(){this.x=Math.random();this.y=Math.random();this.z=Math.random();this.w=Math.random();return this}});T.prototype=Object.assign(Object.create(t.prototype),{constructor:T,isWebGLRenderTarget:!0,setSize:function(e,t){if(this.width!==e||this.height!==t)this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose();this.viewport.set(0,0,e,t);this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.width=e.width;this.height=e.height;this.viewport.copy(e.viewport);this.texture=e.texture.clone();this.depthBuffer=e.depthBuffer;this.stencilBuffer=e.stencilBuffer;this.depthTexture=e.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});r.prototype=Object.assign(Object.create(T.prototype),{constructor:r,isWebGLMultisampleRenderTarget:!0,copy:function(e){T.prototype.copy.call(this,e);this.samples=e.samples;return this}});Object.assign(d,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,a){var s=r[n+0],u=r[n+1],c=r[n+2];r=r[n+3];n=i[o+0];var l=i[o+1],h=i[o+2];i=i[o+3];if(r!==i||s!==n||u!==l||c!==h){o=1-a;var p=s*n+u*l+c*h+r*i,f=0<=p?1:-1,d=1-p*p;d>Number.EPSILON&&(d=Math.sqrt(d),p=Math.atan2(d,p*f),o=Math.sin(o*p)/d,a=Math.sin(a*p)/d);f*=a;s=s*o+n*f;u=u*o+l*f;c=c*o+h*f;r=r*o+i*f;o===1-a&&(a=1/Math.sqrt(s*s+u*u+c*c+r*r),s*=a,u*=a,c*=a,r*=a)}e[t]=s;e[t+1]=u;e[t+2]=c;e[t+3]=r},multiplyQuaternionsFlat:function(e,t,r,n,i,o){var a=r[n],s=r[n+1],u=r[n+2];r=r[n+3];n=i[o];var c=i[o+1],l=i[o+2];i=i[o+3];e[t]=a*i+r*n+s*l-u*c;e[t+1]=s*i+r*c+u*n-a*l;e[t+2]=u*i+r*l+a*c-s*n;e[t+3]=r*i-a*n-s*c-u*l;return e}});Object.defineProperties(d.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e;this._onChangeCallback()}}});Object.assign(d.prototype,{isQuaternion:!0,set:function(e,t,r,n){this._x=e;this._y=t;this._z=r;this._w=n;this._onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this._onChangeCallback();return this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z;e=e.order;var o=Math.cos,a=Math.sin,s=o(r/2),u=o(n/2);o=o(i/2);r=a(r/2);n=a(n/2);i=a(i/2);switch(e){case"XYZ":this._x=r*u*o+s*n*i;this._y=s*n*o-r*u*i;this._z=s*u*i+r*n*o;this._w=s*u*o-r*n*i;break;case"YXZ":this._x=r*u*o+s*n*i;this._y=s*n*o-r*u*i;this._z=s*u*i-r*n*o;this._w=s*u*o+r*n*i;break;case"ZXY":this._x=r*u*o-s*n*i;this._y=s*n*o+r*u*i;this._z=s*u*i+r*n*o;this._w=s*u*o-r*n*i;break;case"ZYX":this._x=r*u*o-s*n*i;this._y=s*n*o+r*u*i;this._z=s*u*i-r*n*o;this._w=s*u*o+r*n*i;break;case"YZX":this._x=r*u*o+s*n*i;this._y=s*n*o+r*u*i;this._z=s*u*i-r*n*o;this._w=s*u*o-r*n*i;break;case"XZY":this._x=r*u*o-s*n*i;this._y=s*n*o-r*u*i;this._z=s*u*i+r*n*o;this._w=s*u*o+r*n*i;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+e)}!1!==t&&this._onChangeCallback();return this},setFromAxisAngle:function(e,t){t/=2;var r=Math.sin(t);this._x=e.x*r;this._y=e.y*r;this._z=e.z*r;this._w=Math.cos(t);this._onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,r=t[0];e=t[4];var n=t[8],i=t[1],o=t[5],a=t[9],s=t[2],u=t[6];t=t[10];var c=r+o+t;0<c?(r=.5/Math.sqrt(c+1),this._w=.25/r,this._x=(u-a)*r,this._y=(n-s)*r,this._z=(i-e)*r):r>o&&r>t?(r=2*Math.sqrt(1+r-o-t),this._w=(u-a)/r,this._x=.25*r,this._y=(e+i)/r,this._z=(n+s)/r):o>t?(r=2*Math.sqrt(1+o-r-t),this._w=(n-s)/r,this._x=(e+i)/r,this._y=.25*r,this._z=(a+u)/r):(r=2*Math.sqrt(1+t-r-o),this._w=(i-e)/r,this._x=(n+s)/r,this._y=(a+u)/r,this._z=.25*r);this._onChangeCallback();return this},setFromUnitVectors:function(e,t){var r=e.dot(t)+1;1e-6>r?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x);this._w=r;return this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Vo.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;this.slerp(e,Math.min(1,t/r));return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e);this._onChangeCallback();return this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z;e=e._w;var o=t._x,a=t._y,s=t._z;t=t._w;this._x=r*t+e*o+n*s-i*a;this._y=n*t+e*a+i*o-r*s;this._z=i*t+e*s+r*a-n*o;this._w=e*t-r*o-n*a-i*s;this._onChangeCallback();return this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e);if(1<=a)return this._w=o,this._x=r,this._y=n,this._z=i,this;e=1-a*a;if(e<=Number.EPSILON)return a=1-t,this._w=a*o+t*this._w,this._x=a*r+t*this._x,this._y=a*n+t*this._y,this._z=a*i+t*this._z,this.normalize(),this._onChangeCallback(),this;e=Math.sqrt(e);var s=Math.atan2(e,a);a=Math.sin((1-t)*s)/e;t=Math.sin(t*s)/e;this._w=o*a+this._w*t;this._x=r*a+this._x*t;this._y=n*a+this._y*t;this._z=i*a+this._z*t;this._onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){void 0===t&&(t=0);this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this._onChangeCallback();return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},fromBufferAttribute:function(e,t){this._x=e.getX(t);this._y=e.getY(t);this._z=e.getZ(t);this._w=e.getW(t);return this},_onChange:function(e){this._onChangeCallback=e;return this},_onChangeCallback:function(){}});var Wo=new Te,Xo=new d;Object.assign(Te.prototype,{isVector3:!0,set:function(e,t,r){this.x=e;this.y=t;this.z=r;return this},setScalar:function(e){this.z=this.y=this.x=e;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t);this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},addScaledVector:function(e,t){this.x+=e.x*t;this.y+=e.y*t;this.z+=e.z*t;return this},sub:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t);this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subScalar:function(e){this.x-=e;this.y-=e;this.z-=e;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t);this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(e){e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(Xo.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Xo.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z;e=e.elements;this.x=e[0]*t+e[3]*r+e[6]*n;this.y=e[1]*t+e[4]*r+e[7]*n;this.z=e[2]*t+e[5]*r+e[8]*n;return this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z;e=e.elements;var i=1/(e[3]*t+e[7]*r+e[11]*n+e[15]);this.x=(e[0]*t+e[4]*r+e[8]*n+e[12])*i;this.y=(e[1]*t+e[5]*r+e[9]*n+e[13])*i;this.z=(e[2]*t+e[6]*r+e[10]*n+e[14])*i;return this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z;e=e.w;var s=e*t+o*n-a*r,u=e*r+a*t-i*n,c=e*n+i*r-o*t;t=-i*t-o*r-a*n;this.x=s*e+t*-i+u*-a-c*-o;this.y=u*e+t*-o+c*-i-s*-a;this.z=c*e+t*-a+s*-o-u*-i;return this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,r=this.y,n=this.z;e=e.elements;this.x=e[0]*t+e[4]*r+e[8]*n;this.y=e[1]*t+e[5]*r+e[9]*n;this.z=e[2]*t+e[6]*r+e[10]*n;return this.normalize()},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){this.x=Math.min(this.x,e.x);this.y=Math.min(this.y,e.y);this.z=Math.min(this.z,e.z);return this},max:function(e){this.x=Math.max(this.x,e.x);this.y=Math.max(this.y,e.y);this.z=Math.max(this.z,e.z);return this},clamp:function(e,t){this.x=Math.max(e.x,Math.min(t.x,this.x));this.y=Math.max(e.y,Math.min(t.y,this.y));this.z=Math.max(e.z,Math.min(t.z,this.z));return this},clampScalar:function(e,t){this.x=Math.max(e,Math.min(t,this.x));this.y=Math.max(e,Math.min(t,this.y));this.z=Math.max(e,Math.min(t,this.z));return this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},lerpVectors:function(e,t,r){this.x=e.x+(t.x-e.x)*r;this.y=e.y+(t.y-e.y)*r;this.z=e.z+(t.z-e.z)*r;return this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y;e=e.z;var i=t.x,o=t.y;t=t.z;this.x=n*t-e*o;this.y=e*i-r*t;this.z=r*o-n*i;return this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);t=e.dot(this)/t;return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){Wo.copy(this).projectOnVector(e);return this.sub(Wo)},reflect:function(e){return this.sub(Wo.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;e=this.dot(e)/t;return Math.acos(Vo.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;e=this.z-e.z;return t*t+r*r+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;this.x=n*Math.sin(r);this.y=Math.cos(t)*e;this.z=n*Math.cos(r);return this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){this.x=e*Math.sin(t);this.y=r;this.z=e*Math.cos(t);return this},setFromMatrixPosition:function(e){e=e.elements;this.x=e[12];this.y=e[13];this.z=e[14];return this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length();e=this.setFromMatrixColumn(e,2).length();this.x=t;this.y=r;this.z=e;return this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){void 0===t&&(t=0);this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},fromBufferAttribute:function(e,t,r){void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=e.getX(t);this.y=e.getY(t);this.z=e.getZ(t);return this},random:function(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this}});var Yo=new Te,Ko=new Ee,Zo=new Te(0,0,0),Jo=new Te(1,1,1),Qo=new Te,ea=new Te,ta=new Te;Object.assign(Ee.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,o,a,s,u,c,l,h,p,f,d,v){var m=this.elements;m[0]=e;m[4]=t;m[8]=r;m[12]=n;m[1]=i;m[5]=o;m[9]=a;m[13]=s;m[2]=u;m[6]=c;m[10]=l;m[14]=h;m[3]=p;m[7]=f;m[11]=d;m[15]=v;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new Ee).fromArray(this.elements)},copy:function(e){var t=this.elements;e=e.elements;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return this},copyPosition:function(e){var t=this.elements;e=e.elements;t[12]=e[12];t[13]=e[13];t[14]=e[14];return this},extractBasis:function(e,t,r){e.setFromMatrixColumn(this,0);t.setFromMatrixColumn(this,1);r.setFromMatrixColumn(this,2);return this},makeBasis:function(e,t,r){this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1);return this},extractRotation:function(e){var t=this.elements,r=e.elements,n=1/Yo.setFromMatrixColumn(e,0).length(),i=1/Yo.setFromMatrixColumn(e,1).length();e=1/Yo.setFromMatrixColumn(e,2).length();t[0]=r[0]*n;t[1]=r[1]*n;t[2]=r[2]*n;t[3]=0;t[4]=r[4]*i;t[5]=r[5]*i;t[6]=r[6]*i;t[7]=0;t[8]=r[8]*e;t[9]=r[9]*e;t[10]=r[10]*e;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r);r=Math.sin(r);var a=Math.cos(n);n=Math.sin(n);var s=Math.cos(i);i=Math.sin(i);if("XYZ"===e.order){e=o*s;var u=o*i,c=r*s,l=r*i;t[0]=a*s;t[4]=-a*i;t[8]=n;t[1]=u+c*n;t[5]=e-l*n;t[9]=-r*a;t[2]=l-e*n;t[6]=c+u*n;t[10]=o*a}else"YXZ"===e.order?(e=a*s,u=a*i,c=n*s,l=n*i,t[0]=e+l*r,t[4]=c*r-u,t[8]=o*n,t[1]=o*i,t[5]=o*s,t[9]=-r,t[2]=u*r-c,t[6]=l+e*r,t[10]=o*a):"ZXY"===e.order?(e=a*s,u=a*i,c=n*s,l=n*i,t[0]=e-l*r,t[4]=-o*i,t[8]=c+u*r,t[1]=u+c*r,t[5]=o*s,t[9]=l-e*r,t[2]=-o*n,t[6]=r,t[10]=o*a):"ZYX"===e.order?(e=o*s,u=o*i,c=r*s,l=r*i,t[0]=a*s,t[4]=c*n-u,t[8]=e*n+l,t[1]=a*i,t[5]=l*n+e,t[9]=u*n-c,t[2]=-n,t[6]=r*a,t[10]=o*a):"YZX"===e.order?(e=o*a,u=o*n,c=r*a,l=r*n,t[0]=a*s,t[4]=l-e*i,t[8]=c*i+u,t[1]=i,t[5]=o*s,t[9]=-r*s,t[2]=-n*s,t[6]=u*i+c,t[10]=e-l*i):"XZY"===e.order&&(e=o*a,u=o*n,c=r*a,l=r*n,t[0]=a*s,t[4]=-i,t[8]=n*s,t[1]=e*i+l,t[5]=o*s,t[9]=u*i-c,t[2]=c*i-u,t[6]=r*s,t[10]=l*i+e);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},makeRotationFromQuaternion:function(e){return this.compose(Zo,e,Jo)},lookAt:function(e,t,r){var n=this.elements;ta.subVectors(e,t);0===ta.lengthSq()&&(ta.z=1);ta.normalize();Qo.crossVectors(r,ta);0===Qo.lengthSq()&&(1===Math.abs(r.z)?ta.x+=1e-4:ta.z+=1e-4,ta.normalize(),Qo.crossVectors(r,ta));Qo.normalize();ea.crossVectors(ta,Qo);n[0]=Qo.x;n[4]=ea.x;n[8]=ta.x;n[1]=Qo.y;n[5]=ea.y;n[9]=ta.y;n[2]=Qo.z;n[6]=ea.z;n[10]=ta.z;return this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements;t=this.elements;e=r[0];var i=r[4],o=r[8],a=r[12],s=r[1],u=r[5],c=r[9],l=r[13],h=r[2],p=r[6],f=r[10],d=r[14],v=r[3],m=r[7],g=r[11];r=r[15];var _=n[0],y=n[4],b=n[8],x=n[12],w=n[1],S=n[5],M=n[9],C=n[13],T=n[2],E=n[6],O=n[10],P=n[14],A=n[3],j=n[7],R=n[11];n=n[15];t[0]=e*_+i*w+o*T+a*A;t[4]=e*y+i*S+o*E+a*j;t[8]=e*b+i*M+o*O+a*R;t[12]=e*x+i*C+o*P+a*n;t[1]=s*_+u*w+c*T+l*A;t[5]=s*y+u*S+c*E+l*j;t[9]=s*b+u*M+c*O+l*R;t[13]=s*x+u*C+c*P+l*n;t[2]=h*_+p*w+f*T+d*A;t[6]=h*y+p*S+f*E+d*j;t[10]=h*b+p*M+f*O+d*R;t[14]=h*x+p*C+f*P+d*n;t[3]=v*_+m*w+g*T+r*A;t[7]=v*y+m*S+g*E+r*j;t[11]=v*b+m*M+g*O+r*R;t[15]=v*x+m*C+g*P+r*n;return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],p=e[14];return e[3]*(+i*s*l-n*u*l-i*a*h+r*u*h+n*a*p-r*s*p)+e[7]*(+t*s*p-t*u*h+i*o*h-n*o*p+n*u*c-i*s*c)+e[11]*(+t*u*l-t*a*p-i*o*l+r*o*p+i*a*c-r*u*c)+e[15]*(-n*a*c-t*s*l+t*a*h+n*o*l-r*o*h+r*s*c)},transpose:function(){var e=this.elements;var t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},setPosition:function(e,t,r){var n=this.elements;e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r);return this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");t=this.elements;var r=e.elements;e=r[0];var n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],c=r[7],l=r[8],h=r[9],p=r[10],f=r[11],d=r[12],v=r[13],m=r[14];r=r[15];var g=h*m*c-v*p*c+v*u*f-s*m*f-h*u*r+s*p*r,_=d*p*c-l*m*c-d*u*f+a*m*f+l*u*r-a*p*r,y=l*v*c-d*h*c+d*s*f-a*v*f-l*s*r+a*h*r,b=d*h*u-l*v*u-d*s*p+a*v*p+l*s*m-a*h*m,x=e*g+n*_+i*y+o*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);x=1/x;t[0]=g*x;t[1]=(v*p*o-h*m*o-v*i*f+n*m*f+h*i*r-n*p*r)*x;t[2]=(s*m*o-v*u*o+v*i*c-n*m*c-s*i*r+n*u*r)*x;t[3]=(h*u*o-s*p*o-h*i*c+n*p*c+s*i*f-n*u*f)*x;t[4]=_*x;t[5]=(l*m*o-d*p*o+d*i*f-e*m*f-l*i*r+e*p*r)*x;t[6]=(d*u*o-a*m*o-d*i*c+e*m*c+a*i*r-e*u*r)*x;t[7]=(a*p*o-l*u*o+l*i*c-e*p*c-a*i*f+e*u*f)*x;t[8]=y*x;t[9]=(d*h*o-l*v*o-d*n*f+e*v*f+l*n*r-e*h*r)*x;t[10]=(a*v*o-d*s*o+d*n*c-e*v*c-a*n*r+e*s*r)*x;t[11]=(l*s*o-a*h*o-l*n*c+e*h*c+a*n*f-e*s*f)*x;t[12]=b*x;t[13]=(l*v*i-d*h*i+d*n*p-e*v*p-l*n*m+e*h*m)*x;t[14]=(d*s*i-a*v*i-d*n*u+e*v*u+a*n*m-e*s*m)*x;t[15]=(a*h*i-l*s*i+l*n*u-e*h*u-a*n*p+e*s*p)*x;return this},scale:function(e){var t=this.elements,r=e.x,n=e.y;e=e.z;t[0]*=r;t[4]*=n;t[8]*=e;t[1]*=r;t[5]*=n;t[9]*=e;t[2]*=r;t[6]*=n;t[10]*=e;t[3]*=r;t[7]*=n;t[11]*=e;return this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,r){this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e);e=Math.sin(e);this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e);e=Math.sin(e);this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e);e=Math.sin(e);this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var r=Math.cos(t);t=Math.sin(t);var n=1-r,i=e.x,o=e.y;e=e.z;var a=n*i,s=n*o;this.set(a*i+r,a*o-t*e,a*e+t*o,0,a*o+t*e,s*o+r,s*e-t*i,0,a*e-t*o,s*e+t*i,n*e*e+r,0,0,0,0,1);return this},makeScale:function(e,t,r){this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1);return this},makeShear:function(e,t,r){this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1);return this},compose:function(e,t,r){var n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a;t=i*u;var h=i*c;i*=l;var p=o*c;o*=l;a*=l;u*=s;c*=s;s*=l;l=r.x;var f=r.y;r=r.z;n[0]=(1-(p+a))*l;n[1]=(h+s)*l;n[2]=(i-c)*l;n[3]=0;n[4]=(h-s)*f;n[5]=(1-(t+a))*f;n[6]=(o+u)*f;n[7]=0;n[8]=(i+c)*r;n[9]=(o-u)*r;n[10]=(1-(t+p))*r;n[11]=0;n[12]=e.x;n[13]=e.y;n[14]=e.z;n[15]=1;return this},decompose:function(e,t,r){var n=this.elements,i=Yo.set(n[0],n[1],n[2]).length(),o=Yo.set(n[4],n[5],n[6]).length(),a=Yo.set(n[8],n[9],n[10]).length();0>this.determinant()&&(i=-i);e.x=n[12];e.y=n[13];e.z=n[14];Ko.copy(this);e=1/i;n=1/o;var s=1/a;Ko.elements[0]*=e;Ko.elements[1]*=e;Ko.elements[2]*=e;Ko.elements[4]*=n;Ko.elements[5]*=n;Ko.elements[6]*=n;Ko.elements[8]*=s;Ko.elements[9]*=s;Ko.elements[10]*=s;t.setFromRotationMatrix(Ko);r.x=i;r.y=o;r.z=a;return this},makePerspective:function(e,t,r,n,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;a[0]=2*i/(t-e);a[4]=0;a[8]=(t+e)/(t-e);a[12]=0;a[1]=0;a[5]=2*i/(r-n);a[9]=(r+n)/(r-n);a[13]=0;a[2]=0;a[6]=0;a[10]=-(o+i)/(o-i);a[14]=-2*o*i/(o-i);a[3]=0;a[7]=0;a[11]=-1;a[15]=0;return this},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=1/(t-e),u=1/(r-n),c=1/(o-i);a[0]=2*s;a[4]=0;a[8]=0;a[12]=-((t+e)*s);a[1]=0;a[5]=2*u;a[9]=0;a[13]=-((r+n)*u);a[2]=0;a[6]=0;a[10]=-2*c;a[14]=-((o+i)*c);a[3]=0;a[7]=0;a[11]=0;a[15]=1;return this},equals:function(e){var t=this.elements;e=e.elements;for(var r=0;16>r;r++)if(t[r]!==e[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;16>r;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);var r=this.elements;e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=r[3];e[t+4]=r[4];e[t+5]=r[5];e[t+6]=r[6];e[t+7]=r[7];e[t+8]=r[8];e[t+9]=r[9];e[t+10]=r[10];e[t+11]=r[11];e[t+12]=r[12];e[t+13]=r[13];e[t+14]=r[14];e[t+15]=r[15];return e}});var ra=new Ee,na=new d;i.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");i.DefaultOrder="XYZ";Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e;this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e;this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e;this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e;this._onChangeCallback()}}});Object.assign(i.prototype,{isEuler:!0,set:function(e,t,r,n){this._x=e;this._y=t;this._z=r;this._order=n||this._order;this._onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this._onChangeCallback();return this},setFromRotationMatrix:function(e,t,r){var n=Vo.clamp,i=e.elements;e=i[0];var o=i[4],a=i[8],s=i[1],u=i[5],c=i[9],l=i[2],h=i[6];i=i[10];t=t||this._order;switch(t){case"XYZ":this._y=Math.asin(n(a,-1,1));.9999999>Math.abs(a)?(this._x=Math.atan2(-c,i),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-n(c,-1,1));.9999999>Math.abs(c)?(this._y=Math.atan2(a,i),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,e),this._z=0);break;case"ZXY":this._x=Math.asin(n(h,-1,1));.9999999>Math.abs(h)?(this._y=Math.atan2(-l,i),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,e));break;case"ZYX":this._y=Math.asin(-n(l,-1,1));.9999999>Math.abs(l)?(this._x=Math.atan2(h,i),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(n(s,-1,1));.9999999>Math.abs(s)?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,e)):(this._x=0,this._y=Math.atan2(a,i));break;case"XZY":this._z=Math.asin(-n(o,-1,1));.9999999>Math.abs(o)?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,e)):(this._x=Math.atan2(-c,i),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}this._order=t;!1!==r&&this._onChangeCallback();return this},setFromQuaternion:function(e,t,r){ra.makeRotationFromQuaternion(e);return this.setFromRotationMatrix(ra,t,r)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){na.setFromEuler(this);return this.setFromQuaternion(na,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];void 0!==e[3]&&(this._order=e[3]);this._onChangeCallback();return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._order;return e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Te(this._x,this._y,this._z)},_onChange:function(e){this._onChangeCallback=e;return this},_onChangeCallback:function(){}});Object.assign(o.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!==(this.mask&e.mask)}});var ia=0,oa=new Te,aa=new d,sa=new Ee,ua=new Te,ca=new Te,la=new Te,ha=new d,pa=new Te(1,0,0),fa=new Te(0,1,0),da=new Te(0,0,1),va={type:"added"},ma={type:"removed"};f.DefaultUp=new Te(0,1,0);f.DefaultMatrixAutoUpdate=!0;f.prototype=Object.assign(Object.create(t.prototype),{constructor:f,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix();this.matrix.premultiply(e);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){this.quaternion.premultiply(e);return this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){aa.setFromAxisAngle(e,t);this.quaternion.multiply(aa);return this},rotateOnWorldAxis:function(e,t){aa.setFromAxisAngle(e,t);this.quaternion.premultiply(aa);return this},rotateX:function(e){return this.rotateOnAxis(pa,e)},rotateY:function(e){return this.rotateOnAxis(fa,e)},rotateZ:function(e){return this.rotateOnAxis(da,e)},translateOnAxis:function(e,t){oa.copy(e).applyQuaternion(this.quaternion);this.position.add(oa.multiplyScalar(t));return this},translateX:function(e){return this.translateOnAxis(pa,e)},translateY:function(e){return this.translateOnAxis(fa,e)},translateZ:function(e){return this.translateOnAxis(da,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(sa.getInverse(this.matrixWorld))},lookAt:function(e,t,r){e.isVector3?ua.copy(e):ua.set(e,t,r);e=this.parent;this.updateWorldMatrix(!0,!1);ca.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?sa.lookAt(ca,ua,this.up):sa.lookAt(ua,ca,this.up);this.quaternion.setFromRotationMatrix(sa);e&&(sa.extractRotation(e.matrixWorld),aa.setFromRotationMatrix(sa),this.quaternion.premultiply(aa.inverse()))},add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this;e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(va)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e);return this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}t=this.children.indexOf(e);-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ma));return this},attach:function(e){this.updateWorldMatrix(!0,!1);sa.getInverse(this.matrixWorld);null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),sa.multiply(e.parent.matrixWorld));e.applyMatrix4(sa);e.updateWorldMatrix(!1,!1);this.add(e);return this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Te);this.updateMatrixWorld(!0);return e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new d);this.updateMatrixWorld(!0);this.matrixWorld.decompose(ca,e,la);return e},getWorldScale:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Te);this.updateMatrixWorld(!0);this.matrixWorld.decompose(ca,ha,e);return e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Te);this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||e)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0;for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;!0===e&&null!==r&&r.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===t)for(e=this.children,t=0,r=e.length;t<r;t++)e[t].updateWorldMatrix(!1,!0)},toJSON:function(r){function e(e,t){void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(r));return t.uuid}function t(e){var t=[],r;for(r in e){var n=e[r];delete n.metadata;t.push(n)}return t}var n=void 0===r||"string"===typeof r,i={};n&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};o.uuid=this.uuid;o.type=this.type;""!==this.name&&(o.name=this.name);!0===this.castShadow&&(o.castShadow=!0);!0===this.receiveShadow&&(o.receiveShadow=!0);!1===this.visible&&(o.visible=!1);!1===this.frustumCulled&&(o.frustumCulled=!1);0!==this.renderOrder&&(o.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData);o.layers=this.layers.mask;o.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1);this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON());if(this.isMesh||this.isLine||this.isPoints){o.geometry=e(r.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes)if(a=a.shapes,Array.isArray(a))for(var s=0,u=a.length;s<u;s++)e(r.shapes,a[s]);else e(r.shapes,a)}if(void 0!==this.material)if(Array.isArray(this.material)){a=[];s=0;for(u=this.material.length;s<u;s++)a.push(e(r.materials,this.material[s]));o.material=a}else o.material=e(r.materials,this.material);if(0<this.children.length)for(o.children=[],s=0;s<this.children.length;s++)o.children.push(this.children[s].toJSON(r).object);if(n){n=t(r.geometries);s=t(r.materials);u=t(r.textures);var c=t(r.images);a=t(r.shapes);0<n.length&&(i.geometries=n);0<s.length&&(i.materials=s);0<u.length&&(i.textures=u);0<c.length&&(i.images=c);0<a.length&&(i.shapes=a)}i.object=o;return i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){void 0===t&&(t=!0);this.name=e.name;this.up.copy(e.up);this.position.copy(e.position);this.quaternion.copy(e.quaternion);this.scale.copy(e.scale);this.matrix.copy(e.matrix);this.matrixWorld.copy(e.matrixWorld);this.matrixAutoUpdate=e.matrixAutoUpdate;this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate;this.layers.mask=e.layers.mask;this.visible=e.visible;this.castShadow=e.castShadow;this.receiveShadow=e.receiveShadow;this.frustumCulled=e.frustumCulled;this.renderOrder=e.renderOrder;this.userData=JSON.parse(JSON.stringify(e.userData));if(!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}});Oe.prototype=Object.assign(Object.create(f.prototype),{constructor:Oe,isScene:!0,copy:function(e,t){f.prototype.copy.call(this,e,t);null!==e.background&&(this.background=e.background.clone());null!==e.environment&&(this.environment=e.environment.clone());null!==e.fog&&(this.fog=e.fog.clone());null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone());this.autoUpdate=e.autoUpdate;this.matrixAutoUpdate=e.matrixAutoUpdate;return this},toJSON:function(e){var t=f.prototype.toJSON.call(this,e);null!==this.background&&(t.object.background=this.background.toJSON(e));null!==this.environment&&(t.object.environment=this.environment.toJSON(e));null!==this.fog&&(t.object.fog=this.fog.toJSON());return t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ga=[new Te,new Te,new Te,new Te,new Te,new Te,new Te,new Te],_a=new Te,ya=new n,ba=new Te,xa=new Te,wa=new Te,Sa=new Te,Ma=new Te,Ca=new Te,Ta=new Te,Ea=new Te,Oa=new Te,Pa=new Te;Object.assign(n.prototype,{isBox3:!0,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromArray:function(e){for(var t=Infinity,r=Infinity,n=Infinity,i=-Infinity,o=-Infinity,a=-Infinity,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c);l<r&&(r=l);h<n&&(n=h);c>i&&(i=c);l>o&&(o=l);h>a&&(a=h)}this.min.set(t,r,n);this.max.set(i,o,a);return this},setFromBufferAttribute:function(e){for(var t=Infinity,r=Infinity,n=Infinity,i=-Infinity,o=-Infinity,a=-Infinity,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c);l<r&&(r=l);h<n&&(n=h);c>i&&(i=c);l>o&&(o=l);h>a&&(a=h)}this.min.set(t,r,n);this.max.set(i,o,a);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){t=_a.copy(t).multiplyScalar(.5);this.min.copy(e).sub(t);this.max.copy(e).add(t);return this},setFromObject:function(e){this.makeEmpty();return this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Te);return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Te);return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ya.copy(t.boundingBox),ya.applyMatrix4(e.matrixWorld),this.union(ya));e=e.children;t=0;for(var r=e.length;t<r;t++)this.expandByObject(e[t]);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Te);return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(e){this.clampPoint(e.center,_a);return _a.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){if(0<e.normal.x){var t=e.normal.x*this.min.x;var r=e.normal.x*this.max.x}else t=e.normal.x*this.max.x,r=e.normal.x*this.min.x;0<e.normal.y?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y);0<e.normal.z?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z);return t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Ta);Ea.subVectors(this.max,Ta);ba.subVectors(e.a,Ta);xa.subVectors(e.b,Ta);wa.subVectors(e.c,Ta);Sa.subVectors(xa,ba);Ma.subVectors(wa,xa);Ca.subVectors(ba,wa);e=[0,-Sa.z,Sa.y,0,-Ma.z,Ma.y,0,-Ca.z,Ca.y,Sa.z,0,-Sa.x,Ma.z,0,-Ma.x,Ca.z,0,-Ca.x,-Sa.y,Sa.x,0,-Ma.y,Ma.x,0,-Ca.y,Ca.x,0];if(!a(e,ba,xa,wa,Ea))return!1;e=[1,0,0,0,1,0,0,0,1];if(!a(e,ba,xa,wa,Ea))return!1;Oa.crossVectors(Sa,Ma);e=[Oa.x,Oa.y,Oa.z];return a(e,ba,xa,wa,Ea)},clampPoint:function(e,t){void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Te);return t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return _a.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(e.center);e.radius=.5*this.getSize(_a).length();return e},intersect:function(e){this.min.max(e.min);this.max.min(e.max);this.isEmpty()&&this.makeEmpty();return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(e){if(this.isEmpty())return this;ga[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e);ga[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e);ga[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e);ga[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e);ga[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e);ga[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e);ga[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e);ga[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e);this.setFromPoints(ga);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Aa=new n;Object.assign(l.prototype,{set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(e,t){var r=this.center;void 0!==t?r.copy(t):Aa.setFromPoints(e).getCenter(r);for(var n=t=0,i=e.length;n<i;n++)t=Math.max(t,r.distanceToSquared(e[n]));this.radius=Math.sqrt(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){this.center.set(0,0,0);this.radius=-1;return this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Te);t.copy(e);r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center));return t},getBoundingBox:function(e){void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new n);if(this.isEmpty())return e.makeEmpty(),e;e.set(this.center,this.center);e.expandByScalar(this.radius);return e},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius*=e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var ja=new Te,Ra=new Te,ka=new Te,La=new Te,Na=new Te,Ia=new Te,Da=new Te;Object.assign(s.prototype,{set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Te);return t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize();return this},recast:function(e){this.origin.copy(this.at(e,ja));return this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Te);t.subVectors(e,this.origin);e=t.dot(this.direction);return 0>e?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=ja.subVectors(e,this.origin).dot(this.direction);if(0>t)return this.origin.distanceToSquared(e);ja.copy(this.direction).multiplyScalar(t).add(this.origin);return ja.distanceToSquared(e)},distanceSqToSegment:function(e,t,r,n){Ra.copy(e).add(t).multiplyScalar(.5);ka.copy(t).sub(e).normalize();La.copy(this.origin).sub(Ra);var i=.5*e.distanceTo(t),o=-this.direction.dot(ka),a=La.dot(this.direction),s=-La.dot(ka),u=La.lengthSq(),c=Math.abs(1-o*o);if(0<c){e=o*s-a;t=o*a-s;var l=i*c;0<=e?t>=-l?t<=l?(i=1/c,e*=i,t*=i,o=e*(e+o*t+2*a)+t*(o*e+t+2*s)+u):(t=i,e=Math.max(0,-(o*t+a)),o=-e*e+t*(t+2*s)+u):(t=-i,e=Math.max(0,-(o*t+a)),o=-e*e+t*(t+2*s)+u):t<=-l?(e=Math.max(0,-(-o*i+a)),t=0<e?-i:Math.min(Math.max(-i,-s),i),o=-e*e+t*(t+2*s)+u):t<=l?(e=0,t=Math.min(Math.max(-i,-s),i),o=t*(t+2*s)+u):(e=Math.max(0,-(o*i+a)),t=0<e?i:Math.min(Math.max(-i,-s),i),o=-e*e+t*(t+2*s)+u)}else t=0<o?-i:i,e=Math.max(0,-(o*t+a)),o=-e*e+t*(t+2*s)+u;r&&r.copy(this.direction).multiplyScalar(e).add(this.origin);n&&n.copy(ka).multiplyScalar(t).add(Ra);return o},intersectSphere:function(e,t){ja.subVectors(e.center,this.origin);var r=ja.dot(this.direction),n=ja.dot(ja)-r*r;e=e.radius*e.radius;if(n>e)return null;e=Math.sqrt(e-n);n=r-e;r+=e;return 0>n&&0>r?null:0>n?this.at(r,t):this.at(n,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;e=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=e?e:null},intersectPlane:function(e,t){e=this.distanceToPlane(e);return null===e?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t?!0:!1},intersectBox:function(e,t){var r=1/this.direction.x;var n=1/this.direction.y;var i=1/this.direction.z,o=this.origin;if(0<=r){var a=(e.min.x-o.x)*r;r*=e.max.x-o.x}else a=(e.max.x-o.x)*r,r*=e.min.x-o.x;if(0<=n){var s=(e.min.y-o.y)*n;n*=e.max.y-o.y}else s=(e.max.y-o.y)*n,n*=e.min.y-o.y;if(a>n||s>r)return null;if(s>a||a!==a)a=s;if(n<r||r!==r)r=n;0<=i?(s=(e.min.z-o.z)*i,e=(e.max.z-o.z)*i):(s=(e.max.z-o.z)*i,e=(e.min.z-o.z)*i);if(a>e||s>r)return null;if(s>a||a!==a)a=s;if(e<r||r!==r)r=e;return 0>r?null:this.at(0<=a?a:r,t)},intersectsBox:function(e){return null!==this.intersectBox(e,ja)},intersectTriangle:function(e,t,r,n,i){Na.subVectors(t,e);Ia.subVectors(r,e);Da.crossVectors(Na,Ia);t=this.direction.dot(Da);if(0<t){if(n)return null;n=1}else if(0>t)n=-1,t=-t;else return null;La.subVectors(this.origin,e);e=n*this.direction.dot(Ia.crossVectors(La,Ia));if(0>e)return null;r=n*this.direction.dot(Na.cross(La));if(0>r||e+r>t)return null;e=-n*La.dot(Da);return 0>e?null:this.at(e/t,i)},applyMatrix4:function(e){this.origin.applyMatrix4(e);this.direction.transformDirection(e);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Ba=new Te,Fa=new Te,za=new m;Object.assign(g.prototype,{isPlane:!0,set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,r,n){this.normal.set(e,t,r);this.constant=n;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(e,t,r){t=Ba.subVectors(r,t).cross(Fa.subVectors(e,t)).normalize();this.setFromNormalAndCoplanarPoint(t,e);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Te);return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Te);var r=e.delta(Ba),n=this.normal.dot(r);if(0===n){if(0===this.distanceToPoint(e.start))return t.copy(e.start)}else if(n=-(e.start.dot(this.normal)+this.constant)/n,!(0>n||1<n))return t.copy(r).multiplyScalar(n).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start);e=this.distanceToPoint(e.end);return 0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Te);return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){t=t||za.getNormalMatrix(e);e=this.coplanarPoint(Ba).applyMatrix4(e);t=this.normal.applyMatrix3(t).normalize();this.constant=-e.dot(t);return this},translate:function(e){this.constant-=e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var $a=new Te,Ga=new Te,Va=new Te,Ha=new Te,Ua=new Te,qa=new Te,Wa=new Te,Xa=new Te,Ya=new Te,Ka=new Te;Object.assign(b,{getNormal:function(e,t,r,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Te);n.subVectors(r,t);$a.subVectors(e,t);n.cross($a);e=n.lengthSq();return 0<e?n.multiplyScalar(1/Math.sqrt(e)):n.set(0,0,0)},getBarycoord:function(e,t,r,n,i){$a.subVectors(n,t);Ga.subVectors(r,t);Va.subVectors(e,t);e=$a.dot($a);t=$a.dot(Ga);r=$a.dot(Va);var o=Ga.dot(Ga);n=Ga.dot(Va);var a=e*o-t*t;void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Te);if(0===a)return i.set(-2,-1,-1);a=1/a;o=(o*r-t*n)*a;e=(e*n-t*r)*a;return i.set(1-o-e,e,o)},containsPoint:function(e,t,r,n){b.getBarycoord(e,t,r,n,Ha);return 0<=Ha.x&&0<=Ha.y&&1>=Ha.x+Ha.y},getUV:function(e,t,r,n,i,o,a,s){this.getBarycoord(e,t,r,n,Ha);s.set(0,0);s.addScaledVector(i,Ha.x);s.addScaledVector(o,Ha.y);s.addScaledVector(a,Ha.z);return s},isFrontFacing:function(e,t,r,n){$a.subVectors(r,t);Ga.subVectors(e,t);return 0>$a.cross(Ga).dot(n)?!0:!1}});Object.assign(b.prototype,{set:function(e,t,r){this.a.copy(e);this.b.copy(t);this.c.copy(r);return this},setFromPointsAndIndices:function(e,t,r,n){this.a.copy(e[t]);this.b.copy(e[r]);this.c.copy(e[n]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},getArea:function(){$a.subVectors(this.c,this.b);Ga.subVectors(this.a,this.b);return.5*$a.cross(Ga).length()},getMidpoint:function(e){void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Te);return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return b.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new g);return e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return b.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,r,n,i){return b.getUV(e,this.a,this.b,this.c,t,r,n,i)},containsPoint:function(e){return b.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return b.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Te);var r=this.a,n=this.b,i=this.c;Ua.subVectors(n,r);qa.subVectors(i,r);Xa.subVectors(e,r);var o=Ua.dot(Xa),a=qa.dot(Xa);if(0>=o&&0>=a)return t.copy(r);Ya.subVectors(e,n);var s=Ua.dot(Ya),u=qa.dot(Ya);if(0<=s&&u<=s)return t.copy(n);var c=o*u-s*a;if(0>=c&&0<=o&&0>=s)return n=o/(o-s),t.copy(r).addScaledVector(Ua,n);Ka.subVectors(e,i);e=Ua.dot(Ka);var l=qa.dot(Ka);if(0<=l&&e<=l)return t.copy(i);o=e*a-o*l;if(0>=o&&0<=a&&0>=l)return c=a/(a-l),t.copy(r).addScaledVector(qa,c);a=s*l-e*u;if(0>=a&&0<=u-s&&0<=e-l)return Wa.subVectors(i,n),c=(u-s)/(u-s+(e-l)),t.copy(n).addScaledVector(Wa,c);i=1/(a+o+c);n=o*i;c*=i;return t.copy(r).addScaledVector(Ua,n).addScaledVector(qa,c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Za={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ja={h:0,s:0,l:0},Qa={h:0,s:0,l:0};Object.assign(v.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e);return this},setScalar:function(e){this.b=this.g=this.r=e;return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,r){this.r=e;this.g=t;this.b=r;return this},setHSL:function(e,t,r){e=Vo.euclideanModulo(e,1);t=Vo.clamp(t,0,1);r=Vo.clamp(r,0,1);0===t?this.r=this.g=this.b=r:(t=.5>=r?r*(1+t):r+t-r*t,r=2*r-t,this.r=u(r,t,e+1/3),this.g=u(r,t,e),this.b=u(r,t,e-1/3));return this},setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n=r[2];switch(r[1]){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(r[1])/360;var i=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100;e(r[5]);return this.setHSL(n,i,o)}}}else if(r=/^#([A-Fa-f0-9]+)$/.exec(t)){r=r[1];n=r.length;if(3===n)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(e){var t=Za[e];void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e);return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e,t){void 0===t&&(t=2);this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);t=0<t?1/t:1;this.r=Math.pow(e.r,t);this.g=Math.pow(e.g,t);this.b=Math.pow(e.b,t);return this},convertGammaToLinear:function(e){this.copyGammaToLinear(this,e);return this},convertLinearToGamma:function(e){this.copyLinearToGamma(this,e);return this},copySRGBToLinear:function(e){this.r=c(e.r);this.g=c(e.g);this.b=c(e.b);return this},copyLinearToSRGB:function(e){this.r=h(e.r);this.g=h(e.g);this.b=h(e.b);return this},convertSRGBToLinear:function(){this.copySRGBToLinear(this);return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t=this.r,r=this.g,n=this.b,i=Math.max(t,r,n),o=Math.min(t,r,n),a,s=(o+i)/2;if(o===i)o=a=0;else{var u=i-o;o=.5>=s?u/(i+o):u/(2-i-o);switch(i){case t:a=(r-n)/u+(r<n?6:0);break;case r:a=(n-t)/u+2;break;case n:a=(t-r)/u+4}a/=6}e.h=a;e.s=o;e.l=s;return e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){this.getHSL(Ja);Ja.h+=e;Ja.s+=t;Ja.l+=r;this.setHSL(Ja.h,Ja.s,Ja.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},sub:function(e){this.r=Math.max(0,this.r-e.r);this.g=Math.max(0,this.g-e.g);this.b=Math.max(0,this.b-e.b);return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},lerpHSL:function(e,t){this.getHSL(Ja);e.getHSL(Qa);e=Vo.lerp(Ja.h,Qa.h,t);var r=Vo.lerp(Ja.s,Qa.s,t);t=Vo.lerp(Ja.l,Qa.l,t);this.setHSL(e,r,t);return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){void 0===t&&(t=0);this.r=e[t];this.g=e[t+1];this.b=e[t+2];return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);e[t]=this.r;e[t+1]=this.g;e[t+2]=this.b;return e},toJSON:function(){return this.getHex()}});v.NAMES=Za;Object.assign(_.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.normal.copy(e.normal);this.color.copy(e.color);this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();t=0;for(r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var es=0;y.prototype=Object.assign(Object.create(t.prototype),{constructor:y,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0===r)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r?!0:!1;else{var n=this[t];void 0===n?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}}},toJSON:function(e){function t(e){var t=[],r;for(r in e){var n=e[r];delete n.metadata;t.push(n)}return t}var r=void 0===e||"string"===typeof e;r&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid;n.type=this.type;""!==this.name&&(n.name=this.name);this.color&&this.color.isColor&&(n.color=this.color.getHex());void 0!==this.roughness&&(n.roughness=this.roughness);void 0!==this.metalness&&(n.metalness=this.metalness);this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex());this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex());this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex());void 0!==this.shininess&&(n.shininess=this.shininess);void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat);void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness);this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid);this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid);this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray());this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid);this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid);this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid);this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid);this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid);this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid);this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity));this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid);void 0!==this.size&&(n.size=this.size);void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(n.blending=this.blending);!0===this.flatShading&&(n.flatShading=this.flatShading);0!==this.side&&(n.side=this.side);this.vertexColors&&(n.vertexColors=!0);1>this.opacity&&(n.opacity=this.opacity);!0===this.transparent&&(n.transparent=this.transparent);n.depthFunc=this.depthFunc;n.depthTest=this.depthTest;n.depthWrite=this.depthWrite;n.stencilWrite=this.stencilWrite;n.stencilWriteMask=this.stencilWriteMask;n.stencilFunc=this.stencilFunc;n.stencilRef=this.stencilRef;n.stencilFuncMask=this.stencilFuncMask;n.stencilFail=this.stencilFail;n.stencilZFail=this.stencilZFail;n.stencilZPass=this.stencilZPass;this.rotation&&0!==this.rotation&&(n.rotation=this.rotation);!0===this.polygonOffset&&(n.polygonOffset=!0);0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits);this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth);void 0!==this.dashSize&&(n.dashSize=this.dashSize);void 0!==this.gapSize&&(n.gapSize=this.gapSize);void 0!==this.scale&&(n.scale=this.scale);!0===this.dithering&&(n.dithering=!0);0<this.alphaTest&&(n.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(n.wireframe=this.wireframe);1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(n.morphTargets=!0);!0===this.morphNormals&&(n.morphNormals=!0);!0===this.skinning&&(n.skinning=!0);!1===this.visible&&(n.visible=!1);!1===this.toneMapped&&(n.toneMapped=!1);"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData);r&&(r=t(e.textures),e=t(e.images),0<r.length&&(n.textures=r),0<e.length&&(n.images=e));return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name;this.fog=e.fog;this.blending=e.blending;this.side=e.side;this.flatShading=e.flatShading;this.vertexColors=e.vertexColors;this.opacity=e.opacity;this.transparent=e.transparent;this.blendSrc=e.blendSrc;this.blendDst=e.blendDst;this.blendEquation=e.blendEquation;this.blendSrcAlpha=e.blendSrcAlpha;this.blendDstAlpha=e.blendDstAlpha;this.blendEquationAlpha=e.blendEquationAlpha;this.depthFunc=e.depthFunc;this.depthTest=e.depthTest;this.depthWrite=e.depthWrite;this.stencilWriteMask=e.stencilWriteMask;this.stencilFunc=e.stencilFunc;this.stencilRef=e.stencilRef;this.stencilFuncMask=e.stencilFuncMask;this.stencilFail=e.stencilFail;this.stencilZFail=e.stencilZFail;this.stencilZPass=e.stencilZPass;this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}this.clippingPlanes=r;this.clipIntersection=e.clipIntersection;this.clipShadows=e.clipShadows;this.shadowSide=e.shadowSide;this.colorWrite=e.colorWrite;this.precision=e.precision;this.polygonOffset=e.polygonOffset;this.polygonOffsetFactor=e.polygonOffsetFactor;this.polygonOffsetUnits=e.polygonOffsetUnits;this.dithering=e.dithering;this.alphaTest=e.alphaTest;this.premultipliedAlpha=e.premultipliedAlpha;this.visible=e.visible;this.toneMapped=e.toneMapped;this.userData=JSON.parse(JSON.stringify(e.userData));return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(y.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});x.prototype=Object.create(y.prototype);x.prototype.constructor=x;x.prototype.isMeshBasicMaterial=!0;x.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;return this};var ts=new Te;Object.defineProperty(E.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});Object.assign(E.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){this.usage=e;return this},copy:function(e){this.name=e.name;this.array=new e.array.constructor(e.array);this.itemSize=e.itemSize;this.count=e.count;this.normalized=e.normalized;this.usage=e.usage;return this},copyAt:function(e,t,r){e*=this.itemSize;r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){this.array.set(e);return this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new v);t[r++]=o.r;t[r++]=o.g;t[r++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Me);t[r++]=o.x;t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new Te);t[r++]=o.x;t[r++]=o.y;t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Ce);t[r++]=o.x;t[r++]=o.y;t[r++]=o.z;t[r++]=o.w}return this},applyMatrix3:function(e){for(var t=0,r=this.count;t<r;t++)ts.x=this.getX(t),ts.y=this.getY(t),ts.z=this.getZ(t),ts.applyMatrix3(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this},applyMatrix4:function(e){for(var t=0,r=this.count;t<r;t++)ts.x=this.getX(t),ts.y=this.getY(t),ts.z=this.getZ(t),ts.applyMatrix4(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this},applyNormalMatrix:function(e){for(var t=0,r=this.count;t<r;t++)ts.x=this.getX(t),ts.y=this.getY(t),ts.z=this.getZ(t),ts.applyNormalMatrix(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this},transformDirection:function(e){for(var t=0,r=this.count;t<r;t++)ts.x=this.getX(t),ts.y=this.getY(t),ts.z=this.getZ(t),ts.transformDirection(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this},set:function(e,t){void 0===t&&(t=0);this.array.set(e,t);return this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){this.array[e*this.itemSize]=t;return this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){this.array[e*this.itemSize+3]=t;return this},setXY:function(e,t,r){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;return this},setXYZ:function(e,t,r,n){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;this.array[e+2]=n;return this},setXYZW:function(e,t,r,n,i){e*=this.itemSize;this.array[e+0]=t;this.array[e+1]=r;this.array[e+2]=n;this.array[e+3]=i;return this},onUpload:function(e){this.onUploadCallback=e;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});w.prototype=Object.create(E.prototype);w.prototype.constructor=w;S.prototype=Object.create(E.prototype);S.prototype.constructor=S;M.prototype=Object.create(E.prototype);M.prototype.constructor=M;C.prototype=Object.create(E.prototype);C.prototype.constructor=C;O.prototype=Object.create(E.prototype);O.prototype.constructor=O;P.prototype=Object.create(E.prototype);P.prototype.constructor=P;A.prototype=Object.create(E.prototype);A.prototype.constructor=A;j.prototype=Object.create(E.prototype);j.prototype.constructor=j;R.prototype=Object.create(E.prototype);R.prototype.constructor=R;Object.assign(k.prototype,{computeGroups:function(e){var t=[],r=void 0;e=e.faces;for(var n=0;n<e.length;n++){var i=e[n];if(i.materialIndex!==r){r=i.materialIndex;void 0!==o&&(o.count=3*n-o.start,t.push(o));var o={start:3*n,materialIndex:r}}}void 0!==o&&(o.count=3*n-o.start,t.push(o));this.groups=t},fromGeometry:function(e){var t=e.faces,r=e.vertices,n=e.faceVertexUvs,i=n[0]&&0<n[0].length,o=n[1]&&0<n[1].length,a=e.morphTargets,s=a.length;if(0<s){var u=[];for(var c=0;c<s;c++)u[c]={name:a[c].name,data:[]};this.morphTargets.position=u}var l=e.morphNormals,h=l.length;if(0<h){var p=[];for(c=0;c<h;c++)p[c]={name:l[c].name,data:[]};this.morphTargets.normal=p}var f=e.skinIndices,d=e.skinWeights,v=f.length===r.length,m=d.length===r.length;0<r.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<t.length;c++){var g=t[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var _=g.vertexNormals;3===_.length?this.normals.push(_[0],_[1],_[2]):(_=g.normal,this.normals.push(_,_,_));_=g.vertexColors;3===_.length?this.colors.push(_[0],_[1],_[2]):(_=g.color,this.colors.push(_,_,_));!0===i&&(_=n[0][c],void 0!==_?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Me,new Me,new Me)));!0===o&&(_=n[1][c],void 0!==_?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Me,new Me,new Me)));for(_=0;_<s;_++){var y=a[_].vertices;u[_].data.push(y[g.a],y[g.b],y[g.c])}for(_=0;_<h;_++)y=l[_].vertexNormals[c],p[_].data.push(y.a,y.b,y.c);v&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]);m&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}this.computeGroups(e);this.verticesNeedUpdate=e.verticesNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());return this}});var rs=1,ns=new Ee,is=new f,os=new Te,as=new n,ss=new n,us=new Te;N.prototype=Object.assign(Object.create(t.prototype),{constructor:N,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<L(e)?A:O)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){this.attributes[e]=t;return this},deleteAttribute:function(e){delete this.attributes[e];return this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e;this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);t=this.attributes.normal;if(void 0!==t){var r=(new m).getNormalMatrix(e);t.applyNormalMatrix(r);t.needsUpdate=!0}t=this.attributes.tangent;void 0!==t&&(t.transformDirection(e),t.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(e){ns.makeRotationX(e);this.applyMatrix4(ns);return this},rotateY:function(e){ns.makeRotationY(e);this.applyMatrix4(ns);return this},rotateZ:function(e){ns.makeRotationZ(e);this.applyMatrix4(ns);return this},translate:function(e,t,r){ns.makeTranslation(e,t,r);this.applyMatrix4(ns);return this},scale:function(e,t,r){ns.makeScale(e,t,r);this.applyMatrix4(ns);return this},lookAt:function(e){is.lookAt(e);is.updateMatrix();this.applyMatrix4(is.matrix);return this},center:function(){this.computeBoundingBox();this.boundingBox.getCenter(os).negate();this.translate(os.x,os.y,os.z);return this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new j(3*t.vertices.length,3);var r=new j(3*t.colors.length,3);this.setAttribute("position",e.copyVector3sArray(t.vertices));this.setAttribute("color",r.copyColorsArray(t.colors));t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new j(t.lineDistances.length,1),this.setAttribute("lineDistance",e.copyArray(t.lineDistances)));null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new j(t,3));return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;!0===t.elementsNeedUpdate&&(r=void 0,t.elementsNeedUpdate=!1);if(void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate;r.normalsNeedUpdate=t.normalsNeedUpdate;r.colorsNeedUpdate=t.colorsNeedUpdate;r.uvsNeedUpdate=t.uvsNeedUpdate;r.groupsNeedUpdate=t.groupsNeedUpdate;t.verticesNeedUpdate=!1;t.normalsNeedUpdate=!1;t.colorsNeedUpdate=!1;t.uvsNeedUpdate=!1;t.groupsNeedUpdate=!1;t=r}!0===t.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1);!0===t.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1);!0===t.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1);t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1);t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1);t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1);return this},fromGeometry:function(e){e.__directGeometry=(new k).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);this.setAttribute("position",new E(t,3).copyVector3sArray(e.vertices));0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.setAttribute("normal",new E(t,3).copyVector3sArray(e.normals)));0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.setAttribute("color",new E(t,3).copyColorsArray(e.colors)));0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new E(t,2).copyVector2sArray(e.uvs)));0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new E(t,2).copyVector2sArray(e.uvs2)));this.groups=e.groups;for(var r in e.morphTargets){t=[];for(var n=e.morphTargets[r],i=0,o=n.length;i<o;i++){var a=n[i],s=new j(3*a.data.length,3);s.name=a.name;t.push(s.copyVector3sArray(a.data))}this.morphAttributes[r]=t}0<e.skinIndices.length&&(r=new j(4*e.skinIndices.length,4),this.setAttribute("skinIndex",r.copyVector4sArray(e.skinIndices)));0<e.skinWeights.length&&(r=new j(4*e.skinWeights.length,4),this.setAttribute("skinWeight",r.copyVector4sArray(e.skinWeights)));null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t){e=0;for(var r=t.length;e<r;e++)as.setFromBufferAttribute(t[e]),this.morphTargetsRelative?(us.addVectors(this.boundingBox.min,as.min),this.boundingBox.expandByPoint(us),us.addVectors(this.boundingBox.max,as.max),this.boundingBox.expandByPoint(us)):(this.boundingBox.expandByPoint(as.min),this.boundingBox.expandByPoint(as.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new l);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var r=this.boundingSphere.center;as.setFromBufferAttribute(e);if(t)for(var n=0,i=t.length;n<i;n++){var o=t[n];ss.setFromBufferAttribute(o);this.morphTargetsRelative?(us.addVectors(as.min,ss.min),as.expandByPoint(us),us.addVectors(as.max,ss.max),as.expandByPoint(us)):(as.expandByPoint(ss.min),as.expandByPoint(ss.max))}as.getCenter(r);var a=0;n=0;for(i=e.count;n<i;n++)us.fromBufferAttribute(e,n),a=Math.max(a,r.distanceToSquared(us));if(t)for(n=0,i=t.length;n<i;n++){o=t[n];for(var s=this.morphTargetsRelative,u=0,c=o.count;u<c;u++)us.fromBufferAttribute(o,u),s&&(os.fromBufferAttribute(e,u),us.add(os)),a=Math.max(a,r.distanceToSquared(us))}this.boundingSphere.radius=Math.sqrt(a);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new E(new Float32Array(r.length),3));else for(var n=t.normal.array,i=0,o=n.length;i<o;i++)n[i]=0;n=t.normal.array;var a=new Te,s=new Te,u=new Te,c=new Te,l=new Te;if(e){var h=e.array;i=0;for(o=e.count;i<o;i+=3){e=3*h[i+0];var p=3*h[i+1];var f=3*h[i+2];a.fromArray(r,e);s.fromArray(r,p);u.fromArray(r,f);c.subVectors(u,s);l.subVectors(a,s);c.cross(l);n[e]+=c.x;n[e+1]+=c.y;n[e+2]+=c.z;n[p]+=c.x;n[p+1]+=c.y;n[p+2]+=c.z;n[f]+=c.x;n[f+1]+=c.y;n[f+2]+=c.z}}else for(i=0,o=r.length;i<o;i+=9)a.fromArray(r,i),s.fromArray(r,i+3),u.fromArray(r,i+6),c.subVectors(u,s),l.subVectors(a,s),c.cross(l),n[i]=c.x,n[i+1]=c.y,n[i+2]=c.z,n[i+3]=c.x,n[i+4]=c.y,n[i+5]=c.z,n[i+6]=c.x,n[i+7]=c.y,n[i+8]=c.z;this.normalizeNormals();t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes,n;for(n in r)if(void 0!==e.attributes[n]){var i=r[n].array,o=e.attributes[n],a=o.array,s=o.itemSize*t;o=Math.min(a.length,i.length-s);for(var u=0;u<o;u++,s++)i[s]=a[u]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,r=e.count;t<r;t++)us.x=e.getX(t),us.y=e.getY(t),us.z=e.getZ(t),us.normalize(),e.setXYZ(t,us.x,us.y,us.z)},toNonIndexed:function(){function e(e,t){var r=e.array,n=e.itemSize;e=e.normalized;for(var i=new r.constructor(t.length*n),o,a=0,s=0,u=t.length;s<u;s++){o=t[s]*n;for(var c=0;c<n;c++)i[a++]=r[o++]}return new E(i,n,e)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new N,r=this.index.array,n=this.attributes,i;for(i in n){var o=n[i];o=e(o,r);t.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){var s=[],u=a[i];n=0;for(var c=u.length;n<c;n++)o=u[n],o=e(o,r),s.push(o);t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;r=this.groups;n=0;for(i=r.length;n<i;n++)o=r[n],t.addGroup(o.start,o.count,o.materialIndex);return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);0<Object.keys(this.userData).length&&(e.userData=this.userData);if(void 0!==this.parameters){var t=this.parameters;for(c in t)void 0!==t[c]&&(e[c]=t[c]);return e}e.data={attributes:{}};t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});var r=this.attributes;for(c in r){t=r[c];var n=t.toJSON();""!==t.name&&(n.name=t.name);e.data.attributes[c]=n}r={};var i=!1;for(c in this.morphAttributes){for(var o=this.morphAttributes[c],a=[],s=0,u=o.length;s<u;s++)t=o[s],n=t.toJSON(),""!==t.name&&(n.name=t.name),a.push(n);0<a.length&&(r[c]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);var c=this.groups;0<c.length&&(e.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return e},clone:function(){return(new N).copy(this)},copy:function(e){var t;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());r=e.attributes;for(a in r)this.setAttribute(a,r[a].clone());var n=e.morphAttributes;for(a in n){var i=[],o=n[a];r=0;for(t=o.length;r<t;r++)i.push(o[r].clone());this.morphAttributes[a]=i}this.morphTargetsRelative=e.morphTargetsRelative;var a=e.groups;r=0;for(t=a.length;r<t;r++)n=a[r],this.addGroup(n.start,n.count,n.materialIndex);a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());a=e.boundingSphere;null!==a&&(this.boundingSphere=a.clone());this.drawRange.start=e.drawRange.start;this.drawRange.count=e.drawRange.count;this.userData=e.userData;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cs=new Ee,ls=new s,hs=new l,ps=new Te,fs=new Te,ds=new Te,vs=new Te,ms=new Te,gs=new Te,_s=new Te,ys=new Te,bs=new Te,xs=new Me,ws=new Me,Ss=new Me,Ms=new Te,Cs=new Te;I.prototype=Object.assign(Object.create(f.prototype),{constructor:I,isMesh:!0,copy:function(e){f.prototype.copy.call(this,e);void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice());void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary));return this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var r=e[t[0]];if(void 0!==r)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=r.length;e<t;e++){var n=r[e].name||String(e);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=e}}}else e=e.morphTargets,void 0!==e&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(e,t){var r=this.geometry,n=this.material,i=this.matrixWorld;if(void 0!==n&&(null===r.boundingSphere&&r.computeBoundingSphere(),hs.copy(r.boundingSphere),hs.applyMatrix4(i),!1!==e.ray.intersectsSphere(hs)&&(cs.getInverse(i),ls.copy(e.ray).applyMatrix4(cs),null===r.boundingBox||!1!==ls.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index;i=r.attributes.position;var a=r.morphAttributes.position,s=r.morphTargetsRelative,u=r.attributes.uv,c=r.attributes.uv2,l=r.groups,h=r.drawRange,p,f;if(null!==o)if(Array.isArray(n)){var d=0;for(p=l.length;d<p;d++){var v=l[d];var m=n[v.materialIndex];var g=Math.max(v.start,h.start);for(f=r=Math.min(v.start+v.count,h.start+h.count);g<f;g+=3){r=o.getX(g);var _=o.getX(g+1);var y=o.getX(g+2);if(r=B(this,m,e,ls,i,a,s,u,c,r,_,y))r.faceIndex=Math.floor(g/3),r.face.materialIndex=v.materialIndex,t.push(r)}}}else for(g=Math.max(0,h.start),r=Math.min(o.count,h.start+h.count),d=g,p=r;d<p;d+=3){if(r=o.getX(d),_=o.getX(d+1),y=o.getX(d+2),r=B(this,n,e,ls,i,a,s,u,c,r,_,y))r.faceIndex=Math.floor(d/3),t.push(r)}else if(void 0!==i)if(Array.isArray(n))for(d=0,p=l.length;d<p;d++)for(v=l[d],m=n[v.materialIndex],g=Math.max(v.start,h.start),f=r=Math.min(v.start+v.count,h.start+h.count);g<f;g+=3){if(r=g,_=g+1,y=g+2,r=B(this,m,e,ls,i,a,s,u,c,r,_,y))r.faceIndex=Math.floor(g/3),r.face.materialIndex=v.materialIndex,t.push(r)}else for(g=Math.max(0,h.start),r=Math.min(i.count,h.start+h.count),d=g,p=r;d<p;d+=3)if(r=d,_=d+1,y=d+2,r=B(this,n,e,ls,i,a,s,u,c,r,_,y))r.faceIndex=Math.floor(d/3),t.push(r)}else if(r.isGeometry)for(i=Array.isArray(n),a=r.vertices,s=r.faces,r=r.faceVertexUvs[0],0<r.length&&(o=r),h=0,d=s.length;h<d;h++)if(p=s[h],r=i?n[p.materialIndex]:n,void 0!==r&&(u=a[p.a],c=a[p.b],l=a[p.c],r=D(this,r,e,ls,u,c,l,Ms)))o&&o[h]&&(v=o[h],xs.copy(v[0]),ws.copy(v[1]),Ss.copy(v[2]),r.uv=b.getUV(Ms,u,c,l,xs,ws,Ss,new Me)),r.face=p,r.faceIndex=h,t.push(r)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ts=0,Es=new Ee,Os=new f,Ps=new Te;F.prototype=Object.assign(Object.create(t.prototype),{constructor:F,isGeometry:!0,applyMatrix4:function(e){for(var t=(new m).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++)this.vertices[r].applyMatrix4(e);r=0;for(n=this.faces.length;r<n;r++){e=this.faces[r];e.normal.applyMatrix3(t).normalize();for(var i=0,o=e.vertexNormals.length;i<o;i++)e.vertexNormals[i].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(e){Es.makeRotationX(e);this.applyMatrix4(Es);return this},rotateY:function(e){Es.makeRotationY(e);this.applyMatrix4(Es);return this},rotateZ:function(e){Es.makeRotationZ(e);this.applyMatrix4(Es);return this},translate:function(e,t,r){Es.makeTranslation(e,t,r);this.applyMatrix4(Es);return this},scale:function(e,t,r){Es.makeScale(e,t,r);this.applyMatrix4(Es);return this},lookAt:function(e){Os.lookAt(e);Os.updateMatrix();this.applyMatrix4(Os.matrix);return this},fromBufferGeometry:function(e){function t(e,t,r,n){var i=void 0===u?[]:[a.colors[e].clone(),a.colors[t].clone(),a.colors[r].clone()],o=void 0===s?[]:[(new Te).fromArray(s,3*e),(new Te).fromArray(s,3*t),(new Te).fromArray(s,3*r)];n=new _(e,t,r,o,i,n);a.faces.push(n);void 0!==c&&a.faceVertexUvs[0].push([(new Me).fromArray(c,2*e),(new Me).fromArray(c,2*t),(new Me).fromArray(c,2*r)]);void 0!==l&&a.faceVertexUvs[1].push([(new Me).fromArray(l,2*e),(new Me).fromArray(l,2*t),(new Me).fromArray(l,2*r)])}var a=this,r=null!==e.index?e.index.array:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position.array,s=void 0!==n.normal?n.normal.array:void 0,u=void 0!==n.color?n.color.array:void 0,c=void 0!==n.uv?n.uv.array:void 0,l=void 0!==n.uv2?n.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(n=0;n<i.length;n+=3)a.vertices.push((new Te).fromArray(i,n)),void 0!==u&&a.colors.push((new v).fromArray(u,n));var o=e.groups;if(0<o.length)for(n=0;n<o.length;n++){i=o[n];var h=i.start,p=h;for(h+=i.count;p<h;p+=3)void 0!==r?t(r[p],r[p+1],r[p+2],i.materialIndex):t(p,p+1,p+2,i.materialIndex)}else if(void 0!==r)for(n=0;n<r.length;n+=3)t(r[n],r[n+1],r[n+2]);else for(n=0;n<i.length/3;n+=3)t(n,n+1,n+2);this.computeFaceNormals();null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();this.boundingBox.getCenter(Ps).negate();this.translate(Ps.x,Ps.y,Ps.z);return this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var r=new Ee;r.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1);this.applyMatrix4(r);return this},computeFaceNormals:function(){for(var e=new Te,t=new Te,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b];e.subVectors(this.vertices[i.c],a);t.subVectors(o,a);e.cross(t);e.normalize();i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t;var r=Array(this.vertices.length);var n=0;for(t=this.vertices.length;n<t;n++)r[n]=new Te;if(e){var i=new Te,o=new Te;e=0;for(n=this.faces.length;e<n;e++){t=this.faces[e];var a=this.vertices[t.a];var s=this.vertices[t.b];var u=this.vertices[t.c];i.subVectors(u,s);o.subVectors(a,s);i.cross(o);r[t.a].add(i);r[t.b].add(i);r[t.c].add(i)}}else for(this.computeFaceNormals(),e=0,n=this.faces.length;e<n;e++)t=this.faces[e],r[t.a].add(t.normal),r[t.b].add(t.normal),r[t.c].add(t.normal);n=0;for(t=this.vertices.length;n<t;n++)r[n].normalize();e=0;for(n=this.faces.length;e<n;e++)t=this.faces[e],a=t.vertexNormals,3===a.length?(a[0].copy(r[t.a]),a[1].copy(r[t.b]),a[2].copy(r[t.c])):(a[0]=r[t.a].clone(),a[1]=r[t.b].clone(),a[2]=r[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var r=this.faces[t];var n=r.vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t;var r=0;for(t=this.faces.length;r<t;r++){var n=this.faces[r];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone();n.__originalVertexNormals||(n.__originalVertexNormals=[]);var i=0;for(e=n.vertexNormals.length;i<e;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var o=new F;o.faces=this.faces;i=0;for(e=this.morphTargets.length;i<e;i++){if(!this.morphNormals[i]){this.morphNormals[i]={};this.morphNormals[i].faceNormals=[];this.morphNormals[i].vertexNormals=[];n=this.morphNormals[i].faceNormals;var a=this.morphNormals[i].vertexNormals;r=0;for(t=this.faces.length;r<t;r++){var s=new Te;var u={a:new Te,b:new Te,c:new Te};n.push(s);a.push(u)}}a=this.morphNormals[i];o.vertices=this.morphTargets[i].vertices;o.computeFaceNormals();o.computeVertexNormals();r=0;for(t=this.faces.length;r<t;r++)n=this.faces[r],s=a.faceNormals[r],u=a.vertexNormals[r],s.copy(n.normal),u.a.copy(n.vertexNormals[0]),u.b.copy(n.vertexNormals[1]),u.c.copy(n.vertexNormals[2])}r=0;for(t=this.faces.length;r<t;r++)n=this.faces[r],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new l);this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,c=this.colors,l=e.colors;void 0===r&&(r=0);void 0!==t&&(n=(new m).getNormalMatrix(t));for(var h=0,p=a.length;h<p;h++){var f=a[h].clone();void 0!==t&&f.applyMatrix4(t);o.push(f)}h=0;for(p=l.length;h<p;h++)c.push(l[h].clone());h=0;for(p=u.length;h<p;h++){a=u[h];var d=a.vertexNormals;l=a.vertexColors;c=new _(a.a+i,a.b+i,a.c+i);c.normal.copy(a.normal);void 0!==n&&c.normal.applyMatrix3(n).normalize();t=0;for(o=d.length;t<o;t++)f=d[t].clone(),void 0!==n&&f.applyMatrix3(n).normalize(),c.vertexNormals.push(f);c.color.copy(a.color);t=0;for(o=l.length;t<o;t++)f=l[t],c.vertexColors.push(f.clone());c.materialIndex=a.materialIndex+r;s.push(c)}h=0;for(p=e.faceVertexUvs.length;h<p;h++)for(r=e.faceVertexUvs[h],void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]),t=0,o=r.length;t<o;t++){n=r[t];i=[];s=0;for(u=n.length;s<u;s++)i.push(n[s].clone());this.faceVertexUvs[h].push(i)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e={},t=[],r=[],n=Math.pow(10,4),i;var o=0;for(i=this.vertices.length;o<i;o++){var a=this.vertices[o];a=Math.round(a.x*n)+"_"+Math.round(a.y*n)+"_"+Math.round(a.z*n);void 0===e[a]?(e[a]=o,t.push(this.vertices[o]),r[o]=t.length-1):r[o]=r[e[a]]}e=[];o=0;for(i=this.faces.length;o<i;o++)for(n=this.faces[o],n.a=r[n.a],n.b=r[n.b],n.c=r[n.c],n=[n.a,n.b,n.c],a=0;3>a;a++)if(n[a]===n[(a+1)%3]){e.push(o);break}for(o=e.length-1;0<=o;o--)for(n=e[o],this.faces.splice(n,1),r=0,i=this.faceVertexUvs.length;r<i;r++)this.faceVertexUvs[r].splice(n,1);o=this.vertices.length-t.length;this.vertices=t;return o},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Te(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n=this.faceVertexUvs[0],i=this.faceVertexUvs[1],o,a;n&&n.length===t&&(o=[]);i&&i.length===t&&(a=[]);for(r=0;r<t;r++){var s=e[r]._id;o&&o.push(n[s]);a&&a.push(i[s])}o&&(this.faceVertexUvs[0]=o);a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function e(e,t,r){return r?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(void 0!==c[t])return c[t];c[t]=u.length/3;u.push(e.x,e.y,e.z);return c[t]}function r(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(void 0!==h[t])return h[t];h[t]=l.length;l.push(e.getHex());return h[t]}function n(e){var t=e.x.toString()+e.y.toString();if(void 0!==f[t])return f[t];f[t]=p.length/2;p.push(e.x,e.y);return f[t]}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};i.uuid=this.uuid;i.type=this.type;""!==this.name&&(i.name=this.name);if(void 0!==this.parameters){var o=this.parameters,a;for(a in o)void 0!==o[a]&&(i[a]=o[a]);return i}o=[];for(a=0;a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}s=[];var u=[],c={},l=[],h={},p=[],f={};for(a=0;a<this.faces.length;a++){var d=this.faces[a],v=void 0!==this.faceVertexUvs[0][a],m=0<d.normal.length(),g=0<d.vertexNormals.length,_=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=0<d.vertexColors.length,b=0;b=e(b,0,0);b=e(b,1,!0);b=e(b,2,!1);b=e(b,3,v);b=e(b,4,m);b=e(b,5,g);b=e(b,6,_);b=e(b,7,y);s.push(b);s.push(d.a,d.b,d.c);s.push(d.materialIndex);v&&(v=this.faceVertexUvs[0][a],s.push(n(v[0]),n(v[1]),n(v[2])));m&&s.push(t(d.normal));g&&(m=d.vertexNormals,s.push(t(m[0]),t(m[1]),t(m[2])));_&&s.push(r(d.color));y&&(d=d.vertexColors,s.push(r(d[0]),r(d[1]),r(d[2])))}i.data={};i.data.vertices=o;i.data.normals=u;0<l.length&&(i.data.colors=l);0<p.length&&(i.data.uvs=[p]);i.data.faces=s;return i},clone:function(){return(new F).copy(this)},copy:function(e){var t,r,n;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=e.name;var i=e.vertices;var o=0;for(t=i.length;o<t;o++)this.vertices.push(i[o].clone());i=e.colors;o=0;for(t=i.length;o<t;o++)this.colors.push(i[o].clone());i=e.faces;o=0;for(t=i.length;o<t;o++)this.faces.push(i[o].clone());o=0;for(t=e.faceVertexUvs.length;o<t;o++){var a=e.faceVertexUvs[o];void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]);i=0;for(r=a.length;i<r;i++){var s=a[i],u=[];var c=0;for(n=s.length;c<n;c++)u.push(s[c].clone());this.faceVertexUvs[o].push(u)}}c=e.morphTargets;o=0;for(t=c.length;o<t;o++){n={};n.name=c[o].name;if(void 0!==c[o].vertices)for(n.vertices=[],i=0,r=c[o].vertices.length;i<r;i++)n.vertices.push(c[o].vertices[i].clone());if(void 0!==c[o].normals)for(n.normals=[],i=0,r=c[o].normals.length;i<r;i++)n.normals.push(c[o].normals[i].clone());this.morphTargets.push(n)}c=e.morphNormals;o=0;for(t=c.length;o<t;o++){n={};if(void 0!==c[o].vertexNormals)for(n.vertexNormals=[],i=0,r=c[o].vertexNormals.length;i<r;i++)a=c[o].vertexNormals[i],s={},s.a=a.a.clone(),s.b=a.b.clone(),s.c=a.c.clone(),n.vertexNormals.push(s);if(void 0!==c[o].faceNormals)for(n.faceNormals=[],i=0,r=c[o].faceNormals.length;i<r;i++)n.faceNormals.push(c[o].faceNormals[i].clone());this.morphNormals.push(n)}i=e.skinWeights;o=0;for(t=i.length;o<t;o++)this.skinWeights.push(i[o].clone());i=e.skinIndices;o=0;for(t=i.length;o<t;o++)this.skinIndices.push(i[o].clone());i=e.lineDistances;o=0;for(t=i.length;o<t;o++)this.lineDistances.push(i[o]);o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());o=e.boundingSphere;null!==o&&(this.boundingSphere=o.clone());this.elementsNeedUpdate=e.elementsNeedUpdate;this.verticesNeedUpdate=e.verticesNeedUpdate;this.uvsNeedUpdate=e.uvsNeedUpdate;this.normalsNeedUpdate=e.normalsNeedUpdate;this.colorsNeedUpdate=e.colorsNeedUpdate;this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate;this.groupsNeedUpdate=e.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var As=function(a){function e(e,t,r,n,i,o){a.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};this.fromBufferGeometry(new js(e,t,r,n,i,o));this.mergeVertices()}a&&(e.__proto__=a);e.prototype=Object.create(a&&a.prototype);return e.prototype.constructor=e}(F),js=function(s){function e(e,t,r,n,i,o){function a(e,t,r,n,i,o,a,s,u,c,l){var h=o/u,p=a/c,f=o/2,d=a/2,v=s/2;a=u+1;for(var m=c+1,g=o=0,_=new Te,y=0;y<m;y++)for(var b=y*p-d,x=0;x<a;x++)_[e]=(x*h-f)*n,_[t]=b*i,_[r]=v,M.push(_.x,_.y,_.z),_[e]=0,_[t]=0,_[r]=0<s?1:-1,C.push(_.x,_.y,_.z),T.push(x/u),T.push(1-y/c),o+=1;for(e=0;e<c;e++)for(t=0;t<u;t++)r=E+t+a*(e+1),n=E+(t+1)+a*(e+1),i=E+(t+1)+a*e,S.push(E+t+a*e,r,i),S.push(r,n,i),g+=6;w.addGroup(O,g,l);O+=g;E+=o}s.call(this);this.type="BoxBufferGeometry";this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};var w=this;e=e||1;t=t||1;r=r||1;n=Math.floor(n)||1;i=Math.floor(i)||1;o=Math.floor(o)||1;var S=[],M=[],C=[],T=[],E=0,O=0;a("z","y","x",-1,-1,r,t,e,o,i,0);a("z","y","x",1,-1,r,t,-e,o,i,1);a("x","z","y",1,1,e,r,t,n,o,2);a("x","z","y",1,-1,e,r,-t,n,o,3);a("x","y","z",1,-1,e,t,r,n,i,4);a("x","y","z",-1,-1,e,t,-r,n,i,5);this.setIndex(S);this.setAttribute("position",new j(M,3));this.setAttribute("normal",new j(C,3));this.setAttribute("uv",new j(T,2))}s&&(e.__proto__=s);e.prototype=Object.create(s&&s.prototype);return e.prototype.constructor=e}(N),Rs={clone:z,merge:$};G.prototype=Object.create(y.prototype);G.prototype.constructor=G;G.prototype.isShaderMaterial=!0;G.prototype.copy=function(e){y.prototype.copy.call(this,e);this.fragmentShader=e.fragmentShader;this.vertexShader=e.vertexShader;this.uniforms=z(e.uniforms);this.defines=Object.assign({},e.defines);this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.lights=e.lights;this.clipping=e.clipping;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.extensions=Object.assign({},e.extensions);return this};G.prototype.toJSON=function(e){var t=y.prototype.toJSON.call(this,e);t.uniforms={};for(var r in this.uniforms){var n=this.uniforms[r].value;t.uniforms[r]=n&&n.isTexture?{type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}0<Object.keys(this.defines).length&&(t.defines=this.defines);t.vertexShader=this.vertexShader;t.fragmentShader=this.fragmentShader;e={};for(var i in this.extensions)!0===this.extensions[i]&&(e[i]=!0);0<Object.keys(e).length&&(t.extensions=e);return t};V.prototype=Object.assign(Object.create(f.prototype),{constructor:V,isCamera:!0,copy:function(e,t){f.prototype.copy.call(this,e,t);this.matrixWorldInverse.copy(e.matrixWorldInverse);this.projectionMatrix.copy(e.projectionMatrix);this.projectionMatrixInverse.copy(e.projectionMatrixInverse);return this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Te);this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){f.prototype.updateMatrixWorld.call(this,e);this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){f.prototype.updateWorldMatrix.call(this,e,t);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});H.prototype=Object.assign(Object.create(V.prototype),{constructor:H,isPerspectiveCamera:!0,copy:function(e,t){V.prototype.copy.call(this,e,t);this.fov=e.fov;this.zoom=e.zoom;this.near=e.near;this.far=e.far;this.focus=e.focus;this.aspect=e.aspect;this.view=null===e.view?null:Object.assign({},e.view);this.filmGauge=e.filmGauge;this.filmOffset=e.filmOffset;return this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e;this.fov=2*Vo.RAD2DEG*Math.atan(e);this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Vo.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Vo.RAD2DEG*Math.atan(Math.tan(.5*Vo.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,o){this.aspect=e/t;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=o;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Vo.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*n/a;t-=o.offsetY*r/s;n*=o.width/a;r*=o.height/s}o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth());this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){e=f.prototype.toJSON.call(this,e);e.object.fov=this.fov;e.object.zoom=this.zoom;e.object.near=this.near;e.object.far=this.far;e.object.focus=this.focus;e.object.aspect=this.aspect;null!==this.view&&(e.object.view=Object.assign({},this.view));e.object.filmGauge=this.filmGauge;e.object.filmOffset=this.filmOffset;return e}});U.prototype=Object.create(f.prototype);U.prototype.constructor=U;q.prototype=Object.create(T.prototype);q.prototype.constructor=q;q.prototype.isWebGLCubeRenderTarget=!0;q.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type;this.texture.format=t.format;this.texture.encoding=t.encoding;var r=new Oe,n=new G({type:"CubemapFromEquirect",uniforms:z({tEquirect:{value:null}}),vertexShader:"varying vec3 vWorldDirection;\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",fragmentShader:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}",side:1,blending:0});n.uniforms.tEquirect.value=t;t=new I(new js(5,5,5),n);r.add(t);new U(1,10,this).update(e,r);t.geometry.dispose();t.material.dispose();return this};Pe.prototype=Object.create(p.prototype);Pe.prototype.constructor=Pe;Pe.prototype.isDataTexture=!0;var ks=new l,Ls=new Te;Object.assign(Ae.prototype,{set:function(e,t,r,n,i,o){var a=this.planes;a[0].copy(e);a[1].copy(t);a[2].copy(r);a[3].copy(n);a[4].copy(i);a[5].copy(o);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;6>r;r++)t[r].copy(e.planes[r]);return this},setFromProjectionMatrix:function(e){var t=this.planes,r=e.elements;e=r[0];var n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],c=r[7],l=r[8],h=r[9],p=r[10],f=r[11],d=r[12],v=r[13],m=r[14];r=r[15];t[0].setComponents(o-e,c-a,f-l,r-d).normalize();t[1].setComponents(o+e,c+a,f+l,r+d).normalize();t[2].setComponents(o+n,c+s,f+h,r+v).normalize();t[3].setComponents(o-n,c-s,f-h,r-v).normalize();t[4].setComponents(o-i,c-u,f-p,r-m).normalize();t[5].setComponents(o+i,c+u,f+p,r+m).normalize();return this},intersectsObject:function(e){var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere();ks.copy(t.boundingSphere).applyMatrix4(e.matrixWorld);return this.intersectsSphere(ks)},intersectsSprite:function(e){ks.center.set(0,0,0);ks.radius=.7071067811865476;ks.applyMatrix4(e.matrixWorld);return this.intersectsSphere(ks)},intersectsSphere:function(e){var t=this.planes,r=e.center;e=-e.radius;for(var n=0;6>n;n++)if(t[n].distanceToPoint(r)<e)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,r=0;6>r;r++){var n=t[r];Ls.x=0<n.normal.x?e.max.x:e.min.x;Ls.y=0<n.normal.y?e.max.y:e.min.y;Ls.z=0<n.normal.z?e.max.z:e.min.z;if(0>n.distanceToPoint(Ls))return!1}return!0},containsPoint:function(e){for(var t=this.planes,r=0;6>r;r++)if(0>t[r].distanceToPoint(e))return!1;return!0}});var Ns={common:{diffuse:{value:new v(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new m},uv2Transform:{value:new m},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new v(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new v(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new m}},sprite:{diffuse:{value:new v(15658734)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new m}}};W.prototype=Object.create(F.prototype);W.prototype.constructor=W;X.prototype=Object.create(N.prototype);X.prototype.constructor=X;var Is={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ds={basic:{uniforms:$([Ns.common,Ns.specularmap,Ns.envmap,Ns.aomap,Ns.lightmap,Ns.fog]),vertexShader:Is.meshbasic_vert,fragmentShader:Is.meshbasic_frag},lambert:{uniforms:$([Ns.common,Ns.specularmap,Ns.envmap,Ns.aomap,Ns.lightmap,Ns.emissivemap,Ns.fog,Ns.lights,{emissive:{value:new v(0)}}]),vertexShader:Is.meshlambert_vert,fragmentShader:Is.meshlambert_frag},phong:{uniforms:$([Ns.common,Ns.specularmap,Ns.envmap,Ns.aomap,Ns.lightmap,Ns.emissivemap,Ns.bumpmap,Ns.normalmap,Ns.displacementmap,Ns.fog,Ns.lights,{emissive:{value:new v(0)},specular:{value:new v(1118481)},shininess:{value:30}}]),vertexShader:Is.meshphong_vert,fragmentShader:Is.meshphong_frag},standard:{uniforms:$([Ns.common,Ns.envmap,Ns.aomap,Ns.lightmap,Ns.emissivemap,Ns.bumpmap,Ns.normalmap,Ns.displacementmap,Ns.roughnessmap,Ns.metalnessmap,Ns.fog,Ns.lights,{emissive:{value:new v(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Is.meshphysical_vert,fragmentShader:Is.meshphysical_frag},toon:{uniforms:$([Ns.common,Ns.specularmap,Ns.aomap,Ns.lightmap,Ns.emissivemap,Ns.bumpmap,Ns.normalmap,Ns.displacementmap,Ns.gradientmap,Ns.fog,Ns.lights,{emissive:{value:new v(0)},specular:{value:new v(1118481)},shininess:{value:30}}]),vertexShader:Is.meshtoon_vert,fragmentShader:Is.meshtoon_frag},matcap:{uniforms:$([Ns.common,Ns.bumpmap,Ns.normalmap,Ns.displacementmap,Ns.fog,{matcap:{value:null}}]),vertexShader:Is.meshmatcap_vert,fragmentShader:Is.meshmatcap_frag},points:{uniforms:$([Ns.points,Ns.fog]),vertexShader:Is.points_vert,fragmentShader:Is.points_frag},dashed:{uniforms:$([Ns.common,Ns.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Is.linedashed_vert,fragmentShader:Is.linedashed_frag},depth:{uniforms:$([Ns.common,Ns.displacementmap]),vertexShader:Is.depth_vert,fragmentShader:Is.depth_frag},normal:{uniforms:$([Ns.common,Ns.bumpmap,Ns.normalmap,Ns.displacementmap,{opacity:{value:1}}]),vertexShader:Is.normal_vert,fragmentShader:Is.normal_frag},sprite:{uniforms:$([Ns.sprite,Ns.fog]),vertexShader:Is.sprite_vert,fragmentShader:Is.sprite_frag},background:{uniforms:{uvTransform:{value:new m},t2D:{value:null}},vertexShader:Is.background_vert,fragmentShader:Is.background_frag},cube:{uniforms:$([Ns.envmap,{opacity:{value:1}}]),vertexShader:Is.cube_vert,fragmentShader:Is.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Is.equirect_vert,fragmentShader:Is.equirect_frag},distanceRGBA:{uniforms:$([Ns.common,Ns.displacementmap,{referencePosition:{value:new Te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Is.distanceRGBA_vert,fragmentShader:Is.distanceRGBA_frag},shadow:{uniforms:$([Ns.lights,Ns.fog,{color:{value:new v(0)},opacity:{value:1}}]),vertexShader:Is.shadow_vert,fragmentShader:Is.shadow_frag}};Ds.physical={uniforms:$([Ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Me(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new v(0)},transparency:{value:0}}]),vertexShader:Is.meshphysical_vert,fragmentShader:Is.meshphysical_frag};K.prototype=Object.create(p.prototype);K.prototype.constructor=K;K.prototype.isCubeTexture=!0;Object.defineProperty(K.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});Z.prototype=Object.create(p.prototype);Z.prototype.constructor=Z;Z.prototype.isDataTexture2DArray=!0;J.prototype=Object.create(p.prototype);J.prototype.constructor=J;J.prototype.isDataTexture3D=!0;var Bs=new p,Fs=new Z,zs=new J,$s=new K,Gs=[],Vs=[],Hs=new Float32Array(16),Us=new Float32Array(9),qs=new Float32Array(4);et.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length));te(t,e)};tt.prototype.setValue=function(e,t,r){for(var n=this.seq,i=0,o=n.length;i!==o;++i){var a=n[i];a.setValue(e,t[a.id],r)}};var Ws=/([\w\d_]+)(\])?(\[|\.)?/g;rt.prototype.setValue=function(e,t,r,n){t=this.map[t];void 0!==t&&t.setValue(e,r,n)};rt.prototype.setOptional=function(e,t,r){t=t[r];void 0!==t&&this.setValue(e,r,t)};rt.upload=function(e,t,r,n){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}};rt.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var o=e[n];o.id in t&&r.push(o)}return r};var Xs=0,Ys=/^[ \t]*#include +<([\w\d./]+)>/gm,Ks=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Zs=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,Js=0;Lt.prototype=Object.create(y.prototype);Lt.prototype.constructor=Lt;Lt.prototype.isMeshDepthMaterial=!0;Lt.prototype.copy=function(e){y.prototype.copy.call(this,e);this.depthPacking=e.depthPacking;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;return this};Nt.prototype=Object.create(y.prototype);Nt.prototype.constructor=Nt;Nt.prototype.isMeshDistanceMaterial=!0;Nt.prototype.copy=function(e){y.prototype.copy.call(this,e);this.referencePosition.copy(e.referencePosition);this.nearDistance=e.nearDistance;this.farDistance=e.farDistance;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.map=e.map;this.alphaMap=e.alphaMap;this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;return this};zt.prototype=Object.assign(Object.create(H.prototype),{constructor:zt,isArrayCamera:!0});$t.prototype=Object.assign(Object.create(f.prototype),{constructor:$t,isGroup:!0});Object.assign(Gt.prototype,{constructor:Gt,getTargetRaySpace:function(){null===this._targetRay&&(this._targetRay=new $t,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1);return this._targetRay},getGripSpace:function(){null===this._grip&&(this._grip=new $t,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1);return this._grip},dispatchEvent:function(e){null!==this._targetRay&&this._targetRay.dispatchEvent(e);null!==this._grip&&this._grip.dispatchEvent(e);return this},disconnect:function(e){this.dispatchEvent({type:"disconnected",data:e});null!==this._targetRay&&(this._targetRay.visible=!1);null!==this._grip&&(this._grip.visible=!1);return this},update:function(e,t,r){var n=null,i=null,o=this._targetRay,a=this._grip;e&&(null!==o&&(n=t.getPose(e.targetRaySpace,r),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))));null!==o&&(o.visible=null!==n);null!==a&&(a.visible=null!==i);return this}});Object.assign(Vt.prototype,t.prototype);Object.assign(qt.prototype,{isFogExp2:!0,clone:function(){return new qt(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});Object.assign(Wt.prototype,{isFog:!0,clone:function(){return new Wt(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});Object.defineProperty(Xt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});Object.assign(Xt.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){this.usage=e;return this},copy:function(e){this.array=new e.array.constructor(e.array);this.count=e.count;this.stride=e.stride;this.usage=e.usage;return this},copyAt:function(e,t,r){e*=this.stride;r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){void 0===t&&(t=0);this.array.set(e,t);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){this.onUploadCallback=e;return this}});var Qs=new Te;Object.defineProperties(Yt.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(Yt.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,r=this.data.count;t<r;t++)Qs.x=this.getX(t),Qs.y=this.getY(t),Qs.z=this.getZ(t),Qs.applyMatrix4(e),this.setXYZ(t,Qs.x,Qs.y,Qs.z);return this},setX:function(e,t){this.data.array[e*this.data.stride+this.offset]=t;return this},setY:function(e,t){this.data.array[e*this.data.stride+this.offset+1]=t;return this},setZ:function(e,t){this.data.array[e*this.data.stride+this.offset+2]=t;return this},setW:function(e,t){this.data.array[e*this.data.stride+this.offset+3]=t;return this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;return this},setXYZ:function(e,t,r,n){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;this.data.array[e+2]=n;return this},setXYZW:function(e,t,r,n,i){e=e*this.data.stride+this.offset;this.data.array[e+0]=t;this.data.array[e+1]=r;this.data.array[e+2]=n;this.data.array[e+3]=i;return this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],t=0;t<this.count;t++)for(var r=t*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return new E(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],t=0;t<this.count;t++)for(var r=t*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}});Kt.prototype=Object.create(y.prototype);Kt.prototype.constructor=Kt;Kt.prototype.isSpriteMaterial=!0;Kt.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.alphaMap=e.alphaMap;this.rotation=e.rotation;this.sizeAttenuation=e.sizeAttenuation;return this};var eu,tu=new Te,ru=new Te,nu=new Te,iu=new Me,ou=new Me,au=new Ee,su=new Te,uu=new Te,cu=new Te,lu=new Me,hu=new Me,pu=new Me;Zt.prototype=Object.assign(Object.create(f.prototype),{constructor:Zt,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');ru.setFromMatrixScale(this.matrixWorld);au.copy(e.camera.matrixWorld);this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld);nu.setFromMatrixPosition(this.modelViewMatrix);e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ru.multiplyScalar(-nu.z);var r=this.material.rotation;if(0!==r){var n=Math.cos(r);var i=Math.sin(r)}r=this.center;Jt(su.set(-.5,-.5,0),nu,r,ru,i,n);Jt(uu.set(.5,-.5,0),nu,r,ru,i,n);Jt(cu.set(.5,.5,0),nu,r,ru,i,n);lu.set(0,0);hu.set(1,0);pu.set(1,1);var o=e.ray.intersectTriangle(su,uu,cu,!1,tu);if(null===o&&(Jt(uu.set(-.5,.5,0),nu,r,ru,i,n),hu.set(0,1),o=e.ray.intersectTriangle(su,cu,uu,!1,tu),null===o))return;i=e.ray.origin.distanceTo(tu);i<e.near||i>e.far||t.push({distance:i,point:tu.clone(),uv:b.getUV(tu,su,uu,cu,lu,hu,pu,new Me),face:null,object:this})},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){f.prototype.copy.call(this,e);void 0!==e.center&&this.center.copy(e.center);return this}});var fu=new Te,du=new Te;Qt.prototype=Object.assign(Object.create(f.prototype),{constructor:Qt,isLOD:!0,copy:function(e){f.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}this.autoUpdate=e.autoUpdate;return this},addLevel:function(e,t){void 0===t&&(t=0);t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e});this.add(e);return this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(0<t.length){for(var r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object}return null},raycast:function(e,t){if(0<this.levels.length){fu.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(fu);this.getObjectForDistance(r).raycast(e,t)}},update:function(e){var t=this.levels;if(1<t.length){fu.setFromMatrixPosition(e.matrixWorld);du.setFromMatrixPosition(this.matrixWorld);e=fu.distanceTo(du)/e.zoom;t[0].object.visible=!0;for(var r=1,n=t.length;r<n;r++)if(e>=t[r].distance)t[r-1].object.visible=!1,t[r].object.visible=!0;else break;for(this._currentLevel=r-1;r<n;r++)t[r].object.visible=!1}},toJSON:function(e){e=f.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(e.object.autoUpdate=!1);e.object.levels=[];for(var t=this.levels,r=0,n=t.length;r<n;r++){var i=t[r];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}});er.prototype=Object.assign(Object.create(I.prototype),{constructor:er,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e;void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld);this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Ce,t=this.geometry.attributes.skinWeight,r=0,n=t.count;r<n;r++){e.x=t.getX(r);e.y=t.getY(r);e.z=t.getZ(r);e.w=t.getW(r);var i=1/e.manhattanLength();Infinity!==i?e.multiplyScalar(i):e.set(1,0,0,0);t.setXYZW(r,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){I.prototype.updateMatrixWorld.call(this,e);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var o=new Te,a=new Ce,s=new Ce,u=new Te,c=new Ee;return function(e,t){var r=this.skeleton,n=this.geometry;a.fromBufferAttribute(n.attributes.skinIndex,e);s.fromBufferAttribute(n.attributes.skinWeight,e);o.fromBufferAttribute(n.attributes.position,e).applyMatrix4(this.bindMatrix);t.set(0,0,0);for(e=0;4>e;e++)if(n=s.getComponent(e),0!==n){var i=a.getComponent(e);c.multiplyMatrices(r.bones[i].matrixWorld,r.boneInverses[i]);t.addScaledVector(u.copy(o).applyMatrix4(c),n)}return t.applyMatrix4(this.bindMatrixInverse)}}()});var vu=new Ee,mu=new Ee;Object.assign(tr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Ee;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld);this.boneInverses.push(r)}},pose:function(){var e,t;var r=0;for(t=this.bones.length;r<t;r++)(e=this.bones[r])&&e.matrixWorld.getInverse(this.boneInverses[r]);r=0;for(t=this.bones.length;r<t;r++)if(e=this.bones[r])e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale)},update:function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,i=0,o=e.length;i<o;i++)vu.multiplyMatrices(e[i]?e[i].matrixWorld:mu,t[i]),vu.toArray(r,16*i);void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new tr(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});rr.prototype=Object.assign(Object.create(f.prototype),{constructor:rr,isBone:!0});var gu=new Ee,_u=new Ee,yu=[],bu=new I;nr.prototype=Object.assign(Object.create(I.prototype),{constructor:nr,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var r=this.matrixWorld,n=this.count;bu.geometry=this.geometry;bu.material=this.material;if(void 0!==bu.material)for(var i=0;i<n;i++){this.getMatrixAt(i,gu);_u.multiplyMatrices(r,gu);bu.matrixWorld=_u;bu.raycast(e,yu);for(var o=0,a=yu.length;o<a;o++){var s=yu[o];s.instanceId=i;s.object=this;t.push(s)}yu.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}});ir.prototype=Object.create(y.prototype);ir.prototype.constructor=ir;ir.prototype.isLineBasicMaterial=!0;ir.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.linewidth=e.linewidth;this.linecap=e.linecap;this.linejoin=e.linejoin;this.morphTargets=e.morphTargets;return this};var xu=new Te,wu=new Te,Su=new Ee,Mu=new s,Cu=new l;or.prototype=Object.assign(Object.create(f.prototype),{constructor:or,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[0],n=1,i=t.count;n<i;n++)xu.fromBufferAttribute(t,n-1),wu.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=xu.distanceTo(wu);e.setAttribute("lineDistance",new j(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,r=e.lineDistances,r[0]=0,n=1,i=t.length;n<i;n++)r[n]=r[n-1],r[n]+=t[n-1].distanceTo(t[n]);return this},raycast:function(e,t){var r=this.geometry,n=this.matrixWorld,i=e.params.Line.threshold;null===r.boundingSphere&&r.computeBoundingSphere();Cu.copy(r.boundingSphere);Cu.applyMatrix4(n);Cu.radius+=i;if(!1!==e.ray.intersectsSphere(Cu)){Su.getInverse(n);Mu.copy(e.ray).applyMatrix4(Su);n=i/((this.scale.x+this.scale.y+this.scale.z)/3);n*=n;var o=new Te,a=new Te;i=new Te;var s=new Te,u=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var c=r.index,l=r.attributes.position.array;if(null!==c){c=c.array;r=0;for(var h=c.length-1;r<h;r+=u){var p=c[r+1];o.fromArray(l,3*c[r]);a.fromArray(l,3*p);p=Mu.distanceSqToSegment(o,a,s,i);p>n||(s.applyMatrix4(this.matrixWorld),p=e.ray.origin.distanceTo(s),p<e.near||p>e.far||t.push({distance:p,point:i.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}}else for(r=0,h=l.length/3-1;r<h;r+=u)o.fromArray(l,3*r),a.fromArray(l,3*r+3),p=Mu.distanceSqToSegment(o,a,s,i),p>n||(s.applyMatrix4(this.matrixWorld),p=e.ray.origin.distanceTo(s),p<e.near||p>e.far||t.push({distance:p,point:i.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}else if(r.isGeometry)for(o=r.vertices,a=o.length,r=0;r<a-1;r+=u)p=Mu.distanceSqToSegment(o[r],o[r+1],s,i),p>n||(s.applyMatrix4(this.matrixWorld),p=e.ray.origin.distanceTo(s),p<e.near||p>e.far||t.push({distance:p,point:i.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var r=e[t[0]];if(void 0!==r)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=r.length;e<t;e++){var n=r[e].name||String(e);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=e}}}else e=e.morphTargets,void 0!==e&&0<e.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Tu=new Te,Eu=new Te;ar.prototype=Object.assign(Object.create(or.prototype),{constructor:ar,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[],n=0,i=t.count;n<i;n+=2)Tu.fromBufferAttribute(t,n),Eu.fromBufferAttribute(t,n+1),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+Tu.distanceTo(Eu);e.setAttribute("lineDistance",new j(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,r=e.lineDistances,n=0,i=t.length;n<i;n+=2)Tu.copy(t[n]),Eu.copy(t[n+1]),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+Tu.distanceTo(Eu);return this}});sr.prototype=Object.assign(Object.create(or.prototype),{constructor:sr,isLineLoop:!0});ur.prototype=Object.create(y.prototype);ur.prototype.constructor=ur;ur.prototype.isPointsMaterial=!0;ur.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.alphaMap=e.alphaMap;this.size=e.size;this.sizeAttenuation=e.sizeAttenuation;this.morphTargets=e.morphTargets;return this};var Ou=new Ee,Pu=new s,Au=new l,ju=new Te;cr.prototype=Object.assign(Object.create(f.prototype),{constructor:cr,isPoints:!0,raycast:function(e,t){var r=this.geometry,n=this.matrixWorld,i=e.params.Points.threshold;null===r.boundingSphere&&r.computeBoundingSphere();Au.copy(r.boundingSphere);Au.applyMatrix4(n);Au.radius+=i;if(!1!==e.ray.intersectsSphere(Au))if(Ou.getInverse(n),Pu.copy(e.ray).applyMatrix4(Ou),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i,r.isBufferGeometry){var o=r.index;r=r.attributes.position.array;if(null!==o){var a=o.array;o=0;for(var s=a.length;o<s;o++){var u=a[o];ju.fromArray(r,3*u);lr(ju,u,i,n,e,t,this)}}else for(o=0,a=r.length/3;o<a;o++)ju.fromArray(r,3*o),lr(ju,o,i,n,e,t,this)}else for(r=r.vertices,o=0,a=r.length;o<a;o++)lr(r[o],o,i,n,e,t,this)},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var r=e[t[0]];if(void 0!==r)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=r.length;e<t;e++){var n=r[e].name||String(e);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=e}}}else e=e.morphTargets,void 0!==e&&0<e.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});hr.prototype=Object.assign(Object.create(p.prototype),{constructor:hr,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});pr.prototype=Object.create(p.prototype);pr.prototype.constructor=pr;pr.prototype.isCompressedTexture=!0;fr.prototype=Object.create(p.prototype);fr.prototype.constructor=fr;fr.prototype.isCanvasTexture=!0;dr.prototype=Object.create(p.prototype);dr.prototype.constructor=dr;dr.prototype.isDepthTexture=!0;vr.prototype=Object.create(N.prototype);vr.prototype.constructor=vr;mr.prototype=Object.create(F.prototype);mr.prototype.constructor=mr;gr.prototype=Object.create(N.prototype);gr.prototype.constructor=gr;_r.prototype=Object.create(F.prototype);_r.prototype.constructor=_r;yr.prototype=Object.create(N.prototype);yr.prototype.constructor=yr;br.prototype=Object.create(F.prototype);br.prototype.constructor=br;xr.prototype=Object.create(yr.prototype);xr.prototype.constructor=xr;wr.prototype=Object.create(F.prototype);wr.prototype.constructor=wr;Sr.prototype=Object.create(yr.prototype);Sr.prototype.constructor=Sr;Mr.prototype=Object.create(F.prototype);Mr.prototype.constructor=Mr;Cr.prototype=Object.create(yr.prototype);Cr.prototype.constructor=Cr;Tr.prototype=Object.create(F.prototype);Tr.prototype.constructor=Tr;Er.prototype=Object.create(yr.prototype);Er.prototype.constructor=Er;Or.prototype=Object.create(F.prototype);Or.prototype.constructor=Or;Pr.prototype=Object.create(N.prototype);Pr.prototype.constructor=Pr;Pr.prototype.toJSON=function(){var e=N.prototype.toJSON.call(this);e.path=this.parameters.path.toJSON();return e};Ar.prototype=Object.create(F.prototype);Ar.prototype.constructor=Ar;jr.prototype=Object.create(N.prototype);jr.prototype.constructor=jr;Rr.prototype=Object.create(F.prototype);Rr.prototype.constructor=Rr;kr.prototype=Object.create(N.prototype);kr.prototype.constructor=kr;var Ru={triangulate:function(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=Lr(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s;if(n){var u=r;n=[];var c;var l=0;for(c=t.length;l<c;l++){var h=t[l]*u;var p=l<c-1?t[l+1]*u:e.length;h=Lr(e,h,p,u,!1);h===h.next&&(h.steiner=!0);n.push($r(h))}n.sort(Br);for(l=0;l<n.length;l++){u=n[l];t=o;if(t=Fr(u,t))u=Yr(t,u),Nr(t,t.next),Nr(u,u.next);o=Nr(o,o.next)}}if(e.length>80*r){var f=s=e[0];var d=n=e[1];for(u=r;u<i;u+=r)l=e[u],t=e[u+1],l<f&&(f=l),t<d&&(d=t),l>s&&(s=l),t>n&&(n=t);s=Math.max(s-f,n-d);s=0!==s?1/s:0}Ir(o,a,r,f,d,s);return a}},ku={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return 0>ku.area(e)},triangulateShape:function(e,t){var r=[],n=[],i=[];Qr(e);en(r,e);var o=e.length;t.forEach(Qr);for(e=0;e<t.length;e++)n.push(o),o+=t[e].length,en(r,t[e]);t=Ru.triangulate(r,n);for(e=0;e<t.length;e+=3)i.push(t.slice(e,e+3));return i}};tn.prototype=Object.create(F.prototype);tn.prototype.constructor=tn;tn.prototype.toJSON=function(){var e=F.prototype.toJSON.call(this);return nn(this.parameters.shapes,this.parameters.options,e)};rn.prototype=Object.create(N.prototype);rn.prototype.constructor=rn;rn.prototype.toJSON=function(){var e=N.prototype.toJSON.call(this);return nn(this.parameters.shapes,this.parameters.options,e)};var Lu={generateTopUV:function(e,t,r,n,i){e=t[3*n];n=t[3*n+1];var o=t[3*i];i=t[3*i+1];return[new Me(t[3*r],t[3*r+1]),new Me(e,n),new Me(o,i)]},generateSideWallUV:function(e,t,r,n,i,o){e=t[3*r];var a=t[3*r+1];r=t[3*r+2];var s=t[3*n],u=t[3*n+1];n=t[3*n+2];var c=t[3*i],l=t[3*i+1];i=t[3*i+2];var h=t[3*o],p=t[3*o+1];t=t[3*o+2];return.01>Math.abs(a-u)?[new Me(e,1-r),new Me(s,1-n),new Me(c,1-i),new Me(h,1-t)]:[new Me(a,1-r),new Me(u,1-n),new Me(l,1-i),new Me(p,1-t)]}};on.prototype=Object.create(F.prototype);on.prototype.constructor=on;an.prototype=Object.create(rn.prototype);an.prototype.constructor=an;sn.prototype=Object.create(F.prototype);sn.prototype.constructor=sn;un.prototype=Object.create(N.prototype);un.prototype.constructor=un;cn.prototype=Object.create(F.prototype);cn.prototype.constructor=cn;ln.prototype=Object.create(N.prototype);ln.prototype.constructor=ln;hn.prototype=Object.create(F.prototype);hn.prototype.constructor=hn;pn.prototype=Object.create(N.prototype);pn.prototype.constructor=pn;fn.prototype=Object.create(F.prototype);fn.prototype.constructor=fn;fn.prototype.toJSON=function(){var e=F.prototype.toJSON.call(this);return vn(this.parameters.shapes,e)};dn.prototype=Object.create(N.prototype);dn.prototype.constructor=dn;dn.prototype.toJSON=function(){var e=N.prototype.toJSON.call(this);return vn(this.parameters.shapes,e)};mn.prototype=Object.create(N.prototype);mn.prototype.constructor=mn;gn.prototype=Object.create(F.prototype);gn.prototype.constructor=gn;_n.prototype=Object.create(N.prototype);_n.prototype.constructor=_n;yn.prototype=Object.create(gn.prototype);yn.prototype.constructor=yn;bn.prototype=Object.create(_n.prototype);bn.prototype.constructor=bn;xn.prototype=Object.create(F.prototype);xn.prototype.constructor=xn;wn.prototype=Object.create(N.prototype);wn.prototype.constructor=wn;var Nu=Object.freeze({__proto__:null,WireframeGeometry:vr,ParametricGeometry:mr,ParametricBufferGeometry:gr,TetrahedronGeometry:br,TetrahedronBufferGeometry:xr,OctahedronGeometry:wr,OctahedronBufferGeometry:Sr,IcosahedronGeometry:Mr,IcosahedronBufferGeometry:Cr,DodecahedronGeometry:Tr,DodecahedronBufferGeometry:Er,PolyhedronGeometry:_r,PolyhedronBufferGeometry:yr,TubeGeometry:Or,TubeBufferGeometry:Pr,TorusKnotGeometry:Ar,TorusKnotBufferGeometry:jr,TorusGeometry:Rr,TorusBufferGeometry:kr,TextGeometry:on,TextBufferGeometry:an,SphereGeometry:sn,SphereBufferGeometry:un,RingGeometry:cn,RingBufferGeometry:ln,PlaneGeometry:W,PlaneBufferGeometry:X,LatheGeometry:hn,LatheBufferGeometry:pn,ShapeGeometry:fn,ShapeBufferGeometry:dn,ExtrudeGeometry:tn,ExtrudeBufferGeometry:rn,EdgesGeometry:mn,ConeGeometry:yn,ConeBufferGeometry:bn,CylinderGeometry:gn,CylinderBufferGeometry:_n,CircleGeometry:xn,CircleBufferGeometry:wn,BoxGeometry:As,BoxBufferGeometry:js});Sn.prototype=Object.create(y.prototype);Sn.prototype.constructor=Sn;Sn.prototype.isShadowMaterial=!0;Sn.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);return this};Mn.prototype=Object.create(G.prototype);Mn.prototype.constructor=Mn;Mn.prototype.isRawShaderMaterial=!0;Cn.prototype=Object.create(y.prototype);Cn.prototype.constructor=Cn;Cn.prototype.isMeshStandardMaterial=!0;Cn.prototype.copy=function(e){y.prototype.copy.call(this,e);this.defines={STANDARD:""};this.color.copy(e.color);this.roughness=e.roughness;this.metalness=e.metalness;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.roughnessMap=e.roughnessMap;this.metalnessMap=e.metalnessMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.envMapIntensity=e.envMapIntensity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;this.vertexTangents=e.vertexTangents;return this};Tn.prototype=Object.create(Cn.prototype);Tn.prototype.constructor=Tn;Tn.prototype.isMeshPhysicalMaterial=!0;Tn.prototype.copy=function(e){Cn.prototype.copy.call(this,e);this.defines={STANDARD:"",PHYSICAL:""};this.clearcoat=e.clearcoat;this.clearcoatMap=e.clearcoatMap;this.clearcoatRoughness=e.clearcoatRoughness;this.clearcoatRoughnessMap=e.clearcoatRoughnessMap;this.clearcoatNormalMap=e.clearcoatNormalMap;this.clearcoatNormalScale.copy(e.clearcoatNormalScale);this.reflectivity=e.reflectivity;this.sheen=e.sheen?(this.sheen||new v).copy(e.sheen):null;this.transparency=e.transparency;return this};En.prototype=Object.create(y.prototype);En.prototype.constructor=En;En.prototype.isMeshPhongMaterial=!0;En.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};On.prototype=Object.create(y.prototype);On.prototype.constructor=On;On.prototype.isMeshToonMaterial=!0;On.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.specular.copy(e.specular);this.shininess=e.shininess;this.map=e.map;this.gradientMap=e.gradientMap;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};Pn.prototype=Object.create(y.prototype);Pn.prototype.constructor=Pn;Pn.prototype.isMeshNormalMaterial=!0;Pn.prototype.copy=function(e){y.prototype.copy.call(this,e);this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};An.prototype=Object.create(y.prototype);An.prototype.constructor=An;An.prototype.isMeshLambertMaterial=!0;An.prototype.copy=function(e){y.prototype.copy.call(this,e);this.color.copy(e.color);this.map=e.map;this.lightMap=e.lightMap;this.lightMapIntensity=e.lightMapIntensity;this.aoMap=e.aoMap;this.aoMapIntensity=e.aoMapIntensity;this.emissive.copy(e.emissive);this.emissiveMap=e.emissiveMap;this.emissiveIntensity=e.emissiveIntensity;this.specularMap=e.specularMap;this.alphaMap=e.alphaMap;this.envMap=e.envMap;this.combine=e.combine;this.reflectivity=e.reflectivity;this.refractionRatio=e.refractionRatio;this.wireframe=e.wireframe;this.wireframeLinewidth=e.wireframeLinewidth;this.wireframeLinecap=e.wireframeLinecap;this.wireframeLinejoin=e.wireframeLinejoin;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};jn.prototype=Object.create(y.prototype);jn.prototype.constructor=jn;jn.prototype.isMeshMatcapMaterial=!0;jn.prototype.copy=function(e){y.prototype.copy.call(this,e);this.defines={MATCAP:""};this.color.copy(e.color);this.matcap=e.matcap;this.map=e.map;this.bumpMap=e.bumpMap;this.bumpScale=e.bumpScale;this.normalMap=e.normalMap;this.normalMapType=e.normalMapType;this.normalScale.copy(e.normalScale);this.displacementMap=e.displacementMap;this.displacementScale=e.displacementScale;this.displacementBias=e.displacementBias;this.alphaMap=e.alphaMap;this.skinning=e.skinning;this.morphTargets=e.morphTargets;this.morphNormals=e.morphNormals;return this};Rn.prototype=Object.create(ir.prototype);Rn.prototype.constructor=Rn;Rn.prototype.isLineDashedMaterial=!0;Rn.prototype.copy=function(e){ir.prototype.copy.call(this,e);this.scale=e.scale;this.dashSize=e.dashSize;this.gapSize=e.gapSize;return this};var Iu=Object.freeze({__proto__:null,ShadowMaterial:Sn,SpriteMaterial:Kt,RawShaderMaterial:Mn,ShaderMaterial:G,PointsMaterial:ur,MeshPhysicalMaterial:Tn,MeshStandardMaterial:Cn,MeshPhongMaterial:En,MeshToonMaterial:On,MeshNormalMaterial:Pn,MeshLambertMaterial:An,MeshDepthMaterial:Lt,MeshDistanceMaterial:Nt,MeshBasicMaterial:x,MeshMatcapMaterial:jn,LineDashedMaterial:Rn,LineBasicMaterial:ir,Material:y}),Du={arraySlice:function(e,t,r){return Du.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(r){for(var e=r.length,t=Array(e),n=0;n!==e;++n)t[n]=n;t.sort(function(e,t){return r[e]-r[t]});return t},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=r[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,r,n){for(var i=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[i++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a)){do{a=o[n],void 0!==a&&(t.push(o.time),r.push.apply(r,a)),o=e[i++]}while(void 0!==o)}else if(void 0!==a.toArray){do{a=o[n],void 0!==a&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++]}while(void 0!==o)}else{do{a=o[n],void 0!==a&&(t.push(o.time),r.push(a)),o=e[i++]}while(void 0!==o)}}},subclip:function(e,t,r,n,i){i=i||30;e=e.clone();e.name=t;var o=[];for(t=0;t<e.tracks.length;++t){for(var a=e.tracks[t],s=a.getValueSize(),u=[],c=[],l=0;l<a.times.length;++l){var h=a.times[l]*i;if(!(h<r||h>=n))for(u.push(a.times[l]),h=0;h<s;++h)c.push(a.values[l*s+h])}0!==u.length&&(a.times=Du.convertArray(u,a.times.constructor),a.values=Du.convertArray(c,a.values.constructor),o.push(a))}e.tracks=o;r=Infinity;for(t=0;t<e.tracks.length;++t)r>e.tracks[t].times[0]&&(r=e.tracks[t].times[0]);for(t=0;t<e.tracks.length;++t)e.tracks[t].shift(-1*r);e.resetDuration();return e},makeClipAdditive:function(e,t,r,n){void 0===t&&(t=0);void 0===r&&(r=e);if(void 0===n||0>=n)n=30;var i=e.tracks.length;t/=n;for(n=0;n<i;++n){var o=r.tracks[n],a=o.ValueTypeName;if("bool"!==a&&"string"!==a){var s=e.tracks.find(function(e){return e.name===o.name&&e.ValueTypeName===a});if(void 0!==s){var u=o.getValueSize(),c=o.times.length-1;t<=o.times[0]?c=Du.arraySlice(o.values,0,o.valueSize):t>=o.times[c]?c=Du.arraySlice(o.values,c*u):(c=o.createInterpolant(),c.evaluate(t),c=c.resultBuffer);"quaternion"===a&&new d(c[0],c[1],c[2],c[3]).normalize().conjugate().toArray(c);for(var l=s.times.length,h=0;h<l;++h){var p=h*u;if("quaternion"===a)d.multiplyQuaternionsFlat(s.values,p,c,0,s.values,p);else for(var f=0;f<u;++f)s.values[p+f]-=c[f]}}}}e.blendMode=2501;return e}};Object.assign(kn.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{r:{n:if(!(e<n)){for(var o=r+2;;){if(void 0===n){if(e<i)break n;this._cachedIndex=r=t.length;return this.afterEnd_(r-1,e,i)}if(r===o)break;i=n;n=t[++r];if(e<n)break t}n=t.length;break r}if(e>=i)break e;else{o=t[1];e<o&&(r=2,i=o);for(o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===o)break;n=i;i=t[--r-1];if(e>=i)break t}n=r;r=0}}for(;r<n;)i=r+n>>>1,e<t[i]?n=i:r=i+1;n=t[r];i=t[r-1];if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return this._cachedIndex=r=t.length,this.afterEnd_(r-1,i,e)}this._cachedIndex=r;this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize;e*=n;for(var i=0;i!==n;++i)t[i]=r[e+i];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(kn.prototype,{beforeStart_:kn.prototype.copySampleValue_,afterEnd_:kn.prototype.copySampleValue_});Ln.prototype=Object.assign(Object.create(kn.prototype),{constructor:Ln,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e;a=2*t-r;break;case 2402:i=n.length-2;a=t+n[i]-n[i+1];break;default:i=e,a=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e;s=2*r-t;break;case 2402:o=1;s=r+n[1]-n[0];break;default:o=e-1,s=t}e=.5*(r-t);n=this.valueSize;this._weightPrev=e/(t-a);this._weightNext=e/(s-r);this._offsetPrev=i*n;this._offsetNext=o*n},interpolate_:function(e,t,r,n){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a,u=this._offsetPrev,c=this._offsetNext,l=this._weightPrev,h=this._weightNext,p=(r-t)/(n-t);r=p*p;n=r*p;t=-l*n+2*l*r-l*p;l=(1+l)*n+(-1.5-2*l)*r+(-.5+l)*p+1;p=(-1-h)*n+(1.5+h)*r+.5*p;h=h*n-h*r;for(r=0;r!==a;++r)i[r]=t*o[u+r]+l*o[s+r]+p*o[e+r]+h*o[c+r];return i}});Nn.prototype=Object.assign(Object.create(kn.prototype),{constructor:Nn,interpolate_:function(e,t,r,n){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a;t=(r-t)/(n-t);r=1-t;for(n=0;n!==a;++n)i[n]=o[s+n]*r+o[e+n]*t;return i}});In.prototype=Object.assign(Object.create(kn.prototype),{constructor:In,interpolate_:function(e){return this.copySampleValue_(e-1)}});Object.assign(Dn,{toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Du.convertArray(e.times,Array),values:Du.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}t.type=e.ValueTypeName;return t}});Object.assign(Dn.prototype,{constructor:Dn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new In(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Nn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ln(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t);console.warn("THREE.KeyframeTrack:",t);return this}this.createInterpolant=t;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<e;)++i;for(;-1!==o&&r[o]>t;)--o;++o;if(0!==i||o!==n)i>=o&&(o=Math.max(o,1),i=o-1),e=this.getValueSize(),this.times=Du.arraySlice(r,i,o),this.values=Du.arraySlice(this.values,i*e,o*e);return this},validate:function(){var e=!0,t=this.getValueSize();0!==t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times;t=this.values;var n=r.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==n;o++){var a=r[o];if("number"===typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a);e=!1;break}if(null!==i&&i>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,i);e=!1;break}i=a}if(void 0!==t&&Du.isTypedArray(t))for(o=0,r=t.length;o!==r;++o)if(n=t[o],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,n);e=!1;break}return e},optimize:function(){for(var e=Du.arraySlice(this.times),t=Du.arraySlice(this.values),r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(n)s=!0;else{var c=a*r,l=c-r,h=c+r;for(u=0;u!==r;++u){var p=t[c+u];if(p!==t[l+u]||p!==t[h+u]){s=!0;break}}}if(s){if(a!==i)for(e[i]=e[a],s=a*r,c=i*r,u=0;u!==r;++u)t[c+u]=t[s+u];++i}}if(0<o){e[i]=e[o];s=o*r;c=i*r;for(u=0;u!==r;++u)t[c+u]=t[s+u];++i}i!==e.length?(this.times=Du.arraySlice(e,0,i),this.values=Du.arraySlice(t,0,i*r)):(this.times=e,this.values=t);return this},clone:function(){var e=Du.arraySlice(this.times,0),t=Du.arraySlice(this.values,0);e=new this.constructor(this.name,e,t);e.createInterpolant=this.createInterpolant;return e}});Bn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Bn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Fn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Fn,ValueTypeName:"color"});zn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:zn,ValueTypeName:"number"});$n.prototype=Object.assign(Object.create(kn.prototype),{constructor:$n,interpolate_:function(e,t,r,n){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;t=(r-t)/(n-t);for(r=e+a;e!==r;e+=4)d.slerpFlat(i,0,o,e-a,o,e,t);return i}});Gn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Gn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new $n(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});Vn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Vn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Hn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Hn,ValueTypeName:"vector"});Object.assign(Un,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,o=r.length;i!==o;++i)t.push(Wn(r[i]).scale(n));return new Un(e.name,e.duration,t,e.blendMode)},toJSON:function(e){var t=[],r=e.tracks;e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(var n=0,i=r.length;n!==i;++n)t.push(Dn.toJSON(r[n]));return e},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i);u.push(0,1,0);var c=Du.getKeyframeOrder(s);s=Du.sortedArray(s,1,c);u=Du.sortedArray(u,1,c);n||0!==s[0]||(s.push(i),u.push(u[0]));o.push(new zn(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/r))}return new Un(e,-1,o)},findByName:function(e,t){var r=e;Array.isArray(e)||(r=e.geometry&&e.geometry.animations||e.animations);for(e=0;e<r.length;e++)if(r[e].name===t)return r[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&1<u.length){var c=u[1];(u=n[c])||(n[c]=u=[]);u.push(s)}}e=[];for(c in n)e.push(Un.CreateFromMorphTargetSequence(c,n[c],t,r));return e},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var r=function(e,t,r,n,i){if(0!==r.length){var o=[],a=[];Du.flattenJSON(r,o,a,n);0!==o.length&&i.push(new e(t,o,a))}},n=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.blendMode;e=e.hierarchy||[];for(var u=0;u<e.length;u++){var c=e[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){o={};for(var l=0;l<c.length;l++)if(c[l].morphTargets)for(var h=0;h<c[l].morphTargets.length;h++)o[c[l].morphTargets[h]]=-1;for(var p in o){var f=[],d=[];for(h=0;h!==c[l].morphTargets.length;++h){var v=c[l];f.push(v.time);d.push(v.morphTarget===p?1:0)}n.push(new zn(".morphTargetInfluence["+p+"]",f,d))}o=o.length*(a||1)}else l=".bones["+t[u].name+"]",r(Hn,l+".position",c,"pos",n),r(Gn,l+".quaternion",c,"rot",n),r(Hn,l+".scale",c,"scl",n)}return 0===n.length?null:new Un(i,o,n,s)}});Object.assign(Un.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}this.duration=e;return this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Un(this.name,this.duration,e,this.blendMode)}});var Bu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Fu=new Xn;Object.assign(Yn.prototype,{load:function(){},loadAsync:function(r,n){var i=this;return new Promise(function(e,t){i.load(r,e,n,t)})},parse:function(){},setCrossOrigin:function(e){this.crossOrigin=e;return this},setPath:function(e){this.path=e;return this},setResourcePath:function(e){this.resourcePath=e;return this},setRequestHeader:function(e){this.requestHeader=e;return this}});var zu={};Kn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Kn,load:function(a,e,t,r){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var s=this,n=Bu.get(a);if(void 0!==n)return s.manager.itemStart(a),setTimeout(function(){e&&e(n);s.manager.itemEnd(a)},0),n;if(void 0!==zu[a])zu[a].push({onLoad:e,onProgress:t,onError:r});else{var i=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(i){t=i[1];var o=!!i[2];i=i[3];i=decodeURIComponent(i);o&&(i=atob(i));try{var u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":var c=new Uint8Array(i.length);for(o=0;o<i.length;o++)c[o]=i.charCodeAt(o);var l="blob"===u?new Blob([c.buffer],{type:t}):c.buffer;break;case"document":l=(new DOMParser).parseFromString(i,t);break;case"json":l=JSON.parse(i);break;default:l=i}setTimeout(function(){e&&e(l);s.manager.itemEnd(a)},0)}catch(e){setTimeout(function(){r&&r(e);s.manager.itemError(a);s.manager.itemEnd(a)},0)}}else{zu[a]=[];zu[a].push({onLoad:e,onProgress:t,onError:r});var h=new XMLHttpRequest;h.open("GET",a,!0);h.addEventListener("load",function(e){var t=this.response,r=zu[a];delete zu[a];if(200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");Bu.add(a,t);for(var n=0,i=r.length;n<i;n++){var o=r[n];if(o.onLoad)o.onLoad(t)}}else{n=0;for(i=r.length;n<i;n++)if(o=r[n],o.onError)o.onError(e);s.manager.itemError(a)}s.manager.itemEnd(a)},!1);h.addEventListener("progress",function(e){for(var t=zu[a],r=0,n=t.length;r<n;r++){var i=t[r];if(i.onProgress)i.onProgress(e)}},!1);h.addEventListener("error",function(e){var t=zu[a];delete zu[a];for(var r=0,n=t.length;r<n;r++){var i=t[r];if(i.onError)i.onError(e)}s.manager.itemError(a);s.manager.itemEnd(a)},!1);h.addEventListener("abort",function(e){var t=zu[a];delete zu[a];for(var r=0,n=t.length;r<n;r++){var i=t[r];if(i.onError)i.onError(e)}s.manager.itemError(a);s.manager.itemEnd(a)},!1);void 0!==this.responseType&&(h.responseType=this.responseType);void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials);h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(o in this.requestHeader)h.setRequestHeader(o,this.requestHeader[o]);h.send(null)}s.manager.itemStart(a);return h}},setResponseType:function(e){this.responseType=e;return this},setWithCredentials:function(e){this.withCredentials=e;return this},setMimeType:function(e){this.mimeType=e;return this}});Zn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Zn,load:function(t,r,e,n){var i=this,o=new Kn(i.manager);o.setPath(i.path);o.load(t,function(e){try{r(i.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),i.manager.itemError(t)}},e,n)},parse:function(e){for(var t=[],r=0;r<e.length;r++){var n=Un.parse(e[r]);t.push(n)}return t}});Jn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Jn,load:function(e,i,r,n){function t(t){u.load(e[t],function(e){e=o.parse(e,!0);a[t]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps};c+=1;6===c&&(1===e.mipmapCount&&(s.minFilter=1006),s.format=e.format,s.needsUpdate=!0,i&&i(s))},r,n)}var o=this,a=[],s=new pr;s.image=a;var u=new Kn(this.manager);u.setPath(this.path);u.setResponseType("arraybuffer");if(Array.isArray(e))for(var c=0,l=0,h=e.length;l<h;++l)t(l);else u.load(e,function(e){e=o.parse(e,!0);if(e.isCubemap)for(var t=e.mipmaps.length/e.mipmapCount,r=0;r<t;r++){a[r]={mipmaps:[]};for(var n=0;n<e.mipmapCount;n++)a[r].mipmaps.push(e.mipmaps[r*e.mipmapCount+n]),a[r].format=e.format,a[r].width=e.width,a[r].height=e.height}else s.image.width=e.width,s.image.height=e.height,s.mipmaps=e.mipmaps;1===e.mipmapCount&&(s.minFilter=1006);s.format=e.format;s.needsUpdate=!0;i&&i(s)},r,n);return s}});Qn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Qn,load:function(e,t,r,n){var i=this,o=new Pe,a=new Kn(this.manager);a.setResponseType("arraybuffer");a.setPath(this.path);a.load(e,function(e){if(e=i.parse(e))void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:1001,o.wrapT=void 0!==e.wrapT?e.wrapT:1001,o.magFilter=void 0!==e.magFilter?e.magFilter:1006,o.minFilter=void 0!==e.minFilter?e.minFilter:1006,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps,o.minFilter=1008),1===e.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,e)},r,n);return o}});ei.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ei,load:function(t,e,r,n){function i(){u.removeEventListener("load",i,!1);u.removeEventListener("error",o,!1);Bu.add(t,this);e&&e(this);a.manager.itemEnd(t)}function o(e){u.removeEventListener("load",i,!1);u.removeEventListener("error",o,!1);n&&n(e);a.manager.itemError(t);a.manager.itemEnd(t)}void 0!==this.path&&(t=this.path+t);t=this.manager.resolveURL(t);var a=this,s=Bu.get(t);if(void 0!==s)return a.manager.itemStart(t),setTimeout(function(){e&&e(s);a.manager.itemEnd(t)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");u.addEventListener("load",i,!1);u.addEventListener("error",o,!1);"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin);a.manager.itemStart(t);u.src=t;return u}});ti.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ti,load:function(e,r,t,n){function i(t){a.load(e[t],function(e){o.images[t]=e;s++;6===s&&(o.needsUpdate=!0,r&&r(o))},void 0,n)}var o=new K,a=new ei(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var s=0;for(t=0;t<e.length;++t)i(t);return o}});ri.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ri,load:function(t,r,e,n){var i=new p,o=new ei(this.manager);o.setCrossOrigin(this.crossOrigin);o.setPath(this.path);o.load(t,function(e){i.image=e;e=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/);i.format=e?1022:1023;i.needsUpdate=!0;void 0!==r&&r(i)},e,n);return i}});Object.assign(ni.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(e,t){e=this.getUtoTmapping(e);return this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){void 0===e&&(e=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],r=this.getPoint(0),n,i=0;t.push(0);for(n=1;n<=e;n++){var o=this.getPoint(n/e);i+=o.distanceTo(r);t.push(i);r=o}return this.cacheArcLengths=t},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(e,t){var r=this.getLengths(),n=r.length;t=t?t:e*r[n-1];for(var i=0,o=n-1,a;i<=o;)if(e=Math.floor(i+(o-i)/2),a=r[e]-t,0>a)i=e+1;else if(0<a)o=e-1;else{o=e;break}e=o;if(r[e]===t)return e/(n-1);i=r[e];return(e+(t-i)/(r[e+1]-i))/(n-1)},getTangent:function(e,t){var r=e-1e-4;e+=1e-4;0>r&&(r=0);1<e&&(e=1);r=this.getPoint(r);e=this.getPoint(e);t=t||(r.isVector2?new Me:new Te);t.copy(e).sub(r).normalize();return t},getTangentAt:function(e,t){e=this.getUtoTmapping(e);return this.getTangent(e,t)},computeFrenetFrames:function(e,t){var r=new Te,n=[],i=[],o=[],a=new Te,s=new Ee,u;for(u=0;u<=e;u++){var c=u/e;n[u]=this.getTangentAt(c,new Te);n[u].normalize()}i[0]=new Te;o[0]=new Te;u=Number.MAX_VALUE;c=Math.abs(n[0].x);var l=Math.abs(n[0].y),h=Math.abs(n[0].z);c<=u&&(u=c,r.set(1,0,0));l<=u&&(u=l,r.set(0,1,0));h<=u&&r.set(0,0,1);a.crossVectors(n[0],r).normalize();i[0].crossVectors(n[0],a);o[0].crossVectors(n[0],i[0]);for(u=1;u<=e;u++)i[u]=i[u-1].clone(),o[u]=o[u-1].clone(),a.crossVectors(n[u-1],n[u]),a.length()>Number.EPSILON&&(a.normalize(),r=Math.acos(Vo.clamp(n[u-1].dot(n[u]),-1,1)),i[u].applyMatrix4(s.makeRotationAxis(a,r))),o[u].crossVectors(n[u],i[u]);if(!0===t)for(r=Math.acos(Vo.clamp(i[0].dot(i[e]),-1,1)),r/=e,0<n[0].dot(a.crossVectors(i[0],i[e]))&&(r=-r),u=1;u<=e;u++)i[u].applyMatrix4(s.makeRotationAxis(n[u],r*u)),o[u].crossVectors(n[u],i[u]);return{tangents:n,normals:i,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};e.arcLengthDivisions=this.arcLengthDivisions;e.type=this.type;return e},fromJSON:function(e){this.arcLengthDivisions=e.arcLengthDivisions;return this}});ii.prototype=Object.create(ni.prototype);ii.prototype.constructor=ii;ii.prototype.isEllipseCurve=!0;ii.prototype.getPoint=function(e,t){t=t||new Me;for(var r=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<Number.EPSILON;0>n;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(n=i?0:r);!0!==this.aClockwise||i||(n=n===r?-r:n-r);r=this.aStartAngle+e*n;e=this.aX+this.xRadius*Math.cos(r);var o=this.aY+this.yRadius*Math.sin(r);0!==this.aRotation&&(r=Math.cos(this.aRotation),n=Math.sin(this.aRotation),i=e-this.aX,o-=this.aY,e=i*r-o*n+this.aX,o=i*n+o*r+this.aY);return t.set(e,o)};ii.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};ii.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.aX=this.aX;e.aY=this.aY;e.xRadius=this.xRadius;e.yRadius=this.yRadius;e.aStartAngle=this.aStartAngle;e.aEndAngle=this.aEndAngle;e.aClockwise=this.aClockwise;e.aRotation=this.aRotation;return e};ii.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.aX=e.aX;this.aY=e.aY;this.xRadius=e.xRadius;this.yRadius=e.yRadius;this.aStartAngle=e.aStartAngle;this.aEndAngle=e.aEndAngle;this.aClockwise=e.aClockwise;this.aRotation=e.aRotation;return this};oi.prototype=Object.create(ii.prototype);oi.prototype.constructor=oi;oi.prototype.isArcCurve=!0;var $u=new Te,Gu=new ai,Vu=new ai,Hu=new ai;si.prototype=Object.create(ni.prototype);si.prototype.constructor=si;si.prototype.isCatmullRomCurve3=!0;si.prototype.getPoint=function(e,t){t=t||new Te;var r=this.points,n=r.length;e*=n-(this.closed?0:1);var i=Math.floor(e);e-=i;this.closed?i+=0<i?0:(Math.floor(Math.abs(i)/n)+1)*n:0===e&&i===n-1&&(i=n-2,e=1);if(this.closed||0<i)var o=r[(i-1)%n];else $u.subVectors(r[0],r[1]).add(r[0]),o=$u;var a=r[i%n];var s=r[(i+1)%n];this.closed||i+2<n?r=r[(i+2)%n]:($u.subVectors(r[n-1],r[n-2]).add(r[n-1]),r=$u);if("centripetal"===this.curveType||"chordal"===this.curveType){var u="chordal"===this.curveType?.5:.25;n=Math.pow(o.distanceToSquared(a),u);i=Math.pow(a.distanceToSquared(s),u);u=Math.pow(s.distanceToSquared(r),u);1e-4>i&&(i=1);1e-4>n&&(n=i);1e-4>u&&(u=i);Gu.initNonuniformCatmullRom(o.x,a.x,s.x,r.x,n,i,u);Vu.initNonuniformCatmullRom(o.y,a.y,s.y,r.y,n,i,u);Hu.initNonuniformCatmullRom(o.z,a.z,s.z,r.z,n,i,u)}else"catmullrom"===this.curveType&&(Gu.initCatmullRom(o.x,a.x,s.x,r.x,this.tension),Vu.initCatmullRom(o.y,a.y,s.y,r.y,this.tension),Hu.initCatmullRom(o.z,a.z,s.z,r.z,this.tension));t.set(Gu.calc(e),Vu.calc(e),Hu.calc(e));return t};si.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};si.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());e.closed=this.closed;e.curveType=this.curveType;e.tension=this.tension;return e};si.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Te).fromArray(n))}this.closed=e.closed;this.curveType=e.curveType;this.tension=e.tension;return this};hi.prototype=Object.create(ni.prototype);hi.prototype.constructor=hi;hi.prototype.isCubicBezierCurve=!0;hi.prototype.getPoint=function(e,t){t=t||new Me;var r=this.v0,n=this.v1,i=this.v2,o=this.v3;t.set(li(e,r.x,n.x,i.x,o.x),li(e,r.y,n.y,i.y,o.y));return t};hi.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};hi.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();e.v3=this.v3.toArray();return e};hi.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);this.v3.fromArray(e.v3);return this};pi.prototype=Object.create(ni.prototype);pi.prototype.constructor=pi;pi.prototype.isCubicBezierCurve3=!0;pi.prototype.getPoint=function(e,t){t=t||new Te;var r=this.v0,n=this.v1,i=this.v2,o=this.v3;t.set(li(e,r.x,n.x,i.x,o.x),li(e,r.y,n.y,i.y,o.y),li(e,r.z,n.z,i.z,o.z));return t};pi.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);this.v3.copy(e.v3);return this};pi.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();e.v3=this.v3.toArray();return e};pi.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);this.v3.fromArray(e.v3);return this};fi.prototype=Object.create(ni.prototype);fi.prototype.constructor=fi;fi.prototype.isLineCurve=!0;fi.prototype.getPoint=function(e,t){t=t||new Me;1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1));return t};fi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};fi.prototype.getTangent=function(e,t){e=t||new Me;return e=e.copy(this.v2).sub(this.v1).normalize()};fi.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};fi.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};fi.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};di.prototype=Object.create(ni.prototype);di.prototype.constructor=di;di.prototype.isLineCurve3=!0;di.prototype.getPoint=function(e,t){t=t||new Te;1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1));return t};di.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};di.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};di.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};di.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};vi.prototype=Object.create(ni.prototype);vi.prototype.constructor=vi;vi.prototype.isQuadraticBezierCurve=!0;vi.prototype.getPoint=function(e,t){t=t||new Me;var r=this.v0,n=this.v1,i=this.v2;t.set(ci(e,r.x,n.x,i.x),ci(e,r.y,n.y,i.y));return t};vi.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};vi.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};vi.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};mi.prototype=Object.create(ni.prototype);mi.prototype.constructor=mi;mi.prototype.isQuadraticBezierCurve3=!0;mi.prototype.getPoint=function(e,t){t=t||new Te;var r=this.v0,n=this.v1,i=this.v2;t.set(ci(e,r.x,n.x,i.x),ci(e,r.y,n.y,i.y),ci(e,r.z,n.z,i.z));return t};mi.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.v0.copy(e.v0);this.v1.copy(e.v1);this.v2.copy(e.v2);return this};mi.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.v0=this.v0.toArray();e.v1=this.v1.toArray();e.v2=this.v2.toArray();return e};mi.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.v0.fromArray(e.v0);this.v1.fromArray(e.v1);this.v2.fromArray(e.v2);return this};gi.prototype=Object.create(ni.prototype);gi.prototype.constructor=gi;gi.prototype.isSplineCurve=!0;gi.prototype.getPoint=function(e,t){t=t||new Me;var r=this.points,n=(r.length-1)*e;e=Math.floor(n);n-=e;var i=r[0===e?e:e-1],o=r[e],a=r[e>r.length-2?r.length-1:e+1];r=r[e>r.length-3?r.length-1:e+2];t.set(ui(n,i.x,o.x,a.x,r.x),ui(n,i.y,o.y,a.y,r.y));return t};gi.prototype.copy=function(e){ni.prototype.copy.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this};gi.prototype.toJSON=function(){var e=ni.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e};gi.prototype.fromJSON=function(e){ni.prototype.fromJSON.call(this,e);this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Me).fromArray(n))}return this};var Uu=Object.freeze({__proto__:null,ArcCurve:oi,CatmullRomCurve3:si,CubicBezierCurve:hi,CubicBezierCurve3:pi,EllipseCurve:ii,LineCurve:fi,LineCurve3:di,QuadraticBezierCurve:vi,QuadraticBezierCurve3:mi,SplineCurve:gi});_i.prototype=Object.assign(Object.create(ni.prototype),{constructor:_i,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new fi(t,e))},getPoint:function(e){var t=e*this.getLength(),r=this.getCurveLengths();for(e=0;e<r.length;){if(r[e]>=t)return t=r[e]-t,e=this.curves[e],r=e.getLength(),e.getPointAt(0===r?0:1-t/r);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));this.autoClose&&t.push(t[0]);return t},getPoints:function(e){e=e||12;for(var t=[],r,n=0,i=this.curves;n<i.length;n++){var o=i[n];o=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(var a=0;a<o.length;a++){var s=o[a];r&&r.equals(s)||(t.push(s),r=s)}}this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]);return t},copy:function(e){ni.prototype.copy.call(this,e);this.curves=[];for(var t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());this.autoClose=e.autoClose;return this},toJSON:function(){var e=ni.prototype.toJSON.call(this);e.autoClose=this.autoClose;e.curves=[];for(var t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){ni.prototype.fromJSON.call(this,e);this.autoClose=e.autoClose;this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new Uu[n.type]).fromJSON(n))}return this}});yi.prototype=Object.assign(Object.create(_i.prototype),{constructor:yi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){this.currentPoint.set(e,t);return this},lineTo:function(e,t){var r=new fi(this.currentPoint.clone(),new Me(e,t));this.curves.push(r);this.currentPoint.set(e,t);return this},quadraticCurveTo:function(e,t,r,n){e=new vi(this.currentPoint.clone(),new Me(e,t),new Me(r,n));this.curves.push(e);this.currentPoint.set(r,n);return this},bezierCurveTo:function(e,t,r,n,i,o){e=new hi(this.currentPoint.clone(),new Me(e,t),new Me(r,n),new Me(i,o));this.curves.push(e);this.currentPoint.set(i,o);return this},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new gi(t);this.curves.push(t);this.currentPoint.copy(e[e.length-1]);return this},arc:function(e,t,r,n,i,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,n,i,o);return this},absarc:function(e,t,r,n,i,o){this.absellipse(e,t,r,r,n,i,o);return this},ellipse:function(e,t,r,n,i,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,n,i,o,a,s);return this},absellipse:function(e,t,r,n,i,o,a,s){e=new ii(e,t,r,n,i,o,a,s);0<this.curves.length&&(t=e.getPoint(0),t.equals(this.currentPoint)||this.lineTo(t.x,t.y));this.curves.push(e);e=e.getPoint(1);this.currentPoint.copy(e);return this},copy:function(e){_i.prototype.copy.call(this,e);this.currentPoint.copy(e.currentPoint);return this},toJSON:function(){var e=_i.prototype.toJSON.call(this);e.currentPoint=this.currentPoint.toArray();return e},fromJSON:function(e){_i.prototype.fromJSON.call(this,e);this.currentPoint.fromArray(e.currentPoint);return this}});bi.prototype=Object.assign(Object.create(yi.prototype),{constructor:bi,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){yi.prototype.copy.call(this,e);this.holes=[];for(var t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=yi.prototype.toJSON.call(this);e.uuid=this.uuid;e.holes=[];for(var t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){yi.prototype.fromJSON.call(this,e);this.uuid=e.uuid;this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new yi).fromJSON(n))}return this}});xi.prototype=Object.assign(Object.create(f.prototype),{constructor:xi,isLight:!0,copy:function(e){f.prototype.copy.call(this,e);this.color.copy(e.color);this.intensity=e.intensity;return this},toJSON:function(e){e=f.prototype.toJSON.call(this,e);e.object.color=this.color.getHex();e.object.intensity=this.intensity;void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(e.object.distance=this.distance);void 0!==this.angle&&(e.object.angle=this.angle);void 0!==this.decay&&(e.object.decay=this.decay);void 0!==this.penumbra&&(e.object.penumbra=this.penumbra);void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON());return e}});wi.prototype=Object.assign(Object.create(xi.prototype),{constructor:wi,isHemisphereLight:!0,copy:function(e){xi.prototype.copy.call(this,e);this.groundColor.copy(e.groundColor);return this}});Object.assign(Si.prototype,{_projScreenMatrix:new Ee,_lightPositionWorld:new Te,_lookTarget:new Te,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,r=this.matrix,n=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld);t.position.copy(o);i.setFromMatrixPosition(e.target.matrixWorld);t.lookAt(i);t.updateMatrixWorld();n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);this._frustum.setFromProjectionMatrix(n);r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);r.multiply(t.projectionMatrix);r.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){this.camera=e.camera.clone();this.bias=e.bias;this.radius=e.radius;this.mapSize.copy(e.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};0!==this.bias&&(e.bias=this.bias);1!==this.radius&&(e.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)e.mapSize=this.mapSize.toArray();e.camera=this.camera.toJSON(!1).object;delete e.camera.matrix;return e}});Mi.prototype=Object.assign(Object.create(Si.prototype),{constructor:Mi,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,r=2*Vo.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;if(r!==t.fov||n!==t.aspect||i!==t.far)t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix();Si.prototype.updateMatrices.call(this,e)}});Ci.prototype=Object.assign(Object.create(xi.prototype),{constructor:Ci,isSpotLight:!0,copy:function(e){xi.prototype.copy.call(this,e);this.distance=e.distance;this.angle=e.angle;this.penumbra=e.penumbra;this.decay=e.decay;this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});Ti.prototype=Object.assign(Object.create(Si.prototype),{constructor:Ti,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var r=this.camera,n=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld);r.position.copy(i);o.copy(r.position);o.add(this._cubeDirections[t]);r.up.copy(this._cubeUps[t]);r.lookAt(o);r.updateMatrixWorld();n.makeTranslation(-i.x,-i.y,-i.z);a.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse);this._frustum.setFromProjectionMatrix(a)}});Ei.prototype=Object.assign(Object.create(xi.prototype),{constructor:Ei,isPointLight:!0,copy:function(e){xi.prototype.copy.call(this,e);this.distance=e.distance;this.decay=e.decay;this.shadow=e.shadow.clone();return this}});Oi.prototype=Object.assign(Object.create(V.prototype),{constructor:Oi,isOrthographicCamera:!0,copy:function(e,t){V.prototype.copy.call(this,e,t);this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;this.near=e.near;this.far=e.far;this.zoom=e.zoom;this.view=null===e.view?null:Object.assign({},e.view);return this},setViewOffset:function(e,t,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=e;this.view.fullHeight=t;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=o;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e;r+=e;e=n+t;t=n-t;null!==this.view&&this.view.enabled&&(n=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom,i+=n*this.view.offsetX,r=i+n*this.view.width,e-=t*this.view.offsetY,t=e-t*this.view.height);this.projectionMatrix.makeOrthographic(i,r,e,t,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){e=f.prototype.toJSON.call(this,e);e.object.zoom=this.zoom;e.object.left=this.left;e.object.right=this.right;e.object.top=this.top;e.object.bottom=this.bottom;e.object.near=this.near;e.object.far=this.far;null!==this.view&&(e.object.view=Object.assign({},this.view));return e}});Pi.prototype=Object.assign(Object.create(Si.prototype),{constructor:Pi,isDirectionalLightShadow:!0,updateMatrices:function(e){Si.prototype.updateMatrices.call(this,e)}});Ai.prototype=Object.assign(Object.create(xi.prototype),{constructor:Ai,isDirectionalLight:!0,copy:function(e){xi.prototype.copy.call(this,e);this.target=e.target.clone();this.shadow=e.shadow.clone();return this}});ji.prototype=Object.assign(Object.create(xi.prototype),{constructor:ji,isAmbientLight:!0});Ri.prototype=Object.assign(Object.create(xi.prototype),{constructor:Ri,isRectAreaLight:!0,copy:function(e){xi.prototype.copy.call(this,e);this.width=e.width;this.height=e.height;return this},toJSON:function(e){e=xi.prototype.toJSON.call(this,e);e.object.width=this.width;e.object.height=this.height;return e}});Object.assign(ki.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;9>t;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;9>e;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var r=e.x,n=e.y;e=e.z;var i=this.coefficients;t.copy(i[0]).multiplyScalar(.282095);t.addScaledVector(i[1],.488603*n);t.addScaledVector(i[2],.488603*e);t.addScaledVector(i[3],.488603*r);t.addScaledVector(i[4],1.092548*r*n);t.addScaledVector(i[5],1.092548*n*e);t.addScaledVector(i[6],.315392*(3*e*e-1));t.addScaledVector(i[7],1.092548*r*e);t.addScaledVector(i[8],.546274*(r*r-n*n));return t},getIrradianceAt:function(e,t){var r=e.x,n=e.y;e=e.z;var i=this.coefficients;t.copy(i[0]).multiplyScalar(.886227);t.addScaledVector(i[1],1.023328*n);t.addScaledVector(i[2],1.023328*e);t.addScaledVector(i[3],1.023328*r);t.addScaledVector(i[4],.858086*r*n);t.addScaledVector(i[5],.858086*n*e);t.addScaledVector(i[6],.743125*e*e-.247708);t.addScaledVector(i[7],.858086*r*e);t.addScaledVector(i[8],.429043*(r*r-n*n));return t},add:function(e){for(var t=0;9>t;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(var r=0;9>r;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this},scale:function(e){for(var t=0;9>t;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var r=0;9>r;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this},equals:function(e){for(var t=0;9>t;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var r=this.coefficients,n=0;9>n;n++)r[n].fromArray(e,t+3*n);return this},toArray:function(e,t){void 0===e&&(e=[]);void 0===t&&(t=0);for(var r=this.coefficients,n=0;9>n;n++)r[n].toArray(e,t+3*n);return e}});Object.assign(ki,{getBasisAt:function(e,t){var r=e.x,n=e.y;e=e.z;t[0]=.282095;t[1]=.488603*n;t[2]=.488603*e;t[3]=.488603*r;t[4]=1.092548*r*n;t[5]=1.092548*n*e;t[6]=.315392*(3*e*e-1);t[7]=1.092548*r*e;t[8]=.546274*(r*r-n*n)}});Li.prototype=Object.assign(Object.create(xi.prototype),{constructor:Li,isLightProbe:!0,copy:function(e){xi.prototype.copy.call(this,e);this.sh.copy(e.sh);return this},fromJSON:function(e){this.intensity=e.intensity;this.sh.fromArray(e.sh);return this},toJSON:function(e){e=xi.prototype.toJSON.call(this,e);e.object.sh=this.sh.toArray();return e}});Ni.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Ni,load:function(t,r,e,n){var i=this,o=new Kn(i.manager);o.setPath(i.path);o.load(t,function(e){try{r(i.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),i.manager.itemError(t)}},e,n)},parse:function(e){function t(e){void 0===r[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e);return r[e]}var r=this.textures,n=new Iu[e.type];void 0!==e.uuid&&(n.uuid=e.uuid);void 0!==e.name&&(n.name=e.name);void 0!==e.color&&n.color.setHex(e.color);void 0!==e.roughness&&(n.roughness=e.roughness);void 0!==e.metalness&&(n.metalness=e.metalness);void 0!==e.sheen&&(n.sheen=(new v).setHex(e.sheen));void 0!==e.emissive&&n.emissive.setHex(e.emissive);void 0!==e.specular&&n.specular.setHex(e.specular);void 0!==e.shininess&&(n.shininess=e.shininess);void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat);void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness);void 0!==e.fog&&(n.fog=e.fog);void 0!==e.flatShading&&(n.flatShading=e.flatShading);void 0!==e.blending&&(n.blending=e.blending);void 0!==e.combine&&(n.combine=e.combine);void 0!==e.side&&(n.side=e.side);void 0!==e.opacity&&(n.opacity=e.opacity);void 0!==e.transparent&&(n.transparent=e.transparent);void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest);void 0!==e.depthTest&&(n.depthTest=e.depthTest);void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite);void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite);void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite);void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask);void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc);void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef);void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask);void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail);void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail);void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass);void 0!==e.wireframe&&(n.wireframe=e.wireframe);void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth);void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap);void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin);void 0!==e.rotation&&(n.rotation=e.rotation);1!==e.linewidth&&(n.linewidth=e.linewidth);void 0!==e.dashSize&&(n.dashSize=e.dashSize);void 0!==e.gapSize&&(n.gapSize=e.gapSize);void 0!==e.scale&&(n.scale=e.scale);void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset);void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor);void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits);void 0!==e.skinning&&(n.skinning=e.skinning);void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets);void 0!==e.morphNormals&&(n.morphNormals=e.morphNormals);void 0!==e.dithering&&(n.dithering=e.dithering);void 0!==e.vertexTangents&&(n.vertexTangents=e.vertexTangents);void 0!==e.visible&&(n.visible=e.visible);void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped);void 0!==e.userData&&(n.userData=e.userData);void 0!==e.vertexColors&&(n.vertexColors="number"===typeof e.vertexColors?0<e.vertexColors?!0:!1:e.vertexColors);if(void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];n.uniforms[i]={};switch(o.type){case"t":n.uniforms[i].value=t(o.value);break;case"c":n.uniforms[i].value=(new v).setHex(o.value);break;case"v2":n.uniforms[i].value=(new Me).fromArray(o.value);break;case"v3":n.uniforms[i].value=(new Te).fromArray(o.value);break;case"v4":n.uniforms[i].value=(new Ce).fromArray(o.value);break;case"m3":n.uniforms[i].value=(new m).fromArray(o.value);case"m4":n.uniforms[i].value=(new Ee).fromArray(o.value);break;default:n.uniforms[i].value=o.value}}void 0!==e.defines&&(n.defines=e.defines);void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader);void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader);if(void 0!==e.extensions)for(var a in e.extensions)n.extensions[a]=e.extensions[a];void 0!==e.shading&&(n.flatShading=1===e.shading);void 0!==e.size&&(n.size=e.size);void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation);void 0!==e.map&&(n.map=t(e.map));void 0!==e.matcap&&(n.matcap=t(e.matcap));void 0!==e.alphaMap&&(n.alphaMap=t(e.alphaMap));void 0!==e.bumpMap&&(n.bumpMap=t(e.bumpMap));void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale);void 0!==e.normalMap&&(n.normalMap=t(e.normalMap));void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType);void 0!==e.normalScale&&(i=e.normalScale,!1===Array.isArray(i)&&(i=[i,i]),n.normalScale=(new Me).fromArray(i));void 0!==e.displacementMap&&(n.displacementMap=t(e.displacementMap));void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale);void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias);void 0!==e.roughnessMap&&(n.roughnessMap=t(e.roughnessMap));void 0!==e.metalnessMap&&(n.metalnessMap=t(e.metalnessMap));void 0!==e.emissiveMap&&(n.emissiveMap=t(e.emissiveMap));void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity);void 0!==e.specularMap&&(n.specularMap=t(e.specularMap));void 0!==e.envMap&&(n.envMap=t(e.envMap));void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity);void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity);void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio);void 0!==e.lightMap&&(n.lightMap=t(e.lightMap));void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity);void 0!==e.aoMap&&(n.aoMap=t(e.aoMap));void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity);void 0!==e.gradientMap&&(n.gradientMap=t(e.gradientMap));void 0!==e.clearcoatMap&&(n.clearcoatMap=t(e.clearcoatMap));void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap));void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=t(e.clearcoatNormalMap));void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Me).fromArray(e.clearcoatNormalScale));return n},setTextures:function(e){this.textures=e;return this}});var qu={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Ii.prototype=Object.assign(Object.create(N.prototype),{constructor:Ii,isInstancedBufferGeometry:!0,copy:function(e){N.prototype.copy.call(this,e);this.instanceCount=e.instanceCount;return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=N.prototype.toJSON.call(this);e.instanceCount=this.instanceCount;e.isInstancedBufferGeometry=!0;return e}});Di.prototype=Object.assign(Object.create(E.prototype),{constructor:Di,isInstancedBufferAttribute:!0,copy:function(e){E.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this},toJSON:function(){var e=E.prototype.toJSON.call(this);e.meshPerAttribute=this.meshPerAttribute;e.isInstancedBufferAttribute=!0;return e}});Bi.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Bi,load:function(t,r,e,n){var i=this,o=new Kn(i.manager);o.setPath(i.path);o.load(t,function(e){try{r(i.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),i.manager.itemError(t)}},e,n)},parse:function(e){var t=e.isInstancedBufferGeometry?new Ii:new N,r=e.data.index;if(void 0!==r){var n=new Wu[r.type](r.array);t.setIndex(new E(n,1))}r=e.data.attributes;for(var i in r){var o=r[i];n=new Wu[o.type](o.array);n=new(o.isInstancedBufferAttribute?Di:E)(n,o.itemSize,o.normalized);void 0!==o.name&&(n.name=o.name);t.setAttribute(i,n)}var a=e.data.morphAttributes;if(a)for(i in a){var s=a[i],u=[];r=0;for(var c=s.length;r<c;r++)o=s[r],n=new Wu[o.type](o.array),n=new E(n,o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),u.push(n);t.morphAttributes[i]=u}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);i=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==i)for(r=0,o=i.length;r!==o;++r)n=i[r],t.addGroup(n.start,n.count,n.materialIndex);r=e.data.boundingSphere;void 0!==r&&(i=new Te,void 0!==r.center&&i.fromArray(r.center),t.boundingSphere=new l(i,r.radius));e.name&&(t.name=e.name);e.userData&&(t.userData=e.userData);return t}});var Wu={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Fi.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Fi,load:function(r,n,e,i){var o=this,t=""===this.path?qu.extractUrlBase(r):this.path;this.resourcePath=this.resourcePath||t;t=new Kn(o.manager);t.setPath(this.path);t.load(r,function(e){var t=null;try{t=JSON.parse(e)}catch(e){void 0!==i&&i(e);console.error("THREE:ObjectLoader: Can't parse "+r+".",e.message);return}e=t.metadata;void 0===e||void 0===e.type||"geometry"===e.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+r):o.parse(t,n)},e,i)},parse:function(e,t){var r=this.parseShape(e.shapes);r=this.parseGeometries(e.geometries,r);var n=this.parseImages(e.images,function(){void 0!==t&&t(i)});n=this.parseTextures(e.textures,n);n=this.parseMaterials(e.materials,n);var i=this.parseObject(e.object,r,n);e.animations&&(i.animations=this.parseAnimations(e.animations));void 0!==e.images&&0!==e.images.length||void 0===t||t(i);return i},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new bi).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new Bi,i=0,o=e.length;i<o;i++){var a=e[i];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new Nu[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Nu[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Nu[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Nu[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Nu[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Nu[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Nu[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Nu[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Nu[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Nu[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Nu[a.type]((new Uu[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Nu[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Nu[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var u=0,c=a.shapes.length;u<c;u++){var l=t[a.shapes[u]];s.push(l)}s=new Nu[a.type](s,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":s=[];u=0;for(c=a.shapes.length;u<c;u++)l=t[a.shapes[u]],s.push(l);u=a.options.extrudePath;void 0!==u&&(a.options.extrudePath=(new Uu[u.type]).fromJSON(u));s=new Nu[a.type](s,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=n.parse(a);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}s.uuid=a.uuid;void 0!==a.name&&(s.name=a.name);!0===s.isBufferGeometry&&void 0!==a.userData&&(s.userData=a.userData);r[a.uuid]=s}return r},parseMaterials:function(e,t){var r={},n={};if(void 0!==e){var i=new Ni;i.setTextures(t);t=0;for(var o=e.length;t<o;t++){var a=e[t];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++){var c=a.materials[u];void 0===r[c.uuid]&&(r[c.uuid]=i.parse(c));s.push(r[c.uuid])}n[a.uuid]=s}else void 0===r[a.uuid]&&(r[a.uuid]=i.parse(a)),n[a.uuid]=r[a.uuid]}}return n},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=Un.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid);t.push(i)}return t},parseImages:function(e,t){function r(e){n.manager.itemStart(e);return o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e);n.manager.itemEnd(e)})}var n=this,i={};if(void 0!==e&&0<e.length){t=new Xn(t);var o=new ei(t);o.setCrossOrigin(this.crossOrigin);t=0;for(var a=e.length;t<a;t++){var s=e[t],u=s.url;if(Array.isArray(u)){i[s.uuid]=[];for(var c=0,l=u.length;c<l;c++){var h=u[c];h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;i[s.uuid].push(r(h))}}else h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.resourcePath+s.url,i[s.uuid]=r(h)}}return i},parseTextures:function(e,t){function r(e,t){if("number"===typeof e)return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var n={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid);void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=Array.isArray(t[a.image])?new K(t[a.image]):new p(t[a.image]);s.needsUpdate=!0;s.uuid=a.uuid;void 0!==a.name&&(s.name=a.name);void 0!==a.mapping&&(s.mapping=r(a.mapping,Xu));void 0!==a.offset&&s.offset.fromArray(a.offset);void 0!==a.repeat&&s.repeat.fromArray(a.repeat);void 0!==a.center&&s.center.fromArray(a.center);void 0!==a.rotation&&(s.rotation=a.rotation);void 0!==a.wrap&&(s.wrapS=r(a.wrap[0],Yu),s.wrapT=r(a.wrap[1],Yu));void 0!==a.format&&(s.format=a.format);void 0!==a.type&&(s.type=a.type);void 0!==a.encoding&&(s.encoding=a.encoding);void 0!==a.minFilter&&(s.minFilter=r(a.minFilter,Ku));void 0!==a.magFilter&&(s.magFilter=r(a.magFilter,Ku));void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy);void 0!==a.flipY&&(s.flipY=a.flipY);void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha);void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment);n[a.uuid]=s}return n},parseObject:function(e,t,o){function r(e){void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e);return t[e]}function n(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];void 0===o[i]&&console.warn("THREE.ObjectLoader: Undefined material",i);t.push(o[i])}return t}void 0===o[e]&&console.warn("THREE.ObjectLoader: Undefined material",e);return o[e]}}switch(e.type){case"Scene":var i=new Oe;void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new v(e.background));void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Wt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new qt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new H(e.fov,e.aspect,e.near,e.far);void 0!==e.focus&&(i.focus=e.focus);void 0!==e.zoom&&(i.zoom=e.zoom);void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge);void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset);void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Oi(e.left,e.right,e.top,e.bottom,e.near,e.far);void 0!==e.zoom&&(i.zoom=e.zoom);void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new ji(e.color,e.intensity);break;case"DirectionalLight":i=new Ai(e.color,e.intensity);break;case"PointLight":i=new Ei(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Ri(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Ci(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new wi(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new Li).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":i=r(e.geometry);var a=n(e.material);i=new I(i,a);break;case"InstancedMesh":i=r(e.geometry);a=n(e.material);var s=e.instanceMatrix;i=new nr(i,a,e.count);i.instanceMatrix=new E(new Float32Array(s.array),16);break;case"LOD":i=new Qt;break;case"Line":i=new or(r(e.geometry),n(e.material),e.mode);break;case"LineLoop":i=new sr(r(e.geometry),n(e.material));break;case"LineSegments":i=new ar(r(e.geometry),n(e.material));break;case"PointCloud":case"Points":i=new cr(r(e.geometry),n(e.material));break;case"Sprite":i=new Zt(n(e.material));break;case"Group":i=new $t;break;default:i=new f}i.uuid=e.uuid;void 0!==e.name&&(i.name=e.name);void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale));void 0!==e.castShadow&&(i.castShadow=e.castShadow);void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow);e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera)));void 0!==e.visible&&(i.visible=e.visible);void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled);void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder);void 0!==e.userData&&(i.userData=e.userData);void 0!==e.layers&&(i.layers.mask=e.layers);if(void 0!==e.children)for(s=e.children,a=0;a<s.length;a++)i.add(this.parseObject(s[a],t,o));if("LOD"===e.type)for(void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate),e=e.levels,s=0;s<e.length;s++){a=e[s];var u=i.getObjectByProperty("uuid",a.object);void 0!==u&&i.addLevel(u,a.distance)}return i}});var Xu={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Yu={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Ku={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};zi.prototype=Object.assign(Object.create(Yn.prototype),{constructor:zi,setOptions:function(e){this.options=e;return this},load:function(t,r,e,n){void 0===t&&(t="");void 0!==this.path&&(t=this.path+t);t=this.manager.resolveURL(t);var i=this,o=Bu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){r&&r(o);i.manager.itemEnd(t)},0),o;fetch(t).then(function(e){return e.blob()}).then(function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)}).then(function(e){Bu.add(t,e);r&&r(e);i.manager.itemEnd(t)}).catch(function(e){n&&n(e);i.manager.itemError(t);i.manager.itemEnd(t)});i.manager.itemStart(t)}});Object.assign($i.prototype,{moveTo:function(e,t){this.currentPath=new yi;this.subPaths.push(this.currentPath);this.currentPath.moveTo(e,t);return this},lineTo:function(e,t){this.currentPath.lineTo(e,t);return this},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n);return this},bezierCurveTo:function(e,t,r,n,i,o){this.currentPath.bezierCurveTo(e,t,r,n,i,o);return this},splineThru:function(e){this.currentPath.splineThru(e);return this},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new bi;o.curves=i.curves;t.push(o)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var a=t[i],s=t[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(0>c&&(a=t[o],u=-u,s=t[i],c=-c),!(e.y<a.y||e.y>s.y))if(e.y===a.y){if(e.x===a.x)return!0}else{i=c*(e.x-a.x)-u*(e.y-a.y);if(0===i)return!0;0>i||(n=!n)}}else if(e.y===a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return n}var i=ku.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return r(o);t=[];if(1===o.length){var a=o[0];var s=new bi;s.curves=a.curves;t.push(s);return t}var u=!i(o[0].getPoints());u=e?!u:u;s=[];var c=[],l=[],h=0;c[h]=void 0;l[h]=[];for(var p=0,f=o.length;p<f;p++){a=o[p];var d=a.getPoints();var v=i(d);(v=e?!v:v)?(!u&&c[h]&&h++,c[h]={s:new bi,p:d},c[h].s.curves=a.curves,u&&h++,l[h]=[]):l[h].push({h:a,p:d[0]})}if(!c[0])return r(o);if(1<c.length){p=!1;e=[];i=0;for(o=c.length;i<o;i++)s[i]=[];i=0;for(o=c.length;i<o;i++)for(a=l[i],v=0;v<a.length;v++){u=a[v];h=!0;for(d=0;d<c.length;d++)n(u.p,c[d].p)&&(i!==d&&e.push({froms:i,tos:d,hole:v}),h?(h=!1,s[d].push(u)):p=!0);h&&s[i].push(u)}0<e.length&&(p||(l=s))}p=0;for(i=c.length;p<i;p++)for(s=c[p].s,t.push(s),e=l[p],o=0,a=e.length;o<a;o++)s.holes.push(e[o].h);return t}});Object.assign(Gi.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);var r=[],n=t;t=this.data;var i=Array.from?Array.from(e):String(e).split("");n/=t.resolution;var o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*n;e=[];for(var a=0,s=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)a=0,s-=o;else{var l=c;c=n;var h=a,p=s,f=t,d=f.glyphs[l]||f.glyphs["?"];if(d){l=new $i;if(d.o){f=d._cachedOutline||(d._cachedOutline=d.o.split(" "));for(var v=0,m=f.length;v<m;)switch(f[v++]){case"m":var g=f[v++]*c+h;var _=f[v++]*c+p;l.moveTo(g,_);break;case"l":g=f[v++]*c+h;_=f[v++]*c+p;l.lineTo(g,_);break;case"q":var y=f[v++]*c+h;var b=f[v++]*c+p;var x=f[v++]*c+h;var w=f[v++]*c+p;l.quadraticCurveTo(x,w,y,b);break;case"b":y=f[v++]*c+h,b=f[v++]*c+p,x=f[v++]*c+h,w=f[v++]*c+p,g=f[v++]*c+h,_=f[v++]*c+p,l.bezierCurveTo(x,w,g,_,y,b)}}c={offsetX:d.ha*c,path:l}}else console.error('THREE.Font: character "'+l+'" does not exists in font family '+f.familyName+"."),c=void 0;a+=c.offsetX;e.push(c.path)}}t=0;for(i=e.length;t<i;t++)Array.prototype.push.apply(r,e[t].toShapes());return r}});Vi.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Vi,load:function(e,n,t,r){var i=this,o=new Kn(this.manager);o.setPath(this.path);o.load(e,function(t){try{var r=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(t.substring(65,t.length-2))}t=i.parse(r);n&&n(t)},t,r)},parse:function(e){return new Gi(e)}});var Zu,Ju={getContext:function(){void 0===Zu&&(Zu=new(window.AudioContext||window.webkitAudioContext));return Zu},setContext:function(e){Zu=e}};Hi.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Hi,load:function(r,n,e,i){var o=this,t=new Kn(o.manager);t.setResponseType("arraybuffer");t.setPath(o.path);t.load(r,function(e){try{var t=e.slice(0);Ju.getContext().decodeAudioData(t,function(e){n(e)})}catch(e){i?i(e):console.error(e),o.manager.itemError(r)}},e,i)}});Ui.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ui,isHemisphereLightProbe:!0,copy:function(e){Li.prototype.copy.call(this,e);return this},toJSON:function(e){return Li.prototype.toJSON.call(this,e)}});qi.prototype=Object.assign(Object.create(Li.prototype),{constructor:qi,isAmbientLightProbe:!0,copy:function(e){Li.prototype.copy.call(this,e);return this},toJSON:function(e){return Li.prototype.toJSON.call(this,e)}});var Qu=new Ee,ec=new Ee;Object.assign(Wi.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus;t.fov=e.fov;t.aspect=e.aspect*this.aspect;t.near=e.near;t.far=e.far;t.zoom=e.zoom;t.eyeSep=this.eyeSep;var r=e.projectionMatrix.clone(),n=t.eyeSep/2,i=n*t.near/t.focus,o=t.near*Math.tan(Vo.DEG2RAD*t.fov*.5)/t.zoom;ec.elements[12]=-n;Qu.elements[12]=n;n=-o*t.aspect+i;var a=o*t.aspect+i;r.elements[0]=2*t.near/(a-n);r.elements[8]=(a+n)/(a-n);this.cameraL.projectionMatrix.copy(r);n=-o*t.aspect-i;a=o*t.aspect-i;r.elements[0]=2*t.near/(a-n);r.elements[8]=(a+n)/(a-n);this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ec);this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Qu)}});Object.assign(Xi.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3;this.oldTime=t;this.elapsedTime+=e}return e}});var tc=new Te,rc=new d,nc=new Te,ic=new Te;Yi.prototype=Object.assign(Object.create(f.prototype),{constructor:Yi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=e;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01);return this},updateMatrixWorld:function(e){f.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var t=this.up;this.timeDelta=this._clock.getDelta();this.matrixWorld.decompose(tc,rc,nc);ic.set(0,0,-1).applyQuaternion(rc);if(e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(tc.x,r);e.positionY.linearRampToValueAtTime(tc.y,r);e.positionZ.linearRampToValueAtTime(tc.z,r);e.forwardX.linearRampToValueAtTime(ic.x,r);e.forwardY.linearRampToValueAtTime(ic.y,r);e.forwardZ.linearRampToValueAtTime(ic.z,r);e.upX.linearRampToValueAtTime(t.x,r);e.upY.linearRampToValueAtTime(t.y,r);e.upZ.linearRampToValueAtTime(t.z,r)}else e.setPosition(tc.x,tc.y,tc.z),e.setOrientation(ic.x,ic.y,ic.z,t.x,t.y,t.z)}});Ki.prototype=Object.assign(Object.create(f.prototype),{constructor:Ki,getOutput:function(){return this.gain},setNodeSource:function(e){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=e;this.connect();return this},setMediaElementSource:function(e){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(e);this.connect();return this},setMediaStreamSource:function(e){this.hasPlaybackControl=!1;this.sourceType="mediaStreamNode";this.source=this.context.createMediaStreamSource(e);this.connect();return this},setBuffer:function(e){this.buffer=e;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(e){void 0===e&&(e=0);if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+e,e=this.context.createBufferSource(),e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){e||(e=[]);!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e;return this},setDetune:function(e){this.detune=e;if(void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this},setLoopStart:function(e){this.loopStart=e;return this},setLoopEnd:function(e){this.loopEnd=e;return this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01);return this}});var oc=new Te,ac=new d,sc=new Te,uc=new Te;Zi.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Zi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e;return this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e;return this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e;return this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e;return this},setDirectionalCone:function(e,t,r){this.panner.coneInnerAngle=e;this.panner.coneOuterAngle=t;this.panner.coneOuterGain=r;return this},updateMatrixWorld:function(e){f.prototype.updateMatrixWorld.call(this,e);if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(oc,ac,sc),uc.set(0,0,1).applyQuaternion(ac),e=this.panner,e.positionX){var t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(oc.x,t);e.positionY.linearRampToValueAtTime(oc.y,t);e.positionZ.linearRampToValueAtTime(oc.z,t);e.orientationX.linearRampToValueAtTime(uc.x,t);e.orientationY.linearRampToValueAtTime(uc.y,t);e.orientationZ.linearRampToValueAtTime(uc.z,t)}else e.setPosition(oc.x,oc.y,oc.z),e.setOrientation(uc.x,uc.y,uc.z)}});Object.assign(Ji.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}});Object.assign(Qi.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize;e=e*n+n;var i=this.cumulativeWeight;if(0===i){for(i=0;i!==n;++i)r[e+i]=r[i];i=t}else i+=t,this._mixBufferRegion(r,e,0,t/i,n);this.cumulativeWeight=i},accumulateAdditive:function(e){var t=this.buffer,r=this.valueSize,n=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(t,n,0,e,r);this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,r=this.buffer;e=e*t+t;var n=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeightAdditive=this.cumulativeWeight=0;1>n&&this._mixBufferRegion(r,e,t*this._origIndex,1-n,t);0<i&&this._mixBufferRegionAdditive(r,e,this._addIndex*t,1,t);n=t;for(i=t+t;n!==i;++n)if(r[n]!==r[n+t]){o.setValue(r,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,r=t*this._origIndex;this.binding.getValue(e,r);for(var n=t;n!==r;++n)e[n]=e[r+n%t];this._setIdentity();this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize;e<t;e++)this.buffer[e]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric();this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]},_select:function(e,t,r,n,i){if(.5<=n)for(n=0;n!==i;++n)e[t+n]=e[r+n]},_slerp:function(e,t,r,n){d.slerpFlat(e,t,e,t,e,r,n)},_slerpAdditive:function(e,t,r,n,i){i*=this._workIndex;d.multiplyQuaternionsFlat(e,i,e,t,e,r);d.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,r,n,i){for(var o=1-n,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*n}},_lerpAdditive:function(e,t,r,n,i){for(var o=0;o!==i;++o){var a=t+o;e[a]+=e[r+o]*n}}});var cc=/[\[\]\.:\/]/g,lc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",hc=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),pc=/(WCOD+)?/.source.replace("WCOD",lc),fc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),dc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),vc=new RegExp("^"+hc+pc+fc+dc+"$"),mc=["material","materials","bones"];Object.assign(eo.prototype,{getValue:function(e,t){this.bind();var r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}});Object.assign(to,{Composite:eo,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new to.Composite(e,t,r):new to(e,t,r)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(cc,"")},parseTrackName:function(e){var t=vc.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var r=t.nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var n=t.nodeName.substring(r+1);-1!==mc.indexOf(n)&&(t.nodeName=t.nodeName.substring(0,r),t.objectName=n)}if(null===t.propertyName||0===t.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t},findNode:function(e,n){if(!n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){var t=e.skeleton.getBoneByName(n);if(void 0!==t)return t}if(e.children){var i=function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.name===n||r.uuid===n||(r=i(r.children)))return r}return null};if(e=i(e.children))return e}return null}});Object.assign(to.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t];this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t];this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t);this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind();this.getValue(e,t)},setValue:function(e,t){this.bind();this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;e||(this.node=e=to.findNode(this.rootNode,t.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(r=0;r<e.length;r++)if(e[r].name===o){o=r;break}break;default:if(void 0===e[r]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(void 0!==o){if(void 0===e[o]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[o]}}o=e[n];if(void 0===o)console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+n+" but it wasn't found.",e);else{t=this.Versioning.None;this.targetObject=e;void 0!==e.needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate);r=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}r=this.BindingType.ArrayElement;this.resolvedProperty=o;this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(r=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(r=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[r];this.setValue=this.SetterByBindingTypeAndVersioning[r][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(to.prototype,{_getValue_unbound:to.prototype.getValue,_setValue_unbound:to.prototype.setValue});Object.assign(ro.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],p=h.uuid,f=n[p];if(void 0===f){f=t++;n[p]=f;e.push(h);p=0;for(var d=s;p!==d;++p)a[p].push(new to(h,i[p],o[p]))}else if(f<r){u=e[f];var v=--r;d=e[v];n[d.uuid]=f;e[f]=d;n[p]=v;e[v]=h;p=0;for(d=s;p!==d;++p){var m=a[p],g=m[f];m[f]=m[v];void 0===g&&(g=new to(h,i[p],o[p]));m[v]=g}}else e[f]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=r[u];if(void 0!==c&&c>=t){var l=t++,h=e[l];r[h.uuid]=c;e[c]=h;r[u]=l;e[l]=s;s=0;for(u=i;s!==u;++s){h=n[s];var p=h[c];h[c]=h[l];h[l]=p}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,c=n[u];if(void 0!==c)if(delete n[u],c<r){u=--r;var l=e[u],h=--t,p=e[h];n[l.uuid]=c;e[c]=l;n[p.uuid]=u;e[u]=p;e.pop();l=0;for(p=o;l!==p;++l){var f=i[l],d=f[h];f[c]=f[u];f[u]=d;f.pop()}}else for(h=--t,p=e[h],n[p.uuid]=c,e[c]=p,e.pop(),l=0,p=o;l!==p;++l)f=i[l],f[c]=f[h],f.pop()}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,c=Array(s.length);n=i.length;r[e]=n;o.push(e);a.push(t);i.push(c);r=u;for(n=s.length;r!==n;++r)c[r]=new to(s[r],e,t);return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r;o[r]=s;o.pop();i[r]=i[a];i.pop();n[r]=n[a];n.pop()}}});Object.assign(no.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){this._startTime=e;return this},setLoop:function(e,t){this.loop=e;this.repetitions=t;return this},setEffectiveWeight:function(e){this.weight=e;this._effectiveWeight=this.enabled?e:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){e.fadeOut(t);this.fadeIn(t);if(r){r=this._clip.duration;var n=e._clip.duration,i=r/n;e.warp(1,n/r,t);this.warp(i,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e));return this},setEffectiveTimeScale:function(e){this.timeScale=e;this._effectiveTimeScale=this.paused?0:e;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){this.timeScale=this._clip.duration/e;return this.stopWarping()},syncWith:function(e){this.time=e.time;this.timeScale=e.timeScale;return this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(this._timeScaleInterpolant=o=n._lendControlInterpolant());n=o.parameterPositions;o=o.sampleValues;n[0]=i;n[1]=i+r;o[0]=e/a;o[1]=t/a;return this},stopWarping:function(){var e=this._timeScaleInterpolant;null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){t=(e-i)*r;if(0>t||0===r)return;this._startTime=null;t*=r}t*=this._updateTimeScale(e);r=this._updateTime(t);e=this._updateWeight(e);if(0<e)switch(t=this._interpolants,i=this._propertyBindings,this.blendMode){case 2501:for(var o=0,a=t.length;o!==a;++o)t[o].evaluate(r),i[o].accumulateAdditive(e);break;default:for(o=0,a=t.length;o!==a;++o)t[o].evaluate(r),i[o].accumulate(n,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n;e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n;e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,n=this.loop,i=this._loopCount,o=2202===n;if(0===e)return-1===i?t:o&&1===(i&1)?r-t:t;if(2200===n)e:{if(-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=r)t=r;else if(0>t)t=0;else{this.time=t;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this.time=t;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{-1===i&&(0<=e?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o));if(t>=r||0>t){n=Math.floor(t/r);t-=r*n;i+=Math.abs(n);var a=this.repetitions-i;0>=a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t=0<e?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1===a?(e=0>e,this._setEndings(e,!e,o)):this._setEndings(!1,!1,o),this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}else this.time=t;if(o&&1===(i&1))return r-t}return t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;null===o&&(this._weightInterpolant=o=n._lendControlInterpolant());n=o.parameterPositions;o=o.sampleValues;n[0]=i;o[0]=t;n[1]=i+e;o[1]=r;return this}});io.prototype=Object.assign(Object.create(t.prototype),{constructor:io,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings;e=e._interpolants;var a=r.uuid,s=this._bindingsByRootAndName,u=s[a];void 0===u&&(u={},s[a]=u);for(s=0;s!==i;++s){var c=n[s],l=c.name,h=u[l];if(void 0===h){h=o[s];if(void 0!==h){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,a,l));continue}h=new Qi(to.create(r,l,t&&t._propertyBindings[s].binding.parsedPath),c.ValueTypeName,c.getValueSize());++h.referenceCount;this._addInactiveBinding(h,a,l)}o[s]=h;e[s].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]);this._addInactiveAction(e,r,t)}t=e._propertyBindings;r=0;for(n=t.length;r!==n;++r){var i=t[r];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){e=e._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,o=i[t];void 0===o?(o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o):(t=o.knownActions,e._byClipCacheIndex=t.length,t.push(e));e._cacheIndex=n.length;n.push(e);o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n;t[n]=r;t.pop();e._cacheIndex=null;t=e._clip.uuid;r=this._actionsByClip;n=r[t];var i=n.knownActions,o=i[i.length-1],a=e._byClipCacheIndex;o._byClipCacheIndex=a;i[a]=o;i.pop();e._byClipCacheIndex=null;delete n.actionByRoot[(e._localRoot||this._root).uuid];0===i.length&&delete r[t];this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var t=0,r=e.length;t!==r;++t){var n=e[t];0===--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],o=this._bindings;void 0===i&&(i={},n[t]=i);i[r]=e;e._cacheIndex=o.length;o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid;r=r.path;var i=this._bindingsByRootAndName,o=i[n],a=t[t.length-1];e=e._cacheIndex;a._cacheIndex=e;t[e]=a;t.pop();delete o[r];0===Object.keys(o).length&&delete i[n]},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n;t[n]=e;i._cacheIndex=r;t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];void 0===r&&(r=new Nn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r);return r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n;t[n]=e;i.__cacheIndex=r;t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,r){var n=t||this._root,i=n.uuid;n="string"===typeof e?Un.findByName(n,e):e;e=null!==n?n.uuid:e;var o=this._actionsByClip[e],a=null;void 0===r&&(r=null!==n?n.blendMode:2500);if(void 0!==o){a=o.actionByRoot[i];if(void 0!==a&&a.blendMode===r)return a;a=o.knownActions[0];null===n&&(n=a._clip)}if(null===n)return null;t=new no(this,n,t,r);this._bindAction(t,a);this._addInactiveAction(t,e,i);return t},existingAction:function(e,t){var r=t||this._root;t=r.uuid;r="string"===typeof e?Un.findByName(r,e):e;e=this._actionsByClip[r?r.uuid:e];return void 0!==e?e.actionByRoot[t]||null:null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;0<=t;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a)t[a]._update(n,e,i,o);e=this._bindings;t=this._nActiveBindings;for(a=0;a!==t;++a)e[a].apply(o);return this},setTime:function(e){for(var t=this.time=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var r=this._actionsByClip,n=r[e];if(void 0!==n){n=n.knownActions;for(var i=0,o=n.length;i!==o;++i){var a=n[i];this._deactivateAction(a);var s=a._cacheIndex,u=t[t.length-1];a._cacheIndex=null;a._byClipCacheIndex=null;u._cacheIndex=s;t[s]=u;t.pop();this._removeInactiveBindingsForAction(a)}delete r[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(n in t){var r=t[n].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var n=this._bindingsByRootAndName[e];if(void 0!==n)for(var i in n)e=n[i],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){e=this.existingAction(e,t);null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}});oo.prototype.clone=function(){return new oo(void 0===this.value.clone?this.value:this.value.clone())};ao.prototype=Object.assign(Object.create(Xt.prototype),{constructor:ao,isInstancedInterleavedBuffer:!0,copy:function(e){Xt.prototype.copy.call(this,e);this.meshPerAttribute=e.meshPerAttribute;return this}});Object.assign(so.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){r=r||[];co(e,this,r,t);r.sort(uo);return r},intersectObjects:function(e,t,r){r=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,i=e.length;n<i;n++)co(e[n],this,r,t);r.sort(uo);return r}});Object.assign(lo.prototype,{set:function(e,t,r){this.radius=e;this.phi=t;this.theta=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.phi=e.phi;this.theta=e.theta;return this},makeSafe:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi));return this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){this.radius=Math.sqrt(e*e+t*t+r*r);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e,r),this.phi=Math.acos(Vo.clamp(t/this.radius,-1,1)));return this}});Object.assign(ho.prototype,{set:function(e,t,r){this.radius=e;this.theta=t;this.y=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.radius=e.radius;this.theta=e.theta;this.y=e.y;return this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){this.radius=Math.sqrt(e*e+r*r);this.theta=Math.atan2(e,r);this.y=t;return this}});var gc=new Me;Object.assign(po.prototype,{set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){t=gc.copy(t).multiplyScalar(.5);this.min.copy(e).sub(t);this.max.copy(e).add(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Me);return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Me);return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Me);return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Me);return t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return gc.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var _c=new Te,yc=new Te;Object.assign(fo.prototype,{set:function(e,t){this.start.copy(e);this.end.copy(t);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},getCenter:function(e){void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Te);return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Te);return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Te);return this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){_c.subVectors(e,this.start);yc.subVectors(this.end,this.start);e=yc.dot(yc);e=yc.dot(_c)/e;t&&(e=Vo.clamp(e,0,1));return e},closestPointToPoint:function(e,t,r){e=this.closestPointToPointParameter(e,t);void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new Te);return this.delta(r).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});vo.prototype=Object.create(f.prototype);vo.prototype.constructor=vo;vo.prototype.isImmediateRenderObject=!0;var bc=new Te;mo.prototype=Object.create(f.prototype);mo.prototype.constructor=mo;mo.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};mo.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e);bc.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(bc);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var xc=new Te,wc=new Ee,Sc=new Ee;_o.prototype=Object.create(ar.prototype);_o.prototype.constructor=_o;_o.prototype.isSkeletonHelper=!0;_o.prototype.updateMatrixWorld=function(e){var t=this.bones,r=this.geometry,n=r.getAttribute("position");Sc.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(wc.multiplyMatrices(Sc,a.matrixWorld),xc.setFromMatrixPosition(wc),n.setXYZ(o,xc.x,xc.y,xc.z),wc.multiplyMatrices(Sc,a.parent.matrixWorld),xc.setFromMatrixPosition(wc),n.setXYZ(o+1,xc.x,xc.y,xc.z),o+=2)}r.getAttribute("position").needsUpdate=!0;f.prototype.updateMatrixWorld.call(this,e)};yo.prototype=Object.create(I.prototype);yo.prototype.constructor=yo;yo.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};yo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Mc=new Te,Cc=new v,Tc=new v;bo.prototype=Object.create(f.prototype);bo.prototype.constructor=bo;bo.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};bo.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Cc.copy(this.light.color);Tc.copy(this.light.groundColor);for(var r=0,n=t.count;r<n;r++){var i=r<n/2?Cc:Tc;t.setXYZ(r,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Mc.setFromMatrixPosition(this.light.matrixWorld).negate())};xo.prototype=Object.assign(Object.create(ar.prototype),{constructor:xo,copy:function(e){ar.prototype.copy.call(this,e);this.geometry.copy(e.geometry);this.material.copy(e.material);return this},clone:function(){return(new this.constructor).copy(this)}});wo.prototype=Object.create(ar.prototype);wo.prototype.constructor=wo;var Ec=new Te,Oc=new Te,Pc=new Te;So.prototype=Object.create(f.prototype);So.prototype.constructor=So;So.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};So.prototype.update=function(){Ec.setFromMatrixPosition(this.light.matrixWorld);Oc.setFromMatrixPosition(this.light.target.matrixWorld);Pc.subVectors(Oc,Ec);this.lightPlane.lookAt(Oc);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(Oc);this.targetLine.scale.z=Pc.length()};var Ac=new Te,jc=new V;Mo.prototype=Object.create(ar.prototype);Mo.prototype.constructor=Mo;Mo.prototype.update=function(){var e=this.geometry,t=this.pointMap;jc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);Co("c",t,e,jc,0,0,-1);Co("t",t,e,jc,0,0,1);Co("n1",t,e,jc,-1,-1,-1);Co("n2",t,e,jc,1,-1,-1);Co("n3",t,e,jc,-1,1,-1);Co("n4",t,e,jc,1,1,-1);Co("f1",t,e,jc,-1,-1,1);Co("f2",t,e,jc,1,-1,1);Co("f3",t,e,jc,-1,1,1);Co("f4",t,e,jc,1,1,1);Co("u1",t,e,jc,.7,1.1,-1);Co("u2",t,e,jc,-.7,1.1,-1);Co("u3",t,e,jc,0,2,-1);Co("cf1",t,e,jc,-1,0,1);Co("cf2",t,e,jc,1,0,1);Co("cf3",t,e,jc,0,-1,1);Co("cf4",t,e,jc,0,1,1);Co("cn1",t,e,jc,-1,0,-1);Co("cn2",t,e,jc,1,0,-1);Co("cn3",t,e,jc,0,-1,-1);Co("cn4",t,e,jc,0,1,-1);e.getAttribute("position").needsUpdate=!0};var Rc=new n;To.prototype=Object.create(ar.prototype);To.prototype.constructor=To;To.prototype.update=function(e){void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&Rc.setFromObject(this.object);if(!Rc.isEmpty()){e=Rc.min;var t=Rc.max,r=this.geometry.attributes.position,n=r.array;n[0]=t.x;n[1]=t.y;n[2]=t.z;n[3]=e.x;n[4]=t.y;n[5]=t.z;n[6]=e.x;n[7]=e.y;n[8]=t.z;n[9]=t.x;n[10]=e.y;n[11]=t.z;n[12]=t.x;n[13]=t.y;n[14]=e.z;n[15]=e.x;n[16]=t.y;n[17]=e.z;n[18]=e.x;n[19]=e.y;n[20]=e.z;n[21]=t.x;n[22]=e.y;n[23]=e.z;r.needsUpdate=!0;this.geometry.computeBoundingSphere()}};To.prototype.setFromObject=function(e){this.object=e;this.update();return this};To.prototype.copy=function(e){ar.prototype.copy.call(this,e);this.object=e.object;return this};To.prototype.clone=function(){return(new this.constructor).copy(this)};Eo.prototype=Object.create(ar.prototype);Eo.prototype.constructor=Eo;Eo.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),f.prototype.updateMatrixWorld.call(this,e))};Oo.prototype=Object.create(or.prototype);Oo.prototype.constructor=Oo;Oo.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;1e-8>Math.abs(t)&&(t=1e-8);this.scale.set(.5*this.size,.5*this.size,t);this.children[0].material.side=0>t?1:0;this.lookAt(this.plane.normal);f.prototype.updateMatrixWorld.call(this,e)};var kc=new Te,Lc,Nc;Po.prototype=Object.create(f.prototype);Po.prototype.constructor=Po;Po.prototype.setDirection=function(e){.99999<e.y?this.quaternion.set(0,0,0,1):-.99999>e.y?this.quaternion.set(1,0,0,0):(kc.set(e.z,0,-e.x).normalize(),this.quaternion.setFromAxisAngle(kc,Math.acos(e.y)))};Po.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e);void 0===r&&(r=.2*t);this.line.scale.set(1,Math.max(1e-4,e-t),1);this.line.updateMatrix();this.cone.scale.set(r,t,r);this.cone.position.y=e;this.cone.updateMatrix()};Po.prototype.setColor=function(e){this.line.material.color.set(e);this.cone.material.color.set(e)};Po.prototype.copy=function(e){f.prototype.copy.call(this,e,!1);this.line.copy(e.line);this.cone.copy(e.cone);return this};Po.prototype.clone=function(){return(new this.constructor).copy(this)};Ao.prototype=Object.create(ar.prototype);Ao.prototype.constructor=Ao;var Ic=Math.pow(2,8),Dc=[.125,.215,.35,.446,.526,.582],Bc=5+Dc.length,Fc={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},zc=new Oi,$c=function(){for(var e=[],t=[],r=[],n=8,i=0;i<Bc;i++){var o=Math.pow(2,n);t.push(o);var a=1/o;4<i?a=Dc[i-8+4-1]:0==i&&(a=0);r.push(a);a=1/(o-1);o=-a/2;a=1+a/2;var s=[o,o,a,o,a,a,o,o,a,a,o,a];o=new Float32Array(108);a=new Float32Array(72);for(var u=new Float32Array(36),c=0;6>c;c++){var l=c%3*2/3-1,h=2<c?0:-1;o.set([l,h,0,l+2/3,h,0,l+2/3,h+1,0,l,h,0,l+2/3,h+1,0,l,h+1,0],18*c);a.set(s,12*c);u.set([c,c,c,c,c,c],6*c)}s=new N;s.setAttribute("position",new E(o,3));s.setAttribute("uv",new E(a,2));s.setAttribute("faceIndex",new E(u,1));e.push(s);4<n&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:r}}(),Gc=$c._lodPlanes,Vc=$c._sizeLods,Hc=$c._sigmas,Uc=null,qc=(1+Math.sqrt(5))/2,Wc=1/qc,Xc=[new Te(1,1,1),new Te(-1,1,1),new Te(1,1,-1),new Te(-1,1,-1),new Te(0,qc,Wc),new Te(0,qc,-Wc),new Te(Wc,0,qc),new Te(-Wc,0,qc),new Te(qc,Wc,0),new Te(-qc,Wc,0)];jo.prototype={constructor:jo,fromScene:function(e,t,r,n){void 0===t&&(t=0);void 0===r&&(r=.1);void 0===n&&(n=100);Uc=this._renderer.getRenderTarget();var i=this._allocateTargets();this._sceneToCubeUV(e,r,n,i);0<t&&this._blur(i,0,0,t);this._applyPMREM(i);this._cleanup(i);return i},fromEquirectangular:function(e){e.magFilter=1003;e.minFilter=1003;e.generateMipmaps=!1;return this.fromCubemap(e)},fromCubemap:function(e){Uc=this._renderer.getRenderTarget();var t=this._allocateTargets(e);this._textureToCubeUV(e,t);this._applyPMREM(t);this._cleanup(t);return t},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=No(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=Lo(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose();null!==this._cubemapShader&&this._cubemapShader.dispose();null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<Gc.length;e++)Gc[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose();this._renderer.setRenderTarget(Uc);e.scissorTest=!1;e.setSize(e.width,e.height)},_allocateTargets:function(e){var t=void 0===e||1009!==e.type?!1:3e3===e.encoding||3001===e.encoding||3007===e.encoding;t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:t?e.encoding:3002,depthBuffer:!1,stencilBuffer:!1};var r=Ro(t);r.depthBuffer=e?!1:!0;this._pingPongRenderTarget=Ro(t);return r},_compileMaterial:function(e){e=new I(Gc[0],e);this._renderer.compile(e,zc)},_sceneToCubeUV:function(e,t,r,n){t=new H(90,1,t,r);r=[1,-1,1,1,1,1];var i=[1,1,1,-1,-1,-1],o=this._renderer,a=o.outputEncoding,s=o.toneMapping,u=o.toneMappingExposure,c=o.getClearColor(),l=o.getClearAlpha();o.toneMapping=1;o.toneMappingExposure=1;o.outputEncoding=3e3;var h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();var p=Math.min(Math.max(Math.ceil(Math.log2(Math.max(h.r,h.g,h.b))),-128),127);h=h.multiplyScalar(Math.pow(2,-p));o.setClearColor(h,(p+128)/255);e.background=null}for(h=0;6>h;h++)p=h%3,0==p?(t.up.set(0,r[h],0),t.lookAt(i[h],0,0)):1==p?(t.up.set(0,0,r[h]),t.lookAt(0,i[h],0)):(t.up.set(0,r[h],0),t.lookAt(0,0,i[h])),ko(n,p*Ic,2<h?Ic:0,Ic,Ic),o.setRenderTarget(n),o.render(e,t);o.toneMapping=s;o.toneMappingExposure=u;o.outputEncoding=a;o.setClearColor(c,l)},_textureToCubeUV:function(e,t){var r=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=No()):null==this._equirectShader&&(this._equirectShader=Lo());var n=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new I(Gc[0],n);n=n.uniforms;n.envMap.value=e;e.isCubeTexture||n.texelSize.value.set(1/e.image.width,1/e.image.height);n.inputEncoding.value=Fc[e.encoding];n.outputEncoding.value=Fc[t.texture.encoding];ko(t,0,0,3*Ic,2*Ic);r.setRenderTarget(t);r.render(i,zc)},_applyPMREM:function(e){var t=this._renderer,r=t.autoClear;t.autoClear=!1;for(var n=1;n<Bc;n++)this._blur(e,n-1,n,Math.sqrt(Hc[n]*Hc[n]-Hc[n-1]*Hc[n-1]),Xc[(n-1)%Xc.length]);t.autoClear=r},_blur:function(e,t,r,n,i){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",i);this._halfBlur(o,e,r,r,n,"longitudinal",i)},_halfBlur:function(e,t,r,n,i,o,a){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new I(Gc[n],u);u=u.uniforms;var l=Vc[r]-1;l=isFinite(i)?Math.PI/(2*l):2*Math.PI/39;var h=i/l,p=isFinite(i)?1+Math.floor(3*h):20;20<p&&console.warn("sigmaRadians, "+i+", is too large and will clip, as it requested "+p+" samples when the maximum is set to 20");i=[];for(var f=0,d=0;20>d;++d){var v=d/h;v=Math.exp(-v*v/2);i.push(v);0==d?f+=v:d<p&&(f+=2*v)}for(d=0;d<i.length;d++)i[d]/=f;u.envMap.value=e.texture;u.samples.value=p;u.weights.value=i;u.latitudinal.value="latitudinal"===o;a&&(u.poleAxis.value=a);u.dTheta.value=l;u.mipInt.value=8-r;u.inputEncoding.value=Fc[e.texture.encoding];u.outputEncoding.value=Fc[e.texture.encoding];e=Vc[n];v=3*Math.max(0,Ic-2*e);ko(t,v,(0===n?0:2*Ic)+2*e*(4<n?n-8+4:0),3*e,2*e);s.setRenderTarget(t);s.render(c,zc)}};ni.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(ni.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};Object.assign(_i.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");e=this.getPoints(e);return this.createGeometry(e)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");e=this.getSpacedPoints(e);return this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new F,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Te(i.x,i.y,i.z||0))}return t}});Object.assign(yi.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(e)}});Bo.prototype=Object.create(si.prototype);Fo.prototype=Object.create(si.prototype);zo.prototype=Object.create(si.prototype);Object.assign(zo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});xo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};_o.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Yn.prototype,{extractUrlBase:function(e){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return qu.extractUrlBase(e)}});Yn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(Fi.prototype,{setTexturePath:function(e){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(e)}});Object.assign(po.prototype,{center:function(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(n.prototype,{center:function(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(l.prototype,{empty:function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});Ae.prototype.setFromMatrix=function(e){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(e)};fo.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};Object.assign(Vo,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(e){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Vo.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Vo.ceilPowerOfTwo(e)}});Object.assign(m.prototype,{flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Ee.prototype,{extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return(new Te).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,o){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,n,r,i,o)}});g.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};d.prototype.multiplyVector3=function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)};Object.assign(s.prototype,{isIntersectionBox:function(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(b.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(e,t){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(e,t)},midpoint:function(e){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(e)},normal:function(e){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(e)},plane:function(e){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(e)}});Object.assign(b,{barycoordFromPoint:function(e,t,r,n,i){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return b.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return b.getNormal(e,t,r,n)}});Object.assign(bi.prototype,{extractAllPoints:function(e){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(e)},extrude:function(e){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new tn(this,e)},makeGeometry:function(e){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new fn(this,e)}});Object.assign(Me.prototype,{fromAttribute:function(e,t,r){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Te.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function(e,t,r){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Ce.prototype,{fromAttribute:function(e,t,r){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(F.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(e)}});Object.assign(f.prototype,{getChildByName:function(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(e)}});Object.defineProperties(f.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(I.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(I.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Qt.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(tr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});er.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(ni.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=e}});H.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==t&&(this.filmGauge=t);this.setFocalLength(e)};Object.defineProperties(xi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=e}}});Object.defineProperties(E.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");return 35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Object.assign(E.prototype,{setDynamic:function(e){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===e?35048:35044);return this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(N.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e)},addAttribute:function(e,t,r){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new E(t,r)))},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(e)},applyMatrix:function(e){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(e)}});Object.defineProperties(N.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(Ii.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");return this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");this.instanceCount=e}}});Object.defineProperties(so.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");return this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");this.params.Line.threshold=e}}});Object.defineProperties(Xt.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===this.usage},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(e)}}});Object.assign(Xt.prototype,{setDynamic:function(e){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===e?35048:35044);return this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(rn.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(oo.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(y.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new v}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===e}},stencilMask:{get:function(){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead.");this.stencilFuncMask=e}}});Object.defineProperties(En.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(G.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=e}}});Object.assign(Ut.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(e);this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(e)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()}});Object.defineProperties(Ut.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return this.xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");return!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");this.outputEncoding=!0===e?3001:3e3}}});Object.defineProperties(It.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(T.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=e}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=e}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=e}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=e}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=e}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=e}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=e}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=e}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=e}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=e}}});Object.defineProperties(Ki.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;(new Hi).load(e,function(e){t.setBuffer(e)});return this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});Ji.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};U.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};Uo.crossOrigin=void 0;Uo.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ri;i.setCrossOrigin(this.crossOrigin);e=i.load(e,r,void 0,n);t&&(e.mapping=t);return e};Uo.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new ti;i.setCrossOrigin(this.crossOrigin);e=i.load(e,r,void 0,n);t&&(e.mapping=t);return e};Uo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Uo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}}));e.ACESFilmicToneMapping=5;e.AddEquation=100;e.AddOperation=2;e.AdditiveAnimationBlendMode=2501;e.AdditiveBlending=2;e.AlphaFormat=1021;e.AlwaysDepth=1;e.AlwaysStencilFunc=519;e.AmbientLight=ji;e.AmbientLightProbe=qi;e.AnimationClip=Un;e.AnimationLoader=Zn;e.AnimationMixer=io;e.AnimationObjectGroup=ro;e.AnimationUtils=Du;e.ArcCurve=oi;e.ArrayCamera=zt;e.ArrowHelper=Po;e.Audio=Ki;e.AudioAnalyser=Ji;e.AudioContext=Ju;e.AudioListener=Yi;e.AudioLoader=Hi;e.AxesHelper=Ao;e.AxisHelper=function(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Ao(e)};e.BackSide=1;e.BasicDepthPacking=3200;e.BasicShadowMap=0;e.BinaryTextureLoader=function(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Qn(e)};e.Bone=rr;e.BooleanKeyframeTrack=Bn;e.BoundingBoxHelper=function(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new To(e,t)};e.Box2=po;e.Box3=n;e.Box3Helper=Eo;e.BoxBufferGeometry=js;e.BoxGeometry=As;e.BoxHelper=To;e.BufferAttribute=E;e.BufferGeometry=N;e.BufferGeometryLoader=Bi;e.ByteType=1010;e.Cache=Bu;e.Camera=V;e.CameraHelper=Mo;e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};e.CanvasTexture=fr;e.CatmullRomCurve3=si;e.CineonToneMapping=4;e.CircleBufferGeometry=wn;e.CircleGeometry=xn;e.ClampToEdgeWrapping=1001;e.Clock=Xi;e.ClosedSplineCurve3=Bo;e.Color=v;e.ColorKeyframeTrack=Fn;e.CompressedTexture=pr;e.CompressedTextureLoader=Jn;e.ConeBufferGeometry=bn;e.ConeGeometry=yn;e.CubeCamera=U;e.CubeGeometry=As;e.CubeReflectionMapping=301;e.CubeRefractionMapping=302;e.CubeTexture=K;e.CubeTextureLoader=ti;e.CubeUVReflectionMapping=306;e.CubeUVRefractionMapping=307;e.CubicBezierCurve=hi;e.CubicBezierCurve3=pi;e.CubicInterpolant=Ln;e.CullFaceBack=1;e.CullFaceFront=2;e.CullFaceFrontBack=3;e.CullFaceNone=0;e.Curve=ni;e.CurvePath=_i;e.CustomBlending=5;e.CylinderBufferGeometry=_n;e.CylinderGeometry=gn;e.Cylindrical=ho;e.DataTexture=Pe;e.DataTexture2DArray=Z;e.DataTexture3D=J;e.DataTextureLoader=Qn;e.DecrementStencilOp=7683;e.DecrementWrapStencilOp=34056;e.DefaultLoadingManager=Fu;e.DepthFormat=1026;e.DepthStencilFormat=1027;e.DepthTexture=dr;e.DirectionalLight=Ai;e.DirectionalLightHelper=So;e.DirectionalLightShadow=Pi;e.DiscreteInterpolant=In;e.DodecahedronBufferGeometry=Er;e.DodecahedronGeometry=Tr;e.DoubleSide=2;e.DstAlphaFactor=206;e.DstColorFactor=208;e.DynamicBufferAttribute=function(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return new E(e,t).setUsage(35048)};e.DynamicCopyUsage=35050;e.DynamicDrawUsage=35048;e.DynamicReadUsage=35049;e.EdgesGeometry=mn;e.EdgesHelper=function(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new ar(new mn(e.geometry),new ir({color:void 0!==t?t:16777215}))};e.EllipseCurve=ii;e.EqualDepth=4;e.EqualStencilFunc=514;e.EquirectangularReflectionMapping=303;e.EquirectangularRefractionMapping=304;e.Euler=i;e.EventDispatcher=t;e.ExtrudeBufferGeometry=rn;e.ExtrudeGeometry=tn;e.Face3=_;e.Face4=function(e,t,r,n,i,o,a){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new _(e,t,r,i,o,a)};e.FaceColors=1;e.FileLoader=Kn;e.FlatShading=1;e.Float32Attribute=function(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new j(e,t)};e.Float32BufferAttribute=j;e.Float64Attribute=function(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new R(e,t)};e.Float64BufferAttribute=R;e.FloatType=1015;e.Fog=Wt;e.FogExp2=qt;e.Font=Gi;e.FontLoader=Vi;e.FrontFaceDirectionCCW=1;e.FrontFaceDirectionCW=0;e.FrontSide=0;e.Frustum=Ae;e.GammaEncoding=3007;e.Geometry=F;e.GeometryUtils={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var n=t.matrix;t=t.geometry}e.merge(t,n,r)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};e.GreaterDepth=6;e.GreaterEqualDepth=5;e.GreaterEqualStencilFunc=518;e.GreaterStencilFunc=516;e.GridHelper=xo;e.Group=$t;e.HalfFloatType=1016;e.HemisphereLight=wi;e.HemisphereLightHelper=bo;e.HemisphereLightProbe=Ui;e.IcosahedronBufferGeometry=Cr;e.IcosahedronGeometry=Mr;e.ImageBitmapLoader=zi;e.ImageLoader=ei;e.ImageUtils=Uo;e.ImmediateRenderObject=vo;e.IncrementStencilOp=7682;e.IncrementWrapStencilOp=34055;e.InstancedBufferAttribute=Di;e.InstancedBufferGeometry=Ii;e.InstancedInterleavedBuffer=ao;e.InstancedMesh=nr;e.Int16Attribute=function(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new C(e,t)};e.Int16BufferAttribute=C;e.Int32Attribute=function(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new P(e,t)};e.Int32BufferAttribute=P;e.Int8Attribute=function(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new w(e,t)};e.Int8BufferAttribute=w;e.IntType=1013;e.InterleavedBuffer=Xt;e.InterleavedBufferAttribute=Yt;e.Interpolant=kn;e.InterpolateDiscrete=2300;e.InterpolateLinear=2301;e.InterpolateSmooth=2302;e.InvertStencilOp=5386;e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};e.KeepStencilOp=7680;e.KeyframeTrack=Dn;e.LOD=Qt;e.LatheBufferGeometry=pn;e.LatheGeometry=hn;e.Layers=o;e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};e.LessDepth=2;e.LessEqualDepth=3;e.LessEqualStencilFunc=515;e.LessStencilFunc=513;e.Light=xi;e.LightProbe=Li;e.LightShadow=Si;e.Line=or;e.Line3=fo;e.LineBasicMaterial=ir;e.LineCurve=fi;e.LineCurve3=di;e.LineDashedMaterial=Rn;e.LineLoop=sr;e.LinePieces=1;e.LineSegments=ar;e.LineStrip=0;e.LinearEncoding=3e3;e.LinearFilter=1006;e.LinearInterpolant=Nn;e.LinearMipMapLinearFilter=1008;e.LinearMipMapNearestFilter=1007;e.LinearMipmapLinearFilter=1008;e.LinearMipmapNearestFilter=1007;e.LinearToneMapping=1;e.Loader=Yn;e.LoaderUtils=qu;e.LoadingManager=Xn;e.LogLuvEncoding=3003;e.LoopOnce=2200;e.LoopPingPong=2202;e.LoopRepeat=2201;e.LuminanceAlphaFormat=1025;e.LuminanceFormat=1024;e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};e.Material=y;e.MaterialLoader=Ni;e.Math=Vo;e.MathUtils=Vo;e.Matrix3=m;e.Matrix4=Ee;e.MaxEquation=104;e.Mesh=I;e.MeshBasicMaterial=x;e.MeshDepthMaterial=Lt;e.MeshDistanceMaterial=Nt;e.MeshFaceMaterial=function(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e};e.MeshLambertMaterial=An;e.MeshMatcapMaterial=jn;e.MeshNormalMaterial=Pn;e.MeshPhongMaterial=En;e.MeshPhysicalMaterial=Tn;e.MeshStandardMaterial=Cn;e.MeshToonMaterial=On;e.MinEquation=103;e.MirroredRepeatWrapping=1002;e.MixOperation=1;e.MultiMaterial=function(e){void 0===e&&(e=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=!0;e.materials=e;e.clone=function(){return e.slice()};return e};e.MultiplyBlending=4;e.MultiplyOperation=0;e.NearestFilter=1003;e.NearestMipMapLinearFilter=1005;e.NearestMipMapNearestFilter=1004;e.NearestMipmapLinearFilter=1005;e.NearestMipmapNearestFilter=1004;e.NeverDepth=0;e.NeverStencilFunc=512;e.NoBlending=0;e.NoColors=0;e.NoToneMapping=0;e.NormalAnimationBlendMode=2500;e.NormalBlending=1;e.NotEqualDepth=7;e.NotEqualStencilFunc=517;e.NumberKeyframeTrack=zn;e.Object3D=f;e.ObjectLoader=Fi;e.ObjectSpaceNormalMap=1;e.OctahedronBufferGeometry=Sr;e.OctahedronGeometry=wr;e.OneFactor=201;e.OneMinusDstAlphaFactor=207;e.OneMinusDstColorFactor=209;e.OneMinusSrcAlphaFactor=205;e.OneMinusSrcColorFactor=203;e.OrthographicCamera=Oi;e.PCFShadowMap=1;e.PCFSoftShadowMap=2;e.PMREMGenerator=jo;e.ParametricBufferGeometry=gr;e.ParametricGeometry=mr;e.Particle=function(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Zt(e)};e.ParticleBasicMaterial=function(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new ur(e)};e.ParticleSystem=function(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new cr(e,t)};e.ParticleSystemMaterial=function(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new ur(e)};e.Path=yi;e.PerspectiveCamera=H;e.Plane=g;e.PlaneBufferGeometry=X;e.PlaneGeometry=W;e.PlaneHelper=Oo;e.PointCloud=function(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new cr(e,t)};e.PointCloudMaterial=function(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new ur(e)};e.PointLight=Ei;e.PointLightHelper=yo;e.Points=cr;e.PointsMaterial=ur;e.PolarGridHelper=wo;e.PolyhedronBufferGeometry=yr;e.PolyhedronGeometry=_r;e.PositionalAudio=Zi;e.PropertyBinding=to;e.PropertyMixer=Qi;e.QuadraticBezierCurve=vi;e.QuadraticBezierCurve3=mi;e.Quaternion=d;e.QuaternionKeyframeTrack=Gn;e.QuaternionLinearInterpolant=$n;e.REVISION="117";e.RGBADepthPacking=3201;e.RGBAFormat=1023;e.RGBAIntegerFormat=1033;e.RGBA_ASTC_10x10_Format=37819;e.RGBA_ASTC_10x5_Format=37816;e.RGBA_ASTC_10x6_Format=37817;e.RGBA_ASTC_10x8_Format=37818;e.RGBA_ASTC_12x10_Format=37820;e.RGBA_ASTC_12x12_Format=37821;e.RGBA_ASTC_4x4_Format=37808;e.RGBA_ASTC_5x4_Format=37809;e.RGBA_ASTC_5x5_Format=37810;e.RGBA_ASTC_6x5_Format=37811;e.RGBA_ASTC_6x6_Format=37812;e.RGBA_ASTC_8x5_Format=37813;e.RGBA_ASTC_8x6_Format=37814;e.RGBA_ASTC_8x8_Format=37815;e.RGBA_BPTC_Format=36492;e.RGBA_ETC2_EAC_Format=37496;e.RGBA_PVRTC_2BPPV1_Format=35843;e.RGBA_PVRTC_4BPPV1_Format=35842;e.RGBA_S3TC_DXT1_Format=33777;e.RGBA_S3TC_DXT3_Format=33778;e.RGBA_S3TC_DXT5_Format=33779;e.RGBDEncoding=3006;e.RGBEEncoding=3002;e.RGBEFormat=1023;e.RGBFormat=1022;e.RGBIntegerFormat=1032;e.RGBM16Encoding=3005;e.RGBM7Encoding=3004;e.RGB_ETC1_Format=36196;e.RGB_ETC2_Format=37492;e.RGB_PVRTC_2BPPV1_Format=35841;e.RGB_PVRTC_4BPPV1_Format=35840;e.RGB_S3TC_DXT1_Format=33776;e.RGFormat=1030;e.RGIntegerFormat=1031;e.RawShaderMaterial=Mn;e.Ray=s;e.Raycaster=so;e.RectAreaLight=Ri;e.RedFormat=1028;e.RedIntegerFormat=1029;e.ReinhardToneMapping=2;e.RepeatWrapping=1e3;e.ReplaceStencilOp=7681;e.ReverseSubtractEquation=102;e.RingBufferGeometry=ln;e.RingGeometry=cn;e.SRGB8_ALPHA8_ASTC_10x10_Format=37851;e.SRGB8_ALPHA8_ASTC_10x5_Format=37848;e.SRGB8_ALPHA8_ASTC_10x6_Format=37849;e.SRGB8_ALPHA8_ASTC_10x8_Format=37850;e.SRGB8_ALPHA8_ASTC_12x10_Format=37852;e.SRGB8_ALPHA8_ASTC_12x12_Format=37853;e.SRGB8_ALPHA8_ASTC_4x4_Format=37840;e.SRGB8_ALPHA8_ASTC_5x4_Format=37841;e.SRGB8_ALPHA8_ASTC_5x5_Format=37842;e.SRGB8_ALPHA8_ASTC_6x5_Format=37843;e.SRGB8_ALPHA8_ASTC_6x6_Format=37844;e.SRGB8_ALPHA8_ASTC_8x5_Format=37845;e.SRGB8_ALPHA8_ASTC_8x6_Format=37846;e.SRGB8_ALPHA8_ASTC_8x8_Format=37847;e.Scene=Oe;e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};e.ShaderChunk=Is;e.ShaderLib=Ds;e.ShaderMaterial=G;e.ShadowMaterial=Sn;e.Shape=bi;e.ShapeBufferGeometry=dn;e.ShapeGeometry=fn;e.ShapePath=$i;e.ShapeUtils=ku;e.ShortType=1011;e.Skeleton=tr;e.SkeletonHelper=_o;e.SkinnedMesh=er;e.SmoothShading=2;e.Sphere=l;e.SphereBufferGeometry=un;e.SphereGeometry=sn;e.Spherical=lo;e.SphericalHarmonics3=ki;e.SphericalReflectionMapping=305;e.Spline=zo;e.SplineCurve=gi;e.SplineCurve3=Fo;e.SpotLight=Ci;e.SpotLightHelper=mo;e.SpotLightShadow=Mi;e.Sprite=Zt;e.SpriteMaterial=Kt;e.SrcAlphaFactor=204;e.SrcAlphaSaturateFactor=210;e.SrcColorFactor=202;e.StaticCopyUsage=35046;e.StaticDrawUsage=35044;e.StaticReadUsage=35045;e.StereoCamera=Wi;e.StreamCopyUsage=35042;e.StreamDrawUsage=35040;e.StreamReadUsage=35041;e.StringKeyframeTrack=Vn;e.SubtractEquation=101;e.SubtractiveBlending=3;e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};e.TangentSpaceNormalMap=0;e.TetrahedronBufferGeometry=xr;e.TetrahedronGeometry=br;e.TextBufferGeometry=an;e.TextGeometry=on;e.Texture=p;e.TextureLoader=ri;e.TorusBufferGeometry=kr;e.TorusGeometry=Rr;e.TorusKnotBufferGeometry=jr;e.TorusKnotGeometry=Ar;e.Triangle=b;e.TriangleFanDrawMode=2;e.TriangleStripDrawMode=1;e.TrianglesDrawMode=0;e.TubeBufferGeometry=Pr;e.TubeGeometry=Or;e.UVMapping=300;e.Uint16Attribute=function(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new O(e,t)};e.Uint16BufferAttribute=O;e.Uint32Attribute=function(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new A(e,t)};e.Uint32BufferAttribute=A;e.Uint8Attribute=function(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new S(e,t)};e.Uint8BufferAttribute=S;e.Uint8ClampedAttribute=function(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new M(e,t)};e.Uint8ClampedBufferAttribute=M;e.Uncharted2ToneMapping=3;e.Uniform=oo;e.UniformsLib=Ns;e.UniformsUtils=Rs;e.UnsignedByteType=1009;e.UnsignedInt248Type=1020;e.UnsignedIntType=1014;e.UnsignedShort4444Type=1017;e.UnsignedShort5551Type=1018;e.UnsignedShort565Type=1019;e.UnsignedShortType=1012;e.VSMShadowMap=3;e.Vector2=Me;e.Vector3=Te;e.Vector4=Ce;e.VectorKeyframeTrack=Hn;e.Vertex=function(e,t,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new Te(e,t,r)};e.VertexColors=2;e.VideoTexture=hr;e.WebGLCubeRenderTarget=q;e.WebGLMultisampleRenderTarget=r;e.WebGLRenderTarget=T;e.WebGLRenderTargetCube=function(e,t,r){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new q(e,r)};e.WebGLRenderer=Ut;e.WebGLUtils=Ft;e.WireframeGeometry=vr;e.WireframeHelper=function(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new ar(new vr(e.geometry),new ir({color:void 0!==t?t:16777215}))};e.WrapAroundEnding=2402;e.XHRLoader=function(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Kn(e)};e.ZeroCurvatureEnding=2400;e.ZeroFactor=200;e.ZeroSlopeEnding=2401;e.ZeroStencilOp=0;e.sRGBEncoding=3001;Object.defineProperty(e,"__esModule",{value:!0})})},{}],243:[function(e,t,r){"use strict";t.exports=n;function n(e,t){if(!(this instanceof n))return new n(e,t);this.data=e||[];this.length=this.data.length;this.compare=t||i;if(this.length>0){for(var r=this.length>>1;r>=0;r--)this._down(r)}}function i(e,t){return e<t?-1:e>t?1:0}n.prototype={push:function(e){this.data.push(e);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var e=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return e},peek:function(){return this.data[0]},_up:function(e){var t=this.data;var r=this.compare;var n=t[e];while(e>0){var i=e-1>>1;var o=t[i];if(r(n,o)>=0)break;t[e]=o;e=i}t[e]=n},_down:function(e){var t=this.data;var r=this.compare;var n=this.length;var i=n>>1;var o=t[e];while(e<i){var a=(e<<1)+1;var s=a+1;var u=t[a];if(s<n&&r(t[s],u)<0){a=s;u=t[s]}if(r(u,o)>=0)break;t[e]=u;e=a}t[e]=o}}},{}],244:[function(e,t,r){var n=e("./vdom/create-element.js");t.exports=n},{"./vdom/create-element.js":250}],245:[function(e,t,r){var n=e("./vtree/diff.js");t.exports=n},{"./vtree/diff.js":270}],246:[function(e,t,r){var n=e("./virtual-hyperscript/index.js");t.exports=n},{"./virtual-hyperscript/index.js":257}],247:[function(e,t,r){var n=e("./diff.js");var i=e("./patch.js");var o=e("./h.js");var a=e("./create-element.js");var s=e("./vnode/vnode.js");var u=e("./vnode/vtext.js");t.exports={diff:n,patch:i,h:o,create:a,VNode:s,VText:u}},{"./create-element.js":244,"./diff.js":245,"./h.js":246,"./patch.js":248,"./vnode/vnode.js":266,"./vnode/vtext.js":268}],248:[function(e,t,r){var n=e("./vdom/patch.js");t.exports=n},{"./vdom/patch.js":253}],249:[function(e,t,r){var h=e("is-object");var s=e("../vnode/is-vhook.js");t.exports=n;function n(e,t,r){for(var n in t){var i=t[n];if(i===undefined){o(e,n,i,r)}else if(s(i)){o(e,n,i,r);if(i.hook){i.hook(e,n,r?r[n]:undefined)}}else{if(h(i)){a(e,t,r,n,i)}else{e[n]=i}}}}function o(e,t,r,n){if(n){var i=n[t];if(!s(i)){if(t==="attributes"){for(var o in i){e.removeAttribute(o)}}else if(t==="style"){for(var a in i){e.style[a]=""}}else if(typeof i==="string"){e[t]=""}else{e[t]=null}}else if(i.unhook){i.unhook(e,t,r)}}}function a(e,t,r,n,i){var o=r?r[n]:undefined;if(n==="attributes"){for(var a in i){var s=i[a];if(s===undefined){e.removeAttribute(a)}else{e.setAttribute(a,s)}}return}if(o&&h(o)&&p(o)!==p(i)){e[n]=i;return}if(!h(e[n])){e[n]={}}var u=n==="style"?"":undefined;for(var c in i){var l=i[c];e[n][c]=l===undefined?u:l}}function p(e){if(Object.getPrototypeOf){return Object.getPrototypeOf(e)}else if(e.__proto__){return e.__proto__}else if(e.constructor){return e.constructor.prototype}}},{"../vnode/is-vhook.js":261,"is-object":20}],250:[function(e,t,r){var c=e("global/document");var l=e("./apply-properties");var h=e("../vnode/is-vnode.js");var p=e("../vnode/is-vtext.js");var f=e("../vnode/is-widget.js");var d=e("../vnode/handle-thunk.js");t.exports=v;function v(e,t){var r=t?t.document||c:c;var n=t?t.warn:null;e=d(e).a;if(f(e)){return e.init()}else if(p(e)){return r.createTextNode(e.text)}else if(!h(e)){if(n){n("Item is not a valid virtual dom node",e)}return null}var i=e.namespace===null?r.createElement(e.tagName):r.createElementNS(e.namespace,e.tagName);var o=e.properties;l(i,o);var a=e.children;for(var s=0;s<a.length;s++){var u=v(a[s],t);if(u){i.appendChild(u)}}return i}},{"../vnode/handle-thunk.js":259,"../vnode/is-vnode.js":262,"../vnode/is-vtext.js":263,"../vnode/is-widget.js":264,"./apply-properties":249,"global/document":16}],251:[function(e,t,r){var l={};t.exports=n;function n(e,t,r,n){if(!r||r.length===0){return{}}else{r.sort(i);return h(e,t,r,n,0)}}function h(e,t,r,n,i){n=n||{};if(e){if(p(r,i,i)){n[i]=e}var o=t.children;if(o){var a=e.childNodes;for(var s=0;s<t.children.length;s++){i+=1;var u=o[s]||l;var c=i+(u.count||0);if(p(r,i,c)){h(a[s],u,r,n,i)}i=c}}}return n}function p(e,t,r){if(e.length===0){return false}var n=0;var i=e.length-1;var o;var a;while(n<=i){o=(i+n)/2>>0;a=e[o];if(n===i){return a>=t&&a<=r}else if(a<t){n=o+1}else if(a>r){i=o-1}else{return true}}return false}function i(e,t){return e>t?1:-1}},{}],252:[function(e,t,r){var a=e("./apply-properties");var n=e("../vnode/is-widget.js");var s=e("../vnode/vpatch.js");var u=e("./update-widget");t.exports=i;function i(e,t,r){var n=e.type;var i=e.vNode;var o=e.patch;switch(n){case s.REMOVE:return c(t,i);case s.INSERT:return l(t,o,r);case s.VTEXT:return h(t,i,o,r);case s.WIDGET:return p(t,i,o,r);case s.VNODE:return f(t,i,o,r);case s.ORDER:v(t,o);return t;case s.PROPS:a(t,o,i.properties);return t;case s.THUNK:return m(t,r.patch(t,o,r));default:return t}}function c(e,t){var r=e.parentNode;if(r){r.removeChild(e)}d(e,t);return null}function l(e,t,r){var n=r.render(t,r);if(e){e.appendChild(n)}return e}function h(e,t,r,n){var i;if(e.nodeType===3){e.replaceData(0,e.length,r.text);i=e}else{var o=e.parentNode;i=n.render(r,n);if(o&&i!==e){o.replaceChild(i,e)}}return i}function p(e,t,r,n){var i=u(t,r);var o;if(i){o=r.update(t,e)||e}else{o=n.render(r,n)}var a=e.parentNode;if(a&&o!==e){a.replaceChild(o,e)}if(!i){d(e,t)}return o}function f(e,t,r,n){var i=e.parentNode;var o=n.render(r,n);if(i&&o!==e){i.replaceChild(o,e)}return o}function d(e,t){if(typeof t.destroy==="function"&&n(t)){t.destroy(e)}}function v(e,t){var r=e.childNodes;var n={};var i;var o;var a;for(var s=0;s<t.removes.length;s++){o=t.removes[s];i=r[o.from];if(o.key){n[o.key]=i}e.removeChild(i)}var u=r.length;for(var c=0;c<t.inserts.length;c++){a=t.inserts[c];i=n[a.key];e.insertBefore(i,a.to>=u++?null:r[a.to])}}function m(e,t){if(e&&t&&e!==t&&e.parentNode){e.parentNode.replaceChild(t,e)}return t}},{"../vnode/is-widget.js":264,"../vnode/vpatch.js":267,"./apply-properties":249,"./update-widget":254}],253:[function(e,t,r){var u=e("global/document");var a=e("x-is-array");var n=e("./create-element");var c=e("./dom-index");var s=e("./patch-op");t.exports=i;function i(e,t,r){r=r||{};r.patch=r.patch&&r.patch!==i?r.patch:o;r.render=r.render||n;return r.patch(e,t,r)}function o(e,t,r){var n=h(t);if(n.length===0){return e}var i=c(e,t.a,n);var o=e.ownerDocument;if(!r.document&&o!==u){r.document=o}for(var a=0;a<n.length;a++){var s=n[a];e=l(e,i[s],t[s],r)}return e}function l(e,t,r,n){if(!t){return e}var i;if(a(r)){for(var o=0;o<r.length;o++){i=s(r[o],t,n);if(t===e){e=i}}}else{i=s(r,t,n);if(t===e){e=i}}return e}function h(e){var t=[];for(var r in e){if(r!=="a"){t.push(Number(r))}}return t}},{"./create-element":250,"./dom-index":251,"./patch-op":252,"global/document":16,"x-is-array":289}],254:[function(e,t,r){var n=e("../vnode/is-widget.js");t.exports=i;function i(e,t){if(n(e)&&n(t)){if("name"in e&&"name"in t){return e.id===t.id}else{return e.init===t.init}}return false}},{"../vnode/is-widget.js":264}],255:[function(e,t,r){"use strict";var i=e("ev-store");t.exports=n;function n(e){if(!(this instanceof n)){return new n(e)}this.value=e}n.prototype.hook=function(e,t){var r=i(e);var n=t.substr(3);r[n]=this.value};n.prototype.unhook=function(e,t){var r=i(e);var n=t.substr(3);r[n]=undefined}},{"ev-store":9}],256:[function(e,t,r){"use strict";t.exports=n;function n(e){if(!(this instanceof n)){return new n(e)}this.value=e}n.prototype.hook=function(e,t){if(e[t]!==this.value){e[t]=this.value}}},{}],257:[function(e,t,r){"use strict";var o=e("x-is-array");var u=e("../vnode/vnode.js");var a=e("../vnode/vtext.js");var n=e("../vnode/is-vnode");var i=e("../vnode/is-vtext");var s=e("../vnode/is-widget");var c=e("../vnode/is-vhook");var l=e("../vnode/is-thunk");var h=e("./parse-tag.js");var p=e("./hooks/soft-set-hook.js");var f=e("./hooks/ev-hook.js");t.exports=d;function d(e,t,r){var n=[];var i,o,a,s;if(!r&&_(t)){r=t;o={}}o=o||t||{};i=h(e,o);if(o.hasOwnProperty("key")){a=o.key;o.key=undefined}if(o.hasOwnProperty("namespace")){s=o.namespace;o.namespace=undefined}if(i==="INPUT"&&!s&&o.hasOwnProperty("value")&&o.value!==undefined&&!c(o.value)){o.value=p(o.value)}m(o);if(r!==undefined&&r!==null){v(r,n,i,o)}return new u(i,o,n,a,s)}function v(e,t,r,n){if(typeof e==="string"){t.push(new a(e))}else if(typeof e==="number"){t.push(new a(String(e)))}else if(g(e)){t.push(e)}else if(o(e)){for(var i=0;i<e.length;i++){v(e[i],t,r,n)}}else if(e===null||e===undefined){return}else{throw y({foreignObject:e,parentVnode:{tagName:r,properties:n}})}}function m(e){for(var t in e){if(e.hasOwnProperty(t)){var r=e[t];if(c(r)){continue}if(t.substr(0,3)==="ev-"){e[t]=f(r)}}}}function g(e){return n(e)||i(e)||s(e)||l(e)}function _(e){return typeof e==="string"||o(e)||g(e)}function y(e){var t=new Error;t.type="virtual-hyperscript.unexpected.virtual-element";t.message="Unexpected virtual child passed to h().\n"+"Expected a VNode / Vthunk / VWidget / string but:\n"+"got:\n"+b(e.foreignObject)+".\n"+"The parent vnode is:\n"+b(e.parentVnode);"\n"+"Suggested fix: change your `h(..., [ ... ])` callsite.";t.foreignObject=e.foreignObject;t.parentVnode=e.parentVnode;return t}function b(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}},{"../vnode/is-thunk":260,"../vnode/is-vhook":261,"../vnode/is-vnode":262,"../vnode/is-vtext":263,"../vnode/is-widget":264,"../vnode/vnode.js":266,"../vnode/vtext.js":268,"./hooks/ev-hook.js":255,"./hooks/soft-set-hook.js":256,"./parse-tag.js":258,"x-is-array":289}],258:[function(e,t,r){"use strict";var c=e("browser-split");var l=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/;var h=/^\.|#/;t.exports=n;function n(e,t){if(!e){return"DIV"}var r=!t.hasOwnProperty("id");var n=c(e,l);var i=null;if(h.test(n[1])){i="DIV"}var o,a,s,u;for(u=0;u<n.length;u++){a=n[u];if(!a){continue}s=a.charAt(0);if(!i){i=a}else if(s==="."){o=o||[];o.push(a.substring(1,a.length))}else if(s==="#"&&r){t.id=a.substring(1,a.length)}}if(o){if(t.className){o.push(t.className)}t.className=o.join(" ")}return t.namespace?i:i.toUpperCase()}},{"browser-split":5}],259:[function(e,t,r){var n=e("./is-vnode");var i=e("./is-vtext");var o=e("./is-widget");var a=e("./is-thunk");t.exports=s;function s(e,t){var r=e;var n=t;if(a(t)){n=u(t,e)}if(a(e)){r=u(e,null)}return{a:r,b:n}}function u(e,t){var r=e.vnode;if(!r){r=e.vnode=e.render(t)}if(!(n(r)||i(r)||o(r))){throw new Error("thunk did not return a valid node")}return r}},{"./is-thunk":260,"./is-vnode":262,"./is-vtext":263,"./is-widget":264}],260:[function(e,t,r){t.exports=n;function n(e){return e&&e.type==="Thunk"}},{}],261:[function(e,t,r){t.exports=n;function n(e){return e&&(typeof e.hook==="function"&&!e.hasOwnProperty("hook")||typeof e.unhook==="function"&&!e.hasOwnProperty("unhook"))}},{}],262:[function(e,t,r){var n=e("./version");t.exports=i;function i(e){return e&&e.type==="VirtualNode"&&e.version===n}},{"./version":265}],263:[function(e,t,r){var n=e("./version");t.exports=i;function i(e){return e&&e.type==="VirtualText"&&e.version===n}},{"./version":265}],264:[function(e,t,r){t.exports=n;function n(e){return e&&e.type==="Widget"}},{}],265:[function(e,t,r){t.exports="2"},{}],266:[function(e,t,r){var n=e("./version");var v=e("./is-vnode");var m=e("./is-widget");var g=e("./is-thunk");var _=e("./is-vhook");t.exports=i;var y={};var b=[];function i(e,t,r,n,i){this.tagName=e;this.properties=t||y;this.children=r||b;this.key=n!=null?String(n):undefined;this.namespace=typeof i==="string"?i:null;var o=r&&r.length||0;var a=0;var s=false;var u=false;var c=false;var l;for(var h in t){if(t.hasOwnProperty(h)){var p=t[h];if(_(p)&&p.unhook){if(!l){l={}}l[h]=p}}}for(var f=0;f<o;f++){var d=r[f];if(v(d)){a+=d.count||0;if(!s&&d.hasWidgets){s=true}if(!u&&d.hasThunks){u=true}if(!c&&(d.hooks||d.descendantHooks)){c=true}}else if(!s&&m(d)){if(typeof d.destroy==="function"){s=true}}else if(!u&&g(d)){u=true}}this.count=o+a;this.hasWidgets=s;this.hasThunks=u;this.hooks=l;this.descendantHooks=c}i.prototype.version=n;i.prototype.type="VirtualNode"},{"./is-thunk":260,"./is-vhook":261,"./is-vnode":262,"./is-widget":264,"./version":265}],267:[function(e,t,r){var n=e("./version");i.NONE=0;i.VTEXT=1;i.VNODE=2;i.WIDGET=3;i.PROPS=4;i.ORDER=5;i.INSERT=6;i.REMOVE=7;i.THUNK=8;t.exports=i;function i(e,t,r){this.type=Number(e);this.vNode=t;this.patch=r}i.prototype.version=n;i.prototype.type="VirtualPatch"},{"./version":265}],268:[function(e,t,r){var n=e("./version");t.exports=i;function i(e){this.text=String(e)}i.prototype.version=n;i.prototype.type="VirtualText"},{"./version":265}],269:[function(e,t,r){var u=e("is-object");var c=e("../vnode/is-vhook");t.exports=l;function l(e,t){var r;for(var n in e){if(!(n in t)){r=r||{};r[n]=undefined}var i=e[n];var o=t[n];if(i===o){continue}else if(u(i)&&u(o)){if(h(o)!==h(i)){r=r||{};r[n]=o}else if(c(o)){r=r||{};r[n]=o}else{var a=l(i,o);if(a){r=r||{};r[n]=a}}}else{r=r||{};r[n]=o}}for(var s in t){if(!(s in e)){r=r||{};r[s]=t[s]}}return r}function h(e){if(Object.getPrototypeOf){return Object.getPrototypeOf(e)}else if(e.__proto__){return e.__proto__}else if(e.constructor){return e.constructor.prototype}}},{"../vnode/is-vhook":261,"is-object":20}],270:[function(e,t,r){var n=e("x-is-array");var d=e("../vnode/vpatch");var v=e("../vnode/is-vnode");var s=e("../vnode/is-vtext");var u=e("../vnode/is-widget");var c=e("../vnode/is-thunk");var a=e("../vnode/handle-thunk");var l=e("./diff-props");t.exports=h;function h(e,t){var r={a:e};m(e,t,r,0);return r}function m(e,t,r,n){if(e===t){return}var i=r[n];var o=false;if(c(e)||c(t)){_(e,t,r,n)}else if(t==null){if(!u(e)){f(e,r,n);i=r[n]}i=S(i,new d(d.REMOVE,e,t))}else if(v(t)){if(v(e)){if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var a=l(e.properties,t.properties);if(a){i=S(i,new d(d.PROPS,e,a))}i=p(e,t,r,i,n)}else{i=S(i,new d(d.VNODE,e,t));o=true}}else{i=S(i,new d(d.VNODE,e,t));o=true}}else if(s(t)){if(!s(e)){i=S(i,new d(d.VTEXT,e,t));o=true}else if(e.text!==t.text){i=S(i,new d(d.VTEXT,e,t))}}else if(u(t)){if(!u(e)){o=true}i=S(i,new d(d.WIDGET,e,t))}if(i){r[n]=i}if(o){f(e,r,n)}}function p(e,t,r,n,i){var o=e.children;var a=w(o,t.children);var s=a.children;var u=o.length;var c=s.length;var l=u>c?u:c;for(var h=0;h<l;h++){var p=o[h];var f=s[h];i+=1;if(!p){if(f){n=S(n,new d(d.INSERT,null,f))}}else{m(p,f,r,i)}if(v(p)&&p.count){i+=p.count}}if(a.moves){n=S(n,new d(d.ORDER,e,a.moves))}return n}function f(e,t,r){b(e,t,r);g(e,t,r)}function g(e,t,r){if(u(e)){if(typeof e.destroy==="function"){t[r]=S(t[r],new d(d.REMOVE,e,null))}}else if(v(e)&&(e.hasWidgets||e.hasThunks)){var n=e.children;var i=n.length;for(var o=0;o<i;o++){var a=n[o];r+=1;g(a,t,r);if(v(a)&&a.count){r+=a.count}}}else if(c(e)){_(e,null,t,r)}}function _(e,t,r,n){var i=a(e,t);var o=h(i.a,i.b);if(y(o)){r[n]=new d(d.THUNK,null,o)}}function y(e){for(var t in e){if(t!=="a"){return true}}return false}function b(e,t,r){if(v(e)){if(e.hooks){t[r]=S(t[r],new d(d.PROPS,e,x(e.hooks)))}if(e.descendantHooks||e.hasThunks){var n=e.children;var i=n.length;for(var o=0;o<i;o++){var a=n[o];r+=1;b(a,t,r);if(v(a)&&a.count){r+=a.count}}}}else if(c(e)){_(e,null,t,r)}}function x(e){var t={};for(var r in e){t[r]=undefined}return t}function w(e,t){var r=T(t);var n=r.keys;var i=r.free;if(i.length===t.length){return{children:t,moves:null}}var o=T(e);var a=o.keys;var s=o.free;if(s.length===e.length){return{children:t,moves:null}}var u=[];var c=0;var l=i.length;var h=0;for(var p=0;p<e.length;p++){var f=e[p];var d;if(f.key){if(n.hasOwnProperty(f.key)){d=n[f.key];u.push(t[d])}else{d=p-h++;u.push(null)}}else{if(c<l){d=i[c++];u.push(t[d])}else{d=p-h++;u.push(null)}}}var v=c>=i.length?t.length:i[c];for(var m=0;m<t.length;m++){var g=t[m];if(g.key){if(!a.hasOwnProperty(g.key)){u.push(g)}}else if(m>=v){u.push(g)}}var _=u.slice();var y=0;var b=[];var x=[];var w;for(var S=0;S<t.length;){var M=t[S];w=_[y];while(w===null&&_.length){b.push(C(_,y,null));w=_[y]}if(!w||w.key!==M.key){if(M.key){if(w&&w.key){if(n[w.key]!==S+1){b.push(C(_,y,w.key));w=_[y];if(!w||w.key!==M.key){x.push({key:M.key,to:S})}else{y++}}else{x.push({key:M.key,to:S})}}else{x.push({key:M.key,to:S})}S++}else if(w&&w.key){b.push(C(_,y,w.key))}}else{y++;S++}}while(y<_.length){w=_[y];b.push(C(_,y,w&&w.key))}if(b.length===h&&!x.length){return{children:u,moves:null}}return{children:u,moves:{removes:b,inserts:x}}}function C(e,t,r){e.splice(t,1);return{from:t,key:r}}function T(e){var t={};var r=[];var n=e.length;for(var i=0;i<n;i++){var o=e[i];if(o.key){t[o.key]=i}else{r.push(i)}}return{keys:t,free:r}}function S(e,t){if(e){if(n(e)){e.push(t)}else{e=[e,t]}return e}else{return t}}},{"../vnode/handle-thunk":259,"../vnode/is-thunk":260,"../vnode/is-vnode":262,"../vnode/is-vtext":263,"../vnode/is-widget":264,"../vnode/vpatch":267,"./diff-props":269,"x-is-array":289}],271:[function(t,r,e){(function(e){"use strict";e(function(e){var t=e("./makePromise");var r=e("./Scheduler");var n=e("./env").asap;return t({scheduler:new r(n)})})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})},{"./Scheduler":272,"./env":284,"./makePromise":286}],272:[function(e,t,r){(function(e){"use strict";e(function(){function e(e){this._async=e;this._running=false;this._queue=this;this._queueLen=0;this._afterQueue={};this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e;this.run()};e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e;this.run()};e.prototype.run=function(){if(!this._running){this._running=true;this._async(this.drain)}};e.prototype._drain=function(){var e=0;for(;e<this._queueLen;++e){this._queue[e].run();this._queue[e]=void 0}this._queueLen=0;this._running=false;for(e=0;e<this._afterQueueLen;++e){this._afterQueue[e].run();this._afterQueue[e]=void 0}this._afterQueueLen=0};return e})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],273:[function(e,t,r){(function(e){"use strict";e(function(){function t(e){Error.call(this);this.message=e;this.name=t.name;if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,t)}}t.prototype=Object.create(Error.prototype);t.prototype.constructor=t;return t})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],274:[function(e,t,r){(function(e){"use strict";e(function(){e.tryCatchResolve=t;return e;function e(a,s){if(arguments.length<2){s=t}return e;function e(e,t,r){var n=a._defer();var i=r.length;var o=new Array(i);u({f:e,thisArg:t,args:r,params:o,i:i-1,call:s},n._handler);return n}function u(e,t){if(e.i<0){return s(e.f,e.thisArg,e.params,t)}var r=a._handler(e.args[e.i]);r.fold(n,e,void 0,t)}function n(e,t,r){e.params[e.i]=t;e.i-=1;u(e,r)}}function t(e,t,r,n){try{n.resolve(e.apply(t,r))}catch(e){n.reject(e)}}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],275:[function(t,r,e){(function(e){"use strict";e(function(e){var _=e("../state");var y=e("../apply");return function e(f){var i=y(f);var r=f.resolve;var n=f.all;var o=Array.prototype.reduce;var a=Array.prototype.reduceRight;var s=Array.prototype.slice;f.any=t;f.some=u;f.settle=p;f.map=c;f.filter=l;f.reduce=v;f.reduceRight=m;f.prototype.spread=function(t){return this.then(n).then(function(e){return t.apply(this,e)})};return f;function t(e){var t=f._defer();var r=t._handler;var n=e.length>>>0;var i=n;var o=[];for(var a,s,u=0;u<n;++u){s=e[u];if(s===void 0&&!(u in e)){--i;continue}a=f._handler(s);if(a.state()>0){r.become(a);f._visitRemaining(e,u,a);break}else{a.visit(r,c,l)}}if(i===0){r.reject(new RangeError("any(): array must not be empty"))}return t;function c(e){o=null;this.resolve(e)}function l(e){if(this.resolved){return}o.push(e);if(--i===0){this.reject(o)}}}function u(e,t){var r=f._defer();var n=r._handler;var i=[];var o=[];var a=e.length>>>0;var s=0;var u;var c,l;for(l=0;l<a;++l){c=e[l];if(c===void 0&&!(l in e)){continue}++s}t=Math.max(t,0);u=s-t+1;s=Math.min(t,s);if(t>s){n.reject(new RangeError("some(): array must contain at least "+t+" item(s), but had "+s))}else if(s===0){n.resolve(i)}for(l=0;l<a;++l){c=e[l];if(c===void 0&&!(l in e)){continue}f._handler(c).visit(n,h,p,n.notify)}return r;function h(e){if(this.resolved){return}i.push(e);if(--s===0){o=null;this.resolve(i)}}function p(e){if(this.resolved){return}o.push(e);if(--u===0){i=null;this.reject(o)}}}function c(e,t){return f._traverse(t,e)}function l(e,t){var r=s.call(e);return f._traverse(t,r).then(function(e){return h(r,e)})}function h(e,t){var r=t.length;var n=new Array(r);for(var i=0,o=0;i<r;++i){if(t[i]){n[o++]=f._handler(e[i]).value}}n.length=o;return n}function p(e){return n(e.map(d))}function d(e){var t;if(e instanceof f){t=e._handler.join()}if(t&&t.state()===0||!t){return r(e).then(_.fulfilled,_.rejected)}t._unreport();return _.inspect(t)}function v(e,t){return arguments.length>2?o.call(e,g(t),arguments[2]):o.call(e,g(t))}function m(e,t){return arguments.length>2?a.call(e,g(t),arguments[2]):a.call(e,g(t))}function g(n){return function(e,t,r){return i(n,void 0,[e,t,r])}}}})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})},{"../apply":274,"../state":287}],276:[function(e,t,r){(function(e){"use strict";e(function(){return function e(t){var n=t.resolve;var i=t.reject;var r=t.prototype["catch"];t.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)};t.prototype["catch"]=t.prototype.otherwise=function(e){if(arguments.length<2){return r.call(this,e)}if(typeof e!=="function"){return this.ensure(u)}return r.call(this,o(arguments[1],e))};function o(t,r){return function(e){return c(e,r)?t.call(this,e):i(e)}}t.prototype["finally"]=t.prototype.ensure=function(t){if(typeof t!=="function"){return this}return this.then(function(e){return a(t,this,h,e)},function(e){return a(t,this,i,e)})};function a(e,t,r,n){var i=e.call(t);return l(i)?s(i,r,n):r(n)}function s(e,t,r){return n(e).then(function(){return t(r)})}t.prototype["else"]=t.prototype.orElse=function(e){return this.then(void 0,function(){return e})};t.prototype["yield"]=function(e){return this.then(function(){return e})};t.prototype.tap=function(e){return this.then(e)["yield"](this)};return t};function u(){throw new TypeError("catch predicate must be a function")}function c(e,t){return r(t)?e instanceof t:t(e)}function r(e){return e===Error||e!=null&&e.prototype instanceof Error}function l(e){return(typeof e==="object"||typeof e==="function")&&e!==null}function h(e){return e}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],277:[function(e,t,r){(function(e){"use strict";e(function(){return function e(i){i.prototype.fold=function(n,e){var t=this._beget();this._handler.fold(function(e,t,r){i._handler(e).fold(function(e,t,r){r.resolve(n.call(this,t,e))},t,this,r)},e,t._handler.receiver,t._handler);return t};return i}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],278:[function(t,r,e){(function(e){"use strict";e(function(e){var r=e("../state").inspect;return function e(t){t.prototype.inspect=function(){return r(t._handler(this))};return t}})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})},{"../state":287}],279:[function(e,t,r){(function(e){"use strict";e(function(){return function e(t){var a=t.resolve;t.iterate=r;t.unfold=s;return t;function r(t,e,r,n){return s(function(e){return[e,t(e)]},e,r,n)}function s(r,n,i,e){return a(e).then(function(t){return a(n(t)).then(function(e){return e?t:a(r(t)).spread(o)})});function o(e,t){return a(i(e)).then(function(){return s(r,n,i,t)})}}}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],280:[function(e,t,r){(function(e){"use strict";e(function(){return function e(t){t.prototype.progress=function(e){return this.then(void 0,void 0,e)};return t}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],281:[function(t,r,e){(function(e){"use strict";e(function(e){var a=e("../env");var i=e("../TimeoutError");function s(e,t,r,n){return a.setTimer(function(){e(r,n,t)},t)}return function e(t){t.prototype.delay=function(e){var t=this._beget();this._handler.fold(r,e,void 0,t._handler);return t};function r(e,t,r){s(n,e,t,r)}function n(e,t){t.resolve(e)}t.prototype.timeout=function(e,t){var r=this._beget();var n=r._handler;var i=s(o,e,t,r._handler);this._handler.visit(n,function e(t){a.clearTimer(i);this.resolve(t)},function e(t){a.clearTimer(i);this.reject(t)},n.notify);return r};function o(e,t,r){var n=typeof e==="undefined"?new i("timed out after "+r+"ms"):e;t.reject(n)}return t}})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})},{"../TimeoutError":273,"../env":284}],282:[function(t,r,e){(function(e){"use strict";e(function(e){var p=e("../env").setTimer;var f=e("../format");return function e(t){var r=v;var n=v;var i;if(typeof console!=="undefined"){i=console;r=typeof i.error!=="undefined"?function(e){i.error(e)}:function(e){i.log(e)};n=typeof i.info!=="undefined"?function(e){i.info(e)}:function(e){i.log(e)}}t.onPotentiallyUnhandledRejection=function(e){l(u,e)};t.onPotentiallyUnhandledRejectionHandled=function(e){l(c,e)};t.onFatalRejection=function(e){l(d,e.value)};var o=[];var a=[];var s=null;function u(e){if(!e.handled){a.push(e);r("Potentially unhandled rejection ["+e.id+"] "+f.formatError(e.value))}}function c(e){var t=a.indexOf(e);if(t>=0){a.splice(t,1);n("Handled previous rejection ["+e.id+"] "+f.formatObject(e.value))}}function l(e,t){o.push(e,t);if(s===null){s=p(h,0)}}function h(){s=null;while(o.length>0){o.shift()(o.shift())}}return t};function d(e){throw e}function v(){}})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})},{"../env":284,"../format":285}],283:[function(e,t,r){(function(e){"use strict";e(function(){return function e(t){t.prototype["with"]=t.prototype.withThis=function(e){var t=this._beget();var r=t._handler;r.receiver=e;this._handler.chain(r,e);return t};return t}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],284:[function(t,r,e){(function(h){(function(e){"use strict";e(function(e){var t;var r=typeof setTimeout!=="undefined"&&setTimeout;var n=function(e,t){return setTimeout(e,t)};var i=function(e){return clearTimeout(e)};var o=function(e){return r(e,0)};if(u()){o=function(e){return h.nextTick(e)}}else if(t=c()){o=l(t)}else if(!r){var a=e;var s=a("vertx");n=function(e,t){return s.setTimer(t,e)};i=s.cancelTimer;o=s.runOnLoop||s.runOnContext}return{setTimer:n,clearTimer:i,asap:o};function u(){return typeof h!=="undefined"&&Object.prototype.toString.call(h)==="[object process]"}function c(){return typeof MutationObserver!=="undefined"&&MutationObserver||typeof WebKitMutationObserver!=="undefined"&&WebKitMutationObserver}function l(e){var t;var r=document.createTextNode("");var n=new e(i);n.observe(r,{characterData:true});function i(){var e=t;t=void 0;e()}var o=0;return function(e){t=e;r.data=o^=1}}})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})}).call(this,t("_process"))},{_process:7}],285:[function(e,t,r){(function(e){"use strict";e(function(){return{formatError:e,formatObject:r,tryStringify:n};function e(e){var t=typeof e==="object"&&e!==null&&(e.stack||e.message)?e.stack||e.message:r(e);return e instanceof Error?t:t+" (WARNING: non-Error used)"}function r(e){var t=String(e);if(t==="[object Object]"&&typeof JSON!=="undefined"){t=n(e,t)}return t}function n(e,t){try{return JSON.stringify(e)}catch(e){return t}}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],286:[function(e,t,r){(function(ne){(function(e){"use strict";e(function(){return function e(t){var r=t.scheduler;var n=re();var i=Object.create||function(e){function t(){}t.prototype=e;return new t};function h(e,t){this._handler=e===S?t:o(e)}function o(e){var t=new T;try{e(r,n,i)}catch(e){n(e)}return t;function r(e){t.resolve(e)}function n(e){t.reject(e)}function i(e){t.notify(e)}}h.resolve=a;h.reject=s;h.never=u;h._defer=c;h._handler=b;function a(e){return G(e)?e:new h(S,new E(b(e)))}function s(e){return new h(S,new E(new j(e)))}function u(){return N}function c(){return new h(S,new T)}h.prototype.then=function(e,t,r){var n=this._handler;var i=n.join().state();if(typeof e!=="function"&&i>0||typeof t!=="function"&&i<0){return new this.constructor(S,n)}var o=this._beget();var a=o._handler;n.chain(a,n.receiver,e,t,r);return o};h.prototype["catch"]=function(e){return this.then(void 0,e)};h.prototype._beget=function(){return l(this._handler,this.constructor)};function l(e,t){var r=new T(e.receiver,e.join().context);return new t(S,r)}h.all=p;h.race=_;h._traverse=f;function p(e){return d(J,null,e)}function f(e,t){return d(W,e,t)}function d(n,i,o){var e=typeof i==="function"?c:l;var t=new T;var a=o.length>>>0;var s=new Array(a);for(var r=0,u;r<o.length&&!t.resolved;++r){u=o[r];if(u===void 0&&!(r in o)){--a;continue}v(o,e,r,u,t)}if(a===0){t.become(new P(s))}return new h(S,t);function c(e,t,r){if(!r.resolved){v(o,l,e,n(i,t,e),r)}}function l(e,t,r){s[e]=t;if(--a===0){r.become(new P(s))}}}function v(e,t,r,n,i){if(V(n)){var o=x(n);var a=o.state();if(a===0){o.fold(t,r,void 0,i)}else if(a>0){t(r,o.value,i)}else{i.become(o);m(e,r+1,o)}}else{t(r,n,i)}}h._visitRemaining=m;function m(e,t,r){for(var n=t;n<e.length;++n){g(b(e[n]),r)}}function g(e,t){if(e===t){return}var r=e.state();if(r===0){e.visit(e,void 0,e._unreport)}else if(r<0){e._unreport()}}function _(e){if(typeof e!=="object"||e===null){return s(new TypeError("non-iterable passed to race()"))}return e.length===0?u():e.length===1?a(e[0]):y(e)}function y(e){var t=new T;var r,n,i;for(r=0;r<e.length;++r){n=e[r];if(n===void 0&&!(r in e)){continue}i=b(n);if(i.state()!==0){t.become(i);m(e,r+1,i);break}else{i.visit(t,t.resolve,t.reject)}}return new h(S,t)}function b(e){if(G(e)){return e._handler.join()}return V(e)?w(e):new P(e)}function x(e){return G(e)?e._handler.join():w(e)}function w(e){try{var t=e.then;return typeof t==="function"?new O(t,e):new P(e)}catch(e){return new j(e)}}function S(){}S.prototype.when=S.prototype.become=S.prototype.notify=S.prototype.fail=S.prototype._unreport=S.prototype._report=Q;S.prototype._state=0;S.prototype.state=function(){return this._state};S.prototype.join=function(){var e=this;while(e.handler!==void 0){e=e.handler}return e};S.prototype.chain=function(e,t,r,n,i){this.when({resolver:e,receiver:t,fulfilled:r,rejected:n,progress:i})};S.prototype.visit=function(e,t,r,n){this.chain(C,e,t,r,n)};S.prototype.fold=function(e,t,r,n){this.when(new $(e,t,r,n))};function M(){}Z(S,M);M.prototype.become=function(e){e.fail()};var C=new M;function T(e,t){h.createContext(this,t);this.consumers=void 0;this.receiver=e;this.handler=void 0;this.resolved=false}Z(S,T);T.prototype._state=0;T.prototype.resolve=function(e){this.become(b(e))};T.prototype.reject=function(e){if(this.resolved){return}this.become(new j(e))};T.prototype.join=function(){if(!this.resolved){return this}var e=this;while(e.handler!==void 0){e=e.handler;if(e===this){return this.handler=I()}}return e};T.prototype.run=function(){var e=this.consumers;var t=this.handler;this.handler=this.handler.join();this.consumers=void 0;for(var r=0;r<e.length;++r){t.when(e[r])}};T.prototype.become=function(e){if(this.resolved){return}this.resolved=true;this.handler=e;if(this.consumers!==void 0){r.enqueue(this)}if(this.context!==void 0){e._report(this.context)}};T.prototype.when=function(e){if(this.resolved){r.enqueue(new D(e,this.handler))}else{if(this.consumers===void 0){this.consumers=[e]}else{this.consumers.push(e)}}};T.prototype.notify=function(e){if(!this.resolved){r.enqueue(new B(e,this))}};T.prototype.fail=function(e){var t=typeof e==="undefined"?this.context:e;this.resolved&&this.handler.join().fail(t)};T.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)};T.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()};function E(e){this.handler=e}Z(S,E);E.prototype.when=function(e){r.enqueue(new D(e,this))};E.prototype._report=function(e){this.join()._report(e)};E.prototype._unreport=function(){this.join()._unreport()};function O(e,t){T.call(this);r.enqueue(new F(e,t,this))}Z(T,O);function P(e){h.createContext(this);this.value=e}Z(S,P);P.prototype._state=1;P.prototype.fold=function(e,t,r,n){U(e,t,this,r,n)};P.prototype.when=function(e){H(e.fulfilled,this,e.receiver,e.resolver)};var A=0;function j(e){h.createContext(this);this.id=++A;this.value=e;this.handled=false;this.reported=false;this._report()}Z(S,j);j.prototype._state=-1;j.prototype.fold=function(e,t,r,n){n.become(this)};j.prototype.when=function(e){if(typeof e.rejected==="function"){this._unreport()}H(e.rejected,this,e.receiver,e.resolver)};j.prototype._report=function(e){r.afterQueue(new R(this,e))};j.prototype._unreport=function(){if(this.handled){return}this.handled=true;r.afterQueue(new k(this))};j.prototype.fail=function(e){this.reported=true;n("unhandledRejection",this);h.onFatalRejection(this,e===void 0?this.context:e)};function R(e,t){this.rejection=e;this.context=t}R.prototype.run=function(){if(!this.rejection.handled&&!this.rejection.reported){this.rejection.reported=true;n("unhandledRejection",this.rejection)||h.onPotentiallyUnhandledRejection(this.rejection,this.context)}};function k(e){this.rejection=e}k.prototype.run=function(){if(this.rejection.reported){n("rejectionHandled",this.rejection)||h.onPotentiallyUnhandledRejectionHandled(this.rejection)}};h.createContext=h.enterContext=h.exitContext=h.onPotentiallyUnhandledRejection=h.onPotentiallyUnhandledRejectionHandled=h.onFatalRejection=Q;var L=new S;var N=new h(S,L);function I(){return new j(new TypeError("Promise cycle"))}function D(e,t){this.continuation=e;this.handler=t}D.prototype.run=function(){this.handler.join().when(this.continuation)};function B(e,t){this.handler=t;this.value=e}B.prototype.run=function(){var e=this.handler.consumers;if(e===void 0){return}for(var t,r=0;r<e.length;++r){t=e[r];q(t.progress,this.value,this.handler,t.receiver,t.resolver)}};function F(e,t,r){this._then=e;this.thenable=t;this.resolver=r}F.prototype.run=function(){var t=this.resolver;z(this._then,this.thenable,e,r,n);function e(e){t.resolve(e)}function r(e){t.reject(e)}function n(e){t.notify(e)}};function z(e,t,r,n,i){try{e.call(t,r,n,i)}catch(e){n(e)}}function $(e,t,r,n){this.f=e;this.z=t;this.c=r;this.to=n;this.resolver=C;this.receiver=this}$.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)};$.prototype.rejected=function(e){this.to.reject(e)};$.prototype.progress=function(e){this.to.notify(e)};function G(e){return e instanceof h}function V(e){return(typeof e==="object"||typeof e==="function")&&e!==null}function H(e,t,r,n){if(typeof e!=="function"){return n.become(t)}h.enterContext(t);X(e,t.value,r,n);h.exitContext()}function U(e,t,r,n,i){if(typeof e!=="function"){return i.become(r)}h.enterContext(r);Y(e,t,r.value,n,i);h.exitContext()}function q(e,t,r,n,i){if(typeof e!=="function"){return i.notify(t)}h.enterContext(r);K(e,t,n,i);h.exitContext()}function W(e,t,r){try{return e(t,r)}catch(e){return s(e)}}function X(e,t,r,n){try{n.become(b(e.call(r,t)))}catch(e){n.become(new j(e))}}function Y(e,t,r,n,i){try{e.call(n,t,r,i)}catch(e){i.become(new j(e))}}function K(e,t,r,n){try{n.notify(e.call(r,t))}catch(e){n.notify(e)}}function Z(e,t){t.prototype=i(e.prototype);t.prototype.constructor=t}function J(e,t){return t}function Q(){}function ee(){if(typeof CustomEvent==="function"){try{var e=new CustomEvent("unhandledRejection");return e instanceof CustomEvent}catch(e){}}return false}function te(){if(typeof document!=="undefined"&&typeof document.createEvent==="function"){try{var e=document.createEvent("CustomEvent");e.initCustomEvent("eventType",false,true,{});return true}catch(e){}}return false}function re(){if(typeof ne!=="undefined"&&ne!==null&&typeof ne.emit==="function"){return function(e,t){return e==="unhandledRejection"?ne.emit(e,t.value,t):ne.emit(e,t)}}else if(typeof self!=="undefined"&&ee()){return function(n,i){return function(e,t){var r=new i(e,{detail:{reason:t.value,key:t},bubbles:false,cancelable:true});return!n.dispatchEvent(r)}}(self,CustomEvent)}else if(typeof self!=="undefined"&&te()){return function(n,i){return function(e,t){var r=i.createEvent("CustomEvent");r.initCustomEvent(e,false,true,{reason:t.value,key:t});return!n.dispatchEvent(r)}}(self,document)}return Q}return h}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})}).call(this,e("_process"))},{_process:7}],287:[function(e,t,r){(function(e){"use strict";e(function(){return{pending:r,fulfilled:i,rejected:n,inspect:e};function r(){return{state:"pending"}}function n(e){return{state:"rejected",reason:e}}function i(e){return{state:"fulfilled",value:e}}function e(e){var t=e.state();return t===0?r():t>0?i(e.value):n(e.value)}})})(typeof o==="function"&&o.amd?o:function(e){t.exports=e()})},{}],288:[function(t,r,e){(function(e){"use strict";e(function(e){var t=e("./lib/decorators/timed");var r=e("./lib/decorators/array");var n=e("./lib/decorators/flow");var i=e("./lib/decorators/fold");var o=e("./lib/decorators/inspect");var a=e("./lib/decorators/iterate");var s=e("./lib/decorators/progress");var u=e("./lib/decorators/with");var c=e("./lib/decorators/unhandledRejection");var l=e("./lib/TimeoutError");var h=[r,n,i,a,s,o,u,t,c].reduce(function(e,t){return t(e)},e("./lib/Promise"));var p=e("./lib/apply")(h);f.promise=d;f.resolve=h.resolve;f.reject=h.reject;f.lift=v;f["try"]=m;f.attempt=m;f.iterate=h.iterate;f.unfold=h.unfold;f.join=b;f.all=x;f.settle=w;f.any=v(h.any);f.some=v(h.some);f.race=v(h.race);f.map=S;f.filter=M;f.reduce=v(h.reduce);f.reduceRight=v(h.reduceRight);f.isPromiseLike=y;f.Promise=h;f.defer=g;f.TimeoutError=l;function f(e,t,r,n){var i=h.resolve(e);if(arguments.length<2){return i}return i.then(t,r,n)}function d(e){return new h(e)}function v(n){return function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;++e){r[e]=arguments[e]}return p(n,this,r)}}function m(e){for(var t=0,r=arguments.length-1,n=new Array(r);t<r;++t){n[t]=arguments[t+1]}return p(e,this,n)}function g(){return new _}function _(){var t=h._defer();function e(e){t._handler.resolve(e)}function r(e){t._handler.reject(e)}function n(e){t._handler.notify(e)}this.promise=t;this.resolve=e;this.reject=r;this.notify=n;this.resolver={resolve:e,reject:r,notify:n}}function y(e){return e&&typeof e.then==="function"}function b(){return h.all(arguments)}function x(e){return f(e,h.all)}function w(e){return f(e,h.settle)}function S(e,t){return f(e,function(e){return h.map(e,t)})}function M(e,t){return f(e,function(e){return h.filter(e,t)})}return f})})(typeof o==="function"&&o.amd?o:function(e){r.exports=e(t)})},{"./lib/Promise":271,"./lib/TimeoutError":273,"./lib/apply":274,"./lib/decorators/array":275,"./lib/decorators/flow":276,"./lib/decorators/fold":277,"./lib/decorators/inspect":278,"./lib/decorators/iterate":279,"./lib/decorators/progress":280,"./lib/decorators/timed":281,"./lib/decorators/unhandledRejection":282,"./lib/decorators/with":283}],289:[function(e,t,r){var n=Array.isArray;var i=Object.prototype.toString;t.exports=n||o;function o(e){return i.call(e)==="[object Array]"}},{}],290:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./api/APIv3");Object.defineProperty(r,"APIv3",{enumerable:true,get:function(){return o.APIv3}});var a=e("./api/ModelCreator");Object.defineProperty(r,"ModelCreator",{enumerable:true,get:function(){return a.ModelCreator}});i(e("./api/interfaces/interfaces"),r)},{"./api/APIv3":303,"./api/ModelCreator":304,"./api/interfaces/interfaces":305}],291:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});r.ImageBoundary=void 0;var o=e("./component/Component");Object.defineProperty(r,"Component",{enumerable:true,get:function(){return o.Component}});var a=e("./component/ComponentService");Object.defineProperty(r,"ComponentService",{enumerable:true,get:function(){return a.ComponentService}});var s=e("./component/utils/HandlerBase");Object.defineProperty(r,"HandlerBase",{enumerable:true,get:function(){return s.HandlerBase}});var u=e("./component/utils/MeshFactory");Object.defineProperty(r,"MeshFactory",{enumerable:true,get:function(){return u.MeshFactory}});var c=e("./component/utils/MeshScene");Object.defineProperty(r,"MeshScene",{enumerable:true,get:function(){return c.MeshScene}});var l=e("./component/utils/MouseOperator");Object.defineProperty(r,"MouseOperator",{enumerable:true,get:function(){return l.MouseOperator}});var h=e("./component/utils/ComponentSize");Object.defineProperty(r,"ComponentSize",{enumerable:true,get:function(){return h.ComponentSize}});var p=e("./component/AttributionComponent");Object.defineProperty(r,"AttributionComponent",{enumerable:true,get:function(){return p.AttributionComponent}});var f=e("./component/BackgroundComponent");Object.defineProperty(r,"BackgroundComponent",{enumerable:true,get:function(){return f.BackgroundComponent}});var d=e("./component/BearingComponent");Object.defineProperty(r,"BearingComponent",{enumerable:true,get:function(){return d.BearingComponent}});var v=e("./component/CacheComponent");Object.defineProperty(r,"CacheComponent",{enumerable:true,get:function(){return v.CacheComponent}});var m=e("./component/CoverComponent");Object.defineProperty(r,"CoverComponent",{enumerable:true,get:function(){return m.CoverComponent}});var g=e("./component/DebugComponent");Object.defineProperty(r,"DebugComponent",{enumerable:true,get:function(){return g.DebugComponent}});var _=e("./component/direction/DirectionComponent");Object.defineProperty(r,"DirectionComponent",{enumerable:true,get:function(){return _.DirectionComponent}});var y=e("./component/direction/DirectionDOMCalculator");Object.defineProperty(r,"DirectionDOMCalculator",{enumerable:true,get:function(){return y.DirectionDOMCalculator}});var b=e("./component/direction/DirectionDOMRenderer");Object.defineProperty(r,"DirectionDOMRenderer",{enumerable:true,get:function(){return b.DirectionDOMRenderer}});var x=e("./component/ImageComponent");Object.defineProperty(r,"ImageComponent",{enumerable:true,get:function(){return x.ImageComponent}});var w=e("./component/keyboard/KeyboardComponent");Object.defineProperty(r,"KeyboardComponent",{enumerable:true,get:function(){return w.KeyboardComponent}});var S=e("./component/keyboard/KeyPlayHandler");Object.defineProperty(r,"KeyPlayHandler",{enumerable:true,get:function(){return S.KeyPlayHandler}});var M=e("./component/keyboard/KeyZoomHandler");Object.defineProperty(r,"KeyZoomHandler",{enumerable:true,get:function(){return M.KeyZoomHandler}});var C=e("./component/keyboard/KeySequenceNavigationHandler");Object.defineProperty(r,"KeySequenceNavigationHandler",{enumerable:true,get:function(){return C.KeySequenceNavigationHandler}});var T=e("./component/keyboard/KeySpatialNavigationHandler");Object.defineProperty(r,"KeySpatialNavigationHandler",{enumerable:true,get:function(){return T.KeySpatialNavigationHandler}});var E=e("./component/LoadingComponent");Object.defineProperty(r,"LoadingComponent",{enumerable:true,get:function(){return E.LoadingComponent}});var O=e("./component/marker/marker/Marker");Object.defineProperty(r,"Marker",{enumerable:true,get:function(){return O.Marker}});var P=e("./component/marker/MarkerComponent");Object.defineProperty(r,"MarkerComponent",{enumerable:true,get:function(){return P.MarkerComponent}});var A=e("./component/marker/MarkerScene");Object.defineProperty(r,"MarkerScene",{enumerable:true,get:function(){return A.MarkerScene}});var j=e("./component/marker/MarkerSet");Object.defineProperty(r,"MarkerSet",{enumerable:true,get:function(){return j.MarkerSet}});var R=e("./component/mouse/MouseComponent");Object.defineProperty(r,"MouseComponent",{enumerable:true,get:function(){return R.MouseComponent}});i(e("./component/mouse/HandlerTypes"),r);var k=e("./component/mouse/BounceHandler");Object.defineProperty(r,"BounceHandler",{enumerable:true,get:function(){return k.BounceHandler}});var L=e("./component/mouse/DragPanHandler");Object.defineProperty(r,"DragPanHandler",{enumerable:true,get:function(){return L.DragPanHandler}});var N=e("./component/mouse/DoubleClickZoomHandler");Object.defineProperty(r,"DoubleClickZoomHandler",{enumerable:true,get:function(){return N.DoubleClickZoomHandler}});var I=e("./component/mouse/EarthControlHandler");Object.defineProperty(r,"EarthControlHandler",{enumerable:true,get:function(){return I.EarthControlHandler}});var D=e("./component/mouse/ScrollZoomHandler");Object.defineProperty(r,"ScrollZoomHandler",{enumerable:true,get:function(){return D.ScrollZoomHandler}});var B=e("./component/mouse/TouchZoomHandler");Object.defineProperty(r,"TouchZoomHandler",{enumerable:true,get:function(){return B.TouchZoomHandler}});var F=e("./component/mouse/ImageBoundary");r.ImageBoundary=F;var z=e("./component/popup/popup/Popup");Object.defineProperty(r,"Popup",{enumerable:true,get:function(){return z.Popup}});var $=e("./component/popup/PopupComponent");Object.defineProperty(r,"PopupComponent",{enumerable:true,get:function(){return $.PopupComponent}});var G=e("./component/NavigationComponent");Object.defineProperty(r,"NavigationComponent",{enumerable:true,get:function(){return G.NavigationComponent}});var V=e("./component/RouteComponent");Object.defineProperty(r,"RouteComponent",{enumerable:true,get:function(){return V.RouteComponent}});var H=e("./component/sequence/SequenceComponent");Object.defineProperty(r,"SequenceComponent",{enumerable:true,get:function(){return H.SequenceComponent}});var U=e("./component/sequence/SequenceDOMRenderer");Object.defineProperty(r,"SequenceDOMRenderer",{enumerable:true,get:function(){return U.SequenceDOMRenderer}});var q=e("./component/sequence/SequenceMode");Object.defineProperty(r,"SequenceMode",{enumerable:true,get:function(){return q.SequenceMode}});var W=e("./component/spatialdata/SpatialDataCache");Object.defineProperty(r,"SpatialDataCache",{enumerable:true,get:function(){return W.SpatialDataCache}});var X=e("./component/spatialdata/SpatialDataComponent");Object.defineProperty(r,"SpatialDataComponent",{enumerable:true,get:function(){return X.SpatialDataComponent}});var Y=e("./component/spatialdata/SpatialDataScene");Object.defineProperty(r,"SpatialDataScene",{enumerable:true,get:function(){return Y.SpatialDataScene}});var K=e("./component/imageplane/ImagePlaneComponent");Object.defineProperty(r,"ImagePlaneComponent",{enumerable:true,get:function(){return K.ImagePlaneComponent}});var Z=e("./component/imageplane/ImagePlaneGLRenderer");Object.defineProperty(r,"ImagePlaneGLRenderer",{enumerable:true,get:function(){return Z.ImagePlaneGLRenderer}});var J=e("./component/shaders/Shaders");Object.defineProperty(r,"Shaders",{enumerable:true,get:function(){return J.Shaders}});var Q=e("./component/marker/marker/SimpleMarker");Object.defineProperty(r,"SimpleMarker",{enumerable:true,get:function(){return Q.SimpleMarker}});var ee=e("./component/marker/marker/CircleMarker");Object.defineProperty(r,"CircleMarker",{enumerable:true,get:function(){return ee.CircleMarker}});var te=e("./component/slider/SliderComponent");Object.defineProperty(r,"SliderComponent",{enumerable:true,get:function(){return te.SliderComponent}});var re=e("./component/slider/SliderDOMRenderer");Object.defineProperty(r,"SliderDOMRenderer",{enumerable:true,get:function(){return re.SliderDOMRenderer}});var ne=e("./component/slider/SliderGLRenderer");Object.defineProperty(r,"SliderGLRenderer",{enumerable:true,get:function(){return ne.SliderGLRenderer}});var ie=e("./component/StatsComponent");Object.defineProperty(r,"StatsComponent",{enumerable:true,get:function(){return ie.StatsComponent}});var oe=e("./component/tag/handlers/TagHandlerBase");Object.defineProperty(r,"TagHandlerBase",{enumerable:true,get:function(){return oe.TagHandlerBase}});var ae=e("./component/tag/handlers/CreateHandlerBase");Object.defineProperty(r,"CreateHandlerBase",{enumerable:true,get:function(){return ae.CreateHandlerBase}});var se=e("./component/tag/handlers/CreatePointHandler");Object.defineProperty(r,"CreatePointHandler",{enumerable:true,get:function(){return se.CreatePointHandler}});var ue=e("./component/tag/handlers/CreateVertexHandler");Object.defineProperty(r,"CreateVertexHandler",{enumerable:true,get:function(){return ue.CreateVertexHandler}});var ce=e("./component/tag/handlers/CreatePointsHandler");Object.defineProperty(r,"CreatePointsHandler",{enumerable:true,get:function(){return ce.CreatePointsHandler}});var le=e("./component/tag/handlers/CreatePolygonHandler");Object.defineProperty(r,"CreatePolygonHandler",{enumerable:true,get:function(){return le.CreatePolygonHandler}});var he=e("./component/tag/handlers/CreateRectHandler");Object.defineProperty(r,"CreateRectHandler",{enumerable:true,get:function(){return he.CreateRectHandler}});var pe=e("./component/tag/handlers/CreateRectDragHandler");Object.defineProperty(r,"CreateRectDragHandler",{enumerable:true,get:function(){return pe.CreateRectDragHandler}});var fe=e("./component/tag/handlers/EditVertexHandler");Object.defineProperty(r,"EditVertexHandler",{enumerable:true,get:function(){return fe.EditVertexHandler}});var de=e("./component/tag/tag/Tag");Object.defineProperty(r,"Tag",{enumerable:true,get:function(){return de.Tag}});var ve=e("./component/tag/tag/OutlineTag");Object.defineProperty(r,"OutlineTag",{enumerable:true,get:function(){return ve.OutlineTag}});var me=e("./component/tag/tag/ExtremePointTag");Object.defineProperty(r,"ExtremePointTag",{enumerable:true,get:function(){return me.ExtremePointTag}});var ge=e("./component/tag/tag/RenderTag");Object.defineProperty(r,"RenderTag",{enumerable:true,get:function(){return ge.RenderTag}});var _e=e("./component/tag/tag/OutlineRenderTagBase");Object.defineProperty(r,"OutlineRenderTagBase",{enumerable:true,get:function(){return _e.OutlineRenderTagBase}});var ye=e("./component/tag/tag/OutlineRenderTag");Object.defineProperty(r,"OutlineRenderTag",{enumerable:true,get:function(){return ye.OutlineRenderTag}});var be=e("./component/tag/tag/ExtremePointRenderTag");Object.defineProperty(r,"ExtremePointRenderTag",{enumerable:true,get:function(){return be.ExtremePointRenderTag}});var xe=e("./component/tag/tag/SpotTag");Object.defineProperty(r,"SpotTag",{enumerable:true,get:function(){return xe.SpotTag}});var we=e("./component/tag/tag/SpotRenderTag");Object.defineProperty(r,"SpotRenderTag",{enumerable:true,get:function(){return we.SpotRenderTag}});var Se=e("./component/tag/tag/TagDomain");Object.defineProperty(r,"TagDomain",{enumerable:true,get:function(){return Se.TagDomain}});var Me=e("./component/tag/TagComponent");Object.defineProperty(r,"TagComponent",{enumerable:true,get:function(){return Me.TagComponent}});var Ce=e("./component/tag/TagCreator");Object.defineProperty(r,"TagCreator",{enumerable:true,get:function(){return Ce.TagCreator}});var Te=e("./component/tag/TagDOMRenderer");Object.defineProperty(r,"TagDOMRenderer",{enumerable:true,get:function(){return Te.TagDOMRenderer}});var Ee=e("./component/tag/TagMode");Object.defineProperty(r,"TagMode",{enumerable:true,get:function(){return Ee.TagMode}});var Oe=e("./component/tag/TagOperation");Object.defineProperty(r,"TagOperation",{enumerable:true,get:function(){return Oe.TagOperation}});var Pe=e("./component/tag/TagScene");Object.defineProperty(r,"TagScene",{enumerable:true,get:function(){return Pe.TagScene}});var Ae=e("./component/tag/TagSet");Object.defineProperty(r,"TagSet",{enumerable:true,get:function(){return Ae.TagSet}});var je=e("./component/tag/geometry/Geometry");Object.defineProperty(r,"Geometry",{enumerable:true,get:function(){return je.Geometry}});var Re=e("./component/tag/geometry/VertexGeometry");Object.defineProperty(r,"VertexGeometry",{enumerable:true,get:function(){return Re.VertexGeometry}});var ke=e("./component/tag/geometry/RectGeometry");Object.defineProperty(r,"RectGeometry",{enumerable:true,get:function(){return ke.RectGeometry}});var Le=e("./component/tag/geometry/PointGeometry");Object.defineProperty(r,"PointGeometry",{enumerable:true,get:function(){return Le.PointGeometry}});var Ne=e("./component/tag/geometry/PointsGeometry");Object.defineProperty(r,"PointsGeometry",{enumerable:true,get:function(){return Ne.PointsGeometry}});var Ie=e("./component/tag/geometry/PolygonGeometry");Object.defineProperty(r,"PolygonGeometry",{enumerable:true,get:function(){return Ie.PolygonGeometry}});var De=e("./component/tag/error/GeometryTagError");Object.defineProperty(r,"GeometryTagError",{enumerable:true,get:function(){return De.GeometryTagError}});var Be=e("./component/zoom/ZoomComponent");Object.defineProperty(r,"ZoomComponent",{enumerable:true,get:function(){return Be.ZoomComponent}});var Fe=e("./component/tag/tag/CreateTag");Object.defineProperty(r,"CreateTag",{enumerable:true,get:function(){return Fe.CreateTag}});var ze=e("./component/tag/tag/OutlineCreateTag");Object.defineProperty(r,"OutlineCreateTag",{enumerable:true,get:function(){return ze.OutlineCreateTag}});var $e=e("./component/tag/tag/ExtremePointCreateTag");Object.defineProperty(r,"ExtremePointCreateTag",{enumerable:true,get:function(){return $e.ExtremePointCreateTag}});i(e("./component/interfaces/interfaces"),r)},{"./component/AttributionComponent":306,"./component/BackgroundComponent":307,"./component/BearingComponent":308,"./component/CacheComponent":309,"./component/Component":310,"./component/ComponentService":311,"./component/CoverComponent":312,"./component/DebugComponent":313,"./component/ImageComponent":314,"./component/LoadingComponent":315,"./component/NavigationComponent":316,"./component/RouteComponent":317,"./component/StatsComponent":318,"./component/direction/DirectionComponent":319,"./component/direction/DirectionDOMCalculator":320,"./component/direction/DirectionDOMRenderer":321,"./component/imageplane/ImagePlaneComponent":322,"./component/imageplane/ImagePlaneGLRenderer":323,"./component/interfaces/interfaces":327,"./component/keyboard/KeyPlayHandler":328,"./component/keyboard/KeySequenceNavigationHandler":329,"./component/keyboard/KeySpatialNavigationHandler":330,"./component/keyboard/KeyZoomHandler":331,"./component/keyboard/KeyboardComponent":332,"./component/marker/MarkerComponent":334,"./component/marker/MarkerScene":335,"./component/marker/MarkerSet":336,"./component/marker/marker/CircleMarker":338,"./component/marker/marker/Marker":339,"./component/marker/marker/SimpleMarker":340,"./component/mouse/BounceHandler":341,"./component/mouse/DoubleClickZoomHandler":342,"./component/mouse/DragPanHandler":343,"./component/mouse/EarthControlHandler":344,"./component/mouse/HandlerTypes":345,"./component/mouse/ImageBoundary":346,"./component/mouse/MouseComponent":347,"./component/mouse/ScrollZoomHandler":348,"./component/mouse/TouchZoomHandler":349,"./component/popup/PopupComponent":351,"./component/popup/popup/Popup":352,"./component/sequence/SequenceComponent":353,"./component/sequence/SequenceDOMRenderer":354,"./component/sequence/SequenceMode":355,"./component/shaders/Shaders":356,"./component/slider/SliderComponent":357,"./component/slider/SliderDOMRenderer":358,"./component/slider/SliderGLRenderer":359,"./component/spatialdata/SpatialDataCache":362,"./component/spatialdata/SpatialDataComponent":363,"./component/spatialdata/SpatialDataScene":364,"./component/tag/TagComponent":367,"./component/tag/TagCreator":368,"./component/tag/TagDOMRenderer":369,"./component/tag/TagMode":370,"./component/tag/TagOperation":371,"./component/tag/TagScene":372,"./component/tag/TagSet":373,"./component/tag/error/GeometryTagError":374,"./component/tag/geometry/Geometry":375,"./component/tag/geometry/PointGeometry":376,"./component/tag/geometry/PointsGeometry":377,"./component/tag/geometry/PolygonGeometry":378,"./component/tag/geometry/RectGeometry":379,"./component/tag/geometry/VertexGeometry":380,"./component/tag/handlers/CreateHandlerBase":381,"./component/tag/handlers/CreatePointHandler":382,"./component/tag/handlers/CreatePointsHandler":383,"./component/tag/handlers/CreatePolygonHandler":384,"./component/tag/handlers/CreateRectDragHandler":385,"./component/tag/handlers/CreateRectHandler":386,"./component/tag/handlers/CreateVertexHandler":387,"./component/tag/handlers/EditVertexHandler":388,"./component/tag/handlers/TagHandlerBase":389,"./component/tag/tag/CreateTag":391,"./component/tag/tag/ExtremePointCreateTag":392,"./component/tag/tag/ExtremePointRenderTag":393,"./component/tag/tag/ExtremePointTag":394,"./component/tag/tag/OutlineCreateTag":395,"./component/tag/tag/OutlineRenderTag":396,"./component/tag/tag/OutlineRenderTagBase":397,"./component/tag/tag/OutlineTag":398,"./component/tag/tag/RenderTag":399,"./component/tag/tag/SpotRenderTag":400,"./component/tag/tag/SpotTag":401,"./component/tag/tag/Tag":402,"./component/tag/tag/TagDomain":403,"./component/utils/ComponentSize":404,"./component/utils/HandlerBase":405,"./component/utils/MeshFactory":406,"./component/utils/MeshScene":407,"./component/utils/MouseOperator":408,"./component/zoom/ZoomComponent":409}],292:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./graph/edge/EdgeDirection");Object.defineProperty(r,"EdgeDirection",{enumerable:true,get:function(){return o.EdgeDirection}});var a=e("./graph/edge/EdgeCalculatorSettings");Object.defineProperty(r,"EdgeCalculatorSettings",{enumerable:true,get:function(){return a.EdgeCalculatorSettings}});var s=e("./graph/edge/EdgeCalculatorDirections");Object.defineProperty(r,"EdgeCalculatorDirections",{enumerable:true,get:function(){return s.EdgeCalculatorDirections}});var u=e("./graph/edge/EdgeCalculatorCoefficients");Object.defineProperty(r,"EdgeCalculatorCoefficients",{enumerable:true,get:function(){return u.EdgeCalculatorCoefficients}});var c=e("./graph/edge/EdgeCalculator");Object.defineProperty(r,"EdgeCalculator",{enumerable:true,get:function(){return c.EdgeCalculator}});i(e("./graph/edge/interfaces/interfaces"),r)},{"./graph/edge/EdgeCalculator":433,"./graph/edge/EdgeCalculatorCoefficients":434,"./graph/edge/EdgeCalculatorDirections":435,"./graph/edge/EdgeCalculatorSettings":436,"./graph/edge/EdgeDirection":437,"./graph/edge/interfaces/interfaces":438}],293:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./error/AbortMapillaryError");Object.defineProperty(r,"AbortMapillaryError",{enumerable:true,get:function(){return n.AbortMapillaryError}});var i=e("./error/ArgumentMapillaryError");Object.defineProperty(r,"ArgumentMapillaryError",{enumerable:true,get:function(){return i.ArgumentMapillaryError}});var o=e("./error/GraphMapillaryError");Object.defineProperty(r,"GraphMapillaryError",{enumerable:true,get:function(){return o.GraphMapillaryError}});var a=e("./error/MapillaryError");Object.defineProperty(r,"MapillaryError",{enumerable:true,get:function(){return a.MapillaryError}})},{"./error/AbortMapillaryError":410,"./error/ArgumentMapillaryError":411,"./error/GraphMapillaryError":412,"./error/MapillaryError":413}],294:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});r.Lines=r.Geo=void 0;var o=e("./geo/Camera");Object.defineProperty(r,"Camera",{enumerable:true,get:function(){return o.Camera}});var a=e("./geo/GeoCoords");Object.defineProperty(r,"GeoCoords",{enumerable:true,get:function(){return a.GeoCoords}});var s=e("./geo/GeoRBush");Object.defineProperty(r,"GeoRBush",{enumerable:true,get:function(){return s.GeoRBush}});var u=e("./geo/ViewportCoords");Object.defineProperty(r,"ViewportCoords",{enumerable:true,get:function(){return u.ViewportCoords}});var c=e("./geo/Spatial");Object.defineProperty(r,"Spatial",{enumerable:true,get:function(){return c.Spatial}});var l=e("./geo/Transform");Object.defineProperty(r,"Transform",{enumerable:true,get:function(){return l.Transform}});i(e("./geo/interfaces/interfaces"),r);var h=e("./geo/Geo");r.Geo=h;var p=e("./geo/Lines");r.Lines=p},{"./geo/Camera":414,"./geo/Geo":415,"./geo/GeoCoords":416,"./geo/GeoRBush":417,"./geo/Lines":418,"./geo/Spatial":419,"./geo/Transform":420,"./geo/ViewportCoords":421,"./geo/interfaces/interfaces":422}],295:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./graph/FilterCreator");Object.defineProperty(r,"FilterCreator",{enumerable:true,get:function(){return o.FilterCreator}});var a=e("./graph/Graph");Object.defineProperty(r,"Graph",{enumerable:true,get:function(){return a.Graph}});var s=e("./graph/GraphCalculator");Object.defineProperty(r,"GraphCalculator",{enumerable:true,get:function(){return s.GraphCalculator}});var u=e("./graph/GraphMode");Object.defineProperty(r,"GraphMode",{enumerable:true,get:function(){return u.GraphMode}});var c=e("./graph/GraphService");Object.defineProperty(r,"GraphService",{enumerable:true,get:function(){return c.GraphService}});var l=e("./graph/ImageLoadingService");Object.defineProperty(r,"ImageLoadingService",{enumerable:true,get:function(){return l.ImageLoadingService}});var h=e("./graph/MeshReader");Object.defineProperty(r,"MeshReader",{enumerable:true,get:function(){return h.MeshReader}});var p=e("./graph/Node");Object.defineProperty(r,"Node",{enumerable:true,get:function(){return p.Node}});var f=e("./graph/NodeCache");Object.defineProperty(r,"NodeCache",{enumerable:true,get:function(){return f.NodeCache}});var d=e("./graph/Sequence");Object.defineProperty(r,"Sequence",{enumerable:true,get:function(){return d.Sequence}});i(e("./graph/interfaces/interfaces"),r)},{"./graph/FilterCreator":423,"./graph/Graph":424,"./graph/GraphCalculator":425,"./graph/GraphMode":426,"./graph/GraphService":427,"./graph/ImageLoadingService":428,"./graph/MeshReader":429,"./graph/Node":430,"./graph/NodeCache":431,"./graph/Sequence":432,"./graph/interfaces/interfaces":439}],296:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});r.SpatialDataComponent=r.PopupComponent=r.MarkerComponent=r.TagComponent=void 0;i(e("./Support"),r);var o=e("./Edge");Object.defineProperty(r,"EdgeDirection",{enumerable:true,get:function(){return o.EdgeDirection}});var a=e("./Error");Object.defineProperty(r,"AbortMapillaryError",{enumerable:true,get:function(){return a.AbortMapillaryError}});var s=e("./Render");Object.defineProperty(r,"RenderMode",{enumerable:true,get:function(){return s.RenderMode}});var u=e("./State");Object.defineProperty(r,"TransitionMode",{enumerable:true,get:function(){return u.TransitionMode}});var c=e("./Viewer");Object.defineProperty(r,"Alignment",{enumerable:true,get:function(){return c.Alignment}});Object.defineProperty(r,"ImageSize",{enumerable:true,get:function(){return c.ImageSize}});Object.defineProperty(r,"Viewer",{enumerable:true,get:function(){return c.Viewer}});var l=e("./Component");Object.defineProperty(r,"SliderMode",{enumerable:true,get:function(){return l.SliderMode}});Object.defineProperty(r,"ComponentSize",{enumerable:true,get:function(){return l.ComponentSize}});var h=e("./component/tag/Tag");r.TagComponent=h;var p=e("./component/marker/Marker");r.MarkerComponent=p;var f=e("./component/popup/Popup");r.PopupComponent=f;var d=e("./component/spatialdata/SpatialData");r.SpatialDataComponent=d},{"./Component":291,"./Edge":292,"./Error":293,"./Render":297,"./State":298,"./Support":299,"./Viewer":302,"./component/marker/Marker":333,"./component/popup/Popup":350,"./component/spatialdata/SpatialData":361,"./component/tag/Tag":366}],297:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./render/DOMRenderer");Object.defineProperty(r,"DOMRenderer",{enumerable:true,get:function(){return o.DOMRenderer}});var a=e("./render/GLRenderer");Object.defineProperty(r,"GLRenderer",{enumerable:true,get:function(){return a.GLRenderer}});var s=e("./render/GLRenderStage");Object.defineProperty(r,"GLRenderStage",{enumerable:true,get:function(){return s.GLRenderStage}});var u=e("./render/RenderCamera");Object.defineProperty(r,"RenderCamera",{enumerable:true,get:function(){return u.RenderCamera}});var c=e("./render/RenderMode");Object.defineProperty(r,"RenderMode",{enumerable:true,get:function(){return c.RenderMode}});var l=e("./render/RenderService");Object.defineProperty(r,"RenderService",{enumerable:true,get:function(){return l.RenderService}});i(e("./render/interfaces/interfaces"),r)},{"./render/DOMRenderer":440,"./render/GLRenderStage":441,"./render/GLRenderer":442,"./render/RenderCamera":443,"./render/RenderMode":444,"./render/RenderService":445,"./render/interfaces/interfaces":446}],298:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./state/FrameGenerator");Object.defineProperty(r,"FrameGenerator",{enumerable:true,get:function(){return o.FrameGenerator}});var a=e("./state/RotationDelta");Object.defineProperty(r,"RotationDelta",{enumerable:true,get:function(){return a.RotationDelta}});var s=e("./state/State");Object.defineProperty(r,"State",{enumerable:true,get:function(){return s.State}});var u=e("./state/states/StateBase");Object.defineProperty(r,"StateBase",{enumerable:true,get:function(){return u.StateBase}});var c=e("./state/StateContext");Object.defineProperty(r,"StateContext",{enumerable:true,get:function(){return c.StateContext}});var l=e("./state/StateService");Object.defineProperty(r,"StateService",{enumerable:true,get:function(){return l.StateService}});var h=e("./state/TransitionMode");Object.defineProperty(r,"TransitionMode",{enumerable:true,get:function(){return h.TransitionMode}});var p=e("./state/states/EarthState");Object.defineProperty(r,"EarthState",{enumerable:true,get:function(){return p.EarthState}});var f=e("./state/states/InteractiveStateBase");Object.defineProperty(r,"InteractiveStateBase",{enumerable:true,get:function(){return f.InteractiveStateBase}});var d=e("./state/states/InteractiveWaitingState");Object.defineProperty(r,"InteractiveWaitingState",{enumerable:true,get:function(){return d.InteractiveWaitingState}});var v=e("./state/states/TraversingState");Object.defineProperty(r,"TraversingState",{enumerable:true,get:function(){return v.TraversingState}});var m=e("./state/states/WaitingState");Object.defineProperty(r,"WaitingState",{enumerable:true,get:function(){return m.WaitingState}});i(e("./state/interfaces/interfaces"),r)},{"./state/FrameGenerator":447,"./state/RotationDelta":448,"./state/State":449,"./state/StateContext":450,"./state/StateService":451,"./state/TransitionMode":452,"./state/interfaces/interfaces":453,"./state/states/EarthState":454,"./state/states/InteractiveStateBase":455,"./state/states/InteractiveWaitingState":456,"./state/states/StateBase":457,"./state/states/TraversingState":458,"./state/states/WaitingState":459}],299:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.isFallbackSupported=r.isSupported=void 0;var n=e("./utils/Support");function i(){return o()&&n.isWebGLSupportedCached()}r.isSupported=i;function o(){return n.isBrowser()&&n.isBlobSupported()&&n.isArraySupported()&&n.isFunctionSupported()&&n.isJSONSupported()&&n.isObjectSupported()}r.isFallbackSupported=o},{"./utils/Support":468}],300:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./tiles/ImageTileLoader");Object.defineProperty(r,"ImageTileLoader",{enumerable:true,get:function(){return o.ImageTileLoader}});var a=e("./tiles/ImageTileStore");Object.defineProperty(r,"ImageTileStore",{enumerable:true,get:function(){return a.ImageTileStore}});var s=e("./tiles/TextureProvider");Object.defineProperty(r,"TextureProvider",{enumerable:true,get:function(){return s.TextureProvider}});var u=e("./tiles/RegionOfInterestCalculator");Object.defineProperty(r,"RegionOfInterestCalculator",{enumerable:true,get:function(){return u.RegionOfInterestCalculator}});i(e("./tiles/interfaces/interfaces"),r)},{"./tiles/ImageTileLoader":460,"./tiles/ImageTileStore":461,"./tiles/RegionOfInterestCalculator":462,"./tiles/TextureProvider":463,"./tiles/interfaces/interfaces":464}],301:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./utils/DOM");Object.defineProperty(r,"DOM",{enumerable:true,get:function(){return o.DOM}});var a=e("./utils/EventEmitter");Object.defineProperty(r,"EventEmitter",{enumerable:true,get:function(){return a.EventEmitter}});var s=e("./utils/Settings");Object.defineProperty(r,"Settings",{enumerable:true,get:function(){return s.Settings}});i(e("./utils/Support"),r);var u=e("./utils/Urls");Object.defineProperty(r,"Urls",{enumerable:true,get:function(){return u.Urls}})},{"./utils/DOM":465,"./utils/EventEmitter":466,"./utils/Settings":467,"./utils/Support":468,"./utils/Urls":469}],302:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./viewer/Alignment");Object.defineProperty(r,"Alignment",{enumerable:true,get:function(){return o.Alignment}});var a=e("./viewer/CacheService");Object.defineProperty(r,"CacheService",{enumerable:true,get:function(){return a.CacheService}});var s=e("./viewer/ComponentController");Object.defineProperty(r,"ComponentController",{enumerable:true,get:function(){return s.ComponentController}});var u=e("./viewer/Container");Object.defineProperty(r,"Container",{enumerable:true,get:function(){return u.Container}});var c=e("./viewer/Observer");Object.defineProperty(r,"Observer",{enumerable:true,get:function(){return c.Observer}});var l=e("./viewer/ImageSize");Object.defineProperty(r,"ImageSize",{enumerable:true,get:function(){return l.ImageSize}});var h=e("./viewer/KeyboardService");Object.defineProperty(r,"KeyboardService",{enumerable:true,get:function(){return h.KeyboardService}});var p=e("./viewer/LoadingService");Object.defineProperty(r,"LoadingService",{enumerable:true,get:function(){return p.LoadingService}});var f=e("./viewer/MouseService");Object.defineProperty(r,"MouseService",{enumerable:true,get:function(){return f.MouseService}});var d=e("./viewer/Navigator");Object.defineProperty(r,"Navigator",{enumerable:true,get:function(){return d.Navigator}});var v=e("./viewer/PlayService");Object.defineProperty(r,"PlayService",{enumerable:true,get:function(){return v.PlayService}});var m=e("./viewer/Projection");Object.defineProperty(r,"Projection",{enumerable:true,get:function(){return m.Projection}});var g=e("./viewer/SpriteService");Object.defineProperty(r,"SpriteService",{enumerable:true,get:function(){return g.SpriteService}});var _=e("./viewer/TouchService");Object.defineProperty(r,"TouchService",{enumerable:true,get:function(){return _.TouchService}});var y=e("./viewer/Viewer");Object.defineProperty(r,"Viewer",{enumerable:true,get:function(){return y.Viewer}});i(e("./viewer/interfaces/interfaces"),r)},{"./viewer/Alignment":470,"./viewer/CacheService":471,"./viewer/ComponentController":472,"./viewer/Container":473,"./viewer/ImageSize":474,"./viewer/KeyboardService":475,"./viewer/LoadingService":476,"./viewer/MouseService":477,"./viewer/Navigator":478,"./viewer/Observer":479,"./viewer/PlayService":481,"./viewer/Projection":482,"./viewer/SpriteService":483,"./viewer/TouchService":484,"./viewer/Viewer":485,"./viewer/interfaces/interfaces":486}],303:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.APIv3=void 0;var s=e("rxjs/operators");var n=e("rxjs");var i=e("../API");var o=function(){function e(e,t,r){this._clientId=e;this._modelCreator=r!=null?r:new i.ModelCreator;this._model=this._modelCreator.createModel(e,t);this._pageCount=999;this._pathImageByKey="imageByKey";this._pathImageCloseTo="imageCloseTo";this._pathImagesByH="imagesByH";this._pathImageViewAdd="imageViewAdd";this._pathSequenceByKey="sequenceByKey";this._pathSequenceViewAdd="sequenceViewAdd";this._propertiesCore=["cl","l","sequence_key"];this._propertiesFill=["captured_at","captured_with_camera_uuid","user","organization_key","private","project"];this._propertiesKey=["key"];this._propertiesSequence=["keys"];this._propertiesSpatial=["atomic_scale","cluster_key","c_rotation","ca","calt","camera_projection_type","cca","cfocal","ck1","ck2","gpano","height","merge_cc","merge_version","orientation","width"];this._propertiesUser=["username"]}Object.defineProperty(e.prototype,"clientId",{get:function(){return this._clientId},enumerable:false,configurable:true});e.prototype.imageByKeyFill$=function(t){return this._catchInvalidateGet$(this._wrapModelResponse$(this._model.get([this._pathImageByKey,t,this._propertiesKey.concat(this._propertiesFill).concat(this._propertiesSpatial),this._propertiesKey.concat(this._propertiesUser)])).pipe(s.map(function(e){if(!e){throw new Error("Images ("+t.join(", ")+") could not be found.")}return e.json.imageByKey})),this._pathImageByKey,t)};e.prototype.imageByKeyFull$=function(t){return this._catchInvalidateGet$(this._wrapModelResponse$(this._model.get([this._pathImageByKey,t,this._propertiesKey.concat(this._propertiesCore).concat(this._propertiesFill).concat(this._propertiesSpatial),this._propertiesKey.concat(this._propertiesUser)])).pipe(s.map(function(e){if(!e){throw new Error("Images ("+t.join(", ")+") could not be found.")}return e.json.imageByKey})),this._pathImageByKey,t)};e.prototype.imageCloseTo$=function(e,t){var r=t+":"+e;return this._catchInvalidateGet$(this._wrapModelResponse$(this._model.get([this._pathImageCloseTo,[r],this._propertiesKey.concat(this._propertiesCore).concat(this._propertiesFill).concat(this._propertiesSpatial),this._propertiesKey.concat(this._propertiesUser)])).pipe(s.map(function(e){return e!=null?e.json.imageCloseTo[r]:null})),this._pathImageCloseTo,[r])};e.prototype.imagesByH$=function(o){var a=this;return this._catchInvalidateGet$(this._wrapModelResponse$(this._model.get([this._pathImagesByH,o,{from:0,to:this._pageCount},this._propertiesKey.concat(this._propertiesCore)])).pipe(s.map(function(e){if(!e){e={json:{imagesByH:{}}};for(var t=0,r=o;t<r.length;t++){var n=r[t];e.json.imagesByH[n]={};for(var i=0;i<=a._pageCount;i++){e.json.imagesByH[n][i]=null}}}return e.json.imagesByH})),this._pathImagesByH,o)};e.prototype.imageViewAdd$=function(e){return this._catchInvalidateCall$(this._wrapCallModelResponse$(this._model.call([this._pathImageViewAdd],[e])),this._pathImageViewAdd,e)};e.prototype.invalidateImageByKey=function(e){this._invalidateGet(this._pathImageByKey,e)};e.prototype.invalidateImagesByH=function(e){this._invalidateGet(this._pathImagesByH,e)};e.prototype.invalidateSequenceByKey=function(e){this._invalidateGet(this._pathSequenceByKey,e)};e.prototype.setToken=function(e){this._model.invalidate([]);this._model=null;this._model=this._modelCreator.createModel(this._clientId,e)};e.prototype.sequenceByKey$=function(i){return this._catchInvalidateGet$(this._wrapModelResponse$(this._model.get([this._pathSequenceByKey,i,this._propertiesKey.concat(this._propertiesSequence)])).pipe(s.map(function(e){if(!e){e={json:{sequenceByKey:{}}}}for(var t=0,r=i;t<r.length;t++){var n=r[t];if(!(n in e.json.sequenceByKey)){console.warn("Sequence data missing ("+n+")");e.json.sequenceByKey[n]={key:n,keys:[]}}}return e.json.sequenceByKey})),this._pathSequenceByKey,i)};e.prototype.sequenceViewAdd$=function(e){return this._catchInvalidateCall$(this._wrapCallModelResponse$(this._model.call([this._pathSequenceViewAdd],[e])),this._pathSequenceViewAdd,e)};e.prototype._catchInvalidateGet$=function(e,t,r){var n=this;return e.pipe(s.catchError(function(e){n._invalidateGet(t,r);throw e}))};e.prototype._catchInvalidateCall$=function(e,t,r){var n=this;return e.pipe(s.catchError(function(e){n._invalidateCall(t,r);throw e}))};e.prototype._invalidateGet=function(e,t){this._model.invalidate([e,t])};e.prototype._invalidateCall=function(e,t){this._model.invalidate([e],[t])};e.prototype._wrapModelResponse$=function(e){return n.Observable.create(function(t){e.then(function(e){t.next(e);t.complete()},function(e){t.error(e)})})};e.prototype._wrapCallModelResponse$=function(e){return this._wrapModelResponse$(e).pipe(s.map(function(e){return}))};return e}();r.APIv3=o;r.default=o},{"../API":290,rxjs:43,"rxjs/operators":241}],304:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ModelCreator=void 0;var n=e("falcor");var i=e("falcor-http-datasource");var o=e("../Utils");var a=function(){function e(){}e.prototype.createModel=function(e,t){var r={crossDomain:true,withCredentials:false};if(t!=null){r.headers={Authorization:"Bearer "+t}}return new n.Model({maxSize:16*1024*1024,source:new i.default(o.Urls.falcorModel(e),r)})};return e}();r.ModelCreator=a;r.default=a},{"../Utils":301,falcor:15,"falcor-http-datasource":10}],305:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true})},{}],306:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.AttributionComponent=void 0;var o=e("rxjs");var a=e("rxjs/operators");var d=e("virtual-dom");var n=e("../Component");var v=e("../Utils");var s=function(n){i(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}e.prototype._activate=function(){var n=this;this._disposable=o.combineLatest(this._navigator.stateService.currentNode$,this._container.renderService.size$).pipe(a.map(function(e){var t=e[0],r=e[1];return{name:n._name,vnode:n._getAttributionNode(t.username,t.key,t.capturedAt,r.width)}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._disposable.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.prototype._getAttributionNode=function(e,t,r,n){var i=n<=640;var o=d.h("div.AttributionMapillaryLogo",[]);var a=d.h("a.AttributionIconContainer",{href:v.Urls.explore,target:"_blank"},[o]);var s=i?""+e:"image by "+e;var u=d.h("div.AttributionUsername",{textContent:s},[]);var c=new Date(r).toDateString().split(" ");var l=(c.length>3?i?[c[3]]:[c[1],c[2]+",",c[3]]:c).join(" ");var h=d.h("div.AttributionDate",{textContent:l},[]);var p=d.h("a.AttributionImageContainer",{href:v.Urls.exporeImage(t),target:"_blank"},[u,h]);var f=i?".AttributionCompact":"";return d.h("div.AttributionContainer"+f,{},[a,p])};e.componentName="attribution";return e}(n.Component);r.AttributionComponent=s;n.ComponentService.register(s);r.default=s},{"../Component":291,"../Utils":301,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],307:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.BackgroundComponent=void 0;var o=e("virtual-dom");var n=e("../Component");var a=function(n){i(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}e.prototype._activate=function(){this._container.domRenderer.render$.next({name:this._name,vnode:this._getBackgroundNode("The viewer can't display the given image.")})};e.prototype._deactivate=function(){return};e.prototype._getDefaultConfiguration=function(){return{}};e.prototype._getBackgroundNode=function(e){return o.h("div.BackgroundWrapper",{},[o.h("p",{textContent:e},[])])};e.componentName="background";return e}(n.Component);r.BackgroundComponent=a;n.ComponentService.register(a);r.default=a},{"../Component":291,"virtual-dom":247}],308:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.BearingComponent=void 0;var a=e("rxjs/operators");var v=e("virtual-dom");var o=e("@mapbox/unitbezier");var s=e("rxjs");var i=e("../Component");var u=e("../Geo");var c=e("../geo/ViewportCoords");var g=e("./utils/ComponentSize");var l=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t,r)||this;n._spatial=new u.Spatial;n._viewportCoords=new c.default;n._svgNamespace="http://www.w3.org/2000/svg";n._distinctThreshold=Math.PI/360;n._animationSpeed=.075;n._unitBezier=new o(.74,.67,.38,.96);return n}e.prototype._activate=function(){var m=this;var e=this._container.renderService.renderCamera$.pipe(a.map(function(e){var t=m._spatial.degToRad(e.perspective.fov);var r=e.perspective.aspect===Number.POSITIVE_INFINITY?Math.PI:Math.atan(e.perspective.aspect*Math.tan(.5*t))*2;return[m._spatial.azimuthalToBearing(e.rotation.phi),r]}),a.distinctUntilChanged(function(e,t){return Math.abs(t[0]-e[0])<m._distinctThreshold&&Math.abs(t[1]-e[1])<m._distinctThreshold}));var t=s.combineLatest(this._navigator.stateService.currentState$.pipe(a.distinctUntilChanged(undefined,function(e){return e.state.currentNode.key})),this._navigator.panService.panNodes$).pipe(a.map(function(e){var t=e[0],r=e[1];var n=t.state.currentNode;var i=t.state.currentTransform;if(n.pano){var o=2*Math.PI*n.gpano.CroppedAreaImageWidthPixels/n.gpano.FullPanoWidthPixels;return[o/2,o/2]}var a=m._computeProjectedPoints(i);var s=m._spatial.degToRad(m._computeHorizontalFov(a));var u=s/2;var c=s/2;for(var l=0,h=r;l<h.length;l++){var p=h[l],f=p[0],d=p[2];var v=m._spatial.wrap(f.ca-n.ca,-180,180);if(v<0){u=m._spatial.degToRad(Math.abs(v))+d/2}else{c=m._spatial.degToRad(Math.abs(v))+d/2}}return[u,c]}),a.distinctUntilChanged(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];return Math.abs(i-r)<m._distinctThreshold&&Math.abs(o-n)<m._distinctThreshold}));var r=s.combineLatest(this._navigator.stateService.currentState$.pipe(a.distinctUntilChanged(undefined,function(e){return e.state.currentNode.key})),this._container.renderService.bearing$).pipe(a.map(function(e){var t=e[0],r=e[1];var n=m._spatial.degToRad(t.state.currentNode.ca-r);return n}));var n=new s.Subject;var i=n.pipe(a.scan(function(e,t){return t(e)},{alpha:0,curr:[0,0,0],prev:[0,0,0]}),a.map(function(e){var t=m._unitBezier.solve(e.alpha);var r=e.curr;var n=e.prev;return[m._interpolate(n[0],r[0],t),m._interpolate(n[1],r[1],t)]}));this._fovSubscription=t.pipe(a.map(function(a){return function(e){var t=m._unitBezier.solve(e.alpha);var r=e.curr;var n=e.prev;var i=[m._interpolate(n[0],r[0],t),m._interpolate(n[1],r[1],t)];var o=a.slice();return{alpha:0,curr:o,prev:i}}})).subscribe(n);this._fovAnimationSubscription=t.pipe(a.switchMap(function(){return m._container.renderService.renderCameraFrame$.pipe(a.skip(1),a.scan(function(e){return e+m._animationSpeed},0),a.takeWhile(function(e){return e<=1+m._animationSpeed}),a.map(function(e){return Math.min(e,1)}))}),a.map(function(t){return function(e){return{alpha:t,curr:e.curr.slice(),prev:e.prev.slice()}}})).subscribe(n);var o=s.combineLatest(r,i).pipe(a.map(function(e){var t=e[0],r=e[1];return[t,r[0],r[1]]}));this._renderSubscription=s.combineLatest(e,o,this._configuration$,this._container.renderService.size$).pipe(a.map(function(e){var t=e[0],r=t[0],n=t[1],i=e[1],o=i[0],a=i[1],s=i[2],u=e[2],c=e[3];var l=m._createBackground(r);var h=m._createFovIndicator(a,s,o);var p=m._createNorth(r);var f=m._createCircleSectorCompass(m._createCircleSector(Math.max(Math.PI/20,n),"#FFF"));var d=u.size===g.default.Small||u.size===g.default.Automatic&&c.width<640?".BearingCompact":"";return{name:m._name,vnode:v.h("div.BearingIndicatorContainer"+d,{oncontextmenu:function(e){e.preventDefault()}},[l,h,p,f])}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._renderSubscription.unsubscribe();this._fovSubscription.unsubscribe();this._fovAnimationSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{size:g.default.Automatic}};e.prototype._createFovIndicator=function(e,t,r){var n=this._createFovArc(e,t);var i=v.h("g",{attributes:{transform:"translate(18,18)"},namespace:this._svgNamespace},[n]);var o=v.h("svg",{attributes:{viewBox:"0 0 36 36"},namespace:this._svgNamespace,style:{height:"36px",left:"2px",position:"absolute",top:"2px",transform:"rotateZ("+this._spatial.radToDeg(r)+"deg)",width:"36px"}},[i]);return o};e.prototype._createFovArc=function(e,t){var r=16.75;var n=2.5;var i=e+t;if(i>2*Math.PI-Math.PI/90){return v.h("circle",{attributes:{cx:"0",cy:"0","fill-opacity":"0",r:""+r,stroke:"#FFF","stroke-width":""+n},namespace:this._svgNamespace},[])}var o=-Math.PI/2-e;var a=o+i;var s=r*Math.cos(o);var u=r*Math.sin(o);var c=r*Math.cos(a);var l=r*Math.sin(a);var h=i>=Math.PI?1:0;var p="M "+s+" "+u+" A "+r+" "+r+" 0 "+h+" 1 "+c+" "+l;return v.h("path",{attributes:{d:p,"fill-opacity":"0",stroke:"#FFF","stroke-width":""+n},namespace:this._svgNamespace},[])};e.prototype._createCircleSectorCompass=function(e){var t=v.h("g",{attributes:{transform:"translate(1,1)"},namespace:this._svgNamespace},[e]);var r=v.h("svg",{attributes:{viewBox:"0 0 2 2"},namespace:this._svgNamespace,style:{height:"26px",left:"7px",position:"absolute",top:"7px",width:"26px"}},[t]);return r};e.prototype._createCircleSector=function(e,t){if(e>2*Math.PI-Math.PI/90){return v.h("circle",{attributes:{cx:"0",cy:"0",fill:t,r:"1"},namespace:this._svgNamespace},[])}var r=-Math.PI/2-e/2;var n=r+e;var i=Math.cos(r);var o=Math.sin(r);var a=Math.cos(n);var s=Math.sin(n);var u=e>=Math.PI?1:0;var c="M 0 0 "+i+" "+o+" A 1 1 0 "+u+" 1 "+a+" "+s;return v.h("path",{attributes:{d:c,fill:t},namespace:this._svgNamespace},[])};e.prototype._createNorth=function(e){var t=v.h("div.BearingNorth",[]);var r=v.h("div.BearingNorthContainer",{style:{transform:"rotateZ("+this._spatial.radToDeg(-e)+"deg)"}},[t]);return r};e.prototype._createBackground=function(e){return v.h("div.BearingIndicatorBackground",{style:{transform:"rotateZ("+this._spatial.radToDeg(-e)+"deg)"}},[v.h("div.BearingIndicatorBackgroundCircle",[]),v.h("div.BearingIndicatorBackgroundArrowContainer",[v.h("div.BearingIndicatorBackgroundArrow",[])])])};e.prototype._computeProjectedPoints=function(e){var t=[[1,0]];var r=[[0,.5]];var n=12;return u.Geo.computeProjectedPoints(e,t,r,n,this._viewportCoords)};e.prototype._computeHorizontalFov=function(e){var t=this;var r=e.map(function(e){return t._coordToFov(e[0])});var n=Math.min.apply(Math,r);return n};e.prototype._coordToFov=function(e){return this._spatial.radToDeg(2*Math.atan(e))};e.prototype._interpolate=function(e,t,r){return(1-r)*e+r*t};e.componentName="bearing";return e}(i.Component);r.BearingComponent=l;i.ComponentService.register(l);r.default=l},{"../Component":291,"../Geo":294,"../geo/ViewportCoords":421,"./utils/ComponentSize":404,"@mapbox/unitbezier":2,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],309:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CacheComponent=void 0;var y=e("rxjs");var b=e("rxjs/operators");var x=e("../Edge");var n=e("../Component");var o=function(n){i(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}e.prototype.setDepth=function(e){this.configure({depth:e})};e.prototype._activate=function(){var _=this;this._sequenceSubscription=y.combineLatest(this._navigator.stateService.currentNode$.pipe(b.switchMap(function(e){return e.sequenceEdges$}),b.filter(function(e){return e.cached})),this._configuration$).pipe(b.switchMap(function(e){var t=e[0];var r=e[1];var n=Math.max(0,Math.min(4,r.depth.sequence));var i=_._cache$(t.edges,x.EdgeDirection.Next,n);var o=_._cache$(t.edges,x.EdgeDirection.Prev,n);return y.merge(i,o).pipe(b.catchError(function(e,t){console.error("Failed to cache sequence edges.",e);return y.empty()}))})).subscribe(function(){});this._spatialSubscription=y.combineLatest(this._navigator.stateService.currentNode$.pipe(b.switchMap(function(e){return y.combineLatest(y.of(e),e.spatialEdges$.pipe(b.filter(function(e){return e.cached})))})),this._configuration$).pipe(b.switchMap(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];var o=n.edges;var a=i.depth;var s=Math.max(0,Math.min(2,a.pano));var u=r.pano?0:Math.max(0,Math.min(3,a.step));var c=r.pano?0:Math.max(0,Math.min(1,a.turn));var l=_._cache$(o,x.EdgeDirection.Pano,s);var h=_._cache$(o,x.EdgeDirection.StepForward,u);var p=_._cache$(o,x.EdgeDirection.StepBackward,u);var f=_._cache$(o,x.EdgeDirection.StepLeft,u);var d=_._cache$(o,x.EdgeDirection.StepRight,u);var v=_._cache$(o,x.EdgeDirection.TurnLeft,c);var m=_._cache$(o,x.EdgeDirection.TurnRight,c);var g=_._cache$(o,x.EdgeDirection.TurnU,c);return y.merge(h,p,f,d,l,v,m,g).pipe(b.catchError(function(e,t){console.error("Failed to cache spatial edges.",e);return y.empty()}))})).subscribe(function(){})};e.prototype._deactivate=function(){this._sequenceSubscription.unsubscribe();this._spatialSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{depth:{pano:1,sequence:2,step:1,turn:0}}};e.prototype._cache$=function(e,s,t){var u=this;return y.zip(y.of(e),y.of(t)).pipe(b.expand(function(e){var t=e[0];var r=e[1];var n=[];if(r>0){for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.data.direction===s){n.push(y.zip(u._navigator.graphService.cacheNode$(a.to).pipe(b.mergeMap(function(e){return u._nodeToEdges$(e,s)})),y.of(r-1)))}}}return y.from(n).pipe(b.mergeAll())}),b.skip(1))};e.prototype._nodeToEdges$=function(e,t){return([x.EdgeDirection.Next,x.EdgeDirection.Prev].indexOf(t)>-1?e.sequenceEdges$:e.spatialEdges$).pipe(b.first(function(e){return e.cached}),b.map(function(e){return e.edges}))};e.componentName="cache";return e}(n.Component);r.CacheComponent=o;n.ComponentService.register(o);r.default=o},{"../Component":291,"../Edge":292,rxjs:43,"rxjs/operators":241}],310:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.Component=void 0;var o=e("rxjs/operators");var a=e("rxjs");var i=e("../Utils");var s=function(i){n(e,i);function e(e,t,r){var n=i.call(this)||this;n._activated$=new a.BehaviorSubject(false);n._configurationSubject$=new a.Subject;n._activated=false;n._container=t;n._name=e;n._navigator=r;n._configuration$=n._configurationSubject$.pipe(o.startWith(n.defaultConfiguration),o.scan(function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}),o.publishReplay(1),o.refCount());n._configuration$.subscribe(function(){});return n}Object.defineProperty(e.prototype,"activated",{get:function(){return this._activated},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"activated$",{get:function(){return this._activated$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"defaultConfiguration",{get:function(){return this._getDefaultConfiguration()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"configuration$",{get:function(){return this._configuration$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:false,configurable:true});e.prototype.activate=function(e){if(this._activated){return}if(e!==undefined){this._configurationSubject$.next(e)}this._activated=true;this._activate();this._activated$.next(true)};e.prototype.configure=function(e){this._configurationSubject$.next(e)};e.prototype.deactivate=function(){if(!this._activated){return}this._activated=false;this._deactivate();this._container.domRenderer.clear(this._name);this._container.glRenderer.clear(this._name);this._activated$.next(false)};e.prototype.resize=function(){return};e.componentName="not_worthy";return e}(i.EventEmitter);r.Component=s;r.default=s},{"../Utils":301,rxjs:43,"rxjs/operators":241}],311:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ComponentService=void 0;var n=e("../Error");var i=function(){function i(e,t){this._components={};for(var r in i.registeredComponents){if(!i.registeredComponents.hasOwnProperty(r)){continue}var n=i.registeredComponents[r];this._components[r]={active:false,component:new n(r,e,t)}}this._coverComponent=new i.registeredCoverComponent("cover",e,t);this._coverComponent.activate();this._coverActivated=true}i.register=function(e){if(i.registeredComponents[e.componentName]===undefined){i.registeredComponents[e.componentName]=e}};i.registerCover=function(e){i.registeredCoverComponent=e};Object.defineProperty(i.prototype,"coverActivated",{get:function(){return this._coverActivated},enumerable:false,configurable:true});i.prototype.activateCover=function(){if(this._coverActivated){return}this._coverActivated=true;for(var e in this._components){if(!this._components.hasOwnProperty(e)){continue}var t=this._components[e];if(t.active){t.component.deactivate()}}};i.prototype.deactivateCover=function(){if(!this._coverActivated){return}this._coverActivated=false;for(var e in this._components){if(!this._components.hasOwnProperty(e)){continue}var t=this._components[e];if(t.active){t.component.activate()}}};i.prototype.activate=function(e){this._checkName(e);this._components[e].active=true;if(!this._coverActivated){this.get(e).activate()}};i.prototype.configure=function(e,t){this._checkName(e);this.get(e).configure(t)};i.prototype.deactivate=function(e){this._checkName(e);this._components[e].active=false;if(!this._coverActivated){this.get(e).deactivate()}};i.prototype.get=function(e){return this._components[e].component};i.prototype.getCover=function(){return this._coverComponent};i.prototype._checkName=function(e){if(!(e in this._components)){throw new n.ArgumentMapillaryError("Component does not exist: "+e)}};i.registeredComponents={};return i}();r.ComponentService=i;r.default=i},{"../Error":293}],312:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CoverComponent=void 0;var o=e("rxjs");var s=e("rxjs/operators");var u=e("virtual-dom");var c=e("../Component");var a=e("../Utils");var l=e("../Viewer");var n=function(n){i(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}e.prototype._activate=function(){var a=this;this._configuration$.pipe(s.distinctUntilChanged(undefined,function(e){return e.state}),s.switchMap(function(e){return o.combineLatest(o.of(e.state),a._navigator.stateService.currentNode$)}),s.switchMap(function(e){var t=e[0],r=e[1];var n=o.combineLatest(o.of(r.key),r.image$.pipe(s.filter(function(e){return!!e}),s.map(function(e){return e.src})));return t===c.CoverState.Visible?n.pipe(s.first()):n}),s.distinctUntilChanged(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];return r===i&&n===o}),s.map(function(e){var t=e[0],r=e[1];return{key:t,src:r}})).subscribe(this._configurationSubject$);this._renderSubscription=o.combineLatest(this._configuration$,this._container.renderService.size$).pipe(s.map(function(e){var t=e[0],r=e[1];if(!t.key){return{name:a._name,vnode:u.h("div",[])}}var n=r.width<=640||r.height<=480?".CoverCompact":"";if(t.state===c.CoverState.Hidden){var i=u.h("div.CoverContainer.CoverDone"+n,[a._getCoverBackgroundVNode(t)]);return{name:a._name,vnode:i}}var o=u.h("div.CoverContainer"+n,[a._getCoverButtonVNode(t)]);return{name:a._name,vnode:o}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._renderSubscription.unsubscribe();this._keySubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{state:c.CoverState.Visible}};e.prototype._getCoverButtonVNode=function(e){var t=this;var r=e.state===c.CoverState.Loading?"div.Cover.CoverLoading":"div.Cover";var n=u.h("div.CoverButton",[u.h("div.CoverButtonIcon",[])]);var i=u.h("a.CoverLogo",{href:a.Urls.explore,target:"_blank"},[]);var o=u.h("div.CoverIndicator",{onclick:function(){t.configure({state:c.CoverState.Loading})}},[]);return u.h(r,[this._getCoverBackgroundVNode(e),o,n,i])};e.prototype._getCoverBackgroundVNode=function(e){var t=e.src!=null?e.src:a.Urls.thumbnail(e.key,l.ImageSize.Size640);var r={style:{backgroundImage:"url("+t+")"}};var n=[];if(e.state===c.CoverState.Loading){n.push(u.h("div.Spinner",{},[]))}return u.h("div.CoverBackground",r,n)};e.componentName="cover";return e}(c.Component);r.CoverComponent=n;c.ComponentService.registerCover(n);r.default=n},{"../Component":291,"../Utils":301,"../Viewer":302,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],313:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.DebugComponent=void 0;var o=e("rxjs");var a=e("rxjs/operators");var u=e("virtual-dom");var i=e("../Component");var s=function(t){n(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e._open$=new o.BehaviorSubject(false);return e}e.prototype._activate=function(){var i=this;this._disposable=o.combineLatest(this._navigator.stateService.currentState$,this._open$,this._navigator.imageLoadingService.loadstatus$).pipe(a.map(function(e){var t=e[0],r=e[1],n=e[2];return{name:i._name,vnode:i._getDebugVNode(r,i._getDebugInfo(t,n))}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._disposable.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.prototype._getDebugInfo=function(e,t){var r=[];r.push(u.h("h2","Node"));if(e.state.currentNode){r.push(u.h("p","currentNode: "+e.state.currentNode.key))}if(e.state.previousNode){r.push(u.h("p","previousNode: "+e.state.previousNode.key))}r.push(u.h("h2","Loading"));var n=0;var i=0;var o=0;for(var a in t){if(!t.hasOwnProperty(a)){continue}var s=t[a];n+=s.loaded;if(s.loaded!==s.total){o++}else{i++}}r.push(u.h("p","Loaded Images: "+i));r.push(u.h("p","Loading Images: "+o));r.push(u.h("p","Total bytes loaded: "+n));r.push(u.h("h2","Camera"));r.push(u.h("p","camera.position.x: "+e.state.camera.position.x));r.push(u.h("p","camera.position.y: "+e.state.camera.position.y));r.push(u.h("p","camera.position.z: "+e.state.camera.position.z));r.push(u.h("p","camera.lookat.x: "+e.state.camera.lookat.x));r.push(u.h("p","camera.lookat.y: "+e.state.camera.lookat.y));r.push(u.h("p","camera.lookat.z: "+e.state.camera.lookat.z));r.push(u.h("p","camera.up.x: "+e.state.camera.up.x));r.push(u.h("p","camera.up.y: "+e.state.camera.up.y));r.push(u.h("p","camera.up.z: "+e.state.camera.up.z));return r};e.prototype._getDebugVNode=function(e,t){if(e){return u.h("div.Debug",{},[u.h("h2",{},["Debug"]),this._getDebugVNodeButton(e),u.h("pre",{},t)])}else{return this._getDebugVNodeButton(e)}};e.prototype._getDebugVNodeButton=function(e){var t=e?"Disable Debug":"D";var r=e?"":".DebugButtonFixed";if(e){return u.h("button.DebugButton"+r,{onclick:this._closeDebugElement.bind(this)},[t])}else{return u.h("button.DebugButton"+r,{onclick:this._openDebugElement.bind(this)},[t])}};e.prototype._closeDebugElement=function(e){this._open$.next(false)};e.prototype._openDebugElement=function(){this._open$.next(true)};e.componentName="debug";return e}(i.Component);r.DebugComponent=s;i.ComponentService.register(s);r.default=s},{"../Component":291,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],314:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ImageComponent=void 0;var i=e("rxjs");var a=e("rxjs/operators");var s=e("virtual-dom");var o=e("../Component");var u=e("../Utils");var c=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._canvasId=t.id+"-"+i._name;i._dom=!!n?n:new u.DOM;return i}e.prototype._activate=function(){var t=this;var e=this._container.domRenderer.element$.pipe(a.map(function(e){return t._dom.document.getElementById(t._canvasId)}),a.filter(function(e){return!!e}),a.map(function(e){var t=e.parentElement;var r=t.offsetWidth;var n=t.offsetHeight;return[e,{height:n,width:r}]}),a.distinctUntilChanged(function(e,t){return e.height===t.height&&e.width===t.width},function(e){var t=e[0],r=e[1];return r}));this.drawSubscription=i.combineLatest(e,this._navigator.stateService.currentNode$).subscribe(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];r.width=n.width;r.height=n.height;r.getContext("2d").drawImage(i.image,0,0,n.width,n.height)});this._container.domRenderer.renderAdaptive$.next({name:this._name,vnode:s.h("canvas#"+this._canvasId,[])})};e.prototype._deactivate=function(){this.drawSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.componentName="image";return e}(o.Component);r.ImageComponent=c;o.ComponentService.register(c);r.default=c},{"../Component":291,"../Utils":301,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],315:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.LoadingComponent=void 0;var o=e("rxjs");var s=e("rxjs/operators");var a=e("virtual-dom");var n=e("../Component");var u=function(n){i(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}e.prototype._activate=function(){var a=this;this._loadingSubscription=this._navigator.loadingService.loading$.pipe(s.switchMap(function(e){return e?a._navigator.imageLoadingService.loadstatus$:o.of({})}),s.map(function(e){var t=0;var r=0;for(var n in e){if(!e.hasOwnProperty(n)){continue}var i=e[n];if(i.loaded!==i.total){r+=i.loaded;t+=i.total}}var o=100;if(t!==0){o=r/t*100}return{name:a._name,vnode:a._getBarVNode(o)}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._loadingSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.prototype._getBarVNode=function(e){var t={};var r={};if(e!==100){t.width=e.toFixed(0)+"%";t.opacity="1"}else{t.width="100%";t.opacity="0"}return a.h("div.Loading",{style:r},[a.h("div.LoadingBar",{style:t},[])])};e.componentName="loading";return e}(n.Component);r.LoadingComponent=u;n.ComponentService.register(u);r.default=u},{"../Component":291,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],316:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.NavigationComponent=void 0;var o=e("rxjs");var a=e("rxjs/operators");var c=e("virtual-dom");var s=e("../Edge");var u=e("../Error");var i=e("../Component");var l=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t,r)||this;n._seqNames={};n._seqNames[s.EdgeDirection[s.EdgeDirection.Prev]]="Prev";n._seqNames[s.EdgeDirection[s.EdgeDirection.Next]]="Next";n._spaTopNames={};n._spaTopNames[s.EdgeDirection[s.EdgeDirection.TurnLeft]]="Turnleft";n._spaTopNames[s.EdgeDirection[s.EdgeDirection.StepLeft]]="Left";n._spaTopNames[s.EdgeDirection[s.EdgeDirection.StepForward]]="Forward";n._spaTopNames[s.EdgeDirection[s.EdgeDirection.StepRight]]="Right";n._spaTopNames[s.EdgeDirection[s.EdgeDirection.TurnRight]]="Turnright";n._spaBottomNames={};n._spaBottomNames[s.EdgeDirection[s.EdgeDirection.TurnU]]="Turnaround";n._spaBottomNames[s.EdgeDirection[s.EdgeDirection.StepBackward]]="Backward";return n}e.prototype._activate=function(){var u=this;this._renderSubscription=o.combineLatest(this._navigator.stateService.currentNode$,this._configuration$).pipe(a.switchMap(function(e){var t=e[0],r=e[1];var n=r.sequence?t.sequenceEdges$.pipe(a.map(function(e){return e.edges.map(function(e){return e.data.direction})})):o.of([]);var i=!t.pano&&r.spatial?t.spatialEdges$.pipe(a.map(function(e){return e.edges.map(function(e){return e.data.direction})})):o.of([]);return o.combineLatest(n,i).pipe(a.map(function(e){var t=e[0],r=e[1];return t.concat(r)}))}),a.map(function(e){var t=u._createArrowRow(u._seqNames,e);var r=u._createArrowRow(u._spaTopNames,e);var n=u._createArrowRow(u._spaBottomNames,e);var i=c.h("div.NavigationSequence",t);var o=c.h("div.NavigationSpatialTop",r);var a=c.h("div.NavigationSpatialBottom",n);var s=c.h("div.NavigationSpatial",[o,a]);return{name:u._name,vnode:c.h("div.NavigationContainer",[i,s])}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._renderSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{sequence:true,spatial:true}};e.prototype._createArrowRow=function(e,t){var r=[];for(var n in e){if(!e.hasOwnProperty(n)){continue}var i=s.EdgeDirection[n];if(t.indexOf(i)!==-1){r.push(this._createVNode(i,e[n],"visible"))}else{r.push(this._createVNode(i,e[n],"hidden"))}}return r};e.prototype._createVNode=function(t,e,r){var n=this;return c.h("span.Direction.Direction"+e,{onclick:function(e){n._navigator.moveDir$(t).subscribe(undefined,function(e){if(!(e instanceof u.AbortMapillaryError)){console.error(e)}})},style:{visibility:r}},[])};e.componentName="navigation";return e}(i.Component);r.NavigationComponent=l;i.ComponentService.register(l);r.default=l},{"../Component":291,"../Edge":292,"../Error":293,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],317:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.RouteComponent=void 0;var s=e("rxjs");var o=e("rxjs/operators");var u=e("virtual-dom");var n=e("../Component");var c=function(){function e(){}return e}();var l=function(){function e(){}return e}();var h=function(){function e(){this.nodeInstructions=[];this.nodeInstructionsOrdered=[]}return e}();var a=function(n){i(e,n);function e(e,t,r){return n.call(this,e,t,r)||this}e.prototype.play=function(){this.configure({playing:true})};e.prototype.stop=function(){this.configure({playing:false})};e.prototype._activate=function(){var a=this;var e=this._navigator.stateService.currentState$.pipe(o.filter(function(e){return e.id%2===0}),o.filter(function(e){return e.state.nodesAhead<15}),o.distinctUntilChanged(undefined,function(e){return e.state.lastNode.key}));var t=s.combineLatest(this.configuration$.pipe(o.mergeMap(function(e){return s.from(e.paths)}),o.distinct(function(e){return e.sequenceKey}),o.mergeMap(function(t){return a._navigator.apiV3.sequenceByKey$([t.sequenceKey]).pipe(o.map(function(e){return e[t.sequenceKey]}))})),this.configuration$).pipe(o.map(function(e){var t=e[0],r=e[1];var n=0;var i=[];for(var o=0,a=r.paths;o<a.length;o++){var s=a[o];if(s.sequenceKey===t.key){var u=[];var c=false;for(var l=0,h=t.keys;l<h.length;l++){var p=h[l];if(s.startKey===p){c=true}if(c){var f=null;for(var d=0,v=s.infoKeys;d<v.length;d++){var m=v[d];if(m.key===p){f=m.description}}u.push({description:f,key:p})}if(s.stopKey===p){c=false}}i.push({nodeInstructions:u,place:n})}n++}return i}),o.scan(function(e,t){for(var r=0,n=t;r<n.length;r++){var i=n[r];e.nodeInstructionsOrdered[i.place]=i.nodeInstructions}for(var o in e.nodeInstructionsOrdered){if(!e.nodeInstructionsOrdered.hasOwnProperty(o)){continue}var a=e.nodeInstructionsOrdered[o];for(var s=0,u=a;s<u.length;s++){var c=u[s];e.nodeInstructions.push(c)}}return e},new h));var r=s.combineLatest(e,t,this.configuration$).pipe(o.map(function(e){var t=e[0],r=e[1],n=e[2];return{conf:n,frame:t,routeTrack:r}}),o.scan(function(e,t){if(t.conf.playing===undefined||t.conf.playing){e.routeTrack=t.routeTrack;e.currentNode=t.frame.state.currentNode;e.lastNode=t.frame.state.lastNode;e.playing=true}else{a._navigator.stateService.cutNodes();e.playing=false}return e},new l),o.filter(function(e){return e.playing}),o.filter(function(e){for(var t=0,r=e.routeTrack.nodeInstructions;t<r.length;t++){var n=r[t];if(!n){continue}if(n.key===e.lastNode.key){return true}}return false}),o.distinctUntilChanged(undefined,function(e){return e.lastNode.key}),o.mergeMap(function(e){var t=0;for(var r=0,n=e.routeTrack.nodeInstructions;r<n.length;r++){var i=n[r];if(i.key===e.lastNode.key){break}t++}var o=e.routeTrack.nodeInstructions[t+1];if(!o){return s.of(null)}return a._navigator.graphService.cacheNode$(o.key)}));this._disposable=s.combineLatest(r,this.configuration$).pipe(o.map(function(e){var t=e[0],r=e[1];return{conf:r,node:t}}),o.filter(function(e){return e.node!==null&&e.conf.playing}),o.pluck("node")).subscribe(this._navigator.stateService.appendNode$);this._disposableDescription=s.combineLatest(this._navigator.stateService.currentNode$,t,this.configuration$).pipe(o.map(function(e){var t=e[0],r=e[1],n=e[2];if(n.playing!==undefined&&!n.playing){return"quit"}var i=null;for(var o=0,a=r.nodeInstructions;o<a.length;o++){var s=a[o];if(s.key===t.key){i=s.description;break}}return i}),o.scan(function(e,t){if(t!==e.description&&t!==null){e.description=t;e.showsLeft=6}else{e.showsLeft--}if(t==="quit"){e.description=null}return e},new c),o.map(function(e){if(e.showsLeft>0&&e.description){return{name:a._name,vnode:a._getRouteAnnotationNode(e.description)}}else{return{name:a._name,vnode:u.h("div",[])}}})).subscribe(this._container.domRenderer.render$)};e.prototype._deactivate=function(){this._disposable.unsubscribe();this._disposableDescription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.prototype._getRouteAnnotationNode=function(e){return u.h("div.RouteFrame",{},[u.h("p",{textContent:e},[])])};e.componentName="route";return e}(n.Component);r.RouteComponent=a;n.ComponentService.register(a);r.default=a},{"../Component":291,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],318:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.StatsComponent=void 0;var i=e("rxjs");var a=e("rxjs/operators");var o=e("../Component");var s=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._scheduler=n;return i}e.prototype._activate=function(){var e=this;this._sequenceSubscription=this._navigator.stateService.currentNode$.pipe(a.scan(function(e,t){var r=t.sequenceKey;e.report=[];if(!(r in e.reported)){e.report=[r];e.reported[r]=true}return e},{report:[],reported:{}}),a.filter(function(e){return e.report.length>0}),a.mergeMap(function(r){return e._navigator.apiV3.sequenceViewAdd$(r.report).pipe(a.catchError(function(e,t){console.error("Failed to report sequence stats ("+r.report+")",e);return i.empty()}))})).subscribe(function(){});this._imageSubscription=this._navigator.stateService.currentNode$.pipe(a.map(function(e){return e.key})).pipe(a.buffer(this._navigator.stateService.currentNode$.pipe(a.debounceTime(5e3,this._scheduler))),a.scan(function(e,t){e.report=[];for(var r=0,n=t;r<n.length;r++){var i=n[r];if(!(i in e.reported)){e.report.push(i);e.reported[i]=true}}return e},{report:[],reported:{}}),a.filter(function(e){return e.report.length>0}),a.mergeMap(function(r){return e._navigator.apiV3.imageViewAdd$(r.report).pipe(a.catchError(function(e,t){console.error("Failed to report image stats ("+r.report+")",e);return i.empty()}))})).subscribe(function(){})};e.prototype._deactivate=function(){this._sequenceSubscription.unsubscribe();this._imageSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.componentName="stats";return e}(o.Component);r.StatsComponent=s;o.ComponentService.register(s);r.default=s},{"../Component":291,rxjs:43,"rxjs/operators":241}],319:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.DirectionComponent=void 0;var i=e("virtual-dom");var a=e("rxjs");var s=e("rxjs/operators");var u=e("../../Component");var o=function(o){n(t,o);function t(e,t,r,n){var i=o.call(this,e,t,r)||this;i._renderer=!!n?n:new u.DirectionDOMRenderer(i.defaultConfiguration,{height:t.element.offsetHeight,width:t.element.offsetWidth});i._hoveredKeySubject$=new a.Subject;i._hoveredKey$=i._hoveredKeySubject$.pipe(s.share());return i}Object.defineProperty(t.prototype,"hoveredKey$",{get:function(){return this._hoveredKey$},enumerable:false,configurable:true});t.prototype.setHighlightKey=function(e){this.configure({highlightKey:e})};t.prototype.setMinWidth=function(e){this.configure({minWidth:e})};t.prototype.setMaxWidth=function(e){this.configure({maxWidth:e})};t.prototype._activate=function(){var n=this;this._configurationSubscription=this._configuration$.subscribe(function(e){n._renderer.setConfiguration(e)});this._resizeSubscription=this._container.renderService.size$.subscribe(function(e){n._renderer.resize(e)});this._nodeSubscription=this._navigator.stateService.currentNode$.pipe(s.tap(function(e){n._container.domRenderer.render$.next({name:n._name,vnode:i.h("div",{},[])});n._renderer.setNode(e)}),s.withLatestFrom(this._configuration$),s.switchMap(function(e){var r=e[0],t=e[1];return a.combineLatest(r.spatialEdges$,t.distinguishSequence?n._navigator.graphService.cacheSequence$(r.sequenceKey).pipe(s.catchError(function(e,t){console.error("Failed to cache sequence ("+r.sequenceKey+")",e);return a.of(null)})):a.of(null))})).subscribe(function(e){var t=e[0],r=e[1];n._renderer.setEdges(t,r)});this._renderCameraSubscription=this._container.renderService.renderCameraFrame$.pipe(s.tap(function(e){n._renderer.setRenderCamera(e)}),s.map(function(){return n._renderer}),s.filter(function(e){return e.needsRender}),s.map(function(e){return{name:n._name,vnode:e.render(n._navigator)}})).subscribe(this._container.domRenderer.render$);this._hoveredKeySubscription=a.combineLatest(this._container.domRenderer.element$,this._container.renderService.renderCamera$,this._container.mouseService.mouseMove$.pipe(s.startWith(null)),this._container.mouseService.mouseUp$.pipe(s.startWith(null))).pipe(s.map(function(e){var t=e[0];var r=t.getElementsByClassName("DirectionsPerspective");for(var n=0;n<r.length;n++){var i=r.item(n).querySelector(":hover");if(i!=null&&i.hasAttribute("data-key")){return i.getAttribute("data-key")}}return null}),s.distinctUntilChanged()).subscribe(this._hoveredKeySubject$);this._emitHoveredKeySubscription=this._hoveredKey$.subscribe(function(e){n.fire(t.hoveredkeychanged,e)})};t.prototype._deactivate=function(){this._configurationSubscription.unsubscribe();this._emitHoveredKeySubscription.unsubscribe();this._hoveredKeySubscription.unsubscribe();this._nodeSubscription.unsubscribe();this._renderCameraSubscription.unsubscribe()};t.prototype._getDefaultConfiguration=function(){return{distinguishSequence:false,maxWidth:460,minWidth:260}};t.componentName="direction";t.hoveredkeychanged="hoveredkeychanged";return t}(u.Component);r.DirectionComponent=o;u.ComponentService.register(o);r.default=o},{"../../Component":291,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],320:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DirectionDOMCalculator=void 0;var n=e("../../Geo");var i=function(){function e(e,t){this._spatial=new n.Spatial;this._minThresholdWidth=320;this._maxThresholdWidth=1480;this._minThresholdHeight=240;this._maxThresholdHeight=820;this._configure(e);this._resize(t);this._reset()}Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerWidth",{get:function(){return this._containerWidth},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerWidthCss",{get:function(){return this._containerWidthCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerMarginCss",{get:function(){return this._containerMarginCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerLeftCss",{get:function(){return this._containerLeftCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerHeight",{get:function(){return this._containerHeight},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerHeightCss",{get:function(){return this._containerHeightCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"containerBottomCss",{get:function(){return this._containerBottomCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"stepCircleSize",{get:function(){return this._stepCircleSize},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"stepCircleSizeCss",{get:function(){return this._stepCircleSizeCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"stepCircleMarginCss",{get:function(){return this._stepCircleMarginCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"turnCircleSize",{get:function(){return this._turnCircleSize},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"turnCircleSizeCss",{get:function(){return this._turnCircleSizeCss},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"outerRadius",{get:function(){return this._outerRadius},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._innerRadius},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"shadowOffset",{get:function(){return this._shadowOffset},enumerable:false,configurable:true});e.prototype.configure=function(e){this._configure(e);this._reset()};e.prototype.resize=function(e){this._resize(e);this._reset()};e.prototype.angleToCoordinates=function(e){return[Math.cos(e),Math.sin(e)]};e.prototype.relativeAngleToCoordiantes=function(e,t){var r=this._spatial.wrapAngle(e-t);return this.angleToCoordinates(r)};e.prototype._configure=function(e){this._minWidth=e.minWidth;this._maxWidth=this._getMaxWidth(e.minWidth,e.maxWidth)};e.prototype._resize=function(e){this._elementWidth=e.width;this._elementHeight=e.height};e.prototype._reset=function(){this._containerWidth=this._getContainerWidth(this._elementWidth,this._elementHeight);this._containerHeight=this._getContainerHeight(this.containerWidth);this._stepCircleSize=this._getStepCircleDiameter(this._containerHeight);this._turnCircleSize=this._getTurnCircleDiameter(this.containerHeight);this._outerRadius=this._getOuterRadius(this._containerHeight);this._innerRadius=this._getInnerRadius(this._containerHeight);this._shadowOffset=3;this._containerWidthCss=this._numberToCssPixels(this._containerWidth);this._containerMarginCss=this._numberToCssPixels(-.5*this._containerWidth);this._containerLeftCss=this._numberToCssPixels(Math.floor(.5*this._elementWidth));this._containerHeightCss=this._numberToCssPixels(this._containerHeight);this._containerBottomCss=this._numberToCssPixels(Math.floor(-.08*this._containerHeight));this._stepCircleSizeCss=this._numberToCssPixels(this._stepCircleSize);this._stepCircleMarginCss=this._numberToCssPixels(-.5*this._stepCircleSize);this._turnCircleSizeCss=this._numberToCssPixels(this._turnCircleSize)};e.prototype._getContainerWidth=function(e,t){var r=(e-this._minThresholdWidth)/(this._maxThresholdWidth-this._minThresholdWidth);var n=(t-this._minThresholdHeight)/(this._maxThresholdHeight-this._minThresholdHeight);var i=Math.max(0,Math.min(1,Math.min(r,n)));i=.04*Math.round(25*i);return this._minWidth+i*(this._maxWidth-this._minWidth)};e.prototype._getContainerHeight=function(e){return.77*e};e.prototype._getStepCircleDiameter=function(e){return.34*e};e.prototype._getTurnCircleDiameter=function(e){return.3*e};e.prototype._getOuterRadius=function(e){return.31*e};e.prototype._getInnerRadius=function(e){return.125*e};e.prototype._numberToCssPixels=function(e){return e+"px"};e.prototype._getMaxWidth=function(e,t){return e>t?e:t};return e}();r.DirectionDOMCalculator=i;r.default=i},{"../../Geo":294}],321:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DirectionDOMRenderer=void 0;var x=e("virtual-dom");var n=e("../../Component");var f=e("../../Edge");var c=e("../../Error");var i=e("../../Geo");var o=function(){function e(e,t){this._isEdge=false;this._spatial=new i.Spatial;this._calculator=new n.DirectionDOMCalculator(e,t);this._node=null;this._rotation={phi:0,theta:0};this._epsilon=.5*Math.PI/180;this._highlightKey=null;this._distinguishSequence=false;this._needsRender=false;this._stepEdges=[];this._turnEdges=[];this._panoEdges=[];this._sequenceEdgeKeys=[];this._stepDirections=[f.EdgeDirection.StepForward,f.EdgeDirection.StepBackward,f.EdgeDirection.StepLeft,f.EdgeDirection.StepRight];this._turnDirections=[f.EdgeDirection.TurnLeft,f.EdgeDirection.TurnRight,f.EdgeDirection.TurnU];this._turnNames={};this._turnNames[f.EdgeDirection.TurnLeft]="TurnLeft";this._turnNames[f.EdgeDirection.TurnRight]="TurnRight";this._turnNames[f.EdgeDirection.TurnU]="TurnAround";var r=!!document.documentMode;this._isEdge=!r&&!!window.StyleMedia}Object.defineProperty(e.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:false,configurable:true});e.prototype.render=function(e){this._needsRender=false;var t=this._rotation;var r=[];var n=[];if(this._node.pano){r=r.concat(this._createPanoArrows(e,t))}else{r=r.concat(this._createPerspectiveToPanoArrows(e,t));r=r.concat(this._createStepArrows(e,t));n=n.concat(this._createTurnArrows(e))}return this._getContainer(r,n,t)};e.prototype.setEdges=function(e,t){this._setEdges(e,t);this._setNeedsRender()};e.prototype.setNode=function(e){this._node=e;this._clearEdges();this._setNeedsRender()};e.prototype.setRenderCamera=function(e){var t=e.rotation;if(Math.abs(t.phi-this._rotation.phi)<this._epsilon){return}this._rotation=t;this._setNeedsRender()};e.prototype.setConfiguration=function(e){var t=false;if(this._highlightKey!==e.highlightKey||this._distinguishSequence!==e.distinguishSequence){this._highlightKey=e.highlightKey;this._distinguishSequence=e.distinguishSequence;t=true}if(this._calculator.minWidth!==e.minWidth||this._calculator.maxWidth!==e.maxWidth){this._calculator.configure(e);t=true}if(t){this._setNeedsRender()}};e.prototype.resize=function(e){this._calculator.resize(e);this._setNeedsRender()};e.prototype._setNeedsRender=function(){if(this._node!=null){this._needsRender=true}};e.prototype._clearEdges=function(){this._stepEdges=[];this._turnEdges=[];this._panoEdges=[];this._sequenceEdgeKeys=[]};e.prototype._setEdges=function(e,t){this._stepEdges=[];this._turnEdges=[];this._panoEdges=[];this._sequenceEdgeKeys=[];for(var r=0,n=e.edges;r<n.length;r++){var i=n[r];var o=i.data.direction;if(this._stepDirections.indexOf(o)>-1){this._stepEdges.push(i);continue}if(this._turnDirections.indexOf(o)>-1){this._turnEdges.push(i);continue}if(i.data.direction===f.EdgeDirection.Pano){this._panoEdges.push(i)}}if(this._distinguishSequence&&t!=null){var a=this._panoEdges.concat(this._stepEdges).concat(this._turnEdges);for(var s=0,u=a;s<u.length;s++){var i=u[s];var c=i.to;for(var l=0,h=t.keys;l<h.length;l++){var p=h[l];if(p===c){this._sequenceEdgeKeys.push(c);break}}}}};e.prototype._createPanoArrows=function(e,t){var r=[];for(var n=0,i=this._panoEdges;n<i.length;n++){var o=i[n];r.push(this._createVNodeByKey(e,o.to,o.data.worldMotionAzimuth,t,this._calculator.outerRadius,"DirectionsArrowPano"))}for(var a=0,s=this._stepEdges;a<s.length;a++){var u=s[a];r.push(this._createPanoToPerspectiveArrow(e,u.to,u.data.worldMotionAzimuth,t,u.data.direction))}return r};e.prototype._createPanoToPerspectiveArrow=function(e,t,r,n,i){var o=Math.PI/8;var a=n.phi;switch(i){case f.EdgeDirection.StepBackward:a=n.phi-Math.PI;break;case f.EdgeDirection.StepLeft:a=n.phi+Math.PI/2;break;case f.EdgeDirection.StepRight:a=n.phi-Math.PI/2;break;default:break}if(Math.abs(this._spatial.wrapAngle(r-a))<o){return this._createVNodeByKey(e,t,r,n,this._calculator.outerRadius,"DirectionsArrowStep")}return this._createVNodeDisabled(t,r,n)};e.prototype._createPerspectiveToPanoArrows=function(e,t){var r=[];for(var n=0,i=this._panoEdges;n<i.length;n++){var o=i[n];r.push(this._createVNodeByKey(e,o.to,o.data.worldMotionAzimuth,t,this._calculator.innerRadius,"DirectionsArrowPano",true))}return r};e.prototype._createStepArrows=function(e,t){var r=[];for(var n=0,i=this._stepEdges;n<i.length;n++){var o=i[n];r.push(this._createVNodeByDirection(e,o.to,o.data.worldMotionAzimuth,t,o.data.direction))}return r};e.prototype._createTurnArrows=function(e){var t=[];for(var r=0,n=this._turnEdges;r<n.length;r++){var i=n[r];var o=i.data.direction;var a=this._turnNames[o];t.push(this._createVNodeByTurn(e,i.to,a,o))}return t};e.prototype._createVNodeByKey=function(t,r,e,n,i,o,a){var s=function(e){t.moveToKey$(r).subscribe(undefined,function(e){if(!(e instanceof c.AbortMapillaryError)){console.error(e)}})};return this._createVNode(r,e,n,i,o,"DirectionsCircle",s,a)};e.prototype._createVNodeByDirection=function(t,e,r,n,i){var o=function(e){t.moveDir$(i).subscribe(undefined,function(e){if(!(e instanceof c.AbortMapillaryError)){console.error(e)}})};return this._createVNode(e,r,n,this._calculator.outerRadius,"DirectionsArrowStep","DirectionsCircle",o)};e.prototype._createVNodeByTurn=function(t,e,r,n){var i=function(e){t.moveDir$(n).subscribe(undefined,function(e){if(!(e instanceof c.AbortMapillaryError)){console.error(e)}})};var o={height:this._calculator.turnCircleSizeCss,transform:"rotate(0)",width:this._calculator.turnCircleSizeCss};switch(n){case f.EdgeDirection.TurnLeft:o.left="5px";o.top="5px";break;case f.EdgeDirection.TurnRight:o.right="5px";o.top="5px";break;case f.EdgeDirection.TurnU:o.left="5px";o.bottom="5px";break;default:break}var a={attributes:{"data-key":e},onclick:i,style:o};var s="TurnCircle";if(this._sequenceEdgeKeys.indexOf(e)>-1){s+="Sequence"}if(this._highlightKey===e){s+="Highlight"}var u=x.h("div."+r,{},[]);return x.h("div."+s,a,[u])};e.prototype._createVNodeDisabled=function(e,t,r){return this._createVNode(e,t,r,this._calculator.outerRadius,"DirectionsArrowDisabled","DirectionsCircleDisabled")};e.prototype._createVNode=function(e,t,r,n,i,o,a,s){var u=this._calculator.angleToCoordinates(t-r.phi);var c=Math.round(-n*u[1]+.5*this._calculator.containerWidth);var l=Math.round(-n*u[0]+.5*this._calculator.containerHeight);var h=this._calculator.relativeAngleToCoordiantes(t,r.phi);var p=this._calculator.shadowOffset;var f=-p*h[1];var d=p*h[0];var v="drop-shadow("+f+"px "+d+"px 1px rgba(0,0,0,0.8))";var m={style:{"-webkit-filter":v,filter:v}};var g=x.h("div."+i,m,[]);var _=-this._spatial.radToDeg(t-r.phi);var y=s?"translate("+c+"px, "+l+"px) rotate("+_+"deg) translateZ(-0.01px)":"translate("+c+"px, "+l+"px) rotate("+_+"deg)";var b={attributes:{"data-key":e},onclick:a,style:{height:this._calculator.stepCircleSizeCss,marginLeft:this._calculator.stepCircleMarginCss,marginTop:this._calculator.stepCircleMarginCss,transform:y,width:this._calculator.stepCircleSizeCss}};if(this._sequenceEdgeKeys.indexOf(e)>-1){o+="Sequence"}if(this._highlightKey===e){o+="Highlight"}return x.h("div."+o,b,[g])};e.prototype._getContainer=function(e,t,r){var n=this._isEdge?"rotateX(60deg)":"perspective("+this._calculator.containerWidthCss+") rotateX(60deg)";var i={oncontextmenu:function(e){e.preventDefault()},style:{bottom:this._calculator.containerBottomCss,height:this._calculator.containerHeightCss,left:this._calculator.containerLeftCss,marginLeft:this._calculator.containerMarginCss,transform:n,width:this._calculator.containerWidthCss}};return x.h("div.DirectionsPerspective",i,t.concat(e))};return e}();r.DirectionDOMRenderer=o;r.default=o},{"../../Component":291,"../../Edge":292,"../../Error":293,"../../Geo":294,"virtual-dom":247}],322:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ImagePlaneComponent=void 0;var m=e("rxjs");var g=e("rxjs/operators");var o=e("../../Component");var s=e("../../Viewer");var u=e("../../Render");var c=e("../../Tiles");var l=e("../../Utils");var _=e("../../geo/ViewportCoords");var y=e("../../geo/Spatial");var i=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t,r)||this;n._imageTileLoader=new c.ImageTileLoader(l.Urls.tileScheme,l.Urls.tileDomain,l.Urls.origin);n._roiCalculator=new c.RegionOfInterestCalculator;n._rendererOperation$=new m.Subject;n._rendererCreator$=new m.Subject;n._rendererDisposer$=new m.Subject;n._renderer$=n._rendererOperation$.pipe(g.scan(function(e,t){return t(e)},null),g.filter(function(e){return e!=null}),g.distinctUntilChanged(undefined,function(e){return e.frameId}));n._rendererCreator$.pipe(g.map(function(){return function(e){if(e!=null){throw new Error("Multiple image plane states can not be created at the same time")}return new o.ImagePlaneGLRenderer}})).subscribe(n._rendererOperation$);n._rendererDisposer$.pipe(g.map(function(){return function(e){e.dispose();return null}})).subscribe(n._rendererOperation$);return n}e.prototype._activate=function(){var v=this;this._rendererSubscription=this._renderer$.pipe(g.map(function(e){var t={name:v._name,render:{frameId:e.frameId,needsRender:e.needsRender,render:e.render.bind(e),stage:u.GLRenderStage.Background}};e.clearNeedsRender();return t})).subscribe(this._container.glRenderer.render$);this._rendererCreator$.next(null);this._stateSubscription=this._navigator.stateService.currentState$.pipe(g.map(function(t){return function(e){e.updateFrame(t);return e}})).subscribe(this._rendererOperation$);var t=this._navigator.stateService.currentState$.pipe(g.distinctUntilChanged(undefined,function(e){return e.state.currentNode.key}),g.withLatestFrom(this._container.glRenderer.webGLRenderer$,this._container.renderService.size$),g.map(function(e){var t=e[0],r=e[1],n=e[2];var i=t.state;var o=Math.max(n.width,n.height);var a=i.currentNode;var s=i.currentTransform;var u=o>2048?2048:o>1024?1024:512;return new c.TextureProvider(a.key,s.basicWidth,s.basicHeight,u,a.image,v._imageTileLoader,new c.ImageTileStore,r)}),g.publishReplay(1),g.refCount());this._textureProviderSubscription=t.subscribe(function(){});this._setTextureProviderSubscription=t.pipe(g.map(function(t){return function(e){e.setTextureProvider(t.key,t);return e}})).subscribe(this._rendererOperation$);this._setTileSizeSubscription=this._container.renderService.size$.pipe(g.switchMap(function(e){return m.combineLatest(t,m.of(e)).pipe(g.first())})).subscribe(function(e){var t=e[0],r=e[1];var n=Math.max(r.width,r.height);var i=n>2048?2048:n>1024?1024:512;t.setTileSize(i)});this._abortTextureProviderSubscription=t.pipe(g.pairwise()).subscribe(function(e){var t=e[0];t.abort()});var e=m.combineLatest(this._container.renderService.renderCameraFrame$,this._container.renderService.size$.pipe(g.debounceTime(250))).pipe(g.map(function(e){var t=e[0],r=e[1];return[t.camera.position.clone(),t.camera.lookat.clone(),t.zoom.valueOf(),r.height.valueOf(),r.width.valueOf()]}),g.pairwise(),g.skipWhile(function(e){return e[1][2]-e[0][2]<0||e[1][2]===0}),g.map(function(e){var t=e[0][0].equals(e[1][0]);var r=e[0][1].equals(e[1][1]);var n=e[0][2]===e[1][2];var i=e[0][3]===e[1][3];var o=e[0][4]===e[1][4];return t&&r&&n&&i&&o}),g.distinctUntilChanged(),g.filter(function(e){return e}),g.switchMap(function(e){return v._container.renderService.renderCameraFrame$.pipe(g.first())}),g.withLatestFrom(this._container.renderService.size$,this._navigator.stateService.currentTransform$));this._setRegionOfInterestSubscription=t.pipe(g.switchMap(function(o){return e.pipe(g.map(function(e){var t=e[0],r=e[1],n=e[2];var i=(new _.default).viewportToBasic(0,0,n,t.perspective);if(i[0]<0||i[1]<0||i[0]>1||i[1]>1){return undefined}return[v._roiCalculator.computeRegionOfInterest(t,r,n),o]}),g.filter(function(e){return!!e}))}),g.filter(function(e){return!e[1].disposed})).subscribe(function(e){var t=e[0];var r=e[1];r.setRegionOfInterest(t)});var n=t.pipe(g.switchMap(function(e){return e.hasTexture$}),g.startWith(false),g.publishReplay(1),g.refCount());this._hasTextureSubscription=n.subscribe(function(){});var r=this._navigator.stateService.currentState$.pipe(g.filter(function(e){return e.state.nodesAhead===0}),g.map(function(e){return e.state.currentNode}),g.distinctUntilChanged(undefined,function(e){return e.key}),g.debounceTime(1e3),g.withLatestFrom(n),g.filter(function(e){return!e[1]}),g.map(function(e){return e[0]}),g.filter(function(e){return e.pano?l.Settings.maxImageSize>l.Settings.basePanoramaSize:l.Settings.maxImageSize>l.Settings.baseImageSize}),g.switchMap(function(r){var e=r.pano?l.Settings.basePanoramaSize:l.Settings.baseImageSize;if(Math.max(r.image.width,r.image.height)>e){return m.empty()}var t=r.cacheImage$(l.Settings.maxImageSize).pipe(g.map(function(e){return[e.image,e]}));return t.pipe(g.takeUntil(n.pipe(g.filter(function(e){return e}))),g.catchError(function(e,t){console.error("Failed to fetch high res image ("+r.key+")",e);return m.empty()}))})).pipe(g.publish(),g.refCount());this._updateBackgroundSubscription=r.pipe(g.withLatestFrom(t)).subscribe(function(e){if(e[0][1].key!==e[1].key||e[1].disposed){return}e[1].updateBackground(e[0][0])});this._updateTextureImageSubscription=r.pipe(g.map(function(t){return function(e){e.updateTextureImage(t[0],t[1]);return e}})).subscribe(this._rendererOperation$);this._clearPeripheryPlaneSubscription=this._navigator.panService.panNodes$.pipe(g.filter(function(e){return e.length===0}),g.map(function(){return function(e){e.clearPeripheryPlanes();return e}})).subscribe(this._rendererOperation$);var i=this._navigator.panService.panNodes$.pipe(g.switchMap(function(e){return m.from(e).pipe(g.mergeMap(function(e){var t=e[0],r=e[1];return m.combineLatest(v._navigator.graphService.cacheNode$(t.key).pipe(g.catchError(function(e){console.error("Failed to cache periphery node ("+t.key+")",e);return m.empty()})),m.of(r))}))}),g.share());this._addPeripheryPlaneSubscription=i.pipe(g.map(function(e){var t=e[0],r=e[1];return function(e){e.addPeripheryPlane(t,r);return e}})).subscribe(this._rendererOperation$);this._updatePeripheryPlaneTextureSubscription=i.pipe(g.mergeMap(function(e){var t=e[0];return s.ImageSize.Size2048>Math.max(t.image.width,t.image.height)?t.cacheImage$(s.ImageSize.Size2048).pipe(g.catchError(function(){return m.empty()})):m.empty()}),g.map(function(t){return function(e){e.updateTextureImage(t.image,t);return e}})).subscribe(this._rendererOperation$);var o=this._navigator.stateService.currentState$.pipe(g.map(function(e){return e.state.alpha<1}),g.distinctUntilChanged());var a=m.combineLatest(this._container.mouseService.active$,this._container.touchService.active$,this._navigator.stateService.inMotion$,o).pipe(g.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return!(t||r||n||i)}),g.filter(function(e){return e}));this._moveToPeripheryNodeSubscription=this._navigator.panService.panNodes$.pipe(g.switchMap(function(i){return a.pipe(g.withLatestFrom(v._container.renderService.renderCamera$,v._navigator.stateService.currentNode$,v._navigator.stateService.currentTransform$),g.mergeMap(function(e){var t=e[1],r=e[2],n=e[3];return m.of([t,r,n,i])}))}),g.switchMap(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];var o=t.camera.lookat.clone().sub(t.camera.position);var a=(new y.default).viewingDirection(r.rotation);var s=a.angleTo(o);var u=[s,undefined];var c=(new _.default).viewportToBasic(0,0,n,t.perspective);if(c[0]>=0&&c[0]<=1&&c[1]>=0&&c[1]<=1){u[0]=Number.NEGATIVE_INFINITY}for(var l=0,h=i;l<h.length;l++){var p=h[l][0];var f=(new y.default).viewingDirection(p.rotation);var d=f.angleTo(o);if(d<u[0]){u[0]=d;u[1]=p.key}}if(!u[1]){return m.empty()}return v._navigator.moveToKey$(u[1]).pipe(g.catchError(function(){return m.empty()}))})).subscribe()};e.prototype._deactivate=function(){this._rendererDisposer$.next(null);this._abortTextureProviderSubscription.unsubscribe();this._hasTextureSubscription.unsubscribe();this._rendererSubscription.unsubscribe();this._setRegionOfInterestSubscription.unsubscribe();this._setTextureProviderSubscription.unsubscribe();this._setTileSizeSubscription.unsubscribe();this._stateSubscription.unsubscribe();this._textureProviderSubscription.unsubscribe();this._updateBackgroundSubscription.unsubscribe();this._updateTextureImageSubscription.unsubscribe();this._clearPeripheryPlaneSubscription.unsubscribe();this._addPeripheryPlaneSubscription.unsubscribe();this._updatePeripheryPlaneTextureSubscription.unsubscribe();this._moveToPeripheryNodeSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{}};e.componentName="imagePlane";return e}(o.Component);r.ImagePlaneComponent=i;o.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Render":297,"../../Tiles":300,"../../Utils":301,"../../Viewer":302,"../../geo/Spatial":419,"../../geo/ViewportCoords":421,rxjs:43,"rxjs/operators":241}],323:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ImagePlaneGLRenderer=void 0;var n=e("../../Component");var i=function(){function e(){this._factory=new n.MeshFactory;this._scene=new n.MeshScene;this._alpha=0;this._alphaOld=0;this._fadeOutSpeed=.05;this._currentKey=null;this._previousKey=null;this._providerDisposers={};this._frameId=0;this._needsRender=false}Object.defineProperty(e.prototype,"frameId",{get:function(){return this._frameId},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:false,configurable:true});e.prototype.indicateNeedsRender=function(){this._needsRender=true};e.prototype.addPeripheryPlane=function(e,t){var r=this._factory.createMesh(e,t);var n={};n[e.key]=r;this._scene.addPeripheryPlanes(n);this._needsRender=true};e.prototype.clearPeripheryPlanes=function(){this._scene.setPeripheryPlanes({});this._needsRender=true};e.prototype.updateFrame=function(e){this._updateFrameId(e.id);this._needsRender=this._updateAlpha(e.state.alpha)||this._needsRender;this._needsRender=this._updateAlphaOld(e.state.alpha)||this._needsRender;this._needsRender=this._updateImagePlanes(e.state)||this._needsRender};e.prototype.setTextureProvider=function(e,t){var r=this;if(e!==this._currentKey){return}var n=t.textureCreated$.subscribe(function(e){r._updateTexture(e)});var i=t.textureUpdated$.subscribe(function(e){r._needsRender=true});var o=function(){n.unsubscribe();i.unsubscribe();t.dispose()};if(e in this._providerDisposers){var a=this._providerDisposers[e];a();delete this._providerDisposers[e]}this._providerDisposers[e]=o};e.prototype.updateTextureImage=function(e,t){this._needsRender=true;var r=this._extend({},this._scene.planes,this._scene.planesOld,this._scene.planesPeriphery);for(var n in r){if(!r.hasOwnProperty(n)){continue}if(n!==t.key){continue}var i=r[n];var o=i.material;var a=o.uniforms.projectorTex.value;a.image=e;a.needsUpdate=true}};e.prototype.render=function(e,t){var r=this._scene.planes;var n=this._scene.planesOld;var i=this._scene.planesPeriphery;var o=Object.keys(n).length?1:this._alpha;var a=Object.keys(n).length?1:Math.floor(this._alpha);for(var s in r){if(!r.hasOwnProperty(s)){continue}var u=r[s];u.material.uniforms.opacity.value=o}for(var s in n){if(!n.hasOwnProperty(s)){continue}var u=n[s];u.material.uniforms.opacity.value=this._alphaOld}for(var s in i){if(!i.hasOwnProperty(s)){continue}var u=i[s];u.material.uniforms.opacity.value=a}t.render(this._scene.scenePeriphery,e);t.render(this._scene.scene,e);t.render(this._scene.sceneOld,e);for(var s in r){if(!r.hasOwnProperty(s)){continue}var u=r[s];u.material.uniforms.opacity.value=this._alpha}t.render(this._scene.scene,e)};e.prototype.clearNeedsRender=function(){this._needsRender=false};e.prototype.dispose=function(){this._scene.clear()};e.prototype._updateFrameId=function(e){this._frameId=e};e.prototype._updateAlpha=function(e){if(e===this._alpha){return false}this._alpha=e;return true};e.prototype._updateAlphaOld=function(e){if(e<1||this._alphaOld===0){return false}this._alphaOld=Math.max(0,this._alphaOld-this._fadeOutSpeed);return true};e.prototype._updateImagePlanes=function(e){if(e.currentNode==null||e.currentNode.key===this._currentKey){return false}var t=e.previousNode!=null?e.previousNode.key:null;var r=e.currentNode.key;if(this._previousKey!==t&&this._previousKey!==r&&this._previousKey in this._providerDisposers){var n=this._providerDisposers[this._previousKey];n();delete this._providerDisposers[this._previousKey]}if(t!=null){if(t!==this._currentKey&&t!==this._previousKey){var i=this._factory.createMesh(e.previousNode,e.previousTransform);var o={};o[t]=i;this._scene.updateImagePlanes(o)}this._previousKey=t}this._currentKey=r;var a=this._factory.createMesh(e.currentNode,e.currentTransform);var s={};s[r]=a;this._scene.updateImagePlanes(s);this._alphaOld=1;return true};e.prototype._updateTexture=function(e){this._needsRender=true;var t=this._scene.planes;for(var r in t){if(!t.hasOwnProperty(r)){continue}var n=t[r];var i=n.material;var o=i.uniforms.projectorTex.value;i.uniforms.projectorTex.value=null;o.dispose();i.uniforms.projectorTex.value=e}};e.prototype._extend=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}for(var n=0,i=t;n<i.length;n++){var o=i[n];for(var a in o){if(!o.hasOwnProperty(a)){continue}e[a]=o[a]}}return e};return e}();r.ImagePlaneGLRenderer=i;r.default=i},{"../../Component":291}],324:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],325:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.CoverState=void 0;var n;(function(e){e[e["Hidden"]=0]="Hidden";e[e["Loading"]=1]="Loading";e[e["Visible"]=2]="Visible"})(n=r.CoverState||(r.CoverState={}))},{}],326:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SliderMode=void 0;var n;(function(e){e[e["Motion"]=0]="Motion";e[e["Stationary"]=1]="Stationary"})(n=r.SliderMode||(r.SliderMode={}))},{}],327:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!t.hasOwnProperty(r))n(t,e,r)};Object.defineProperty(r,"__esModule",{value:true});var o=e("./ICoverConfiguration");Object.defineProperty(r,"CoverState",{enumerable:true,get:function(){return o.CoverState}});var a=e("./ISliderConfiguration");Object.defineProperty(r,"SliderMode",{enumerable:true,get:function(){return a.SliderMode}});i(e("../imageplane/interfaces/interfaces"),r);i(e("../marker/interfaces/interfaces"),r);i(e("../spatialdata/interfaces/interfaces"),r);i(e("../tag/interfaces/interfaces"),r)},{"../imageplane/interfaces/interfaces":324,"../marker/interfaces/interfaces":337,"../spatialdata/interfaces/interfaces":365,"../tag/interfaces/interfaces":390,"./ICoverConfiguration":325,"./ISliderConfiguration":326}],328:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.KeyPlayHandler=void 0;var i=e("rxjs/operators");var o=e("../../Component");var h=e("../../Edge");var a=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._enable=function(){var l=this;this._keyDownSubscription=this._container.keyboardService.keyDown$.pipe(i.withLatestFrom(this._navigator.playService.playing$,this._navigator.playService.direction$,this._navigator.playService.speed$,this._navigator.stateService.currentNode$.pipe(i.switchMap(function(e){return e.sequenceEdges$})))).subscribe(function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(t.altKey||t.ctrlKey||t.metaKey){return}switch(t.key){case"D":if(!t.shiftKey){return}var a=r?null:n===h.EdgeDirection.Next?h.EdgeDirection.Prev:n===h.EdgeDirection.Prev?h.EdgeDirection.Next:null;if(a!=null){l._navigator.playService.setDirection(a)}break;case" ":if(t.shiftKey){return}if(r){l._navigator.playService.stop()}else{for(var s=0,u=o.edges;s<u.length;s++){var c=u[s];if(c.data.direction===n){l._navigator.playService.play()}}}break;case"<":l._navigator.playService.setSpeed(i-.05);break;case">":l._navigator.playService.setSpeed(i+.05);break;default:return}t.preventDefault()})};t.prototype._disable=function(){this._keyDownSubscription.unsubscribe()};t.prototype._getConfiguration=function(e){return{keyZoom:e}};return t}(o.HandlerBase);r.KeyPlayHandler=a;r.default=a},{"../../Component":291,"../../Edge":292,"rxjs/operators":241}],329:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.KeySequenceNavigationHandler=void 0;var i=e("rxjs/operators");var o=e("../../Component");var u=e("../../Edge");var c=e("../../Error");var a=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._enable=function(){var s=this;var e=this._navigator.stateService.currentNode$.pipe(i.switchMap(function(e){return e.sequenceEdges$}));this._keyDownSubscription=this._container.keyboardService.keyDown$.pipe(i.withLatestFrom(e)).subscribe(function(e){var t=e[0],r=e[1];var n=null;switch(t.keyCode){case 38:n=u.EdgeDirection.Next;break;case 40:n=u.EdgeDirection.Prev;break;default:return}t.preventDefault();if(!t.altKey||t.shiftKey||!r.cached){return}for(var i=0,o=r.edges;i<o.length;i++){var a=o[i];if(a.data.direction===n){s._navigator.moveToKey$(a.to).subscribe(undefined,function(e){if(!(e instanceof c.AbortMapillaryError)){console.error(e)}});return}}})};t.prototype._disable=function(){this._keyDownSubscription.unsubscribe()};t.prototype._getConfiguration=function(e){return{keySequenceNavigation:e}};return t}(o.HandlerBase);r.KeySequenceNavigationHandler=a;r.default=a},{"../../Component":291,"../../Edge":292,"../../Error":293,"rxjs/operators":241}],330:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.KeySpatialNavigationHandler=void 0;var i=e("rxjs/operators");var o=e("../../Component");var _=e("../../Edge");var a=e("../../Error");var s=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._spatial=n;return i}e.prototype._enable=function(){var g=this;var e=this._navigator.stateService.currentNode$.pipe(i.switchMap(function(e){return e.spatialEdges$}));this._keyDownSubscription=this._container.keyboardService.keyDown$.pipe(i.withLatestFrom(e,this._navigator.stateService.currentState$)).subscribe(function(e){var t=e[0],r=e[1],n=e[2];var i=n.state.currentNode.pano;var o=null;switch(t.keyCode){case 37:o=t.shiftKey&&!i?_.EdgeDirection.TurnLeft:_.EdgeDirection.StepLeft;break;case 38:o=t.shiftKey&&!i?_.EdgeDirection.Pano:_.EdgeDirection.StepForward;break;case 39:o=t.shiftKey&&!i?_.EdgeDirection.TurnRight:_.EdgeDirection.StepRight;break;case 40:o=t.shiftKey&&!i?_.EdgeDirection.TurnU:_.EdgeDirection.StepBackward;break;default:return}t.preventDefault();if(t.altKey||!r.cached||t.shiftKey&&i){return}if(!i){g._moveDir(o,r)}else{var a={};a[_.EdgeDirection.StepBackward]=Math.PI;a[_.EdgeDirection.StepForward]=0;a[_.EdgeDirection.StepLeft]=Math.PI/2;a[_.EdgeDirection.StepRight]=-Math.PI/2;var s=g._rotationFromCamera(n.state.camera).phi;var u=g._spatial.wrapAngle(s+a[o]);var c=Math.PI/4;var l=r.edges.filter(function(e){return e.data.direction===_.EdgeDirection.Pano||e.data.direction===o});var h=Number.MAX_VALUE;var p=null;for(var f=0,d=l;f<d.length;f++){var v=d[f];var m=Math.abs(g._spatial.wrapAngle(v.data.worldMotionAzimuth-u));if(m<Math.min(h,c)){h=m;p=v.to}}if(p==null){return}g._moveToKey(p)}})};e.prototype._disable=function(){this._keyDownSubscription.unsubscribe()};e.prototype._getConfiguration=function(e){return{keySpatialNavigation:e}};e.prototype._moveDir=function(e,t){for(var r=0,n=t.edges;r<n.length;r++){var i=n[r];if(i.data.direction===e){this._moveToKey(i.to);return}}};e.prototype._moveToKey=function(e){this._navigator.moveToKey$(e).subscribe(undefined,function(e){if(!(e instanceof a.AbortMapillaryError)){console.error(e)}})};e.prototype._rotationFromCamera=function(e){var t=e.lookat.clone().sub(e.position);var r=t.clone().dot(e.up);var n=t.clone().sub(e.up.clone().multiplyScalar(r));var i=Math.atan2(n.y,n.x);var o=Math.PI/2-this._spatial.angleToPlane(t.toArray(),[0,0,1]);return{phi:i,theta:o}};return e}(o.HandlerBase);r.KeySpatialNavigationHandler=s;r.default=s},{"../../Component":291,"../../Edge":292,"../../Error":293,"rxjs/operators":241}],331:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.KeyZoomHandler=void 0;var i=e("rxjs/operators");var o=e("../../Component");var a=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._viewportCoords=n;return i}e.prototype._enable=function(){var s=this;this._keyDownSubscription=this._container.keyboardService.keyDown$.pipe(i.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$)).subscribe(function(e){var t=e[0],r=e[1],n=e[2];if(t.altKey||t.shiftKey||t.ctrlKey||t.metaKey){return}var i=0;switch(t.key){case"+":i=1;break;case"-":i=-1;break;default:return}t.preventDefault();var o=s._viewportCoords.unprojectFromViewport(0,0,r.perspective);var a=n.projectBasic(o.toArray());s._navigator.stateService.zoomIn(i,a)})};e.prototype._disable=function(){this._keyDownSubscription.unsubscribe()};e.prototype._getConfiguration=function(e){return{keyZoom:e}};return e}(o.HandlerBase);r.KeyZoomHandler=a;r.default=a},{"../../Component":291,"rxjs/operators":241}],332:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.KeyboardComponent=void 0;var o=e("../../Component");var a=e("../../Geo");var i=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t,r)||this;n._keyPlayHandler=new o.KeyPlayHandler(n,t,r);n._keySequenceNavigationHandler=new o.KeySequenceNavigationHandler(n,t,r);n._keySpatialNavigationHandler=new o.KeySpatialNavigationHandler(n,t,r,new a.Spatial);n._keyZoomHandler=new o.KeyZoomHandler(n,t,r,new a.ViewportCoords);return n}Object.defineProperty(e.prototype,"keyPlay",{get:function(){return this._keyPlayHandler},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"keySequenceNavigation",{get:function(){return this._keySequenceNavigationHandler},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"keySpatialNavigation",{get:function(){return this._keySpatialNavigationHandler},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"keyZoom",{get:function(){return this._keyZoomHandler},enumerable:false,configurable:true});e.prototype._activate=function(){var t=this;this._configurationSubscription=this._configuration$.subscribe(function(e){if(e.keyPlay){t._keyPlayHandler.enable()}else{t._keyPlayHandler.disable()}if(e.keySequenceNavigation){t._keySequenceNavigationHandler.enable()}else{t._keySequenceNavigationHandler.disable()}if(e.keySpatialNavigation){t._keySpatialNavigationHandler.enable()}else{t._keySpatialNavigationHandler.disable()}if(e.keyZoom){t._keyZoomHandler.enable()}else{t._keyZoomHandler.disable()}})};e.prototype._deactivate=function(){this._configurationSubscription.unsubscribe();this._keyPlayHandler.disable();this._keySequenceNavigationHandler.disable();this._keySpatialNavigationHandler.disable();this._keyZoomHandler.disable()};e.prototype._getDefaultConfiguration=function(){return{keyPlay:true,keySequenceNavigation:true,keySpatialNavigation:true,keyZoom:true}};e.componentName="keyboard";return e}(o.Component);r.KeyboardComponent=i;o.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Geo":294}],333:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./MarkerComponent");Object.defineProperty(r,"MarkerComponent",{enumerable:true,get:function(){return n.MarkerComponent}});var i=e("./marker/SimpleMarker");Object.defineProperty(r,"SimpleMarker",{enumerable:true,get:function(){return i.SimpleMarker}});var o=e("./marker/CircleMarker");Object.defineProperty(r,"CircleMarker",{enumerable:true,get:function(){return o.CircleMarker}})},{"./MarkerComponent":334,"./marker/CircleMarker":338,"./marker/SimpleMarker":340}],334:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.MarkerComponent=void 0;var p=e("rxjs");var f=e("rxjs/operators");var T=e("three");var o=e("when");var a=e("../../Component");var d=e("../../Render");var s=e("../../Graph");var u=e("../../Geo");var i=function(i){n(C,i);function C(e,t,r){var n=i.call(this,e,t,r)||this;n._relativeGroundAltitude=-2;n._geoCoords=new u.GeoCoords;n._graphCalculator=new s.GraphCalculator;n._markerScene=new a.MarkerScene;n._markerSet=new a.MarkerSet;n._viewportCoords=new u.ViewportCoords;return n}C.prototype.add=function(e){this._markerSet.add(e)};C.prototype.get=function(e){return this._markerSet.get(e)};C.prototype.getAll=function(){return this._markerSet.getAll()};C.prototype.getMarkerIdAt=function(n){var i=this;return o.promise(function(t,r){i._container.renderService.renderCamera$.pipe(f.first(),f.map(function(e){var t=i._viewportCoords.canvasToViewport(n[0],n[1],i._container.element);var r=i._markerScene.intersectObjects(t,e.perspective);return r})).subscribe(function(e){t(e)},function(e){r(e)})})};C.prototype.has=function(e){return this._markerSet.has(e)};C.prototype.remove=function(e){this._markerSet.remove(e)};C.prototype.removeAll=function(){this._markerSet.removeAll()};C.prototype._activate=function(){var M=this;var e=this._navigator.stateService.currentState$.pipe(f.map(function(e){return e.state.camera.position.z+M._relativeGroundAltitude}),f.distinctUntilChanged(function(e,t){return Math.abs(e-t)<.01}),f.publishReplay(1),f.refCount());var t=p.combineLatest(e,this._navigator.stateService.reference$).pipe(f.first(),f.map(function(){}),f.publishReplay(1),f.refCount());var r=this._configuration$.pipe(f.map(function(e){return{visibleBBoxSize:Math.max(1,Math.min(200,e.visibleBBoxSize))}}));var n=this._navigator.stateService.currentNode$.pipe(f.map(function(e){return e.latLon}),f.publishReplay(1),f.refCount());var i=p.combineLatest(r,n).pipe(f.map(function(e){var t=e[0],r=e[1];return M._graphCalculator.boundingBoxCorners(r,t.visibleBBoxSize/2)}),f.publishReplay(1),f.refCount());var o=p.combineLatest(p.concat(p.of(this._markerSet),this._markerSet.changed$),i).pipe(f.map(function(e){var t=e[0],r=e[1];return t.search(r)}));this._setChangedSubscription=t.pipe(f.switchMap(function(){return o.pipe(f.withLatestFrom(M._navigator.stateService.reference$,e))})).subscribe(function(e){var t=e[0],r=e[1],n=e[2];var i=M._geoCoords;var o=M._markerScene;var a=o.markers;var s=Object.assign({},a);for(var u=0,c=t;u<c.length;u++){var l=c[u];if(l.id in a){delete s[l.id]}else{var h=i.geodeticToEnu(l.latLon.lat,l.latLon.lon,r.alt+n,r.lat,r.lon,r.alt);o.add(l,h)}}for(var p in s){if(!s.hasOwnProperty(p)){continue}o.remove(p)}});this._markersUpdatedSubscription=t.pipe(f.switchMap(function(){return M._markerSet.updated$.pipe(f.withLatestFrom(i,M._navigator.stateService.reference$,e))})).subscribe(function(e){var t=e[0],r=e[1],n=r[0],i=r[1],o=e[2],a=e[3];var s=M._geoCoords;var u=M._markerScene;for(var c=0,l=t;c<l.length;c++){var h=l[c];var p=u.has(h.id);var f=h.latLon.lat>n.lat&&h.latLon.lat<i.lat&&h.latLon.lon>n.lon&&h.latLon.lon<i.lon;if(f){var d=s.geodeticToEnu(h.latLon.lat,h.latLon.lon,o.alt+a,o.lat,o.lon,o.alt);u.add(h,d)}else if(!f&&p){u.remove(h.id)}}});this._referenceSubscription=this._navigator.stateService.reference$.pipe(f.skip(1),f.withLatestFrom(e)).subscribe(function(e){var t=e[0],r=e[1];var n=M._geoCoords;var i=M._markerScene;for(var o=0,a=i.getAll();o<a.length;o++){var s=a[o];var u=n.geodeticToEnu(s.latLon.lat,s.latLon.lon,t.alt+r,t.lat,t.lon,t.alt);i.update(s.id,u)}});this._adjustHeightSubscription=e.pipe(f.skip(1),f.withLatestFrom(this._navigator.stateService.reference$,n)).subscribe(function(e){var t=e[0],r=e[1],n=e[2];var i=M._geoCoords;var o=M._markerScene;var a=i.geodeticToEnu(n.lat,n.lon,r.alt+t,r.lat,r.lon,r.alt);for(var s=0,u=o.getAll();s<u.length;s++){var c=u[s];var l=i.geodeticToEnu(c.latLon.lat,c.latLon.lon,r.alt+t,r.lat,r.lon,r.alt);var h=l[0]-a[0];var p=l[1]-a[1];var f=Math.sqrt(h*h+p*p);if(f>50){continue}o.lerpAltitude(c.id,t,Math.min(1,Math.max(0,1.2-1.2*f/50)))}});this._renderSubscription=this._navigator.stateService.currentState$.pipe(f.map(function(e){var t=M._markerScene;return{name:M._name,render:{frameId:e.id,needsRender:t.needsRender,render:t.render.bind(t),stage:d.GLRenderStage.Foreground}}})).subscribe(this._container.glRenderer.render$);var a=p.combineLatest(this._container.renderService.renderCamera$,this._container.mouseService.mouseMove$).pipe(f.map(function(e){var t=e[0],r=e[1];var n=M._container.element;var i=M._viewportCoords.canvasPosition(r,n),o=i[0],a=i[1];var s=M._viewportCoords.canvasToViewport(o,a,n);var u=M._markerScene.intersectObjects(s,t.perspective);return u}),f.publishReplay(1),f.refCount());var s=this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseDragStart$).pipe(f.map(function(e){return true}));var u=this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseDragEnd$).pipe(f.map(function(e){return false}));var c=p.merge(s,u).pipe(f.startWith(false));this._dragEventSubscription=p.merge(s.pipe(f.withLatestFrom(a)),p.combineLatest(u,p.of(null))).pipe(f.startWith([false,null]),f.pairwise()).subscribe(function(e){var t=e[0],r=e[1];var n=r[0];var i=n?C.dragstart:C.dragend;var o=n?r[1]:t[1];var a=M._markerScene.get(o);var s={marker:a,target:M,type:i};M.fire(i,s)});var l=p.merge(this._container.mouseService.mouseDown$.pipe(f.map(function(e){return true})),this._container.mouseService.documentMouseUp$.pipe(f.map(function(e){return false}))).pipe(f.startWith(false));this._mouseClaimSubscription=p.combineLatest(this._container.mouseService.active$,a.pipe(f.distinctUntilChanged()),l,c).pipe(f.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return!t&&r!=null&&n||i}),f.distinctUntilChanged()).subscribe(function(e){if(e){M._container.mouseService.claimMouse(M._name,1);M._container.mouseService.claimWheel(M._name,1)}else{M._container.mouseService.unclaimMouse(M._name);M._container.mouseService.unclaimWheel(M._name)}});var h=this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseDragStart$).pipe(f.withLatestFrom(a,this._container.renderService.renderCamera$),f.map(function(e){var t=e[0],r=e[1],n=e[2];var i=M._markerScene.get(r);var o=M._container.element;var a=M._viewportCoords.projectToCanvas(i.geometry.position.toArray(),o,n.perspective),s=a[0],u=a[1];var c=M._viewportCoords.canvasPosition(t,o),l=c[0],h=c[1];var p=[l-s,h-u];return[i,p,n]}),f.publishReplay(1),f.refCount());this._updateMarkerSubscription=this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseDrag$).pipe(f.withLatestFrom(h,this._navigator.stateService.reference$,r)).subscribe(function(e){var t=e[0],r=e[1],n=r[0],i=r[1],o=r[2],a=e[2],s=e[3];if(!M._markerScene.has(n.id)){return}var u=M._container.element;var c=M._viewportCoords.canvasPosition(t,u),l=c[0],h=c[1];var p=l-i[0];var f=h-i[1];var d=M._viewportCoords.canvasToViewport(p,f,u),v=d[0],m=d[1];var g=new T.Vector3(v,m,1).unproject(o.perspective).sub(o.perspective.position).normalize();var _=Math.min(M._relativeGroundAltitude/g.z,s.visibleBBoxSize/2-.1);if(_<0){return}var y=g.clone().multiplyScalar(_).add(o.perspective.position);y.z=o.perspective.position.z+M._relativeGroundAltitude;var b=M._geoCoords.enuToGeodetic(y.x,y.y,y.z,a.lat,a.lon,a.alt),x=b[0],w=b[1];M._markerScene.update(n.id,y.toArray(),{lat:x,lon:w});M._markerSet.update(n);var S={marker:n,target:M,type:C.changed};M.fire(C.changed,S)})};C.prototype._deactivate=function(){this._adjustHeightSubscription.unsubscribe();this._dragEventSubscription.unsubscribe();this._markersUpdatedSubscription.unsubscribe();this._mouseClaimSubscription.unsubscribe();this._referenceSubscription.unsubscribe();this._renderSubscription.unsubscribe();this._setChangedSubscription.unsubscribe();this._updateMarkerSubscription.unsubscribe();this._markerScene.clear()};C.prototype._getDefaultConfiguration=function(){return{visibleBBoxSize:100}};C.componentName="marker";C.changed="changed";C.dragstart="dragstart";C.dragend="dragend";return C}(a.Component);r.MarkerComponent=i;a.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Geo":294,"../../Graph":295,"../../Render":297,rxjs:43,"rxjs/operators":241,three:242,when:288}],335:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MarkerScene=void 0;var u=e("three");var n=function(){function e(e,t){this._needsRender=false;this._interactiveObjects=[];this._markers={};this._objectMarkers={};this._raycaster=!!t?t:new u.Raycaster;this._scene=!!e?e:new u.Scene}Object.defineProperty(e.prototype,"markers",{get:function(){return this._markers},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:false,configurable:true});e.prototype.add=function(e,t){if(e.id in this._markers){this._dispose(e.id)}e.createGeometry(t);this._scene.add(e.geometry);this._markers[e.id]=e;for(var r=0,n=e.getInteractiveObjects();r<n.length;r++){var i=n[r];this._interactiveObjects.push(i);this._objectMarkers[i.uuid]=e.id}this._needsRender=true};e.prototype.clear=function(){for(var e in this._markers){if(!this._markers.hasOwnProperty){continue}this._dispose(e)}this._needsRender=true};e.prototype.get=function(e){return this._markers[e]};e.prototype.getAll=function(){var t=this;return Object.keys(this._markers).map(function(e){return t._markers[e]})};e.prototype.has=function(e){return e in this._markers};e.prototype.intersectObjects=function(e,t){var r=e[0],n=e[1];this._raycaster.setFromCamera(new u.Vector2(r,n),t);var i=this._raycaster.intersectObjects(this._interactiveObjects);for(var o=0,a=i;o<a.length;o++){var s=a[o];if(s.object.uuid in this._objectMarkers){return this._objectMarkers[s.object.uuid]}}return null};e.prototype.lerpAltitude=function(e,t,r){if(!(e in this._markers)){return}this._markers[e].lerpAltitude(t,r);this._needsRender=true};e.prototype.remove=function(e){if(!(e in this._markers)){return}this._dispose(e);this._needsRender=true};e.prototype.render=function(e,t){t.render(this._scene,e);this._needsRender=false};e.prototype.update=function(e,t,r){if(!(e in this._markers)){return}var n=this._markers[e];n.updatePosition(t,r);this._needsRender=true};e.prototype._dispose=function(e){var t=this._markers[e];this._scene.remove(t.geometry);for(var r=0,n=t.getInteractiveObjects();r<n.length;r++){var i=n[r];var o=this._interactiveObjects.indexOf(i);if(o!==-1){this._interactiveObjects.splice(o,1)}else{console.warn("Object does not exist ("+i.id+") for "+e)}delete this._objectMarkers[i.uuid]}t.disposeGeometry();delete this._markers[e]};return e}();r.MarkerScene=n;r.default=n},{three:242}],336:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MarkerSet=void 0;var n=e("rxjs");var i=e("../../Geo");var o=function(){function e(){this._hash={};this._index=new i.GeoRBush(16);this._indexChanged$=new n.Subject;this._updated$=new n.Subject}Object.defineProperty(e.prototype,"changed$",{get:function(){return this._indexChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"updated$",{get:function(){return this._updated$},enumerable:false,configurable:true});e.prototype.add=function(e){var t=[];var r=this._hash;var n=this._index;for(var i=0,o=e;i<o.length;i++){var a=o[i];var s=a.id;if(s in r){n.remove(r[s]);t.push(a)}var u={lat:a.latLon.lat,lon:a.latLon.lon,marker:a};r[s]=u;n.insert(u)}if(t.length>0){this._updated$.next(t)}if(e.length>t.length){this._indexChanged$.next(this)}};e.prototype.has=function(e){return e in this._hash};e.prototype.get=function(e){return this.has(e)?this._hash[e].marker:undefined};e.prototype.getAll=function(){return this._index.all().map(function(e){return e.marker})};e.prototype.remove=function(e){var t=this._hash;var r=this._index;var n=false;for(var i=0,o=e;i<o.length;i++){var a=o[i];if(!(a in t)){continue}var s=t[a];r.remove(s);delete t[a];n=true}if(n){this._indexChanged$.next(this)}};e.prototype.removeAll=function(){this._hash={};this._index.clear();this._indexChanged$.next(this)};e.prototype.search=function(e){var t=e[0],r=e[1];return this._index.search({maxX:r.lat,maxY:r.lon,minX:t.lat,minY:t.lon}).map(function(e){return e.marker})};e.prototype.update=function(e){var t=this._hash;var r=this._index;var n=e.id;if(!(n in t)){return}r.remove(t[n]);var i={lat:e.latLon.lat,lon:e.latLon.lon,marker:e};t[n]=i;r.insert(i)};return e}();r.MarkerSet=o;r.default=o},{"../../Geo":294,rxjs:43}],337:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],338:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CircleMarker=void 0;var o=e("three");var i=e("../../../Component");var a=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t)||this;r=!!r?r:{};n._color=r.color!=null?r.color:16777215;n._opacity=r.opacity!=null?r.opacity:.4;n._radius=r.radius!=null?r.radius:1;return n}e.prototype._createGeometry=function(e){var t=new o.Mesh(new o.CircleGeometry(this._radius,16),new o.MeshBasicMaterial({color:this._color,opacity:this._opacity,transparent:true}));t.up.fromArray([0,0,1]);t.renderOrder=-1;var r=new o.Object3D;r.add(t);r.position.fromArray(e);this._geometry=r};e.prototype._disposeGeometry=function(){for(var e=0,t=this._geometry.children;e<t.length;e++){var r=t[e];r.geometry.dispose();r.material.dispose()}};e.prototype._getInteractiveObjects=function(){return[]};return e}(i.Marker);r.CircleMarker=a;r.default=a},{"../../../Component":291,three:242}],339:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Marker=void 0;var n=function(){function e(e,t){this._id=e;this._latLon=t}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"latLon",{get:function(){return this._latLon},enumerable:false,configurable:true});e.prototype.createGeometry=function(e){if(!!this._geometry){return}this._createGeometry(e);this._geometry.updateMatrixWorld(true)};e.prototype.disposeGeometry=function(){if(!this._geometry){return}this._disposeGeometry();this._geometry=undefined};e.prototype.getInteractiveObjects=function(){if(!this._geometry){return[]}return this._getInteractiveObjects()};e.prototype.lerpAltitude=function(e,t){if(!this._geometry){return}this._geometry.position.z=(1-t)*this._geometry.position.z+t*e};e.prototype.updatePosition=function(e,t){if(!!t){this._latLon.lat=t.lat;this._latLon.lon=t.lon}if(!this._geometry){return}this._geometry.position.fromArray(e);this._geometry.updateMatrixWorld(true)};return e}();r.Marker=n;r.default=n},{}],340:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.SimpleMarker=void 0;var w=e("three");var i=e("../../../Component");var o=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t)||this;r=!!r?r:{};n._ballColor=r.ballColor!=null?r.ballColor:16711680;n._ballOpacity=r.ballOpacity!=null?r.ballOpacity:.8;n._circleToRayAngle=2;n._color=r.color!=null?r.color:16711680;n._interactive=!!r.interactive;n._opacity=r.opacity!=null?r.opacity:.4;n._radius=r.radius!=null?r.radius:1;return n}e.prototype._createGeometry=function(e){var t=this._radius;var r=new w.Mesh(this._markerGeometry(t,8,8),new w.MeshBasicMaterial({color:this._color,opacity:this._opacity,transparent:true}));r.renderOrder=1;var n=new w.Mesh(new w.SphereGeometry(t/2,8,8),new w.MeshBasicMaterial({color:this._ballColor,opacity:this._ballOpacity,transparent:true}));n.position.z=this._markerHeight(t);var i=new w.Object3D;i.add(n);i.add(r);i.position.fromArray(e);this._geometry=i};e.prototype._disposeGeometry=function(){for(var e=0,t=this._geometry.children;e<t.length;e++){var r=t[e];r.geometry.dispose();r.material.dispose()}};e.prototype._getInteractiveObjects=function(){return this._interactive?[this._geometry.children[0]]:[]};e.prototype._markerHeight=function(e){var t=Math.tan(Math.PI-this._circleToRayAngle);return e*Math.sqrt(1+t*t)};e.prototype._markerGeometry=function(e,t,r){var n=new w.Geometry;t=Math.max(3,Math.floor(t)||8);r=Math.max(2,Math.floor(r)||6);var i=this._markerHeight(e);var o=[];for(var a=0;a<=r;++a){var s=[];for(var u=0;u<=t;++u){var c=u/t*Math.PI*2;var l=a/r*Math.PI;var h=void 0;if(l<this._circleToRayAngle){h=e}else{var p=Math.tan(l-this._circleToRayAngle);h=e*Math.sqrt(1+p*p)}var f=new w.Vector3;f.x=h*Math.cos(c)*Math.sin(l);f.y=h*Math.sin(c)*Math.sin(l);f.z=h*Math.cos(l)+i;n.vertices.push(f);s.push(n.vertices.length-1)}o.push(s)}for(var a=0;a<r;++a){for(var u=0;u<t;++u){var d=o[a][u+1];var v=o[a][u];var m=o[a+1][u];var g=o[a+1][u+1];var _=n.vertices[d].clone().normalize();var y=n.vertices[v].clone().normalize();var b=n.vertices[m].clone().normalize();var x=n.vertices[g].clone().normalize();n.faces.push(new w.Face3(d,v,g,[_,y,x]));n.faces.push(new w.Face3(v,m,g,[y.clone(),b,x.clone()]))}}n.computeFaceNormals();n.boundingSphere=new w.Sphere(new w.Vector3,e+i);return n};return e}(i.Marker);r.SimpleMarker=o;r.default=o},{"../../../Component":291,three:242}],341:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.BounceHandler=void 0;var i=e("rxjs");var o=e("rxjs/operators");var S=e("../../Component");var a=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e,t,r)||this;o._spatial=i;o._viewportCoords=n;return o}e.prototype._enable=function(){var w=this;var e=this._navigator.stateService.currentState$.pipe(o.map(function(e){return e.state.alpha<1}),o.distinctUntilChanged());this._bounceSubscription=i.combineLatest(e,this._navigator.stateService.inTranslation$,this._container.mouseService.active$,this._container.touchService.active$).pipe(o.map(function(e){return e[0]||e[1]||e[2]||e[3]}),o.distinctUntilChanged(),o.switchMap(function(e){return e?i.empty():i.combineLatest(w._container.renderService.renderCamera$,w._navigator.stateService.currentTransform$.pipe(o.first()))}),o.withLatestFrom(this._navigator.panService.panNodes$)).subscribe(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];if(!n.hasValidScale&&r.camera.focal<.1){return}if(r.perspective.aspect===0||r.perspective.aspect===Number.POSITIVE_INFINITY){return}var o=S.ImageBoundary.viewportDistances(n,r.perspective,w._viewportCoords);var a=w._viewportCoords.viewportToBasic(0,0,n,r.perspective);if((a[0]<0||a[0]>1)&&i.length>0){o[0]=o[2]=0}for(var s=0,u=i;s<u.length;s++){var c=u[s],l=c[1];var h=S.ImageBoundary.viewportDistances(l,r.perspective,w._viewportCoords);for(var p=1;p<o.length;p+=2){if(h[p]<o[p]){o[p]=h[p]}}}if(Math.max.apply(Math,o)<.01){return}var f=o[1]-o[3];var d=o[0]-o[2];var v=w._viewportCoords.unprojectFromViewport(0,0,r.perspective).sub(r.perspective.position);var m=w._viewportCoords.unprojectFromViewport(f,0,r.perspective).sub(r.perspective.position);var g=w._viewportCoords.unprojectFromViewport(0,d,r.perspective).sub(r.perspective.position);var _=(f>0?1:-1)*m.angleTo(v);var y=(d>0?1:-1)*g.angleTo(v);var b=Math.PI/60;var x=.1;_=w._spatial.clamp(x*_,-b,b);y=w._spatial.clamp(x*y,-b,b);w._navigator.stateService.rotateUnbounded({phi:_,theta:y})})};e.prototype._disable=function(){this._bounceSubscription.unsubscribe()};e.prototype._getConfiguration=function(){return{}};return e}(S.HandlerBase);r.BounceHandler=a;r.default=a},{"../../Component":291,rxjs:43,"rxjs/operators":241}],342:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.DoubleClickZoomHandler=void 0;var i=e("rxjs");var a=e("rxjs/operators");var o=e("../../Component");var s=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._viewportCoords=n;return i}e.prototype._enable=function(){var h=this;this._zoomSubscription=i.merge(this._container.mouseService.filtered$(this._component.name,this._container.mouseService.dblClick$),this._container.touchService.doubleTap$.pipe(a.map(function(e){var t=e.touches[0];return{clientX:t.clientX,clientY:t.clientY,shiftKey:e.shiftKey}}))).pipe(a.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$)).subscribe(function(e){var t=e[0],r=e[1],n=e[2];var i=h._container.element;var o=h._viewportCoords.canvasPosition(t,i),a=o[0],s=o[1];var u=h._viewportCoords.unprojectFromCanvas(a,s,i,r.perspective);var c=n.projectBasic(u.toArray());var l=!!t.shiftKey?-1:1;h._navigator.stateService.zoomIn(l,c)})};e.prototype._disable=function(){this._zoomSubscription.unsubscribe()};e.prototype._getConfiguration=function(e){return{doubleClickZoom:e}};return e}(o.HandlerBase);r.DoubleClickZoomHandler=s;r.default=s},{"../../Component":291,rxjs:43,"rxjs/operators":241}],343:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.DragPanHandler=void 0;var s=e("rxjs");var u=e("rxjs/operators");var T=e("../../Component");var i=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e,t,r)||this;o._spatial=i;o._viewportCoords=n;return o}e.prototype._enable=function(){var C=this;var e=this._container.mouseService.filtered$(this._component.name,this._container.mouseService.mouseDragStart$).pipe(u.map(function(){return true}),u.share());var t=this._container.mouseService.filtered$(this._component.name,this._container.mouseService.mouseDragEnd$).pipe(u.map(function(){return false}),u.share());this._activeMouseSubscription=s.merge(e,t).subscribe(this._container.mouseService.activate$);var r=s.merge(e,t).pipe(u.switchMap(function(e){return e?C._container.mouseService.documentMouseMove$:s.empty()}));this._preventDefaultSubscription=s.merge(r,this._container.touchService.touchMove$).subscribe(function(e){e.preventDefault()});var n=this._container.touchService.singleTouchDragStart$.pipe(u.map(function(){return true}));var i=this._container.touchService.singleTouchDragEnd$.pipe(u.map(function(){return false}));this._activeTouchSubscription=s.merge(n,i).subscribe(this._container.touchService.activate$);var o=this._navigator.stateService.currentState$.pipe(u.map(function(e){return e.state.currentNode.fullPano||e.state.nodesAhead<1}),u.distinctUntilChanged(),u.switchMap(function(e){if(!e){return s.empty()}var t=T.MouseOperator.filteredPairwiseMouseDrag$(C._component.name,C._container.mouseService);var r=s.merge(C._container.touchService.singleTouchDragStart$,C._container.touchService.singleTouchDrag$,C._container.touchService.singleTouchDragEnd$.pipe(u.map(function(){return null}))).pipe(u.map(function(e){return e!=null&&e.touches.length>0?e.touches[0]:null}),u.pairwise(),u.filter(function(e){return e[0]!=null&&e[1]!=null}));return s.merge(t,r)}),u.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$,this._navigator.panService.panNodes$),u.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];var o=t[0];var a=t[1];var s=a.clientX-o.clientX;var u=a.clientY-o.clientY;var c=C._container.element;var l=C._viewportCoords.canvasPosition(a,c),h=l[0],p=l[1];var f=C._viewportCoords.unprojectFromCanvas(h,p,c,r.perspective).sub(r.perspective.position);var d=C._viewportCoords.unprojectFromCanvas(h-s,p,c,r.perspective).sub(r.perspective.position);var v=C._viewportCoords.unprojectFromCanvas(h,p-u,c,r.perspective).sub(r.perspective.position);var m=(s>0?1:-1)*d.angleTo(f);var g=(u>0?-1:1)*v.angleTo(f);var _=T.ImageBoundary.viewportDistances(n,r.perspective,C._viewportCoords);for(var y=0,b=i;y<b.length;y++){var x=b[y],w=x[1];var S=T.ImageBoundary.viewportDistances(w,r.perspective,C._viewportCoords);for(var M=0;M<_.length;M++){if(S[M]<_[M]){_[M]=S[M]}}}if(_[0]>0&&g<0){g/=Math.max(1,200*_[0])}if(_[2]>0&&g>0){g/=Math.max(1,200*_[2])}if(_[1]>0&&m<0){m/=Math.max(1,200*_[1])}if(_[3]>0&&m>0){m/=Math.max(1,200*_[3])}return{phi:m,theta:g}}),u.share());this._rotateWithoutInertiaSubscription=o.subscribe(function(e){C._navigator.stateService.rotateWithoutInertia(e)});this._rotateSubscription=o.pipe(u.scan(function(e,t){C._drainBuffer(e);e.push([Date.now(),t]);return e},[]),u.sample(s.merge(this._container.mouseService.filtered$(this._component.name,this._container.mouseService.mouseDragEnd$),this._container.touchService.singleTouchDragEnd$)),u.map(function(e){var t=C._drainBuffer(e.slice());var r={phi:0,theta:0};for(var n=0,i=t;n<i.length;n++){var o=i[n];r.phi+=o[1].phi;r.theta+=o[1].theta}var a=t.length;if(a>0){r.phi/=a;r.theta/=a}var s=Math.PI/18;r.phi=C._spatial.clamp(r.phi,-s,s);r.theta=C._spatial.clamp(r.theta,-s,s);return r})).subscribe(function(e){C._navigator.stateService.rotate(e)})};e.prototype._disable=function(){this._activeMouseSubscription.unsubscribe();this._activeTouchSubscription.unsubscribe();this._preventDefaultSubscription.unsubscribe();this._rotateSubscription.unsubscribe();this._rotateWithoutInertiaSubscription.unsubscribe();this._activeMouseSubscription=null;this._activeTouchSubscription=null;this._preventDefaultSubscription=null;this._rotateSubscription=null};e.prototype._getConfiguration=function(e){return{dragPan:e}};e.prototype._drainBuffer=function(e){var t=50;var r=Date.now();while(e.length>0&&r-e[0][0]>t){e.shift()}return e};return e}(T.HandlerBase);r.DragPanHandler=i;r.default=i},{"../../Component":291,rxjs:43,"rxjs/operators":241}],344:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.EarthControlHandler=void 0;var d=e("three");var i=e("rxjs");var o=e("rxjs/operators");var s=e("../../Component");var u=e("../../State");var a=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e,t,r)||this;o._spatial=i;o._viewportCoords=n;return o}e.prototype._enable=function(){var h=this;var e=this._navigator.stateService.state$.pipe(o.map(function(e){return e===u.State.Earth}),o.share());this._preventDefaultSubscription=e.pipe(o.switchMap(function(e){return e?h._container.mouseService.mouseWheel$:i.empty()})).subscribe(function(e){e.preventDefault()});this._truckSubscription=e.pipe(o.switchMap(function(e){if(!e){return i.empty()}return s.MouseOperator.filteredPairwiseMouseDrag$(h._component.name,h._container.mouseService).pipe(o.filter(function(e){var t=e[0],r=e[1];return!(t.ctrlKey&&r.ctrlKey)}))}),o.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$),o.map(function(e){var t=e[0],r=t[0],n=t[1],i=e[1],o=e[2];var a=[0,0,1];var s=o.unprojectBasic([.5,.5],0);s[2]-=2;var u=h._planeIntersection(n,a,s,i.perspective,h._container.element);var c=h._planeIntersection(r,a,s,i.perspective,h._container.element);if(!u||!c){return null}var l=(new d.Vector3).subVectors(u,c).multiplyScalar(-1).toArray();return l}),o.filter(function(e){return!!e})).subscribe(function(e){h._navigator.stateService.truck(e)});this._orbitSubscription=e.pipe(o.switchMap(function(e){if(!e){return i.empty()}return s.MouseOperator.filteredPairwiseMouseDrag$(h._component.name,h._container.mouseService).pipe(o.filter(function(e){var t=e[0],r=e[1];return t.ctrlKey&&r.ctrlKey}))}),o.map(function(e){var t=e[0],r=e[1];var n=h._eventToViewport(r,h._container.element),i=n[0],o=n[1];var a=h._eventToViewport(t,h._container.element),s=a[0],u=a[1];var c=(s-i)*Math.PI;var l=(o-u)*Math.PI/2;return{phi:c,theta:l}})).subscribe(function(e){h._navigator.stateService.orbit(e)});this._dollySubscription=e.pipe(o.switchMap(function(e){if(!e){return i.empty()}return h._container.mouseService.filteredWheel$(h._component.name,h._container.mouseService.mouseWheel$)}),o.map(function(e){var t=e.deltaY;if(e.deltaMode===1){t=40*t}else if(e.deltaMode===2){t=800*t}var r=h._viewportCoords.containerToCanvas(h._container.element);return-t/r[1]})).subscribe(function(e){h._navigator.stateService.dolly(e)})};e.prototype._disable=function(){this._dollySubscription.unsubscribe();this._orbitSubscription.unsubscribe();this._preventDefaultSubscription.unsubscribe();this._truckSubscription.unsubscribe()};e.prototype._getConfiguration=function(){return{}};e.prototype._eventToViewport=function(e,t){var r=this._viewportCoords.canvasPosition(e,t);return this._viewportCoords.canvasToViewport(r[0],r[1],t)};e.prototype._planeIntersection=function(e,t,r,n,i){var o=this._viewportCoords.canvasPosition(e,i),a=o[0],s=o[1];var u=this._viewportCoords.unprojectFromCanvas(a,s,i,n).sub(n.position).normalize();if(Math.abs(this._spatial.angleToPlane(u.toArray(),t))<Math.PI/90){return null}var c=n.position.clone();var l=(new d.Vector3).fromArray(t);var h=(new d.Vector3).fromArray(r);var p=(new d.Vector3).subVectors(h,c).dot(l)/u.clone().dot(l);var f=(new d.Vector3).addVectors(c,u.multiplyScalar(p));if(this._viewportCoords.worldToCamera(f.toArray(),n)[2]>0){return null}return f};return e}(s.HandlerBase);r.EarthControlHandler=a;r.default=a},{"../../Component":291,"../../State":298,rxjs:43,"rxjs/operators":241,three:242}],345:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],346:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.viewportDistances=void 0;var z=e("../../../src/Geo");function $(e){var t=[];var r=[[0,0],[1,0],[1,1],[0,1]];var n=[[1,0],[0,1],[-1,0],[0,-1]];for(var i=0;i<4;++i){var o=r[i];var a=n[i];for(var s=0;s<e;++s){t.push([o[0]+a[0]*s/e,o[1]+a[1]*s/e])}}return t}function G(e,t){return e>=-1&&e<=1&&t>=-1&&t<=1}function V(e,t){return e>=0&&e<=1&&t>=0&&t<=1}function n(t,r,n){var e=$(100);var i=e.map(function(e){return n.basicToViewportSafe(e[0],e[1],t,r)});var o=[];var a=[{x:-1,y:1},{x:1,y:1},{x:1,y:-1},{x:-1,y:-1}];var s=[false,false,false,false];for(var u=0;u<i.length;u++){var c=i[u];var l=i[(u+1)%i.length];if(c===null){continue}if(l===null){if(G(c[0],c[1])){o.push(c)}continue}var h=c[0],p=c[1];var f=l[0],d=l[1];if(G(h,p)){if(G(f,d)){o.push(c)}else{for(var v=0;v<4;v++){var m={p1:{x:h,y:p},p2:{x:f,y:d}};var g={p1:a[v],p2:a[(v+1)%4]};var _=z.Lines.segmentsIntersect(m,g);if(_){var y=z.Lines.segmentIntersection(m,g);o.push(c,[y.x,y.y]);s[v]=true}}}}}var b=n.viewportToBasic(-1,1,t,r),x=b[0],w=b[1];var S=n.viewportToBasic(1,1,t,r),M=S[0],C=S[1];var T=n.viewportToBasic(1,-1,t,r),E=T[0],O=T[1];var P=n.viewportToBasic(-1,-1,t,r),A=P[0],j=P[1];if(V(x,w)){s[3]=s[0]=true}if(V(M,C)){s[0]=s[1]=true}if(V(E,O)){s[1]=s[2]=true}if(V(A,j)){s[2]=s[3]=true}var R=[-1,-1,1,1];for(var k=0,L=o;k<L.length;k++){var N=L[k];var I=N[0];var D=N[1];if(I>R[1]){R[1]=I}if(I<R[3]){R[3]=I}if(D>R[0]){R[0]=D}if(D<R[2]){R[2]=D}}var B=[1,1,-1,-1];var F=[];for(var v=0;v<4;v++){if(s[v]){F.push(0);continue}F.push(Math.abs(B[v]-R[v]))}return F}r.viewportDistances=n},{"../../../src/Geo":294}],347:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.MouseComponent=void 0;var s=e("../../Component");var u=e("../../Geo");var i=function(a){n(e,a);function e(e,t,r){var n=a.call(this,e,t,r)||this;var i=new u.Spatial;var o=new u.ViewportCoords;n._bounceHandler=new s.BounceHandler(n,t,r,o,i);n._doubleClickZoomHandler=new s.DoubleClickZoomHandler(n,t,r,o);n._dragPanHandler=new s.DragPanHandler(n,t,r,o,i);n._earthControlHandler=new s.EarthControlHandler(n,t,r,o,i);n._scrollZoomHandler=new s.ScrollZoomHandler(n,t,r,o);n._touchZoomHandler=new s.TouchZoomHandler(n,t,r,o);return n}Object.defineProperty(e.prototype,"doubleClickZoom",{get:function(){return this._doubleClickZoomHandler},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"dragPan",{get:function(){return this._dragPanHandler},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"scrollZoom",{get:function(){return this._scrollZoomHandler},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"touchZoom",{get:function(){return this._touchZoomHandler},enumerable:false,configurable:true});e.prototype._activate=function(){var t=this;this._bounceHandler.enable();this._earthControlHandler.enable();this._configurationSubscription=this._configuration$.subscribe(function(e){if(e.doubleClickZoom){t._doubleClickZoomHandler.enable()}else{t._doubleClickZoomHandler.disable()}if(e.dragPan){t._dragPanHandler.enable()}else{t._dragPanHandler.disable()}if(e.scrollZoom){t._scrollZoomHandler.enable()}else{t._scrollZoomHandler.disable()}if(e.touchZoom){t._touchZoomHandler.enable()}else{t._touchZoomHandler.disable()}});this._container.mouseService.claimMouse(this._name,0)};e.prototype._deactivate=function(){this._container.mouseService.unclaimMouse(this._name);this._configurationSubscription.unsubscribe();this._bounceHandler.disable();this._doubleClickZoomHandler.disable();this._dragPanHandler.disable();this._earthControlHandler.disable();this._scrollZoomHandler.disable();this._touchZoomHandler.disable()};e.prototype._getDefaultConfiguration=function(){return{doubleClickZoom:false,dragPan:true,scrollZoom:true,touchZoom:true}};e.componentName="mouse";return e}(s.Component);r.MouseComponent=i;s.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Geo":294}],348:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ScrollZoomHandler=void 0;var i=e("rxjs/operators");var o=e("../../Component");var a=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._viewportCoords=n;return i}e.prototype._enable=function(){var f=this;this._container.mouseService.claimWheel(this._component.name,0);this._preventDefaultSubscription=this._container.mouseService.mouseWheel$.subscribe(function(e){e.preventDefault()});this._zoomSubscription=this._container.mouseService.filteredWheel$(this._component.name,this._container.mouseService.mouseWheel$).pipe(i.withLatestFrom(this._navigator.stateService.currentState$,function(e,t){return[e,t]}),i.filter(function(e){var t=e[1].state;return t.currentNode.fullPano||t.nodesAhead<1}),i.map(function(e){return e[0]}),i.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$,function(e,t,r){return[e,t,r]})).subscribe(function(e){var t=e[0];var r=e[1];var n=e[2];var i=f._container.element;var o=f._viewportCoords.canvasPosition(t,i),a=o[0],s=o[1];var u=f._viewportCoords.unprojectFromCanvas(a,s,i,r.perspective);var c=n.projectBasic(u.toArray());var l=t.deltaY;if(t.deltaMode===1){l=40*l}else if(t.deltaMode===2){l=800*l}var h=f._viewportCoords.containerToCanvas(i);var p=-3*l/h[1];f._navigator.stateService.zoomIn(p,c)})};e.prototype._disable=function(){this._container.mouseService.unclaimWheel(this._component.name);this._preventDefaultSubscription.unsubscribe();this._zoomSubscription.unsubscribe();this._preventDefaultSubscription=null;this._zoomSubscription=null};e.prototype._getConfiguration=function(e){return{scrollZoom:e}};return e}(o.HandlerBase);r.ScrollZoomHandler=a;r.default=a},{"../../Component":291,"rxjs/operators":241}],349:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.TouchZoomHandler=void 0;var i=e("rxjs");var a=e("rxjs/operators");var o=e("../../Component");var s=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._viewportCoords=n;return i}e.prototype._enable=function(){var d=this;this._preventDefaultSubscription=this._container.touchService.pinch$.subscribe(function(e){e.originalEvent.preventDefault()});var e=this._container.touchService.pinchStart$.pipe(a.map(function(e){return true}));var t=this._container.touchService.pinchEnd$.pipe(a.map(function(e){return false}));this._activeSubscription=i.merge(e,t).subscribe(this._container.touchService.activate$);this._zoomSubscription=this._container.touchService.pinch$.pipe(a.withLatestFrom(this._navigator.stateService.currentState$),a.filter(function(e){var t=e[1].state;return t.currentNode.fullPano||t.nodesAhead<1}),a.map(function(e){return e[0]}),a.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$)).subscribe(function(e){var t=e[0],r=e[1],n=e[2];var i=d._container.element;var o=d._viewportCoords.canvasPosition(t,i),a=o[0],s=o[1];var u=d._viewportCoords.unprojectFromCanvas(a,s,i,r.perspective);var c=n.projectBasic(u.toArray());var l=d._viewportCoords.containerToCanvas(i),h=l[0],p=l[1];var f=3*t.distanceChange/Math.min(h,p);d._navigator.stateService.zoomIn(f,c)})};e.prototype._disable=function(){this._activeSubscription.unsubscribe();this._preventDefaultSubscription.unsubscribe();this._zoomSubscription.unsubscribe();this._preventDefaultSubscription=null;this._zoomSubscription=null};e.prototype._getConfiguration=function(e){return{touchZoom:e}};return e}(o.HandlerBase);r.TouchZoomHandler=s;r.default=s},{"../../Component":291,rxjs:43,"rxjs/operators":241}],350:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./popup/Popup");Object.defineProperty(r,"Popup",{enumerable:true,get:function(){return n.Popup}});var i=e("./PopupComponent");Object.defineProperty(r,"PopupComponent",{enumerable:true,get:function(){return i.PopupComponent}})},{"./PopupComponent":351,"./popup/Popup":352}],351:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.PopupComponent=void 0;var a=e("rxjs");var i=e("rxjs/operators");var o=e("../../Component");var s=e("../../Utils");var u=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._dom=!!n?n:new s.DOM;i._popups=[];i._added$=new a.Subject;i._popups$=new a.Subject;return i}e.prototype.add=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(this._popups.indexOf(n)!==-1){continue}this._popups.push(n);if(this._activated){n.setParentContainer(this._popupContainer)}}this._added$.next(e);this._popups$.next(this._popups)};e.prototype.getAll=function(){return this._popups.slice()};e.prototype.remove=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._remove(n)}this._popups$.next(this._popups)};e.prototype.removeAll=function(){for(var e=0,t=this._popups.slice();e<t.length;e++){var r=t[e];this._remove(r)}this._popups$.next(this._popups)};e.prototype._activate=function(){var s=this;this._popupContainer=this._dom.createElement("div","mapillary-js-popup-container",this._container.element);for(var e=0,t=this._popups;e<t.length;e++){var r=t[e];r.setParentContainer(this._popupContainer)}this._updateAllSubscription=a.combineLatest(this._container.renderService.renderCamera$,this._container.renderService.size$,this._navigator.stateService.currentTransform$).subscribe(function(e){var t=e[0],r=e[1],n=e[2];for(var i=0,o=s._popups;i<o.length;i++){var a=o[i];a.update(t,r,n)}});var n=this._popups$.pipe(i.startWith(this._popups),i.switchMap(function(e){return a.from(e).pipe(i.mergeMap(function(e){return e.changed$}))}),i.map(function(e){return[e]}));this._updateAddedChangedSubscription=a.merge(this._added$,n).pipe(i.withLatestFrom(this._container.renderService.renderCamera$,this._container.renderService.size$,this._navigator.stateService.currentTransform$)).subscribe(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];for(var o=0,a=t;o<a.length;o++){var s=a[o];s.update(r,n,i)}})};e.prototype._deactivate=function(){this._updateAllSubscription.unsubscribe();this._updateAddedChangedSubscription.unsubscribe();for(var e=0,t=this._popups;e<t.length;e++){var r=t[e];r.remove()}this._container.element.removeChild(this._popupContainer);delete this._popupContainer};e.prototype._getDefaultConfiguration=function(){return{}};e.prototype._remove=function(e){var t=this._popups.indexOf(e);if(t===-1){return}var r=this._popups.splice(t,1)[0];if(this._activated){r.remove()}};e.componentName="popup";return e}(o.Component);r.PopupComponent=u;o.ComponentService.register(u);r.default=u},{"../../Component":291,"../../Utils":301,rxjs:43,"rxjs/operators":241}],352:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Popup=void 0;var n=e("rxjs");var i=e("../../../Geo");var o=e("../../../Utils");var x=e("../../../Viewer");var a=function(){function e(e,t,r){this._options={};e=!!e?e:{};this._options.capturePointer=e.capturePointer===false?e.capturePointer:true;this._options.clean=e.clean;this._options.float=e.float;this._options.offset=e.offset;this._options.opacity=e.opacity;this._options.position=e.position;this._dom=!!r?r:new o.DOM;this._viewportCoords=!!t?t:new i.ViewportCoords;this._notifyChanged$=new n.Subject}Object.defineProperty(e.prototype,"changed$",{get:function(){return this._notifyChanged$},enumerable:false,configurable:true});e.prototype.remove=function(){if(this._content&&this._content.parentNode){this._content.parentNode.removeChild(this._content)}if(this._container){this._container.parentNode.removeChild(this._container);delete this._container}if(this._parentContainer){delete this._parentContainer}};e.prototype.setBasicPoint=function(e){this._point=e.slice();this._rect=null;this._notifyChanged$.next(this)};e.prototype.setBasicRect=function(e){this._rect=e.slice();this._point=null;this._notifyChanged$.next(this)};e.prototype.setDOMContent=function(e){if(this._content&&this._content.parentNode){this._content.parentNode.removeChild(this._content)}var t="mapillaryjs-popup-content"+(this._options.clean===true?"-clean":"")+(this._options.capturePointer===true?" mapillaryjs-popup-capture-pointer":"");this._content=this._dom.createElement("div",t,this._container);this._content.appendChild(e);this._notifyChanged$.next(this)};e.prototype.setHTML=function(e){var t=this._dom.document.createDocumentFragment();var r=this._dom.createElement("body");var n;r.innerHTML=e;while(true){n=r.firstChild;if(!n){break}t.appendChild(n)}this.setDOMContent(t)};e.prototype.setText=function(e){this.setDOMContent(this._dom.document.createTextNode(e))};e.prototype.setParentContainer=function(e){this._parentContainer=e};e.prototype.update=function(e,t,r){var n;if(!this._parentContainer||!this._content){return}if(!this._point&&!this._rect){return}if(!this._container){this._container=this._dom.createElement("div","mapillaryjs-popup",this._parentContainer);var i=this._options.clean!==true&&this._options.float!==x.Alignment.Center;if(i){var o="mapillaryjs-popup-tip"+(this._options.capturePointer===true?" mapillaryjs-popup-capture-pointer":"");this._tip=this._dom.createElement("div",o,this._container);this._dom.createElement("div","mapillaryjs-popup-tip-inner",this._tip)}this._container.appendChild(this._content);this._parentContainer.appendChild(this._container);if(this._options.opacity!=null){this._container.style.opacity=this._options.opacity.toString()}}var a=null;var s=this._alignmentToPopupAligment(this._options.position);var u=this._alignmentToPopupAligment(this._options.float);var c=this._container.classList;if(this._point!=null){a=this._viewportCoords.basicToCanvasSafe(this._point[0],this._point[1],{offsetHeight:t.height,offsetWidth:t.width},r,e.perspective)}else{var l=["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"];var h=null;for(var p=0,f=l;p<f.length;p++){var d=f[p];if(c.contains("mapillaryjs-popup-float-"+d)){h=d;break}}n=this._rectToPixel(this._rect,s,h,e,t,r),a=n[0],s=n[1];if(!u){u=s}}if(a==null){this._container.style.display="none";return}this._container.style.display="";if(!u){var v=this._container.offsetWidth;var m=this._container.offsetHeight;var g=this._pixelToFloats(a,t,v,m);u=g.length===0?"top":g.join("-")}var _=this._normalizeOffset(this._options.offset);a=[a[0]+_[u][0],a[1]+_[u][1]];a=[Math.round(a[0]),Math.round(a[1])];var y={bottom:"translate(-50%,0)","bottom-left":"translate(-100%,0)","bottom-right":"translate(0,0)",center:"translate(-50%,-50%)",left:"translate(-100%,-50%)",right:"translate(0,-50%)",top:"translate(-50%,-100%)","top-left":"translate(-100%,-100%)","top-right":"translate(0,-100%)"};for(var b in y){if(!y.hasOwnProperty(b)){continue}c.remove("mapillaryjs-popup-float-"+b)}c.add("mapillaryjs-popup-float-"+u);this._container.style.transform=y[u]+" translate("+a[0]+"px,"+a[1]+"px)"};e.prototype._rectToPixel=function(e,t,r,n,i,o){if(!t){var a=this._container.offsetWidth;var s=this._container.offsetHeight;var u={bottom:[0,s/2],"bottom-left":[-a/2,s/2],"bottom-right":[a/2,s/2],left:[-a/2,0],right:[a/2,0],top:[0,-s/2],"top-left":[-a/2,-s/2],"top-right":[a/2,-s/2]};var c=["top","bottom","left","right"];var l=[0,null,null];for(var h=0,p=c;h<p.length;h++){var f=p[h];var d=this._pointFromRectPosition(e,f);var v=this._viewportCoords.basicToCanvasSafe(d[0],d[1],{offsetHeight:i.height,offsetWidth:i.width},o,n.perspective);if(v==null){continue}var m=u[f];var g=[v[0]+m[0],v[1]+m[1]];var _=r!=null&&r===f?1:.7;var y=this._pixelToFloats(g,i,a/_,s/(2*_));if(y.length===0&&v[0]>0&&v[0]<i.width&&v[1]>0&&v[1]<i.height){return[v,f]}var b=Math.max(g[0]-a/2,0);var x=Math.min(g[0]+a/2,i.width);var w=Math.max(g[1]-s/2,0);var S=Math.min(g[1]+s/2,i.height);var M=Math.max(0,x-b);var C=Math.max(0,S-w);var T=_*M*C;if(T>l[0]){l[0]=T;l[1]=v;l[2]=f}}if(l[0]>0){return[l[1],l[2]]}}var E=this._pointFromRectPosition(e,t);var O=this._viewportCoords.basicToCanvasSafe(E[0],E[1],{offsetHeight:i.height,offsetWidth:i.width},o,n.perspective);return[O,t!=null?t:"top"]};e.prototype._alignmentToPopupAligment=function(e){switch(e){case x.Alignment.Bottom:return"bottom";case x.Alignment.BottomLeft:return"bottom-left";case x.Alignment.BottomRight:return"bottom-right";case x.Alignment.Center:return"center";case x.Alignment.Left:return"left";case x.Alignment.Right:return"right";case x.Alignment.Top:return"top";case x.Alignment.TopLeft:return"top-left";case x.Alignment.TopRight:return"top-right";default:return null}};e.prototype._normalizeOffset=function(e){if(e==null){return this._normalizeOffset(0)}if(typeof e==="number"){var t=e;var r=t>=0?1:-1;var n=r*Math.round(Math.sqrt(.5*Math.pow(t,2)));return{bottom:[0,t],"bottom-left":[-n,n],"bottom-right":[n,n],center:[0,0],left:[-t,0],right:[t,0],top:[0,-t],"top-left":[-n,-n],"top-right":[n,-n]}}else{return{bottom:e.bottom||[0,0],"bottom-left":e.bottomLeft||[0,0],"bottom-right":e.bottomRight||[0,0],center:e.center||[0,0],left:e.left||[0,0],right:e.right||[0,0],top:e.top||[0,0],"top-left":e.topLeft||[0,0],"top-right":e.topRight||[0,0]}}};e.prototype._pixelToFloats=function(e,t,r,n){var i=[];if(e[1]<n){i.push("bottom")}else if(e[1]>t.height-n){i.push("top")}if(e[0]<r/2){i.push("right")}else if(e[0]>t.width-r/2){i.push("left")}return i};e.prototype._pointFromRectPosition=function(e,t){var r=e[0];var n=e[0]<e[2]?e[2]:e[2]+1;var i=e[1];var o=e[3];switch(t){case"bottom":return[(r+n)/2,o];case"bottom-left":return[r,o];case"bottom-right":return[n,o];case"center":return[(r+n)/2,(i+o)/2];case"left":return[r,(i+o)/2];case"right":return[n,(i+o)/2];case"top":return[(r+n)/2,i];case"top-left":return[r,i];case"top-right":return[n,i];default:return[(r+n)/2,o]}};return e}();r.Popup=a;r.default=a},{"../../../Geo":294,"../../../Utils":301,"../../../Viewer":302,rxjs:43}],353:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.SequenceComponent=void 0;var c=e("rxjs");var l=e("rxjs/operators");var u=e("../../Component");var i=e("../../Edge");var o=e("../../Graph");var a=function(a){n(s,a);function s(e,t,r,n,i){var o=a.call(this,e,t,r)||this;o._sequenceDOMRenderer=!!n?n:new u.SequenceDOMRenderer(t);o._scheduler=i;o._containerWidth$=new c.Subject;o._hoveredKeySubject$=new c.Subject;o._hoveredKey$=o._hoveredKeySubject$.pipe(l.share());o._navigator.playService.playing$.pipe(l.skip(1),l.withLatestFrom(o._configuration$)).subscribe(function(e){var t=e[0],r=e[1];o.fire(s.playingchanged,t);if(t===r.playing){return}if(t){o.play()}else{o.stop()}});o._navigator.playService.direction$.pipe(l.skip(1),l.withLatestFrom(o._configuration$)).subscribe(function(e){var t=e[0],r=e[1];if(t!==r.direction){o.setDirection(t)}});return o}Object.defineProperty(s.prototype,"hoveredKey$",{get:function(){return this._hoveredKey$},enumerable:false,configurable:true});s.prototype.play=function(){this.configure({playing:true})};s.prototype.stop=function(){this.configure({playing:false})};s.prototype.setDirection=function(e){this.configure({direction:e})};s.prototype.setHighlightKey=function(e){this.configure({highlightKey:e})};s.prototype.setMaxWidth=function(e){this.configure({maxWidth:e})};s.prototype.setMinWidth=function(e){this.configure({minWidth:e})};s.prototype.setVisible=function(e){this.configure({visible:e})};s.prototype._activate=function(){var u=this;this._sequenceDOMRenderer.activate();var t=this._navigator.stateService.currentNode$.pipe(l.switchMap(function(e){return e.sequenceEdges$}),l.publishReplay(1),l.refCount());var e=this._navigator.stateService.currentNode$.pipe(l.distinctUntilChanged(undefined,function(e){return e.sequenceKey}),l.switchMap(function(e){return c.concat(c.of(null),u._navigator.graphService.cacheSequence$(e.sequenceKey).pipe(l.retry(3),l.catchError(function(e){console.error("Failed to cache sequence",e);return c.of(null)})))}),l.startWith(null),l.publishReplay(1),l.refCount());this._sequenceSubscription=e.subscribe();var i=this._sequenceDOMRenderer.index$.pipe(l.withLatestFrom(e),l.map(function(e){var t=e[0],r=e[1];return r!=null?r.keys[t]:null}),l.filter(function(e){return!!e}),l.distinctUntilChanged(),l.publish(),l.refCount());this._moveSubscription=c.merge(i.pipe(l.debounceTime(100,this._scheduler)),i.pipe(l.auditTime(400,this._scheduler))).pipe(l.distinctUntilChanged(),l.switchMap(function(e){return u._navigator.moveToKey$(e).pipe(l.catchError(function(e){return c.empty()}))})).subscribe();this._setSequenceGraphModeSubscription=this._sequenceDOMRenderer.changingPositionChanged$.pipe(l.filter(function(e){return e})).subscribe(function(){u._navigator.graphService.setGraphMode(o.GraphMode.Sequence)});this._setSpatialGraphModeSubscription=this._sequenceDOMRenderer.changingPositionChanged$.pipe(l.filter(function(e){return!e})).subscribe(function(){u._navigator.graphService.setGraphMode(o.GraphMode.Spatial)});this._navigator.graphService.graphMode$.pipe(l.switchMap(function(e){return e===o.GraphMode.Spatial?u._navigator.stateService.currentNode$.pipe(l.take(2)):c.empty()}),l.filter(function(e){return!e.spatialEdges.cached}),l.switchMap(function(e){return u._navigator.graphService.cacheNode$(e.key).pipe(l.catchError(function(e){return c.empty()}))})).subscribe();this._stopSubscription=this._sequenceDOMRenderer.changingPositionChanged$.pipe(l.filter(function(e){return e})).subscribe(function(){u._navigator.playService.stop()});this._cacheSequenceNodesSubscription=c.combineLatest(this._navigator.graphService.graphMode$,this._sequenceDOMRenderer.changingPositionChanged$.pipe(l.startWith(false),l.distinctUntilChanged())).pipe(l.withLatestFrom(this._navigator.stateService.currentNode$),l.switchMap(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];return n&&r===o.GraphMode.Sequence?u._navigator.graphService.cacheSequenceNodes$(i.sequenceKey,i.key).pipe(l.retry(3),l.catchError(function(e){console.error("Failed to cache sequence nodes.",e);return c.empty()})):c.empty()})).subscribe();var r=e.pipe(l.switchMap(function(r){if(!r){return c.of({index:null,max:null})}var n=true;return u._sequenceDOMRenderer.changingPositionChanged$.pipe(l.startWith(false),l.distinctUntilChanged(),l.switchMap(function(e){var t=!e&&n?0:1;n=false;return e?i:u._navigator.stateService.currentNode$.pipe(l.map(function(e){return e.key}),l.distinctUntilChanged(),l.skip(t))}),l.map(function(e){var t=r.keys.indexOf(e);if(t===-1){return{index:null,max:null}}return{index:t,max:r.keys.length-1}}))}));this._renderSubscription=c.combineLatest(t,this._configuration$,this._containerWidth$,this._sequenceDOMRenderer.changed$.pipe(l.startWith(this._sequenceDOMRenderer)),this._navigator.playService.speed$,r).pipe(l.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5];var s=u._sequenceDOMRenderer.render(t,r,n,o,a.index,a.max,u,u._navigator);return{name:u._name,vnode:s}})).subscribe(this._container.domRenderer.render$);this._setSpeedSubscription=this._sequenceDOMRenderer.speed$.subscribe(function(e){u._navigator.playService.setSpeed(e)});this._setDirectionSubscription=this._configuration$.pipe(l.map(function(e){return e.direction}),l.distinctUntilChanged()).subscribe(function(e){u._navigator.playService.setDirection(e)});this._containerWidthSubscription=c.combineLatest(this._container.renderService.size$,this._configuration$.pipe(l.distinctUntilChanged(function(e,t){return e[0]===t[0]&&e[1]===t[1]},function(e){return[e.minWidth,e.maxWidth]}))).pipe(l.map(function(e){var t=e[0],r=e[1];return u._sequenceDOMRenderer.getContainerWidth(t,r)})).subscribe(this._containerWidth$);this._playingSubscription=this._configuration$.pipe(l.map(function(e){return e.playing}),l.distinctUntilChanged()).subscribe(function(e){if(e){u._navigator.playService.play()}else{u._navigator.playService.stop()}});this._hoveredKeySubscription=this._sequenceDOMRenderer.mouseEnterDirection$.pipe(l.switchMap(function(i){var e=t.pipe(l.map(function(e){for(var t=0,r=e.edges;t<r.length;t++){var n=r[t];if(n.data.direction===i){return n.to}}return null}),l.takeUntil(u._sequenceDOMRenderer.mouseLeaveDirection$));return c.concat(e,c.of(null))}),l.distinctUntilChanged()).subscribe(this._hoveredKeySubject$);this._emitHoveredKeySubscription=this._hoveredKey$.subscribe(function(e){u.fire(s.hoveredkeychanged,e)})};s.prototype._deactivate=function(){this._emitHoveredKeySubscription.unsubscribe();this._renderSubscription.unsubscribe();this._playingSubscription.unsubscribe();this._containerWidthSubscription.unsubscribe();this._hoveredKeySubscription.unsubscribe();this._setSpeedSubscription.unsubscribe();this._setDirectionSubscription.unsubscribe();this._setSequenceGraphModeSubscription.unsubscribe();this._setSpatialGraphModeSubscription.unsubscribe();this._sequenceSubscription.unsubscribe();this._moveSubscription.unsubscribe();this._cacheSequenceNodesSubscription.unsubscribe();this._stopSubscription.unsubscribe();this._sequenceDOMRenderer.deactivate()};s.prototype._getDefaultConfiguration=function(){return{direction:i.EdgeDirection.Next,maxWidth:108,minWidth:70,playing:false,visible:true}};s.componentName="sequence";s.playingchanged="playingchanged";s.hoveredkeychanged="hoveredkeychanged";return s}(u.Component);r.SequenceComponent=a;u.ComponentService.register(a);r.default=a},{"../../Component":291,"../../Edge":292,"../../Graph":295,rxjs:43,"rxjs/operators":241}],354:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SequenceDOMRenderer=void 0;var n=e("rxjs");var i=e("rxjs/operators");var w=e("virtual-dom");var S=e("../../Component");var M=e("../../Edge");var f=e("../../Error");var o=function(){function e(e){this._container=e;this._minThresholdWidth=320;this._maxThresholdWidth=1480;this._minThresholdHeight=240;this._maxThresholdHeight=820;this._stepperDefaultWidth=108;this._controlsDefaultWidth=88;this._defaultHeight=30;this._expandControls=false;this._mode=S.SequenceMode.Default;this._speed=.5;this._changingSpeed=false;this._index=null;this._changingPosition=false;this._mouseEnterDirection$=new n.Subject;this._mouseLeaveDirection$=new n.Subject;this._notifyChanged$=new n.Subject;this._notifyChangingPositionChanged$=new n.Subject;this._notifySpeedChanged$=new n.Subject;this._notifyIndexChanged$=new n.Subject}Object.defineProperty(e.prototype,"changed$",{get:function(){return this._notifyChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"changingPositionChanged$",{get:function(){return this._notifyChangingPositionChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"speed$",{get:function(){return this._notifySpeedChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"index$",{get:function(){return this._notifyIndexChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseEnterDirection$",{get:function(){return this._mouseEnterDirection$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseLeaveDirection$",{get:function(){return this._mouseLeaveDirection$},enumerable:false,configurable:true});e.prototype.activate=function(){var t=this;if(!!this._changingSubscription){return}this._changingSubscription=n.merge(this._container.mouseService.documentMouseUp$,this._container.touchService.touchEnd$.pipe(i.filter(function(e){return e.touches.length===0}))).subscribe(function(e){if(t._changingSpeed){t._changingSpeed=false}if(t._changingPosition){t._setChangingPosition(false)}})};e.prototype.deactivate=function(){if(!this._changingSubscription){return}this._changingSpeed=false;this._changingPosition=false;this._expandControls=false;this._mode=S.SequenceMode.Default;this._changingSubscription.unsubscribe();this._changingSubscription=null};e.prototype.render=function(e,t,r,n,i,o,a,s){if(t.visible===false){return w.h("div.SequenceContainer",{},[])}var u=this._createStepper(e,t,r,a,s);var c=this._createSequenceControls(r);var l=this._createPlaybackControls(r,n,a,t);var h=this._createTimelineControls(r,i,o);return w.h("div.SequenceContainer",[u,c,l,h])};e.prototype.getContainerWidth=function(e,t){var r=t.minWidth;var n=t.maxWidth;if(n<r){n=r}var i=(e.width-this._minThresholdWidth)/(this._maxThresholdWidth-this._minThresholdWidth);var o=(e.height-this._minThresholdHeight)/(this._maxThresholdHeight-this._minThresholdHeight);var a=Math.max(0,Math.min(1,Math.min(i,o)));return r+a*(n-r)};e.prototype._createPositionInput=function(e,t){var r=this;this._index=e;var n=function(e){r._index=Number(e.target.value);r._notifyIndexChanged$.next(r._index)};var i=this._container.domContainer.getBoundingClientRect();var o=Math.max(276,Math.min(410,5+.8*i.width))-65;var a=function(e){e.stopPropagation();r._setChangingPosition(true)};var s=function(e){if(r._changingPosition===true){e.stopPropagation()}};var u=function(e){if(e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"){e.preventDefault()}};var c={max:t!=null?t:1,min:0,onchange:n,oninput:n,onkeydown:u,onmousedown:a,onmousemove:s,ontouchmove:s,ontouchstart:a,style:{width:o+"px"},type:"range",value:e!=null?e:0};var l=e==null||t==null||t<=1;if(l){c.disabled="true"}var h=w.h("input.SequencePosition",c,[]);var p=l?".SequencePositionContainerDisabled":".SequencePositionContainer";return w.h("div"+p,[h])};e.prototype._createSpeedInput=function(e){var t=this;this._speed=e;var r=function(e){t._speed=Number(e.target.value)/1e3;t._notifySpeedChanged$.next(t._speed)};var n=this._container.domContainer.getBoundingClientRect();var i=Math.max(276,Math.min(410,5+.8*n.width))-160;var o=function(e){t._changingSpeed=true;e.stopPropagation()};var a=function(e){if(t._changingSpeed===true){e.stopPropagation()}};var s=function(e){if(e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"){e.preventDefault()}};var u=w.h("input.SequenceSpeed",{max:1e3,min:0,onchange:r,oninput:r,onkeydown:s,onmousedown:o,onmousemove:a,ontouchmove:a,ontouchstart:o,style:{width:i+"px"},type:"range",value:1e3*e},[]);return w.h("div.SequenceSpeedContainer",[u])};e.prototype._createPlaybackControls=function(e,t,r,n){var i=this;if(this._mode!==S.SequenceMode.Playback){return w.h("div.SequencePlayback",[])}var o=w.h("div.SequenceSwitchIcon.SequenceIconVisible",[]);var a=n.direction===M.EdgeDirection.Next?M.EdgeDirection.Prev:M.EdgeDirection.Next;var s=n.playing;var u={onclick:function(){if(!s){r.setDirection(a)}}};var c=n.playing?".SequenceSwitchButtonDisabled":".SequenceSwitchButton";var l=w.h("div"+c,u,[o]);var h=w.h("div.SequenceSlowIcon.SequenceIconVisible",[]);var p=w.h("div.SequenceSlowContainer",[h]);var f=w.h("div.SequenceFastIcon.SequenceIconVisible",[]);var d=w.h("div.SequenceFastContainer",[f]);var v=w.h("div.SequenceCloseIcon.SequenceIconVisible",[]);var m={onclick:function(){i._mode=S.SequenceMode.Default;i._notifyChanged$.next(i)}};var g=w.h("div.SequenceCloseButton",m,[v]);var _=this._createSpeedInput(t);var y=[l,p,_,d,g];var b=Math.round(e/this._stepperDefaultWidth*this._defaultHeight+10);var x={style:{top:b+"px"}};return w.h("div.SequencePlayback",x,y)};e.prototype._createPlayingButton=function(e,t,r,n){var i=r.direction===M.EdgeDirection.Next&&e!=null||r.direction===M.EdgeDirection.Prev&&t!=null;var o=r.playing?function(e){n.stop()}:i?function(e){n.play()}:null;var a={onclick:o};var s=r.playing?"Stop":i?"Play":"PlayDisabled";var u={className:s};if(r.direction===M.EdgeDirection.Prev){u.style={transform:"rotate(180deg) translate(50%, 50%)"}}var c=w.h("div.SequenceComponentIcon",u,[]);var l=i?"SequencePlay":"SequencePlayDisabled";return w.h("div."+l,a,[c])};e.prototype._createSequenceControls=function(e){var t=this;var r=Math.round(8/this._stepperDefaultWidth*e);var n={onclick:function(){t._expandControls=!t._expandControls;t._mode=S.SequenceMode.Default;t._notifyChanged$.next(t)},style:{"border-bottom-right-radius":r+"px","border-top-right-radius":r+"px"}};var i=w.h("div.SequenceExpanderBar",[]);var o=w.h("div.SequenceExpanderButton",n,[i]);var a=this._mode===S.SequenceMode.Playback?".SequenceFastIconGrey.SequenceIconVisible":".SequenceFastIcon";var s=w.h("div"+a,[]);var u={onclick:function(){t._mode=t._mode===S.SequenceMode.Playback?S.SequenceMode.Default:S.SequenceMode.Playback;t._notifyChanged$.next(t)}};var c=w.h("div.SequencePlaybackButton",u,[s]);var l=this._mode===S.SequenceMode.Timeline?".SequenceTimelineIconGrey.SequenceIconVisible":".SequenceTimelineIcon";var h=w.h("div"+l,[]);var p={onclick:function(){t._mode=t._mode===S.SequenceMode.Timeline?S.SequenceMode.Default:S.SequenceMode.Timeline;t._notifyChanged$.next(t)}};var f=w.h("div.SequenceTimelineButton",p,[h]);var d={style:{height:this._defaultHeight/this._stepperDefaultWidth*e+"px",transform:"translate("+(e/2+2)+"px, 0)",width:this._controlsDefaultWidth/this._stepperDefaultWidth*e+"px"}};var v=".SequenceControls"+(this._expandControls?".SequenceControlsExpanded":"");return w.h("div"+v,d,[c,f,o])};e.prototype._createSequenceArrows=function(e,t,r,n,i){var o=this;var a={onclick:e!=null?function(e){i.moveDir$(M.EdgeDirection.Next).subscribe(undefined,function(e){if(!(e instanceof f.AbortMapillaryError)){console.error(e)}})}:null,onmouseenter:function(e){o._mouseEnterDirection$.next(M.EdgeDirection.Next)},onmouseleave:function(e){o._mouseLeaveDirection$.next(M.EdgeDirection.Next)}};var s=Math.round(8/this._stepperDefaultWidth*r);var u={onclick:t!=null?function(e){i.moveDir$(M.EdgeDirection.Prev).subscribe(undefined,function(e){if(!(e instanceof f.AbortMapillaryError)){console.error(e)}})}:null,onmouseenter:function(e){o._mouseEnterDirection$.next(M.EdgeDirection.Prev)},onmouseleave:function(e){o._mouseLeaveDirection$.next(M.EdgeDirection.Prev)},style:{"border-bottom-left-radius":s+"px","border-top-left-radius":s+"px"}};var c=this._getStepClassName(M.EdgeDirection.Next,e,n.highlightKey);var l=this._getStepClassName(M.EdgeDirection.Prev,t,n.highlightKey);var h=w.h("div.SequenceComponentIcon",[]);var p=w.h("div.SequenceComponentIcon",[]);return[w.h("div."+l,u,[p]),w.h("div."+c,a,[h])]};e.prototype._createStepper=function(e,t,r,n,i){var o=null;var a=null;for(var s=0,u=e.edges;s<u.length;s++){var c=u[s];if(c.data.direction===M.EdgeDirection.Next){o=c.to}if(c.data.direction===M.EdgeDirection.Prev){a=c.to}}var l=this._createPlayingButton(o,a,t,n);var h=this._createSequenceArrows(o,a,r,t,i);h.splice(1,0,l);var p={oncontextmenu:function(e){e.preventDefault()},style:{height:this._defaultHeight/this._stepperDefaultWidth*r+"px",width:r+"px"}};return w.h("div.SequenceStepper",p,h)};e.prototype._createTimelineControls=function(e,t,r){var n=this;if(this._mode!==S.SequenceMode.Timeline){return w.h("div.SequenceTimeline",[])}var i=this._createPositionInput(t,r);var o=w.h("div.SequenceCloseIcon.SequenceIconVisible",[]);var a={onclick:function(){n._mode=S.SequenceMode.Default;n._notifyChanged$.next(n)}};var s=w.h("div.SequenceCloseButton",a,[o]);var u=Math.round(e/this._stepperDefaultWidth*this._defaultHeight+10);var c={style:{top:u+"px"}};return w.h("div.SequenceTimeline",c,[i,s])};e.prototype._getStepClassName=function(e,t,r){var n=e===M.EdgeDirection.Next?"SequenceStepNext":"SequenceStepPrev";if(t==null){n+="Disabled"}else{if(r===t){n+="Highlight"}}return n};e.prototype._setChangingPosition=function(e){this._changingPosition=e;this._notifyChangingPositionChanged$.next(e)};return e}();r.SequenceDOMRenderer=o;r.default=o},{"../../Component":291,"../../Edge":292,"../../Error":293,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],355:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SequenceMode=void 0;var n;(function(e){e[e["Default"]=0]="Default";e[e["Playback"]=1]="Playback";e[e["Timeline"]=2]="Timeline"})(n=r.SequenceMode||(r.SequenceMode={}));r.default=n},{}],356:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Shaders=void 0;var n=e("path");var i=function(){function e(){}e.equirectangular={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\nuniform float phiLength;\nuniform float phiShift;\nuniform float thetaLength;\nuniform float thetaShift;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vec3 b = normalize(vRstq.xyz);\n    float lat = -asin(b.y);\n    float lon = atan(b.x, b.z);\n    float x = (lon - phiShift) / phiLength + 0.5;\n    float y = (lat - thetaShift) / thetaLength + 0.5;\n    vec4 baseColor = texture2D(projectorTex, vec2(x, y));\n    baseColor.a = opacity;\n    gl_FragColor = baseColor;\n}",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"};e.equirectangularCurtain={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float curtain;\nuniform float opacity;\nuniform float phiLength;\nuniform float phiShift;\nuniform float thetaLength;\nuniform float thetaShift;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vec3 b = normalize(vRstq.xyz);\n    float lat = -asin(b.y);\n    float lon = atan(b.x, b.z);\n    float x = (lon - phiShift) / phiLength + 0.5;\n    float y = (lat - thetaShift) / thetaLength + 0.5;\n\n    bool inverted = curtain < 0.5;\n\n    float curtainMin = inverted ? curtain + 0.5 : curtain - 0.5;\n    float curtainMax = curtain;\n\n    bool insideCurtain = inverted ?\n        x > curtainMin || x < curtainMax :\n        x > curtainMin && x < curtainMax;\n\n    vec4 baseColor;\n    if (insideCurtain) {\n        baseColor = texture2D(projectorTex, vec2(x, y));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"};e.perspective={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\nuniform float focal;\nuniform float k1;\nuniform float k2;\nuniform float scale_x;\nuniform float scale_y;\nuniform float radial_peak;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    float x = vRstq.x / vRstq.z;\n    float y = vRstq.y / vRstq.z;\n    float r2 = x * x + y * y;\n\n    if (radial_peak > 0. && r2 > radial_peak * sqrt(r2)) {\n        r2 = radial_peak * radial_peak;\n    }\n\n    float d = 1.0 + k1 * r2 + k2 * r2 * r2;\n    float u = scale_x * focal * d * x + 0.5;\n    float v = - scale_y * focal * d * y + 0.5;\n\n    vec4 baseColor;\n    if (u >= 0. && u <= 1. && v >= 0. && v <= 1.) {\n        baseColor = texture2D(projectorTex, vec2(u, v));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"};e.perspectiveCurtain={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\nuniform float focal;\nuniform float k1;\nuniform float k2;\nuniform float scale_x;\nuniform float scale_y;\nuniform float radial_peak;\nuniform float curtain;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    float x = vRstq.x / vRstq.z;\n    float y = vRstq.y / vRstq.z;\n    float r2 = x * x + y * y;\n\n    if (radial_peak > 0. && r2 > radial_peak * sqrt(r2)) {\n        r2 = radial_peak * radial_peak;\n    }\n\n    float d = 1.0 + k1 * r2 + k2 * r2 * r2;\n    float u = scale_x * focal * d * x + 0.5;\n    float v = - scale_y * focal * d * y + 0.5;\n\n    vec4 baseColor;\n    if ((u < curtain || curtain >= 1.0) && u >= 0. && u <= 1. && v >= 0. && v <= 1.) {\n        baseColor = texture2D(projectorTex, vec2(u, v));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}\n",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"};e.fisheye={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\nuniform float focal;\nuniform float k1;\nuniform float k2;\nuniform float scale_x;\nuniform float scale_y;\nuniform float radial_peak;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    float x = vRstq.x;\n    float y = vRstq.y;\n    float z = vRstq.z;\n\n    float r = sqrt(x * x + y * y);\n    float theta = atan(r, z);\n\n    if (radial_peak > 0. && theta > radial_peak) {\n        theta = radial_peak;\n    }\n\n    float theta2 = theta * theta;\n    float theta_d = theta * (1.0 + theta2 * (k1 + theta2 * k2));\n    float s = focal * theta_d / r;\n\n    float u = scale_x * s * x + 0.5;\n    float v = -scale_y * s * y + 0.5;\n\n    vec4 baseColor;\n    if (u >= 0. && u <= 1. && v >= 0. && v <= 1.) {\n        baseColor = texture2D(projectorTex, vec2(u, v));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}\n",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"};e.fisheyeCurtain={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\nuniform float focal;\nuniform float k1;\nuniform float k2;\nuniform float scale_x;\nuniform float scale_y;\nuniform float radial_peak;\nuniform float curtain;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    float x = vRstq.x;\n    float y = vRstq.y;\n    float z = vRstq.z;\n\n    float r2 = sqrt(x * x + y * y);\n    float theta = atan(r2, z);\n\n    if (radial_peak > 0. && theta > radial_peak) {\n        theta = radial_peak;\n    }\n\n    float theta2 = theta * theta;\n    float theta_d = theta * (1.0 + theta2 * (k1 + theta2 * k2));\n    float s = focal * theta_d / r2;\n\n    float u = scale_x * s * x + 0.5;\n    float v = -scale_y * s * y + 0.5;\n\n    vec4 baseColor;\n    if ((u < curtain || curtain >= 1.0) && u >= 0. && u <= 1. && v >= 0. && v <= 1.) {\n        baseColor = texture2D(projectorTex, vec2(u, v));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}\n",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"};e.perspectiveDistorted={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    float u = vRstq.x / vRstq.w;\n    float v = vRstq.y / vRstq.w;\n\n    vec4 baseColor;\n    if (u >= 0. && u <= 1. && v >= 0. && v <= 1.) {\n        baseColor = texture2D(projectorTex, vec2(u, v));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}\n",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"};e.perspectiveDistortedCurtain={fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D projectorTex;\nuniform float opacity;\nuniform float curtain;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    float u = vRstq.x / vRstq.w;\n    float v = vRstq.y / vRstq.w;\n\n    vec4 baseColor;\n    if ((u < curtain || curtain >= 1.0) && u >= 0. && u <= 1. && v >= 0. && v <= 1.) {\n        baseColor = texture2D(projectorTex, vec2(u, v));\n        baseColor.a = opacity;\n    } else {\n        baseColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    gl_FragColor = baseColor;\n}\n",vertex:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform mat4 projectorMat;\n\nvarying vec4 vRstq;\n\nvoid main()\n{\n    vRstq = projectorMat * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"};return e}();r.Shaders=i},{path:39}],357:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.SliderComponent=void 0;var d=e("rxjs");var v=e("rxjs/operators");var m=e("../../Component");var a=e("../../Geo");var g=e("../../State");var _=e("../../Render");var y=e("../../Tiles");var b=e("../../Utils");var i=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._viewportCoords=!!n?n:new a.ViewportCoords;i._domRenderer=new m.SliderDOMRenderer(t);i._imageTileLoader=new y.ImageTileLoader(b.Urls.tileScheme,b.Urls.tileDomain,b.Urls.origin);i._roiCalculator=new y.RegionOfInterestCalculator;i._spatial=new a.Spatial;i._glRendererOperation$=new d.Subject;i._glRendererCreator$=new d.Subject;i._glRendererDisposer$=new d.Subject;i._glRenderer$=i._glRendererOperation$.pipe(v.scan(function(e,t){return t(e)},null),v.filter(function(e){return e!=null}),v.distinctUntilChanged(undefined,function(e){return e.frameId}));i._glRendererCreator$.pipe(v.map(function(){return function(e){if(e!=null){throw new Error("Multiple slider states can not be created at the same time")}return new m.SliderGLRenderer}})).subscribe(i._glRendererOperation$);i._glRendererDisposer$.pipe(v.map(function(){return function(e){e.dispose();return null}})).subscribe(i._glRendererOperation$);return i}e.prototype.setInitialPosition=function(e){this.configure({initialPosition:e})};e.prototype.setKeys=function(e){this.configure({keys:e})};e.prototype.setSliderMode=function(e){this.configure({mode:e})};e.prototype.setSliderVisible=function(e){this.configure({sliderVisible:e})};e.prototype._activate=function(){var z=this;this._modeSubcription=this._domRenderer.mode$.subscribe(function(e){z.setSliderMode(e)});this._glRenderSubscription=this._glRenderer$.pipe(v.map(function(e){var t={name:z._name,render:{frameId:e.frameId,needsRender:e.needsRender,render:e.render.bind(e),stage:_.GLRenderStage.Background}};return t})).subscribe(this._container.glRenderer.render$);var e=d.concat(this.configuration$.pipe(v.map(function(e){return e.initialPosition!=null?e.initialPosition:1}),v.first()),this._domRenderer.position$);var t=this.configuration$.pipe(v.map(function(e){return e.mode}),v.distinctUntilChanged());var r=this._navigator.stateService.currentState$.pipe(v.map(function(e){return e.state.motionless}),v.distinctUntilChanged());var n=this._navigator.stateService.currentState$.pipe(v.map(function(e){return e.state.currentNode.fullPano}),v.distinctUntilChanged());var i=d.combineLatest(this._configuration$.pipe(v.map(function(e){return e.sliderVisible})),this._navigator.stateService.currentState$.pipe(v.map(function(e){return!(e.state.currentNode==null||e.state.previousNode==null||e.state.currentNode.pano&&!e.state.currentNode.fullPano||e.state.previousNode.pano&&!e.state.previousNode.fullPano||e.state.currentNode.fullPano&&!e.state.previousNode.fullPano)}),v.distinctUntilChanged())).pipe(v.map(function(e){var t=e[0],r=e[1];return t&&r}),v.distinctUntilChanged());this._waitSubscription=d.combineLatest(t,r,n,i).pipe(v.withLatestFrom(this._navigator.stateService.state$)).subscribe(function(e){var t=e[0],r=t[0],n=t[1],i=t[2],o=t[3],a=e[1];var s=o&&(n||r===m.SliderMode.Stationary||i);if(s&&a!==g.State.WaitingInteractively){z._navigator.stateService.waitInteractively()}else if(!s&&a!==g.State.Waiting){z._navigator.stateService.wait()}});this._moveSubscription=d.combineLatest(e,t,r,n,i).subscribe(function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(n||r===m.SliderMode.Stationary||i){z._navigator.stateService.moveTo(1)}else{z._navigator.stateService.moveTo(t)}});this._domRenderSubscription=d.combineLatest(e,t,r,n,i,this._container.renderService.size$).pipe(v.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5];return{name:z._name,vnode:z._domRenderer.render(t,r,n,i,o)}})).subscribe(this._container.domRenderer.render$);this._glRendererCreator$.next(null);this._updateCurtainSubscription=d.combineLatest(e,n,i,this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$).pipe(v.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(!r){return n?t:1}var a=z._viewportCoords.viewportToBasic(-1.15,0,o,i.perspective);var s=z._viewportCoords.viewportToBasic(1.15,0,o,i.perspective);var u=s[0]<a[0]?s[0]+1:s[0];var c=a[0]+t*(u-a[0]);return c>1?c-1:c}),v.map(function(t){return function(e){e.updateCurtain(t);return e}})).subscribe(this._glRendererOperation$);this._stateSubscription=d.combineLatest(this._navigator.stateService.currentState$,t).pipe(v.map(function(e){var t=e[0],r=e[1];return function(e){e.update(t,r);return e}})).subscribe(this._glRendererOperation$);this._setKeysSubscription=this._configuration$.pipe(v.filter(function(e){return e.keys!=null}),v.switchMap(function(e){return d.zip(d.zip(z._catchCacheNode$(e.keys.background),z._catchCacheNode$(e.keys.foreground)).pipe(v.map(function(e){return{background:e[0],foreground:e[1]}})),z._navigator.stateService.currentState$.pipe(v.first())).pipe(v.map(function(e){return{nodes:e[0],state:e[1].state}}))})).subscribe(function(e){if(e.state.currentNode!=null&&e.state.previousNode!=null&&e.state.currentNode.key===e.nodes.foreground.key&&e.state.previousNode.key===e.nodes.background.key){return}if(e.state.currentNode.key===e.nodes.background.key){z._navigator.stateService.setNodes([e.nodes.foreground]);return}if(e.state.currentNode.key===e.nodes.foreground.key&&e.state.trajectory.length===1){z._navigator.stateService.prependNodes([e.nodes.background]);return}z._navigator.stateService.setNodes([e.nodes.background]);z._navigator.stateService.setNodes([e.nodes.foreground])},function(e){console.error(e)});var o=this._navigator.stateService.currentState$.pipe(v.map(function(e){return e.state.previousNode}),v.filter(function(e){return e!=null}),v.distinctUntilChanged(undefined,function(e){return e.key}));var a=this._navigator.stateService.currentState$.pipe(v.distinctUntilChanged(undefined,function(e){return e.state.currentNode.key}),v.withLatestFrom(this._container.glRenderer.webGLRenderer$,this._container.renderService.size$),v.map(function(e){var t=e[0],r=e[1],n=e[2];var i=t.state;var o=Math.max(n.width,n.height);var a=i.currentNode;var s=i.currentTransform;var u=o>2048?2048:o>1024?1024:512;return new y.TextureProvider(a.key,s.basicWidth,s.basicHeight,u,a.image,z._imageTileLoader,new y.ImageTileStore,r)}),v.publishReplay(1),v.refCount());this._textureProviderSubscription=a.subscribe(function(){});this._setTextureProviderSubscription=a.pipe(v.map(function(t){return function(e){e.setTextureProvider(t.key,t);return e}})).subscribe(this._glRendererOperation$);this._setTileSizeSubscription=this._container.renderService.size$.pipe(v.switchMap(function(e){return d.combineLatest(a,d.of(e)).pipe(v.first())})).subscribe(function(e){var t=e[0],r=e[1];var n=Math.max(r.width,r.height);var i=n>2048?2048:n>1024?1024:512;t.setTileSize(i)});this._abortTextureProviderSubscription=a.pipe(v.pairwise()).subscribe(function(e){var t=e[0];t.abort()});var s=d.combineLatest(this._container.renderService.renderCameraFrame$,this._container.renderService.size$.pipe(v.debounceTime(250))).pipe(v.map(function(e){var t=e[0],r=e[1];return[t.camera.position.clone(),t.camera.lookat.clone(),t.zoom.valueOf(),r.height.valueOf(),r.width.valueOf()]}),v.pairwise(),v.skipWhile(function(e){return e[1][2]-e[0][2]<0||e[1][2]===0}),v.map(function(e){var t=e[0][0].equals(e[1][0]);var r=e[0][1].equals(e[1][1]);var n=e[0][2]===e[1][2];var i=e[0][3]===e[1][3];var o=e[0][4]===e[1][4];return t&&r&&n&&i&&o}),v.distinctUntilChanged(),v.filter(function(e){return e}),v.switchMap(function(e){return z._container.renderService.renderCameraFrame$.pipe(v.first())}),v.withLatestFrom(this._container.renderService.size$,this._navigator.stateService.currentTransform$));this._setRegionOfInterestSubscription=a.pipe(v.switchMap(function(i){return s.pipe(v.map(function(e){var t=e[0],r=e[1],n=e[2];return[z._roiCalculator.computeRegionOfInterest(t,r,n),i]}))}),v.filter(function(e){return!e[1].disposed})).subscribe(function(e){var t=e[0];var r=e[1];r.setRegionOfInterest(t)});var u=a.pipe(v.switchMap(function(e){return e.hasTexture$}),v.startWith(false),v.publishReplay(1),v.refCount());this._hasTextureSubscription=u.subscribe(function(){});var c=this._navigator.stateService.currentState$.pipe(v.filter(function(e){return e.state.nodesAhead===0}),v.map(function(e){return e.state.currentNode}),v.distinctUntilChanged(undefined,function(e){return e.key}),v.debounceTime(1e3),v.withLatestFrom(u),v.filter(function(e){return!e[1]}),v.map(function(e){return e[0]}),v.filter(function(e){return e.pano?b.Settings.maxImageSize>b.Settings.basePanoramaSize:b.Settings.maxImageSize>b.Settings.baseImageSize}),v.switchMap(function(r){var e=r.pano?b.Settings.basePanoramaSize:b.Settings.baseImageSize;if(Math.max(r.image.width,r.image.height)>e){return d.empty()}var t=r.cacheImage$(b.Settings.maxImageSize).pipe(v.map(function(e){return[e.image,e]}));return t.pipe(v.takeUntil(u.pipe(v.filter(function(e){return e}))),v.catchError(function(e,t){console.error("Failed to fetch high res image ("+r.key+")",e);return d.empty()}))})).pipe(v.publish(),v.refCount());this._updateBackgroundSubscription=c.pipe(v.withLatestFrom(a)).subscribe(function(e){if(e[0][1].key!==e[1].key||e[1].disposed){return}e[1].updateBackground(e[0][0])});this._updateTextureImageSubscription=c.pipe(v.map(function(t){return function(e){e.updateTextureImage(t[0],t[1]);return e}})).subscribe(this._glRendererOperation$);var l=this._navigator.stateService.currentState$.pipe(v.filter(function(e){return!!e.state.previousNode}),v.distinctUntilChanged(undefined,function(e){return e.state.previousNode.key}),v.withLatestFrom(this._container.glRenderer.webGLRenderer$,this._container.renderService.size$),v.map(function(e){var t=e[0],r=e[1],n=e[2];var i=t.state;var o=Math.max(n.width,n.height);var a=i.previousNode;var s=i.previousTransform;var u=o>2048?2048:o>1024?1024:512;return new y.TextureProvider(a.key,s.basicWidth,s.basicHeight,u,a.image,z._imageTileLoader,new y.ImageTileStore,r)}),v.publishReplay(1),v.refCount());this._textureProviderSubscriptionPrev=l.subscribe(function(){});this._setTextureProviderSubscriptionPrev=l.pipe(v.map(function(t){return function(e){e.setTextureProviderPrev(t.key,t);return e}})).subscribe(this._glRendererOperation$);this._setTileSizeSubscriptionPrev=this._container.renderService.size$.pipe(v.switchMap(function(e){return d.combineLatest(l,d.of(e)).pipe(v.first())})).subscribe(function(e){var t=e[0],r=e[1];var n=Math.max(r.width,r.height);var i=n>2048?2048:n>1024?1024:512;t.setTileSize(i)});this._abortTextureProviderSubscriptionPrev=l.pipe(v.pairwise()).subscribe(function(e){var t=e[0];t.abort()});var h=d.combineLatest(this._container.renderService.renderCameraFrame$,this._container.renderService.size$.pipe(v.debounceTime(250))).pipe(v.map(function(e){var t=e[0],r=e[1];return[t.camera.position.clone(),t.camera.lookat.clone(),t.zoom.valueOf(),r.height.valueOf(),r.width.valueOf()]}),v.pairwise(),v.skipWhile(function(e){return e[1][2]-e[0][2]<0||e[1][2]===0}),v.map(function(e){var t=e[0][0].equals(e[1][0]);var r=e[0][1].equals(e[1][1]);var n=e[0][2]===e[1][2];var i=e[0][3]===e[1][3];var o=e[0][4]===e[1][4];return t&&r&&n&&i&&o}),v.distinctUntilChanged(),v.filter(function(e){return e}),v.switchMap(function(e){return z._container.renderService.renderCameraFrame$.pipe(v.first())}),v.withLatestFrom(this._container.renderService.size$,this._navigator.stateService.currentTransform$));this._setRegionOfInterestSubscriptionPrev=l.pipe(v.switchMap(function(i){return h.pipe(v.map(function(e){var t=e[0],r=e[1],n=e[2];return[z._roiCalculator.computeRegionOfInterest(t,r,n),i]}))}),v.filter(function(e){return!e[1].disposed}),v.withLatestFrom(this._navigator.stateService.currentState$)).subscribe(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];var o=null;if(i.state.previousNode.fullPano){if(i.state.currentNode.fullPano){var a=z._spatial.viewingDirection(i.state.currentNode.rotation);var s=z._spatial.viewingDirection(i.state.previousNode.rotation);var u=z._spatial.angleBetweenVector2(a.x,a.y,s.x,s.y);var c=u/(2*Math.PI);var l={maxX:z._spatial.wrap(r.bbox.maxX+c,0,1),maxY:r.bbox.maxY,minX:z._spatial.wrap(r.bbox.minX+c,0,1),minY:r.bbox.minY};o={bbox:l,pixelHeight:r.pixelHeight,pixelWidth:r.pixelWidth}}else{var a=z._spatial.viewingDirection(i.state.currentNode.rotation);var s=z._spatial.viewingDirection(i.state.previousNode.rotation);var u=z._spatial.angleBetweenVector2(a.x,a.y,s.x,s.y);var h=u/(2*Math.PI);var p=z._spatial.angleToPlane(a.toArray(),[0,0,1]);var f=z._spatial.angleToPlane(s.toArray(),[0,0,1]);var d=(f-p)/(2*Math.PI);var v=i.state.currentTransform;var m=Math.max(v.basicWidth,v.basicHeight);var g=m>0?2*Math.atan(.5*v.basicWidth/(m*v.focal)):Math.PI/3;var _=m>0?2*Math.atan(.5*v.basicHeight/(m*v.focal)):Math.PI/3;var y=g/(2*Math.PI);var b=_/Math.PI;var x=(r.bbox.maxX-r.bbox.minX)*y;var w=(r.bbox.maxY-r.bbox.minY)*b;var S=r.pixelWidth*y;var M=r.pixelHeight*b;var C=(r.bbox.minX+r.bbox.maxX)/2-.5;var T=(r.bbox.minY+r.bbox.maxY)/2-.5;var E=.5+h+y*C-x/2;var O=.5+h+y*C+x/2;var P=.5+d+b*T-w/2;var A=.5+d+b*T+w/2;var l={maxX:z._spatial.wrap(O,0,1),maxY:A,minX:z._spatial.wrap(E,0,1),minY:P};o={bbox:l,pixelHeight:M,pixelWidth:S}}}else{var j=i.state.currentTransform.basicAspect;var R=i.state.previousTransform.basicAspect;var k=z._getBasicCorners(j,R),L=k[0],N=L[0],I=L[1],D=k[1],B=D[0],F=D[1];var x=B-N;var w=F-I;var S=r.pixelWidth/x;var M=r.pixelHeight/w;var E=(x-1)/(2*x)+r.bbox.minX/x;var O=(x-1)/(2*x)+r.bbox.maxX/x;var P=(w-1)/(2*w)+r.bbox.minY/w;var A=(w-1)/(2*w)+r.bbox.maxY/w;var l={maxX:O,maxY:A,minX:E,minY:P};z._clipBoundingBox(l);o={bbox:l,pixelHeight:M,pixelWidth:S}}n.setRegionOfInterest(o)});var p=l.pipe(v.switchMap(function(e){return e.hasTexture$}),v.startWith(false),v.publishReplay(1),v.refCount());this._hasTextureSubscriptionPrev=p.subscribe(function(){});var f=this._navigator.stateService.currentState$.pipe(v.filter(function(e){return e.state.nodesAhead===0&&!!e.state.previousNode}),v.map(function(e){return e.state.previousNode}),v.distinctUntilChanged(undefined,function(e){return e.key}),v.debounceTime(1e3),v.withLatestFrom(p),v.filter(function(e){return!e[1]}),v.map(function(e){return e[0]}),v.filter(function(e){return e.pano?b.Settings.maxImageSize>b.Settings.basePanoramaSize:b.Settings.maxImageSize>b.Settings.baseImageSize}),v.switchMap(function(r){var e=r.pano?b.Settings.basePanoramaSize:b.Settings.baseImageSize;if(Math.max(r.image.width,r.image.height)>e){return d.empty()}var t=r.cacheImage$(b.Settings.maxImageSize).pipe(v.map(function(e){return[e.image,e]}));return t.pipe(v.takeUntil(p.pipe(v.filter(function(e){return e}))),v.catchError(function(e,t){console.error("Failed to fetch high res image ("+r.key+")",e);return d.empty()}))})).pipe(v.publish(),v.refCount());this._updateBackgroundSubscriptionPrev=f.pipe(v.withLatestFrom(l)).subscribe(function(e){if(e[0][1].key!==e[1].key||e[1].disposed){return}e[1].updateBackground(e[0][0])});this._updateTextureImageSubscriptionPrev=f.pipe(v.map(function(t){return function(e){e.updateTextureImage(t[0],t[1]);return e}})).subscribe(this._glRendererOperation$)};e.prototype._deactivate=function(){var t=this;this._waitSubscription.unsubscribe();this._navigator.stateService.state$.pipe(v.first()).subscribe(function(e){if(e!==g.State.Traversing){t._navigator.stateService.traverse()}});this._glRendererDisposer$.next(null);this._domRenderer.deactivate();this._modeSubcription.unsubscribe();this._setKeysSubscription.unsubscribe();this._stateSubscription.unsubscribe();this._glRenderSubscription.unsubscribe();this._domRenderSubscription.unsubscribe();this._moveSubscription.unsubscribe();this._updateCurtainSubscription.unsubscribe();this._textureProviderSubscription.unsubscribe();this._setTextureProviderSubscription.unsubscribe();this._setTileSizeSubscription.unsubscribe();this._abortTextureProviderSubscription.unsubscribe();this._setRegionOfInterestSubscription.unsubscribe();this._hasTextureSubscription.unsubscribe();this._updateBackgroundSubscription.unsubscribe();this._updateTextureImageSubscription.unsubscribe();this._textureProviderSubscriptionPrev.unsubscribe();this._setTextureProviderSubscriptionPrev.unsubscribe();this._setTileSizeSubscriptionPrev.unsubscribe();this._abortTextureProviderSubscriptionPrev.unsubscribe();this._setRegionOfInterestSubscriptionPrev.unsubscribe();this._hasTextureSubscriptionPrev.unsubscribe();this._updateBackgroundSubscriptionPrev.unsubscribe();this._updateTextureImageSubscriptionPrev.unsubscribe();this.configure({keys:null})};e.prototype._getDefaultConfiguration=function(){return{initialPosition:1,mode:m.SliderMode.Motion,sliderVisible:true}};e.prototype._catchCacheNode$=function(r){return this._navigator.graphService.cacheNode$(r).pipe(v.catchError(function(e,t){console.error("Failed to cache slider node ("+r+")",e);return d.empty()}))};e.prototype._getBasicCorners=function(e,t){var r;var n;if(e>t){r=.5;n=.5*e/t}else{r=.5*t/e;n=.5}return[[.5-r,.5-n],[.5+r,.5+n]]};e.prototype._clipBoundingBox=function(e){e.minX=Math.max(0,Math.min(1,e.minX));e.maxX=Math.max(0,Math.min(1,e.maxX));e.minY=Math.max(0,Math.min(1,e.minY));e.maxY=Math.max(0,Math.min(1,e.maxY))};e.componentName="slider";return e}(m.Component);r.SliderComponent=i;m.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Geo":294,"../../Render":297,"../../State":298,"../../Tiles":300,"../../Utils":301,rxjs:43,"rxjs/operators":241}],358:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SliderDOMRenderer=void 0;var n=e("rxjs");var i=e("rxjs/operators");var l=e("virtual-dom");var o=e("../../Component");var a=function(){function e(e){this._container=e;this._interacting=false;this._notifyModeChanged$=new n.Subject;this._notifyPositionChanged$=new n.Subject;this._stopInteractionSubscription=null}Object.defineProperty(e.prototype,"mode$",{get:function(){return this._notifyModeChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"position$",{get:function(){return this._notifyPositionChanged$},enumerable:false,configurable:true});e.prototype.activate=function(){var t=this;if(!!this._stopInteractionSubscription){return}this._stopInteractionSubscription=n.merge(this._container.mouseService.documentMouseUp$,this._container.touchService.touchEnd$.pipe(i.filter(function(e){return e.touches.length===0}))).subscribe(function(e){if(t._interacting){t._interacting=false}})};e.prototype.deactivate=function(){if(!this._stopInteractionSubscription){return}this._interacting=false;this._stopInteractionSubscription.unsubscribe();this._stopInteractionSubscription=null};e.prototype.render=function(e,t,r,n,i){var o=[];if(i){o.push(l.h("div.SliderBorder",[]));var a=!(r||n);if(a){o.push(this._createModeButton(t));o.push(this._createModeButton2d(t))}o.push(this._createPositionInput(e,a))}var s=this._container.domContainer.getBoundingClientRect();var u=Math.max(215,Math.min(400,s.width-100));return l.h("div.SliderContainer",{style:{width:u+"px"}},o)};e.prototype._createModeButton=function(e){var t=this;var r={onclick:function(){if(e===o.SliderMode.Motion){return}t._notifyModeChanged$.next(o.SliderMode.Motion)}};var n=e===o.SliderMode.Stationary?"SliderModeButtonDisabled":"SliderModeButton";return l.h("div."+n,r,[l.h("div.SliderModeIcon",[])])};e.prototype._createModeButton2d=function(e){var t=this;var r={onclick:function(){if(e===o.SliderMode.Stationary){return}t._notifyModeChanged$.next(o.SliderMode.Stationary)}};var n=e===o.SliderMode.Motion?"SliderModeButton2dDisabled":"SliderModeButton2d";return l.h("div."+n,r,[l.h("div.SliderModeIcon2d",[])])};e.prototype._createPositionInput=function(e,t){var r=this;var n=function(e){r._notifyPositionChanged$.next(Number(e.target.value)/1e3)};var i=function(e){r._interacting=true;e.stopPropagation()};var o=function(e){if(r._interacting){e.stopPropagation()}};var a=function(e){if(e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"){e.preventDefault()}};var s=this._container.domContainer.getBoundingClientRect();var u=Math.max(215,Math.min(400,s.width-105))-84+(t?0:52);var c=l.h("input.SliderPosition",{max:1e3,min:0,onchange:n,oninput:n,onkeydown:a,onmousedown:i,onmousemove:o,ontouchmove:o,ontouchstart:i,style:{width:u+"px"},type:"range",value:1e3*e},[]);return l.h("div.SliderPositionContainer",[c])};return e}();r.SliderDOMRenderer=a;r.default=a},{"../../Component":291,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],359:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SliderGLRenderer=void 0;var T=e("../../Component");var E=e("../../Geo");var n=function(){function e(){this._factory=new T.MeshFactory;this._scene=new T.MeshScene;this._spatial=new E.Spatial;this._currentKey=null;this._previousKey=null;this._disabled=false;this._curtain=1;this._frameId=0;this._needsRender=false;this._mode=null;this._currentProviderDisposers={};this._previousProviderDisposers={}}Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"frameId",{get:function(){return this._frameId},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:false,configurable:true});e.prototype.setTextureProvider=function(e,t){this._setTextureProvider(e,this._currentKey,t,this._currentProviderDisposers,this._updateTexture.bind(this))};e.prototype.setTextureProviderPrev=function(e,t){this._setTextureProvider(e,this._previousKey,t,this._previousProviderDisposers,this._updateTexturePrev.bind(this))};e.prototype.update=function(e,t){this._updateFrameId(e.id);this._updateImagePlanes(e.state,t)};e.prototype.updateCurtain=function(e){if(this._curtain===e){return}this._curtain=e;this._updateCurtain();this._needsRender=true};e.prototype.updateTexture=function(e,t){var r=t.key===this._currentKey?this._scene.planes:t.key===this._previousKey?this._scene.planesOld:{};if(Object.keys(r).length===0){return}this._needsRender=true;for(var n in r){if(!r.hasOwnProperty(n)){continue}var i=r[n];var o=i.material;var a=o.uniforms.projectorTex.value;a.image=e;a.needsUpdate=true}};e.prototype.updateTextureImage=function(e,t){if(this._currentKey!==t.key){return}this._needsRender=true;var r=this._scene.planes;for(var n in r){if(!r.hasOwnProperty(n)){continue}var i=r[n];var o=i.material;var a=o.uniforms.projectorTex.value;a.image=e;a.needsUpdate=true}};e.prototype.render=function(e,t){if(!this.disabled){t.render(this._scene.sceneOld,e)}t.render(this._scene.scene,e);this._needsRender=false};e.prototype.dispose=function(){this._scene.clear();for(var e in this._currentProviderDisposers){if(!this._currentProviderDisposers.hasOwnProperty(e)){continue}this._currentProviderDisposers[e]()}for(var e in this._previousProviderDisposers){if(!this._previousProviderDisposers.hasOwnProperty(e)){continue}this._previousProviderDisposers[e]()}this._currentProviderDisposers={};this._previousProviderDisposers={}};e.prototype._getBasicCorners=function(e,t){var r;var n;if(e>t){r=.5;n=.5*e/t}else{r=.5*t/e;n=.5}return[[.5-r,.5-n],[.5+r,.5+n]]};e.prototype._setDisabled=function(e){this._disabled=e.currentNode==null||e.previousNode==null||e.currentNode.pano&&!e.currentNode.fullPano||e.previousNode.pano&&!e.previousNode.fullPano||e.currentNode.fullPano&&!e.previousNode.fullPano};e.prototype._setTextureProvider=function(e,t,r,n,i){var o=this;if(e!==t){return}var a=r.textureCreated$.subscribe(i);var s=r.textureUpdated$.subscribe(function(e){o._needsRender=true});var u=function(){a.unsubscribe();s.unsubscribe();r.dispose()};if(e in n){var c=n[e];c();delete n[e]}n[e]=u};e.prototype._updateCurtain=function(){var e=this._scene.planes;for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=e[t];var n=r.material;if(!!n.uniforms.curtain){n.uniforms.curtain.value=this._curtain}}};e.prototype._updateFrameId=function(e){this._frameId=e};e.prototype._updateImagePlanes=function(e,t){var r=e.currentNode!=null&&this._currentKey!==e.currentNode.key;var n=e.previousNode!=null&&this._previousKey!==e.previousNode.key;var i=this._mode!==t;if(!(r||n||i)){return}this._setDisabled(e);this._needsRender=true;this._mode=t;var o=e.motionless||t===T.SliderMode.Stationary||e.currentNode.pano;if(this.disabled||n){if(this._previousKey in this._previousProviderDisposers){this._previousProviderDisposers[this._previousKey]();delete this._previousProviderDisposers[this._previousKey]}}if(this.disabled){this._scene.setImagePlanesOld({})}else{if(n||i){var a=e.previousNode;this._previousKey=a.key;var s=e.currentTransform.rt.elements;var u=[s[12],s[13],s[14]];var c=e.currentTransform.basicAspect;var l=e.previousTransform.basicAspect;var h=c>l?[1,l/c]:[c/l,1];var p=e.currentNode.rotation;var f=e.currentNode.width;var d=e.currentNode.height;if(a.fullPano){p=e.previousNode.rotation;u=this._spatial.rotate(this._spatial.opticalCenter(e.currentNode.rotation,u).toArray(),p).multiplyScalar(-1).toArray();f=e.previousNode.width;d=e.previousNode.height}var v=new E.Transform(e.currentNode.orientation,f,d,e.currentNode.focal,e.currentNode.scale,a.gpano,p,u,a.image,h);var m=undefined;if(a.fullPano){m=this._factory.createMesh(a,o||e.currentNode.fullPano?v:e.previousTransform)}else{if(o){var g=this._getBasicCorners(c,l),_=g[0],y=_[0],b=_[1],x=g[1],w=x[0],S=x[1];m=this._factory.createFlatMesh(e.previousNode,v,y,w,b,S)}else{m=this._factory.createMesh(e.previousNode,e.previousTransform)}}var M={};M[a.key]=m;this._scene.setImagePlanesOld(M)}}if(r||i){if(this._currentKey in this._currentProviderDisposers){this._currentProviderDisposers[this._currentKey]();delete this._currentProviderDisposers[this._currentKey]}this._currentKey=e.currentNode.key;var C={};if(e.currentNode.fullPano){C[e.currentNode.key]=this._factory.createCurtainMesh(e.currentNode,e.currentTransform)}else if(e.currentNode.pano&&!e.currentNode.fullPano){C[e.currentNode.key]=this._factory.createMesh(e.currentNode,e.currentTransform)}else{if(o){C[e.currentNode.key]=this._factory.createDistortedCurtainMesh(e.currentNode,e.currentTransform)}else{C[e.currentNode.key]=this._factory.createCurtainMesh(e.currentNode,e.currentTransform)}}this._scene.setImagePlanes(C);this._updateCurtain()}};e.prototype._updateTexture=function(e){this._needsRender=true;var t=this._scene.planes;for(var r in t){if(!t.hasOwnProperty(r)){continue}var n=t[r];var i=n.material;var o=i.uniforms.projectorTex.value;i.uniforms.projectorTex.value=null;o.dispose();i.uniforms.projectorTex.value=e}};e.prototype._updateTexturePrev=function(e){this._needsRender=true;var t=this._scene.planesOld;for(var r in t){if(!t.hasOwnProperty(r)){continue}var n=t[r];var i=n.material;var o=i.uniforms.projectorTex.value;i.uniforms.projectorTex.value=null;o.dispose();i.uniforms.projectorTex.value=e}};return e}();r.SliderGLRenderer=n;r.default=n},{"../../Component":291,"../../Geo":294}],360:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.CameraVisualizationMode=void 0;var n;(function(e){e[e["Default"]=0]="Default";e[e["Cluster"]=1]="Cluster";e[e["ConnectedComponent"]=2]="ConnectedComponent";e[e["Sequence"]=3]="Sequence"})(n=r.CameraVisualizationMode||(r.CameraVisualizationMode={}));r.default=n},{}],361:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./CameraVisualizationMode");Object.defineProperty(r,"CameraVisualizationMode",{enumerable:true,get:function(){return n.CameraVisualizationMode}})},{"./CameraVisualizationMode":360}],362:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SpatialDataCache=void 0;var o=e("latlon-geohash");var a=e("pako");var s=e("rxjs");var u=e("rxjs/operators");var c=e("../../Error");var l=e("../../Utils");var n=function(){function e(e){this._graphService=e;this._tiles={};this._cacheRequests={};this._clusterReconstructions={};this._clusterReconstructionTiles={};this._tileClusters={};this._cachingTiles$={};this._cachingClusterReconstructions$={}}e.prototype.cacheClusterReconstructions$=function(t){var r=this;if(!this.hasTile(t)){throw new Error("Cannot cache reconstructions of a non-existing tile.")}if(this.hasClusterReconstructions(t)){throw new Error("Cannot cache reconstructions that already exists.")}if(this.isCachingClusterReconstructions(t)){return this._cachingClusterReconstructions$[t]}var e=this.getTile(t).filter(function(e){return!!e.clusterKey}).map(function(e){return e.clusterKey}).filter(function(e,t,r){return r.indexOf(e)===t});this._tileClusters[t]=e;this._cacheRequests[t]=[];this._cachingClusterReconstructions$[t]=s.from(e).pipe(u.mergeMap(function(e){if(r._hasClusterReconstruction(e)){return s.of(r._getClusterReconstruction(e))}return r._getClusterReconstruction$(e,r._cacheRequests[t]).pipe(u.catchError(function(e){if(e instanceof c.AbortMapillaryError){return s.empty()}console.error(e);return s.empty()}))},6),u.filter(function(){return t in r._tileClusters}),u.tap(function(e){if(!r._hasClusterReconstruction(e.key)){r._clusterReconstructions[e.key]=e}if(!(e.key in r._clusterReconstructionTiles)){r._clusterReconstructionTiles[e.key]=[]}if(r._clusterReconstructionTiles[e.key].indexOf(t)===-1){r._clusterReconstructionTiles[e.key].push(t)}}),u.finalize(function(){if(t in r._cachingClusterReconstructions$){delete r._cachingClusterReconstructions$[t]}if(t in r._cacheRequests){delete r._cacheRequests[t]}}),u.publish(),u.refCount());return this._cachingClusterReconstructions$[t]};e.prototype.cacheTile$=function(r){var n=this;if(r.length!==8){throw new Error("Hash needs to be level 8.")}if(this.hasTile(r)){throw new Error("Cannot cache tile that already exists.")}if(this.isCachingTile(r)){return this._cachingTiles$[r]}var e=o.bounds(r);var t={lat:e.sw.lat,lon:e.sw.lon};var i={lat:e.ne.lat,lon:e.ne.lon};this._cachingTiles$[r]=this._graphService.cacheBoundingBox$(t,i).pipe(u.catchError(function(e){console.error(e);return s.empty()}),u.map(function(e){return e.map(function(e){return n._createNodeData(e)})}),u.filter(function(){return!(r in n._tiles)}),u.tap(function(e){var t;n._tiles[r]=[];(t=n._tiles[r]).push.apply(t,e);delete n._cachingTiles$[r]}),u.finalize(function(){if(r in n._cachingTiles$){delete n._cachingTiles$[r]}}),u.publish(),u.refCount());return this._cachingTiles$[r]};e.prototype.isCachingClusterReconstructions=function(e){return e in this._cachingClusterReconstructions$};e.prototype.isCachingTile=function(e){return e in this._cachingTiles$};e.prototype.hasClusterReconstructions=function(e){if(e in this._cachingClusterReconstructions$||!(e in this._tileClusters)){return false}for(var t=0,r=this._tileClusters[e];t<r.length;t++){var n=r[t];if(!(n in this._clusterReconstructions)){return false}}return true};e.prototype.hasTile=function(e){return!(e in this._cachingTiles$)&&e in this._tiles};e.prototype.getClusterReconstructions=function(e){var t=this;return e in this._tileClusters?this._tileClusters[e].map(function(e){return t._clusterReconstructions[e]}).filter(function(e){return!!e}):[]};e.prototype.getTile=function(e){return e in this._tiles?this._tiles[e]:[]};e.prototype.uncache=function(e){for(var t=0,r=Object.keys(this._cacheRequests);t<r.length;t++){var n=r[t];if(!!e&&e.indexOf(n)!==-1){continue}for(var i=0,o=this._cacheRequests[n];i<o.length;i++){var a=o[i];a.abort()}delete this._cacheRequests[n]}for(var s=0,u=Object.keys(this._tileClusters);s<u.length;s++){var n=u[s];if(!!e&&e.indexOf(n)!==-1){continue}for(var c=0,l=this._tileClusters[n];c<l.length;c++){var h=l[c];if(!(h in this._clusterReconstructionTiles)){continue}var p=this._clusterReconstructionTiles[h].indexOf(n);if(p===-1){continue}this._clusterReconstructionTiles[h].splice(p,1);if(this._clusterReconstructionTiles[h].length>0){continue}delete this._clusterReconstructionTiles[h];delete this._clusterReconstructions[h]}delete this._tileClusters[n]}for(var f=0,d=Object.keys(this._tiles);f<d.length;f++){var n=d[f];if(!!e&&e.indexOf(n)!==-1){continue}delete this._tiles[n]}};e.prototype._createNodeData=function(e){return{alt:e.alt,cameraProjection:e.cameraProjection,clusterKey:e.clusterKey,focal:e.focal,gpano:e.gpano,height:e.height,k1:e.ck1,k2:e.ck2,key:e.key,lat:e.latLon.lat,lon:e.latLon.lon,mergeCC:e.mergeCC,orientation:e.orientation,originalLat:e.originalLatLon.lat,originalLon:e.originalLatLon.lon,rotation:[e.rotation[0],e.rotation[1],e.rotation[2]],scale:e.scale,sequenceKey:e.sequenceKey,width:e.width}};e.prototype._getClusterReconstruction=function(e){return this._clusterReconstructions[e]};e.prototype._getClusterReconstruction$=function(o,e){return s.Observable.create(function(n){var i=new XMLHttpRequest;i.open("GET",l.Urls.clusterReconstruction(o),true);i.responseType="arraybuffer";i.timeout=15e3;i.onload=function(){if(!i.response){n.error(new Error("Cluster reconstruction retreival failed ("+o+")"))}else{var e=a.inflate(i.response,{to:"string"});var t=JSON.parse(e);if(t.length<1){n.error(new Error("No cluster reconstruction exists ("+o+")"))}var r=t[0];r.key=o;n.next(r);n.complete()}};i.onerror=function(){n.error(new Error("Failed to get cluster reconstruction ("+o+")"))};i.ontimeout=function(){n.error(new Error("Cluster reconstruction request timed out ("+o+")"))};i.onabort=function(){n.error(new c.AbortMapillaryError("Cluster reconstruction request was aborted ("+o+")"))};e.push(i);i.send(null)})};e.prototype._hasClusterReconstruction=function(e){return e in this._clusterReconstructions};return e}();r.SpatialDataCache=n;r.default=n},{"../../Error":293,"../../Utils":301,"latlon-geohash":21,pako:23,rxjs:43,"rxjs/operators":241}],363:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.SpatialDataComponent=void 0;var d=e("latlon-geohash");var l=e("rxjs");var h=e("rxjs/operators");var o=e("../../Component");var a=e("../../Geo");var s=e("../../Render");var u=e("../../viewer/PlayService");var p=e("../../state/State");var f=e("./CameraVisualizationMode");var i=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t,r)||this;n._cache=new o.SpatialDataCache(r.graphService);n._scene=new o.SpatialDataScene(n._getDefaultConfiguration());n._viewportCoords=new a.ViewportCoords;n._geoCoords=new a.GeoCoords;return n}e.prototype._activate=function(){var c=this;this._earthControlsSubscription=this._configuration$.pipe(h.map(function(e){return e.earthControls}),h.distinctUntilChanged(),h.withLatestFrom(this._navigator.stateService.state$)).subscribe(function(e){var t=e[0],r=e[1];if(t&&r!==p.default.Earth){c._navigator.stateService.earth()}else if(!t&&r===p.default.Earth){c._navigator.stateService.traverse()}});var e=this._container.renderService.bearing$.pipe(h.map(function(e){var t="";if(e>292.5||e<=67.5){t+="n"}if(e>112.5&&e<=247.5){t+="s"}if(e>22.5&&e<=157.5){t+="e"}if(e>202.5&&e<=337.5){t+="w"}return t}),h.distinctUntilChanged(),h.publishReplay(1),h.refCount());var t=this._navigator.stateService.reference$.pipe(h.tap(function(){c._scene.uncache()}),h.switchMap(function(){return c._navigator.stateService.currentNode$.pipe(h.map(function(e){return d.encode(e.latLon.lat,e.latLon.lon,8)}),h.distinctUntilChanged())}),h.publishReplay(1),h.refCount());var r=l.combineLatest(this._navigator.playService.playing$,this._navigator.playService.speed$).pipe(h.map(function(e){var t=e[0],r=e[1];return t&&r>u.default.sequenceSpeed}),h.distinctUntilChanged(),h.publishReplay(1),h.refCount());var n=l.combineLatest(this._navigator.stateService.state$.pipe(h.map(function(e){return e===p.default.Earth}),h.distinctUntilChanged()),t,r,e).pipe(h.distinctUntilChanged(function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];var a=t[0],s=t[1],u=t[2],c=t[3];if(r!==a){return false}if(r){return n===s&&i===u}return n===s&&i===u&&o===c}),h.concatMap(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];if(t){return n?l.of([r]):l.of(c._adjacentComponent(r,4))}return n?l.of([r,d.neighbours(r)[i]]):l.of(c._computeTiles(r,i))}),h.publish(),h.refCount());var i=n.pipe(h.switchMap(function(e){return l.from(e).pipe(h.mergeMap(function(e){var t=c._cache.hasTile(e)?l.of(c._cache.getTile(e)):c._cache.cacheTile$(e);return l.combineLatest(l.of(e),t)},6))}),h.publish(),h.refCount());this._addTileSubscription=i.pipe(h.withLatestFrom(this._navigator.stateService.reference$)).subscribe(function(e){var t=e[0][0],r=e[1];if(c._scene.hasTile(t)){return}c._scene.addTile(c._computeTileBBox(t,r),t)});this._addNodeSubscription=i.pipe(h.withLatestFrom(this._navigator.stateService.reference$)).subscribe(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];for(var o=0,a=n;o<a.length;o++){var s=a[o];if(c._scene.hasNode(s.key,r)){continue}c._scene.addNode(s,c._createTransform(s,i),c._computeOriginalPosition(s,i),r)}});this._addReconstructionSubscription=i.pipe(h.concatMap(function(e){var t=e[0];var r;if(c._cache.hasClusterReconstructions(t)){r=l.from(c._cache.getClusterReconstructions(t))}else if(c._cache.isCachingClusterReconstructions(t)){r=c._cache.cacheClusterReconstructions$(t).pipe(h.last(null,{}),h.switchMap(function(){return l.from(c._cache.getClusterReconstructions(t))}))}else if(c._cache.hasTile(t)){r=c._cache.cacheClusterReconstructions$(t)}else{r=l.empty()}return l.combineLatest(l.of(t),r)}),h.withLatestFrom(this._navigator.stateService.reference$)).subscribe(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];if(c._scene.hasClusterReconstruction(n.key,r)){return}c._scene.addClusterReconstruction(n,c._computeTranslation(n,i),r)});this._cameraVisibilitySubscription=this._configuration$.pipe(h.map(function(e){return e.camerasVisible}),h.distinctUntilChanged()).subscribe(function(e){c._scene.setCameraVisibility(e)});this._pointVisibilitySubscription=this._configuration$.pipe(h.map(function(e){return e.pointsVisible}),h.distinctUntilChanged()).subscribe(function(e){c._scene.setPointVisibility(e)});this._positionVisibilitySubscription=this._configuration$.pipe(h.map(function(e){return e.positionsVisible}),h.distinctUntilChanged()).subscribe(function(e){c._scene.setPositionVisibility(e)});this._tileVisibilitySubscription=this._configuration$.pipe(h.map(function(e){return e.tilesVisible}),h.distinctUntilChanged()).subscribe(function(e){c._scene.setTileVisibility(e)});this._ccToModeSubscription=this._configuration$.pipe(h.map(function(e){return e.connectedComponents===true?f.default.ConnectedComponent:f.default.Default}),h.distinctUntilChanged()).subscribe(function(e){c.configure({cameraVisualizationMode:e})});this._cameraVisualizationModeSubscription=this._configuration$.pipe(h.map(function(e){return e.cameraVisualizationMode}),h.distinctUntilChanged()).subscribe(function(e){c._scene.setCameraVisualizationMode(e)});this._uncacheSubscription=t.subscribe(function(e){var t=c._adjacentComponent(e,4);c._scene.uncache(t);c._cache.uncache(t)});this._moveSubscription=this._navigator.playService.playing$.pipe(h.switchMap(function(e){return e?l.empty():c._container.mouseService.dblClick$}),h.withLatestFrom(this._container.renderService.renderCamera$),h.switchMap(function(e){var t=e[0],r=e[1];var n=c._container.element;var i=c._viewportCoords.canvasPosition(t,n),o=i[0],a=i[1];var s=c._viewportCoords.canvasToViewport(o,a,n);var u=c._scene.intersectObjects(s,r.perspective);return!!u?c._navigator.moveToKey$(u).pipe(h.catchError(function(){return l.empty()})):l.empty()})).subscribe();this._renderSubscription=this._navigator.stateService.currentState$.pipe(h.map(function(e){var t=c._scene;return{name:c._name,render:{frameId:e.id,needsRender:t.needsRender,render:t.render.bind(t),stage:s.GLRenderStage.Foreground}}})).subscribe(this._container.glRenderer.render$)};e.prototype._deactivate=function(){var t=this;this._cache.uncache();this._scene.uncache();this._addNodeSubscription.unsubscribe();this._addReconstructionSubscription.unsubscribe();this._addTileSubscription.unsubscribe();this._cameraVisibilitySubscription.unsubscribe();this._earthControlsSubscription.unsubscribe();this._moveSubscription.unsubscribe();this._pointVisibilitySubscription.unsubscribe();this._positionVisibilitySubscription.unsubscribe();this._renderSubscription.unsubscribe();this._tileVisibilitySubscription.unsubscribe();this._uncacheSubscription.unsubscribe();this._cameraVisualizationModeSubscription.unsubscribe();this._ccToModeSubscription.unsubscribe();this._navigator.stateService.state$.pipe(h.first()).subscribe(function(e){if(e===p.default.Earth){t._navigator.stateService.traverse()}})};e.prototype._getDefaultConfiguration=function(){return{cameraVisualizationMode:f.default.Default,camerasVisible:false,connectedComponents:false,pointsVisible:true,positionsVisible:false,tilesVisible:false}};e.prototype._adjacentComponent=function(e,t){var r=new Set;r.add(e);this._adjacentComponentRecursive(r,[e],0,t);return this._setToArray(r)};e.prototype._adjacentComponentRecursive=function(e,t,r,n){if(r===n){return}var i=[];for(var o=0,a=t;o<a.length;o++){var s=a[o];var u=d.neighbours(s);for(var c in u){if(!u.hasOwnProperty(c)){continue}i.push(u[c])}}var l=[];for(var h=0,p=i;h<p.length;h++){var f=p[h];if(!e.has(f)){e.add(f);l.push(f)}}this._adjacentComponentRecursive(e,l,r+1,n)};e.prototype._computeOriginalPosition=function(e,t){return this._geoCoords.geodeticToEnu(e.originalLat,e.originalLon,e.alt,t.lat,t.lon,t.alt)};e.prototype._computeTileBBox=function(e,t){var r=d.bounds(e);var n=this._geoCoords.geodeticToEnu(r.sw.lat,r.sw.lon,0,t.lat,t.lon,t.alt);var i=this._geoCoords.geodeticToEnu(r.ne.lat,r.ne.lon,0,t.lat,t.lon,t.alt);return[n,i]};e.prototype._createTransform=function(e,t){var r=a.Geo.computeTranslation({alt:e.alt,lat:e.lat,lon:e.lon},e.rotation,t);var n=new a.Transform(e.orientation,e.width,e.height,e.focal,e.scale,e.gpano,e.rotation,r,undefined,undefined,e.k1,e.k2,e.cameraProjection);return n};e.prototype._computeTiles=function(e,t){var r=new Set;var n=["n","ne","e","se","s","sw","w","nw"];this._computeTilesRecursive(r,e,t,n,0,2);return this._setToArray(r)};e.prototype._computeTilesRecursive=function(e,t,r,n,i,o){e.add(t);if(i===o){return}var a=d.neighbours(t);var s=n.indexOf(r);var u=n.length;var c=[a[n[this._modulo(s-1,u)]],a[r],a[n[this._modulo(s+1,u)]]];for(var l=0,h=c;l<h.length;l++){var p=h[l];this._computeTilesRecursive(e,p,r,n,i+1,o)}};e.prototype._computeTranslation=function(e,t){return this._geoCoords.geodeticToEnu(e.reference_lla.latitude,e.reference_lla.longitude,e.reference_lla.altitude,t.lat,t.lon,t.alt)};e.prototype._modulo=function(e,t){return(e%t+t)%t};e.prototype._setToArray=function(e){var t=[];e.forEach(function(e){t.push(e)});return t};e.componentName="spatialData";return e}(o.Component);r.SpatialDataComponent=i;o.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Geo":294,"../../Render":297,"../../state/State":449,"../../viewer/PlayService":481,"./CameraVisualizationMode":360,"latlon-geohash":21,rxjs:43,"rxjs/operators":241}],364:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SpatialDataScene=void 0;var d=e("three");var h=e("./CameraVisualizationMode");var n=function(){function e(e,t,r){this._scene=!!t?t:new d.Scene;this._raycaster=!!r?r:new d.Raycaster(undefined,undefined,.8);this._cameraColors={};this._needsRender=false;this._interactiveObjects=[];this._nodes={};this._tiles={};this._tileClusterReconstructions={};this._clusterReconstructions={};this._cameraVisualizationMode=!!e.cameraVisualizationMode?e.cameraVisualizationMode:h.default.Default;if(this._cameraVisualizationMode===h.default.Default&&e.connectedComponents===true){this._cameraVisualizationMode=h.default.ConnectedComponent}this._camerasVisible=e.camerasVisible;this._pointsVisible=e.pointsVisible;this._positionsVisible=e.positionsVisible;this._tilesVisible=e.tilesVisible}Object.defineProperty(e.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:false,configurable:true});e.prototype.addClusterReconstruction=function(e,t,r){if(this.hasClusterReconstruction(e.key,r)){return}var n=e.key;if(!(n in this._clusterReconstructions)){this._clusterReconstructions[n]={points:new d.Object3D,tiles:[]};this._clusterReconstructions[n].points.visible=this._pointsVisible;this._clusterReconstructions[n].points.add(this._createClusterPoints(e,t));this._scene.add(this._clusterReconstructions[n].points)}if(this._clusterReconstructions[n].tiles.indexOf(r)===-1){this._clusterReconstructions[n].tiles.push(r)}if(!(r in this._tileClusterReconstructions)){this._tileClusterReconstructions[r]={keys:[]}}if(this._tileClusterReconstructions[r].keys.indexOf(n)===-1){this._tileClusterReconstructions[r].keys.push(n)}this._needsRender=true};e.prototype.addNode=function(e,t,r,n){var i=e.key;var o=e.clusterKey;var a=e.sequenceKey;var s=!!e.mergeCC?e.mergeCC.toString():"";if(this.hasNode(i,n)){return}if(!(n in this._nodes)){this._nodes[n]={cameraKeys:{},cameras:new d.Object3D,clusters:{},connectedComponents:{},keys:[],positions:new d.Object3D,sequences:{}};this._nodes[n].cameras.visible=this._camerasVisible;this._nodes[n].positions.visible=this._positionsVisible;this._scene.add(this._nodes[n].cameras,this._nodes[n].positions)}if(!(s in this._nodes[n].connectedComponents)){this._nodes[n].connectedComponents[s]=[]}if(!(o in this._nodes[n].clusters)){this._nodes[n].clusters[o]=[]}if(!(a in this._nodes[n].sequences)){this._nodes[n].sequences[a]=[]}var u=this._createCamera(t);this._nodes[n].cameras.add(u);for(var c=0,l=u.children;c<l.length;c++){var h=l[c];this._nodes[n].cameraKeys[h.uuid]=i;this._interactiveObjects.push(h)}this._nodes[n].connectedComponents[s].push(u);this._nodes[n].clusters[o].push(u);this._nodes[n].sequences[a].push(u);var p=this._getId(o,s,a,this._cameraVisualizationMode);var f=this._getColor(p,this._cameraVisualizationMode);this._setCameraColor(f,u);this._nodes[n].positions.add(this._createPosition(t,r));this._nodes[n].keys.push(i);this._needsRender=true};e.prototype.addTile=function(e,t){if(this.hasTile(t)){return}var r=e[0];var n=e[1];var i=new d.Geometry;i.vertices.push((new d.Vector3).fromArray(r),new d.Vector3(r[0],n[1],(r[2]+n[2])/2),(new d.Vector3).fromArray(n),new d.Vector3(n[0],r[1],(r[2]+n[2])/2),(new d.Vector3).fromArray(r));var o=new d.Line(i,new d.LineBasicMaterial);this._tiles[t]=new d.Object3D;this._tiles[t].visible=this._tilesVisible;this._tiles[t].add(o);this._scene.add(this._tiles[t]);this._needsRender=true};e.prototype.uncache=function(e){for(var t=0,r=Object.keys(this._tileClusterReconstructions);t<r.length;t++){var n=r[t];if(!!e&&e.indexOf(n)!==-1){continue}this._disposeReconstruction(n)}for(var i=0,o=Object.keys(this._nodes);i<o.length;i++){var n=o[i];if(!!e&&e.indexOf(n)!==-1){continue}this._disposeNodes(n)}for(var a=0,s=Object.keys(this._tiles);a<s.length;a++){var n=s[a];if(!!e&&e.indexOf(n)!==-1){continue}this._disposeTile(n)}this._needsRender=true};e.prototype.hasClusterReconstruction=function(e,t){return e in this._clusterReconstructions&&this._clusterReconstructions[e].tiles.indexOf(t)!==-1};e.prototype.hasTile=function(e){return e in this._tiles};e.prototype.hasNode=function(e,t){return t in this._nodes&&this._nodes[t].keys.indexOf(e)!==-1};e.prototype.intersectObjects=function(e,t){var r=e[0],n=e[1];if(!this._camerasVisible){return null}this._raycaster.setFromCamera(new d.Vector2(r,n),t);var i=this._raycaster.intersectObjects(this._interactiveObjects);for(var o=0,a=i;o<a.length;o++){var s=a[o];for(var u in this._nodes){if(!this._nodes.hasOwnProperty(u)){continue}if(s.object.uuid in this._nodes[u].cameraKeys){return this._nodes[u].cameraKeys[s.object.uuid]}}}return null};e.prototype.setCameraVisibility=function(e){if(e===this._camerasVisible){return}for(var t in this._nodes){if(!this._nodes.hasOwnProperty(t)){continue}this._nodes[t].cameras.visible=e}this._camerasVisible=e;this._needsRender=true};e.prototype.setPointVisibility=function(e){if(e===this._pointsVisible){return}for(var t in this._clusterReconstructions){if(!this._clusterReconstructions.hasOwnProperty(t)){continue}this._clusterReconstructions[t].points.visible=e}this._pointsVisible=e;this._needsRender=true};e.prototype.setPositionVisibility=function(e){if(e===this._positionsVisible){return}for(var t in this._nodes){if(!this._nodes.hasOwnProperty(t)){continue}this._nodes[t].positions.visible=e}this._positionsVisible=e;this._needsRender=true};e.prototype.setTileVisibility=function(e){if(e===this._tilesVisible){return}for(var t in this._tiles){if(!this._tiles.hasOwnProperty(t)){continue}this._tiles[t].visible=e}this._tilesVisible=e;this._needsRender=true};e.prototype.setCameraVisualizationMode=function(e){if(e===this._cameraVisualizationMode){return}for(var t in this._nodes){if(!this._nodes.hasOwnProperty(t)){continue}var r=undefined;if(e===h.default.Cluster){r=this._nodes[t].clusters}else if(e===h.default.ConnectedComponent){r=this._nodes[t].connectedComponents}else if(e===h.default.Sequence){r=this._nodes[t].sequences}else{for(var n=0,i=this._nodes[t].cameras.children;n<i.length;n++){var o=i[n];var a=this._getColor("",e);this._setCameraColor(a,o)}continue}for(var s in r){if(!r.hasOwnProperty(s)){continue}var a=this._getColor(s,e);for(var u=0,c=r[s];u<c.length;u++){var l=c[u];this._setCameraColor(a,l)}}}this._cameraVisualizationMode=e;this._needsRender=true};e.prototype.render=function(e,t){t.render(this._scene,e);this._needsRender=false};e.prototype._arrayToFloatArray=function(e,t){var r=e.length;var n=new Float32Array(r*t);for(var i=0;i<r;i++){var o=e[i];var a=3*i;n[a+0]=o[0];n[a+1]=o[1];n[a+2]=o[2]}return n};e.prototype._createAxis=function(e){var t=e.unprojectBasic([.5,0],.22);var r=e.unprojectBasic([.5,1],.16);var n=new d.BufferGeometry;n.setAttribute("position",new d.BufferAttribute(this._arrayToFloatArray([t,r],3),3));return new d.Line(n,new d.LineBasicMaterial)};e.prototype._createCamera=function(e){return!!e.gpano?this._createPanoCamera(e):this._createPrespectiveCamera(e)};e.prototype._createDiagonals=function(e,t){var r=e.unprojectBasic([0,0],0,true);var n=e.unprojectBasic([0,0],t,true);var i=e.unprojectBasic([1,0],t,true);var o=e.unprojectBasic([1,1],t,true);var a=e.unprojectBasic([0,1],t,true);var s=[r,n,r,i,r,o,r,a];var u=new d.BufferGeometry;u.setAttribute("position",new d.BufferAttribute(this._arrayToFloatArray(s,3),3));return new d.LineSegments(u,new d.LineBasicMaterial)};e.prototype._createFrame=function(t,r){var e=[];e.push.apply(e,this._subsample([0,1],[0,0],20));e.push.apply(e,this._subsample([0,0],[1,0],20));e.push.apply(e,this._subsample([1,0],[1,1],20));var n=e.map(function(e){return t.unprojectBasic(e,r,true)});var i=new d.BufferGeometry;i.setAttribute("position",new d.BufferAttribute(this._arrayToFloatArray(n,3),3));return new d.Line(i,new d.LineBasicMaterial)};e.prototype._createLatitude=function(e,t,r){var n=new Float32Array((t+1)*3);for(var i=0;i<=t;i++){var o=r.unprojectBasic([i/t,e],.16);var a=3*i;n[a+0]=o[0];n[a+1]=o[1];n[a+2]=o[2]}var s=new d.BufferGeometry;s.setAttribute("position",new d.BufferAttribute(n,3));return new d.Line(s,new d.LineBasicMaterial)};e.prototype._createLongitude=function(e,t,r){var n=new Float32Array((t+1)*3);for(var i=0;i<=t;i++){var o=r.unprojectBasic([e,i/t],.16);var a=3*i;n[a+0]=o[0];n[a+1]=o[1];n[a+2]=o[2]}var s=new d.BufferGeometry;s.setAttribute("position",new d.BufferAttribute(n,3));return new d.Line(s,new d.LineBasicMaterial)};e.prototype._createPanoCamera=function(e){var t=new d.Object3D;t.children.push(this._createAxis(e));t.children.push(this._createLatitude(.5,10,e));t.children.push(this._createLongitude(0,6,e));t.children.push(this._createLongitude(.25,6,e));t.children.push(this._createLongitude(.5,6,e));t.children.push(this._createLongitude(.75,6,e));return t};e.prototype._createClusterPoints=function(t,e){var r=Object.keys(t.points).map(function(e){return t.points[e]});var n=r.length;var i=new Float32Array(n*3);var o=new Float32Array(n*3);for(var a=0;a<n;a++){var s=3*a;var u=r[a].coordinates;var c=new d.Vector3(u[0],u[1],u[2]).add((new d.Vector3).fromArray(e));i[s+0]=c.x;i[s+1]=c.y;i[s+2]=c.z;var l=r[a].color;o[s+0]=l[0]/255;o[s+1]=l[1]/255;o[s+2]=l[2]/255}var h=new d.BufferGeometry;h.setAttribute("position",new d.BufferAttribute(i,3));h.setAttribute("color",new d.BufferAttribute(o,3));var p=new d.PointsMaterial({size:.1,vertexColors:true});return new d.Points(h,p)};e.prototype._createPosition=function(e,t){var r=e.unprojectBasic([0,0],0);var n=[t,r];var i=new d.BufferGeometry;i.setAttribute("position",new d.BufferAttribute(this._arrayToFloatArray(n,3),3));return new d.Line(i,new d.LineBasicMaterial({color:new d.Color(1,0,0)}))};e.prototype._createPrespectiveCamera=function(e){var t=.2;var r=new d.Object3D;r.children.push(this._createDiagonals(e,t));r.children.push(this._createFrame(e,t));return r};e.prototype._disposeCameras=function(e){var t=this._nodes[e].cameras;for(var r=0,n=t.children.slice();r<n.length;r++){var i=n[r];for(var o=0,a=i.children;o<a.length;o++){var s=a[o];s.geometry.dispose();s.material.dispose();var u=this._interactiveObjects.indexOf(s);if(u!==-1){this._interactiveObjects.splice(u,1)}else{console.warn("Object does not exist ("+s.id+") for "+e)}}t.remove(i)}this._scene.remove(t)};e.prototype._disposePoints=function(e){for(var t=0,r=this._tileClusterReconstructions[e].keys;t<r.length;t++){var n=r[t];if(!(n in this._clusterReconstructions)){continue}var i=this._clusterReconstructions[n].tiles.indexOf(e);if(i===-1){continue}this._clusterReconstructions[n].tiles.splice(i,1);if(this._clusterReconstructions[n].tiles.length>0){continue}for(var o=0,a=this._clusterReconstructions[n].points.children.slice();o<a.length;o++){var s=a[o];s.geometry.dispose();s.material.dispose()}this._scene.remove(this._clusterReconstructions[n].points);delete this._clusterReconstructions[n]}};e.prototype._disposePositions=function(e){var t=this._nodes[e].positions;for(var r=0,n=t.children.slice();r<n.length;r++){var i=n[r];i.geometry.dispose();i.material.dispose();t.remove(i)}this._scene.remove(t)};e.prototype._disposeNodes=function(e){this._disposeCameras(e);this._disposePositions(e);delete this._nodes[e]};e.prototype._disposeReconstruction=function(e){this._disposePoints(e);delete this._tileClusterReconstructions[e]};e.prototype._disposeTile=function(e){var t=this._tiles[e];for(var r=0,n=t.children.slice();r<n.length;r++){var i=n[r];i.geometry.dispose();i.material.dispose();t.remove(i)}this._scene.remove(t);delete this._tiles[e]};e.prototype._getColor=function(e,t){return t!==h.default.Default&&e.length>0?this._getCameraColor(e):"#FFFFFF"};e.prototype._getCameraColor=function(e){if(!(e in this._cameraColors)){this._cameraColors[e]=this._randomColor()}return this._cameraColors[e]};e.prototype._getId=function(e,t,r,n){switch(n){case h.default.Cluster:return e;case h.default.ConnectedComponent:return t;case h.default.Sequence:return r;default:return""}};e.prototype._interpolate=function(e,t,r){return e+r*(t-e)};e.prototype._randomColor=function(){return"hsl("+Math.floor(360*Math.random())+", 100%, 65%)"};e.prototype._setCameraColor=function(e,t){for(var r=0,n=t.children;r<n.length;r++){var i=n[r];i.material.color=new d.Color(e)}};e.prototype._subsample=function(e,t,r){if(r<1){return[e,t]}var n=[];for(var i=0;i<=r+1;i++){var o=[];for(var a=0;a<3;a++){o.push(this._interpolate(e[a],t[a],i/(r+1)))}n.push(o)}return n};return e}();r.SpatialDataScene=n;r.default=n},{"./CameraVisualizationMode":360,three:242}],365:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],366:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./error/GeometryTagError");Object.defineProperty(r,"GeometryTagError",{enumerable:true,get:function(){return n.GeometryTagError}});var i=e("./geometry/PointGeometry");Object.defineProperty(r,"PointGeometry",{enumerable:true,get:function(){return i.PointGeometry}});var o=e("./geometry/PointsGeometry");Object.defineProperty(r,"PointsGeometry",{enumerable:true,get:function(){return o.PointsGeometry}});var a=e("./geometry/RectGeometry");Object.defineProperty(r,"RectGeometry",{enumerable:true,get:function(){return a.RectGeometry}});var s=e("./geometry/PolygonGeometry");Object.defineProperty(r,"PolygonGeometry",{enumerable:true,get:function(){return s.PolygonGeometry}});var u=e("./tag/OutlineTag");Object.defineProperty(r,"OutlineTag",{enumerable:true,get:function(){return u.OutlineTag}});var c=e("./tag/ExtremePointTag");Object.defineProperty(r,"ExtremePointTag",{enumerable:true,get:function(){return c.ExtremePointTag}});var l=e("./tag/SpotTag");Object.defineProperty(r,"SpotTag",{enumerable:true,get:function(){return l.SpotTag}});var h=e("./tag/TagDomain");Object.defineProperty(r,"TagDomain",{enumerable:true,get:function(){return h.TagDomain}});var p=e("./TagComponent");Object.defineProperty(r,"TagComponent",{enumerable:true,get:function(){return p.TagComponent}});var f=e("./TagMode");Object.defineProperty(r,"TagMode",{enumerable:true,get:function(){return f.TagMode}})},{"./TagComponent":367,"./TagMode":370,"./error/GeometryTagError":374,"./geometry/PointGeometry":376,"./geometry/PointsGeometry":377,"./geometry/PolygonGeometry":378,"./geometry/RectGeometry":379,"./tag/ExtremePointTag":394,"./tag/OutlineTag":398,"./tag/SpotTag":401,"./tag/TagDomain":403}],367:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.TagComponent=void 0;var s=e("rxjs");var u=e("rxjs/operators");var a=e("when");var c=e("../../Component");var l=e("../../Geo");var h=e("../../Render");var i=function(i){n(o,i);function o(e,t,r){var n=i.call(this,e,t,r)||this;n._tagDomRenderer=new c.TagDOMRenderer;n._tagScene=new c.TagScene;n._tagSet=new c.TagSet;n._tagCreator=new c.TagCreator(n,r);n._viewportCoords=new l.ViewportCoords;n._createHandlers={CreatePoint:new c.CreatePointHandler(n,t,r,n._viewportCoords,n._tagCreator),CreatePoints:new c.CreatePointsHandler(n,t,r,n._viewportCoords,n._tagCreator),CreatePolygon:new c.CreatePolygonHandler(n,t,r,n._viewportCoords,n._tagCreator),CreateRect:new c.CreateRectHandler(n,t,r,n._viewportCoords,n._tagCreator),CreateRectDrag:new c.CreateRectDragHandler(n,t,r,n._viewportCoords,n._tagCreator),Default:undefined};n._editVertexHandler=new c.EditVertexHandler(n,t,r,n._viewportCoords,n._tagSet);n._renderTags$=n._tagSet.changed$.pipe(u.map(function(e){var t=e.getAll();t.sort(function(e,t){var r=e.tag.id;var n=t.tag.id;if(r<n){return-1}if(r>n){return 1}return 0});return t}),u.share());n._tagChanged$=n._renderTags$.pipe(u.switchMap(function(e){return s.from(e).pipe(u.mergeMap(function(e){return s.merge(e.tag.changed$,e.tag.geometryChanged$)}))}),u.share());n._renderTagGLChanged$=n._renderTags$.pipe(u.switchMap(function(e){return s.from(e).pipe(u.mergeMap(function(e){return e.glObjectsChanged$}))}),u.share());n._createGeometryChanged$=n._tagCreator.tag$.pipe(u.switchMap(function(e){return e!=null?e.geometryChanged$:s.empty()}),u.share());n._createGLObjectsChanged$=n._tagCreator.tag$.pipe(u.switchMap(function(e){return e!=null?e.glObjectsChanged$:s.empty()}),u.share());n._creatingConfiguration$=n._configuration$.pipe(u.distinctUntilChanged(function(e,t){return e.mode===t.mode},function(e){return{createColor:e.createColor,mode:e.mode}}),u.publishReplay(1),u.refCount());n._creatingConfiguration$.subscribe(function(e){n.fire(o.modechanged,e.mode)});return n}o.prototype.add=function(r){var n=this;if(this._activated){this._navigator.stateService.currentTransform$.pipe(u.first()).subscribe(function(e){n._tagSet.add(r,e);var t=r.map(function(e){return n._tagSet.get(e.id)});n._tagScene.add(t)})}else{this._tagSet.addDeactivated(r)}};o.prototype.calculateRect=function(n){var e=this;return a.promise(function(t,r){e._navigator.stateService.currentTransform$.pipe(u.first(),u.map(function(e){return n.getRect2d(e)})).subscribe(function(e){t(e)},function(e){r(e)})})};o.prototype.create=function(){this._tagCreator.replayedTag$.pipe(u.first(),u.filter(function(e){return!!e})).subscribe(function(e){e.create()})};o.prototype.changeMode=function(e){this.configure({mode:e})};o.prototype.get=function(e){if(this._activated){var t=this._tagSet.get(e);return t!==undefined?t.tag:undefined}else{return this._tagSet.getDeactivated(e)}};o.prototype.getAll=function(){if(this.activated){return this._tagSet.getAll().map(function(e){return e.tag})}else{return this._tagSet.getAllDeactivated()}};o.prototype.getTagIdsAt=function(n){var i=this;return a.promise(function(t,r){i._container.renderService.renderCamera$.pipe(u.first(),u.map(function(e){var t=i._viewportCoords.canvasToViewport(n[0],n[1],i._container.element);var r=i._tagScene.intersectObjects(t,e.perspective);return r})).subscribe(function(e){t(e)},function(e){r(e)})})};o.prototype.has=function(e){return this._activated?this._tagSet.has(e):this._tagSet.hasDeactivated(e)};o.prototype.remove=function(e){if(this._activated){this._tagSet.remove(e);this._tagScene.remove(e)}else{this._tagSet.removeDeactivated(e)}};o.prototype.removeAll=function(){if(this._activated){this._tagSet.removeAll();this._tagScene.removeAll()}else{this._tagSet.removeAllDeactivated()}};o.prototype._activate=function(){var a=this;this._editVertexHandler.enable();var e=s.from(Object.keys(this._createHandlers)).pipe(u.map(function(e){return a._createHandlers[e]}),u.filter(function(e){return!!e}),u.mergeMap(function(e){return e.geometryCreated$}),u.share());this._fireGeometryCreatedSubscription=e.subscribe(function(e){a.fire(o.geometrycreated,e)});this._fireCreateGeometryEventSubscription=this._tagCreator.tag$.pipe(u.skipWhile(function(e){return e==null}),u.distinctUntilChanged()).subscribe(function(e){var t=e!=null?o.creategeometrystart:o.creategeometryend;a.fire(t,a)});this._handlerStopCreateSubscription=e.subscribe(function(){a.changeMode(c.TagMode.Default)});this._handlerEnablerSubscription=this._creatingConfiguration$.subscribe(function(e){a._disableCreateHandlers();var t=c.TagMode[e.mode];var r=a._createHandlers[t];if(!!r){r.enable()}});this._fireTagsChangedSubscription=this._renderTags$.subscribe(function(){a.fire(o.tagschanged,a)});this._stopCreateSubscription=this._tagCreator.tag$.pipe(u.switchMap(function(e){return e!=null?e.aborted$.pipe(u.map(function(){return null})):s.empty()})).subscribe(function(){a.changeMode(c.TagMode.Default)});this._setGLCreateTagSubscription=this._tagCreator.tag$.subscribe(function(e){if(a._tagScene.hasCreateTag()){a._tagScene.removeCreateTag()}if(e!=null){a._tagScene.addCreateTag(e)}});this._createGLObjectsChangedSubscription=this._createGLObjectsChanged$.subscribe(function(e){a._tagScene.updateCreateTagObjects(e)});this._updateGLObjectsSubscription=this._renderTagGLChanged$.subscribe(function(e){a._tagScene.updateObjects(e)});this._updateTagSceneSubscription=this._tagChanged$.subscribe(function(){a._tagScene.update()});this._domSubscription=s.combineLatest(this._renderTags$.pipe(u.startWith([]),u.tap(function(){a._container.domRenderer.render$.next({name:a._name,vnode:a._tagDomRenderer.clear()})})),this._container.renderService.renderCamera$,this._container.spriteService.spriteAtlas$,this._container.renderService.size$,this._tagChanged$.pipe(u.startWith(null)),s.merge(this._tagCreator.tag$,this._createGeometryChanged$).pipe(u.startWith(null))).pipe(u.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[5];return{name:a._name,vnode:a._tagDomRenderer.render(t,o,n,r.perspective,i)}})).subscribe(this._container.domRenderer.render$);this._glSubscription=this._navigator.stateService.currentState$.pipe(u.map(function(e){var t=a._tagScene;return{name:a._name,render:{frameId:e.id,needsRender:t.needsRender,render:t.render.bind(t),stage:h.GLRenderStage.Foreground}}})).subscribe(this._container.glRenderer.render$);this._navigator.stateService.currentTransform$.pipe(u.first()).subscribe(function(e){a._tagSet.activate(e);a._tagScene.add(a._tagSet.getAll())})};o.prototype._deactivate=function(){this._editVertexHandler.disable();this._disableCreateHandlers();this._tagScene.clear();this._tagSet.deactivate();this._tagCreator.delete$.next(null);this._updateGLObjectsSubscription.unsubscribe();this._updateTagSceneSubscription.unsubscribe();this._stopCreateSubscription.unsubscribe();this._setGLCreateTagSubscription.unsubscribe();this._createGLObjectsChangedSubscription.unsubscribe();this._domSubscription.unsubscribe();this._glSubscription.unsubscribe();this._fireCreateGeometryEventSubscription.unsubscribe();this._fireGeometryCreatedSubscription.unsubscribe();this._fireTagsChangedSubscription.unsubscribe();this._handlerStopCreateSubscription.unsubscribe();this._handlerEnablerSubscription.unsubscribe();this._container.element.classList.remove("component-tag-create")};o.prototype._getDefaultConfiguration=function(){return{createColor:16777215,indicatePointsCompleter:true,mode:c.TagMode.Default}};o.prototype._disableCreateHandlers=function(){var e=this._createHandlers;for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=e[t];if(!!r){r.disable()}}};o.componentName="tag";o.creategeometryend="creategeometryend";o.creategeometrystart="creategeometrystart";o.modechanged="modechanged";o.geometrycreated="geometrycreated";o.tagschanged="tagschanged";return o}(c.Component);r.TagComponent=i;c.ComponentService.register(i);r.default=i},{"../../Component":291,"../../Geo":294,"../../Render":297,rxjs:43,"rxjs/operators":241,when:288}],368:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagCreator=void 0;var n=e("rxjs/operators");var i=e("rxjs");var o=e("../../Component");var a=function(){function e(e,t){this._component=e;this._navigator=t;this._tagOperation$=new i.Subject;this._createPoints$=new i.Subject;this._createPolygon$=new i.Subject;this._createRect$=new i.Subject;this._delete$=new i.Subject;this._tag$=this._tagOperation$.pipe(n.scan(function(e,t){return t(e)},null),n.share());this._replayedTag$=this._tag$.pipe(n.publishReplay(1),n.refCount());this._replayedTag$.subscribe();this._createPoints$.pipe(n.withLatestFrom(this._component.configuration$,this._navigator.stateService.currentTransform$),n.map(function(e){var t=e[0],r=e[1],n=e[2];return function(){var e=new o.PointsGeometry([[t[0],t[1]],[t[0],t[1]]]);return new o.ExtremePointCreateTag(e,{color:r.createColor,indicateCompleter:r.indicatePointsCompleter},n)}})).subscribe(this._tagOperation$);this._createRect$.pipe(n.withLatestFrom(this._component.configuration$,this._navigator.stateService.currentTransform$),n.map(function(e){var t=e[0],r=e[1],n=e[2];return function(){var e=new o.RectGeometry([t[0],t[1],t[0],t[1]]);return new o.OutlineCreateTag(e,{color:r.createColor},n)}})).subscribe(this._tagOperation$);this._createPolygon$.pipe(n.withLatestFrom(this._component.configuration$,this._navigator.stateService.currentTransform$),n.map(function(e){var t=e[0],r=e[1],n=e[2];return function(){var e=new o.PolygonGeometry([[t[0],t[1]],[t[0],t[1]],[t[0],t[1]]]);return new o.OutlineCreateTag(e,{color:r.createColor},n)}})).subscribe(this._tagOperation$);this._delete$.pipe(n.map(function(){return function(){return null}})).subscribe(this._tagOperation$)}Object.defineProperty(e.prototype,"createRect$",{get:function(){return this._createRect$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"createPolygon$",{get:function(){return this._createPolygon$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"createPoints$",{get:function(){return this._createPoints$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"delete$",{get:function(){return this._delete$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"tag$",{get:function(){return this._tag$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"replayedTag$",{get:function(){return this._replayedTag$},enumerable:false,configurable:true});return e}();r.TagCreator=a;r.default=a},{"../../Component":291,rxjs:43,"rxjs/operators":241}],369:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagDOMRenderer=void 0;var c=e("virtual-dom");var n=function(){function e(){}e.prototype.render=function(e,t,r,n,i){var o=[];for(var a=0,s=e;a<s.length;a++){var u=s[a];o=o.concat(u.getDOMObjects(r,n,i))}if(t!=null){o=o.concat(t.getDOMObjects(n,i))}return c.h("div.TagContainer",{},o)};e.prototype.clear=function(){return c.h("div",{},[])};return e}();r.TagDOMRenderer=n},{"virtual-dom":247}],370:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagMode=void 0;var n;(function(e){e[e["Default"]=0]="Default";e[e["CreatePoint"]=1]="CreatePoint";e[e["CreatePoints"]=2]="CreatePoints";e[e["CreatePolygon"]=3]="CreatePolygon";e[e["CreateRect"]=4]="CreateRect";e[e["CreateRectDrag"]=5]="CreateRectDrag"})(n=r.TagMode||(r.TagMode={}));r.default=n},{}],371:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagOperation=void 0;var n;(function(e){e[e["None"]=0]="None";e[e["Centroid"]=1]="Centroid";e[e["Vertex"]=2]="Vertex"})(n=r.TagOperation||(r.TagOperation={}));r.default=n},{}],372:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagScene=void 0;var c=e("three");var n=function(){function e(e,t){this._createTag=null;this._needsRender=false;this._raycaster=!!t?t:new c.Raycaster;this._scene=!!e?e:new c.Scene;this._objectTags={};this._retrievableObjects=[];this._tags={}}Object.defineProperty(e.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:false,configurable:true});e.prototype.add=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n.tag.id in this._tags){this._remove(n.tag.id)}this._add(n)}this._needsRender=true};e.prototype.addCreateTag=function(e){for(var t=0,r=e.glObjects;t<r.length;t++){var n=r[t];this._scene.add(n)}this._createTag={tag:e,objects:e.glObjects};this._needsRender=true};e.prototype.clear=function(){for(var e=0,t=Object.keys(this._tags);e<t.length;e++){var r=t[e];this._remove(r)}this._needsRender=false};e.prototype.get=function(e){return this.has(e)?this._tags[e].tag:undefined};e.prototype.has=function(e){return e in this._tags};e.prototype.hasCreateTag=function(){return this._createTag!=null};e.prototype.intersectObjects=function(e,t){var r=e[0],n=e[1];this._raycaster.setFromCamera(new c.Vector2(r,n),t);var i=this._raycaster.intersectObjects(this._retrievableObjects);var o=[];for(var a=0,s=i;a<s.length;a++){var u=s[a];if(u.object.uuid in this._objectTags){o.push(this._objectTags[u.object.uuid])}}return o};e.prototype.remove=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._remove(n)}this._needsRender=true};e.prototype.removeAll=function(){for(var e=0,t=Object.keys(this._tags);e<t.length;e++){var r=t[e];this._remove(r)}this._needsRender=true};e.prototype.removeCreateTag=function(){if(this._createTag==null){return}for(var e=0,t=this._createTag.objects;e<t.length;e++){var r=t[e];this._scene.remove(r)}this._createTag.tag.dispose();this._createTag=null;this._needsRender=true};e.prototype.render=function(e,t){t.render(this._scene,e);this._needsRender=false};e.prototype.update=function(){this._needsRender=true};e.prototype.updateCreateTagObjects=function(e){if(this._createTag.tag!==e){throw new Error("Create tags do not have the same reference.")}for(var t=0,r=this._createTag.objects;t<r.length;t++){var n=r[t];this._scene.remove(n)}for(var i=0,o=e.glObjects;i<o.length;i++){var n=o[i];this._scene.add(n)}this._createTag.objects=e.glObjects;this._needsRender=true};e.prototype.updateObjects=function(e){var t=e.tag.id;if(this._tags[t].tag!==e){throw new Error("Tags do not have the same reference.")}var r=this._tags[t];this._removeObjects(r);delete this._tags[t];this._add(e);this._needsRender=true};e.prototype._add=function(e){var t=e.tag.id;var r={tag:e,objects:[],retrievableObjects:[]};this._tags[t]=r;for(var n=0,i=e.getGLObjects();n<i.length;n++){var o=i[n];r.objects.push(o);this._scene.add(o)}for(var a=0,s=e.getRetrievableObjects();a<s.length;a++){var u=s[a];r.retrievableObjects.push(u);this._retrievableObjects.push(u);this._objectTags[u.uuid]=e.tag.id}};e.prototype._remove=function(e){var t=this._tags[e];this._removeObjects(t);t.tag.dispose();delete this._tags[e]};e.prototype._removeObjects=function(e){for(var t=0,r=e.objects;t<r.length;t++){var n=r[t];this._scene.remove(n)}for(var i=0,o=e.retrievableObjects;i<o.length;i++){var a=o[i];var s=this._retrievableObjects.indexOf(a);if(s!==-1){this._retrievableObjects.splice(s,1)}}};return e}();r.TagScene=n;r.default=n},{three:242}],373:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagSet=void 0;var n=e("rxjs");var i=e("../../Component");var o=e("./tag/ExtremePointTag");var a=e("./tag/ExtremePointRenderTag");var s=function(){function e(){this._active=false;this._hash={};this._hashDeactivated={};this._notifyChanged$=new n.Subject}Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"changed$",{get:function(){return this._notifyChanged$},enumerable:false,configurable:true});e.prototype.activate=function(e){if(this._active){return}for(var t in this._hashDeactivated){if(!this._hashDeactivated.hasOwnProperty(t)){continue}var r=this._hashDeactivated[t];this._add(r,e)}this._hashDeactivated={};this._active=true;this._notifyChanged$.next(this)};e.prototype.deactivate=function(){if(!this._active){return}for(var e in this._hash){if(!this._hash.hasOwnProperty(e)){continue}this._hashDeactivated[e]=this._hash[e].tag}this._hash={};this._active=false};e.prototype.add=function(e,t){this._assertActivationState(true);for(var r=0,n=e;r<n.length;r++){var i=n[r];this._add(i,t)}this._notifyChanged$.next(this)};e.prototype.addDeactivated=function(e){this._assertActivationState(false);for(var t=0,r=e;t<r.length;t++){var n=r[t];if(!(n instanceof i.OutlineTag||n instanceof i.SpotTag||n instanceof o.default)){throw new Error("Tag type not supported")}this._hashDeactivated[n.id]=n}};e.prototype.get=function(e){return this.has(e)?this._hash[e]:undefined};e.prototype.getAll=function(){var t=this._hash;return Object.keys(t).map(function(e){return t[e]})};e.prototype.getAllDeactivated=function(){var t=this._hashDeactivated;return Object.keys(t).map(function(e){return t[e]})};e.prototype.getDeactivated=function(e){return this.hasDeactivated(e)?this._hashDeactivated[e]:undefined};e.prototype.has=function(e){return e in this._hash};e.prototype.hasDeactivated=function(e){return e in this._hashDeactivated};e.prototype.remove=function(e){this._assertActivationState(true);var t=this._hash;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(!(i in t)){continue}delete t[i]}this._notifyChanged$.next(this)};e.prototype.removeAll=function(){this._assertActivationState(true);this._hash={};this._notifyChanged$.next(this)};e.prototype.removeAllDeactivated=function(){this._assertActivationState(false);this._hashDeactivated={}};e.prototype.removeDeactivated=function(e){this._assertActivationState(false);var t=this._hashDeactivated;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(!(i in t)){continue}delete t[i]}};e.prototype._add=function(e,t){if(e instanceof i.OutlineTag){this._hash[e.id]=new i.OutlineRenderTag(e,t)}else if(e instanceof i.SpotTag){this._hash[e.id]=new i.SpotRenderTag(e,t)}else if(e instanceof o.default){this._hash[e.id]=new a.default(e,t)}else{throw new Error("Tag type not supported")}};e.prototype._assertActivationState=function(e){if(e!==this._active){throw new Error("Tag set not in correct state for operation.")}};return e}();r.TagSet=s;r.default=s},{"../../Component":291,"./tag/ExtremePointRenderTag":393,"./tag/ExtremePointTag":394,rxjs:43}],374:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.GeometryTagError=void 0;var n=e("../../../Error");var o=function(r){i(n,r);function n(e){var t=r.call(this,e!=null?e:"The provided geometry value is incorrect")||this;Object.setPrototypeOf(t,n.prototype);t.name="GeometryTagError";return t}return n}(n.MapillaryError);r.GeometryTagError=o;r.default=n.MapillaryError},{"../../../Error":293}],375:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Geometry=void 0;var n=e("rxjs");var i=function(){function e(){this._notifyChanged$=new n.Subject}Object.defineProperty(e.prototype,"changed$",{get:function(){return this._notifyChanged$},enumerable:false,configurable:true});return e}();r.Geometry=i;r.default=i},{rxjs:43}],376:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.PointGeometry=void 0;var o=e("../../../Component");var i=function(i){n(e,i);function e(e){var t=i.call(this)||this;var r=e[0];var n=e[1];if(r<0||r>1||n<0||n>1){throw new o.GeometryTagError("Basic coordinates must be on the interval [0, 1].")}t._point=e.slice();return t}Object.defineProperty(e.prototype,"point",{get:function(){return this._point},enumerable:false,configurable:true});e.prototype.getCentroid2d=function(){return this._point.slice()};e.prototype.getCentroid3d=function(e){return e.unprojectBasic(this._point,200)};e.prototype.setCentroid2d=function(e,t){var r=[Math.max(0,Math.min(1,e[0])),Math.max(0,Math.min(1,e[1]))];this._point[0]=r[0];this._point[1]=r[1];this._notifyChanged$.next(this)};return e}(o.Geometry);r.PointGeometry=i;r.default=i},{"../../../Component":291}],377:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.PointsGeometry=void 0;var u=e("../../../Component");var i=function(a){n(e,a);function e(e){var t=a.call(this)||this;var r=e.length;if(r<2){throw new u.GeometryTagError("A points geometry must have two or more positions.")}t._points=[];for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o[0]<0||o[0]>1||o[1]<0||o[1]>1){throw new u.GeometryTagError("Basic coordinates of points must be on the interval [0, 1].")}t._points.push(o.slice())}return t}Object.defineProperty(e.prototype,"points",{get:function(){return this._points},enumerable:false,configurable:true});e.prototype.addPoint2d=function(e){var t=[Math.max(0,Math.min(1,e[0])),Math.max(0,Math.min(1,e[1]))];this._points.push(t);this._notifyChanged$.next(this)};e.prototype.getPoint2d=function(e){return this._points[e].slice()};e.prototype.removePoint2d=function(e){if(e<0||e>=this._points.length||this._points.length<3){throw new u.GeometryTagError("Index for removed point must be valid.")}this._points.splice(e,1);this._notifyChanged$.next(this)};e.prototype.setVertex2d=function(e,t,r){this.setPoint2d(e,t,r)};e.prototype.setPoint2d=function(e,t,r){var n=[Math.max(0,Math.min(1,t[0])),Math.max(0,Math.min(1,t[1]))];this._points[e]=n;this._notifyChanged$.next(this)};e.prototype.getPoints3d=function(e){return this._getPoints3d(this._points,e)};e.prototype.getPoint3d=function(e,t){return t.unprojectBasic(this._points[e],200)};e.prototype.getPoints2d=function(){return this._points.slice()};e.prototype.getCentroid2d=function(e){if(!e){throw new u.GeometryTagError("Get centroid must be called with a transform for points geometries.")}var t=this.getRect2d(e),r=t[0],n=t[1],i=t[2],o=t[3];var a=r<i?(r+i)/2:(r+i+1)/2%1;var s=(n+o)/2;return[a,s]};e.prototype.getCentroid3d=function(e){var t=this.getCentroid2d();return e.unprojectBasic(t,200)};e.prototype.getRect2d=function(e){var t=1;var r=0;var n=1;var i=0;var o=this._points;for(var a=0,s=o;a<s.length;a++){var u=s[a];if(u[0]<t){t=u[0]}if(u[0]>r){r=u[0]}if(u[1]<n){n=u[1]}if(u[1]>i){i=u[1]}}if(e.fullPano){var c=[];for(var l=0;l<o.length;l++){c[l]=l}c.sort(function(e,t){return o[e][0]<o[t][0]?-1:o[e][0]>o[t][0]?1:e<t?-1:1});var h=o[c[0]][0]+1-o[c[c.length-1]][0];var p=0;for(var l=0;l<c.length-1;l++){var f=c[l];var d=c[l+1];var v=o[d][0]-o[f][0];if(v>h){h=v;p=l+1}}if(p>0){t=o[c[p]][0];r=o[c[p-1]][0]}}return[t,n,r,i]};e.prototype.setCentroid2d=function(e,t){throw new Error("Not implemented")};e.prototype._getPoints3d=function(e,t){return e.map(function(e){return t.unprojectBasic(e,200)})};return e}(u.Geometry);r.PointsGeometry=i;r.default=i},{"../../../Component":291}],378:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.PolygonGeometry=void 0;var f=e("../../../Component");var i=function(p){n(e,p);function e(e,t){var r=p.call(this)||this;var n=e.length;if(n<3){throw new f.GeometryTagError("A polygon must have three or more positions.")}if(e[0][0]!==e[n-1][0]||e[0][1]!==e[n-1][1]){throw new f.GeometryTagError("First and last positions must be equivalent.")}r._polygon=[];for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a[0]<0||a[0]>1||a[1]<0||a[1]>1){throw new f.GeometryTagError("Basic coordinates of polygon must be on the interval [0, 1].")}r._polygon.push(a.slice())}r._holes=[];if(t==null){return r}for(var s=0;s<t.length;s++){var u=t[s];var c=u.length;if(c<3){throw new f.GeometryTagError("A polygon hole must have three or more positions.")}if(u[0][0]!==u[c-1][0]||u[0][1]!==u[c-1][1]){throw new f.GeometryTagError("First and last positions of hole must be equivalent.")}r._holes.push([]);for(var l=0,h=u;l<h.length;l++){var a=h[l];if(a[0]<0||a[0]>1||a[1]<0||a[1]>1){throw new f.GeometryTagError("Basic coordinates of hole must be on the interval [0, 1].")}r._holes[s].push(a.slice())}}return r}Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"holes",{get:function(){return this._holes},enumerable:false,configurable:true});e.prototype.addVertex2d=function(e){var t=[Math.max(0,Math.min(1,e[0])),Math.max(0,Math.min(1,e[1]))];this._polygon.splice(this._polygon.length-1,0,t);this._notifyChanged$.next(this)};e.prototype.getVertex2d=function(e){return this._polygon[e].slice()};e.prototype.removeVertex2d=function(e){if(e<0||e>=this._polygon.length||this._polygon.length<4){throw new f.GeometryTagError("Index for removed vertex must be valid.")}if(e>0&&e<this._polygon.length-1){this._polygon.splice(e,1)}else{this._polygon.splice(0,1);this._polygon.pop();var t=this._polygon[0].slice();this._polygon.push(t)}this._notifyChanged$.next(this)};e.prototype.setVertex2d=function(e,t,r){var n=[Math.max(0,Math.min(1,t[0])),Math.max(0,Math.min(1,t[1]))];if(e===0||e===this._polygon.length-1){this._polygon[0]=n.slice();this._polygon[this._polygon.length-1]=n.slice()}else{this._polygon[e]=n.slice()}this._notifyChanged$.next(this)};e.prototype.setCentroid2d=function(e,t){var r=this._polygon.map(function(e){return e[0]});var n=this._polygon.map(function(e){return e[1]});var i=Math.min.apply(Math,r);var o=Math.max.apply(Math,r);var a=Math.min.apply(Math,n);var s=Math.max.apply(Math,n);var u=this.getCentroid2d();var c=-i;var l=1-o;var h=-a;var p=1-s;var f=Math.max(c,Math.min(l,e[0]-u[0]));var d=Math.max(h,Math.min(p,e[1]-u[1]));for(var v=0,m=this._polygon;v<m.length;v++){var g=m[v];g[0]+=f;g[1]+=d}this._notifyChanged$.next(this)};e.prototype.getPoints3d=function(e){return this._getPoints3d(this._subsample(this._polygon),e)};e.prototype.getVertex3d=function(e,t){return t.unprojectBasic(this._polygon[e],200)};e.prototype.getVertices2d=function(){return this._polygon.slice()};e.prototype.getVertices3d=function(e){return this._getPoints3d(this._polygon,e)};e.prototype.getHolePoints3d=function(t){var r=this;return this._holes.map(function(e){return r._getPoints3d(r._subsample(e),t)})};e.prototype.getHoleVertices3d=function(t){var r=this;return this._holes.map(function(e){return r._getPoints3d(e,t)})};e.prototype.getCentroid2d=function(){var e=this._polygon;var t=0;var r=0;var n=0;for(var i=0;i<e.length-1;i++){var o=e[i][0];var a=e[i][1];var s=e[i+1][0];var u=e[i+1][1];var c=o*u-s*a;t+=c;r+=(o+s)*c;n+=(a+u)*c}t/=2;r/=6*t;n/=6*t;return[r,n]};e.prototype.getCentroid3d=function(e){var t=this.getCentroid2d();return e.unprojectBasic(t,200)};e.prototype.get3dDomainTriangles3d=function(t){var r=this;return this._triangulate(this._project(this._polygon,t),this.getVertices3d(t),this._holes.map(function(e){return r._project(e,t)}),this.getHoleVertices3d(t))};e.prototype.getTriangles3d=function(t){var r=this;if(t.fullPano){return this._triangulatePano(this._polygon.slice(),this.holes.slice(),t)}var e=this._project(this._subsample(this._polygon),t);var n=this.getPoints3d(t);var i=this._holes.map(function(e){return r._project(r._subsample(e),t)});var o=this.getHolePoints3d(t);return this._triangulate(e,n,i,o)};e.prototype.getPoleOfInaccessibility2d=function(){return this._getPoleOfInaccessibility2d(this._polygon.slice())};e.prototype.getPoleOfInaccessibility3d=function(e){var t=this._getPoleOfInaccessibility2d(this._polygon.slice());return e.unprojectBasic(t,200)};e.prototype._getPoints3d=function(e,t){return e.map(function(e){return t.unprojectBasic(e,200)})};return e}(f.VertexGeometry);r.PolygonGeometry=i;r.default=i},{"../../../Component":291}],379:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.RectGeometry=void 0;var a=e("../../../Component");var i=function(o){n(e,o);function e(e){var t=o.call(this)||this;if(e[1]>e[3]){throw new a.GeometryTagError("Basic Y coordinates values can not be inverted.")}for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i<0||i>1){throw new a.GeometryTagError("Basic coordinates must be on the interval [0, 1].")}}t._anchorIndex=undefined;t._rect=e.slice(0,4);t._inverted=t._rect[0]>t._rect[2];return t}Object.defineProperty(e.prototype,"anchorIndex",{get:function(){return this._anchorIndex},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"inverted",{get:function(){return this._inverted},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"rect",{get:function(){return this._rect},enumerable:false,configurable:true});e.prototype.initializeAnchorIndexing=function(e){if(this._anchorIndex!==undefined){throw new Error("Anchor indexing is already initialized.")}if(e<0||e>3){throw new Error("Invalid anchor index: "+e+".")}this._anchorIndex=e===undefined?0:e};e.prototype.terminateAnchorIndexing=function(){this._anchorIndex=undefined};e.prototype.setOppositeVertex2d=function(e,t){if(this._anchorIndex===undefined){throw new Error("Anchor indexing needs to be initialized.")}var r=[Math.max(0,Math.min(1,e[0])),Math.max(0,Math.min(1,e[1]))];var n=this._rect.slice();var i=this._anchorIndex===0?[n[0],n[3]]:this._anchorIndex===1?[n[0],n[1]]:this._anchorIndex===2?[n[2],n[1]]:[n[2],n[3]];if(t.fullPano){var o=this._anchorIndex<2?r[0]-n[2]:r[0]-n[0];if(!this._inverted&&this._anchorIndex<2&&r[0]<.25&&n[2]>.75&&o<-.5){this._inverted=true;this._anchorIndex=i[1]>r[1]?0:1}else if(!this._inverted&&this._anchorIndex>=2&&r[0]<.25&&n[2]>.75&&o<-.5){this._inverted=true;this._anchorIndex=i[1]>r[1]?0:1}else if(this._inverted&&this._anchorIndex>=2&&r[0]<.25&&n[0]>.75&&o<-.5){this._inverted=false;if(i[0]>r[0]){this._anchorIndex=i[1]>r[1]?3:2}else{this._anchorIndex=i[1]>r[1]?0:1}}else if(!this._inverted&&this._anchorIndex>=2&&r[0]>.75&&n[0]<.25&&o>.5){this._inverted=true;this._anchorIndex=i[1]>r[1]?3:2}else if(!this._inverted&&this._anchorIndex<2&&r[0]>.75&&n[0]<.25&&o>.5){this._inverted=true;this._anchorIndex=i[1]>r[1]?3:2}else if(this._inverted&&this._anchorIndex<2&&r[0]>.75&&n[2]<.25&&o>.5){this._inverted=false;if(i[0]>r[0]){this._anchorIndex=i[1]>r[1]?3:2}else{this._anchorIndex=i[1]>r[1]?0:1}}else if(this._inverted&&this._anchorIndex<2&&r[0]>n[0]){this._inverted=false;this._anchorIndex=i[1]>r[1]?0:1}else if(this._inverted&&this._anchorIndex>=2&&r[0]<n[2]){this._inverted=false;this._anchorIndex=i[1]>r[1]?3:2}else if(this._inverted){if(this._anchorIndex<2){this._anchorIndex=i[1]>r[1]?0:1}else{this._anchorIndex=i[1]>r[1]?3:2}}else{if(i[0]<=r[0]&&i[1]>r[1]){this._anchorIndex=0}else if(i[0]<=r[0]&&i[1]<=r[1]){this._anchorIndex=1}else if(i[0]>r[0]&&i[1]<=r[1]){this._anchorIndex=2}else{this._anchorIndex=3}}var a=[];if(this._anchorIndex===0){a[0]=i[0];a[1]=r[1];a[2]=r[0];a[3]=i[1]}else if(this._anchorIndex===1){a[0]=i[0];a[1]=i[1];a[2]=r[0];a[3]=r[1]}else if(this._anchorIndex===2){a[0]=r[0];a[1]=i[1];a[2]=i[0];a[3]=r[1]}else{a[0]=r[0];a[1]=r[1];a[2]=i[0];a[3]=i[1]}if(!this._inverted&&a[0]>a[2]||this._inverted&&a[0]<a[2]){a[0]=n[0];a[2]=n[2]}if(a[1]>a[3]){a[1]=n[1];a[3]=n[3]}this._rect[0]=a[0];this._rect[1]=a[1];this._rect[2]=a[2];this._rect[3]=a[3]}else{if(i[0]<=r[0]&&i[1]>r[1]){this._anchorIndex=0}else if(i[0]<=r[0]&&i[1]<=r[1]){this._anchorIndex=1}else if(i[0]>r[0]&&i[1]<=r[1]){this._anchorIndex=2}else{this._anchorIndex=3}var a=[];if(this._anchorIndex===0){a[0]=i[0];a[1]=r[1];a[2]=r[0];a[3]=i[1]}else if(this._anchorIndex===1){a[0]=i[0];a[1]=i[1];a[2]=r[0];a[3]=r[1]}else if(this._anchorIndex===2){a[0]=r[0];a[1]=i[1];a[2]=i[0];a[3]=r[1]}else{a[0]=r[0];a[1]=r[1];a[2]=i[0];a[3]=i[1]}if(a[0]>a[2]){a[0]=n[0];a[2]=n[2]}if(a[1]>a[3]){a[1]=n[1];a[3]=n[3]}this._rect[0]=a[0];this._rect[1]=a[1];this._rect[2]=a[2];this._rect[3]=a[3]}this._notifyChanged$.next(this)};e.prototype.setVertex2d=function(e,t,r){var n=this._rect.slice();var i=[Math.max(0,Math.min(1,t[0])),Math.max(0,Math.min(1,t[1]))];var o=[];if(e===0){o[0]=i[0];o[1]=n[1];o[2]=n[2];o[3]=i[1]}else if(e===1){o[0]=i[0];o[1]=i[1];o[2]=n[2];o[3]=n[3]}else if(e===2){o[0]=n[0];o[1]=i[1];o[2]=i[0];o[3]=n[3]}else if(e===3){o[0]=n[0];o[1]=n[1];o[2]=i[0];o[3]=i[1]}if(r.fullPano){var a=e<2&&i[0]>.75&&n[0]<.25||e>=2&&this._inverted&&i[0]>.75&&n[2]<.25;var s=e<2&&this._inverted&&i[0]<.25&&n[0]>.75||e>=2&&i[0]<.25&&n[2]>.75;if(a||s){this._inverted=!this._inverted}else{if(o[0]-n[0]<-.25){o[0]=n[0]}if(o[2]-n[2]>.25){o[2]=n[2]}}if(!this._inverted&&o[0]>o[2]||this._inverted&&o[0]<o[2]){o[0]=n[0];o[2]=n[2]}}else{if(o[0]>o[2]){o[0]=n[0];o[2]=n[2]}}if(o[1]>o[3]){o[1]=n[1];o[3]=n[3]}this._rect[0]=o[0];this._rect[1]=o[1];this._rect[2]=o[2];this._rect[3]=o[3];this._notifyChanged$.next(this)};e.prototype.setCentroid2d=function(e,t){var r=this._rect.slice();var n=r[0];var i=this._inverted?r[2]+1:r[2];var o=r[1];var a=r[3];var s=n+(i-n)/2;var u=o+(a-o)/2;var c=0;if(t.gpano!=null&&t.gpano.CroppedAreaImageWidthPixels===t.gpano.FullPanoWidthPixels){c=this._inverted?e[0]+1-s:e[0]-s}else{var l=-n;var h=1-i;c=Math.max(l,Math.min(h,e[0]-s))}var p=-o;var f=1-a;var d=Math.max(p,Math.min(f,e[1]-u));this._rect[0]=r[0]+c;this._rect[1]=r[1]+d;this._rect[2]=r[2]+c;this._rect[3]=r[3]+d;if(this._rect[0]<0){this._rect[0]+=1;this._inverted=!this._inverted}else if(this._rect[0]>1){this._rect[0]-=1;this._inverted=!this._inverted}if(this._rect[2]<0){this._rect[2]+=1;this._inverted=!this._inverted}else if(this._rect[2]>1){this._rect[2]-=1;this._inverted=!this._inverted}this._notifyChanged$.next(this)};e.prototype.getPoints3d=function(t){return this._getPoints2d().map(function(e){return t.unprojectBasic(e,200)})};e.prototype.getVertex2d=function(e){return this._rectToVertices2d(this._rect)[e]};e.prototype.getNonAdjustedVertex2d=function(e){return this._rectToNonAdjustedVertices2d(this._rect)[e]};e.prototype.getVertex3d=function(e,t){return t.unprojectBasic(this._rectToVertices2d(this._rect)[e],200)};e.prototype.getVertices2d=function(){return this._rectToVertices2d(this._rect)};e.prototype.getVertices3d=function(t){return this._rectToVertices2d(this._rect).map(function(e){return t.unprojectBasic(e,200)})};e.prototype.getCentroid2d=function(){var e=this._rect;var t=e[0];var r=this._inverted?e[2]+1:e[2];var n=e[1];var i=e[3];var o=(t+r)/2;var a=(n+i)/2;return[o,a]};e.prototype.getCentroid3d=function(e){var t=this.getCentroid2d();return e.unprojectBasic(t,200)};e.prototype.getPoleOfInaccessibility2d=function(){return this._getPoleOfInaccessibility2d(this._rectToVertices2d(this._rect))};e.prototype.getPoleOfInaccessibility3d=function(e){var t=this._getPoleOfInaccessibility2d(this._rectToVertices2d(this._rect));return e.unprojectBasic(t,200)};e.prototype.getTriangles3d=function(e){return e.fullPano?[]:this._triangulate(this._project(this._getPoints2d(),e),this.getPoints3d(e))};e.prototype.validate=function(e){var t=this._rect;if(!this._inverted&&e[0]<t[0]||e[0]-t[2]>.25||e[1]<t[1]){return false}return true};e.prototype._getPoints2d=function(){var e=this._rectToVertices2d(this._rect);var t=e.length-1;var r=10;var n=[];for(var i=0;i<t;++i){var o=e[i][0];var a=e[i][1];var s=e[i+1][0];var u=e[i+1][1];var c=(s-o)/(r-1);var l=(u-a)/(r-1);for(var h=0;h<r;++h){var p=[o+h*c,a+h*l];n.push(p)}}return n};e.prototype._rectToVertices2d=function(e){return[[e[0],e[3]],[e[0],e[1]],[this._inverted?e[2]+1:e[2],e[1]],[this._inverted?e[2]+1:e[2],e[3]],[e[0],e[3]]]};e.prototype._rectToNonAdjustedVertices2d=function(e){return[[e[0],e[3]],[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]]]};return e}(a.VertexGeometry);r.RectGeometry=i;r.default=i},{"../../../Component":291}],380:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var x=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(r,"__esModule",{value:true});r.VertexGeometry=void 0;var g=e("earcut");var w=e("martinez-polygon-clipping");var i=e("@mapbox/polylabel");var o=e("three");var a=e("../../../Component");var s=function(t){n(e,t);function e(){var e=t.call(this)||this;e._subsampleThreshold=.005;return e}e.prototype._getPoleOfInaccessibility2d=function(e){var t=i([e],.03);return t};e.prototype._project=function(e,t){var r=this._createCamera(t.upVector().toArray(),t.unprojectSfM([0,0],0),t.unprojectSfM([0,0],10));return this._deunproject(e,t,r)};e.prototype._subsample=function(e,t){if(t===void 0){t=this._subsampleThreshold}var r=[];var n=e.length;for(var i=0;i<n;i++){var o=e[i];var a=e[(i+1)%n];r.push(o);var s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));var u=Math.floor(s/t);var c=1/(u+1);for(var l=1;l<=u;l++){var h=l*c;var p=[(1-h)*o[0]+h*a[0],(1-h)*o[1]+h*a[1]];r.push(p)}}return r};e.prototype._triangulate=function(e,t,r,n){var i=[e.slice(0,-1)];for(var o=0,a=r!=null?r:[];o<a.length;o++){var s=a[o];i.push(s.slice(0,-1))}var u=t.slice(0,-1);for(var c=0,l=n!=null?n:[];c<l.length;c++){var h=l[c];u=u.concat(h.slice(0,-1))}var p=g.default.flatten(i);var f=g.default(p.vertices,p.holes,p.dimensions);var d=[];for(var v=0;v<f.length;++v){var m=u[f[v]];d.push(m[0]);d.push(m[1]);d.push(m[2])}return d};e.prototype._triangulatePano=function(e,t,r){var n=[];var i=1e-9;var o=3;var a=3;for(var s=0;s<o;s++){for(var u=0;u<a;u++){var c=s===0?-i:i;var l=u===0?-i:i;var h=s/o+c;var p=u/a+l;var f=(s+1)/o+i;var d=(u+1)/a+i;var v=[[h,p],[h,d],[f,d],[f,p],[h,p]];var m=[(2*s+1)/(2*o),(2*u+1)/(2*a)];n.push.apply(n,this._triangulateSubarea(e,t,v,m,r))}}return n};e.prototype._unproject=function(e,t,r){if(r===void 0){r=200}return e.map(function(e){return t.unprojectBasic(e,r)})};e.prototype._createCamera=function(e,t,r){var n=new o.Camera;n.up.copy((new o.Vector3).fromArray(e));n.position.copy((new o.Vector3).fromArray(t));n.lookAt((new o.Vector3).fromArray(r));n.updateMatrix();n.updateMatrixWorld(true);return n};e.prototype._deunproject=function(e,n,i){return e.map(function(e){var t=n.unprojectBasic(e,1e4);var r=new o.Vector3(t[0],t[1],t[2]).applyMatrix4(i.matrixWorldInverse);return[r.x/r.z,r.y/r.z]})};e.prototype._triangulateSubarea=function(e,t,r,n,i){var o=w.intersection(x([e],t),[r]);if(!o){return[]}var a=[];var s=this._subsampleThreshold;var u=this._createCamera(i.upVector().toArray(),i.unprojectSfM([0,0],0),i.unprojectBasic(n,10));for(var c=0,l=o;c<l.length;c++){var h=l[c];var p=this._subsample(h[0],s);var f=this._deunproject(p,i,u);var d=this._unproject(p,i);var v=[];var m=[];for(var g=1;g<h.length;g++){var _=this._subsample(h[g],s);var y=this._deunproject(_,i,u);var b=this._unproject(_,i);v.push(y);m.push(b)}a.push.apply(a,this._triangulate(f,d,v,m))}return a};return e}(a.Geometry);r.VertexGeometry=s;r.default=s},{"../../../Component":291,"@mapbox/polylabel":1,earcut:8,"martinez-polygon-clipping":22,three:242}],381:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreateHandlerBase=void 0;var o=e("rxjs/operators");var s=e("rxjs");var i=e("../../../Component");var a=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e,t,r,n)||this;o._tagCreator=i;o._geometryCreated$=new s.Subject;return o}Object.defineProperty(e.prototype,"geometryCreated$",{get:function(){return this._geometryCreated$},enumerable:false,configurable:true});e.prototype._enable=function(){this._enableCreate();this._container.element.classList.add("component-tag-create")};e.prototype._disable=function(){this._container.element.classList.remove("component-tag-create");this._disableCreate()};e.prototype._validateBasic=function(e){var t=e[0];var r=e[1];return 0<=t&&t<=1&&0<=r&&r<=1};e.prototype._mouseEventToBasic$=function(e){var i=this;return e.pipe(o.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$),o.map(function(e){var t=e[0],r=e[1],n=e[2];return i._mouseEventToBasic(t,i._container.element,r,n)}))};return e}(i.TagHandlerBase);r.CreateHandlerBase=a;r.default=a},{"../../../Component":291,rxjs:43,"rxjs/operators":241}],382:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreatePointHandler=void 0;var i=e("rxjs/operators");var o=e("../../../Component");var a=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._enableCreate=function(){this._container.mouseService.deferPixels(this._name,4);this._geometryCreatedSubscription=this._mouseEventToBasic$(this._container.mouseService.proximateClick$).pipe(i.filter(this._validateBasic),i.map(function(e){return new o.PointGeometry(e)})).subscribe(this._geometryCreated$)};t.prototype._disableCreate=function(){this._container.mouseService.undeferPixels(this._name);this._geometryCreatedSubscription.unsubscribe()};t.prototype._getNameExtension=function(){return"create-point"};return t}(o.CreateHandlerBase);r.CreatePointHandler=a;r.default=a},{"../../../Component":291,"rxjs/operators":241}],383:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreatePointsHandler=void 0;var i=e("../../../Component");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(t.prototype,"_create$",{get:function(){return this._tagCreator.createPoints$},enumerable:false,configurable:true});t.prototype._addPoint=function(e,t){e.geometry.addPoint2d(t)};t.prototype._getNameExtension=function(){return"create-points"};t.prototype._setVertex2d=function(e,t,r){e.geometry.setPoint2d(e.geometry.points.length-1,t,r)};return t}(i.CreateVertexHandler);r.CreatePointsHandler=o;r.default=o},{"../../../Component":291}],384:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreatePolygonHandler=void 0;var i=e("../../../Component");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(t.prototype,"_create$",{get:function(){return this._tagCreator.createPolygon$},enumerable:false,configurable:true});t.prototype._addPoint=function(e,t){e.addPoint(t)};t.prototype._getNameExtension=function(){return"create-polygon"};t.prototype._setVertex2d=function(e,t,r){e.geometry.setVertex2d(e.geometry.polygon.length-2,t,r)};return t}(i.CreateVertexHandler);r.CreatePolygonHandler=o;r.default=o},{"../../../Component":291}],385:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreateRectDragHandler=void 0;var i=e("rxjs");var a=e("rxjs/operators");var o=e("../../../Component");var s=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._enableCreate=function(){var o=this;this._container.mouseService.claimMouse(this._name,2);this._deleteSubscription=this._navigator.stateService.currentTransform$.pipe(a.map(function(e){return null}),a.skip(1)).subscribe(this._tagCreator.delete$);this._createSubscription=this._mouseEventToBasic$(this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseDragStart$)).pipe(a.filter(this._validateBasic)).subscribe(this._tagCreator.createRect$);this._initializeAnchorIndexingSubscription=this._tagCreator.tag$.pipe(a.filter(function(e){return!!e})).subscribe(function(e){e.geometry.initializeAnchorIndexing()});var t=i.combineLatest(i.merge(this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseMove$),this._container.mouseService.filtered$(this._name,this._container.mouseService.domMouseMove$)),this._container.renderService.renderCamera$).pipe(a.withLatestFrom(this._navigator.stateService.currentTransform$),a.map(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];return o._mouseEventToBasic(r,o._container.element,n,i)}));this._setVertexSubscription=this._tagCreator.tag$.pipe(a.switchMap(function(e){return!!e?i.combineLatest(i.of(e),t,o._navigator.stateService.currentTransform$):i.empty()})).subscribe(function(e){var t=e[0],r=e[1],n=e[2];t.geometry.setOppositeVertex2d(r,n)});var r=this._container.mouseService.mouseDragEnd$.pipe(a.withLatestFrom(this._mouseEventToBasic$(this._container.mouseService.filtered$(this._name,this._container.mouseService.mouseDrag$)).pipe(a.filter(this._validateBasic)),function(e,t){return t}),a.share());this._addPointSubscription=this._tagCreator.tag$.pipe(a.switchMap(function(e){return!!e?i.combineLatest(i.of(e),r):i.empty()})).subscribe(function(e){var t=e[0],r=e[1];var n=t.geometry;if(!n.validate(r)){r=n.getNonAdjustedVertex2d(3)}t.addPoint(r)});this._geometryCreatedSubscription=this._tagCreator.tag$.pipe(a.switchMap(function(e){return!!e?e.created$.pipe(a.map(function(e){return e.geometry})):i.empty()})).subscribe(this._geometryCreated$)};t.prototype._disableCreate=function(){this._container.mouseService.unclaimMouse(this._name);this._tagCreator.delete$.next(null);this._addPointSubscription.unsubscribe();this._createSubscription.unsubscribe();this._deleteSubscription.unsubscribe();this._geometryCreatedSubscription.unsubscribe();this._initializeAnchorIndexingSubscription.unsubscribe();this._setVertexSubscription.unsubscribe()};t.prototype._getNameExtension=function(){return"create-rect-drag"};return t}(o.CreateHandlerBase);r.CreateRectDragHandler=s;r.default=s},{"../../../Component":291,rxjs:43,"rxjs/operators":241}],386:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreateRectHandler=void 0;var i=e("rxjs/operators");var o=e("../../../Component");var a=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(t.prototype,"_create$",{get:function(){return this._tagCreator.createRect$},enumerable:false,configurable:true});t.prototype._addPoint=function(e,t){var r=e.geometry;if(!r.validate(t)){t=r.getNonAdjustedVertex2d(3)}e.addPoint(t)};t.prototype._enable=function(){e.prototype._enable.call(this);this._initializeAnchorIndexingSubscription=this._tagCreator.tag$.pipe(i.filter(function(e){return!!e})).subscribe(function(e){e.geometry.initializeAnchorIndexing()})};t.prototype._disable=function(){e.prototype._disable.call(this);this._initializeAnchorIndexingSubscription.unsubscribe()};t.prototype._getNameExtension=function(){return"create-rect"};t.prototype._setVertex2d=function(e,t,r){e.geometry.setOppositeVertex2d(t,r)};return t}(o.CreateVertexHandler);r.CreateRectHandler=a;r.default=a},{"../../../Component":291,"rxjs/operators":241}],387:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.CreateVertexHandler=void 0;var i=e("rxjs");var o=e("rxjs/operators");var a=e("../../../Component");var s=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._enableCreate=function(){var a=this;this._container.mouseService.deferPixels(this._name,4);var e=this._navigator.stateService.currentTransform$.pipe(o.map(function(){}),o.publishReplay(1),o.refCount());this._deleteSubscription=e.pipe(o.skip(1)).subscribe(this._tagCreator.delete$);var t=this._mouseEventToBasic$(this._container.mouseService.proximateClick$).pipe(o.share());this._createSubscription=e.pipe(o.switchMap(function(){return t.pipe(o.filter(a._validateBasic),o.take(1))})).subscribe(this._create$);this._setVertexSubscription=this._tagCreator.tag$.pipe(o.switchMap(function(e){return!!e?i.combineLatest(i.of(e),i.merge(a._container.mouseService.mouseMove$,a._container.mouseService.domMouseMove$),a._container.renderService.renderCamera$,a._navigator.stateService.currentTransform$):i.empty()})).subscribe(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];var o=a._mouseEventToBasic(r,a._container.element,n,i);a._setVertex2d(t,o,i)});this._addPointSubscription=this._tagCreator.tag$.pipe(o.switchMap(function(e){return!!e?i.combineLatest(i.of(e),t):i.empty()})).subscribe(function(e){var t=e[0],r=e[1];a._addPoint(t,r)});this._geometryCreateSubscription=this._tagCreator.tag$.pipe(o.switchMap(function(e){return!!e?e.created$.pipe(o.map(function(e){return e.geometry})):i.empty()})).subscribe(this._geometryCreated$)};t.prototype._disableCreate=function(){this._container.mouseService.undeferPixels(this._name);this._tagCreator.delete$.next(null);this._addPointSubscription.unsubscribe();this._createSubscription.unsubscribe();this._deleteSubscription.unsubscribe();this._geometryCreateSubscription.unsubscribe();this._setVertexSubscription.unsubscribe()};return t}(a.CreateHandlerBase);r.CreateVertexHandler=s;r.default=s},{"../../../Component":291,rxjs:43,"rxjs/operators":241}],388:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.EditVertexHandler=void 0;var i=e("rxjs");var o=e("rxjs/operators");var u=e("../../../Component");var a=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this,e,t,r,n)||this;o._tagSet=i;return o}e.prototype._enable=function(){var s=this;var e=this._tagSet.changed$.pipe(o.map(function(e){return e.getAll()}),o.switchMap(function(e){return i.from(e).pipe(o.mergeMap(function(e){return e.interact$}))}),o.switchMap(function(e){return i.concat(i.of(e),s._container.mouseService.documentMouseUp$.pipe(o.map(function(){return{offsetX:0,offsetY:0,operation:u.TagOperation.None,tag:null}}),o.first()))}),o.share());var t=i.merge(this._container.mouseService.mouseMove$,this._container.mouseService.domMouseMove$).pipe(o.share());this._claimMouseSubscription=e.pipe(o.switchMap(function(e){return!!e.tag?s._container.mouseService.domMouseDragStart$:i.empty()})).subscribe(function(){s._container.mouseService.claimMouse(s._name,3)});this._cursorSubscription=e.pipe(o.map(function(e){return e.cursor}),o.distinctUntilChanged()).subscribe(function(e){var t=["crosshair","move","nesw-resize","nwse-resize"];for(var r=0,n=t;r<n.length;r++){var i=n[r];s._container.element.classList.remove("component-tag-edit-"+i)}if(!!e){s._container.element.classList.add("component-tag-edit-"+e)}});this._unclaimMouseSubscription=this._container.mouseService.filtered$(this._name,this._container.mouseService.domMouseDragEnd$).subscribe(function(e){s._container.mouseService.unclaimMouse(s._name)});this._preventDefaultSubscription=e.pipe(o.switchMap(function(e){return!!e.tag?s._container.mouseService.documentMouseMove$:i.empty()})).subscribe(function(e){e.preventDefault()});this._updateGeometrySubscription=e.pipe(o.switchMap(function(e){if(e.operation===u.TagOperation.None||!e.tag){return i.empty()}var t=s._container.mouseService.filtered$(s._name,s._container.mouseService.domMouseDrag$).pipe(o.filter(function(e){return s._viewportCoords.insideElement(e,s._container.element)}));return i.combineLatest(t,s._container.renderService.renderCamera$).pipe(o.withLatestFrom(i.of(e),s._navigator.stateService.currentTransform$,function(e,t,r){var n=e[0],i=e[1];return[n,i,t,r]}))})).subscribe(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];var o=s._mouseEventToBasic(t,s._container.element,r,i,n.offsetX,n.offsetY);var a=n.tag.geometry;if(n.operation===u.TagOperation.Centroid){a.setCentroid2d(o,i)}else if(n.operation===u.TagOperation.Vertex){a.setVertex2d(n.vertexIndex,o,i)}})};e.prototype._disable=function(){this._claimMouseSubscription.unsubscribe();this._cursorSubscription.unsubscribe();this._preventDefaultSubscription.unsubscribe();this._unclaimMouseSubscription.unsubscribe();this._updateGeometrySubscription.unsubscribe()};e.prototype._getNameExtension=function(){return"edit-vertex"};return e}(u.TagHandlerBase);r.EditVertexHandler=a;r.default=a},{"../../../Component":291,rxjs:43,"rxjs/operators":241}],389:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.TagHandlerBase=void 0;var i=e("../../../Component");var o=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,t,r)||this;i._name=i._component.name+"-"+i._getNameExtension();i._viewportCoords=n;return i}e.prototype._getConfiguration=function(e){return{}};e.prototype._mouseEventToBasic=function(e,t,r,n,i,o){i=i!=null?i:0;o=o!=null?o:0;var a=this._viewportCoords.canvasPosition(e,t),s=a[0],u=a[1];var c=this._viewportCoords.canvasToBasic(s-i,u-o,t,n,r.perspective);return c};return e}(i.HandlerBase);r.TagHandlerBase=o;r.default=o},{"../../../Component":291}],390:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],391:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.CreateTag=void 0;var n=e("rxjs/operators");var o=e("three");var i=e("rxjs");var a=e("../../../Geo");var s=function(){function e(e,t,r){var n=this;this._geometry=e;this._transform=t;this._viewportCoords=!!r?r:new a.ViewportCoords;this._aborted$=new i.Subject;this._created$=new i.Subject;this._glObjectsChanged$=new i.Subject;this._geometryChangedSubscription=this._geometry.changed$.subscribe(function(){n._onGeometryChanged();n._glObjectsChanged$.next(n)})}Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"glObjects",{get:function(){return this._glObjects},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"aborted$",{get:function(){return this._aborted$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"created$",{get:function(){return this._created$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"glObjectsChanged$",{get:function(){return this._glObjectsChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"geometryChanged$",{get:function(){var e=this;return this._geometry.changed$.pipe(n.map(function(){return e}))},enumerable:false,configurable:true});e.prototype.dispose=function(){this._geometryChangedSubscription.unsubscribe()};e.prototype._canvasToTransform=function(e){var t=Math.round(e[0]);var r=Math.round(e[1]);var n="translate(-50%,-50%) translate("+t+"px,"+r+"px)";return n};e.prototype._colorToBackground=function(e){return"#"+("000000"+e.toString(16)).substr(-6)};e.prototype._createOutine=function(e,t){var r=this._getLinePositions(e);var n=new o.BufferGeometry;n.setAttribute("position",new o.BufferAttribute(r,3));var i=new o.LineBasicMaterial({color:t,linewidth:1});return new o.Line(n,i)};e.prototype._disposeLine=function(e){if(e==null){return}e.geometry.dispose();e.material.dispose()};e.prototype._getLinePositions=function(e){var t=e.length;var r=new Float32Array(t*3);for(var n=0;n<t;++n){var i=3*n;var o=e[n];r[i]=o[0];r[i+1]=o[1];r[i+2]=o[2]}return r};return e}();r.CreateTag=s;r.default=s},{"../../../Geo":294,rxjs:43,"rxjs/operators":241,three:242}],392:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ExtremePointCreateTag=void 0;var y=e("virtual-dom");var a=e("../Tag");var i=e("../../../Component");var o=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,r,n)||this;i._options={color:t.color==null?16777215:t.color,indicateCompleter:t.indicateCompleter==null?true:t.indicateCompleter};i._rectGeometry=new a.RectGeometry(i._geometry.getRect2d(r));i._createGlObjects();return i}e.prototype.create=function(){if(this._geometry.points.length<3){return}this._geometry.removePoint2d(this._geometry.points.length-1);this._created$.next(this)};e.prototype.dispose=function(){o.prototype.dispose.call(this);this._disposeObjects()};e.prototype.getDOMObjects=function(p,e){var f=this;var d={offsetHeight:e.height,offsetWidth:e.width};var v=[];var m=this._geometry.getPoints2d();var g=m.length;var t=function(e){var t=e;var r=m[e],n=r[0],i=r[1];var o=_._viewportCoords.basicToCanvasSafe(n,i,d,_._transform,p);if(!o){return"continue"}var a=function(e){e.stopPropagation();f._aborted$.next(f)};var s=function(e){e.stopPropagation();f._geometry.removePoint2d(t)};var u=_._canvasToTransform(o);var c={onclick:e===0&&g<3?a:s,style:{transform:u}};v.push(y.h("div.TagInteractor",c,[]));var l=_._colorToBackground(_._options.color);var h={style:{background:l,transform:u}};v.push(y.h("div.TagVertex",h,[]))};var _=this;for(var r=0;r<g-1;r++){t(r)}if(g>2&&this._options.indicateCompleter===true){var n=this._geometry.getCentroid2d(this._transform),i=n[0],o=n[1];var a=this._viewportCoords.basicToCanvasSafe(i,o,d,this._transform,p);if(!!a){var s=function(e){e.stopPropagation();f._geometry.removePoint2d(f._geometry.points.length-1);f._created$.next(f)};var u=this._canvasToTransform(a);var c={onclick:s,style:{transform:u}};v.push(y.h("div.TagCompleter.TagLarger",c,[]));var l={style:{background:this._colorToBackground(this._options.color),transform:u}};v.push(y.h("div.TagVertex.TagLarger",l,[]));var h={style:{transform:u}};v.push(y.h("div.TagDot",h,[]))}}return v};e.prototype._onGeometryChanged=function(){this._disposeObjects();this._rectGeometry=new a.RectGeometry(this._geometry.getRect2d(this._transform));this._createGlObjects()};e.prototype._createGlObjects=function(){this._glObjects=[];var e=this._rectGeometry.getPoints3d(this._transform);this._outline=this._createOutine(e,this._options.color);this._glObjects.push(this._outline)};e.prototype._disposeObjects=function(){this._disposeLine(this._outline);this._outline=null;this._glObjects=null};return e}(i.CreateTag);r.ExtremePointCreateTag=o},{"../../../Component":291,"../Tag":366,"virtual-dom":247}],393:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ExtremePointRenderTag=void 0;var o=e("three");var y=e("virtual-dom");var b=e("../../../Component");var n=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r._rectGeometry=new b.RectGeometry(r._tag.geometry.getRect2d(t));r._fill=!t.gpano?r._createFill():null;r._outline=r._tag.lineWidth>=1?r._createOutline():null;return r}e.prototype.dispose=function(){n.prototype.dispose.call(this);this._disposeFill();this._disposeOutline()};e.prototype.getDOMObjects=function(e,t,r){var n=[];var i={offsetHeight:r.height,offsetWidth:r.width};if(!this._tag.editable){return n}var o=this._colorToCss(this._tag.lineColor);var a=this._tag.geometry.getPoints2d();for(var s=0;s<a.length;s++){var u=a[s],c=u[0],l=u[1];var h=this._viewportCoords.basicToCanvasSafe(c,l,i,this._transform,t);if(h==null){continue}var p="crosshair";var f=this._interact(b.TagOperation.Vertex,p,s);var d=Math.round(h[0]);var v=Math.round(h[1]);var m="translate(-50%, -50%) translate("+d+"px,"+v+"px)";var g={onmousedown:f,style:{background:o,transform:m,cursor:p}};n.push(y.h("div.TagResizer",g,[]));if(!this._tag.indicateVertices){continue}var _={style:{background:o,transform:m}};n.push(y.h("div.TagVertex",_,[]))}return n};e.prototype.getGLObjects=function(){var e=[];if(this._fill!=null){e.push(this._fill)}if(this._outline!=null){e.push(this._outline)}return e};e.prototype.getRetrievableObjects=function(){return this._fill!=null?[this._fill]:[]};e.prototype._onGeometryChanged=function(){this._rectGeometry=new b.RectGeometry(this._tag.geometry.getRect2d(this._transform));if(this._fill!=null){this._updateFillGeometry()}if(this._outline!=null){this._updateOulineGeometry()}};e.prototype._onTagChanged=function(){var e=false;if(this._fill!=null){this._updateFillMaterial(this._fill.material)}if(this._outline==null){if(this._tag.lineWidth>=1){this._outline=this._createOutline();e=true}}else{this._updateOutlineMaterial()}return e};e.prototype._getPoints3d=function(){return this._rectGeometry.getPoints3d(this._transform)};e.prototype._getTriangles=function(){return this._rectGeometry.getTriangles3d(this._transform)};e.prototype._updateFillMaterial=function(e){e.color=new o.Color(this._tag.fillColor);e.opacity=this._tag.fillOpacity;e.needsUpdate=true};e.prototype._updateLineBasicMaterial=function(e){e.color=new o.Color(this._tag.lineColor);e.linewidth=Math.max(this._tag.lineWidth,1);e.visible=this._tag.lineWidth>=1&&this._tag.lineOpacity>0;e.opacity=this._tag.lineOpacity;e.transparent=this._tag.lineOpacity<1;e.needsUpdate=true};e.prototype._updateOutlineMaterial=function(){var e=this._outline.material;this._updateLineBasicMaterial(e)};return e}(b.OutlineRenderTagBase);r.ExtremePointRenderTag=n;r.default=n},{"../../../Component":291,three:242,"virtual-dom":247}],394:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ExtremePointTag=void 0;var i=e("../../../Component");var o=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t)||this;r=!!r?r:{};n._editable=r.editable==null?false:r.editable;n._fillColor=r.fillColor==null?16777215:r.fillColor;n._fillOpacity=r.fillOpacity==null?0:r.fillOpacity;n._indicateVertices=r.indicateVertices==null?true:r.indicateVertices;n._lineColor=r.lineColor==null?16777215:r.lineColor;n._lineOpacity=r.lineOpacity==null?1:r.lineOpacity;n._lineWidth=r.lineWidth==null?1:r.lineWidth;return n}Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(e){this._editable=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor},set:function(e){this._fillColor=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(e){this._fillOpacity=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"indicateVertices",{get:function(){return this._indicateVertices},set:function(e){this._indicateVertices=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"lineColor",{get:function(){return this._lineColor},set:function(e){this._lineColor=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"lineOpacity",{get:function(){return this._lineOpacity},set:function(e){this._lineOpacity=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(e){this._lineWidth=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});e.prototype.setOptions=function(e){this._editable=e.editable==null?this._editable:e.editable;this._indicateVertices=e.indicateVertices==null?this._indicateVertices:e.indicateVertices;this._lineColor=e.lineColor==null?this._lineColor:e.lineColor;this._lineWidth=e.lineWidth==null?this._lineWidth:e.lineWidth;this._fillColor=e.fillColor==null?this._fillColor:e.fillColor;this._fillOpacity=e.fillOpacity==null?this._fillOpacity:e.fillOpacity;this._notifyChanged$.next(this)};return e}(i.Tag);r.ExtremePointTag=o;r.default=o},{"../../../Component":291}],395:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.OutlineCreateTag=void 0;var k=e("virtual-dom");var L=e("../../../Component");var i=function(o){n(e,o);function e(e,t,r,n){var i=o.call(this,e,r,n)||this;i._options={color:t.color==null?16777215:t.color};i._createGlObjects();return i}e.prototype.create=function(){if(this._geometry instanceof L.RectGeometry){this._created$.next(this)}else if(this._geometry instanceof L.PolygonGeometry){var e=this._geometry;e.removeVertex2d(e.polygon.length-2);this._created$.next(this)}};e.prototype.dispose=function(){o.prototype.dispose.call(this);this._disposeLine(this._outline);this._disposeObjects()};e.prototype.getDOMObjects=function(e,t){var r=this;var n=[];var i={offsetHeight:t.height,offsetWidth:t.width};var o=function(e){e.stopPropagation();r._aborted$.next(r)};if(this._geometry instanceof L.RectGeometry){var a=this._geometry.anchorIndex;var s=a===undefined?1:a;var u=this._geometry.getVertex2d(s),c=u[0],l=u[1];var h=this._viewportCoords.basicToCanvasSafe(c,l,i,this._transform,e);if(h!=null){var p=this._colorToBackground(this._options.color);var f=this._canvasToTransform(h);var d={style:{background:p,transform:f}};var v={onclick:o,style:{transform:f}};n.push(k.h("div.TagInteractor",v,[]));n.push(k.h("div.TagVertex",d,[]))}}else if(this._geometry instanceof L.PolygonGeometry){var m=this._geometry;var g=m.getVertex2d(0),_=g[0],y=g[1];var b=this._viewportCoords.basicToCanvasSafe(_,y,i,this._transform,e);if(b!=null){var x=m.polygon.length>4?function(e){e.stopPropagation();m.removeVertex2d(m.polygon.length-2);r._created$.next(r)}:o;var f=this._canvasToTransform(b);var v={onclick:x,style:{transform:f}};var w=m.polygon.length>4?"TagCompleter":"TagInteractor";n.push(k.h("div."+w,v,[]))}if(m.polygon.length>3){var S=m.getVertex2d(m.polygon.length-3),M=S[0],C=S[1];var T=this._viewportCoords.basicToCanvasSafe(M,C,i,this._transform,e);if(T!=null){var E=function(e){e.stopPropagation();m.removeVertex2d(m.polygon.length-3)};var f=this._canvasToTransform(T);var v={onclick:E,style:{transform:f}};n.push(k.h("div.TagInteractor",v,[]))}}var O=m.polygon.slice();O.splice(-2,2);for(var P=0,A=O;P<A.length;P++){var j=A[P];var R=this._viewportCoords.basicToCanvasSafe(j[0],j[1],i,this._transform,e);if(R!=null){var p=this._colorToBackground(this._options.color);var f=this._canvasToTransform(R);var d={style:{background:p,transform:f}};n.push(k.h("div.TagVertex",d,[]))}}}return n};e.prototype.addPoint=function(e){if(this._geometry instanceof L.RectGeometry){var t=this._geometry;if(!t.validate(e)){return}this._created$.next(this)}else if(this._geometry instanceof L.PolygonGeometry){var r=this._geometry;r.addVertex2d(e)}};e.prototype._onGeometryChanged=function(){this._disposeLine(this._outline);this._disposeObjects();this._createGlObjects()};e.prototype._disposeObjects=function(){this._outline=null;this._glObjects=[]};e.prototype._createGlObjects=function(){var e=this._geometry instanceof L.RectGeometry?this._geometry.getPoints3d(this._transform):this._geometry.getVertices3d(this._transform);this._outline=this._createOutine(e,this._options.color);this._glObjects=[this._outline]};return e}(L.CreateTag);r.OutlineCreateTag=i;r.default=i},{"../../../Component":291,"virtual-dom":247}],396:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.OutlineRenderTag=void 0;var o=e("three");var G=e("virtual-dom");var V=e("../../../Component");var n=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r._fill=!t.gpano?r._createFill():t.fullPano&&e.domain===V.TagDomain.TwoDimensional&&e.geometry instanceof V.PolygonGeometry?r._createFill():null;r._holes=r._tag.lineWidth>=1?r._createHoles():[];r._outline=r._tag.lineWidth>=1?r._createOutline():null;return r}e.prototype.dispose=function(){n.prototype.dispose.call(this);this._disposeFill();this._disposeHoles();this._disposeOutline()};e.prototype.getDOMObjects=function(e,t,r){var n=this;var i=[];var o=this._tag.geometry instanceof V.RectGeometry;var a=!this._transform.gpano;var s={offsetHeight:r.height,offsetWidth:r.width};if(this._tag.icon!=null&&(o||a)){var u=this._tag.geometry instanceof V.RectGeometry?this._tag.geometry.getVertex2d(this._tag.iconIndex):this._tag.geometry.getPoleOfInaccessibility2d(),c=u[0],l=u[1];var h=this._viewportCoords.basicToCanvasSafe(c,l,s,this._transform,t);if(h!=null){var p=function(){n._interact$.next({offsetX:0,offsetY:0,operation:V.TagOperation.None,tag:n._tag})};if(e.loaded){var f=e.getDOMSprite(this._tag.icon,this._tag.iconFloat);var d=Math.round(h[0]);var v=Math.round(h[1]);var m="translate("+d+"px,"+v+"px)";var g=function(e){e.stopPropagation();n._tag.click$.next(n._tag)};var _={onclick:g,onmousedown:p,style:{transform:m}};i.push(G.h("div.TagSymbol",_,[f]))}}}else if(this._tag.text!=null&&(o||a)){var y=this._tag.geometry instanceof V.RectGeometry?this._tag.geometry.getVertex2d(3):this._tag.geometry.getPoleOfInaccessibility2d(),b=y[0],x=y[1];var w=this._viewportCoords.basicToCanvasSafe(b,x,s,this._transform,t);if(w!=null){var S=Math.round(w[0]);var M=Math.round(w[1]);var m=this._tag.geometry instanceof V.RectGeometry?"translate("+S+"px,"+M+"px)":"translate(-50%, -50%) translate("+S+"px,"+M+"px)";var p=function(){n._interact$.next({offsetX:0,offsetY:0,operation:V.TagOperation.None,tag:n._tag})};var _={onmousedown:p,style:{color:this._colorToCss(this._tag.textColor),transform:m},textContent:this._tag.text};i.push(G.h("span.TagSymbol",_,[]))}}if(!this._tag.editable){return i}var C=this._colorToCss(this._tag.lineColor);if(this._tag.geometry instanceof V.RectGeometry){var T=this._tag.geometry.getCentroid2d(),E=T[0],O=T[1];var P=this._viewportCoords.basicToCanvasSafe(E,O,s,this._transform,t);if(P!=null){var p=this._interact(V.TagOperation.Centroid,"move");var A=Math.round(P[0]);var j=Math.round(P[1]);var m="translate(-50%, -50%) translate("+A+"px,"+j+"px)";var _={onmousedown:p,style:{background:C,transform:m}};i.push(G.h("div.TagMover",_,[]))}}var R=this._tag.geometry.getVertices2d();for(var k=0;k<R.length-1;k++){if(o&&(this._tag.icon!=null&&k===this._tag.iconIndex||this._tag.icon==null&&this._tag.text!=null&&k===3)){continue}var L=R[k],N=L[0],I=L[1];var D=this._viewportCoords.basicToCanvasSafe(N,I,s,this._transform,t);if(D==null){continue}var B=o?k%2===0?"nesw-resize":"nwse-resize":"crosshair";var p=this._interact(V.TagOperation.Vertex,B,k);var F=Math.round(D[0]);var z=Math.round(D[1]);var m="translate(-50%, -50%) translate("+F+"px,"+z+"px)";var _={onmousedown:p,style:{background:C,transform:m,cursor:B}};i.push(G.h("div.TagResizer",_,[]));if(!this._tag.indicateVertices){continue}var $={style:{background:C,transform:m}};i.push(G.h("div.TagVertex",$,[]))}return i};e.prototype.getGLObjects=function(){var e=[];if(this._fill!=null){e.push(this._fill)}for(var t=0,r=this._holes;t<r.length;t++){var n=r[t];e.push(n)}if(this._outline!=null){e.push(this._outline)}return e};e.prototype.getRetrievableObjects=function(){return this._fill!=null?[this._fill]:[]};e.prototype._onGeometryChanged=function(){if(this._fill!=null){this._updateFillGeometry()}if(this._holes.length>0){this._updateHoleGeometries()}if(this._outline!=null){this._updateOulineGeometry()}};e.prototype._onTagChanged=function(){var e=false;if(this._fill!=null){this._updateFillMaterial(this._fill.material)}if(this._outline==null){if(this._tag.lineWidth>=1){this._holes=this._createHoles();this._outline=this._createOutline();e=true}}else{this._updateHoleMaterials();this._updateOutlineMaterial()}return e};e.prototype._getPoints3d=function(){return this._in3dDomain()?this._tag.geometry.getVertices3d(this._transform):this._tag.geometry.getPoints3d(this._transform)};e.prototype._getTriangles=function(){return this._in3dDomain()?this._tag.geometry.get3dDomainTriangles3d(this._transform):this._tag.geometry.getTriangles3d(this._transform)};e.prototype._updateFillMaterial=function(e){e.color=new o.Color(this._tag.fillColor);e.opacity=this._tag.fillOpacity;e.needsUpdate=true};e.prototype._updateLineBasicMaterial=function(e){e.color=new o.Color(this._tag.lineColor);e.linewidth=Math.max(this._tag.lineWidth,1);e.visible=this._tag.lineWidth>=1&&this._tag.lineOpacity>0;e.opacity=this._tag.lineOpacity;e.transparent=this._tag.lineOpacity<1;e.needsUpdate=true};e.prototype._createHoles=function(){var e=[];if(this._tag.geometry instanceof V.PolygonGeometry){var t=this._getHoles3d();for(var r=0,n=t;r<n.length;r++){var i=n[r];var o=this._createLine(i);e.push(o)}}return e};e.prototype._disposeHoles=function(){for(var e=0,t=this._holes;e<t.length;e++){var r=t[e];r.geometry.dispose();r.material.dispose()}this._holes=[]};e.prototype._getHoles3d=function(){var e=this._tag.geometry;return this._in3dDomain()?e.getHoleVertices3d(this._transform):e.getHolePoints3d(this._transform)};e.prototype._in3dDomain=function(){return this._tag.geometry instanceof V.PolygonGeometry&&this._tag.domain===V.TagDomain.ThreeDimensional};e.prototype._updateHoleGeometries=function(){var e=this._getHoles3d();if(e.length!==this._holes.length){throw new Error("Changing the number of holes is not supported.")}for(var t=0;t<this._holes.length;t++){var r=e[t];var n=this._holes[t];this._updateLine(n,r)}};e.prototype._updateHoleMaterials=function(){for(var e=0,t=this._holes;e<t.length;e++){var r=t[e];this._updateLineBasicMaterial(r.material)}};e.prototype._updateOutlineMaterial=function(){this._updateLineBasicMaterial(this._outline.material)};return e}(V.OutlineRenderTagBase);r.OutlineRenderTag=n},{"../../../Component":291,three:242,"virtual-dom":247}],397:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.OutlineRenderTagBase=void 0;var o=e("three");var n=e("../../../Component");var a=function(n){i(e,n);function e(e,t){var r=n.call(this,e,t)||this;r._geometryChangedSubscription=r._tag.geometry.changed$.subscribe(function(){r._onGeometryChanged()});r._changedSubscription=r._tag.changed$.subscribe(function(){var e=r._onTagChanged();if(e){r._glObjectsChanged$.next(r)}});return r}e.prototype.dispose=function(){this._changedSubscription.unsubscribe();this._geometryChangedSubscription.unsubscribe()};e.prototype._colorToCss=function(e){return"#"+("000000"+e.toString(16)).substr(-6)};e.prototype._createFill=function(){var e=this._getTriangles();var t=new Float32Array(e);var r=new o.BufferGeometry;r.setAttribute("position",new o.BufferAttribute(t,3));r.computeBoundingSphere();var n=new o.MeshBasicMaterial({side:o.DoubleSide,transparent:true});this._updateFillMaterial(n);return new o.Mesh(r,n)};e.prototype._createLine=function(e){var t=this._getLinePositions(e);var r=new o.BufferGeometry;r.setAttribute("position",new o.BufferAttribute(t,3));r.computeBoundingSphere();var n=new o.LineBasicMaterial;this._updateLineBasicMaterial(n);var i=new o.Line(r,n);i.renderOrder=1;return i};e.prototype._createOutline=function(){return this._createLine(this._getPoints3d())};e.prototype._disposeFill=function(){if(this._fill==null){return}this._fill.geometry.dispose();this._fill.material.dispose();this._fill=null};e.prototype._disposeOutline=function(){if(this._outline==null){return}this._outline.geometry.dispose();this._outline.material.dispose();this._outline=null};e.prototype._getLinePositions=function(e){var t=e.length;var r=new Float32Array(t*3);for(var n=0;n<t;++n){var i=3*n;var o=e[n];r[i+0]=o[0];r[i+1]=o[1];r[i+2]=o[2]}return r};e.prototype._interact=function(n,i,o){var a=this;return function(e){var t=e.offsetX-e.target.offsetWidth/2;var r=e.offsetY-e.target.offsetHeight/2;a._interact$.next({cursor:i,offsetX:t,offsetY:r,operation:n,tag:a._tag,vertexIndex:o})}};e.prototype._updateFillGeometry=function(){var e=this._getTriangles();var t=new Float32Array(e);var r=this._fill.geometry;var n=r.getAttribute("position");if(n.array.length===t.length){n.set(t);n.needsUpdate=true}else{r.removeAttribute("position");r.setAttribute("position",new o.BufferAttribute(t,3))}r.computeBoundingSphere()};e.prototype._updateLine=function(e,t){var r=this._getLinePositions(t);var n=e.geometry;var i=n.getAttribute("position");i.set(r);i.needsUpdate=true;n.computeBoundingSphere()};e.prototype._updateOulineGeometry=function(){this._updateLine(this._outline,this._getPoints3d())};return e}(n.RenderTag);r.OutlineRenderTagBase=a;r.default=a},{"../../../Component":291,three:242}],398:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.OutlineTag=void 0;var u=e("rxjs");var c=e("../../../Component");var l=e("../../../Viewer");var i=function(a){n(s,a);function s(e,t,r){var n=a.call(this,e,t)||this;r=!!r?r:{};var i=r.domain!=null&&t instanceof c.PolygonGeometry?r.domain:c.TagDomain.TwoDimensional;var o=n._twoDimensionalPolygon(i,t);n._domain=i;n._editable=r.editable==null||o?false:r.editable;n._fillColor=r.fillColor==null?16777215:r.fillColor;n._fillOpacity=r.fillOpacity==null?0:r.fillOpacity;n._icon=r.icon===undefined?null:r.icon;n._iconFloat=r.iconFloat==null?l.Alignment.Center:r.iconFloat;n._iconIndex=r.iconIndex==null?3:r.iconIndex;n._indicateVertices=r.indicateVertices==null?true:r.indicateVertices;n._lineColor=r.lineColor==null?16777215:r.lineColor;n._lineOpacity=r.lineOpacity==null?1:r.lineOpacity;n._lineWidth=r.lineWidth==null?1:r.lineWidth;n._text=r.text===undefined?null:r.text;n._textColor=r.textColor==null?16777215:r.textColor;n._click$=new u.Subject;n._click$.subscribe(function(e){n.fire(s.click,n)});return n}Object.defineProperty(s.prototype,"click$",{get:function(){return this._click$},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"domain",{get:function(){return this._domain},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"editable",{get:function(){return this._editable},set:function(e){if(this._twoDimensionalPolygon(this._domain,this._geometry)){return}this._editable=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"fillColor",{get:function(){return this._fillColor},set:function(e){this._fillColor=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(e){this._fillOpacity=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"geometry",{get:function(){return this._geometry},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"iconFloat",{get:function(){return this._iconFloat},set:function(e){this._iconFloat=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(e){this._iconIndex=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"indicateVertices",{get:function(){return this._indicateVertices},set:function(e){this._indicateVertices=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"lineColor",{get:function(){return this._lineColor},set:function(e){this._lineColor=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"lineOpacity",{get:function(){return this._lineOpacity},set:function(e){this._lineOpacity=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(e){this._lineWidth=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(s.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});s.prototype.setOptions=function(e){var t=this._twoDimensionalPolygon(this._domain,this._geometry);this._editable=t||e.editable==null?this._editable:e.editable;this._icon=e.icon===undefined?this._icon:e.icon;this._iconFloat=e.iconFloat==null?this._iconFloat:e.iconFloat;this._iconIndex=e.iconIndex==null?this._iconIndex:e.iconIndex;this._indicateVertices=e.indicateVertices==null?this._indicateVertices:e.indicateVertices;this._lineColor=e.lineColor==null?this._lineColor:e.lineColor;this._lineWidth=e.lineWidth==null?this._lineWidth:e.lineWidth;this._fillColor=e.fillColor==null?this._fillColor:e.fillColor;this._fillOpacity=e.fillOpacity==null?this._fillOpacity:e.fillOpacity;this._text=e.text===undefined?this._text:e.text;this._textColor=e.textColor==null?this._textColor:e.textColor;this._notifyChanged$.next(this)};s.prototype._twoDimensionalPolygon=function(e,t){return e!==c.TagDomain.ThreeDimensional&&t instanceof c.PolygonGeometry};s.click="click";return s}(c.Tag);r.OutlineTag=i;r.default=i},{"../../../Component":291,"../../../Viewer":302,rxjs:43}],399:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RenderTag=void 0;var n=e("rxjs");var i=e("../../../Geo");var o=function(){function e(e,t,r){this._tag=e;this._transform=t;this._viewportCoords=!!r?r:new i.ViewportCoords;this._glObjectsChanged$=new n.Subject;this._interact$=new n.Subject}Object.defineProperty(e.prototype,"glObjectsChanged$",{get:function(){return this._glObjectsChanged$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"interact$",{get:function(){return this._interact$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:false,configurable:true});return e}();r.RenderTag=o;r.default=o},{"../../../Geo":294,rxjs:43}],400:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.SpotRenderTag=void 0;var S=e("virtual-dom");var M=e("../../../Component");var C=e("../../../Viewer");var i=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.dispose=function(){};t.prototype.getDOMObjects=function(e,t,r){var n=this;var i=this._tag;var o={offsetHeight:r.height,offsetWidth:r.width};var a=[];var s=i.geometry.getCentroid2d(),u=s[0],c=s[1];var l=this._viewportCoords.basicToCanvasSafe(u,c,o,this._transform,t);if(l!=null){var h=function(e){n._interact$.next({offsetX:0,offsetY:0,operation:M.TagOperation.None,tag:i})};var p=Math.round(l[0]);var f=Math.round(l[1]);if(i.icon!=null){if(e.loaded){var d=e.getDOMSprite(i.icon,C.Alignment.Bottom);var v="translate("+p+"px,"+(f+8)+"px)";var m={onmousedown:h,style:{pointerEvents:"all",transform:v}};a.push(S.h("div",m,[d]))}}else if(i.text!=null){var g="translate(-50%,0%) translate("+p+"px,"+(f+8)+"px)";var m={onmousedown:h,style:{color:this._colorToCss(i.textColor),transform:g},textContent:i.text};a.push(S.h("span.TagSymbol",m,[]))}var _=this._interact(M.TagOperation.Centroid,i,"move");var y=this._colorToCss(i.color);var b="translate(-50%,-50%) translate("+p+"px,"+f+"px)";if(i.editable){var x={onmousedown:_,style:{background:y,transform:b}};a.push(S.h("div.TagSpotInteractor",x,[]))}var w={style:{background:y,transform:b}};a.push(S.h("div.TagVertex",w,[]))}return a};t.prototype.getGLObjects=function(){return[]};t.prototype.getRetrievableObjects=function(){return[]};t.prototype._colorToCss=function(e){return"#"+("000000"+e.toString(16)).substr(-6)};t.prototype._interact=function(n,i,o,a){var s=this;return function(e){var t=e.offsetX-e.target.offsetWidth/2;var r=e.offsetY-e.target.offsetHeight/2;s._interact$.next({cursor:o,offsetX:t,offsetY:r,operation:n,tag:i,vertexIndex:a})}};return t}(M.RenderTag);r.SpotRenderTag=i},{"../../../Component":291,"../../../Viewer":302,"virtual-dom":247}],401:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.SpotTag=void 0;var i=e("../../../Component");var o=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t)||this;r=!!r?r:{};n._color=r.color==null?16777215:r.color;n._editable=r.editable==null?false:r.editable;n._icon=r.icon===undefined?null:r.icon;n._text=r.text===undefined?null:r.text;n._textColor=r.textColor==null?16777215:r.textColor;return n}Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(e){this._editable=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor=e;this._notifyChanged$.next(this)},enumerable:false,configurable:true});e.prototype.setOptions=function(e){this._color=e.color==null?this._color:e.color;this._editable=e.editable==null?this._editable:e.editable;this._icon=e.icon===undefined?this._icon:e.icon;this._text=e.text===undefined?this._text:e.text;this._textColor=e.textColor==null?this._textColor:e.textColor;this._notifyChanged$.next(this)};return e}(i.Tag);r.SpotTag=o;r.default=o},{"../../../Component":291}],402:[function(e,t,r){"use strict";var o=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.Tag=void 0;var a=e("rxjs/operators");var s=e("rxjs");var n=e("../../../Utils");var i=function(n){o(i,n);function i(e,t){var r=n.call(this)||this;r._id=e;r._geometry=t;r._notifyChanged$=new s.Subject;r._notifyChanged$.subscribe(function(e){r.fire(i.changed,r)});r._geometry.changed$.subscribe(function(e){r.fire(i.geometrychanged,r)});return r}Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"changed$",{get:function(){return this._notifyChanged$},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"geometryChanged$",{get:function(){var t=this;return this._geometry.changed$.pipe(a.map(function(e){return t}),a.share())},enumerable:false,configurable:true});i.changed="changed";i.geometrychanged="geometrychanged";return i}(n.EventEmitter);r.Tag=i;r.default=i},{"../../../Utils":301,rxjs:43,"rxjs/operators":241}],403:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TagDomain=void 0;var n;(function(e){e[e["TwoDimensional"]=0]="TwoDimensional";e[e["ThreeDimensional"]=1]="ThreeDimensional"})(n=r.TagDomain||(r.TagDomain={}));r.default=n},{}],404:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ComponentSize=void 0;var n;(function(e){e[e["Automatic"]=0]="Automatic";e[e["Large"]=1]="Large";e[e["Small"]=2]="Small"})(n=r.ComponentSize||(r.ComponentSize={}));r.default=n},{}],405:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.HandlerBase=void 0;var n=function(){function e(e,t,r){this._component=e;this._container=t;this._navigator=r;this._enabled=false}Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:false,configurable:true});e.prototype.enable=function(){if(this._enabled||!this._component.activated){return}this._enable();this._enabled=true;this._component.configure(this._getConfiguration(true))};e.prototype.disable=function(){if(!this._enabled){return}this._disable();this._enabled=false;if(this._component.activated){this._component.configure(this._getConfiguration(false))}};return e}();r.HandlerBase=n;r.default=n},{}],406:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MeshFactory=void 0;var b=e("three");var l=e("../../Component");var n=function(){function e(e,t){this._imagePlaneDepth=e!=null?e:200;this._imageSphereRadius=t!=null?t:200}e.prototype.createMesh=function(e,t){if(e.pano){return this._createImageSphere(e,t)}else if(t.cameraProjection==="fisheye"){return this._createImagePlaneFisheye(e,t)}else{return this._createImagePlane(e,t)}};e.prototype.createFlatMesh=function(e,t,r,n,i,o){var a=this._createTexture(e.image);var s=this._createDistortedPlaneMaterialParameters(t,a);var u=new b.ShaderMaterial(s);var c=this._getFlatImagePlaneGeoFromBasic(t,r,n,i,o);return new b.Mesh(c,u)};e.prototype.createCurtainMesh=function(e,t){if(e.pano&&!e.fullPano){throw new Error("Cropped panoramas cannot have curtain.")}if(e.pano){return this._createSphereCurtainMesh(e,t)}else if(t.cameraProjection==="fisheye"){return this._createCurtainMeshFisheye(e,t)}else{return this._createCurtainMesh(e,t)}};e.prototype.createDistortedCurtainMesh=function(e,t){if(e.pano){throw new Error("Cropped panoramas cannot have curtain.")}return this._createDistortedCurtainMesh(e,t)};e.prototype._createCurtainMesh=function(e,t){var r=this._createTexture(e.image);var n=this._createCurtainPlaneMaterialParameters(t,r);var i=new b.ShaderMaterial(n);var o=this._useMesh(t,e)?this._getImagePlaneGeo(t,e):this._getRegularFlatImagePlaneGeo(t);return new b.Mesh(o,i)};e.prototype._createCurtainMeshFisheye=function(e,t){var r=this._createTexture(e.image);var n=this._createCurtainPlaneMaterialParametersFisheye(t,r);var i=new b.ShaderMaterial(n);var o=this._useMesh(t,e)?this._getImagePlaneGeoFisheye(t,e):this._getRegularFlatImagePlaneGeo(t);return new b.Mesh(o,i)};e.prototype._createDistortedCurtainMesh=function(e,t){var r=this._createTexture(e.image);var n=this._createDistortedCurtainPlaneMaterialParameters(t,r);var i=new b.ShaderMaterial(n);var o=this._getRegularFlatImagePlaneGeo(t);return new b.Mesh(o,i)};e.prototype._createSphereCurtainMesh=function(e,t){var r=this._createTexture(e.image);var n=this._createCurtainSphereMaterialParameters(t,r);var i=new b.ShaderMaterial(n);return this._useMesh(t,e)?new b.Mesh(this._getImageSphereGeo(t,e),i):new b.Mesh(this._getFlatImageSphereGeo(t),i)};e.prototype._createImageSphere=function(e,t){var r=this._createTexture(e.image);var n=this._createSphereMaterialParameters(t,r);var i=new b.ShaderMaterial(n);var o=this._useMesh(t,e)?new b.Mesh(this._getImageSphereGeo(t,e),i):new b.Mesh(this._getFlatImageSphereGeo(t),i);return o};e.prototype._createImagePlane=function(e,t){var r=this._createTexture(e.image);var n=this._createPlaneMaterialParameters(t,r);var i=new b.ShaderMaterial(n);var o=this._useMesh(t,e)?this._getImagePlaneGeo(t,e):this._getRegularFlatImagePlaneGeo(t);return new b.Mesh(o,i)};e.prototype._createImagePlaneFisheye=function(e,t){var r=this._createTexture(e.image);var n=this._createPlaneMaterialParametersFisheye(t,r);var i=new b.ShaderMaterial(n);var o=this._useMesh(t,e)?this._getImagePlaneGeoFisheye(t,e):this._getRegularFlatImagePlaneGeoFisheye(t);return new b.Mesh(o,i)};e.prototype._createSphereMaterialParameters=function(e,t){var r=e.gpano;var n=(r.FullPanoWidthPixels-r.CroppedAreaImageWidthPixels)/2;var i=2*Math.PI*(r.CroppedAreaLeftPixels-n)/r.FullPanoWidthPixels;var o=2*Math.PI*r.CroppedAreaImageWidthPixels/r.FullPanoWidthPixels;var a=(r.FullPanoHeightPixels-r.CroppedAreaImageHeightPixels)/2;var s=Math.PI*(a-r.CroppedAreaTopPixels)/r.FullPanoHeightPixels;var u=Math.PI*r.CroppedAreaImageHeightPixels/r.FullPanoHeightPixels;var c={depthWrite:false,fragmentShader:l.Shaders.equirectangular.fragment,side:b.DoubleSide,transparent:true,uniforms:{opacity:{value:1},phiLength:{value:o},phiShift:{value:i},projectorMat:{value:e.rt},projectorTex:{value:t},thetaLength:{value:u},thetaShift:{value:s}},vertexShader:l.Shaders.equirectangular.vertex};return c};e.prototype._createCurtainSphereMaterialParameters=function(e,t){var r=e.gpano;var n=(r.FullPanoWidthPixels-r.CroppedAreaImageWidthPixels)/2;var i=2*Math.PI*(r.CroppedAreaLeftPixels-n)/r.FullPanoWidthPixels;var o=2*Math.PI*r.CroppedAreaImageWidthPixels/r.FullPanoWidthPixels;var a=(r.FullPanoHeightPixels-r.CroppedAreaImageHeightPixels)/2;var s=Math.PI*(a-r.CroppedAreaTopPixels)/r.FullPanoHeightPixels;var u=Math.PI*r.CroppedAreaImageHeightPixels/r.FullPanoHeightPixels;var c={depthWrite:false,fragmentShader:l.Shaders.equirectangularCurtain.fragment,side:b.DoubleSide,transparent:true,uniforms:{curtain:{value:1},opacity:{value:1},phiLength:{value:o},phiShift:{value:i},projectorMat:{value:e.rt},projectorTex:{value:t},thetaLength:{value:u},thetaShift:{value:s}},vertexShader:l.Shaders.equirectangularCurtain.vertex};return c};e.prototype._createPlaneMaterialParameters=function(e,t){var r={depthWrite:false,fragmentShader:l.Shaders.perspective.fragment,side:b.DoubleSide,transparent:true,uniforms:{focal:{value:e.focal},k1:{value:e.ck1},k2:{value:e.ck2},opacity:{value:1},projectorMat:{value:e.basicRt},projectorTex:{value:t},radial_peak:{value:!!e.radialPeak?e.radialPeak:0},scale_x:{value:Math.max(e.basicHeight,e.basicWidth)/e.basicWidth},scale_y:{value:Math.max(e.basicWidth,e.basicHeight)/e.basicHeight}},vertexShader:l.Shaders.perspective.vertex};return r};e.prototype._createPlaneMaterialParametersFisheye=function(e,t){var r={depthWrite:false,fragmentShader:l.Shaders.fisheye.fragment,side:b.DoubleSide,transparent:true,uniforms:{focal:{value:e.focal},k1:{value:e.ck1},k2:{value:e.ck2},opacity:{value:1},projectorMat:{value:e.basicRt},projectorTex:{value:t},radial_peak:{value:!!e.radialPeak?e.radialPeak:0},scale_x:{value:Math.max(e.basicHeight,e.basicWidth)/e.basicWidth},scale_y:{value:Math.max(e.basicWidth,e.basicHeight)/e.basicHeight}},vertexShader:l.Shaders.fisheye.vertex};return r};e.prototype._createCurtainPlaneMaterialParametersFisheye=function(e,t){var r={depthWrite:false,fragmentShader:l.Shaders.fisheyeCurtain.fragment,side:b.DoubleSide,transparent:true,uniforms:{curtain:{value:1},focal:{value:e.focal},k1:{value:e.ck1},k2:{value:e.ck2},opacity:{value:1},projectorMat:{value:e.basicRt},projectorTex:{value:t},radial_peak:{value:!!e.radialPeak?e.radialPeak:0},scale_x:{value:Math.max(e.basicHeight,e.basicWidth)/e.basicWidth},scale_y:{value:Math.max(e.basicWidth,e.basicHeight)/e.basicHeight}},vertexShader:l.Shaders.fisheyeCurtain.vertex};return r};e.prototype._createCurtainPlaneMaterialParameters=function(e,t){var r={depthWrite:false,fragmentShader:l.Shaders.perspectiveCurtain.fragment,side:b.DoubleSide,transparent:true,uniforms:{curtain:{value:1},focal:{value:e.focal},k1:{value:e.ck1},k2:{value:e.ck2},opacity:{value:1},projectorMat:{value:e.basicRt},projectorTex:{value:t},radial_peak:{value:!!e.radialPeak?e.radialPeak:0},scale_x:{value:Math.max(e.basicHeight,e.basicWidth)/e.basicWidth},scale_y:{value:Math.max(e.basicWidth,e.basicHeight)/e.basicHeight}},vertexShader:l.Shaders.perspectiveCurtain.vertex};return r};e.prototype._createDistortedCurtainPlaneMaterialParameters=function(e,t){var r={depthWrite:false,fragmentShader:l.Shaders.perspectiveDistortedCurtain.fragment,side:b.DoubleSide,transparent:true,uniforms:{curtain:{value:1},opacity:{value:1},projectorMat:{value:e.projectorMatrix()},projectorTex:{value:t}},vertexShader:l.Shaders.perspectiveDistortedCurtain.vertex};return r};e.prototype._createDistortedPlaneMaterialParameters=function(e,t){var r={depthWrite:false,fragmentShader:l.Shaders.perspectiveDistorted.fragment,side:b.DoubleSide,transparent:true,uniforms:{opacity:{value:1},projectorMat:{value:e.projectorMatrix()},projectorTex:{value:t}},vertexShader:l.Shaders.perspectiveDistorted.vertex};return r};e.prototype._createTexture=function(e){var t=new b.Texture(e);t.minFilter=b.LinearFilter;t.needsUpdate=true;return t};e.prototype._useMesh=function(e,t){return t.mesh.vertices.length&&e.hasValidScale};e.prototype._getImageSphereGeo=function(e,t){var r=(new b.Matrix4).getInverse(e.srt);var n=5*e.scale;var i=this._imageSphereRadius*e.scale;var o=t.mesh.vertices;var a=o.length/3;var s=new Float32Array(o.length);for(var u=0;u<a;++u){var c=3*u;var l=o[c+0];var h=o[c+1];var p=o[c+2];var f=Math.sqrt(l*l+h*h+p*p);var d=Math.max(n,Math.min(f,i));var v=d/f;var m=new b.Vector3(l*v,h*v,p*v);m.applyMatrix4(r);s[c+0]=m.x;s[c+1]=m.y;s[c+2]=m.z}var g=t.mesh.faces;var _=new Uint16Array(g.length);for(var u=0;u<g.length;++u){_[u]=g[u]}var y=new b.BufferGeometry;y.setAttribute("position",new b.BufferAttribute(s,3));y.setIndex(new b.BufferAttribute(_,1));return y};e.prototype._getImagePlaneGeo=function(e,t){var r=3;var n=(new b.Matrix4).getInverse(e.srt);var i=5*e.scale;var o=this._imagePlaneDepth*e.scale;var a=t.mesh.vertices;var s=a.length/3;var u=new Float32Array(a.length);for(var c=0;c<s;++c){var l=3*c;var h=a[l+0];var p=a[l+1];var f=a[l+2];if(c<4){h*=r;p*=r}var d=Math.max(i,Math.min(f,o));var v=d/f;var m=new b.Vector3(h*v,p*v,d);m.applyMatrix4(n);u[l+0]=m.x;u[l+1]=m.y;u[l+2]=m.z}var g=t.mesh.faces;var _=new Uint16Array(g.length);for(var c=0;c<g.length;++c){_[c]=g[c]}var y=new b.BufferGeometry;y.setAttribute("position",new b.BufferAttribute(u,3));y.setIndex(new b.BufferAttribute(_,1));return y};e.prototype._getImagePlaneGeoFisheye=function(e,t){var r=(new b.Matrix4).getInverse(e.srt);var n=5*e.scale;var i=this._imagePlaneDepth*e.scale;var o=t.mesh.vertices;var a=o.length/3;var s=new Float32Array(o.length);for(var u=0;u<a;++u){var c=3*u;var l=o[c+0];var h=o[c+1];var p=o[c+2];var f=Math.sqrt(l*l+h*h+p*p);var d=Math.max(n,Math.min(f,i));var v=d/f;var m=new b.Vector3(l*v,h*v,p*v);m.applyMatrix4(r);s[c+0]=m.x;s[c+1]=m.y;s[c+2]=m.z}var g=t.mesh.faces;var _=new Uint16Array(g.length);for(var u=0;u<g.length;++u){_[u]=g[u]}var y=new b.BufferGeometry;y.setAttribute("position",new b.BufferAttribute(s,3));y.setIndex(new b.BufferAttribute(_,1));return y};e.prototype._getFlatImageSphereGeo=function(e){var t=e.gpano;var r=2*Math.PI*t.CroppedAreaLeftPixels/t.FullPanoWidthPixels;var n=2*Math.PI*t.CroppedAreaImageWidthPixels/t.FullPanoWidthPixels;var i=Math.PI*(t.FullPanoHeightPixels-t.CroppedAreaImageHeightPixels-t.CroppedAreaTopPixels)/t.FullPanoHeightPixels;var o=Math.PI*t.CroppedAreaImageHeightPixels/t.FullPanoHeightPixels;var a=new b.SphereGeometry(this._imageSphereRadius,20,40,r-Math.PI/2,n,i,o);a.applyMatrix4((new b.Matrix4).getInverse(e.rt));return a};e.prototype._getRegularFlatImagePlaneGeo=function(e){var t=e.width;var r=e.height;var n=Math.max(t,r);var i=t/2/n;var o=r/2/n;return this._getFlatImagePlaneGeo(e,i,o)};e.prototype._getFlatImagePlaneGeo=function(e,t,r){var n=[];n.push(e.unprojectSfM([-t,-r],this._imagePlaneDepth));n.push(e.unprojectSfM([t,-r],this._imagePlaneDepth));n.push(e.unprojectSfM([t,r],this._imagePlaneDepth));n.push(e.unprojectSfM([-t,r],this._imagePlaneDepth));return this._createFlatGeometry(n)};e.prototype._getRegularFlatImagePlaneGeoFisheye=function(e){var t=e.width;var r=e.height;var n=Math.max(t,r);var i=t/2/n;var o=r/2/n;return this._getFlatImagePlaneGeoFisheye(e,i,o)};e.prototype._getFlatImagePlaneGeoFisheye=function(e,t,r){var n=[];n.push(e.unprojectSfM([-t,-r],this._imagePlaneDepth));n.push(e.unprojectSfM([t,-r],this._imagePlaneDepth));n.push(e.unprojectSfM([t,r],this._imagePlaneDepth));n.push(e.unprojectSfM([-t,r],this._imagePlaneDepth));return this._createFlatGeometry(n)};e.prototype._getFlatImagePlaneGeoFromBasic=function(e,t,r,n,i){var o=[];o.push(e.unprojectBasic([t,n],this._imagePlaneDepth));o.push(e.unprojectBasic([r,n],this._imagePlaneDepth));o.push(e.unprojectBasic([r,i],this._imagePlaneDepth));o.push(e.unprojectBasic([t,i],this._imagePlaneDepth));return this._createFlatGeometry(o)};e.prototype._createFlatGeometry=function(e){var t=new Float32Array(12);for(var r=0;r<e.length;r++){var n=3*r;t[n+0]=e[r][0];t[n+1]=e[r][1];t[n+2]=e[r][2]}var i=new Uint16Array(6);i[0]=0;i[1]=1;i[2]=3;i[3]=1;i[4]=2;i[5]=3;var o=new b.BufferGeometry;o.setAttribute("position",new b.BufferAttribute(t,3));o.setIndex(new b.BufferAttribute(i,1));return o};return e}();r.MeshFactory=n;r.default=n},{"../../Component":291,three:242}],407:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MeshScene=void 0;var n=e("three");var i=function(){function e(){this._planes={};this._planesOld={};this._planesPeriphery={};this._scene=new n.Scene;this._sceneOld=new n.Scene;this._scenePeriphery=new n.Scene}Object.defineProperty(e.prototype,"planes",{get:function(){return this._planes},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"planesOld",{get:function(){return this._planesOld},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"planesPeriphery",{get:function(){return this._planesPeriphery},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sceneOld",{get:function(){return this._sceneOld},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"scenePeriphery",{get:function(){return this._scenePeriphery},enumerable:false,configurable:true});e.prototype.updateImagePlanes=function(e){this._dispose(this._planesOld,this.sceneOld);for(var t in this._planes){if(!this._planes.hasOwnProperty(t)){continue}var r=this._planes[t];this._scene.remove(r);this._sceneOld.add(r)}for(var t in e){if(!e.hasOwnProperty(t)){continue}this._scene.add(e[t])}this._planesOld=this._planes;this._planes=e};e.prototype.addImagePlanes=function(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=e[t];this._scene.add(r);this._planes[t]=r}};e.prototype.addImagePlanesOld=function(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=e[t];this._sceneOld.add(r);this._planesOld[t]=r}};e.prototype.setImagePlanes=function(e){this._clear();this.addImagePlanes(e)};e.prototype.addPeripheryPlanes=function(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=e[t];this._scenePeriphery.add(r);this._planesPeriphery[t]=r}};e.prototype.setPeripheryPlanes=function(e){this._clearPeriphery();this.addPeripheryPlanes(e)};e.prototype.setImagePlanesOld=function(e){this._clearOld();this.addImagePlanesOld(e)};e.prototype.clear=function(){this._clear();this._clearOld()};e.prototype._clear=function(){this._dispose(this._planes,this._scene);this._planes={}};e.prototype._clearOld=function(){this._dispose(this._planesOld,this._sceneOld);this._planesOld={}};e.prototype._clearPeriphery=function(){this._dispose(this._planesPeriphery,this._scenePeriphery);this._planesPeriphery={}};e.prototype._dispose=function(e,t){for(var r in e){if(!e.hasOwnProperty(r)){continue}var n=e[r];t.remove(n);n.geometry.dispose();n.material.dispose();var i=n.material.uniforms.projectorTex.value;if(i!=null){i.dispose()}}};return e}();r.MeshScene=i;r.default=i},{three:242}],408:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MouseOperator=void 0;var o=e("rxjs");var a=e("rxjs/operators");var n=function(){function e(){}e.filteredPairwiseMouseDrag$=function(n,i){return i.filtered$(n,i.mouseDragStart$).pipe(a.switchMap(function(e){var t=o.concat(o.of(e),i.filtered$(n,i.mouseDrag$));var r=i.filtered$(n,i.mouseDragEnd$).pipe(a.map(function(){return null}));return o.merge(t,r).pipe(a.takeWhile(function(e){return!!e}),a.startWith(null))}),a.pairwise(),a.filter(function(e){return e[0]!=null&&e[1]!=null}))};return e}();r.MouseOperator=n;r.default=n},{rxjs:43,"rxjs/operators":241}],409:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ZoomComponent=void 0;var o=e("rxjs");var a=e("rxjs/operators");var p=e("virtual-dom");var i=e("../../Component");var s=e("../../Geo");var f=e("../../State");var d=e("../utils/ComponentSize");var u=function(i){n(e,i);function e(e,t,r){var n=i.call(this,e,t,r)||this;n._viewportCoords=new s.ViewportCoords;n._zoomDelta$=new o.Subject;return n}e.prototype._activate=function(){var h=this;this._renderSubscription=o.combineLatest(this._navigator.stateService.currentState$,this._navigator.stateService.state$,this._configuration$,this._container.renderService.size$).pipe(a.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];var o=t.state.zoom;var a=p.h("div.ZoomInIcon",[]);var s=o>=3||r===f.State.Waiting?p.h("div.ZoomInButtonDisabled",[a]):p.h("div.ZoomInButton",{onclick:function(){h._zoomDelta$.next(1)}},[a]);var u=p.h("div.ZoomOutIcon",[]);var c=o<=0||r===f.State.Waiting?p.h("div.ZoomOutButtonDisabled",[u]):p.h("div.ZoomOutButton",{onclick:function(){h._zoomDelta$.next(-1)}},[u]);var l=n.size===d.default.Small||n.size===d.default.Automatic&&i.width<640?".ZoomCompact":"";return{name:h._name,vnode:p.h("div.ZoomContainer"+l,{oncontextmenu:function(e){e.preventDefault()}},[s,c])}})).subscribe(this._container.domRenderer.render$);this._zoomSubscription=this._zoomDelta$.pipe(a.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$)).subscribe(function(e){var t=e[0],r=e[1],n=e[2];var i=h._viewportCoords.unprojectFromViewport(0,0,r.perspective);var o=n.projectBasic(i.toArray());h._navigator.stateService.zoomIn(t,o)})};e.prototype._deactivate=function(){this._renderSubscription.unsubscribe();this._zoomSubscription.unsubscribe()};e.prototype._getDefaultConfiguration=function(){return{size:d.default.Automatic}};e.componentName="zoom";return e}(i.Component);r.ZoomComponent=u;i.ComponentService.register(u);r.default=u},{"../../Component":291,"../../Geo":294,"../../State":298,"../utils/ComponentSize":404,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],410:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.AbortMapillaryError=void 0;var n=e("./MapillaryError");var o=function(r){i(n,r);function n(e){var t=r.call(this,e!=null?e:"The request was aborted.")||this;Object.setPrototypeOf(t,n.prototype);t.name="AbortMapillaryError";return t}return n}(n.MapillaryError);r.AbortMapillaryError=o;r.default=o},{"./MapillaryError":413}],411:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.ArgumentMapillaryError=void 0;var n=e("./MapillaryError");var o=function(r){i(n,r);function n(e){var t=r.call(this,e!=null?e:"The argument is not valid.")||this;Object.setPrototypeOf(t,n.prototype);t.name="ArgumentMapillaryError";return t}return n}(n.MapillaryError);r.ArgumentMapillaryError=o;r.default=o},{"./MapillaryError":413}],412:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.GraphMapillaryError=void 0;var n=e("./MapillaryError");var o=function(r){i(n,r);function n(e){var t=r.call(this,e)||this;Object.setPrototypeOf(t,n.prototype);t.name="GraphMapillaryError";return t}return n}(n.MapillaryError);r.GraphMapillaryError=o;r.default=o},{"./MapillaryError":413}],413:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.MapillaryError=void 0;var n=function(r){i(n,r);function n(e){var t=r.call(this,e)||this;Object.setPrototypeOf(t,n.prototype);t.name="MapillaryError";return t}return n}(Error);r.MapillaryError=n;r.default=n},{}],414:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Camera=void 0;var n=e("three");var i=function(){function t(e){if(e!=null){this._position=(new n.Vector3).fromArray(e.unprojectSfM([0,0],0));this._lookat=(new n.Vector3).fromArray(e.unprojectSfM([0,0],10));this._up=e.upVector();this._focal=this._getFocal(e)}else{this._position=new n.Vector3(0,0,0);this._lookat=new n.Vector3(0,0,1);this._up=new n.Vector3(0,-1,0);this._focal=1}}Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lookat",{get:function(){return this._lookat},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"up",{get:function(){return this._up},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"focal",{get:function(){return this._focal},set:function(e){this._focal=e},enumerable:false,configurable:true});t.prototype.lerpCameras=function(e,t,r){this._position.subVectors(t.position,e.position).multiplyScalar(r).add(e.position);this._lookat.subVectors(t.lookat,e.lookat).multiplyScalar(r).add(e.lookat);this._up.subVectors(t.up,e.up).multiplyScalar(r).add(e.up);this._focal=(1-r)*e.focal+r*t.focal};t.prototype.copy=function(e){this._position.copy(e.position);this._lookat.copy(e.lookat);this._up.copy(e.up);this._focal=e.focal};t.prototype.clone=function(){var e=new t;e.position.copy(this._position);e.lookat.copy(this._lookat);e.up.copy(this._up);e.focal=this._focal;return e};t.prototype.diff=function(e){var t=this._position.distanceToSquared(e.position);var r=this._lookat.distanceToSquared(e.lookat);var n=this._up.distanceToSquared(e.up);var i=100*Math.abs(this._focal-e.focal);return Math.max(t,r,n,i)};t.prototype._getFocal=function(e){if(e.gpano==null){return e.focal}var t=Math.PI*e.gpano.CroppedAreaImageHeightPixels/e.gpano.FullPanoHeightPixels;var r=.5/Math.tan(t/2);return Math.min(1/(2*(Math.sqrt(2)-1)),Math.max(.5,r))};return t}();r.Camera=i},{three:242}],415:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.computeProjectedPoints=r.computeTranslation=void 0;var p=e("three");var n=e("../Geo");var a=new n.GeoCoords;var s=new n.Spatial;function i(e,t,r){var n=a.geodeticToEnu(e.lat,e.lon,e.alt,r.lat,r.lon,r.alt);var i=s.rotate(n,t);var o=[-i.x,-i.y,-i.z];return o}r.computeTranslation=i;function o(n,e,t,r,i){var o=[];for(var a=0;a<e.length;++a){var s=e[a];var u=t[a];for(var c=0;c<=r;++c){o.push([s[0]+u[0]*c/r,s[1]+u[1]*c/r])}}var l=new p.Camera;l.up.copy(n.upVector());l.position.copy((new p.Vector3).fromArray(n.unprojectSfM([0,0],0)));l.lookAt((new p.Vector3).fromArray(n.unprojectSfM([0,0],10)));l.updateMatrix();l.updateMatrixWorld(true);var h=o.map(function(e){var t=n.unprojectBasic(e,1e4);var r=i.worldToCamera(t,l);return[Math.abs(r[0]/r[2]),Math.abs(r[1]/r[2])]});return h}r.computeProjectedPoints=o},{"../Geo":294,three:242}],416:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GeoCoords=void 0;var n=function(){function e(){this._wgs84a=6378137;this._wgs84b=6356752.31424518}e.prototype.geodeticToEnu=function(e,t,r,n,i,o){var a=this.geodeticToEcef(e,t,r);return this.ecefToEnu(a[0],a[1],a[2],n,i,o)};e.prototype.enuToGeodetic=function(e,t,r,n,i,o){var a=this.enuToEcef(e,t,r,n,i,o);return this.ecefToGeodetic(a[0],a[1],a[2])};e.prototype.ecefToEnu=function(e,t,r,n,i,o){var a=this.geodeticToEcef(n,i,o);var s=[e-a[0],t-a[1],r-a[2]];n=n*Math.PI/180;i=i*Math.PI/180;var u=Math.cos(n);var c=Math.sin(n);var l=Math.cos(i);var h=Math.sin(i);var p=-h*s[0]+l*s[1];var f=-c*l*s[0]-c*h*s[1]+u*s[2];var d=u*l*s[0]+u*h*s[1]+c*s[2];return[p,f,d]};e.prototype.enuToEcef=function(e,t,r,n,i,o){var a=this.geodeticToEcef(n,i,o);n=n*Math.PI/180;i=i*Math.PI/180;var s=Math.cos(n);var u=Math.sin(n);var c=Math.cos(i);var l=Math.sin(i);var h=-l*e-u*c*t+s*c*r+a[0];var p=c*e-u*l*t+s*l*r+a[1];var f=s*t+u*r+a[2];return[h,p,f]};e.prototype.geodeticToEcef=function(e,t,r){var n=this._wgs84a;var i=this._wgs84b;e=e*Math.PI/180;t=t*Math.PI/180;var o=Math.cos(e);var a=Math.sin(e);var s=Math.cos(t);var u=Math.sin(t);var c=n*n;var l=i*i;var h=1/Math.sqrt(c*o*o+l*a*a);var p=(c*h+r)*o;var f=p*s;var d=p*u;var v=(l*h+r)*a;return[f,d,v]};e.prototype.ecefToGeodetic=function(e,t,r){var n=this._wgs84a;var i=this._wgs84b;var o=n*n;var a=i*i;var s=o-a;var u=Math.sqrt(s/o);var c=Math.sqrt(s/a);var l=Math.sqrt(e*e+t*t);var h=Math.atan2(r*n,l*i);var p=Math.sin(h);var f=Math.cos(h);var d=Math.atan2(t,e);var v=Math.atan2(r+c*c*i*p*p*p,l-u*u*n*f*f*f);var m=Math.sin(v);var g=Math.cos(v);var _=n/Math.sqrt(1-u*u*m*m);var y=l/g-_;return[v*180/Math.PI,d*180/Math.PI,y]};return e}();r.GeoCoords=n;r.default=n},{}],417:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.GeoRBush=void 0;var i=e("rbush");var o=function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.compareMinX=function(e,t){return e.lat-t.lat};t.prototype.compareMinY=function(e,t){return e.lon-t.lon};t.prototype.toBBox=function(e){return{minX:e.lat,minY:e.lon,maxX:e.lat,maxY:e.lon}};return t}(i);r.GeoRBush=o;r.default=o},{rbush:42}],418:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.segmentIntersection=r.segmentsIntersect=void 0;function i(e){return e>0?1:e<0?-1:0}function a(e,t){return e.x<=Math.max(t.p1.x,t.p2.x)&&e.x>=Math.min(t.p1.x,t.p2.x)&&e.y>=Math.max(t.p1.y,t.p2.y)&&e.y>=Math.min(t.p1.y,t.p2.y)}function f(e,t){var r=e.p2.x-e.p1.x;var n=e.p2.y-e.p1.y;var i=t.p2.x-t.p1.x;var o=t.p2.y-t.p1.y;var a=r*o-n*i;var s=r*r+n*n;var u=i*i+o*o;var c=1e-10;return a*a<c*s*u}function s(e,t,r){var n=(t.y-e.y)*(r.x-t.x)-(r.y-t.y)*(t.x-e.x);return i(n)}function n(e,t){if(f(e,t)){return false}var r=s(e.p1,e.p2,t.p1);var n=s(e.p1,e.p2,t.p2);var i=s(t.p1,t.p2,e.p1);var o=s(t.p1,t.p2,e.p2);if(r!==n&&i!==o){return true}if(r===0&&a(t.p1,e)){return true}if(n===0&&a(t.p2,e)){return true}if(i===0&&a(e.p1,t)){return true}if(o===0&&a(e.p2,t)){return true}return false}r.segmentsIntersect=n;function o(e,t){if(f(e,t)){return undefined}var r=e.p1.x;var n=e.p2.x;var i=e.p1.y;var o=e.p2.y;var a=t.p1.x;var s=t.p2.x;var u=t.p1.y;var c=t.p2.y;var l=(r-n)*(u-c)-(i-o)*(a-s);var h=(r*o-i*n)*(a-s)-(r-n)*(a*c-u*s);var p=(r*o-i*n)*(u-c)-(i-o)*(a*c-u*s);return{x:h/l,y:p/l}}r.segmentIntersection=o},{}],419:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Spatial=void 0;var a=e("three");var n=function(){function e(){this._epsilon=1e-9}e.prototype.azimuthalToBearing=function(e){return-e+Math.PI/2};e.prototype.degToRad=function(e){return Math.PI*e/180};e.prototype.radToDeg=function(e){return 180*e/Math.PI};e.prototype.rotationMatrix=function(e){var t=new a.Vector3(e[0],e[1],e[2]);var r=t.length();if(r>0){t.normalize()}return(new a.Matrix4).makeRotationAxis(t,r)};e.prototype.rotate=function(e,t){var r=new a.Vector3(e[0],e[1],e[2]);var n=this.rotationMatrix(t);r.applyMatrix4(n);return r};e.prototype.opticalCenter=function(e,t){var r=[-e[0],-e[1],-e[2]];var n=[-t[0],-t[1],-t[2]];return this.rotate(n,r)};e.prototype.viewingDirection=function(e){var t=[-e[0],-e[1],-e[2]];return this.rotate([0,0,1],t)};e.prototype.wrap=function(e,t,r){if(r<t){throw new Error("Invalid arguments: max must be larger than min.")}var n=r-t;while(e>r||e<t){if(e>r){e=e-n}else if(e<t){e=e+n}}return e};e.prototype.wrapAngle=function(e){return this.wrap(e,-Math.PI,Math.PI)};e.prototype.clamp=function(e,t,r){if(e<t){return t}if(e>r){return r}return e};e.prototype.angleBetweenVector2=function(e,t,r,n){var i=Math.atan2(n,r)-Math.atan2(t,e);return this.wrapAngle(i)};e.prototype.angleDifference=function(e,t){var r=t-e;return this.wrapAngle(r)};e.prototype.relativeRotationAngle=function(e,t){var r=this.rotationMatrix([-e[0],-e[1],-e[2]]);var n=this.rotationMatrix(t);var i=r.multiply(n);var o=i.elements;var a=o[0]+o[5]+o[10];var s=Math.acos(Math.max(Math.min((a-1)/2,1),-1));return s};e.prototype.angleToPlane=function(e,t){var r=(new a.Vector3).fromArray(e);var n=r.length();if(n<this._epsilon){return 0}var i=r.dot((new a.Vector3).fromArray(t));return Math.asin(i/n)};e.prototype.azimuthal=function(e,t){var r=(new a.Vector3).fromArray(e);var n=(new a.Vector3).fromArray(t);var i=r.clone().dot(n);var o=r.clone().sub(n.clone().multiplyScalar(i));return Math.atan2(o.y,o.x)};e.prototype.distanceFromLatLon=function(e,t,r,n){var i=6371e3;var o=this.degToRad(r-e);var a=this.degToRad(n-t);var s=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.degToRad(e))*Math.cos(this.degToRad(r))*Math.sin(a/2)*Math.sin(a/2);var u=2*i*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return u};return e}();r.Spatial=n;r.default=n},{three:242}],420:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Transform=void 0;var b=e("three");var n=function(){function e(e,t,r,n,i,o,a,s,u,c,l,h,p){this._orientation=this._getValue(e,1);var f=u!=null?u.width:4;var d=u!=null?u.height:3;var v=this._orientation<5;this._width=this._getValue(t,v?f:d);this._height=this._getValue(r,v?d:f);this._basicAspect=v?this._width/this._height:this._height/this._width;this._basicWidth=v?t:r;this._basicHeight=v?r:t;this._focal=this._getValue(n,1);this._scale=this._getValue(i,0);this._gpano=o!=null?o:null;this._rt=this._getRt(a,s);this._srt=this._getSrt(this._rt,this._scale);this._basicRt=this._getBasicRt(this._rt,e);this._textureScale=!!c?c:[1,1];this._ck1=!!l?l:0;this._ck2=!!h?h:0;this._cameraProjection=!!p?p:!!o?"equirectangular":"perspective";this._radialPeak=this._getRadialPeak(this._ck1,this._ck2)}Object.defineProperty(e.prototype,"ck1",{get:function(){return this._ck1},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ck2",{get:function(){return this._ck2},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"cameraProjection",{get:function(){return this._cameraProjection},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"basicAspect",{get:function(){return this._basicAspect},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"basicHeight",{get:function(){return this._basicHeight},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"basicRt",{get:function(){return this._basicRt},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"basicWidth",{get:function(){return this._basicWidth},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"focal",{get:function(){return this._focal},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"fullPano",{get:function(){return this._gpano!=null&&this._gpano.CroppedAreaLeftPixels===0&&this._gpano.CroppedAreaTopPixels===0&&this._gpano.CroppedAreaImageWidthPixels===this._gpano.FullPanoWidthPixels&&this._gpano.CroppedAreaImageHeightPixels===this._gpano.FullPanoHeightPixels},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"gpano",{get:function(){return this._gpano},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"rt",{get:function(){return this._rt},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"srt",{get:function(){return this._srt},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"hasValidScale",{get:function(){return this._scale>.01&&this._scale<50},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"radialPeak",{get:function(){return this._radialPeak},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:false,configurable:true});e.prototype.upVector=function(){var e=this._rt.elements;switch(this._orientation){case 1:return new b.Vector3(-e[1],-e[5],-e[9]);case 3:return new b.Vector3(e[1],e[5],e[9]);case 6:return new b.Vector3(-e[0],-e[4],-e[8]);case 8:return new b.Vector3(e[0],e[4],e[8]);default:return new b.Vector3(-e[1],-e[5],-e[9])}};e.prototype.projectorMatrix=function(){var e=this._normalizedToTextureMatrix();var t=this._focal;var r=(new b.Matrix4).set(t,0,0,0,0,t,0,0,0,0,0,0,0,0,1,0);e.multiply(r);e.multiply(this._rt);return e};e.prototype.projectBasic=function(e){var t=this.projectSfM(e);return this._sfmToBasic(t)};e.prototype.unprojectBasic=function(e,t,r){var n=this._basicToSfm(e);return this.unprojectSfM(n,t,r)};e.prototype.projectSfM=function(e){var t=new b.Vector4(e[0],e[1],e[2],1);t.applyMatrix4(this._rt);return this._bearingToSfm([t.x,t.y,t.z])};e.prototype.unprojectSfM=function(e,t,r){var n=this._sfmToBearing(e);var i=r&&!this.gpano?new b.Vector4(t*n[0]/n[2],t*n[1]/n[2],t,1):new b.Vector4(t*n[0],t*n[1],t*n[2],1);i.applyMatrix4((new b.Matrix4).getInverse(this._rt));return[i.x/i.w,i.y/i.w,i.z/i.w]};e.prototype._sfmToBearing=function(e){if(this._fullPano()){var t=e[0]*2*Math.PI;var r=-e[1]*2*Math.PI;var n=Math.cos(r)*Math.sin(t);var i=-Math.sin(r);var o=Math.cos(r)*Math.cos(t);return[n,i,o]}else if(this._gpano){var a=Math.max(this.gpano.CroppedAreaImageWidthPixels,this.gpano.CroppedAreaImageHeightPixels);var s=[e[0]*a+this.gpano.CroppedAreaImageWidthPixels/2+this.gpano.CroppedAreaLeftPixels,e[1]*a+this.gpano.CroppedAreaImageHeightPixels/2+this.gpano.CroppedAreaTopPixels];var t=2*Math.PI*(s[0]/this.gpano.FullPanoWidthPixels-.5);var r=-Math.PI*(s[1]/this.gpano.FullPanoHeightPixels-.5);var n=Math.cos(r)*Math.sin(t);var i=-Math.sin(r);var o=Math.cos(r)*Math.cos(t);return[n,i,o]}else if(this._cameraProjection==="fisheye"){var u=[e[0]/this._focal,e[1]/this._focal],c=u[0],l=u[1];var h=Math.sqrt(c*c+l*l);var p=this._distortionFromDistortedRadius(h,this._ck1,this._ck2,this._radialPeak);var f=h/p;var o=Math.cos(f);var d=Math.sin(f);var n=d*c/h;var i=d*l/h;return[n,i,o]}else{var v=[e[0]/this._focal,e[1]/this._focal],c=v[0],l=v[1];var m=Math.sqrt(c*c+l*l);var p=this._distortionFromDistortedRadius(m,this._ck1,this._ck2,this._radialPeak);var g=c/p;var _=l/p;var y=new b.Vector3(g,_,1);y.normalize();return[y.x,y.y,y.z]}};e.prototype._distortionFromDistortedRadius=function(e,t,r,n){var i=1;for(var o=0;o<10;o++){var a=e/i;if(a>n){a=n}i=1+t*Math.pow(a,2)+r*Math.pow(a,4)}return i};e.prototype._bearingToSfm=function(e){if(this._fullPano()){var t=e[0];var r=e[1];var n=e[2];var i=Math.atan2(t,n);var o=Math.atan2(-r,Math.sqrt(t*t+n*n));return[i/(2*Math.PI),-o/(2*Math.PI)]}else if(this._gpano){var t=e[0];var r=e[1];var n=e[2];var i=Math.atan2(t,n);var o=Math.atan2(-r,Math.sqrt(t*t+n*n));var a=[(i/(2*Math.PI)+.5)*this.gpano.FullPanoWidthPixels,(-o/Math.PI+.5)*this.gpano.FullPanoHeightPixels];var s=Math.max(this.gpano.CroppedAreaImageWidthPixels,this.gpano.CroppedAreaImageHeightPixels);return[(a[0]-this.gpano.CroppedAreaLeftPixels-this.gpano.CroppedAreaImageWidthPixels/2)/s,(a[1]-this.gpano.CroppedAreaTopPixels-this.gpano.CroppedAreaImageHeightPixels/2)/s]}else if(this._cameraProjection==="fisheye"){if(e[2]>0){var t=e[0],r=e[1],n=e[2];var u=Math.sqrt(t*t+r*r);var c=Math.atan2(u,n);if(c>this._radialPeak){c=this._radialPeak}var l=1+Math.pow(c,2)*(this._ck1+Math.pow(c,2)*this._ck2);var h=this._focal*l*c/u;return[h*t,h*r]}else{return[e[0]<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,e[1]<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY]}}else{if(e[2]>0){var p=[e[0]/e[2],e[1]/e[2]],f=p[0],d=p[1];var v=f*f+d*d;var m=Math.pow(this._radialPeak,2);if(v>m){v=m}var g=1+this._ck1*v+this._ck2*Math.pow(v,2);return[this._focal*g*f,this._focal*g*d]}else{return[e[0]<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,e[1]<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY]}}};e.prototype._basicToSfm=function(e){var t;var r;switch(this._orientation){case 1:t=e[0];r=e[1];break;case 3:t=1-e[0];r=1-e[1];break;case 6:t=e[1];r=1-e[0];break;case 8:t=1-e[1];r=e[0];break;default:t=e[0];r=e[1];break}var n=this._width;var i=this._height;var o=Math.max(n,i);var a=t*n/o-n/o/2;var s=r*i/o-i/o/2;return[a,s]};e.prototype._sfmToBasic=function(e){var t=this._width;var r=this._height;var n=Math.max(t,r);var i=(e[0]+t/n/2)/t*n;var o=(e[1]+r/n/2)/r*n;var a;var s;switch(this._orientation){case 1:a=i;s=o;break;case 3:a=1-i;s=1-o;break;case 6:a=1-o;s=i;break;case 8:a=o;s=1-i;break;default:a=i;s=o;break}return[a,s]};e.prototype._fullPano=function(){return this.gpano!=null&&this.gpano.CroppedAreaLeftPixels===0&&this.gpano.CroppedAreaTopPixels===0&&this.gpano.CroppedAreaImageWidthPixels===this.gpano.FullPanoWidthPixels&&this.gpano.CroppedAreaImageHeightPixels===this.gpano.FullPanoHeightPixels};e.prototype._getValue=function(e,t){return e!=null&&e>0?e:t};e.prototype._getRt=function(e,t){var r=new b.Vector3(e[0],e[1],e[2]);var n=r.length();if(n>0){r.normalize()}var i=new b.Matrix4;i.makeRotationAxis(r,n);i.setPosition(new b.Vector3(t[0],t[1],t[2]));return i};e.prototype._getSrt=function(e,t){var r=e.clone();var n=r.elements;n[12]=t*n[12];n[13]=t*n[13];n[14]=t*n[14];r.scale(new b.Vector3(t,t,t));return r};e.prototype._getBasicRt=function(e,t){var r=new b.Vector3(0,0,1);var n=0;switch(t){case 3:n=Math.PI;break;case 6:n=Math.PI/2;break;case 8:n=3*Math.PI/2;break;default:break}return(new b.Matrix4).makeRotationAxis(r,n).multiply(e)};e.prototype._getRadialPeak=function(e,t){var r=5*t;var n=3*e;var i=1;var o=Math.pow(n,2)-4*r*i;if(o<0){return undefined}var a=(-n-Math.sqrt(o))/2/r;var s=(-n+Math.sqrt(o))/2/r;var u=Math.min(a,s);var c=Math.max(a,s);return u>0?Math.sqrt(u):c>0?Math.sqrt(c):undefined};e.prototype._normalizedToTextureMatrix=function(){var e=Math.max(this._width,this._height);var t=this._orientation<5?this._textureScale[0]:this._textureScale[1];var r=this._orientation<5?this._textureScale[1]:this._textureScale[0];var n=e/this._width*t;var i=e/this._height*r;switch(this._orientation){case 1:return(new b.Matrix4).set(n,0,0,.5,0,-i,0,.5,0,0,1,0,0,0,0,1);case 3:return(new b.Matrix4).set(-n,0,0,.5,0,i,0,.5,0,0,1,0,0,0,0,1);case 6:return(new b.Matrix4).set(0,-i,0,.5,-n,0,0,.5,0,0,1,0,0,0,0,1);case 8:return(new b.Matrix4).set(0,i,0,.5,n,0,0,.5,0,0,1,0,0,0,0,1);default:return(new b.Matrix4).set(n,0,0,.5,0,-i,0,.5,0,0,1,0,0,0,0,1)}};return e}();r.Transform=n},{three:242}],421:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ViewportCoords=void 0;var a=e("three");var n=function(){function e(){this._unprojectDepth=200}e.prototype.basicToCanvas=function(e,t,r,n,i){var o=n.unprojectBasic([e,t],this._unprojectDepth);var a=this.projectToCanvas(o,r,i);return a};e.prototype.basicToCanvasSafe=function(e,t,r,n,i){var o=this.basicToViewportSafe(e,t,n,i);if(o===null){return null}var a=this.viewportToCanvas(o[0],o[1],r);return a};e.prototype.basicToViewport=function(e,t,r,n){var i=r.unprojectBasic([e,t],this._unprojectDepth);var o=this.projectToViewport(i,n);return o};e.prototype.basicToViewportSafe=function(e,t,r,n){var i=r.unprojectBasic([e,t],this._unprojectDepth);var o=this.worldToCamera(i,n);if(o[2]>0){return null}var a=this.projectToViewport(i,n);return a};e.prototype.cameraToViewport=function(e,t){var r=(new a.Vector3).fromArray(e).applyMatrix4(t.projectionMatrix);return[r.x,r.y]};e.prototype.canvasPosition=function(e,t){var r=t.getBoundingClientRect();var n=e.clientX-r.left-t.clientLeft;var i=e.clientY-r.top-t.clientTop;return[n,i]};e.prototype.canvasToBasic=function(e,t,r,n,i){var o=this.unprojectFromCanvas(e,t,r,i).toArray();var a=n.projectBasic(o);return a};e.prototype.canvasToViewport=function(e,t,r){var n=this.containerToCanvas(r),i=n[0],o=n[1];var a=2*e/i-1;var s=1-2*t/o;return[a,s]};e.prototype.containerToCanvas=function(e){return[e.offsetWidth,e.offsetHeight]};e.prototype.getBasicDistances=function(e,t){var r=this.viewportToBasic(-1,1,e,t);var n=this.viewportToBasic(1,1,e,t);var i=this.viewportToBasic(1,-1,e,t);var o=this.viewportToBasic(-1,-1,e,t);var a=0;var s=0;var u=0;var c=0;if(r[1]<0&&n[1]<0){a=r[1]>n[1]?-r[1]:-n[1]}if(n[0]>1&&i[0]>1){s=n[0]<i[0]?n[0]-1:i[0]-1}if(i[1]>1&&o[1]>1){u=i[1]<o[1]?i[1]-1:o[1]-1}if(o[0]<0&&r[0]<0){c=o[0]>r[0]?-o[0]:-r[0]}return[a,s,u,c]};e.prototype.getPixelDistances=function(e,t,r){var n=this.viewportToBasic(-1,1,t,r);var i=this.viewportToBasic(1,1,t,r);var o=this.viewportToBasic(1,-1,t,r);var a=this.viewportToBasic(-1,-1,t,r);var s=0;var u=0;var c=0;var l=0;var h=this.containerToCanvas(e),p=h[0],f=h[1];if(n[1]<0&&i[1]<0){var d=n[1]>i[1]?n[0]:i[0];var v=this.basicToCanvas(d,0,e,t,r);s=v[1]>0?v[1]:0}if(i[0]>1&&o[0]>1){var m=i[0]<o[0]?i[1]:o[1];var v=this.basicToCanvas(1,m,e,t,r);u=v[0]<p?p-v[0]:0}if(o[1]>1&&a[1]>1){var d=o[1]<a[1]?o[0]:a[0];var v=this.basicToCanvas(d,1,e,t,r);c=v[1]<f?f-v[1]:0}if(a[0]<0&&n[0]<0){var m=a[0]>n[0]?a[1]:n[1];var v=this.basicToCanvas(0,m,e,t,r);l=v[0]>0?v[0]:0}return[s,u,c,l]};e.prototype.insideElement=function(e,t){var r=t.getBoundingClientRect();var n=r.left+t.clientLeft;var i=n+t.clientWidth;var o=r.top+t.clientTop;var a=o+t.clientHeight;return e.clientX>n&&e.clientX<i&&e.clientY>o&&e.clientY<a};e.prototype.projectToCanvas=function(e,t,r){var n=this.projectToViewport(e,r);var i=this.viewportToCanvas(n[0],n[1],t);return i};e.prototype.projectToCanvasSafe=function(e,t,r){var n=this.worldToCamera(e,r);if(n[2]>0){return null}var i=this.projectToViewport(e,r);var o=this.viewportToCanvas(i[0],i[1],t);return o};e.prototype.projectToViewport=function(e,t){var r=new a.Vector3(e[0],e[1],e[2]).project(t);return[r.x,r.y]};e.prototype.unprojectFromCanvas=function(e,t,r,n){var i=this.canvasToViewport(e,t,r);var o=this.unprojectFromViewport(i[0],i[1],n);return o};e.prototype.unprojectFromViewport=function(e,t,r){var n=new a.Vector3(e,t,1).unproject(r);return n};e.prototype.viewportToBasic=function(e,t,r,n){var i=new a.Vector3(e,t,1).unproject(n).toArray();var o=r.projectBasic(i);return o};e.prototype.viewportToCanvas=function(e,t,r){var n=this.containerToCanvas(r),i=n[0],o=n[1];var a=i*(e+1)/2;var s=-o*(t-1)/2;return[a,s]};e.prototype.worldToCamera=function(e,t){var r=new a.Vector3(e[0],e[1],e[2]).applyMatrix4(t.matrixWorldInverse);return r.toArray()};return e}();r.ViewportCoords=n;r.default=n},{three:242}],422:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],423:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.FilterCreator=void 0;var n=function(){function e(){}e.prototype.createFilter=function(e){return new Function("node","return "+this._compile(e)+";")};e.prototype._compile=function(e){if(e==null||e.length<=1){return"true"}var t=e[0];var r=t==="=="?this._compileComparisonOp("===",e[1],e[2],false):t==="!="?this._compileComparisonOp("!==",e[1],e[2],false):t===">"||t===">="||t==="<"||t==="<="?this._compileComparisonOp(t,e[1],e[2],true):t==="in"?this._compileInOp(e[1],e.slice(2)):t==="!in"?this._compileNegation(this._compileInOp(e[1],e.slice(2))):t==="all"?this._compileLogicalOp(e.slice(1),"&&"):"true";return"("+r+")"};e.prototype._compare=function(e,t){return e<t?-1:e>t?1:0};e.prototype._compileComparisonOp=function(e,t,r,n){var i=this._compilePropertyReference(t);var o=JSON.stringify(r);return(n?"typeof "+i+"===typeof "+o+"&&":"")+i+e+o};e.prototype._compileInOp=function(e,t){var r=this._compare;var n=JSON.stringify(t.sort(r));var i=this._compilePropertyReference(e);return n+".indexOf("+i+")!==-1"};e.prototype._compileLogicalOp=function(e,t){var r=this._compile.bind(this);return e.map(r).join(t)};e.prototype._compileNegation=function(e){return"!("+e+")"};e.prototype._compilePropertyReference=function(e){return"node["+JSON.stringify(e)+"]"};return e}();r.FilterCreator=n;r.default=n},{}],424:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Graph=void 0;var d=e("rxjs");var v=e("rxjs/operators");var a=e("../Edge");var f=e("../Error");var p=e("../Graph");var s=e("../Geo");var n=function(){function e(e,t,r,n,i,o){this._apiV3=e;this._cachedNodes={};this._cachedNodeTiles={};this._cachedSequenceNodes={};this._cachedSpatialEdges={};this._cachedTiles={};this._cachingFill$={};this._cachingFull$={};this._cachingSequenceNodes$={};this._cachingSequences$={};this._cachingSpatialArea$={};this._cachingTiles$={};this._changed$=new d.Subject;this._defaultAlt=2;this._edgeCalculator=n!=null?n:new a.EdgeCalculator;this._filterCreator=i!=null?i:new p.FilterCreator;this._filter=this._filterCreator.createFilter(undefined);this._graphCalculator=r!=null?r:new p.GraphCalculator;this._configuration=o!=null?o:{maxSequences:50,maxUnusedNodes:100,maxUnusedPreStoredNodes:30,maxUnusedTiles:20};this._nodes={};this._nodeIndex=t!=null?t:new s.GeoRBush(16);this._nodeIndexTiles={};this._nodeToTile={};this._preStored={};this._requiredNodeTiles={};this._requiredSpatialArea={};this._sequences={};this._tilePrecision=7;this._tileThreshold=20}Object.defineProperty(e.prototype,"changed$",{get:function(){return this._changed$},enumerable:false,configurable:true});e.prototype.cacheBoundingBox$=function(h,p){var f=this;var e=this._graphCalculator.encodeHsFromBoundingBox(h,p).filter(function(e){return!(e in f._cachedTiles)}).map(function(e){return e in f._cachingTiles$?f._cachingTiles$[e]:f._cacheTile$(e)});if(e.length===0){e.push(d.of(this))}return d.from(e).pipe(v.mergeAll(),v.last(),v.mergeMap(function(e){var t=f._nodeIndex.search({maxX:p.lat,maxY:p.lon,minX:h.lat,minY:h.lon}).map(function(e){return e.node});var r=[];var n=[];for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.full){r.push(a)}else{n.push(a.key)}}var s=[];var u=200;while(n.length>0){s.push(n.splice(0,u))}var c=d.of(r);var l=s.map(function(e){return f._apiV3.imageByKeyFill$(e).pipe(v.map(function(e){var t=[];for(var r in e){if(!e.hasOwnProperty(r)){continue}if(f.hasNode(r)){var n=f.getNode(r);if(!n.full){f._makeFull(n,e[r])}t.push(n)}}return t}))});return d.merge(c,d.from(l).pipe(v.mergeAll()))}),v.reduce(function(e,t){return e.concat(t)}))};e.prototype.cacheFill$=function(t){var r=this;if(t in this._cachingFull$){throw new f.GraphMapillaryError("Cannot fill node while caching full ("+t+").")}if(!this.hasNode(t)){throw new f.GraphMapillaryError("Cannot fill node that does not exist in graph ("+t+").")}if(t in this._cachingFill$){return this._cachingFill$[t]}var n=this.getNode(t);if(n.full){throw new f.GraphMapillaryError("Cannot fill node that is already full ("+t+").")}this._cachingFill$[t]=this._apiV3.imageByKeyFill$([t]).pipe(v.tap(function(e){if(!n.full){r._makeFull(n,e[t])}delete r._cachingFill$[t]}),v.map(function(e){return r}),v.finalize(function(){if(t in r._cachingFill$){delete r._cachingFill$[t]}r._changed$.next(r)}),v.publish(),v.refCount());return this._cachingFill$[t]};e.prototype.cacheFull$=function(i){var o=this;if(i in this._cachingFull$){return this._cachingFull$[i]}if(this.hasNode(i)){throw new f.GraphMapillaryError("Cannot cache full node that already exist in graph ("+i+").")}this._cachingFull$[i]=this._apiV3.imageByKeyFull$([i]).pipe(v.tap(function(e){var t=e[i];if(o.hasNode(i)){var r=o.getNode(i);if(!r.full){o._makeFull(r,t)}}else{if(t.sequence_key==null){throw new f.GraphMapillaryError("Node has no sequence key ("+i+").")}var r=new p.Node(t);o._makeFull(r,t);var n=o._graphCalculator.encodeH(r.originalLatLon,o._tilePrecision);o._preStore(n,r);o._setNode(r);delete o._cachingFull$[i]}}),v.map(function(e){return o}),v.finalize(function(){if(i in o._cachingFull$){delete o._cachingFull$[i]}o._changed$.next(o)}),v.publish(),v.refCount());return this._cachingFull$[i]};e.prototype.cacheNodeSequence$=function(e){if(!this.hasNode(e)){throw new f.GraphMapillaryError("Cannot cache sequence edges of node that does not exist in graph ("+e+").")}var t=this.getNode(e);if(t.sequenceKey in this._sequences){throw new f.GraphMapillaryError("Sequence already cached ("+e+"), ("+t.sequenceKey+").")}return this._cacheSequence$(t.sequenceKey)};e.prototype.cacheSequence$=function(e){if(e in this._sequences){throw new f.GraphMapillaryError("Sequence already cached ("+e+")")}return this._cacheSequence$(e)};e.prototype.cacheSequenceEdges=function(e){var t=this.getNode(e);if(!(t.sequenceKey in this._sequences)){throw new f.GraphMapillaryError("Sequence is not cached ("+e+"), ("+t.sequenceKey+")")}var r=this._sequences[t.sequenceKey].sequence;var n=this._edgeCalculator.computeSequenceEdges(t,r);t.cacheSequenceEdges(n)};e.prototype.cacheSequenceNodes$=function(e,t){var o=this;if(!this.hasSequence(e)){throw new f.GraphMapillaryError("Cannot cache sequence nodes of sequence that does not exist in graph ("+e+").")}if(this.hasSequenceNodes(e)){throw new f.GraphMapillaryError("Sequence nodes already cached ("+e+").")}var r=this.getSequence(e);if(r.key in this._cachingSequenceNodes$){return this._cachingSequenceNodes$[r.key]}var n=[];var i=r.keys.slice();var a=50;if(!!t&&i.length>a){var s=i.indexOf(t);var u=Math.max(0,Math.min(s-a/2,i.length-a));n.push(i.splice(u,a))}var c=200;while(i.length>0){n.push(i.splice(0,c))}var l=n.length;var h=d.from(n).pipe(v.mergeMap(function(e){return o._apiV3.imageByKeyFull$(e).pipe(v.tap(function(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=e[t];if(o.hasNode(t)){var n=o.getNode(r.key);if(!n.full){o._makeFull(n,r)}}else{if(r.sequence_key==null){console.warn("Sequence missing, discarding node ("+r.key+")")}var n=new p.Node(r);o._makeFull(n,r);var i=o._graphCalculator.encodeH(n.originalLatLon,o._tilePrecision);o._preStore(i,n);o._setNode(n)}}l--}),v.map(function(e){return o}))},6),v.last(),v.finalize(function(){delete o._cachingSequenceNodes$[r.key];if(l===0){o._cachedSequenceNodes[r.key]=true}}),v.publish(),v.refCount());this._cachingSequenceNodes$[r.key]=h;return h};e.prototype.cacheSpatialArea$=function(o){var a=this;if(!this.hasNode(o)){throw new f.GraphMapillaryError("Cannot cache spatial area of node that does not exist in graph ("+o+").")}if(o in this._cachedSpatialEdges){throw new f.GraphMapillaryError("Node already spatially cached ("+o+").")}if(!(o in this._requiredSpatialArea)){throw new f.GraphMapillaryError("Spatial area not determined ("+o+").")}var s=this._requiredSpatialArea[o];if(Object.keys(s.cacheNodes).length===0){throw new f.GraphMapillaryError("Spatial nodes already cached ("+o+").")}if(o in this._cachingSpatialArea$){return this._cachingSpatialArea$[o]}var e=[];while(s.cacheKeys.length>0){e.push(s.cacheKeys.splice(0,200))}var u=e.length;var t=[];var r=function(i){var e=n._apiV3.imageByKeyFill$(i).pipe(v.tap(function(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}var r=s.cacheNodes[t];if(r.full){delete s.cacheNodes[t];continue}var n=e[t];a._makeFull(r,n);delete s.cacheNodes[t]}if(--u===0){delete a._cachingSpatialArea$[o]}}),v.map(function(e){return a}),v.catchError(function(e){for(var t=0,r=i;t<r.length;t++){var n=r[t];if(n in s.all){delete s.all[n]}if(n in s.cacheNodes){delete s.cacheNodes[n]}}if(--u===0){delete a._cachingSpatialArea$[o]}throw e}),v.finalize(function(){if(Object.keys(s.cacheNodes).length===0){a._changed$.next(a)}}),v.publish(),v.refCount());t.push(e)};var n=this;for(var i=0,c=e;i<c.length;i++){var l=c[i];r(l)}this._cachingSpatialArea$[o]=t;return t};e.prototype.cacheSpatialEdges=function(e){if(e in this._cachedSpatialEdges){throw new f.GraphMapillaryError("Spatial edges already cached ("+e+").")}var t=this.getNode(e);var r=this._sequences[t.sequenceKey].sequence;var n=[];var i=r.findPrevKey(t.key);if(i!=null){n.push(i)}var o=r.findNextKey(t.key);if(o!=null){n.push(o)}var a=this._requiredSpatialArea[e].all;var s=[];var u=this._filter;for(var c in a){if(!a.hasOwnProperty(c)){continue}var l=a[c];if(u(l)){s.push(l)}}var h=this._edgeCalculator.getPotentialEdges(t,s,n);var p=this._edgeCalculator.computeStepEdges(t,h,i,o);p=p.concat(this._edgeCalculator.computeTurnEdges(t,h));p=p.concat(this._edgeCalculator.computePanoEdges(t,h));p=p.concat(this._edgeCalculator.computePerspectiveToPanoEdges(t,h));p=p.concat(this._edgeCalculator.computeSimilarEdges(t,h));t.cacheSpatialEdges(p);this._cachedSpatialEdges[e]=t;delete this._requiredSpatialArea[e];delete this._cachedNodeTiles[e]};e.prototype.cacheTiles$=function(n){var i=this;if(n in this._cachedNodeTiles){throw new f.GraphMapillaryError("Tiles already cached ("+n+").")}if(n in this._cachedSpatialEdges){throw new f.GraphMapillaryError("Spatial edges already cached so tiles considered cached ("+n+").")}if(!(n in this._requiredNodeTiles)){throw new f.GraphMapillaryError("Tiles have not been determined ("+n+").")}var o=this._requiredNodeTiles[n];if(o.cache.length===0&&o.caching.length===0){throw new f.GraphMapillaryError("Tiles already cached ("+n+").")}if(!this.hasNode(n)){throw new f.GraphMapillaryError("Cannot cache tiles of node that does not exist in graph ("+n+").")}var e=o.cache.slice();o.caching=this._requiredNodeTiles[n].caching.concat(e);o.cache=[];var t=[];var r=function(r){var e=r in a._cachingTiles$?a._cachingTiles$[r]:a._cacheTile$(r);t.push(e.pipe(v.tap(function(e){var t=o.caching.indexOf(r);if(t>-1){o.caching.splice(t,1)}if(o.caching.length===0&&o.cache.length===0){delete i._requiredNodeTiles[n];i._cachedNodeTiles[n]=true}}),v.catchError(function(e){var t=o.caching.indexOf(r);if(t>-1){o.caching.splice(t,1)}if(o.caching.length===0&&o.cache.length===0){delete i._requiredNodeTiles[n];i._cachedNodeTiles[n]=true}throw e}),v.finalize(function(){i._changed$.next(i)}),v.publish(),v.refCount()))};var a=this;for(var s=0,u=o.caching;s<u.length;s++){var c=u[s];r(c)}return t};e.prototype.initializeCache=function(e){if(e in this._cachedNodes){throw new f.GraphMapillaryError("Node already in cache ("+e+").")}var t=this.getNode(e);t.initializeCache(new p.NodeCache);var r=(new Date).getTime();this._cachedNodes[e]={accessed:r,node:t};this._updateCachedTileAccess(e,r)};e.prototype.isCachingFill=function(e){return e in this._cachingFill$};e.prototype.isCachingFull=function(e){return e in this._cachingFull$};e.prototype.isCachingNodeSequence=function(e){var t=this.getNode(e);return t.sequenceKey in this._cachingSequences$};e.prototype.isCachingSequence=function(e){return e in this._cachingSequences$};e.prototype.isCachingSequenceNodes=function(e){return e in this._cachingSequenceNodes$};e.prototype.isCachingTiles=function(e){return e in this._requiredNodeTiles&&this._requiredNodeTiles[e].cache.length===0&&this._requiredNodeTiles[e].caching.length>0};e.prototype.hasInitializedCache=function(e){return e in this._cachedNodes};e.prototype.hasNode=function(e){var t=(new Date).getTime();this._updateCachedNodeAccess(e,t);this._updateCachedTileAccess(e,t);return e in this._nodes};e.prototype.hasNodeSequence=function(e){var t=this.getNode(e);var r=t.sequenceKey;var n=r in this._sequences;if(n){this._sequences[r].accessed=(new Date).getTime()}return n};e.prototype.hasSequence=function(e){var t=e in this._sequences;if(t){this._sequences[e].accessed=(new Date).getTime()}return t};e.prototype.hasSequenceNodes=function(e){return e in this._cachedSequenceNodes};e.prototype.hasSpatialArea=function(e){if(!this.hasNode(e)){throw new f.GraphMapillaryError("Spatial area nodes cannot be determined if node not in graph ("+e+").")}if(e in this._cachedSpatialEdges){return true}if(e in this._requiredSpatialArea){return Object.keys(this._requiredSpatialArea[e].cacheNodes).length===0}var t=this.getNode(e);var r=this._graphCalculator.boundingBoxCorners(t.latLon,this._tileThreshold);var n=this._nodeIndex.search({maxX:r[1].lat,maxY:r[1].lon,minX:r[0].lat,minY:r[0].lon});var i={all:{},cacheKeys:[],cacheNodes:{}};for(var o=0,a=n;o<a.length;o++){var s=a[o];i.all[s.node.key]=s.node;if(!s.node.full){i.cacheKeys.push(s.node.key);i.cacheNodes[s.node.key]=s.node}}this._requiredSpatialArea[e]=i;return i.cacheKeys.length===0};e.prototype.hasTiles=function(e){var t=this;if(e in this._cachedNodeTiles){return true}if(e in this._cachedSpatialEdges){return true}if(!this.hasNode(e)){throw new f.GraphMapillaryError("Node does not exist in graph ("+e+").")}var r={cache:[],caching:[]};if(!(e in this._requiredNodeTiles)){var n=this.getNode(e);r.cache=this._graphCalculator.encodeHs(n.latLon,this._tilePrecision,this._tileThreshold).filter(function(e){return!(e in t._cachedTiles)});if(r.cache.length>0){this._requiredNodeTiles[e]=r}}else{r=this._requiredNodeTiles[e]}return r.cache.length===0&&r.caching.length===0};e.prototype.getNode=function(e){var t=(new Date).getTime();this._updateCachedNodeAccess(e,t);this._updateCachedTileAccess(e,t);return this._nodes[e]};e.prototype.getSequence=function(e){var t=this._sequences[e];t.accessed=(new Date).getTime();return t.sequence};e.prototype.resetSpatialEdges=function(){var e=Object.keys(this._cachedSpatialEdges);for(var t=0,r=e;t<r.length;t++){var n=r[t];var i=this._cachedSpatialEdges[n];i.resetSpatialEdges();delete this._cachedSpatialEdges[n]}};e.prototype.reset=function(e){var t=[];for(var r=0,n=e;r<n.length;r++){var i=n[r];if(!this.hasNode(i)){throw new Error("Node does not exist "+i)}var o=this.getNode(i);o.resetSequenceEdges();o.resetSpatialEdges();t.push(o)}for(var a=0,s=Object.keys(this._cachedNodes);a<s.length;a++){var u=s[a];if(e.indexOf(u)!==-1){continue}this._cachedNodes[u].node.dispose();delete this._cachedNodes[u]}this._cachedNodeTiles={};this._cachedSpatialEdges={};this._cachedTiles={};this._cachingFill$={};this._cachingFull$={};this._cachingSequences$={};this._cachingSpatialArea$={};this._cachingTiles$={};this._nodes={};this._nodeToTile={};this._preStored={};for(var c=0,l=t;c<l.length;c++){var o=l[c];this._nodes[o.key]=o;var h=this._graphCalculator.encodeH(o.originalLatLon,this._tilePrecision);this._preStore(h,o)}this._requiredNodeTiles={};this._requiredSpatialArea={};this._sequences={};this._nodeIndexTiles={};this._nodeIndex.clear()};e.prototype.setFilter=function(e){this._filter=this._filterCreator.createFilter(e)};e.prototype.uncache=function(e,t){var r={};this._addNewKeys(r,this._cachingFull$);this._addNewKeys(r,this._cachingFill$);this._addNewKeys(r,this._cachingSpatialArea$);this._addNewKeys(r,this._requiredNodeTiles);this._addNewKeys(r,this._requiredSpatialArea);for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o in r){continue}r[o]=true}var a={};for(var o in r){if(!r.hasOwnProperty(o)){continue}var s=this._nodes[o];var u=this._graphCalculator.encodeHs(s.latLon);for(var c=0,l=u;c<l.length;c++){var h=l[c];if(!(h in a)){a[h]=true}}}var p=[];for(var f in this._cachedTiles){if(!this._cachedTiles.hasOwnProperty(f)||f in a){continue}p.push([f,this._cachedTiles[f]])}var d=p.sort(function(e,t){return t[1].accessed-e[1].accessed}).slice(this._configuration.maxUnusedTiles).map(function(e){return e[0]});for(var v=0,m=d;v<m.length;v++){var g=m[v];this._uncacheTile(g,t)}var _=[];var y=[];for(var f in this._preStored){if(!this._preStored.hasOwnProperty(f)||f in this._cachingTiles$){continue}var b=this._preStored[f];for(var o in b){if(!b.hasOwnProperty(o)||o in r){continue}if(b[o].sequenceKey===t){continue}if(o in this._cachedNodes){_.push([this._cachedNodes[o],f])}else{y.push([o,f])}}}var x=_.sort(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];return i.accessed-r.accessed}).slice(this._configuration.maxUnusedPreStoredNodes).map(function(e){var t=e[0],r=e[1];return[t.node.key,r]});this._uncachePreStored(y);this._uncachePreStored(x);var w=[];for(var o in this._cachedNodes){if(!this._cachedNodes.hasOwnProperty(o)||o in r){continue}w.push(this._cachedNodes[o])}var S=w.sort(function(e,t){return t.accessed-e.accessed}).slice(this._configuration.maxUnusedNodes);for(var M=0,C=S;M<C.length;M++){var T=C[M];T.node.uncache();var o=T.node.key;delete this._cachedNodes[o];if(o in this._cachedNodeTiles){delete this._cachedNodeTiles[o]}if(o in this._cachedSpatialEdges){delete this._cachedSpatialEdges[o]}}var E=[];for(var O in this._sequences){if(!this._sequences.hasOwnProperty(O)||O in this._cachingSequences$||O===t){continue}E.push(this._sequences[O])}var P=E.sort(function(e,t){return t.accessed-e.accessed}).slice(this._configuration.maxSequences);for(var A=0,j=P;A<j.length;A++){var R=j[A];var O=R.sequence.key;delete this._sequences[O];if(O in this._cachedSequenceNodes){delete this._cachedSequenceNodes[O]}R.sequence.dispose()}};e.prototype._addNewKeys=function(e,t){for(var r in t){if(!t.hasOwnProperty(r)||!this.hasNode(r)){continue}if(!(r in e)){e[r]=true}}};e.prototype._cacheSequence$=function(t){var r=this;if(t in this._cachingSequences$){return this._cachingSequences$[t]}this._cachingSequences$[t]=this._apiV3.sequenceByKey$([t]).pipe(v.tap(function(e){if(!(t in r._sequences)){r._sequences[t]={accessed:(new Date).getTime(),sequence:new p.Sequence(e[t])}}delete r._cachingSequences$[t]}),v.map(function(e){return r}),v.finalize(function(){if(t in r._cachingSequences$){delete r._cachingSequences$[t]}r._changed$.next(r)}),v.publish(),v.refCount());return this._cachingSequences$[t]};e.prototype._cacheTile$=function(l){var h=this;this._cachingTiles$[l]=this._apiV3.imagesByH$([l]).pipe(v.tap(function(e){var t=e[l];if(l in h._cachedTiles){return}h._nodeIndexTiles[l]=[];h._cachedTiles[l]={accessed:(new Date).getTime(),nodes:[]};var r=h._cachedTiles[l].nodes;var n=h._removeFromPreStore(l);for(var i in t){if(!t.hasOwnProperty(i)){continue}var o=t[i];if(o==null){break}if(o.sequence_key==null){console.warn("Sequence missing, discarding node ("+o.key+")");continue}if(n!=null&&o.key in n){var a=n[o.key];delete n[o.key];r.push(a);var s={lat:a.latLon.lat,lon:a.latLon.lon,node:a};h._nodeIndex.insert(s);h._nodeIndexTiles[l].push(s);h._nodeToTile[a.key]=l;continue}var u=new p.Node(o);r.push(u);var c={lat:u.latLon.lat,lon:u.latLon.lon,node:u};h._nodeIndex.insert(c);h._nodeIndexTiles[l].push(c);h._nodeToTile[u.key]=l;h._setNode(u)}delete h._cachingTiles$[l]}),v.map(function(e){return h}),v.catchError(function(e){delete h._cachingTiles$[l];throw e}),v.publish(),v.refCount());return this._cachingTiles$[l]};e.prototype._makeFull=function(e,t){if(t.calt==null){t.calt=this._defaultAlt}if(t.c_rotation==null){t.c_rotation=this._graphCalculator.rotationFromCompass(t.ca,t.orientation)}e.makeFull(t)};e.prototype._preStore=function(e,t){if(!(e in this._preStored)){this._preStored[e]={}}this._preStored[e][t.key]=t};e.prototype._removeFromPreStore=function(e){var t=null;if(e in this._preStored){t=this._preStored[e];delete this._preStored[e]}return t};e.prototype._setNode=function(e){var t=e.key;if(this.hasNode(t)){throw new f.GraphMapillaryError("Node already exist ("+t+").")}this._nodes[t]=e};e.prototype._uncacheTile=function(e,t){for(var r=0,n=this._cachedTiles[e].nodes;r<n.length;r++){var i=n[r];var o=i.key;delete this._nodeToTile[o];if(o in this._cachedNodes){delete this._cachedNodes[o]}if(o in this._cachedNodeTiles){delete this._cachedNodeTiles[o]}if(o in this._cachedSpatialEdges){delete this._cachedSpatialEdges[o]}if(i.sequenceKey===t){this._preStore(e,i);i.uncache()}else{delete this._nodes[o];if(i.sequenceKey in this._cachedSequenceNodes){delete this._cachedSequenceNodes[i.sequenceKey]}i.dispose()}}for(var a=0,s=this._nodeIndexTiles[e];a<s.length;a++){var u=s[a];this._nodeIndex.remove(u)}delete this._nodeIndexTiles[e];delete this._cachedTiles[e]};e.prototype._uncachePreStored=function(e){var t={};for(var r=0,n=e;r<n.length;r++){var i=n[r],o=i[0],a=i[1];if(o in this._nodes){delete this._nodes[o]}if(o in this._cachedNodes){delete this._cachedNodes[o]}var s=this._preStored[a][o];if(s.sequenceKey in this._cachedSequenceNodes){delete this._cachedSequenceNodes[s.sequenceKey]}delete this._preStored[a][o];s.dispose();t[a]=true}for(var a in t){if(!t.hasOwnProperty(a)){continue}if(Object.keys(this._preStored[a]).length===0){delete this._preStored[a]}}};e.prototype._updateCachedTileAccess=function(e,t){if(e in this._nodeToTile){this._cachedTiles[this._nodeToTile[e]].accessed=t}};e.prototype._updateCachedNodeAccess=function(e,t){if(e in this._cachedNodes){this._cachedNodes[e].accessed=t}};return e}();r.Graph=n;r.default=n},{"../Edge":292,"../Error":293,"../Geo":294,"../Graph":295,rxjs:43,"rxjs/operators":241}],425:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GraphCalculator=void 0;var b=e("latlon-geohash");var c=e("three");var s=e("../Error");var n=e("../Geo");var i=function(){function e(e){this._geoCoords=e!=null?e:new n.GeoCoords}e.prototype.encodeH=function(e,t){if(t===void 0){t=7}return b.encode(e.lat,e.lon,t)};e.prototype.encodeHs=function(e,t,r){if(t===void 0){t=7}if(r===void 0){r=20}var n=b.encode(e.lat,e.lon,t);var i=b.bounds(n);var o=i.ne;var a=i.sw;var s=b.neighbours(n);var u=[0,0,0];var c=this._geoCoords.geodeticToEnu(o.lat,o.lon,0,a.lat,a.lon,0);var l=this._geoCoords.geodeticToEnu(e.lat,e.lon,0,a.lat,a.lon,0);var h=l[0]-u[0];var p=c[0]-l[0];var f=l[1]-u[1];var d=c[1]-l[1];var v=h<r;var m=p<r;var g=f<r;var _=d<r;var y=[n];if(_){y.push(s.n)}if(_&&v){y.push(s.nw)}if(v){y.push(s.w)}if(v&&g){y.push(s.sw)}if(g){y.push(s.s)}if(g&&m){y.push(s.se)}if(m){y.push(s.e)}if(m&&_){y.push(s.ne)}return y};e.prototype.encodeHsFromBoundingBox=function(e,t,r){if(r===void 0){r=7}if(t.lat<=e.lat||t.lon<=e.lon){throw new s.GraphMapillaryError("North east needs to be top right of south west")}var n=(e.lat+t.lat)/2;var i=(e.lon+t.lon)/2;var o=this._geoCoords.geodeticToEnu(t.lat,t.lon,0,n,i,0);var a=Math.max(o[0],o[1]);return this.encodeHs({lat:n,lon:i},r,a)};e.prototype.boundingBoxCorners=function(e,t){var r=this._geoCoords.enuToGeodetic(-t,-t,0,e.lat,e.lon,0);var n=this._geoCoords.enuToGeodetic(t,t,0,e.lat,e.lon,0);return[{lat:r[0],lon:r[1]},{lat:n[0],lon:n[1]}]};e.prototype.rotationFromCompass=function(e,t){var r=0;var n=0;var i=0;switch(t){case 1:r=Math.PI/2;break;case 3:r=-Math.PI/2;i=Math.PI;break;case 6:n=-Math.PI/2;i=-Math.PI/2;break;case 8:n=Math.PI/2;i=Math.PI/2;break;default:break}var o=(new c.Matrix4).makeRotationZ(i);var a=new c.Euler(r,n,e*Math.PI/180,"XYZ");var s=(new c.Matrix4).makeRotationFromEuler(a);var u=(new c.Vector4).setAxisAngleFromRotationMatrix(s.multiply(o));return u.multiplyScalar(u.w).toArray().slice(0,3)};return e}();r.GraphCalculator=i;r.default=i},{"../Error":293,"../Geo":294,"latlon-geohash":21,three:242}],426:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GraphMode=void 0;var n;(function(e){e[e["Sequence"]=0]="Sequence";e[e["Spatial"]=1]="Spatial"})(n=r.GraphMode||(r.GraphMode={}));r.default=n},{}],427:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GraphService=void 0;var c=e("rxjs");var l=e("rxjs/operators");var h=e("../Graph");var n=function(){function e(e,t){this._graph$=c.concat(c.of(e),e.changed$).pipe(l.publishReplay(1),l.refCount());this._graph$.subscribe(function(){});this._graphMode=h.GraphMode.Spatial;this._graphModeSubject$=new c.Subject;this._graphMode$=this._graphModeSubject$.pipe(l.startWith(this._graphMode),l.publishReplay(1),l.refCount());this._graphMode$.subscribe(function(){});this._imageLoadingService=t;this._firstGraphSubjects$=[];this._initializeCacheSubscriptions=[];this._sequenceSubscriptions=[];this._spatialSubscriptions=[]}Object.defineProperty(e.prototype,"graphMode$",{get:function(){return this._graphMode$},enumerable:false,configurable:true});e.prototype.cacheBoundingBox$=function(t,r){return this._graph$.pipe(l.first(),l.mergeMap(function(e){return e.cacheBoundingBox$(t,r)}))};e.prototype.cacheNode$=function(r){var t=this;var n=new c.Subject;this._firstGraphSubjects$.push(n);var e=n.pipe(l.publishReplay(1),l.refCount());var i=e.pipe(l.map(function(e){return e.getNode(r)}),l.mergeMap(function(e){return e.assetsCached?c.of(e):e.cacheAssets$()}),l.publishReplay(1),l.refCount());i.subscribe(function(e){t._imageLoadingService.loadnode$.next(e)},function(e){console.error("Failed to cache node ("+r+")",e)});var o=this._graph$.pipe(l.first(),l.mergeMap(function(e){if(e.isCachingFull(r)||!e.hasNode(r)){return e.cacheFull$(r)}if(e.isCachingFill(r)||!e.getNode(r).full){return e.cacheFill$(r)}return c.of(e)}),l.tap(function(e){if(!e.hasInitializedCache(r)){e.initializeCache(r)}}),l.finalize(function(){if(o==null){return}t._removeFromArray(o,t._initializeCacheSubscriptions);t._removeFromArray(n,t._firstGraphSubjects$)})).subscribe(function(e){n.next(e);n.complete()},function(e){n.error(e)});if(!o.closed){this._initializeCacheSubscriptions.push(o)}var a=e.pipe(l.mergeMap(function(e){if(e.isCachingNodeSequence(r)||!e.hasNodeSequence(r)){return e.cacheNodeSequence$(r)}return c.of(e)}),l.publishReplay(1),l.refCount());var s=a.pipe(l.tap(function(e){if(!e.getNode(r).sequenceEdges.cached){e.cacheSequenceEdges(r)}}),l.finalize(function(){if(s==null){return}t._removeFromArray(s,t._sequenceSubscriptions)})).subscribe(function(e){return},function(e){console.error("Failed to cache sequence edges ("+r+").",e)});if(!s.closed){this._sequenceSubscriptions.push(s)}if(this._graphMode===h.GraphMode.Spatial){var u=e.pipe(l.expand(function(e){if(e.hasTiles(r)){return c.empty()}return c.from(e.cacheTiles$(r)).pipe(l.mergeMap(function(e){return e.pipe(l.mergeMap(function(e){if(e.isCachingTiles(r)){return c.empty()}return c.of(e)}),l.catchError(function(e,t){console.error("Failed to cache tile data ("+r+").",e);return c.empty()}))}))}),l.last(),l.mergeMap(function(e){if(e.hasSpatialArea(r)){return c.of(e)}return c.from(e.cacheSpatialArea$(r)).pipe(l.mergeMap(function(e){return e.pipe(l.catchError(function(e,t){console.error("Failed to cache spatial nodes ("+r+").",e);return c.empty()}))}))}),l.last(),l.mergeMap(function(e){return e.hasNodeSequence(r)?c.of(e):e.cacheNodeSequence$(r)}),l.tap(function(e){if(!e.getNode(r).spatialEdges.cached){e.cacheSpatialEdges(r)}}),l.finalize(function(){if(u==null){return}t._removeFromArray(u,t._spatialSubscriptions)})).subscribe(function(e){return},function(e){console.error("Failed to cache spatial edges ("+r+").",e)});if(!u.closed){this._spatialSubscriptions.push(u)}}return i.pipe(l.first(function(e){return e.assetsCached}))};e.prototype.cacheSequence$=function(t){return this._graph$.pipe(l.first(),l.mergeMap(function(e){if(e.isCachingSequence(t)||!e.hasSequence(t)){return e.cacheSequence$(t)}return c.of(e)}),l.map(function(e){return e.getSequence(t)}))};e.prototype.cacheSequenceNodes$=function(t,r){return this._graph$.pipe(l.first(),l.mergeMap(function(e){if(e.isCachingSequence(t)||!e.hasSequence(t)){return e.cacheSequence$(t)}return c.of(e)}),l.mergeMap(function(e){if(e.isCachingSequenceNodes(t)||!e.hasSequenceNodes(t)){return e.cacheSequenceNodes$(t,r)}return c.of(e)}),l.map(function(e){return e.getSequence(t)}))};e.prototype.setFilter$=function(t){this._resetSubscriptions(this._spatialSubscriptions);return this._graph$.pipe(l.first(),l.tap(function(e){e.resetSpatialEdges();e.setFilter(t)}),l.map(function(e){return undefined}))};e.prototype.setGraphMode=function(e){if(this._graphMode===e){return}if(e===h.GraphMode.Sequence){this._resetSubscriptions(this._spatialSubscriptions)}this._graphMode=e;this._graphModeSubject$.next(this._graphMode)};e.prototype.reset$=function(t){this._abortSubjects(this._firstGraphSubjects$);this._resetSubscriptions(this._initializeCacheSubscriptions);this._resetSubscriptions(this._sequenceSubscriptions);this._resetSubscriptions(this._spatialSubscriptions);return this._graph$.pipe(l.first(),l.tap(function(e){e.reset(t)}),l.map(function(e){return undefined}))};e.prototype.uncache$=function(t,r){return this._graph$.pipe(l.first(),l.tap(function(e){e.uncache(t,r)}),l.map(function(e){return undefined}))};e.prototype._abortSubjects=function(e){for(var t=0,r=e.slice();t<r.length;t++){var n=r[t];this._removeFromArray(n,e);n.error(new Error("Cache node request was aborted."))}};e.prototype._removeFromArray=function(e,t){var r=t.indexOf(e);if(r!==-1){t.splice(r,1)}};e.prototype._resetSubscriptions=function(e){for(var t=0,r=e.slice();t<r.length;t++){var n=r[t];this._removeFromArray(n,e);if(!n.closed){n.unsubscribe()}}};return e}();r.GraphService=n;r.default=n},{"../Graph":295,rxjs:43,"rxjs/operators":241}],428:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ImageLoadingService=void 0;var n=e("rxjs/operators");var i=e("rxjs");var o=function(){function e(){this._loadnode$=new i.Subject;this._loadstatus$=this._loadnode$.pipe(n.scan(function(e,t){var r=e[0];var n=false;if(t.loadStatus.total===0||t.loadStatus.loaded===t.loadStatus.total){if(t.key in r){delete r[t.key];n=true}}else{r[t.key]=t.loadStatus;n=true}return[r,n]},[{},false]),n.filter(function(e){var t=e[0],r=e[1];return r}),n.map(function(e){var t=e[0];return t}),n.publishReplay(1),n.refCount());this._loadstatus$.subscribe(function(){})}Object.defineProperty(e.prototype,"loadnode$",{get:function(){return this._loadnode$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"loadstatus$",{get:function(){return this._loadstatus$},enumerable:false,configurable:true});return e}();r.ImageLoadingService=o},{rxjs:43,"rxjs/operators":241}],429:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MeshReader=void 0;var n=e("pbf");var i=function(){function r(){}r.read=function(e){var t=new n(e);return t.readFields(r._readMeshField,{faces:[],vertices:[]})};r._readMeshField=function(e,t,r){if(e===1){t.vertices.push(r.readFloat())}else if(e===2){t.faces.push(r.readVarint())}};return r}();r.MeshReader=i},{pbf:40}],430:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Node=void 0;var n=e("rxjs/operators");var i=function(){function e(e){this._cache=null;this._core=e;this._fill=null}Object.defineProperty(e.prototype,"assetsCached",{get:function(){return this._core!=null&&this._fill!=null&&this._cache!=null&&this._cache.image!=null&&this._cache.mesh!=null},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"alt",{get:function(){return this._fill.calt},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ca",{get:function(){return this._fill.cca!=null?this._fill.cca:this._fill.ca},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"cameraProjection",{get:function(){return this._fill.camera_projection_type},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"capturedAt",{get:function(){return this._fill.captured_at},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"cameraUuid",{get:function(){return this._fill.captured_with_camera_uuid},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"clusterKey",{get:function(){return this._fill.cluster_key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ck1",{get:function(){return this._fill.ck1},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ck2",{get:function(){return this._fill.ck2},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"computedCA",{get:function(){return this._fill.cca},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"computedLatLon",{get:function(){return this._core.cl},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"focal",{get:function(){return this._fill.cfocal},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"full",{get:function(){return this._fill!=null},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"fullPano",{get:function(){return this._fill.gpano!=null&&this._fill.gpano.CroppedAreaLeftPixels===0&&this._fill.gpano.CroppedAreaTopPixels===0&&this._fill.gpano.CroppedAreaImageWidthPixels===this._fill.gpano.FullPanoWidthPixels&&this._fill.gpano.CroppedAreaImageHeightPixels===this._fill.gpano.FullPanoHeightPixels},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"gpano",{get:function(){return this._fill.gpano},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._fill.height},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"image",{get:function(){return this._cache.image},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"image$",{get:function(){return this._cache.image$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"key",{get:function(){return this._core.key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"latLon",{get:function(){return this._core.cl!=null?this._core.cl:this._core.l},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"loadStatus",{get:function(){return this._cache.loadStatus},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"merged",{get:function(){return this._fill!=null&&this._fill.merge_version!=null&&this._fill.merge_version>0},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mergeCC",{get:function(){return this._fill.merge_cc},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mergeVersion",{get:function(){return this._fill.merge_version},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mesh",{get:function(){return this._cache.mesh},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"organizationKey",{get:function(){return this._fill.organization_key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"orientation",{get:function(){return this._fill.orientation},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"originalCA",{get:function(){return this._fill.ca},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"originalLatLon",{get:function(){return this._core.l},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"pano",{get:function(){return this._fill.gpano!=null&&this._fill.gpano.FullPanoWidthPixels!=null},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"private",{get:function(){return this._fill.private},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"projectKey",{get:function(){return this._fill.project!=null?this._fill.project.key:null},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"rotation",{get:function(){return this._fill.c_rotation},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"scale",{get:function(){return this._fill.atomic_scale},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sequenceKey",{get:function(){return this._core.sequence_key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sequenceEdges",{get:function(){return this._cache.sequenceEdges},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sequenceEdges$",{get:function(){return this._cache.sequenceEdges$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"spatialEdges",{get:function(){return this._cache.spatialEdges},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"spatialEdges$",{get:function(){return this._cache.spatialEdges$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"userKey",{get:function(){return this._fill.user.key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"username",{get:function(){return this._fill.user.username},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._fill.width},enumerable:false,configurable:true});e.prototype.cacheAssets$=function(){var e=this;return this._cache.cacheAssets$(this.key,this.pano,this.merged).pipe(n.map(function(){return e}))};e.prototype.cacheImage$=function(e){var t=this;return this._cache.cacheImage$(this.key,e).pipe(n.map(function(){return t}))};e.prototype.cacheSequenceEdges=function(e){this._cache.cacheSequenceEdges(e)};e.prototype.cacheSpatialEdges=function(e){this._cache.cacheSpatialEdges(e)};e.prototype.dispose=function(){if(this._cache!=null){this._cache.dispose();this._cache=null}this._core=null;this._fill=null};e.prototype.initializeCache=function(e){if(this._cache!=null){throw new Error("Node cache already initialized ("+this.key+").")}this._cache=e};e.prototype.makeFull=function(e){if(e==null){throw new Error("Fill can not be null.")}this._fill=e};e.prototype.resetSequenceEdges=function(){this._cache.resetSequenceEdges()};e.prototype.resetSpatialEdges=function(){this._cache.resetSpatialEdges()};e.prototype.uncache=function(){if(this._cache==null){return}this._cache.dispose();this._cache=null};return e}();r.Node=i;r.default=i},{"rxjs/operators":241}],431:[function(t,e,r){(function(o){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.NodeCache=void 0;var s=t("rxjs");var a=t("rxjs/operators");var u=t("../Graph");var c=t("../Utils");var e=function(){function e(){this._disposed=false;this._image=null;this._loadStatus={loaded:0,total:0};this._mesh=null;this._sequenceEdges={cached:false,edges:[]};this._spatialEdges={cached:false,edges:[]};this._imageChanged$=new s.Subject;this._image$=this._imageChanged$.pipe(a.startWith(null),a.publishReplay(1),a.refCount());this._iamgeSubscription=this._image$.subscribe();this._sequenceEdgesChanged$=new s.Subject;this._sequenceEdges$=this._sequenceEdgesChanged$.pipe(a.startWith(this._sequenceEdges),a.publishReplay(1),a.refCount());this._sequenceEdgesSubscription=this._sequenceEdges$.subscribe(function(){});this._spatialEdgesChanged$=new s.Subject;this._spatialEdges$=this._spatialEdgesChanged$.pipe(a.startWith(this._spatialEdges),a.publishReplay(1),a.refCount());this._spatialEdgesSubscription=this._spatialEdges$.subscribe(function(){});this._cachingAssets$=null}Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"image$",{get:function(){return this._image$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"loadStatus",{get:function(){return this._loadStatus},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mesh",{get:function(){return this._mesh},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sequenceEdges",{get:function(){return this._sequenceEdges},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"sequenceEdges$",{get:function(){return this._sequenceEdges$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"spatialEdges",{get:function(){return this._spatialEdges},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"spatialEdges$",{get:function(){return this._spatialEdges$},enumerable:false,configurable:true});e.prototype.cacheAssets$=function(e,t,r){var n=this;if(this._cachingAssets$!=null){return this._cachingAssets$}var i=t?c.Settings.basePanoramaSize:c.Settings.baseImageSize;this._cachingAssets$=s.combineLatest(this._cacheImage$(e,i),this._cacheMesh$(e,r)).pipe(a.map(function(e){var t=e[0],r=e[1];n._loadStatus.loaded=0;n._loadStatus.total=0;if(r){n._mesh=r.object;n._loadStatus.loaded+=r.loaded.loaded;n._loadStatus.total+=r.loaded.total}if(t){n._image=t.object;n._loadStatus.loaded+=t.loaded.loaded;n._loadStatus.total+=t.loaded.total}return n}),a.finalize(function(){n._cachingAssets$=null}),a.publishReplay(1),a.refCount());this._cachingAssets$.pipe(a.first(function(e){return!!e._image})).subscribe(function(e){n._imageChanged$.next(n._image)},function(e){});return this._cachingAssets$};e.prototype.cacheImage$=function(e,t){var r=this;if(this._image!=null&&t<=Math.max(this._image.width,this._image.height)){return s.of(this)}var n=this._cacheImage$(e,t).pipe(a.first(function(e){return e.object!=null}),a.tap(function(e){r._disposeImage();r._image=e.object}),a.map(function(e){return r}),a.publishReplay(1),a.refCount());n.subscribe(function(e){r._imageChanged$.next(r._image)},function(e){});return n};e.prototype.cacheSequenceEdges=function(e){this._sequenceEdges={cached:true,edges:e};this._sequenceEdgesChanged$.next(this._sequenceEdges)};e.prototype.cacheSpatialEdges=function(e){this._spatialEdges={cached:true,edges:e};this._spatialEdgesChanged$.next(this._spatialEdges)};e.prototype.dispose=function(){this._iamgeSubscription.unsubscribe();this._sequenceEdgesSubscription.unsubscribe();this._spatialEdgesSubscription.unsubscribe();this._disposeImage();this._mesh=null;this._loadStatus.loaded=0;this._loadStatus.total=0;this._sequenceEdges={cached:false,edges:[]};this._spatialEdges={cached:false,edges:[]};this._imageChanged$.next(null);this._sequenceEdgesChanged$.next(this._sequenceEdges);this._spatialEdgesChanged$.next(this._spatialEdges);this._disposed=true;if(this._imageRequest!=null){this._imageRequest.abort()}if(this._meshRequest!=null){this._meshRequest.abort()}};e.prototype.resetSequenceEdges=function(){this._sequenceEdges={cached:false,edges:[]};this._sequenceEdgesChanged$.next(this._sequenceEdges)};e.prototype.resetSpatialEdges=function(){this._spatialEdges={cached:false,edges:[]};this._spatialEdgesChanged$.next(this._spatialEdges)};e.prototype._cacheImage$=function(o,e){var a=this;return s.Observable.create(function(n){var i=new XMLHttpRequest;i.open("GET",c.Urls.thumbnail(o,e,c.Urls.origin),true);i.responseType="arraybuffer";i.timeout=15e3;i.onload=function(t){if(i.status!==200){a._imageRequest=null;n.error(new Error("Failed to fetch image ("+o+"). Status: "+i.status+", "+i.statusText));return}var r=new Image;r.crossOrigin="Anonymous";r.onload=function(e){a._imageRequest=null;if(a._disposed){window.URL.revokeObjectURL(r.src);n.error(new Error("Image load was aborted ("+o+")"));return}n.next({loaded:{loaded:t.loaded,total:t.total},object:r});n.complete()};r.onerror=function(e){a._imageRequest=null;n.error(new Error("Failed to load image ("+o+")"))};var e=new Blob([i.response]);r.src=window.URL.createObjectURL(e)};i.onprogress=function(e){if(a._disposed){return}n.next({loaded:{loaded:e.loaded,total:e.total},object:null})};i.onerror=function(e){a._imageRequest=null;n.error(new Error("Failed to fetch image ("+o+")"))};i.ontimeout=function(e){a._imageRequest=null;n.error(new Error("Image request timed out ("+o+")"))};i.onabort=function(e){a._imageRequest=null;n.error(new Error("Image request was aborted ("+o+")"))};a._imageRequest=i;i.send(null)})};e.prototype._cacheMesh$=function(t,e){var i=this;return s.Observable.create(function(r){if(!e){r.next(i._createEmptyMeshLoadStatus());r.complete();return}var n=new XMLHttpRequest;n.open("GET",c.Urls.protoMesh(t),true);n.responseType="arraybuffer";n.timeout=15e3;n.onload=function(e){i._meshRequest=null;if(i._disposed){return}var t=n.status===200?u.MeshReader.read(new o(n.response)):{faces:[],vertices:[]};r.next({loaded:{loaded:e.loaded,total:e.total},object:t});r.complete()};n.onprogress=function(e){if(i._disposed){return}r.next({loaded:{loaded:e.loaded,total:e.total},object:null})};n.onerror=function(e){i._meshRequest=null;console.error("Failed to cache mesh ("+t+")");r.next(i._createEmptyMeshLoadStatus());r.complete()};n.ontimeout=function(e){i._meshRequest=null;console.error("Mesh request timed out ("+t+")");r.next(i._createEmptyMeshLoadStatus());r.complete()};n.onabort=function(e){i._meshRequest=null;r.error(new Error("Mesh request was aborted ("+t+")"))};i._meshRequest=n;n.send(null)})};e.prototype._createEmptyMeshLoadStatus=function(){return{loaded:{loaded:0,total:0},object:{faces:[],vertices:[]}}};e.prototype._disposeImage=function(){if(this._image!=null){window.URL.revokeObjectURL(this._image.src)}this._image=null};return e}();r.NodeCache=e;r.default=e}).call(this,t("buffer").Buffer)},{"../Graph":295,"../Utils":301,buffer:6,rxjs:43,"rxjs/operators":241}],432:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Sequence=void 0;var n=function(){function e(e){this._key=e.key;this._keys=e.keys}Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"keys",{get:function(){return this._keys},enumerable:false,configurable:true});e.prototype.dispose=function(){this._key=null;this._keys=null};e.prototype.findNextKey=function(e){var t=this._keys.indexOf(e);if(t+1>=this._keys.length||t===-1){return null}else{return this._keys[t+1]}};e.prototype.findPrevKey=function(e){var t=this._keys.indexOf(e);if(t===0||t===-1){return null}else{return this._keys[t-1]}};return e}();r.Sequence=n;r.default=n},{}],433:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.EdgeCalculator=void 0;var M=e("three");var V=e("../../Edge");var H=e("../../Error");var n=e("../../Geo");var i=function(){function e(e,t,r){this._spatial=new n.Spatial;this._geoCoords=new n.GeoCoords;this._settings=e!=null?e:new V.EdgeCalculatorSettings;this._directions=t!=null?t:new V.EdgeCalculatorDirections;this._coefficients=r!=null?r:new V.EdgeCalculatorCoefficients}e.prototype.getPotentialEdges=function(e,t,r){if(!e.full){throw new H.ArgumentMapillaryError("Node has to be full.")}if(!e.merged){return[]}var n=this._spatial.viewingDirection(e.rotation);var i=this._spatial.angleToPlane(n.toArray(),[0,0,1]);var o=[];for(var a=0,s=t;a<s.length;a++){var u=s[a];if(!u.merged||u.key===e.key){continue}var c=this._geoCoords.geodeticToEnu(u.latLon.lat,u.latLon.lon,u.alt,e.latLon.lat,e.latLon.lon,e.alt);var l=new M.Vector3(c[0],c[1],c[2]);var h=l.length();if(h>this._settings.maxDistance&&r.indexOf(u.key)<0){continue}var p=this._spatial.angleBetweenVector2(n.x,n.y,l.x,l.y);var f=this._spatial.angleToPlane(l.toArray(),[0,0,1]);var d=this._spatial.viewingDirection(u.rotation);var v=this._spatial.angleBetweenVector2(n.x,n.y,d.x,d.y);var m=this._spatial.angleToPlane(d.toArray(),[0,0,1]);var g=m-i;var _=this._spatial.relativeRotationAngle(e.rotation,u.rotation);var y=this._spatial.angleBetweenVector2(1,0,l.x,l.y);var b=u.sequenceKey!=null&&e.sequenceKey!=null&&u.sequenceKey===e.sequenceKey;var x=u.mergeCC==null&&e.mergeCC==null||u.mergeCC===e.mergeCC;var w=u.userKey===e.userKey;var S={capturedAt:u.capturedAt,croppedPano:u.pano&&!u.fullPano,directionChange:v,distance:h,fullPano:u.fullPano,key:u.key,motionChange:p,rotation:_,sameMergeCC:x,sameSequence:b,sameUser:w,sequenceKey:u.sequenceKey,verticalDirectionChange:g,verticalMotion:f,worldMotionAzimuth:y};o.push(S)}return o};e.prototype.computeSequenceEdges=function(e,t){if(!e.full){throw new H.ArgumentMapillaryError("Node has to be full.")}if(e.sequenceKey!==t.key){throw new H.ArgumentMapillaryError("Node and sequence does not correspond.")}var r=[];var n=t.findNextKey(e.key);if(n!=null){r.push({data:{direction:V.EdgeDirection.Next,worldMotionAzimuth:Number.NaN},from:e.key,to:n})}var i=t.findPrevKey(e.key);if(i!=null){r.push({data:{direction:V.EdgeDirection.Prev,worldMotionAzimuth:Number.NaN},from:e.key,to:i})}return r};e.prototype.computeSimilarEdges=function(t,e){var r=this;if(!t.full){throw new H.ArgumentMapillaryError("Node has to be full.")}var n=t.fullPano;var i={};for(var o=0,a=e;o<a.length;o++){var s=a[o];if(s.sequenceKey==null){continue}if(s.sameSequence){continue}if(n){if(!s.fullPano){continue}}else{if(!s.fullPano&&Math.abs(s.directionChange)>this._settings.similarMaxDirectionChange){continue}}if(s.distance>this._settings.similarMaxDistance){continue}if(s.sameUser&&Math.abs(s.capturedAt-t.capturedAt)<this._settings.similarMinTimeDifference){continue}if(i[s.sequenceKey]==null){i[s.sequenceKey]=[]}i[s.sequenceKey].push(s)}var u=[];var c=t.fullPano?function(e){return e.distance}:function(e){return r._coefficients.similarDistance*e.distance+r._coefficients.similarRotation*e.rotation};for(var l in i){if(!i.hasOwnProperty(l)){continue}var h=Number.MAX_VALUE;var p=null;for(var f=0,d=i[l];f<d.length;f++){var s=d[f];var v=c(s);if(v<h){h=v;p=s}}if(p==null){continue}u.push(p)}return u.map(function(e){return{data:{direction:V.EdgeDirection.Similar,worldMotionAzimuth:e.worldMotionAzimuth},from:t.key,to:e.key}})};e.prototype.computeStepEdges=function(e,t,r,n){if(!e.full){throw new H.ArgumentMapillaryError("Node has to be full.")}var i=[];if(e.pano){return i}for(var o in this._directions.steps){if(!this._directions.steps.hasOwnProperty(o)){continue}var a=this._directions.steps[o];var s=Number.MAX_VALUE;var u=null;var c=null;for(var l=0,h=t;l<h.length;l++){var p=h[l];if(p.croppedPano||p.fullPano){continue}if(Math.abs(p.directionChange)>this._settings.stepMaxDirectionChange){continue}var f=this._spatial.angleDifference(a.motionChange,p.motionChange);var d=this._spatial.angleDifference(p.directionChange,f);var v=Math.max(Math.abs(f),Math.abs(d));if(Math.abs(v)>this._settings.stepMaxDrift){continue}var m=p.key;if(a.useFallback&&(m===r||m===n)){c=p}if(p.distance>this._settings.stepMaxDistance){continue}f=Math.sqrt(f*f+p.verticalMotion*p.verticalMotion);var g=this._coefficients.stepPreferredDistance*Math.abs(p.distance-this._settings.stepPreferredDistance)/this._settings.stepMaxDistance+this._coefficients.stepMotion*f/this._settings.stepMaxDrift+this._coefficients.stepRotation*p.rotation/this._settings.stepMaxDirectionChange+this._coefficients.stepSequencePenalty*(p.sameSequence?0:1)+this._coefficients.stepMergeCCPenalty*(p.sameMergeCC?0:1);if(g<s){s=g;u=p}}u=u==null?c:u;if(u!=null){i.push({data:{direction:a.direction,worldMotionAzimuth:u.worldMotionAzimuth},from:e.key,to:u.key})}}return i};e.prototype.computeTurnEdges=function(e,t){if(!e.full){throw new H.ArgumentMapillaryError("Node has to be full.")}var r=[];if(e.pano){return r}for(var n in this._directions.turns){if(!this._directions.turns.hasOwnProperty(n)){continue}var i=this._directions.turns[n];var o=Number.MAX_VALUE;var a=null;for(var s=0,u=t;s<u.length;s++){var c=u[s];if(c.croppedPano||c.fullPano){continue}if(c.distance>this._settings.turnMaxDistance){continue}var l=i.direction!==V.EdgeDirection.TurnU&&c.distance<this._settings.turnMaxRigDistance&&Math.abs(c.directionChange)>this._settings.turnMinRigDirectionChange;var h=this._spatial.angleDifference(i.directionChange,c.directionChange);var p=void 0;if(l&&c.directionChange*i.directionChange>0&&Math.abs(c.directionChange)<Math.abs(i.directionChange)){p=-Math.PI/2+Math.abs(c.directionChange)}else{if(Math.abs(h)>this._settings.turnMaxDirectionChange){continue}var f=i.motionChange?this._spatial.angleDifference(i.motionChange,c.motionChange):0;f=Math.sqrt(f*f+c.verticalMotion*c.verticalMotion);p=this._coefficients.turnDistance*c.distance/this._settings.turnMaxDistance+this._coefficients.turnMotion*f/Math.PI+this._coefficients.turnSequencePenalty*(c.sameSequence?0:1)+this._coefficients.turnMergeCCPenalty*(c.sameMergeCC?0:1)}if(p<o){o=p;a=c}}if(a!=null){r.push({data:{direction:i.direction,worldMotionAzimuth:a.worldMotionAzimuth},from:e.key,to:a.key})}}return r};e.prototype.computePerspectiveToPanoEdges=function(e,t){if(!e.full){throw new H.ArgumentMapillaryError("Node has to be full.")}if(e.pano){return[]}var r=Number.MAX_VALUE;var n=null;for(var i=0,o=t;i<o.length;i++){var a=o[i];if(!a.fullPano){continue}var s=this._coefficients.panoPreferredDistance*Math.abs(a.distance-this._settings.panoPreferredDistance)/this._settings.panoMaxDistance+this._coefficients.panoMotion*Math.abs(a.motionChange)/Math.PI+this._coefficients.panoMergeCCPenalty*(a.sameMergeCC?0:1);if(s<r){r=s;n=a}}if(n==null){return[]}return[{data:{direction:V.EdgeDirection.Pano,worldMotionAzimuth:n.worldMotionAzimuth},from:e.key,to:n.key}]};e.prototype.computePanoEdges=function(e,t){if(!e.full){throw new H.ArgumentMapillaryError("Node has to be full.")}if(!e.fullPano){return[]}var r=[];var n=[];var i=[];for(var o=0,a=t;o<a.length;o++){var s=a[o];if(s.distance>this._settings.panoMaxDistance){continue}if(s.fullPano){if(s.distance<this._settings.panoMinDistance){continue}n.push(s)}else{if(s.croppedPano){continue}for(var u in this._directions.panos){if(!this._directions.panos.hasOwnProperty(u)){continue}var c=this._directions.panos[u];var l=this._spatial.angleDifference(s.directionChange,s.motionChange);var h=this._spatial.angleDifference(c.directionChange,l);if(Math.abs(h)>this._settings.panoMaxStepTurnChange){continue}i.push([c.direction,s]);break}}}var p=Math.PI/this._settings.panoMaxItems;var f=[];var d=[];for(var v=0;v<this._settings.panoMaxItems;v++){var m=v/this._settings.panoMaxItems*2*Math.PI;var g=Number.MAX_VALUE;var _=null;for(var y=0,b=n;y<b.length;y++){var s=b[y];var x=this._spatial.angleDifference(m,s.motionChange);if(Math.abs(x)>p){continue}var w=Number.MAX_VALUE;for(var S=0,M=f;S<M.length;S++){var C=M[S];var T=Math.abs(this._spatial.angleDifference(C,s.motionChange));if(T<w){w=T}}if(w<=p){continue}var E=this._coefficients.panoPreferredDistance*Math.abs(s.distance-this._settings.panoPreferredDistance)/this._settings.panoMaxDistance+this._coefficients.panoMotion*Math.abs(x)/p+this._coefficients.panoSequencePenalty*(s.sameSequence?0:1)+this._coefficients.panoMergeCCPenalty*(s.sameMergeCC?0:1);if(E<g){g=E;_=s}}if(_!=null){f.push(_.motionChange);r.push({data:{direction:V.EdgeDirection.Pano,worldMotionAzimuth:_.worldMotionAzimuth},from:e.key,to:_.key})}else{d.push(m)}}var O={};O[V.EdgeDirection.Pano]=f;O[V.EdgeDirection.StepForward]=[];O[V.EdgeDirection.StepLeft]=[];O[V.EdgeDirection.StepBackward]=[];O[V.EdgeDirection.StepRight]=[];for(var P=0,A=d;P<A.length;P++){var j=A[P];var R=[];for(var u in this._directions.panos){if(!this._directions.panos.hasOwnProperty(u)){continue}var c=this._directions.panos[u];var k=O[V.EdgeDirection.Pano].concat(O[c.direction]).concat(O[c.prev]).concat(O[c.next]);var g=Number.MAX_VALUE;var _=null;for(var L=0,N=i;L<N.length;L++){var s=N[L];if(s[0]!==c.direction){continue}var I=this._spatial.angleDifference(j,s[1].motionChange);if(Math.abs(I)>p){continue}var D=Number.MAX_VALUE;for(var B=0,F=k;B<F.length;B++){var C=F[B];var w=Math.abs(this._spatial.angleDifference(C,s[1].motionChange));if(w<D){D=w}}if(D<=p){continue}var E=this._coefficients.panoPreferredDistance*Math.abs(s[1].distance-this._settings.panoPreferredDistance)/this._settings.panoMaxDistance+this._coefficients.panoMotion*Math.abs(I)/p+this._coefficients.panoMergeCCPenalty*(s[1].sameMergeCC?0:1);if(E<g){g=E;_=s}}if(_!=null){R.push(_);r.push({data:{direction:_[0],worldMotionAzimuth:_[1].worldMotionAzimuth},from:e.key,to:_[1].key})}}for(var z=0,$=R;z<$.length;z++){var G=$[z];O[G[0]].push(G[1].motionChange)}}return r};return e}();r.EdgeCalculator=i;r.default=i},{"../../Edge":292,"../../Error":293,"../../Geo":294,three:242}],434:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.EdgeCalculatorCoefficients=void 0;var n=function(){function e(){this.panoPreferredDistance=2;this.panoMotion=2;this.panoSequencePenalty=1;this.panoMergeCCPenalty=4;this.stepPreferredDistance=4;this.stepMotion=3;this.stepRotation=4;this.stepSequencePenalty=2;this.stepMergeCCPenalty=6;this.similarDistance=2;this.similarRotation=3;this.turnDistance=4;this.turnMotion=2;this.turnSequencePenalty=1;this.turnMergeCCPenalty=4}return e}();r.EdgeCalculatorCoefficients=n;r.default=n},{}],435:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.EdgeCalculatorDirections=void 0;var n=e("../../Edge");var i=function(){function e(){this.steps={};this.turns={};this.panos={};this.steps[n.EdgeDirection.StepForward]={direction:n.EdgeDirection.StepForward,motionChange:0,useFallback:true};this.steps[n.EdgeDirection.StepBackward]={direction:n.EdgeDirection.StepBackward,motionChange:Math.PI,useFallback:true};this.steps[n.EdgeDirection.StepLeft]={direction:n.EdgeDirection.StepLeft,motionChange:Math.PI/2,useFallback:false};this.steps[n.EdgeDirection.StepRight]={direction:n.EdgeDirection.StepRight,motionChange:-Math.PI/2,useFallback:false};this.turns[n.EdgeDirection.TurnLeft]={direction:n.EdgeDirection.TurnLeft,directionChange:Math.PI/2,motionChange:Math.PI/4};this.turns[n.EdgeDirection.TurnRight]={direction:n.EdgeDirection.TurnRight,directionChange:-Math.PI/2,motionChange:-Math.PI/4};this.turns[n.EdgeDirection.TurnU]={direction:n.EdgeDirection.TurnU,directionChange:Math.PI,motionChange:null};this.panos[n.EdgeDirection.StepForward]={direction:n.EdgeDirection.StepForward,directionChange:0,next:n.EdgeDirection.StepLeft,prev:n.EdgeDirection.StepRight};this.panos[n.EdgeDirection.StepBackward]={direction:n.EdgeDirection.StepBackward,directionChange:Math.PI,next:n.EdgeDirection.StepRight,prev:n.EdgeDirection.StepLeft};this.panos[n.EdgeDirection.StepLeft]={direction:n.EdgeDirection.StepLeft,directionChange:Math.PI/2,next:n.EdgeDirection.StepBackward,prev:n.EdgeDirection.StepForward};this.panos[n.EdgeDirection.StepRight]={direction:n.EdgeDirection.StepRight,directionChange:-Math.PI/2,next:n.EdgeDirection.StepForward,prev:n.EdgeDirection.StepBackward}}return e}();r.EdgeCalculatorDirections=i},{"../../Edge":292}],436:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.EdgeCalculatorSettings=void 0;var n=function(){function e(){this.panoMinDistance=.1;this.panoMaxDistance=20;this.panoPreferredDistance=5;this.panoMaxItems=4;this.panoMaxStepTurnChange=Math.PI/8;this.rotationMaxDistance=this.turnMaxRigDistance;this.rotationMaxDirectionChange=Math.PI/6;this.rotationMaxVerticalDirectionChange=Math.PI/8;this.similarMaxDirectionChange=Math.PI/8;this.similarMaxDistance=12;this.similarMinTimeDifference=12*3600*1e3;this.stepMaxDistance=20;this.stepMaxDirectionChange=Math.PI/6;this.stepMaxDrift=Math.PI/6;this.stepPreferredDistance=4;this.turnMaxDistance=15;this.turnMaxDirectionChange=2*Math.PI/9;this.turnMaxRigDistance=.65;this.turnMinRigDirectionChange=Math.PI/6}Object.defineProperty(e.prototype,"maxDistance",{get:function(){return Math.max(this.panoMaxDistance,this.similarMaxDistance,this.stepMaxDistance,this.turnMaxDistance)},enumerable:false,configurable:true});return e}();r.EdgeCalculatorSettings=n;r.default=n},{}],437:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.EdgeDirection=void 0;var n;(function(e){e[e["Next"]=0]="Next";e[e["Prev"]=1]="Prev";e[e["StepLeft"]=2]="StepLeft";e[e["StepRight"]=3]="StepRight";e[e["StepForward"]=4]="StepForward";e[e["StepBackward"]=5]="StepBackward";e[e["TurnLeft"]=6]="TurnLeft";e[e["TurnRight"]=7]="TurnRight";e[e["TurnU"]=8]="TurnU";e[e["Pano"]=9]="Pano";e[e["Similar"]=10]="Similar"})(n=r.EdgeDirection||(r.EdgeDirection={}))},{}],438:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],439:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],440:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DOMRenderer=void 0;var i=e("rxjs");var o=e("rxjs/operators");var a=e("virtual-dom");var s=e("rxjs");var u=e("../Render");var n=function(){function e(e,t,r){this._adaptiveOperation$=new s.Subject;this._render$=new s.Subject;this._renderAdaptive$=new s.Subject;this._renderService=t;this._currentFrame$=r;var n=a.create(a.h("div.domRenderer",[]));e.appendChild(n);this._offset$=this._adaptiveOperation$.pipe(o.scan(function(e,t){return t(e)},{elementHeight:e.offsetHeight,elementWidth:e.offsetWidth,imageAspect:0,renderMode:u.RenderMode.Fill}),o.filter(function(e){return e.imageAspect>0&&e.elementWidth>0&&e.elementHeight>0}),o.map(function(e){var t=e.elementWidth/e.elementHeight;var r=e.imageAspect/t;var n=0;var i=0;if(e.renderMode===u.RenderMode.Letterbox){if(e.imageAspect>t){n=e.elementHeight*(1-1/r)/2}else{i=e.elementWidth*(1-r)/2}}else{if(e.imageAspect>t){i=-e.elementWidth*(r-1)/2}else{n=-e.elementHeight*(1/r-1)/2}}return{bottom:n,left:i,right:i,top:n}}));this._currentFrame$.pipe(o.filter(function(e){return e.state.currentNode!=null}),o.distinctUntilChanged(function(e,t){return e===t},function(e){return e.state.currentNode.key}),o.map(function(e){return e.state.currentTransform.basicAspect}),o.map(function(t){return function(e){e.imageAspect=t;return e}})).subscribe(this._adaptiveOperation$);i.combineLatest(this._renderAdaptive$.pipe(o.scan(function(e,t){if(t.vnode==null){delete e[t.name]}else{e[t.name]=t.vnode}return e},{})),this._offset$).pipe(o.map(function(e){var t=[];var r=e[0];for(var n in r){if(!r.hasOwnProperty(n)){continue}t.push(r[n])}var i=e[1];var o={style:{bottom:i.bottom+"px",left:i.left+"px","pointer-events":"none",position:"absolute",right:i.right+"px",top:i.top+"px"}};return{name:"adaptiveDomRenderer",vnode:a.h("div.adaptiveDomRenderer",o,t)}})).subscribe(this._render$);this._vNode$=this._render$.pipe(o.scan(function(e,t){if(t.vnode==null){delete e[t.name]}else{e[t.name]=t.vnode}return e},{}),o.map(function(e){var t=[];for(var r in e){if(!e.hasOwnProperty(r)){continue}t.push(e[r])}return a.h("div.domRenderer",t)}));this._vPatch$=this._vNode$.pipe(o.scan(function(e,t){e.vpatch=a.diff(e.vnode,t);e.vnode=t;return e},{vnode:a.h("div.domRenderer",[]),vpatch:null}),o.pluck("vpatch"));this._element$=this._vPatch$.pipe(o.scan(function(e,t){return a.patch(e,t)},n),o.publishReplay(1),o.refCount());this._element$.subscribe(function(){});this._renderService.size$.pipe(o.map(function(t){return function(e){e.elementWidth=t.width;e.elementHeight=t.height;return e}})).subscribe(this._adaptiveOperation$);this._renderService.renderMode$.pipe(o.map(function(t){return function(e){e.renderMode=t;return e}})).subscribe(this._adaptiveOperation$)}Object.defineProperty(e.prototype,"element$",{get:function(){return this._element$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"render$",{get:function(){return this._render$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"renderAdaptive$",{get:function(){return this._renderAdaptive$},enumerable:false,configurable:true});e.prototype.clear=function(e){this._renderAdaptive$.next({name:e,vnode:null});this._render$.next({name:e,vnode:null})};return e}();r.DOMRenderer=n;r.default=n},{"../Render":297,rxjs:43,"rxjs/operators":241,"virtual-dom":247}],441:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GLRenderStage=void 0;var n;(function(e){e[e["Background"]=0]="Background";e[e["Foreground"]=1]="Foreground"})(n=r.GLRenderStage||(r.GLRenderStage={}));r.default=n},{}],442:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.GLRenderer=void 0;var l=e("rxjs");var h=e("rxjs/operators");var p=e("three");var f=e("../Render");var d=e("../Utils");var n=function(){function e(i,o,e){var a=this;this._renderFrame$=new l.Subject;this._renderCameraOperation$=new l.Subject;this._render$=new l.Subject;this._clear$=new l.Subject;this._renderOperation$=new l.Subject;this._rendererOperation$=new l.Subject;this._eraserOperation$=new l.Subject;this._renderService=o;this._dom=!!e?e:new d.DOM;this._renderer$=this._rendererOperation$.pipe(h.scan(function(e,t){return t(e)},{needsRender:false,renderer:null}),h.filter(function(e){return!!e.renderer}));this._renderCollection$=this._renderOperation$.pipe(h.scan(function(e,t){return t(e)},{}),h.share());this._renderCamera$=this._renderCameraOperation$.pipe(h.scan(function(e,t){return t(e)},{frameId:-1,needsRender:false,perspective:null}));this._eraser$=this._eraserOperation$.pipe(h.startWith(function(e){return e}),h.scan(function(e,t){return t(e)},{needsRender:false}));l.combineLatest(this._renderer$,this._renderCollection$,this._renderCamera$,this._eraser$).pipe(h.map(function(e){var t=e[0],r=e[1],n=e[2],i=e[3];var o=Object.keys(r).map(function(e){return r[e]});return{camera:n,eraser:i,renderer:t,renders:o}}),h.filter(function(e){var t=e.renderer.needsRender||e.camera.needsRender||e.eraser.needsRender;var r=e.camera.frameId;for(var n=0,i=e.renders;n<i.length;n++){var o=i[n];if(o.frameId!==r){return false}t=t||o.needsRender}return t}),h.distinctUntilChanged(function(e,t){return e===t},function(e){return e.eraser.needsRender?-1:e.camera.frameId})).subscribe(function(e){e.renderer.needsRender=false;e.camera.needsRender=false;e.eraser.needsRender=false;var t=e.camera.perspective;var r=[];var n=[];for(var i=0,o=e.renders;i<o.length;i++){var a=o[i];if(a.stage===f.GLRenderStage.Background){r.push(a.render)}else if(a.stage===f.GLRenderStage.Foreground){n.push(a.render)}}var s=e.renderer.renderer;s.clear();for(var u=0,c=r;u<c.length;u++){var a=c[u];a(t,s)}s.clearDepth();for(var l=0,h=n;l<h.length;l++){var a=h[l];a(t,s)}});this._renderFrame$.pipe(h.map(function(t){return function(e){e.frameId=t.frameId;e.perspective=t.perspective;if(t.changed===true){e.needsRender=true}return e}})).subscribe(this._renderCameraOperation$);this._renderFrameSubscribe();var t=this._render$.pipe(h.map(function(t){return function(e){e[t.name]=t.render;return e}}));var r=this._clear$.pipe(h.map(function(t){return function(e){delete e[t];return e}}));l.merge(t,r).subscribe(this._renderOperation$);this._webGLRenderer$=this._render$.pipe(h.first(),h.map(function(e){var t=a._dom.createElement("canvas","mapillary-js-canvas");t.style.position="absolute";t.setAttribute("tabindex","0");i.appendChild(t);var r=o.element;var n=new p.WebGLRenderer({canvas:t});n.setPixelRatio(window.devicePixelRatio);n.setSize(r.offsetWidth,r.offsetHeight);n.setClearColor(new p.Color(2105376),1);n.autoClear=false;return n}),h.publishReplay(1),h.refCount());this._webGLRenderer$.subscribe(function(){});var n=this._webGLRenderer$.pipe(h.first(),h.map(function(t){return function(e){e.needsRender=true;e.renderer=t;return e}}));var s=this._renderService.size$.pipe(h.map(function(t){return function(e){if(e.renderer==null){return e}e.renderer.setSize(t.width,t.height);e.needsRender=true;return e}}));var u=this._clear$.pipe(h.map(function(e){return function(e){if(e.renderer==null){return e}e.needsRender=true;return e}}));l.merge(n,s,u).subscribe(this._rendererOperation$);var c=this._renderCollection$.pipe(h.filter(function(e){return Object.keys(e).length===0}),h.share());c.subscribe(function(e){if(a._renderFrameSubscription==null){return}a._renderFrameSubscription.unsubscribe();a._renderFrameSubscription=null;a._renderFrameSubscribe()});c.pipe(h.map(function(e){return function(e){e.needsRender=true;return e}})).subscribe(this._eraserOperation$)}Object.defineProperty(e.prototype,"render$",{get:function(){return this._render$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"webGLRenderer$",{get:function(){return this._webGLRenderer$},enumerable:false,configurable:true});e.prototype.clear=function(e){this._clear$.next(e)};e.prototype._renderFrameSubscribe=function(){var t=this;this._render$.pipe(h.first(),h.map(function(e){return function(e){e.needsRender=true;return e}})).subscribe(function(e){t._renderCameraOperation$.next(e)});this._renderFrameSubscription=this._render$.pipe(h.first(),h.mergeMap(function(e){return t._renderService.renderCameraFrame$})).subscribe(this._renderFrame$)};return e}();r.GLRenderer=n;r.default=n},{"../Render":297,"../Utils":301,rxjs:43,"rxjs/operators":241,three:242}],443:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RenderCamera=void 0;var n=e("three");var i=e("../Geo");var s=e("../Render");var u=e("../State");var o=function(){function e(e,t,r){this._spatial=new i.Spatial;this._viewportCoords=new i.ViewportCoords;this._initialFov=50;this._alpha=-1;this._renderMode=r;this._zoom=0;this._frameId=-1;this._changed=false;this._changedForFrame=-1;this._currentNodeId=null;this._previousNodeId=null;this._currentPano=false;this._previousPano=false;this._state=null;this._currentProjectedPoints=[];this._previousProjectedPoints=[];this._currentFov=this._initialFov;this._previousFov=this._initialFov;this._camera=new i.Camera;this._perspective=new n.PerspectiveCamera(this._initialFov,this._computeAspect(e,t),.16,1e4);this._perspective.matrixAutoUpdate=false;this._rotation={phi:0,theta:0}}Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"changed",{get:function(){return this._frameId===this._changedForFrame},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"frameId",{get:function(){return this._frameId},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"perspective",{get:function(){return this._perspective},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"renderMode",{get:function(){return this._renderMode},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},enumerable:false,configurable:true});e.prototype.getTilt=function(){return 90-this._spatial.radToDeg(this._rotation.theta)};e.prototype.fovToZoom=function(e){e=Math.min(90,Math.max(0,e));var t=this._computeCurrentFov(0);var r=this._alpha===1?t:this._interpolateFov(t,this._computePreviousFov(0),this._alpha);var n=Math.tan(r/2*Math.PI/180);var i=Math.tan(e/2*Math.PI/180);var o=Math.log(n/i)/Math.log(2);return o};e.prototype.setFrame=function(e){var t=e.state;if(t.state!==this._state){this._state=t.state;this._changed=true}var r=t.currentNode.key;var n=!!t.previousNode?t.previousNode.key:null;if(r!==this._currentNodeId){this._currentNodeId=r;this._currentPano=!!t.currentTransform.gpano;this._currentProjectedPoints=this._computeProjectedPoints(t.currentTransform);this._changed=true}if(n!==this._previousNodeId){this._previousNodeId=n;this._previousPano=!!t.previousTransform.gpano;this._previousProjectedPoints=this._computeProjectedPoints(t.previousTransform);this._changed=true}var i=t.zoom;if(i!==this._zoom){this._zoom=i;this._changed=true}if(this._changed){this._currentFov=this._computeCurrentFov(this.zoom);this._previousFov=this._computePreviousFov(this._zoom)}var o=t.alpha;if(this._changed||o!==this._alpha){this._alpha=o;this._perspective.fov=this._state===u.State.Earth?60:this._interpolateFov(this._currentFov,this._previousFov,this._alpha);this._changed=true}var a=t.camera;if(this._camera.diff(a)>1e-9){this._camera.copy(a);this._rotation=this._computeRotation(a);this._perspective.up.copy(a.up);this._perspective.position.copy(a.position);this._perspective.matrixAutoUpdate=true;this._perspective.lookAt(a.lookat);this._perspective.matrixAutoUpdate=false;this._perspective.updateMatrix();this._perspective.updateMatrixWorld(false);this._changed=true}if(this._changed){this._perspective.updateProjectionMatrix()}this._setFrameId(e.id)};e.prototype.setRenderMode=function(e){this._renderMode=e;this._perspective.fov=this._computeFov();this._perspective.updateProjectionMatrix();this._changed=true};e.prototype.setSize=function(e){this._perspective.aspect=this._computeAspect(e.width,e.height);this._perspective.fov=this._computeFov();this._perspective.updateProjectionMatrix();this._changed=true};e.prototype._computeAspect=function(e,t){return e===0?0:e/t};e.prototype._computeCurrentFov=function(e){if(this._perspective.aspect===0){return 0}if(!this._currentNodeId){return this._initialFov}return this._currentPano?this._yToFov(1,e):this._computeVerticalFov(this._currentProjectedPoints,this._renderMode,e,this.perspective.aspect)};e.prototype._computeFov=function(){this._currentFov=this._computeCurrentFov(this._zoom);this._previousFov=this._computePreviousFov(this._zoom);return this._interpolateFov(this._currentFov,this._previousFov,this._alpha)};e.prototype._computePreviousFov=function(e){if(this._perspective.aspect===0){return 0}if(!this._currentNodeId){return this._initialFov}return!this._previousNodeId?this._currentFov:this._previousPano?this._yToFov(1,e):this._computeVerticalFov(this._previousProjectedPoints,this._renderMode,e,this.perspective.aspect)};e.prototype._computeProjectedPoints=function(e){var t=[[.5,0],[1,0]];var r=[[.5,0],[0,.5]];var n=100;return i.Geo.computeProjectedPoints(e,t,r,n,this._viewportCoords)};e.prototype._computeRequiredVerticalFov=function(e,t,r){var n=Math.max(e[0]/r,e[1]);return this._yToFov(n,t)};e.prototype._computeRotation=function(e){var t=e.lookat.clone().sub(e.position);var r=e.up.clone();var n=this._spatial.azimuthal(t.toArray(),r.toArray());var i=Math.PI/2-this._spatial.angleToPlane(t.toArray(),[0,0,1]);return{phi:n,theta:i}};e.prototype._computeVerticalFov=function(e,t,r,n){var i=this;var o=e.map(function(e){return i._computeRequiredVerticalFov(e,r,n)});var a=t===s.RenderMode.Fill?Math.min.apply(Math,o)*.995:Math.max.apply(Math,o);return a};e.prototype._yToFov=function(e,t){return 2*Math.atan(e/Math.pow(2,t))*180/Math.PI};e.prototype._interpolateFov=function(e,t,r){return r*e+(1-r)*t};e.prototype._setFrameId=function(e){this._frameId=e;if(this._changed){this._changed=false;this._changedForFrame=e}};return e}();r.RenderCamera=o;r.default=o},{"../Geo":294,"../Render":297,"../State":298,three:242}],444:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RenderMode=void 0;var n;(function(e){e[e["Letterbox"]=0]="Letterbox";e[e["Fill"]=1]="Fill"})(n=r.RenderMode||(r.RenderMode={}));r.default=n},{}],445:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RenderService=void 0;var o=e("rxjs/operators");var a=e("rxjs");var s=e("../Geo");var u=e("../Render");var n=function(){function e(e,t,r,n){var i=this;this._element=e;this._currentFrame$=t;this._spatial=new s.Spatial;r=r!=null?r:u.RenderMode.Fill;this._resize$=new a.Subject;this._renderCameraOperation$=new a.Subject;this._size$=new a.BehaviorSubject({height:this._element.offsetHeight,width:this._element.offsetWidth});this._resize$.pipe(o.map(function(){return{height:i._element.offsetHeight,width:i._element.offsetWidth}})).subscribe(this._size$);this._renderMode$=new a.BehaviorSubject(r);this._renderCameraHolder$=this._renderCameraOperation$.pipe(o.startWith(function(e){return e}),o.scan(function(e,t){return t(e)},!!n?n:new u.RenderCamera(this._element.offsetWidth,this._element.offsetHeight,r)),o.publishReplay(1),o.refCount());this._renderCameraFrame$=this._currentFrame$.pipe(o.withLatestFrom(this._renderCameraHolder$),o.tap(function(e){var t=e[0],r=e[1];r.setFrame(t)}),o.map(function(e){return e[1]}),o.publishReplay(1),o.refCount());this._renderCamera$=this._renderCameraFrame$.pipe(o.filter(function(e){return e.changed}),o.publishReplay(1),o.refCount());this._bearing$=this._renderCamera$.pipe(o.map(function(e){var t=i._spatial.radToDeg(i._spatial.azimuthalToBearing(e.rotation.phi));return i._spatial.wrap(t,0,360)}),o.publishReplay(1),o.refCount());this._size$.pipe(o.skip(1),o.map(function(t){return function(e){e.setSize(t);return e}})).subscribe(this._renderCameraOperation$);this._renderMode$.pipe(o.skip(1),o.map(function(t){return function(e){e.setRenderMode(t);return e}})).subscribe(this._renderCameraOperation$);this._bearing$.subscribe(function(){});this._renderCameraHolder$.subscribe(function(){});this._size$.subscribe(function(){});this._renderMode$.subscribe(function(){});this._renderCamera$.subscribe(function(){});this._renderCameraFrame$.subscribe(function(){})}Object.defineProperty(e.prototype,"bearing$",{get:function(){return this._bearing$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"resize$",{get:function(){return this._resize$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"size$",{get:function(){return this._size$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"renderMode$",{get:function(){return this._renderMode$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"renderCameraFrame$",{get:function(){return this._renderCameraFrame$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"renderCamera$",{get:function(){return this._renderCamera$},enumerable:false,configurable:true});return e}();r.RenderService=n;r.default=n},{"../Geo":294,"../Render":297,rxjs:43,"rxjs/operators":241}],446:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],447:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.FrameGenerator=void 0;var n=function(){function e(t){if(t.requestAnimationFrame){this._cancelAnimationFrame=t.cancelAnimationFrame.bind(t);this._requestAnimationFrame=t.requestAnimationFrame.bind(t)}else if(t.mozRequestAnimationFrame){this._cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t);this._requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)}else if(t.webkitRequestAnimationFrame){this._cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t);this._requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)}else if(t.msRequestAnimationFrame){this._cancelAnimationFrame=t.msCancelAnimationFrame.bind(t);this._requestAnimationFrame=t.msRequestAnimationFrame.bind(t)}else if(t.oRequestAnimationFrame){this._cancelAnimationFrame=t.oCancelAnimationFrame.bind(t);this._requestAnimationFrame=t.oRequestAnimationFrame.bind(t)}else{this._cancelAnimationFrame=t.clearTimeout.bind(t);this._requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)}}}Object.defineProperty(e.prototype,"cancelAnimationFrame",{get:function(){return this._cancelAnimationFrame},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"requestAnimationFrame",{get:function(){return this._requestAnimationFrame},enumerable:false,configurable:true});return e}();r.FrameGenerator=n;r.default=n},{}],448:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RotationDelta=void 0;var n=function(){function e(e,t){this._phi=e;this._theta=t}Object.defineProperty(e.prototype,"phi",{get:function(){return this._phi},set:function(e){this._phi=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"theta",{get:function(){return this._theta},set:function(e){this._theta=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"isZero",{get:function(){return this._phi===0&&this._theta===0},enumerable:false,configurable:true});e.prototype.copy=function(e){this._phi=e.phi;this._theta=e.theta};e.prototype.lerp=function(e,t){this._phi=(1-t)*this._phi+t*e.phi;this._theta=(1-t)*this._theta+t*e.theta};e.prototype.multiply=function(e){this._phi*=e;this._theta*=e};e.prototype.threshold=function(e){this._phi=Math.abs(this._phi)>e?this._phi:0;this._theta=Math.abs(this._theta)>e?this._theta:0};e.prototype.lengthSquared=function(){return this._phi*this._phi+this._theta*this._theta};e.prototype.reset=function(){this._phi=0;this._theta=0};return e}();r.RotationDelta=n;r.default=n},{}],449:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.State=void 0;var n;(function(e){e[e["Earth"]=0]="Earth";e[e["Traversing"]=1]="Traversing";e[e["Waiting"]=2]="Waiting";e[e["WaitingInteractively"]=3]="WaitingInteractively"})(n=r.State||(r.State={}));r.default=n},{}],450:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.StateContext=void 0;var n=e("../State");var i=e("../Geo");var o=function(){function e(e){this._state=new n.TraversingState({alpha:1,camera:new i.Camera,currentIndex:-1,reference:{alt:0,lat:0,lon:0},trajectory:[],transitionMode:e==null?n.TransitionMode.Default:e,zoom:0})}Object.defineProperty(e.prototype,"state",{get:function(){if(this._state instanceof n.EarthState){return n.State.Earth}else if(this._state instanceof n.TraversingState){return n.State.Traversing}else if(this._state instanceof n.WaitingState){return n.State.Waiting}else if(this._state instanceof n.InteractiveWaitingState){return n.State.WaitingInteractively}throw new Error("Invalid state")},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"reference",{get:function(){return this._state.reference},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"alpha",{get:function(){return this._state.alpha},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"camera",{get:function(){return this._state.camera},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"zoom",{get:function(){return this._state.zoom},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentNode",{get:function(){return this._state.currentNode},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"previousNode",{get:function(){return this._state.previousNode},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentCamera",{get:function(){return this._state.currentCamera},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentTransform",{get:function(){return this._state.currentTransform},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"previousTransform",{get:function(){return this._state.previousTransform},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"trajectory",{get:function(){return this._state.trajectory},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this._state.currentIndex},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"lastNode",{get:function(){return this._state.trajectory[this._state.trajectory.length-1]},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"nodesAhead",{get:function(){return this._state.trajectory.length-1-this._state.currentIndex},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"motionless",{get:function(){return this._state.motionless},enumerable:false,configurable:true});e.prototype.earth=function(){this._state=this._state.earth()};e.prototype.traverse=function(){this._state=this._state.traverse()};e.prototype.wait=function(){this._state=this._state.wait()};e.prototype.waitInteractively=function(){this._state=this._state.waitInteractively()};e.prototype.getCenter=function(){return this._state.getCenter()};e.prototype.setCenter=function(e){this._state.setCenter(e)};e.prototype.setZoom=function(e){this._state.setZoom(e)};e.prototype.update=function(e){this._state.update(e)};e.prototype.append=function(e){this._state.append(e)};e.prototype.prepend=function(e){this._state.prepend(e)};e.prototype.remove=function(e){this._state.remove(e)};e.prototype.clear=function(){this._state.clear()};e.prototype.clearPrior=function(){this._state.clearPrior()};e.prototype.cut=function(){this._state.cut()};e.prototype.set=function(e){this._state.set(e)};e.prototype.rotate=function(e){this._state.rotate(e)};e.prototype.rotateUnbounded=function(e){this._state.rotateUnbounded(e)};e.prototype.rotateWithoutInertia=function(e){this._state.rotateWithoutInertia(e)};e.prototype.rotateBasic=function(e){this._state.rotateBasic(e)};e.prototype.rotateBasicUnbounded=function(e){this._state.rotateBasicUnbounded(e)};e.prototype.rotateBasicWithoutInertia=function(e){this._state.rotateBasicWithoutInertia(e)};e.prototype.rotateToBasic=function(e){this._state.rotateToBasic(e)};e.prototype.move=function(e){this._state.move(e)};e.prototype.moveTo=function(e){this._state.moveTo(e)};e.prototype.zoomIn=function(e,t){this._state.zoomIn(e,t)};e.prototype.setSpeed=function(e){this._state.setSpeed(e)};e.prototype.setTransitionMode=function(e){this._state.setTransitionMode(e)};e.prototype.dolly=function(e){this._state.dolly(e)};e.prototype.orbit=function(e){this._state.orbit(e)};e.prototype.truck=function(e){this._state.truck(e)};return e}();r.StateContext=o},{"../Geo":294,"../State":298}],451:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.StateService=void 0;var i=e("rxjs");var o=e("rxjs/operators");var a=e("../State");var n=function(){function e(e){var t=this;this._appendNode$=new i.Subject;this._start$=new i.Subject;this._frame$=new i.Subject;this._fpsSampleRate=30;this._contextOperation$=new i.BehaviorSubject(function(e){return e});this._context$=this._contextOperation$.pipe(o.scan(function(e,t){return t(e)},new a.StateContext(e)),o.publishReplay(1),o.refCount());this._state$=this._context$.pipe(o.map(function(e){return e.state}),o.distinctUntilChanged(),o.publishReplay(1),o.refCount());this._fps$=this._start$.pipe(o.switchMap(function(){return t._frame$.pipe(o.bufferCount(1,t._fpsSampleRate),o.map(function(e){return(new Date).getTime()}),o.pairwise(),o.map(function(e){return Math.max(20,1e3*t._fpsSampleRate/(e[1]-e[0]))}),o.startWith(60))}),o.share());this._currentState$=this._frame$.pipe(o.withLatestFrom(this._fps$,this._context$,function(e,t,r){return[e,t,r]}),o.filter(function(e){return e[2].currentNode!=null}),o.tap(function(e){e[2].update(e[1])}),o.map(function(e){return{fps:e[1],id:e[0],state:e[2]}}),o.share());this._lastState$=this._currentState$.pipe(o.publishReplay(1),o.refCount());var r=this._currentState$.pipe(o.distinctUntilChanged(undefined,function(e){return e.state.currentNode.key}),o.publishReplay(1),o.refCount());var n=new i.Subject;r.subscribe(n);this._currentKey$=new i.BehaviorSubject(null);n.pipe(o.map(function(e){return e.state.currentNode.key})).subscribe(this._currentKey$);this._currentNode$=n.pipe(o.map(function(e){return e.state.currentNode}),o.publishReplay(1),o.refCount());this._currentCamera$=n.pipe(o.map(function(e){return e.state.currentCamera}),o.publishReplay(1),o.refCount());this._currentTransform$=n.pipe(o.map(function(e){return e.state.currentTransform}),o.publishReplay(1),o.refCount());this._reference$=n.pipe(o.map(function(e){return e.state.reference}),o.distinctUntilChanged(function(e,t){return e.lat===t.lat&&e.lon===t.lon},function(e){return{lat:e.lat,lon:e.lon}}),o.publishReplay(1),o.refCount());this._currentNodeExternal$=r.pipe(o.map(function(e){return e.state.currentNode}),o.publishReplay(1),o.refCount());this._appendNode$.pipe(o.map(function(t){return function(e){e.append([t]);return e}})).subscribe(this._contextOperation$);this._inMotionOperation$=new i.Subject;r.pipe(o.map(function(e){return true})).subscribe(this._inMotionOperation$);this._inMotionOperation$.pipe(o.distinctUntilChanged(),o.filter(function(e){return e}),o.switchMap(function(e){return t._currentState$.pipe(o.filter(function(e){return e.state.nodesAhead===0}),o.map(function(e){return[e.state.camera.clone(),e.state.zoom]}),o.pairwise(),o.map(function(e){var t=e[0][0];var r=e[1][0];var n=e[0][1];var i=e[1][1];return t.diff(r)>1e-5||Math.abs(n-i)>1e-5}),o.first(function(e){return!e}))})).subscribe(this._inMotionOperation$);this._inMotion$=this._inMotionOperation$.pipe(o.distinctUntilChanged(),o.publishReplay(1),o.refCount());this._inTranslationOperation$=new i.Subject;r.pipe(o.map(function(e){return true})).subscribe(this._inTranslationOperation$);this._inTranslationOperation$.pipe(o.distinctUntilChanged(),o.filter(function(e){return e}),o.switchMap(function(e){return t._currentState$.pipe(o.filter(function(e){return e.state.nodesAhead===0}),o.map(function(e){return e.state.camera.position.clone()}),o.pairwise(),o.map(function(e){return e[0].distanceToSquared(e[1])!==0}),o.first(function(e){return!e}))})).subscribe(this._inTranslationOperation$);this._inTranslation$=this._inTranslationOperation$.pipe(o.distinctUntilChanged(),o.publishReplay(1),o.refCount());this._state$.subscribe(function(){});this._currentNode$.subscribe(function(){});this._currentCamera$.subscribe(function(){});this._currentTransform$.subscribe(function(){});this._reference$.subscribe(function(){});this._currentNodeExternal$.subscribe(function(){});this._lastState$.subscribe(function(){});this._inMotion$.subscribe(function(){});this._inTranslation$.subscribe(function(){});this._frameId=null;this._frameGenerator=new a.FrameGenerator(window)}Object.defineProperty(e.prototype,"currentState$",{get:function(){return this._currentState$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentNode$",{get:function(){return this._currentNode$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentKey$",{get:function(){return this._currentKey$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentNodeExternal$",{get:function(){return this._currentNodeExternal$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentCamera$",{get:function(){return this._currentCamera$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentTransform$",{get:function(){return this._currentTransform$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"state$",{get:function(){return this._state$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"reference$",{get:function(){return this._reference$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"inMotion$",{get:function(){return this._inMotion$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"inTranslation$",{get:function(){return this._inTranslation$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"appendNode$",{get:function(){return this._appendNode$},enumerable:false,configurable:true});e.prototype.earth=function(){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.earth()})};e.prototype.traverse=function(){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.traverse()})};e.prototype.wait=function(){this._invokeContextOperation(function(e){e.wait()})};e.prototype.waitInteractively=function(){this._invokeContextOperation(function(e){e.waitInteractively()})};e.prototype.appendNodes=function(t){this._invokeContextOperation(function(e){e.append(t)})};e.prototype.prependNodes=function(t){this._invokeContextOperation(function(e){e.prepend(t)})};e.prototype.removeNodes=function(t){this._invokeContextOperation(function(e){e.remove(t)})};e.prototype.clearNodes=function(){this._invokeContextOperation(function(e){e.clear()})};e.prototype.clearPriorNodes=function(){this._invokeContextOperation(function(e){e.clearPrior()})};e.prototype.cutNodes=function(){this._invokeContextOperation(function(e){e.cut()})};e.prototype.setNodes=function(t){this._invokeContextOperation(function(e){e.set(t)})};e.prototype.rotate=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotate(t)})};e.prototype.rotateUnbounded=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotateUnbounded(t)})};e.prototype.rotateWithoutInertia=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotateWithoutInertia(t)})};e.prototype.rotateBasic=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotateBasic(t)})};e.prototype.rotateBasicUnbounded=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotateBasicUnbounded(t)})};e.prototype.rotateBasicWithoutInertia=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotateBasicWithoutInertia(t)})};e.prototype.rotateToBasic=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.rotateToBasic(t)})};e.prototype.move=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.move(t)})};e.prototype.moveTo=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.moveTo(t)})};e.prototype.dolly=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.dolly(t)})};e.prototype.orbit=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.orbit(t)})};e.prototype.truck=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.truck(t)})};e.prototype.zoomIn=function(t,r){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.zoomIn(t,r)})};e.prototype.getCenter=function(){return this._lastState$.pipe(o.first(),o.map(function(e){return e.state.getCenter()}))};e.prototype.getZoom=function(){return this._lastState$.pipe(o.first(),o.map(function(e){return e.state.zoom}))};e.prototype.setCenter=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.setCenter(t)})};e.prototype.setSpeed=function(t){this._invokeContextOperation(function(e){e.setSpeed(t)})};e.prototype.setTransitionMode=function(t){this._invokeContextOperation(function(e){e.setTransitionMode(t)})};e.prototype.setZoom=function(t){this._inMotionOperation$.next(true);this._invokeContextOperation(function(e){e.setZoom(t)})};e.prototype.start=function(){if(this._frameId==null){this._start$.next(null);this._frameId=this._frameGenerator.requestAnimationFrame(this._frame.bind(this));this._frame$.next(this._frameId)}};e.prototype.stop=function(){if(this._frameId!=null){this._frameGenerator.cancelAnimationFrame(this._frameId);this._frameId=null}};e.prototype._invokeContextOperation=function(t){this._contextOperation$.next(function(e){t(e);return e})};e.prototype._frame=function(e){this._frameId=this._frameGenerator.requestAnimationFrame(this._frame.bind(this));this._frame$.next(this._frameId)};return e}();r.StateService=n},{"../State":298,rxjs:43,"rxjs/operators":241}],452:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TransitionMode=void 0;var n;(function(e){e[e["Default"]=0]="Default";e[e["Instantaneous"]=1]="Instantaneous"})(n=r.TransitionMode||(r.TransitionMode={}));r.default=n},{}],453:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],454:[function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.EarthState=void 0;var u=e("three");var o=e("../../State");var n=function(n){i(e,n);function e(e){var t=n.call(this,e)||this;var r=t._camera.lookat.clone().sub(t._camera.position).normalize();t._camera.lookat.copy(t._camera.position);t._camera.position.z=e.camera.position.z+20;t._camera.position.x=e.camera.position.x-16*r.x;t._camera.position.y=e.camera.position.y-16*r.y;t._camera.up.set(0,0,1);return t}e.prototype.traverse=function(){return new o.TraversingState(this)};e.prototype.wait=function(){return new o.WaitingState(this)};e.prototype.waitInteractively=function(){return new o.InteractiveWaitingState(this)};e.prototype.dolly=function(e){var t=this._camera;var r=(new u.Vector3).copy(t.position).sub(t.lookat);var n=r.length();var i=n*Math.pow(2,-e);var o=Math.max(1,Math.min(i,1e3));r.normalize();r.multiplyScalar(o);t.position.copy(t.lookat).add(r)};e.prototype.orbit=function(e){var t=this._camera;var r=(new u.Quaternion).setFromUnitVectors(t.up,new u.Vector3(0,0,1));var n=r.clone().inverse();var i=new u.Vector3;i.copy(t.position).sub(t.lookat);i.applyQuaternion(r);var o=i.length();var a=Math.atan2(i.y,i.x);a+=e.phi;var s=Math.atan2(Math.sqrt(i.x*i.x+i.y*i.y),i.z);s+=e.theta;s=Math.max(.1,Math.min(Math.PI-.1,s));i.x=Math.sin(s)*Math.cos(a);i.y=Math.sin(s)*Math.sin(a);i.z=Math.cos(s);i.applyQuaternion(n);t.position.copy(t.lookat).add(i.multiplyScalar(o))};e.prototype.truck=function(e){this._camera.position.add((new u.Vector3).fromArray(e));this._camera.lookat.add((new u.Vector3).fromArray(e))};e.prototype.update=function(){};return e}(o.StateBase);r.EarthState=n;r.default=n},{"../../State":298,three:242}],455:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.InteractiveStateBase=void 0;var p=e("three");var i=e("../../State");var o=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t._animationSpeed=1/40;t._rotationDelta=new i.RotationDelta(0,0);t._requestedRotationDelta=null;t._basicRotation=[0,0];t._requestedBasicRotation=null;t._requestedBasicRotationUnbounded=null;t._rotationAcceleration=.86;t._rotationIncreaseAlpha=.97;t._rotationDecreaseAlpha=.9;t._rotationThreshold=.001;t._unboundedRotationAlpha=.8;t._desiredZoom=e.zoom;t._minZoom=0;t._maxZoom=3;t._lookatDepth=10;t._desiredLookat=null;t._desiredCenter=null;return t}e.prototype.rotate=function(e){if(this._currentNode==null){return}if(e.phi===0&&e.theta===0){return}this._desiredZoom=this._zoom;this._desiredLookat=null;this._requestedBasicRotation=null;if(this._requestedRotationDelta!=null){this._requestedRotationDelta.phi=this._requestedRotationDelta.phi+e.phi;this._requestedRotationDelta.theta=this._requestedRotationDelta.theta+e.theta}else{this._requestedRotationDelta=new i.RotationDelta(e.phi,e.theta)}};e.prototype.rotateUnbounded=function(e){if(this._currentNode==null){return}this._requestedBasicRotation=null;this._requestedRotationDelta=null;this._applyRotation(e,this._currentCamera);this._applyRotation(e,this._previousCamera);if(!this._desiredLookat){return}var t=(new p.Quaternion).setFromUnitVectors(this._currentCamera.up,new p.Vector3(0,0,1));var r=t.clone().inverse();var n=(new p.Vector3).copy(this._desiredLookat).sub(this._camera.position).applyQuaternion(t);var i=n.length();var o=Math.atan2(n.y,n.x);o+=e.phi;var a=Math.atan2(Math.sqrt(n.x*n.x+n.y*n.y),n.z);a+=e.theta;a=Math.max(.1,Math.min(Math.PI-.1,a));n.x=Math.sin(a)*Math.cos(o);n.y=Math.sin(a)*Math.sin(o);n.z=Math.cos(a);n.applyQuaternion(r);this._desiredLookat.copy(this._camera.position).add(n.multiplyScalar(i))};e.prototype.rotateWithoutInertia=function(e){if(this._currentNode==null){return}this._desiredZoom=this._zoom;this._desiredLookat=null;this._requestedBasicRotation=null;this._requestedRotationDelta=null;var t=Math.PI/(10*Math.pow(2,this._zoom));var r={phi:this._spatial.clamp(e.phi,-t,t),theta:this._spatial.clamp(e.theta,-t,t)};this._applyRotation(r,this._currentCamera);this._applyRotation(r,this._previousCamera)};e.prototype.rotateBasic=function(e){if(this._currentNode==null){return}this._desiredZoom=this._zoom;this._desiredLookat=null;this._requestedRotationDelta=null;if(this._requestedBasicRotation!=null){this._requestedBasicRotation[0]+=e[0];this._requestedBasicRotation[1]+=e[1];var t=.05/Math.pow(2,this._zoom);this._requestedBasicRotation[0]=this._spatial.clamp(this._requestedBasicRotation[0],-t,t);this._requestedBasicRotation[1]=this._spatial.clamp(this._requestedBasicRotation[1],-t,t)}else{this._requestedBasicRotation=e.slice()}};e.prototype.rotateBasicUnbounded=function(e){if(this._currentNode==null){return}if(this._requestedBasicRotationUnbounded!=null){this._requestedBasicRotationUnbounded[0]+=e[0];this._requestedBasicRotationUnbounded[1]+=e[1]}else{this._requestedBasicRotationUnbounded=e.slice()}};e.prototype.rotateBasicWithoutInertia=function(e){if(this._currentNode==null){return}this._desiredZoom=this._zoom;this._desiredLookat=null;this._requestedRotationDelta=null;this._requestedBasicRotation=null;var t=.05/Math.pow(2,this._zoom);var r=e.slice();r[0]=this._spatial.clamp(r[0],-t,t);r[1]=this._spatial.clamp(r[1],-t,t);this._applyRotationBasic(r)};e.prototype.rotateToBasic=function(e){if(this._currentNode==null){return}this._desiredZoom=this._zoom;this._desiredLookat=null;e[0]=this._spatial.clamp(e[0],0,1);e[1]=this._spatial.clamp(e[1],0,1);var t=this.currentTransform.unprojectBasic(e,this._lookatDepth);this._currentCamera.lookat.fromArray(t)};e.prototype.zoomIn=function(e,t){if(this._currentNode==null){return}this._desiredZoom=Math.max(this._minZoom,Math.min(this._maxZoom,this._desiredZoom+e));var r=this.currentTransform.projectBasic(this._currentCamera.lookat.toArray());var n=r[0];var i=r[1];var o=Math.pow(2,this._zoom);var a=Math.pow(2,this._desiredZoom);var s=t[0];var u=t[1];if(this.currentTransform.gpano!=null&&this.currentTransform.gpano.CroppedAreaImageWidthPixels===this.currentTransform.gpano.FullPanoWidthPixels){if(s-n>.5){s=s-1}else if(n-s>.5){s=1+s}}var c=s-o/a*(s-n);var l=u-o/a*(u-i);var h=this.currentTransform.gpano;if(this._currentNode.fullPano){c=this._spatial.wrap(c+this._basicRotation[0],0,1);l=this._spatial.clamp(l+this._basicRotation[1],.05,.95)}else if(h!=null&&this.currentTransform.gpano.CroppedAreaImageWidthPixels===this.currentTransform.gpano.FullPanoWidthPixels){c=this._spatial.wrap(c+this._basicRotation[0],0,1);l=this._spatial.clamp(l+this._basicRotation[1],0,1)}else{c=this._spatial.clamp(c,0,1);l=this._spatial.clamp(l,0,1)}this._desiredLookat=(new p.Vector3).fromArray(this.currentTransform.unprojectBasic([c,l],this._lookatDepth))};e.prototype.setCenter=function(e){this._desiredLookat=null;this._requestedRotationDelta=null;this._requestedBasicRotation=null;this._desiredZoom=this._zoom;var t=[this._spatial.clamp(e[0],0,1),this._spatial.clamp(e[1],0,1)];if(this._currentNode==null){this._desiredCenter=t;return}this._desiredCenter=null;var r=(new p.Vector3).fromArray(this.currentTransform.unprojectBasic(t,this._lookatDepth));var n=this.previousTransform!=null?this.previousTransform:this.currentTransform;var i=(new p.Vector3).fromArray(n.unprojectBasic(t,this._lookatDepth));this._currentCamera.lookat.copy(r);this._previousCamera.lookat.copy(i)};e.prototype.setZoom=function(e){this._desiredLookat=null;this._requestedRotationDelta=null;this._requestedBasicRotation=null;this._zoom=this._spatial.clamp(e,this._minZoom,this._maxZoom);this._desiredZoom=this._zoom};e.prototype._applyRotation=function(e,t){if(t==null){return}var r=(new p.Quaternion).setFromUnitVectors(t.up,new p.Vector3(0,0,1));var n=r.clone().inverse();var i=new p.Vector3;i.copy(t.lookat).sub(t.position);i.applyQuaternion(r);var o=i.length();var a=Math.atan2(i.y,i.x);a+=e.phi;var s=Math.atan2(Math.sqrt(i.x*i.x+i.y*i.y),i.z);s+=e.theta;s=Math.max(.1,Math.min(Math.PI-.1,s));i.x=Math.sin(s)*Math.cos(a);i.y=Math.sin(s)*Math.sin(a);i.z=Math.cos(s);i.applyQuaternion(n);t.lookat.copy(t.position).add(i.multiplyScalar(o))};e.prototype._applyRotationBasic=function(e){var t=this._currentNode;var r=this._previousNode!=null?this.previousNode:this.currentNode;var n=this._currentCamera;var i=this._previousCamera;var o=this.currentTransform;var a=this.previousTransform!=null?this.previousTransform:this.currentTransform;var s=o.projectBasic(n.lookat.toArray());var u=a.projectBasic(i.lookat.toArray());var c=o.gpano;var l=a.gpano;if(t.fullPano){s[0]=this._spatial.wrap(s[0]+e[0],0,1);s[1]=this._spatial.clamp(s[1]+e[1],.05,.95)}else if(c!=null&&o.gpano.CroppedAreaImageWidthPixels===o.gpano.FullPanoWidthPixels){s[0]=this._spatial.wrap(s[0]+e[0],0,1);s[1]=this._spatial.clamp(s[1]+e[1],0,1)}else{s[0]=this._spatial.clamp(s[0]+e[0],0,1);s[1]=this._spatial.clamp(s[1]+e[1],0,1)}if(r.fullPano){u[0]=this._spatial.wrap(u[0]+e[0],0,1);u[1]=this._spatial.clamp(u[1]+e[1],.05,.95)}else if(l!=null&&a.gpano.CroppedAreaImageWidthPixels===a.gpano.FullPanoWidthPixels){u[0]=this._spatial.wrap(u[0]+e[0],0,1);u[1]=this._spatial.clamp(u[1]+e[1],0,1)}else{u[0]=this._spatial.clamp(u[0]+e[0],0,1);u[1]=this._spatial.clamp(s[1]+e[1],0,1)}var h=o.unprojectBasic(s,this._lookatDepth);n.lookat.fromArray(h);var p=a.unprojectBasic(u,this._lookatDepth);i.lookat.fromArray(p)};e.prototype._updateZoom=function(e){var t=this._desiredZoom-this._zoom;var r=t>0?1:t<0?-1:0;if(t===0){return}else if(Math.abs(t)<.002){this._zoom=this._desiredZoom;if(this._desiredLookat!=null){this._desiredLookat=null}}else{this._zoom+=r*Math.max(Math.abs(5*e*t),.002)}};e.prototype._updateLookat=function(e){if(this._desiredLookat===null){return}var t=this._desiredLookat.distanceToSquared(this._currentCamera.lookat);if(Math.abs(t)<1e-6){this._currentCamera.lookat.copy(this._desiredLookat);this._desiredLookat=null}else{this._currentCamera.lookat.lerp(this._desiredLookat,5*e)}};e.prototype._updateRotation=function(){if(this._requestedRotationDelta!=null){var e=this._rotationDelta.lengthSquared();var t=this._requestedRotationDelta.lengthSquared();if(t>e){this._rotationDelta.lerp(this._requestedRotationDelta,this._rotationIncreaseAlpha)}else{this._rotationDelta.lerp(this._requestedRotationDelta,this._rotationDecreaseAlpha)}this._requestedRotationDelta=null;return}if(this._rotationDelta.isZero){return}var r=this.currentNode.fullPano?1:this._alpha;this._rotationDelta.multiply(this._rotationAcceleration*r);this._rotationDelta.threshold(this._rotationThreshold)};e.prototype._updateRotationBasic=function(){if(this._requestedBasicRotation!=null){var e=this._basicRotation[0];var t=this._basicRotation[1];var r=this._requestedBasicRotation[0];var n=this._requestedBasicRotation[1];if(Math.abs(r)>Math.abs(e)){this._basicRotation[0]=(1-this._rotationIncreaseAlpha)*e+this._rotationIncreaseAlpha*r}else{this._basicRotation[0]=(1-this._rotationDecreaseAlpha)*e+this._rotationDecreaseAlpha*r}if(Math.abs(n)>Math.abs(t)){this._basicRotation[1]=(1-this._rotationIncreaseAlpha)*t+this._rotationIncreaseAlpha*n}else{this._basicRotation[1]=(1-this._rotationDecreaseAlpha)*t+this._rotationDecreaseAlpha*n}this._requestedBasicRotation=null;return}if(this._requestedBasicRotationUnbounded!=null){var r=this._requestedBasicRotationUnbounded[0];var n=this._requestedBasicRotationUnbounded[1];if(Math.abs(r)>0){this._basicRotation[0]=(1-this._unboundedRotationAlpha)*this._basicRotation[0]+this._unboundedRotationAlpha*r}if(Math.abs(n)>0){this._basicRotation[1]=(1-this._unboundedRotationAlpha)*this._basicRotation[1]+this._unboundedRotationAlpha*n}if(this._desiredLookat!=null){var i=this.currentTransform.projectBasic(this._desiredLookat.toArray());i[0]+=r;i[1]+=n;this._desiredLookat=(new p.Vector3).fromArray(this.currentTransform.unprojectBasic(i,this._lookatDepth))}this._requestedBasicRotationUnbounded=null}if(this._basicRotation[0]===0&&this._basicRotation[1]===0){return}this._basicRotation[0]=this._rotationAcceleration*this._basicRotation[0];this._basicRotation[1]=this._rotationAcceleration*this._basicRotation[1];if(Math.abs(this._basicRotation[0])<this._rotationThreshold/Math.pow(2,this._zoom)&&Math.abs(this._basicRotation[1])<this._rotationThreshold/Math.pow(2,this._zoom)){this._basicRotation=[0,0]}};e.prototype._clearRotation=function(){if(this._currentNode.fullPano){return}if(this._requestedRotationDelta!=null){this._requestedRotationDelta=null}if(!this._rotationDelta.isZero){this._rotationDelta.reset()}if(this._requestedBasicRotation!=null){this._requestedBasicRotation=null}if(this._basicRotation[0]>0||this._basicRotation[1]>0){this._basicRotation=[0,0]}};e.prototype._setDesiredCenter=function(){if(this._desiredCenter==null){return}var e=(new p.Vector3).fromArray(this.currentTransform.unprojectBasic(this._desiredCenter,this._lookatDepth)).sub(this._currentCamera.position);this._currentCamera.lookat.copy(this._currentCamera.position.clone().add(e));this._previousCamera.lookat.copy(this._previousCamera.position.clone().add(e));this._desiredCenter=null};e.prototype._setDesiredZoom=function(){this._desiredZoom=this._currentNode.fullPano||this._previousNode==null?this._zoom:0};return e}(i.StateBase);r.InteractiveStateBase=o;r.default=o},{"../../State":298,three:242}],456:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.InteractiveWaitingState=void 0;var i=e("../../State");var o=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t._adjustCameras();t._motionless=t._motionlessTransition();return t}e.prototype.traverse=function(){return new i.TraversingState(this)};e.prototype.wait=function(){return new i.WaitingState(this)};e.prototype.prepend=function(e){r.prototype.prepend.call(this,e);this._motionless=this._motionlessTransition()};e.prototype.set=function(e){r.prototype.set.call(this,e);this._motionless=this._motionlessTransition()};e.prototype.move=function(e){this._alpha=Math.max(0,Math.min(1,this._alpha+e))};e.prototype.moveTo=function(e){this._alpha=Math.max(0,Math.min(1,e))};e.prototype.update=function(e){this._updateRotation();if(!this._rotationDelta.isZero){this._applyRotation(this._rotationDelta,this._previousCamera);this._applyRotation(this._rotationDelta,this._currentCamera)}this._updateRotationBasic();if(this._basicRotation[0]!==0||this._basicRotation[1]!==0){this._applyRotationBasic(this._basicRotation)}var t=this._animationSpeed*(60/e);this._updateZoom(t);this._updateLookat(t);this._camera.lerpCameras(this._previousCamera,this._currentCamera,this.alpha)};e.prototype._getAlpha=function(){return this._motionless?Math.round(this._alpha):this._alpha};e.prototype._setCurrentCamera=function(){r.prototype._setCurrentCamera.call(this);this._adjustCameras()};e.prototype._adjustCameras=function(){if(this._previousNode==null){return}if(this._currentNode.fullPano){var e=this._camera.lookat.clone().sub(this._camera.position);this._currentCamera.lookat.copy(e.clone().add(this._currentCamera.position))}if(this._previousNode.fullPano){var e=this._currentCamera.lookat.clone().sub(this._currentCamera.position);this._previousCamera.lookat.copy(e.clone().add(this._previousCamera.position))}};return e}(i.InteractiveStateBase);r.InteractiveWaitingState=o;r.default=o},{"../../State":298}],457:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.StateBase=void 0;var a=e("../../Error");var s=e("../../Geo");var n=e("../../State");var i=function(){function e(e){this._spatial=new s.Spatial;this._geoCoords=new s.GeoCoords;this._referenceThreshold=.01;this._transitionMode=e.transitionMode;this._reference=e.reference;this._alpha=e.alpha;this._camera=e.camera.clone();this._zoom=e.zoom;this._currentIndex=e.currentIndex;this._trajectory=e.trajectory.slice();this._trajectoryTransforms=[];this._trajectoryCameras=[];for(var t=0,r=this._trajectory;t<r.length;t++){var n=r[t];var i=this._nodeToTranslation(n,this._reference);var o=new s.Transform(n.orientation,n.width,n.height,n.focal,n.scale,n.gpano,n.rotation,i,n.image,undefined,n.ck1,n.ck2,n.cameraProjection);this._trajectoryTransforms.push(o);this._trajectoryCameras.push(new s.Camera(o))}this._currentNode=this._trajectory.length>0?this._trajectory[this._currentIndex]:null;this._previousNode=this._trajectory.length>1&&this.currentIndex>0?this._trajectory[this._currentIndex-1]:null;this._currentCamera=this._trajectoryCameras.length>0?this._trajectoryCameras[this._currentIndex].clone():new s.Camera;this._previousCamera=this._trajectoryCameras.length>1&&this.currentIndex>0?this._trajectoryCameras[this._currentIndex-1].clone():this._currentCamera.clone()}Object.defineProperty(e.prototype,"reference",{get:function(){return this._reference},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"alpha",{get:function(){return this._getAlpha()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"trajectory",{get:function(){return this._trajectory},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this._currentIndex},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentNode",{get:function(){return this._currentNode},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"previousNode",{get:function(){return this._previousNode},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentCamera",{get:function(){return this._currentCamera},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"currentTransform",{get:function(){return this._trajectoryTransforms.length>0?this._trajectoryTransforms[this.currentIndex]:null},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"previousTransform",{get:function(){return this._trajectoryTransforms.length>1&&this.currentIndex>0?this._trajectoryTransforms[this.currentIndex-1]:null},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"motionless",{get:function(){return this._motionless},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"transitionMode",{get:function(){return this._transitionMode},enumerable:false,configurable:true});e.prototype.earth=function(){throw new Error("Not implemented")};e.prototype.traverse=function(){throw new Error("Not implemented")};e.prototype.wait=function(){throw new Error("Not implemented")};e.prototype.waitInteractively=function(){throw new Error("Not implemented")};e.prototype.move=function(e){};e.prototype.moveTo=function(e){};e.prototype.rotate=function(e){};e.prototype.rotateUnbounded=function(e){};e.prototype.rotateWithoutInertia=function(e){};e.prototype.rotateBasic=function(e){};e.prototype.rotateBasicUnbounded=function(e){};e.prototype.rotateBasicWithoutInertia=function(e){};e.prototype.rotateToBasic=function(e){};e.prototype.setSpeed=function(e){};e.prototype.zoomIn=function(e,t){};e.prototype.update=function(e){};e.prototype.setCenter=function(e){};e.prototype.setZoom=function(e){};e.prototype.dolly=function(e){};e.prototype.orbit=function(e){};e.prototype.truck=function(e){};e.prototype.append=function(e){if(e.length<1){throw Error("Trajectory can not be empty")}if(this._currentIndex<0){this.set(e)}else{this._trajectory=this._trajectory.concat(e);this._appendToTrajectories(e)}};e.prototype.prepend=function(e){if(e.length<1){throw Error("Trajectory can not be empty")}this._trajectory=e.slice().concat(this._trajectory);this._currentIndex+=e.length;this._setCurrentNode();var t=this._setReference(this._currentNode);if(t){this._setTrajectories()}else{this._prependToTrajectories(e)}this._setCurrentCamera()};e.prototype.remove=function(e){if(e<0){throw Error("n must be a positive integer")}if(this._currentIndex-1<e){throw Error("Current and previous nodes can not be removed")}for(var t=0;t<e;t++){this._trajectory.shift();this._trajectoryTransforms.shift();this._trajectoryCameras.shift();this._currentIndex--}this._setCurrentNode()};e.prototype.clearPrior=function(){if(this._currentIndex>0){this.remove(this._currentIndex-1)}};e.prototype.clear=function(){this.cut();if(this._currentIndex>0){this.remove(this._currentIndex-1)}};e.prototype.cut=function(){while(this._trajectory.length-1>this._currentIndex){this._trajectory.pop();this._trajectoryTransforms.pop();this._trajectoryCameras.pop()}};e.prototype.set=function(e){this._setTrajectory(e);this._setCurrentNode();this._setReference(this._currentNode);this._setTrajectories();this._setCurrentCamera()};e.prototype.getCenter=function(){return this._currentNode!=null?this.currentTransform.projectBasic(this._camera.lookat.toArray()):[.5,.5]};e.prototype.setTransitionMode=function(e){this._transitionMode=e};e.prototype._getAlpha=function(){return 1};e.prototype._setCurrent=function(){this._setCurrentNode();var e=this._setReference(this._currentNode);if(e){this._setTrajectories()}this._setCurrentCamera()};e.prototype._setCurrentCamera=function(){this._currentCamera=this._trajectoryCameras[this._currentIndex].clone();this._previousCamera=this._currentIndex>0?this._trajectoryCameras[this._currentIndex-1].clone():this._currentCamera.clone()};e.prototype._motionlessTransition=function(){var e=this._currentNode!=null&&this._previousNode!=null;return e&&(this._transitionMode===n.TransitionMode.Instantaneous||!(this._currentNode.merged&&this._previousNode.merged&&this._withinOriginalDistance()&&this._sameConnectedComponent()))};e.prototype._setReference=function(e){if(Math.abs(e.latLon.lat-this.reference.lat)<this._referenceThreshold&&Math.abs(e.latLon.lon-this.reference.lon)<this._referenceThreshold){return false}if(this._previousNode!=null&&!this._motionlessTransition()){return false}this._reference.lat=e.latLon.lat;this._reference.lon=e.latLon.lon;this._reference.alt=e.alt;return true};e.prototype._setCurrentNode=function(){this._currentNode=this._trajectory.length>0?this._trajectory[this._currentIndex]:null;this._previousNode=this._currentIndex>0?this._trajectory[this._currentIndex-1]:null};e.prototype._setTrajectory=function(e){if(e.length<1){throw new a.ArgumentMapillaryError("Trajectory can not be empty")}if(this._currentNode!=null){this._trajectory=[this._currentNode].concat(e);this._currentIndex=1}else{this._trajectory=e.slice();this._currentIndex=0}};e.prototype._setTrajectories=function(){this._trajectoryTransforms.length=0;this._trajectoryCameras.length=0;this._appendToTrajectories(this._trajectory)};e.prototype._appendToTrajectories=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(!n.assetsCached){throw new a.ArgumentMapillaryError("Assets must be cached when node is added to trajectory")}var i=this._nodeToTranslation(n,this.reference);var o=new s.Transform(n.orientation,n.width,n.height,n.focal,n.scale,n.gpano,n.rotation,i,n.image,undefined,n.ck1,n.ck2,n.cameraProjection);this._trajectoryTransforms.push(o);this._trajectoryCameras.push(new s.Camera(o))}};e.prototype._prependToTrajectories=function(e){for(var t=0,r=e.reverse();t<r.length;t++){var n=r[t];if(!n.assetsCached){throw new a.ArgumentMapillaryError("Assets must be cached when added to trajectory")}var i=this._nodeToTranslation(n,this.reference);var o=new s.Transform(n.orientation,n.width,n.height,n.focal,n.scale,n.gpano,n.rotation,i,n.image,undefined,n.ck1,n.ck2,n.cameraProjection);this._trajectoryTransforms.unshift(o);this._trajectoryCameras.unshift(new s.Camera(o))}};e.prototype._nodeToTranslation=function(e,t){return s.Geo.computeTranslation({alt:e.alt,lat:e.latLon.lat,lon:e.latLon.lon},e.rotation,t)};e.prototype._sameConnectedComponent=function(){var e=this._currentNode;var t=this._previousNode;return!!e&&!!t&&e.mergeCC===t.mergeCC};e.prototype._withinOriginalDistance=function(){var e=this._currentNode;var t=this._previousNode;if(!e||!t){return true}var r=this._spatial.distanceFromLatLon(e.originalLatLon.lat,e.originalLatLon.lon,t.originalLatLon.lat,t.originalLatLon.lon);return r<25};return e}();r.StateBase=i},{"../../Error":293,"../../Geo":294,"../../State":298}],458:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.TraversingState=void 0;var i=e("@mapbox/unitbezier");var o=e("../../State");var a=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t._adjustCameras();t._motionless=t._motionlessTransition();t._baseAlpha=t._alpha;t._speedCoefficient=1;t._unitBezier=new i(.74,.67,.38,.96);t._useBezier=false;return t}e.prototype.earth=function(){return new o.EarthState(this)};e.prototype.wait=function(){return new o.WaitingState(this)};e.prototype.waitInteractively=function(){return new o.InteractiveWaitingState(this)};e.prototype.append=function(e){var t=this._trajectory.length===0;if(t){this._resetTransition()}r.prototype.append.call(this,e);if(t){this._setDesiredCenter();this._setDesiredZoom()}};e.prototype.prepend=function(e){var t=this._trajectory.length===0;if(t){this._resetTransition()}r.prototype.prepend.call(this,e);if(t){this._setDesiredCenter();this._setDesiredZoom()}};e.prototype.set=function(e){r.prototype.set.call(this,e);this._desiredLookat=null;this._resetTransition();this._clearRotation();this._setDesiredCenter();this._setDesiredZoom();if(this._trajectory.length<3){this._useBezier=true}};e.prototype.setSpeed=function(e){this._speedCoefficient=this._spatial.clamp(e,0,10)};e.prototype.update=function(e){if(this._alpha===1&&this._currentIndex+this._alpha<this._trajectory.length){this._currentIndex+=1;this._useBezier=this._trajectory.length<3&&this._currentIndex+1===this._trajectory.length;this._setCurrent();this._resetTransition();this._clearRotation();this._desiredZoom=this._currentNode.fullPano?this._zoom:0;this._desiredLookat=null}var t=this._animationSpeed*(60/e);this._baseAlpha=Math.min(1,this._baseAlpha+this._speedCoefficient*t);if(this._useBezier){this._alpha=this._unitBezier.solve(this._baseAlpha)}else{this._alpha=this._baseAlpha}this._updateRotation();if(!this._rotationDelta.isZero){this._applyRotation(this._rotationDelta,this._previousCamera);this._applyRotation(this._rotationDelta,this._currentCamera)}this._updateRotationBasic();if(this._basicRotation[0]!==0||this._basicRotation[1]!==0){this._applyRotationBasic(this._basicRotation)}this._updateZoom(t);this._updateLookat(t);this._camera.lerpCameras(this._previousCamera,this._currentCamera,this.alpha)};e.prototype._getAlpha=function(){return this._motionless?Math.ceil(this._alpha):this._alpha};e.prototype._setCurrentCamera=function(){r.prototype._setCurrentCamera.call(this);this._adjustCameras()};e.prototype._adjustCameras=function(){if(this._previousNode==null){return}var e=this._camera.lookat.clone().sub(this._camera.position);this._previousCamera.lookat.copy(e.clone().add(this._previousCamera.position));if(this._currentNode.fullPano){this._currentCamera.lookat.copy(e.clone().add(this._currentCamera.position))}};e.prototype._resetTransition=function(){this._alpha=0;this._baseAlpha=0;this._motionless=this._motionlessTransition()};return e}(o.InteractiveStateBase);r.TraversingState=a;r.default=a},{"../../State":298,"@mapbox/unitbezier":2}],459:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.WaitingState=void 0;var i=e("../../State");var o=function(r){n(e,r);function e(e){var t=r.call(this,e)||this;t._zoom=0;t._adjustCameras();t._motionless=t._motionlessTransition();return t}e.prototype.traverse=function(){return new i.TraversingState(this)};e.prototype.waitInteractively=function(){return new i.InteractiveWaitingState(this)};e.prototype.prepend=function(e){r.prototype.prepend.call(this,e);this._motionless=this._motionlessTransition()};e.prototype.set=function(e){r.prototype.set.call(this,e);this._motionless=this._motionlessTransition()};e.prototype.move=function(e){this._alpha=Math.max(0,Math.min(1,this._alpha+e))};e.prototype.moveTo=function(e){this._alpha=Math.max(0,Math.min(1,e))};e.prototype.update=function(e){this._camera.lerpCameras(this._previousCamera,this._currentCamera,this.alpha)};e.prototype._getAlpha=function(){return this._motionless?Math.round(this._alpha):this._alpha};e.prototype._setCurrentCamera=function(){r.prototype._setCurrentCamera.call(this);this._adjustCameras()};e.prototype._adjustCameras=function(){if(this._previousNode==null){return}if(this._currentNode.fullPano){var e=this._camera.lookat.clone().sub(this._camera.position);this._currentCamera.lookat.copy(e.clone().add(this._currentCamera.position))}if(this._previousNode.fullPano){var e=this._currentCamera.lookat.clone().sub(this._currentCamera.position);this._previousCamera.lookat.copy(e.clone().add(this._previousCamera.position))}};return e}(i.StateBase);r.WaitingState=o;r.default=o},{"../../State":298}],460:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ImageTileLoader=void 0;var n=e("rxjs");var i=function(){function e(e,t,r){this._scheme=e;this._host=t;this._origin=r!=null?"?origin="+r:""}e.prototype.getTile=function(i,o,a,s,u,e,t){var r="/"+i+"/"+o+","+a+","+s+","+u+"/"+e+","+t+"/0/default.jpg";var c=this._scheme+"://"+this._host+r+this._origin;var l=null;return[n.Observable.create(function(n){l=new XMLHttpRequest;l.open("GET",c,true);l.responseType="arraybuffer";l.timeout=15e3;l.onload=function(e){if(l.status!==200){n.error(new Error("Failed to fetch tile ("+i+": "+o+","+a+","+s+","+u+"). "+("Status: "+l.status+", "+l.statusText)));return}var t=new Image;t.crossOrigin="Anonymous";t.onload=function(e){n.next(t);n.complete()};t.onerror=function(e){n.error(new Error("Failed to load tile image ("+i+": "+o+","+a+","+s+","+u+")"))};var r=new Blob([l.response]);t.src=window.URL.createObjectURL(r)};l.onerror=function(e){n.error(new Error("Failed to fetch tile ("+i+": "+o+","+a+","+s+","+u+")"))};l.ontimeout=function(e){n.error(new Error("Tile request timed out ("+i+": "+o+","+a+","+s+","+u+")"))};l.onabort=function(e){n.error(new Error("Tile request was aborted ("+i+": "+o+","+a+","+s+","+u+")"))};l.send(null)}),function(){if(l!=null){l.abort()}}]};return e}();r.ImageTileLoader=i;r.default=i},{rxjs:43}],461:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ImageTileStore=void 0;var n=function(){function e(){this._images={}}e.prototype.addImage=function(e,t,r){if(!(r in this._images)){this._images[r]={}}this._images[r][t]=e};e.prototype.dispose=function(){for(var e=0,t=Object.keys(this._images);e<t.length;e++){var r=t[e];var n=this._images[r];for(var i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];window.URL.revokeObjectURL(n[a].src);delete n[a]}delete this._images[r]}};e.prototype.getImage=function(e,t){return this._images[t][e]};e.prototype.hasImage=function(e,t){return t in this._images&&e in this._images[t]};return e}();r.ImageTileStore=n;r.default=n},{}],462:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.RegionOfInterestCalculator=void 0;var n=e("../Geo");var i=function(){function e(){this._viewportCoords=new n.ViewportCoords}e.prototype.computeRegionOfInterest=function(e,t,r){var n=this._viewportBoundaryPoints(4);var i=this._viewportPointsBoundingBox(n,e,r);this._clipBoundingBox(i);var o=2/t.width;var a=2/t.height;var s=[[-.5*o,.5*a],[.5*o,.5*a],[.5*o,-.5*a],[-.5*o,-.5*a]];var u=this._viewportPointsBoundingBox(s,e,r);return{bbox:i,pixelHeight:u.maxY-u.minY,pixelWidth:u.maxX-u.minX+(u.minX<u.maxX?0:1)}};e.prototype._viewportBoundaryPoints=function(e){var t=[];var r=[[-1,1],[1,1],[1,-1],[-1,-1]];var n=[[2,0],[0,-2],[-2,0],[0,2]];for(var i=0;i<4;++i){var o=r[i];var a=n[i];for(var s=0;s<e;++s){t.push([o[0]+a[0]*s/e,o[1]+a[1]*s/e])}}return t};e.prototype._viewportPointsBoundingBox=function(e,t,r){var n=this;var i=e.map(function(e){return n._viewportCoords.viewportToBasic(e[0],e[1],r,t.perspective)});if(r.gpano!=null){return this._boundingBoxPano(i)}else{return this._boundingBox(i)}};e.prototype._boundingBox=function(e){var t={maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY};for(var r=0;r<e.length;++r){t.minX=Math.min(t.minX,e[r][0]);t.maxX=Math.max(t.maxX,e[r][0]);t.minY=Math.min(t.minY,e[r][1]);t.maxY=Math.max(t.maxY,e[r][1])}return t};e.prototype._boundingBoxPano=function(e){var r=this;var t=[];var n=[];for(var i=0;i<e.length;++i){t.push(e[i][0]);n.push(e[i][1])}t.sort(function(e,t){return r._sign(e-t)});n.sort(function(e,t){return r._sign(e-t)});var o=this._intervalPano(t);return{maxX:o[1],maxY:n[n.length-1],minX:o[0],minY:n[0]}};e.prototype._intervalPano=function(e){var t=0;var r=-1;for(var n=0;n<e.length-1;++n){var i=e[n+1]-e[n];if(i>t){t=i;r=n}}var o=e[0]+1-e[e.length-1];if(o>t){return[e[0],e[e.length-1]]}else{return[e[r+1],e[r]]}};e.prototype._clipBoundingBox=function(e){e.minX=Math.max(0,Math.min(1,e.minX));e.maxX=Math.max(0,Math.min(1,e.maxX));e.minY=Math.max(0,Math.min(1,e.minY));e.maxY=Math.max(0,Math.min(1,e.maxY))};e.prototype._sign=function(e){return e>0?1:e<0?-1:0};return e}();r.RegionOfInterestCalculator=i;r.default=i},{"../Geo":294}],463:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TextureProvider=void 0;var u=e("rxjs/operators");var g=e("three");var c=e("rxjs");var n=function(){function e(e,t,r,n,i,o,a,s){this._disposed=false;this._key=e;if(t<=0||r<=0){console.warn("Original image size ("+t+", "+r+") is invalid ("+e+"). Tiles will not be loaded.")}this._width=t;this._height=r;this._maxLevel=Math.ceil(Math.log(Math.max(r,t))/Math.log(2));this._currentLevel=-1;this._tileSize=n;this._updated$=new c.Subject;this._createdSubject$=new c.Subject;this._created$=this._createdSubject$.pipe(u.publishReplay(1),u.refCount());this._createdSubscription=this._created$.subscribe(function(){});this._hasSubject$=new c.Subject;this._has$=this._hasSubject$.pipe(u.startWith(false),u.publishReplay(1),u.refCount());this._hasSubscription=this._has$.subscribe(function(){});this._abortFunctions=[];this._tileSubscriptions={};this._renderedCurrentLevelTiles={};this._renderedTiles={};this._background=i;this._camera=null;this._imageTileLoader=o;this._imageTileStore=a;this._renderer=s;this._renderTarget=null;this._roi=null}Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"hasTexture$",{get:function(){return this._has$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"textureUpdated$",{get:function(){return this._updated$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"textureCreated$",{get:function(){return this._created$},enumerable:false,configurable:true});e.prototype.abort=function(){for(var e in this._tileSubscriptions){if(!this._tileSubscriptions.hasOwnProperty(e)){continue}this._tileSubscriptions[e].unsubscribe()}this._tileSubscriptions={};for(var t=0,r=this._abortFunctions;t<r.length;t++){var n=r[t];n()}this._abortFunctions=[]};e.prototype.dispose=function(){if(this._disposed){console.warn("Texture already disposed ("+this._key+")");return}this.abort();if(this._renderTarget!=null){this._renderTarget.dispose();this._renderTarget=null}this._imageTileStore.dispose();this._imageTileStore=null;this._background=null;this._camera=null;this._imageTileLoader=null;this._renderer=null;this._roi=null;this._createdSubscription.unsubscribe();this._hasSubscription.unsubscribe();this._disposed=true};e.prototype.setRegionOfInterest=function(e){if(this._width<=0||this._height<=0){return}this._roi=e;var t=1/this._roi.pixelWidth;var r=1/this._roi.pixelHeight;var n=Math.max(r,t);var i=Math.max(0,Math.min(this._maxLevel,Math.ceil(Math.log(n)/Math.log(2))));if(i!==this._currentLevel){this.abort();this._currentLevel=i;if(!(this._currentLevel in this._renderedTiles)){this._renderedTiles[this._currentLevel]=[]}this._renderedCurrentLevelTiles={};for(var o=0,a=this._renderedTiles[this._currentLevel];o<a.length;o++){var s=a[o];this._renderedCurrentLevelTiles[this._tileKey(this._tileSize,s)]=true}}var u=this._getTileCoords([this._roi.bbox.minX,this._roi.bbox.minY]);var c=this._getTileCoords([this._roi.bbox.maxX,this._roi.bbox.maxY]);var l=this._getTiles(u,c);if(this._camera==null){this._camera=new g.OrthographicCamera(-this._width/2,this._width/2,this._height/2,-this._height/2,-1,1);this._camera.position.z=1;var h=this._renderer.getContext();var p=h.getParameter(h.MAX_TEXTURE_SIZE);var f=Math.max(this._width,this._height);var d=p>f?1:p/f;var v=Math.floor(d*this._width);var m=Math.floor(d*this._height);this._renderTarget=new g.WebGLRenderTarget(v,m,{depthBuffer:false,format:g.RGBFormat,magFilter:g.LinearFilter,minFilter:g.LinearFilter,stencilBuffer:false});this._renderToTarget(0,0,this._width,this._height,this._background);this._createdSubject$.next(this._renderTarget.texture);this._hasSubject$.next(true)}this._fetchTiles(l)};e.prototype.setTileSize=function(e){this._tileSize=e};e.prototype.updateBackground=function(e){this._background=e};e.prototype._fetchTile=function(t,r,n,i,o,a,e,s){var u=this;var c=this._imageTileLoader.getTile(this._key,n,i,o,a,e,s);var l=c[0];var h=c[1];this._abortFunctions.push(h);var p=this._tileKey(this._tileSize,t);var f=l.subscribe(function(e){u._renderToTarget(n,i,o,a,e);u._removeFromDictionary(p,u._tileSubscriptions);u._removeFromArray(h,u._abortFunctions);u._setTileRendered(t,u._currentLevel);u._imageTileStore.addImage(e,p,r);u._updated$.next(true)},function(e){u._removeFromDictionary(p,u._tileSubscriptions);u._removeFromArray(h,u._abortFunctions);console.error(e)});if(!f.closed){this._tileSubscriptions[p]=f}};e.prototype._fetchTiles=function(e){var t=this._tileSize*Math.pow(2,this._maxLevel-this._currentLevel);for(var r=0,n=e;r<n.length;r++){var i=n[r];var o=this._tileKey(this._tileSize,i);if(o in this._renderedCurrentLevelTiles||o in this._tileSubscriptions){continue}var a=t*i[0];var s=t*i[1];var u=a+t>this._width?this._width-a:t;var c=s+t>this._height?this._height-s:t;if(this._imageTileStore.hasImage(o,this._currentLevel)){this._renderToTarget(a,s,u,c,this._imageTileStore.getImage(o,this._currentLevel));this._setTileRendered(i,this._currentLevel);this._updated$.next(true);continue}var l=Math.floor(u/t*this._tileSize);var h=Math.floor(c/t*this._tileSize);this._fetchTile(i,this._currentLevel,a,s,u,c,l,h)}};e.prototype._getTileCoords=function(e){var t=this._tileSize*Math.pow(2,this._maxLevel-this._currentLevel);var r=Math.ceil(this._width/t)-1;var n=Math.ceil(this._height/t)-1;return[Math.min(Math.floor(this._width*e[0]/t),r),Math.min(Math.floor(this._height*e[1]/t),n)]};e.prototype._getTiles=function(e,t){var r=[];if(e[0]>t[0]){var n=this._tileSize*Math.pow(2,this._maxLevel-this._currentLevel);var i=Math.ceil(this._width/n)-1;for(var o=e[0];o<=i;o++){r.push(o)}for(var o=0;o<=t[0];o++){r.push(o)}}else{for(var o=e[0];o<=t[0];o++){r.push(o)}}var a=[];for(var s=0,u=r;s<u.length;s++){var o=u[s];for(var c=e[1];c<=t[1];c++){a.push([o,c])}}return a};e.prototype._removeFromArray=function(e,t){var r=t.indexOf(e);if(r!==-1){t.splice(r,1)}};e.prototype._removeFromDictionary=function(e,t){if(e in t){delete t[e]}};e.prototype._renderToTarget=function(e,t,r,n,i){var o=new g.Texture(i);o.minFilter=g.LinearFilter;o.needsUpdate=true;var a=new g.PlaneGeometry(r,n);var s=new g.MeshBasicMaterial({map:o,side:g.FrontSide});var u=new g.Mesh(a,s);u.position.x=-this._width/2+e+r/2;u.position.y=this._height/2-t-n/2;var c=new g.Scene;c.add(u);var l=this._renderer.getRenderTarget();this._renderer.setRenderTarget(this._renderTarget);this._renderer.render(c,this._camera);this._renderer.setRenderTarget(l);c.remove(u);a.dispose();s.dispose();o.dispose()};e.prototype._setTileRendered=function(e,t){var r=Object.keys(this._renderedTiles).map(function(e){return parseInt(e,10)}).filter(function(e){return e!==t});for(var n=0,i=r;n<i.length;n++){var o=i[n];var a=Math.pow(2,o-t);if(o<t){var s=Math.floor(a*e[0]);var u=Math.floor(a*e[1]);for(var c=0,l=this._renderedTiles[o].slice();c<l.length;c++){var h=l[c];if(h[0]===s&&h[1]===u){var p=this._renderedTiles[o].indexOf(h);this._renderedTiles[o].splice(p,1)}}}else{var f=a*e[0];var d=f+a-1;var v=a*e[1];var m=v+a-1;for(var g=0,_=this._renderedTiles[o].slice();g<_.length;g++){var h=_[g];if(h[0]>=f&&h[0]<=d&&h[1]>=v&&h[1]<=m){var p=this._renderedTiles[o].indexOf(h);this._renderedTiles[o].splice(p,1)}}}if(this._renderedTiles[o].length===0){delete this._renderedTiles[o]}}this._renderedTiles[t].push(e);this._renderedCurrentLevelTiles[this._tileKey(this._tileSize,e)]=true};e.prototype._tileKey=function(e,t){return e+"-"+t[0]+"-"+t[1]};return e}();r.TextureProvider=n;r.default=n},{rxjs:43,"rxjs/operators":241,three:242}],464:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}],465:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.DOM=void 0;var n=function(){function e(e){this._document=!!e?e:document}Object.defineProperty(e.prototype,"document",{get:function(){return this._document},enumerable:false,configurable:true});e.prototype.createElement=function(e,t,r){var n=this._document.createElement(e);if(!!t){n.className=t}if(!!r){r.appendChild(n)}return n};return e}();r.DOM=n;r.default=n},{}],466:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.EventEmitter=void 0;var n=function(){function e(){this._events={}}e.prototype.on=function(e,t){this._events[e]=this._events[e]||[];this._events[e].push(t);return};e.prototype.off=function(e,t){if(!e){this._events={};return}if(!this._listens(e)){var r=this._events[e].indexOf(t);if(r>=0){this._events[e].splice(r,1)}if(this._events[e].length){delete this._events[e]}}else{delete this._events[e]}return};e.prototype.fire=function(e,t){if(!this._listens(e)){return}for(var r=0,n=this._events[e];r<n.length;r++){var i=n[r];i.call(this,t)}return};e.prototype._listens=function(e){return!!(this._events&&this._events[e])};return e}();r.EventEmitter=n;r.default=n},{}],467:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Settings=void 0;var n=e("../Viewer");var i=function(){function t(){}Object.defineProperty(t,"baseImageSize",{get:function(){return t._baseImageSize},enumerable:false,configurable:true});Object.defineProperty(t,"basePanoramaSize",{get:function(){return t._basePanoramaSize},enumerable:false,configurable:true});Object.defineProperty(t,"maxImageSize",{get:function(){return t._maxImageSize},enumerable:false,configurable:true});t.setOptions=function(e){t._baseImageSize=e.baseImageSize!=null?e.baseImageSize:n.ImageSize.Size640;t._basePanoramaSize=e.basePanoramaSize!=null?e.basePanoramaSize:n.ImageSize.Size2048;t._maxImageSize=e.maxImageSize!=null?e.maxImageSize:n.ImageSize.Size2048};return t}();r.Settings=i;r.default=i},{"../Viewer":302}],468:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.isWebGLSupported=r.isWebGLSupportedCached=r.isBlobSupported=r.isObjectSupported=r.isJSONSupported=r.isFunctionSupported=r.isArraySupported=r.isBrowser=void 0;function n(){return typeof window!=="undefined"&&typeof document!=="undefined"}r.isBrowser=n;function i(){return!!(Array.prototype&&Array.prototype.filter&&Array.prototype.indexOf&&Array.prototype.map&&Array.prototype.reverse)}r.isArraySupported=i;function o(){return!!(Function.prototype&&Function.prototype.bind)}r.isFunctionSupported=o;function a(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}r.isJSONSupported=a;function s(){return!!(Object.keys&&Object.assign)}r.isObjectSupported=s;function u(){return"Blob"in window&&"URL"in window}r.isBlobSupported=u;var c=undefined;function l(){if(c===undefined){c=h()}return c}r.isWebGLSupportedCached=l;function h(){var e={alpha:false,antialias:false,depth:true,failIfMajorPerformanceCaveat:false,premultipliedAlpha:true,preserveDrawingBuffer:false,stencil:true};var t=document.createElement("canvas");var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r){return false}var n=["OES_standard_derivatives"];var i=r.getSupportedExtensions();for(var o=0,a=n;o<a.length;o++){var s=a[o];if(i.indexOf(s)===-1){return false}}return true}r.isWebGLSupported=h},{}],469:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Urls=void 0;var n=function(){function i(){}Object.defineProperty(i,"explore",{get:function(){return i._scheme+"://"+i._exploreHost},enumerable:false,configurable:true});Object.defineProperty(i,"origin",{get:function(){return i._origin},enumerable:false,configurable:true});Object.defineProperty(i,"tileScheme",{get:function(){return i._scheme},enumerable:false,configurable:true});Object.defineProperty(i,"tileDomain",{get:function(){return i._imageTileHost},enumerable:false,configurable:true});i.clusterReconstruction=function(e){return i._scheme+"://"+i._clusterReconstructionHost+"/"+e+"/v1.0/aligned.jsonz"};i.exporeImage=function(e){return i._scheme+"://"+i._exploreHost+"/app/?pKey="+e+"&focus=photo"};i.exporeUser=function(e){return i._scheme+"://"+i._exploreHost+"/app/user/"+e};i.falcorModel=function(e){return i._scheme+"://"+i._apiHost+"/v3/model.json?client_id="+e};i.protoMesh=function(e){return i._scheme+"://"+i._meshHost+"/v2/mesh/"+e};i.thumbnail=function(e,t,r){var n=!!r?"?origin="+r:"";return i._scheme+"://"+i._imageHost+"/"+e+"/thumb-"+t+".jpg"+n};i.setOptions=function(e){if(!e){return}if(!!e.apiHost){i._apiHost=e.apiHost}if(!!e.clusterReconstructionHost){i._clusterReconstructionHost=e.clusterReconstructionHost}if(!!e.exploreHost){i._exploreHost=e.exploreHost}if(!!e.imageHost){i._imageHost=e.imageHost}if(!!e.imageTileHost){i._imageTileHost=e.imageTileHost}if(!!e.meshHost){i._meshHost=e.meshHost}if(!!e.scheme){i._scheme=e.scheme}};i._apiHost="a.mapillary.com";i._clusterReconstructionHost="cluster-reconstructions.mapillary.com";i._exploreHost="www.mapillary.com";i._imageHost="images.mapillary.com";i._imageTileHost="loris.mapillary.com";i._meshHost="meshes.mapillary.com";i._origin="mapillary.webgl";i._scheme="https";return i}();r.Urls=n;r.default=n},{}],470:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Alignment=void 0;var n;(function(e){e[e["Bottom"]=0]="Bottom";e[e["BottomLeft"]=1]="BottomLeft";e[e["BottomRight"]=2]="BottomRight";e[e["Center"]=3]="Center";e[e["Left"]=4]="Left";e[e["Right"]=5]="Right";e[e["Top"]=6]="Top";e[e["TopLeft"]=7]="TopLeft";e[e["TopRight"]=8]="TopRight"})(n=r.Alignment||(r.Alignment={}));r.default=n},{}],471:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.CacheService=void 0;var n=e("rxjs");var i=e("rxjs/operators");var a=e("../Graph");var o=function(){function e(e,t){this._graphService=e;this._stateService=t;this._started=false}Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:false,configurable:true});e.prototype.start=function(){var o=this;if(this._started){return}this._uncacheSubscription=this._stateService.currentState$.pipe(i.distinctUntilChanged(undefined,function(e){return e.state.currentNode.key}),i.map(function(e){var t=e.state.trajectory;var r=t.map(function(e){return e.key});var n=t[t.length-1].sequenceKey;return[r,n]}),i.bufferCount(1,5),i.withLatestFrom(this._graphService.graphMode$),i.switchMap(function(e){var t=e[0],r=e[1];var n=t[0][0];var i=r===a.GraphMode.Sequence?t[0][1]:undefined;return o._graphService.uncache$(n,i)})).subscribe(function(){});this._cacheNodeSubscription=this._graphService.graphMode$.pipe(i.skip(1),i.withLatestFrom(this._stateService.currentState$),i.switchMap(function(e){var t=e[0],r=e[1];return t===a.GraphMode.Sequence?o._keyToEdges(r.state.currentNode.key,function(e){return e.sequenceEdges$}):n.from(r.state.trajectory.map(function(e){return e.key}).slice(r.state.currentIndex)).pipe(i.mergeMap(function(e){return o._keyToEdges(e,function(e){return e.spatialEdges$})},6))})).subscribe(function(){});this._started=true};e.prototype.stop=function(){if(!this._started){return}this._uncacheSubscription.unsubscribe();this._uncacheSubscription=null;this._cacheNodeSubscription.unsubscribe();this._cacheNodeSubscription=null;this._started=false};e.prototype._keyToEdges=function(t,e){return this._graphService.cacheNode$(t).pipe(i.switchMap(e),i.first(function(e){return e.cached}),i.timeout(15e3),i.catchError(function(e){console.error("Failed to cache edges ("+t+").",e);return n.empty()}))};return e}();r.CacheService=o;r.default=o},{"../Graph":295,rxjs:43,"rxjs/operators":241}],472:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ComponentController=void 0;var s=e("rxjs/operators");var u=e("../Component");var n=function(){function e(e,t,r,n,i,o){var a=this;this._container=e;this._observer=r;this._navigator=t;this._options=i!=null?i:{};this._key=n;this._navigable=n==null;this._componentService=!!o?o:new u.ComponentService(this._container,this._navigator);this._coverComponent=this._componentService.getCover();this._initializeComponents();if(n){this._initilizeCoverComponent();this._subscribeCoverComponent()}else{this._navigator.movedToKey$.pipe(s.first(function(e){return e!=null})).subscribe(function(e){a._key=e;a._componentService.deactivateCover();a._coverComponent.configure({key:a._key,state:u.CoverState.Hidden});a._subscribeCoverComponent();a._navigator.stateService.start();a._navigator.cacheService.start();a._navigator.panService.start();a._observer.startEmit()})}}Object.defineProperty(e.prototype,"navigable",{get:function(){return this._navigable},enumerable:false,configurable:true});e.prototype.get=function(e){return this._componentService.get(e)};e.prototype.activate=function(e){this._componentService.activate(e)};e.prototype.activateCover=function(){this._coverComponent.configure({state:u.CoverState.Visible})};e.prototype.deactivate=function(e){this._componentService.deactivate(e)};e.prototype.deactivateCover=function(){this._coverComponent.configure({state:u.CoverState.Loading})};e.prototype._initializeComponents=function(){var e=this._options;this._uFalse(e.background,"background");this._uFalse(e.debug,"debug");this._uFalse(e.image,"image");this._uFalse(e.marker,"marker");this._uFalse(e.navigation,"navigation");this._uFalse(e.popup,"popup");this._uFalse(e.route,"route");this._uFalse(e.slider,"slider");this._uFalse(e.spatialData,"spatialData");this._uFalse(e.tag,"tag");this._uTrue(e.attribution,"attribution");this._uTrue(e.bearing,"bearing");this._uTrue(e.cache,"cache");this._uTrue(e.direction,"direction");this._uTrue(e.imagePlane,"imagePlane");this._uTrue(e.keyboard,"keyboard");this._uTrue(e.loading,"loading");this._uTrue(e.mouse,"mouse");this._uTrue(e.sequence,"sequence");this._uTrue(e.stats,"stats");this._uTrue(e.zoom,"zoom")};e.prototype._initilizeCoverComponent=function(){var e=this._options;this._coverComponent.configure({key:this._key});if(e.cover===undefined||e.cover){this.activateCover()}else{this.deactivateCover()}};e.prototype._setNavigable=function(e){if(this._navigable===e){return}this._navigable=e;this._observer.navigable$.next(e)};e.prototype._subscribeCoverComponent=function(){var n=this;this._coverComponent.configuration$.pipe(s.distinctUntilChanged(undefined,function(e){return e.state})).subscribe(function(r){if(r.state===u.CoverState.Loading){n._navigator.stateService.currentKey$.pipe(s.first(),s.switchMap(function(e){var t=e==null||e!==r.key;if(t){n._setNavigable(false)}return t?n._navigator.moveToKey$(r.key):n._navigator.stateService.currentNode$.pipe(s.first())})).subscribe(function(){n._navigator.stateService.start();n._navigator.cacheService.start();n._navigator.panService.start();n._observer.startEmit();n._coverComponent.configure({state:u.CoverState.Hidden});n._componentService.deactivateCover();n._setNavigable(true)},function(e){console.error("Failed to deactivate cover.",e);n._coverComponent.configure({state:u.CoverState.Visible})})}else if(r.state===u.CoverState.Visible){n._observer.stopEmit();n._navigator.stateService.stop();n._navigator.cacheService.stop();n._navigator.playService.stop();n._navigator.panService.stop();n._componentService.activateCover();n._setNavigable(r.key==null)}})};e.prototype._uFalse=function(e,t){if(e===undefined){this._componentService.deactivate(t);return}if(typeof e==="boolean"){if(e){this._componentService.activate(t)}else{this._componentService.deactivate(t)}return}this._componentService.configure(t,e);this._componentService.activate(t)};e.prototype._uTrue=function(e,t){if(e===undefined){this._componentService.activate(t);return}if(typeof e==="boolean"){if(e){this._componentService.activate(t)}else{this._componentService.deactivate(t)}return}this._componentService.configure(t,e);this._componentService.activate(t)};return e}();r.ComponentController=n},{"../Component":291,"rxjs/operators":241}],473:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Container=void 0;var i=e("../Render");var o=e("../Utils");var a=e("../Viewer");var n=function(){function e(e,t,r,n){this._dom=!!n?n:new o.DOM;if(typeof e==="string"){this._container=this._dom.document.getElementById(e);if(!this._container){throw new Error("Container '"+e+"' not found.")}}else if(e instanceof HTMLElement){this._container=e}else{throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}this.id=!!this._container.id?this._container.id:"mapillary-js-fallback-container-id";this._container.classList.add("mapillary-js");this._canvasContainer=this._dom.createElement("div","mapillary-js-interactive",this._container);this._domContainer=this._dom.createElement("div","mapillary-js-dom",this._container);this.renderService=new i.RenderService(this._container,t.currentState$,r.renderMode);this.glRenderer=new i.GLRenderer(this._canvasContainer,this.renderService,this._dom);this.domRenderer=new i.DOMRenderer(this._domContainer,this.renderService,t.currentState$);this.keyboardService=new a.KeyboardService(this._canvasContainer);this.mouseService=new a.MouseService(this._container,this._canvasContainer,this._domContainer,document);this.touchService=new a.TouchService(this._canvasContainer,this._domContainer);this.spriteService=new a.SpriteService(r.sprite)}Object.defineProperty(e.prototype,"element",{get:function(){return this._container},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"canvasContainer",{get:function(){return this._canvasContainer},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"domContainer",{get:function(){return this._domContainer},enumerable:false,configurable:true});return e}();r.Container=n;r.default=n},{"../Render":297,"../Utils":301,"../Viewer":302}],474:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.ImageSize=void 0;var n;(function(e){e[e["Size320"]=320]="Size320";e[e["Size640"]=640]="Size640";e[e["Size1024"]=1024]="Size1024";e[e["Size2048"]=2048]="Size2048"})(n=r.ImageSize||(r.ImageSize={}))},{}],475:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.KeyboardService=void 0;var n=e("rxjs");var i=function(){function e(e){this._keyDown$=n.fromEvent(e,"keydown");this._keyUp$=n.fromEvent(e,"keyup")}Object.defineProperty(e.prototype,"keyDown$",{get:function(){return this._keyDown$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"keyUp$",{get:function(){return this._keyUp$},enumerable:false,configurable:true});return e}();r.KeyboardService=i;r.default=i},{rxjs:43}],476:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.LoadingService=void 0;var n=e("rxjs/operators");var i=e("rxjs");var o=function(){function e(){this._loadersSubject$=new i.Subject;this._loaders$=this._loadersSubject$.pipe(n.scan(function(e,t){if(t.task!==undefined){e[t.task]=t.loading}return e},{}),n.startWith({}),n.publishReplay(1),n.refCount())}Object.defineProperty(e.prototype,"loading$",{get:function(){return this._loaders$.pipe(n.map(function(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}if(e[t]){return true}}return false}),n.debounceTime(100),n.distinctUntilChanged())},enumerable:false,configurable:true});e.prototype.taskLoading$=function(t){return this._loaders$.pipe(n.map(function(e){return!!e[t]}),n.debounceTime(100),n.distinctUntilChanged())};e.prototype.startLoading=function(e){this._loadersSubject$.next({loading:true,task:e})};e.prototype.stopLoading=function(e){this._loadersSubject$.next({loading:false,task:e})};return e}();r.LoadingService=o;r.default=o},{rxjs:43,"rxjs/operators":241}],477:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.MouseService=void 0;var u=e("rxjs");var c=e("rxjs/operators");var n=function(){function e(e,i,t,r){var n=this;this._activeSubject$=new u.BehaviorSubject(false);this._active$=this._activeSubject$.pipe(c.distinctUntilChanged(),c.publishReplay(1),c.refCount());this._claimMouse$=new u.Subject;this._claimWheel$=new u.Subject;this._deferPixelClaims$=new u.Subject;this._deferPixels$=this._deferPixelClaims$.pipe(c.scan(function(e,t){if(t.deferPixels==null){delete e[t.name]}else{e[t.name]=t.deferPixels}return e},{}),c.map(function(e){var t=-1;for(var r in e){if(!e.hasOwnProperty(r)){continue}var n=e[r];if(n>t){t=n}}return t}),c.startWith(-1),c.publishReplay(1),c.refCount());this._deferPixels$.subscribe(function(){});this._documentMouseMove$=u.fromEvent(r,"mousemove");this._documentMouseUp$=u.fromEvent(r,"mouseup");this._mouseDown$=u.fromEvent(i,"mousedown");this._mouseLeave$=u.fromEvent(i,"mouseleave");this._mouseMove$=u.fromEvent(i,"mousemove");this._mouseUp$=u.fromEvent(i,"mouseup");this._mouseOut$=u.fromEvent(i,"mouseout");this._mouseOver$=u.fromEvent(i,"mouseover");this._domMouseDown$=u.fromEvent(t,"mousedown");this._domMouseMove$=u.fromEvent(t,"mousemove");this._click$=u.fromEvent(i,"click");this._contextMenu$=u.fromEvent(i,"contextmenu");this._dblClick$=u.merge(u.fromEvent(e,"click"),u.fromEvent(i,"dblclick")).pipe(c.bufferCount(3,1),c.filter(function(e){var t=e[0];var r=e[1];var n=e[2];return t.type==="click"&&r.type==="click"&&n.type==="dblclick"&&t.target.parentNode===i&&r.target.parentNode===i}),c.map(function(e){return e[2]}),c.share());u.merge(this._domMouseDown$,this._domMouseMove$,this._dblClick$,this._contextMenu$).subscribe(function(e){e.preventDefault()});this._mouseWheel$=u.merge(u.fromEvent(i,"wheel"),u.fromEvent(t,"wheel")).pipe(c.share());this._consistentContextMenu$=u.merge(this._mouseDown$,this._mouseMove$,this._mouseOut$,this._mouseUp$,this._contextMenu$).pipe(c.bufferCount(3,1),c.filter(function(e){return e[0].type==="mousedown"&&e[1].type==="contextmenu"&&e[2].type==="mouseup"}),c.map(function(e){return e[1]}),c.share());var o=u.merge(u.fromEvent(window,"blur"),this._documentMouseUp$.pipe(c.filter(function(e){return e.button===0}))).pipe(c.share());var a=this._createMouseDragInitiate$(this._mouseDown$,o,true).pipe(c.share());this._mouseDragStart$=this._createMouseDragStart$(a).pipe(c.share());this._mouseDrag$=this._createMouseDrag$(a,o).pipe(c.share());this._mouseDragEnd$=this._createMouseDragEnd$(this._mouseDragStart$,o).pipe(c.share());var s=this._createMouseDragInitiate$(this._domMouseDown$,o,false).pipe(c.share());this._domMouseDragStart$=this._createMouseDragStart$(s).pipe(c.share());this._domMouseDrag$=this._createMouseDrag$(s,o).pipe(c.share());this._domMouseDragEnd$=this._createMouseDragEnd$(this._domMouseDragStart$,o).pipe(c.share());this._proximateClick$=this._mouseDown$.pipe(c.switchMap(function(e){return n._click$.pipe(c.takeUntil(n._createDeferredMouseMove$(e,n._documentMouseMove$)),c.take(1))}),c.share());this._staticClick$=this._mouseDown$.pipe(c.switchMap(function(e){return n._click$.pipe(c.takeUntil(n._documentMouseMove$),c.take(1))}),c.share());this._mouseDragStart$.subscribe();this._mouseDrag$.subscribe();this._mouseDragEnd$.subscribe();this._domMouseDragStart$.subscribe();this._domMouseDrag$.subscribe();this._domMouseDragEnd$.subscribe();this._staticClick$.subscribe();this._mouseOwner$=this._createOwner$(this._claimMouse$).pipe(c.publishReplay(1),c.refCount());this._wheelOwner$=this._createOwner$(this._claimWheel$).pipe(c.publishReplay(1),c.refCount());this._mouseOwner$.subscribe(function(){});this._wheelOwner$.subscribe(function(){})}Object.defineProperty(e.prototype,"active$",{get:function(){return this._active$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"activate$",{get:function(){return this._activeSubject$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"documentMouseMove$",{get:function(){return this._documentMouseMove$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"documentMouseUp$",{get:function(){return this._documentMouseUp$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"domMouseDragStart$",{get:function(){return this._domMouseDragStart$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"domMouseDrag$",{get:function(){return this._domMouseDrag$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"domMouseDragEnd$",{get:function(){return this._domMouseDragEnd$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"domMouseDown$",{get:function(){return this._domMouseDown$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"domMouseMove$",{get:function(){return this._domMouseMove$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseOwner$",{get:function(){return this._mouseOwner$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseDown$",{get:function(){return this._mouseDown$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseMove$",{get:function(){return this._mouseMove$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseLeave$",{get:function(){return this._mouseLeave$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseOut$",{get:function(){return this._mouseOut$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseOver$",{get:function(){return this._mouseOver$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseUp$",{get:function(){return this._mouseUp$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"click$",{get:function(){return this._click$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"dblClick$",{get:function(){return this._dblClick$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"contextMenu$",{get:function(){return this._consistentContextMenu$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseWheel$",{get:function(){return this._mouseWheel$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseDragStart$",{get:function(){return this._mouseDragStart$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseDrag$",{get:function(){return this._mouseDrag$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"mouseDragEnd$",{get:function(){return this._mouseDragEnd$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"proximateClick$",{get:function(){return this._proximateClick$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"staticClick$",{get:function(){return this._staticClick$},enumerable:false,configurable:true});e.prototype.claimMouse=function(e,t){this._claimMouse$.next({name:e,zindex:t})};e.prototype.unclaimMouse=function(e){this._claimMouse$.next({name:e,zindex:null})};e.prototype.deferPixels=function(e,t){this._deferPixelClaims$.next({name:e,deferPixels:t})};e.prototype.undeferPixels=function(e){this._deferPixelClaims$.next({name:e,deferPixels:null})};e.prototype.claimWheel=function(e,t){this._claimWheel$.next({name:e,zindex:t})};e.prototype.unclaimWheel=function(e){this._claimWheel$.next({name:e,zindex:null})};e.prototype.filtered$=function(e,t){return this._filtered(e,t,this._mouseOwner$)};e.prototype.filteredWheel$=function(e,t){return this._filtered(e,t,this._wheelOwner$)};e.prototype._createDeferredMouseMove$=function(n,e){return e.pipe(c.map(function(e){var t=e.clientX-n.clientX;var r=e.clientY-n.clientY;return[e,Math.sqrt(t*t+r*r)]}),c.withLatestFrom(this._deferPixels$),c.filter(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];return n>i}),c.map(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];return r}))};e.prototype._createMouseDrag$=function(e,t){var r=this;return e.pipe(c.map(function(e){var t=e[0],r=e[1];return r}),c.switchMap(function(e){return u.concat(u.of(e),r._documentMouseMove$).pipe(c.takeUntil(t))}))};e.prototype._createMouseDragEnd$=function(e,t){return e.pipe(c.switchMap(function(e){return t.pipe(c.first())}))};e.prototype._createMouseDragStart$=function(e){return e.pipe(c.map(function(e){var t=e[0],r=e[1];return t}))};e.prototype._createMouseDragInitiate$=function(e,t,r){var n=this;return e.pipe(c.filter(function(e){return e.button===0}),c.switchMap(function(e){return u.combineLatest(u.of(e),r?n._createDeferredMouseMove$(e,n._documentMouseMove$):n._documentMouseMove$).pipe(c.takeUntil(t),c.take(1))}))};e.prototype._createOwner$=function(e){return e.pipe(c.scan(function(e,t){if(t.zindex==null){delete e[t.name]}else{e[t.name]=t.zindex}return e},{}),c.map(function(e){var t=null;var r=-1;for(var n in e){if(!e.hasOwnProperty(n)){continue}if(e[n]>r){r=e[n];t=n}}return t}),c.startWith(null))};e.prototype._filtered=function(n,e,t){return e.pipe(c.withLatestFrom(t),c.filter(function(e){var t=e[0],r=e[1];return r===n}),c.map(function(e){var t=e[0],r=e[1];return t}))};return e}();r.MouseService=n;r.default=n},{rxjs:43,"rxjs/operators":241}],478:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Navigator=void 0;var h=e("rxjs");var o=e("rxjs/operators");var p=e("../API");var f=e("../Graph");var n=e("../Edge");var i=e("../Error");var d=e("../State");var v=e("../Viewer");var m=e("./PanService");var a=function(){function e(e,t,r,n,i,o,a,s,u,c,l){this._apiV3=n!=null?n:new p.APIv3(e,r);this._imageLoadingService=o!=null?o:new f.ImageLoadingService;this._graphService=i!=null?i:new f.GraphService(new f.Graph(this.apiV3),this._imageLoadingService);this._loadingService=a!=null?a:new v.LoadingService;this._loadingName="navigator";this._stateService=s!=null?s:new d.StateService(t.transitionMode);this._cacheService=u!=null?u:new v.CacheService(this._graphService,this._stateService);this._playService=c!=null?c:new v.PlayService(this._graphService,this._stateService);this._panService=l!=null?l:new m.PanService(this._graphService,this._stateService,t.combinedPanning);this._keyRequested$=new h.BehaviorSubject(null);this._movedToKey$=new h.BehaviorSubject(null);this._request$=null;this._requestSubscription=null;this._nodeRequestSubscription=null}Object.defineProperty(e.prototype,"apiV3",{get:function(){return this._apiV3},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"cacheService",{get:function(){return this._cacheService},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"graphService",{get:function(){return this._graphService},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"imageLoadingService",{get:function(){return this._imageLoadingService},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"loadingService",{get:function(){return this._loadingService},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"movedToKey$",{get:function(){return this._movedToKey$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"panService",{get:function(){return this._panService},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"playService",{get:function(){return this._playService},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"stateService",{get:function(){return this._stateService},enumerable:false,configurable:true});e.prototype.moveToKey$=function(e){this._abortRequest("to key "+e);this._loadingService.startLoading(this._loadingName);var t=this._moveToKey$(e);return this._makeRequest$(t)};e.prototype.moveDir$=function(i){var t=this;this._abortRequest("in dir "+n.EdgeDirection[i]);this._loadingService.startLoading(this._loadingName);var e=this.stateService.currentNode$.pipe(o.first(),o.mergeMap(function(e){return([n.EdgeDirection.Next,n.EdgeDirection.Prev].indexOf(i)>-1?e.sequenceEdges$:e.spatialEdges$).pipe(o.first(),o.map(function(e){for(var t=0,r=e.edges;t<r.length;t++){var n=r[t];if(n.data.direction===i){return n.to}}return null}))}),o.mergeMap(function(e){if(e==null){t._loadingService.stopLoading(t._loadingName);return h.throwError(new Error("Direction ("+i+") does not exist for current node."))}return t._moveToKey$(e)}));return this._makeRequest$(e)};e.prototype.moveCloseTo$=function(t,r){var n=this;this._abortRequest("to lat "+t+", lon "+r);this._loadingService.startLoading(this._loadingName);var e=this.apiV3.imageCloseTo$(t,r).pipe(o.mergeMap(function(e){if(e==null){n._loadingService.stopLoading(n._loadingName);return h.throwError(new Error("No image found close to lat "+t+", lon "+r+"."))}return n._moveToKey$(e.key)}));return this._makeRequest$(e)};e.prototype.setFilter$=function(t){var r=this;this._stateService.clearNodes();return this._movedToKey$.pipe(o.first(),o.mergeMap(function(e){if(e!=null){return r._trajectoryKeys$().pipe(o.mergeMap(function(e){return r._graphService.setFilter$(t).pipe(o.mergeMap(function(){return r._cacheKeys$(e)}))}),o.last())}return r._keyRequested$.pipe(o.first(),o.mergeMap(function(e){if(e!=null){return r._graphService.setFilter$(t).pipe(o.mergeMap(function(){return r._graphService.cacheNode$(e)}))}return r._graphService.setFilter$(t).pipe(o.map(function(){return undefined}))}))}),o.map(function(e){return undefined}))};e.prototype.setToken$=function(t){var r=this;this._abortRequest("to set token");this._stateService.clearNodes();return this._movedToKey$.pipe(o.first(),o.tap(function(e){r._apiV3.setToken(t)}),o.mergeMap(function(e){return e==null?r._graphService.reset$([]):r._trajectoryKeys$().pipe(o.mergeMap(function(e){return r._graphService.reset$(e).pipe(o.mergeMap(function(){return r._cacheKeys$(e)}))}),o.last(),o.map(function(e){return undefined}))}))};e.prototype._cacheKeys$=function(e){var t=this;var r=e.map(function(e){return t._graphService.cacheNode$(e)});return h.from(r).pipe(o.mergeAll())};e.prototype._abortRequest=function(e){if(this._requestSubscription!=null){this._requestSubscription.unsubscribe();this._requestSubscription=null}if(this._nodeRequestSubscription!=null){this._nodeRequestSubscription.unsubscribe();this._nodeRequestSubscription=null}if(this._request$!=null){if(!(this._request$.isStopped||this._request$.hasError)){this._request$.error(new i.AbortMapillaryError("Request aborted by a subsequent request "+e+"."))}this._request$=null}};e.prototype._makeRequest$=function(e){var t=this;var r=new h.ReplaySubject(1);this._requestSubscription=r.subscribe(undefined,function(){});this._request$=r;this._nodeRequestSubscription=e.subscribe(function(e){t._request$=null;r.next(e);r.complete()},function(e){t._request$=null;r.error(e)});return r};e.prototype._moveToKey$=function(e){var t=this;this._keyRequested$.next(e);return this._graphService.cacheNode$(e).pipe(o.tap(function(e){t._stateService.setNodes([e]);t._movedToKey$.next(e.key)}),o.finalize(function(){t._loadingService.stopLoading(t._loadingName)}))};e.prototype._trajectoryKeys$=function(){return this._stateService.currentState$.pipe(o.first(),o.map(function(e){return e.state.trajectory.map(function(e){return e.key})}))};return e}();r.Navigator=a;r.default=a},{"../API":290,"../Edge":292,"../Error":293,"../Graph":295,"../State":298,"../Viewer":302,"./PanService":480,rxjs:43,"rxjs/operators":241}],479:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Observer=void 0;var s=e("rxjs");var c=e("rxjs/operators");var i=e("../Viewer");var n=function(){function e(e,t,r){var n=this;this._container=r;this._eventEmitter=e;this._navigator=t;this._projection=new i.Projection;this._started=false;this._navigable$=new s.Subject;this._navigable$.subscribe(function(e){n._eventEmitter.fire(i.Viewer.navigablechanged,e)});this._navigator.loadingService.loading$.subscribe(function(e){n._eventEmitter.fire(i.Viewer.loadingchanged,e)})}Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"navigable$",{get:function(){return this._navigable$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},enumerable:false,configurable:true});e.prototype.project$=function(o){var a=this;return s.combineLatest(this._container.renderService.renderCamera$,this._navigator.stateService.currentNode$,this._navigator.stateService.reference$).pipe(c.first(),c.map(function(e){var t=e[0],r=e[1],n=e[2];if(a._projection.distanceBetweenLatLons(o,r.latLon)>1e3){return null}var i=a._projection.latLonToCanvas(o,a._container.element,t,n);return!!i?[Math.round(i[0]),Math.round(i[1])]:null}))};e.prototype.projectBasic$=function(i){var o=this;return s.combineLatest(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$).pipe(c.first(),c.map(function(e){var t=e[0],r=e[1];var n=o._projection.basicToCanvas(i,o._container.element,t,r);return!!n?[Math.round(n[0]),Math.round(n[1])]:null}))};e.prototype.startEmit=function(){var u=this;if(this._started){return}this._started=true;this._currentNodeSubscription=this._navigator.stateService.currentNodeExternal$.subscribe(function(e){u._eventEmitter.fire(i.Viewer.nodechanged,e)});this._sequenceEdgesSubscription=this._navigator.stateService.currentNodeExternal$.pipe(c.switchMap(function(e){return e.sequenceEdges$})).subscribe(function(e){u._eventEmitter.fire(i.Viewer.sequenceedgeschanged,e)});this._spatialEdgesSubscription=this._navigator.stateService.currentNodeExternal$.pipe(c.switchMap(function(e){return e.spatialEdges$})).subscribe(function(e){u._eventEmitter.fire(i.Viewer.spatialedgeschanged,e)});this._moveSubscription=s.combineLatest(this._navigator.stateService.inMotion$,this._container.mouseService.active$,this._container.touchService.active$).pipe(c.map(function(e){return e[0]||e[1]||e[2]}),c.distinctUntilChanged()).subscribe(function(e){if(e){u._eventEmitter.fire(i.Viewer.movestart,null)}else{u._eventEmitter.fire(i.Viewer.moveend,null)}});this._bearingSubscription=this._container.renderService.bearing$.pipe(c.auditTime(100),c.distinctUntilChanged(function(e,t){return Math.abs(t-e)<1})).subscribe(function(e){u._eventEmitter.fire(i.Viewer.bearingchanged,e)});var e=this._container.mouseService.active$.pipe(c.switchMap(function(e){return e?s.empty():u._container.mouseService.mouseMove$}));this._viewerMouseEventSubscription=s.merge(this._mapMouseEvent$(i.Viewer.click,this._container.mouseService.staticClick$),this._mapMouseEvent$(i.Viewer.contextmenu,this._container.mouseService.contextMenu$),this._mapMouseEvent$(i.Viewer.dblclick,this._container.mouseService.dblClick$),this._mapMouseEvent$(i.Viewer.mousedown,this._container.mouseService.mouseDown$),this._mapMouseEvent$(i.Viewer.mousemove,e),this._mapMouseEvent$(i.Viewer.mouseout,this._container.mouseService.mouseOut$),this._mapMouseEvent$(i.Viewer.mouseover,this._container.mouseService.mouseOver$),this._mapMouseEvent$(i.Viewer.mouseup,this._container.mouseService.mouseUp$)).pipe(c.withLatestFrom(this._container.renderService.renderCamera$,this._navigator.stateService.reference$,this._navigator.stateService.currentTransform$),c.map(function(e){var t=e[0],r=t[0],n=t[1],i=e[1],o=e[2],a=e[3];var s=u._projection.eventToUnprojection(n,u._container.element,i,o,a);return{basicPoint:s.basicPoint,latLon:s.latLon,originalEvent:n,pixelPoint:s.pixelPoint,target:u._eventEmitter,type:r}})).subscribe(function(e){u._eventEmitter.fire(e.type,e)});this._positionSubscription=this._container.renderService.renderCamera$.pipe(c.distinctUntilChanged(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];return u._closeTo(r,i,.01)&&u._closeTo(n,o,.01)},function(e){return e.camera.position.toArray()})).subscribe(function(){u._eventEmitter.fire(i.Viewer.positionchanged,{target:u._eventEmitter,type:i.Viewer.positionchanged})});this._povSubscription=this._container.renderService.renderCamera$.pipe(c.distinctUntilChanged(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];return u._closeTo(r,i,.001)&&u._closeTo(n,o,.001)},function(e){return[e.rotation.phi,e.rotation.theta]})).subscribe(function(){u._eventEmitter.fire(i.Viewer.povchanged,{target:u._eventEmitter,type:i.Viewer.povchanged})});this._fovSubscription=this._container.renderService.renderCamera$.pipe(c.distinctUntilChanged(function(e,t){return u._closeTo(e,t,.01)},function(e){return e.perspective.fov})).subscribe(function(){u._eventEmitter.fire(i.Viewer.fovchanged,{target:u._eventEmitter,type:i.Viewer.fovchanged})})};e.prototype.stopEmit=function(){if(!this.started){return}this._started=false;this._bearingSubscription.unsubscribe();this._currentNodeSubscription.unsubscribe();this._fovSubscription.unsubscribe();this._moveSubscription.unsubscribe();this._positionSubscription.unsubscribe();this._povSubscription.unsubscribe();this._sequenceEdgesSubscription.unsubscribe();this._spatialEdgesSubscription.unsubscribe();this._viewerMouseEventSubscription.unsubscribe();this._bearingSubscription=null;this._currentNodeSubscription=null;this._fovSubscription=null;this._moveSubscription=null;this._positionSubscription=null;this._povSubscription=null;this._sequenceEdgesSubscription=null;this._spatialEdgesSubscription=null;this._viewerMouseEventSubscription=null};e.prototype.unproject$=function(o){var a=this;return s.combineLatest(this._container.renderService.renderCamera$,this._navigator.stateService.reference$,this._navigator.stateService.currentTransform$).pipe(c.first(),c.map(function(e){var t=e[0],r=e[1],n=e[2];var i=a._projection.canvasToUnprojection(o,a._container.element,t,r,n);return i.latLon}))};e.prototype.unprojectBasic$=function(n){var i=this;return s.combineLatest(this._container.renderService.renderCamera$,this._navigator.stateService.currentTransform$).pipe(c.first(),c.map(function(e){var t=e[0],r=e[1];return i._projection.canvasToBasic(n,i._container.element,t,r)}))};e.prototype._closeTo=function(e,t,r){return Math.abs(e-t)<=r};e.prototype._mapMouseEvent$=function(t,e){return e.pipe(c.map(function(e){return[t,e]}))};return e}();r.Observer=n;r.default=n},{"../Viewer":302,rxjs:43,"rxjs/operators":241}],480:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.PanService=void 0;var s=e("rxjs");var u=e("rxjs/operators");var L=e("../geo/Geo");var c=e("../geo/GeoCoords");var l=e("../graph/GraphCalculator");var h=e("../geo/Spatial");var n=e("../geo/Transform");var p=e("../geo/ViewportCoords");var f;(function(e){e[e["Disabled"]=0]="Disabled";e[e["Enabled"]=1]="Enabled";e[e["Started"]=2]="Started"})(f||(f={}));var i=function(){function e(e,t,r,n,i,o,a){this._graphService=e;this._stateService=t;this._geoCoords=!!n?n:new c.default;this._graphCalculator=!!i?i:new l.default(this._geoCoords);this._spatial=!!o?o:new h.default;this._viewportCoords=!!a?a:new p.default;this._mode=r!==false?f.Enabled:f.Disabled;this._panNodesSubject$=new s.Subject;this._panNodes$=this._panNodesSubject$.pipe(u.startWith([]),u.publishReplay(1),u.refCount());this._panNodes$.subscribe()}Object.defineProperty(e.prototype,"panNodes$",{get:function(){return this._panNodes$},enumerable:false,configurable:true});e.prototype.enable=function(){if(this._mode!==f.Disabled){return}this._mode=f.Enabled;this.start()};e.prototype.disable=function(){if(this._mode===f.Disabled){return}this.stop();this._mode=f.Disabled};e.prototype.start=function(){var k=this;if(this._mode!==f.Enabled){return}var t=this._stateService.currentNode$.pipe(u.switchMap(function(o){if(!o.merged){return s.of([])}var e=s.of(o);var t=k._graphCalculator.boundingBoxCorners(o.latLon,20);var r=k._graphService.cacheBoundingBox$(t[0],t[1]).pipe(u.catchError(function(e){console.error("Failed to cache periphery bounding box ("+o.key+")",e);return s.empty()}),u.map(function(e){if(o.pano){return[]}var t=[];for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.key===o.key){continue}if(i.mergeCC!==o.mergeCC){continue}if(i.pano){continue}if(k._distance(i,o)>4){continue}t.push(i)}return t}));return s.combineLatest(e,r).pipe(u.withLatestFrom(k._stateService.reference$),u.map(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];var o=k._spatial.viewingDirection(r.rotation);var a=L.computeTranslation({lat:r.latLon.lat,lon:r.latLon.lon,alt:r.alt},r.rotation,i);var s=k._createTransform(r,a);var u=k._spatial.wrap(k._spatial.azimuthal(o.toArray(),s.upVector().toArray()),0,2*Math.PI);var c=k._computeProjectedPoints(s);var l=k._computeHorizontalFov(c)/180*Math.PI;var h=Math.PI/8;var p=undefined;var f=undefined;for(var d=0,v=n;d<v.length;d++){var m=v[d];var g=L.computeTranslation({lat:m.latLon.lat,lon:m.latLon.lon,alt:m.alt},m.rotation,i);var _=k._createTransform(m,g);var y=k._computeProjectedPoints(_);var b=k._computeHorizontalFov(y)/180*Math.PI;var x=k._spatial.viewingDirection(m.rotation);var w=k._spatial.wrap(k._spatial.azimuthal(x.toArray(),_.upVector().toArray()),0,2*Math.PI);var S=k._spatial.angleBetweenVector2(o.x,o.y,x.x,x.y);var M=Number.NEGATIVE_INFINITY;if(S>0){if(u>w){M=u-2*Math.PI+l/2-(w-b/2)}else{M=u+l/2-(w-b/2)}}else{if(u<w){M=w+b/2-(u+2*Math.PI-l/2)}else{M=w+b/2-(u-l/2)}}var C=Math.abs(b-M);var T=k._distance(m,r);var E=Math.min(k._timeDifference(m,r),4);var O=20*Math.abs(M-h);var P=Math.min(5,1/Math.min(b/l,1));var A=M>0?-2*C:0;var j=T+E+O+P+A;if(M>0&&M<.5*l&&M<.5*b&&C>.5*l){if(S>0){if(!p){p=[j,m,_,b]}else{if(j<p[0]){p=[j,m,_,b]}}}else{if(!f){f=[j,m,_,b]}else{if(j<f[0]){f=[j,m,_,b]}}}}}var R=[];if(!!p){R.push([p[1],p[2],p[3]])}if(!!f){R.push([f[1],f[2],f[3]])}return R}),u.startWith([]))}));this._panNodesSubscription=this._stateService.currentState$.pipe(u.map(function(e){return e.state.nodesAhead>0}),u.distinctUntilChanged(),u.switchMap(function(e){return e?s.of([]):t})).subscribe(function(e){k._panNodesSubject$.next(e)});this._mode=f.Started};e.prototype.stop=function(){if(this._mode!==f.Started){return}this._panNodesSubscription.unsubscribe();this._panNodesSubject$.next([]);this._mode=f.Enabled};e.prototype._distance=function(e,t){var r=this._geoCoords.geodeticToEnu(e.latLon.lat,e.latLon.lon,e.alt,t.latLon.lat,t.latLon.lon,t.alt),n=r[0],i=r[1],o=r[2];return Math.sqrt(n*n+i*i+o*o)};e.prototype._timeDifference=function(e,t){return Math.abs(e.capturedAt-t.capturedAt)/(1e3*60*60*24*30)};e.prototype._createTransform=function(e,t){return new n.Transform(e.orientation,e.width,e.height,e.focal,e.scale,e.gpano,e.rotation,t,e.assetsCached?e.image:undefined,undefined,e.ck1,e.ck2,e.cameraProjection)};e.prototype._computeProjectedPoints=function(e){var t=[[1,0]];var r=[[0,.5]];var n=20;return L.computeProjectedPoints(e,t,r,n,this._viewportCoords)};e.prototype._computeHorizontalFov=function(e){var t=this;var r=e.map(function(e){return t._coordToFov(e[0])});var n=Math.min.apply(Math,r);return n};e.prototype._coordToFov=function(e){return 2*Math.atan(e)*180/Math.PI};return e}();r.PanService=i},{"../geo/Geo":415,"../geo/GeoCoords":416,"../geo/Spatial":419,"../geo/Transform":420,"../geo/ViewportCoords":421,"../graph/GraphCalculator":425,rxjs:43,"rxjs/operators":241}],481:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.PlayService=void 0;var c=e("rxjs");var p=e("rxjs/operators");var s=e("../Edge");var u=e("../Graph");var n=function(){function r(e,t,r){this._graphService=e;this._stateService=t;this._graphCalculator=!!r?r:new u.GraphCalculator;this._directionSubject$=new c.Subject;this._direction$=this._directionSubject$.pipe(p.startWith(s.EdgeDirection.Next),p.publishReplay(1),p.refCount());this._direction$.subscribe();this._playing=false;this._playingSubject$=new c.Subject;this._playing$=this._playingSubject$.pipe(p.startWith(this._playing),p.publishReplay(1),p.refCount());this._playing$.subscribe();this._speed=.5;this._speedSubject$=new c.Subject;this._speed$=this._speedSubject$.pipe(p.startWith(this._speed),p.publishReplay(1),p.refCount());this._speed$.subscribe();this._nodesAhead=this._mapNodesAhead(this._mapSpeed(this._speed));this._bridging$=null}Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"direction$",{get:function(){return this._direction$},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"playing$",{get:function(){return this._playing$},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"speed$",{get:function(){return this._speed$},enumerable:false,configurable:true});r.prototype.play=function(){var h=this;if(this._playing){return}this._stateService.cutNodes();var e=this._setSpeed(this._speed);this._stateService.setSpeed(e);this._graphModeSubscription=this._speed$.pipe(p.map(function(e){return e>r.sequenceSpeed?u.GraphMode.Sequence:u.GraphMode.Spatial}),p.distinctUntilChanged()).subscribe(function(e){h._graphService.setGraphMode(e)});this._cacheSubscription=c.combineLatest(this._stateService.currentNode$.pipe(p.map(function(e){return[e.sequenceKey,e.key]}),p.distinctUntilChanged(undefined,function(e){var t=e[0],r=e[1];return t})),this._graphService.graphMode$,this._direction$).pipe(p.switchMap(function(e){var t=e[0],r=t[0],n=t[1],i=e[1],o=e[2];if(o!==s.EdgeDirection.Next&&o!==s.EdgeDirection.Prev){return c.of([undefined,o])}var a=(i===u.GraphMode.Sequence?h._graphService.cacheSequenceNodes$(r,n):h._graphService.cacheSequence$(r)).pipe(p.retry(3),p.catchError(function(e){console.error(e);return c.of(undefined)}));return c.combineLatest(a,c.of(o))}),p.switchMap(function(e){var t=e[0],r=e[1];if(t===undefined){return c.empty()}var l=t.keys.slice();if(r===s.EdgeDirection.Prev){l.reverse()}return h._stateService.currentState$.pipe(p.map(function(e){return[e.state.trajectory[e.state.trajectory.length-1].key,e.state.nodesAhead]}),p.scan(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];if(r===undefined){r=i}var a=l.length-1;if(o>=h._nodesAhead||l[a]===r){return[r,[]]}var s=l.indexOf(i);var u=l.indexOf(r)+1;var c=Math.min(a,s+h._nodesAhead-o)+1;if(c<=u){return[r,[]]}return[l[c-1],l.slice(u,c)]},[undefined,[]]),p.mergeMap(function(e){var t=e[0],r=e[1];return c.from(r)}))}),p.mergeMap(function(e){return h._graphService.cacheNode$(e).pipe(p.catchError(function(){return c.empty()}))},6)).subscribe();this._playingSubscription=this._stateService.currentState$.pipe(p.filter(function(e){return e.state.nodesAhead<h._nodesAhead}),p.distinctUntilChanged(undefined,function(e){return e.state.lastNode.key}),p.map(function(e){var t=e.state.lastNode;var r=e.state.trajectory;var n=undefined;for(var i=r.length-2;i>=0;i--){var o=r[i];if(o.sequenceKey!==t.sequenceKey){break}if(o.capturedAt!==t.capturedAt){n=o.capturedAt<t.capturedAt;break}}return[e.state.lastNode,n]}),p.withLatestFrom(this._direction$),p.switchMap(function(e){var t=e[0],r=t[0],n=t[1],i=e[1];return c.zip(([s.EdgeDirection.Next,s.EdgeDirection.Prev].indexOf(i)>-1?r.sequenceEdges$:r.spatialEdges$).pipe(p.first(function(e){return e.cached}),p.timeout(15e3)),c.of(i)).pipe(p.map(function(e){var t=e[0],r=e[1];for(var n=0,i=t.edges;n<i.length;n++){var o=i[n];if(o.data.direction===r){return o.to}}return null}),p.switchMap(function(e){return e!=null?h._graphService.cacheNode$(e):h._bridge$(r,n).pipe(p.filter(function(e){return!!e}))}))})).subscribe(function(e){h._stateService.appendNodes([e])},function(e){console.error(e);h.stop()});this._clearSubscription=this._stateService.currentNode$.pipe(p.bufferCount(1,10)).subscribe(function(e){h._stateService.clearPriorNodes()});this._setPlaying(true);var t=this._stateService.currentState$.pipe(p.map(function(e){return e.state}),p.distinctUntilChanged(function(e,t){var r=e[0],n=e[1];var i=t[0],o=t[1];return r===i&&n===o},function(e){return[e.currentNode.key,e.lastNode.key]}),p.filter(function(e){return e.currentNode.key===e.lastNode.key&&e.currentIndex===e.trajectory.length-1}),p.map(function(e){return e.currentNode}));this._stopSubscription=c.combineLatest(t,this._direction$).pipe(p.switchMap(function(e){var t=e[0],r=e[1];var n=([s.EdgeDirection.Next,s.EdgeDirection.Prev].indexOf(r)>-1?t.sequenceEdges$:t.spatialEdges$).pipe(p.first(function(e){return e.cached}),p.timeout(15e3),p.catchError(function(e){console.error(e);return c.of({cached:false,edges:[]})}));return c.combineLatest(c.of(r),n).pipe(p.map(function(e){var t=e[0],r=e[1];for(var n=0,i=r.edges;n<i.length;n++){var o=i[n];if(o.data.direction===t){return true}}return false}))}),p.mergeMap(function(e){if(e||!h._bridging$){return c.of(e)}return h._bridging$.pipe(p.map(function(e){return e!=null}),p.catchError(function(e){console.error(e);return c.of(false)}))}),p.first(function(e){return!e})).subscribe(undefined,undefined,function(){h.stop()});if(this._stopSubscription.closed){this._stopSubscription=null}};r.prototype.setDirection=function(e){this._directionSubject$.next(e)};r.prototype.setSpeed=function(e){e=Math.max(0,Math.min(1,e));if(e===this._speed){return}var t=this._setSpeed(e);if(this._playing){this._stateService.setSpeed(t)}this._speedSubject$.next(this._speed)};r.prototype.stop=function(){if(!this._playing){return}if(!!this._stopSubscription){if(!this._stopSubscription.closed){this._stopSubscription.unsubscribe()}this._stopSubscription=null}this._graphModeSubscription.unsubscribe();this._graphModeSubscription=null;this._cacheSubscription.unsubscribe();this._cacheSubscription=null;this._playingSubscription.unsubscribe();this._playingSubscription=null;this._clearSubscription.unsubscribe();this._clearSubscription=null;this._stateService.setSpeed(1);this._stateService.cutNodes();this._graphService.setGraphMode(u.GraphMode.Spatial);this._setPlaying(false)};r.prototype._bridge$=function(a,s){var u=this;if(s===undefined){return c.of(null)}var e=this._graphCalculator.boundingBoxCorners(a.latLon,25);this._bridging$=this._graphService.cacheBoundingBox$(e[0],e[1]).pipe(p.mergeMap(function(e){var t=null;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.sequenceKey===a.sequenceKey||!i.cameraUuid||i.cameraUuid!==a.cameraUuid||i.capturedAt===a.capturedAt||i.capturedAt>a.capturedAt!==s){continue}var o=Math.abs(i.capturedAt-a.capturedAt);if(o>15e3){continue}if(!t||o<Math.abs(t.capturedAt-a.capturedAt)){t=i}}return!!t?u._graphService.cacheNode$(t.key):c.of(null)}),p.finalize(function(){u._bridging$=null}),p.publish(),p.refCount());return this._bridging$};r.prototype._mapSpeed=function(e){var t=2*e-1;return Math.pow(10,t)-.2*t};r.prototype._mapNodesAhead=function(e){return Math.round(Math.max(10,Math.min(50,8+6*e)))};r.prototype._setPlaying=function(e){this._playing=e;this._playingSubject$.next(e)};r.prototype._setSpeed=function(e){this._speed=e;var t=this._mapSpeed(this._speed);this._nodesAhead=this._mapNodesAhead(t);return t};r.sequenceSpeed=.54;return r}();r.PlayService=n;r.default=n},{"../Edge":292,"../Graph":295,rxjs:43,"rxjs/operators":241}],482:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Projection=void 0;var _=e("three");var n=e("../Geo");var i=e("../geo/Spatial");var o=function(){function e(e,t,r){this._geoCoords=!!e?e:new n.GeoCoords;this._spatial=!!r?r:new i.default;this._viewportCoords=!!t?t:new n.ViewportCoords}e.prototype.basicToCanvas=function(e,t,r,n){return this._viewportCoords.basicToCanvasSafe(e[0],e[1],t,n,r.perspective)};e.prototype.canvasToBasic=function(e,t,r,n){var i=this._viewportCoords.canvasToBasic(e[0],e[1],t,n,r.perspective);if(i[0]<0||i[0]>1||i[1]<0||i[1]>1){i=null}return i};e.prototype.eventToUnprojection=function(e,t,r,n,i){var o=this._viewportCoords.canvasPosition(e,t);return this.canvasToUnprojection(o,t,r,n,i)};e.prototype.canvasToUnprojection=function(e,t,r,n,i){var o=e[0];var a=e[1];var s=this._viewportCoords.canvasToViewport(o,a,t),u=s[0],c=s[1];var l=new _.Vector3(u,c,1).unproject(r.perspective);var h=i.projectBasic(l.toArray());if(h[0]<0||h[0]>1||h[1]<0||h[1]>1){h=null}var p=l.clone().sub(r.camera.position).normalize();var f=-2/p.z;var d=null;if(f>0&&f<100&&!!h){var v=p.clone().multiplyScalar(f).add(r.camera.position);var m=this._geoCoords.enuToGeodetic(v.x,v.y,v.z,n.lat,n.lon,n.alt).slice(0,2);d={lat:m[0],lon:m[1]}}var g={basicPoint:h,latLon:d,pixelPoint:[o,a]};return g};e.prototype.cameraToLatLon=function(e,t){var r=e.camera.position;var n=this._geoCoords.enuToGeodetic(r.x,r.y,r.z,t.lat,t.lon,t.alt),i=n[0],o=n[1];return{lat:i,lon:o}};e.prototype.latLonToCanvas=function(e,t,r,n){var i=this._geoCoords.geodeticToEnu(e.lat,e.lon,0,n.lat,n.lon,n.alt);var o=this._viewportCoords.projectToCanvasSafe(i,t,r.perspective);return o};e.prototype.distanceBetweenLatLons=function(e,t){return this._spatial.distanceFromLatLon(e.lat,e.lon,t.lat,t.lon)};return e}();r.Projection=o;r.default=o},{"../Geo":294,"../geo/Spatial":419,three:242}],483:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.SpriteService=void 0;var o=e("rxjs/operators");var a=e("three");var f=e("virtual-dom");var s=e("rxjs");var d=e("../Viewer");var u=function(){function e(){}Object.defineProperty(e.prototype,"json",{set:function(e){this._json=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"image",{set:function(e){this._image=e;this._texture=new a.Texture(this._image);this._texture.minFilter=a.NearestFilter},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"loaded",{get:function(){return!!(this._image&&this._json)},enumerable:false,configurable:true});e.prototype.getGLSprite=function(e){if(!this.loaded){throw new Error("Sprites cannot be retrieved before the atlas is loaded.")}var t=this._json[e];if(!t){console.warn("Sprite with key"+e+"does not exist in sprite definition.");return new a.Object3D}var r=this._texture.clone();r.needsUpdate=true;var n=this._image.width;var i=this._image.height;r.offset.x=t.x/n;r.offset.y=(i-t.y-t.height)/i;r.repeat.x=t.width/n;r.repeat.y=t.height/i;var o=new a.SpriteMaterial({map:r});return new a.Sprite(o)};e.prototype.getDOMSprite=function(e,t){if(!this.loaded){throw new Error("Sprites cannot be retrieved before the atlas is loaded.")}if(t==null){t=d.Alignment.Center}var r=this._json[e];if(!r){console.warn("Sprite with key"+e+"does not exist in sprite definition.");return f.h("div",{},[])}var n=r.y;var i=r.x+r.width;var o=r.y+r.height;var a=r.x;var s=-r.x;var u=-r.y;var c=this._image.height;var l=this._image.width;switch(t){case d.Alignment.Bottom:case d.Alignment.Center:case d.Alignment.Top:s-=r.width/2;break;case d.Alignment.BottomLeft:case d.Alignment.Left:case d.Alignment.TopLeft:s-=r.width;break;case d.Alignment.BottomRight:case d.Alignment.Right:case d.Alignment.TopRight:default:break}switch(t){case d.Alignment.Center:case d.Alignment.Left:case d.Alignment.Right:u-=r.height/2;break;case d.Alignment.Top:case d.Alignment.TopLeft:case d.Alignment.TopRight:u-=r.height;break;case d.Alignment.Bottom:case d.Alignment.BottomLeft:case d.Alignment.BottomRight:default:break}var h=1/r.pixelRatio;n*=h;i*=h;o*=h;a*=h;s*=h;u*=h;c*=h;l*=h;var p={src:this._image.src,style:{clip:"rect("+n+"px, "+i+"px, "+o+"px, "+a+"px)",height:c+"px",left:s+"px",position:"absolute",top:u+"px",width:l+"px"}};return f.h("img",p,[])};return e}();var n=function(){function e(t){var r=this;this._retina=window.devicePixelRatio>1;this._spriteAtlasOperation$=new s.Subject;this._spriteAtlas$=this._spriteAtlasOperation$.pipe(o.startWith(function(e){return e}),o.scan(function(e,t){return t(e)},new u),o.publishReplay(1),o.refCount());this._spriteAtlas$.subscribe(function(){});if(t==null){return}var n=this._retina?"@2x":"";var i=new XMLHttpRequest;i.open("GET",t+n+".png",true);i.responseType="arraybuffer";i.onload=function(){var t=new Image;t.onload=function(){r._spriteAtlasOperation$.next(function(e){e.image=t;return e})};var e=new Blob([i.response]);t.src=window.URL.createObjectURL(e)};i.onerror=function(e){console.error(new Error("Failed to fetch sprite sheet ("+t+n+".png)"))};i.send();var e=new XMLHttpRequest;e.open("GET",t+n+".json",true);e.responseType="text";e.onload=function(){var t=JSON.parse(e.response);r._spriteAtlasOperation$.next(function(e){e.json=t;return e})};e.onerror=function(e){console.error(new Error("Failed to fetch sheet ("+t+n+".json)"))};e.send()}Object.defineProperty(e.prototype,"spriteAtlas$",{get:function(){return this._spriteAtlas$},enumerable:false,configurable:true});return e}();r.SpriteService=n;r.default=n},{"../Viewer":302,rxjs:43,"rxjs/operators":241,three:242,"virtual-dom":247}],484:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.TouchService=void 0;var u=e("rxjs");var c=e("rxjs/operators");var n=function(){function e(e,t){var r=this;this._activeSubject$=new u.BehaviorSubject(false);this._active$=this._activeSubject$.pipe(c.distinctUntilChanged(),c.publishReplay(1),c.refCount());u.fromEvent(t,"touchmove").subscribe(function(e){e.preventDefault()});this._touchStart$=u.fromEvent(e,"touchstart");this._touchMove$=u.fromEvent(e,"touchmove");this._touchEnd$=u.fromEvent(e,"touchend");this._touchCancel$=u.fromEvent(e,"touchcancel");var n=this._touchStart$.pipe(c.filter(function(e){return e.touches.length===1&&e.targetTouches.length===1}),c.share());this._doubleTap$=n.pipe(c.bufferWhen(function(){return n.pipe(c.first(),c.switchMap(function(e){return u.merge(u.timer(300),n).pipe(c.take(1))}))}),c.filter(function(e){return e.length===2}),c.map(function(e){return e[e.length-1]}),c.share());this._doubleTap$.subscribe(function(e){e.preventDefault()});this._singleTouchMove$=this._touchMove$.pipe(c.filter(function(e){return e.touches.length===1&&e.targetTouches.length===1}),c.share());var i=u.merge(this._touchStart$,this._touchEnd$,this._touchCancel$).pipe(c.filter(function(e){return e.touches.length===1&&e.targetTouches.length===1}));var o=u.merge(this._touchStart$,this._touchEnd$,this._touchCancel$).pipe(c.filter(function(e){return e.touches.length>=1}));var a=u.merge(this._touchEnd$,this._touchCancel$).pipe(c.filter(function(e){return e.touches.length===0}));this._singleTouchDragStart$=i.pipe(c.mergeMap(function(e){return r._singleTouchMove$.pipe(c.takeUntil(u.merge(a,o)),c.take(1))}));this._singleTouchDragEnd$=i.pipe(c.mergeMap(function(e){return u.merge(a,o).pipe(c.first())}));this._singleTouchDrag$=i.pipe(c.switchMap(function(e){return r._singleTouchMove$.pipe(c.skip(1),c.takeUntil(u.merge(o,a)))}));var s=u.merge(this._touchStart$,this._touchEnd$,this._touchCancel$);this._pinchStart$=s.pipe(c.filter(function(e){return e.touches.length===2&&e.targetTouches.length===2}));this._pinchEnd$=s.pipe(c.filter(function(e){return e.touches.length!==2||e.targetTouches.length!==2}));this._pinchOperation$=new u.Subject;this._pinch$=this._pinchOperation$.pipe(c.scan(function(e,t){return t(e)},{changeX:0,changeY:0,clientX:0,clientY:0,distance:0,distanceChange:0,distanceX:0,distanceY:0,originalEvent:null,pageX:0,pageY:0,screenX:0,screenY:0,touch1:null,touch2:null}));this._touchMove$.pipe(c.filter(function(e){return e.touches.length===2&&e.targetTouches.length===2}),c.map(function(b){return function(e){var t=b.touches[0];var r=b.touches[1];var n=Math.min(t.clientX,r.clientX);var i=Math.max(t.clientX,r.clientX);var o=Math.min(t.clientY,r.clientY);var a=Math.max(t.clientY,r.clientY);var s=n+(i-n)/2;var u=o+(a-o)/2;var c=s+t.pageX-t.clientX;var l=u+t.pageY-t.clientY;var h=s+t.screenX-t.clientX;var p=u+t.screenY-t.clientY;var f=Math.abs(t.clientX-r.clientX);var d=Math.abs(t.clientY-r.clientY);var v=Math.sqrt(f*f+d*d);var m=v-e.distance;var g=f-e.distanceX;var _=d-e.distanceY;var y={changeX:g,changeY:_,clientX:s,clientY:u,distance:v,distanceChange:m,distanceX:f,distanceY:d,originalEvent:b,pageX:c,pageY:l,screenX:h,screenY:p,touch1:t,touch2:r};return y}})).subscribe(this._pinchOperation$);this._pinchChange$=this._pinchStart$.pipe(c.switchMap(function(e){return r._pinch$.pipe(c.skip(1),c.takeUntil(r._pinchEnd$))}))}Object.defineProperty(e.prototype,"active$",{get:function(){return this._active$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"activate$",{get:function(){return this._activeSubject$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"doubleTap$",{get:function(){return this._doubleTap$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"touchStart$",{get:function(){return this._touchStart$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"touchMove$",{get:function(){return this._touchMove$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"touchEnd$",{get:function(){return this._touchEnd$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"touchCancel$",{get:function(){return this._touchCancel$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"singleTouchDragStart$",{get:function(){return this._singleTouchDragStart$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"singleTouchDrag$",{get:function(){return this._singleTouchDrag$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"singleTouchDragEnd$",{get:function(){return this._singleTouchDragEnd$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"pinch$",{get:function(){return this._pinchChange$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"pinchStart$",{get:function(){return this._pinchStart$},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"pinchEnd$",{get:function(){return this._pinchEnd$},enumerable:false,configurable:true});return e}();r.TouchService=n},{rxjs:43,"rxjs/operators":241}],485:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(r,"__esModule",{value:true});r.Viewer=void 0;var o=e("rxjs");var s=e("rxjs/operators");var u=e("when");var c=e("../Viewer");var l=e("../Utils");var i=function(a){n(e,a);function e(e,t,r,n,i){var o=a.call(this)||this;n=n!=null?n:{};l.Settings.setOptions(n);l.Urls.setOptions(n.url);o._navigator=new c.Navigator(t,n,i);o._container=new c.Container(e,o._navigator.stateService,n);o._observer=new c.Observer(o,o._navigator,o._container);o._componentController=new c.ComponentController(o._container,o._navigator,o._observer,r,n.component);return o}Object.defineProperty(e.prototype,"isNavigable",{get:function(){return this._componentController.navigable},enumerable:false,configurable:true});e.prototype.activateCombinedPanning=function(){this._navigator.panService.enable()};e.prototype.activateComponent=function(e){this._componentController.activate(e)};e.prototype.activateCover=function(){this._componentController.activateCover()};e.prototype.deactivateCombinedPanning=function(){this._navigator.panService.disable()};e.prototype.deactivateComponent=function(e){this._componentController.deactivate(e)};e.prototype.deactivateCover=function(){this._componentController.deactivateCover()};e.prototype.getBearing=function(){var e=this;return u.promise(function(t,r){e._container.renderService.bearing$.pipe(s.first()).subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.getCanvasContainer=function(){return this._container.canvasContainer};e.prototype.getCenter=function(){var e=this;return u.promise(function(t,r){e._navigator.stateService.getCenter().subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.getComponent=function(e){return this._componentController.get(e)};e.prototype.getContainer=function(){return this._container.element};e.prototype.getFieldOfView=function(){var e=this;return u.promise(function(t,r){e._container.renderService.renderCamera$.pipe(s.first()).subscribe(function(e){t(e.perspective.fov)},function(e){r(e)})})};e.prototype.getPointOfView=function(){var e=this;return u.promise(function(n,t){o.combineLatest(e._container.renderService.renderCamera$,e._container.renderService.bearing$).pipe(s.first()).subscribe(function(e){var t=e[0],r=e[1];n({bearing:r,tilt:t.getTilt()})},function(e){t(e)})})};e.prototype.getPosition=function(){var i=this;return u.promise(function(n,t){o.combineLatest(i._container.renderService.renderCamera$,i._navigator.stateService.reference$).pipe(s.first()).subscribe(function(e){var t=e[0],r=e[1];n(i._observer.projection.cameraToLatLon(t,r))},function(e){t(e)})})};e.prototype.getZoom=function(){var e=this;return u.promise(function(t,r){e._navigator.stateService.getZoom().subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.moveCloseTo=function(e,t){var n=this.isNavigable?this._navigator.moveCloseTo$(e,t):o.throwError(new Error("Calling moveCloseTo is not supported when viewer is not navigable."));return u.promise(function(t,r){n.subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.moveDir=function(e){var n=this.isNavigable?this._navigator.moveDir$(e):o.throwError(new Error("Calling moveDir is not supported when viewer is not navigable."));return u.promise(function(t,r){n.subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.moveToKey=function(e){var n=this.isNavigable?this._navigator.moveToKey$(e):o.throwError(new Error("Calling moveToKey is not supported when viewer is not navigable."));return u.promise(function(t,r){n.subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.project=function(e){var n=this;return u.promise(function(t,r){n._observer.project$(e).subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.projectFromBasic=function(e){var n=this;return u.promise(function(t,r){n._observer.projectBasic$(e).subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.resize=function(){this._container.renderService.resize$.next(null)};e.prototype.setAuthToken=function(e){var r=this.isNavigable?this._navigator.setToken$(e):o.throwError(new Error("Calling setAuthToken is not supported when viewer is not navigable."));return u.promise(function(e,t){r.subscribe(function(){e(undefined)},function(e){t(e)})})};e.prototype.setCenter=function(e){this._navigator.stateService.setCenter(e)};e.prototype.setFilter=function(r){var n=this;return u.promise(function(e,t){n._navigator.setFilter$(r).subscribe(function(){e(undefined)},function(e){t(e)})})};e.prototype.setFieldOfView=function(r){var n=this;this._container.renderService.renderCamera$.pipe(s.first()).subscribe(function(e){var t=e.fovToZoom(r);n._navigator.stateService.setZoom(t)})};e.prototype.setRenderMode=function(e){this._container.renderService.renderMode$.next(e)};e.prototype.setTransitionMode=function(e){this._navigator.stateService.setTransitionMode(e)};e.prototype.setZoom=function(e){this._navigator.stateService.setZoom(e)};e.prototype.unproject=function(e){var n=this;return u.promise(function(t,r){n._observer.unproject$(e).subscribe(function(e){t(e)},function(e){r(e)})})};e.prototype.unprojectToBasic=function(e){var n=this;return u.promise(function(t,r){n._observer.unprojectBasic$(e).subscribe(function(e){t(e)},function(e){r(e)})})};e.bearingchanged="bearingchanged";e.click="click";e.contextmenu="contextmenu";e.dblclick="dblclick";e.fovchanged="fovchanged";e.loadingchanged="loadingchanged";e.mousedown="mousedown";e.mousemove="mousemove";e.mouseout="mouseout";e.mouseover="mouseover";e.mouseup="mouseup";e.moveend="moveend";e.movestart="movestart";e.navigablechanged="navigablechanged";e.nodechanged="nodechanged";e.positionchanged="positionchanged";e.povchanged="povchanged";e.sequenceedgeschanged="sequenceedgeschanged";e.spatialedgeschanged="spatialedgeschanged";return e}(l.EventEmitter);r.Viewer=i},{"../Utils":301,"../Viewer":302,rxjs:43,"rxjs/operators":241,when:288}],486:[function(e,t,r){arguments[4][305][0].apply(r,arguments)},{dup:305}]},{},[296])(296)});

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tYXBpbGxhcnktanMvZGlzdC9tYXBpbGxhcnkubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihlKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1lKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZSl9ZWxzZXt2YXIgdDtpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7dD13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7dD1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe3Q9c2VsZn1lbHNle3Q9dGhpc310Lk1hcGlsbGFyeT1lKCl9fSkoZnVuY3Rpb24oKXt2YXIgbyxlLHQ7cmV0dXJuIGZ1bmN0aW9uIG8oYSxzLHUpe2Z1bmN0aW9uIGMocixlKXtpZighc1tyXSl7aWYoIWFbcl0pe3ZhciB0PXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIWUmJnQpcmV0dXJuIHQociwhMCk7aWYobClyZXR1cm4gbChyLCEwKTt2YXIgbj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3IrXCInXCIpO3Rocm93IG4uY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixufXZhciBpPXNbcl09e2V4cG9ydHM6e319O2Fbcl1bMF0uY2FsbChpLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHQ9YVtyXVsxXVtlXTtyZXR1cm4gYyh0P3Q6ZSl9LGksaS5leHBvcnRzLG8sYSxzLHUpfXJldHVybiBzW3JdLmV4cG9ydHN9dmFyIGw9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIGU9MDtlPHUubGVuZ3RoO2UrKyljKHVbZV0pO3JldHVybiBjfSh7MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBiPWUoXCJ0aW55cXVldWVcIik7dC5leHBvcnRzPW47dC5leHBvcnRzLmRlZmF1bHQ9bjtmdW5jdGlvbiBuKGUsdCxyKXt0PXR8fDE7dmFyIG4saSxvLGE7Zm9yKHZhciBzPTA7czxlWzBdLmxlbmd0aDtzKyspe3ZhciB1PWVbMF1bc107aWYoIXN8fHVbMF08biluPXVbMF07aWYoIXN8fHVbMV08aSlpPXVbMV07aWYoIXN8fHVbMF0+bylvPXVbMF07aWYoIXN8fHVbMV0+YSlhPXVbMV19dmFyIGM9by1uO3ZhciBsPWEtaTt2YXIgaD1NYXRoLm1pbihjLGwpO3ZhciBwPWgvMjt2YXIgZj1uZXcgYihudWxsLHgpO2lmKGg9PT0wKXJldHVybltuLGldO2Zvcih2YXIgZD1uO2Q8bztkKz1oKXtmb3IodmFyIHY9aTt2PGE7dis9aCl7Zi5wdXNoKG5ldyB3KGQrcCx2K3AscCxlKSl9fXZhciBtPVMoZSk7dmFyIGc9bmV3IHcobitjLzIsaStsLzIsMCxlKTtpZihnLmQ+bS5kKW09Zzt2YXIgXz1mLmxlbmd0aDt3aGlsZShmLmxlbmd0aCl7dmFyIHk9Zi5wb3AoKTtpZih5LmQ+bS5kKXttPXk7aWYociljb25zb2xlLmxvZyhcImZvdW5kIGJlc3QgJWQgYWZ0ZXIgJWQgcHJvYmVzXCIsTWF0aC5yb3VuZCgxZTQqeS5kKS8xZTQsXyl9aWYoeS5tYXgtbS5kPD10KWNvbnRpbnVlO3A9eS5oLzI7Zi5wdXNoKG5ldyB3KHkueC1wLHkueS1wLHAsZSkpO2YucHVzaChuZXcgdyh5LngrcCx5LnktcCxwLGUpKTtmLnB1c2gobmV3IHcoeS54LXAseS55K3AscCxlKSk7Zi5wdXNoKG5ldyB3KHkueCtwLHkueStwLHAsZSkpO18rPTR9aWYocil7Y29uc29sZS5sb2coXCJudW0gcHJvYmVzOiBcIitfKTtjb25zb2xlLmxvZyhcImJlc3QgZGlzdGFuY2U6IFwiK20uZCl9cmV0dXJuW20ueCxtLnldfWZ1bmN0aW9uIHgoZSx0KXtyZXR1cm4gdC5tYXgtZS5tYXh9ZnVuY3Rpb24gdyhlLHQscixuKXt0aGlzLng9ZTt0aGlzLnk9dDt0aGlzLmg9cjt0aGlzLmQ9aShlLHQsbik7dGhpcy5tYXg9dGhpcy5kK3RoaXMuaCpNYXRoLlNRUlQyfWZ1bmN0aW9uIGkoZSx0LHIpe3ZhciBuPWZhbHNlO3ZhciBpPUluZmluaXR5O2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgYT1yW29dO2Zvcih2YXIgcz0wLHU9YS5sZW5ndGgsYz11LTE7czx1O2M9cysrKXt2YXIgbD1hW3NdO3ZhciBoPWFbY107aWYobFsxXT50IT09aFsxXT50JiZlPChoWzBdLWxbMF0pKih0LWxbMV0pLyhoWzFdLWxbMV0pK2xbMF0pbj0hbjtpPU1hdGgubWluKGkscChlLHQsbCxoKSl9fXJldHVybihuPzE6LTEpKk1hdGguc3FydChpKX1mdW5jdGlvbiBTKGUpe3ZhciB0PTA7dmFyIHI9MDt2YXIgbj0wO3ZhciBpPWVbMF07Zm9yKHZhciBvPTAsYT1pLmxlbmd0aCxzPWEtMTtvPGE7cz1vKyspe3ZhciB1PWlbb107dmFyIGM9aVtzXTt2YXIgbD11WzBdKmNbMV0tY1swXSp1WzFdO3IrPSh1WzBdK2NbMF0pKmw7bis9KHVbMV0rY1sxXSkqbDt0Kz1sKjN9aWYodD09PTApcmV0dXJuIG5ldyB3KGlbMF1bMF0saVswXVsxXSwwLGUpO3JldHVybiBuZXcgdyhyL3Qsbi90LDAsZSl9ZnVuY3Rpb24gcChlLHQscixuKXt2YXIgaT1yWzBdO3ZhciBvPXJbMV07dmFyIGE9blswXS1pO3ZhciBzPW5bMV0tbztpZihhIT09MHx8cyE9PTApe3ZhciB1PSgoZS1pKSphKyh0LW8pKnMpLyhhKmErcypzKTtpZih1PjEpe2k9blswXTtvPW5bMV19ZWxzZSBpZih1PjApe2krPWEqdTtvKz1zKnV9fWE9ZS1pO3M9dC1vO3JldHVybiBhKmErcypzfX0se3RpbnlxdWV1ZToyNDN9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPW47ZnVuY3Rpb24gbihlLHQscixuKXt0aGlzLmN4PTMqZTt0aGlzLmJ4PTMqKHItZSktdGhpcy5jeDt0aGlzLmF4PTEtdGhpcy5jeC10aGlzLmJ4O3RoaXMuY3k9Myp0O3RoaXMuYnk9Myoobi10KS10aGlzLmN5O3RoaXMuYXk9MS10aGlzLmN5LXRoaXMuYnk7dGhpcy5wMXg9ZTt0aGlzLnAxeT1uO3RoaXMucDJ4PXI7dGhpcy5wMnk9bn1uLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZVg9ZnVuY3Rpb24oZSl7cmV0dXJuKCh0aGlzLmF4KmUrdGhpcy5ieCkqZSt0aGlzLmN4KSplfTtuLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZVk9ZnVuY3Rpb24oZSl7cmV0dXJuKCh0aGlzLmF5KmUrdGhpcy5ieSkqZSt0aGlzLmN5KSplfTtuLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZURlcml2YXRpdmVYPWZ1bmN0aW9uKGUpe3JldHVybigzKnRoaXMuYXgqZSsyKnRoaXMuYngpKmUrdGhpcy5jeH07bi5wcm90b3R5cGUuc29sdmVDdXJ2ZVg9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdD09PVwidW5kZWZpbmVkXCIpdD0xZS02O3ZhciByLG4saSxvLGE7Zm9yKGk9ZSxhPTA7YTw4O2ErKyl7bz10aGlzLnNhbXBsZUN1cnZlWChpKS1lO2lmKE1hdGguYWJzKG8pPHQpcmV0dXJuIGk7dmFyIHM9dGhpcy5zYW1wbGVDdXJ2ZURlcml2YXRpdmVYKGkpO2lmKE1hdGguYWJzKHMpPDFlLTYpYnJlYWs7aT1pLW8vc31yPTA7bj0xO2k9ZTtpZihpPHIpcmV0dXJuIHI7aWYoaT5uKXJldHVybiBuO3doaWxlKHI8bil7bz10aGlzLnNhbXBsZUN1cnZlWChpKTtpZihNYXRoLmFicyhvLWUpPHQpcmV0dXJuIGk7aWYoZT5vKXtyPWl9ZWxzZXtuPWl9aT0obi1yKSouNStyfXJldHVybiBpfTtuLnByb3RvdHlwZS5zb2x2ZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNhbXBsZUN1cnZlWSh0aGlzLnNvbHZlQ3VydmVYKGUsdCkpfX0se31dLDM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtyLmJ5dGVMZW5ndGg9YTtyLnRvQnl0ZUFycmF5PXM7ci5mcm9tQnl0ZUFycmF5PWQ7dmFyIGM9W107dmFyIHU9W107dmFyIGw9dHlwZW9mIFVpbnQ4QXJyYXkhPT1cInVuZGVmaW5lZFwiP1VpbnQ4QXJyYXk6QXJyYXk7dmFyIG49XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7Zm9yKHZhciBpPTAsbz1uLmxlbmd0aDtpPG87KytpKXtjW2ldPW5baV07dVtuLmNoYXJDb2RlQXQoaSldPWl9dVtcIi1cIi5jaGFyQ29kZUF0KDApXT02Mjt1W1wiX1wiLmNoYXJDb2RlQXQoMCldPTYzO2Z1bmN0aW9uIGgoZSl7dmFyIHQ9ZS5sZW5ndGg7aWYodCU0PjApe3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDRcIil9cmV0dXJuIGVbdC0yXT09PVwiPVwiPzI6ZVt0LTFdPT09XCI9XCI/MTowfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGUubGVuZ3RoKjMvNC1oKGUpfWZ1bmN0aW9uIHMoZSl7dmFyIHQscixuLGksbzt2YXIgYT1lLmxlbmd0aDtpPWgoZSk7bz1uZXcgbChhKjMvNC1pKTtyPWk+MD9hLTQ6YTt2YXIgcz0wO2Zvcih0PTA7dDxyO3QrPTQpe249dVtlLmNoYXJDb2RlQXQodCldPDwxOHx1W2UuY2hhckNvZGVBdCh0KzEpXTw8MTJ8dVtlLmNoYXJDb2RlQXQodCsyKV08PDZ8dVtlLmNoYXJDb2RlQXQodCszKV07b1tzKytdPW4+PjE2JjI1NTtvW3MrK109bj4+OCYyNTU7b1tzKytdPW4mMjU1fWlmKGk9PT0yKXtuPXVbZS5jaGFyQ29kZUF0KHQpXTw8Mnx1W2UuY2hhckNvZGVBdCh0KzEpXT4+NDtvW3MrK109biYyNTV9ZWxzZSBpZihpPT09MSl7bj11W2UuY2hhckNvZGVBdCh0KV08PDEwfHVbZS5jaGFyQ29kZUF0KHQrMSldPDw0fHVbZS5jaGFyQ29kZUF0KHQrMildPj4yO29bcysrXT1uPj44JjI1NTtvW3MrK109biYyNTV9cmV0dXJuIG99ZnVuY3Rpb24gcChlKXtyZXR1cm4gY1tlPj4xOCY2M10rY1tlPj4xMiY2M10rY1tlPj42JjYzXStjW2UmNjNdfWZ1bmN0aW9uIGYoZSx0LHIpe3ZhciBuO3ZhciBpPVtdO2Zvcih2YXIgbz10O288cjtvKz0zKXtuPShlW29dPDwxNikrKGVbbysxXTw8OCkrZVtvKzJdO2kucHVzaChwKG4pKX1yZXR1cm4gaS5qb2luKFwiXCIpfWZ1bmN0aW9uIGQoZSl7dmFyIHQ7dmFyIHI9ZS5sZW5ndGg7dmFyIG49ciUzO3ZhciBpPVwiXCI7dmFyIG89W107dmFyIGE9MTYzODM7Zm9yKHZhciBzPTAsdT1yLW47czx1O3MrPWEpe28ucHVzaChmKGUscyxzK2E+dT91OnMrYSkpfWlmKG49PT0xKXt0PWVbci0xXTtpKz1jW3Q+PjJdO2krPWNbdDw8NCY2M107aSs9XCI9PVwifWVsc2UgaWYobj09PTIpe3Q9KGVbci0yXTw8OCkrZVtyLTFdO2krPWNbdD4+MTBdO2krPWNbdD4+NCY2M107aSs9Y1t0PDwyJjYzXTtpKz1cIj1cIn1vLnB1c2goaSk7cmV0dXJuIG8uam9pbihcIlwiKX19LHt9XSw0OltmdW5jdGlvbihlLHQscil7fSx7fV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbiBlKGwpe3ZhciBoPVN0cmluZy5wcm90b3R5cGUuc3BsaXQscD0vKCk/Py8uZXhlYyhcIlwiKVsxXT09PWwsdDt0PWZ1bmN0aW9uKGUsdCxyKXtpZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkhPT1cIltvYmplY3QgUmVnRXhwXVwiKXtyZXR1cm4gaC5jYWxsKGUsdCxyKX12YXIgbj1bXSxpPSh0Lmlnbm9yZUNhc2U/XCJpXCI6XCJcIikrKHQubXVsdGlsaW5lP1wibVwiOlwiXCIpKyh0LmV4dGVuZGVkP1wieFwiOlwiXCIpKyh0LnN0aWNreT9cInlcIjpcIlwiKSxvPTAsdD1uZXcgUmVnRXhwKHQuc291cmNlLGkrXCJnXCIpLGEscyx1LGM7ZSs9XCJcIjtpZighcCl7YT1uZXcgUmVnRXhwKFwiXlwiK3Quc291cmNlK1wiJCg/IVxcXFxzKVwiLGkpfXI9cj09PWw/LTE+Pj4wOnI+Pj4wO3doaWxlKHM9dC5leGVjKGUpKXt1PXMuaW5kZXgrc1swXS5sZW5ndGg7aWYodT5vKXtuLnB1c2goZS5zbGljZShvLHMuaW5kZXgpKTtpZighcCYmcy5sZW5ndGg+MSl7c1swXS5yZXBsYWNlKGEsZnVuY3Rpb24oKXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGgtMjtlKyspe2lmKGFyZ3VtZW50c1tlXT09PWwpe3NbZV09bH19fSl9aWYocy5sZW5ndGg+MSYmcy5pbmRleDxlLmxlbmd0aCl7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobixzLnNsaWNlKDEpKX1jPXNbMF0ubGVuZ3RoO289dTtpZihuLmxlbmd0aD49cil7YnJlYWt9fWlmKHQubGFzdEluZGV4PT09cy5pbmRleCl7dC5sYXN0SW5kZXgrK319aWYobz09PWUubGVuZ3RoKXtpZihjfHwhdC50ZXN0KFwiXCIpKXtuLnB1c2goXCJcIil9fWVsc2V7bi5wdXNoKGUuc2xpY2UobykpfXJldHVybiBuLmxlbmd0aD5yP24uc2xpY2UoMCxyKTpufTtyZXR1cm4gdH0oKX0se31dLDY6W2Z1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1lKFwiYmFzZTY0LWpzXCIpO3ZhciBvPWUoXCJpZWVlNzU0XCIpO24uQnVmZmVyPXA7bi5TbG93QnVmZmVyPV87bi5JTlNQRUNUX01BWF9CWVRFUz01MDt2YXIgcj0yMTQ3NDgzNjQ3O24ua01heExlbmd0aD1yO3AuVFlQRURfQVJSQVlfU1VQUE9SVD1hKCk7aWYoIXAuVFlQRURfQVJSQVlfU1VQUE9SVCYmdHlwZW9mIGNvbnNvbGUhPT1cInVuZGVmaW5lZFwiJiZ0eXBlb2YgY29uc29sZS5lcnJvcj09PVwiZnVuY3Rpb25cIil7Y29uc29sZS5lcnJvcihcIlRoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSBcIitcImBidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuXCIpfWZ1bmN0aW9uIGEoKXt0cnl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoMSk7ZS5fX3Byb3RvX189e19fcHJvdG9fXzpVaW50OEFycmF5LnByb3RvdHlwZSxmb286ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9fTtyZXR1cm4gZS5mb28oKT09PTQyfWNhdGNoKGUpe3JldHVybiBmYWxzZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLFwicGFyZW50XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtpZighcC5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdW5kZWZpbmVkO3JldHVybiB0aGlzLmJ1ZmZlcn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocC5wcm90b3R5cGUsXCJvZmZzZXRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe2lmKCFwLmlzQnVmZmVyKHRoaXMpKXJldHVybiB1bmRlZmluZWQ7cmV0dXJuIHRoaXMuYnl0ZU9mZnNldH19KTtmdW5jdGlvbiBzKGUpe2lmKGU+cil7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrZSsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZSk7dC5fX3Byb3RvX189cC5wcm90b3R5cGU7cmV0dXJuIHR9ZnVuY3Rpb24gcChlLHQscil7aWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJyl9cmV0dXJuIGgoZSl9cmV0dXJuIHUoZSx0LHIpfWlmKHR5cGVvZiBTeW1ib2whPT1cInVuZGVmaW5lZFwiJiZTeW1ib2wuc3BlY2llcyE9bnVsbCYmcFtTeW1ib2wuc3BlY2llc109PT1wKXtPYmplY3QuZGVmaW5lUHJvcGVydHkocCxTeW1ib2wuc3BlY2llcyx7dmFsdWU6bnVsbCxjb25maWd1cmFibGU6dHJ1ZSxlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOmZhbHNlfSl9cC5wb29sU2l6ZT04MTkyO2Z1bmN0aW9uIHUoZSx0LHIpe2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7cmV0dXJuIGYoZSx0KX1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoZSkpe3JldHVybiBkKGUpfWlmKGU9PW51bGwpe3Rocm93IFR5cGVFcnJvcihcIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIFwiK1wib3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGUpfWlmKFooZSxBcnJheUJ1ZmZlcil8fGUmJlooZS5idWZmZXIsQXJyYXlCdWZmZXIpKXtyZXR1cm4gdihlLHQscil9aWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpfXZhciBuPWUudmFsdWVPZiYmZS52YWx1ZU9mKCk7aWYobiE9bnVsbCYmbiE9PWUpe3JldHVybiBwLmZyb20obix0LHIpfXZhciBpPW0oZSk7aWYoaSlyZXR1cm4gaTtpZih0eXBlb2YgU3ltYm9sIT09XCJ1bmRlZmluZWRcIiYmU3ltYm9sLnRvUHJpbWl0aXZlIT1udWxsJiZ0eXBlb2YgZVtTeW1ib2wudG9QcmltaXRpdmVdPT09XCJmdW5jdGlvblwiKXtyZXR1cm4gcC5mcm9tKGVbU3ltYm9sLnRvUHJpbWl0aXZlXShcInN0cmluZ1wiKSx0LHIpfXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBcIitcIm9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlIFwiK3R5cGVvZiBlKX1wLmZyb209ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB1KGUsdCxyKX07cC5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlO3AuX19wcm90b19fPVVpbnQ4QXJyYXk7ZnVuY3Rpb24gYyhlKXtpZih0eXBlb2YgZSE9PVwibnVtYmVyXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKX1lbHNlIGlmKGU8MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrZSsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9fWZ1bmN0aW9uIGwoZSx0LHIpe2MoZSk7aWYoZTw9MCl7cmV0dXJuIHMoZSl9aWYodCE9PXVuZGVmaW5lZCl7cmV0dXJuIHR5cGVvZiByPT09XCJzdHJpbmdcIj9zKGUpLmZpbGwodCxyKTpzKGUpLmZpbGwodCl9cmV0dXJuIHMoZSl9cC5hbGxvYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIGwoZSx0LHIpfTtmdW5jdGlvbiBoKGUpe2MoZSk7cmV0dXJuIHMoZTwwPzA6ZyhlKXwwKX1wLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGUpe3JldHVybiBoKGUpfTtwLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihlKXtyZXR1cm4gaChlKX07ZnVuY3Rpb24gZihlLHQpe2lmKHR5cGVvZiB0IT09XCJzdHJpbmdcInx8dD09PVwiXCIpe3Q9XCJ1dGY4XCJ9aWYoIXAuaXNFbmNvZGluZyh0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3QpfXZhciByPXkoZSx0KXwwO3ZhciBuPXMocik7dmFyIGk9bi53cml0ZShlLHQpO2lmKGkhPT1yKXtuPW4uc2xpY2UoMCxpKX1yZXR1cm4gbn1mdW5jdGlvbiBkKGUpe3ZhciB0PWUubGVuZ3RoPDA/MDpnKGUubGVuZ3RoKXwwO3ZhciByPXModCk7Zm9yKHZhciBuPTA7bjx0O24rPTEpe3Jbbl09ZVtuXSYyNTV9cmV0dXJuIHJ9ZnVuY3Rpb24gdihlLHQscil7aWYodDwwfHxlLmJ5dGVMZW5ndGg8dCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wib2Zmc2V0XCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJyl9aWYoZS5ieXRlTGVuZ3RoPHQrKHJ8fDApKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJsZW5ndGhcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKX12YXIgbjtpZih0PT09dW5kZWZpbmVkJiZyPT09dW5kZWZpbmVkKXtuPW5ldyBVaW50OEFycmF5KGUpfWVsc2UgaWYocj09PXVuZGVmaW5lZCl7bj1uZXcgVWludDhBcnJheShlLHQpfWVsc2V7bj1uZXcgVWludDhBcnJheShlLHQscil9bi5fX3Byb3RvX189cC5wcm90b3R5cGU7cmV0dXJuIG59ZnVuY3Rpb24gbShlKXtpZihwLmlzQnVmZmVyKGUpKXt2YXIgdD1nKGUubGVuZ3RoKXwwO3ZhciByPXModCk7aWYoci5sZW5ndGg9PT0wKXtyZXR1cm4gcn1lLmNvcHkociwwLDAsdCk7cmV0dXJuIHJ9aWYoZS5sZW5ndGghPT11bmRlZmluZWQpe2lmKHR5cGVvZiBlLmxlbmd0aCE9PVwibnVtYmVyXCJ8fEooZS5sZW5ndGgpKXtyZXR1cm4gcygwKX1yZXR1cm4gZChlKX1pZihlLnR5cGU9PT1cIkJ1ZmZlclwiJiZBcnJheS5pc0FycmF5KGUuZGF0YSkpe3JldHVybiBkKGUuZGF0YSl9fWZ1bmN0aW9uIGcoZSl7aWYoZT49cil7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIFwiK1wic2l6ZTogMHhcIityLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKX1yZXR1cm4gZXwwfWZ1bmN0aW9uIF8oZSl7aWYoK2UhPWUpe2U9MH1yZXR1cm4gcC5hbGxvYygrZSl9cC5pc0J1ZmZlcj1mdW5jdGlvbiBlKHQpe3JldHVybiB0IT1udWxsJiZ0Ll9pc0J1ZmZlcj09PXRydWUmJnQhPT1wLnByb3RvdHlwZX07cC5jb21wYXJlPWZ1bmN0aW9uIGUodCxyKXtpZihaKHQsVWludDhBcnJheSkpdD1wLmZyb20odCx0Lm9mZnNldCx0LmJ5dGVMZW5ndGgpO2lmKFoocixVaW50OEFycmF5KSlyPXAuZnJvbShyLHIub2Zmc2V0LHIuYnl0ZUxlbmd0aCk7aWYoIXAuaXNCdWZmZXIodCl8fCFwLmlzQnVmZmVyKHIpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJidWYxXCIsIFwiYnVmMlwiIGFyZ3VtZW50cyBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5Jyl9aWYodD09PXIpcmV0dXJuIDA7dmFyIG49dC5sZW5ndGg7dmFyIGk9ci5sZW5ndGg7Zm9yKHZhciBvPTAsYT1NYXRoLm1pbihuLGkpO288YTsrK28pe2lmKHRbb10hPT1yW29dKXtuPXRbb107aT1yW29dO2JyZWFrfX1pZihuPGkpcmV0dXJuLTE7aWYoaTxuKXJldHVybiAxO3JldHVybiAwfTtwLmlzRW5jb2Rpbmc9ZnVuY3Rpb24gZSh0KXtzd2l0Y2goU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIHRydWU7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fTtwLmNvbmNhdD1mdW5jdGlvbiBlKHQscil7aWYoIUFycmF5LmlzQXJyYXkodCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpfWlmKHQubGVuZ3RoPT09MCl7cmV0dXJuIHAuYWxsb2MoMCl9dmFyIG47aWYocj09PXVuZGVmaW5lZCl7cj0wO2ZvcihuPTA7bjx0Lmxlbmd0aDsrK24pe3IrPXRbbl0ubGVuZ3RofX12YXIgaT1wLmFsbG9jVW5zYWZlKHIpO3ZhciBvPTA7Zm9yKG49MDtuPHQubGVuZ3RoOysrbil7dmFyIGE9dFtuXTtpZihaKGEsVWludDhBcnJheSkpe2E9cC5mcm9tKGEpfWlmKCFwLmlzQnVmZmVyKGEpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKX1hLmNvcHkoaSxvKTtvKz1hLmxlbmd0aH1yZXR1cm4gaX07ZnVuY3Rpb24geShlLHQpe2lmKHAuaXNCdWZmZXIoZSkpe3JldHVybiBlLmxlbmd0aH1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoZSl8fFooZSxBcnJheUJ1ZmZlcikpe3JldHVybiBlLmJ5dGVMZW5ndGh9aWYodHlwZW9mIGUhPT1cInN0cmluZ1wiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJzdHJpbmdcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gJytcIlJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGUpfXZhciByPWUubGVuZ3RoO3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdPT09dHJ1ZTtpZighbiYmcj09PTApcmV0dXJuIDA7dmFyIGk9ZmFsc2U7Zm9yKDs7KXtzd2l0Y2godCl7Y2FzZVwiYXNjaWlcIjpjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpyZXR1cm4gcjtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gcShlKS5sZW5ndGg7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIHIqMjtjYXNlXCJoZXhcIjpyZXR1cm4gcj4+PjE7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIFkoZSkubGVuZ3RoO2RlZmF1bHQ6aWYoaSl7cmV0dXJuIG4/LTE6cShlKS5sZW5ndGh9dD0oXCJcIit0KS50b0xvd2VyQ2FzZSgpO2k9dHJ1ZX19fXAuYnl0ZUxlbmd0aD15O2Z1bmN0aW9uIGIoZSx0LHIpe3ZhciBuPWZhbHNlO2lmKHQ9PT11bmRlZmluZWR8fHQ8MCl7dD0wfWlmKHQ+dGhpcy5sZW5ndGgpe3JldHVyblwiXCJ9aWYocj09PXVuZGVmaW5lZHx8cj50aGlzLmxlbmd0aCl7cj10aGlzLmxlbmd0aH1pZihyPD0wKXtyZXR1cm5cIlwifXI+Pj49MDt0Pj4+PTA7aWYocjw9dCl7cmV0dXJuXCJcIn1pZighZSllPVwidXRmOFwiO3doaWxlKHRydWUpe3N3aXRjaChlKXtjYXNlXCJoZXhcIjpyZXR1cm4gSSh0aGlzLHQscik7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIGoodGhpcyx0LHIpO2Nhc2VcImFzY2lpXCI6cmV0dXJuIEwodGhpcyx0LHIpO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBOKHRoaXMsdCxyKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gQSh0aGlzLHQscik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIEQodGhpcyx0LHIpO2RlZmF1bHQ6aWYobil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrZSk7ZT0oZStcIlwiKS50b0xvd2VyQ2FzZSgpO249dHJ1ZX19fXAucHJvdG90eXBlLl9pc0J1ZmZlcj10cnVlO2Z1bmN0aW9uIHgoZSx0LHIpe3ZhciBuPWVbdF07ZVt0XT1lW3JdO2Vbcl09bn1wLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24gZSgpe3ZhciB0PXRoaXMubGVuZ3RoO2lmKHQlMiE9PTApe3Rocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHNcIil9Zm9yKHZhciByPTA7cjx0O3IrPTIpe3godGhpcyxyLHIrMSl9cmV0dXJuIHRoaXN9O3AucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbiBlKCl7dmFyIHQ9dGhpcy5sZW5ndGg7aWYodCU0IT09MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0c1wiKX1mb3IodmFyIHI9MDtyPHQ7cis9NCl7eCh0aGlzLHIsciszKTt4KHRoaXMscisxLHIrMil9cmV0dXJuIHRoaXN9O3AucHJvdG90eXBlLnN3YXA2ND1mdW5jdGlvbiBlKCl7dmFyIHQ9dGhpcy5sZW5ndGg7aWYodCU4IT09MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0c1wiKX1mb3IodmFyIHI9MDtyPHQ7cis9OCl7eCh0aGlzLHIscis3KTt4KHRoaXMscisxLHIrNik7eCh0aGlzLHIrMixyKzUpO3godGhpcyxyKzMscis0KX1yZXR1cm4gdGhpc307cC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24gZSgpe3ZhciB0PXRoaXMubGVuZ3RoO2lmKHQ9PT0wKXJldHVyblwiXCI7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIGoodGhpcywwLHQpO3JldHVybiBiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cC5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmc9cC5wcm90b3R5cGUudG9TdHJpbmc7cC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uIGUodCl7aWYoIXAuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7aWYodGhpcz09PXQpcmV0dXJuIHRydWU7cmV0dXJuIHAuY29tcGFyZSh0aGlzLHQpPT09MH07cC5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbiBlKCl7dmFyIHQ9XCJcIjt2YXIgcj1uLklOU1BFQ1RfTUFYX0JZVEVTO3Q9dGhpcy50b1N0cmluZyhcImhleFwiLDAscikucmVwbGFjZSgvKC57Mn0pL2csXCIkMSBcIikudHJpbSgpO2lmKHRoaXMubGVuZ3RoPnIpdCs9XCIgLi4uIFwiO3JldHVyblwiPEJ1ZmZlciBcIit0K1wiPlwifTtwLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uIGUodCxyLG4saSxvKXtpZihaKHQsVWludDhBcnJheSkpe3Q9cC5mcm9tKHQsdC5vZmZzZXQsdC5ieXRlTGVuZ3RoKX1pZighcC5pc0J1ZmZlcih0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwidGFyZ2V0XCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJytcIlJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIHQpfWlmKHI9PT11bmRlZmluZWQpe3I9MH1pZihuPT09dW5kZWZpbmVkKXtuPXQ/dC5sZW5ndGg6MH1pZihpPT09dW5kZWZpbmVkKXtpPTB9aWYobz09PXVuZGVmaW5lZCl7bz10aGlzLmxlbmd0aH1pZihyPDB8fG4+dC5sZW5ndGh8fGk8MHx8bz50aGlzLmxlbmd0aCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgaW5kZXhcIil9aWYoaT49byYmcj49bil7cmV0dXJuIDB9aWYoaT49byl7cmV0dXJuLTF9aWYocj49bil7cmV0dXJuIDF9cj4+Pj0wO24+Pj49MDtpPj4+PTA7bz4+Pj0wO2lmKHRoaXM9PT10KXJldHVybiAwO3ZhciBhPW8taTt2YXIgcz1uLXI7dmFyIHU9TWF0aC5taW4oYSxzKTt2YXIgYz10aGlzLnNsaWNlKGksbyk7dmFyIGw9dC5zbGljZShyLG4pO2Zvcih2YXIgaD0wO2g8dTsrK2gpe2lmKGNbaF0hPT1sW2hdKXthPWNbaF07cz1sW2hdO2JyZWFrfX1pZihhPHMpcmV0dXJuLTE7aWYoczxhKXJldHVybiAxO3JldHVybiAwfTtmdW5jdGlvbiB3KGUsdCxyLG4saSl7aWYoZS5sZW5ndGg9PT0wKXJldHVybi0xO2lmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7bj1yO3I9MH1lbHNlIGlmKHI+MjE0NzQ4MzY0Nyl7cj0yMTQ3NDgzNjQ3fWVsc2UgaWYocjwtMjE0NzQ4MzY0OCl7cj0tMjE0NzQ4MzY0OH1yPStyO2lmKEoocikpe3I9aT8wOmUubGVuZ3RoLTF9aWYocjwwKXI9ZS5sZW5ndGgrcjtpZihyPj1lLmxlbmd0aCl7aWYoaSlyZXR1cm4tMTtlbHNlIHI9ZS5sZW5ndGgtMX1lbHNlIGlmKHI8MCl7aWYoaSlyPTA7ZWxzZSByZXR1cm4tMX1pZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe3Q9cC5mcm9tKHQsbil9aWYocC5pc0J1ZmZlcih0KSl7aWYodC5sZW5ndGg9PT0wKXtyZXR1cm4tMX1yZXR1cm4gUyhlLHQscixuLGkpfWVsc2UgaWYodHlwZW9mIHQ9PT1cIm51bWJlclwiKXt0PXQmMjU1O2lmKHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mPT09XCJmdW5jdGlvblwiKXtpZihpKXtyZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsdCxyKX1lbHNle3JldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGUsdCxyKX19cmV0dXJuIFMoZSxbdF0scixuLGkpfXRocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXJcIil9ZnVuY3Rpb24gUyhlLHQscixuLGkpe3ZhciBvPTE7dmFyIGE9ZS5sZW5ndGg7dmFyIHM9dC5sZW5ndGg7aWYobiE9PXVuZGVmaW5lZCl7bj1TdHJpbmcobikudG9Mb3dlckNhc2UoKTtpZihuPT09XCJ1Y3MyXCJ8fG49PT1cInVjcy0yXCJ8fG49PT1cInV0ZjE2bGVcInx8bj09PVwidXRmLTE2bGVcIil7aWYoZS5sZW5ndGg8Mnx8dC5sZW5ndGg8Mil7cmV0dXJuLTF9bz0yO2EvPTI7cy89MjtyLz0yfX1mdW5jdGlvbiB1KGUsdCl7aWYobz09PTEpe3JldHVybiBlW3RdfWVsc2V7cmV0dXJuIGUucmVhZFVJbnQxNkJFKHQqbyl9fXZhciBjO2lmKGkpe3ZhciBsPS0xO2ZvcihjPXI7YzxhO2MrKyl7aWYodShlLGMpPT09dSh0LGw9PT0tMT8wOmMtbCkpe2lmKGw9PT0tMSlsPWM7aWYoYy1sKzE9PT1zKXJldHVybiBsKm99ZWxzZXtpZihsIT09LTEpYy09Yy1sO2w9LTF9fX1lbHNle2lmKHIrcz5hKXI9YS1zO2ZvcihjPXI7Yz49MDtjLS0pe3ZhciBoPXRydWU7Zm9yKHZhciBwPTA7cDxzO3ArKyl7aWYodShlLGMrcCkhPT11KHQscCkpe2g9ZmFsc2U7YnJlYWt9fWlmKGgpcmV0dXJuIGN9fXJldHVybi0xfXAucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uIGUodCxyLG4pe3JldHVybiB0aGlzLmluZGV4T2YodCxyLG4pIT09LTF9O3AucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24gZSh0LHIsbil7cmV0dXJuIHcodGhpcyx0LHIsbix0cnVlKX07cC5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24gZSh0LHIsbil7cmV0dXJuIHcodGhpcyx0LHIsbixmYWxzZSl9O2Z1bmN0aW9uIE0oZSx0LHIsbil7cj1OdW1iZXIocil8fDA7dmFyIGk9ZS5sZW5ndGgtcjtpZighbil7bj1pfWVsc2V7bj1OdW1iZXIobik7aWYobj5pKXtuPWl9fXZhciBvPXQubGVuZ3RoO2lmKG4+by8yKXtuPW8vMn1mb3IodmFyIGE9MDthPG47KythKXt2YXIgcz1wYXJzZUludCh0LnN1YnN0cihhKjIsMiksMTYpO2lmKEoocykpcmV0dXJuIGE7ZVtyK2FdPXN9cmV0dXJuIGF9ZnVuY3Rpb24gQyhlLHQscixuKXtyZXR1cm4gSyhxKHQsZS5sZW5ndGgtciksZSxyLG4pfWZ1bmN0aW9uIFQoZSx0LHIsbil7cmV0dXJuIEsoVyh0KSxlLHIsbil9ZnVuY3Rpb24gRShlLHQscixuKXtyZXR1cm4gVChlLHQscixuKX1mdW5jdGlvbiBPKGUsdCxyLG4pe3JldHVybiBLKFkodCksZSxyLG4pfWZ1bmN0aW9uIFAoZSx0LHIsbil7cmV0dXJuIEsoWCh0LGUubGVuZ3RoLXIpLGUscixuKX1wLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbiBlKHQscixuLGkpe2lmKHI9PT11bmRlZmluZWQpe2k9XCJ1dGY4XCI7bj10aGlzLmxlbmd0aDtyPTB9ZWxzZSBpZihuPT09dW5kZWZpbmVkJiZ0eXBlb2Ygcj09PVwic3RyaW5nXCIpe2k9cjtuPXRoaXMubGVuZ3RoO3I9MH1lbHNlIGlmKGlzRmluaXRlKHIpKXtyPXI+Pj4wO2lmKGlzRmluaXRlKG4pKXtuPW4+Pj4wO2lmKGk9PT11bmRlZmluZWQpaT1cInV0ZjhcIn1lbHNle2k9bjtuPXVuZGVmaW5lZH19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZFwiKX12YXIgbz10aGlzLmxlbmd0aC1yO2lmKG49PT11bmRlZmluZWR8fG4+byluPW87aWYodC5sZW5ndGg+MCYmKG48MHx8cjwwKXx8cj50aGlzLmxlbmd0aCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kc1wiKX1pZighaSlpPVwidXRmOFwiO3ZhciBhPWZhbHNlO2Zvcig7Oyl7c3dpdGNoKGkpe2Nhc2VcImhleFwiOnJldHVybiBNKHRoaXMsdCxyLG4pO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBDKHRoaXMsdCxyLG4pO2Nhc2VcImFzY2lpXCI6cmV0dXJuIFQodGhpcyx0LHIsbik7Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIEUodGhpcyx0LHIsbik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIE8odGhpcyx0LHIsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIFAodGhpcyx0LHIsbik7ZGVmYXVsdDppZihhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitpKTtpPShcIlwiK2kpLnRvTG93ZXJDYXNlKCk7YT10cnVlfX19O3AucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbiBlKCl7cmV0dXJue3R5cGU6XCJCdWZmZXJcIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O2Z1bmN0aW9uIEEoZSx0LHIpe2lmKHQ9PT0wJiZyPT09ZS5sZW5ndGgpe3JldHVybiBpLmZyb21CeXRlQXJyYXkoZSl9ZWxzZXtyZXR1cm4gaS5mcm9tQnl0ZUFycmF5KGUuc2xpY2UodCxyKSl9fWZ1bmN0aW9uIGooZSx0LHIpe3I9TWF0aC5taW4oZS5sZW5ndGgscik7dmFyIG49W107dmFyIGk9dDt3aGlsZShpPHIpe3ZhciBvPWVbaV07dmFyIGE9bnVsbDt2YXIgcz1vPjIzOT80Om8+MjIzPzM6bz4xOTE/MjoxO2lmKGkrczw9cil7dmFyIHUsYyxsLGg7c3dpdGNoKHMpe2Nhc2UgMTppZihvPDEyOCl7YT1vfWJyZWFrO2Nhc2UgMjp1PWVbaSsxXTtpZigodSYxOTIpPT09MTI4KXtoPShvJjMxKTw8Nnx1JjYzO2lmKGg+MTI3KXthPWh9fWJyZWFrO2Nhc2UgMzp1PWVbaSsxXTtjPWVbaSsyXTtpZigodSYxOTIpPT09MTI4JiYoYyYxOTIpPT09MTI4KXtoPShvJjE1KTw8MTJ8KHUmNjMpPDw2fGMmNjM7aWYoaD4yMDQ3JiYoaDw1NTI5Nnx8aD41NzM0Mykpe2E9aH19YnJlYWs7Y2FzZSA0OnU9ZVtpKzFdO2M9ZVtpKzJdO2w9ZVtpKzNdO2lmKCh1JjE5Mik9PT0xMjgmJihjJjE5Mik9PT0xMjgmJihsJjE5Mik9PT0xMjgpe2g9KG8mMTUpPDwxOHwodSY2Myk8PDEyfChjJjYzKTw8NnxsJjYzO2lmKGg+NjU1MzUmJmg8MTExNDExMil7YT1ofX19fWlmKGE9PT1udWxsKXthPTY1NTMzO3M9MX1lbHNlIGlmKGE+NjU1MzUpe2EtPTY1NTM2O24ucHVzaChhPj4+MTAmMTAyM3w1NTI5Nik7YT01NjMyMHxhJjEwMjN9bi5wdXNoKGEpO2krPXN9cmV0dXJuIGsobil9dmFyIFI9NDA5NjtmdW5jdGlvbiBrKGUpe3ZhciB0PWUubGVuZ3RoO2lmKHQ8PVIpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxlKX12YXIgcj1cIlwiO3ZhciBuPTA7d2hpbGUobjx0KXtyKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxlLnNsaWNlKG4sbis9UikpfXJldHVybiByfWZ1bmN0aW9uIEwoZSx0LHIpe3ZhciBuPVwiXCI7cj1NYXRoLm1pbihlLmxlbmd0aCxyKTtmb3IodmFyIGk9dDtpPHI7KytpKXtuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbaV0mMTI3KX1yZXR1cm4gbn1mdW5jdGlvbiBOKGUsdCxyKXt2YXIgbj1cIlwiO3I9TWF0aC5taW4oZS5sZW5ndGgscik7Zm9yKHZhciBpPXQ7aTxyOysraSl7bis9U3RyaW5nLmZyb21DaGFyQ29kZShlW2ldKX1yZXR1cm4gbn1mdW5jdGlvbiBJKGUsdCxyKXt2YXIgbj1lLmxlbmd0aDtpZighdHx8dDwwKXQ9MDtpZighcnx8cjwwfHxyPm4pcj1uO3ZhciBpPVwiXCI7Zm9yKHZhciBvPXQ7bzxyOysrbyl7aSs9VShlW29dKX1yZXR1cm4gaX1mdW5jdGlvbiBEKGUsdCxyKXt2YXIgbj1lLnNsaWNlKHQscik7dmFyIGk9XCJcIjtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rPTIpe2krPVN0cmluZy5mcm9tQ2hhckNvZGUobltvXStuW28rMV0qMjU2KX1yZXR1cm4gaX1wLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbiBlKHQscil7dmFyIG49dGhpcy5sZW5ndGg7dD1+fnQ7cj1yPT09dW5kZWZpbmVkP246fn5yO2lmKHQ8MCl7dCs9bjtpZih0PDApdD0wfWVsc2UgaWYodD5uKXt0PW59aWYocjwwKXtyKz1uO2lmKHI8MClyPTB9ZWxzZSBpZihyPm4pe3I9bn1pZihyPHQpcj10O3ZhciBpPXRoaXMuc3ViYXJyYXkodCxyKTtpLl9fcHJvdG9fXz1wLnByb3RvdHlwZTtyZXR1cm4gaX07ZnVuY3Rpb24gQihlLHQscil7aWYoZSUxIT09MHx8ZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKGUrdD5yKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1wLnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uIGUodCxyLG4pe3Q9dD4+PjA7cj1yPj4+MDtpZighbilCKHQscix0aGlzLmxlbmd0aCk7dmFyIGk9dGhpc1t0XTt2YXIgbz0xO3ZhciBhPTA7d2hpbGUoKythPHImJihvKj0yNTYpKXtpKz10aGlzW3QrYV0qb31yZXR1cm4gaX07cC5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbiBlKHQscixuKXt0PXQ+Pj4wO3I9cj4+PjA7aWYoIW4pe0IodCxyLHRoaXMubGVuZ3RoKX12YXIgaT10aGlzW3QrLS1yXTt2YXIgbz0xO3doaWxlKHI+MCYmKG8qPTI1Nikpe2krPXRoaXNbdCstLXJdKm99cmV0dXJuIGl9O3AucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbiBlKHQscil7dD10Pj4+MDtpZighcilCKHQsMSx0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbdF19O3AucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbiBlKHQscil7dD10Pj4+MDtpZighcilCKHQsMix0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbdF18dGhpc1t0KzFdPDw4fTtwLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24gZSh0LHIpe3Q9dD4+PjA7aWYoIXIpQih0LDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW3RdPDw4fHRoaXNbdCsxXX07cC5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uIGUodCxyKXt0PXQ+Pj4wO2lmKCFyKUIodCw0LHRoaXMubGVuZ3RoKTtyZXR1cm4odGhpc1t0XXx0aGlzW3QrMV08PDh8dGhpc1t0KzJdPDwxNikrdGhpc1t0KzNdKjE2Nzc3MjE2fTtwLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24gZSh0LHIpe3Q9dD4+PjA7aWYoIXIpQih0LDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW3RdKjE2Nzc3MjE2Kyh0aGlzW3QrMV08PDE2fHRoaXNbdCsyXTw8OHx0aGlzW3QrM10pfTtwLnByb3RvdHlwZS5yZWFkSW50TEU9ZnVuY3Rpb24gZSh0LHIsbil7dD10Pj4+MDtyPXI+Pj4wO2lmKCFuKUIodCxyLHRoaXMubGVuZ3RoKTt2YXIgaT10aGlzW3RdO3ZhciBvPTE7dmFyIGE9MDt3aGlsZSgrK2E8ciYmKG8qPTI1Nikpe2krPXRoaXNbdCthXSpvfW8qPTEyODtpZihpPj1vKWktPU1hdGgucG93KDIsOCpyKTtyZXR1cm4gaX07cC5wcm90b3R5cGUucmVhZEludEJFPWZ1bmN0aW9uIGUodCxyLG4pe3Q9dD4+PjA7cj1yPj4+MDtpZighbilCKHQscix0aGlzLmxlbmd0aCk7dmFyIGk9cjt2YXIgbz0xO3ZhciBhPXRoaXNbdCstLWldO3doaWxlKGk+MCYmKG8qPTI1Nikpe2ErPXRoaXNbdCstLWldKm99byo9MTI4O2lmKGE+PW8pYS09TWF0aC5wb3coMiw4KnIpO3JldHVybiBhfTtwLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbiBlKHQscil7dD10Pj4+MDtpZighcilCKHQsMSx0aGlzLmxlbmd0aCk7aWYoISh0aGlzW3RdJjEyOCkpcmV0dXJuIHRoaXNbdF07cmV0dXJuKDI1NS10aGlzW3RdKzEpKi0xfTtwLnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbiBlKHQscil7dD10Pj4+MDtpZighcilCKHQsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1t0XXx0aGlzW3QrMV08PDg7cmV0dXJuIG4mMzI3Njg/bnw0Mjk0OTAxNzYwOm59O3AucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uIGUodCxyKXt0PXQ+Pj4wO2lmKCFyKUIodCwyLHRoaXMubGVuZ3RoKTt2YXIgbj10aGlzW3QrMV18dGhpc1t0XTw8ODtyZXR1cm4gbiYzMjc2OD9ufDQyOTQ5MDE3NjA6bn07cC5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24gZSh0LHIpe3Q9dD4+PjA7aWYoIXIpQih0LDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2fHRoaXNbdCszXTw8MjR9O3AucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uIGUodCxyKXt0PXQ+Pj4wO2lmKCFyKUIodCw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1t0XTw8MjR8dGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdfTtwLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbiBlKHQscil7dD10Pj4+MDtpZighcilCKHQsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIG8ucmVhZCh0aGlzLHQsdHJ1ZSwyMyw0KX07cC5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24gZSh0LHIpe3Q9dD4+PjA7aWYoIXIpQih0LDQsdGhpcy5sZW5ndGgpO3JldHVybiBvLnJlYWQodGhpcyx0LGZhbHNlLDIzLDQpfTtwLnByb3RvdHlwZS5yZWFkRG91YmxlTEU9ZnVuY3Rpb24gZSh0LHIpe3Q9dD4+PjA7aWYoIXIpQih0LDgsdGhpcy5sZW5ndGgpO3JldHVybiBvLnJlYWQodGhpcyx0LHRydWUsNTIsOCl9O3AucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbiBlKHQscil7dD10Pj4+MDtpZighcilCKHQsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIG8ucmVhZCh0aGlzLHQsZmFsc2UsNTIsOCl9O2Z1bmN0aW9uIEYoZSx0LHIsbixpLG8pe2lmKCFwLmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpO2lmKHQ+aXx8dDxvKXRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKHIrbj5lLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKX1wLnByb3RvdHlwZS53cml0ZVVJbnRMRT1mdW5jdGlvbiBlKHQscixuLGkpe3Q9K3Q7cj1yPj4+MDtuPW4+Pj4wO2lmKCFpKXt2YXIgbz1NYXRoLnBvdygyLDgqbiktMTtGKHRoaXMsdCxyLG4sbywwKX12YXIgYT0xO3ZhciBzPTA7dGhpc1tyXT10JjI1NTt3aGlsZSgrK3M8biYmKGEqPTI1Nikpe3RoaXNbcitzXT10L2EmMjU1fXJldHVybiByK259O3AucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uIGUodCxyLG4saSl7dD0rdDtyPXI+Pj4wO249bj4+PjA7aWYoIWkpe3ZhciBvPU1hdGgucG93KDIsOCpuKS0xO0YodGhpcyx0LHIsbixvLDApfXZhciBhPW4tMTt2YXIgcz0xO3RoaXNbcithXT10JjI1NTt3aGlsZSgtLWE+PTAmJihzKj0yNTYpKXt0aGlzW3IrYV09dC9zJjI1NX1yZXR1cm4gcitufTtwLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uIGUodCxyLG4pe3Q9K3Q7cj1yPj4+MDtpZighbilGKHRoaXMsdCxyLDEsMjU1LDApO3RoaXNbcl09dCYyNTU7cmV0dXJuIHIrMX07cC5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbiBlKHQscixuKXt0PSt0O3I9cj4+PjA7aWYoIW4pRih0aGlzLHQsciwyLDY1NTM1LDApO3RoaXNbcl09dCYyNTU7dGhpc1tyKzFdPXQ+Pj44O3JldHVybiByKzJ9O3AucHJvdG90eXBlLndyaXRlVUludDE2QkU9ZnVuY3Rpb24gZSh0LHIsbil7dD0rdDtyPXI+Pj4wO2lmKCFuKUYodGhpcyx0LHIsMiw2NTUzNSwwKTt0aGlzW3JdPXQ+Pj44O3RoaXNbcisxXT10JjI1NTtyZXR1cm4gcisyfTtwLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uIGUodCxyLG4pe3Q9K3Q7cj1yPj4+MDtpZighbilGKHRoaXMsdCxyLDQsNDI5NDk2NzI5NSwwKTt0aGlzW3IrM109dD4+PjI0O3RoaXNbcisyXT10Pj4+MTY7dGhpc1tyKzFdPXQ+Pj44O3RoaXNbcl09dCYyNTU7cmV0dXJuIHIrNH07cC5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbiBlKHQscixuKXt0PSt0O3I9cj4+PjA7aWYoIW4pRih0aGlzLHQsciw0LDQyOTQ5NjcyOTUsMCk7dGhpc1tyXT10Pj4+MjQ7dGhpc1tyKzFdPXQ+Pj4xNjt0aGlzW3IrMl09dD4+Pjg7dGhpc1tyKzNdPXQmMjU1O3JldHVybiByKzR9O3AucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24gZSh0LHIsbixpKXt0PSt0O3I9cj4+PjA7aWYoIWkpe3ZhciBvPU1hdGgucG93KDIsOCpuLTEpO0YodGhpcyx0LHIsbixvLTEsLW8pfXZhciBhPTA7dmFyIHM9MTt2YXIgdT0wO3RoaXNbcl09dCYyNTU7d2hpbGUoKythPG4mJihzKj0yNTYpKXtpZih0PDAmJnU9PT0wJiZ0aGlzW3IrYS0xXSE9PTApe3U9MX10aGlzW3IrYV09KHQvcz4+MCktdSYyNTV9cmV0dXJuIHIrbn07cC5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbiBlKHQscixuLGkpe3Q9K3Q7cj1yPj4+MDtpZighaSl7dmFyIG89TWF0aC5wb3coMiw4Km4tMSk7Rih0aGlzLHQscixuLG8tMSwtbyl9dmFyIGE9bi0xO3ZhciBzPTE7dmFyIHU9MDt0aGlzW3IrYV09dCYyNTU7d2hpbGUoLS1hPj0wJiYocyo9MjU2KSl7aWYodDwwJiZ1PT09MCYmdGhpc1tyK2ErMV0hPT0wKXt1PTF9dGhpc1tyK2FdPSh0L3M+PjApLXUmMjU1fXJldHVybiByK259O3AucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbiBlKHQscixuKXt0PSt0O3I9cj4+PjA7aWYoIW4pRih0aGlzLHQsciwxLDEyNywtMTI4KTtpZih0PDApdD0yNTUrdCsxO3RoaXNbcl09dCYyNTU7cmV0dXJuIHIrMX07cC5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uIGUodCxyLG4pe3Q9K3Q7cj1yPj4+MDtpZighbilGKHRoaXMsdCxyLDIsMzI3NjcsLTMyNzY4KTt0aGlzW3JdPXQmMjU1O3RoaXNbcisxXT10Pj4+ODtyZXR1cm4gcisyfTtwLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24gZSh0LHIsbil7dD0rdDtyPXI+Pj4wO2lmKCFuKUYodGhpcyx0LHIsMiwzMjc2NywtMzI3NjgpO3RoaXNbcl09dD4+Pjg7dGhpc1tyKzFdPXQmMjU1O3JldHVybiByKzJ9O3AucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbiBlKHQscixuKXt0PSt0O3I9cj4+PjA7aWYoIW4pRih0aGlzLHQsciw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpO3RoaXNbcl09dCYyNTU7dGhpc1tyKzFdPXQ+Pj44O3RoaXNbcisyXT10Pj4+MTY7dGhpc1tyKzNdPXQ+Pj4yNDtyZXR1cm4gcis0fTtwLnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24gZSh0LHIsbil7dD0rdDtyPXI+Pj4wO2lmKCFuKUYodGhpcyx0LHIsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KTtpZih0PDApdD00Mjk0OTY3Mjk1K3QrMTt0aGlzW3JdPXQ+Pj4yNDt0aGlzW3IrMV09dD4+PjE2O3RoaXNbcisyXT10Pj4+ODt0aGlzW3IrM109dCYyNTU7cmV0dXJuIHIrNH07ZnVuY3Rpb24geihlLHQscixuLGksbyl7aWYocituPmUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpO2lmKHI8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKX1mdW5jdGlvbiAkKGUsdCxyLG4saSl7dD0rdDtyPXI+Pj4wO2lmKCFpKXt6KGUsdCxyLDQsMzQwMjgyMzQ2NjM4NTI4ODZlMjIsLTM0MDI4MjM0NjYzODUyODg2ZTIyKX1vLndyaXRlKGUsdCxyLG4sMjMsNCk7cmV0dXJuIHIrNH1wLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24gZSh0LHIsbil7cmV0dXJuICQodGhpcyx0LHIsdHJ1ZSxuKX07cC5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uIGUodCxyLG4pe3JldHVybiAkKHRoaXMsdCxyLGZhbHNlLG4pfTtmdW5jdGlvbiBHKGUsdCxyLG4saSl7dD0rdDtyPXI+Pj4wO2lmKCFpKXt6KGUsdCxyLDgsMTc5NzY5MzEzNDg2MjMxNTdlMjkyLC0xNzk3NjkzMTM0ODYyMzE1N2UyOTIpfW8ud3JpdGUoZSx0LHIsbiw1Miw4KTtyZXR1cm4gcis4fXAucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24gZSh0LHIsbil7cmV0dXJuIEcodGhpcyx0LHIsdHJ1ZSxuKX07cC5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbiBlKHQscixuKXtyZXR1cm4gRyh0aGlzLHQscixmYWxzZSxuKX07cC5wcm90b3R5cGUuY29weT1mdW5jdGlvbiBlKHQscixuLGkpe2lmKCFwLmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXJcIik7aWYoIW4pbj0wO2lmKCFpJiZpIT09MClpPXRoaXMubGVuZ3RoO2lmKHI+PXQubGVuZ3RoKXI9dC5sZW5ndGg7aWYoIXIpcj0wO2lmKGk+MCYmaTxuKWk9bjtpZihpPT09bilyZXR1cm4gMDtpZih0Lmxlbmd0aD09PTB8fHRoaXMubGVuZ3RoPT09MClyZXR1cm4gMDtpZihyPDApe3Rocm93IG5ldyBSYW5nZUVycm9yKFwidGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kc1wiKX1pZihuPDB8fG4+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpO2lmKGk8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNvdXJjZUVuZCBvdXQgb2YgYm91bmRzXCIpO2lmKGk+dGhpcy5sZW5ndGgpaT10aGlzLmxlbmd0aDtpZih0Lmxlbmd0aC1yPGktbil7aT10Lmxlbmd0aC1yK259dmFyIG89aS1uO2lmKHRoaXM9PT10JiZ0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbj09PVwiZnVuY3Rpb25cIil7dGhpcy5jb3B5V2l0aGluKHIsbixpKX1lbHNlIGlmKHRoaXM9PT10JiZuPHImJnI8aSl7Zm9yKHZhciBhPW8tMTthPj0wOy0tYSl7dFthK3JdPXRoaXNbYStuXX19ZWxzZXtVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCh0LHRoaXMuc3ViYXJyYXkobixpKSxyKX1yZXR1cm4gb307cC5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbiBlKHQscixuLGkpe2lmKHR5cGVvZiB0PT09XCJzdHJpbmdcIil7aWYodHlwZW9mIHI9PT1cInN0cmluZ1wiKXtpPXI7cj0wO249dGhpcy5sZW5ndGh9ZWxzZSBpZih0eXBlb2Ygbj09PVwic3RyaW5nXCIpe2k9bjtuPXRoaXMubGVuZ3RofWlmKGkhPT11bmRlZmluZWQmJnR5cGVvZiBpIT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmdcIil9aWYodHlwZW9mIGk9PT1cInN0cmluZ1wiJiYhcC5pc0VuY29kaW5nKGkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIraSl9aWYodC5sZW5ndGg9PT0xKXt2YXIgbz10LmNoYXJDb2RlQXQoMCk7aWYoaT09PVwidXRmOFwiJiZvPDEyOHx8aT09PVwibGF0aW4xXCIpe3Q9b319fWVsc2UgaWYodHlwZW9mIHQ9PT1cIm51bWJlclwiKXt0PXQmMjU1fWlmKHI8MHx8dGhpcy5sZW5ndGg8cnx8dGhpcy5sZW5ndGg8bil7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJPdXQgb2YgcmFuZ2UgaW5kZXhcIil9aWYobjw9cil7cmV0dXJuIHRoaXN9cj1yPj4+MDtuPW49PT11bmRlZmluZWQ/dGhpcy5sZW5ndGg6bj4+PjA7aWYoIXQpdD0wO3ZhciBhO2lmKHR5cGVvZiB0PT09XCJudW1iZXJcIil7Zm9yKGE9cjthPG47KythKXt0aGlzW2FdPXR9fWVsc2V7dmFyIHM9cC5pc0J1ZmZlcih0KT90OnAuZnJvbSh0LGkpO3ZhciB1PXMubGVuZ3RoO2lmKHU9PT0wKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgXCInK3QrJ1wiIGlzIGludmFsaWQgZm9yIGFyZ3VtZW50IFwidmFsdWVcIicpfWZvcihhPTA7YTxuLXI7KythKXt0aGlzW2Ercl09c1thJXVdfX1yZXR1cm4gdGhpc307dmFyIFY9L1teKy8wLTlBLVphLXotX10vZztmdW5jdGlvbiBIKGUpe2U9ZS5zcGxpdChcIj1cIilbMF07ZT1lLnRyaW0oKS5yZXBsYWNlKFYsXCJcIik7aWYoZS5sZW5ndGg8MilyZXR1cm5cIlwiO3doaWxlKGUubGVuZ3RoJTQhPT0wKXtlPWUrXCI9XCJ9cmV0dXJuIGV9ZnVuY3Rpb24gVShlKXtpZihlPDE2KXJldHVyblwiMFwiK2UudG9TdHJpbmcoMTYpO3JldHVybiBlLnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBxKGUsdCl7dD10fHxJbmZpbml0eTt2YXIgcjt2YXIgbj1lLmxlbmd0aDt2YXIgaT1udWxsO3ZhciBvPVtdO2Zvcih2YXIgYT0wO2E8bjsrK2Epe3I9ZS5jaGFyQ29kZUF0KGEpO2lmKHI+NTUyOTUmJnI8NTczNDQpe2lmKCFpKXtpZihyPjU2MzE5KXtpZigodC09Myk+LTEpby5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lbHNlIGlmKGErMT09PW4pe2lmKCh0LT0zKT4tMSlvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWk9cjtjb250aW51ZX1pZihyPDU2MzIwKXtpZigodC09Myk+LTEpby5wdXNoKDIzOSwxOTEsMTg5KTtpPXI7Y29udGludWV9cj0oaS01NTI5Njw8MTB8ci01NjMyMCkrNjU1MzZ9ZWxzZSBpZihpKXtpZigodC09Myk+LTEpby5wdXNoKDIzOSwxOTEsMTg5KX1pPW51bGw7aWYocjwxMjgpe2lmKCh0LT0xKTwwKWJyZWFrO28ucHVzaChyKX1lbHNlIGlmKHI8MjA0OCl7aWYoKHQtPTIpPDApYnJlYWs7by5wdXNoKHI+PjZ8MTkyLHImNjN8MTI4KX1lbHNlIGlmKHI8NjU1MzYpe2lmKCh0LT0zKTwwKWJyZWFrO28ucHVzaChyPj4xMnwyMjQscj4+NiY2M3wxMjgsciY2M3wxMjgpfWVsc2UgaWYocjwxMTE0MTEyKXtpZigodC09NCk8MClicmVhaztvLnB1c2gocj4+MTh8MjQwLHI+PjEyJjYzfDEyOCxyPj42JjYzfDEyOCxyJjYzfDEyOCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnRcIil9fXJldHVybiBvfWZ1bmN0aW9uIFcoZSl7dmFyIHQ9W107Zm9yKHZhciByPTA7cjxlLmxlbmd0aDsrK3Ipe3QucHVzaChlLmNoYXJDb2RlQXQocikmMjU1KX1yZXR1cm4gdH1mdW5jdGlvbiBYKGUsdCl7dmFyIHIsbixpO3ZhciBvPVtdO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7KythKXtpZigodC09Mik8MClicmVhaztyPWUuY2hhckNvZGVBdChhKTtuPXI+Pjg7aT1yJTI1NjtvLnB1c2goaSk7by5wdXNoKG4pfXJldHVybiBvfWZ1bmN0aW9uIFkoZSl7cmV0dXJuIGkudG9CeXRlQXJyYXkoSChlKSl9ZnVuY3Rpb24gSyhlLHQscixuKXtmb3IodmFyIGk9MDtpPG47KytpKXtpZihpK3I+PXQubGVuZ3RofHxpPj1lLmxlbmd0aClicmVhazt0W2krcl09ZVtpXX1yZXR1cm4gaX1mdW5jdGlvbiBaKGUsdCl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0fHxlIT1udWxsJiZlLmNvbnN0cnVjdG9yIT1udWxsJiZlLmNvbnN0cnVjdG9yLm5hbWUhPW51bGwmJmUuY29uc3RydWN0b3IubmFtZT09PXQubmFtZX1mdW5jdGlvbiBKKGUpe3JldHVybiBlIT09ZX19LHtcImJhc2U2NC1qc1wiOjMsaWVlZTc1NDoxN31dLDc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e307dmFyIGk7dmFyIG87ZnVuY3Rpb24gYSgpe3Rocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gcygpe3Rocm93IG5ldyBFcnJvcihcImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX0oZnVuY3Rpb24oKXt0cnl7aWYodHlwZW9mIHNldFRpbWVvdXQ9PT1cImZ1bmN0aW9uXCIpe2k9c2V0VGltZW91dH1lbHNle2k9YX19Y2F0Y2goZSl7aT1hfXRyeXtpZih0eXBlb2YgY2xlYXJUaW1lb3V0PT09XCJmdW5jdGlvblwiKXtvPWNsZWFyVGltZW91dH1lbHNle289c319Y2F0Y2goZSl7bz1zfX0pKCk7ZnVuY3Rpb24gdSh0KXtpZihpPT09c2V0VGltZW91dCl7cmV0dXJuIHNldFRpbWVvdXQodCwwKX1pZigoaT09PWF8fCFpKSYmc2V0VGltZW91dCl7aT1zZXRUaW1lb3V0O3JldHVybiBzZXRUaW1lb3V0KHQsMCl9dHJ5e3JldHVybiBpKHQsMCl9Y2F0Y2goZSl7dHJ5e3JldHVybiBpLmNhbGwobnVsbCx0LDApfWNhdGNoKGUpe3JldHVybiBpLmNhbGwodGhpcyx0LDApfX19ZnVuY3Rpb24gYyh0KXtpZihvPT09Y2xlYXJUaW1lb3V0KXtyZXR1cm4gY2xlYXJUaW1lb3V0KHQpfWlmKChvPT09c3x8IW8pJiZjbGVhclRpbWVvdXQpe289Y2xlYXJUaW1lb3V0O3JldHVybiBjbGVhclRpbWVvdXQodCl9dHJ5e3JldHVybiBvKHQpfWNhdGNoKGUpe3RyeXtyZXR1cm4gby5jYWxsKG51bGwsdCl9Y2F0Y2goZSl7cmV0dXJuIG8uY2FsbCh0aGlzLHQpfX19dmFyIGw9W107dmFyIGg9ZmFsc2U7dmFyIHA7dmFyIGY9LTE7ZnVuY3Rpb24gZCgpe2lmKCFofHwhcCl7cmV0dXJufWg9ZmFsc2U7aWYocC5sZW5ndGgpe2w9cC5jb25jYXQobCl9ZWxzZXtmPS0xfWlmKGwubGVuZ3RoKXt2KCl9fWZ1bmN0aW9uIHYoKXtpZihoKXtyZXR1cm59dmFyIGU9dShkKTtoPXRydWU7dmFyIHQ9bC5sZW5ndGg7d2hpbGUodCl7cD1sO2w9W107d2hpbGUoKytmPHQpe2lmKHApe3BbZl0ucnVuKCl9fWY9LTE7dD1sLmxlbmd0aH1wPW51bGw7aD1mYWxzZTtjKGUpfW4ubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt0W3ItMV09YXJndW1lbnRzW3JdfX1sLnB1c2gobmV3IG0oZSx0KSk7aWYobC5sZW5ndGg9PT0xJiYhaCl7dSh2KX19O2Z1bmN0aW9uIG0oZSx0KXt0aGlzLmZ1bj1lO3RoaXMuYXJyYXk9dH1tLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTtuLnRpdGxlPVwiYnJvd3NlclwiO24uYnJvd3Nlcj10cnVlO24uZW52PXt9O24uYXJndj1bXTtuLnZlcnNpb249XCJcIjtuLnZlcnNpb25zPXt9O2Z1bmN0aW9uIGcoKXt9bi5vbj1nO24uYWRkTGlzdGVuZXI9ZztuLm9uY2U9ZztuLm9mZj1nO24ucmVtb3ZlTGlzdGVuZXI9ZztuLnJlbW92ZUFsbExpc3RlbmVycz1nO24uZW1pdD1nO24ucHJlcGVuZExpc3RlbmVyPWc7bi5wcmVwZW5kT25jZUxpc3RlbmVyPWc7bi5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuW119O24uYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX07bi5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn07bi5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9O24udW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LHt9XSw4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPW47dC5leHBvcnRzLmRlZmF1bHQ9bjtmdW5jdGlvbiBuKGUsdCxyKXtyPXJ8fDI7dmFyIG49dCYmdC5sZW5ndGgsaT1uP3RbMF0qcjplLmxlbmd0aCxvPXYoZSwwLGkscix0cnVlKSxhPVtdO2lmKCFvfHxvLm5leHQ9PT1vLnByZXYpcmV0dXJuIGE7dmFyIHMsdSxjLGwsaCxwLGY7aWYobilvPWcoZSx0LG8scik7aWYoZS5sZW5ndGg+ODAqcil7cz1jPWVbMF07dT1sPWVbMV07Zm9yKHZhciBkPXI7ZDxpO2QrPXIpe2g9ZVtkXTtwPWVbZCsxXTtpZihoPHMpcz1oO2lmKHA8dSl1PXA7aWYoaD5jKWM9aDtpZihwPmwpbD1wfWY9TWF0aC5tYXgoYy1zLGwtdSk7Zj1mIT09MD8xL2Y6MH1tKG8sYSxyLHMsdSxmKTtyZXR1cm4gYX1mdW5jdGlvbiB2KGUsdCxyLG4saSl7dmFyIG8sYTtpZihpPT09TChlLHQscixuKT4wKXtmb3Iobz10O288cjtvKz1uKWE9aihvLGVbb10sZVtvKzFdLGEpfWVsc2V7Zm9yKG89ci1uO28+PXQ7by09bilhPWoobyxlW29dLGVbbysxXSxhKX1pZihhJiZzKGEsYS5uZXh0KSl7UihhKTthPWEubmV4dH1yZXR1cm4gYX1mdW5jdGlvbiBsKGUsdCl7aWYoIWUpcmV0dXJuIGU7aWYoIXQpdD1lO3ZhciByPWUsbjtkb3tuPWZhbHNlO2lmKCFyLnN0ZWluZXImJihzKHIsci5uZXh0KXx8QyhyLnByZXYscixyLm5leHQpPT09MCkpe1Iocik7cj10PXIucHJldjtpZihyPT09ci5uZXh0KWJyZWFrO249dHJ1ZX1lbHNle3I9ci5uZXh0fX13aGlsZShufHxyIT09dCk7cmV0dXJuIHR9ZnVuY3Rpb24gbShlLHQscixuLGksbyxhKXtpZighZSlyZXR1cm47aWYoIWEmJm8peChlLG4saSxvKTt2YXIgcz1lLHUsYzt3aGlsZShlLnByZXYhPT1lLm5leHQpe3U9ZS5wcmV2O2M9ZS5uZXh0O2lmKG8/cChlLG4saSxvKTpoKGUpKXt0LnB1c2godS5pL3IpO3QucHVzaChlLmkvcik7dC5wdXNoKGMuaS9yKTtSKGUpO2U9Yy5uZXh0O3M9Yy5uZXh0O2NvbnRpbnVlfWU9YztpZihlPT09cyl7aWYoIWEpe20obChlKSx0LHIsbixpLG8sMSl9ZWxzZSBpZihhPT09MSl7ZT1mKGwoZSksdCxyKTttKGUsdCxyLG4saSxvLDIpfWVsc2UgaWYoYT09PTIpe2QoZSx0LHIsbixpLG8pfWJyZWFrfX19ZnVuY3Rpb24gaChlKXt2YXIgdD1lLnByZXYscj1lLG49ZS5uZXh0O2lmKEModCxyLG4pPj0wKXJldHVybiBmYWxzZTt2YXIgaT1lLm5leHQubmV4dDt3aGlsZShpIT09ZS5wcmV2KXtpZihNKHQueCx0Lnksci54LHIueSxuLngsbi55LGkueCxpLnkpJiZDKGkucHJldixpLGkubmV4dCk+PTApcmV0dXJuIGZhbHNlO2k9aS5uZXh0fXJldHVybiB0cnVlfWZ1bmN0aW9uIHAoZSx0LHIsbil7dmFyIGk9ZS5wcmV2LG89ZSxhPWUubmV4dDtpZihDKGksbyxhKT49MClyZXR1cm4gZmFsc2U7dmFyIHM9aS54PG8ueD9pLng8YS54P2kueDphLng6by54PGEueD9vLng6YS54LHU9aS55PG8ueT9pLnk8YS55P2kueTphLnk6by55PGEueT9vLnk6YS55LGM9aS54Pm8ueD9pLng+YS54P2kueDphLng6by54PmEueD9vLng6YS54LGw9aS55Pm8ueT9pLnk+YS55P2kueTphLnk6by55PmEueT9vLnk6YS55O3ZhciBoPXcocyx1LHQscixuKSxwPXcoYyxsLHQscixuKTt2YXIgZj1lLnByZXZaLGQ9ZS5uZXh0Wjt3aGlsZShmJiZmLno+PWgmJmQmJmQuejw9cCl7aWYoZiE9PWUucHJldiYmZiE9PWUubmV4dCYmTShpLngsaS55LG8ueCxvLnksYS54LGEueSxmLngsZi55KSYmQyhmLnByZXYsZixmLm5leHQpPj0wKXJldHVybiBmYWxzZTtmPWYucHJldlo7aWYoZCE9PWUucHJldiYmZCE9PWUubmV4dCYmTShpLngsaS55LG8ueCxvLnksYS54LGEueSxkLngsZC55KSYmQyhkLnByZXYsZCxkLm5leHQpPj0wKXJldHVybiBmYWxzZTtkPWQubmV4dFp9d2hpbGUoZiYmZi56Pj1oKXtpZihmIT09ZS5wcmV2JiZmIT09ZS5uZXh0JiZNKGkueCxpLnksby54LG8ueSxhLngsYS55LGYueCxmLnkpJiZDKGYucHJldixmLGYubmV4dCk+PTApcmV0dXJuIGZhbHNlO2Y9Zi5wcmV2Wn13aGlsZShkJiZkLno8PXApe2lmKGQhPT1lLnByZXYmJmQhPT1lLm5leHQmJk0oaS54LGkueSxvLngsby55LGEueCxhLnksZC54LGQueSkmJkMoZC5wcmV2LGQsZC5uZXh0KT49MClyZXR1cm4gZmFsc2U7ZD1kLm5leHRafXJldHVybiB0cnVlfWZ1bmN0aW9uIGYoZSx0LHIpe3ZhciBuPWU7ZG97dmFyIGk9bi5wcmV2LG89bi5uZXh0Lm5leHQ7aWYoIXMoaSxvKSYmYShpLG4sbi5uZXh0LG8pJiZPKGksbykmJk8obyxpKSl7dC5wdXNoKGkuaS9yKTt0LnB1c2gobi5pL3IpO3QucHVzaChvLmkvcik7UihuKTtSKG4ubmV4dCk7bj1lPW99bj1uLm5leHR9d2hpbGUobiE9PWUpO3JldHVybiBsKG4pfWZ1bmN0aW9uIGQoZSx0LHIsbixpLG8pe3ZhciBhPWU7ZG97dmFyIHM9YS5uZXh0Lm5leHQ7d2hpbGUocyE9PWEucHJldil7aWYoYS5pIT09cy5pJiZjKGEscykpe3ZhciB1PUEoYSxzKTthPWwoYSxhLm5leHQpO3U9bCh1LHUubmV4dCk7bShhLHQscixuLGksbyk7bSh1LHQscixuLGksbyk7cmV0dXJufXM9cy5uZXh0fWE9YS5uZXh0fXdoaWxlKGEhPT1lKX1mdW5jdGlvbiBnKGUsdCxyLG4pe3ZhciBpPVtdLG8sYSxzLHUsYztmb3Iobz0wLGE9dC5sZW5ndGg7bzxhO28rKyl7cz10W29dKm47dT1vPGEtMT90W28rMV0qbjplLmxlbmd0aDtjPXYoZSxzLHUsbixmYWxzZSk7aWYoYz09PWMubmV4dCljLnN0ZWluZXI9dHJ1ZTtpLnB1c2goUyhjKSl9aS5zb3J0KF8pO2ZvcihvPTA7bzxpLmxlbmd0aDtvKyspe3koaVtvXSxyKTtyPWwocixyLm5leHQpfXJldHVybiByfWZ1bmN0aW9uIF8oZSx0KXtyZXR1cm4gZS54LXQueH1mdW5jdGlvbiB5KGUsdCl7dD1pKGUsdCk7aWYodCl7dmFyIHI9QSh0LGUpO2wodCx0Lm5leHQpO2wocixyLm5leHQpfX1mdW5jdGlvbiBpKGUsdCl7dmFyIHI9dCxuPWUueCxpPWUueSxvPS1JbmZpbml0eSxhO2Rve2lmKGk8PXIueSYmaT49ci5uZXh0LnkmJnIubmV4dC55IT09ci55KXt2YXIgcz1yLngrKGktci55KSooci5uZXh0Lngtci54KS8oci5uZXh0Lnktci55KTtpZihzPD1uJiZzPm8pe289cztpZihzPT09bil7aWYoaT09PXIueSlyZXR1cm4gcjtpZihpPT09ci5uZXh0LnkpcmV0dXJuIHIubmV4dH1hPXIueDxyLm5leHQueD9yOnIubmV4dH19cj1yLm5leHR9d2hpbGUociE9PXQpO2lmKCFhKXJldHVybiBudWxsO2lmKG49PT1vKXJldHVybiBhO3ZhciB1PWEsYz1hLngsbD1hLnksaD1JbmZpbml0eSxwO3I9YTtkb3tpZihuPj1yLngmJnIueD49YyYmbiE9PXIueCYmTShpPGw/bjpvLGksYyxsLGk8bD9vOm4saSxyLngsci55KSl7cD1NYXRoLmFicyhpLXIueSkvKG4tci54KTtpZihPKHIsZSkmJihwPGh8fHA9PT1oJiYoci54PmEueHx8ci54PT09YS54JiZiKGEscikpKSl7YT1yO2g9cH19cj1yLm5leHR9d2hpbGUociE9PXUpO3JldHVybiBhfWZ1bmN0aW9uIGIoZSx0KXtyZXR1cm4gQyhlLnByZXYsZSx0LnByZXYpPDAmJkModC5uZXh0LGUsZS5uZXh0KTwwfWZ1bmN0aW9uIHgoZSx0LHIsbil7dmFyIGk9ZTtkb3tpZihpLno9PT1udWxsKWkuej13KGkueCxpLnksdCxyLG4pO2kucHJldlo9aS5wcmV2O2kubmV4dFo9aS5uZXh0O2k9aS5uZXh0fXdoaWxlKGkhPT1lKTtpLnByZXZaLm5leHRaPW51bGw7aS5wcmV2Wj1udWxsO28oaSl9ZnVuY3Rpb24gbyhlKXt2YXIgdCxyLG4saSxvLGEscyx1LGM9MTtkb3tyPWU7ZT1udWxsO289bnVsbDthPTA7d2hpbGUocil7YSsrO249cjtzPTA7Zm9yKHQ9MDt0PGM7dCsrKXtzKys7bj1uLm5leHRaO2lmKCFuKWJyZWFrfXU9Yzt3aGlsZShzPjB8fHU+MCYmbil7aWYocyE9PTAmJih1PT09MHx8IW58fHIuejw9bi56KSl7aT1yO3I9ci5uZXh0WjtzLS19ZWxzZXtpPW47bj1uLm5leHRaO3UtLX1pZihvKW8ubmV4dFo9aTtlbHNlIGU9aTtpLnByZXZaPW87bz1pfXI9bn1vLm5leHRaPW51bGw7Yyo9Mn13aGlsZShhPjEpO3JldHVybiBlfWZ1bmN0aW9uIHcoZSx0LHIsbixpKXtlPTMyNzY3KihlLXIpKmk7dD0zMjc2NyoodC1uKSppO2U9KGV8ZTw8OCkmMTY3MTE5MzU7ZT0oZXxlPDw0KSYyNTI2NDUxMzU7ZT0oZXxlPDwyKSY4NTg5OTM0NTk7ZT0oZXxlPDwxKSYxNDMxNjU1NzY1O3Q9KHR8dDw8OCkmMTY3MTE5MzU7dD0odHx0PDw0KSYyNTI2NDUxMzU7dD0odHx0PDwyKSY4NTg5OTM0NTk7dD0odHx0PDwxKSYxNDMxNjU1NzY1O3JldHVybiBlfHQ8PDF9ZnVuY3Rpb24gUyhlKXt2YXIgdD1lLHI9ZTtkb3tpZih0Lng8ci54fHx0Lng9PT1yLngmJnQueTxyLnkpcj10O3Q9dC5uZXh0fXdoaWxlKHQhPT1lKTtyZXR1cm4gcn1mdW5jdGlvbiBNKGUsdCxyLG4saSxvLGEscyl7cmV0dXJuKGktYSkqKHQtcyktKGUtYSkqKG8tcyk+PTAmJihlLWEpKihuLXMpLShyLWEpKih0LXMpPj0wJiYoci1hKSooby1zKS0oaS1hKSoobi1zKT49MH1mdW5jdGlvbiBjKGUsdCl7cmV0dXJuIGUubmV4dC5pIT09dC5pJiZlLnByZXYuaSE9PXQuaSYmIUUoZSx0KSYmKE8oZSx0KSYmTyh0LGUpJiZQKGUsdCkmJihDKGUucHJldixlLHQucHJldil8fEMoZSx0LnByZXYsdCkpfHxzKGUsdCkmJkMoZS5wcmV2LGUsZS5uZXh0KT4wJiZDKHQucHJldix0LHQubmV4dCk+MCl9ZnVuY3Rpb24gQyhlLHQscil7cmV0dXJuKHQueS1lLnkpKihyLngtdC54KS0odC54LWUueCkqKHIueS10LnkpfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4gZS54PT09dC54JiZlLnk9PT10Lnl9ZnVuY3Rpb24gYShlLHQscixuKXt2YXIgaT1UKEMoZSx0LHIpKTt2YXIgbz1UKEMoZSx0LG4pKTt2YXIgYT1UKEMocixuLGUpKTt2YXIgcz1UKEMocixuLHQpKTtpZihpIT09byYmYSE9PXMpcmV0dXJuIHRydWU7aWYoaT09PTAmJnUoZSxyLHQpKXJldHVybiB0cnVlO2lmKG89PT0wJiZ1KGUsbix0KSlyZXR1cm4gdHJ1ZTtpZihhPT09MCYmdShyLGUsbikpcmV0dXJuIHRydWU7aWYocz09PTAmJnUocix0LG4pKXJldHVybiB0cnVlO3JldHVybiBmYWxzZX1mdW5jdGlvbiB1KGUsdCxyKXtyZXR1cm4gdC54PD1NYXRoLm1heChlLngsci54KSYmdC54Pj1NYXRoLm1pbihlLngsci54KSYmdC55PD1NYXRoLm1heChlLnksci55KSYmdC55Pj1NYXRoLm1pbihlLnksci55KX1mdW5jdGlvbiBUKGUpe3JldHVybiBlPjA/MTplPDA/LTE6MH1mdW5jdGlvbiBFKGUsdCl7dmFyIHI9ZTtkb3tpZihyLmkhPT1lLmkmJnIubmV4dC5pIT09ZS5pJiZyLmkhPT10LmkmJnIubmV4dC5pIT09dC5pJiZhKHIsci5uZXh0LGUsdCkpcmV0dXJuIHRydWU7cj1yLm5leHR9d2hpbGUociE9PWUpO3JldHVybiBmYWxzZX1mdW5jdGlvbiBPKGUsdCl7cmV0dXJuIEMoZS5wcmV2LGUsZS5uZXh0KTwwP0MoZSx0LGUubmV4dCk+PTAmJkMoZSxlLnByZXYsdCk+PTA6QyhlLHQsZS5wcmV2KTwwfHxDKGUsZS5uZXh0LHQpPDB9ZnVuY3Rpb24gUChlLHQpe3ZhciByPWUsbj1mYWxzZSxpPShlLngrdC54KS8yLG89KGUueSt0LnkpLzI7ZG97aWYoci55Pm8hPT1yLm5leHQueT5vJiZyLm5leHQueSE9PXIueSYmaTwoci5uZXh0Lngtci54KSooby1yLnkpLyhyLm5leHQueS1yLnkpK3IueCluPSFuO3I9ci5uZXh0fXdoaWxlKHIhPT1lKTtyZXR1cm4gbn1mdW5jdGlvbiBBKGUsdCl7dmFyIHI9bmV3IGsoZS5pLGUueCxlLnkpLG49bmV3IGsodC5pLHQueCx0LnkpLGk9ZS5uZXh0LG89dC5wcmV2O2UubmV4dD10O3QucHJldj1lO3IubmV4dD1pO2kucHJldj1yO24ubmV4dD1yO3IucHJldj1uO28ubmV4dD1uO24ucHJldj1vO3JldHVybiBufWZ1bmN0aW9uIGooZSx0LHIsbil7dmFyIGk9bmV3IGsoZSx0LHIpO2lmKCFuKXtpLnByZXY9aTtpLm5leHQ9aX1lbHNle2kubmV4dD1uLm5leHQ7aS5wcmV2PW47bi5uZXh0LnByZXY9aTtuLm5leHQ9aX1yZXR1cm4gaX1mdW5jdGlvbiBSKGUpe2UubmV4dC5wcmV2PWUucHJldjtlLnByZXYubmV4dD1lLm5leHQ7aWYoZS5wcmV2WillLnByZXZaLm5leHRaPWUubmV4dFo7aWYoZS5uZXh0WillLm5leHRaLnByZXZaPWUucHJldlp9ZnVuY3Rpb24gayhlLHQscil7dGhpcy5pPWU7dGhpcy54PXQ7dGhpcy55PXI7dGhpcy5wcmV2PW51bGw7dGhpcy5uZXh0PW51bGw7dGhpcy56PW51bGw7dGhpcy5wcmV2Wj1udWxsO3RoaXMubmV4dFo9bnVsbDt0aGlzLnN0ZWluZXI9ZmFsc2V9bi5kZXZpYXRpb249ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dCYmdC5sZW5ndGg7dmFyIG89aT90WzBdKnI6ZS5sZW5ndGg7dmFyIGE9TWF0aC5hYnMoTChlLDAsbyxyKSk7aWYoaSl7Zm9yKHZhciBzPTAsdT10Lmxlbmd0aDtzPHU7cysrKXt2YXIgYz10W3NdKnI7dmFyIGw9czx1LTE/dFtzKzFdKnI6ZS5sZW5ndGg7YS09TWF0aC5hYnMoTChlLGMsbCxyKSl9fXZhciBoPTA7Zm9yKHM9MDtzPG4ubGVuZ3RoO3MrPTMpe3ZhciBwPW5bc10qcjt2YXIgZj1uW3MrMV0qcjt2YXIgZD1uW3MrMl0qcjtoKz1NYXRoLmFicygoZVtwXS1lW2RdKSooZVtmKzFdLWVbcCsxXSktKGVbcF0tZVtmXSkqKGVbZCsxXS1lW3ArMV0pKX1yZXR1cm4gYT09PTAmJmg9PT0wPzA6TWF0aC5hYnMoKGgtYSkvYSl9O2Z1bmN0aW9uIEwoZSx0LHIsbil7dmFyIGk9MDtmb3IodmFyIG89dCxhPXItbjtvPHI7bys9bil7aSs9KGVbYV0tZVtvXSkqKGVbbysxXStlW2ErMV0pO2E9b31yZXR1cm4gaX1uLmZsYXR0ZW49ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXVswXS5sZW5ndGgscj17dmVydGljZXM6W10saG9sZXM6W10sZGltZW5zaW9uczp0fSxuPTA7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe2Zvcih2YXIgbz0wO288ZVtpXS5sZW5ndGg7bysrKXtmb3IodmFyIGE9MDthPHQ7YSsrKXIudmVydGljZXMucHVzaChlW2ldW29dW2FdKX1pZihpPjApe24rPWVbaS0xXS5sZW5ndGg7ci5ob2xlcy5wdXNoKG4pfX1yZXR1cm4gcn19LHt9XSw5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZShcImluZGl2aWR1YWwvb25lLXZlcnNpb25cIik7dmFyIGk9XCI3XCI7bihcImV2LXN0b3JlXCIsaSk7dmFyIG89XCJfX0VWX1NUT1JFX0tFWUBcIitpO3QuZXhwb3J0cz1hO2Z1bmN0aW9uIGEoZSl7dmFyIHQ9ZVtvXTtpZighdCl7dD1lW29dPXt9fXJldHVybiB0fX0se1wiaW5kaXZpZHVhbC9vbmUtdmVyc2lvblwiOjE5fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbD1lKFwiLi9yZXF1ZXN0XCIpO3ZhciBuPWUoXCIuL2J1aWxkUXVlcnlPYmplY3RcIik7dmFyIGk9QXJyYXkuaXNBcnJheTtmdW5jdGlvbiBoKGUsdCl7dmFyIHI7Zm9yKHIgaW4gdCl7ZVtyXT10W3JdfXJldHVybiBlfWZ1bmN0aW9uIG8oZSx0KXt0aGlzLl9qc29uZ1VybD1lO2lmKHR5cGVvZiB0PT09XCJudW1iZXJcIil7dmFyIHI9e3RpbWVvdXQ6dH07dD1yfXRoaXMuX2NvbmZpZz1oKHt0aW1lb3V0OjE1ZTMsaGVhZGVyczp7fX0sdHx8e30pfW8ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpvLGJ1aWxkUXVlcnlPYmplY3Q6bixnZXQ6ZnVuY3Rpb24gZSh0KXt2YXIgcj1cIkdFVFwiO3ZhciBuPXRoaXMuYnVpbGRRdWVyeU9iamVjdCh0aGlzLl9qc29uZ1VybCxyLHtwYXRoczp0LG1ldGhvZDpcImdldFwifSk7dmFyIGk9aChuLHRoaXMuX2NvbmZpZyk7dmFyIG89dGhpcztyZXR1cm4gbChyLGksbyl9LHNldDpmdW5jdGlvbiBlKHQpe3ZhciByPVwiUE9TVFwiO3ZhciBuPXRoaXMuYnVpbGRRdWVyeU9iamVjdCh0aGlzLl9qc29uZ1VybCxyLHtqc29uR3JhcGg6dCxtZXRob2Q6XCJzZXRcIn0pO3ZhciBpPWgobix0aGlzLl9jb25maWcpO2kuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiO3ZhciBvPXRoaXM7cmV0dXJuIGwocixpLG8pfSxjYWxsOmZ1bmN0aW9uIGUodCxyLG4saSl7cj1yfHxbXTtuPW58fFtdO2k9aXx8W107dmFyIG89XCJQT1NUXCI7dmFyIGE9W107YS5wdXNoKFwibWV0aG9kPWNhbGxcIik7YS5wdXNoKFwiY2FsbFBhdGg9XCIrZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHQpKSk7YS5wdXNoKFwiYXJndW1lbnRzPVwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShyKSkpO2EucHVzaChcInBhdGhTdWZmaXhlcz1cIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkobikpKTthLnB1c2goXCJwYXRocz1cIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoaSkpKTt2YXIgcz10aGlzLmJ1aWxkUXVlcnlPYmplY3QodGhpcy5fanNvbmdVcmwsbyxhLmpvaW4oXCImXCIpKTt2YXIgdT1oKHMsdGhpcy5fY29uZmlnKTt1LmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIjt2YXIgYz10aGlzO3JldHVybiBsKG8sdSxjKX19O28uWE1MSHR0cFNvdXJjZT1vO29bXCJkZWZhdWx0XCJdPW87dC5leHBvcnRzPW99LHtcIi4vYnVpbGRRdWVyeU9iamVjdFwiOjExLFwiLi9yZXF1ZXN0XCI6MTR9XSwxMTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1mdW5jdGlvbiBlKHQscixuKXt2YXIgaT1bXTt2YXIgbzt2YXIgYT17dXJsOnR9O3ZhciBzPXQuaW5kZXhPZihcIj9cIikhPT0tMTt2YXIgdT1zP1wiJlwiOlwiP1wiO2lmKHR5cGVvZiBuPT09XCJzdHJpbmdcIil7aS5wdXNoKG4pfWVsc2V7bz1PYmplY3Qua2V5cyhuKTtvLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9dHlwZW9mIG5bZV09PT1cIm9iamVjdFwiP0pTT04uc3RyaW5naWZ5KG5bZV0pOm5bZV07aS5wdXNoKGUrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKX0pfWlmKHI9PT1cIkdFVFwiKXthLnVybCs9dStpLmpvaW4oXCImXCIpfWVsc2V7YS5kYXRhPWkuam9pbihcIiZcIil9cmV0dXJuIGF9fSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uIGUoKXt2YXIgdD1uZXcgci5YTUxIdHRwUmVxdWVzdDtpZihcIndpdGhDcmVkZW50aWFsc1wiaW4gdCl7cmV0dXJuIHR9ZWxzZSBpZighIXIuWERvbWFpblJlcXVlc3Qpe3JldHVybiBuZXcgWERvbWFpblJlcXVlc3R9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyXCIpfX19KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp7fSl9LHt9XSwxMzpbZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbihpKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ZnVuY3Rpb24gZSgpe3ZhciB0LHIsbjtpZihpLlhNTEh0dHBSZXF1ZXN0KXtyZXR1cm4gbmV3IGkuWE1MSHR0cFJlcXVlc3R9ZWxzZXt0cnl7cj1bXCJNc3htbDIuWE1MSFRUUFwiLFwiTWljcm9zb2Z0LlhNTEhUVFBcIixcIk1zeG1sMi5YTUxIVFRQLjQuMFwiXTtmb3Iobj0wO248MztuKyspe3RyeXt0PXJbbl07aWYobmV3IGkuQWN0aXZlWE9iamVjdCh0KSl7YnJlYWt9fWNhdGNoKGUpe319cmV0dXJuIG5ldyBpLkFjdGl2ZVhPYmplY3QodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiWE1MSHR0cFJlcXVlc3QgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXJcIil9fX19KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp7fSl9LHt9XSwxNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBoPWUoXCIuL2dldFhNTEh0dHBSZXF1ZXN0XCIpO3ZhciBwPWUoXCIuL2dldENPUlNSZXF1ZXN0XCIpO3ZhciBmPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIGE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIG4oKXt9bi5jcmVhdGU9ZnVuY3Rpb24obyl7dmFyIGU9bmV3IG47ZS5zdWJzY3JpYmU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO3ZhciBpO2lmKHR5cGVvZiBlPT09XCJmdW5jdGlvblwiKXtuPXtvbk5leHQ6ZSxvbkVycm9yOnR8fGEsb25Db21wbGV0ZWQ6cnx8YX19ZWxzZXtuPWV9aT1vKG4pO2lmKHR5cGVvZiBpPT09XCJmdW5jdGlvblwiKXtyZXR1cm57ZGlzcG9zZTppfX1lbHNle3JldHVybiBpfX07cmV0dXJuIGV9O2Z1bmN0aW9uIGkodSxjLGwpe3JldHVybiBuLmNyZWF0ZShmdW5jdGlvbiBlKHIpe3ZhciB0PXttZXRob2Q6dXx8XCJHRVRcIixjcm9zc0RvbWFpbjpmYWxzZSxhc3luYzp0cnVlLGhlYWRlcnM6e30scmVzcG9uc2VUeXBlOlwianNvblwifTt2YXIgbixpLG8sYSxzO2ZvcihzIGluIGMpe2lmKGYuY2FsbChjLHMpKXt0W3NdPWNbc119fWlmKCF0LmNyb3NzRG9tYWluJiYhdC5oZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSl7dC5oZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCJ9aWYobC5vbkJlZm9yZVJlcXVlc3QhPW51bGwpe2wub25CZWZvcmVSZXF1ZXN0KHQpfXRyeXtuPXQuY3Jvc3NEb21haW4/cCgpOmgoKX1jYXRjaChlKXtyLm9uRXJyb3IoZSl9dHJ5e2lmKHQudXNlcil7bi5vcGVuKHQubWV0aG9kLHQudXJsLHQuYXN5bmMsdC51c2VyLHQucGFzc3dvcmQpfWVsc2V7bi5vcGVuKHQubWV0aG9kLHQudXJsLHQuYXN5bmMpfW4udGltZW91dD10LnRpbWVvdXQ7bi53aXRoQ3JlZGVudGlhbHM9dC53aXRoQ3JlZGVudGlhbHMhPT1mYWxzZTtvPXQuaGVhZGVycztmb3IoYSBpbiBvKXtpZihmLmNhbGwobyxhKSl7bi5zZXRSZXF1ZXN0SGVhZGVyKGEsb1thXSl9fWlmKHQucmVzcG9uc2VUeXBlKXt0cnl7bi5yZXNwb25zZVR5cGU9dC5yZXNwb25zZVR5cGV9Y2F0Y2goZSl7aWYodC5yZXNwb25zZVR5cGUhPT1cImpzb25cIil7dGhyb3cgZX19fW4ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uIGUodCl7aWYobi5yZWFkeVN0YXRlPT09NCl7aWYoIWkpe2k9dHJ1ZTtkKHIsbix0KX19fTtuLm9udGltZW91dD1mdW5jdGlvbiBlKHQpe2lmKCFpKXtpPXRydWU7dihyLG4sXCJ0aW1lb3V0IGVycm9yXCIsdCl9fTtuLnNlbmQodC5kYXRhKX1jYXRjaChlKXtyLm9uRXJyb3IoZSl9cmV0dXJuIGZ1bmN0aW9uIGUoKXtpZighaSYmbi5yZWFkeVN0YXRlIT09NCl7aT10cnVlO24uYWJvcnQoKX19fSl9ZnVuY3Rpb24gcyhlLHQscil7aWYoIXIpe3I9bmV3IEVycm9yKHQpfWUub25FcnJvcihyKX1mdW5jdGlvbiBkKGUsdCxyKXt2YXIgbixpLG87aWYodCYmZSl7bz10LnJlc3BvbnNlVHlwZTtuPVwicmVzcG9uc2VcImluIHQ/dC5yZXNwb25zZTp0LnJlc3BvbnNlVGV4dDt2YXIgYT10LnN0YXR1cz09PTEyMjM/MjA0OnQuc3RhdHVzO2lmKGE+PTIwMCYmYTw9Mzk5KXt0cnl7aWYobyE9PVwianNvblwiKXtuPUpTT04ucGFyc2Uobnx8XCJcIil9aWYodHlwZW9mIG49PT1cInN0cmluZ1wiKXtuPUpTT04ucGFyc2Uobnx8XCJcIil9fWNhdGNoKHIpe3MoZSxcImludmFsaWQganNvblwiLHIpfWUub25OZXh0KG4pO2Uub25Db21wbGV0ZWQoKTtyZXR1cm59ZWxzZSBpZihhPT09NDAxfHxhPT09NDAzfHxhPT09NDA3KXtyZXR1cm4gcyhlLG4pfWVsc2UgaWYoYT09PTQxMCl7cmV0dXJuIHMoZSxuKX1lbHNlIGlmKGE9PT00MDh8fGE9PT01MDQpe3JldHVybiBzKGUsbil9ZWxzZXtyZXR1cm4gcyhlLG58fFwiUmVzcG9uc2UgY29kZSBcIithKX19fWZ1bmN0aW9uIHYoZSx0LHIsbil7cyhlLHJ8fHQuc3RhdHVzVGV4dHx8XCJyZXF1ZXN0IGVycm9yXCIsbil9dC5leHBvcnRzPWl9LHtcIi4vZ2V0Q09SU1JlcXVlc3RcIjoxMixcIi4vZ2V0WE1MSHR0cFJlcXVlc3RcIjoxM31dLDE1OltmdW5jdGlvbihoLHIsaSl7KGZ1bmN0aW9uKG4peyFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgaSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHIpci5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG8mJm8uYW1kKW8oW10sZSk7ZWxzZXt2YXIgdDt0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBuP246XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuZmFsY29yPWUoKX19KGZ1bmN0aW9uKCl7dmFyIElyO3JldHVybiBmdW5jdGlvbiBvKGEscyx1KXtmdW5jdGlvbiBjKHIsZSl7aWYoIXNbcl0pe2lmKCFhW3JdKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBoJiZoO2lmKCFlJiZ0KXJldHVybiB0KHIsITApO2lmKGwpcmV0dXJuIGwociwhMCk7dmFyIG49bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIityK1wiJ1wiKTt0aHJvdyBuLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsbn12YXIgaT1zW3JdPXtleHBvcnRzOnt9fTthW3JdWzBdLmNhbGwoaS5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciB0PWFbcl1bMV1bZV07cmV0dXJuIGModD90OmUpfSxpLGkuZXhwb3J0cyxvLGEscyx1KX1yZXR1cm4gc1tyXS5leHBvcnRzfWZvcih2YXIgbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBoJiZoLGU9MDtlPHUubGVuZ3RoO2UrKyljKHVbZV0pO3JldHVybiBjfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoMzIpLGk9ZSgxMzApO24uYXRvbT1pLmF0b20sbi5yZWY9aS5yZWYsbi5lcnJvcj1pLmVycm9yLG4ucGF0aFZhbHVlPWkucGF0aFZhbHVlLG4uSHR0cERhdGFTb3VyY2U9ZSgxMjUpLHQuZXhwb3J0cz1ufSx7MTI1OjEyNSwxMzA6MTMwLDMyOjMyfV0sMjpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGkoZSl7dmFyIHQ9ZXx8e307dGhpcy5fcm9vdD10Ll9yb290fHxuZXcgbih0KSx0aGlzLl9wYXRoPXQucGF0aHx8dC5fcGF0aHx8W10sdGhpcy5fc2NoZWR1bGVyPXQuc2NoZWR1bGVyfHx0Ll9zY2hlZHVsZXJ8fG5ldyBmLHRoaXMuX3NvdXJjZT10LnNvdXJjZXx8dC5fc291cmNlLHRoaXMuX3JlcXVlc3Q9dC5yZXF1ZXN0fHx0Ll9yZXF1ZXN0fHxuZXcgYSh0aGlzLHRoaXMuX3NjaGVkdWxlciksdGhpcy5fSUQ9RSsrLFwibnVtYmVyXCI9PXR5cGVvZiB0Lm1heFNpemU/dGhpcy5fbWF4U2l6ZT10Lm1heFNpemU6dGhpcy5fbWF4U2l6ZT10Ll9tYXhTaXplfHxpLnByb3RvdHlwZS5fbWF4U2l6ZSxcIm51bWJlclwiPT10eXBlb2YgdC5jb2xsZWN0UmF0aW8/dGhpcy5fY29sbGVjdFJhdGlvPXQuY29sbGVjdFJhdGlvOnRoaXMuX2NvbGxlY3RSYXRpbz10Ll9jb2xsZWN0UmF0aW98fGkucHJvdG90eXBlLl9jb2xsZWN0UmF0aW8sKHQuYm94ZWR8fHQuaGFzT3duUHJvcGVydHkoXCJfYm94ZWRcIikpJiYodGhpcy5fYm94ZWQ9dC5ib3hlZHx8dC5fYm94ZWQpLCh0Lm1hdGVyaWFsaXplZHx8dC5oYXNPd25Qcm9wZXJ0eShcIl9tYXRlcmlhbGl6ZWRcIikpJiYodGhpcy5fbWF0ZXJpYWxpemVkPXQubWF0ZXJpYWxpemVkfHx0Ll9tYXRlcmlhbGl6ZWQpLFwiYm9vbGVhblwiPT10eXBlb2YgdC50cmVhdEVycm9yc0FzVmFsdWVzP3RoaXMuX3RyZWF0RXJyb3JzQXNWYWx1ZXM9dC50cmVhdEVycm9yc0FzVmFsdWVzOnQuaGFzT3duUHJvcGVydHkoXCJfdHJlYXRFcnJvcnNBc1ZhbHVlc1wiKSYmKHRoaXMuX3RyZWF0RXJyb3JzQXNWYWx1ZXM9dC5fdHJlYXRFcnJvcnNBc1ZhbHVlcyksdC5jYWNoZSYmdGhpcy5zZXRDYWNoZSh0LmNhY2hlKX12YXIgbj1lKDQpLG89ZSgzKSxhPWUoNTUpLHM9ZSg2NCksdT1lKDY1KSxjPWUoNjEpLGw9ZSg2MyksaD1lKDczKSxwPWUoNzUpLGY9ZSg3NCksZD1lKDgxKSx2PWUoODQpLG09ZSg0OSksZz1lKDEzNCksXz1lKDg4KSx5PWUoMTAwKSxiPWUoOTYpLHg9ZSgxMDIpLHc9ZSg5OCksUz1lKDk5KSxNPWUoNzcpLEM9ZSg3NiksVD1lKDEzMCksRT0wLE89ZSgxMTYpLFA9ZnVuY3Rpb24oKXt9LEE9ZSgxNCksaj1lKDE5KSxSPXtwYXRoVmFsdWU6ITAscGF0aFN5bnRheDohMCxqc29uOiEwLGpzb25HcmFwaDohMH0saz1lKDcyKTt0LmV4cG9ydHM9aSxpLnJlZj1ULnJlZixpLmF0b209VC5hdG9tLGkuZXJyb3I9VC5lcnJvcixpLnBhdGhWYWx1ZT1ULnBhdGhWYWx1ZSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLGkucHJvdG90eXBlLl9tYXRlcmlhbGl6ZWQ9ITEsaS5wcm90b3R5cGUuX2JveGVkPSExLGkucHJvdG90eXBlLl9wcm9ncmVzc2l2ZT0hMSxpLnByb3RvdHlwZS5fdHJlYXRFcnJvcnNBc1ZhbHVlcz0hMSxpLnByb3RvdHlwZS5fbWF4U2l6ZT1NYXRoLnBvdygyLDUzKS0xLGkucHJvdG90eXBlLl9jb2xsZWN0UmF0aW89Ljc1LGkucHJvdG90eXBlLmdldD1lKDcxKSxpLnByb3RvdHlwZS5fZ2V0V2l0aFBhdGhzPWUoNzApLGkucHJvdG90eXBlLnNldD1mdW5jdGlvbigpe3ZhciB0PU8oYXJndW1lbnRzLFIsXCJzZXRcIik7cmV0dXJuIHQhPT0hMD9uZXcgcyhmdW5jdGlvbihlKXtlLm9uRXJyb3IodCl9KTp0aGlzLl9zZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLnByb3RvdHlwZS5wcmVsb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9Tyhhcmd1bWVudHMsayxcInByZWxvYWRcIik7aWYodCE9PSEwKXJldHVybiBuZXcgcyhmdW5jdGlvbihlKXtlLm9uRXJyb3IodCl9KTt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHI9dGhpcztyZXR1cm4gbmV3IHMoZnVuY3Rpb24odCl7cmV0dXJuIHIuZ2V0LmFwcGx5KHIsZSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7dC5vbkNvbXBsZXRlZCgpfSl9KX0saS5wcm90b3R5cGUuX3NldD1mdW5jdGlvbigpe3ZhciBlLHQ9LTEscj1hcmd1bWVudHMubGVuZ3RoLG49YXJndW1lbnRzW3ItMV07Zm9yKGIobik/ci09MTpuPXZvaWQgMCxlPW5ldyBBcnJheShyKTsrK3Q8cjspZVt0XT1hcmd1bWVudHNbdF07cmV0dXJuIHUuY3JlYXRlKHRoaXMsZSxuKX0saS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbigpe3ZhciBlLHQ9LTEscj1hcmd1bWVudHMubGVuZ3RoO2ZvcihlPW5ldyBBcnJheShyKTsrK3Q8cjspe3ZhciBuPWFyZ3VtZW50c1t0XTtlW3RdPW47dmFyIGk9dHlwZW9mIG47aWYodD4xJiYhQXJyYXkuaXNBcnJheShuKXx8MD09PXQmJiFBcnJheS5pc0FycmF5KG4pJiZcInN0cmluZ1wiIT09aXx8MT09PXQmJiFBcnJheS5pc0FycmF5KG4pJiYheChuKSlyZXR1cm4gbmV3IHMoZnVuY3Rpb24oZSl7ZS5vbkVycm9yKG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRcIikpfSl9cmV0dXJuIGMuY3JlYXRlKHRoaXMsZSl9LGkucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PS0xLHI9YXJndW1lbnRzLmxlbmd0aCxuPWFyZ3VtZW50c1tyLTFdO2ZvcihlPW5ldyBBcnJheShyKTsrK3Q8cjspaWYoZVt0XT1nLmZyb21QYXRoKGFyZ3VtZW50c1t0XSksXCJvYmplY3RcIiE9dHlwZW9mIGVbdF0pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudFwiKTtsLmNyZWF0ZSh0aGlzLGUsbikuc3Vic2NyaWJlKFAsZnVuY3Rpb24oZSl7dGhyb3cgZX0pfSxpLnByb3RvdHlwZS5kZXJlZj1lKDUpLGkucHJvdG90eXBlLmdldFZhbHVlPWUoMTYpLGkucHJvdG90eXBlLnNldFZhbHVlPWUoNzkpLGkucHJvdG90eXBlLl9nZXRWYWx1ZVN5bmM9ZSgyNCksaS5wcm90b3R5cGUuX3NldFZhbHVlU3luYz1lKDgwKSxpLnByb3RvdHlwZS5fZGVyZWZTeW5jPWUoNiksaS5wcm90b3R5cGUuc2V0Q2FjaGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcm9vdC5jYWNoZTtpZihlIT09dCl7dmFyIHI9dGhpcy5fcm9vdCxuPXRoaXMuX3BhdGg7dGhpcy5fcGF0aD1bXSx0aGlzLl9yb290LmNhY2hlPXt9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZtKHIsci5leHBpcmVkLF8odCksMCksUyhlKT9DKHRoaXMsW2VdKTp3KGUpP00odGhpcyxbZV0pOnkoZSkmJk0odGhpcyxbe2pzb246ZX1dKSx0aGlzLl9wYXRoPW59ZWxzZVwidW5kZWZpbmVkXCI9PXR5cGVvZiB0JiYodGhpcy5fcm9vdC5jYWNoZT17fSk7cmV0dXJuIHRoaXN9LGkucHJvdG90eXBlLmdldENhY2hlPWZ1bmN0aW9uKCl7dmFyIGU9dihhcmd1bWVudHMpO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gQSh0aGlzLl9yb290LmNhY2hlKTt2YXIgdD1be31dLHI9dGhpcy5fcGF0aDtyZXR1cm4gai5nZXRXaXRoUGF0aHNBc0pTT05HcmFwaCh0aGlzLGUsdCksdGhpcy5fcGF0aD1yLHRbMF0uanNvbkdyYXBofSxpLnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmcuZnJvbVBhdGgoZSl8fFtdO2lmKEFycmF5LmlzQXJyYXkodCk9PT0hMSl0aHJvdyBuZXcgRXJyb3IoXCJNb2RlbCNnZXRWZXJzaW9uIG11c3QgYmUgY2FsbGVkIHdpdGggYW4gQXJyYXkgcGF0aC5cIik7cmV0dXJuIHRoaXMuX3BhdGgubGVuZ3RoJiYodD10aGlzLl9wYXRoLmNvbmNhdCh0KSksdGhpcy5fZ2V0VmVyc2lvbih0aGlzLHQpfSxpLnByb3RvdHlwZS5fc3luY0NoZWNrPWZ1bmN0aW9uKGUpe2lmKEJvb2xlYW4odGhpcy5fc291cmNlKSYmdGhpcy5fcm9vdC5zeW5jUmVmQ291bnQ8PTAmJnRoaXMuX3Jvb3QudW5zYWZlTW9kZT09PSExKXRocm93IG5ldyBFcnJvcihcIk1vZGVsI1wiK2UrXCIgbWF5IG9ubHkgYmUgY2FsbGVkIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhIHJlcXVlc3Qgc2VsZWN0b3IuXCIpO3JldHVybiEwfSxpLnByb3RvdHlwZS5fY2xvbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGkodGhpcyk7Zm9yKHZhciByIGluIGUpe3ZhciBuPWVbcl07XCJkZWxldGVcIj09PW4/ZGVsZXRlIHRbcl06dFtyXT1ufXJldHVybiB0LnNldENhY2hlPXZvaWQgMCx0fSxpLnByb3RvdHlwZS5iYXRjaD1mdW5jdGlvbihlKXt2YXIgdD1lO1wibnVtYmVyXCI9PXR5cGVvZiB0P3Q9bmV3IHAoTWF0aC5yb3VuZChNYXRoLmFicyh0KSkpOnQmJnQuc2NoZWR1bGV8fCh0PW5ldyBoKTt2YXIgcj10aGlzLl9jbG9uZSgpO3JldHVybiByLl9yZXF1ZXN0PW5ldyBhKHIsdCkscn0saS5wcm90b3R5cGUudW5iYXRjaD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2Nsb25lKCk7cmV0dXJuIGUuX3JlcXVlc3Q9bmV3IGEoZSxuZXcgZiksZX0saS5wcm90b3R5cGUudHJlYXRFcnJvcnNBc1ZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9uZSh7X3RyZWF0RXJyb3JzQXNWYWx1ZXM6ITB9KX0saS5wcm90b3R5cGUuYXNEYXRhU291cmNlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvKHRoaXMpfSxpLnByb3RvdHlwZS5fbWF0ZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvbmUoe19tYXRlcmlhbGl6ZWQ6ITB9KX0saS5wcm90b3R5cGUuX2RlbWF0ZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvbmUoe19tYXRlcmlhbGl6ZWQ6XCJkZWxldGVcIn0pfSxpLnByb3RvdHlwZS5ib3hWYWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvbmUoe19ib3hlZDohMH0pfSxpLnByb3RvdHlwZS51bmJveFZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9uZSh7X2JveGVkOlwiZGVsZXRlXCJ9KX0saS5wcm90b3R5cGUud2l0aG91dERhdGFTb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvbmUoe19zb3VyY2U6XCJkZWxldGVcIn0pfSxpLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57JHR5cGU6XCJyZWZcIix2YWx1ZTp0aGlzLl9wYXRofX0saS5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuX3BhdGgpfSxpLnByb3RvdHlwZS5fZ2V0Qm91bmRWYWx1ZT1lKDEzKSxpLnByb3RvdHlwZS5fZ2V0VmVyc2lvbj1lKDE4KSxpLnByb3RvdHlwZS5fZ2V0VmFsdWVTeW5jPWUoMTcpLGkucHJvdG90eXBlLl9nZXRQYXRoVmFsdWVzQXNQYXRoTWFwPWouZ2V0V2l0aFBhdGhzQXNQYXRoTWFwLGkucHJvdG90eXBlLl9nZXRQYXRoVmFsdWVzQXNKU09ORz1qLmdldFdpdGhQYXRoc0FzSlNPTkdyYXBoLGkucHJvdG90eXBlLl9zZXRQYXRoVmFsdWVzQXNKU09OPWUoNzgpLGkucHJvdG90eXBlLl9zZXRQYXRoVmFsdWVzQXNKU09ORz1lKDc4KSxpLnByb3RvdHlwZS5fc2V0UGF0aFZhbHVlc0FzUGF0aE1hcD1lKDc4KSxpLnByb3RvdHlwZS5fc2V0UGF0aFZhbHVlc0FzVmFsdWVzPWUoNzgpLGkucHJvdG90eXBlLl9zZXRQYXRoTWFwc0FzSlNPTj1lKDc3KSxpLnByb3RvdHlwZS5fc2V0UGF0aE1hcHNBc0pTT05HPWUoNzcpLGkucHJvdG90eXBlLl9zZXRQYXRoTWFwc0FzUGF0aE1hcD1lKDc3KSxpLnByb3RvdHlwZS5fc2V0UGF0aE1hcHNBc1ZhbHVlcz1lKDc3KSxpLnByb3RvdHlwZS5fc2V0SlNPTkdzQXNKU09OPWUoNzYpLGkucHJvdG90eXBlLl9zZXRKU09OR3NBc0pTT05HPWUoNzYpLGkucHJvdG90eXBlLl9zZXRKU09OR3NBc1BhdGhNYXA9ZSg3NiksaS5wcm90b3R5cGUuX3NldEpTT05Hc0FzVmFsdWVzPWUoNzYpLGkucHJvdG90eXBlLl9zZXRDYWNoZT1lKDc3KSxpLnByb3RvdHlwZS5faW52YWxpZGF0ZVBhdGhWYWx1ZXNBc0pTT049ZSg0OCksaS5wcm90b3R5cGUuX2ludmFsaWRhdGVQYXRoTWFwc0FzSlNPTj1lKDQ3KX0sezEwMDoxMDAsMTAyOjEwMiwxMTY6MTE2LDEzOjEzLDEzMDoxMzAsMTM0OjEzNCwxNDoxNCwxNjoxNiwxNzoxNywxODoxOCwxOToxOSwyNDoyNCwzOjMsNDo0LDQ3OjQ3LDQ4OjQ4LDQ5OjQ5LDU6NSw1NTo1NSw2OjYsNjE6NjEsNjM6NjMsNjQ6NjQsNjU6NjUsNzA6NzAsNzE6NzEsNzI6NzIsNzM6NzMsNzQ6NzQsNzU6NzUsNzY6NzYsNzc6NzcsNzg6NzgsNzk6NzksODA6ODAsODE6ODEsODQ6ODQsODg6ODgsOTY6OTYsOTg6OTgsOTk6OTl9XSwzOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbihlKXt0aGlzLl9tb2RlbD1lLl9tYXRlcmlhbGl6ZSgpLnRyZWF0RXJyb3JzQXNWYWx1ZXMoKX1uLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZGVsLmdldC5hcHBseSh0aGlzLl9tb2RlbCxlKS5fdG9KU09ORygpfSxuLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZGVsLnNldChlKS5fdG9KU09ORygpfSxuLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPVtlLHQscl0uY29uY2F0KG4pO3JldHVybiB0aGlzLl9tb2RlbC5jYWxsLmFwcGx5KHRoaXMuX21vZGVsLGkpLl90b0pTT05HKCl9LHQuZXhwb3J0cz1ufSx7fV0sNDpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9ZXx8e307dGhpcy5zeW5jUmVmQ291bnQ9MCx0aGlzLmV4cGlyZWQ9dC5leHBpcmVkfHxbXSx0aGlzLnVuc2FmZU1vZGU9dC51bnNhZmVNb2RlfHwhMSx0aGlzLmNvbGxlY3Rpb25TY2hlZHVsZXI9dC5jb2xsZWN0aW9uU2NoZWR1bGVyfHxuZXcgYSx0aGlzLmNhY2hlPXt9LGkodC5jb21wYXJhdG9yKSYmKHRoaXMuY29tcGFyYXRvcj10LmNvbXBhcmF0b3IpLGkodC5lcnJvclNlbGVjdG9yKSYmKHRoaXMuZXJyb3JTZWxlY3Rvcj10LmVycm9yU2VsZWN0b3IpLGkodC5vbkNoYW5nZSkmJih0aGlzLm9uQ2hhbmdlPXQub25DaGFuZ2UpfXZhciBpPWUoOTYpLG89ZSg5MSksYT1lKDc0KTtuLnByb3RvdHlwZS5lcnJvclNlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9LG4ucHJvdG90eXBlLmNvbXBhcmF0b3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyhlLFwidmFsdWVcIikmJm8odCxcInZhbHVlXCIpP2UudmFsdWU9PT10LnZhbHVlJiZlLiR0eXBlPT09dC4kdHlwZSYmZS4kZXhwaXJlcz09PXQuJGV4cGlyZXM6ZT09PXR9LHQuZXhwb3J0cz1ufSx7NzQ6NzQsOTE6OTEsOTY6OTZ9XSw1OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gcyhlLHQpe3ZhciByLG49ITE7dHJ5eysrZS5fcm9vdC5zeW5jUmVmQ291bnQscj1lLl9kZXJlZlN5bmModCl9Y2F0Y2goZSl7cj1lLG49ITB9ZmluYWxseXstLWUuX3Jvb3Quc3luY1JlZkNvdW50fXJldHVybiBuP3UuT2JzZXJ2YWJsZVtcInRocm93XCJdKHIpOnUuT2JzZXJ2YWJsZVtcInJldHVyblwiXShyKX12YXIgdT1lKDE1OSksYz1lKDEzNCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10aGlzLHQ9LTEsaT1hcmd1bWVudHMubGVuZ3RoLTEsbz1uZXcgQXJyYXkoaSksYT1jLmZyb21QYXRoKGUpOysrdDxpOylvW3RdPWMuZnJvbVBhdGgoYXJndW1lbnRzW3QrMV0pO2lmKDA9PT1pKXRocm93IG5ldyBFcnJvcihcIk1vZGVsI2RlcmVmIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSB2YWx1ZSBwYXRoLlwiKTtyZXR1cm4gdS5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uKCl7cmV0dXJuIHMobixhKX0pLmZsYXRNYXAoZnVuY3Rpb24oZSl7aWYoQm9vbGVhbihlKSl7aWYoaT4wKXt2YXIgdD11Lk9ic2VydmFibGUub2YoZSk7cmV0dXJuIGUuZ2V0LmFwcGx5KGUsbylbXCJjYXRjaFwiXSh1Lk9ic2VydmFibGUuZW1wdHkoKSkuY29uY2F0KHQpLmxhc3QoKS5mbGF0TWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHMobixhKX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pfXJldHVybiB1Lk9ic2VydmFibGVbXCJyZXR1cm5cIl0oZSl9aWYoaT4wKXt2YXIgcj1vLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gYS5jb25jYXQoZSl9KTtyZXR1cm4gbi5nZXQuYXBwbHkobixyKS5jb25jYXQodS5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uKCl7cmV0dXJuIHMobixhKX0pKS5sYXN0KCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlfSl9cmV0dXJuIHUuT2JzZXJ2YWJsZS5lbXB0eSgpfSl9fSx7MTM0OjEzNCwxNTk6MTU5fV0sNjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUoMTM0KSxzPWUoMTMpLHU9ZSg4KSxjPWUoMTE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9YS5mcm9tUGF0aChlKTtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJNb2RlbCNkZXJlZlN5bmMgbXVzdCBiZSBjYWxsZWQgd2l0aCBhbiBBcnJheSBwYXRoLlwiKTt2YXIgcj1zKHRoaXMsdGhpcy5fcGF0aC5jb25jYXQodCksITEpLG49ci5wYXRoLGk9ci52YWx1ZSxvPXIuZm91bmQ7aWYobyYmdm9pZCAwIT09aSYmKGkuJHR5cGUhPT1jfHx2b2lkIDAhPT1pLnZhbHVlKSl7aWYoaS4kdHlwZSl0aHJvdyBuZXcgdTtyZXR1cm4gdGhpcy5fY2xvbmUoe19wYXRoOm59KX19fSx7MTE4OjExOCwxMzoxMywxMzQ6MTM0LDg6OH1dLDc6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKCl7dGhpcy5tZXNzYWdlPW4ubWVzc2FnZSx0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfW4ucHJvdG90eXBlPW5ldyBFcnJvcixuLnByb3RvdHlwZS5uYW1lPVwiQm91bmRKU09OR3JhcGhNb2RlbEVycm9yXCIsbi5tZXNzYWdlPVwiSXQgaXMgbm90IGxlZ2FsIHRvIHVzZSB0aGUgSlNPTiBHcmFwaCBmb3JtYXQgZnJvbSBhIGJvdW5kIE1vZGVsLiBKU09OIEdyYXBoIGZvcm1hdCBjYW4gb25seSBiZSB1c2VkIGZyb20gYSByb290IG1vZGVsLlwiLHQuZXhwb3J0cz1ufSx7fV0sODpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSx0KXt0aGlzLm1lc3NhZ2U9byx0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrLHRoaXMuYm91bmRQYXRoPWUsdGhpcy5zaG9ydGVkUGF0aD10fXZhciBpPVwiSW52YWxpZE1vZGVsRXJyb3JcIixvPVwiVGhlIGJvdW5kUGF0aCBvZiB0aGUgbW9kZWwgaXMgbm90IHZhbGlkIHNpbmNlIGEgdmFsdWUgb3IgZXJyb3Igd2FzIGZvdW5kIGJlZm9yZSB0aGUgcGF0aCBlbmQuXCI7bi5wcm90b3R5cGU9bmV3IEVycm9yLG4ucHJvdG90eXBlLm5hbWU9aSxuLm1lc3NhZ2U9byx0LmV4cG9ydHM9bn0se31dLDk6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKGUpe3RoaXMubWVzc2FnZT1cIkFuIGV4Y2VwdGlvbiB3YXMgdGhyb3duIHdoZW4gbWFraW5nIGEgcmVxdWVzdC5cIix0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrLHRoaXMuaW5uZXJFcnJvcj1lfXZhciBpPVwiSW52YWxpZFNvdXJjZUVycm9yXCI7bi5wcm90b3R5cGU9bmV3IEVycm9yLG4ucHJvdG90eXBlLm5hbWU9aSxuLmlzPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm5hbWU9PT1pfSx0LmV4cG9ydHM9bn0se31dLDEwOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe3RoaXMubWVzc2FnZT1cIlRoZSBhbGxvd2VkIG51bWJlciBvZiByZXRyaWVzIGhhdmUgYmVlbiBleGNlZWRlZC5cIix0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfXZhciBpPVwiTWF4UmV0cnlFeGNlZWRlZEVycm9yXCI7bi5wcm90b3R5cGU9bmV3IEVycm9yLG4ucHJvdG90eXBlLm5hbWU9aSxuLmlzPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm5hbWU9PT1pfSx0LmV4cG9ydHM9bn0se31dLDExOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbihlLHQscixuLGksbyxhKXtmb3IodmFyIHMsdSxjPXIsbD1pLGg9bixwPTA7Oyl7aWYoMD09PXAmJmhbeF0/KHA9bC5sZW5ndGgsdT1oW3hdKToocz1sW3ArK10sdT1jW3NdKSx1KXt2YXIgZj11LiR0eXBlLGQ9ZiYmdS52YWx1ZXx8dTtpZihwPGwubGVuZ3RoKXtpZihmKXtjPXU7YnJlYWt9Yz11O2NvbnRpbnVlfWlmKGM9dSxmJiZ5KHUpKWJyZWFrO2lmKGhbeF18fGcoaCx1KSxmPT09Yil7YT9fKGUsdSxvLG51bGwsbnVsbCxudWxsLGwsbC5sZW5ndGgsYSk6dyhlLHUpLHA9MCxsPWQsaD11LGM9dDtjb250aW51ZX1icmVha31jPXZvaWQgMDticmVha31pZihwPGwubGVuZ3RoJiZ2b2lkIDAhPT1jKXtmb3IodmFyIHY9W10sbT0wO3A+bTttKyspdlttXT1sW21dO2w9dn1yZXR1cm5bYyxsXX12YXIgaT1lKDI2KSxnPWkuY3JlYXRlLF89ZSgyMikseT1lKDI3KSxiPWUoMTIwKSx4PWUoMzMpLHc9ZSgyOSkucHJvbW90ZTt0LmV4cG9ydHM9bn0sezEyMDoxMjAsMjI6MjIsMjY6MjYsMjc6MjcsMjk6MjksMzM6MzN9XSwxMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciB2PWUoMTUpLG09ZSg4KSxnPWUoNyk7dC5leHBvcnRzPWZ1bmN0aW9uKGYsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYT1yWzBdLHM9e3ZhbHVlczpyLG9wdGltaXplZFBhdGhzOltdfSx1PWUuX3Jvb3QuY2FjaGUsYz1lLl9wYXRoLGw9dSxoPWMubGVuZ3RoLHA9W107aWYoaCl7aWYoZClyZXR1cm57Y3JpdGljYWxFcnJvcjpuZXcgZ307aWYobD12KGUsYyksbC4kdHlwZSlyZXR1cm57Y3JpdGljYWxFcnJvcjpuZXcgbShjLGMpfTtmb3Iobj1bXSxpPTA7aD5pOysraSluW2ldPWNbaV19ZWxzZSBuPVtdLGg9MDtmb3IoaT0wLG89dC5sZW5ndGg7bz5pO2krKylmKGUsdSxsLHRbaV0sMCxhLHMscCxuLGgsZCk7cmV0dXJuIHN9fX0sezE1OjE1LDc6Nyw4Ojh9XSwxMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBsPWUoMTcpLGg9ZSg4KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbyxhLHMsdT10LGM9dDtmb3Iobj1lLl9ib3hlZCxyPWUuX21hdGVyaWFsaXplZCxpPWUuX3RyZWF0RXJyb3JzQXNWYWx1ZXMsZS5fYm94ZWQ9ITAsZS5fbWF0ZXJpYWxpemVkPXZvaWQgMD09PXJ8fHIsZS5fdHJlYXRFcnJvcnNBc1ZhbHVlcz0hMCxvPWwoZSx1LmNvbmNhdChudWxsKSwhMCksZS5fYm94ZWQ9bixlLl9tYXRlcmlhbGl6ZWQ9cixlLl90cmVhdEVycm9yc0FzVmFsdWVzPWksdT1vLm9wdGltaXplZFBhdGgsYT1vLnNob3J0ZWQscz1vLmZvdW5kLG89by52YWx1ZTt1Lmxlbmd0aCYmbnVsbD09PXVbdS5sZW5ndGgtMV07KXUucG9wKCk7aWYocyYmYSl0aHJvdyBuZXcgaChjLHUpO3JldHVybntwYXRoOnUsdmFsdWU6byxzaG9ydGVkOmEsZm91bmQ6c319fSx7MTc6MTcsODo4fV0sMTQ6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiB1KGUpe3ZhciB0LHIsbixpPXt9LG89T2JqZWN0LmtleXMoZSk7Zm9yKHI9MCxuPW8ubGVuZ3RoO24+cjtyKyspdD1vW3JdLGgodCl8fChpW3RdPWVbdF0pO3JldHVybiBpfWZ1bmN0aW9uIGMoYSxzLGUpe09iamVjdC5rZXlzKGEpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4haChlKSYmYVtlXX0pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9YVtlXSxyPXNbZV07aWYocnx8KHI9c1tlXT17fSksdC4kdHlwZSl7dmFyIG4saT10LnZhbHVlJiZcIm9iamVjdFwiPT10eXBlb2YgdC52YWx1ZSxvPSFhW2xdO3JldHVybiBuPWl8fG8/dSh0KTp0LnZhbHVlLHZvaWQoc1tlXT1uKX1jKHQscixlKX0pfXZhciBsPWUoMzcpLGg9ZSg5Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBjKGUsdCksdH19LHszNzozNyw5Nzo5N31dLDE1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUuX3Jvb3QuY2FjaGUsbj0tMSxpPXQubGVuZ3RoOysrbjxpJiZyJiYhci4kdHlwZTspcj1yW3Rbbl1dO3JldHVybiByfX0se31dLDE2OltmdW5jdGlvbihlLHQscil7dmFyIGk9ZSg2NCksYT1lKDEzNCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbz1hLmZyb21QYXRoKGUpLHQ9MCxyPW8ubGVuZ3RoOysrdDxyOylpZihcIm9iamVjdFwiPT10eXBlb2Ygb1t0XSlyZXR1cm4gbmV3IGkoZnVuY3Rpb24oZSl7ZS5vbkVycm9yKG5ldyBFcnJvcihcIlBhdGhzIG11c3QgYmUgc2ltcGxlIHBhdGhzXCIpKX0pO3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpKGZ1bmN0aW9uKGkpe3JldHVybiBuLmdldChvKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuanNvbixyPS0xLG49by5sZW5ndGg7dCYmKytyPG47KXQ9dFtvW3JdXTtpLm9uTmV4dCh0KX0sZnVuY3Rpb24oZSl7aS5vbkVycm9yKGUpfSxmdW5jdGlvbigpe2kub25Db21wbGV0ZWQoKX0pfSl9fSx7MTM0OjEzNCw2NDo2NH1dLDE3OltmdW5jdGlvbihlLHQscil7dmFyIHk9ZSgxMSksYj1lKDI1KSx4PWUoMjcpLHc9ZSgyOSkucHJvbW90ZSxTPWUoMTIwKSxNPWUoMTE4KSxDPWUoMTE5KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbixpLG8sYSxzLHU9ZS5fcm9vdC5jYWNoZSxjPXQubGVuZ3RoLGw9W10saD0hMSxwPSExLGY9MCxkPXUsdj11LG09dSxnPSEwLF89ITE7ZCYmYz5mOyl7aWYobj10W2YrK10sbnVsbCE9PW4mJihkPXZbbl0sbFtsLmxlbmd0aF09biksIWQpe209dm9pZCAwLGg9ITAsZz0hMTticmVha31pZihvPWQuJHR5cGUsbz09PU0mJnZvaWQgMD09PWQudmFsdWUpe209dm9pZCAwLGc9ITEsaD1jPmY7YnJlYWt9aWYoYz5mKXtpZihvPT09Uyl7aWYoeChkKSl7Xz0hMCxtPXZvaWQgMCxnPSExO2JyZWFrfWlmKGE9eShlLHUsdSxkLGQudmFsdWUpLHM9YVswXSwhcyl7bT12b2lkIDAsZD12b2lkIDAsZz0hMTticmVha31vPXMuJHR5cGUsZD1zLGw9YVsxXS5zbGljZSgwKX1pZihvKWJyZWFrfWVsc2UgbT1kO3Y9ZH1pZihjPmYmJiFfKXtmb3IoaT1mO2M+aTsrK2kpaWYobnVsbCE9PXRbZl0pe3A9ITA7YnJlYWt9Zm9yKHA/KGg9ITAsbT12b2lkIDApOm09ZCxpPWY7Yz5pOysraSludWxsIT09dFtpXSYmKGxbbC5sZW5ndGhdPXRbaV0pfWlmKG0mJm8mJih4KG0pP209dm9pZCAwOncoZSxtKSksbSYmbz09PUMmJiFlLl90cmVhdEVycm9yc0FzVmFsdWVzKXRocm93e3BhdGg6Zj09PWM/dDp0LnNsaWNlKDAsZiksdmFsdWU6bS52YWx1ZX07cmV0dXJuIG0mJmUuX2JveGVkP209Qm9vbGVhbihvKSYmIXI/YihtKTptOiFtJiZlLl9tYXRlcmlhbGl6ZWQ/bT17JHR5cGU6TX06bSYmKG09bS52YWx1ZSkse3ZhbHVlOm0sc2hvcnRlZDpoLG9wdGltaXplZFBhdGg6bCxmb3VuZDpnfX19LHsxMToxMSwxMTg6MTE4LDExOToxMTksMTIwOjEyMCwyNToyNSwyNzoyNywyOToyOX1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIGk9ZSg0Nik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5fZ2V0VmFsdWVTeW5jKHtfYm94ZWQ6ITAsX3Jvb3Q6ZS5fcm9vdCxfdHJlYXRFcnJvcnNBc1ZhbHVlczplLl90cmVhdEVycm9yc0FzVmFsdWVzfSx0LCEwKS52YWx1ZSxuPXImJnJbaV07cmV0dXJuIG51bGw9PW4/LTE6bn19LHs0Njo0Nn1dLDE5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgxMiksaT1lKDMxKSxvPW4oaSwhMSksYT1uKGksITApO3QuZXhwb3J0cz17Z2V0VmFsdWVTeW5jOmUoMTcpLGdldEJvdW5kVmFsdWU6ZSgxMyksZ2V0V2l0aFBhdGhzQXNQYXRoTWFwOm8sZ2V0V2l0aFBhdGhzQXNKU09OR3JhcGg6YX19LHsxMjoxMiwxMzoxMywxNzoxNywzMTozMX1dLDIwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgyOSksYT1lKDI1KSxzPW4ucHJvbW90ZTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10LnZhbHVlO2kuZXJyb3JzfHwoaS5lcnJvcnM9W10pLGUuX2JveGVkJiYobz1hKHQpKSxpLmVycm9ycy5wdXNoKHtwYXRoOm4uc2xpY2UoMCxyKzEpLHZhbHVlOm99KSxzKGUsdCl9fSx7MjU6MjUsMjk6Mjl9XSwyMTpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIHUoZSx0LHIsbixpLG8sYSl7YS5yZXF1ZXN0ZWRNaXNzaW5nUGF0aHMucHVzaChuLnNsaWNlKDAscikuY29uY2F0KHQpKSxhLm9wdGltaXplZE1pc3NpbmdQYXRocy5wdXNoKGkuc2xpY2UoMCxvKS5jb25jYXQodCkpfXZhciBuPWUoMzApLGM9bi5mYXN0Q29weTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7dmFyIHM7bi5yZXF1ZXN0ZWRNaXNzaW5nUGF0aHN8fChuLnJlcXVlc3RlZE1pc3NpbmdQYXRocz1bXSxuLm9wdGltaXplZE1pc3NpbmdQYXRocz1bXSkscz1yPHQubGVuZ3RoP2ModCxyKTpbXSx1KGUscyxyLGksbyxhLG4pfX0sezMwOjMwfV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDI5KSx4PWUoMjUpLHc9bi5wcm9tb3RlLFM9ZSgxMjApLE09ZSgxMTgpLEM9ZSgxMTkpLFQ9ZSgzNyk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4saSxvLGEscyx1LGMpe2lmKHIpe3ZhciBsLGgscCxmLGQsdixtLGcsXz0hMTtpZih0JiZ3KGUsdCksdCYmdm9pZCAwIT09dC52YWx1ZXx8KF89ZS5fbWF0ZXJpYWxpemVkKSxfKWc9eyR0eXBlOk19O2Vsc2UgaWYoZS5fYm94ZWQpZz14KHQpO2Vsc2UgaWYodC4kdHlwZT09PVN8fHQuJHR5cGU9PT1DKWc9dT94KHQpOnQudmFsdWU7ZWxzZSBpZih1KXt2YXIgeT10LnZhbHVlJiZcIm9iamVjdFwiPT10eXBlb2YgdC52YWx1ZSxiPSF0W1RdO2c9eXx8Yj94KHQpOnQudmFsdWV9ZWxzZSBnPXQudmFsdWU7aWYoaSYmKGkuaGFzVmFsdWU9ITApLHUpe2ZvcihkPXIuanNvbkdyYXBoLGR8fChkPXIuanNvbkdyYXBoPXt9LHIucGF0aHM9W10pLGw9MCxoPXMtMTtoPmw7bCsrKWY9YVtsXSxkW2ZdfHwoZFtmXT17fSksZD1kW2ZdO2Y9YVtsXSxkW2ZdPV8/eyR0eXBlOk19OmcsbyYmci5wYXRocy5wdXNoKG8uc2xpY2UoMCxuKSl9ZWxzZSBpZigwPT09bilyLmpzb249ZztlbHNle2ZvcihkPXIuanNvbixkfHwoZD1yLmpzb249e30pLGw9MDtuLTE+bDtsKyspcD1vW2xdLGRbcF18fChkW3BdPXt9KSx2PWQsbT1wLGQ9ZFtwXTtwPW9bbF0sbnVsbCE9PXA/ZFtwXT1nOnZbbV09Z319fX0sezExODoxMTgsMTE5OjExOSwxMjA6MTIwLDI1OjI1LDI5OjI5LDM3OjM3fV0sMjM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgZj1lKDI3KSxuPWUoMjYpLGk9ZSgyOSksZD1uLnJlbW92ZSx2PWkuc3BsaWNlLG09ZSgxMTkpLGc9ZSgyMCksXz1lKDIyKSx5PWUoMjEpLGI9ZSgyOCkseD1lKDM1KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzLHUsYyxsKXt2YXIgaD10JiZ0LiR0eXBlLHA9dCYmdm9pZCAwPT09dC52YWx1ZTtyZXR1cm4gdCYmaD92b2lkKGYodCk/KHRbeF18fCh2KGUsdCksZCh0KSkseShlLHIsbixvLGEscyx1KSk6aD09PW0/KGwmJihhW25dPW51bGwpLGN8fGUuX3RyZWF0RXJyb3JzQXNWYWx1ZXM/XyhlLHQsaSxuLG8sYSxzLHUsYyxsKTpnKGUsdCxuLGEsbykpOihsJiYoYVtuXT1udWxsKSwoIXB8fHAmJmUuX21hdGVyaWFsaXplZCkmJl8oZSx0LGksbixvLGEscyx1LGMsbCkpKTp2b2lkKGIoZSk/XyhlLHQsaSxuLG8sYSxzLHUsYyxsKTp5KGUscixuLG8sYSxzLHUpKX19LHsxMTk6MTE5LDIwOjIwLDIxOjIxLDIyOjIyLDI2OjI2LDI3OjI3LDI4OjI4LDI5OjI5LDM1OjM1fV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEzNCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZnJvbVBhdGgoZSk7aWYoQXJyYXkuaXNBcnJheSh0KT09PSExKXRocm93IG5ldyBFcnJvcihcIk1vZGVsI2dldFZhbHVlU3luYyBtdXN0IGJlIGNhbGxlZCB3aXRoIGFuIEFycmF5IHBhdGguXCIpO3JldHVybiB0aGlzLl9wYXRoLmxlbmd0aCYmKHQ9dGhpcy5fcGF0aC5jb25jYXQodCkpLHRoaXMuX3N5bmNDaGVjayhcImdldFZhbHVlU3luY1wiKSYmdGhpcy5fZ2V0VmFsdWVTeW5jKHRoaXMsdCkudmFsdWV9fSx7MTM0OjEzNH1dLDI1OltmdW5jdGlvbihlLHQscil7dmFyIGE9ZSg0MCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpPU9iamVjdC5rZXlzKGUpO2Zvcih0PXt9LHI9MCxuPWkubGVuZ3RoO24+cjtyKyspe3ZhciBvPWlbcl07b1swXSE9PWEmJih0W29dPWVbb10pfXJldHVybiB0fX0sezQwOjQwfV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKGUsdCl7dmFyIHI9dFt1XXx8MDt0W28rcl09ZSx0W3VdPXIrMSxlW3NdPXIsZVthXT10fWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZVthXTtpZih0KXtmb3IodmFyIHI9ZVtzXSxuPXRbdV07bj5yOyl0W28rcl09dFtvK3IrMV0sKytyO3RbdV09bi0xLGVbYV09dm9pZCAwLGVbc109dm9pZCAwfX12YXIgbz1lKDQzKSxhPWUoMzMpLHM9ZSg0MiksdT1lKDQ0KTt0LmV4cG9ydHM9e2NyZWF0ZTpuLHJlbW92ZTppfX0sezMzOjMzLDQyOjQyLDQzOjQzLDQ0OjQ0fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEwNik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWUuJGV4cGlyZXMmJi0xfHxlLiRleHBpcmVzO3JldHVybi0xIT09dCYmMSE9PXQmJigwPT09dHx8dDxuKCkpfX0sezEwNjoxMDZ9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZS5fbWF0ZXJpYWxpemVkJiYhZS5fc291cmNlfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbihlLHQpe3ZhciByPWUuX3Jvb3Qsbj1yW2FdO2lmKG4hPT10KXt2YXIgaT10W3VdLG89dFtzXTtvJiYob1t1XT1pKSxpJiYoaVtzXT1vKSx0W3VdPXZvaWQgMCxyW2FdPXQsdFtzXT1uLG5bdV09dH19ZnVuY3Rpb24gaShlLHQpe3ZhciByPWUuX3Jvb3Qsbj10W3VdLGk9dFtzXTtpJiYoaVt1XT1uKSxuJiYobltzXT1pKSx0W3VdPXZvaWQgMCx0PT09clthXSYmKHJbYV09dm9pZCAwKSx0PT09cltvXSYmKHJbb109dm9pZCAwKSx0W2NdPSEwLHIuZXhwaXJlZC5wdXNoKHQpfXZhciBhPWUoMzQpLG89ZSg0NSkscz1lKDM4KSx1PWUoNDEpLGM9ZSgzNSk7dC5leHBvcnRzPXtwcm9tb3RlOm4sc3BsaWNlOml9fSx7MzQ6MzQsMzU6MzUsMzg6MzgsNDE6NDEsNDU6NDV9XSwzMDpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgcixuLGksbz1bXTtmb3Iobj0wLGk9dHx8MCxyPWUubGVuZ3RoO3I+aTtuKyssaSsrKW9bbl09ZVtpXTtyZXR1cm4gb31mdW5jdGlvbiBpKGUsdCl7dmFyIHIsbixpLG89W107Zm9yKHI9MCxuPWUubGVuZ3RoO24+cjtyKyspb1tyXT1lW3JdO2ZvcihpPTAsbj10Lmxlbmd0aDtuPmk7aSsrKW51bGwhPT10W2ldJiYob1tyKytdPXRbaV0pO3JldHVybiBvfWZ1bmN0aW9uIG8oZSx0KXt2YXIgcixuLGksbz1bXTtmb3Iocj0wLG49ZS5sZW5ndGg7bj5yO3IrKylvW3JdPWVbcl07Zm9yKGk9MCxuPXQubGVuZ3RoO24+aTtpKyspb1tyKytdPXRbaV07cmV0dXJuIG99dC5leHBvcnRzPXtmYXN0Q2F0Om8sZmFzdENhdFNraXBOdWxsczppLGZhc3RDb3B5Om59fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgUD1lKDExKSxBPWUoMjMpLGo9ZSgyNyksUj1lKDE0MykuaXRlcmF0ZUtleVNldCxrPWUoMTIwKSxMPWUoMjkpLnByb21vdGU7dC5leHBvcnRzPWZ1bmN0aW9uIGUodCxyLG4saSxvLGEscyx1LGMsbCxoLHApe3ZhciBmPXAsZD1jO2lmKCFufHxuJiZuLiR0eXBlfHxvPT09aS5sZW5ndGgpcmV0dXJuIHZvaWQgQSh0LG4saSxvLGEscyx1LGQsbCxoLGYpO3ZhciB2LG07dj1pW29dO3ZhciBnPVwib2JqZWN0XCI9PXR5cGVvZiB2LF89bysxLHk9ITEsYj12O2lmKGcmJih5PXt9LGI9Uih2LHkpKSx2b2lkIDAhPT1ifHwheS5kb25lKXt2YXIgeD1sKzE7ZG97Zj0hMTt2YXIgdztudWxsPT09Yj93PW46KHc9bltiXSxkW2xdPWIsdVtvXT1iKTt2YXIgUz1kLE09eDtpZih3KXt2YXIgQz13LiR0eXBlLFQ9QyYmdy52YWx1ZXx8dztpZihfPGkubGVuZ3RoJiZDJiZDPT09ayYmIWoodykpe2gmJkEodCx3LGksXyxhLHMsbnVsbCxkLE0saCxmKSxMKHQsdyk7dmFyIEU9UCh0LHIscix3LFQsYSxoKTtmPSEwLHc9RVswXTt2YXIgTz1FWzFdO2ZvcihTPVtdLE09Ty5sZW5ndGgsbT0wO00+bTsrK20pU1ttXT1PW21dfX1lKHQscix3LGksXyxhLHMsdSxTLE0saCxmKSx5JiYheS5kb25lJiYoYj1SKHYseSkpfXdoaWxlKHkmJiF5LmRvbmUpfX19LHsxMToxMSwxMjA6MTIwLDE0MzoxNDMsMjM6MjMsMjc6MjcsMjk6Mjl9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIG5ldyBuLk1vZGVsKGUpfVwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2U/bi5Qcm9taXNlPVByb21pc2U6bi5Qcm9taXNlPWUoMTUxKSx0LmV4cG9ydHM9bixuLk1vZGVsPWUoMil9LHsxNTE6MTUxLDI6Mn1dLDMzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoNDApK1wiY29udGV4dFwifSx7NDA6NDB9XSwzNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcImhlYWRcIn0sezQwOjQwfV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSg0MCkrXCJpbnZhbGlkYXRlZFwifSx7NDA6NDB9XSwzNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcImtleVwifSx7NDA6NDB9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1cIiRtb2RlbENyZWF0ZWRcIn0se31dLDM4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoNDApK1wibmV4dFwifSx7NDA6NDB9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcInBhcmVudFwifSx7NDA6NDB9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1TdHJpbmcuZnJvbUNoYXJDb2RlKDMwKX0se31dLDQxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoNDApK1wicHJldlwifSx7NDA6NDB9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcInJlZi1pbmRleFwifSx7NDA6NDB9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcInJlZlwifSx7NDA6NDB9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcInJlZnMtbGVuZ3RoXCJ9LHs0MDo0MH1dLDQ1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoNDApK1widGFpbFwifSx7NDA6NDB9XSw0NjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKDQwKStcInZlcnNpb25cIn0sezQwOjQwfV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBfKGUsdCxyLG4saSxvLGEscyx1LGMpe2lmKCFrKGUpJiYhZS4kdHlwZSlmb3IodmFyIGwgaW4gZSlpZihsWzBdIT09bSYmXCIkXCIhPT1sWzBdJiZQKGUsbCkpe3ZhciBoPWVbbF0scD1BKGgpJiYhaC4kdHlwZSxmPWcocixuLGksbCxoLHAsITEsbyxhLHMsdSxjKSxkPWZbMF0sdj1mWzFdO2QmJihwP18oaCx0KzEscix2LGQsbyxhLHMsdSxjKTpEKGQsdixsLHMpJiZJKHYsTyhkKSxzLG8pKX19ZnVuY3Rpb24gZChlLHQscixuLGksbyxhLHMpe2lmKGoocikpcmV0dXJuIEwocixpLG8pLFt2b2lkIDAsdF07RShvLHIpO3ZhciB1PXIsYz1yLnZhbHVlLGw9dDtpZihyPXJbeF0sbnVsbCE9cilsPXJbYl18fHQ7ZWxzZXt2YXIgaD0wLHA9Yy5sZW5ndGgtMTtsPXI9dDtkb3t2YXIgZj1jW2hdLGQ9cD5oLHY9Zyh0LGwscixmLGUsZCwhMCxuLGksbyxhLHMpO2lmKHI9dlswXSxrKHIpKXJldHVybiB2O2w9dlsxXX13aGlsZShoKys8cCk7aWYodVt4XSE9PXIpe3ZhciBtPXJbTV18fDA7cltNXT1tKzEsclt5K21dPXUsdVt4XT1yLHVbU109bX19cmV0dXJuW3IsbF19ZnVuY3Rpb24gZyhlLHQscixuLGksbyxhLHMsdSxjLGwsaCl7Zm9yKHZhciBwPXIuJHR5cGU7cD09PUM7KXt2YXIgZj1kKGksZSxyLHMsdSxjLGwsaCk7aWYocj1mWzBdLGsocikpcmV0dXJuIGY7dD1mWzFdLHA9ciYmci4kdHlwZX1pZih2b2lkIDAhPT1wKXJldHVybltyLHRdO2lmKG51bGw9PW4pe2lmKG8pdGhyb3cgbmV3IEVycm9yKFwiYG51bGxgIGlzIG5vdCBhbGxvd2VkIGluIGJyYW5jaCBrZXkgcG9zaXRpb25zLlwiKTtyJiYobj1yW3ZdKX1lbHNlIHQ9cixyPXRbbl07cmV0dXJuW3IsdF19dmFyIHY9ZSgzNikseT1lKDQzKSxtPWUoNDApLGI9ZSgzOSkseD1lKDMzKSx3PWUoNDYpLFM9ZSg0MiksTT1lKDQ0KSxDPWUoMTIwKSxUPWUoMTMpLEU9ZSg1MCksTz1lKDg4KSxQPWUoOTEpLEE9ZSgxMDApLGo9ZSg5NSksUj1lKDk2KSxrPWUoMTAyKSxMPWUoODYpLE49ZSg5MiksST1lKDExNSksRD1lKDEwOSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUuX3Jvb3Qsbj1yLGk9ci5leHBpcmVkLG89TigpLGE9ci5fY29tcGFyYXRvcixzPXIuX2Vycm9yU2VsZWN0b3IsdT1lLl9wYXRoLGM9ci5jYWNoZSxsPXUubGVuZ3RoP1QoZSx1KS52YWx1ZTpjLGg9bFtiXXx8YyxwPWNbd10sZj0tMSxkPXQubGVuZ3RoOysrZjxkOyl7dmFyIHY9dFtmXTtfKHYuanNvbiwwLGMsaCxsLG8saSxuLGEscyl9dmFyIG09Y1t3XSxnPXIub25DaGFuZ2U7UihnKSYmcCE9PW0mJmcoKX19LHsxMDA6MTAwLDEwMjoxMDIsMTA5OjEwOSwxMTU6MTE1LDEyMDoxMjAsMTM6MTMsMzM6MzMsMzY6MzYsMzk6MzksNDA6NDAsNDI6NDIsNDM6NDMsNDQ6NDQsNDY6NDYsNTA6NTAsODY6ODYsODg6ODgsOTE6OTEsOTI6OTIsOTU6OTUsOTY6OTZ9XSw0ODpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG0oZSx0LHIsbixpLG8sYSxzKXt2YXIgdT17fSxjPXQ8ZS5sZW5ndGgtMSxsPWVbdF0saD1QKGwsdSk7ZG97dmFyIHA9dihyLG4saSxoLGMsITEsbyxhLHMpLGY9cFswXSxkPXBbMV07ZiYmKGM/bShlLHQrMSxyLGQsZixvLGEscyk6UihmLGQsaCxzKSYmaihkLE0oZikscyxvKSksaD1QKGwsdSl9d2hpbGUoIXUuZG9uZSl9ZnVuY3Rpb24gaChlLHQscixuLGkpe2lmKEModCkpcmV0dXJuIE8odCxuLGkpLFt2b2lkIDAsZV07UyhpLHQpO3ZhciBvPXQsYT10LnZhbHVlLHM9ZTtpZih0PXRbX10sbnVsbCE9dClzPXRbZ118fGU7ZWxzZXt2YXIgdT0wLGM9YS5sZW5ndGgtMTtzPXQ9ZTtkb3t2YXIgbD1hW3VdLGg9Yz51LHA9dihlLHMsdCxsLGgsITAscixuLGkpO2lmKHQ9cFswXSxFKHQpKXJldHVybiBwO3M9cFsxXX13aGlsZSh1Kys8Yyk7aWYob1tfXSE9PXQpe3ZhciBmPXRbeF18fDA7dFt4XT1mKzEsdFtkK2ZdPW8sb1tfXT10LG9bYl09Zn19cmV0dXJuW3Qsc119ZnVuY3Rpb24gdihlLHQscixuLGksbyxhLHMsdSl7Zm9yKHZhciBjPXIuJHR5cGU7Yz09PWY7KXt2YXIgbD1oKGUscixhLHMsdSk7aWYocj1sWzBdLEUocikpcmV0dXJuIGw7dD1sWzFdLGM9ci4kdHlwZX1pZih2b2lkIDAhPT1jKXJldHVybltyLHRdO2lmKG51bGw9PW4pe2lmKGkpdGhyb3cgbmV3IEVycm9yKFwiYG51bGxgIGlzIG5vdCBhbGxvd2VkIGluIGJyYW5jaCBrZXkgcG9zaXRpb25zLlwiKTtyJiYobj1yW3BdKX1lbHNlIHQ9cixyPXRbbl07cmV0dXJuW3IsdF19dmFyIHA9ZSgzNiksZD1lKDQzKSxnPWUoMzkpLF89ZSgzMykseT1lKDQ2KSxiPWUoNDIpLHg9ZSg0NCksZj1lKDEyMCksdz1lKDEzKSxTPWUoNTApLE09ZSg4OCksQz1lKDk1KSxUPWUoOTYpLEU9ZSgxMDIpLE89ZSg4NiksUD1lKDE0MykuaXRlcmF0ZUtleVNldCxBPWUoOTIpLGo9ZSgxMTUpLFI9ZSgxMDkpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lLl9yb290LG49cixpPXIuZXhwaXJlZCxvPUEoKSxhPWUuX3BhdGgscz1yLmNhY2hlLHU9YS5sZW5ndGg/dyhlLGEpLnZhbHVlOnMsYz11W2ddfHxzLGw9c1t5XSxoPS0xLHA9dC5sZW5ndGg7KytoPHA7KXt2YXIgZj10W2hdO20oZiwwLHMsYyx1LG8saSxuKX12YXIgZD1zW3ldLHY9ci5vbkNoYW5nZTtUKHYpJiZsIT09ZCYmdigpfX0sezEwMjoxMDIsMTA5OjEwOSwxMTU6MTE1LDEyMDoxMjAsMTM6MTMsMTQzOjE0MywzMzozMywzNjozNiwzOTozOSw0Mjo0Miw0Mzo0Myw0NDo0NCw0Njo0Niw1MDo1MCw4Njo4Niw4ODo4OCw5Mjo5Miw5NTo5NSw5Njo5Nn1dLDQ5OltmdW5jdGlvbihlLHQscil7dmFyIGQ9ZSgzNiksdj1lKDM5KSxtPWUoMzQpLGc9ZSg0NSksXz1lKDM4KSx5PWUoNDEpLGI9ZSgxMDgpLHg9ZSgxMTUpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuLGksbyl7dmFyIGE9cixzPWk7XCJudW1iZXJcIiE9dHlwZW9mIHMmJihzPS43NSk7dmFyIHUsYyxsLGg9XCJudW1iZXJcIj09dHlwZW9mIG8scD1uKnM7Zm9yKGM9dC5wb3AoKTtjOylsPWMuJHNpemV8fDAsYS09bCxoPT09ITA/eChjLGwsZSxvKToodT1jW3ZdKSYmYihjLHUsY1tkXSxlKSxjPXQucG9wKCk7aWYoYT49bil7dmFyIGY9ZVtnXTtmb3IoYz1mO2E+PXAmJmM7KWY9Zlt5XSxsPWMuJHNpemV8fDAsYS09bCxoPT09ITAmJngoYyxsLGUsbyksYz1mO2VbZ109ZVt5XT1jLG51bGw9PWM/ZVttXT1lW19dPXZvaWQgMDpjW19dPXZvaWQgMH19fSx7MTA4OjEwOCwxMTU6MTE1LDM0OjM0LDM2OjM2LDM4OjM4LDM5OjM5LDQxOjQxLDQ1OjQ1fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgYT1lKDEyMSkscz1lKDM0KSx1PWUoNDUpLGM9ZSgzOCksbD1lKDQxKSxoPWUoMTAwKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZihoKHQpJiZ0LiRleHBpcmVzIT09YSl7dmFyIHI9ZVtzXSxuPWVbdV0saT10W2NdLG89dFtsXTt0IT09ciYmKG51bGwhPWkmJlwib2JqZWN0XCI9PXR5cGVvZiBpJiYoaVtsXT1vKSxudWxsIT1vJiZcIm9iamVjdFwiPT10eXBlb2YgbyYmKG9bY109aSksaT1yLG51bGwhPXImJlwib2JqZWN0XCI9PXR5cGVvZiByJiYocltsXT10KSxlW3NdPWVbY109cj10LHJbY109aSxyW2xdPXZvaWQgMCksbnVsbCE9biYmdCE9PW58fChlW3VdPWVbbF09bj1vfHx0KX1yZXR1cm4gdH19LHsxMDA6MTAwLDEyMToxMjEsMzQ6MzQsMzg6MzgsNDE6NDEsNDU6NDV9XSw1MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUoMzQpLHM9ZSg0NSksdT1lKDM4KSxjPWUoNDEpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPWVbYV0sbj1lW3NdLGk9dFt1XSxvPXRbY107bnVsbCE9aSYmXCJvYmplY3RcIj09dHlwZW9mIGkmJihpW2NdPW8pLG51bGwhPW8mJlwib2JqZWN0XCI9PXR5cGVvZiBvJiYob1t1XT1pKSx0PT09ciYmKGVbYV09ZVt1XT1pKSx0PT09biYmKGVbc109ZVtjXT1vKSx0W3VdPXRbY109dm9pZCAwLHI9bj1pPW89dm9pZCAwfX0sezM0OjM0LDM4OjM4LDQxOjQxLDQ1OjQ1fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBsKHQscil7dmFyIG49ITE7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIW4mJiF0Ll9kaXNwb3NlZCl7bj0hMCx0Ll9jYWxsYmFja3Nbcl09bnVsbCx0Ll9vcHRpbWl6ZWRQYXRoc1tyXT1bXSx0Ll9yZXF1ZXN0ZWRQYXRoc1tyXT1bXTt2YXIgZT0tLXQuX2NvdW50OzAhPT1lfHx0LnNlbnR8fCh0Ll9kaXNwb3NhYmxlLmRpc3Bvc2UoKSx0LnJlcXVlc3RRdWV1ZS5yZW1vdmVSZXF1ZXN0KHQpKX19fWZ1bmN0aW9uIHAoZSl7Zm9yKHZhciB0PVtdLHI9LTEsbj0wLGk9ZS5sZW5ndGg7aT5uOysrbilmb3IodmFyIG89ZVtuXSxhPTAscz1vLmxlbmd0aDtzPmE7KythKXRbKytyXT1vW2FdO3JldHVybiB0fXZhciBoPWUoNTkpLHU9ZSg2MCksbj0wLGk9ZSg1NykuR2V0UmVxdWVzdCxmPWUoNzYpLGQ9ZSg3OCksdj1lKDExOSksbT1bXSxvPWZ1bmN0aW9uKGUsdCl7dGhpcy5zZW50PSExLHRoaXMuc2NoZWR1bGVkPSExLHRoaXMucmVxdWVzdFF1ZXVlPXQsdGhpcy5pZD0rK24sdGhpcy50eXBlPWksdGhpcy5fc2NoZWR1bGVyPWUsdGhpcy5fcGF0aE1hcD17fSx0aGlzLl9vcHRpbWl6ZWRQYXRocz1bXSx0aGlzLl9yZXF1ZXN0ZWRQYXRocz1bXSx0aGlzLl9jYWxsYmFja3M9W10sdGhpcy5fY291bnQ9MCx0aGlzLl9kaXNwb3NhYmxlPW51bGwsdGhpcy5fY29sbGFwc2VkPW51bGwsdGhpcy5fZGlzcG9zZWQ9ITF9O28ucHJvdG90eXBlPXtiYXRjaDpmdW5jdGlvbihlLHQscil7dmFyIG89dGhpcyxuPW8uX29wdGltaXplZFBhdGhzLGE9by5fcmVxdWVzdGVkUGF0aHMscz1vLl9jYWxsYmFja3MsaT1uLmxlbmd0aDtyZXR1cm4gbltpXT10LGFbaV09ZSxzW2ldPXIsKytvLl9jb3VudCxvLnNjaGVkdWxlZHx8KG8uc2NoZWR1bGVkPSEwLG8uX2Rpc3Bvc2FibGU9by5fc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uKCl7dShvLG4sZnVuY3Rpb24oZSx0KXtpZihvLnJlcXVlc3RRdWV1ZS5yZW1vdmVSZXF1ZXN0KG8pLG8uX2Rpc3Bvc2VkPSEwLG8uX2NvdW50KXtvLl9tZXJnZShhLGUsdCk7Zm9yKHZhciByPTAsbj1zLmxlbmd0aDtuPnI7KytyKXt2YXIgaT1zW3JdO2kmJmkoZSx0KX19fSl9KSksbChvLGkpfSxhZGQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbz10aGlzLGE9aChlLHQsby5fcGF0aE1hcCk7YT8oaT1hWzJdLG49YVsxXSk6KGk9ZSxuPXQpO3ZhciBzPSExLHU9ITE7aWYobi5sZW5ndGg8dC5sZW5ndGgpe3M9ITA7dmFyIGM9by5fY2FsbGJhY2tzLmxlbmd0aDtvLl9jYWxsYmFja3NbY109cixvLl9yZXF1ZXN0ZWRQYXRoc1tjXT1hWzBdLG8uX29wdGltaXplZFBhdGhzW2NdPVtdLCsrby5fY291bnQsdT1sKG8sYyl9cmV0dXJuW3MsaSxuLHVdfSxfbWVyZ2U6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1uLnJlcXVlc3RRdWV1ZS5tb2RlbCxvPWkuX3Jvb3QsYT1vLmVycm9yU2VsZWN0b3Iscz1vLmNvbXBhcmF0b3IsdT1pLl9wYXRoO2kuX3BhdGg9bTt2YXIgYz1wKGUpO2lmKHQpe3ZhciBsPXQ7bCBpbnN0YW5jZW9mIEVycm9yJiYobD17bWVzc2FnZTpsLm1lc3NhZ2V9KSxsLiR0eXBlfHwobD17JHR5cGU6dix2YWx1ZTpsfSk7dmFyIGg9Yy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue3BhdGg6ZSx2YWx1ZTpsfX0pO2QoaSxoLG51bGwsYSxzKX1lbHNlIGYoaSxbe3BhdGhzOmMsanNvbkdyYXBoOnIuanNvbkdyYXBofV0sbnVsbCxhLHMpO2kuX3BhdGg9dX19LHQuZXhwb3J0cz1vfSx7MTE5OjExOSw1Nzo1Nyw1OTo1OSw2MDo2MCw3Njo3Niw3ODo3OH1dLDUzOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe3RoaXMubGVuZ3RoPTAsdGhpcy5wZW5kaW5nPSExLHRoaXMucGF0aG1hcHM9W10sYS5jYWxsKHRoaXMsdGhpcy5fc3Vic2NyaWJlKX12YXIgaT1lKDE1OSksbz1pLk9ic2VydmVyLGE9aS5PYnNlcnZhYmxlLHM9aS5EaXNwb3NhYmxlLHU9aS5TZXJpYWxEaXNwb3NhYmxlLGM9aS5Db21wb3NpdGVEaXNwb3NhYmxlLGw9ZSg5KSxoPWUoMTQzKSxmPWguaXRlcmF0ZUtleVNldDtuLmNyZWF0ZT1mdW5jdGlvbihlLHQscil7dmFyIG49bmV3IHRoaXM7cmV0dXJuIG4ucXVldWU9ZSxuLm1vZGVsPXQsbi5pbmRleD1yLG59LG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW4sbi5wcm90b3R5cGUuaW5zZXJ0UGF0aD1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPW58fDAsYT1pfHxlLmxlbmd0aC0xLHM9cnx8dGhpcy5wYXRobWFwc1thKzFdfHwodGhpcy5wYXRobWFwc1thKzFdPU9iamVjdC5jcmVhdGUobnVsbCkpO2lmKHZvaWQgMD09PXN8fG51bGw9PT1zKXJldHVybiExO3ZhciB1LGMsbD1lW29dLGg9e307dT1mKGwsaCk7ZG97aWYoYz1zW3VdLGE+byl7aWYobnVsbD09Yyl7aWYodClyZXR1cm4hMTtjPXNbdV09T2JqZWN0LmNyZWF0ZShudWxsKX1pZih0aGlzLmluc2VydFBhdGgoZSx0LGMsbysxLGEpPT09ITEpcmV0dXJuITF9ZWxzZSBzW3VdPShjfHwwKSsxLHRoaXMubGVuZ3RoKz0xO2guZG9uZXx8KHU9ZihsLGgpKX13aGlsZSghaC5kb25lKTtyZXR1cm4hMH0sbi5wcm90b3R5cGUucmVtb3ZlUGF0aD1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1yfHwwLG89bnx8ZS5sZW5ndGgtMSxhPXR8fHRoaXMucGF0aG1hcHNbbysxXTtpZih2b2lkIDA9PT1hfHxudWxsPT09YSlyZXR1cm4hMDt2YXIgcyx1LGM9MCxsPWVbaV0saD17fTtzPWYobCxoKTtkb3tpZih1PWFbc10sdm9pZCAwIT09dSYmbnVsbCE9PXUpe2lmKG8+aSl7Yys9dGhpcy5yZW1vdmVQYXRoKGUsdSxpKzEsbyk7dmFyIHA9dm9pZCAwO2ZvcihwIGluIHUpYnJlYWs7dm9pZCAwPT09cCYmZGVsZXRlIGFbc119ZWxzZSB1PWFbc109KHV8fDEpLTEsMD09PXUmJmRlbGV0ZSBhW3NdLGMrPTEsdGhpcy5sZW5ndGgtPTE7aC5kb25lfHwocz1mKGwsaCkpfX13aGlsZSghaC5kb25lKTtyZXR1cm4gY30sbi5wcm90b3R5cGUuZ2V0U291cmNlT2JzZXJ2ZXI9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztyZXR1cm4gby5jcmVhdGUoZnVuY3Rpb24oZSl7ZS5qc29uR3JhcGg9ZS5qc29uR3JhcGh8fGUuanNvbmd8fGUudmFsdWVzfHxlLnZhbHVlLGUuaW5kZXg9ci5pbmRleCx0Lm9uTmV4dChlKX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3Qub25Db21wbGV0ZWQoKX0pfSxuLnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLnF1ZXVlO3QucGVuZGluZz0hMDt2YXIgbj0hMSxpPW5ldyB1LG89cy5jcmVhdGUoZnVuY3Rpb24oKXtufHwobj0hMCxyJiZyLl9yZW1vdmUodCkpfSksYT1uZXcgYyhpLG8pO3RyeXtpLnNldERpc3Bvc2FibGUodGhpcy5tb2RlbC5fc291cmNlW3RoaXMubWV0aG9kXSh0aGlzLmdldFNvdXJjZUFyZ3MoKSkuc3Vic2NyaWJlKHRoaXMuZ2V0U291cmNlT2JzZXJ2ZXIoZSkpKX1jYXRjaChlKXt0aHJvdyBuZXcgbChlKX1yZXR1cm4gYX0sdC5leHBvcnRzPW59LHsxNDM6MTQzLDE1OToxNTksOTo5fV0sNTQ6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKGUsdCl7dGhpcy50b3RhbD0wLHRoaXMubW9kZWw9ZSx0aGlzLnJlcXVlc3RzPVtdLHRoaXMuc2NoZWR1bGVyPXR9dmFyIGk9ZSg1OCksbT1lKDQwKSxnPWUoOTApLF89ZSgxMDApLG89ZSgxNDMpO24ucHJvdG90eXBlLnNldD1mdW5jdGlvbihlKXtyZXR1cm4gZS5wYXRocz1vLmNvbGxhcHNlKGUucGF0aHMpLGkuY3JlYXRlKHRoaXMubW9kZWwsZSl9LG4ucHJvdG90eXBlLl9yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZXF1ZXN0cyxyPXQuaW5kZXhPZihlKTstMSE9PXImJnQuc3BsaWNlKHIsMSl9LG4ucHJvdG90eXBlLmRpc3RyaWJ1dGVQYXRocz1mdW5jdGlvbihlLHQscil7dmFyIG4saSxvPXRoaXMubW9kZWwsYT0tMSxzPWUubGVuZ3RoLHU9LTEsYz10Lmxlbmd0aCxsPVtdO2U6Zm9yKDsrK2E8czspe3ZhciBoPWVbYV07Zm9yKHU9LTE7Kyt1PGM7KWlmKGk9dFt1XSxpLmluc2VydFBhdGgoaCxpLnBlbmRpbmcpKXtsW3VdPWk7Y29udGludWUgZX1ufHwobj1yLmNyZWF0ZSh0aGlzLG8sdGhpcy50b3RhbCsrKSx0W3VdPW4sbFtjKytdPW4pLG4uaW5zZXJ0UGF0aChoLCExKX12YXIgcD1bXSxmPS0xO2Zvcih1PS0xOysrdTxjOylpPWxbdV0sbnVsbCE9aSYmKHBbKytmXT1pKTtyZXR1cm4gcH0sbi5wcm90b3R5cGUubWVyZ2VKU09OR3JhcGhzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPVtdLGk9W10sbz1bXSxhPWUuaW5kZXgscz10LmluZGV4O2UuaW5kZXg9TWF0aC5tYXgoYSxzKSxuWy0xXT1lLmpzb25HcmFwaHx8e30saVstMV09dC5qc29uR3JhcGh8fHt9O2U6Zm9yKDtyPi0xOyl7Zm9yKHZhciB1PW5bci0xXSxjPWlbci0xXSxsPW9bci0xXXx8KG9bci0xXT1PYmplY3Qua2V5cyhjKSk7bC5sZW5ndGg+MDspe3ZhciBoPWwucG9wKCk7aWYoaFswXSE9PW0paWYodS5oYXNPd25Qcm9wZXJ0eShoKSl7dmFyIHA9dVtoXSxmPWcocCksZD1jW2hdLHY9ZyhkKTtpZihfKHApJiZfKGQpJiYhZiYmIXYpe25bcl09cCxpW3JdPWQscis9MTtjb250aW51ZSBlfXM+YSYmKHVbaF09ZCl9ZWxzZSB1W2hdPWNbaF19ci09MX1yZXR1cm4gZX0sdC5leHBvcnRzPW59LHsxMDA6MTAwLDE0MzoxNDMsNDA6NDAsNTg6NTgsOTA6OTB9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSx0KXt0aGlzLm1vZGVsPWUsdGhpcy5zY2hlZHVsZXI9dCx0aGlzLnJlcXVlc3RzPXRoaXMuX3JlcXVlc3RzPVtdfXZhciBpPWUoNTQpLG89ZSg1Nik7bi5wcm90b3R5cGUuZ2V0PW8ucHJvdG90eXBlLmdldCxuLnByb3RvdHlwZS5yZW1vdmVSZXF1ZXN0PW8ucHJvdG90eXBlLnJlbW92ZVJlcXVlc3Qsbi5wcm90b3R5cGUuc2V0PWkucHJvdG90eXBlLnNldCxuLnByb3RvdHlwZS5jYWxsPWkucHJvdG90eXBlLmNhbGwsdC5leHBvcnRzPW59LHs1NDo1NCw1Njo1Nn1dLDU2OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbihlLHQpe3RoaXMubW9kZWw9ZSx0aGlzLnNjaGVkdWxlcj10LHRoaXMucmVxdWVzdHM9dGhpcy5fcmVxdWVzdHM9W119dmFyIG09ZSg1NyksZz1lKDUyKTtuLnByb3RvdHlwZT17c2V0U2NoZWR1bGVyOmZ1bmN0aW9uKGUpe3RoaXMuc2NoZWR1bGVyPWV9LGdldDpmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe2Z8fCgtLWMsMD09PWMmJnIoKSl9dmFyIGksbyxhLHM9dGhpcyx1PVtdLGM9MCxsPXMuX3JlcXVlc3RzLGg9dCxwPWUsZj0hMTtmb3IoaT0wLG89bC5sZW5ndGg7bz5pOysraSlpZihhPWxbaV0sYS50eXBlPT09bS5HZXRSZXF1ZXN0KXtpZihhLnNlbnQpe3ZhciBkPWEuYWRkKHAsaCxuKTtkWzBdJiYocD1kWzFdLGg9ZFsyXSx1W3UubGVuZ3RoXT1kWzNdLCsrYyl9ZWxzZSBhLmJhdGNoKHAsaCxuKSxoPVtdLHA9W10sKytjO2lmKCFoLmxlbmd0aClicmVha31pZihoLmxlbmd0aCl7YT1uZXcgZyhzLnNjaGVkdWxlcixzKSxsW2wubGVuZ3RoXT1hLCsrYzt2YXIgdj1hLmJhdGNoKHAsaCxuKTt1W3UubGVuZ3RoXT12fXJldHVybiBmdW5jdGlvbigpe2lmKCFmJiYwIT09Yyl7Zj0hMDtmb3IodmFyIGU9dS5sZW5ndGgsdD0wO2U+dDsrK3QpdVt0XSgpfX19LHJlbW92ZVJlcXVlc3Q6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuX3JlcXVlc3RzLHI9dC5sZW5ndGg7LS1yPj0wOylpZih0W3JdLmlkPT09ZS5pZCl7dC5zcGxpY2UociwxKTticmVha319fSx0LmV4cG9ydHM9bn0sezUyOjUyLDU3OjU3fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e0dldFJlcXVlc3Q6XCJHRVRcIn19LHt9XSw1ODpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oKXtjLmNhbGwodGhpcyl9dmFyIGk9ZSgxNTkpLHU9aS5PYnNlcnZlcixjPWUoNTMpLGw9ZSg4MyksaD1lKDc2KSxwPWUoNzgpLGY9bmV3IEFycmF5KDApO24uY3JlYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IG47cmV0dXJuIHIubW9kZWw9ZSxyLmpzb25HcmFwaEVudmVsb3BlPXQscn0sbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixuLnByb3RvdHlwZS5tZXRob2Q9XCJzZXRcIixuLnByb3RvdHlwZS5pbnNlcnRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuITF9LG4ucHJvdG90eXBlLnJlbW92ZVBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sbi5wcm90b3R5cGUuZ2V0U291cmNlQXJncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmpzb25HcmFwaEVudmVsb3BlfSxuLnByb3RvdHlwZS5nZXRTb3VyY2VPYnNlcnZlcj1mdW5jdGlvbihyKXt2YXIgbj10aGlzLm1vZGVsLGk9bi5fcGF0aCxvPXRoaXMuanNvbkdyYXBoRW52ZWxvcGUucGF0aHMsZT1uLl9yb290LGE9ZS5lcnJvclNlbGVjdG9yLHM9ZS5jb21wYXJhdG9yO3JldHVybiBjLnByb3RvdHlwZS5nZXRTb3VyY2VPYnNlcnZlci5jYWxsKHRoaXMsdS5jcmVhdGUoZnVuY3Rpb24oZSl7bi5fcGF0aD1mO3ZhciB0PWgobixbe3BhdGhzOm8sanNvbkdyYXBoOmUuanNvbkdyYXBofV0sbnVsbCxhLHMpO2UucGF0aHM9dFsxXSxuLl9wYXRoPWksci5vbk5leHQoZSl9LGZ1bmN0aW9uKHQpe24uX3BhdGg9ZixwKG4sbChvLGZ1bmN0aW9uKGUpe3JldHVybntwYXRoOmUsdmFsdWU6dH19KSxudWxsLGEscyksbi5fcGF0aD1pLHIub25FcnJvcih0KX0sZnVuY3Rpb24oKXtyLm9uQ29tcGxldGVkKCl9KSl9LHQuZXhwb3J0cz1ufSx7MTU5OjE1OSw1Mzo1Myw3Njo3Niw3ODo3OCw4Mzo4M31dLDU5OltmdW5jdGlvbihlLHQscil7dmFyIGY9ZSgxNDMpLmhhc0ludGVyc2VjdGlvbixkPWUoODQpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPVtdLGk9W10sbz1bXSxhPS0xLHM9LTEsdT0hMSxjPTAsbD10Lmxlbmd0aDtsPmM7KytjKXt2YXIgaD10W2NdLHA9cltoLmxlbmd0aF07cCYmZihwLGgsMCk/KCF1JiZjPjAmJihpPWQoZSwwLGMpLG49ZCh0LDAsYykpLG9bKythXT1lW2NdLHU9ITApOnUmJihuWysrc109aCxpW3NdPWVbY10pfXJldHVybiB1P1tvLG4saV06bnVsbH19LHsxNDM6MTQzLDg0Ojg0fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDE0MykseT1uLnRvVHJlZSxiPW4udG9QYXRoczt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKDA9PT1lLl9jb3VudClyZXR1cm4gdm9pZCBlLnJlcXVlc3RRdWV1ZS5yZW1vdmVSZXF1ZXN0KGUpO2Uuc2VudD0hMCxlLnNjaGVkdWxlZD0hMTtmb3IodmFyIG49ZS5fcGF0aE1hcCxpPU9iamVjdC5rZXlzKHQpLG89MCxhPWkubGVuZ3RoO2E+bzsrK28pZm9yKHZhciBzPXRbb10sdT0wLGM9cy5sZW5ndGg7Yz51OysrdSl7dmFyIGw9c1t1XSxoPWwubGVuZ3RoO2lmKG5baF0pe3ZhciBwPW5baF07cFtwLmxlbmd0aF09bH1lbHNlIG5baF09W2xdfWZvcih2YXIgZj1PYmplY3Qua2V5cyhuKSxkPTAsdj1mLmxlbmd0aDt2PmQ7KytkKXt2YXIgbT1mW2RdO25bbV09eShuW21dKX12YXIgZyxfPWUuX2NvbGxhc3BlZD1iKG4pO2UucmVxdWVzdFF1ZXVlLm1vZGVsLl9zb3VyY2UuZ2V0KF8pLnN1YnNjcmliZShmdW5jdGlvbihlKXtnPWV9LGZ1bmN0aW9uKGUpe3IoZSxnKX0sZnVuY3Rpb24oKXtyKG51bGwsZyl9KX19LHsxNDM6MTQzfV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKGUpe2IuY2FsbCh0aGlzLGV8fGkpfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIHkuT2JzZXJ2YWJsZS5kZWZlcihmdW5jdGlvbigpe3JldHVybiBlfSl9ZnVuY3Rpb24gaShpKXtmdW5jdGlvbiBlKGUpe2Z1bmN0aW9uIHQoZSx0KXtpZihCb29sZWFuKHQuaW52YWxpZGF0ZWQpKWUuaW52YWxpZGF0aW9ucy5wdXNoKGUubG9jYWxUaGlzUGF0aC5jb25jYXQodC5wYXRoKSk7ZWxzZXt2YXIgcj10LnBhdGgsbj10LnZhbHVlO0Jvb2xlYW4obikmJlwib2JqZWN0XCI9PXR5cGVvZiBuJiZuLiR0eXBlPT09TT9lLnJlZmVyZW5jZXMucHVzaCh7cGF0aDpmKHIpLHZhbHVlOnQudmFsdWV9KTplLnZhbHVlcy5wdXNoKHtwYXRoOmYociksdmFsdWU6dC52YWx1ZX0pfXJldHVybiBlfWZ1bmN0aW9uIHIodCl7dmFyIGU9dC52YWx1ZXMuY29uY2F0KHQucmVmZXJlbmNlcyk7cmV0dXJuIGUubGVuZ3RoPjA/XyhsLnNldC5hcHBseShsLGUpLl90b0pTT05HKCkpLm1hcChmdW5jdGlvbihlKXtyZXR1cm57cmVzdWx0czp0LGVudmVsb3BlOmV9fSk6YltcInJldHVyblwiXSh7cmVzdWx0czp0LGVudmVsb3BlOntqc29uR3JhcGg6e30scGF0aHM6W119fSl9ZnVuY3Rpb24gbihlKXt2YXIgdCxyPWUuZW52ZWxvcGUsbj1lLnJlc3VsdHMsaT1uLnZhbHVlcyxvPW4ucmVmZXJlbmNlcyxhPW4uaW52YWxpZGF0aW9ucyxzPWkubWFwKHApLm1hcChmKSx1PW8ucmVkdWNlKGgsW10pLGM9ZC5tYXAoZiksbD11LmNvbmNhdChjKTtyZXR1cm4gdD1sLmxlbmd0aD4wP18odi5nZXQuYXBwbHkodixzLmNvbmNhdChsKSkuX3RvSlNPTkcoKSk6YltcInJldHVyblwiXShyKSx0LmRvQWN0aW9uKGZ1bmN0aW9uKGUpe2UuaW52YWxpZGF0ZWQ9YX0pfWZ1bmN0aW9uIGgoZSx0KXt2YXIgcj10LnBhdGg7cmV0dXJuIGUucHVzaC5hcHBseShlLGMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLmNvbmNhdChlKX0pKSxlfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGUucGF0aH12YXIgaT1lJiZlLmxvY2FsRm47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaSl7dmFyIG89ZS5tb2RlbCxhPW8uX3BhdGgscz1pLmFwcGx5KG8sdSkucmVkdWNlKHQse3ZhbHVlczpbXSxyZWZlcmVuY2VzOltdLGludmFsaWRhdGlvbnM6W10sbG9jYWxUaGlzUGF0aDphfSkuZmxhdE1hcChyKS5mbGF0TWFwKG4pO3JldHVybiBiW1wicmV0dXJuXCJdKHMpfXJldHVybiBiLmVtcHR5KCl9ZnVuY3Rpb24gdChlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PWUuaW52YWxpZGF0ZWQ7cmV0dXJuIHQmJnQubGVuZ3RoJiZ2LmludmFsaWRhdGUuYXBwbHkodix0KSxlfXJldHVybiBlJiZcIm9iamVjdFwiPT10eXBlb2YgZT95Lk9ic2VydmFibGUuZGVmZXIoZnVuY3Rpb24oKXt2YXIgdDt0cnl7dD1lLmNhbGwoaCx1LGMsZCl9Y2F0Y2goZSl7dD1iW1widGhyb3dcIl0obmV3IHcoZSkpfXJldHVybiB0fSkubWFwKHQpOmIuZW1wdHkoKX1mdW5jdGlvbiByKGUpe3JldHVybiBfKGwuc2V0KGUpKS5yZWR1Y2UoZnVuY3Rpb24oZSl7cmV0dXJuIGV9LG51bGwpLm1hcChmdW5jdGlvbigpe3JldHVybntpbnZhbGlkYXRlZDplLmludmFsaWRhdGVkLHBhdGhzOmUucGF0aHMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNsaWNlKHMubGVuZ3RoKX0pfX0pfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIHAuY29uY2F0KGUpfXZhciBuPXRoaXMuYXJncyxvPXRoaXMubW9kZWwsYT1TLmZyb21QYXRoKG5bMF0pLHU9blsxXXx8W10sYz0oblsyXXx8W10pLm1hcChTLmZyb21QYXRoKSxkPShuWzNdfHxbXSkubWFwKFMuZnJvbVBhdGgpLHY9by5fY2xvbmUoe19wYXRoOltdfSksbD12LndpdGhvdXREYXRhU291cmNlKCkscz1vLl9wYXRoLGg9cy5jb25jYXQoYSkscD1oLnNsaWNlKDAsLTEpLG09XyhvLndpdGhvdXREYXRhU291cmNlKCkuZ2V0KGEpKS5tYXAoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuanNvbixyPS0xLG49YS5sZW5ndGg7dCYmKytyPG47KXQ9dFthW3JdXTt2YXIgaT12Ll9kZXJlZlN5bmMocCkuYm94VmFsdWVzKCk7cmV0dXJue21vZGVsOmksbG9jYWxGbjp0fX0pLmZsYXRNYXAoZSkuZGVmYXVsdElmRW1wdHkodChvLl9zb3VyY2UpKS5tZXJnZUFsbCgpLmZsYXRNYXAociksZz1uZXcgeDtyZXR1cm4gZy5hZGQobS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXRocyxyPWUuaW52YWxpZGF0ZWQsbj1vLmdldC5hcHBseShvLHQpO1wiQXNKU09OR1wiPT09aS5vdXRwdXRGb3JtYXQmJihuPV8obi5fdG9KU09ORygpKS5kb0FjdGlvbihmdW5jdGlvbihlKXtlLmludmFsaWRhdGVkPXJ9KSksZy5hZGQobi5zdWJzY3JpYmUoaSkpfSxmdW5jdGlvbihlKXtpLm9uRXJyb3IoZSl9KSksZ312YXIgeT1lKDE1OSkmJmUoMTU4KSxiPXkuT2JzZXJ2YWJsZSx4PXkuQ29tcG9zaXRlRGlzcG9zYWJsZSxvPWUoNjQpLHc9ZSg5KSxTPWUoMTM0KSxNPWUoMTIwKTtuLmNyZWF0ZT1vLmNyZWF0ZSxuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1uLG4ucHJvdG90eXBlLmludm9rZVNvdXJjZVJlcXVlc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLmVuc3VyZUNvbGxlY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5leHBvcnRzPW59LHsxMjA6MTIwLDEzNDoxMzQsMTU4OjE1OCwxNTk6MTU5LDY0OjY0LDk6OX1dLDYyOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbihlKXtvLmNhbGwodGhpcyxlKX12YXIgaT1lKDE1OSksbz1pLk9ic2VydmFibGUsYT1lKDY0KSxwPWUoMTM0KSxzPWUoODgpLHU9ZSg0OSksZj1lKDgxKSxjPWUoNDYpLGQ9QXJyYXkuaXNBcnJheSx2PWUoMTAxKSxtPWUoOTgpLGc9ZSg5OSk7bi5jcmVhdGU9YS5jcmVhdGUsbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixuLnByb3RvdHlwZS5zdWJzY3JpYmVDb3VudD0wLG4ucHJvdG90eXBlLnN1YnNjcmliZUxpbWl0PTEwLG4ucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxyPXRoaXMubW9kZWwsbj10aGlzLm91dHB1dEZvcm1hdHx8XCJBc1BhdGhNYXBcIixpPXRoaXMuaXNQcm9ncmVzc2l2ZSxvPVt7fV0sYT1bXSxzPXRoaXMuYXJncyx1PS0xLGM9cy5sZW5ndGg7Kyt1PGM7KXt2YXIgbCxoPXNbdV07ZChoKXx8XCJzdHJpbmdcIj09dHlwZW9mIGg/KGg9cC5mcm9tUGF0aChoKSxsPVwiUGF0aFZhbHVlc1wiKTp2KGgpPyhoLnBhdGg9cC5mcm9tUGF0aChoLnBhdGgpLGw9XCJQYXRoVmFsdWVzXCIpOmcoaCk/bD1cIkpTT05Hc1wiOm0oaCkmJihsPVwiUGF0aE1hcHNcIiksdCE9PWwmJih0PWwsZT17aW5wdXRUeXBlOmwsYXJndW1lbnRzOltdfSxhLnB1c2goZSksZS52YWx1ZXM9byksZS5hcmd1bWVudHMucHVzaChoKX1yZXR1cm4gdGhpcy5ib3VuZFBhdGg9ZihyLl9wYXRoKSx0aGlzLmdyb3Vwcz1hLHRoaXMub3V0cHV0Rm9ybWF0PW4sdGhpcy5pc1Byb2dyZXNzaXZlPWksdGhpcy5pc0NvbXBsZXRlZD0hMSx0aGlzLmlzTWFzdGVyPW51bGw9PXIuX3NvdXJjZSx0aGlzLnZhbHVlcz1vLHRoaXN9LG4ucHJvdG90eXBlLmludm9rZVNvdXJjZVJlcXVlc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLmVuc3VyZUNvbGxlY3Q9ZnVuY3Rpb24ocil7dmFyIHQ9dGhpc1tcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXt2YXIgZT1yLl9yb290LHQ9ZS5jYWNoZTtlLmNvbGxlY3Rpb25TY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24oKXt1KGUsZS5leHBpcmVkLHModCksci5fbWF4U2l6ZSxyLl9jb2xsZWN0UmF0aW8sdFtjXSl9KX0pO3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihmdW5jdGlvbihlKXtyZXR1cm4gdC5zdWJzY3JpYmUoZSl9KX0sdC5leHBvcnRzPW59LHsxMDE6MTAxLDEzNDoxMzQsMTU5OjE1OSw0Njo0Niw0OTo0OSw2NDo2NCw4MTo4MSw4ODo4OCw5ODo5OCw5OTo5OX1dLDYzOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbihlKXthLmNhbGwodGhpcyxlfHxpKX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD10aGlzLm1vZGVsLHI9dGhpcy5tZXRob2Qsbj10aGlzLmdyb3VwcyxpPS0xLG89bi5sZW5ndGg7KytpPG87KXt2YXIgYT1uW2ldLHM9YS5pbnB1dFR5cGUsdT1hLmFyZ3VtZW50cztpZih1Lmxlbmd0aD4wKXt2YXIgYz1cIl9cIityK3MrXCJBc0pTT05cIixsPXRbY107bCh0LHUpfX1yZXR1cm4gZS5vbkNvbXBsZXRlZCgpLGguZW1wdHl9dmFyIG89ZSgxNTkpLGg9by5EaXNwb3NhYmxlLGE9ZSg2Mik7bi5jcmVhdGU9YS5jcmVhdGUsbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksbi5wcm90b3R5cGUubWV0aG9kPVwiaW52YWxpZGF0ZVwiLG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW4sdC5leHBvcnRzPW59LHsxNTk6MTU5LDYyOjYyfV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKGUpe3RoaXMuX3N1YnNjcmliZT1lfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9dGhpcy5tb2RlbCxyPW5ldyB0aGlzLnR5cGU7cmV0dXJuIHIubW9kZWw9dCxyLmFyZ3M9dGhpcy5hcmdzLHIub3V0cHV0Rm9ybWF0PWUub3V0cHV0Rm9ybWF0fHxcIkFzUGF0aE1hcFwiLHIuaXNQcm9ncmVzc2l2ZT1lLmlzUHJvZ3Jlc3NpdmV8fCExLHIuc3Vic2NyaWJlQ291bnQ9MCxyLnN1YnNjcmliZUxpbWl0PWUucmV0cnlMaW1pdHx8MTAsci5pbml0aWFsaXplKCkuaW52b2tlU291cmNlUmVxdWVzdCh0KS5lbnN1cmVDb2xsZWN0KHQpLnN1YnNjcmliZShlKX12YXIgbz1lKDMyKSxhPWUoMTU5KSYmZSgxNTgpLHM9YS5PYnNlcnZhYmxlLHU9ZSg4NCksYz1lKDEwNSksbD17b3V0cHV0Rm9ybWF0Ont2YWx1ZTpcIkFzSlNPTkdcIn19LGg9e2lzUHJvZ3Jlc3NpdmU6e3ZhbHVlOiEwfX07bi5jcmVhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgbihpKTtyZXR1cm4gci5hcmdzPXQsci50eXBlPXRoaXMsci5tb2RlbD1lLHJ9LG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpLG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW4sbi5wcm90b3R5cGUuX21peGluPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxyPXUoYXJndW1lbnRzKTtyZXR1cm4gbmV3IHQuY29uc3RydWN0b3IoZnVuY3Rpb24oZSl7cmV0dXJuIHQuc3Vic2NyaWJlKHIucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5jcmVhdGUoZSx0KX0sZSkpfSl9LG4ucHJvdG90eXBlLl90b0pTT05HPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21peGluKGwpfSxuLnByb3RvdHlwZS5wcm9ncmVzc2l2ZWx5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21peGluKGgpfSxuLnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWU7biYmXCJvYmplY3RcIj09dHlwZW9mIG58fChuPXtvbk5leHQ6ZXx8YyxvbkVycm9yOnR8fGMsb25Db21wbGV0ZWQ6cnx8Y30pO3ZhciBpPXRoaXMuX3N1YnNjcmliZShuKTtzd2l0Y2godHlwZW9mIGkpe2Nhc2VcImZ1bmN0aW9uXCI6cmV0dXJue2Rpc3Bvc2U6aX07Y2FzZVwib2JqZWN0XCI6cmV0dXJuIGl8fHtkaXNwb3NlOmN9O2RlZmF1bHQ6cmV0dXJue2Rpc3Bvc2U6Y319fSxuLnByb3RvdHlwZS50aGVuPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztyZXR1cm4gbmV3IG8uUHJvbWlzZShmdW5jdGlvbihlLHQpe3ZhciByLG49ITE7aS50b0FycmF5KCkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3I9ZS5sZW5ndGg8PTE/ZVswXTplfSxmdW5jdGlvbihlKXtuPSEwLHQoZSl9LGZ1bmN0aW9uKCl7bj09PSExJiZlKHIpfSl9KS50aGVuKGUsdCl9LHQuZXhwb3J0cz1ufSx7MTA1OjEwNSwxNTg6MTU4LDE1OToxNTksMzI6MzIsODQ6ODR9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSl7Yy5jYWxsKHRoaXMsZXx8aSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gdGhpcy5pc0NvbXBsZXRlZD9fLmNhbGwodGhpcyxlKTpvLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBvKGUpe2lmKHRoaXMuc3Vic2NyaWJlQ291bnQrKz50aGlzLnN1YnNjcmliZUxpbWl0KXJldHVybiBlLm9uRXJyb3IoXCJMb29wIGtpbGwgc3dpdGNoIHRocm93bi5cIikseC5lbXB0eTtmb3IodmFyIHQ9W10scj1bXSxuPXRoaXMubW9kZWwsaT10aGlzLmlzTWFzdGVyLG89bi5fcm9vdCxhPXRoaXMub3V0cHV0Rm9ybWF0LHM9by5lcnJvclNlbGVjdG9yLHU9dGhpcy5tZXRob2QsYz10aGlzLmdyb3VwcyxsPS0xLGg9Yy5sZW5ndGg7KytsPGg7KXt2YXIgcD1jW2xdLGY9cC5pbnB1dFR5cGUsZD1wLmFyZ3VtZW50cztpZihkLmxlbmd0aD4wKXt2YXIgdj1cIl9cIit1K2YrYSxtPW5bdl0sZz1tKG4sZCxudWxsLHMpO3IucHVzaC5hcHBseShyLGdbMV0pLFwiUGF0aFZhbHVlc1wiPT09Zj90LnB1c2guYXBwbHkodCxkLm1hcCh5KSk6XCJKU09OR3NcIj09PWY/dC5wdXNoLmFwcGx5KHQsdyhkLGIpKTp0LnB1c2guYXBwbHkodCxnWzBdKX19cmV0dXJuIHRoaXMucmVxdWVzdGVkUGF0aHM9dCxpPyh0aGlzLmlzQ29tcGxldGVkPSEwLF8uY2FsbCh0aGlzLGUpKTp2b2lkIGUub25FcnJvcih7bWV0aG9kOnUsb3B0aW1pemVkUGF0aHM6cixpbnZva2VTb3VyY2VSZXF1ZXN0OiEwfSl9ZnVuY3Rpb24gXyhlKXt2YXIgdD1uZXcgcyh0aGlzLm1vZGVsLHRoaXMucmVxdWVzdGVkUGF0aHMpO3JldHVyblwiQXNKU09OR1wiPT09dGhpcy5vdXRwdXRGb3JtYXQmJih0PXQuX3RvSlNPTkcoKSksdGhpcy5pc1Byb2dyZXNzaXZlJiYodD10LnByb2dyZXNzaXZlbHkoKSksdC5zdWJzY3JpYmUoZSl9ZnVuY3Rpb24geShlKXtyZXR1cm4gZS5wYXRofWZ1bmN0aW9uIGIoZSl7cmV0dXJuIGUucGF0aHN9dmFyIGE9ZSgxNTkpLHU9YS5PYnNlcnZhYmxlLHg9YS5EaXNwb3NhYmxlLHM9ZSg2NyksYz1lKDYyKSxsPWUoOSksdz1lKDgyKSxoPW5ldyBBcnJheSgwKTtuLmNyZWF0ZT1jLmNyZWF0ZSxuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxuLnByb3RvdHlwZS5tZXRob2Q9XCJzZXRcIixuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1uLG4ucHJvdG90eXBlLmludm9rZVNvdXJjZVJlcXVlc3Q9ZnVuY3Rpb24obyl7dmFyIGE9dGhpcyxzPXRoaXNbXCJjYXRjaFwiXShmdW5jdGlvbihlKXt2YXIgdDtpZihlJiZlLmludm9rZVNvdXJjZVJlcXVlc3Q9PT0hMCl7dmFyIHI9e30sbj1vLl9wYXRoLGk9ZS5vcHRpbWl6ZWRQYXRocztvLl9wYXRoPWgsby5fZ2V0UGF0aFZhbHVlc0FzSlNPTkcoby5fbWF0ZXJpYWxpemUoKS53aXRob3V0RGF0YVNvdXJjZSgpLGksW3JdKSxvLl9wYXRoPW4sdD1vLl9yZXF1ZXN0LnNldChyKVtcImRvXCJdKGZ1bmN0aW9uKGUpe2EuaXNDb21wbGV0ZWQ9aS5sZW5ndGg9PT1lLnBhdGhzLmxlbmd0aH0sZnVuY3Rpb24oKXthLmlzQ29tcGxldGVkPSEwfSkubWF0ZXJpYWxpemUoKS5mbGF0TWFwKGZ1bmN0aW9uKGUpe2lmKFwiQ1wiPT09ZS5raW5kKXJldHVybiB1LmVtcHR5KCk7aWYoXCJFXCI9PT1lLmtpbmQpe3ZhciB0PWUuZXhjZXB0aW9uO2lmKGwuaXModCkpcmV0dXJuIHVbXCJ0aHJvd1wiXShlLmV4Y2VwdGlvbil9cmV0dXJuIHN9KX1lbHNlIHQ9dVtcInRocm93XCJdKGUpO3JldHVybiB0fSk7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKGZ1bmN0aW9uKGUpe3JldHVybiBzLnN1YnNjcmliZShlKX0pfSx0LmV4cG9ydHM9bn0sezE1OToxNTksNjI6NjIsNjc6NjcsODI6ODIsOTo5fV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1mdW5jdGlvbihlKXt0aGlzLmRpc3Bvc2VkPSExLHRoaXMuY3VycmVudERpc3Bvc2FibGU9ZX07bi5wcm90b3R5cGU9e2Rpc3Bvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXNwb3NlZCYmdGhpcy5jdXJyZW50RGlzcG9zYWJsZSl7dGhpcy5kaXNwb3NlZD0hMDt2YXIgZT10aGlzLmN1cnJlbnREaXNwb3NhYmxlO2UuZGlzcG9zZT9lLmRpc3Bvc2UoKTplKCl9fX0sdC5leHBvcnRzPW59LHt9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoNjQpLGE9ZSg2OCkscz1lKDY5KSx1PXtkaXNwb3NlOmZ1bmN0aW9uKCl7fX0saT1lKDE1OSkuT2JzZXJ2YWJsZSxvPXQuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXt0aGlzLm1vZGVsPWUsdGhpcy5jdXJyZW50UmVtYWluaW5nUGF0aHM9dCx0aGlzLmlzSlNPTkdyYXBoPXJ8fCExLHRoaXMuaXNQcm9ncmVzc2l2ZT1ufHwhMX07by5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShpLnByb3RvdHlwZSksby5wcm90b3R5cGUuc3Vic2NyaWJlPW4ucHJvdG90eXBlLnN1YnNjcmliZSxvLnByb3RvdHlwZS50aGVuPW4ucHJvdG90eXBlLnRoZW4sby5wcm90b3R5cGUuX3RvSlNPTkc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8odGhpcy5tb2RlbCx0aGlzLmN1cnJlbnRSZW1haW5pbmdQYXRocywhMCx0aGlzLmlzUHJvZ3Jlc3NpdmUpfSxvLnByb3RvdHlwZS5wcm9ncmVzc2l2ZWx5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvKHRoaXMubW9kZWwsdGhpcy5jdXJyZW50UmVtYWluaW5nUGF0aHMsdGhpcy5pc0pTT05HcmFwaCwhMCl9LG8ucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9W3t9XSxyPVtdLG49ZS5pc0pTT05HPXRoaXMuaXNKU09OR3JhcGgsaT10aGlzLmlzUHJvZ3Jlc3NpdmUsbz1hKHRoaXMubW9kZWwsdGhpcy5jdXJyZW50UmVtYWluaW5nUGF0aHMsZSxpLG4sdCxyKTtyZXR1cm4gbz9zKHRoaXMsdGhpcy5tb2RlbCxvLGUsdCxyLDEpOnV9fSx7MTU5OjE1OSw2NDo2NCw2ODo2OCw2OTo2OX1dLDY4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgxOSksdj1uLmdldFdpdGhQYXRoc0FzSlNPTkdyYXBoLG09bi5nZXRXaXRoUGF0aHNBc1BhdGhNYXA7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe3ZhciBzO2lmKHM9aT92KGUsdCxvKTptKGUsdCxvKSxzLmNyaXRpY2FsRXJyb3IpcmV0dXJuIHIub25FcnJvcihzLmNyaXRpY2FsRXJyb3IpLG51bGw7dmFyIHU9cy5oYXNWYWx1ZSxjPSFzLnJlcXVlc3RlZE1pc3NpbmdQYXRoc3x8IWUuX3NvdXJjZSxsPW9bMF0uanNvbnx8b1swXS5qc29uR3JhcGg7aWYocy5lcnJvcnMpZm9yKHZhciBoPXMuZXJyb3JzLHA9YS5sZW5ndGgsZj0wLGQ9aC5sZW5ndGg7ZD5mOysrZiwrK3ApYVtwXT1oW2ZdO2lmKHUmJm58fGwmJmMpdHJ5eysrZS5fcm9vdC5zeW5jUmVmQ291bnQsci5vbk5leHQob1swXSl9Y2F0Y2goZSl7dGhyb3cgZX1maW5hbGx5ey0tZS5fcm9vdC5zeW5jUmVmQ291bnR9cmV0dXJuIGM/KGEubGVuZ3RoP3Iub25FcnJvcihhKTpyLm9uQ29tcGxldGVkKCksbnVsbCk6c319LHsxOToxOX1dLDY5OltmdW5jdGlvbihlLHQscil7dmFyIGc9ZSg2OCksXz1lKDEwKSx5PWUoMzApLmZhc3RDYXQsYj1lKDQ5KSx4PWUoODgpLHc9ZSg2NiksUz1lKDQ2KTt0LmV4cG9ydHM9ZnVuY3Rpb24gaShvLGEsZSxzLHUsYyxsKXtpZigxMD09PWwpdGhyb3cgbmV3IF87dmFyIHQ9YS5fcmVxdWVzdCxoPWUucmVxdWVzdGVkTWlzc2luZ1BhdGhzLHI9ZS5vcHRpbWl6ZWRNaXNzaW5nUGF0aHMscD1uZXcgdyxuPVtdLGY9YS5fcGF0aDtpZihmLmxlbmd0aClmb3IodmFyIGQ9MCx2PWgubGVuZ3RoO3Y+ZDsrK2QpbltkXT15KGYsaFtkXSk7ZWxzZSBuPWg7dmFyIG09dC5nZXQobixyLGZ1bmN0aW9uKCl7dmFyIGU9ZyhhLGgscyxvLmlzUHJvZ3Jlc3NpdmUsby5pc0pTT05HcmFwaCx1LGMpO2lmKGUpcC5jdXJyZW50RGlzcG9zYWJsZT1pKG8sYSxlLHMsdSxjLGwrMSk7ZWxzZXt2YXIgdD1hLl9yb290LHI9dC5jYWNoZSxuPXJbU107Yih0LHQuZXhwaXJlZCx4KHIpLGEuX21heFNpemUsYS5fY29sbGVjdFJhdGlvLG4pfX0pO3JldHVybiBwLmN1cnJlbnREaXNwb3NhYmxlPW0scH19LHsxMDoxMCwzMDozMCw0Njo0Niw0OTo0OSw2Njo2Niw2ODo2OCw4ODo4OH1dLDcwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSg2Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbih0aGlzLGUpfX0sezY3OjY3fV0sNzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEzNCksaT1lKDY0KSxvPWUoNzIpLGE9ZSgxMTYpLHM9ZSg2Nyk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQ9YShhcmd1bWVudHMsbyxcImdldFwiKTtpZih0IT09ITApcmV0dXJuIG5ldyBpKGZ1bmN0aW9uKGUpe2Uub25FcnJvcih0KX0pO3ZhciBlPW4uZnJvbVBhdGhzT3JQYXRoVmFsdWVzKGFyZ3VtZW50cyk7cmV0dXJuIG5ldyBzKHRoaXMsZSl9fSx7MTE2OjExNiwxMzQ6MTM0LDY0OjY0LDY3OjY3LDcyOjcyfV0sNzI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e3BhdGg6ITAscGF0aFN5bnRheDohMH19LHt9XSw3MzpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oKXt9dmFyIGk9ZSgxMjMpLG89ZSgxNTkpLGE9by5EaXNwb3NhYmxlO24ucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUpe3JldHVybiBpKGUpLGEuZW1wdHl9LG4ucHJvdG90eXBlLnNjaGVkdWxlV2l0aFN0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gaShmdW5jdGlvbigpe3QocixlKX0pLGEuZW1wdHl9LHQuZXhwb3J0cz1ufSx7MTIzOjEyMywxNTk6MTU5fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKCl7fXZhciBpPWUoMTU5KSxvPWkuRGlzcG9zYWJsZTtuLnByb3RvdHlwZS5zY2hlZHVsZT1mdW5jdGlvbihlKXtyZXR1cm4gZSgpLG8uZW1wdHl9LG4ucHJvdG90eXBlLnNjaGVkdWxlV2l0aFN0YXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQodGhpcyxlKSxvLmVtcHR5fSx0LmV4cG9ydHM9bn0sezE1OToxNTl9XSw3NTpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSl7dGhpcy5kZWxheT1lfXZhciBpPWUoMTU5KSxvPWkuRGlzcG9zYWJsZTtuLnByb3RvdHlwZS5zY2hlZHVsZT1mdW5jdGlvbihlKXt2YXIgdD1zZXRUaW1lb3V0KGUsdGhpcy5kZWxheSk7cmV0dXJuIG8uY3JlYXRlKGZ1bmN0aW9uKCl7dm9pZCAwIT09dCYmKGNsZWFyVGltZW91dCh0KSx0PXZvaWQgMCl9KX0sbi5wcm90b3R5cGUuc2NoZWR1bGVXaXRoU3RhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49c2V0VGltZW91dChmdW5jdGlvbigpe3QocixlKX0sdGhpcy5kZWxheSk7cmV0dXJuIG8uY3JlYXRlKGZ1bmN0aW9uKCl7dm9pZCAwIT09biYmKGNsZWFyVGltZW91dChuKSxuPXZvaWQgMCl9KX0sdC5leHBvcnRzPW59LHsxNTk6MTU5fV0sNzY6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBDKGUsdCxyLG4saSxvLGEscyx1LGMsbCxoLHAsZixkLHYsbSl7Zm9yKHZhciBnPXt9LF89dDxlLmxlbmd0aC0xLHk9ZVt0XSxiPWsoeSxnKSx4PWguaW5kZXg7Oyl7bC5kZXB0aD10O3ZhciB3PVQocixuLGksbyxhLHMsYixfLCExLGwsaCxwLGYsZCx2LG0pO2xbdF09YixsLmluZGV4PXQsaFtoLmluZGV4KytdPWI7dmFyIFM9d1swXSxNPXdbMV07aWYoUyYmKF8/QyhlLHQrMSxyLE0sUyxvLHdbM10sd1syXSx1LGMsbCxoLHAsZixkLHYsbSk6KE8oZCxTKSx1LnB1c2gobC5zbGljZSgwLGwuaW5kZXgrMSkpLGMucHVzaChoLnNsaWNlKDAsaC5pbmRleCkpKSksYj1rKHksZyksZy5kb25lKWJyZWFrO2guaW5kZXg9eH19ZnVuY3Rpb24gXyhlLHQscixuLGksbyxhLHMsdSxjLGwpe3ZhciBoPXQudmFsdWU7aWYoby5zcGxpY2UoMCxvLmxlbmd0aCksby5wdXNoLmFwcGx5KG8saCksUCh0KSlyZXR1cm4gby5pbmRleD1oLmxlbmd0aCxSKHQscyx1KSxbdm9pZCAwLGUsbixyXTtPKHUsdCk7dmFyIHA9MCxmPXQsZD1oLmxlbmd0aC0xLHY9dD1lLG09bj1yO2Rve3ZhciBnPWhbcF0sXz1kPnAseT1UKGUsdix0LHIsbSxuLGcsXywhMCxpLG8sYSxzLHUsYyxsKTtpZih0PXlbMF0saih0KSlyZXR1cm4gby5pbmRleD1wLHk7dj15WzFdLG49eVsyXSxtPXlbM119d2hpbGUocCsrPGQpO2lmKG8uaW5kZXg9cCxmW3ddIT09dCl7dmFyIGI9dFtNXXx8MDt0W01dPWIrMSx0W3grYl09ZixmW3ddPXQsZltTXT1ifXJldHVyblt0LHYsbixtXX1mdW5jdGlvbiBUKGUsdCxyLG4saSxvLGEscyx1LGMsbCxoLHAsZixkLHYpe2Zvcih2YXIgbT1yLiR0eXBlO209PT1iOyl7dmFyIGc9XyhlLHIsbixvLGMsbCxoLHAsZixkLHYpO2lmKHI9Z1swXSxqKHIpKXJldHVybiBnO3Q9Z1sxXSxvPWdbMl0saT1nWzNdLG09ci4kdHlwZX1pZih2b2lkIDAhPT1tKXJldHVybltyLHQsbyxpXTtpZihudWxsPT1hKXtpZihzKXRocm93IG5ldyBFcnJvcihcImBudWxsYCBpcyBub3QgYWxsb3dlZCBpbiBicmFuY2gga2V5IHBvc2l0aW9ucy5cIik7ciYmKGE9clt5XSl9ZWxzZSB0PXIsaT1vLHI9dFthXSxvPWkmJmlbYV07cmV0dXJuIHI9Tih0LHIsbyxhLGMsbCxoLHAsZixkLHYpLFtyLHQsbyxpXX12YXIgeT1lKDM2KSx4PWUoNDMpLHc9ZSgzMyksRT1lKDQ2KSxTPWUoNDIpLE09ZSg0NCksYj1lKDEyMCksTz1lKDUwKSxQPWUoOTQpLEE9ZSg5Niksaj1lKDEwMiksUj1lKDg2KSxrPWUoMTQzKS5pdGVyYXRlS2V5U2V0LEw9ZSg5MiksTj1lKDEwMyk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4saSl7Zm9yKHZhciBvPWUuX3Jvb3QsYT1vLHM9by5leHBpcmVkLHU9TCgpLGM9by5jYWNoZSxsPWNbRV0saD1bXSxwPVtdLGY9W10sZD1bXSx2PS0xLG09dC5sZW5ndGg7Kyt2PG07KWZvcih2YXIgZz10W3ZdLF89Zy5wYXRocyx5PWcuanNvbkdyYXBoLGI9LTEseD1fLmxlbmd0aDsrK2I8eDspe3ZhciB3PV9bYl07cC5pbmRleD0wLEModywwLGMsYyxjLHkseSx5LGYsZCxoLHAsdSxzLGEsaSxuKX12YXIgUz1jW0VdLE09by5vbkNoYW5nZTtyZXR1cm4gQShNKSYmbCE9PVMmJk0oKSxbZixkXX19LHsxMDI6MTAyLDEwMzoxMDMsMTIwOjEyMCwxNDM6MTQzLDMzOjMzLDM2OjM2LDQyOjQyLDQzOjQzLDQ0OjQ0LDQ2OjQ2LDUwOjUwLDg2Ojg2LDkyOjkyLDk0Ojk0LDk2Ojk2fV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBNKGUsdCxyLG4saSxvLGEscyx1LGMsbCxoLHAsZil7dmFyIGQ9VChlKTtpZihkJiZkLmxlbmd0aClmb3IodmFyIHY9MCxtPWQubGVuZ3RoLGc9dS5pbmRleDs7KXt2YXIgXz1kW3ZdLHk9ZVtfXSxiPWooeSkmJiF5LiR0eXBlO3MuZGVwdGg9dDt2YXIgeD1DKHIsbixpLF8seSxiLCExLHMsdSxjLGwsaCxwLGYpO3NbdF09XyxzLmluZGV4PXQsdVt1LmluZGV4KytdPV87dmFyIHc9eFswXSxTPXhbMV07aWYodyYmKGI/TSh5LHQrMSxyLFMsdyxvLGEscyx1LGMsbCxoLHAsZik6KEEoaCx3KSxvLnB1c2gocy5zbGljZSgwLHMuaW5kZXgrMSkpLGEucHVzaCh1LnNsaWNlKDAsdS5pbmRleCkpKSksKyt2Pj1tKWJyZWFrO3UuaW5kZXg9Z319ZnVuY3Rpb24gbShlLHQscixuLGksbyxhLHMsdSxjKXt2YXIgbD1yLnZhbHVlO2lmKGkuc3BsaWNlKDAsaS5sZW5ndGgpLGkucHVzaC5hcHBseShpLGwpLFMocikpcmV0dXJuIGkuaW5kZXg9bC5sZW5ndGgsTChyLGEscyksW3ZvaWQgMCx0XTtBKHMscik7dmFyIGg9cixwPXQ7aWYocj1yW2JdLG51bGwhPXIpcD1yW0VdfHx0LGkuaW5kZXg9bC5sZW5ndGg7ZWxzZXt2YXIgZj0wLGQ9bC5sZW5ndGgtMTtwPXI9dDtkb3t2YXIgdj1sW2ZdLG09ZD5mLGc9Qyh0LHAscix2LGUsbSwhMCxuLGksbyxhLHMsdSxjKTtpZihyPWdbMF0sayhyKSlyZXR1cm4gaS5pbmRleD1mLGc7cD1nWzFdfXdoaWxlKGYrKzxkKTtpZihpLmluZGV4PWYsaFtiXSE9PXIpe3ZhciBfPXJbd118fDA7clt3XT1fKzEsclt5K19dPWgsaFtiXT1yLGhbeF09X319cmV0dXJuW3IscF19ZnVuY3Rpb24gQyhlLHQscixuLGksbyxhLHMsdSxjLGwsaCxwLGYpe2Zvcih2YXIgZD1yLiR0eXBlO2Q9PT1fOyl7dmFyIHY9bShpLGUscixzLHUsYyxsLGgscCxmKTtpZihyPXZbMF0sayhyKSlyZXR1cm4gdjt0PXZbMV0sZD1yJiZyLiR0eXBlfWlmKHZvaWQgMCE9PWQpcmV0dXJuW3IsdF07aWYobnVsbD09bil7aWYobyl0aHJvdyBuZXcgRXJyb3IoXCJgbnVsbGAgaXMgbm90IGFsbG93ZWQgaW4gYnJhbmNoIGtleSBwb3NpdGlvbnMuXCIpO3ImJihuPXJbZ10pfWVsc2UgdD1yLHI9dFtuXTtyZXR1cm4gcj1JKHQscixuLGksbyxhLHMsdSxjLGwsaCxwLGYpLFtyLHRdfWZ1bmN0aW9uIFQoZSl7aWYoaihlKSYmIWUuJHR5cGUpe3ZhciB0PVtdLHI9MDtvKGUpJiYodFtyKytdPVwibGVuZ3RoXCIpO2Zvcih2YXIgbiBpbiBlKW5bMF0hPT1pJiZcIiRcIiE9PW5bMF0mJmEoZSxuKSYmKHRbcisrXT1uKTtyZXR1cm4gdH19dmFyIGc9ZSgzNikseT1lKDQzKSxpPWUoNDApLEU9ZSgzOSksYj1lKDMzKSxPPWUoNDYpLHg9ZSg0Miksdz1lKDQ0KSxfPWUoMTIwKSxQPWUoMTMpLG89QXJyYXkuaXNBcnJheSxBPWUoNTApLGE9ZSg5MSksaj1lKDEwMCksUz1lKDk1KSxSPWUoOTYpLGs9ZSgxMDIpLEw9ZSg4NiksTj1lKDkyKSxJPWUoMTA0KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbixpKXtmb3IodmFyIG89ZS5fcm9vdCxhPW8scz1vLmV4cGlyZWQsdT1OKCksYz1lLl9wYXRoLGw9by5jYWNoZSxoPWMubGVuZ3RoP1AoZSxjKS52YWx1ZTpsLHA9aFtFXXx8bCxmPWxbT10sZD1bXSx2PVtdLG09W10sZz1jLmxlbmd0aCxfPS0xLHk9dC5sZW5ndGg7KytfPHk7KXt2YXIgYj10W19dLHg9Yy5zbGljZSgwKTt4LmluZGV4PWcsTShiLmpzb24sMCxsLHAsaCx2LG0sZCx4LHUscyxhLGksbil9dmFyIHc9bFtPXSxTPW8ub25DaGFuZ2U7cmV0dXJuIFIoUykmJmYhPT13JiZTKCksW3YsbV19fSx7MTAwOjEwMCwxMDI6MTAyLDEwNDoxMDQsMTIwOjEyMCwxMzoxMywzMzozMywzNjozNiwzOTozOSw0MDo0MCw0Mjo0Miw0Mzo0Myw0NDo0NCw0Njo0Niw1MDo1MCw4Njo4Niw5MTo5MSw5Mjo5Miw5NTo5NSw5Njo5Nn1dLDc4OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gVChlLHQscixuLGksbyxhLHMsdSxjLGwsaCxwLGYsZCl7Zm9yKHZhciB2PXt9LG09cjx0Lmxlbmd0aC0xLGc9dFtyXSxfPWsoZyx2KSx5PWMuaW5kZXg7Oyl7dS5kZXB0aD1yO3ZhciBiPVMobixpLG8sXyxlLG0sITEsdSxjLGwsaCxwLGYsZCk7dVtyXT1fLHUuaW5kZXg9cixjW2MuaW5kZXgrK109Xzt2YXIgeD1iWzBdLHc9YlsxXTtpZih4JiYobT9UKGUsdCxyKzEsbix3LHgsYSxzLHUsYyxsLGgscCxmLGQpOihNKHAseCksYS5wdXNoKHUuc2xpY2UoMCx1LmluZGV4KzEpKSxzLnB1c2goYy5zbGljZSgwLGMuaW5kZXgpKSkpLF89ayhnLHYpLHYuZG9uZSlicmVhaztjLmluZGV4PXl9fWZ1bmN0aW9uIG0oZSx0LHIsbixpLG8sYSxzLHUsYyl7dmFyIGw9ci52YWx1ZTtpZihpLnNwbGljZSgwLGkubGVuZ3RoKSxpLnB1c2guYXBwbHkoaSxsKSxDKHIpKXJldHVybiBpLmluZGV4PWwubGVuZ3RoLFIocixhLHMpLFt2b2lkIDAsdF07TShzLHIpO3ZhciBoPXIscD10O2lmKHI9cltiXSxudWxsIT1yKXA9cltFXXx8dCxpLmluZGV4PWwubGVuZ3RoO2Vsc2V7dmFyIGY9MCxkPWwubGVuZ3RoLTE7cD1yPXQ7ZG97dmFyIHY9bFtmXSxtPWQ+ZixnPVModCxwLHIsdixlLG0sITAsbixpLG8sYSxzLHUsYyk7aWYocj1nWzBdLGoocikpcmV0dXJuIGkuaW5kZXg9ZixnO3A9Z1sxXX13aGlsZShmKys8ZCk7aWYoaS5pbmRleD1mLGhbYl0hPT1yKXt2YXIgXz1yW3ddfHwwO3Jbd109XysxLHJbeStfXT1oLGhbYl09cixoW3hdPV99fXJldHVybltyLHBdfWZ1bmN0aW9uIFMoZSx0LHIsbixpLG8sYSxzLHUsYyxsLGgscCxmKXtmb3IodmFyIGQ9ci4kdHlwZTtkPT09Xzspe3ZhciB2PW0oaSxlLHIscyx1LGMsbCxoLHAsZik7aWYocj12WzBdLGoocikpcmV0dXJuIHY7dD12WzFdLGQ9ci4kdHlwZX1pZih2b2lkIDAhPT1kKXJldHVybltyLHRdO2lmKG51bGw9PW4pe2lmKG8pdGhyb3cgbmV3IEVycm9yKFwiYG51bGxgIGlzIG5vdCBhbGxvd2VkIGluIGJyYW5jaCBrZXkgcG9zaXRpb25zLlwiKTtyJiYobj1yW2ddKX1lbHNlIHQ9cixyPXRbbl07cmV0dXJuIHI9Tih0LHIsbixpLG8sYSxzLHUsYyxsLGgscCxmKSxbcix0XX12YXIgZz1lKDM2KSx5PWUoNDMpLEU9ZSgzOSksYj1lKDMzKSxPPWUoNDYpLHg9ZSg0Miksdz1lKDQ0KSxfPWUoMTIwKSxQPWUoMTMpLE09ZSg1MCksQz1lKDk1KSxBPWUoOTYpLGo9ZSgxMDIpLFI9ZSg4Niksaz1lKDE0MykuaXRlcmF0ZUtleVNldCxMPWUoOTIpLE49ZSgxMDQpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuLGkpe2Zvcih2YXIgbz1lLl9yb290LGE9byxzPW8uZXhwaXJlZCx1PUwoKSxjPWUuX3BhdGgsbD1vLmNhY2hlLGg9Yy5sZW5ndGg/UChlLGMpLnZhbHVlOmwscD1oW0VdfHxsLGY9bFtPXSxkPVtdLHY9W10sbT1bXSxnPWMubGVuZ3RoLF89LTEseT10Lmxlbmd0aDsrK188eTspe3ZhciBiPXRbX10seD1iLnBhdGgsdz1iLnZhbHVlLFM9Yy5zbGljZSgwKTtTLmluZGV4PWcsVCh3LHgsMCxsLHAsaCx2LG0sZCxTLHUscyxhLGksbil9dmFyIE09bFtPXSxDPW8ub25DaGFuZ2U7cmV0dXJuIEEoQykmJmYhPT1NJiZDKCksW3YsbV19fSx7MTAyOjEwMiwxMDQ6MTA0LDEyMDoxMjAsMTM6MTMsMTQzOjE0MywzMzozMywzNjozNiwzOTozOSw0Mjo0Miw0Mzo0Myw0NDo0NCw0Njo0Niw1MDo1MCw4Njo4Niw5Mjo5Miw5NTo5NSw5Njo5Nn1dLDc5OltmdW5jdGlvbihlLHQscil7dmFyIHM9ZSgxMzApLHU9ZSg2NCksYz1lKDEwMSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWMoZSk/ZTpzLnBhdGhWYWx1ZShlLHQpLG49MCxvPXIucGF0aCxpPW8ubGVuZ3RoOysrbjxpOylpZihcIm9iamVjdFwiPT10eXBlb2Ygb1tuXSlyZXR1cm4gbmV3IHUoZnVuY3Rpb24oZSl7ZS5vbkVycm9yKG5ldyBFcnJvcihcIlBhdGhzIG11c3QgYmUgc2ltcGxlIHBhdGhzXCIpKX0pO3ZhciBhPXRoaXM7cmV0dXJuIG5ldyB1KGZ1bmN0aW9uKGkpe3JldHVybiBhLl9zZXQocikuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmpzb24scj0tMSxuPW8ubGVuZ3RoO3QmJisrcjxuOyl0PXRbb1tyXV07aS5vbk5leHQodCl9LGZ1bmN0aW9uKGUpe2kub25FcnJvcihlKX0sZnVuY3Rpb24oKXtpLm9uQ29tcGxldGVkKCl9KX0pfX0sezEwMToxMDEsMTMwOjEzMCw2NDo2NH1dLDgwOltmdW5jdGlvbihlLHQscil7dmFyIHU9ZSgxMzQpLGM9ZSgxMDEpLGw9ZSg3OCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXUuZnJvbVBhdGgoZSksbz10LGE9cixzPW47aWYoYyhpKT8ocz1hLGE9byxvPWkpOm89e3BhdGg6aSx2YWx1ZTpvfSxjKG8pPT09ITEpdGhyb3cgbmV3IEVycm9yKFwiTW9kZWwjc2V0VmFsdWVTeW5jIG11c3QgYmUgY2FsbGVkIHdpdGggYW4gQXJyYXkgcGF0aC5cIik7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgYSYmKGE9dGhpcy5fcm9vdC5fZXJyb3JTZWxlY3RvciksXCJmdW5jdGlvblwiIT10eXBlb2YgcyYmKHM9dGhpcy5fcm9vdC5fY29tcGFyYXRvciksdGhpcy5fc3luY0NoZWNrKFwic2V0VmFsdWVTeW5jXCIpPyhsKHRoaXMsW29dKSx0aGlzLl9nZXRWYWx1ZVN5bmModGhpcyxvLnBhdGgpLnZhbHVlKTp2b2lkIDB9fSx7MTAxOjEwMSwxMzQ6MTM0LDc4Ojc4fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIGU7Zm9yKHZhciB0PS0xLHI9ZS5sZW5ndGgsbj1bXTsrK3Q8cjspblt0XT1lW3RdO3JldHVybiBufX0se31dLDgyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPS0xLG49LTEsaT1lLmxlbmd0aCxvPVtdOysrbjxpOylmb3IodmFyIGE9dChlW25dLG4sZSkscz0tMSx1PWEubGVuZ3RoOysrczx1OylvWysrcl09YVtzXTtyZXR1cm4gb319LHt9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0tMSxuPWUubGVuZ3RoLGk9bmV3IEFycmF5KG4pOysrcjxuOylpW3JdPXQoZVtyXSxyLGUpO3JldHVybiBpfX0se31dLDg0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10fHwwLGk9LTEsbz1lLmxlbmd0aC1uOzA+byYmKG89MCkscj4wJiZvPnImJihvPXIpO2Zvcih2YXIgYT1uZXcgQXJyYXkobyk7KytpPG87KWFbaV09ZVtpK25dO3JldHVybiBhfX0se31dLDg1OltmdW5jdGlvbihlLHQscil7dmFyIGk9ZSg0MCksbz1lKDkxKSxhPUFycmF5LmlzQXJyYXkscz1lKDEwMCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PWU7aWYocyh0KSl7dD1hKGUpP1tdOnt9O3ZhciByPWU7Zm9yKHZhciBuIGluIHIpblswXSE9PWkmJm8ocixuKSYmKHRbbl09cltuXSl9cmV0dXJuIHR9fSx7MTAwOjEwMCw0MDo0MCw5MTo5MX1dLDg2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSg1MSksaT1lKDM1KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW2ldfHwoZVtpXT0hMCx0LnB1c2goZSksbihyLGUpKSxlfX0sezM1OjM1LDUxOjUxfV0sODc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEwMCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpJiZlLiRleHBpcmVzfHx2b2lkIDB9fSx7MTAwOjEwMH1dLDg4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgxMDApO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihlKSYmZS4kc2l6ZXx8MH19LHsxMDA6MTAwfV0sODk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEwMCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpJiZlLiR0aW1lc3RhbXB8fHZvaWQgMH19LHsxMDA6MTAwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEwMCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bihlKSYmZS4kdHlwZXx8dm9pZCAwO3JldHVybiB0JiZyP1wiYnJhbmNoXCI6cn19LHsxMDA6MTAwfV0sOTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEwMCksaT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuKGUpJiZpLmNhbGwoZSx0KX19LHsxMDA6MTAwfV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj0xO3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBuKyt9fSx7fV0sOTM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgaT1lKDM2KSxvPWUoMzkpLGE9ZSg0Nik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiBlW2ldPXIsZVtvXT10LGVbYV09bix0W3JdPWUsZX19LHszNjozNiwzOTozOSw0Njo0Nn1dLDk0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgxMDYpLGk9ZSgxMjIpLG89ZSgxMjEpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1lLiRleHBpcmVzO3JldHVybiBudWxsIT10JiZ0IT09byYmdCE9PWkmJnQ8bigpfX0sezEwNjoxMDYsMTIxOjEyMSwxMjI6MTIyfV0sOTU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEwNiksaT1lKDEyMiksbz1lKDEyMSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PWUuJGV4cGlyZXM7cmV0dXJuIG51bGwhPXQmJnQhPT1vJiYodD09PWl8fHQ8bigpKX19LHsxMDY6MTA2LDEyMToxMjEsMTIyOjEyMn1dLDk2OltmdW5jdGlvbihlLHQscil7dmFyIG49XCJmdW5jdGlvblwiO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gQm9vbGVhbihlKSYmdHlwZW9mIGU9PT1ufX0se31dLDk3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSg0MCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwiJHNpemVcIj09PWV8fGUmJmUuY2hhckF0KDApPT09bn19LHs0MDo0MH1dLDk4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgxMDApO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihlKSYmXCJqc29uXCJpbiBlfX0sezEwMDoxMDB9XSw5OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPUFycmF5LmlzQXJyYXksaT1lKDEwMCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpKGUpJiZuKGUucGF0aHMpJiYoaShlLmpzb25HcmFwaCl8fGkoZS5qc29uZyl8fGkoZS5qc29uKXx8aShlLnZhbHVlcyl8fGkoZS52YWx1ZSkpfX0sezEwMDoxMDB9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1cIm9iamVjdFwiO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJnR5cGVvZiBlPT09bn19LHt9XSwxMDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1BcnJheS5pc0FycmF5LGk9ZSgxMDApO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaShlKSYmKG4oZS5wYXRoKXx8XCJzdHJpbmdcIj09dHlwZW9mIGUucGF0aCl9fSx7MTAwOjEwMH1dLDEwMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVwib2JqZWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lfHx0eXBlb2YgZSE9PW59fSx7fV0sMTAzOltmdW5jdGlvbihlLHQscil7dmFyIHk9ZSgzNiksYj1lKDM5KSx4PWUoMTIwKSx3PWUoMTE5KSxTPWUoODgpLE09ZSg4OSksQz1lKDEwMCksVD1lKDk1KSxFPWUoOTYpLE89ZSg1MCksUD1lKDExNyksQT1lKDkzKSxqPWUoODYpLFI9ZSgxMTApLGs9ZSgxMTUpLEw9ZSgxMDcpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuLGksbyxhLHMsdSxjLGwpe3ZhciBoLHAsZixkLHYsbSxnO2lmKHQ9PT1yKXtpZihudWxsPT09cilyZXR1cm4gdD1QKHIsdm9pZCAwLHIpLGU9ayhlLC10LiRzaXplLHUsYSksdD1BKHQsZSxuKSxPKHUsdCksdDtpZih2b2lkIDA9PT1yKXJldHVybiByO2lmKGQ9Qyh0KSxkJiYocD10LiR0eXBlLG51bGw9PXApKXJldHVybiBudWxsPT10W2JdJiYodFt5XT1uLHRbYl09ZSksdH1lbHNlIGQ9Qyh0KSxkJiYocD10LiR0eXBlKTtpZihwIT09eCl7aWYodj1DKHIpLHYmJihmPXIuJHR5cGUpLGQmJiFwJiYobnVsbD09cnx8diYmIWYpKXJldHVybiB0fWVsc2V7aWYobnVsbD09cilyZXR1cm4gVCh0KT92b2lkIGoodCxzLHUpOnQ7aWYodj1DKHIpLHYmJihmPXIuJHR5cGUsZj09PXgpKWlmKHQ9PT1yKXtpZihudWxsIT10W2JdKXJldHVybiB0fWVsc2UgaWYobT10LiR0aW1lc3RhbXAsZz1yLiR0aW1lc3RhbXAsIVQodCkmJiFUKHIpJiZtPmcpcmV0dXJufWlmKHAmJnYmJiFmKXJldHVybiBBKFIodCxyLGUsbix1KSxlLG4pO2lmKGZ8fCF2KXtpZihmPT09dyYmRShsKSYmKHI9bChMKGksbikscikpLGYmJnQ9PT1yKW51bGw9PXRbYl0mJih0PVAodCxwLHQudmFsdWUpLGU9ayhlLC10LiRzaXplLHUsYSksdD1BKHQsZSxuLGEpKTtlbHNle3ZhciBfPSEwOyFwJiZkfHwoXz1NKHIpPE0odCk9PSExLChwfHxmKSYmRShjKSYmKF89IWModCxyLG8uc2xpY2UoMCxvLmluZGV4KSkpKSxfJiYocj1QKHIsZixmP3IudmFsdWU6ciksaD1TKHQpLVMociksdD1SKHQscixlLG4sdSksZT1rKGUsaCx1LGEpLHQ9QSh0LGUsbixhKSl9VCh0KT9qKHQscyx1KTpPKHUsdCl9ZWxzZSBudWxsPT10JiYodD1BKHIsZSxuKSk7cmV0dXJuIHR9fSx7MTAwOjEwMCwxMDc6MTA3LDExMDoxMTAsMTE1OjExNSwxMTc6MTE3LDExOToxMTksMTIwOjEyMCwzNjozNiwzOTozOSw1MDo1MCw4Njo4Niw4ODo4OCw4OTo4OSw5Mzo5Myw5NTo5NSw5Njo5Nn1dLDEwNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBfPWUoMTIwKSx5PWUoMTE5KSxiPWUoOTApLHg9ZSg4OCksdz1lKDg5KSxTPWUoOTUpLE09ZSgxMDIpLEM9ZSg5NiksVD1lKDExNyksRT1lKDg2KSxPPWUoOTMpLFA9ZSgxMTApLEE9ZSgxMTUpLGo9ZSgxMTQpLFI9ZSgxMDcpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuLGksbyxhLHMsdSxjLGwsaCxwKXt2YXIgZj1iKHQsbyk7aWYoaXx8bylmJiZTKHQpJiYoZj1cImV4cGlyZWRcIixFKHQsYyxsKSksKGYmJmYhPT1ffHxNKHQpKSYmKHQ9UCh0LHt9LGUscixsKSx0PU8odCxlLHIsdSksdD1qKHQsdSkpO2Vsc2V7dmFyIGQ9bix2PWIoZCksbT13KGQpPHcodCk9PSExO2lmKChmfHx2KSYmQyhoKSYmKG09IWgodCxkLHMuc2xpY2UoMCxzLmluZGV4KSkpLG0pe3Y9PT15JiZDKHApJiYoZD1wKFIoYSxyKSxkKSksZD1UKGQsdix2P2QudmFsdWU6ZCk7dmFyIGc9eCh0KS14KGQpO3Q9UCh0LGQsZSxyLGwpLGU9QShlLGcsbCx1KSx0PU8odCxlLHIsdSl9fXJldHVybiB0fX0sezEwMjoxMDIsMTA3OjEwNywxMTA6MTEwLDExNDoxMTQsMTE1OjExNSwxMTc6MTE3LDExOToxMTksMTIwOjEyMCw4Njo4Niw4ODo4OCw4OTo4OSw5MDo5MCw5Mzo5Myw5NTo5NSw5Njo5Nn1dLDEwNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwxMDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9RGF0ZS5ub3d9LHt9XSwxMDc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnNsaWNlKDAsZS5kZXB0aCk7cmV0dXJuIHJbci5sZW5ndGhdPXQscn19LHt9XSwxMDg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbz1lKDEyMCksYT1lKDM5KSxzPWUoNTEpLHU9ZSgxMDApLGM9ZSgxMTIpLGw9ZSgxMTMpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXtpZih1KGUpKXt2YXIgaT1lLiR0eXBlO3JldHVybiBCb29sZWFuKGkpJiYoaT09PW8mJmwoZSkscyhuLGUpKSxjKGUpLHRbcl09ZVthXT12b2lkIDAsITB9cmV0dXJuITF9fSx7MTAwOjEwMCwxMTI6MTEyLDExMzoxMTMsMTIwOjEyMCwzOTozOSw1MTo1MX1dLDEwOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUoOTEpLHM9ZSg0MCksdT1lKDEwOCk7dC5leHBvcnRzPWZ1bmN0aW9uIGUodCxyLG4saSl7aWYodSh0LHIsbixpKSl7aWYobnVsbD09dC4kdHlwZSlmb3IodmFyIG8gaW4gdClvWzBdIT09cyYmXCIkXCIhPT1vWzBdJiZhKHQsbykmJmUodFtvXSx0LG8saSk7cmV0dXJuITB9cmV0dXJuITF9fSx7MTA4OjEwOCw0MDo0MCw5MTo5MX1dLDExMDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBvPWUoMTAwKSxhPWUoMTExKSxzPWUoMTA5KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbixpKXtyZXR1cm4gZT09PXQ/ZToobyhlKSYmKGEoZSx0KSxzKGUscixuLGkpKSxyW25dPXQsdCl9fSx7MTAwOjEwMCwxMDk6MTA5LDExMToxMTF9XSwxMTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgYT1lKDQzKSxzPWUoMzMpLHU9ZSg0NCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWVbdV18fDAsbj10W3VdfHwwLGk9LTE7KytpPHI7KXt2YXIgbz1lW2EraV07dm9pZCAwIT09byYmKG9bc109dCx0W2ErKG4raSldPW8sZVthK2ldPXZvaWQgMCl9cmV0dXJuIHRbdV09cituLGVbdV09dm9pZCAwLHR9fSx7MzM6MzMsNDM6NDMsNDQ6NDR9XSwxMTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgaT1lKDQzKSxvPWUoMzMpLGE9ZSg0Mikscz1lKDQ0KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PS0xLHI9ZVtzXXx8MDsrK3Q8cjspe3ZhciBuPWVbaSt0XTtudWxsIT1uJiYobltvXT1uW2FdPWVbaSt0XT12b2lkIDApfXJldHVybiBlW3NdPXZvaWQgMCxlfX0sezMzOjMzLDQyOjQyLDQzOjQzLDQ0OjQ0fV0sMTEzOltmdW5jdGlvbihlLHQscil7dmFyIGk9ZSg0Myksbz1lKDMzKSxhPWUoNDIpLHM9ZSg0NCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PWVbb107aWYodCl7Zm9yKHZhciByPShlW2FdfHwwKS0xLG49KHRbc118fDApLTE7KytyPD1uOyl0W2krcl09dFtpKyhyKzEpXTt0W3NdPW4sZVthXT1lW29dPXQ9dm9pZCAwfXJldHVybiBlfX0sezMzOjMzLDQyOjQyLDQzOjQzLDQ0OjQ0fV0sMTE0OltmdW5jdGlvbihlLHQscil7dmFyIHM9ZSg0MyksdT1lKDM5KSxjPWUoNDYpLGw9ZSg0NCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W2VdLG49MDtkb3t2YXIgaT1yW24tLV07aWYoaSYmaVtjXSE9PXQpe2lbY109dCxyW24rK109aVt1XTtmb3IodmFyIG89LTEsYT1pW2xdfHwwOysrbzxhOylyW24rK109aVtzK29dfX13aGlsZShuPi0xKTtyZXR1cm4gZX19LHszOTozOSw0Mzo0Myw0NDo0NCw0Njo0Nn1dLDExNTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBzPWUoMzYpLHU9ZSg0NiksYz1lKDM5KSxsPWUoMTA4KSxoPWUoMTE0KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9ZTtkb3t2YXIgbz1pW2NdLGE9aS4kc2l6ZT0oaS4kc2l6ZXx8MCktdDswPj1hJiZudWxsIT1vP2woaSxvLGlbc10scik6aVt1XSE9PW4mJmgoaSxuKSxpPW99d2hpbGUoaSk7cmV0dXJuIGV9fSx7MTA4OjEwOCwxMTQ6MTE0LDM2OjM2LDM5OjM5LDQ2OjQ2fV0sMTE2OltmdW5jdGlvbihlLHQscil7dmFyIHM9QXJyYXkuaXNBcnJheSx1PWUoMTAxKSxjPWUoOTkpLGw9ZSg5OCksaD1lKDEzNCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjsrK24pe3ZhciBvPWVbbl0sYT0hMTtpZihzKG8pJiZ0LnBhdGg/YT0hMDpcInN0cmluZ1wiPT10eXBlb2YgbyYmdC5wYXRoU3ludGF4P2E9ITA6dShvKSYmdC5wYXRoVmFsdWU/KG8ucGF0aD1oLmZyb21QYXRoKG8ucGF0aCksYT0hMCk6YyhvKSYmdC5qc29uR3JhcGg/YT0hMDpsKG8pJiZ0Lmpzb24/YT0hMDpcImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiZuKzE9PT1pJiZ0LnNlbGVjdG9yJiYoYT0hMCksIWEpcmV0dXJuIG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBhcmd1bWVudCBcIit0eXBlb2YgbytcIiBbXCIrU3RyaW5nKG8pK1wiXSB0byBNb2RlbCNcIityKX1yZXR1cm4hMH19LHsxMDE6MTAxLDEzNDoxMzQsOTg6OTgsOTk6OTl9XSwxMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDEzMCkscz1uLmF0b20sdT1lKDEwNiksYz1lKDEyMiksbD1lKDM3KSxoPTUwLHA9ZSg4NSksZj1BcnJheS5pc0FycmF5LGQ9ZSg4OCksdj1lKDg3KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsaT1lLG89dDtpZihvPyhpPXAoaSksbj1kKGkpLGkuJHR5cGU9byk6KGk9cyhyKSxvPWkuJHR5cGUsaVtsXT0hMCksbnVsbD09ciluPWgrMTtlbHNlIGlmKG51bGw9PW58fDA+PW4pc3dpdGNoKHR5cGVvZiByKXtjYXNlXCJvYmplY3RcIjpuPWYocik/aCtyLmxlbmd0aDpoKzE7YnJlYWs7Y2FzZVwic3RyaW5nXCI6bj1oK3IubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6bj1oKzF9dmFyIGE9dihpKTtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgYSYmYz5hJiYoaS4kZXhwaXJlcz11KCkrLTEqYSksaS4kc2l6ZT1uLGl9fSx7MTA2OjEwNiwxMjI6MTIyLDEzMDoxMzAsMzc6MzcsODU6ODUsODc6ODcsODg6ODh9XSwxMTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9XCJhdG9tXCJ9LHt9XSwxMTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9XCJlcnJvclwifSx7fV0sMTIwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPVwicmVmXCJ9LHt9XSwxMjE6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9MX0se31dLDEyMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0wfSx7fV0sMTIzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe2lmKHUubGVuZ3RoKXRocm93IHUuc2hpZnQoKX1mdW5jdGlvbiBpKGUpe3ZhciB0O3Q9cy5sZW5ndGg/cy5wb3AoKTpuZXcgbyx0LnRhc2s9ZSxhKHQpfWZ1bmN0aW9uIG8oKXt0aGlzLnRhc2s9bnVsbH12YXIgYT1lKDEyNCkscz1bXSx1PVtdLGM9YS5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIobik7dC5leHBvcnRzPWksby5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbigpe3RyeXt0aGlzLnRhc2suY2FsbCgpfWNhdGNoKGUpe2kub25lcnJvcj9pLm9uZXJyb3IoZSk6KHUucHVzaChlKSxjKCkpfWZpbmFsbHl7dGhpcy50YXNrPW51bGwsc1tzLmxlbmd0aF09dGhpc319fSx7MTI0OjEyNH1dLDEyNDpbZnVuY3Rpb24oZSxoLHQpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe2EubGVuZ3RofHwobygpLHM9ITApLGFbYS5sZW5ndGhdPWV9ZnVuY3Rpb24gcigpe2Zvcig7dTxhLmxlbmd0aDspe3ZhciBlPXU7aWYodSs9MSxhW2VdLmNhbGwoKSx1PmMpe2Zvcih2YXIgdD0wLHI9YS5sZW5ndGgtdTtyPnQ7dCsrKWFbdF09YVt0K3VdO2EubGVuZ3RoLT11LHU9MH19YS5sZW5ndGg9MCx1PTAscz0hMX1mdW5jdGlvbiBuKGUpe3ZhciB0PTEscj1uZXcgbChlKSxuPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO3JldHVybiByLm9ic2VydmUobix7Y2hhcmFjdGVyRGF0YTohMH0pLGZ1bmN0aW9uKCl7dD0tdCxuLmRhdGE9dH19ZnVuY3Rpb24gaShuKXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7Y2xlYXJUaW1lb3V0KHQpLGNsZWFySW50ZXJ2YWwociksbigpfXZhciB0PXNldFRpbWVvdXQoZSwwKSxyPXNldEludGVydmFsKGUsNTApfX1oLmV4cG9ydHM9dDt2YXIgbyxhPVtdLHM9ITEsdT0wLGM9MTAyNCxsPWUuTXV0YXRpb25PYnNlcnZlcnx8ZS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO289XCJmdW5jdGlvblwiPT10eXBlb2YgbD9uKHIpOmkociksdC5yZXF1ZXN0Rmx1c2g9byx0Lm1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcj1pfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuP246XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwxMjU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKGUsdCl7dmFyIHI7Zm9yKHIgaW4gdCllW3JdPXRbcl07cmV0dXJuIGV9ZnVuY3Rpb24gbihlLHQpe2lmKHRoaXMuX2pzb25nVXJsPWUsXCJudW1iZXJcIj09dHlwZW9mIHQpe3ZhciByPXt0aW1lb3V0OnR9O3Q9cn10aGlzLl9jb25maWc9Yyh7dGltZW91dDoxNWUzLGhlYWRlcnM6e319LHR8fHt9KX12YXIgbD1lKDEyOSksaT1lKDEyNik7QXJyYXkuaXNBcnJheTtuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bixidWlsZFF1ZXJ5T2JqZWN0OmksZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVwiR0VUXCIscj10aGlzLmJ1aWxkUXVlcnlPYmplY3QodGhpcy5fanNvbmdVcmwsdCx7cGF0aHM6ZSxtZXRob2Q6XCJnZXRcIn0pLG49YyhyLHRoaXMuX2NvbmZpZyksaT10aGlzO3JldHVybiBsKHQsbixpKX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVwiUE9TVFwiLHI9dGhpcy5idWlsZFF1ZXJ5T2JqZWN0KHRoaXMuX2pzb25nVXJsLHQse2pzb25HcmFwaDplLG1ldGhvZDpcInNldFwifSksbj1jKHIsdGhpcy5fY29uZmlnKTtuLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIjt2YXIgaT10aGlzO3JldHVybiBsKHQsbixpKX0sY2FsbDpmdW5jdGlvbihlLHQscixuKXt0PXR8fFtdLHI9cnx8W10sbj1ufHxbXTt2YXIgaT1cIlBPU1RcIixvPVtdO28ucHVzaChcIm1ldGhvZD1jYWxsXCIpLG8ucHVzaChcImNhbGxQYXRoPVwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShlKSkpLG8ucHVzaChcImFyZ3VtZW50cz1cIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodCkpKSxvLnB1c2goXCJwYXRoU3VmZml4ZXM9XCIrZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHIpKSksby5wdXNoKFwicGF0aHM9XCIrZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KG4pKSk7dmFyIGE9dGhpcy5idWlsZFF1ZXJ5T2JqZWN0KHRoaXMuX2pzb25nVXJsLGksby5qb2luKFwiJlwiKSkscz1jKGEsdGhpcy5fY29uZmlnKTtzLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIjt2YXIgdT10aGlzO3JldHVybiBsKGkscyx1KX19LG4uWE1MSHR0cFNvdXJjZT1uLG5bXCJkZWZhdWx0XCJdPW4sdC5leHBvcnRzPW59LHsxMjY6MTI2LDEyOToxMjl9XSwxMjY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGk9W10sbz17dXJsOmV9LGE9LTEhPT1lLmluZGV4T2YoXCI/XCIpLHM9YT9cIiZcIjpcIj9cIjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygcj9pLnB1c2gocik6KG49T2JqZWN0LmtleXMociksbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PVwib2JqZWN0XCI9PXR5cGVvZiByW2VdP0pTT04uc3RyaW5naWZ5KHJbZV0pOnJbZV07aS5wdXNoKGUrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKX0pKSxcIkdFVFwiPT09dD9vLnVybCs9cytpLmpvaW4oXCImXCIpOm8uZGF0YT1pLmpvaW4oXCImXCIpLG99fSx7fV0sMTI3OltmdW5jdGlvbihlLHIsdCl7KGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3IuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlPW5ldyB0LlhNTEh0dHBSZXF1ZXN0O2lmKFwid2l0aENyZWRlbnRpYWxzXCJpbiBlKXJldHVybiBlO2lmKHQuWERvbWFpblJlcXVlc3QpcmV0dXJuIG5ldyBYRG9tYWluUmVxdWVzdDt0aHJvdyBuZXcgRXJyb3IoXCJDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyXCIpfX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2Ygbj9uOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMTI4OltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKG4pe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBlLHQscjtpZihuLlhNTEh0dHBSZXF1ZXN0KXJldHVybiBuZXcgbi5YTUxIdHRwUmVxdWVzdDt0cnl7Zm9yKHQ9W1wiTXN4bWwyLlhNTEhUVFBcIixcIk1pY3Jvc29mdC5YTUxIVFRQXCIsXCJNc3htbDIuWE1MSFRUUC40LjBcIl0scj0wOzM+cjtyKyspdHJ5e2lmKGU9dFtyXSxuZXcgbi5BY3RpdmVYT2JqZWN0KGUpKWJyZWFrfWNhdGNoKGUpe31yZXR1cm4gbmV3IG4uQWN0aXZlWE9iamVjdChlKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJYTUxIdHRwUmVxdWVzdCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3NlclwiKX19fSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuP246XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwxMjk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIGkocyx1LGMpe3JldHVybiBuLmNyZWF0ZShmdW5jdGlvbih0KXt2YXIgcixuLGUsaSxvLGE9e21ldGhvZDpzfHxcIkdFVFwiLGNyb3NzRG9tYWluOiExLGFzeW5jOiEwLGhlYWRlcnM6e30scmVzcG9uc2VUeXBlOlwianNvblwifTtmb3IobyBpbiB1KWQuY2FsbCh1LG8pJiYoYVtvXT11W29dKTthLmNyb3NzRG9tYWlufHxhLmhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoYS5oZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpLG51bGwhPWMub25CZWZvcmVSZXF1ZXN0JiZjLm9uQmVmb3JlUmVxdWVzdChhKTt0cnl7cj1hLmNyb3NzRG9tYWluP2YoKTpwKCl9Y2F0Y2goZSl7dC5vbkVycm9yKGUpfXRyeXthLnVzZXI/ci5vcGVuKGEubWV0aG9kLGEudXJsLGEuYXN5bmMsYS51c2VyLGEucGFzc3dvcmQpOnIub3BlbihhLm1ldGhvZCxhLnVybCxhLmFzeW5jKSxyLnRpbWVvdXQ9YS50aW1lb3V0LHIud2l0aENyZWRlbnRpYWxzPWEud2l0aENyZWRlbnRpYWxzIT09ITEsZT1hLmhlYWRlcnM7Zm9yKGkgaW4gZSlkLmNhbGwoZSxpKSYmci5zZXRSZXF1ZXN0SGVhZGVyKGksZVtpXSk7aWYoYS5yZXNwb25zZVR5cGUpdHJ5e3IucmVzcG9uc2VUeXBlPWEucmVzcG9uc2VUeXBlfWNhdGNoKGUpe2lmKFwianNvblwiIT09YS5yZXNwb25zZVR5cGUpdGhyb3cgZX1yLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlKXs0PT09ci5yZWFkeVN0YXRlJiYobnx8KG49ITAsbCh0LHIsZSkpKX0sci5vbnRpbWVvdXQ9ZnVuY3Rpb24oZSl7bnx8KG49ITAsaCh0LHIsXCJ0aW1lb3V0IGVycm9yXCIsZSkpfSxyLnNlbmQoYS5kYXRhKX1jYXRjaChlKXt0Lm9uRXJyb3IoZSl9cmV0dXJuIGZ1bmN0aW9uKCl7bnx8ND09PXIucmVhZHlTdGF0ZXx8KG49ITAsci5hYm9ydCgpKX19KX1mdW5jdGlvbiBhKGUsdCxyKXtyfHwocj1uZXcgRXJyb3IodCkpLGUub25FcnJvcihyKX1mdW5jdGlvbiBsKGUsdCxyKXt2YXIgbixpO2lmKHQmJmUpe2k9dC5yZXNwb25zZVR5cGUsbj1cInJlc3BvbnNlXCJpbiB0P3QucmVzcG9uc2U6dC5yZXNwb25zZVRleHQ7dmFyIG89MTIyMz09PXQuc3RhdHVzPzIwNDp0LnN0YXR1cztpZihvPj0yMDAmJjM5OT49byl7dHJ5e1wianNvblwiIT09aSYmKG49SlNPTi5wYXJzZShufHxcIlwiKSksXCJzdHJpbmdcIj09dHlwZW9mIG4mJihuPUpTT04ucGFyc2Uobnx8XCJcIikpfWNhdGNoKHIpe2EoZSxcImludmFsaWQganNvblwiLHIpfXJldHVybiBlLm9uTmV4dChuKSx2b2lkIGUub25Db21wbGV0ZWQoKX1yZXR1cm4gNDAxPT09b3x8NDAzPT09b3x8NDA3PT09bz9hKGUsbik6NDEwPT09bz9hKGUsbik6NDA4PT09b3x8NTA0PT09bz9hKGUsbik6YShlLG58fFwiUmVzcG9uc2UgY29kZSBcIitvKX19ZnVuY3Rpb24gaChlLHQscixuKXthKGUscnx8dC5zdGF0dXNUZXh0fHxcInJlcXVlc3QgZXJyb3JcIixuKX12YXIgcD1lKDEyOCksZj1lKDEyNyksZD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHM9ZnVuY3Rpb24oKXt9O24uY3JlYXRlPWZ1bmN0aW9uKG8pe3ZhciBlPW5ldyBuO3JldHVybiBlLnN1YnNjcmliZT1mdW5jdGlvbihlLHQscil7dmFyIG4saTtyZXR1cm4gbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP3tvbk5leHQ6ZSxvbkVycm9yOnR8fHMsb25Db21wbGV0ZWQ6cnx8c306ZSxpPW8obiksXCJmdW5jdGlvblwiPT10eXBlb2YgaT97ZGlzcG9zZTppfTppfSxlfSx0LmV4cG9ydHM9aX0sezEyNzoxMjcsMTI4OjEyOH1dLDEzMDpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG4oZSx0LHIpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobnVsbCE9cil7Zm9yKHZhciBpIGluIHIpbltpXT1yW2ldO3JldHVybiBuLiR0eXBlPWUsbi52YWx1ZT10LG59cmV0dXJueyR0eXBlOmUsdmFsdWU6dH19dmFyIGk9ZSgxMzQpO3QuZXhwb3J0cz17cmVmOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oXCJyZWZcIixpLmZyb21QYXRoKGUpLHQpfSxhdG9tOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oXCJhdG9tXCIsZSx0KX0sdW5kZWZpbmVkOmZ1bmN0aW9uKCl7cmV0dXJuIG4oXCJhdG9tXCIpfSxlcnJvcjpmdW5jdGlvbihlLHQpe3JldHVybiBuKFwiZXJyb3JcIixlLHQpfSxwYXRoVmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm57cGF0aDppLmZyb21QYXRoKGUpLHZhbHVlOnR9fSxwYXRoSW52YWxpZGF0aW9uOmZ1bmN0aW9uKGUpe3JldHVybntwYXRoOmkuZnJvbVBhdGgoZSksaW52YWxpZGF0ZWQ6ITB9fX19LHsxMzQ6MTM0fV0sMTMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXtpbnRlZ2VyczpcImludGVnZXJzXCIscmFuZ2VzOlwicmFuZ2VzXCIsa2V5czpcImtleXNcIn19LHt9XSwxMzI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj17dG9rZW46XCJ0b2tlblwiLGRvdFNlcGFyYXRvcjpcIi5cIixjb21tYVNlcGFyYXRvcjpcIixcIixvcGVuaW5nQnJhY2tldDpcIltcIixjbG9zaW5nQnJhY2tldDpcIl1cIixvcGVuaW5nQnJhY2U6XCJ7XCIsY2xvc2luZ0JyYWNlOlwifVwiLGVzY2FwZTpcIlxcXFxcIixzcGFjZTpcIiBcIixjb2xvbjpcIjpcIixxdW90ZTpcInF1b3RlXCIsdW5rbm93bjpcInVua25vd25cIn07dC5leHBvcnRzPW59LHt9XSwxMzM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e2luZGV4ZXI6e25lc3RlZDpcIkluZGV4ZXJzIGNhbm5vdCBiZSBuZXN0ZWQuXCIsbmVlZFF1b3RlczpcInVucXVvdGVkIGluZGV4ZXJzIG11c3QgYmUgbnVtZXJpYy5cIixlbXB0eTpcImNhbm5vdCBoYXZlIGVtcHR5IGluZGV4ZXJzLlwiLGxlYWRpbmdEb3Q6XCJJbmRleGVycyBjYW5ub3QgaGF2ZSBsZWFkaW5nIGRvdHMuXCIsbGVhZGluZ0NvbW1hOlwiSW5kZXhlcnMgY2Fubm90IGhhdmUgbGVhZGluZyBjb21tYS5cIixyZXF1aXJlc0NvbW1hOlwiSW5kZXhlcnMgcmVxdWlyZSBjb21tYXMgYmV0d2VlbiBpbmRleGVyIGFyZ3MuXCIscm91dGVkVG9rZW5zOlwiT25seSBvbmUgdG9rZW4gY2FuIGJlIHVzZWQgcGVyIGluZGV4ZXIgd2hlbiBzcGVjaWZ5aW5nIHJvdXRlZCB0b2tlbnMuXCJ9LHJhbmdlOntwcmVjZWRpbmdOYU46XCJyYW5nZXMgbXVzdCBiZSBwcmVjZWRlZCBieSBudW1iZXJzLlwiLHN1Y2VlZGluZ05hTjpcInJhbmdlcyBtdXN0IGJlIHN1Y2VlZGVkIGJ5IG51bWJlcnMuXCJ9LHJvdXRlZDp7aW52YWxpZDpcIkludmFsaWQgcm91dGVkIHRva2VuLiAgb25seSBpbnRlZ2Vyc3xyYW5nZXN8a2V5cyBhcmUgc3VwcG9ydGVkLlwifSxxdW90ZTp7ZW1wdHk6XCJjYW5ub3QgaGF2ZSBlbXB0eSBxdW90ZWQga2V5cy5cIixpbGxlZ2FsRXNjYXBlOlwiSW52YWxpZCBlc2NhcGUgY2hhcmFjdGVyLiAgT25seSBxdW90ZXMgYXJlIGVzY2FwYWJsZS5cIn0sdW5leHBlY3RlZFRva2VuOlwiVW5leHBlY3RlZCB0b2tlbi5cIixpbnZhbGlkSWRlbnRpZmllcjpcIkludmFsaWQgSWRlbnRpZmllci5cIixpbnZhbGlkUGF0aDpcIlBsZWFzZSBwcm92aWRlIGEgdmFsaWQgcGF0aC5cIix0aHJvd0Vycm9yOmZ1bmN0aW9uKGUsdCxyKXtpZihyKXRocm93IGUrXCIgLS0gXCIrdC5wYXJzZVN0cmluZytcIiB3aXRoIG5leHQgdG9rZW46IFwiK3I7dGhyb3cgZStcIiAtLSBcIit0LnBhcnNlU3RyaW5nfX19LHt9XSwxMzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKDE0MCksaT1lKDEzNSksbz1lKDEzMSksYT1mdW5jdGlvbihlLHQpe3JldHVybiBpKG5ldyBuKGUsdCkpfTt0LmV4cG9ydHM9YSxhLmZyb21QYXRoc09yUGF0aFZhbHVlcz1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybltdO2Zvcih2YXIgcj1bXSxuPTAsaT1lLmxlbmd0aDtpPm47bisrKVwic3RyaW5nXCI9PXR5cGVvZiBlW25dP3Jbbl09YShlW25dLHQpOlwic3RyaW5nXCI9PXR5cGVvZiBlW25dLnBhdGg/cltuXT17cGF0aDphKGVbbl0ucGF0aCx0KSx2YWx1ZTplW25dLnZhbHVlfTpyW25dPWVbbl07cmV0dXJuIHJ9LGEuZnJvbVBhdGg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9cInN0cmluZ1wiPT10eXBlb2YgZT9hKGUsdCk6ZTpbXX0sYS5Sb3V0ZWRUb2tlbnM9b30sezEzMToxMzEsMTM1OjEzNSwxNDA6MTQwfV0sMTM1OltmdW5jdGlvbihlLHQscil7dmFyIG89ZSgxMzIpLGE9ZSgxMzMpLHM9ZSgxMzYpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5uZXh0KCkscj17fSxuPVtdOyF0LmRvbmU7KXtzd2l0Y2godC50eXBlKXtjYXNlIG8udG9rZW46dmFyIGk9K3QudG9rZW5bMF07aXNOYU4oaSl8fGEudGhyb3dFcnJvcihhLmludmFsaWRJZGVudGlmaWVyLGUpLG5bbi5sZW5ndGhdPXQudG9rZW47YnJlYWs7Y2FzZSBvLmRvdFNlcGFyYXRvcjowPT09bi5sZW5ndGgmJmEudGhyb3dFcnJvcihhLnVuZXhwZWN0ZWRUb2tlbixlKTticmVhaztjYXNlIG8uc3BhY2U6YnJlYWs7Y2FzZSBvLm9wZW5pbmdCcmFja2V0OnMoZSx0LHIsbik7YnJlYWs7ZGVmYXVsdDphLnRocm93RXJyb3IoYS51bmV4cGVjdGVkVG9rZW4sZSl9dD1lLm5leHQoKX1yZXR1cm4gMD09PW4ubGVuZ3RoJiZhLnRocm93RXJyb3IoYS5pbnZhbGlkUGF0aCxlKSxufX0sezEzMjoxMzIsMTMzOjEzMywxMzY6MTM2fV0sMTM2OltmdW5jdGlvbihlLHQscil7dmFyIGM9ZSgxMzIpLGw9ZSgxMzMpLGg9bC5pbmRleGVyLHA9ZSgxMzgpLGY9ZSgxMzcpLGQ9ZSgxMzkpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1lLm5leHQoKSxvPSExLGE9MSxzPSExO2ZvcihyLmluZGV4ZXI9W107IWkuZG9uZTspe3N3aXRjaChpLnR5cGUpe2Nhc2UgYy50b2tlbjpjYXNlIGMucXVvdGU6ci5pbmRleGVyLmxlbmd0aD09PWEmJmwudGhyb3dFcnJvcihoLnJlcXVpcmVzQ29tbWEsZSl9c3dpdGNoKGkudHlwZSl7Y2FzZSBjLm9wZW5pbmdCcmFjZTpzPSEwLGQoZSxpLHIsbik7YnJlYWs7Y2FzZSBjLnRva2VuOnZhciB1PStpLnRva2VuO2lzTmFOKHUpJiZsLnRocm93RXJyb3IoaC5uZWVkUXVvdGVzLGUpLHIuaW5kZXhlcltyLmluZGV4ZXIubGVuZ3RoXT11O2JyZWFrO2Nhc2UgYy5kb3RTZXBhcmF0b3I6ci5pbmRleGVyLmxlbmd0aHx8bC50aHJvd0Vycm9yKGgubGVhZGluZ0RvdCxlKSxwKGUsaSxyLG4pO2JyZWFrO2Nhc2UgYy5zcGFjZTpicmVhaztjYXNlIGMuY2xvc2luZ0JyYWNrZXQ6bz0hMDticmVhaztjYXNlIGMucXVvdGU6ZihlLGkscixuKTticmVhaztjYXNlIGMub3BlbmluZ0JyYWNrZXQ6bC50aHJvd0Vycm9yKGgubmVzdGVkLGUpO2JyZWFrO2Nhc2UgYy5jb21tYVNlcGFyYXRvcjorK2E7YnJlYWs7ZGVmYXVsdDpsLnRocm93RXJyb3IobC51bmV4cGVjdGVkVG9rZW4sZSl9aWYobylicmVhaztpPWUubmV4dCgpfTA9PT1yLmluZGV4ZXIubGVuZ3RoJiZsLnRocm93RXJyb3IoaC5lbXB0eSxlKSxyLmluZGV4ZXIubGVuZ3RoPjEmJnMmJmwudGhyb3dFcnJvcihoLnJvdXRlZFRva2VucyxlKSwxPT09ci5pbmRleGVyLmxlbmd0aCYmKHIuaW5kZXhlcj1yLmluZGV4ZXJbMF0pLG5bbi5sZW5ndGhdPXIuaW5kZXhlcixyLmluZGV4ZXI9dm9pZCAwfX0sezEzMjoxMzIsMTMzOjEzMywxMzc6MTM3LDEzODoxMzgsMTM5OjEzOX1dLDEzNzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBjPWUoMTMyKSxsPWUoMTMzKSxoPWwucXVvdGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe2Zvcih2YXIgaT1lLm5leHQoKSxvPVwiXCIsYT10LnRva2VuLHM9ITEsdT0hMTshaS5kb25lOyl7c3dpdGNoKGkudHlwZSl7Y2FzZSBjLnRva2VuOmNhc2UgYy5zcGFjZTpjYXNlIGMuZG90U2VwYXJhdG9yOmNhc2UgYy5jb21tYVNlcGFyYXRvcjpjYXNlIGMub3BlbmluZ0JyYWNrZXQ6Y2FzZSBjLmNsb3NpbmdCcmFja2V0OmNhc2UgYy5vcGVuaW5nQnJhY2U6Y2FzZSBjLmNsb3NpbmdCcmFjZTpzJiZsLnRocm93RXJyb3IoaC5pbGxlZ2FsRXNjYXBlLGUpLG8rPWkudG9rZW47YnJlYWs7Y2FzZSBjLnF1b3RlOnM/KG8rPWkudG9rZW4scz0hMSk6aS50b2tlbiE9PWE/bys9aS50b2tlbjp1PSEwO2JyZWFrO2Nhc2UgYy5lc2NhcGU6cz0hMDticmVhaztkZWZhdWx0OmwudGhyb3dFcnJvcihsLnVuZXhwZWN0ZWRUb2tlbixlKX1pZih1KWJyZWFrO2k9ZS5uZXh0KCl9MD09PW8ubGVuZ3RoJiZsLnRocm93RXJyb3IoaC5lbXB0eSxlKSxyLmluZGV4ZXJbci5pbmRleGVyLmxlbmd0aF09b319LHsxMzI6MTMyLDEzMzoxMzN9XSwxMzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgaD1lKDE0MCkscD1lKDEzMiksZj1lKDEzMyk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLG89ZS5wZWVrKCksYT0xLHM9ITEsdT0hMCxjPXIuaW5kZXhlci5sZW5ndGgtMSxsPWgudG9OdW1iZXIoci5pbmRleGVyW2NdKTtmb3IoaXNOYU4obCkmJmYudGhyb3dFcnJvcihmLnJhbmdlLnByZWNlZGluZ05hTixlKTshcyYmIW8uZG9uZTspe3N3aXRjaChvLnR5cGUpe2Nhc2UgcC5kb3RTZXBhcmF0b3I6Mz09PWEmJmYudGhyb3dFcnJvcihmLnVuZXhwZWN0ZWRUb2tlbixlKSwrK2EsMz09PWEmJih1PSExKTticmVhaztjYXNlIHAudG9rZW46aT1oLnRvTnVtYmVyKGUubmV4dCgpLnRva2VuKSxpc05hTihpKSYmZi50aHJvd0Vycm9yKGYucmFuZ2Uuc3VjZWVkaW5nTmFOLGUpLHM9ITA7YnJlYWs7ZGVmYXVsdDpzPSEwfWlmKHMpYnJlYWs7ZS5uZXh0KCksbz1lLnBlZWsoKX1yLmluZGV4ZXJbY109e2Zyb206bCx0bzp1P2k6aS0xfX19LHsxMzI6MTMyLDEzMzoxMzMsMTQwOjE0MH1dLDEzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBjPWUoMTMyKSxsPWUoMTMxKSxoPWUoMTMzKSxwPWgucm91dGVkO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1lLm5leHQoKSxvPSExLGE9XCJcIjtzd2l0Y2goaS50b2tlbil7Y2FzZSBsLmludGVnZXJzOmNhc2UgbC5yYW5nZXM6Y2FzZSBsLmtleXM6YnJlYWs7ZGVmYXVsdDpoLnRocm93RXJyb3IocC5pbnZhbGlkLGUpfXZhciBzPWUubmV4dCgpO2lmKHMudHlwZT09PWMuY29sb24mJihvPSEwLHM9ZS5uZXh0KCkscy50eXBlIT09Yy50b2tlbiYmaC50aHJvd0Vycm9yKHAuaW52YWxpZCxlKSxhPXMudG9rZW4scz1lLm5leHQoKSkscy50eXBlPT09Yy5jbG9zaW5nQnJhY2Upe3ZhciB1PXt0eXBlOmkudG9rZW4sbmFtZWQ6byxuYW1lOmF9O3IuaW5kZXhlcltyLmluZGV4ZXIubGVuZ3RoXT11fWVsc2UgaC50aHJvd0Vycm9yKHAuaW52YWxpZCxlKX19LHsxMzE6MTMxLDEzMjoxMzIsMTMzOjEzM31dLDE0MDpbZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGMoZSx0LHIpe3JldHVybnt0b2tlbjplLGRvbmU6cix0eXBlOnR9fWZ1bmN0aW9uIG4oZSx0LHIpe3ZhciBuLGk9ITEsbz1cIlwiLGE9cj9TOnc7ZG97aWYobj10KzE+PWUubGVuZ3RoKWJyZWFrO3ZhciBzPWVbdCsxXTtpZih2b2lkIDA9PT1zfHwtMSE9PWEuaW5kZXhPZihzKSl7aWYoby5sZW5ndGgpYnJlYWs7Kyt0O3ZhciB1O3N3aXRjaChzKXtjYXNlIGg6dT1sLmRvdFNlcGFyYXRvcjticmVhaztjYXNlIHA6dT1sLmNvbW1hU2VwYXJhdG9yO2JyZWFrO2Nhc2UgZjp1PWwub3BlbmluZ0JyYWNrZXQ7YnJlYWs7Y2FzZSBkOnU9bC5jbG9zaW5nQnJhY2tldDticmVhaztjYXNlIHY6dT1sLm9wZW5pbmdCcmFjZTticmVhaztjYXNlIG06dT1sLmNsb3NpbmdCcmFjZTticmVhaztjYXNlIHg6dT1sLnNwYWNlO2JyZWFrO2Nhc2UgeTpjYXNlIGI6dT1sLnF1b3RlO2JyZWFrO2Nhc2UgXzp1PWwuZXNjYXBlO2JyZWFrO2Nhc2UgZzp1PWwuY29sb247YnJlYWs7ZGVmYXVsdDp1PWwudW5rbm93bn1pPWMocyx1LCExKTticmVha31vKz1zLCsrdH13aGlsZSghbik7cmV0dXJuIWkmJm8ubGVuZ3RoJiYoaT1jKG8sbC50b2tlbiwhMSkpLGl8fChpPXtkb25lOiEwfSkse3Rva2VuOmksaWR4OnR9fXZhciBsPWUoMTMyKSxoPVwiLlwiLHA9XCIsXCIsZj1cIltcIixkPVwiXVwiLHY9XCJ7XCIsbT1cIn1cIixnPVwiOlwiLF89XCJcXFxcXCIseT0nXCInLGI9XCInXCIseD1cIiBcIix3PVwiXFxcXCdcXFwiW10uLCBcIixTPVwiXFxcXHt9J1xcXCJbXS4sIDpcIixpPXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3RoaXMuX3N0cmluZz1lLHRoaXMuX2lkeD0tMSx0aGlzLl9leHRlbmRlZD10LHRoaXMucGFyc2VTdHJpbmc9XCJcIn07aS5wcm90b3R5cGU9e25leHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9uZXh0VG9rZW4/dGhpcy5fbmV4dFRva2VuOm4odGhpcy5fc3RyaW5nLHRoaXMuX2lkeCx0aGlzLl9leHRlbmRlZCk7cmV0dXJuIHRoaXMuX2lkeD1lLmlkeCx0aGlzLl9uZXh0VG9rZW49ITEsdGhpcy5wYXJzZVN0cmluZys9ZS50b2tlbi50b2tlbixlLnRva2VufSxwZWVrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbmV4dFRva2VuP3RoaXMuX25leHRUb2tlbjpuKHRoaXMuX3N0cmluZyx0aGlzLl9pZHgsdGhpcy5fZXh0ZW5kZWQpO3JldHVybiB0aGlzLl9uZXh0VG9rZW49ZSxlLnRva2VufX0saS50b051bWJlcj1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oK2UpP05hTjorZX19LHsxMzI6MTMyfV0sMTQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgxNDcpLGk9ZSgxNDgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1lLnJlZHVjZShmdW5jdGlvbihlLHQpe3ZhciByPXQubGVuZ3RoO3JldHVybiBlW3JdfHwoZVtyXT1bXSksZVtyXS5wdXNoKHQpLGV9LHt9KTtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWkodFtlXSl9KSxuKHQpfX0sezE0NzoxNDcsMTQ4OjE0OH1dLDE0MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBwPWUoMTQ0KTt0LmV4cG9ydHM9ZnVuY3Rpb24gZSh0LHIsbil7Zm9yKHZhciBpPXQsbz0hMDtvJiZuPHIubGVuZ3RoOysrbil7dmFyIGE9cltuXSxzPXR5cGVvZiBhO2lmKGEmJlwib2JqZWN0XCI9PT1zKXt2YXIgdT17fSxjPXAoYSx1KSxsPW4rMTtkb3t2YXIgaD1pW2NdO289dm9pZCAwIT09aCxvJiYobz1lKGgscixsKSksYz1wKGEsdSl9d2hpbGUobyYmIXUuZG9uZSk7YnJlYWt9aT1pW2FdLG89dm9pZCAwIT09aX1yZXR1cm4gb319LHsxNDQ6MTQ0fV0sMTQzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXtpdGVyYXRlS2V5U2V0OmUoMTQ0KSx0b1RyZWU6ZSgxNDgpLHRvVHJlZVdpdGhVbmlvbjplKDE0OSkscGF0aHNDb21wbGVtZW50RnJvbVRyZWU6ZSgxNDYpLHBhdGhzQ29tcGxlbWVudEZyb21MZW5ndGhUcmVlOmUoMTQ1KSxoYXNJbnRlcnNlY3Rpb246ZSgxNDIpLHRvUGF0aHM6ZSgxNDcpLGNvbGxhcHNlOmUoMTQxKX19LHsxNDE6MTQxLDE0MjoxNDIsMTQ0OjE0NCwxNDU6MTQ1LDE0NjoxNDYsMTQ3OjE0NywxNDg6MTQ4LDE0OToxNDl9XSwxNDQ6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBzKGUsdCl7dmFyIHI9dC5mcm9tPWUuZnJvbXx8MCxuPXQudG89ZS50b3x8XCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoJiZ0LmZyb20rZS5sZW5ndGgtMXx8MDt0LnJhbmdlT2Zmc2V0PXQuZnJvbSx0LmxvYWRlZD0hMCxyPm4mJih0LmVtcHR5PSEwKX1mdW5jdGlvbiB1KGUsdCl7dC5kb25lPSExO3ZhciByPXQuaXNPYmplY3Q9ISghZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUpO3QuaXNBcnJheT1yJiZuKGUpLHQuYXJyYXlPZmZzZXQ9MH12YXIgbj1BcnJheS5pc0FycmF5O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQuaXNBcnJheSYmdShlLHQpLHQuaXNBcnJheSl7dmFyIHI7ZG97dC5sb2FkZWQmJnQucmFuZ2VPZmZzZXQ+dC50byYmKCsrdC5hcnJheU9mZnNldCx0LmxvYWRlZD0hMSk7dmFyIG49dC5hcnJheU9mZnNldCxpPWUubGVuZ3RoO2lmKG4+PWkpe3QuZG9uZT0hMDticmVha312YXIgbz1lW3QuYXJyYXlPZmZzZXRdLGE9dHlwZW9mIG87aWYoXCJvYmplY3RcIj09PWEpe2lmKHQubG9hZGVkfHxzKG8sdCksdC5lbXB0eSljb250aW51ZTtyPXQucmFuZ2VPZmZzZXQrK31lbHNlKyt0LmFycmF5T2Zmc2V0LHI9b313aGlsZSh2b2lkIDA9PT1yKTtyZXR1cm4gcn1yZXR1cm4gdC5pc09iamVjdD8odC5sb2FkZWR8fHMoZSx0KSx0LnJhbmdlT2Zmc2V0PnQudG8/dm9pZCh0LmRvbmU9ITApOnQucmFuZ2VPZmZzZXQrKyk6KHQuZG9uZT0hMCxlKX19LHt9XSwxNDU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgcz1lKDE0Mik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLG49LTEsaT0wLG89ZS5sZW5ndGg7bz5pOysraSl7dmFyIGE9ZVtpXTtzKHRbYS5sZW5ndGhdLGEsMCl8fChyWysrbl09YSl9cmV0dXJuIHJ9fSx7MTQyOjE0Mn1dLDE0NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUoMTQyKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10sbj0tMSxpPTAsbz1lLmxlbmd0aDtvPmk7KytpKWEodCxlW2ldLDApfHwoclsrK25dPWVbaV0pO3JldHVybiByfX0sezE0MjoxNDJ9XSwxNDc6W2Z1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiB1KGUpe3JldHVybiBudWxsIT09ZSYmdHlwZW9mIGU9PT1ufWZ1bmN0aW9uIE0oZSx0LHIpe3ZhciBuLGksbyxhLHMsdSxjLGwsaCxwLGYsZCx2LG0sZz1UKFN0cmluZyh0KSksXz1PYmplY3QuY3JlYXRlKG51bGwpLHk9W10sYj0tMSx4PTAsdz1bXSxTPTA7aWYoYT1bXSxzPS0xLHItMT50KXtmb3IodT1DKGUsYSk7KytzPHU7KW49YVtzXSxpPU0oZVtuXSx0KzEsciksbz1pLmNvZGUsX1tvXT9pPV9bb106KHlbeCsrXT1vLGk9X1tvXT17a2V5czpbXSxzZXRzOmkuc2V0c30pLGc9VChnK24rbyksRShuKSYmaS5rZXlzLnB1c2gocGFyc2VJbnQobiwxMCkpfHxpLmtleXMucHVzaChuKTtmb3IoOysrYjx4OylpZihuPXlbYl0saT1fW25dLGE9aS5rZXlzLHU9YS5sZW5ndGgsdT4wKWZvcihjPWkuc2V0cyxsPS0xLGg9Yy5sZW5ndGgsdj1hWzBdOysrbDxoOyl7Zm9yKHA9Y1tsXSxmPS0xLGQ9cC5sZW5ndGgsbT1uZXcgQXJyYXkoZCsxKSxtWzBdPXU+MSYmYXx8djsrK2Y8ZDspbVtmKzFdPXBbZl07d1tTKytdPW19fWVsc2UgZm9yKHU9QyhlLGEpLHU+MT93W1MrK109W2FdOndbUysrXT1hOysrczx1OylnPVQoZythW3NdKTtyZXR1cm57Y29kZTpnLHNldHM6d319ZnVuY3Rpb24gYyhlKXtmb3IodmFyIHQ9LTEscj1lLmxlbmd0aDsrK3Q8cjspe3ZhciBuPWVbdF07byhuKSYmKGVbdF09aShuKSl9cmV0dXJuIGV9ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9LTEscj1lLmxlbmd0aC0xLG49cj4wOysrdDw9cjspe3ZhciBpPWVbdF07aWYoIUUoaSkpe249ITE7YnJlYWt9ZVt0XT1wYXJzZUludChpLDEwKX1pZihuPT09ITApe2Uuc29ydChzKTt2YXIgbz1lWzBdLGE9ZVtyXTtpZihyPj1hLW8pcmV0dXJue2Zyb206byx0bzphfX1yZXR1cm4gZX1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGUtdH1mdW5jdGlvbiBDKGUsdCxyKXt2YXIgbj0wO2Zvcih2YXIgaSBpbiBlKXRbbisrXT1pO3JldHVybiBuPjEmJnQuc29ydChyKSxufWZ1bmN0aW9uIFQoZSl7Zm9yKHZhciB0PTUzODEscj0tMSxuPWUubGVuZ3RoOysrcjxuOyl0PSh0PDw1KSt0K2UuY2hhckNvZGVBdChyKTtyZXR1cm4gU3RyaW5nKHQpfWZ1bmN0aW9uIEUoZSl7cmV0dXJuIW8oZSkmJmUtcGFyc2VGbG9hdChlKSsxPj0wfXZhciBvPUFycmF5LmlzQXJyYXksbj1cIm9iamVjdFwiO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyPVtdLG49MDtmb3IodmFyIGkgaW4gZSlpZihFKGkpJiZ1KHQ9ZVtpXSkpZm9yKHZhciBvPU0odCwwLHBhcnNlSW50KGksMTApKS5zZXRzLGE9LTEscz1vLmxlbmd0aDsrK2E8czspcltuKytdPWMob1thXSk7cmV0dXJuIHJ9fSx7fV0sMTQ4OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gdShlLHQscil7dmFyIG4saT10W3JdLG89e30sYT1yKzE7bj1jKGksbyk7ZG97dmFyIHM9ZVtuXTtzfHwoYT09PXQubGVuZ3RoP2Vbbl09bnVsbDpzPWVbbl09e30pLGE8dC5sZW5ndGgmJnUocyx0LGEpLG8uZG9uZXx8KG49YyhpLG8pKX13aGlsZSghby5kb25lKX12YXIgYz1lKDE0NCk7QXJyYXkuaXNBcnJheTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUoZSx0LDApLGV9LHt9KX19LHsxNDQ6MTQ0fV0sMTQ5OltmdW5jdGlvbihlLHQscil7fSx7fV0sMTUwOltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe2w9ITEscy5sZW5ndGg/Yz1zLmNvbmNhdChjKTpoPS0xLGMubGVuZ3RoJiZpKCl9ZnVuY3Rpb24gaSgpe2lmKCFsKXt2YXIgZT1zZXRUaW1lb3V0KG4pO2w9ITA7Zm9yKHZhciB0PWMubGVuZ3RoO3Q7KXtmb3Iocz1jLGM9W107KytoPHQ7KXMmJnNbaF0ucnVuKCk7aD0tMSx0PWMubGVuZ3RofXM9bnVsbCxsPSExLGNsZWFyVGltZW91dChlKX19ZnVuY3Rpb24gbyhlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWZ1bmN0aW9uIGEoKXt9dmFyIHMsdT10LmV4cG9ydHM9e30sYz1bXSxsPSExLGg9LTE7dS5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO2MucHVzaChuZXcgbyhlLHQpKSwxIT09Yy5sZW5ndGh8fGx8fHNldFRpbWVvdXQoaSwwKX0sby5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sdS50aXRsZT1cImJyb3dzZXJcIix1LmJyb3dzZXI9ITAsdS5lbnY9e30sdS5hcmd2PVtdLHUudmVyc2lvbj1cIlwiLHUudmVyc2lvbnM9e30sdS5vbj1hLHUuYWRkTGlzdGVuZXI9YSx1Lm9uY2U9YSx1Lm9mZj1hLHUucmVtb3ZlTGlzdGVuZXI9YSx1LnJlbW92ZUFsbExpc3RlbmVycz1hLHUuZW1pdD1hLHUuYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sdS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sdS5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHUudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LHt9XSwxNTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ZSgxNTYpfSx7MTU2OjE1Nn1dLDE1MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gbihlKXt0cnl7cmV0dXJuIGUudGhlbn1jYXRjaChlKXtyZXR1cm4gbT1lLGd9fWZ1bmN0aW9uIGkoZSx0KXt0cnl7cmV0dXJuIGUodCl9Y2F0Y2goZSl7cmV0dXJuIG09ZSxnfX1mdW5jdGlvbiBvKGUsdCxyKXt0cnl7ZSh0LHIpfWNhdGNoKGUpe3JldHVybiBtPWUsZ319ZnVuY3Rpb24gcyhlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgdGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3XCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5vdCBhIGZ1bmN0aW9uXCIpO3RoaXMuXzM3PTAsdGhpcy5fMTI9bnVsbCx0aGlzLl81OT1bXSxlIT09YSYmZChlLHRoaXMpfWZ1bmN0aW9uIHUobixpLG8pe3JldHVybiBuZXcgbi5jb25zdHJ1Y3RvcihmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBzKGEpO3IudGhlbihlLHQpLGMobixuZXcgZihpLG8scikpfSl9ZnVuY3Rpb24gYyhyLG4pe2Zvcig7Mz09PXIuXzM3OylyPXIuXzEyO3JldHVybiAwPT09ci5fMzc/dm9pZCByLl81OS5wdXNoKG4pOnZvaWQgdihmdW5jdGlvbigpe3ZhciBlPTE9PT1yLl8zNz9uLm9uRnVsZmlsbGVkOm4ub25SZWplY3RlZDtpZihudWxsPT09ZSlyZXR1cm4gdm9pZCgxPT09ci5fMzc/bChuLnByb21pc2Usci5fMTIpOmgobi5wcm9taXNlLHIuXzEyKSk7dmFyIHQ9aShlLHIuXzEyKTt0PT09Zz9oKG4ucHJvbWlzZSxtKTpsKG4ucHJvbWlzZSx0KX0pfWZ1bmN0aW9uIGwoZSx0KXtpZih0PT09ZSlyZXR1cm4gaChlLG5ldyBUeXBlRXJyb3IoXCJBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLlwiKSk7aWYodCYmKFwib2JqZWN0XCI9PXR5cGVvZiB0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KSl7dmFyIHI9bih0KTtpZihyPT09ZylyZXR1cm4gaChlLG0pO2lmKHI9PT1lLnRoZW4mJnQgaW5zdGFuY2VvZiBzKXJldHVybiBlLl8zNz0zLGUuXzEyPXQsdm9pZCBwKGUpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpcmV0dXJuIHZvaWQgZChyLmJpbmQodCksZSl9ZS5fMzc9MSxlLl8xMj10LHAoZSl9ZnVuY3Rpb24gaChlLHQpe2UuXzM3PTIsZS5fMTI9dCxwKGUpfWZ1bmN0aW9uIHAoZSl7Zm9yKHZhciB0PTA7dDxlLl81OS5sZW5ndGg7dCsrKWMoZSxlLl81OVt0XSk7ZS5fNTk9bnVsbH1mdW5jdGlvbiBmKGUsdCxyKXt0aGlzLm9uRnVsZmlsbGVkPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpudWxsLHRoaXMub25SZWplY3RlZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6bnVsbCx0aGlzLnByb21pc2U9cn1mdW5jdGlvbiBkKGUsdCl7dmFyIHI9ITEsbj1vKGUsZnVuY3Rpb24oZSl7cnx8KHI9ITAsbCh0LGUpKX0sZnVuY3Rpb24oZSl7cnx8KHI9ITAsaCh0LGUpKX0pO3J8fG4hPT1nfHwocj0hMCxoKHQsbSkpfXZhciB2PWUoMTI0KSxtPW51bGwsZz17fTt0LmV4cG9ydHM9cyxzLl85OT1hLHMucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmNvbnN0cnVjdG9yIT09cylyZXR1cm4gdSh0aGlzLGUsdCk7dmFyIHI9bmV3IHMoYSk7cmV0dXJuIGModGhpcyxuZXcgZihlLHQscikpLHJ9fSx7MTI0OjEyNH1dLDE1MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoMTUyKTt0LmV4cG9ydHM9bixuLnByb3RvdHlwZS5kb25lPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD90aGlzLnRoZW4uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXM7ci50aGVuKG51bGwsZnVuY3Rpb24oZSl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGV9LDApfSl9fSx7MTUyOjE1Mn1dLDE1NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bmV3IGMoYy5fOTkpO3JldHVybiB0Ll8zNz0xLHQuXzEyPWUsdH12YXIgYz1lKDE1Mik7dC5leHBvcnRzPWM7dmFyIGk9bighMCksbz1uKCExKSxhPW4obnVsbCkscz1uKHZvaWQgMCksdT1uKDApLGw9bihcIlwiKTtjLnJlc29sdmU9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGMpcmV0dXJuIGU7aWYobnVsbD09PWUpcmV0dXJuIGE7aWYodm9pZCAwPT09ZSlyZXR1cm4gcztpZihlPT09ITApcmV0dXJuIGk7aWYoZT09PSExKXJldHVybiBvO2lmKDA9PT1lKXJldHVybiB1O2lmKFwiXCI9PT1lKXJldHVybiBsO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXRyeXt2YXIgdD1lLnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdClyZXR1cm4gbmV3IGModC5iaW5kKGUpKX1jYXRjaChyKXtyZXR1cm4gbmV3IGMoZnVuY3Rpb24oZSx0KXt0KHIpfSl9cmV0dXJuIG4oZSl9LGMuYWxsPWZ1bmN0aW9uKGUpe3ZhciB1PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpO3JldHVybiBuZXcgYyhmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIGEodCxlKXtpZihlJiYoXCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpKXtpZihlIGluc3RhbmNlb2YgYyYmZS50aGVuPT09Yy5wcm90b3R5cGUudGhlbil7Zm9yKDszPT09ZS5fMzc7KWU9ZS5fMTI7cmV0dXJuIDE9PT1lLl8zNz9hKHQsZS5fMTIpOigyPT09ZS5fMzcmJm8oZS5fMTIpLHZvaWQgZS50aGVuKGZ1bmN0aW9uKGUpe2EodCxlKX0sbykpfXZhciByPWUudGhlbjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByKXt2YXIgbj1uZXcgYyhyLmJpbmQoZSkpO3JldHVybiB2b2lkIG4udGhlbihmdW5jdGlvbihlKXthKHQsZSl9LG8pfX11W3RdPWUsMD09PS0tcyYmaSh1KX1pZigwPT09dS5sZW5ndGgpcmV0dXJuIGkoW10pO2Zvcih2YXIgcz11Lmxlbmd0aCxlPTA7ZTx1Lmxlbmd0aDtlKyspYShlLHVbZV0pfSl9LGMucmVqZWN0PWZ1bmN0aW9uKHIpe3JldHVybiBuZXcgYyhmdW5jdGlvbihlLHQpe3Qocil9KX0sYy5yYWNlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgYyhmdW5jdGlvbih0LHIpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtjLnJlc29sdmUoZSkudGhlbih0LHIpfSl9KX0sYy5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsZSl9fSx7MTUyOjE1Mn1dLDE1NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoMTUyKTt0LmV4cG9ydHM9bixuLnByb3RvdHlwZVtcImZpbmFsbHlcIl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbi5yZXNvbHZlKHQoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlfSl9LGZ1bmN0aW9uKGUpe3JldHVybiBuLnJlc29sdmUodCgpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgZX0pfSl9fSx7MTUyOjE1Mn1dLDE1NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1lKDE1MiksZSgxNTMpLGUoMTU1KSxlKDE1NCksZSgxNTcpfSx7MTUyOjE1MiwxNTM6MTUzLDE1NDoxNTQsMTU1OjE1NSwxNTc6MTU3fV0sMTU3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGE9ZSgxNTIpLGk9ZSgxMjMpO3QuZXhwb3J0cz1hLGEuZGVub2RlaWZ5PWZ1bmN0aW9uKG8sZSl7cmV0dXJuIGU9ZXx8MS8wLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwLGU+MD9lOjApO3JldHVybiBuZXcgYShmdW5jdGlvbihyLG4pe2kucHVzaChmdW5jdGlvbihlLHQpe2U/bihlKTpyKHQpfSk7dmFyIGU9by5hcHBseSh0LGkpOyFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgZS50aGVufHxyKGUpfSl9fSxhLm5vZGVpZnk9ZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGVbZS5sZW5ndGgtMV0/ZS5wb3AoKTpudWxsLG49dGhpczt0cnl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpLm5vZGVpZnkodCxuKX1jYXRjaChyKXtpZihudWxsPT09dHx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIHQpcmV0dXJuIG5ldyBhKGZ1bmN0aW9uKGUsdCl7dChyKX0pO2koZnVuY3Rpb24oKXt0LmNhbGwobixyKX0pfX19LGEucHJvdG90eXBlLm5vZGVpZnk9ZnVuY3Rpb24odCxyKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0P3RoaXM6dm9pZCB0aGlzLnRoZW4oZnVuY3Rpb24oZSl7aShmdW5jdGlvbigpe3QuY2FsbChyLG51bGwsZSl9KX0sZnVuY3Rpb24oZSl7aShmdW5jdGlvbigpe3QuY2FsbChyLGUpfSl9KX19LHsxMjM6MTIzLDE1MjoxNTJ9XSwxNTg6W2Z1bmN0aW9uKHMsdSxjKXsoZnVuY3Rpb24oYSl7KGZ1bmN0aW9uKHIpe3ZhciBlPXtib29sZWFuOiExLGZ1bmN0aW9uOiEwLG9iamVjdDohMCxudW1iZXI6ITEsc3RyaW5nOiExLHVuZGVmaW5lZDohMX0sbj1lW3R5cGVvZiB3aW5kb3ddJiZ3aW5kb3d8fHRoaXMsdD1lW3R5cGVvZiBjXSYmYyYmIWMubm9kZVR5cGUmJmMsaT1lW3R5cGVvZiB1XSYmdSYmIXUubm9kZVR5cGUmJnUsbz0oaSYmaS5leHBvcnRzPT09dCYmdCxlW3R5cGVvZiBhXSYmYSk7IW98fG8uZ2xvYmFsIT09byYmby53aW5kb3chPT1vfHwobj1vKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBJciYmSXIuYW1kP0lyKFtcInJ4XCJdLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIobix0LGUpfSk6XCJvYmplY3RcIj09dHlwZW9mIHUmJnUmJnUuZXhwb3J0cz09PXQ/dS5leHBvcnRzPXIobix1LmV4cG9ydHMscygxNTkpKTpuLlJ4PXIobix7fSxuLlJ4KX0pLmNhbGwodGhpcyxmdW5jdGlvbihzLGUsdCx1KXtmdW5jdGlvbiByKCl7dHJ5e3JldHVybiBmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1jYXRjaChlKXtyZXR1cm4gTi5lPWUsTn19ZnVuY3Rpb24gbihlKXtpZighTShlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBmPWUscn1mdW5jdGlvbiBpKGUscyx1KXtyZXR1cm4gbmV3IGcoZnVuY3Rpb24obil7dmFyIGk9ITEsbz1udWxsLGE9W107cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0LHI7dHJ5e3I9cyhlKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBuLm9uRXJyb3IoZSl9aWYodD0wLGkpdHJ5e3Q9dShyLG8pfWNhdGNoKGUpe3JldHVybiB2b2lkIG4ub25FcnJvcihlKX1lbHNlIGk9ITAsbz1yO3Q+MCYmKG89cixhPVtdKSx0Pj0wJiZhLnB1c2goZSl9LGZ1bmN0aW9uKGUpe24ub25FcnJvcihlKX0sZnVuY3Rpb24oKXtuLm9uTmV4dChhKSxuLm9uQ29tcGxldGVkKCl9KX0sZSl9ZnVuY3Rpb24gbyhlKXtpZigwPT09ZS5sZW5ndGgpdGhyb3cgbmV3IFI7cmV0dXJuIGVbMF19ZnVuY3Rpb24gYShlLG4saSxvKXtpZigwPm4pdGhyb3cgbmV3IEw7cmV0dXJuIG5ldyBnKGZ1bmN0aW9uKHQpe3ZhciByPW47cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpezA9PT1yLS0mJih0Lm9uTmV4dChlKSx0Lm9uQ29tcGxldGVkKCkpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7aT8odC5vbk5leHQobyksdC5vbkNvbXBsZXRlZCgpKTp0Lm9uRXJyb3IobmV3IEwpfSl9LGUpfWZ1bmN0aW9uIGMoZSxpLG8pe3JldHVybiBuZXcgZyhmdW5jdGlvbih0KXt2YXIgcj1vLG49ITE7cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe24/dC5vbkVycm9yKG5ldyBFcnJvcihcIlNlcXVlbmNlIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgZWxlbWVudFwiKSk6KHI9ZSxuPSEwKX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe258fGk/KHQub25OZXh0KHIpLHQub25Db21wbGV0ZWQoKSk6dC5vbkVycm9yKG5ldyBSKX0pfSxlKX1mdW5jdGlvbiBsKGUscixuKXtyZXR1cm4gbmV3IGcoZnVuY3Rpb24odCl7cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3Qub25OZXh0KGUpLHQub25Db21wbGV0ZWQoKX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3I/KHQub25OZXh0KG4pLHQub25Db21wbGV0ZWQoKSk6dC5vbkVycm9yKG5ldyBSKX0pfSxlKX1mdW5jdGlvbiBoKGUsaSxvKXtyZXR1cm4gbmV3IGcoZnVuY3Rpb24odCl7dmFyIHI9byxuPSExO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXtyPWUsbj0hMH0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe258fGk/KHQub25OZXh0KHIpLHQub25Db21wbGV0ZWQoKSk6dC5vbkVycm9yKG5ldyBSKX0pfSxlKX1mdW5jdGlvbiBwKGksZSx0LG8pe3ZhciBhPWooZSx0LDMpO3JldHVybiBuZXcgZyhmdW5jdGlvbihyKXt2YXIgbj0wO3JldHVybiBpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1hKGUsbixpKX1jYXRjaChlKXtyZXR1cm4gdm9pZCByLm9uRXJyb3IoZSl9dD8oci5vbk5leHQobz9uOmUpLHIub25Db21wbGV0ZWQoKSk6bisrfSxmdW5jdGlvbihlKXtyLm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7ci5vbk5leHQobz8tMTp1KSxyLm9uQ29tcGxldGVkKCl9KX0saSl9dmFyIGYsZD10Lk9ic2VydmFibGUsdj1kLnByb3RvdHlwZSxtPXQuQ29tcG9zaXRlRGlzcG9zYWJsZSxnPXQuQW5vbnltb3VzT2JzZXJ2YWJsZSxfPXQuRGlzcG9zYWJsZS5lbXB0eSx5PSh0LmludGVybmFscy5pc0VxdWFsLHQuaGVscGVycyksYj15Lm5vdCx4PXkuZGVmYXVsdENvbXBhcmVyLHc9eS5pZGVudGl0eSxTPXkuZGVmYXVsdFN1YkNvbXBhcmVyLE09eS5pc0Z1bmN0aW9uLEM9eS5pc1Byb21pc2UsVD15LmlzQXJyYXlMaWtlLEU9eS5pc0l0ZXJhYmxlLE89dC5pbnRlcm5hbHMuaW5oZXJpdHMsUD1kLmZyb21Qcm9taXNlLEE9ZC5mcm9tLGo9dC5pbnRlcm5hbHMuYmluZENhbGxiYWNrLFI9dC5FbXB0eUVycm9yLGs9dC5PYnNlcnZhYmxlQmFzZSxMPXQuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsTj17ZTp7fX07di5hZ2dyZWdhdGU9ZnVuY3Rpb24oKXt2YXIgbyxhLHM9ITEsZT10aGlzO3JldHVybiAyPT09YXJndW1lbnRzLmxlbmd0aD8ocz0hMCxhPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSk6bz1hcmd1bWVudHNbMF0sbmV3IGcoZnVuY3Rpb24odCl7dmFyIHIsbixpO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXshaSYmKGk9ITApO3RyeXtyP249byhuLGUpOihuPXM/byhhLGUpOmUscj0hMCl9Y2F0Y2goZSl7cmV0dXJuIHQub25FcnJvcihlKX19LGZ1bmN0aW9uKGUpe3Qub25FcnJvcihlKX0sZnVuY3Rpb24oKXtpJiZ0Lm9uTmV4dChuKSwhaSYmcyYmdC5vbk5leHQoYSksIWkmJiFzJiZ0Lm9uRXJyb3IobmV3IFIpLHQub25Db21wbGV0ZWQoKX0pfSxlKX07dmFyIEk9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gZShlLHQscixuKXt0aGlzLnNvdXJjZT1lLHRoaXMuYWNjPXQsdGhpcy5oYXNTZWVkPXIsdGhpcy5zZWVkPW4saS5jYWxsKHRoaXMpfWZ1bmN0aW9uIHQoZSx0KXt0aGlzLm89ZSx0aGlzLmFjYz10LmFjYyx0aGlzLmhhc1NlZWQ9dC5oYXNTZWVkLHRoaXMuc2VlZD10LnNlZWQsdGhpcy5oYXNBY2N1bXVsYXRpb249ITEsdGhpcy5yZXN1bHQ9bnVsbCx0aGlzLmhhc1ZhbHVlPSExLHRoaXMuaXNTdG9wcGVkPSExfXJldHVybiBPKGUsaSksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyB0KGUsdGhpcykpfSx0LnByb3RvdHlwZS5vbk5leHQ9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fCghdGhpcy5oYXNWYWx1ZSYmKHRoaXMuaGFzVmFsdWU9ITApLHRoaXMuaGFzQWNjdW11bGF0aW9uP3RoaXMucmVzdWx0PW4odGhpcy5hY2MpKHRoaXMucmVzdWx0LGUpOih0aGlzLnJlc3VsdD10aGlzLmhhc1NlZWQ/bih0aGlzLmFjYykodGhpcy5zZWVkLGUpOmUsdGhpcy5oYXNBY2N1bXVsYXRpb249ITApLHRoaXMucmVzdWx0PT09TiYmdGhpcy5vLm9uRXJyb3IodGhpcy5yZXN1bHQuZSkpfSx0LnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSkpfSx0LnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5oYXNWYWx1ZSYmdGhpcy5vLm9uTmV4dCh0aGlzLnJlc3VsdCksIXRoaXMuaGFzVmFsdWUmJnRoaXMuaGFzU2VlZCYmdGhpcy5vLm9uTmV4dCh0aGlzLnNlZWQpLCF0aGlzLmhhc1ZhbHVlJiYhdGhpcy5oYXNTZWVkJiZ0aGlzLm8ub25FcnJvcihuZXcgUiksdGhpcy5vLm9uQ29tcGxldGVkKCkpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LHQucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LGV9KGspO3JldHVybiB2LnJlZHVjZT1mdW5jdGlvbihlKXt2YXIgdD0hMTtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dD0hMDt2YXIgcj1hcmd1bWVudHNbMV19cmV0dXJuIG5ldyBJKHRoaXMsZSx0LHIpfSx2LnNvbWU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBlP3IuZmlsdGVyKGUsdCkuc29tZSgpOm5ldyBnKGZ1bmN0aW9uKHQpe3JldHVybiByLnN1YnNjcmliZShmdW5jdGlvbigpe3Qub25OZXh0KCEwKSx0Lm9uQ29tcGxldGVkKCl9LGZ1bmN0aW9uKGUpe3Qub25FcnJvcihlKX0sZnVuY3Rpb24oKXt0Lm9uTmV4dCghMSksdC5vbkNvbXBsZXRlZCgpfSl9LHIpfSx2LmFueT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvbWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx2LmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbnkoKS5tYXAoYil9LHYuZXZlcnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXQoZSl9LGUpLnNvbWUoKS5tYXAoYil9LHYuYWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlcnkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx2LmluY2x1ZGVzPWZ1bmN0aW9uKGksZSl7ZnVuY3Rpb24gbyhlLHQpe3JldHVybiAwPT09ZSYmMD09PXR8fGU9PT10fHxpc05hTihlKSYmaXNOYU4odCl9dmFyIGE9dGhpcztyZXR1cm4gbmV3IGcoZnVuY3Rpb24odCl7dmFyIHI9MCxuPStlfHwwO3JldHVybiBNYXRoLmFicyhuKT09PTEvMCYmKG49MCksMD5uPyh0Lm9uTmV4dCghMSksdC5vbkNvbXBsZXRlZCgpLF8pOmEuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3IrKz49biYmbyhlLGkpJiYodC5vbk5leHQoITApLHQub25Db21wbGV0ZWQoKSl9LGZ1bmN0aW9uKGUpe3Qub25FcnJvcihlKX0sZnVuY3Rpb24oKXt0Lm9uTmV4dCghMSksdC5vbkNvbXBsZXRlZCgpfSl9LHRoaXMpfSx2LmNvbnRhaW5zPWZ1bmN0aW9uKGUsdCl7di5pbmNsdWRlcyhlLHQpfSx2LmNvdW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dGhpcy5maWx0ZXIoZSx0KS5jb3VudCgpOnRoaXMucmVkdWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlKzF9LDApfSx2LmluZGV4T2Y9ZnVuY3Rpb24oaSxlKXt2YXIgbz10aGlzO3JldHVybiBuZXcgZyhmdW5jdGlvbih0KXt2YXIgcj0wLG49K2V8fDA7cmV0dXJuIE1hdGguYWJzKG4pPT09MS8wJiYobj0wKSwwPm4/KHQub25OZXh0KC0xKSx0Lm9uQ29tcGxldGVkKCksXyk6by5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7cj49biYmZT09PWkmJih0Lm9uTmV4dChyKSx0Lm9uQ29tcGxldGVkKCkpLHIrK30sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3Qub25OZXh0KC0xKSx0Lm9uQ29tcGxldGVkKCl9KX0sbyl9LHYuc3VtPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJk0oZSk/dGhpcy5tYXAoZSx0KS5zdW0oKTp0aGlzLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlK3R9LDApfSx2Lm1pbkJ5PWZ1bmN0aW9uKGUscil7cmV0dXJuIHJ8fChyPVMpLGkodGhpcyxlLGZ1bmN0aW9uKGUsdCl7cmV0dXJuLTEqcihlLHQpfSl9LHYubWluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1pbkJ5KHcsZSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSl9LHYubWF4Qnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9UyksaSh0aGlzLGUsdCl9LHYubWF4PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1heEJ5KHcsZSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSl9LHYuYXZlcmFnZT1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZNKGUpP3RoaXMubWFwKGUsdCkuYXZlcmFnZSgpOnRoaXMucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJue3N1bTplLnN1bSt0LGNvdW50OmUuY291bnQrMX19LHtzdW06MCxjb3VudDowfSkubWFwKGZ1bmN0aW9uKGUpe2lmKDA9PT1lLmNvdW50KXRocm93IG5ldyBSO3JldHVybiBlLnN1bS9lLmNvdW50fSl9LHYuc2VxdWVuY2VFcXVhbD1mdW5jdGlvbihyLHUpe3ZhciBjPXRoaXM7cmV0dXJuIHV8fCh1PXgpLG5ldyBnKGZ1bmN0aW9uKG4pe3ZhciBpPSExLG89ITEsYT1bXSxzPVtdLGU9Yy5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQscjtpZihzLmxlbmd0aD4wKXtyPXMuc2hpZnQoKTt0cnl7dD11KHIsZSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgbi5vbkVycm9yKGUpfXR8fChuLm9uTmV4dCghMSksbi5vbkNvbXBsZXRlZCgpKX1lbHNlIG8/KG4ub25OZXh0KCExKSxuLm9uQ29tcGxldGVkKCkpOmEucHVzaChlKX0sZnVuY3Rpb24oZSl7bi5vbkVycm9yKGUpfSxmdW5jdGlvbigpe2k9ITAsMD09PWEubGVuZ3RoJiYocy5sZW5ndGg+MD8obi5vbk5leHQoITEpLG4ub25Db21wbGV0ZWQoKSk6byYmKG4ub25OZXh0KCEwKSxuLm9uQ29tcGxldGVkKCkpKX0pOyhUKHIpfHxFKHIpKSYmKHI9QShyKSksQyhyKSYmKHI9UChyKSk7dmFyIHQ9ci5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ7aWYoYS5sZW5ndGg+MCl7dmFyIHI9YS5zaGlmdCgpO3RyeXt0PXUocixlKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBuLm9uRXJyb3IoZSl9dHx8KG4ub25OZXh0KCExKSxuLm9uQ29tcGxldGVkKCkpfWVsc2UgaT8obi5vbk5leHQoITEpLG4ub25Db21wbGV0ZWQoKSk6cy5wdXNoKGUpfSxmdW5jdGlvbihlKXtuLm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7bz0hMCwwPT09cy5sZW5ndGgmJihhLmxlbmd0aD4wPyhuLm9uTmV4dCghMSksbi5vbkNvbXBsZXRlZCgpKTppJiYobi5vbk5leHQoITApLG4ub25Db21wbGV0ZWQoKSkpfSk7cmV0dXJuIG5ldyBtKGUsdCl9LGMpfSx2LmVsZW1lbnRBdD1mdW5jdGlvbihlKXtyZXR1cm4gYSh0aGlzLGUsITEpfSx2LmVsZW1lbnRBdE9yRGVmYXVsdD1mdW5jdGlvbihlLHQpe3JldHVybiBhKHRoaXMsZSwhMCx0KX0sdi5zaW5nbGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmTShlKT90aGlzLndoZXJlKGUsdCkuc2luZ2xlKCk6Yyh0aGlzLCExKX0sdi5zaW5nbGVPckRlZmF1bHQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlJiZNKGUpP3RoaXMuZmlsdGVyKGUscikuc2luZ2xlT3JEZWZhdWx0KG51bGwsdCk6Yyh0aGlzLCEwLHQpfSx2LmZpcnN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dGhpcy53aGVyZShlLHQpLmZpcnN0KCk6bCh0aGlzLCExKX0sdi5maXJzdE9yRGVmYXVsdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU/dGhpcy53aGVyZShlKS5maXJzdE9yRGVmYXVsdChudWxsLHQpOmwodGhpcywhMCx0KX0sdi5sYXN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dGhpcy53aGVyZShlLHQpLmxhc3QoKTpoKHRoaXMsITEpfSx2Lmxhc3RPckRlZmF1bHQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlP3RoaXMud2hlcmUoZSxyKS5sYXN0T3JEZWZhdWx0KG51bGwsdCk6aCh0aGlzLCEwLHQpfSx2LmZpbmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcCh0aGlzLGUsdCwhMSl9LHYuZmluZEluZGV4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHAodGhpcyxlLHQsITApfSx2LnRvU2V0PWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHMuU2V0KXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGcoZnVuY3Rpb24odCl7dmFyIHI9bmV3IHMuU2V0O3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXtyLmFkZChlKX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3Qub25OZXh0KHIpLHQub25Db21wbGV0ZWQoKX0pfSxlKX0sdi50b01hcD1mdW5jdGlvbihvLGEpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBzLk1hcCl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBnKGZ1bmN0aW9uKG4pe3ZhciBpPW5ldyBzLk1hcDtyZXR1cm4gZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9byhlKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBuLm9uRXJyb3IoZSl9dmFyIHI9ZTtpZihhKXRyeXtyPWEoZSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgbi5vbkVycm9yKGUpfWkuc2V0KHQscil9LGZ1bmN0aW9uKGUpe24ub25FcnJvcihlKX0sZnVuY3Rpb24oKXtuLm9uTmV4dChpKSxuLm9uQ29tcGxldGVkKCl9KX0sZSl9LHR9KX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2Ygbj9uOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7MTU5OjE1OX1dLDE1OTpbZnVuY3Rpb24oZSxMcixOcil7KGZ1bmN0aW9uKFJyLGtyKXsoZnVuY3Rpb24oYSl7ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9W10scj0wLG49ZS5sZW5ndGg7bj5yO3IrKyl0LnB1c2goZVtyXSk7cmV0dXJuIHR9ZnVuY3Rpb24gbyhlLHQpe2lmKGllJiZ0LnN0YWNrJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJmUuc3RhY2smJi0xPT09ZS5zdGFjay5pbmRleE9mKHNlKSl7Zm9yKHZhciByPVtdLG49dDtuO249bi5zb3VyY2Upbi5zdGFjayYmci51bnNoaWZ0KG4uc3RhY2spO3IudW5zaGlmdChlLnN0YWNrKTt2YXIgaT1yLmpvaW4oXCJcXG5cIitzZStcIlxcblwiKTtlLnN0YWNrPXUoaSl9fWZ1bmN0aW9uIHUoZSl7Zm9yKHZhciB0PWUuc3BsaXQoXCJcXG5cIikscj1bXSxuPTAsaT10Lmxlbmd0aDtpPm47bisrKXt2YXIgbz10W25dO2Mobyl8fGwobyl8fCFvfHxyLnB1c2gobyl9cmV0dXJuIHIuam9pbihcIlxcblwiKX1mdW5jdGlvbiBjKGUpe3ZhciB0PWgoZSk7aWYoIXQpcmV0dXJuITE7dmFyIHI9dFswXSxuPXRbMV07cmV0dXJuIHI9PT1vZSYmbj49YWUmJmpyPj1ufWZ1bmN0aW9uIGwoZSl7cmV0dXJuLTEhPT1lLmluZGV4T2YoXCIobW9kdWxlLmpzOlwiKXx8LTEhPT1lLmluZGV4T2YoXCIobm9kZS5qczpcIil9ZnVuY3Rpb24gZSgpe2lmKGllKXRyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2goZSl7dmFyIHQ9ZS5zdGFjay5zcGxpdChcIlxcblwiKSxyPXRbMF0uaW5kZXhPZihcIkBcIik+MD90WzFdOnRbMl0sbj1oKHIpO2lmKCFuKXJldHVybjtyZXR1cm4gb2U9blswXSxuWzFdfX1mdW5jdGlvbiBoKGUpe3ZhciB0PS9hdCAuKyBcXCgoLispOihcXGQrKTooPzpcXGQrKVxcKSQvLmV4ZWMoZSk7aWYodClyZXR1cm5bdFsxXSxOdW1iZXIodFsyXSldO3ZhciByPS9hdCAoW14gXSspOihcXGQrKTooPzpcXGQrKSQvLmV4ZWMoZSk7aWYocilyZXR1cm5bclsxXSxOdW1iZXIoclsyXSldO3ZhciBuPS8uKkAoLispOihcXGQrKSQvLmV4ZWMoZSk7cmV0dXJuIG4/W25bMV0sTnVtYmVyKG5bMl0pXTp2b2lkIDB9ZnVuY3Rpb24gcihlKXt2YXIgdD1bXTtpZighR2UoZSkpcmV0dXJuIHQ7JGUubm9uRW51bUFyZ3MmJmUubGVuZ3RoJiZWZShlKSYmKGU9cWUuY2FsbChlKSk7dmFyIHI9JGUuZW51bVByb3RvdHlwZXMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUsbj0kZS5lbnVtRXJyb3JQcm9wcyYmKGU9PT1JZXx8ZSBpbnN0YW5jZW9mIEVycm9yKTtmb3IodmFyIGkgaW4gZSlyJiZcInByb3RvdHlwZVwiPT1pfHxuJiYoXCJtZXNzYWdlXCI9PWl8fFwibmFtZVwiPT1pKXx8dC5wdXNoKGkpO2lmKCRlLm5vbkVudW1TaGFkb3dzJiZlIT09RGUpe3ZhciBvPWUuY29uc3RydWN0b3IsYT0tMSxzPXdlO2lmKGU9PT0obyYmby5wcm90b3R5cGUpKXZhciB1PWU9PT1CZT9SZTplPT09SWU/RWU6a2UuY2FsbChlKSxjPXplW3VdO2Zvcig7KythPHM7KWk9eGVbYV0sYyYmY1tpXXx8IUxlLmNhbGwoZSxpKXx8dC5wdXNoKGkpfXJldHVybiB0fWZ1bmN0aW9uIG4oZSx0LHIpe2Zvcih2YXIgbj0tMSxpPXIoZSksbz1pLmxlbmd0aDsrK248bzspe3ZhciBhPWlbbl07aWYodChlW2FdLGEsZSk9PT0hMSlicmVha31yZXR1cm4gZX1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIG4oZSx0LHIpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgZS50b1N0cmluZyYmXCJzdHJpbmdcIj09dHlwZW9mKGUrXCJcIil9ZnVuY3Rpb24gZyhuLGUsaSxvKXtpZihuPT09ZSlyZXR1cm4gMCE9PW58fDEvbj09MS9lO3ZhciB0PXR5cGVvZiBuLHI9dHlwZW9mIGU7aWYobj09PW4mJihudWxsPT1ufHxudWxsPT1lfHxcImZ1bmN0aW9uXCIhPXQmJlwib2JqZWN0XCIhPXQmJlwiZnVuY3Rpb25cIiE9ciYmXCJvYmplY3RcIiE9cikpcmV0dXJuITE7dmFyIGE9a2UuY2FsbChuKSxzPWtlLmNhbGwoZSk7aWYoYT09U2UmJihhPUFlKSxzPT1TZSYmKHM9QWUpLGEhPXMpcmV0dXJuITE7c3dpdGNoKGEpe2Nhc2UgQ2U6Y2FzZSBUZTpyZXR1cm4rbj09K2U7Y2FzZSBQZTpyZXR1cm4gbiE9K24/ZSE9K2U6MD09bj8xL249PTEvZTpuPT0rZTtjYXNlIGplOmNhc2UgUmU6cmV0dXJuIG49PVN0cmluZyhlKX12YXIgdT1hPT1NZTtpZighdSl7aWYoYSE9QWV8fCEkZS5ub2RlQ2xhc3MmJihtKG4pfHxtKGUpKSlyZXR1cm4hMTt2YXIgYz0hJGUuYXJnc09iamVjdCYmVmUobik/T2JqZWN0Om4uY29uc3RydWN0b3IsbD0hJGUuYXJnc09iamVjdCYmVmUoZSk/T2JqZWN0OmUuY29uc3RydWN0b3I7aWYoIShjPT1sfHxMZS5jYWxsKG4sXCJjb25zdHJ1Y3RvclwiKSYmTGUuY2FsbChlLFwiY29uc3RydWN0b3JcIil8fG5lKGMpJiZjIGluc3RhbmNlb2YgYyYmbmUobCkmJmwgaW5zdGFuY2VvZiBsfHwhKFwiY29uc3RydWN0b3JcImluIG4mJlwiY29uc3RydWN0b3JcImluIGUpKSlyZXR1cm4hMX1pfHwoaT1bXSksb3x8KG89W10pO2Zvcih2YXIgaD1pLmxlbmd0aDtoLS07KWlmKGlbaF09PW4pcmV0dXJuIG9baF09PWU7dmFyIHA9MCxmPSEwO2lmKGkucHVzaChuKSxvLnB1c2goZSksdSl7aWYoaD1uLmxlbmd0aCxwPWUubGVuZ3RoLGY9cD09aClmb3IoO3AtLTspe3ZhciBkPWVbcF07aWYoIShmPWcobltwXSxkLGksbykpKWJyZWFrfX1lbHNlIHYoZSxmdW5jdGlvbihlLHQscil7cmV0dXJuIExlLmNhbGwocix0KT8ocCsrLGY9TGUuY2FsbChuLHQpJiZnKG5bdF0sZSxpLG8pKTp2b2lkIDB9KSxmJiZ2KG4sZnVuY3Rpb24oZSx0LHIpe3JldHVybiBMZS5jYWxsKHIsdCk/Zj0tLXA+LTE6dm9pZCAwfSk7cmV0dXJuIGkucG9wKCksby5wb3AoKSxmfWZ1bmN0aW9uIGYoZSx0KXtmb3IodmFyIHI9bmV3IEFycmF5KGUpLG49MDtlPm47bisrKXJbbl09dCgpO3JldHVybiByfWZ1bmN0aW9uIHQoKXt0cnl7cmV0dXJuIEhlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1jYXRjaChlKXtyZXR1cm4gS2UuZT1lLEtlfX1mdW5jdGlvbiBwKGUpe2lmKCFuZShlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBIZT1lLHR9ZnVuY3Rpb24gZChlKXt0aHJvdyBlfWZ1bmN0aW9uIF8oZSx0KXt0aGlzLmlkPWUsdGhpcy52YWx1ZT10fWZ1bmN0aW9uIHkoZSx0KXt0aGlzLnNjaGVkdWxlcj1lLHRoaXMuZGlzcG9zYWJsZT10LHRoaXMuaXNEaXNwb3NlZD0hMX1mdW5jdGlvbiBiKGUsdCl7dC5pc0Rpc3Bvc2VkfHwodC5pc0Rpc3Bvc2VkPSEwLHQuZGlzcG9zYWJsZS5kaXNwb3NlKCkpfWZ1bmN0aW9uIHgoZSl7dGhpcy5fcz1zfWZ1bmN0aW9uIHcoZSl7dGhpcy5fcz1zLHRoaXMuX2w9cy5sZW5ndGgsdGhpcy5faT0wfWZ1bmN0aW9uIFMoZSl7dGhpcy5fYT1lfWZ1bmN0aW9uIE0oZSl7dGhpcy5fYT1lLHRoaXMuX2w9TyhlKSx0aGlzLl9pPTB9ZnVuY3Rpb24gQyhlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmSC5pc0Zpbml0ZShlKX1mdW5jdGlvbiBUKGUpe3ZhciB0LHI9ZVt2ZV07aWYoIXImJlwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiB0PW5ldyB4KGUpLHRbdmVdKCk7aWYoIXImJmUubGVuZ3RoIT09YSlyZXR1cm4gdD1uZXcgUyhlKSx0W3ZlXSgpO2lmKCFyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlXCIpO3JldHVybiBlW3ZlXSgpfWZ1bmN0aW9uIEUoZSl7dmFyIHQ9K2U7cmV0dXJuIDA9PT10P3Q6aXNOYU4odCk/dDowPnQ/LTE6MX1mdW5jdGlvbiBPKGUpe3ZhciB0PStlLmxlbmd0aDtyZXR1cm4gaXNOYU4odCk/MDowIT09dCYmQyh0KT8odD1FKHQpKk1hdGguZmxvb3IoTWF0aC5hYnModCkpLDA+PXQ/MDp0Pll0P1l0OnQpOnR9ZnVuY3Rpb24gUChlLHQpe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnBhcmVudD10fWZ1bmN0aW9uIEEoZSx0KXtyZXR1cm4gcHQoZSl8fChlPW10KSxuZXcgWnQodCxlKX1mdW5jdGlvbiBqKGUsdCl7dGhpcy5vYnNlcnZlcj1lLHRoaXMucGFyZW50PXR9ZnVuY3Rpb24gUihlLHQpe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnBhcmVudD10fWZ1bmN0aW9uIGsodCxvKXtyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKG4pe3ZhciBlPW5ldyBhdCxpPW5ldyBzdDtyZXR1cm4gaS5zZXREaXNwb3NhYmxlKGUpLGUuc2V0RGlzcG9zYWJsZSh0LnN1YnNjcmliZShmdW5jdGlvbihlKXtuLm9uTmV4dChlKX0sZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PW8oZSl9Y2F0Y2goZSl7cmV0dXJuIG4ub25FcnJvcihlKX1yZSh0KSYmKHQ9VnQodCkpO3ZhciByPW5ldyBhdDtpLnNldERpc3Bvc2FibGUociksci5zZXREaXNwb3NhYmxlKHQuc3Vic2NyaWJlKG4pKX0sZnVuY3Rpb24oZSl7bi5vbkNvbXBsZXRlZChlKX0pKSxpfSx0KX1mdW5jdGlvbiBMKCl7cmV0dXJuITF9ZnVuY3Rpb24gTihhLHMpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBUcihmdW5jdGlvbihuKXt2YXIgaT0wLG89YS5sZW5ndGg7cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2lmKG8+aSl7dmFyIHQ9YVtpKytdLHI9cChzKShlLHQpO2lmKHI9PT1LZSlyZXR1cm4gbi5vbkVycm9yKHIuZSk7bi5vbk5leHQocil9ZWxzZSBuLm9uQ29tcGxldGVkKCl9LGZ1bmN0aW9uKGUpe24ub25FcnJvcihlKX0sZnVuY3Rpb24oKXtuLm9uQ29tcGxldGVkKCl9KX0sZSl9ZnVuY3Rpb24gTCgpe3JldHVybiExfWZ1bmN0aW9uIEkoKXtyZXR1cm5bXX1mdW5jdGlvbiBMKCl7cmV0dXJuITF9ZnVuY3Rpb24gRCgpe3JldHVybltdfWZ1bmN0aW9uIEIoZSx0KXt0aGlzLm9ic2VydmVyPWUsdGhpcy5hY2N1bXVsYXRvcj10LmFjY3VtdWxhdG9yLHRoaXMuaGFzU2VlZD10Lmhhc1NlZWQsdGhpcy5zZWVkPXQuc2VlZCx0aGlzLmhhc0FjY3VtdWxhdGlvbj0hMSx0aGlzLmFjY3VtdWxhdGlvbj1udWxsLHRoaXMuaGFzVmFsdWU9ITEsdGhpcy5pc1N0b3BwZWQ9ITF9ZnVuY3Rpb24gRihuLGUsdCl7dmFyIGk9YmUoZSx0LDMpO3JldHVybiBuLm1hcChmdW5jdGlvbihlLHQpe3ZhciByPWkoZSx0LG4pO3JldHVybiByZShyKSYmKHI9VnQocikpLChfZShyKXx8Z2UocikpJiYocj1LdChyKSkscn0pLmNvbmNhdEFsbCgpfWZ1bmN0aW9uIHooZSx0LHIpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZihyKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gJChlKXt0aGlzLmNvbXBhcmVyPWUsdGhpcy5zZXQ9W119ZnVuY3Rpb24gRyhuLGUsdCl7dmFyIGk9YmUoZSx0LDMpO3JldHVybiBuLm1hcChmdW5jdGlvbihlLHQpe3ZhciByPWkoZSx0LG4pO3JldHVybiByZShyKSYmKHI9VnQocikpLChfZShyKXx8Z2UocikpJiYocj1LdChyKSkscn0pLm1lcmdlQWxsKCl9dmFyIFY9e2Jvb2xlYW46ITEsZnVuY3Rpb246ITAsb2JqZWN0OiEwLG51bWJlcjohMSxzdHJpbmc6ITEsdW5kZWZpbmVkOiExfSxIPVZbdHlwZW9mIHdpbmRvd10mJndpbmRvd3x8dGhpcyxVPVZbdHlwZW9mIE5yXSYmTnImJiFOci5ub2RlVHlwZSYmTnIscT1WW3R5cGVvZiBMcl0mJkxyJiYhTHIubm9kZVR5cGUmJkxyLFc9cSYmcS5leHBvcnRzPT09VSYmVSxYPVZbdHlwZW9mIGtyXSYma3I7IVh8fFguZ2xvYmFsIT09WCYmWC53aW5kb3chPT1YfHwoSD1YKTt2YXIgWT17aW50ZXJuYWxzOnt9LGNvbmZpZzp7UHJvbWlzZTpILlByb21pc2V9LGhlbHBlcnM6e319LEs9WS5oZWxwZXJzLm5vb3A9ZnVuY3Rpb24oKXt9LFo9KFkuaGVscGVycy5ub3REZWZpbmVkPWZ1bmN0aW9uKGUpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBlfSxZLmhlbHBlcnMuaWRlbnRpdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxKPShZLmhlbHBlcnMucGx1Y2s9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlW3RdfX0sWS5oZWxwZXJzLmp1c3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV9fSxZLmhlbHBlcnMuZGVmYXVsdE5vdz1EYXRlLm5vdyksUT1ZLmhlbHBlcnMuZGVmYXVsdENvbXBhcmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFVlKGUsdCl9LGVlPVkuaGVscGVycy5kZWZhdWx0U3ViQ29tcGFyZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT50PzE6dD5lPy0xOjB9LHRlPShZLmhlbHBlcnMuZGVmYXVsdEtleVNlcmlhbGl6ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9TdHJpbmcoKX0sWS5oZWxwZXJzLmRlZmF1bHRFcnJvcj1mdW5jdGlvbihlKXt0aHJvdyBlfSkscmU9WS5oZWxwZXJzLmlzUHJvbWlzZT1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUuc3Vic2NyaWJlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRoZW59LG5lPShZLmhlbHBlcnMuYXNBcnJheT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpfSxZLmhlbHBlcnMubm90PWZ1bmN0aW9uKGUpe3JldHVybiFlfSxZLmhlbHBlcnMuaXNGdW5jdGlvbj1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV8fCExfTtyZXR1cm4gZSgveC8pJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZcIltvYmplY3QgRnVuY3Rpb25dXCI9PWtlLmNhbGwoZSl9KSxlfSgpKTtZLmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0PSExO3ZhciBpZT0hMTt0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKGUpe2llPSEhZS5zdGFja312YXIgb2UsYWU9ZSgpLHNlPVwiRnJvbSBwcmV2aW91cyBldmVudDpcIix1ZT1ZLkVtcHR5RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLm1lc3NhZ2U9XCJTZXF1ZW5jZSBjb250YWlucyBubyBlbGVtZW50cy5cIixFcnJvci5jYWxsKHRoaXMpfTt1ZS5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlO3ZhciBjZT1ZLk9iamVjdERpc3Bvc2VkRXJyb3I9ZnVuY3Rpb24oKXt0aGlzLm1lc3NhZ2U9XCJPYmplY3QgaGFzIGJlZW4gZGlzcG9zZWRcIixFcnJvci5jYWxsKHRoaXMpfTtjZS5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlO3ZhciBsZT1ZLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yPWZ1bmN0aW9uKCl7dGhpcy5tZXNzYWdlPVwiQXJndW1lbnQgb3V0IG9mIHJhbmdlXCIsRXJyb3IuY2FsbCh0aGlzKX07bGUucHJvdG90eXBlPUVycm9yLnByb3RvdHlwZTt2YXIgaGU9WS5Ob3RTdXBwb3J0ZWRFcnJvcj1mdW5jdGlvbihlKXt0aGlzLm1lc3NhZ2U9ZXx8XCJUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkXCIsRXJyb3IuY2FsbCh0aGlzKX07aGUucHJvdG90eXBlPUVycm9yLnByb3RvdHlwZTt2YXIgcGU9WS5Ob3RJbXBsZW1lbnRlZEVycm9yPWZ1bmN0aW9uKGUpe3RoaXMubWVzc2FnZT1lfHxcIlRoaXMgb3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZFwiLEVycm9yLmNhbGwodGhpcyl9O3BlLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGU7dmFyIGZlPVkuaGVscGVycy5ub3RJbXBsZW1lbnRlZD1mdW5jdGlvbigpe3Rocm93IG5ldyBwZX0sZGU9WS5oZWxwZXJzLm5vdFN1cHBvcnRlZD1mdW5jdGlvbigpe3Rocm93IG5ldyBoZX0sdmU9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3J8fFwiX2VzNnNoaW1faXRlcmF0b3JfXCI7SC5TZXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG5ldyBILlNldClbXCJAQGl0ZXJhdG9yXCJdJiYodmU9XCJAQGl0ZXJhdG9yXCIpO3ZhciBtZT1ZLmRvbmVFbnVtZXJhdG9yPXtkb25lOiEwLHZhbHVlOmF9LGdlPVkuaGVscGVycy5pc0l0ZXJhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiBlW3ZlXSE9PWF9LF9lPVkuaGVscGVycy5pc0FycmF5TGlrZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5sZW5ndGghPT1hfTtZLmhlbHBlcnMuaXRlcmF0b3I9dmU7dmFyIHllLGJlPVkuaW50ZXJuYWxzLmJpbmRDYWxsYmFjaz1mdW5jdGlvbihuLGksZSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGkpcmV0dXJuIG47c3dpdGNoKGUpe2Nhc2UgMDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKGkpfTtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoaSxlKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoaSxlLHQpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5jYWxsKGksZSx0LHIpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShpLGFyZ3VtZW50cyl9fSx4ZT1bXCJ0b1N0cmluZ1wiLFwidG9Mb2NhbGVTdHJpbmdcIixcInZhbHVlT2ZcIixcImhhc093blByb3BlcnR5XCIsXCJpc1Byb3RvdHlwZU9mXCIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLFwiY29uc3RydWN0b3JcIl0sd2U9eGUubGVuZ3RoLFNlPVwiW29iamVjdCBBcmd1bWVudHNdXCIsTWU9XCJbb2JqZWN0IEFycmF5XVwiLENlPVwiW29iamVjdCBCb29sZWFuXVwiLFRlPVwiW29iamVjdCBEYXRlXVwiLEVlPVwiW29iamVjdCBFcnJvcl1cIixPZT1cIltvYmplY3QgRnVuY3Rpb25dXCIsUGU9XCJbb2JqZWN0IE51bWJlcl1cIixBZT1cIltvYmplY3QgT2JqZWN0XVwiLGplPVwiW29iamVjdCBSZWdFeHBdXCIsUmU9XCJbb2JqZWN0IFN0cmluZ11cIixrZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLExlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksTmU9a2UuY2FsbChhcmd1bWVudHMpPT1TZSxJZT1FcnJvci5wcm90b3R5cGUsRGU9T2JqZWN0LnByb3RvdHlwZSxCZT1TdHJpbmcucHJvdG90eXBlLEZlPURlLnByb3BlcnR5SXNFbnVtZXJhYmxlO3RyeXt5ZT0hKGtlLmNhbGwoZG9jdW1lbnQpPT1BZSYmISh7dG9TdHJpbmc6MH0rXCJcIikpfWNhdGNoKGUpe3llPSEwfXZhciB6ZT17fTt6ZVtNZV09emVbVGVdPXplW1BlXT17Y29uc3RydWN0b3I6ITAsdG9Mb2NhbGVTdHJpbmc6ITAsdG9TdHJpbmc6ITAsdmFsdWVPZjohMH0semVbQ2VdPXplW1JlXT17Y29uc3RydWN0b3I6ITAsdG9TdHJpbmc6ITAsdmFsdWVPZjohMH0semVbRWVdPXplW09lXT16ZVtqZV09e2NvbnN0cnVjdG9yOiEwLHRvU3RyaW5nOiEwfSx6ZVtBZV09e2NvbnN0cnVjdG9yOiEwfTt2YXIgJGU9e307IWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oKXt0aGlzLng9MX0sdD1bXTtlLnByb3RvdHlwZT17dmFsdWVPZjoxLHk6MX07Zm9yKHZhciByIGluIG5ldyBlKXQucHVzaChyKTtmb3IociBpbiBhcmd1bWVudHMpOyRlLmVudW1FcnJvclByb3BzPUZlLmNhbGwoSWUsXCJtZXNzYWdlXCIpfHxGZS5jYWxsKEllLFwibmFtZVwiKSwkZS5lbnVtUHJvdG90eXBlcz1GZS5jYWxsKGUsXCJwcm90b3R5cGVcIiksJGUubm9uRW51bUFyZ3M9MCE9ciwkZS5ub25FbnVtU2hhZG93cz0hL3ZhbHVlT2YvLnRlc3QodCl9KDEpO3ZhciBHZT1ZLmludGVybmFscy5pc09iamVjdD1mdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZTtyZXR1cm4gZSYmKFwiZnVuY3Rpb25cIj09dHx8XCJvYmplY3RcIj09dCl8fCExfSxWZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJvYmplY3RcIj09dHlwZW9mIGU/a2UuY2FsbChlKT09U2U6ITF9O05lfHwoVmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlP0xlLmNhbGwoZSxcImNhbGxlZVwiKTohMX0pO3ZhciBIZSxVZT1ZLmludGVybmFscy5pc0VxdWFsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGcoZSx0LFtdLFtdKX0scWU9KHt9Lmhhc093blByb3BlcnR5LEFycmF5LnByb3RvdHlwZS5zbGljZSksV2U9dGhpcy5pbmhlcml0cz1ZLmludGVybmFscy5pbmhlcml0cz1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ci5wcm90b3R5cGU9dC5wcm90b3R5cGUsZS5wcm90b3R5cGU9bmV3IHJ9LFhlPVkuaW50ZXJuYWxzLmFkZFByb3BlcnRpZXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MSxuPWFyZ3VtZW50cy5sZW5ndGg7bj5yO3IrKyl0LnB1c2goYXJndW1lbnRzW3JdKTtmb3IodmFyIGk9MCxvPXQubGVuZ3RoO28+aTtpKyspe3ZhciBhPXRbaV07Zm9yKHZhciBzIGluIGEpZVtzXT1hW3NdfX0sWWU9WS5pbnRlcm5hbHMuYWRkUmVmPWZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBUcihmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFFlKHIuZ2V0RGlzcG9zYWJsZSgpLHQuc3Vic2NyaWJlKGUpKX0pfSxLZT17ZTp7fX07Xy5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudmFsdWUuY29tcGFyZVRvKGUudmFsdWUpO3JldHVybiAwPT09dCYmKHQ9dGhpcy5pZC1lLmlkKSx0fTt2YXIgWmU9WS5pbnRlcm5hbHMuUHJpb3JpdHlRdWV1ZT1mdW5jdGlvbihlKXt0aGlzLml0ZW1zPW5ldyBBcnJheShlKSx0aGlzLmxlbmd0aD0wfSxKZT1aZS5wcm90b3R5cGU7SmUuaXNIaWdoZXJQcmlvcml0eT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLml0ZW1zW2VdLmNvbXBhcmVUbyh0aGlzLml0ZW1zW3RdKTwwfSxKZS5wZXJjb2xhdGU9ZnVuY3Rpb24oZSl7aWYoIShlPj10aGlzLmxlbmd0aHx8MD5lKSl7dmFyIHQ9ZS0xPj4xO2lmKCEoMD50fHx0PT09ZSkmJnRoaXMuaXNIaWdoZXJQcmlvcml0eShlLHQpKXt2YXIgcj10aGlzLml0ZW1zW2VdO3RoaXMuaXRlbXNbZV09dGhpcy5pdGVtc1t0XSx0aGlzLml0ZW1zW3RdPXIsdGhpcy5wZXJjb2xhdGUodCl9fX0sSmUuaGVhcGlmeT1mdW5jdGlvbihlKXtpZigrZXx8KGU9MCksIShlPj10aGlzLmxlbmd0aHx8MD5lKSl7dmFyIHQ9MiplKzEscj0yKmUrMixuPWU7aWYodDx0aGlzLmxlbmd0aCYmdGhpcy5pc0hpZ2hlclByaW9yaXR5KHQsbikmJihuPXQpLHI8dGhpcy5sZW5ndGgmJnRoaXMuaXNIaWdoZXJQcmlvcml0eShyLG4pJiYobj1yKSxuIT09ZSl7dmFyIGk9dGhpcy5pdGVtc1tlXTt0aGlzLml0ZW1zW2VdPXRoaXMuaXRlbXNbbl0sdGhpcy5pdGVtc1tuXT1pLHRoaXMuaGVhcGlmeShuKX19fSxKZS5wZWVrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXNbMF0udmFsdWV9LEplLnJlbW92ZUF0PWZ1bmN0aW9uKGUpe3RoaXMuaXRlbXNbZV09dGhpcy5pdGVtc1stLXRoaXMubGVuZ3RoXSx0aGlzLml0ZW1zW3RoaXMubGVuZ3RoXT1hLHRoaXMuaGVhcGlmeSgpfSxKZS5kZXF1ZXVlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wZWVrKCk7cmV0dXJuIHRoaXMucmVtb3ZlQXQoMCksZX0sSmUuZW5xdWV1ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCsrO3RoaXMuaXRlbXNbdF09bmV3IF8oWmUuY291bnQrKyxlKSx0aGlzLnBlcmNvbGF0ZSh0KX0sSmUucmVtb3ZlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5sZW5ndGg7dCsrKWlmKHRoaXMuaXRlbXNbdF0udmFsdWU9PT1lKXJldHVybiB0aGlzLnJlbW92ZUF0KHQpLCEwO3JldHVybiExfSxaZS5jb3VudD0wO3ZhciBRZT1ZLkNvbXBvc2l0ZURpc3Bvc2FibGU9ZnVuY3Rpb24oKXt2YXIgZSx0LHI9W107aWYoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKXI9YXJndW1lbnRzWzBdLHQ9ci5sZW5ndGg7ZWxzZSBmb3IodD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQpLGU9MDt0PmU7ZSsrKXJbZV09YXJndW1lbnRzW2VdO2ZvcihlPTA7dD5lO2UrKylpZighaXQocltlXSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBhIGRpc3Bvc2FibGVcIik7dGhpcy5kaXNwb3NhYmxlcz1yLHRoaXMuaXNEaXNwb3NlZD0hMSx0aGlzLmxlbmd0aD1yLmxlbmd0aH0sZXQ9UWUucHJvdG90eXBlO2V0LmFkZD1mdW5jdGlvbihlKXt0aGlzLmlzRGlzcG9zZWQ/ZS5kaXNwb3NlKCk6KHRoaXMuZGlzcG9zYWJsZXMucHVzaChlKSx0aGlzLmxlbmd0aCsrKX0sZXQucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PSExO2lmKCF0aGlzLmlzRGlzcG9zZWQpe3ZhciByPXRoaXMuZGlzcG9zYWJsZXMuaW5kZXhPZihlKTstMSE9PXImJih0PSEwLHRoaXMuZGlzcG9zYWJsZXMuc3BsaWNlKHIsMSksdGhpcy5sZW5ndGgtLSxlLmRpc3Bvc2UoKSl9cmV0dXJuIHR9LGV0LmRpc3Bvc2U9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rpc3Bvc2VkKXt0aGlzLmlzRGlzcG9zZWQ9ITA7Zm9yKHZhciBlPXRoaXMuZGlzcG9zYWJsZXMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLHI9MDtlPnI7cisrKXRbcl09dGhpcy5kaXNwb3NhYmxlc1tyXTtmb3IodGhpcy5kaXNwb3NhYmxlcz1bXSx0aGlzLmxlbmd0aD0wLHI9MDtlPnI7cisrKXRbcl0uZGlzcG9zZSgpfX07dmFyIHR0PVkuRGlzcG9zYWJsZT1mdW5jdGlvbihlKXt0aGlzLmlzRGlzcG9zZWQ9ITEsdGhpcy5hY3Rpb249ZXx8S307dHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzRGlzcG9zZWR8fCh0aGlzLmFjdGlvbigpLHRoaXMuaXNEaXNwb3NlZD0hMCl9O3ZhciBydD10dC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0dChlKX0sbnQ9dHQuZW1wdHk9e2Rpc3Bvc2U6S30saXQ9dHQuaXNEaXNwb3NhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZuZShlLmRpc3Bvc2UpfSxvdD10dC5jaGVja0Rpc3Bvc2VkPWZ1bmN0aW9uKGUpe2lmKGUuaXNEaXNwb3NlZCl0aHJvdyBuZXcgY2V9LGF0PVkuU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRGlzcG9zZWQ9ITEsdGhpcy5jdXJyZW50PW51bGx9O2F0LnByb3RvdHlwZS5nZXREaXNwb3NhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudH0sYXQucHJvdG90eXBlLnNldERpc3Bvc2FibGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5jdXJyZW50KXRocm93IG5ldyBFcnJvcihcIkRpc3Bvc2FibGUgaGFzIGFscmVhZHkgYmVlbiBhc3NpZ25lZFwiKTt2YXIgdD10aGlzLmlzRGlzcG9zZWQ7IXQmJih0aGlzLmN1cnJlbnQ9ZSksdCYmZSYmZS5kaXNwb3NlKCl9LGF0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNEaXNwb3NlZCl7dGhpcy5pc0Rpc3Bvc2VkPSEwO3ZhciBlPXRoaXMuY3VycmVudDt0aGlzLmN1cnJlbnQ9bnVsbH1lJiZlLmRpc3Bvc2UoKX07dmFyIHN0PVkuU2VyaWFsRGlzcG9zYWJsZT1mdW5jdGlvbigpe3RoaXMuaXNEaXNwb3NlZD0hMSx0aGlzLmN1cnJlbnQ9bnVsbH07c3QucHJvdG90eXBlLmdldERpc3Bvc2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50fSxzdC5wcm90b3R5cGUuc2V0RGlzcG9zYWJsZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmlzRGlzcG9zZWQ7aWYoIXQpe3ZhciByPXRoaXMuY3VycmVudDt0aGlzLmN1cnJlbnQ9ZX1yJiZyLmRpc3Bvc2UoKSx0JiZlJiZlLmRpc3Bvc2UoKX0sc3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rpc3Bvc2VkKXt0aGlzLmlzRGlzcG9zZWQ9ITA7dmFyIGU9dGhpcy5jdXJyZW50O3RoaXMuY3VycmVudD1udWxsfWUmJmUuZGlzcG9zZSgpfTt2YXIgdXQ9WS5SZWZDb3VudERpc3Bvc2FibGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZGlzcG9zYWJsZT1lLHRoaXMuZGlzcG9zYWJsZS5jb3VudCsrLHRoaXMuaXNJbm5lckRpc3Bvc2VkPSExfWZ1bmN0aW9uIHQoZSl7dGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZT1lLHRoaXMuaXNEaXNwb3NlZD0hMSx0aGlzLmlzUHJpbWFyeURpc3Bvc2VkPSExLHRoaXMuY291bnQ9MH1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkfHx0aGlzLmlzSW5uZXJEaXNwb3NlZHx8KHRoaXMuaXNJbm5lckRpc3Bvc2VkPSEwLHRoaXMuZGlzcG9zYWJsZS5jb3VudC0tLDA9PT10aGlzLmRpc3Bvc2FibGUuY291bnQmJnRoaXMuZGlzcG9zYWJsZS5pc1ByaW1hcnlEaXNwb3NlZCYmKHRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkPSEwLHRoaXMuZGlzcG9zYWJsZS51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCkpKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuaXNEaXNwb3NlZHx8dGhpcy5pc1ByaW1hcnlEaXNwb3NlZHx8KHRoaXMuaXNQcmltYXJ5RGlzcG9zZWQ9ITAsMD09PXRoaXMuY291bnQmJih0aGlzLmlzRGlzcG9zZWQ9ITAsdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCkpKX0sdC5wcm90b3R5cGUuZ2V0RGlzcG9zYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzcG9zZWQ/bnQ6bmV3IGUodGhpcyl9LHR9KCk7eS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVyLnNjaGVkdWxlV2l0aFN0YXRlKHRoaXMsYil9O3ZhciBjdD1ZLmludGVybmFscy5TY2hlZHVsZWRJdGVtPWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5zY2hlZHVsZXI9ZSx0aGlzLnN0YXRlPXQsdGhpcy5hY3Rpb249cix0aGlzLmR1ZVRpbWU9bix0aGlzLmNvbXBhcmVyPWl8fGVlLHRoaXMuZGlzcG9zYWJsZT1uZXcgYXR9O2N0LnByb3RvdHlwZS5pbnZva2U9ZnVuY3Rpb24oKXt0aGlzLmRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZSh0aGlzLmludm9rZUNvcmUoKSl9LGN0LnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcGFyZXIodGhpcy5kdWVUaW1lLGUuZHVlVGltZSl9LGN0LnByb3RvdHlwZS5pc0NhbmNlbGxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3Bvc2FibGUuaXNEaXNwb3NlZH0sY3QucHJvdG90eXBlLmludm9rZUNvcmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3Rpb24odGhpcy5zY2hlZHVsZXIsdGhpcy5zdGF0ZSl9O3ZhciBsdD1ZLlNjaGVkdWxlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSx0LHIsbil7dGhpcy5ub3c9ZSx0aGlzLl9zY2hlZHVsZT10LHRoaXMuX3NjaGVkdWxlUmVsYXRpdmU9cix0aGlzLl9zY2hlZHVsZUFic29sdXRlPW59ZnVuY3Rpb24gcihlLHQpe3JldHVybiB0KCksbnR9dC5pc1NjaGVkdWxlcj1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHR9O3ZhciBlPXQucHJvdG90eXBlO3JldHVybiBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zY2hlZHVsZShlLHIpfSxlLnNjaGVkdWxlV2l0aFN0YXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlKGUsdCl9LGUuc2NoZWR1bGVXaXRoUmVsYXRpdmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVSZWxhdGl2ZSh0LGUscil9LGUuc2NoZWR1bGVXaXRoUmVsYXRpdmVBbmRTdGF0ZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuX3NjaGVkdWxlUmVsYXRpdmUoZSx0LHIpfSxlLnNjaGVkdWxlV2l0aEFic29sdXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlQWJzb2x1dGUodCxlLHIpfSxlLnNjaGVkdWxlV2l0aEFic29sdXRlQW5kU3RhdGU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9zY2hlZHVsZUFic29sdXRlKGUsdCxyKX0sdC5ub3c9Six0Lm5vcm1hbGl6ZT1mdW5jdGlvbihlKXtyZXR1cm4gMD5lJiYoZT0wKSxlfSx0fSgpLGh0PWx0Lm5vcm1hbGl6ZSxwdD1sdC5pc1NjaGVkdWxlcjshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0LGUpe2Z1bmN0aW9uIG8oZSl7bihlLGZ1bmN0aW9uKGUpe3ZhciByPSExLG49ITEsaT10LnNjaGVkdWxlV2l0aFN0YXRlKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm4gcj9hLnJlbW92ZShpKTpuPSEwLG8odCksbnR9KTtufHwoYS5hZGQoaSkscj0hMCl9KX12YXIgcj1lWzBdLG49ZVsxXSxhPW5ldyBRZTtyZXR1cm4gbyhyKSxhfWZ1bmN0aW9uIG4obyxlLGEpe2Z1bmN0aW9uIHMoZSl7cihlLGZ1bmN0aW9uKGUsdCl7dmFyIHI9ITEsbj0hMSxpPW9bYV0oZSx0LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHI/dS5yZW1vdmUoaSk6bj0hMCxzKHQpLG50fSk7bnx8KHUuYWRkKGkpLHI9ITApfSl9dmFyIHQ9ZVswXSxyPWVbMV0sdT1uZXcgUWU7cmV0dXJuIHModCksdX1mdW5jdGlvbiBpKHQscil7dChmdW5jdGlvbihlKXtyKHQsZSl9KX1lLnNjaGVkdWxlUmVjdXJzaXZlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNjaGVkdWxlUmVjdXJzaXZlV2l0aFN0YXRlKGUsaSl9LGUuc2NoZWR1bGVSZWN1cnNpdmVXaXRoU3RhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zY2hlZHVsZVdpdGhTdGF0ZShbZSx0XSxyKX0sZS5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhSZWxhdGl2ZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNjaGVkdWxlUmVjdXJzaXZlV2l0aFJlbGF0aXZlQW5kU3RhdGUodCxlLGkpfSxlLnNjaGVkdWxlUmVjdXJzaXZlV2l0aFJlbGF0aXZlQW5kU3RhdGU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9zY2hlZHVsZVJlbGF0aXZlKFtlLHJdLHQsZnVuY3Rpb24oZSx0KXtyZXR1cm4gbihlLHQsXCJzY2hlZHVsZVdpdGhSZWxhdGl2ZUFuZFN0YXRlXCIpfSl9LGUuc2NoZWR1bGVSZWN1cnNpdmVXaXRoQWJzb2x1dGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhBYnNvbHV0ZUFuZFN0YXRlKHQsZSxpKX0sZS5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhBYnNvbHV0ZUFuZFN0YXRlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVBYnNvbHV0ZShbZSxyXSx0LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oZSx0LFwic2NoZWR1bGVXaXRoQWJzb2x1dGVBbmRTdGF0ZVwiKX0pfX0obHQucHJvdG90eXBlKSxmdW5jdGlvbihlKXtsdC5wcm90b3R5cGUuc2NoZWR1bGVQZXJpb2RpYz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNjaGVkdWxlUGVyaW9kaWNXaXRoU3RhdGUobnVsbCxlLHQpfSxsdC5wcm90b3R5cGUuc2NoZWR1bGVQZXJpb2RpY1dpdGhTdGF0ZT1mdW5jdGlvbihlLHQscil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIEguc2V0SW50ZXJ2YWwpdGhyb3cgbmV3IGhlO3Q9aHQodCk7dmFyIG49ZSxpPUguc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtuPXIobil9LHQpO3JldHVybiBydChmdW5jdGlvbigpe0guY2xlYXJJbnRlcnZhbChpKX0pfX0obHQucHJvdG90eXBlKSxmdW5jdGlvbihlKXtlLmNhdGNoRXJyb3I9ZVtcImNhdGNoXCJdPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgYnQodGhpcyxlKX19KGx0LnByb3RvdHlwZSk7dmFyIGZ0LGR0LHZ0PShZLmludGVybmFscy5TY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQpe3QoMCx0aGlzLl9wZXJpb2QpO3RyeXt0aGlzLl9zdGF0ZT10aGlzLl9hY3Rpb24odGhpcy5fc3RhdGUpfWNhdGNoKGUpe3Rocm93IHRoaXMuX2NhbmNlbC5kaXNwb3NlKCksZX19ZnVuY3Rpb24gZShlLHQscixuKXt0aGlzLl9zY2hlZHVsZXI9ZSx0aGlzLl9zdGF0ZT10LHRoaXMuX3BlcmlvZD1yLHRoaXMuX2FjdGlvbj1ufXJldHVybiBlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciBlPW5ldyBhdDtyZXR1cm4gdGhpcy5fY2FuY2VsPWUsZS5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhSZWxhdGl2ZUFuZFN0YXRlKDAsdGhpcy5fcGVyaW9kLHQuYmluZCh0aGlzKSkpLGV9LGV9KCksbHQuaW1tZWRpYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0KHRoaXMsZSl9cmV0dXJuIG5ldyBsdChKLGUsZGUsZGUpfSgpKSxtdD1sdC5jdXJyZW50VGhyZWFkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSgpe2Zvcig7by5sZW5ndGg+MDspe3ZhciBlPW8uZGVxdWV1ZSgpOyFlLmlzQ2FuY2VsbGVkKCkmJmUuaW52b2tlKCl9fWZ1bmN0aW9uIGUoZSx0KXt2YXIgcj1uZXcgY3QodGhpcyxlLHQsdGhpcy5ub3coKSk7aWYobylvLmVucXVldWUocik7ZWxzZXtvPW5ldyBaZSg0KSxvLmVucXVldWUocik7dmFyIG49cChpKSgpO2lmKG89bnVsbCxuPT09S2UpcmV0dXJuIGQobi5lKX1yZXR1cm4gci5kaXNwb3NhYmxlfXZhciBvLHQ9bmV3IGx0KEosZSxkZSxkZSk7cmV0dXJuIHQuc2NoZWR1bGVSZXF1aXJlZD1mdW5jdGlvbigpe3JldHVybiFvfSx0fSgpLGd0PWZ1bmN0aW9uKCl7dmFyIGUsdD1LO2lmKEguc2V0VGltZW91dCllPUguc2V0VGltZW91dCx0PUguY2xlYXJUaW1lb3V0O2Vsc2V7aWYoIUguV1NjcmlwdCl0aHJvdyBuZXcgaGU7ZT1mdW5jdGlvbihlLHQpe0guV1NjcmlwdC5TbGVlcCh0KSxlKCl9fXJldHVybntzZXRUaW1lb3V0OmUsY2xlYXJUaW1lb3V0OnR9fSgpLF90PWd0LnNldFRpbWVvdXQseXQ9Z3QuY2xlYXJUaW1lb3V0OyFmdW5jdGlvbigpe2Z1bmN0aW9uIG4oZSl7aWYoYSlfdChmdW5jdGlvbigpe24oZSl9LDApO2Vsc2V7dmFyIHQ9b1tlXTtpZih0KXthPSEwO3ZhciByPXAodCkoKTtpZihkdChlKSxhPSExLHI9PT1LZSlyZXR1cm4gZChyLmUpfX19ZnVuY3Rpb24gZSgpe2lmKCFILnBvc3RNZXNzYWdlfHxILmltcG9ydFNjcmlwdHMpcmV0dXJuITE7dmFyIGU9ITEsdD1ILm9ubWVzc2FnZTtyZXR1cm4gSC5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXtlPSEwfSxILnBvc3RNZXNzYWdlKFwiXCIsXCIqXCIpLEgub25tZXNzYWdlPXQsZX1mdW5jdGlvbiB0KGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlLmRhdGEmJmUuZGF0YS5zdWJzdHJpbmcoMCx1Lmxlbmd0aCk9PT11JiZuKGUuZGF0YS5zdWJzdHJpbmcodS5sZW5ndGgpKX12YXIgaT0xLG89e30sYT0hMTtkdD1mdW5jdGlvbihlKXtkZWxldGUgb1tlXX07dmFyIHI9UmVnRXhwKFwiXlwiK1N0cmluZyhrZSkucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csXCJcXFxcJCZcIikucmVwbGFjZSgvdG9TdHJpbmd8IGZvciBbXlxcXV0rL2csXCIuKj9cIikrXCIkXCIpLHM9XCJmdW5jdGlvblwiPT10eXBlb2Yocz1YJiZXJiZYLnNldEltbWVkaWF0ZSkmJiFyLnRlc3QocykmJnM7aWYobmUocykpZnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9aSsrO3JldHVybiBvW3RdPWUscyhmdW5jdGlvbigpe24odCl9KSx0fTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBSciYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKFJyKSlmdD1mdW5jdGlvbihlKXt2YXIgdD1pKys7cmV0dXJuIG9bdF09ZSxSci5uZXh0VGljayhmdW5jdGlvbigpe24odCl9KSx0fTtlbHNlIGlmKGUoKSl7dmFyIHU9XCJtcy5yeC5zY2hlZHVsZVwiK01hdGgucmFuZG9tKCk7SC5hZGRFdmVudExpc3RlbmVyP0guYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0LCExKTpILmF0dGFjaEV2ZW50P0guYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIix0KTpILm9ubWVzc2FnZT10LGZ0PWZ1bmN0aW9uKGUpe3ZhciB0PWkrKztyZXR1cm4gb1t0XT1lLEgucG9zdE1lc3NhZ2UodStjdXJyZW50SWQsXCIqXCIpLHR9fWVsc2UgaWYoSC5NZXNzYWdlQ2hhbm5lbCl7dmFyIGM9bmV3IEguTWVzc2FnZUNoYW5uZWw7Yy5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7bihlLmRhdGEpfSxmdD1mdW5jdGlvbihlKXt2YXIgdD1pKys7cmV0dXJuIG9bdF09ZSxjLnBvcnQyLnBvc3RNZXNzYWdlKHQpLHR9fWVsc2UgZnQ9XCJkb2N1bWVudFwiaW4gSCYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIEguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKT9mdW5jdGlvbihlKXt2YXIgdD1ILmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikscj1pKys7cmV0dXJuIG9bcl09ZSx0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe24ociksdC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCx0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfSxILmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0KSxyfTpmdW5jdGlvbihlKXt2YXIgdD1pKys7cmV0dXJuIG9bdF09ZSxfdChmdW5jdGlvbigpe24odCl9LDApLHR9fSgpO3ZhciBidD0obHQudGltZW91dD1sdFtcImRlZmF1bHRcIl09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9dGhpcyxuPW5ldyBhdCxpPWZ0KGZ1bmN0aW9uKCl7IW4uaXNEaXNwb3NlZCYmbi5zZXREaXNwb3NhYmxlKHQocixlKSl9KTtyZXR1cm4gbmV3IFFlKG4scnQoZnVuY3Rpb24oKXtkdChpKX0pKX1mdW5jdGlvbiB0KGUsdCxyKXt2YXIgbj10aGlzLGk9bHQubm9ybWFsaXplKHQpLG89bmV3IGF0O2lmKDA9PT1pKXJldHVybiBuLnNjaGVkdWxlV2l0aFN0YXRlKGUscik7dmFyIGE9X3QoZnVuY3Rpb24oKXshby5pc0Rpc3Bvc2VkJiZvLnNldERpc3Bvc2FibGUocihuLGUpKX0saSk7cmV0dXJuIG5ldyBRZShvLHJ0KGZ1bmN0aW9uKCl7eXQoYSl9KSl9ZnVuY3Rpb24gcihlLHQscil7cmV0dXJuIHRoaXMuc2NoZWR1bGVXaXRoUmVsYXRpdmVBbmRTdGF0ZShlLHQtdGhpcy5ub3coKSxyKX1yZXR1cm4gbmV3IGx0KEosZSx0LHIpfSgpLGZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlV2l0aFN0YXRlKGUsdGhpcy5fd3JhcCh0KSl9ZnVuY3Rpb24gaShlLHQscil7cmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVdpdGhSZWxhdGl2ZUFuZFN0YXRlKGUsdCx0aGlzLl93cmFwKHIpKX1mdW5jdGlvbiBvKGUsdCxyKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlV2l0aEFic29sdXRlQW5kU3RhdGUoZSx0LHRoaXMuX3dyYXAocikpfWZ1bmN0aW9uIHQoZSx0KXt0aGlzLl9zY2hlZHVsZXI9ZSx0aGlzLl9oYW5kbGVyPXQsdGhpcy5fcmVjdXJzaXZlT3JpZ2luYWw9bnVsbCx0aGlzLl9yZWN1cnNpdmVXcmFwcGVyPW51bGwsci5jYWxsKHRoaXMsdGhpcy5fc2NoZWR1bGVyLm5vdy5iaW5kKHRoaXMuX3NjaGVkdWxlciksbixpLG8pfXJldHVybiBXZSh0LHIpLHQucHJvdG90eXBlLl9jbG9uZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSx0aGlzLl9oYW5kbGVyKX0sdC5wcm90b3R5cGUuX3dyYXA9ZnVuY3Rpb24ocil7dmFyIG49dGhpcztyZXR1cm4gZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIHIobi5fZ2V0UmVjdXJzaXZlV3JhcHBlcihlKSx0KX1jYXRjaChlKXtpZighbi5faGFuZGxlcihlKSl0aHJvdyBlO3JldHVybiBudH19fSx0LnByb3RvdHlwZS5fZ2V0UmVjdXJzaXZlV3JhcHBlcj1mdW5jdGlvbihlKXtpZih0aGlzLl9yZWN1cnNpdmVPcmlnaW5hbCE9PWUpe3RoaXMuX3JlY3Vyc2l2ZU9yaWdpbmFsPWU7dmFyIHQ9dGhpcy5fY2xvbmUoZSk7dC5fcmVjdXJzaXZlT3JpZ2luYWw9ZSx0Ll9yZWN1cnNpdmVXcmFwcGVyPXQsdGhpcy5fcmVjdXJzaXZlV3JhcHBlcj10fXJldHVybiB0aGlzLl9yZWN1cnNpdmVXcmFwcGVyfSx0LnByb3RvdHlwZS5zY2hlZHVsZVBlcmlvZGljV2l0aFN0YXRlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9ITEsbz1uZXcgYXQ7cmV0dXJuIG8uc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVQZXJpb2RpY1dpdGhTdGF0ZShlLHQsZnVuY3Rpb24oZSl7aWYoaSlyZXR1cm4gbnVsbDt0cnl7cmV0dXJuIHIoZSl9Y2F0Y2goZSl7aWYoaT0hMCwhbi5faGFuZGxlcihlKSl0aHJvdyBlO3JldHVybiBvLmRpc3Bvc2UoKSxudWxsfX0pKSxvfSx0fShsdCkpLHh0PVkuTm90aWZpY2F0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuLGksbyl7dGhpcy5raW5kPWUsdGhpcy52YWx1ZT10LHRoaXMuZXhjZXB0aW9uPXIsdGhpcy5fYWNjZXB0PW4sdGhpcy5fYWNjZXB0T2JzZXJ2YWJsZT1pLHRoaXMudG9TdHJpbmc9b31yZXR1cm4gZS5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZSYmXCJvYmplY3RcIj09dHlwZW9mIGU/dGhpcy5fYWNjZXB0T2JzZXJ2YWJsZShlKTp0aGlzLl9hY2NlcHQoZSx0LHIpfSxlLnByb3RvdHlwZS50b09ic2VydmFibGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gcHQoZSl8fChlPXZ0KSxuZXcgVHIoZnVuY3Rpb24ocil7cmV0dXJuIGUuc2NoZWR1bGVXaXRoU3RhdGUodCxmdW5jdGlvbihlLHQpe3QuX2FjY2VwdE9ic2VydmFibGUociksXCJOXCI9PT10LmtpbmQmJnIub25Db21wbGV0ZWQoKX0pfSl9LGV9KCksd3Q9eHQuY3JlYXRlT25OZXh0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZSh0aGlzLnZhbHVlKX1mdW5jdGlvbiByKGUpe3JldHVybiBlLm9uTmV4dCh0aGlzLnZhbHVlKX1mdW5jdGlvbiBuKCl7cmV0dXJuXCJPbk5leHQoXCIrdGhpcy52YWx1ZStcIilcIn1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB4dChcIk5cIixlLG51bGwsdCxyLG4pfX0oKSxTdD14dC5jcmVhdGVPbkVycm9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQpe3JldHVybiB0KHRoaXMuZXhjZXB0aW9uKX1mdW5jdGlvbiByKGUpe3JldHVybiBlLm9uRXJyb3IodGhpcy5leGNlcHRpb24pfWZ1bmN0aW9uIG4oKXtyZXR1cm5cIk9uRXJyb3IoXCIrdGhpcy5leGNlcHRpb24rXCIpXCJ9cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgeHQoXCJFXCIsbnVsbCxlLHQscixuKX19KCksTXQ9eHQuY3JlYXRlT25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXtyZXR1cm4gcigpfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGUub25Db21wbGV0ZWQoKX1mdW5jdGlvbiByKCl7cmV0dXJuXCJPbkNvbXBsZXRlZCgpXCJ9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4dChcIkNcIixudWxsLG51bGwsZSx0LHIpfX0oKSxDdD1ZLk9ic2VydmVyPWZ1bmN0aW9uKCl7fTtDdC5wcm90b3R5cGUudG9Ob3RpZmllcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmFjY2VwdCh0KX19LEN0LnByb3RvdHlwZS5hc09ic2VydmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQdCh0aGlzLm9uTmV4dC5iaW5kKHRoaXMpLHRoaXMub25FcnJvci5iaW5kKHRoaXMpLHRoaXMub25Db21wbGV0ZWQuYmluZCh0aGlzKSl9LEN0LnByb3RvdHlwZS5jaGVja2VkPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBdCh0aGlzKX07dmFyIFR0PUN0LmNyZWF0ZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGV8fChlPUspLHR8fCh0PXRlKSxyfHwocj1LKSxuZXcgUHQoZSx0LHIpfTtDdC5mcm9tTm90aWZpZXI9ZnVuY3Rpb24odCxyKXtyZXR1cm4gbmV3IFB0KGZ1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwocix3dChlKSl9LGZ1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwocixTdChlKSl9LGZ1bmN0aW9uKCl7cmV0dXJuIHQuY2FsbChyLE10KCkpfSl9LEN0LnByb3RvdHlwZS5ub3RpZnlPbj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFJ0KGUsdGhpcyl9LEN0LnByb3RvdHlwZS5tYWtlU2FmZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEFub255bW91c1NhZmVPYnNlcnZlcih0aGlzLl9vbk5leHQsdGhpcy5fb25FcnJvcix0aGlzLl9vbkNvbXBsZXRlZCxlKX07dmFyIEV0LE90PVkuaW50ZXJuYWxzLkFic3RyYWN0T2JzZXJ2ZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3RoaXMuaXNTdG9wcGVkPSExLGUuY2FsbCh0aGlzKX1yZXR1cm4gV2UodCxlKSx0LnByb3RvdHlwZS5uZXh0PWZlLHQucHJvdG90eXBlLmVycm9yPWZlLHQucHJvdG90eXBlLmNvbXBsZXRlZD1mZSx0LnByb3RvdHlwZS5vbk5leHQ9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fHRoaXMubmV4dChlKX0sdC5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuZXJyb3IoZSkpfSx0LnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5jb21wbGV0ZWQoKSl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZD0hMH0sdC5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1N0b3BwZWQ/ITE6KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuZXJyb3IoZSksITApfSx0fShDdCksUHQ9WS5Bbm9ueW1vdXNPYnNlcnZlcj1mdW5jdGlvbihuKXtmdW5jdGlvbiBlKGUsdCxyKXtuLmNhbGwodGhpcyksdGhpcy5fb25OZXh0PWUsdGhpcy5fb25FcnJvcj10LHRoaXMuX29uQ29tcGxldGVkPXJ9cmV0dXJuIFdlKGUsbiksZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXt0aGlzLl9vbk5leHQoZSl9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuX29uRXJyb3IoZSl9LGUucHJvdG90eXBlLmNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuX29uQ29tcGxldGVkKCl9LGV9KE90KSxBdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzKSx0aGlzLl9vYnNlcnZlcj1lLHRoaXMuX3N0YXRlPTB9V2UoZSx0KTt2YXIgcj1lLnByb3RvdHlwZTtyZXR1cm4gci5vbk5leHQ9ZnVuY3Rpb24oZSl7dGhpcy5jaGVja0FjY2VzcygpO3ZhciB0PXAodGhpcy5fb2JzZXJ2ZXIub25OZXh0KS5jYWxsKHRoaXMuX29ic2VydmVyLGUpO3RoaXMuX3N0YXRlPTAsdD09PUtlJiZkKHQuZSl9LHIub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmNoZWNrQWNjZXNzKCk7dmFyIHQ9cCh0aGlzLl9vYnNlcnZlci5vbkVycm9yKS5jYWxsKHRoaXMuX29ic2VydmVyLGUpO3RoaXMuX3N0YXRlPTIsdD09PUtlJiZkKHQuZSl9LHIub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmNoZWNrQWNjZXNzKCk7dmFyIGU9cCh0aGlzLl9vYnNlcnZlci5vbkNvbXBsZXRlZCkuY2FsbCh0aGlzLl9vYnNlcnZlcik7dGhpcy5fc3RhdGU9MixlPT09S2UmJmQoZS5lKX0sci5jaGVja0FjY2Vzcz1mdW5jdGlvbigpe2lmKDE9PT10aGlzLl9zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJSZS1lbnRyYW5jeSBkZXRlY3RlZFwiKTtpZigyPT09dGhpcy5fc3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiT2JzZXJ2ZXIgY29tcGxldGVkXCIpOzA9PT10aGlzLl9zdGF0ZSYmKHRoaXMuX3N0YXRlPTEpfSxlfShDdCksanQ9WS5pbnRlcm5hbHMuU2NoZWR1bGVkT2JzZXJ2ZXI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gZShlLHQpe3IuY2FsbCh0aGlzKSx0aGlzLnNjaGVkdWxlcj1lLHRoaXMub2JzZXJ2ZXI9dCx0aGlzLmlzQWNxdWlyZWQ9ITEsdGhpcy5oYXNGYXVsdGVkPSExLHRoaXMucXVldWU9W10sdGhpcy5kaXNwb3NhYmxlPW5ldyBzdH1yZXR1cm4gV2UoZSxyKSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5xdWV1ZS5wdXNoKGZ1bmN0aW9uKCl7dC5vYnNlcnZlci5vbk5leHQoZSl9KX0sZS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLnF1ZXVlLnB1c2goZnVuY3Rpb24oKXt0Lm9ic2VydmVyLm9uRXJyb3IoZSl9KX0sZS5wcm90b3R5cGUuY29tcGxldGVkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnF1ZXVlLnB1c2goZnVuY3Rpb24oKXtlLm9ic2VydmVyLm9uQ29tcGxldGVkKCl9KX0sZS5wcm90b3R5cGUuZW5zdXJlQWN0aXZlPWZ1bmN0aW9uKCl7dmFyIGU9ITEscj10aGlzOyF0aGlzLmhhc0ZhdWx0ZWQmJnRoaXMucXVldWUubGVuZ3RoPjAmJihlPSF0aGlzLmlzQWNxdWlyZWQsdGhpcy5pc0FjcXVpcmVkPSEwKSxlJiZ0aGlzLmRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZSh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShmdW5jdGlvbihlKXt2YXIgdDtpZighKHIucXVldWUubGVuZ3RoPjApKXJldHVybiB2b2lkKHIuaXNBY3F1aXJlZD0hMSk7dD1yLnF1ZXVlLnNoaWZ0KCk7dHJ5e3QoKX1jYXRjaChlKXt0aHJvdyByLnF1ZXVlPVtdLHIuaGFzRmF1bHRlZD0hMCxlfWUoKX0pKX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3IucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLmRpc3Bvc2FibGUuZGlzcG9zZSgpfSxlfShPdCksUnQ9ZnVuY3Rpb24obil7ZnVuY3Rpb24gZShlLHQscil7bi5jYWxsKHRoaXMsZSx0KSx0aGlzLl9jYW5jZWw9cn1yZXR1cm4gV2UoZSxuKSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe24ucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLGUpLHRoaXMuZW5zdXJlQWN0aXZlKCl9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe24ucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcyxlKSx0aGlzLmVuc3VyZUFjdGl2ZSgpfSxlLnByb3RvdHlwZS5jb21wbGV0ZWQ9ZnVuY3Rpb24oKXtuLnByb3RvdHlwZS5jb21wbGV0ZWQuY2FsbCh0aGlzKSx0aGlzLmVuc3VyZUFjdGl2ZSgpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7bi5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2NhbmNlbCYmdGhpcy5fY2FuY2VsLmRpc3Bvc2UoKSx0aGlzLl9jYW5jZWw9bnVsbH0sZX0oanQpLGt0PVkuT2JzZXJ2YWJsZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocil7aWYoWS5jb25maWcubG9uZ1N0YWNrU3VwcG9ydCYmaWUpe3RyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2goZSl7dGhpcy5zdGFjaz1lLnN0YWNrLnN1YnN0cmluZyhlLnN0YWNrLmluZGV4T2YoXCJcXG5cIikrMSl9dmFyIG49dGhpczt0aGlzLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vbkVycm9yLmJpbmQoZSk7cmV0dXJuIGUub25FcnJvcj1mdW5jdGlvbihlKXtvKGUsbiksdChlKX0sci5jYWxsKG4sZSl9fWVsc2UgdGhpcy5fc3Vic2NyaWJlPXJ9cmV0dXJuIEV0PWUucHJvdG90eXBlLEV0LnN1YnNjcmliZT1FdC5mb3JFYWNoPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5fc3Vic2NyaWJlKFwib2JqZWN0XCI9PXR5cGVvZiBlP2U6VHQoZSx0LHIpKX0sRXQuc3Vic2NyaWJlT25OZXh0PWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX3N1YnNjcmliZShUdChcInVuZGVmaW5lZFwiIT10eXBlb2Ygcj9mdW5jdGlvbihlKXt0LmNhbGwocixlKX06dCkpfSxFdC5zdWJzY3JpYmVPbkVycm9yPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX3N1YnNjcmliZShUdChudWxsLFwidW5kZWZpbmVkXCIhPXR5cGVvZiByP2Z1bmN0aW9uKGUpe3QuY2FsbChyLGUpfTp0KSl9LEV0LnN1YnNjcmliZU9uQ29tcGxldGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3N1YnNjcmliZShUdChudWxsLG51bGwsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQ/ZnVuY3Rpb24oKXtlLmNhbGwodCl9OmUpKX0sZX0oKSxMdD1ZLk9ic2VydmFibGVCYXNlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJm5lKGUuZGlzcG9zZSk/ZTpuZShlKT9ydChlKTpudH1mdW5jdGlvbiBuKGUsdCl7dmFyIHI9dFswXSxuPXRbMV0saT1wKG4uc3Vic2NyaWJlQ29yZSkuY2FsbChuLHIpO3JldHVybiBpIT09S2V8fHIuZmFpbChLZS5lKT92b2lkIHIuc2V0RGlzcG9zYWJsZShvKGkpKTpkKEtlLmUpfWZ1bmN0aW9uIHQoZSl7dmFyIHQ9bmV3IEVyKGUpLHI9W3QsdGhpc107cmV0dXJuIG10LnNjaGVkdWxlUmVxdWlyZWQoKT9tdC5zY2hlZHVsZVdpdGhTdGF0ZShyLG4pOm4obnVsbCxyKSx0fWZ1bmN0aW9uIHIoKXtlLmNhbGwodGhpcyx0KX1yZXR1cm4gV2UocixlKSxyLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlPWZlLHJ9KGt0KSxOdD1ZLmludGVybmFscy5FbnVtZXJhYmxlPWZ1bmN0aW9uKCl7fSxJdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3RoaXMuc291cmNlcz1lLHQuY2FsbCh0aGlzKX1mdW5jdGlvbiB1KGUsdCxyKXt0aGlzLm89ZSx0aGlzLnM9dCx0aGlzLmU9cix0aGlzLmlzU3RvcHBlZD0hMX1yZXR1cm4gV2UoZSx0KSxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlPWZ1bmN0aW9uKG8pe3ZhciBhLHM9bmV3IHN0LGU9dnQuc2NoZWR1bGVSZWN1cnNpdmVXaXRoU3RhdGUodGhpcy5zb3VyY2VzW3ZlXSgpLGZ1bmN0aW9uKGUsdCl7aWYoIWEpe3ZhciByPXAoZS5uZXh0KS5jYWxsKGUpO2lmKHI9PT1LZSlyZXR1cm4gby5vbkVycm9yKHIuZSk7aWYoci5kb25lKXJldHVybiBvLm9uQ29tcGxldGVkKCk7dmFyIG49ci52YWx1ZTtyZShuKSYmKG49VnQobikpO3ZhciBpPW5ldyBhdDtzLnNldERpc3Bvc2FibGUoaSksaS5zZXREaXNwb3NhYmxlKG4uc3Vic2NyaWJlKG5ldyB1KG8sdCxlKSkpfX0pO3JldHVybiBuZXcgUWUocyxlLHJ0KGZ1bmN0aW9uKCl7YT0hMH0pKX0sdS5wcm90b3R5cGUub25OZXh0PWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHx0aGlzLm8ub25OZXh0KGUpfSx1LnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSkpfSx1LnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5zKHRoaXMuZSkpfSx1LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LHUucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LGV9KEx0KTtOdC5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBJdCh0aGlzKX07dmFyIER0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dGhpcy5zb3VyY2VzPWUsdC5jYWxsKHRoaXMpfXJldHVybiBXZShlLHQpLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24obyl7dmFyIGEscz10aGlzLnNvdXJjZXNbdmVdKCksdT1uZXcgc3QsZT12dC5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhTdGF0ZShudWxsLGZ1bmN0aW9uKGUsdCl7aWYoIWEpe3ZhciByPXAocy5uZXh0KS5jYWxsKHMpO2lmKHI9PT1LZSlyZXR1cm4gby5vbkVycm9yKHIuZSk7aWYoci5kb25lKXJldHVybiBudWxsIT09ZT9vLm9uRXJyb3IoZSk6by5vbkNvbXBsZXRlZCgpO3ZhciBuPXIudmFsdWU7cmUobikmJihuPVZ0KG4pKTt2YXIgaT1uZXcgYXQ7dS5zZXREaXNwb3NhYmxlKGkpLGkuc2V0RGlzcG9zYWJsZShuLnN1YnNjcmliZShmdW5jdGlvbihlKXtvLm9uTmV4dChlKX0sdCxmdW5jdGlvbigpe28ub25Db21wbGV0ZWQoKX0pKX19KTtyZXR1cm4gbmV3IFFlKHUsZSxydChmdW5jdGlvbigpe2E9ITB9KSl9LGV9KEx0KTtOdC5wcm90b3R5cGUuY2F0Y2hFcnJvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgRHQodGhpcyl9LE50LnByb3RvdHlwZS5jYXRjaEVycm9yV2hlbj1mdW5jdGlvbihuKXt2YXIgaT10aGlzO3JldHVybiBuZXcgVHIoZnVuY3Rpb24obyl7dmFyIGEscyx1PW5ldyBQcixjPW5ldyBQcixlPW4odSksdD1lLnN1YnNjcmliZShjKSxsPWlbdmVdKCksaD1uZXcgc3Qscj12dC5zY2hlZHVsZVJlY3Vyc2l2ZShmdW5jdGlvbih0KXtpZighYSl7dmFyIGU9cChsLm5leHQpLmNhbGwobCk7aWYoZT09PUtlKXJldHVybiBvLm9uRXJyb3IoZS5lKTtpZihlLmRvbmUpcmV0dXJuIHZvaWQocz9vLm9uRXJyb3Iocyk6by5vbkNvbXBsZXRlZCgpKTt2YXIgcj1lLnZhbHVlO3JlKHIpJiYocj1WdChyKSk7dmFyIG49bmV3IGF0LGk9bmV3IGF0O2guc2V0RGlzcG9zYWJsZShuZXcgUWUoaSxuKSksbi5zZXREaXNwb3NhYmxlKHIuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe28ub25OZXh0KGUpfSxmdW5jdGlvbihlKXtpLnNldERpc3Bvc2FibGUoYy5zdWJzY3JpYmUodCxmdW5jdGlvbihlKXtvLm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7by5vbkNvbXBsZXRlZCgpfSkpLHUub25OZXh0KGUpfSxmdW5jdGlvbigpe28ub25Db21wbGV0ZWQoKX0pKX19KTtyZXR1cm4gbmV3IFFlKHQsaCxyLHJ0KGZ1bmN0aW9uKCl7YT0hMH0pKX0pfTt2YXIgQnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3RoaXMudj1lLHRoaXMuYz1udWxsPT10Py0xOnR9ZnVuY3Rpb24gcihlKXt0aGlzLnY9ZS52LHRoaXMubD1lLmN9cmV0dXJuIFdlKHQsZSksdC5wcm90b3R5cGVbdmVdPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMpfSxyLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmw/bWU6KHRoaXMubD4wJiZ0aGlzLmwtLSx7ZG9uZTohMSx2YWx1ZTp0aGlzLnZ9KX0sdH0oTnQpLEZ0PU50LnJlcGVhdD1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgQnQoZSx0KX0senQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQscil7dGhpcy5zPWUsdGhpcy5mbj10P2JlKHQsciwzKTpudWxsfWZ1bmN0aW9uIHIoZSl7dGhpcy5pPS0xLHRoaXMucz1lLnMsdGhpcy5sPXRoaXMucy5sZW5ndGgsdGhpcy5mbj1lLmZufXJldHVybiBXZSh0LGUpLHQucHJvdG90eXBlW3ZlXT1mdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzKX0sci5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybisrdGhpcy5pPHRoaXMubD97ZG9uZTohMSx2YWx1ZTp0aGlzLmZuP3RoaXMuZm4odGhpcy5zW3RoaXMuaV0sdGhpcy5pLHRoaXMucyk6dGhpcy5zW3RoaXMuaV19Om1lfSx0fShOdCksJHQ9TnQub2Y9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgenQoZSx0LHIpfTtFdC5vYnNlcnZlT249ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKGUpe3JldHVybiByLnN1YnNjcmliZShuZXcgUnQodCxlKSl9LHIpfSxFdC5zdWJzY3JpYmVPbj1mdW5jdGlvbihuKXt2YXIgaT10aGlzO3JldHVybiBuZXcgVHIoZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGF0LHI9bmV3IHN0O3JldHVybiByLnNldERpc3Bvc2FibGUodCksdC5zZXREaXNwb3NhYmxlKG4uc2NoZWR1bGUoZnVuY3Rpb24oKXtyLnNldERpc3Bvc2FibGUobmV3IHkobixpLnN1YnNjcmliZShlKSkpfSkpLHJ9LGkpfTt2YXIgR3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0aGlzLnA9ZSx0LmNhbGwodGhpcyl9cmV0dXJuIFdlKGUsdCksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wLnRoZW4oZnVuY3Rpb24oZSl7dC5vbk5leHQoZSksdC5vbkNvbXBsZXRlZCgpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9KSxudH0sZX0oTHQpLFZ0PWt0LmZyb21Qcm9taXNlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgR3QoZSl9O0V0LnRvUHJvbWlzZT1mdW5jdGlvbihlKXtpZihlfHwoZT1ZLmNvbmZpZy5Qcm9taXNlKSwhZSl0aHJvdyBuZXcgaGUoXCJQcm9taXNlIHR5cGUgbm90IHByb3ZpZGVkIG5vciBpbiBSeC5jb25maWcuUHJvbWlzZVwiKTt2YXIgaT10aGlzO3JldHVybiBuZXcgZShmdW5jdGlvbihlLHQpe3ZhciByLG49ITE7aS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7cj1lLG49ITB9LHQsZnVuY3Rpb24oKXtuJiZlKHIpfSl9KX07dmFyIEh0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dGhpcy5zb3VyY2U9ZSx0LmNhbGwodGhpcyl9ZnVuY3Rpb24gcihlKXt0aGlzLm89ZSx0aGlzLmE9W10sdGhpcy5pc1N0b3BwZWQ9ITF9cmV0dXJuIFdlKGUsdCksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyByKGUpKX0sci5wcm90b3R5cGUub25OZXh0PWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHx0aGlzLmEucHVzaChlKX0sci5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpKX0sci5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbk5leHQodGhpcy5hKSx0aGlzLm8ub25Db21wbGV0ZWQoKSl9LHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZD0hMH0sci5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1N0b3BwZWQ/ITE6KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpLCEwKX0sZX0oTHQpO0V0LnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEh0KHRoaXMpfSxrdC5jcmVhdGU9a3QuY3JlYXRlV2l0aERpc3Bvc2FibGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFRyKGUsdCl9O3ZhciBVdD0oa3QuZGVmZXI9ZnVuY3Rpb24ocil7cmV0dXJuIG5ldyBUcihmdW5jdGlvbih0KXt2YXIgZTt0cnl7ZT1yKCl9Y2F0Y2goZSl7cmV0dXJuIHNyKGUpLnN1YnNjcmliZSh0KX1yZXR1cm4gcmUoZSkmJihlPVZ0KGUpKSxlLnN1YnNjcmliZSh0KX0pfSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3RoaXMuc2NoZWR1bGVyPWUsdC5jYWxsKHRoaXMpfWZ1bmN0aW9uIHIoZSx0KXt0aGlzLm9ic2VydmVyPWUsdGhpcy5wYXJlbnQ9dH1mdW5jdGlvbiBuKGUsdCl7dC5vbkNvbXBsZXRlZCgpfXJldHVybiBXZShlLHQpLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHIoZSx0aGlzKTtyZXR1cm4gdC5ydW4oKX0sci5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnNjaGVkdWxlci5zY2hlZHVsZVdpdGhTdGF0ZSh0aGlzLm9ic2VydmVyLG4pfSxlfShMdCkpLHF0PWt0LmVtcHR5PWZ1bmN0aW9uKGUpe3JldHVybiBwdChlKXx8KGU9dnQpLG5ldyBVdChlKX0sV3Q9ZnVuY3Rpb24obil7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5pdGVyYWJsZT1lLHRoaXMubWFwcGVyPXQsdGhpcy5zY2hlZHVsZXI9cixuLmNhbGwodGhpcyl9cmV0dXJuIFdlKGUsbiksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgWHQoZSx0aGlzKTtyZXR1cm4gdC5ydW4oKX0sZX0oTHQpLFh0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnBhcmVudD10fXJldHVybiBlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dHJ5e3ZhciByPWkubmV4dCgpfWNhdGNoKGUpe3JldHVybiBvLm9uRXJyb3IoZSl9aWYoci5kb25lKXJldHVybiBvLm9uQ29tcGxldGVkKCk7dmFyIG49ci52YWx1ZTtpZihhKXRyeXtuPWEobixlKX1jYXRjaChlKXtyZXR1cm4gby5vbkVycm9yKGUpfW8ub25OZXh0KG4pLHQoZSsxKX12YXIgdD1PYmplY3QodGhpcy5wYXJlbnQuaXRlcmFibGUpLGk9VCh0KSxvPXRoaXMub2JzZXJ2ZXIsYT10aGlzLnBhcmVudC5tYXBwZXI7cmV0dXJuIHRoaXMucGFyZW50LnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhTdGF0ZSgwLGUpfSxlfSgpLFl0PU1hdGgucG93KDIsNTMpLTE7eC5wcm90b3R5cGVbdmVdPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB3KHRoaXMuX3MpfSx3LnByb3RvdHlwZVt2ZV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdy5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pPHRoaXMuX2w/e2RvbmU6ITEsdmFsdWU6dGhpcy5fcy5jaGFyQXQodGhpcy5faSsrKX06bWV9LFMucHJvdG90eXBlW3ZlXT1mdW5jdGlvbigpe3JldHVybiBuZXcgTSh0aGlzLl9hKX0sTS5wcm90b3R5cGVbdmVdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LE0ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faTx0aGlzLl9sP3tkb25lOiExLHZhbHVlOnRoaXMuX2FbdGhpcy5faSsrXX06bWV9O3ZhciBLdD1rdC5mcm9tPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKG51bGw9PWUpdGhyb3cgbmV3IEVycm9yKFwiaXRlcmFibGUgY2Fubm90IGJlIG51bGwuXCIpO2lmKHQmJiFuZSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJtYXBGbiB3aGVuIHByb3ZpZGVkIG11c3QgYmUgYSBmdW5jdGlvblwiKTtpZih0KXZhciBpPWJlKHQsciwyKTtyZXR1cm4gcHQobil8fChuPW10KSxuZXcgV3QoZSxpLG4pfSxadD1mdW5jdGlvbihyKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5hcmdzPWUsdGhpcy5zY2hlZHVsZXI9dCxyLmNhbGwodGhpcyl9cmV0dXJuIFdlKGUsciksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgUChlLHRoaXMpO3JldHVybiB0LnJ1bigpfSxlfShMdCk7UC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2k+ZT8oci5vbk5leHQobltlXSksdChlKzEpKTpyLm9uQ29tcGxldGVkKCl9dmFyIHI9dGhpcy5vYnNlcnZlcixuPXRoaXMucGFyZW50LmFyZ3MsaT1uLmxlbmd0aDtyZXR1cm4gdGhpcy5wYXJlbnQuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlV2l0aFN0YXRlKDAsZSl9O3ZhciBKdD1rdC5mcm9tQXJyYXk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcHQodCl8fCh0PW10KSxuZXcgWnQoZSx0KX07a3QuZ2VuZXJhdGU9ZnVuY3Rpb24oZSxhLHMsdSx0KXtyZXR1cm4gcHQodCl8fCh0PW10KSxuZXcgVHIoZnVuY3Rpb24oaSl7dmFyIG89ITA7cmV0dXJuIHQuc2NoZWR1bGVSZWN1cnNpdmVXaXRoU3RhdGUoZSxmdW5jdGlvbihlLHQpe3ZhciByLG47dHJ5e28/bz0hMTplPXMoZSkscj1hKGUpLHImJihuPXUoZSkpfWNhdGNoKGUpe3JldHVybiBpLm9uRXJyb3IoZSl9cj8oaS5vbk5leHQobiksdChlKSk6aS5vbkNvbXBsZXRlZCgpfSl9KX07dmFyIFF0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmNhbGwodGhpcyl9cmV0dXJuIFdlKHQsZSksdC5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXtyZXR1cm4gbnR9LHR9KEx0KSxlcj1rdC5uZXZlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgUXR9O2t0Lm9mPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO2U+cjtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIG5ldyBadCh0LG10KX0sa3Qub2ZXaXRoU2NoZWR1bGVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQtMSksbj0xO3Q+bjtuKyspcltuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gbmV3IFp0KHIsZSl9O3ZhciB0cj1mdW5jdGlvbihyKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5vYmo9ZSx0aGlzLmtleXM9T2JqZWN0LmtleXMoZSksdGhpcy5zY2hlZHVsZXI9dCxyLmNhbGwodGhpcyl9cmV0dXJuIFdlKGUsciksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgaihlLHRoaXMpO3JldHVybiB0LnJ1bigpfSxlfShMdCk7ai5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2lmKGE+ZSl7dmFyIHI9b1tlXTtuLm9uTmV4dChbcixpW3JdXSksdChlKzEpfWVsc2Ugbi5vbkNvbXBsZXRlZCgpfXZhciBuPXRoaXMub2JzZXJ2ZXIsaT10aGlzLnBhcmVudC5vYmosbz10aGlzLnBhcmVudC5rZXlzLGE9by5sZW5ndGg7cmV0dXJuIHRoaXMucGFyZW50LnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhTdGF0ZSgwLGUpfSxrdC5wYWlycz1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1tdCksbmV3IHRyKGUsdCl9O3ZhciBycj1mdW5jdGlvbihuKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLnN0YXJ0PWUsdGhpcy5yYW5nZUNvdW50PXQsdGhpcy5zY2hlZHVsZXI9cixuLmNhbGwodGhpcyl9cmV0dXJuIFdlKGUsbiksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgbnIoZSx0aGlzKTtyZXR1cm4gdC5ydW4oKX0sZX0oTHQpLG5yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnBhcmVudD10fXJldHVybiBlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7bj5lPyhpLm9uTmV4dChyK2UpLHQoZSsxKSk6aS5vbkNvbXBsZXRlZCgpfXZhciByPXRoaXMucGFyZW50LnN0YXJ0LG49dGhpcy5wYXJlbnQucmFuZ2VDb3VudCxpPXRoaXMub2JzZXJ2ZXI7cmV0dXJuIHRoaXMucGFyZW50LnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZVdpdGhTdGF0ZSgwLGUpfSxlfSgpO2t0LnJhbmdlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gcHQocil8fChyPW10KSxuZXcgcnIoZSx0LHIpfTt2YXIgaXI9ZnVuY3Rpb24obil7ZnVuY3Rpb24gZShlLHQscil7dGhpcy52YWx1ZT1lLHRoaXMucmVwZWF0Q291bnQ9bnVsbD09dD8tMTp0LHRoaXMuc2NoZWR1bGVyPXIsbi5jYWxsKHRoaXMpfXJldHVybiBXZShlLG4pLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFIoZSx0aGlzKTtyZXR1cm4gdC5ydW4oKX0sZX0oTHQpO1IucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4oLTE9PT1lfHxlPjApJiYoci5vbk5leHQobiksZT4wJiZlLS0pLDA9PT1lP3Iub25Db21wbGV0ZWQoKTp2b2lkIHQoZSl9dmFyIHI9dGhpcy5vYnNlcnZlcixuPXRoaXMucGFyZW50LnZhbHVlO3JldHVybiB0aGlzLnBhcmVudC5zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVXaXRoU3RhdGUodGhpcy5wYXJlbnQucmVwZWF0Q291bnQsZSl9LGt0LnJlcGVhdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIHB0KHIpfHwocj1tdCksbmV3IGlyKGUsdCxyKX07dmFyIG9yPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnZhbHVlPWUsdGhpcy5zY2hlZHVsZXI9dCxyLmNhbGwodGhpcyl9ZnVuY3Rpb24gbihlLHQpe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnBhcmVudD10fWZ1bmN0aW9uIHQoZSx0KXt2YXIgcj10WzBdLG49dFsxXTtuLm9uTmV4dChyKSxuLm9uQ29tcGxldGVkKCl9cmV0dXJuIFdlKGUsciksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgbihlLHRoaXMpO3JldHVybiB0LnJ1bigpfSxuLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQuc2NoZWR1bGVyLnNjaGVkdWxlV2l0aFN0YXRlKFt0aGlzLnBhcmVudC52YWx1ZSx0aGlzLm9ic2VydmVyXSx0KX0sZX0oTHQpLGFyPShrdFtcInJldHVyblwiXT1rdC5qdXN0PWt0LnJldHVyblZhbHVlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHB0KHQpfHwodD12dCksbmV3IG9yKGUsdCl9LGZ1bmN0aW9uKHIpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmVycm9yPWUsdGhpcy5zY2hlZHVsZXI9dCxyLmNhbGwodGhpcyl9ZnVuY3Rpb24gbihlLHQpe3RoaXMubz1lLHRoaXMucD10fWZ1bmN0aW9uIHQoZSx0KXt2YXIgcj10WzBdLG49dFsxXTtuLm9uRXJyb3Iocil9cmV0dXJuIFdlKGUsciksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgbihlLHRoaXMpO3JldHVybiB0LnJ1bigpfSxuLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wLnNjaGVkdWxlci5zY2hlZHVsZVdpdGhTdGF0ZShbdGhpcy5wLmVycm9yLHRoaXMub10sdCl9LGV9KEx0KSksc3I9a3RbXCJ0aHJvd1wiXT1rdC50aHJvd0Vycm9yPWt0LnRocm93RXhjZXB0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHB0KHQpfHwodD12dCksbmV3IGFyKGUsdCl9O2t0LnVzaW5nPWZ1bmN0aW9uKGksbyl7cmV0dXJuIG5ldyBUcihmdW5jdGlvbih0KXt2YXIgZSxyLG49bnQ7dHJ5e2U9aSgpLGUmJihuPWUpLHI9byhlKX1jYXRjaChlKXtyZXR1cm4gbmV3IFFlKHNyKGUpLnN1YnNjcmliZSh0KSxuKX1yZXR1cm4gbmV3IFFlKHIuc3Vic2NyaWJlKHQpLG4pfSl9LEV0LmFtYj1mdW5jdGlvbih1KXt2YXIgYz10aGlzO3JldHVybiBuZXcgVHIoZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe2l8fChpPW8scy5kaXNwb3NlKCkpfWZ1bmN0aW9uIG4oKXtpfHwoaT1hLGUuZGlzcG9zZSgpKX12YXIgaSxvPVwiTFwiLGE9XCJSXCIsZT1uZXcgYXQscz1uZXcgYXQ7cmV0dXJuIHJlKHUpJiYodT1WdCh1KSksZS5zZXREaXNwb3NhYmxlKGMuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3IoKSxpPT09byYmdC5vbk5leHQoZSl9LGZ1bmN0aW9uKGUpe3IoKSxpPT09byYmdC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3IoKSxpPT09byYmdC5vbkNvbXBsZXRlZCgpfSkpLHMuc2V0RGlzcG9zYWJsZSh1LnN1YnNjcmliZShmdW5jdGlvbihlKXtuKCksaT09PWEmJnQub25OZXh0KGUpfSxmdW5jdGlvbihlKXtuKCksaT09PWEmJnQub25FcnJvcihlKX0sZnVuY3Rpb24oKXtuKCksaT09PWEmJnQub25Db21wbGV0ZWQoKX0pKSxuZXcgUWUoZSxzKX0pfSxrdC5hbWI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIGUuYW1iKHQpfXZhciB0PWVyKCkscj1bXTtpZihBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpcj1hcmd1bWVudHNbMF07ZWxzZSBmb3IodmFyIG49MCxpPWFyZ3VtZW50cy5sZW5ndGg7aT5uO24rKylyLnB1c2goYXJndW1lbnRzW25dKTtmb3IodmFyIG49MCxpPXIubGVuZ3RoO2k+bjtuKyspdD1lKHQscltuXSk7cmV0dXJuIHR9LEV0W1wiY2F0Y2hcIl09RXQuY2F0Y2hFcnJvcj1FdC5jYXRjaEV4Y2VwdGlvbj1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2sodGhpcyxlKTp1cihbdGhpcyxlXSl9O3ZhciB1cj1rdC5jYXRjaEVycm9yPWt0W1wiY2F0Y2hcIl09a3QuY2F0Y2hFeGNlcHRpb249ZnVuY3Rpb24oKXt2YXIgZT1bXTtpZihBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpZT1hcmd1bWVudHNbMF07ZWxzZSBmb3IodmFyIHQ9MCxyPWFyZ3VtZW50cy5sZW5ndGg7cj50O3QrKyllLnB1c2goYXJndW1lbnRzW3RdKTtyZXR1cm4gJHQoZSkuY2F0Y2hFcnJvcigpfTtFdC5jb21iaW5lTGF0ZXN0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO2U+cjtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIEFycmF5LmlzQXJyYXkodFswXSk/dFswXS51bnNoaWZ0KHRoaXMpOnQudW5zaGlmdCh0aGlzKSxjci5hcHBseSh0aGlzLHQpfTt2YXIgY3I9a3QuY29tYmluZUxhdGVzdD1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLGg9bmV3IEFycmF5KGUpLHQ9MDtlPnQ7dCsrKWhbdF09YXJndW1lbnRzW3RdO3ZhciBwPWgucG9wKCk7cmV0dXJuIEFycmF5LmlzQXJyYXkoaFswXSkmJihoPWhbMF0pLG5ldyBUcihmdW5jdGlvbihuKXtmdW5jdGlvbiBpKHIpe2lmKGFbcl09ITAsc3x8KHM9YS5ldmVyeShaKSkpe3RyeXt2YXIgZT1wLmFwcGx5KG51bGwsYyl9Y2F0Y2goZSl7cmV0dXJuIG4ub25FcnJvcihlKX1uLm9uTmV4dChlKX1lbHNlIHUuZmlsdGVyKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQhPT1yfSkuZXZlcnkoWikmJm4ub25Db21wbGV0ZWQoKX1mdW5jdGlvbiBvKGUpe3VbZV09ITAsdS5ldmVyeShaKSYmbi5vbkNvbXBsZXRlZCgpfWZvcih2YXIgZT1oLmxlbmd0aCx0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGE9ZihlLHQpLHM9ITEsdT1mKGUsdCksYz1uZXcgQXJyYXkoZSksbD1uZXcgQXJyYXkoZSkscj0wO2U+cjtyKyspIWZ1bmN0aW9uKHQpe3ZhciBlPWhbdF0scj1uZXcgYXQ7cmUoZSkmJihlPVZ0KGUpKSxyLnNldERpc3Bvc2FibGUoZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7Y1t0XT1lLGkodCl9LGZ1bmN0aW9uKGUpe24ub25FcnJvcihlKX0sZnVuY3Rpb24oKXtvKHQpfSkpLGxbdF09cn0ocik7cmV0dXJuIG5ldyBRZShsKX0sdGhpcyl9O0V0LmNvbmNhdD1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PTAscj1hcmd1bWVudHMubGVuZ3RoO3I+dDt0KyspZS5wdXNoKGFyZ3VtZW50c1t0XSk7cmV0dXJuIGUudW5zaGlmdCh0aGlzKSxoci5hcHBseShudWxsLGUpfTt2YXIgbHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0aGlzLnNvdXJjZXM9ZSx0LmNhbGwodGhpcyl9ZnVuY3Rpb24gcihlLHQpe3RoaXMuc291cmNlcz1lLHRoaXMubz10fXJldHVybiBXZShlLHQpLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHIodGhpcy5zb3VyY2VzLGUpO3JldHVybiB0LnJ1bigpfSxyLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt2YXIgaSxvPW5ldyBzdCxhPXRoaXMuc291cmNlcyxzPWEubGVuZ3RoLHU9dGhpcy5vLGU9dnQuc2NoZWR1bGVSZWN1cnNpdmVXaXRoU3RhdGUoMCxmdW5jdGlvbihlLHQpe2lmKCFpKXtpZihlPT09cylyZXR1cm4gdS5vbkNvbXBsZXRlZCgpO3ZhciByPWFbZV07cmUocikmJihyPVZ0KHIpKTt2YXIgbj1uZXcgYXQ7by5zZXREaXNwb3NhYmxlKG4pLG4uc2V0RGlzcG9zYWJsZShyLnN1YnNjcmliZShmdW5jdGlvbihlKXt1Lm9uTmV4dChlKX0sZnVuY3Rpb24oZSl7dS5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3QoZSsxKX0pKX19KTtyZXR1cm4gbmV3IFFlKG8sZSxydChmdW5jdGlvbigpe2k9ITB9KSl9LGV9KEx0KSxocj1rdC5jb25jYXQ9ZnVuY3Rpb24oKXt2YXIgZTtpZihBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpZT1hcmd1bWVudHNbMF07ZWxzZXtlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtmb3IodmFyIHQ9MCxyPWFyZ3VtZW50cy5sZW5ndGg7cj50O3QrKyllW3RdPWFyZ3VtZW50c1t0XX1yZXR1cm4gbmV3IGxyKGUpfTtFdC5jb25jYXRBbGw9RXQuY29uY2F0T2JzZXJ2YWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lcmdlKDEpfTt2YXIgcHI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gZShlLHQpe3RoaXMuc291cmNlPWUsdGhpcy5tYXhDb25jdXJyZW50PXQsci5jYWxsKHRoaXMpfXJldHVybiBXZShlLHIpLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFFlO3JldHVybiB0LmFkZCh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IGZyKGUsdGhpcy5tYXhDb25jdXJyZW50LHQpKSksdH0sZX0oTHQpLGZyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5vPWUsdGhpcy5tYXg9dCx0aGlzLmc9cix0aGlzLmRvbmU9ITEsdGhpcy5xPVtdLHRoaXMuYWN0aXZlQ291bnQ9MCx0aGlzLmlzU3RvcHBlZD0hMX1mdW5jdGlvbiByKGUsdCl7dGhpcy5wYXJlbnQ9ZSx0aGlzLnNhZD10LHRoaXMuaXNTdG9wcGVkPSExfXJldHVybiBlLnByb3RvdHlwZS5oYW5kbGVTdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGF0O3RoaXMuZy5hZGQodCkscmUoZSkmJihlPVZ0KGUpKSx0LnNldERpc3Bvc2FibGUoZS5zdWJzY3JpYmUobmV3IHIodGhpcyx0KSkpfSxlLnByb3RvdHlwZS5vbk5leHQ9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fCh0aGlzLmFjdGl2ZUNvdW50PHRoaXMubWF4Pyh0aGlzLmFjdGl2ZUNvdW50KyssdGhpcy5oYW5kbGVTdWJzY3JpYmUoZSkpOnRoaXMucS5wdXNoKGUpKX0sZS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpKX0sZS5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuZG9uZT0hMCwwPT09dGhpcy5hY3RpdmVDb3VudCYmdGhpcy5vLm9uQ29tcGxldGVkKCkpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LGUucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LHIucHJvdG90eXBlLm9uTmV4dD1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8dGhpcy5wYXJlbnQuby5vbk5leHQoZSl9LHIucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fCh0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSkpfSxyLnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dGhpcy5pc1N0b3BwZWQ9ITA7dmFyIGU9dGhpcy5wYXJlbnQ7ZS5nLnJlbW92ZSh0aGlzLnNhZCksZS5xLmxlbmd0aD4wP2UuaGFuZGxlU3Vic2NyaWJlKGUucS5zaGlmdCgpKTooZS5hY3RpdmVDb3VudC0tLGUuZG9uZSYmMD09PWUuYWN0aXZlQ291bnQmJmUuby5vbkNvbXBsZXRlZCgpKX19LHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZD0hMH0sci5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1N0b3BwZWQ/ITE6KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMucGFyZW50Lm8ub25FcnJvcihlKSwhMCl9LGV9KCk7RXQubWVyZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIGU/ZHIodGhpcyxlKTpuZXcgcHIodGhpcyxlKX07dmFyIGRyPWt0Lm1lcmdlPWZ1bmN0aW9uKCl7dmFyIGUsdCxyPVtdLG49YXJndW1lbnRzLmxlbmd0aDtpZihhcmd1bWVudHNbMF0paWYocHQoYXJndW1lbnRzWzBdKSlmb3IoZT1hcmd1bWVudHNbMF0sdD0xO24+dDt0Kyspci5wdXNoKGFyZ3VtZW50c1t0XSk7ZWxzZSBmb3IoZT12dCx0PTA7bj50O3QrKylyLnB1c2goYXJndW1lbnRzW3RdKTtlbHNlIGZvcihlPXZ0LHQ9MTtuPnQ7dCsrKXIucHVzaChhcmd1bWVudHNbdF0pO3JldHVybiBBcnJheS5pc0FycmF5KHJbMF0pJiYocj1yWzBdKSxBKGUscikubWVyZ2VBbGwoKX0sdnI9WS5Db21wb3NpdGVFcnJvcj1mdW5jdGlvbihlKXt0aGlzLm5hbWU9XCJOb3RJbXBsZW1lbnRlZEVycm9yXCIsdGhpcy5pbm5lckVycm9ycz1lLHRoaXMubWVzc2FnZT1cIlRoaXMgY29udGFpbnMgbXVsdGlwbGUgZXJyb3JzLiBDaGVjayB0aGUgaW5uZXJFcnJvcnNcIixFcnJvci5jYWxsKHRoaXMpfTt2ci5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlLGt0Lm1lcmdlRGVsYXlFcnJvcj1mdW5jdGlvbigpe3ZhciBlO2lmKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSllPWFyZ3VtZW50c1swXTtlbHNle3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg7ZT1uZXcgQXJyYXkodCk7Zm9yKHZhciByPTA7dD5yO3IrKyllW3JdPWFyZ3VtZW50c1tyXX12YXIgcz1BKG51bGwsZSk7cmV0dXJuIG5ldyBUcihmdW5jdGlvbihyKXtmdW5jdGlvbiBuKCl7MD09PWEubGVuZ3RoP3Iub25Db21wbGV0ZWQoKToxPT09YS5sZW5ndGg/ci5vbkVycm9yKGFbMF0pOnIub25FcnJvcihuZXcgdnIoYSkpfXZhciBpPW5ldyBRZSxlPW5ldyBhdCxvPSExLGE9W107cmV0dXJuIGkuYWRkKGUpLGUuc2V0RGlzcG9zYWJsZShzLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1uZXcgYXQ7aS5hZGQodCkscmUoZSkmJihlPVZ0KGUpKSx0LnNldERpc3Bvc2FibGUoZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ci5vbk5leHQoZSl9LGZ1bmN0aW9uKGUpe2EucHVzaChlKSxpLnJlbW92ZSh0KSxvJiYxPT09aS5sZW5ndGgmJm4oKX0sZnVuY3Rpb24oKXtpLnJlbW92ZSh0KSxvJiYxPT09aS5sZW5ndGgmJm4oKX0pKX0sZnVuY3Rpb24oZSl7YS5wdXNoKGUpLG89ITAsMT09PWkubGVuZ3RoJiZuKCl9LGZ1bmN0aW9uKCl7bz0hMCwxPT09aS5sZW5ndGgmJm4oKX0pKSxpfSl9O3ZhciBtcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3RoaXMuc291cmNlPWUsdC5jYWxsKHRoaXMpfWZ1bmN0aW9uIG4oZSx0KXt0aGlzLm89ZSx0aGlzLmc9dCx0aGlzLmlzU3RvcHBlZD0hMSx0aGlzLmRvbmU9ITF9ZnVuY3Rpb24gcihlLHQscil7dGhpcy5wYXJlbnQ9ZSx0aGlzLmc9dCx0aGlzLnNhZD1yLHRoaXMuaXNTdG9wcGVkPSExfXJldHVybiBXZShlLHQpLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFFlLHI9bmV3IGF0O3JldHVybiB0LmFkZChyKSxyLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBuKGUsdCkpKSx0fSxuLnByb3RvdHlwZS5vbk5leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgdD1uZXcgYXQ7dGhpcy5nLmFkZCh0KSxyZShlKSYmKGU9VnQoZSkpLHQuc2V0RGlzcG9zYWJsZShlLnN1YnNjcmliZShuZXcgcih0aGlzLHRoaXMuZyx0KSkpfX0sbi5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpKX0sbi5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuZG9uZT0hMCwxPT09dGhpcy5nLmxlbmd0aCYmdGhpcy5vLm9uQ29tcGxldGVkKCkpfSxuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LG4ucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LHIucHJvdG90eXBlLm9uTmV4dD1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8dGhpcy5wYXJlbnQuby5vbk5leHQoZSl9LHIucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fCh0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSkpfSxyLnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dmFyIGU9dGhpcy5wYXJlbnQ7dGhpcy5pc1N0b3BwZWQ9ITAsZS5nLnJlbW92ZSh0aGlzLnNhZCksZS5kb25lJiYxPT09ZS5nLmxlbmd0aCYmZS5vLm9uQ29tcGxldGVkKCl9fSxyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LHIucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSksITApfSxlfShMdCk7RXQubWVyZ2VBbGw9RXQubWVyZ2VPYnNlcnZhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtcih0aGlzKX0sRXQub25FcnJvclJlc3VtZU5leHQ9ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIG9ic2VydmFibGUgaXMgcmVxdWlyZWRcIik7cmV0dXJuIGdyKFt0aGlzLGVdKX07dmFyIGdyPWt0Lm9uRXJyb3JSZXN1bWVOZXh0PWZ1bmN0aW9uKCl7dmFyIGE9W107aWYoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKWE9YXJndW1lbnRzWzBdO2Vsc2UgZm9yKHZhciBlPTAsdD1hcmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspYS5wdXNoKGFyZ3VtZW50c1tlXSk7cmV0dXJuIG5ldyBUcihmdW5jdGlvbihuKXt2YXIgaT0wLG89bmV3IHN0LGU9dnQuc2NoZWR1bGVSZWN1cnNpdmUoZnVuY3Rpb24oZSl7dmFyIHQscjtpPGEubGVuZ3RoPyh0PWFbaSsrXSxyZSh0KSYmKHQ9VnQodCkpLHI9bmV3IGF0LG8uc2V0RGlzcG9zYWJsZShyKSxyLnNldERpc3Bvc2FibGUodC5zdWJzY3JpYmUobi5vbk5leHQuYmluZChuKSxlLGUpKSk6bi5vbkNvbXBsZXRlZCgpfSk7cmV0dXJuIG5ldyBRZShvLGUpfSl9O0V0LnNraXBVbnRpbD1mdW5jdGlvbihpKXt2YXIgbz10aGlzO3JldHVybiBuZXcgVHIoZnVuY3Rpb24odCl7dmFyIHI9ITEsZT1uZXcgUWUoby5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ciYmdC5vbk5leHQoZSl9LGZ1bmN0aW9uKGUpe3Qub25FcnJvcihlKX0sZnVuY3Rpb24oKXtyJiZ0Lm9uQ29tcGxldGVkKCl9KSk7cmUoaSkmJihpPVZ0KGkpKTt2YXIgbj1uZXcgYXQ7cmV0dXJuIGUuYWRkKG4pLG4uc2V0RGlzcG9zYWJsZShpLnN1YnNjcmliZShmdW5jdGlvbigpe3I9ITAsbi5kaXNwb3NlKCl9LGZ1bmN0aW9uKGUpe3Qub25FcnJvcihlKX0sZnVuY3Rpb24oKXtuLmRpc3Bvc2UoKX0pKSxlfSxvKX07dmFyIF9yPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dGhpcy5zb3VyY2U9ZSx0LmNhbGwodGhpcyl9ZnVuY3Rpb24gbihlLHQpe3RoaXMubz1lLHRoaXMuaW5uZXI9dCx0aGlzLnN0b3BwZWQ9ITEsdGhpcy5sYXRlc3Q9MCx0aGlzLmhhc0xhdGVzdD0hMSx0aGlzLmlzU3RvcHBlZD0hMX1mdW5jdGlvbiBpKGUsdCl7dGhpcy5wYXJlbnQ9ZSx0aGlzLmlkPXQsdGhpcy5pc1N0b3BwZWQ9ITF9cmV0dXJuIFdlKGUsdCksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgc3Qscj10aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IG4oZSx0KSk7cmV0dXJuIG5ldyBRZShyLHQpfSxuLnByb3RvdHlwZS5vbk5leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgdD1uZXcgYXQscj0rK3RoaXMubGF0ZXN0O3RoaXMuaGFzTGF0ZXN0PSEwLHRoaXMuaW5uZXIuc2V0RGlzcG9zYWJsZSh0KSxyZShlKSYmKGU9VnQoZSkpLHQuc2V0RGlzcG9zYWJsZShlLnN1YnNjcmliZShuZXcgaSh0aGlzLHIpKSl9fSxuLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSkpfSxuLnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5zdG9wcGVkPSEwLCF0aGlzLmhhc0xhdGVzdCYmdGhpcy5vLm9uQ29tcGxldGVkKCkpfSxuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LG4ucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LGkucHJvdG90eXBlLm9uTmV4dD1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8dGhpcy5wYXJlbnQubGF0ZXN0PT09dGhpcy5pZCYmdGhpcy5wYXJlbnQuby5vbk5leHQoZSl9LGkucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fCh0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLnBhcmVudC5sYXRlc3Q9PT10aGlzLmlkJiZ0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSkpfSxpLnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5wYXJlbnQubGF0ZXN0PT09dGhpcy5pZCYmKHRoaXMucGFyZW50Lmhhc0xhdGVzdD0hMSx0aGlzLnBhcmVudC5pc1N0b3BwZWQmJnRoaXMucGFyZW50Lm8ub25Db21wbGV0ZWQoKSkpfSxpLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LGkucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSksITApfSxlfShMdCk7RXRbXCJzd2l0Y2hcIl09RXQuc3dpdGNoTGF0ZXN0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBfcih0aGlzKX07dmFyIHlyPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnNvdXJjZT1lLHRoaXMub3RoZXI9cmUodCk/VnQodCk6dCxyLmNhbGwodGhpcyl9ZnVuY3Rpb24gdChlKXt0aGlzLm89ZSx0aGlzLmlzU3RvcHBlZD0hMX1yZXR1cm4gV2UoZSxyKSxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUWUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKGUpLHRoaXMub3RoZXIuc3Vic2NyaWJlKG5ldyB0KGUpKSl9LHQucHJvdG90eXBlLm9uTmV4dD1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8dGhpcy5vLm9uQ29tcGxldGVkKCl9LHQucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fCh0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSl9LHQucHJvdG90eXBlLm9uQ29tcGxldGVkPWZ1bmN0aW9uKCl7IXRoaXMuaXNTdG9wcGVkJiYodGhpcy5pc1N0b3BwZWQ9ITApfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LHQucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LGV9KEx0KTtFdC50YWtlVW50aWw9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB5cih0aGlzLGUpfSxFdC53aXRoTGF0ZXN0RnJvbT1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHU9bmV3IEFycmF5KGUpLHQ9MDtlPnQ7dCsrKXVbdF09YXJndW1lbnRzW3RdO3ZhciBjPXUucG9wKCksbD10aGlzO3JldHVybiBBcnJheS5pc0FycmF5KHVbMF0pJiYodT11WzBdKSxuZXcgVHIoZnVuY3Rpb24obil7Zm9yKHZhciBlPXUubGVuZ3RoLGk9ZihlLEwpLG89ITEsYT1uZXcgQXJyYXkoZSkscz1uZXcgQXJyYXkoZSsxKSx0PTA7ZT50O3QrKykhZnVuY3Rpb24odCl7dmFyIGU9dVt0XSxyPW5ldyBhdDtyZShlKSYmKGU9VnQoZSkpLHIuc2V0RGlzcG9zYWJsZShlLnN1YnNjcmliZShmdW5jdGlvbihlKXthW3RdPWUsaVt0XT0hMCxvPWkuZXZlcnkoWil9LGZ1bmN0aW9uKGUpe24ub25FcnJvcihlKX0sSykpLHNbdF09cn0odCk7dmFyIHI9bmV3IGF0O3JldHVybiByLnNldERpc3Bvc2FibGUobC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9W2VdLmNvbmNhdChhKTtpZihvKXt2YXIgcj1wKGMpLmFwcGx5KG51bGwsdCk7cmV0dXJuIHI9PT1LZT9uLm9uRXJyb3Ioci5lKTp2b2lkIG4ub25OZXh0KHIpfX0sZnVuY3Rpb24oZSl7bi5vbkVycm9yKGUpfSxmdW5jdGlvbigpe24ub25Db21wbGV0ZWQoKX0pKSxzW2VdPXIsbmV3IFFlKHMpfSx0aGlzKX0sRXQuemlwPWZ1bmN0aW9uKCl7aWYoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKXJldHVybiBOLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxzPW5ldyBBcnJheShlKSx0PTA7ZT50O3QrKylzW3RdPWFyZ3VtZW50c1t0XTt2YXIgdT10aGlzLGM9cy5wb3AoKTtyZXR1cm4gcy51bnNoaWZ0KHUpLG5ldyBUcihmdW5jdGlvbihpKXtmb3IodmFyIGU9cy5sZW5ndGgsbz1mKGUsSSksYT1mKGUsTCkscj1uZXcgQXJyYXkoZSksdD0wO2U+dDt0KyspIWZ1bmN0aW9uKG4pe3ZhciBlPXNbbl0sdD1uZXcgYXQ7cmUoZSkmJihlPVZ0KGUpKSx0LnNldERpc3Bvc2FibGUoZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYob1tuXS5wdXNoKGUpLG8uZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoPjB9KSl7dmFyIHQ9by5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2hpZnQoKX0pLHI9cChjKS5hcHBseSh1LHQpO2lmKHI9PT1LZSlyZXR1cm4gaS5vbkVycm9yKHIuZSk7aS5vbk5leHQocil9ZWxzZSBhLmZpbHRlcihmdW5jdGlvbihlLHQpe3JldHVybiB0IT09bn0pLmV2ZXJ5KFopJiZpLm9uQ29tcGxldGVkKCl9LGZ1bmN0aW9uKGUpe2kub25FcnJvcihlKX0sZnVuY3Rpb24oKXthW25dPSEwLGEuZXZlcnkoWikmJmkub25Db21wbGV0ZWQoKX0pKSxyW25dPXR9KHQpO3JldHVybiBuZXcgUWUocil9LHUpfSxrdC56aXA9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7ZT5yO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTt2YXIgbj10LnNoaWZ0KCk7cmV0dXJuIG4uemlwLmFwcGx5KG4sdCl9LGt0LnppcEFycmF5PWZ1bmN0aW9uKCl7dmFyIGE7aWYoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKWE9YXJndW1lbnRzWzBdO2Vsc2V7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDthPW5ldyBBcnJheShlKTtmb3IodmFyIHQ9MDtlPnQ7dCsrKWFbdF09YXJndW1lbnRzW3RdfXJldHVybiBuZXcgVHIoZnVuY3Rpb24obil7Zm9yKHZhciBlPWEubGVuZ3RoLGk9ZihlLEQpLG89ZihlLEwpLHQ9bmV3IEFycmF5KGUpLHI9MDtlPnI7cisrKSFmdW5jdGlvbihyKXt0W3JdPW5ldyBhdCx0W3JdLnNldERpc3Bvc2FibGUoYVtyXS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoaVtyXS5wdXNoKGUpLGkuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoPjB9KSl7dmFyIHQ9aS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2hpZnQoKX0pO24ub25OZXh0KHQpfWVsc2UgaWYoby5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCE9PXJ9KS5ldmVyeShaKSlyZXR1cm4gbi5vbkNvbXBsZXRlZCgpfSxmdW5jdGlvbihlKXtuLm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7b1tyXT0hMCxvLmV2ZXJ5KFopJiZuLm9uQ29tcGxldGVkKCl9KSl9KHIpO3JldHVybiBuZXcgUWUodCl9KX0sRXQuYXNPYnNlcnZhYmxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKGUpe3JldHVybiB0LnN1YnNjcmliZShlKX0sdCl9LEV0LmJ1ZmZlcldpdGhDb3VudD1mdW5jdGlvbihlLHQpe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0JiYodD1lKSx0aGlzLndpbmRvd1dpdGhDb3VudChlLHQpLnNlbGVjdE1hbnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9BcnJheSgpfSkud2hlcmUoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoPjB9KX0sRXQuZGVtYXRlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBUcihmdW5jdGlvbih0KXtyZXR1cm4gZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWNjZXB0KHQpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7dC5vbkNvbXBsZXRlZCgpfSl9LHRoaXMpfSxFdC5kaXN0aW5jdFVudGlsQ2hhbmdlZD1mdW5jdGlvbihhLHMpe3ZhciBlPXRoaXM7cmV0dXJuIHN8fChzPVEpLG5ldyBUcihmdW5jdGlvbihuKXt2YXIgaSxvPSExO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lO2lmKGEmJih0PXAoYSkoZSksdD09PUtlKSlyZXR1cm4gbi5vbkVycm9yKHQuZSk7aWYobyl7dmFyIHI9cChzKShpLHQpO2lmKHI9PT1LZSlyZXR1cm4gbi5vbkVycm9yKHIuZSl9byYmcnx8KG89ITAsaT10LG4ub25OZXh0KGUpKX0sZnVuY3Rpb24oZSl7bi5vbkVycm9yKGUpfSxmdW5jdGlvbigpe24ub25Db21wbGV0ZWQoKX0pfSx0aGlzKX07dmFyIGJyPWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIGUoZSx0LHIsbil7dGhpcy5zb3VyY2U9ZSx0aGlzLnQ9IXR8fG5lKHQpP1R0KHR8fEsscnx8SyxufHxLKTp0LGkuY2FsbCh0aGlzKX1mdW5jdGlvbiB0KGUsdCl7dGhpcy5vPWUsdGhpcy50PXQsdGhpcy5pc1N0b3BwZWQ9ITF9cmV0dXJuIFdlKGUsaSksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyB0KGUsdGhpcy50KSl9LHQucHJvdG90eXBlLm9uTmV4dD1mdW5jdGlvbihlKXtpZighdGhpcy5pc1N0b3BwZWQpe3ZhciB0PXAodGhpcy50Lm9uTmV4dCkuY2FsbCh0aGlzLnQsZSk7dD09PUtlJiZ0aGlzLm8ub25FcnJvcih0LmUpLHRoaXMuby5vbk5leHQoZSl9fSx0LnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dGhpcy5pc1N0b3BwZWQ9ITA7dmFyIHQ9cCh0aGlzLnQub25FcnJvcikuY2FsbCh0aGlzLnQsZSk7aWYodD09PUtlKXJldHVybiB0aGlzLm8ub25FcnJvcih0LmUpO3RoaXMuby5vbkVycm9yKGUpfX0sdC5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1N0b3BwZWQpe3RoaXMuaXNTdG9wcGVkPSEwO3ZhciBlPXAodGhpcy50Lm9uQ29tcGxldGVkKS5jYWxsKHRoaXMudCk7aWYoZT09PUtlKXJldHVybiB0aGlzLm8ub25FcnJvcihlLmUpO3RoaXMuby5vbkNvbXBsZXRlZCgpfX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzU3RvcHBlZD8hMToodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSksITApfSxlfShMdCk7RXRbXCJkb1wiXT1FdC50YXA9RXQuZG9BY3Rpb249ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgYnIodGhpcyxlLHQscil9LEV0LmRvT25OZXh0PUV0LnRhcE9uTmV4dD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLnRhcChcInVuZGVmaW5lZFwiIT10eXBlb2Ygcj9mdW5jdGlvbihlKXt0LmNhbGwocixlKX06dCl9LEV0LmRvT25FcnJvcj1FdC50YXBPbkVycm9yPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMudGFwKEssXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHI/ZnVuY3Rpb24oZSl7dC5jYWxsKHIsZSl9OnQpfSxFdC5kb09uQ29tcGxldGVkPUV0LnRhcE9uQ29tcGxldGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudGFwKEssbnVsbCxcInVuZGVmaW5lZFwiIT10eXBlb2YgdD9mdW5jdGlvbigpe2UuY2FsbCh0KX06ZSl9LEV0W1wiZmluYWxseVwiXT1FdC5lbnN1cmU9ZnVuY3Rpb24ocil7dmFyIG49dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PW4uc3Vic2NyaWJlKGUpfWNhdGNoKGUpe3Rocm93IHIoKSxlfXJldHVybiBydChmdW5jdGlvbigpe3RyeXt0LmRpc3Bvc2UoKX1jYXRjaChlKXt0aHJvdyBlfWZpbmFsbHl7cigpfX0pfSx0aGlzKX0sRXQuZmluYWxseUFjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbnN1cmUoZSl9O3ZhciB4cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3RoaXMuc291cmNlPWUsdC5jYWxsKHRoaXMpfWZ1bmN0aW9uIHIoZSl7dGhpcy5vPWUsdGhpcy5pc1N0b3BwZWQ9ITF9cmV0dXJuIFdlKGUsdCksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyByKGUpKX0sci5wcm90b3R5cGUub25OZXh0PUssci5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpKX0sci5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkNvbXBsZXRlZCgpKX0sci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkPSEwfSxyLnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzU3RvcHBlZD8hMToodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vYnNlcnZlci5vbkVycm9yKGUpLCEwKX0sZX0oTHQpO0V0Lmlnbm9yZUVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4cih0aGlzKX0sRXQubWF0ZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgVHIoZnVuY3Rpb24odCl7cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3Qub25OZXh0KHd0KGUpKX0sZnVuY3Rpb24oZSl7dC5vbk5leHQoU3QoZSkpLHQub25Db21wbGV0ZWQoKX0sZnVuY3Rpb24oKXt0Lm9uTmV4dChNdCgpKSx0Lm9uQ29tcGxldGVkKCl9KX0sZSl9LEV0LnJlcGVhdD1mdW5jdGlvbihlKXtyZXR1cm4gRnQodGhpcyxlKS5jb25jYXQoKX0sRXQucmV0cnk9ZnVuY3Rpb24oZSl7cmV0dXJuIEZ0KHRoaXMsZSkuY2F0Y2hFcnJvcigpfSxFdC5yZXRyeVdoZW49ZnVuY3Rpb24oZSl7cmV0dXJuIEZ0KHRoaXMpLmNhdGNoRXJyb3JXaGVuKGUpfTt2YXIgd3I9ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gZShlLHQscixuKXt0aGlzLnNvdXJjZT1lLHRoaXMuYWNjdW11bGF0b3I9dCx0aGlzLmhhc1NlZWQ9cix0aGlzLnNlZWQ9bixpLmNhbGwodGhpcyl9cmV0dXJuIFdlKGUsaSksZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBCKGUsdGhpcykpfSxlfShMdCk7Qi5wcm90b3R5cGUub25OZXh0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7IXRoaXMuaGFzVmFsdWUmJih0aGlzLmhhc1ZhbHVlPSEwKTt0cnl7dGhpcy5oYXNBY2N1bXVsYXRpb24/dGhpcy5hY2N1bXVsYXRpb249dGhpcy5hY2N1bXVsYXRvcih0aGlzLmFjY3VtdWxhdGlvbixlKToodGhpcy5hY2N1bXVsYXRpb249dGhpcy5oYXNTZWVkP3RoaXMuYWNjdW11bGF0b3IodGhpcy5zZWVkLGUpOmUsdGhpcy5oYXNBY2N1bXVsYXRpb249ITApfWNhdGNoKGUpe3JldHVybiB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZSl9dGhpcy5vYnNlcnZlci5vbk5leHQodGhpcy5hY2N1bXVsYXRpb24pfX0sQi5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMub2JzZXJ2ZXIub25FcnJvcihlKSl9LEIucHJvdG90eXBlLm9uQ29tcGxldGVkPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWR8fCh0aGlzLmlzU3RvcHBlZD0hMCwhdGhpcy5oYXNWYWx1ZSYmdGhpcy5oYXNTZWVkJiZ0aGlzLm9ic2VydmVyLm9uTmV4dCh0aGlzLnNlZWQpLHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKSl9LEIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZD0hMH0sQi5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc1N0b3BwZWQ/ITE6KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMub2JzZXJ2ZXIub25FcnJvcihlKSwhMCl9LEV0LnNjYW49ZnVuY3Rpb24oKXt2YXIgZSx0LHI9ITE7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoPyhyPSEwLGU9YXJndW1lbnRzWzBdLHQ9YXJndW1lbnRzWzFdKTp0PWFyZ3VtZW50c1swXSxuZXcgd3IodGhpcyx0LHIsZSl9LEV0LnNraXBMYXN0PWZ1bmN0aW9uKG4pe2lmKDA+bil0aHJvdyBuZXcgbGU7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXtyLnB1c2goZSksci5sZW5ndGg+biYmdC5vbk5leHQoci5zaGlmdCgpKX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3Qub25Db21wbGV0ZWQoKX0pfSxlKX0sRXQuc3RhcnRXaXRoPWZ1bmN0aW9uKCl7dmFyIGUsdD0wO2FyZ3VtZW50cy5sZW5ndGgmJnB0KGFyZ3VtZW50c1swXSk/KGU9YXJndW1lbnRzWzBdLHQ9MSk6ZT12dDtmb3IodmFyIHI9W10sbj10LGk9YXJndW1lbnRzLmxlbmd0aDtpPm47bisrKXIucHVzaChhcmd1bWVudHNbbl0pO3JldHVybiAkdChbSnQocixlKSx0aGlzXSkuY29uY2F0KCl9LEV0LnRha2VMYXN0PWZ1bmN0aW9uKG4pe2lmKDA+bil0aHJvdyBuZXcgbGU7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXtyLnB1c2goZSksci5sZW5ndGg+biYmci5zaGlmdCgpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7Zm9yKDtyLmxlbmd0aD4wOyl0Lm9uTmV4dChyLnNoaWZ0KCkpO3Qub25Db21wbGV0ZWQoKX0pfSxlKX0sRXQudGFrZUxhc3RCdWZmZXI9ZnVuY3Rpb24obil7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXtyLnB1c2goZSksci5sZW5ndGg+biYmci5zaGlmdCgpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7dC5vbk5leHQociksdC5vbkNvbXBsZXRlZCgpfSl9LGUpfSxFdC53aW5kb3dXaXRoQ291bnQ9ZnVuY3Rpb24ocyx1KXt2YXIgbj10aGlzO2lmKCtzfHwocz0wKSxNYXRoLmFicyhzKT09PTEvMCYmKHM9MCksMD49cyl0aHJvdyBuZXcgbGU7aWYobnVsbD09dSYmKHU9cyksK3V8fCh1PTApLE1hdGguYWJzKHUpPT09MS8wJiYodT0wKSwwPj11KXRocm93IG5ldyBsZTtyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGkoKXt2YXIgZT1uZXcgUHI7YS5wdXNoKGUpLHQub25OZXh0KFllKGUscikpfXZhciBlPW5ldyBhdCxyPW5ldyB1dChlKSxvPTAsYT1bXTtyZXR1cm4gaSgpLGUuc2V0RGlzcG9zYWJsZShuLnN1YnNjcmliZShmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWEubGVuZ3RoO3I+dDt0KyspYVt0XS5vbk5leHQoZSk7dmFyIG49by1zKzE7bj49MCYmbiV1PT09MCYmYS5zaGlmdCgpLm9uQ29tcGxldGVkKCksKytvJXU9PT0wJiZpKCl9LGZ1bmN0aW9uKGUpe2Zvcig7YS5sZW5ndGg+MDspYS5zaGlmdCgpLm9uRXJyb3IoZSk7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe2Zvcig7YS5sZW5ndGg+MDspYS5zaGlmdCgpLm9uQ29tcGxldGVkKCk7dC5vbkNvbXBsZXRlZCgpfSkpLHJ9LG4pfSxFdC5zZWxlY3RDb25jYXQ9RXQuY29uY2F0TWFwPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gbmUodCkmJm5lKGkpP3RoaXMuY29uY2F0TWFwKGZ1bmN0aW9uKHIsbil7dmFyIGU9dChyLG4pO3JldHVybiByZShlKSYmKGU9VnQoZSkpLChfZShlKXx8Z2UoZSkpJiYoZT1LdChlKSksZS5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShyLGUsbix0KX0pfSk6bmUodCk/Rih0aGlzLHQsZSk6Rih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0sRXQuY29uY2F0TWFwT2JzZXJ2ZXI9RXQuc2VsZWN0Q29uY2F0T2JzZXJ2ZXI9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxvPWJlKGUsbiwyKSxhPWJlKHQsbiwxKSxzPWJlKHIsbiwwKTtyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHIpe3ZhciBuPTA7cmV0dXJuIGkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PW8oZSxuKyspfWNhdGNoKGUpe3JldHVybiB2b2lkIHIub25FcnJvcihlKX1yZSh0KSYmKHQ9VnQodCkpLHIub25OZXh0KHQpfSxmdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1hKGUpfWNhdGNoKGUpe3JldHVybiB2b2lkIHIub25FcnJvcihlKX1yZSh0KSYmKHQ9VnQodCkpLHIub25OZXh0KHQpLHIub25Db21wbGV0ZWQoKX0sZnVuY3Rpb24oKXt2YXIgZTt0cnl7ZT1zKCl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgci5vbkVycm9yKGUpfXJlKGUpJiYoZT1WdChlKSksci5vbk5leHQoZSksci5vbkNvbXBsZXRlZCgpfSl9LHRoaXMpLmNvbmNhdEFsbCgpfSxFdC5kZWZhdWx0SWZFbXB0eT1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09YSYmKGU9bnVsbCksbmV3IFRyKGZ1bmN0aW9uKHQpe3ZhciByPSExO3JldHVybiBuLnN1YnNjcmliZShmdW5jdGlvbihlKXtyPSEwLHQub25OZXh0KGUpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7IXImJnQub25OZXh0KGUpLHQub25Db21wbGV0ZWQoKX0pfSxuKX0sJC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihlKXt2YXIgdD0tMT09PXoodGhpcy5zZXQsZSx0aGlzLmNvbXBhcmVyKTtyZXR1cm4gdCYmdGhpcy5zZXQucHVzaChlKSx0fSxFdC5kaXN0aW5jdD1mdW5jdGlvbihpLGUpe3ZhciB0PXRoaXM7cmV0dXJuIGV8fChlPVEpLG5ldyBUcihmdW5jdGlvbihyKXt2YXIgbj1uZXcgJChlKTtyZXR1cm4gdC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZTtpZihpKXRyeXt0PWkoZSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgci5vbkVycm9yKGUpfW4ucHVzaCh0KSYmci5vbk5leHQoZSl9LGZ1bmN0aW9uKGUpe3Iub25FcnJvcihlKX0sZnVuY3Rpb24oKXtyLm9uQ29tcGxldGVkKCl9KX0sdGhpcyl9O3ZhciBTcj1mdW5jdGlvbihuKXtmdW5jdGlvbiByKGUsdCxyKXt0aGlzLnNvdXJjZT1lLHRoaXMuc2VsZWN0b3I9YmUodCxyLDMpLG4uY2FsbCh0aGlzKX1mdW5jdGlvbiBpKG4saSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5jYWxsKHRoaXMsaS5zZWxlY3RvcihlLHQsciksdCxyKX19ZnVuY3Rpb24gdChlLHQscil7dGhpcy5vPWUsdGhpcy5zZWxlY3Rvcj10LHRoaXMuc291cmNlPXIsdGhpcy5pPTAsdGhpcy5pc1N0b3BwZWQ9ITF9cmV0dXJuIFdlKHIsbiksci5wcm90b3R5cGUuaW50ZXJuYWxNYXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHIodGhpcy5zb3VyY2UsaShlLHRoaXMpLHQpfSxyLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IHQoZSx0aGlzLnNlbGVjdG9yLHRoaXMpKX0sdC5wcm90b3R5cGUub25OZXh0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dmFyIHQ9cCh0aGlzLnNlbGVjdG9yKShlLHRoaXMuaSsrLHRoaXMuc291cmNlKTtyZXR1cm4gdD09PUtlP3RoaXMuby5vbkVycm9yKHQuZSk6dm9pZCB0aGlzLm8ub25OZXh0KHQpfX0sdC5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpKX0sdC5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkNvbXBsZXRlZCgpKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzU3RvcHBlZD8hMToodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSksITApfSxyfShMdCk7RXQubWFwPUV0LnNlbGVjdD1mdW5jdGlvbihlLHQpe3ZhciByPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIFNyP3RoaXMuaW50ZXJuYWxNYXAocix0KTpuZXcgU3IodGhpcyxyLHQpfSxFdC5wbHVjaz1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyxvPWFyZ3VtZW50cy5sZW5ndGg7aWYoMD09PW8pdGhyb3cgbmV3IEVycm9yKFwiTGlzdCBvZiBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBlbXB0eS5cIik7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLHI9MDtvPnI7cisrKXt2YXIgbj10W2lbcl1dO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuKXJldHVybiBhO3Q9bn1yZXR1cm4gdH0pfSxFdC5mbGF0TWFwT2JzZXJ2ZXI9RXQuc2VsZWN0TWFueU9ic2VydmVyPWZ1bmN0aW9uKGksbyx0LGEpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBUcihmdW5jdGlvbihyKXt2YXIgbj0wO3JldHVybiBlLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1pLmNhbGwoYSxlLG4rKyl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgci5vbkVycm9yKGUpfXJlKHQpJiYodD1WdCh0KSksci5vbk5leHQodCl9LGZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PW8uY2FsbChhLGUpfWNhdGNoKGUpe3JldHVybiB2b2lkIHIub25FcnJvcihlKX1yZSh0KSYmKHQ9VnQodCkpLHIub25OZXh0KHQpLHIub25Db21wbGV0ZWQoKX0sZnVuY3Rpb24oKXt2YXIgZTt0cnl7ZT10LmNhbGwoYSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgci5vbkVycm9yKGUpfXJlKGUpJiYoZT1WdChlKSksci5vbk5leHQoZSksci5vbkNvbXBsZXRlZCgpfSl9LGUpLm1lcmdlQWxsKCl9LEV0LnNlbGVjdE1hbnk9RXQuZmxhdE1hcD1mdW5jdGlvbih0LGksZSl7cmV0dXJuIG5lKHQpJiZuZShpKT90aGlzLmZsYXRNYXAoZnVuY3Rpb24ocixuKXt2YXIgZT10KHIsbik7cmV0dXJuIHJlKGUpJiYoZT1WdChlKSksKF9lKGUpfHxnZShlKSkmJihlPUt0KGUpKSxlLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiBpKHIsZSxuLHQpfSl9LGUpOm5lKHQpP0codGhpcyx0LGUpOkcodGhpcyxmdW5jdGlvbigpe3JldHVybiB0fSl9LEV0LnNlbGVjdFN3aXRjaD1FdC5mbGF0TWFwTGF0ZXN0PUV0LnN3aXRjaE1hcD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNlbGVjdChlLHQpLnN3aXRjaExhdGVzdCgpfTt2YXIgTXI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gZShlLHQpe3RoaXMuc291cmNlPWUsdGhpcy5za2lwQ291bnQ9dCxyLmNhbGwodGhpcyl9ZnVuY3Rpb24gdChlLHQpe3RoaXMuYz10LHRoaXMucj10LHRoaXMubz1lLHRoaXMuaXNTdG9wcGVkPSExfXJldHVybiBXZShlLHIpLGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgdChlLHRoaXMuc2tpcENvdW50KSl9LHQucHJvdG90eXBlLm9uTmV4dD1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMucjw9MD90aGlzLm8ub25OZXh0KGUpOnRoaXMuci0tKX0sdC5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkVycm9yKGUpKX0sdC5wcm90b3R5cGUub25Db21wbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RvcHBlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLHRoaXMuby5vbkNvbXBsZXRlZCgpKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzU3RvcHBlZD8hMToodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSksITApfSxlfShMdCk7RXQuc2tpcD1mdW5jdGlvbihlKXtpZigwPmUpdGhyb3cgbmV3IGxlO3JldHVybiBuZXcgTXIodGhpcyxlKX0sRXQuc2tpcFdoaWxlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxvPWJlKGUsdCwzKTtyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHQpe3ZhciByPTAsbj0hMTtyZXR1cm4gaS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoIW4pdHJ5e249IW8oZSxyKyssaSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgdC5vbkVycm9yKGUpfW4mJnQub25OZXh0KGUpfSxmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LGZ1bmN0aW9uKCl7dC5vbkNvbXBsZXRlZCgpfSl9LGkpfSxFdC50YWtlPWZ1bmN0aW9uKGUsdCl7aWYoMD5lKXRocm93IG5ldyBsZTtpZigwPT09ZSlyZXR1cm4gcXQodCk7dmFyIG49dGhpcztyZXR1cm4gbmV3IFRyKGZ1bmN0aW9uKHQpe3ZhciByPWU7cmV0dXJuIG4uc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ItLSA+MCYmKHQub25OZXh0KGUpLDA+PXImJnQub25Db21wbGV0ZWQoKSl9LGZ1bmN0aW9uKGUpe3Qub25FcnJvcihlKX0sZnVuY3Rpb24oKXt0Lm9uQ29tcGxldGVkKCl9KX0sbil9LEV0LnRha2VXaGlsZT1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMsbz1iZShlLHQsMyk7cmV0dXJuIG5ldyBUcihmdW5jdGlvbih0KXt2YXIgcj0wLG49ITA7cmV0dXJuIGkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2lmKG4pe3RyeXtuPW8oZSxyKyssaSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgdC5vbkVycm9yKGUpfW4/dC5vbk5leHQoZSk6dC5vbkNvbXBsZXRlZCgpfX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3Qub25Db21wbGV0ZWQoKX0pfSxpKX07dmFyIENyPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHIoZSx0LHIpe3RoaXMuc291cmNlPWUsdGhpcy5wcmVkaWNhdGU9YmUodCxyLDMpLG4uY2FsbCh0aGlzKX1mdW5jdGlvbiBpKG4saSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gaS5wcmVkaWNhdGUoZSx0LHIpJiZuLmNhbGwodGhpcyxlLHQscil9fWZ1bmN0aW9uIHQoZSx0LHIpe3RoaXMubz1lLHRoaXMucHJlZGljYXRlPXQsdGhpcy5zb3VyY2U9cix0aGlzLmk9MCx0aGlzLmlzU3RvcHBlZD0hMX1yZXR1cm4gV2UocixuKSxyLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IHQoZSx0aGlzLnByZWRpY2F0ZSx0aGlzKSl9LHIucHJvdG90eXBlLmludGVybmFsRmlsdGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyByKHRoaXMuc291cmNlLGkoZSx0aGlzKSx0KX0sdC5wcm90b3R5cGUub25OZXh0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dmFyIHQ9cCh0aGlzLnByZWRpY2F0ZSkoZSx0aGlzLmkrKyx0aGlzLnNvdXJjZSk7cmV0dXJuIHQ9PT1LZT90aGlzLm8ub25FcnJvcih0LmUpOnZvaWQodCYmdGhpcy5vLm9uTmV4dChlKSl9fSx0LnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uRXJyb3IoZSkpfSx0LnByb3RvdHlwZS5vbkNvbXBsZXRlZD1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5vLm9uQ29tcGxldGVkKCkpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITB9LHQucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNTdG9wcGVkPyExOih0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLm8ub25FcnJvcihlKSwhMCl9LHJ9KEx0KTtFdC5maWx0ZXI9RXQud2hlcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIENyP3RoaXMuaW50ZXJuYWxGaWx0ZXIoZSx0KTpuZXcgQ3IodGhpcyxlLHQpfSxFdC50cmFuc2R1Y2U9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihlKXtyZXR1cm57XCJAQHRyYW5zZHVjZXIvaW5pdFwiOmZ1bmN0aW9uKCl7cmV0dXJuIGV9LFwiQEB0cmFuc2R1Y2VyL3N0ZXBcIjpmdW5jdGlvbihlLHQpe3JldHVybiBlLm9uTmV4dCh0KX0sXCJAQHRyYW5zZHVjZXIvcmVzdWx0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUub25Db21wbGV0ZWQoKX19fXZhciBpPXRoaXM7cmV0dXJuIG5ldyBUcihmdW5jdGlvbih0KXt2YXIgcj1lKG4odCkpO3JldHVybiBpLnN1YnNjcmliZShmdW5jdGlvbihlKXt0cnl7cltcIkBAdHJhbnNkdWNlci9zdGVwXCJdKHQsZSl9Y2F0Y2goZSl7dC5vbkVycm9yKGUpfX0sZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxmdW5jdGlvbigpe3JbXCJAQHRyYW5zZHVjZXIvcmVzdWx0XCJdKHQpfSl9LGkpfTt2YXIgVHI9WS5Bbm9ueW1vdXNPYnNlcnZhYmxlPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJm5lKGUuZGlzcG9zZSk/ZTpuZShlKT9ydChlKTpudH1mdW5jdGlvbiBpKGUsdCl7dmFyIHI9dFswXSxuPXRbMV0saT1wKG4pKHIpO3JldHVybiBpIT09S2V8fHIuZmFpbChLZS5lKT92b2lkIHIuc2V0RGlzcG9zYWJsZShvKGkpKTpkKEtlLmUpfWZ1bmN0aW9uIGUobixlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PW5ldyBFcihlKSxyPVt0LG5dO3JldHVybiBtdC5zY2hlZHVsZVJlcXVpcmVkKCk/bXQuc2NoZWR1bGVXaXRoU3RhdGUocixpKTppKG51bGwsciksdH10aGlzLnNvdXJjZT1lLHIuY2FsbCh0aGlzLHQpfXJldHVybiBXZShlLHIpLGV9KGt0KSxFcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzKSx0aGlzLm9ic2VydmVyPWUsdGhpcy5tPW5ldyBhdH1XZShlLHQpO3ZhciByPWUucHJvdG90eXBlO3JldHVybiByLm5leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9cCh0aGlzLm9ic2VydmVyLm9uTmV4dCkuY2FsbCh0aGlzLm9ic2VydmVyLGUpO3Q9PT1LZSYmKHRoaXMuZGlzcG9zZSgpLGQodC5lKSl9LHIuZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9cCh0aGlzLm9ic2VydmVyLm9uRXJyb3IpLmNhbGwodGhpcy5vYnNlcnZlcixlKTt0aGlzLmRpc3Bvc2UoKSx0PT09S2UmJmQodC5lKX0sci5jb21wbGV0ZWQ9ZnVuY3Rpb24oKXt2YXIgZT1wKHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQpLmNhbGwodGhpcy5vYnNlcnZlcik7dGhpcy5kaXNwb3NlKCksZT09PUtlJiZkKGUuZSl9LHIuc2V0RGlzcG9zYWJsZT1mdW5jdGlvbihlKXt0aGlzLm0uc2V0RGlzcG9zYWJsZShlKX0sci5nZXREaXNwb3NhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubS5nZXREaXNwb3NhYmxlKCl9LHIuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm0uZGlzcG9zZSgpfSxlfShPdCksT3I9ZnVuY3Rpb24oZSx0KXt0aGlzLnN1YmplY3Q9ZSx0aGlzLm9ic2VydmVyPXR9O09yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc3ViamVjdC5pc0Rpc3Bvc2VkJiZudWxsIT09dGhpcy5vYnNlcnZlcil7dmFyIGU9dGhpcy5zdWJqZWN0Lm9ic2VydmVycy5pbmRleE9mKHRoaXMub2JzZXJ2ZXIpO3RoaXMuc3ViamVjdC5vYnNlcnZlcnMuc3BsaWNlKGUsMSksdGhpcy5vYnNlcnZlcj1udWxsfX07dmFyIFByPVkuU3ViamVjdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBvdCh0aGlzKSx0aGlzLmlzU3RvcHBlZD90aGlzLmhhc0Vycm9yPyhlLm9uRXJyb3IodGhpcy5lcnJvciksbnQpOihlLm9uQ29tcGxldGVkKCksbnQpOih0aGlzLm9ic2VydmVycy5wdXNoKGUpLG5ldyBPcih0aGlzLGUpKX1mdW5jdGlvbiByKCl7ZS5jYWxsKHRoaXMsdCksdGhpcy5pc0Rpc3Bvc2VkPSExLHRoaXMuaXNTdG9wcGVkPSExLHRoaXMub2JzZXJ2ZXJzPVtdLHRoaXMuaGFzRXJyb3I9ITF9cmV0dXJuIFdlKHIsZSksWGUoci5wcm90b3R5cGUsQ3QucHJvdG90eXBlLHtoYXNPYnNlcnZlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoPjB9LG9uQ29tcGxldGVkOmZ1bmN0aW9uKCl7aWYob3QodGhpcyksIXRoaXMuaXNTdG9wcGVkKXt0aGlzLmlzU3RvcHBlZD0hMDtmb3IodmFyIGU9MCx0PWkodGhpcy5vYnNlcnZlcnMpLHI9dC5sZW5ndGg7cj5lO2UrKyl0W2VdLm9uQ29tcGxldGVkKCk7dGhpcy5vYnNlcnZlcnMubGVuZ3RoPTB9fSxvbkVycm9yOmZ1bmN0aW9uKGUpe2lmKG90KHRoaXMpLCF0aGlzLmlzU3RvcHBlZCl7dGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5lcnJvcj1lLHRoaXMuaGFzRXJyb3I9ITA7Zm9yKHZhciB0PTAscj1pKHRoaXMub2JzZXJ2ZXJzKSxuPXIubGVuZ3RoO24+dDt0Kyspclt0XS5vbkVycm9yKGUpO3RoaXMub2JzZXJ2ZXJzLmxlbmd0aD0wfX0sb25OZXh0OmZ1bmN0aW9uKGUpe2lmKG90KHRoaXMpLCF0aGlzLmlzU3RvcHBlZClmb3IodmFyIHQ9MCxyPWkodGhpcy5vYnNlcnZlcnMpLG49ci5sZW5ndGg7bj50O3QrKylyW3RdLm9uTmV4dChlKX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuaXNEaXNwb3NlZD0hMCx0aGlzLm9ic2VydmVycz1udWxsfX0pLHIuY3JlYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBBcihlLHQpfSxyfShrdCksQXI9KFkuQXN5bmNTdWJqZWN0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG90KHRoaXMpLHRoaXMuaXNTdG9wcGVkPyh0aGlzLmhhc0Vycm9yP2Uub25FcnJvcih0aGlzLmVycm9yKTp0aGlzLmhhc1ZhbHVlPyhlLm9uTmV4dCh0aGlzLnZhbHVlKSxlLm9uQ29tcGxldGVkKCkpOmUub25Db21wbGV0ZWQoKSxudCk6KHRoaXMub2JzZXJ2ZXJzLnB1c2goZSksbmV3IE9yKHRoaXMsZSkpfWZ1bmN0aW9uIHIoKXtlLmNhbGwodGhpcyx0KSx0aGlzLmlzRGlzcG9zZWQ9ITEsdGhpcy5pc1N0b3BwZWQ9ITEsdGhpcy5oYXNWYWx1ZT0hMSx0aGlzLm9ic2VydmVycz1bXSx0aGlzLmhhc0Vycm9yPSExfXJldHVybiBXZShyLGUpLFhlKHIucHJvdG90eXBlLEN0LHtoYXNPYnNlcnZlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gb3QodGhpcyksdGhpcy5vYnNlcnZlcnMubGVuZ3RoPjB9LG9uQ29tcGxldGVkOmZ1bmN0aW9uKCl7dmFyIGUsdDtpZihvdCh0aGlzKSwhdGhpcy5pc1N0b3BwZWQpe3RoaXMuaXNTdG9wcGVkPSEwO3ZhciByPWkodGhpcy5vYnNlcnZlcnMpLHQ9ci5sZW5ndGg7aWYodGhpcy5oYXNWYWx1ZSlmb3IoZT0wO3Q+ZTtlKyspe3ZhciBuPXJbZV07bi5vbk5leHQodGhpcy52YWx1ZSksbi5vbkNvbXBsZXRlZCgpfWVsc2UgZm9yKGU9MDt0PmU7ZSsrKXJbZV0ub25Db21wbGV0ZWQoKTt0aGlzLm9ic2VydmVycy5sZW5ndGg9MH19LG9uRXJyb3I6ZnVuY3Rpb24oZSl7aWYob3QodGhpcyksIXRoaXMuaXNTdG9wcGVkKXt0aGlzLmlzU3RvcHBlZD0hMCx0aGlzLmhhc0Vycm9yPSEwLHRoaXMuZXJyb3I9ZTtmb3IodmFyIHQ9MCxyPWkodGhpcy5vYnNlcnZlcnMpLG49ci5sZW5ndGg7bj50O3QrKylyW3RdLm9uRXJyb3IoZSk7dGhpcy5vYnNlcnZlcnMubGVuZ3RoPTB9fSxvbk5leHQ6ZnVuY3Rpb24oZSl7b3QodGhpcyksdGhpcy5pc1N0b3BwZWR8fCh0aGlzLnZhbHVlPWUsdGhpcy5oYXNWYWx1ZT0hMCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmlzRGlzcG9zZWQ9ITAsdGhpcy5vYnNlcnZlcnM9bnVsbCx0aGlzLmV4Y2VwdGlvbj1udWxsLHRoaXMudmFsdWU9bnVsbH19KSxyfShrdCksWS5Bbm9ueW1vdXNTdWJqZWN0PWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZS5zdWJzY3JpYmUoZSl9ZnVuY3Rpb24gZShlLHQpe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLm9ic2VydmFibGU9dCxyLmNhbGwodGhpcyxuKX1yZXR1cm4gV2UoZSxyKSxYZShlLnByb3RvdHlwZSxDdC5wcm90b3R5cGUse29uQ29tcGxldGVkOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCgpfSxvbkVycm9yOmZ1bmN0aW9uKGUpe3RoaXMub2JzZXJ2ZXIub25FcnJvcihlKX0sb25OZXh0OmZ1bmN0aW9uKGUpe3RoaXMub2JzZXJ2ZXIub25OZXh0KGUpfX0pLGV9KGt0KSk7XCJmdW5jdGlvblwiPT10eXBlb2YgSXImJlwib2JqZWN0XCI9PXR5cGVvZiBJci5hbWQmJklyLmFtZD8oSC5SeD1ZLElyKGZ1bmN0aW9uKCl7cmV0dXJuIFl9KSk6VSYmcT9XPyhxLmV4cG9ydHM9WSkuUng9WTpVLlJ4PVk6SC5SeD1ZO3ZhciBqcj1lKCl9KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLGUoMTUwKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygbj9uOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7MTUwOjE1MH1dfSx7fSxbMV0pKDEpfSl9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp7fSl9LHt9XSwxNjpbZnVuY3Rpb24oaSxvLGUpeyhmdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZSE9PVwidW5kZWZpbmVkXCI/ZTp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6e307dmFyIHI9aShcIm1pbi1kb2N1bWVudFwiKTt2YXIgbjtpZih0eXBlb2YgZG9jdW1lbnQhPT1cInVuZGVmaW5lZFwiKXtuPWRvY3VtZW50fWVsc2V7bj10W1wiX19HTE9CQUxfRE9DVU1FTlRfQ0FDSEVANFwiXTtpZighbil7bj10W1wiX19HTE9CQUxfRE9DVU1FTlRfQ0FDSEVANFwiXT1yfX1vLmV4cG9ydHM9bn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93Ont9KX0se1wibWluLWRvY3VtZW50XCI6NH1dLDE3OltmdW5jdGlvbihlLHQscil7ci5yZWFkPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG8sYTt2YXIgcz1pKjgtbi0xO3ZhciB1PSgxPDxzKS0xO3ZhciBjPXU+PjE7dmFyIGw9LTc7dmFyIGg9cj9pLTE6MDt2YXIgcD1yPy0xOjE7dmFyIGY9ZVt0K2hdO2grPXA7bz1mJigxPDwtbCktMTtmPj49LWw7bCs9cztmb3IoO2w+MDtvPW8qMjU2K2VbdCtoXSxoKz1wLGwtPTgpe31hPW8mKDE8PC1sKS0xO28+Pj0tbDtsKz1uO2Zvcig7bD4wO2E9YSoyNTYrZVt0K2hdLGgrPXAsbC09OCl7fWlmKG89PT0wKXtvPTEtY31lbHNlIGlmKG89PT11KXtyZXR1cm4gYT9OYU46KGY/LTE6MSkqSW5maW5pdHl9ZWxzZXthPWErTWF0aC5wb3coMixuKTtvPW8tY31yZXR1cm4oZj8tMToxKSphKk1hdGgucG93KDIsby1uKX07ci53cml0ZT1mdW5jdGlvbihlLHQscixuLGksbyl7dmFyIGEscyx1O3ZhciBjPW8qOC1pLTE7dmFyIGw9KDE8PGMpLTE7dmFyIGg9bD4+MTt2YXIgcD1pPT09MjM/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowO3ZhciBmPW4/MDpvLTE7dmFyIGQ9bj8xOi0xO3ZhciB2PXQ8MHx8dD09PTAmJjEvdDwwPzE6MDt0PU1hdGguYWJzKHQpO2lmKGlzTmFOKHQpfHx0PT09SW5maW5pdHkpe3M9aXNOYU4odCk/MTowO2E9bH1lbHNle2E9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMik7aWYodCoodT1NYXRoLnBvdygyLC1hKSk8MSl7YS0tO3UqPTJ9aWYoYStoPj0xKXt0Kz1wL3V9ZWxzZXt0Kz1wKk1hdGgucG93KDIsMS1oKX1pZih0KnU+PTIpe2ErKzt1Lz0yfWlmKGEraD49bCl7cz0wO2E9bH1lbHNlIGlmKGEraD49MSl7cz0odCp1LTEpKk1hdGgucG93KDIsaSk7YT1hK2h9ZWxzZXtzPXQqTWF0aC5wb3coMixoLTEpKk1hdGgucG93KDIsaSk7YT0wfX1mb3IoO2k+PTg7ZVtyK2ZdPXMmMjU1LGYrPWQscy89MjU2LGktPTgpe31hPWE8PGl8cztjKz1pO2Zvcig7Yz4wO2VbcitmXT1hJjI1NSxmKz1kLGEvPTI1NixjLT04KXt9ZVtyK2YtZF18PXYqMTI4fX0se31dLDE4OltmdW5jdGlvbihlLG4sdCl7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciByPXR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZSE9PVwidW5kZWZpbmVkXCI/ZTp7fTtuLmV4cG9ydHM9dDtmdW5jdGlvbiB0KGUsdCl7aWYoZSBpbiByKXtyZXR1cm4gcltlXX1yW2VdPXQ7cmV0dXJuIHR9fSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6e30pfSx7fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgYT1lKFwiLi9pbmRleC5qc1wiKTt0LmV4cG9ydHM9bjtmdW5jdGlvbiBuKGUsdCxyKXt2YXIgbj1cIl9fSU5ESVZJRFVBTF9PTkVfVkVSU0lPTl9cIitlO3ZhciBpPW4rXCJfRU5GT1JDRV9TSU5HTEVUT05cIjt2YXIgbz1hKGksdCk7aWYobyE9PXQpe3Rocm93IG5ldyBFcnJvcihcIkNhbiBvbmx5IGhhdmUgb25lIGNvcHkgb2YgXCIrZStcIi5cXG5cIitcIllvdSBhbHJlYWR5IGhhdmUgdmVyc2lvbiBcIitvK1wiIGluc3RhbGxlZC5cXG5cIitcIlRoaXMgbWVhbnMgeW91IGNhbm5vdCBpbnN0YWxsIHZlcnNpb24gXCIrdCl9cmV0dXJuIGEobixyKX19LHtcIi4vaW5kZXguanNcIjoxOH1dLDIwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uIGUodCl7cmV0dXJuIHR5cGVvZiB0PT09XCJvYmplY3RcIiYmdCE9PW51bGx9fSx7fV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbT17fTttLmJhc2UzMj1cIjAxMjM0NTY3ODliY2RlZmdoamttbnBxcnN0dXZ3eHl6XCI7bS5lbmNvZGU9ZnVuY3Rpb24oZSx0LHIpe2lmKHR5cGVvZiByPT1cInVuZGVmaW5lZFwiKXtmb3IodmFyIG49MTtuPD0xMjtuKyspe3ZhciBpPW0uZW5jb2RlKGUsdCxuKTt2YXIgbz1tLmRlY29kZShpKTtpZihvLmxhdD09ZSYmby5sb249PXQpcmV0dXJuIGl9cj0xMn1lPU51bWJlcihlKTt0PU51bWJlcih0KTtyPU51bWJlcihyKTtpZihpc05hTihlKXx8aXNOYU4odCl8fGlzTmFOKHIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZ2VvaGFzaFwiKTt2YXIgYT0wO3ZhciBzPTA7dmFyIHU9dHJ1ZTt2YXIgYz1cIlwiO3ZhciBsPS05MCxoPTkwO3ZhciBwPS0xODAsZj0xODA7d2hpbGUoYy5sZW5ndGg8cil7aWYodSl7dmFyIGQ9KHArZikvMjtpZih0Pj1kKXthPWEqMisxO3A9ZH1lbHNle2E9YSoyO2Y9ZH19ZWxzZXt2YXIgdj0obCtoKS8yO2lmKGU+PXYpe2E9YSoyKzE7bD12fWVsc2V7YT1hKjI7aD12fX11PSF1O2lmKCsrcz09NSl7Yys9bS5iYXNlMzIuY2hhckF0KGEpO3M9MDthPTB9fXJldHVybiBjfTttLmRlY29kZT1mdW5jdGlvbihlKXt2YXIgdD1tLmJvdW5kcyhlKTt2YXIgcj10LnN3LmxhdCxuPXQuc3cubG9uO3ZhciBpPXQubmUubGF0LG89dC5uZS5sb247dmFyIGE9KHIraSkvMjt2YXIgcz0obitvKS8yO2E9YS50b0ZpeGVkKE1hdGguZmxvb3IoMi1NYXRoLmxvZyhpLXIpL01hdGguTE4xMCkpO3M9cy50b0ZpeGVkKE1hdGguZmxvb3IoMi1NYXRoLmxvZyhvLW4pL01hdGguTE4xMCkpO3JldHVybntsYXQ6TnVtYmVyKGEpLGxvbjpOdW1iZXIocyl9fTttLmJvdW5kcz1mdW5jdGlvbihlKXtpZihlLmxlbmd0aD09PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBnZW9oYXNoXCIpO2U9ZS50b0xvd2VyQ2FzZSgpO3ZhciB0PXRydWU7dmFyIHI9LTkwLG49OTA7dmFyIGk9LTE4MCxvPTE4MDtmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKyl7dmFyIHM9ZS5jaGFyQXQoYSk7dmFyIHU9bS5iYXNlMzIuaW5kZXhPZihzKTtpZih1PT0tMSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGdlb2hhc2hcIik7Zm9yKHZhciBjPTQ7Yz49MDtjLS0pe3ZhciBsPXU+PmMmMTtpZih0KXt2YXIgaD0oaStvKS8yO2lmKGw9PTEpe2k9aH1lbHNle289aH19ZWxzZXt2YXIgcD0ocituKS8yO2lmKGw9PTEpe3I9cH1lbHNle249cH19dD0hdH19dmFyIGY9e3N3OntsYXQ6cixsb246aX0sbmU6e2xhdDpuLGxvbjpvfX07cmV0dXJuIGZ9O20uYWRqYWNlbnQ9ZnVuY3Rpb24oZSx0KXtlPWUudG9Mb3dlckNhc2UoKTt0PXQudG9Mb3dlckNhc2UoKTtpZihlLmxlbmd0aD09PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBnZW9oYXNoXCIpO2lmKFwibnNld1wiLmluZGV4T2YodCk9PS0xKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGlyZWN0aW9uXCIpO3ZhciByPXtuOltcInAwcjIxNDM2eDh6YjlkY2Y1aDdram5tcWVzZ3V0d3Z5XCIsXCJiYzAxZmc0NTIzODk2N2RldXZoanl6bnBrbXN0cXJ3eFwiXSxzOltcIjE0MzY1aDdrOWRjZmVzZ3Vqbm1xcDByMnR3dnl4OHpiXCIsXCIyMzg5NjdkZWJjMDFmZzQ1a21zdHFyd3h1dmhqeXpucFwiXSxlOltcImJjMDFmZzQ1MjM4OTY3ZGV1dmhqeXpucGttc3Rxcnd4XCIsXCJwMHIyMTQzNng4emI5ZGNmNWg3a2pubXFlc2d1dHd2eVwiXSx3OltcIjIzODk2N2RlYmMwMWZnNDVrbXN0cXJ3eHV2aGp5em5wXCIsXCIxNDM2NWg3azlkY2Zlc2d1am5tcXAwcjJ0d3Z5eDh6YlwiXX07dmFyIG49e246W1wicHJ4elwiLFwiYmNmZ3V2eXpcIl0sczpbXCIwMjhiXCIsXCIwMTQ1aGpucFwiXSxlOltcImJjZmd1dnl6XCIsXCJwcnh6XCJdLHc6W1wiMDE0NWhqbnBcIixcIjAyOGJcIl19O3ZhciBpPWUuc2xpY2UoLTEpO3ZhciBvPWUuc2xpY2UoMCwtMSk7dmFyIGE9ZS5sZW5ndGglMjtpZihuW3RdW2FdLmluZGV4T2YoaSkhPS0xJiZvIT09XCJcIil7bz1tLmFkamFjZW50KG8sdCl9cmV0dXJuIG8rbS5iYXNlMzIuY2hhckF0KHJbdF1bYV0uaW5kZXhPZihpKSl9O20ubmVpZ2hib3Vycz1mdW5jdGlvbihlKXtyZXR1cm57bjptLmFkamFjZW50KGUsXCJuXCIpLG5lOm0uYWRqYWNlbnQobS5hZGphY2VudChlLFwiblwiKSxcImVcIiksZTptLmFkamFjZW50KGUsXCJlXCIpLHNlOm0uYWRqYWNlbnQobS5hZGphY2VudChlLFwic1wiKSxcImVcIiksczptLmFkamFjZW50KGUsXCJzXCIpLHN3Om0uYWRqYWNlbnQobS5hZGphY2VudChlLFwic1wiKSxcIndcIiksdzptLmFkamFjZW50KGUsXCJ3XCIpLG53Om0uYWRqYWNlbnQobS5hZGphY2VudChlLFwiblwiKSxcIndcIil9fTtpZih0eXBlb2YgdCE9XCJ1bmRlZmluZWRcIiYmdC5leHBvcnRzKXQuZXhwb3J0cz1tfSx7fV0sMjI6W2Z1bmN0aW9uKGUscixuKXsoZnVuY3Rpb24oZSx0KXt0eXBlb2Ygbj09PVwib2JqZWN0XCImJnR5cGVvZiByIT09XCJ1bmRlZmluZWRcIj90KG4pOnR5cGVvZiBvPT09XCJmdW5jdGlvblwiJiZvLmFtZD9vKFtcImV4cG9ydHNcIl0sdCk6KGU9ZXx8c2VsZix0KGUubWFydGluZXo9e30pKX0pKHRoaXMsZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlLHQpe3JldHVybiBlPnQ/MTplPHQ/LTE6MH12YXIgbT1mdW5jdGlvbiBlKHQscil7aWYodD09PXZvaWQgMCl0PW47aWYocj09PXZvaWQgMClyPWZhbHNlO3RoaXMuX2NvbXBhcmU9dDt0aGlzLl9yb290PW51bGw7dGhpcy5fc2l6ZT0wO3RoaXMuX25vRHVwbGljYXRlcz0hIXJ9O3ZhciB0PXtzaXplOntjb25maWd1cmFibGU6dHJ1ZX19O20ucHJvdG90eXBlLnJvdGF0ZUxlZnQ9ZnVuY3Rpb24gZSh0KXt2YXIgcj10LnJpZ2h0O2lmKHIpe3QucmlnaHQ9ci5sZWZ0O2lmKHIubGVmdCl7ci5sZWZ0LnBhcmVudD10fXIucGFyZW50PXQucGFyZW50fWlmKCF0LnBhcmVudCl7dGhpcy5fcm9vdD1yfWVsc2UgaWYodD09PXQucGFyZW50LmxlZnQpe3QucGFyZW50LmxlZnQ9cn1lbHNle3QucGFyZW50LnJpZ2h0PXJ9aWYocil7ci5sZWZ0PXR9dC5wYXJlbnQ9cn07bS5wcm90b3R5cGUucm90YXRlUmlnaHQ9ZnVuY3Rpb24gZSh0KXt2YXIgcj10LmxlZnQ7aWYocil7dC5sZWZ0PXIucmlnaHQ7aWYoci5yaWdodCl7ci5yaWdodC5wYXJlbnQ9dH1yLnBhcmVudD10LnBhcmVudH1pZighdC5wYXJlbnQpe3RoaXMuX3Jvb3Q9cn1lbHNlIGlmKHQ9PT10LnBhcmVudC5sZWZ0KXt0LnBhcmVudC5sZWZ0PXJ9ZWxzZXt0LnBhcmVudC5yaWdodD1yfWlmKHIpe3IucmlnaHQ9dH10LnBhcmVudD1yfTttLnByb3RvdHlwZS5fc3BsYXk9ZnVuY3Rpb24gZSh0KXt3aGlsZSh0LnBhcmVudCl7dmFyIHI9dC5wYXJlbnQ7aWYoIXIucGFyZW50KXtpZihyLmxlZnQ9PT10KXt0aGlzLnJvdGF0ZVJpZ2h0KHIpfWVsc2V7dGhpcy5yb3RhdGVMZWZ0KHIpfX1lbHNlIGlmKHIubGVmdD09PXQmJnIucGFyZW50LmxlZnQ9PT1yKXt0aGlzLnJvdGF0ZVJpZ2h0KHIucGFyZW50KTt0aGlzLnJvdGF0ZVJpZ2h0KHIpfWVsc2UgaWYoci5yaWdodD09PXQmJnIucGFyZW50LnJpZ2h0PT09cil7dGhpcy5yb3RhdGVMZWZ0KHIucGFyZW50KTt0aGlzLnJvdGF0ZUxlZnQocil9ZWxzZSBpZihyLmxlZnQ9PT10JiZyLnBhcmVudC5yaWdodD09PXIpe3RoaXMucm90YXRlUmlnaHQocik7dGhpcy5yb3RhdGVMZWZ0KHIpfWVsc2V7dGhpcy5yb3RhdGVMZWZ0KHIpO3RoaXMucm90YXRlUmlnaHQocil9fX07bS5wcm90b3R5cGUuc3BsYXk9ZnVuY3Rpb24gZSh0KXt2YXIgcixuLGksbyxhO3doaWxlKHQucGFyZW50KXtyPXQucGFyZW50O249ci5wYXJlbnQ7aWYobiYmbi5wYXJlbnQpe2k9bi5wYXJlbnQ7aWYoaS5sZWZ0PT09bil7aS5sZWZ0PXR9ZWxzZXtpLnJpZ2h0PXR9dC5wYXJlbnQ9aX1lbHNle3QucGFyZW50PW51bGw7dGhpcy5fcm9vdD10fW89dC5sZWZ0O2E9dC5yaWdodDtpZih0PT09ci5sZWZ0KXtpZihuKXtpZihuLmxlZnQ9PT1yKXtpZihyLnJpZ2h0KXtuLmxlZnQ9ci5yaWdodDtuLmxlZnQucGFyZW50PW59ZWxzZXtuLmxlZnQ9bnVsbH1yLnJpZ2h0PW47bi5wYXJlbnQ9cn1lbHNle2lmKG8pe24ucmlnaHQ9bztvLnBhcmVudD1ufWVsc2V7bi5yaWdodD1udWxsfXQubGVmdD1uO24ucGFyZW50PXR9fWlmKGEpe3IubGVmdD1hO2EucGFyZW50PXJ9ZWxzZXtyLmxlZnQ9bnVsbH10LnJpZ2h0PXI7ci5wYXJlbnQ9dH1lbHNle2lmKG4pe2lmKG4ucmlnaHQ9PT1yKXtpZihyLmxlZnQpe24ucmlnaHQ9ci5sZWZ0O24ucmlnaHQucGFyZW50PW59ZWxzZXtuLnJpZ2h0PW51bGx9ci5sZWZ0PW47bi5wYXJlbnQ9cn1lbHNle2lmKGEpe24ubGVmdD1hO2EucGFyZW50PW59ZWxzZXtuLmxlZnQ9bnVsbH10LnJpZ2h0PW47bi5wYXJlbnQ9dH19aWYobyl7ci5yaWdodD1vO28ucGFyZW50PXJ9ZWxzZXtyLnJpZ2h0PW51bGx9dC5sZWZ0PXI7ci5wYXJlbnQ9dH19fTttLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uIGUodCxyKXtpZighdC5wYXJlbnQpe3RoaXMuX3Jvb3Q9cn1lbHNlIGlmKHQ9PT10LnBhcmVudC5sZWZ0KXt0LnBhcmVudC5sZWZ0PXJ9ZWxzZXt0LnBhcmVudC5yaWdodD1yfWlmKHIpe3IucGFyZW50PXQucGFyZW50fX07bS5wcm90b3R5cGUubWluTm9kZT1mdW5jdGlvbiBlKHQpe2lmKHQ9PT12b2lkIDApdD10aGlzLl9yb290O2lmKHQpe3doaWxlKHQubGVmdCl7dD10LmxlZnR9fXJldHVybiB0fTttLnByb3RvdHlwZS5tYXhOb2RlPWZ1bmN0aW9uIGUodCl7aWYodD09PXZvaWQgMCl0PXRoaXMuX3Jvb3Q7aWYodCl7d2hpbGUodC5yaWdodCl7dD10LnJpZ2h0fX1yZXR1cm4gdH07bS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uIGUodCxyKXt2YXIgbj10aGlzLl9yb290O3ZhciBpPW51bGw7dmFyIG89dGhpcy5fY29tcGFyZTt2YXIgYTtpZih0aGlzLl9ub0R1cGxpY2F0ZXMpe3doaWxlKG4pe2k9bjthPW8obi5rZXksdCk7aWYoYT09PTApe3JldHVybn1lbHNlIGlmKG8obi5rZXksdCk8MCl7bj1uLnJpZ2h0fWVsc2V7bj1uLmxlZnR9fX1lbHNle3doaWxlKG4pe2k9bjtpZihvKG4ua2V5LHQpPDApe249bi5yaWdodH1lbHNle249bi5sZWZ0fX19bj17a2V5OnQsZGF0YTpyLGxlZnQ6bnVsbCxyaWdodDpudWxsLHBhcmVudDppfTtpZighaSl7dGhpcy5fcm9vdD1ufWVsc2UgaWYobyhpLmtleSxuLmtleSk8MCl7aS5yaWdodD1ufWVsc2V7aS5sZWZ0PW59dGhpcy5zcGxheShuKTt0aGlzLl9zaXplKys7cmV0dXJuIG59O20ucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24gZSh0KXt2YXIgcj10aGlzLl9yb290O3ZhciBuPXRoaXMuX2NvbXBhcmU7d2hpbGUocil7dmFyIGk9bihyLmtleSx0KTtpZihpPDApe3I9ci5yaWdodH1lbHNlIGlmKGk+MCl7cj1yLmxlZnR9ZWxzZXtyZXR1cm4gcn19cmV0dXJuIG51bGx9O20ucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uIGUodCl7dmFyIHI9dGhpcy5fcm9vdDt2YXIgbj10aGlzLl9jb21wYXJlO3doaWxlKHIpe3ZhciBpPW4odCxyLmtleSk7aWYoaT09PTApe3JldHVybiB0cnVlfWVsc2UgaWYoaTwwKXtyPXIubGVmdH1lbHNle3I9ci5yaWdodH19cmV0dXJuIGZhbHNlfTttLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24gZSh0KXt2YXIgcj10aGlzLmZpbmQodCk7aWYoIXIpe3JldHVybiBmYWxzZX10aGlzLnNwbGF5KHIpO2lmKCFyLmxlZnQpe3RoaXMucmVwbGFjZShyLHIucmlnaHQpfWVsc2UgaWYoIXIucmlnaHQpe3RoaXMucmVwbGFjZShyLHIubGVmdCl9ZWxzZXt2YXIgbj10aGlzLm1pbk5vZGUoci5yaWdodCk7aWYobi5wYXJlbnQhPT1yKXt0aGlzLnJlcGxhY2UobixuLnJpZ2h0KTtuLnJpZ2h0PXIucmlnaHQ7bi5yaWdodC5wYXJlbnQ9bn10aGlzLnJlcGxhY2UocixuKTtuLmxlZnQ9ci5sZWZ0O24ubGVmdC5wYXJlbnQ9bn10aGlzLl9zaXplLS07cmV0dXJuIHRydWV9O20ucHJvdG90eXBlLnJlbW92ZU5vZGU9ZnVuY3Rpb24gZSh0KXtpZighdCl7cmV0dXJuIGZhbHNlfXRoaXMuc3BsYXkodCk7aWYoIXQubGVmdCl7dGhpcy5yZXBsYWNlKHQsdC5yaWdodCl9ZWxzZSBpZighdC5yaWdodCl7dGhpcy5yZXBsYWNlKHQsdC5sZWZ0KX1lbHNle3ZhciByPXRoaXMubWluTm9kZSh0LnJpZ2h0KTtpZihyLnBhcmVudCE9PXQpe3RoaXMucmVwbGFjZShyLHIucmlnaHQpO3IucmlnaHQ9dC5yaWdodDtyLnJpZ2h0LnBhcmVudD1yfXRoaXMucmVwbGFjZSh0LHIpO3IubGVmdD10LmxlZnQ7ci5sZWZ0LnBhcmVudD1yfXRoaXMuX3NpemUtLTtyZXR1cm4gdHJ1ZX07bS5wcm90b3R5cGUuZXJhc2U9ZnVuY3Rpb24gZSh0KXt2YXIgcj10aGlzLmZpbmQodCk7aWYoIXIpe3JldHVybn10aGlzLnNwbGF5KHIpO3ZhciBuPXIubGVmdDt2YXIgaT1yLnJpZ2h0O3ZhciBvPW51bGw7aWYobil7bi5wYXJlbnQ9bnVsbDtvPXRoaXMubWF4Tm9kZShuKTt0aGlzLnNwbGF5KG8pO3RoaXMuX3Jvb3Q9b31pZihpKXtpZihuKXtvLnJpZ2h0PWl9ZWxzZXt0aGlzLl9yb290PWl9aS5wYXJlbnQ9b310aGlzLl9zaXplLS19O20ucHJvdG90eXBlLnBvcD1mdW5jdGlvbiBlKCl7dmFyIHQ9dGhpcy5fcm9vdCxyPW51bGw7aWYodCl7d2hpbGUodC5sZWZ0KXt0PXQubGVmdH1yPXtrZXk6dC5rZXksZGF0YTp0LmRhdGF9O3RoaXMucmVtb3ZlKHQua2V5KX1yZXR1cm4gcn07bS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbiBlKHQpe3ZhciByPXQ7aWYocil7aWYoci5yaWdodCl7cj1yLnJpZ2h0O3doaWxlKHImJnIubGVmdCl7cj1yLmxlZnR9fWVsc2V7cj10LnBhcmVudDt3aGlsZShyJiZyLnJpZ2h0PT09dCl7dD1yO3I9ci5wYXJlbnR9fX1yZXR1cm4gcn07bS5wcm90b3R5cGUucHJldj1mdW5jdGlvbiBlKHQpe3ZhciByPXQ7aWYocil7aWYoci5sZWZ0KXtyPXIubGVmdDt3aGlsZShyJiZyLnJpZ2h0KXtyPXIucmlnaHR9fWVsc2V7cj10LnBhcmVudDt3aGlsZShyJiZyLmxlZnQ9PT10KXt0PXI7cj1yLnBhcmVudH19fXJldHVybiByfTttLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uIGUodCl7dmFyIHI9dGhpcy5fcm9vdDt2YXIgbj1bXSxpPWZhbHNlLG89MDt3aGlsZSghaSl7aWYocil7bi5wdXNoKHIpO3I9ci5sZWZ0fWVsc2V7aWYobi5sZW5ndGg+MCl7cj1uLnBvcCgpO3QocixvKyspO3I9ci5yaWdodH1lbHNle2k9dHJ1ZX19fXJldHVybiB0aGlzfTttLnByb3RvdHlwZS5yYW5nZT1mdW5jdGlvbiBlKHQscixuLGkpe3ZhciBvPVtdO3ZhciBhPXRoaXMuX2NvbXBhcmU7dmFyIHM9dGhpcy5fcm9vdCx1O3doaWxlKG8ubGVuZ3RoIT09MHx8cyl7aWYocyl7by5wdXNoKHMpO3M9cy5sZWZ0fWVsc2V7cz1vLnBvcCgpO3U9YShzLmtleSxyKTtpZih1PjApe2JyZWFrfWVsc2UgaWYoYShzLmtleSx0KT49MCl7aWYobi5jYWxsKGkscykpe3JldHVybiB0aGlzfX1zPXMucmlnaHR9fXJldHVybiB0aGlzfTttLnByb3RvdHlwZS5rZXlzPWZ1bmN0aW9uIGUoKXt2YXIgdD10aGlzLl9yb290O3ZhciByPVtdLG49W10saT1mYWxzZTt3aGlsZSghaSl7aWYodCl7ci5wdXNoKHQpO3Q9dC5sZWZ0fWVsc2V7aWYoci5sZW5ndGg+MCl7dD1yLnBvcCgpO24ucHVzaCh0LmtleSk7dD10LnJpZ2h0fWVsc2V7aT10cnVlfX19cmV0dXJuIG59O20ucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbiBlKCl7dmFyIHQ9dGhpcy5fcm9vdDt2YXIgcj1bXSxuPVtdLGk9ZmFsc2U7d2hpbGUoIWkpe2lmKHQpe3IucHVzaCh0KTt0PXQubGVmdH1lbHNle2lmKHIubGVuZ3RoPjApe3Q9ci5wb3AoKTtuLnB1c2godC5kYXRhKTt0PXQucmlnaHR9ZWxzZXtpPXRydWV9fX1yZXR1cm4gbn07bS5wcm90b3R5cGUuYXQ9ZnVuY3Rpb24gZSh0KXt2YXIgcj10aGlzLl9yb290O3ZhciBuPVtdLGk9ZmFsc2Usbz0wO3doaWxlKCFpKXtpZihyKXtuLnB1c2gocik7cj1yLmxlZnR9ZWxzZXtpZihuLmxlbmd0aD4wKXtyPW4ucG9wKCk7aWYobz09PXQpe3JldHVybiByfW8rKztyPXIucmlnaHR9ZWxzZXtpPXRydWV9fX1yZXR1cm4gbnVsbH07bS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbiBlKHQscixuKXtpZih0PT09dm9pZCAwKXQ9W107aWYocj09PXZvaWQgMClyPVtdO2lmKG49PT12b2lkIDApbj1mYWxzZTtpZih0aGlzLl9zaXplIT09MCl7dGhyb3cgbmV3IEVycm9yKFwiYnVsay1sb2FkOiB0cmVlIGlzIG5vdCBlbXB0eVwiKX12YXIgaT10Lmxlbmd0aDtpZihuKXtjKHQsciwwLGktMSx0aGlzLl9jb21wYXJlKX10aGlzLl9yb290PWwobnVsbCx0LHIsMCxpKTt0aGlzLl9zaXplPWk7cmV0dXJuIHRoaXN9O20ucHJvdG90eXBlLm1pbj1mdW5jdGlvbiBlKCl7dmFyIHQ9dGhpcy5taW5Ob2RlKHRoaXMuX3Jvb3QpO2lmKHQpe3JldHVybiB0LmtleX1lbHNle3JldHVybiBudWxsfX07bS5wcm90b3R5cGUubWF4PWZ1bmN0aW9uIGUoKXt2YXIgdD10aGlzLm1heE5vZGUodGhpcy5fcm9vdCk7aWYodCl7cmV0dXJuIHQua2V5fWVsc2V7cmV0dXJuIG51bGx9fTttLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uIGUoKXtyZXR1cm4gdGhpcy5fcm9vdD09PW51bGx9O3Quc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2l6ZX07bS5jcmVhdGVUcmVlPWZ1bmN0aW9uIGUodCxyLG4saSxvKXtyZXR1cm4gbmV3IG0obixvKS5sb2FkKHQscixpKX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMobS5wcm90b3R5cGUsdCk7ZnVuY3Rpb24gbChlLHQscixuLGkpe3ZhciBvPWktbjtpZihvPjApe3ZhciBhPW4rTWF0aC5mbG9vcihvLzIpO3ZhciBzPXRbYV07dmFyIHU9clthXTt2YXIgYz17a2V5OnMsZGF0YTp1LHBhcmVudDplfTtjLmxlZnQ9bChjLHQscixuLGEpO2MucmlnaHQ9bChjLHQscixhKzEsaSk7cmV0dXJuIGN9cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhlLHQscixuLGkpe2lmKHI+PW4pe3JldHVybn12YXIgbz1lW3Irbj4+MV07dmFyIGE9ci0xO3ZhciBzPW4rMTt3aGlsZSh0cnVlKXtkb3thKyt9d2hpbGUoaShlW2FdLG8pPDApO2Rve3MtLX13aGlsZShpKGVbc10sbyk+MCk7aWYoYT49cyl7YnJlYWt9dmFyIHU9ZVthXTtlW2FdPWVbc107ZVtzXT11O3U9dFthXTt0W2FdPXRbc107dFtzXT11fWMoZSx0LHIscyxpKTtjKGUsdCxzKzEsbixpKX12YXIgYT0wO3ZhciB1PTE7dmFyIGg9Mjt2YXIgcD0zO3ZhciBnPTA7dmFyIHM9MTt2YXIgXz0yO3ZhciBmPTM7ZnVuY3Rpb24geShlLHQscil7aWYodD09PW51bGwpe2UuaW5PdXQ9ZmFsc2U7ZS5vdGhlckluT3V0PXRydWV9ZWxzZXtpZihlLmlzU3ViamVjdD09PXQuaXNTdWJqZWN0KXtlLmluT3V0PSF0LmluT3V0O2Uub3RoZXJJbk91dD10Lm90aGVySW5PdXR9ZWxzZXtlLmluT3V0PSF0Lm90aGVySW5PdXQ7ZS5vdGhlckluT3V0PXQuaXNWZXJ0aWNhbCgpPyF0LmluT3V0OnQuaW5PdXR9aWYodCl7ZS5wcmV2SW5SZXN1bHQ9IWkodCxyKXx8dC5pc1ZlcnRpY2FsKCk/dC5wcmV2SW5SZXN1bHQ6dH19dmFyIG49aShlLHIpO2lmKG4pe2UucmVzdWx0VHJhbnNpdGlvbj1vKGUscil9ZWxzZXtlLnJlc3VsdFRyYW5zaXRpb249MH19ZnVuY3Rpb24gaShlLHQpe3N3aXRjaChlLnR5cGUpe2Nhc2UgYTpzd2l0Y2godCl7Y2FzZSBnOnJldHVybiFlLm90aGVySW5PdXQ7Y2FzZSBzOnJldHVybiBlLm90aGVySW5PdXQ7Y2FzZSBfOnJldHVybiBlLmlzU3ViamVjdCYmZS5vdGhlckluT3V0fHwhZS5pc1N1YmplY3QmJiFlLm90aGVySW5PdXQ7Y2FzZSBmOnJldHVybiB0cnVlfWJyZWFrO2Nhc2UgaDpyZXR1cm4gdD09PWd8fHQ9PT1zO2Nhc2UgcDpyZXR1cm4gdD09PV87Y2FzZSB1OnJldHVybiBmYWxzZX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gbyhlLHQpe3ZhciByPSFlLmluT3V0O3ZhciBuPSFlLm90aGVySW5PdXQ7dmFyIGk7c3dpdGNoKHQpe2Nhc2UgZzppPXImJm47YnJlYWs7Y2FzZSBzOmk9cnx8bjticmVhaztjYXNlIGY6aT1yXm47YnJlYWs7Y2FzZSBfOmlmKGUuaXNTdWJqZWN0KXtpPXImJiFufWVsc2V7aT1uJiYhcn1icmVha31yZXR1cm4gaT8rMTotMX12YXIgZD1mdW5jdGlvbiBlKHQscixuLGksbyl7dGhpcy5sZWZ0PXI7dGhpcy5wb2ludD10O3RoaXMub3RoZXJFdmVudD1uO3RoaXMuaXNTdWJqZWN0PWk7dGhpcy50eXBlPW98fGE7dGhpcy5pbk91dD1mYWxzZTt0aGlzLm90aGVySW5PdXQ9ZmFsc2U7dGhpcy5wcmV2SW5SZXN1bHQ9bnVsbDt0aGlzLnJlc3VsdFRyYW5zaXRpb249MDt0aGlzLm90aGVyUG9zPS0xO3RoaXMub3V0cHV0Q29udG91cklkPS0xO3RoaXMuaXNFeHRlcmlvclJpbmc9dHJ1ZX07dmFyIHI9e2luUmVzdWx0Ontjb25maWd1cmFibGU6dHJ1ZX19O2QucHJvdG90eXBlLmlzQmVsb3c9ZnVuY3Rpb24gZSh0KXt2YXIgcj10aGlzLnBvaW50LG49dGhpcy5vdGhlckV2ZW50LnBvaW50O3JldHVybiB0aGlzLmxlZnQ/KHJbMF0tdFswXSkqKG5bMV0tdFsxXSktKG5bMF0tdFswXSkqKHJbMV0tdFsxXSk+MDooblswXS10WzBdKSooclsxXS10WzFdKS0oclswXS10WzBdKSooblsxXS10WzFdKT4wfTtkLnByb3RvdHlwZS5pc0Fib3ZlPWZ1bmN0aW9uIGUodCl7cmV0dXJuIXRoaXMuaXNCZWxvdyh0KX07ZC5wcm90b3R5cGUuaXNWZXJ0aWNhbD1mdW5jdGlvbiBlKCl7cmV0dXJuIHRoaXMucG9pbnRbMF09PT10aGlzLm90aGVyRXZlbnQucG9pbnRbMF19O3IuaW5SZXN1bHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdWx0VHJhbnNpdGlvbiE9PTB9O2QucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uIGUoKXt2YXIgdD1uZXcgZCh0aGlzLnBvaW50LHRoaXMubGVmdCx0aGlzLm90aGVyRXZlbnQsdGhpcy5pc1N1YmplY3QsdGhpcy50eXBlKTt0LmNvbnRvdXJJZD10aGlzLmNvbnRvdXJJZDt0LnJlc3VsdFRyYW5zaXRpb249dGhpcy5yZXN1bHRUcmFuc2l0aW9uO3QucHJldkluUmVzdWx0PXRoaXMucHJldkluUmVzdWx0O3QuaXNFeHRlcmlvclJpbmc9dGhpcy5pc0V4dGVyaW9yUmluZzt0LmluT3V0PXRoaXMuaW5PdXQ7dC5vdGhlckluT3V0PXRoaXMub3RoZXJJbk91dDtyZXR1cm4gdH07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUscik7ZnVuY3Rpb24gdihlLHQpe2lmKGVbMF09PT10WzBdKXtpZihlWzFdPT09dFsxXSl7cmV0dXJuIHRydWV9ZWxzZXtyZXR1cm4gZmFsc2V9fXJldHVybiBmYWxzZX12YXIgYj0xMTEwMjIzMDI0NjI1MTU2NWUtMzI7dmFyIEw9MTM0MjE3NzI5O3ZhciBOPSgzKzgqYikqYjtmdW5jdGlvbiBJKGUsdCxyLG4saSl7dmFyIG8sYSxzLHU7dmFyIGM9dFswXTt2YXIgbD1uWzBdO3ZhciBoPTA7dmFyIHA9MDtpZihsPmM9PT1sPi1jKXtvPWM7Yz10WysraF19ZWxzZXtvPWw7bD1uWysrcF19dmFyIGY9MDtpZihoPGUmJnA8cil7aWYobD5jPT09bD4tYyl7YT1jK287cz1vLShhLWMpO2M9dFsrK2hdfWVsc2V7YT1sK287cz1vLShhLWwpO2w9blsrK3BdfW89YTtpZihzIT09MCl7aVtmKytdPXN9d2hpbGUoaDxlJiZwPHIpe2lmKGw+Yz09PWw+LWMpe2E9bytjO3U9YS1vO3M9by0oYS11KSsoYy11KTtjPXRbKytoXX1lbHNle2E9bytsO3U9YS1vO3M9by0oYS11KSsobC11KTtsPW5bKytwXX1vPWE7aWYocyE9PTApe2lbZisrXT1zfX19d2hpbGUoaDxlKXthPW8rYzt1PWEtbztzPW8tKGEtdSkrKGMtdSk7Yz10WysraF07bz1hO2lmKHMhPT0wKXtpW2YrK109c319d2hpbGUocDxyKXthPW8rbDt1PWEtbztzPW8tKGEtdSkrKGwtdSk7bD1uWysrcF07bz1hO2lmKHMhPT0wKXtpW2YrK109c319aWYobyE9PTB8fGY9PT0wKXtpW2YrK109b31yZXR1cm4gZn1mdW5jdGlvbiBEKGUsdCl7dmFyIHI9dFswXTtmb3IodmFyIG49MTtuPGU7bisrKXtyKz10W25dfXJldHVybiByfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkoZSl9dmFyIHc9KDMrMTYqYikqYjt2YXIgQj0oMisxMipiKSpiO3ZhciBGPSg5KzY0KmIpKmIqYjt2YXIgej14KDQpO3ZhciAkPXgoOCk7dmFyIEc9eCgxMik7dmFyIFY9eCgxNik7dmFyIEg9eCg0KTtmdW5jdGlvbiBTKGUsdCxyLG4saSxvLGEpe3ZhciBzLHUsYyxsO3ZhciBoLHAsZixkLHYsbSxnLF8seSxiLHgsdyxTLE07dmFyIEM9ZS1pO3ZhciBUPXItaTt2YXIgRT10LW87dmFyIE89bi1vO2I9QypPO3A9TCpDO2Y9cC0ocC1DKTtkPUMtZjtwPUwqTzt2PXAtKHAtTyk7bT1PLXY7eD1kKm0tKGItZip2LWQqdi1mKm0pO3c9RSpUO3A9TCpFO2Y9cC0ocC1FKTtkPUUtZjtwPUwqVDt2PXAtKHAtVCk7bT1ULXY7Uz1kKm0tKHctZip2LWQqdi1mKm0pO2c9eC1TO2g9eC1nO3pbMF09eC0oZytoKSsoaC1TKTtfPWIrZztoPV8tYjt5PWItKF8taCkrKGctaCk7Zz15LXc7aD15LWc7elsxXT15LShnK2gpKyhoLXcpO009XytnO2g9TS1fO3pbMl09Xy0oTS1oKSsoZy1oKTt6WzNdPU07dmFyIFA9RCg0LHopO3ZhciBBPUIqYTtpZihQPj1BfHwtUD49QSl7cmV0dXJuIFB9aD1lLUM7cz1lLShDK2gpKyhoLWkpO2g9ci1UO2M9ci0oVCtoKSsoaC1pKTtoPXQtRTt1PXQtKEUraCkrKGgtbyk7aD1uLU87bD1uLShPK2gpKyhoLW8pO2lmKHM9PT0wJiZ1PT09MCYmYz09PTAmJmw9PT0wKXtyZXR1cm4gUH1BPUYqYStOKk1hdGguYWJzKFApO1ArPUMqbCtPKnMtKEUqYytUKnUpO2lmKFA+PUF8fC1QPj1BKXtyZXR1cm4gUH1iPXMqTztwPUwqcztmPXAtKHAtcyk7ZD1zLWY7cD1MKk87dj1wLShwLU8pO209Ty12O3g9ZCptLShiLWYqdi1kKnYtZiptKTt3PXUqVDtwPUwqdTtmPXAtKHAtdSk7ZD11LWY7cD1MKlQ7dj1wLShwLVQpO209VC12O1M9ZCptLSh3LWYqdi1kKnYtZiptKTtnPXgtUztoPXgtZztIWzBdPXgtKGcraCkrKGgtUyk7Xz1iK2c7aD1fLWI7eT1iLShfLWgpKyhnLWgpO2c9eS13O2g9eS1nO0hbMV09eS0oZytoKSsoaC13KTtNPV8rZztoPU0tXztIWzJdPV8tKE0taCkrKGctaCk7SFszXT1NO3ZhciBqPUkoNCx6LDQsSCwkKTtiPUMqbDtwPUwqQztmPXAtKHAtQyk7ZD1DLWY7cD1MKmw7dj1wLShwLWwpO209bC12O3g9ZCptLShiLWYqdi1kKnYtZiptKTt3PUUqYztwPUwqRTtmPXAtKHAtRSk7ZD1FLWY7cD1MKmM7dj1wLShwLWMpO209Yy12O1M9ZCptLSh3LWYqdi1kKnYtZiptKTtnPXgtUztoPXgtZztIWzBdPXgtKGcraCkrKGgtUyk7Xz1iK2c7aD1fLWI7eT1iLShfLWgpKyhnLWgpO2c9eS13O2g9eS1nO0hbMV09eS0oZytoKSsoaC13KTtNPV8rZztoPU0tXztIWzJdPV8tKE0taCkrKGctaCk7SFszXT1NO3ZhciBSPUkoaiwkLDQsSCxHKTtiPXMqbDtwPUwqcztmPXAtKHAtcyk7ZD1zLWY7cD1MKmw7dj1wLShwLWwpO209bC12O3g9ZCptLShiLWYqdi1kKnYtZiptKTt3PXUqYztwPUwqdTtmPXAtKHAtdSk7ZD11LWY7cD1MKmM7dj1wLShwLWMpO209Yy12O1M9ZCptLSh3LWYqdi1kKnYtZiptKTtnPXgtUztoPXgtZztIWzBdPXgtKGcraCkrKGgtUyk7Xz1iK2c7aD1fLWI7eT1iLShfLWgpKyhnLWgpO2c9eS13O2g9eS1nO0hbMV09eS0oZytoKSsoaC13KTtNPV8rZztoPU0tXztIWzJdPV8tKE0taCkrKGctaCk7SFszXT1NO3ZhciBrPUkoUixHLDQsSCxWKTtyZXR1cm4gVltrLTFdfWZ1bmN0aW9uIE0oZSx0LHIsbixpLG8pe3ZhciBhPSh0LW8pKihyLWkpO3ZhciBzPShlLWkpKihuLW8pO3ZhciB1PWEtcztpZihhPT09MHx8cz09PTB8fGE+MCE9PXM+MCl7cmV0dXJuIHV9dmFyIGM9TWF0aC5hYnMoYStzKTtpZihNYXRoLmFicyh1KT49dypjKXtyZXR1cm4gdX1yZXR1cm4tUyhlLHQscixuLGksbyxjKX1mdW5jdGlvbiBDKGUsdCxyKXt2YXIgbj1NKGVbMF0sZVsxXSx0WzBdLHRbMV0sclswXSxyWzFdKTtpZihuPjApe3JldHVybi0xfWlmKG48MCl7cmV0dXJuIDF9cmV0dXJuIDB9ZnVuY3Rpb24gVChlLHQpe3ZhciByPWUucG9pbnQ7dmFyIG49dC5wb2ludDtpZihyWzBdPm5bMF0pe3JldHVybiAxfWlmKHJbMF08blswXSl7cmV0dXJuLTF9aWYoclsxXSE9PW5bMV0pe3JldHVybiByWzFdPm5bMV0/MTotMX1yZXR1cm4gRShlLHQscil9ZnVuY3Rpb24gRShlLHQscixuKXtpZihlLmxlZnQhPT10LmxlZnQpe3JldHVybiBlLmxlZnQ/MTotMX1pZihDKHIsZS5vdGhlckV2ZW50LnBvaW50LHQub3RoZXJFdmVudC5wb2ludCkhPT0wKXtyZXR1cm4hZS5pc0JlbG93KHQub3RoZXJFdmVudC5wb2ludCk/MTotMX1yZXR1cm4hZS5pc1N1YmplY3QmJnQuaXNTdWJqZWN0PzE6LTF9ZnVuY3Rpb24gTyhlLHQscil7dmFyIG49bmV3IGQodCxmYWxzZSxlLGUuaXNTdWJqZWN0KTt2YXIgaT1uZXcgZCh0LHRydWUsZS5vdGhlckV2ZW50LGUuaXNTdWJqZWN0KTtpZih2KGUucG9pbnQsZS5vdGhlckV2ZW50LnBvaW50KSl7Y29uc29sZS53YXJuKFwid2hhdCBpcyB0aGF0LCBhIGNvbGxhcHNlZCBzZWdtZW50P1wiLGUpfW4uY29udG91cklkPWkuY29udG91cklkPWUuY29udG91cklkO2lmKFQoaSxlLm90aGVyRXZlbnQpPjApe2Uub3RoZXJFdmVudC5sZWZ0PXRydWU7aS5sZWZ0PWZhbHNlfWUub3RoZXJFdmVudC5vdGhlckV2ZW50PWk7ZS5vdGhlckV2ZW50PW47ci5wdXNoKGkpO3IucHVzaChuKTtyZXR1cm4gcn1mdW5jdGlvbiBQKGUsdCl7cmV0dXJuIGVbMF0qdFsxXS1lWzFdKnRbMF19ZnVuY3Rpb24gQShlLHQpe3JldHVybiBlWzBdKnRbMF0rZVsxXSp0WzFdfWZ1bmN0aW9uIGooZSx0LHIsbixpKXt2YXIgbz1bdFswXS1lWzBdLHRbMV0tZVsxXV07dmFyIGE9W25bMF0tclswXSxuWzFdLXJbMV1dO2Z1bmN0aW9uIHMoZSx0LHIpe3JldHVybltlWzBdK3QqclswXSxlWzFdK3QqclsxXV19dmFyIHU9W3JbMF0tZVswXSxyWzFdLWVbMV1dO3ZhciBjPVAobyxhKTt2YXIgbD1jKmM7dmFyIGg9QShvLG8pO2lmKGw+MCl7dmFyIHA9UCh1LGEpL2M7aWYocDwwfHxwPjEpe3JldHVybiBudWxsfXZhciBmPVAodSxvKS9jO2lmKGY8MHx8Zj4xKXtyZXR1cm4gbnVsbH1pZihwPT09MHx8cD09PTEpe3JldHVybiBpP251bGw6W3MoZSxwLG8pXX1pZihmPT09MHx8Zj09PTEpe3JldHVybiBpP251bGw6W3MocixmLGEpXX1yZXR1cm5bcyhlLHAsbyldfWM9UCh1LG8pO2w9YypjO2lmKGw+MCl7cmV0dXJuIG51bGx9dmFyIGQ9QShvLHUpL2g7dmFyIHY9ZCtBKG8sYSkvaDt2YXIgbT1NYXRoLm1pbihkLHYpO3ZhciBnPU1hdGgubWF4KGQsdik7aWYobTw9MSYmZz49MCl7aWYobT09PTEpe3JldHVybiBpP251bGw6W3MoZSxtPjA/bTowLG8pXX1pZihnPT09MCl7cmV0dXJuIGk/bnVsbDpbcyhlLGc8MT9nOjEsbyldfWlmKGkmJm09PT0wJiZnPT09MSl7cmV0dXJuIG51bGx9cmV0dXJuW3MoZSxtPjA/bTowLG8pLHMoZSxnPDE/ZzoxLG8pXX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBSKGUsdCxyKXt2YXIgbj1qKGUucG9pbnQsZS5vdGhlckV2ZW50LnBvaW50LHQucG9pbnQsdC5vdGhlckV2ZW50LnBvaW50KTt2YXIgaT1uP24ubGVuZ3RoOjA7aWYoaT09PTApe3JldHVybiAwfWlmKGk9PT0xJiYodihlLnBvaW50LHQucG9pbnQpfHx2KGUub3RoZXJFdmVudC5wb2ludCx0Lm90aGVyRXZlbnQucG9pbnQpKSl7cmV0dXJuIDB9aWYoaT09PTImJmUuaXNTdWJqZWN0PT09dC5pc1N1YmplY3Qpe3JldHVybiAwfWlmKGk9PT0xKXtpZighdihlLnBvaW50LG5bMF0pJiYhdihlLm90aGVyRXZlbnQucG9pbnQsblswXSkpe08oZSxuWzBdLHIpfWlmKCF2KHQucG9pbnQsblswXSkmJiF2KHQub3RoZXJFdmVudC5wb2ludCxuWzBdKSl7Tyh0LG5bMF0scil9cmV0dXJuIDF9dmFyIG89W107dmFyIGE9ZmFsc2U7dmFyIHM9ZmFsc2U7aWYodihlLnBvaW50LHQucG9pbnQpKXthPXRydWV9ZWxzZSBpZihUKGUsdCk9PT0xKXtvLnB1c2godCxlKX1lbHNle28ucHVzaChlLHQpfWlmKHYoZS5vdGhlckV2ZW50LnBvaW50LHQub3RoZXJFdmVudC5wb2ludCkpe3M9dHJ1ZX1lbHNlIGlmKFQoZS5vdGhlckV2ZW50LHQub3RoZXJFdmVudCk9PT0xKXtvLnB1c2godC5vdGhlckV2ZW50LGUub3RoZXJFdmVudCl9ZWxzZXtvLnB1c2goZS5vdGhlckV2ZW50LHQub3RoZXJFdmVudCl9aWYoYSYmc3x8YSl7dC50eXBlPXU7ZS50eXBlPXQuaW5PdXQ9PT1lLmluT3V0P2g6cDtpZihhJiYhcyl7TyhvWzFdLm90aGVyRXZlbnQsb1swXS5wb2ludCxyKX1yZXR1cm4gMn1pZihzKXtPKG9bMF0sb1sxXS5wb2ludCxyKTtyZXR1cm4gM31pZihvWzBdIT09b1szXS5vdGhlckV2ZW50KXtPKG9bMF0sb1sxXS5wb2ludCxyKTtPKG9bMV0sb1syXS5wb2ludCxyKTtyZXR1cm4gM31PKG9bMF0sb1sxXS5wb2ludCxyKTtPKG9bM10ub3RoZXJFdmVudCxvWzJdLnBvaW50LHIpO3JldHVybiAzfWZ1bmN0aW9uIGsoZSx0KXtpZihlPT09dCl7cmV0dXJuIDB9aWYoQyhlLnBvaW50LGUub3RoZXJFdmVudC5wb2ludCx0LnBvaW50KSE9PTB8fEMoZS5wb2ludCxlLm90aGVyRXZlbnQucG9pbnQsdC5vdGhlckV2ZW50LnBvaW50KSE9PTApe2lmKHYoZS5wb2ludCx0LnBvaW50KSl7cmV0dXJuIGUuaXNCZWxvdyh0Lm90aGVyRXZlbnQucG9pbnQpPy0xOjF9aWYoZS5wb2ludFswXT09PXQucG9pbnRbMF0pe3JldHVybiBlLnBvaW50WzFdPHQucG9pbnRbMV0/LTE6MX1pZihUKGUsdCk9PT0xKXtyZXR1cm4gdC5pc0Fib3ZlKGUucG9pbnQpPy0xOjF9cmV0dXJuIGUuaXNCZWxvdyh0LnBvaW50KT8tMToxfWlmKGUuaXNTdWJqZWN0PT09dC5pc1N1YmplY3Qpe3ZhciByPWUucG9pbnQsbj10LnBvaW50O2lmKHJbMF09PT1uWzBdJiZyWzFdPT09blsxXSl7cj1lLm90aGVyRXZlbnQucG9pbnQ7bj10Lm90aGVyRXZlbnQucG9pbnQ7aWYoclswXT09PW5bMF0mJnJbMV09PT1uWzFdKXtyZXR1cm4gMH1lbHNle3JldHVybiBlLmNvbnRvdXJJZD50LmNvbnRvdXJJZD8xOi0xfX19ZWxzZXtyZXR1cm4gZS5pc1N1YmplY3Q/LTE6MX1yZXR1cm4gVChlLHQpPT09MT8xOi0xfWZ1bmN0aW9uIFUoZSx0LHIsbixpLG8pe3ZhciBhPW5ldyBtKGspO3ZhciBzPVtdO3ZhciB1PU1hdGgubWluKG5bMl0saVsyXSk7dmFyIGMsbCxoO3doaWxlKGUubGVuZ3RoIT09MCl7dmFyIHA9ZS5wb3AoKTtzLnB1c2gocCk7aWYobz09PWcmJnAucG9pbnRbMF0+dXx8bz09PV8mJnAucG9pbnRbMF0+blsyXSl7YnJlYWt9aWYocC5sZWZ0KXtsPWM9YS5pbnNlcnQocCk7aD1hLm1pbk5vZGUoKTtpZihjIT09aCl7Yz1hLnByZXYoYyl9ZWxzZXtjPW51bGx9bD1hLm5leHQobCk7dmFyIGY9Yz9jLmtleTpudWxsO3ZhciBkPXZvaWQgMDt5KHAsZixvKTtpZihsKXtpZihSKHAsbC5rZXksZSk9PT0yKXt5KHAsZixvKTt5KHAsbC5rZXksbyl9fWlmKGMpe2lmKFIoYy5rZXkscCxlKT09PTIpe3ZhciB2PWM7aWYodiE9PWgpe3Y9YS5wcmV2KHYpfWVsc2V7dj1udWxsfWQ9dj92LmtleTpudWxsO3koZixkLG8pO3kocCxmLG8pfX19ZWxzZXtwPXAub3RoZXJFdmVudDtsPWM9YS5maW5kKHApO2lmKGMmJmwpe2lmKGMhPT1oKXtjPWEucHJldihjKX1lbHNle2M9bnVsbH1sPWEubmV4dChsKTthLnJlbW92ZShwKTtpZihsJiZjKXtSKGMua2V5LGwua2V5LGUpfX19fXJldHVybiBzfXZhciBxPWZ1bmN0aW9uIGUoKXt0aGlzLnBvaW50cz1bXTt0aGlzLmhvbGVJZHM9W107dGhpcy5ob2xlT2Y9bnVsbDt0aGlzLmRlcHRoPW51bGx9O3EucHJvdG90eXBlLmlzRXh0ZXJpb3I9ZnVuY3Rpb24gZSgpe3JldHVybiB0aGlzLmhvbGVPZj09bnVsbH07ZnVuY3Rpb24gVyhlKXt2YXIgdCxyLG4saTt2YXIgbz1bXTtmb3Iocj0wLG49ZS5sZW5ndGg7cjxuO3IrKyl7dD1lW3JdO2lmKHQubGVmdCYmdC5pblJlc3VsdHx8IXQubGVmdCYmdC5vdGhlckV2ZW50LmluUmVzdWx0KXtvLnB1c2godCl9fXZhciBhPWZhbHNlO3doaWxlKCFhKXthPXRydWU7Zm9yKHI9MCxuPW8ubGVuZ3RoO3I8bjtyKyspe2lmKHIrMTxuJiZUKG9bcl0sb1tyKzFdKT09PTEpe2k9b1tyXTtvW3JdPW9bcisxXTtvW3IrMV09aTthPWZhbHNlfX19Zm9yKHI9MCxuPW8ubGVuZ3RoO3I8bjtyKyspe3Q9b1tyXTt0Lm90aGVyUG9zPXJ9Zm9yKHI9MCxuPW8ubGVuZ3RoO3I8bjtyKyspe3Q9b1tyXTtpZighdC5sZWZ0KXtpPXQub3RoZXJQb3M7dC5vdGhlclBvcz10Lm90aGVyRXZlbnQub3RoZXJQb3M7dC5vdGhlckV2ZW50Lm90aGVyUG9zPWl9fXJldHVybiBvfWZ1bmN0aW9uIFgoZSx0LHIsbil7dmFyIGk9ZSsxLG89dFtlXS5wb2ludCxhO3ZhciBzPXQubGVuZ3RoO2lmKGk8cyl7YT10W2ldLnBvaW50fXdoaWxlKGk8cyYmYVswXT09PW9bMF0mJmFbMV09PT1vWzFdKXtpZighcltpXSl7cmV0dXJuIGl9ZWxzZXtpKyt9YT10W2ldLnBvaW50fWk9ZS0xO3doaWxlKHJbaV0mJmk+bil7aS0tfXJldHVybiBpfWZ1bmN0aW9uIFkoZSx0LHIpe3ZhciBuPW5ldyBxO2lmKGUucHJldkluUmVzdWx0IT1udWxsKXt2YXIgaT1lLnByZXZJblJlc3VsdDt2YXIgbz1pLm91dHB1dENvbnRvdXJJZDt2YXIgYT1pLnJlc3VsdFRyYW5zaXRpb247aWYoYT4wKXt2YXIgcz10W29dO2lmKHMuaG9sZU9mIT1udWxsKXt2YXIgdT1zLmhvbGVPZjt0W3VdLmhvbGVJZHMucHVzaChyKTtuLmhvbGVPZj11O24uZGVwdGg9dFtvXS5kZXB0aH1lbHNle3Rbb10uaG9sZUlkcy5wdXNoKHIpO24uaG9sZU9mPW87bi5kZXB0aD10W29dLmRlcHRoKzF9fWVsc2V7bi5ob2xlT2Y9bnVsbDtuLmRlcHRoPXRbb10uZGVwdGh9fWVsc2V7bi5ob2xlT2Y9bnVsbDtuLmRlcHRoPTB9cmV0dXJuIG59ZnVuY3Rpb24gSyhlKXt2YXIgYSx0O3ZhciBzPVcoZSk7dmFyIHU9e307dmFyIGM9W107dmFyIHI9ZnVuY3Rpb24oKXtpZih1W2FdKXtyZXR1cm59dmFyIHQ9Yy5sZW5ndGg7dmFyIGU9WShzW2FdLGMsdCk7dmFyIHI9ZnVuY3Rpb24oZSl7dVtlXT10cnVlO3NbZV0ub3V0cHV0Q29udG91cklkPXR9O3ZhciBuPWE7dmFyIGk9YTt2YXIgbz1zW2FdLnBvaW50O2UucG9pbnRzLnB1c2gobyk7d2hpbGUodHJ1ZSl7cihuKTtuPXNbbl0ub3RoZXJQb3M7cihuKTtlLnBvaW50cy5wdXNoKHNbbl0ucG9pbnQpO249WChuLHMsdSxpKTtpZihuPT1pKXticmVha319Yy5wdXNoKGUpfTtmb3IoYT0wLHQ9cy5sZW5ndGg7YTx0O2ErKylyKCk7cmV0dXJuIGN9dmFyIFo9UTt2YXIgSj1RO2Z1bmN0aW9uIFEoZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBRKSl7cmV0dXJuIG5ldyBRKGUsdCl9dGhpcy5kYXRhPWV8fFtdO3RoaXMubGVuZ3RoPXRoaXMuZGF0YS5sZW5ndGg7dGhpcy5jb21wYXJlPXR8fGVlO2lmKHRoaXMubGVuZ3RoPjApe2Zvcih2YXIgcj0odGhpcy5sZW5ndGg+PjEpLTE7cj49MDtyLS0pe3RoaXMuX2Rvd24ocil9fX1mdW5jdGlvbiBlZShlLHQpe3JldHVybiBlPHQ/LTE6ZT50PzE6MH1RLnByb3RvdHlwZT17cHVzaDpmdW5jdGlvbihlKXt0aGlzLmRhdGEucHVzaChlKTt0aGlzLmxlbmd0aCsrO3RoaXMuX3VwKHRoaXMubGVuZ3RoLTEpfSxwb3A6ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aD09PTApe3JldHVybiB1bmRlZmluZWR9dmFyIGU9dGhpcy5kYXRhWzBdO3RoaXMubGVuZ3RoLS07aWYodGhpcy5sZW5ndGg+MCl7dGhpcy5kYXRhWzBdPXRoaXMuZGF0YVt0aGlzLmxlbmd0aF07dGhpcy5fZG93bigwKX10aGlzLmRhdGEucG9wKCk7cmV0dXJuIGV9LHBlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhWzBdfSxfdXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhO3ZhciByPXRoaXMuY29tcGFyZTt2YXIgbj10W2VdO3doaWxlKGU+MCl7dmFyIGk9ZS0xPj4xO3ZhciBvPXRbaV07aWYocihuLG8pPj0wKXticmVha310W2VdPW87ZT1pfXRbZV09bn0sX2Rvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhO3ZhciByPXRoaXMuY29tcGFyZTt2YXIgbj10aGlzLmxlbmd0aD4+MTt2YXIgaT10W2VdO3doaWxlKGU8bil7dmFyIG89KGU8PDEpKzE7dmFyIGE9bysxO3ZhciBzPXRbb107aWYoYTx0aGlzLmxlbmd0aCYmcih0W2FdLHMpPDApe289YTtzPXRbYV19aWYocihzLGkpPj0wKXticmVha310W2VdPXM7ZT1vfXRbZV09aX19O1ouZGVmYXVsdD1KO3ZhciB0ZT1NYXRoLm1heDt2YXIgcmU9TWF0aC5taW47dmFyIG5lPTA7ZnVuY3Rpb24gaWUoZSx0LHIsbixpLG8pe3ZhciBhLHMsdSxjLGwsaDtmb3IoYT0wLHM9ZS5sZW5ndGgtMTthPHM7YSsrKXt1PWVbYV07Yz1lW2ErMV07bD1uZXcgZCh1LGZhbHNlLHVuZGVmaW5lZCx0KTtoPW5ldyBkKGMsZmFsc2UsbCx0KTtsLm90aGVyRXZlbnQ9aDtpZih1WzBdPT09Y1swXSYmdVsxXT09PWNbMV0pe2NvbnRpbnVlfWwuY29udG91cklkPWguY29udG91cklkPXI7aWYoIW8pe2wuaXNFeHRlcmlvclJpbmc9ZmFsc2U7aC5pc0V4dGVyaW9yUmluZz1mYWxzZX1pZihUKGwsaCk+MCl7aC5sZWZ0PXRydWV9ZWxzZXtsLmxlZnQ9dHJ1ZX12YXIgcD11WzBdLGY9dVsxXTtpWzBdPXJlKGlbMF0scCk7aVsxXT1yZShpWzFdLGYpO2lbMl09dGUoaVsyXSxwKTtpWzNdPXRlKGlbM10sZik7bi5wdXNoKGwpO24ucHVzaChoKX19ZnVuY3Rpb24gb2UoZSx0LHIsbixpKXt2YXIgbz1uZXcgWihudWxsLFQpO3ZhciBhLHMsdSxjLGwsaDtmb3IodT0wLGM9ZS5sZW5ndGg7dTxjO3UrKyl7YT1lW3VdO2ZvcihsPTAsaD1hLmxlbmd0aDtsPGg7bCsrKXtzPWw9PT0wO2lmKHMpe25lKyt9aWUoYVtsXSx0cnVlLG5lLG8scixzKX19Zm9yKHU9MCxjPXQubGVuZ3RoO3U8Yzt1Kyspe2E9dFt1XTtmb3IobD0wLGg9YS5sZW5ndGg7bDxoO2wrKyl7cz1sPT09MDtpZihpPT09Xyl7cz1mYWxzZX1pZihzKXtuZSsrfWllKGFbbF0sZmFsc2UsbmUsbyxuLHMpfX1yZXR1cm4gb312YXIgYWU9W107ZnVuY3Rpb24gc2UoZSx0LHIpe3ZhciBuPW51bGw7aWYoZS5sZW5ndGgqdC5sZW5ndGg9PT0wKXtpZihyPT09Zyl7bj1hZX1lbHNlIGlmKHI9PT1fKXtuPWV9ZWxzZSBpZihyPT09c3x8cj09PWYpe249ZS5sZW5ndGg9PT0wP3Q6ZX19cmV0dXJuIG59ZnVuY3Rpb24gdWUoZSx0LHIsbixpKXt2YXIgbz1udWxsO2lmKHJbMF0+blsyXXx8blswXT5yWzJdfHxyWzFdPm5bM118fG5bMV0+clszXSl7aWYoaT09PWcpe289YWV9ZWxzZSBpZihpPT09Xyl7bz1lfWVsc2UgaWYoaT09PXN8fGk9PT1mKXtvPWUuY29uY2F0KHQpfX1yZXR1cm4gb31mdW5jdGlvbiBjZShlLHQscil7aWYodHlwZW9mIGVbMF1bMF1bMF09PT1cIm51bWJlclwiKXtlPVtlXX1pZih0eXBlb2YgdFswXVswXVswXT09PVwibnVtYmVyXCIpe3Q9W3RdfXZhciBuPXNlKGUsdCxyKTtpZihuKXtyZXR1cm4gbj09PWFlP251bGw6bn12YXIgaT1bSW5maW5pdHksSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eV07dmFyIG89W0luZmluaXR5LEluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHldO3ZhciBhPW9lKGUsdCxpLG8scik7bj11ZShlLHQsaSxvLHIpO2lmKG4pe3JldHVybiBuPT09YWU/bnVsbDpufXZhciBzPVUoYSxlLHQsaSxvLHIpO3ZhciB1PUsocyk7dmFyIGM9W107Zm9yKHZhciBsPTA7bDx1Lmxlbmd0aDtsKyspe3ZhciBoPXVbbF07aWYoaC5pc0V4dGVyaW9yKCkpe3ZhciBwPVtoLnBvaW50c107Zm9yKHZhciBmPTA7ZjxoLmhvbGVJZHMubGVuZ3RoO2YrKyl7dmFyIGQ9aC5ob2xlSWRzW2ZdO3AucHVzaCh1W2RdLnBvaW50cyl9Yy5wdXNoKHApfX1yZXR1cm4gY31mdW5jdGlvbiBsZShlLHQpe3JldHVybiBjZShlLHQscyl9ZnVuY3Rpb24gaGUoZSx0KXtyZXR1cm4gY2UoZSx0LF8pfWZ1bmN0aW9uIHBlKGUsdCl7cmV0dXJuIGNlKGUsdCxmKX1mdW5jdGlvbiBmZShlLHQpe3JldHVybiBjZShlLHQsZyl9dmFyIGRlPXtVTklPTjpzLERJRkZFUkVOQ0U6XyxJTlRFUlNFQ1RJT046ZyxYT1I6Zn07ZS5kaWZmPWhlO2UuaW50ZXJzZWN0aW9uPWZlO2Uub3BlcmF0aW9ucz1kZTtlLnVuaW9uPWxlO2UueG9yPXBlO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSl9KX0se31dLDIzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZShcIi4vbGliL3V0aWxzL2NvbW1vblwiKS5hc3NpZ247dmFyIGk9ZShcIi4vbGliL2RlZmxhdGVcIik7dmFyIG89ZShcIi4vbGliL2luZmxhdGVcIik7dmFyIGE9ZShcIi4vbGliL3psaWIvY29uc3RhbnRzXCIpO3ZhciBzPXt9O24ocyxpLG8sYSk7dC5leHBvcnRzPXN9LHtcIi4vbGliL2RlZmxhdGVcIjoyNCxcIi4vbGliL2luZmxhdGVcIjoyNSxcIi4vbGliL3V0aWxzL2NvbW1vblwiOjI2LFwiLi9saWIvemxpYi9jb25zdGFudHNcIjoyOX1dLDI0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGE9ZShcIi4vemxpYi9kZWZsYXRlXCIpO3ZhciBzPWUoXCIuL3V0aWxzL2NvbW1vblwiKTt2YXIgdT1lKFwiLi91dGlscy9zdHJpbmdzXCIpO3ZhciBpPWUoXCIuL3psaWIvbWVzc2FnZXNcIik7dmFyIG89ZShcIi4vemxpYi96c3RyZWFtXCIpO3ZhciBjPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIGw9MDt2YXIgaD00O3ZhciBwPTA7dmFyIGY9MTt2YXIgZD0yO3ZhciB2PS0xO3ZhciBtPTA7dmFyIGc9ODtmdW5jdGlvbiBfKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIF8pKXJldHVybiBuZXcgXyhlKTt0aGlzLm9wdGlvbnM9cy5hc3NpZ24oe2xldmVsOnYsbWV0aG9kOmcsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTptLHRvOlwiXCJ9LGV8fHt9KTt2YXIgdD10aGlzLm9wdGlvbnM7aWYodC5yYXcmJnQud2luZG93Qml0cz4wKXt0LndpbmRvd0JpdHM9LXQud2luZG93Qml0c31lbHNlIGlmKHQuZ3ppcCYmdC53aW5kb3dCaXRzPjAmJnQud2luZG93Qml0czwxNil7dC53aW5kb3dCaXRzKz0xNn10aGlzLmVycj0wO3RoaXMubXNnPVwiXCI7dGhpcy5lbmRlZD1mYWxzZTt0aGlzLmNodW5rcz1bXTt0aGlzLnN0cm09bmV3IG87dGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciByPWEuZGVmbGF0ZUluaXQyKHRoaXMuc3RybSx0LmxldmVsLHQubWV0aG9kLHQud2luZG93Qml0cyx0Lm1lbUxldmVsLHQuc3RyYXRlZ3kpO2lmKHIhPT1wKXt0aHJvdyBuZXcgRXJyb3IoaVtyXSl9aWYodC5oZWFkZXIpe2EuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sdC5oZWFkZXIpfWlmKHQuZGljdGlvbmFyeSl7dmFyIG47aWYodHlwZW9mIHQuZGljdGlvbmFyeT09PVwic3RyaW5nXCIpe249dS5zdHJpbmcyYnVmKHQuZGljdGlvbmFyeSl9ZWxzZSBpZihjLmNhbGwodC5kaWN0aW9uYXJ5KT09PVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIil7bj1uZXcgVWludDhBcnJheSh0LmRpY3Rpb25hcnkpfWVsc2V7bj10LmRpY3Rpb25hcnl9cj1hLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxuKTtpZihyIT09cCl7dGhyb3cgbmV3IEVycm9yKGlbcl0pfXRoaXMuX2RpY3Rfc2V0PXRydWV9fV8ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnN0cm07dmFyIG49dGhpcy5vcHRpb25zLmNodW5rU2l6ZTt2YXIgaSxvO2lmKHRoaXMuZW5kZWQpe3JldHVybiBmYWxzZX1vPXQ9PT1+fnQ/dDp0PT09dHJ1ZT9oOmw7aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXtyLmlucHV0PXUuc3RyaW5nMmJ1ZihlKX1lbHNlIGlmKGMuY2FsbChlKT09PVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIil7ci5pbnB1dD1uZXcgVWludDhBcnJheShlKX1lbHNle3IuaW5wdXQ9ZX1yLm5leHRfaW49MDtyLmF2YWlsX2luPXIuaW5wdXQubGVuZ3RoO2Rve2lmKHIuYXZhaWxfb3V0PT09MCl7ci5vdXRwdXQ9bmV3IHMuQnVmOChuKTtyLm5leHRfb3V0PTA7ci5hdmFpbF9vdXQ9bn1pPWEuZGVmbGF0ZShyLG8pO2lmKGkhPT1mJiZpIT09cCl7dGhpcy5vbkVuZChpKTt0aGlzLmVuZGVkPXRydWU7cmV0dXJuIGZhbHNlfWlmKHIuYXZhaWxfb3V0PT09MHx8ci5hdmFpbF9pbj09PTAmJihvPT09aHx8bz09PWQpKXtpZih0aGlzLm9wdGlvbnMudG89PT1cInN0cmluZ1wiKXt0aGlzLm9uRGF0YSh1LmJ1ZjJiaW5zdHJpbmcocy5zaHJpbmtCdWYoci5vdXRwdXQsci5uZXh0X291dCkpKX1lbHNle3RoaXMub25EYXRhKHMuc2hyaW5rQnVmKHIub3V0cHV0LHIubmV4dF9vdXQpKX19fXdoaWxlKChyLmF2YWlsX2luPjB8fHIuYXZhaWxfb3V0PT09MCkmJmkhPT1mKTtpZihvPT09aCl7aT1hLmRlZmxhdGVFbmQodGhpcy5zdHJtKTt0aGlzLm9uRW5kKGkpO3RoaXMuZW5kZWQ9dHJ1ZTtyZXR1cm4gaT09PXB9aWYobz09PWQpe3RoaXMub25FbmQocCk7ci5hdmFpbF9vdXQ9MDtyZXR1cm4gdHJ1ZX1yZXR1cm4gdHJ1ZX07Xy5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKGUpe3RoaXMuY2h1bmtzLnB1c2goZSl9O18ucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKGUpe2lmKGU9PT1wKXtpZih0aGlzLm9wdGlvbnMudG89PT1cInN0cmluZ1wiKXt0aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpfWVsc2V7dGhpcy5yZXN1bHQ9cy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKX19dGhpcy5jaHVua3M9W107dGhpcy5lcnI9ZTt0aGlzLm1zZz10aGlzLnN0cm0ubXNnfTtmdW5jdGlvbiBuKGUsdCl7dmFyIHI9bmV3IF8odCk7ci5wdXNoKGUsdHJ1ZSk7aWYoci5lcnIpe3Rocm93IHIubXNnfHxpW3IuZXJyXX1yZXR1cm4gci5yZXN1bHR9ZnVuY3Rpb24geShlLHQpe3Q9dHx8e307dC5yYXc9dHJ1ZTtyZXR1cm4gbihlLHQpfWZ1bmN0aW9uIGIoZSx0KXt0PXR8fHt9O3QuZ3ppcD10cnVlO3JldHVybiBuKGUsdCl9ci5EZWZsYXRlPV87ci5kZWZsYXRlPW47ci5kZWZsYXRlUmF3PXk7ci5nemlwPWJ9LHtcIi4vdXRpbHMvY29tbW9uXCI6MjYsXCIuL3V0aWxzL3N0cmluZ3NcIjoyNyxcIi4vemxpYi9kZWZsYXRlXCI6MzEsXCIuL3psaWIvbWVzc2FnZXNcIjozNixcIi4vemxpYi96c3RyZWFtXCI6Mzh9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBoPWUoXCIuL3psaWIvaW5mbGF0ZVwiKTt2YXIgcD1lKFwiLi91dGlscy9jb21tb25cIik7dmFyIGY9ZShcIi4vdXRpbHMvc3RyaW5nc1wiKTt2YXIgZD1lKFwiLi96bGliL2NvbnN0YW50c1wiKTt2YXIgbj1lKFwiLi96bGliL21lc3NhZ2VzXCIpO3ZhciBpPWUoXCIuL3psaWIvenN0cmVhbVwiKTt2YXIgbz1lKFwiLi96bGliL2d6aGVhZGVyXCIpO3ZhciB2PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZnVuY3Rpb24gYShlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBhKSlyZXR1cm4gbmV3IGEoZSk7dGhpcy5vcHRpb25zPXAuYXNzaWduKHtjaHVua1NpemU6MTYzODQsd2luZG93Qml0czowLHRvOlwiXCJ9LGV8fHt9KTt2YXIgdD10aGlzLm9wdGlvbnM7aWYodC5yYXcmJnQud2luZG93Qml0cz49MCYmdC53aW5kb3dCaXRzPDE2KXt0LndpbmRvd0JpdHM9LXQud2luZG93Qml0cztpZih0LndpbmRvd0JpdHM9PT0wKXt0LndpbmRvd0JpdHM9LTE1fX1pZih0LndpbmRvd0JpdHM+PTAmJnQud2luZG93Qml0czwxNiYmIShlJiZlLndpbmRvd0JpdHMpKXt0LndpbmRvd0JpdHMrPTMyfWlmKHQud2luZG93Qml0cz4xNSYmdC53aW5kb3dCaXRzPDQ4KXtpZigodC53aW5kb3dCaXRzJjE1KT09PTApe3Qud2luZG93Qml0c3w9MTV9fXRoaXMuZXJyPTA7dGhpcy5tc2c9XCJcIjt0aGlzLmVuZGVkPWZhbHNlO3RoaXMuY2h1bmtzPVtdO3RoaXMuc3RybT1uZXcgaTt0aGlzLnN0cm0uYXZhaWxfb3V0PTA7dmFyIHI9aC5pbmZsYXRlSW5pdDIodGhpcy5zdHJtLHQud2luZG93Qml0cyk7aWYociE9PWQuWl9PSyl7dGhyb3cgbmV3IEVycm9yKG5bcl0pfXRoaXMuaGVhZGVyPW5ldyBvO2guaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sdGhpcy5oZWFkZXIpO2lmKHQuZGljdGlvbmFyeSl7aWYodHlwZW9mIHQuZGljdGlvbmFyeT09PVwic3RyaW5nXCIpe3QuZGljdGlvbmFyeT1mLnN0cmluZzJidWYodC5kaWN0aW9uYXJ5KX1lbHNlIGlmKHYuY2FsbCh0LmRpY3Rpb25hcnkpPT09XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiKXt0LmRpY3Rpb25hcnk9bmV3IFVpbnQ4QXJyYXkodC5kaWN0aW9uYXJ5KX1pZih0LnJhdyl7cj1oLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0LmRpY3Rpb25hcnkpO2lmKHIhPT1kLlpfT0spe3Rocm93IG5ldyBFcnJvcihuW3JdKX19fX1hLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5zdHJtO3ZhciBuPXRoaXMub3B0aW9ucy5jaHVua1NpemU7dmFyIGk9dGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7dmFyIG8sYTt2YXIgcyx1LGM7dmFyIGw9ZmFsc2U7aWYodGhpcy5lbmRlZCl7cmV0dXJuIGZhbHNlfWE9dD09PX5+dD90OnQ9PT10cnVlP2QuWl9GSU5JU0g6ZC5aX05PX0ZMVVNIO2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7ci5pbnB1dD1mLmJpbnN0cmluZzJidWYoZSl9ZWxzZSBpZih2LmNhbGwoZSk9PT1cIltvYmplY3QgQXJyYXlCdWZmZXJdXCIpe3IuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoZSl9ZWxzZXtyLmlucHV0PWV9ci5uZXh0X2luPTA7ci5hdmFpbF9pbj1yLmlucHV0Lmxlbmd0aDtkb3tpZihyLmF2YWlsX291dD09PTApe3Iub3V0cHV0PW5ldyBwLkJ1Zjgobik7ci5uZXh0X291dD0wO3IuYXZhaWxfb3V0PW59bz1oLmluZmxhdGUocixkLlpfTk9fRkxVU0gpO2lmKG89PT1kLlpfTkVFRF9ESUNUJiZpKXtvPWguaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLGkpfWlmKG89PT1kLlpfQlVGX0VSUk9SJiZsPT09dHJ1ZSl7bz1kLlpfT0s7bD1mYWxzZX1pZihvIT09ZC5aX1NUUkVBTV9FTkQmJm8hPT1kLlpfT0spe3RoaXMub25FbmQobyk7dGhpcy5lbmRlZD10cnVlO3JldHVybiBmYWxzZX1pZihyLm5leHRfb3V0KXtpZihyLmF2YWlsX291dD09PTB8fG89PT1kLlpfU1RSRUFNX0VORHx8ci5hdmFpbF9pbj09PTAmJihhPT09ZC5aX0ZJTklTSHx8YT09PWQuWl9TWU5DX0ZMVVNIKSl7aWYodGhpcy5vcHRpb25zLnRvPT09XCJzdHJpbmdcIil7cz1mLnV0Zjhib3JkZXIoci5vdXRwdXQsci5uZXh0X291dCk7dT1yLm5leHRfb3V0LXM7Yz1mLmJ1ZjJzdHJpbmcoci5vdXRwdXQscyk7ci5uZXh0X291dD11O3IuYXZhaWxfb3V0PW4tdTtpZih1KXtwLmFycmF5U2V0KHIub3V0cHV0LHIub3V0cHV0LHMsdSwwKX10aGlzLm9uRGF0YShjKX1lbHNle3RoaXMub25EYXRhKHAuc2hyaW5rQnVmKHIub3V0cHV0LHIubmV4dF9vdXQpKX19fWlmKHIuYXZhaWxfaW49PT0wJiZyLmF2YWlsX291dD09PTApe2w9dHJ1ZX19d2hpbGUoKHIuYXZhaWxfaW4+MHx8ci5hdmFpbF9vdXQ9PT0wKSYmbyE9PWQuWl9TVFJFQU1fRU5EKTtpZihvPT09ZC5aX1NUUkVBTV9FTkQpe2E9ZC5aX0ZJTklTSH1pZihhPT09ZC5aX0ZJTklTSCl7bz1oLmluZmxhdGVFbmQodGhpcy5zdHJtKTt0aGlzLm9uRW5kKG8pO3RoaXMuZW5kZWQ9dHJ1ZTtyZXR1cm4gbz09PWQuWl9PS31pZihhPT09ZC5aX1NZTkNfRkxVU0gpe3RoaXMub25FbmQoZC5aX09LKTtyLmF2YWlsX291dD0wO3JldHVybiB0cnVlfXJldHVybiB0cnVlfTthLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oZSl7dGhpcy5jaHVua3MucHVzaChlKX07YS5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oZSl7aWYoZT09PWQuWl9PSyl7aWYodGhpcy5vcHRpb25zLnRvPT09XCJzdHJpbmdcIil7dGhpcy5yZXN1bHQ9dGhpcy5jaHVua3Muam9pbihcIlwiKX1lbHNle3RoaXMucmVzdWx0PXAuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyl9fXRoaXMuY2h1bmtzPVtdO3RoaXMuZXJyPWU7dGhpcy5tc2c9dGhpcy5zdHJtLm1zZ307ZnVuY3Rpb24gcyhlLHQpe3ZhciByPW5ldyBhKHQpO3IucHVzaChlLHRydWUpO2lmKHIuZXJyKXt0aHJvdyByLm1zZ3x8bltyLmVycl19cmV0dXJuIHIucmVzdWx0fWZ1bmN0aW9uIHUoZSx0KXt0PXR8fHt9O3QucmF3PXRydWU7cmV0dXJuIHMoZSx0KX1yLkluZmxhdGU9YTtyLmluZmxhdGU9cztyLmluZmxhdGVSYXc9dTtyLnVuZ3ppcD1zfSx7XCIuL3V0aWxzL2NvbW1vblwiOjI2LFwiLi91dGlscy9zdHJpbmdzXCI6MjcsXCIuL3psaWIvY29uc3RhbnRzXCI6MjksXCIuL3psaWIvZ3poZWFkZXJcIjozMixcIi4vemxpYi9pbmZsYXRlXCI6MzQsXCIuL3psaWIvbWVzc2FnZXNcIjozNixcIi4vemxpYi96c3RyZWFtXCI6Mzh9XSwyNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXR5cGVvZiBVaW50OEFycmF5IT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIFVpbnQxNkFycmF5IT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIEludDMyQXJyYXkhPT1cInVuZGVmaW5lZFwiO2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9ci5hc3NpZ249ZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3doaWxlKHQubGVuZ3RoKXt2YXIgcj10LnNoaWZ0KCk7aWYoIXIpe2NvbnRpbnVlfWlmKHR5cGVvZiByIT09XCJvYmplY3RcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihyK1wibXVzdCBiZSBub24tb2JqZWN0XCIpfWZvcih2YXIgbiBpbiByKXtpZihpKHIsbikpe2Vbbl09cltuXX19fXJldHVybiBlfTtyLnNocmlua0J1Zj1mdW5jdGlvbihlLHQpe2lmKGUubGVuZ3RoPT09dCl7cmV0dXJuIGV9aWYoZS5zdWJhcnJheSl7cmV0dXJuIGUuc3ViYXJyYXkoMCx0KX1lLmxlbmd0aD10O3JldHVybiBlfTt2YXIgbz17YXJyYXlTZXQ6ZnVuY3Rpb24oZSx0LHIsbixpKXtpZih0LnN1YmFycmF5JiZlLnN1YmFycmF5KXtlLnNldCh0LnN1YmFycmF5KHIscituKSxpKTtyZXR1cm59Zm9yKHZhciBvPTA7bzxuO28rKyl7ZVtpK29dPXRbcitvXX19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGksbyxhO249MDtmb3IodD0wLHI9ZS5sZW5ndGg7dDxyO3QrKyl7bis9ZVt0XS5sZW5ndGh9YT1uZXcgVWludDhBcnJheShuKTtpPTA7Zm9yKHQ9MCxyPWUubGVuZ3RoO3Q8cjt0Kyspe289ZVt0XTthLnNldChvLGkpO2krPW8ubGVuZ3RofXJldHVybiBhfX07dmFyIGE9e2FycmF5U2V0OmZ1bmN0aW9uKGUsdCxyLG4saSl7Zm9yKHZhciBvPTA7bzxuO28rKyl7ZVtpK29dPXRbcitvXX19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oZSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGUpfX07ci5zZXRUeXBlZD1mdW5jdGlvbihlKXtpZihlKXtyLkJ1Zjg9VWludDhBcnJheTtyLkJ1ZjE2PVVpbnQxNkFycmF5O3IuQnVmMzI9SW50MzJBcnJheTtyLmFzc2lnbihyLG8pfWVsc2V7ci5CdWY4PUFycmF5O3IuQnVmMTY9QXJyYXk7ci5CdWYzMj1BcnJheTtyLmFzc2lnbihyLGEpfX07ci5zZXRUeXBlZChuKX0se31dLDI3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHU9ZShcIi4vY29tbW9uXCIpO3ZhciBpPXRydWU7dmFyIG89dHJ1ZTt0cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLFswXSl9Y2F0Y2goZSl7aT1mYWxzZX10cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KDEpKX1jYXRjaChlKXtvPWZhbHNlfXZhciBjPW5ldyB1LkJ1ZjgoMjU2KTtmb3IodmFyIG49MDtuPDI1NjtuKyspe2Nbbl09bj49MjUyPzY6bj49MjQ4PzU6bj49MjQwPzQ6bj49MjI0PzM6bj49MTkyPzI6MX1jWzI1NF09Y1syNTRdPTE7ci5zdHJpbmcyYnVmPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpLG8sYT1lLmxlbmd0aCxzPTA7Zm9yKGk9MDtpPGE7aSsrKXtyPWUuY2hhckNvZGVBdChpKTtpZigociY2NDUxMik9PT01NTI5NiYmaSsxPGEpe249ZS5jaGFyQ29kZUF0KGkrMSk7aWYoKG4mNjQ1MTIpPT09NTYzMjApe3I9NjU1MzYrKHItNTUyOTY8PDEwKSsobi01NjMyMCk7aSsrfX1zKz1yPDEyOD8xOnI8MjA0OD8yOnI8NjU1MzY/Mzo0fXQ9bmV3IHUuQnVmOChzKTtmb3Iobz0wLGk9MDtvPHM7aSsrKXtyPWUuY2hhckNvZGVBdChpKTtpZigociY2NDUxMik9PT01NTI5NiYmaSsxPGEpe249ZS5jaGFyQ29kZUF0KGkrMSk7aWYoKG4mNjQ1MTIpPT09NTYzMjApe3I9NjU1MzYrKHItNTUyOTY8PDEwKSsobi01NjMyMCk7aSsrfX1pZihyPDEyOCl7dFtvKytdPXJ9ZWxzZSBpZihyPDIwNDgpe3RbbysrXT0xOTJ8cj4+PjY7dFtvKytdPTEyOHxyJjYzfWVsc2UgaWYocjw2NTUzNil7dFtvKytdPTIyNHxyPj4+MTI7dFtvKytdPTEyOHxyPj4+NiY2Mzt0W28rK109MTI4fHImNjN9ZWxzZXt0W28rK109MjQwfHI+Pj4xODt0W28rK109MTI4fHI+Pj4xMiY2Mzt0W28rK109MTI4fHI+Pj42JjYzO3RbbysrXT0xMjh8ciY2M319cmV0dXJuIHR9O2Z1bmN0aW9uIGwoZSx0KXtpZih0PDY1NTM0KXtpZihlLnN1YmFycmF5JiZvfHwhZS5zdWJhcnJheSYmaSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx1LnNocmlua0J1ZihlLHQpKX19dmFyIHI9XCJcIjtmb3IodmFyIG49MDtuPHQ7bisrKXtyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pfXJldHVybiByfXIuYnVmMmJpbnN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gbChlLGUubGVuZ3RoKX07ci5iaW5zdHJpbmcyYnVmPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB1LkJ1ZjgoZS5sZW5ndGgpO2Zvcih2YXIgcj0wLG49dC5sZW5ndGg7cjxuO3IrKyl7dFtyXT1lLmNoYXJDb2RlQXQocil9cmV0dXJuIHR9O3IuYnVmMnN0cmluZz1mdW5jdGlvbihlLHQpe3ZhciByLG4saSxvO3ZhciBhPXR8fGUubGVuZ3RoO3ZhciBzPW5ldyBBcnJheShhKjIpO2ZvcihuPTAscj0wO3I8YTspe2k9ZVtyKytdO2lmKGk8MTI4KXtzW24rK109aTtjb250aW51ZX1vPWNbaV07aWYobz40KXtzW24rK109NjU1MzM7cis9by0xO2NvbnRpbnVlfWkmPW89PT0yPzMxOm89PT0zPzE1Ojc7d2hpbGUobz4xJiZyPGEpe2k9aTw8NnxlW3IrK10mNjM7by0tfWlmKG8+MSl7c1tuKytdPTY1NTMzO2NvbnRpbnVlfWlmKGk8NjU1MzYpe3NbbisrXT1pfWVsc2V7aS09NjU1MzY7c1tuKytdPTU1Mjk2fGk+PjEwJjEwMjM7c1tuKytdPTU2MzIwfGkmMTAyM319cmV0dXJuIGwocyxuKX07ci51dGY4Ym9yZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI7dD10fHxlLmxlbmd0aDtpZih0PmUubGVuZ3RoKXt0PWUubGVuZ3RofXI9dC0xO3doaWxlKHI+PTAmJihlW3JdJjE5Mik9PT0xMjgpe3ItLX1pZihyPDApe3JldHVybiB0fWlmKHI9PT0wKXtyZXR1cm4gdH1yZXR1cm4gcitjW2Vbcl1dPnQ/cjp0fX0se1wiLi9jb21tb25cIjoyNn1dLDI4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlLHQscixuKXt2YXIgaT1lJjY1NTM1fDAsbz1lPj4+MTYmNjU1MzV8MCxhPTA7d2hpbGUociE9PTApe2E9cj4yZTM/MmUzOnI7ci09YTtkb3tpPWkrdFtuKytdfDA7bz1vK2l8MH13aGlsZSgtLWEpO2klPTY1NTIxO28lPTY1NTIxfXJldHVybiBpfG88PDE2fDB9dC5leHBvcnRzPW59LHt9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fX0se31dLDMwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3ZhciBlLHQ9W107Zm9yKHZhciByPTA7cjwyNTY7cisrKXtlPXI7Zm9yKHZhciBuPTA7bjw4O24rKyl7ZT1lJjE/Mzk4ODI5MjM4NF5lPj4+MTplPj4+MX10W3JdPWV9cmV0dXJuIHR9dmFyIHM9bigpO2Z1bmN0aW9uIGkoZSx0LHIsbil7dmFyIGk9cyxvPW4rcjtlXj0tMTtmb3IodmFyIGE9bjthPG87YSsrKXtlPWU+Pj44XmlbKGVedFthXSkmMjU1XX1yZXR1cm4gZV4tMX10LmV4cG9ydHM9aX0se31dLDMxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGg9ZShcIi4uL3V0aWxzL2NvbW1vblwiKTt2YXIgYz1lKFwiLi90cmVlc1wiKTt2YXIgcD1lKFwiLi9hZGxlcjMyXCIpO3ZhciBsPWUoXCIuL2NyYzMyXCIpO3ZhciBuPWUoXCIuL21lc3NhZ2VzXCIpO3ZhciBmPTA7dmFyIGQ9MTt2YXIgdj0zO3ZhciBtPTQ7dmFyIGc9NTt2YXIgXz0wO3ZhciB5PTE7dmFyIGI9LTI7dmFyIGk9LTM7dmFyIHg9LTU7dmFyIHU9LTE7dmFyIG89MTt2YXIgdz0yO3ZhciBTPTM7dmFyIE09NDt2YXIgYT0wO3ZhciBzPTI7dmFyIEM9ODt2YXIgVD05O3ZhciBFPTE1O3ZhciBPPTg7dmFyIFA9Mjk7dmFyIEE9MjU2O3ZhciBqPUErMStQO3ZhciBSPTMwO3ZhciBrPTE5O3ZhciBMPTIqaisxO3ZhciBOPTE1O3ZhciBJPTM7dmFyIEQ9MjU4O3ZhciBCPUQrSSsxO3ZhciBGPTMyO3ZhciB6PTQyO3ZhciAkPTY5O3ZhciBHPTczO3ZhciBWPTkxO3ZhciBIPTEwMzt2YXIgVT0xMTM7dmFyIHE9NjY2O3ZhciBXPTE7dmFyIFg9Mjt2YXIgWT0zO3ZhciBLPTQ7dmFyIFo9MztmdW5jdGlvbiBKKGUsdCl7ZS5tc2c9blt0XTtyZXR1cm4gdH1mdW5jdGlvbiBRKGUpe3JldHVybihlPDwxKS0oZT40Pzk6MCl9ZnVuY3Rpb24gZWUoZSl7dmFyIHQ9ZS5sZW5ndGg7d2hpbGUoLS10Pj0wKXtlW3RdPTB9fWZ1bmN0aW9uIHRlKGUpe3ZhciB0PWUuc3RhdGU7dmFyIHI9dC5wZW5kaW5nO2lmKHI+ZS5hdmFpbF9vdXQpe3I9ZS5hdmFpbF9vdXR9aWYocj09PTApe3JldHVybn1oLmFycmF5U2V0KGUub3V0cHV0LHQucGVuZGluZ19idWYsdC5wZW5kaW5nX291dCxyLGUubmV4dF9vdXQpO2UubmV4dF9vdXQrPXI7dC5wZW5kaW5nX291dCs9cjtlLnRvdGFsX291dCs9cjtlLmF2YWlsX291dC09cjt0LnBlbmRpbmctPXI7aWYodC5wZW5kaW5nPT09MCl7dC5wZW5kaW5nX291dD0wfX1mdW5jdGlvbiByZShlLHQpe2MuX3RyX2ZsdXNoX2Jsb2NrKGUsZS5ibG9ja19zdGFydD49MD9lLmJsb2NrX3N0YXJ0Oi0xLGUuc3Ryc3RhcnQtZS5ibG9ja19zdGFydCx0KTtlLmJsb2NrX3N0YXJ0PWUuc3Ryc3RhcnQ7dGUoZS5zdHJtKX1mdW5jdGlvbiBuZShlLHQpe2UucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPXR9ZnVuY3Rpb24gaWUoZSx0KXtlLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXT10Pj4+OCYyNTU7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109dCYyNTV9ZnVuY3Rpb24gb2UoZSx0LHIsbil7dmFyIGk9ZS5hdmFpbF9pbjtpZihpPm4pe2k9bn1pZihpPT09MCl7cmV0dXJuIDB9ZS5hdmFpbF9pbi09aTtoLmFycmF5U2V0KHQsZS5pbnB1dCxlLm5leHRfaW4saSxyKTtpZihlLnN0YXRlLndyYXA9PT0xKXtlLmFkbGVyPXAoZS5hZGxlcix0LGkscil9ZWxzZSBpZihlLnN0YXRlLndyYXA9PT0yKXtlLmFkbGVyPWwoZS5hZGxlcix0LGkscil9ZS5uZXh0X2luKz1pO2UudG90YWxfaW4rPWk7cmV0dXJuIGl9ZnVuY3Rpb24gYWUoZSx0KXt2YXIgcj1lLm1heF9jaGFpbl9sZW5ndGg7dmFyIG49ZS5zdHJzdGFydDt2YXIgaTt2YXIgbzt2YXIgYT1lLnByZXZfbGVuZ3RoO3ZhciBzPWUubmljZV9tYXRjaDt2YXIgdT1lLnN0cnN0YXJ0PmUud19zaXplLUI/ZS5zdHJzdGFydC0oZS53X3NpemUtQik6MDt2YXIgYz1lLndpbmRvdzt2YXIgbD1lLndfbWFzazt2YXIgaD1lLnByZXY7dmFyIHA9ZS5zdHJzdGFydCtEO3ZhciBmPWNbbithLTFdO3ZhciBkPWNbbithXTtpZihlLnByZXZfbGVuZ3RoPj1lLmdvb2RfbWF0Y2gpe3I+Pj0yfWlmKHM+ZS5sb29rYWhlYWQpe3M9ZS5sb29rYWhlYWR9ZG97aT10O2lmKGNbaSthXSE9PWR8fGNbaSthLTFdIT09Znx8Y1tpXSE9PWNbbl18fGNbKytpXSE9PWNbbisxXSl7Y29udGludWV9bis9MjtpKys7ZG97fXdoaWxlKGNbKytuXT09PWNbKytpXSYmY1srK25dPT09Y1srK2ldJiZjWysrbl09PT1jWysraV0mJmNbKytuXT09PWNbKytpXSYmY1srK25dPT09Y1srK2ldJiZjWysrbl09PT1jWysraV0mJmNbKytuXT09PWNbKytpXSYmY1srK25dPT09Y1srK2ldJiZuPHApO289RC0ocC1uKTtuPXAtRDtpZihvPmEpe2UubWF0Y2hfc3RhcnQ9dDthPW87aWYobz49cyl7YnJlYWt9Zj1jW24rYS0xXTtkPWNbbithXX19d2hpbGUoKHQ9aFt0JmxdKT51JiYtLXIhPT0wKTtpZihhPD1lLmxvb2thaGVhZCl7cmV0dXJuIGF9cmV0dXJuIGUubG9va2FoZWFkfWZ1bmN0aW9uIHNlKGUpe3ZhciB0PWUud19zaXplO3ZhciByLG4saSxvLGE7ZG97bz1lLndpbmRvd19zaXplLWUubG9va2FoZWFkLWUuc3Ryc3RhcnQ7aWYoZS5zdHJzdGFydD49dCsodC1CKSl7aC5hcnJheVNldChlLndpbmRvdyxlLndpbmRvdyx0LHQsMCk7ZS5tYXRjaF9zdGFydC09dDtlLnN0cnN0YXJ0LT10O2UuYmxvY2tfc3RhcnQtPXQ7bj1lLmhhc2hfc2l6ZTtyPW47ZG97aT1lLmhlYWRbLS1yXTtlLmhlYWRbcl09aT49dD9pLXQ6MH13aGlsZSgtLW4pO249dDtyPW47ZG97aT1lLnByZXZbLS1yXTtlLnByZXZbcl09aT49dD9pLXQ6MH13aGlsZSgtLW4pO28rPXR9aWYoZS5zdHJtLmF2YWlsX2luPT09MCl7YnJlYWt9bj1vZShlLnN0cm0sZS53aW5kb3csZS5zdHJzdGFydCtlLmxvb2thaGVhZCxvKTtlLmxvb2thaGVhZCs9bjtpZihlLmxvb2thaGVhZCtlLmluc2VydD49SSl7YT1lLnN0cnN0YXJ0LWUuaW5zZXJ0O2UuaW5zX2g9ZS53aW5kb3dbYV07ZS5pbnNfaD0oZS5pbnNfaDw8ZS5oYXNoX3NoaWZ0XmUud2luZG93W2ErMV0pJmUuaGFzaF9tYXNrO3doaWxlKGUuaW5zZXJ0KXtlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbYStJLTFdKSZlLmhhc2hfbWFzaztlLnByZXZbYSZlLndfbWFza109ZS5oZWFkW2UuaW5zX2hdO2UuaGVhZFtlLmluc19oXT1hO2ErKztlLmluc2VydC0tO2lmKGUubG9va2FoZWFkK2UuaW5zZXJ0PEkpe2JyZWFrfX19fXdoaWxlKGUubG9va2FoZWFkPEImJmUuc3RybS5hdmFpbF9pbiE9PTApfWZ1bmN0aW9uIHVlKGUsdCl7dmFyIHI9NjU1MzU7aWYocj5lLnBlbmRpbmdfYnVmX3NpemUtNSl7cj1lLnBlbmRpbmdfYnVmX3NpemUtNX1mb3IoOzspe2lmKGUubG9va2FoZWFkPD0xKXtzZShlKTtpZihlLmxvb2thaGVhZD09PTAmJnQ9PT1mKXtyZXR1cm4gV31pZihlLmxvb2thaGVhZD09PTApe2JyZWFrfX1lLnN0cnN0YXJ0Kz1lLmxvb2thaGVhZDtlLmxvb2thaGVhZD0wO3ZhciBuPWUuYmxvY2tfc3RhcnQrcjtpZihlLnN0cnN0YXJ0PT09MHx8ZS5zdHJzdGFydD49bil7ZS5sb29rYWhlYWQ9ZS5zdHJzdGFydC1uO2Uuc3Ryc3RhcnQ9bjtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fWlmKGUuc3Ryc3RhcnQtZS5ibG9ja19zdGFydD49ZS53X3NpemUtQil7cmUoZSxmYWxzZSk7aWYoZS5zdHJtLmF2YWlsX291dD09PTApe3JldHVybiBXfX19ZS5pbnNlcnQ9MDtpZih0PT09bSl7cmUoZSx0cnVlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFl9cmV0dXJuIEt9aWYoZS5zdHJzdGFydD5lLmJsb2NrX3N0YXJ0KXtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fXJldHVybiBXfWZ1bmN0aW9uIGNlKGUsdCl7dmFyIHI7dmFyIG47Zm9yKDs7KXtpZihlLmxvb2thaGVhZDxCKXtzZShlKTtpZihlLmxvb2thaGVhZDxCJiZ0PT09Zil7cmV0dXJuIFd9aWYoZS5sb29rYWhlYWQ9PT0wKXticmVha319cj0wO2lmKGUubG9va2FoZWFkPj1JKXtlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCtJLTFdKSZlLmhhc2hfbWFzaztyPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF07ZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnR9aWYociE9PTAmJmUuc3Ryc3RhcnQtcjw9ZS53X3NpemUtQil7ZS5tYXRjaF9sZW5ndGg9YWUoZSxyKX1pZihlLm1hdGNoX2xlbmd0aD49SSl7bj1jLl90cl90YWxseShlLGUuc3Ryc3RhcnQtZS5tYXRjaF9zdGFydCxlLm1hdGNoX2xlbmd0aC1JKTtlLmxvb2thaGVhZC09ZS5tYXRjaF9sZW5ndGg7aWYoZS5tYXRjaF9sZW5ndGg8PWUubWF4X2xhenlfbWF0Y2gmJmUubG9va2FoZWFkPj1JKXtlLm1hdGNoX2xlbmd0aC0tO2Rve2Uuc3Ryc3RhcnQrKztlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCtJLTFdKSZlLmhhc2hfbWFzaztyPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF07ZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnR9d2hpbGUoLS1lLm1hdGNoX2xlbmd0aCE9PTApO2Uuc3Ryc3RhcnQrK31lbHNle2Uuc3Ryc3RhcnQrPWUubWF0Y2hfbGVuZ3RoO2UubWF0Y2hfbGVuZ3RoPTA7ZS5pbnNfaD1lLndpbmRvd1tlLnN0cnN0YXJ0XTtlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCsxXSkmZS5oYXNoX21hc2t9fWVsc2V7bj1jLl90cl90YWxseShlLDAsZS53aW5kb3dbZS5zdHJzdGFydF0pO2UubG9va2FoZWFkLS07ZS5zdHJzdGFydCsrfWlmKG4pe3JlKGUsZmFsc2UpO2lmKGUuc3RybS5hdmFpbF9vdXQ9PT0wKXtyZXR1cm4gV319fWUuaW5zZXJ0PWUuc3Ryc3RhcnQ8SS0xP2Uuc3Ryc3RhcnQ6SS0xO2lmKHQ9PT1tKXtyZShlLHRydWUpO2lmKGUuc3RybS5hdmFpbF9vdXQ9PT0wKXtyZXR1cm4gWX1yZXR1cm4gS31pZihlLmxhc3RfbGl0KXtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fXJldHVybiBYfWZ1bmN0aW9uIGxlKGUsdCl7dmFyIHI7dmFyIG47dmFyIGk7Zm9yKDs7KXtpZihlLmxvb2thaGVhZDxCKXtzZShlKTtpZihlLmxvb2thaGVhZDxCJiZ0PT09Zil7cmV0dXJuIFd9aWYoZS5sb29rYWhlYWQ9PT0wKXticmVha319cj0wO2lmKGUubG9va2FoZWFkPj1JKXtlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCtJLTFdKSZlLmhhc2hfbWFzaztyPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF07ZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnR9ZS5wcmV2X2xlbmd0aD1lLm1hdGNoX2xlbmd0aDtlLnByZXZfbWF0Y2g9ZS5tYXRjaF9zdGFydDtlLm1hdGNoX2xlbmd0aD1JLTE7aWYociE9PTAmJmUucHJldl9sZW5ndGg8ZS5tYXhfbGF6eV9tYXRjaCYmZS5zdHJzdGFydC1yPD1lLndfc2l6ZS1CKXtlLm1hdGNoX2xlbmd0aD1hZShlLHIpO2lmKGUubWF0Y2hfbGVuZ3RoPD01JiYoZS5zdHJhdGVneT09PW98fGUubWF0Y2hfbGVuZ3RoPT09SSYmZS5zdHJzdGFydC1lLm1hdGNoX3N0YXJ0PjQwOTYpKXtlLm1hdGNoX2xlbmd0aD1JLTF9fWlmKGUucHJldl9sZW5ndGg+PUkmJmUubWF0Y2hfbGVuZ3RoPD1lLnByZXZfbGVuZ3RoKXtpPWUuc3Ryc3RhcnQrZS5sb29rYWhlYWQtSTtuPWMuX3RyX3RhbGx5KGUsZS5zdHJzdGFydC0xLWUucHJldl9tYXRjaCxlLnByZXZfbGVuZ3RoLUkpO2UubG9va2FoZWFkLT1lLnByZXZfbGVuZ3RoLTE7ZS5wcmV2X2xlbmd0aC09Mjtkb3tpZigrK2Uuc3Ryc3RhcnQ8PWkpe2UuaW5zX2g9KGUuaW5zX2g8PGUuaGFzaF9zaGlmdF5lLndpbmRvd1tlLnN0cnN0YXJ0K0ktMV0pJmUuaGFzaF9tYXNrO3I9ZS5wcmV2W2Uuc3Ryc3RhcnQmZS53X21hc2tdPWUuaGVhZFtlLmluc19oXTtlLmhlYWRbZS5pbnNfaF09ZS5zdHJzdGFydH19d2hpbGUoLS1lLnByZXZfbGVuZ3RoIT09MCk7ZS5tYXRjaF9hdmFpbGFibGU9MDtlLm1hdGNoX2xlbmd0aD1JLTE7ZS5zdHJzdGFydCsrO2lmKG4pe3JlKGUsZmFsc2UpO2lmKGUuc3RybS5hdmFpbF9vdXQ9PT0wKXtyZXR1cm4gV319fWVsc2UgaWYoZS5tYXRjaF9hdmFpbGFibGUpe249Yy5fdHJfdGFsbHkoZSwwLGUud2luZG93W2Uuc3Ryc3RhcnQtMV0pO2lmKG4pe3JlKGUsZmFsc2UpfWUuc3Ryc3RhcnQrKztlLmxvb2thaGVhZC0tO2lmKGUuc3RybS5hdmFpbF9vdXQ9PT0wKXtyZXR1cm4gV319ZWxzZXtlLm1hdGNoX2F2YWlsYWJsZT0xO2Uuc3Ryc3RhcnQrKztlLmxvb2thaGVhZC0tfX1pZihlLm1hdGNoX2F2YWlsYWJsZSl7bj1jLl90cl90YWxseShlLDAsZS53aW5kb3dbZS5zdHJzdGFydC0xXSk7ZS5tYXRjaF9hdmFpbGFibGU9MH1lLmluc2VydD1lLnN0cnN0YXJ0PEktMT9lLnN0cnN0YXJ0OkktMTtpZih0PT09bSl7cmUoZSx0cnVlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFl9cmV0dXJuIEt9aWYoZS5sYXN0X2xpdCl7cmUoZSxmYWxzZSk7aWYoZS5zdHJtLmF2YWlsX291dD09PTApe3JldHVybiBXfX1yZXR1cm4gWH1mdW5jdGlvbiBoZShlLHQpe3ZhciByO3ZhciBuO3ZhciBpLG87dmFyIGE9ZS53aW5kb3c7Zm9yKDs7KXtpZihlLmxvb2thaGVhZDw9RCl7c2UoZSk7aWYoZS5sb29rYWhlYWQ8PUQmJnQ9PT1mKXtyZXR1cm4gV31pZihlLmxvb2thaGVhZD09PTApe2JyZWFrfX1lLm1hdGNoX2xlbmd0aD0wO2lmKGUubG9va2FoZWFkPj1JJiZlLnN0cnN0YXJ0PjApe2k9ZS5zdHJzdGFydC0xO249YVtpXTtpZihuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldKXtvPWUuc3Ryc3RhcnQrRDtkb3t9d2hpbGUobj09PWFbKytpXSYmbj09PWFbKytpXSYmbj09PWFbKytpXSYmbj09PWFbKytpXSYmbj09PWFbKytpXSYmbj09PWFbKytpXSYmbj09PWFbKytpXSYmbj09PWFbKytpXSYmaTxvKTtlLm1hdGNoX2xlbmd0aD1ELShvLWkpO2lmKGUubWF0Y2hfbGVuZ3RoPmUubG9va2FoZWFkKXtlLm1hdGNoX2xlbmd0aD1lLmxvb2thaGVhZH19fWlmKGUubWF0Y2hfbGVuZ3RoPj1JKXtyPWMuX3RyX3RhbGx5KGUsMSxlLm1hdGNoX2xlbmd0aC1JKTtlLmxvb2thaGVhZC09ZS5tYXRjaF9sZW5ndGg7ZS5zdHJzdGFydCs9ZS5tYXRjaF9sZW5ndGg7ZS5tYXRjaF9sZW5ndGg9MH1lbHNle3I9Yy5fdHJfdGFsbHkoZSwwLGUud2luZG93W2Uuc3Ryc3RhcnRdKTtlLmxvb2thaGVhZC0tO2Uuc3Ryc3RhcnQrK31pZihyKXtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fX1lLmluc2VydD0wO2lmKHQ9PT1tKXtyZShlLHRydWUpO2lmKGUuc3RybS5hdmFpbF9vdXQ9PT0wKXtyZXR1cm4gWX1yZXR1cm4gS31pZihlLmxhc3RfbGl0KXtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fXJldHVybiBYfWZ1bmN0aW9uIHBlKGUsdCl7dmFyIHI7Zm9yKDs7KXtpZihlLmxvb2thaGVhZD09PTApe3NlKGUpO2lmKGUubG9va2FoZWFkPT09MCl7aWYodD09PWYpe3JldHVybiBXfWJyZWFrfX1lLm1hdGNoX2xlbmd0aD0wO3I9Yy5fdHJfdGFsbHkoZSwwLGUud2luZG93W2Uuc3Ryc3RhcnRdKTtlLmxvb2thaGVhZC0tO2Uuc3Ryc3RhcnQrKztpZihyKXtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fX1lLmluc2VydD0wO2lmKHQ9PT1tKXtyZShlLHRydWUpO2lmKGUuc3RybS5hdmFpbF9vdXQ9PT0wKXtyZXR1cm4gWX1yZXR1cm4gS31pZihlLmxhc3RfbGl0KXtyZShlLGZhbHNlKTtpZihlLnN0cm0uYXZhaWxfb3V0PT09MCl7cmV0dXJuIFd9fXJldHVybiBYfWZ1bmN0aW9uIGZlKGUsdCxyLG4saSl7dGhpcy5nb29kX2xlbmd0aD1lO3RoaXMubWF4X2xhenk9dDt0aGlzLm5pY2VfbGVuZ3RoPXI7dGhpcy5tYXhfY2hhaW49bjt0aGlzLmZ1bmM9aX12YXIgZGU7ZGU9W25ldyBmZSgwLDAsMCwwLHVlKSxuZXcgZmUoNCw0LDgsNCxjZSksbmV3IGZlKDQsNSwxNiw4LGNlKSxuZXcgZmUoNCw2LDMyLDMyLGNlKSxuZXcgZmUoNCw0LDE2LDE2LGxlKSxuZXcgZmUoOCwxNiwzMiwzMixsZSksbmV3IGZlKDgsMTYsMTI4LDEyOCxsZSksbmV3IGZlKDgsMzIsMTI4LDI1NixsZSksbmV3IGZlKDMyLDEyOCwyNTgsMTAyNCxsZSksbmV3IGZlKDMyLDI1OCwyNTgsNDA5NixsZSldO2Z1bmN0aW9uIHZlKGUpe2Uud2luZG93X3NpemU9MiplLndfc2l6ZTtlZShlLmhlYWQpO2UubWF4X2xhenlfbWF0Y2g9ZGVbZS5sZXZlbF0ubWF4X2xhenk7ZS5nb29kX21hdGNoPWRlW2UubGV2ZWxdLmdvb2RfbGVuZ3RoO2UubmljZV9tYXRjaD1kZVtlLmxldmVsXS5uaWNlX2xlbmd0aDtlLm1heF9jaGFpbl9sZW5ndGg9ZGVbZS5sZXZlbF0ubWF4X2NoYWluO2Uuc3Ryc3RhcnQ9MDtlLmJsb2NrX3N0YXJ0PTA7ZS5sb29rYWhlYWQ9MDtlLmluc2VydD0wO2UubWF0Y2hfbGVuZ3RoPWUucHJldl9sZW5ndGg9SS0xO2UubWF0Y2hfYXZhaWxhYmxlPTA7ZS5pbnNfaD0wfWZ1bmN0aW9uIG1lKCl7dGhpcy5zdHJtPW51bGw7dGhpcy5zdGF0dXM9MDt0aGlzLnBlbmRpbmdfYnVmPW51bGw7dGhpcy5wZW5kaW5nX2J1Zl9zaXplPTA7dGhpcy5wZW5kaW5nX291dD0wO3RoaXMucGVuZGluZz0wO3RoaXMud3JhcD0wO3RoaXMuZ3poZWFkPW51bGw7dGhpcy5nemluZGV4PTA7dGhpcy5tZXRob2Q9Qzt0aGlzLmxhc3RfZmx1c2g9LTE7dGhpcy53X3NpemU9MDt0aGlzLndfYml0cz0wO3RoaXMud19tYXNrPTA7dGhpcy53aW5kb3c9bnVsbDt0aGlzLndpbmRvd19zaXplPTA7dGhpcy5wcmV2PW51bGw7dGhpcy5oZWFkPW51bGw7dGhpcy5pbnNfaD0wO3RoaXMuaGFzaF9zaXplPTA7dGhpcy5oYXNoX2JpdHM9MDt0aGlzLmhhc2hfbWFzaz0wO3RoaXMuaGFzaF9zaGlmdD0wO3RoaXMuYmxvY2tfc3RhcnQ9MDt0aGlzLm1hdGNoX2xlbmd0aD0wO3RoaXMucHJldl9tYXRjaD0wO3RoaXMubWF0Y2hfYXZhaWxhYmxlPTA7dGhpcy5zdHJzdGFydD0wO3RoaXMubWF0Y2hfc3RhcnQ9MDt0aGlzLmxvb2thaGVhZD0wO3RoaXMucHJldl9sZW5ndGg9MDt0aGlzLm1heF9jaGFpbl9sZW5ndGg9MDt0aGlzLm1heF9sYXp5X21hdGNoPTA7dGhpcy5sZXZlbD0wO3RoaXMuc3RyYXRlZ3k9MDt0aGlzLmdvb2RfbWF0Y2g9MDt0aGlzLm5pY2VfbWF0Y2g9MDt0aGlzLmR5bl9sdHJlZT1uZXcgaC5CdWYxNihMKjIpO3RoaXMuZHluX2R0cmVlPW5ldyBoLkJ1ZjE2KCgyKlIrMSkqMik7dGhpcy5ibF90cmVlPW5ldyBoLkJ1ZjE2KCgyKmsrMSkqMik7ZWUodGhpcy5keW5fbHRyZWUpO2VlKHRoaXMuZHluX2R0cmVlKTtlZSh0aGlzLmJsX3RyZWUpO3RoaXMubF9kZXNjPW51bGw7dGhpcy5kX2Rlc2M9bnVsbDt0aGlzLmJsX2Rlc2M9bnVsbDt0aGlzLmJsX2NvdW50PW5ldyBoLkJ1ZjE2KE4rMSk7dGhpcy5oZWFwPW5ldyBoLkJ1ZjE2KDIqaisxKTtlZSh0aGlzLmhlYXApO3RoaXMuaGVhcF9sZW49MDt0aGlzLmhlYXBfbWF4PTA7dGhpcy5kZXB0aD1uZXcgaC5CdWYxNigyKmorMSk7ZWUodGhpcy5kZXB0aCk7dGhpcy5sX2J1Zj0wO3RoaXMubGl0X2J1ZnNpemU9MDt0aGlzLmxhc3RfbGl0PTA7dGhpcy5kX2J1Zj0wO3RoaXMub3B0X2xlbj0wO3RoaXMuc3RhdGljX2xlbj0wO3RoaXMubWF0Y2hlcz0wO3RoaXMuaW5zZXJ0PTA7dGhpcy5iaV9idWY9MDt0aGlzLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gZ2UoZSl7dmFyIHQ7aWYoIWV8fCFlLnN0YXRlKXtyZXR1cm4gSihlLGIpfWUudG90YWxfaW49ZS50b3RhbF9vdXQ9MDtlLmRhdGFfdHlwZT1zO3Q9ZS5zdGF0ZTt0LnBlbmRpbmc9MDt0LnBlbmRpbmdfb3V0PTA7aWYodC53cmFwPDApe3Qud3JhcD0tdC53cmFwfXQuc3RhdHVzPXQud3JhcD96OlU7ZS5hZGxlcj10LndyYXA9PT0yPzA6MTt0Lmxhc3RfZmx1c2g9ZjtjLl90cl9pbml0KHQpO3JldHVybiBffWZ1bmN0aW9uIF9lKGUpe3ZhciB0PWdlKGUpO2lmKHQ9PT1fKXt2ZShlLnN0YXRlKX1yZXR1cm4gdH1mdW5jdGlvbiB5ZShlLHQpe2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIGJ9aWYoZS5zdGF0ZS53cmFwIT09Mil7cmV0dXJuIGJ9ZS5zdGF0ZS5nemhlYWQ9dDtyZXR1cm4gX31mdW5jdGlvbiBiZShlLHQscixuLGksbyl7aWYoIWUpe3JldHVybiBifXZhciBhPTE7aWYodD09PXUpe3Q9Nn1pZihuPDApe2E9MDtuPS1ufWVsc2UgaWYobj4xNSl7YT0yO24tPTE2fWlmKGk8MXx8aT5UfHxyIT09Q3x8bjw4fHxuPjE1fHx0PDB8fHQ+OXx8bzwwfHxvPk0pe3JldHVybiBKKGUsYil9aWYobj09PTgpe249OX12YXIgcz1uZXcgbWU7ZS5zdGF0ZT1zO3Muc3RybT1lO3Mud3JhcD1hO3MuZ3poZWFkPW51bGw7cy53X2JpdHM9bjtzLndfc2l6ZT0xPDxzLndfYml0cztzLndfbWFzaz1zLndfc2l6ZS0xO3MuaGFzaF9iaXRzPWkrNztzLmhhc2hfc2l6ZT0xPDxzLmhhc2hfYml0cztzLmhhc2hfbWFzaz1zLmhhc2hfc2l6ZS0xO3MuaGFzaF9zaGlmdD1+figocy5oYXNoX2JpdHMrSS0xKS9JKTtzLndpbmRvdz1uZXcgaC5CdWY4KHMud19zaXplKjIpO3MuaGVhZD1uZXcgaC5CdWYxNihzLmhhc2hfc2l6ZSk7cy5wcmV2PW5ldyBoLkJ1ZjE2KHMud19zaXplKTtzLmxpdF9idWZzaXplPTE8PGkrNjtzLnBlbmRpbmdfYnVmX3NpemU9cy5saXRfYnVmc2l6ZSo0O3MucGVuZGluZ19idWY9bmV3IGguQnVmOChzLnBlbmRpbmdfYnVmX3NpemUpO3MuZF9idWY9MSpzLmxpdF9idWZzaXplO3MubF9idWY9KDErMikqcy5saXRfYnVmc2l6ZTtzLmxldmVsPXQ7cy5zdHJhdGVneT1vO3MubWV0aG9kPXI7cmV0dXJuIF9lKGUpfWZ1bmN0aW9uIHhlKGUsdCl7cmV0dXJuIGJlKGUsdCxDLEUsTyxhKX1mdW5jdGlvbiB3ZShlLHQpe3ZhciByLG47dmFyIGksbztpZighZXx8IWUuc3RhdGV8fHQ+Z3x8dDwwKXtyZXR1cm4gZT9KKGUsYik6Yn1uPWUuc3RhdGU7aWYoIWUub3V0cHV0fHwhZS5pbnB1dCYmZS5hdmFpbF9pbiE9PTB8fG4uc3RhdHVzPT09cSYmdCE9PW0pe3JldHVybiBKKGUsZS5hdmFpbF9vdXQ9PT0wP3g6Yil9bi5zdHJtPWU7cj1uLmxhc3RfZmx1c2g7bi5sYXN0X2ZsdXNoPXQ7aWYobi5zdGF0dXM9PT16KXtpZihuLndyYXA9PT0yKXtlLmFkbGVyPTA7bmUobiwzMSk7bmUobiwxMzkpO25lKG4sOCk7aWYoIW4uZ3poZWFkKXtuZShuLDApO25lKG4sMCk7bmUobiwwKTtuZShuLDApO25lKG4sMCk7bmUobixuLmxldmVsPT09OT8yOm4uc3RyYXRlZ3k+PXd8fG4ubGV2ZWw8Mj80OjApO25lKG4sWik7bi5zdGF0dXM9VX1lbHNle25lKG4sKG4uZ3poZWFkLnRleHQ/MTowKSsobi5nemhlYWQuaGNyYz8yOjApKyghbi5nemhlYWQuZXh0cmE/MDo0KSsoIW4uZ3poZWFkLm5hbWU/MDo4KSsoIW4uZ3poZWFkLmNvbW1lbnQ/MDoxNikpO25lKG4sbi5nemhlYWQudGltZSYyNTUpO25lKG4sbi5nemhlYWQudGltZT4+OCYyNTUpO25lKG4sbi5nemhlYWQudGltZT4+MTYmMjU1KTtuZShuLG4uZ3poZWFkLnRpbWU+PjI0JjI1NSk7bmUobixuLmxldmVsPT09OT8yOm4uc3RyYXRlZ3k+PXd8fG4ubGV2ZWw8Mj80OjApO25lKG4sbi5nemhlYWQub3MmMjU1KTtpZihuLmd6aGVhZC5leHRyYSYmbi5nemhlYWQuZXh0cmEubGVuZ3RoKXtuZShuLG4uZ3poZWFkLmV4dHJhLmxlbmd0aCYyNTUpO25lKG4sbi5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSl9aWYobi5nemhlYWQuaGNyYyl7ZS5hZGxlcj1sKGUuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmcsMCl9bi5nemluZGV4PTA7bi5zdGF0dXM9JH19ZWxzZXt2YXIgYT1DKyhuLndfYml0cy04PDw0KTw8ODt2YXIgcz0tMTtpZihuLnN0cmF0ZWd5Pj13fHxuLmxldmVsPDIpe3M9MH1lbHNlIGlmKG4ubGV2ZWw8Nil7cz0xfWVsc2UgaWYobi5sZXZlbD09PTYpe3M9Mn1lbHNle3M9M31hfD1zPDw2O2lmKG4uc3Ryc3RhcnQhPT0wKXthfD1GfWErPTMxLWElMzE7bi5zdGF0dXM9VTtpZShuLGEpO2lmKG4uc3Ryc3RhcnQhPT0wKXtpZShuLGUuYWRsZXI+Pj4xNik7aWUobixlLmFkbGVyJjY1NTM1KX1lLmFkbGVyPTF9fWlmKG4uc3RhdHVzPT09JCl7aWYobi5nemhlYWQuZXh0cmEpe2k9bi5wZW5kaW5nO3doaWxlKG4uZ3ppbmRleDwobi5nemhlYWQuZXh0cmEubGVuZ3RoJjY1NTM1KSl7aWYobi5wZW5kaW5nPT09bi5wZW5kaW5nX2J1Zl9zaXplKXtpZihuLmd6aGVhZC5oY3JjJiZuLnBlbmRpbmc+aSl7ZS5hZGxlcj1sKGUuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmctaSxpKX10ZShlKTtpPW4ucGVuZGluZztpZihuLnBlbmRpbmc9PT1uLnBlbmRpbmdfYnVmX3NpemUpe2JyZWFrfX1uZShuLG4uZ3poZWFkLmV4dHJhW24uZ3ppbmRleF0mMjU1KTtuLmd6aW5kZXgrK31pZihuLmd6aGVhZC5oY3JjJiZuLnBlbmRpbmc+aSl7ZS5hZGxlcj1sKGUuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmctaSxpKX1pZihuLmd6aW5kZXg9PT1uLmd6aGVhZC5leHRyYS5sZW5ndGgpe24uZ3ppbmRleD0wO24uc3RhdHVzPUd9fWVsc2V7bi5zdGF0dXM9R319aWYobi5zdGF0dXM9PT1HKXtpZihuLmd6aGVhZC5uYW1lKXtpPW4ucGVuZGluZztkb3tpZihuLnBlbmRpbmc9PT1uLnBlbmRpbmdfYnVmX3NpemUpe2lmKG4uZ3poZWFkLmhjcmMmJm4ucGVuZGluZz5pKXtlLmFkbGVyPWwoZS5hZGxlcixuLnBlbmRpbmdfYnVmLG4ucGVuZGluZy1pLGkpfXRlKGUpO2k9bi5wZW5kaW5nO2lmKG4ucGVuZGluZz09PW4ucGVuZGluZ19idWZfc2l6ZSl7bz0xO2JyZWFrfX1pZihuLmd6aW5kZXg8bi5nemhlYWQubmFtZS5sZW5ndGgpe289bi5nemhlYWQubmFtZS5jaGFyQ29kZUF0KG4uZ3ppbmRleCsrKSYyNTV9ZWxzZXtvPTB9bmUobixvKX13aGlsZShvIT09MCk7aWYobi5nemhlYWQuaGNyYyYmbi5wZW5kaW5nPmkpe2UuYWRsZXI9bChlLmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSl9aWYobz09PTApe24uZ3ppbmRleD0wO24uc3RhdHVzPVZ9fWVsc2V7bi5zdGF0dXM9Vn19aWYobi5zdGF0dXM9PT1WKXtpZihuLmd6aGVhZC5jb21tZW50KXtpPW4ucGVuZGluZztkb3tpZihuLnBlbmRpbmc9PT1uLnBlbmRpbmdfYnVmX3NpemUpe2lmKG4uZ3poZWFkLmhjcmMmJm4ucGVuZGluZz5pKXtlLmFkbGVyPWwoZS5hZGxlcixuLnBlbmRpbmdfYnVmLG4ucGVuZGluZy1pLGkpfXRlKGUpO2k9bi5wZW5kaW5nO2lmKG4ucGVuZGluZz09PW4ucGVuZGluZ19idWZfc2l6ZSl7bz0xO2JyZWFrfX1pZihuLmd6aW5kZXg8bi5nemhlYWQuY29tbWVudC5sZW5ndGgpe289bi5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KG4uZ3ppbmRleCsrKSYyNTV9ZWxzZXtvPTB9bmUobixvKX13aGlsZShvIT09MCk7aWYobi5nemhlYWQuaGNyYyYmbi5wZW5kaW5nPmkpe2UuYWRsZXI9bChlLmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSl9aWYobz09PTApe24uc3RhdHVzPUh9fWVsc2V7bi5zdGF0dXM9SH19aWYobi5zdGF0dXM9PT1IKXtpZihuLmd6aGVhZC5oY3JjKXtpZihuLnBlbmRpbmcrMj5uLnBlbmRpbmdfYnVmX3NpemUpe3RlKGUpfWlmKG4ucGVuZGluZysyPD1uLnBlbmRpbmdfYnVmX3NpemUpe25lKG4sZS5hZGxlciYyNTUpO25lKG4sZS5hZGxlcj4+OCYyNTUpO2UuYWRsZXI9MDtuLnN0YXR1cz1VfX1lbHNle24uc3RhdHVzPVV9fWlmKG4ucGVuZGluZyE9PTApe3RlKGUpO2lmKGUuYXZhaWxfb3V0PT09MCl7bi5sYXN0X2ZsdXNoPS0xO3JldHVybiBffX1lbHNlIGlmKGUuYXZhaWxfaW49PT0wJiZRKHQpPD1RKHIpJiZ0IT09bSl7cmV0dXJuIEooZSx4KX1pZihuLnN0YXR1cz09PXEmJmUuYXZhaWxfaW4hPT0wKXtyZXR1cm4gSihlLHgpfWlmKGUuYXZhaWxfaW4hPT0wfHxuLmxvb2thaGVhZCE9PTB8fHQhPT1mJiZuLnN0YXR1cyE9PXEpe3ZhciB1PW4uc3RyYXRlZ3k9PT13P3BlKG4sdCk6bi5zdHJhdGVneT09PVM/aGUobix0KTpkZVtuLmxldmVsXS5mdW5jKG4sdCk7aWYodT09PVl8fHU9PT1LKXtuLnN0YXR1cz1xfWlmKHU9PT1XfHx1PT09WSl7aWYoZS5hdmFpbF9vdXQ9PT0wKXtuLmxhc3RfZmx1c2g9LTF9cmV0dXJuIF99aWYodT09PVgpe2lmKHQ9PT1kKXtjLl90cl9hbGlnbihuKX1lbHNlIGlmKHQhPT1nKXtjLl90cl9zdG9yZWRfYmxvY2sobiwwLDAsZmFsc2UpO2lmKHQ9PT12KXtlZShuLmhlYWQpO2lmKG4ubG9va2FoZWFkPT09MCl7bi5zdHJzdGFydD0wO24uYmxvY2tfc3RhcnQ9MDtuLmluc2VydD0wfX19dGUoZSk7aWYoZS5hdmFpbF9vdXQ9PT0wKXtuLmxhc3RfZmx1c2g9LTE7cmV0dXJuIF99fX1pZih0IT09bSl7cmV0dXJuIF99aWYobi53cmFwPD0wKXtyZXR1cm4geX1pZihuLndyYXA9PT0yKXtuZShuLGUuYWRsZXImMjU1KTtuZShuLGUuYWRsZXI+PjgmMjU1KTtuZShuLGUuYWRsZXI+PjE2JjI1NSk7bmUobixlLmFkbGVyPj4yNCYyNTUpO25lKG4sZS50b3RhbF9pbiYyNTUpO25lKG4sZS50b3RhbF9pbj4+OCYyNTUpO25lKG4sZS50b3RhbF9pbj4+MTYmMjU1KTtuZShuLGUudG90YWxfaW4+PjI0JjI1NSl9ZWxzZXtpZShuLGUuYWRsZXI+Pj4xNik7aWUobixlLmFkbGVyJjY1NTM1KX10ZShlKTtpZihuLndyYXA+MCl7bi53cmFwPS1uLndyYXB9cmV0dXJuIG4ucGVuZGluZyE9PTA/Xzp5fWZ1bmN0aW9uIFNlKGUpe3ZhciB0O2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIGJ9dD1lLnN0YXRlLnN0YXR1cztpZih0IT09eiYmdCE9PSQmJnQhPT1HJiZ0IT09ViYmdCE9PUgmJnQhPT1VJiZ0IT09cSl7cmV0dXJuIEooZSxiKX1lLnN0YXRlPW51bGw7cmV0dXJuIHQ9PT1VP0ooZSxpKTpffWZ1bmN0aW9uIE1lKGUsdCl7dmFyIHI9dC5sZW5ndGg7dmFyIG47dmFyIGksbzt2YXIgYTt2YXIgczt2YXIgdTt2YXIgYzt2YXIgbDtpZighZXx8IWUuc3RhdGUpe3JldHVybiBifW49ZS5zdGF0ZTthPW4ud3JhcDtpZihhPT09Mnx8YT09PTEmJm4uc3RhdHVzIT09enx8bi5sb29rYWhlYWQpe3JldHVybiBifWlmKGE9PT0xKXtlLmFkbGVyPXAoZS5hZGxlcix0LHIsMCl9bi53cmFwPTA7aWYocj49bi53X3NpemUpe2lmKGE9PT0wKXtlZShuLmhlYWQpO24uc3Ryc3RhcnQ9MDtuLmJsb2NrX3N0YXJ0PTA7bi5pbnNlcnQ9MH1sPW5ldyBoLkJ1Zjgobi53X3NpemUpO2guYXJyYXlTZXQobCx0LHItbi53X3NpemUsbi53X3NpemUsMCk7dD1sO3I9bi53X3NpemV9cz1lLmF2YWlsX2luO3U9ZS5uZXh0X2luO2M9ZS5pbnB1dDtlLmF2YWlsX2luPXI7ZS5uZXh0X2luPTA7ZS5pbnB1dD10O3NlKG4pO3doaWxlKG4ubG9va2FoZWFkPj1JKXtpPW4uc3Ryc3RhcnQ7bz1uLmxvb2thaGVhZC0oSS0xKTtkb3tuLmluc19oPShuLmluc19oPDxuLmhhc2hfc2hpZnRebi53aW5kb3dbaStJLTFdKSZuLmhhc2hfbWFzaztuLnByZXZbaSZuLndfbWFza109bi5oZWFkW24uaW5zX2hdO24uaGVhZFtuLmluc19oXT1pO2krK313aGlsZSgtLW8pO24uc3Ryc3RhcnQ9aTtuLmxvb2thaGVhZD1JLTE7c2Uobil9bi5zdHJzdGFydCs9bi5sb29rYWhlYWQ7bi5ibG9ja19zdGFydD1uLnN0cnN0YXJ0O24uaW5zZXJ0PW4ubG9va2FoZWFkO24ubG9va2FoZWFkPTA7bi5tYXRjaF9sZW5ndGg9bi5wcmV2X2xlbmd0aD1JLTE7bi5tYXRjaF9hdmFpbGFibGU9MDtlLm5leHRfaW49dTtlLmlucHV0PWM7ZS5hdmFpbF9pbj1zO24ud3JhcD1hO3JldHVybiBffXIuZGVmbGF0ZUluaXQ9eGU7ci5kZWZsYXRlSW5pdDI9YmU7ci5kZWZsYXRlUmVzZXQ9X2U7ci5kZWZsYXRlUmVzZXRLZWVwPWdlO3IuZGVmbGF0ZVNldEhlYWRlcj15ZTtyLmRlZmxhdGU9d2U7ci5kZWZsYXRlRW5kPVNlO3IuZGVmbGF0ZVNldERpY3Rpb25hcnk9TWU7ci5kZWZsYXRlSW5mbz1cInBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6MjYsXCIuL2FkbGVyMzJcIjoyOCxcIi4vY3JjMzJcIjozMCxcIi4vbWVzc2FnZXNcIjozNixcIi4vdHJlZXNcIjozN31dLDMyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3RoaXMudGV4dD0wO3RoaXMudGltZT0wO3RoaXMueGZsYWdzPTA7dGhpcy5vcz0wO3RoaXMuZXh0cmE9bnVsbDt0aGlzLmV4dHJhX2xlbj0wO3RoaXMubmFtZT1cIlwiO3RoaXMuY29tbWVudD1cIlwiO3RoaXMuaGNyYz0wO3RoaXMuZG9uZT1mYWxzZX10LmV4cG9ydHM9bn0se31dLDMzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIE89MzA7dmFyIFA9MTI7dC5leHBvcnRzPWZ1bmN0aW9uIGUodCxyKXt2YXIgbjt2YXIgaTt2YXIgbzt2YXIgYTt2YXIgczt2YXIgdTt2YXIgYzt2YXIgbDt2YXIgaDt2YXIgcDt2YXIgZjt2YXIgZDt2YXIgdjt2YXIgbTt2YXIgZzt2YXIgXzt2YXIgeTt2YXIgYjt2YXIgeDt2YXIgdzt2YXIgUzt2YXIgTTt2YXIgQzt2YXIgVCxFO249dC5zdGF0ZTtpPXQubmV4dF9pbjtUPXQuaW5wdXQ7bz1pKyh0LmF2YWlsX2luLTUpO2E9dC5uZXh0X291dDtFPXQub3V0cHV0O3M9YS0oci10LmF2YWlsX291dCk7dT1hKyh0LmF2YWlsX291dC0yNTcpO2M9bi5kbWF4O2w9bi53c2l6ZTtoPW4ud2hhdmU7cD1uLnduZXh0O2Y9bi53aW5kb3c7ZD1uLmhvbGQ7dj1uLmJpdHM7bT1uLmxlbmNvZGU7Zz1uLmRpc3Rjb2RlO189KDE8PG4ubGVuYml0cyktMTt5PSgxPDxuLmRpc3RiaXRzKS0xO2U6ZG97aWYodjwxNSl7ZCs9VFtpKytdPDx2O3YrPTg7ZCs9VFtpKytdPDx2O3YrPTh9Yj1tW2QmX107dDpmb3IoOzspe3g9Yj4+PjI0O2Q+Pj49eDt2LT14O3g9Yj4+PjE2JjI1NTtpZih4PT09MCl7RVthKytdPWImNjU1MzV9ZWxzZSBpZih4JjE2KXt3PWImNjU1MzU7eCY9MTU7aWYoeCl7aWYodjx4KXtkKz1UW2krK108PHY7dis9OH13Kz1kJigxPDx4KS0xO2Q+Pj49eDt2LT14fWlmKHY8MTUpe2QrPVRbaSsrXTw8djt2Kz04O2QrPVRbaSsrXTw8djt2Kz04fWI9Z1tkJnldO3I6Zm9yKDs7KXt4PWI+Pj4yNDtkPj4+PXg7di09eDt4PWI+Pj4xNiYyNTU7aWYoeCYxNil7Uz1iJjY1NTM1O3gmPTE1O2lmKHY8eCl7ZCs9VFtpKytdPDx2O3YrPTg7aWYodjx4KXtkKz1UW2krK108PHY7dis9OH19Uys9ZCYoMTw8eCktMTtpZihTPmMpe3QubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIjtuLm1vZGU9TzticmVhayBlfWQ+Pj49eDt2LT14O3g9YS1zO2lmKFM+eCl7eD1TLXg7aWYoeD5oKXtpZihuLnNhbmUpe3QubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIjtuLm1vZGU9TzticmVhayBlfX1NPTA7Qz1mO2lmKHA9PT0wKXtNKz1sLXg7aWYoeDx3KXt3LT14O2Rve0VbYSsrXT1mW00rK119d2hpbGUoLS14KTtNPWEtUztDPUV9fWVsc2UgaWYocDx4KXtNKz1sK3AteDt4LT1wO2lmKHg8dyl7dy09eDtkb3tFW2ErK109ZltNKytdfXdoaWxlKC0teCk7TT0wO2lmKHA8dyl7eD1wO3ctPXg7ZG97RVthKytdPWZbTSsrXX13aGlsZSgtLXgpO009YS1TO0M9RX19fWVsc2V7TSs9cC14O2lmKHg8dyl7dy09eDtkb3tFW2ErK109ZltNKytdfXdoaWxlKC0teCk7TT1hLVM7Qz1FfX13aGlsZSh3PjIpe0VbYSsrXT1DW00rK107RVthKytdPUNbTSsrXTtFW2ErK109Q1tNKytdO3ctPTN9aWYodyl7RVthKytdPUNbTSsrXTtpZih3PjEpe0VbYSsrXT1DW00rK119fX1lbHNle009YS1TO2Rve0VbYSsrXT1FW00rK107RVthKytdPUVbTSsrXTtFW2ErK109RVtNKytdO3ctPTN9d2hpbGUodz4yKTtpZih3KXtFW2ErK109RVtNKytdO2lmKHc+MSl7RVthKytdPUVbTSsrXX19fX1lbHNlIGlmKCh4JjY0KT09PTApe2I9Z1soYiY2NTUzNSkrKGQmKDE8PHgpLTEpXTtjb250aW51ZSByfWVsc2V7dC5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIGNvZGVcIjtuLm1vZGU9TzticmVhayBlfWJyZWFrfX1lbHNlIGlmKCh4JjY0KT09PTApe2I9bVsoYiY2NTUzNSkrKGQmKDE8PHgpLTEpXTtjb250aW51ZSB0fWVsc2UgaWYoeCYzMil7bi5tb2RlPVA7YnJlYWsgZX1lbHNle3QubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCI7bi5tb2RlPU87YnJlYWsgZX1icmVha319d2hpbGUoaTxvJiZhPHUpO3c9dj4+MztpLT13O3YtPXc8PDM7ZCY9KDE8PHYpLTE7dC5uZXh0X2luPWk7dC5uZXh0X291dD1hO3QuYXZhaWxfaW49aTxvPzUrKG8taSk6NS0oaS1vKTt0LmF2YWlsX291dD1hPHU/MjU3Kyh1LWEpOjI1Ny0oYS11KTtuLmhvbGQ9ZDtuLmJpdHM9djtyZXR1cm59fSx7fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgUD1lKFwiLi4vdXRpbHMvY29tbW9uXCIpO3ZhciBBPWUoXCIuL2FkbGVyMzJcIik7dmFyIGo9ZShcIi4vY3JjMzJcIik7dmFyIFI9ZShcIi4vaW5mZmFzdFwiKTt2YXIgaz1lKFwiLi9pbmZ0cmVlc1wiKTt2YXIgTD0wO3ZhciBOPTE7dmFyIEk9Mjt2YXIgRD00O3ZhciBCPTU7dmFyIEY9Njt2YXIgej0wO3ZhciAkPTE7dmFyIEc9Mjt2YXIgVj0tMjt2YXIgSD0tMzt2YXIgVT0tNDt2YXIgcT0tNTt2YXIgVz04O3ZhciBYPTE7dmFyIFk9Mjt2YXIgSz0zO3ZhciBaPTQ7dmFyIEo9NTt2YXIgUT02O3ZhciBlZT03O3ZhciB0ZT04O3ZhciByZT05O3ZhciBuZT0xMDt2YXIgaWU9MTE7dmFyIG9lPTEyO3ZhciBhZT0xMzt2YXIgc2U9MTQ7dmFyIHVlPTE1O3ZhciBjZT0xNjt2YXIgbGU9MTc7dmFyIGhlPTE4O3ZhciBwZT0xOTt2YXIgZmU9MjA7dmFyIGRlPTIxO3ZhciB2ZT0yMjt2YXIgbWU9MjM7dmFyIGdlPTI0O3ZhciBfZT0yNTt2YXIgeWU9MjY7dmFyIGJlPTI3O3ZhciB4ZT0yODt2YXIgd2U9Mjk7dmFyIFNlPTMwO3ZhciBNZT0zMTt2YXIgQ2U9MzI7dmFyIG49ODUyO3ZhciBpPTU5Mjt2YXIgbz0xNTt2YXIgYT1vO2Z1bmN0aW9uIFRlKGUpe3JldHVybihlPj4+MjQmMjU1KSsoZT4+PjgmNjUyODApKygoZSY2NTI4MCk8PDgpKygoZSYyNTUpPDwyNCl9ZnVuY3Rpb24gcygpe3RoaXMubW9kZT0wO3RoaXMubGFzdD1mYWxzZTt0aGlzLndyYXA9MDt0aGlzLmhhdmVkaWN0PWZhbHNlO3RoaXMuZmxhZ3M9MDt0aGlzLmRtYXg9MDt0aGlzLmNoZWNrPTA7dGhpcy50b3RhbD0wO3RoaXMuaGVhZD1udWxsO3RoaXMud2JpdHM9MDt0aGlzLndzaXplPTA7dGhpcy53aGF2ZT0wO3RoaXMud25leHQ9MDt0aGlzLndpbmRvdz1udWxsO3RoaXMuaG9sZD0wO3RoaXMuYml0cz0wO3RoaXMubGVuZ3RoPTA7dGhpcy5vZmZzZXQ9MDt0aGlzLmV4dHJhPTA7dGhpcy5sZW5jb2RlPW51bGw7dGhpcy5kaXN0Y29kZT1udWxsO3RoaXMubGVuYml0cz0wO3RoaXMuZGlzdGJpdHM9MDt0aGlzLm5jb2RlPTA7dGhpcy5ubGVuPTA7dGhpcy5uZGlzdD0wO3RoaXMuaGF2ZT0wO3RoaXMubmV4dD1udWxsO3RoaXMubGVucz1uZXcgUC5CdWYxNigzMjApO3RoaXMud29yaz1uZXcgUC5CdWYxNigyODgpO3RoaXMubGVuZHluPW51bGw7dGhpcy5kaXN0ZHluPW51bGw7dGhpcy5zYW5lPTA7dGhpcy5iYWNrPTA7dGhpcy53YXM9MH1mdW5jdGlvbiB1KGUpe3ZhciB0O2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIFZ9dD1lLnN0YXRlO2UudG90YWxfaW49ZS50b3RhbF9vdXQ9dC50b3RhbD0wO2UubXNnPVwiXCI7aWYodC53cmFwKXtlLmFkbGVyPXQud3JhcCYxfXQubW9kZT1YO3QubGFzdD0wO3QuaGF2ZWRpY3Q9MDt0LmRtYXg9MzI3Njg7dC5oZWFkPW51bGw7dC5ob2xkPTA7dC5iaXRzPTA7dC5sZW5jb2RlPXQubGVuZHluPW5ldyBQLkJ1ZjMyKG4pO3QuZGlzdGNvZGU9dC5kaXN0ZHluPW5ldyBQLkJ1ZjMyKGkpO3Quc2FuZT0xO3QuYmFjaz0tMTtyZXR1cm4gen1mdW5jdGlvbiBjKGUpe3ZhciB0O2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIFZ9dD1lLnN0YXRlO3Qud3NpemU9MDt0LndoYXZlPTA7dC53bmV4dD0wO3JldHVybiB1KGUpfWZ1bmN0aW9uIGwoZSx0KXt2YXIgcjt2YXIgbjtpZighZXx8IWUuc3RhdGUpe3JldHVybiBWfW49ZS5zdGF0ZTtpZih0PDApe3I9MDt0PS10fWVsc2V7cj0odD4+NCkrMTtpZih0PDQ4KXt0Jj0xNX19aWYodCYmKHQ8OHx8dD4xNSkpe3JldHVybiBWfWlmKG4ud2luZG93IT09bnVsbCYmbi53Yml0cyE9PXQpe24ud2luZG93PW51bGx9bi53cmFwPXI7bi53Yml0cz10O3JldHVybiBjKGUpfWZ1bmN0aW9uIGgoZSx0KXt2YXIgcjt2YXIgbjtpZighZSl7cmV0dXJuIFZ9bj1uZXcgcztlLnN0YXRlPW47bi53aW5kb3c9bnVsbDtyPWwoZSx0KTtpZihyIT09eil7ZS5zdGF0ZT1udWxsfXJldHVybiByfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGgoZSxhKX12YXIgZj10cnVlO3ZhciBkLHY7ZnVuY3Rpb24gRWUoZSl7aWYoZil7dmFyIHQ7ZD1uZXcgUC5CdWYzMig1MTIpO3Y9bmV3IFAuQnVmMzIoMzIpO3Q9MDt3aGlsZSh0PDE0NCl7ZS5sZW5zW3QrK109OH13aGlsZSh0PDI1Nil7ZS5sZW5zW3QrK109OX13aGlsZSh0PDI4MCl7ZS5sZW5zW3QrK109N313aGlsZSh0PDI4OCl7ZS5sZW5zW3QrK109OH1rKE4sZS5sZW5zLDAsMjg4LGQsMCxlLndvcmsse2JpdHM6OX0pO3Q9MDt3aGlsZSh0PDMyKXtlLmxlbnNbdCsrXT01fWsoSSxlLmxlbnMsMCwzMix2LDAsZS53b3JrLHtiaXRzOjV9KTtmPWZhbHNlfWUubGVuY29kZT1kO2UubGVuYml0cz05O2UuZGlzdGNvZGU9djtlLmRpc3RiaXRzPTV9ZnVuY3Rpb24gT2UoZSx0LHIsbil7dmFyIGk7dmFyIG89ZS5zdGF0ZTtpZihvLndpbmRvdz09PW51bGwpe28ud3NpemU9MTw8by53Yml0cztvLnduZXh0PTA7by53aGF2ZT0wO28ud2luZG93PW5ldyBQLkJ1Zjgoby53c2l6ZSl9aWYobj49by53c2l6ZSl7UC5hcnJheVNldChvLndpbmRvdyx0LHItby53c2l6ZSxvLndzaXplLDApO28ud25leHQ9MDtvLndoYXZlPW8ud3NpemV9ZWxzZXtpPW8ud3NpemUtby53bmV4dDtpZihpPm4pe2k9bn1QLmFycmF5U2V0KG8ud2luZG93LHQsci1uLGksby53bmV4dCk7bi09aTtpZihuKXtQLmFycmF5U2V0KG8ud2luZG93LHQsci1uLG4sMCk7by53bmV4dD1uO28ud2hhdmU9by53c2l6ZX1lbHNle28ud25leHQrPWk7aWYoby53bmV4dD09PW8ud3NpemUpe28ud25leHQ9MH1pZihvLndoYXZlPG8ud3NpemUpe28ud2hhdmUrPWl9fX1yZXR1cm4gMH1mdW5jdGlvbiBtKGUsdCl7dmFyIHI7dmFyIG4saTt2YXIgbzt2YXIgYTt2YXIgcyx1O3ZhciBjO3ZhciBsO3ZhciBoLHA7dmFyIGY7dmFyIGQ7dmFyIHY7dmFyIG09MDt2YXIgZyxfLHk7dmFyIGIseCx3O3ZhciBTO3ZhciBNO3ZhciBDPW5ldyBQLkJ1ZjgoNCk7dmFyIFQ7dmFyIEU7dmFyIE89WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdO2lmKCFlfHwhZS5zdGF0ZXx8IWUub3V0cHV0fHwhZS5pbnB1dCYmZS5hdmFpbF9pbiE9PTApe3JldHVybiBWfXI9ZS5zdGF0ZTtpZihyLm1vZGU9PT1vZSl7ci5tb2RlPWFlfWE9ZS5uZXh0X291dDtpPWUub3V0cHV0O3U9ZS5hdmFpbF9vdXQ7bz1lLm5leHRfaW47bj1lLmlucHV0O3M9ZS5hdmFpbF9pbjtjPXIuaG9sZDtsPXIuYml0cztoPXM7cD11O009ejtlOmZvcig7Oyl7c3dpdGNoKHIubW9kZSl7Y2FzZSBYOmlmKHIud3JhcD09PTApe3IubW9kZT1hZTticmVha313aGlsZShsPDE2KXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9aWYoci53cmFwJjImJmM9PT0zNTYxNSl7ci5jaGVjaz0wO0NbMF09YyYyNTU7Q1sxXT1jPj4+OCYyNTU7ci5jaGVjaz1qKHIuY2hlY2ssQywyLDApO2M9MDtsPTA7ci5tb2RlPVk7YnJlYWt9ci5mbGFncz0wO2lmKHIuaGVhZCl7ci5oZWFkLmRvbmU9ZmFsc2V9aWYoIShyLndyYXAmMSl8fCgoKGMmMjU1KTw8OCkrKGM+PjgpKSUzMSl7ZS5tc2c9XCJpbmNvcnJlY3QgaGVhZGVyIGNoZWNrXCI7ci5tb2RlPVNlO2JyZWFrfWlmKChjJjE1KSE9PVcpe2UubXNnPVwidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2RcIjtyLm1vZGU9U2U7YnJlYWt9Yz4+Pj00O2wtPTQ7Uz0oYyYxNSkrODtpZihyLndiaXRzPT09MCl7ci53Yml0cz1TfWVsc2UgaWYoUz5yLndiaXRzKXtlLm1zZz1cImludmFsaWQgd2luZG93IHNpemVcIjtyLm1vZGU9U2U7YnJlYWt9ci5kbWF4PTE8PFM7ZS5hZGxlcj1yLmNoZWNrPTE7ci5tb2RlPWMmNTEyP25lOm9lO2M9MDtsPTA7YnJlYWs7Y2FzZSBZOndoaWxlKGw8MTYpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1yLmZsYWdzPWM7aWYoKHIuZmxhZ3MmMjU1KSE9PVcpe2UubXNnPVwidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2RcIjtyLm1vZGU9U2U7YnJlYWt9aWYoci5mbGFncyY1NzM0NCl7ZS5tc2c9XCJ1bmtub3duIGhlYWRlciBmbGFncyBzZXRcIjtyLm1vZGU9U2U7YnJlYWt9aWYoci5oZWFkKXtyLmhlYWQudGV4dD1jPj44JjF9aWYoci5mbGFncyY1MTIpe0NbMF09YyYyNTU7Q1sxXT1jPj4+OCYyNTU7ci5jaGVjaz1qKHIuY2hlY2ssQywyLDApfWM9MDtsPTA7ci5tb2RlPUs7Y2FzZSBLOndoaWxlKGw8MzIpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1pZihyLmhlYWQpe3IuaGVhZC50aW1lPWN9aWYoci5mbGFncyY1MTIpe0NbMF09YyYyNTU7Q1sxXT1jPj4+OCYyNTU7Q1syXT1jPj4+MTYmMjU1O0NbM109Yz4+PjI0JjI1NTtyLmNoZWNrPWooci5jaGVjayxDLDQsMCl9Yz0wO2w9MDtyLm1vZGU9WjtjYXNlIFo6d2hpbGUobDwxNil7aWYocz09PTApe2JyZWFrIGV9cy0tO2MrPW5bbysrXTw8bDtsKz04fWlmKHIuaGVhZCl7ci5oZWFkLnhmbGFncz1jJjI1NTtyLmhlYWQub3M9Yz4+OH1pZihyLmZsYWdzJjUxMil7Q1swXT1jJjI1NTtDWzFdPWM+Pj44JjI1NTtyLmNoZWNrPWooci5jaGVjayxDLDIsMCl9Yz0wO2w9MDtyLm1vZGU9SjtjYXNlIEo6aWYoci5mbGFncyYxMDI0KXt3aGlsZShsPDE2KXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9ci5sZW5ndGg9YztpZihyLmhlYWQpe3IuaGVhZC5leHRyYV9sZW49Y31pZihyLmZsYWdzJjUxMil7Q1swXT1jJjI1NTtDWzFdPWM+Pj44JjI1NTtyLmNoZWNrPWooci5jaGVjayxDLDIsMCl9Yz0wO2w9MH1lbHNlIGlmKHIuaGVhZCl7ci5oZWFkLmV4dHJhPW51bGx9ci5tb2RlPVE7Y2FzZSBROmlmKHIuZmxhZ3MmMTAyNCl7Zj1yLmxlbmd0aDtpZihmPnMpe2Y9c31pZihmKXtpZihyLmhlYWQpe1M9ci5oZWFkLmV4dHJhX2xlbi1yLmxlbmd0aDtpZighci5oZWFkLmV4dHJhKXtyLmhlYWQuZXh0cmE9bmV3IEFycmF5KHIuaGVhZC5leHRyYV9sZW4pfVAuYXJyYXlTZXQoci5oZWFkLmV4dHJhLG4sbyxmLFMpfWlmKHIuZmxhZ3MmNTEyKXtyLmNoZWNrPWooci5jaGVjayxuLGYsbyl9cy09ZjtvKz1mO3IubGVuZ3RoLT1mfWlmKHIubGVuZ3RoKXticmVhayBlfX1yLmxlbmd0aD0wO3IubW9kZT1lZTtjYXNlIGVlOmlmKHIuZmxhZ3MmMjA0OCl7aWYocz09PTApe2JyZWFrIGV9Zj0wO2Rve1M9bltvK2YrK107aWYoci5oZWFkJiZTJiZyLmxlbmd0aDw2NTUzNil7ci5oZWFkLm5hbWUrPVN0cmluZy5mcm9tQ2hhckNvZGUoUyl9fXdoaWxlKFMmJmY8cyk7aWYoci5mbGFncyY1MTIpe3IuY2hlY2s9aihyLmNoZWNrLG4sZixvKX1zLT1mO28rPWY7aWYoUyl7YnJlYWsgZX19ZWxzZSBpZihyLmhlYWQpe3IuaGVhZC5uYW1lPW51bGx9ci5sZW5ndGg9MDtyLm1vZGU9dGU7Y2FzZSB0ZTppZihyLmZsYWdzJjQwOTYpe2lmKHM9PT0wKXticmVhayBlfWY9MDtkb3tTPW5bbytmKytdO2lmKHIuaGVhZCYmUyYmci5sZW5ndGg8NjU1MzYpe3IuaGVhZC5jb21tZW50Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKFMpfX13aGlsZShTJiZmPHMpO2lmKHIuZmxhZ3MmNTEyKXtyLmNoZWNrPWooci5jaGVjayxuLGYsbyl9cy09ZjtvKz1mO2lmKFMpe2JyZWFrIGV9fWVsc2UgaWYoci5oZWFkKXtyLmhlYWQuY29tbWVudD1udWxsfXIubW9kZT1yZTtjYXNlIHJlOmlmKHIuZmxhZ3MmNTEyKXt3aGlsZShsPDE2KXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9aWYoYyE9PShyLmNoZWNrJjY1NTM1KSl7ZS5tc2c9XCJoZWFkZXIgY3JjIG1pc21hdGNoXCI7ci5tb2RlPVNlO2JyZWFrfWM9MDtsPTB9aWYoci5oZWFkKXtyLmhlYWQuaGNyYz1yLmZsYWdzPj45JjE7ci5oZWFkLmRvbmU9dHJ1ZX1lLmFkbGVyPXIuY2hlY2s9MDtyLm1vZGU9b2U7YnJlYWs7Y2FzZSBuZTp3aGlsZShsPDMyKXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9ZS5hZGxlcj1yLmNoZWNrPVRlKGMpO2M9MDtsPTA7ci5tb2RlPWllO2Nhc2UgaWU6aWYoci5oYXZlZGljdD09PTApe2UubmV4dF9vdXQ9YTtlLmF2YWlsX291dD11O2UubmV4dF9pbj1vO2UuYXZhaWxfaW49cztyLmhvbGQ9YztyLmJpdHM9bDtyZXR1cm4gR31lLmFkbGVyPXIuY2hlY2s9MTtyLm1vZGU9b2U7Y2FzZSBvZTppZih0PT09Qnx8dD09PUYpe2JyZWFrIGV9Y2FzZSBhZTppZihyLmxhc3Qpe2M+Pj49bCY3O2wtPWwmNztyLm1vZGU9YmU7YnJlYWt9d2hpbGUobDwzKXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9ci5sYXN0PWMmMTtjPj4+PTE7bC09MTtzd2l0Y2goYyYzKXtjYXNlIDA6ci5tb2RlPXNlO2JyZWFrO2Nhc2UgMTpFZShyKTtyLm1vZGU9ZmU7aWYodD09PUYpe2M+Pj49MjtsLT0yO2JyZWFrIGV9YnJlYWs7Y2FzZSAyOnIubW9kZT1sZTticmVhaztjYXNlIDM6ZS5tc2c9XCJpbnZhbGlkIGJsb2NrIHR5cGVcIjtyLm1vZGU9U2V9Yz4+Pj0yO2wtPTI7YnJlYWs7Y2FzZSBzZTpjPj4+PWwmNztsLT1sJjc7d2hpbGUobDwzMil7aWYocz09PTApe2JyZWFrIGV9cy0tO2MrPW5bbysrXTw8bDtsKz04fWlmKChjJjY1NTM1KSE9PShjPj4+MTZeNjU1MzUpKXtlLm1zZz1cImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHNcIjtyLm1vZGU9U2U7YnJlYWt9ci5sZW5ndGg9YyY2NTUzNTtjPTA7bD0wO3IubW9kZT11ZTtpZih0PT09Ril7YnJlYWsgZX1jYXNlIHVlOnIubW9kZT1jZTtjYXNlIGNlOmY9ci5sZW5ndGg7aWYoZil7aWYoZj5zKXtmPXN9aWYoZj51KXtmPXV9aWYoZj09PTApe2JyZWFrIGV9UC5hcnJheVNldChpLG4sbyxmLGEpO3MtPWY7bys9Zjt1LT1mO2ErPWY7ci5sZW5ndGgtPWY7YnJlYWt9ci5tb2RlPW9lO2JyZWFrO2Nhc2UgbGU6d2hpbGUobDwxNCl7aWYocz09PTApe2JyZWFrIGV9cy0tO2MrPW5bbysrXTw8bDtsKz04fXIubmxlbj0oYyYzMSkrMjU3O2M+Pj49NTtsLT01O3IubmRpc3Q9KGMmMzEpKzE7Yz4+Pj01O2wtPTU7ci5uY29kZT0oYyYxNSkrNDtjPj4+PTQ7bC09NDtpZihyLm5sZW4+Mjg2fHxyLm5kaXN0PjMwKXtlLm1zZz1cInRvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzXCI7ci5tb2RlPVNlO2JyZWFrfXIuaGF2ZT0wO3IubW9kZT1oZTtjYXNlIGhlOndoaWxlKHIuaGF2ZTxyLm5jb2RlKXt3aGlsZShsPDMpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1yLmxlbnNbT1tyLmhhdmUrK11dPWMmNztjPj4+PTM7bC09M313aGlsZShyLmhhdmU8MTkpe3IubGVuc1tPW3IuaGF2ZSsrXV09MH1yLmxlbmNvZGU9ci5sZW5keW47ci5sZW5iaXRzPTc7VD17Yml0czpyLmxlbmJpdHN9O009ayhMLHIubGVucywwLDE5LHIubGVuY29kZSwwLHIud29yayxUKTtyLmxlbmJpdHM9VC5iaXRzO2lmKE0pe2UubXNnPVwiaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0XCI7ci5tb2RlPVNlO2JyZWFrfXIuaGF2ZT0wO3IubW9kZT1wZTtjYXNlIHBlOndoaWxlKHIuaGF2ZTxyLm5sZW4rci5uZGlzdCl7Zm9yKDs7KXttPXIubGVuY29kZVtjJigxPDxyLmxlbmJpdHMpLTFdO2c9bT4+PjI0O189bT4+PjE2JjI1NTt5PW0mNjU1MzU7aWYoZzw9bCl7YnJlYWt9aWYocz09PTApe2JyZWFrIGV9cy0tO2MrPW5bbysrXTw8bDtsKz04fWlmKHk8MTYpe2M+Pj49ZztsLT1nO3IubGVuc1tyLmhhdmUrK109eX1lbHNle2lmKHk9PT0xNil7RT1nKzI7d2hpbGUobDxFKXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9Yz4+Pj1nO2wtPWc7aWYoci5oYXZlPT09MCl7ZS5tc2c9XCJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0XCI7ci5tb2RlPVNlO2JyZWFrfVM9ci5sZW5zW3IuaGF2ZS0xXTtmPTMrKGMmMyk7Yz4+Pj0yO2wtPTJ9ZWxzZSBpZih5PT09MTcpe0U9ZyszO3doaWxlKGw8RSl7aWYocz09PTApe2JyZWFrIGV9cy0tO2MrPW5bbysrXTw8bDtsKz04fWM+Pj49ZztsLT1nO1M9MDtmPTMrKGMmNyk7Yz4+Pj0zO2wtPTN9ZWxzZXtFPWcrNzt3aGlsZShsPEUpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1jPj4+PWc7bC09ZztTPTA7Zj0xMSsoYyYxMjcpO2M+Pj49NztsLT03fWlmKHIuaGF2ZStmPnIubmxlbityLm5kaXN0KXtlLm1zZz1cImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIjtyLm1vZGU9U2U7YnJlYWt9d2hpbGUoZi0tKXtyLmxlbnNbci5oYXZlKytdPVN9fX1pZihyLm1vZGU9PT1TZSl7YnJlYWt9aWYoci5sZW5zWzI1Nl09PT0wKXtlLm1zZz1cImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9ja1wiO3IubW9kZT1TZTticmVha31yLmxlbmJpdHM9OTtUPXtiaXRzOnIubGVuYml0c307TT1rKE4sci5sZW5zLDAsci5ubGVuLHIubGVuY29kZSwwLHIud29yayxUKTtyLmxlbmJpdHM9VC5iaXRzO2lmKE0pe2UubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0XCI7ci5tb2RlPVNlO2JyZWFrfXIuZGlzdGJpdHM9NjtyLmRpc3Rjb2RlPXIuZGlzdGR5bjtUPXtiaXRzOnIuZGlzdGJpdHN9O009ayhJLHIubGVucyxyLm5sZW4sci5uZGlzdCxyLmRpc3Rjb2RlLDAsci53b3JrLFQpO3IuZGlzdGJpdHM9VC5iaXRzO2lmKE0pe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZXMgc2V0XCI7ci5tb2RlPVNlO2JyZWFrfXIubW9kZT1mZTtpZih0PT09Ril7YnJlYWsgZX1jYXNlIGZlOnIubW9kZT1kZTtjYXNlIGRlOmlmKHM+PTYmJnU+PTI1OCl7ZS5uZXh0X291dD1hO2UuYXZhaWxfb3V0PXU7ZS5uZXh0X2luPW87ZS5hdmFpbF9pbj1zO3IuaG9sZD1jO3IuYml0cz1sO1IoZSxwKTthPWUubmV4dF9vdXQ7aT1lLm91dHB1dDt1PWUuYXZhaWxfb3V0O289ZS5uZXh0X2luO249ZS5pbnB1dDtzPWUuYXZhaWxfaW47Yz1yLmhvbGQ7bD1yLmJpdHM7aWYoci5tb2RlPT09b2Upe3IuYmFjaz0tMX1icmVha31yLmJhY2s9MDtmb3IoOzspe209ci5sZW5jb2RlW2MmKDE8PHIubGVuYml0cyktMV07Zz1tPj4+MjQ7Xz1tPj4+MTYmMjU1O3k9bSY2NTUzNTtpZihnPD1sKXticmVha31pZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9aWYoXyYmKF8mMjQwKT09PTApe2I9Zzt4PV87dz15O2Zvcig7Oyl7bT1yLmxlbmNvZGVbdysoKGMmKDE8PGIreCktMSk+PmIpXTtnPW0+Pj4yNDtfPW0+Pj4xNiYyNTU7eT1tJjY1NTM1O2lmKGIrZzw9bCl7YnJlYWt9aWYocz09PTApe2JyZWFrIGV9cy0tO2MrPW5bbysrXTw8bDtsKz04fWM+Pj49YjtsLT1iO3IuYmFjays9Yn1jPj4+PWc7bC09ZztyLmJhY2srPWc7ci5sZW5ndGg9eTtpZihfPT09MCl7ci5tb2RlPXllO2JyZWFrfWlmKF8mMzIpe3IuYmFjaz0tMTtyLm1vZGU9b2U7YnJlYWt9aWYoXyY2NCl7ZS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGVcIjtyLm1vZGU9U2U7YnJlYWt9ci5leHRyYT1fJjE1O3IubW9kZT12ZTtjYXNlIHZlOmlmKHIuZXh0cmEpe0U9ci5leHRyYTt3aGlsZShsPEUpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1yLmxlbmd0aCs9YyYoMTw8ci5leHRyYSktMTtjPj4+PXIuZXh0cmE7bC09ci5leHRyYTtyLmJhY2srPXIuZXh0cmF9ci53YXM9ci5sZW5ndGg7ci5tb2RlPW1lO2Nhc2UgbWU6Zm9yKDs7KXttPXIuZGlzdGNvZGVbYyYoMTw8ci5kaXN0Yml0cyktMV07Zz1tPj4+MjQ7Xz1tPj4+MTYmMjU1O3k9bSY2NTUzNTtpZihnPD1sKXticmVha31pZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9aWYoKF8mMjQwKT09PTApe2I9Zzt4PV87dz15O2Zvcig7Oyl7bT1yLmRpc3Rjb2RlW3crKChjJigxPDxiK3gpLTEpPj5iKV07Zz1tPj4+MjQ7Xz1tPj4+MTYmMjU1O3k9bSY2NTUzNTtpZihiK2c8PWwpe2JyZWFrfWlmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1jPj4+PWI7bC09YjtyLmJhY2srPWJ9Yz4+Pj1nO2wtPWc7ci5iYWNrKz1nO2lmKF8mNjQpe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZSBjb2RlXCI7ci5tb2RlPVNlO2JyZWFrfXIub2Zmc2V0PXk7ci5leHRyYT1fJjE1O3IubW9kZT1nZTtjYXNlIGdlOmlmKHIuZXh0cmEpe0U9ci5leHRyYTt3aGlsZShsPEUpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjKz1uW28rK108PGw7bCs9OH1yLm9mZnNldCs9YyYoMTw8ci5leHRyYSktMTtjPj4+PXIuZXh0cmE7bC09ci5leHRyYTtyLmJhY2srPXIuZXh0cmF9aWYoci5vZmZzZXQ+ci5kbWF4KXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCI7ci5tb2RlPVNlO2JyZWFrfXIubW9kZT1fZTtjYXNlIF9lOmlmKHU9PT0wKXticmVhayBlfWY9cC11O2lmKHIub2Zmc2V0PmYpe2Y9ci5vZmZzZXQtZjtpZihmPnIud2hhdmUpe2lmKHIuc2FuZSl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiO3IubW9kZT1TZTticmVha319aWYoZj5yLnduZXh0KXtmLT1yLnduZXh0O2Q9ci53c2l6ZS1mfWVsc2V7ZD1yLnduZXh0LWZ9aWYoZj5yLmxlbmd0aCl7Zj1yLmxlbmd0aH12PXIud2luZG93fWVsc2V7dj1pO2Q9YS1yLm9mZnNldDtmPXIubGVuZ3RofWlmKGY+dSl7Zj11fXUtPWY7ci5sZW5ndGgtPWY7ZG97aVthKytdPXZbZCsrXX13aGlsZSgtLWYpO2lmKHIubGVuZ3RoPT09MCl7ci5tb2RlPWRlfWJyZWFrO2Nhc2UgeWU6aWYodT09PTApe2JyZWFrIGV9aVthKytdPXIubGVuZ3RoO3UtLTtyLm1vZGU9ZGU7YnJlYWs7Y2FzZSBiZTppZihyLndyYXApe3doaWxlKGw8MzIpe2lmKHM9PT0wKXticmVhayBlfXMtLTtjfD1uW28rK108PGw7bCs9OH1wLT11O2UudG90YWxfb3V0Kz1wO3IudG90YWwrPXA7aWYocCl7ZS5hZGxlcj1yLmNoZWNrPXIuZmxhZ3M/aihyLmNoZWNrLGkscCxhLXApOkEoci5jaGVjayxpLHAsYS1wKX1wPXU7aWYoKHIuZmxhZ3M/YzpUZShjKSkhPT1yLmNoZWNrKXtlLm1zZz1cImluY29ycmVjdCBkYXRhIGNoZWNrXCI7ci5tb2RlPVNlO2JyZWFrfWM9MDtsPTB9ci5tb2RlPXhlO2Nhc2UgeGU6aWYoci53cmFwJiZyLmZsYWdzKXt3aGlsZShsPDMyKXtpZihzPT09MCl7YnJlYWsgZX1zLS07Yys9bltvKytdPDxsO2wrPTh9aWYoYyE9PShyLnRvdGFsJjQyOTQ5NjcyOTUpKXtlLm1zZz1cImluY29ycmVjdCBsZW5ndGggY2hlY2tcIjtyLm1vZGU9U2U7YnJlYWt9Yz0wO2w9MH1yLm1vZGU9d2U7Y2FzZSB3ZTpNPSQ7YnJlYWsgZTtjYXNlIFNlOk09SDticmVhayBlO2Nhc2UgTWU6cmV0dXJuIFU7Y2FzZSBDZTpkZWZhdWx0OnJldHVybiBWfX1lLm5leHRfb3V0PWE7ZS5hdmFpbF9vdXQ9dTtlLm5leHRfaW49bztlLmF2YWlsX2luPXM7ci5ob2xkPWM7ci5iaXRzPWw7aWYoci53c2l6ZXx8cCE9PWUuYXZhaWxfb3V0JiZyLm1vZGU8U2UmJihyLm1vZGU8YmV8fHQhPT1EKSl7aWYoT2UoZSxlLm91dHB1dCxlLm5leHRfb3V0LHAtZS5hdmFpbF9vdXQpKXtyLm1vZGU9TWU7cmV0dXJuIFV9fWgtPWUuYXZhaWxfaW47cC09ZS5hdmFpbF9vdXQ7ZS50b3RhbF9pbis9aDtlLnRvdGFsX291dCs9cDtyLnRvdGFsKz1wO2lmKHIud3JhcCYmcCl7ZS5hZGxlcj1yLmNoZWNrPXIuZmxhZ3M/aihyLmNoZWNrLGkscCxlLm5leHRfb3V0LXApOkEoci5jaGVjayxpLHAsZS5uZXh0X291dC1wKX1lLmRhdGFfdHlwZT1yLmJpdHMrKHIubGFzdD82NDowKSsoci5tb2RlPT09b2U/MTI4OjApKyhyLm1vZGU9PT1mZXx8ci5tb2RlPT09dWU/MjU2OjApO2lmKChoPT09MCYmcD09PTB8fHQ9PT1EKSYmTT09PXope009cX1yZXR1cm4gTX1mdW5jdGlvbiBnKGUpe2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIFZ9dmFyIHQ9ZS5zdGF0ZTtpZih0LndpbmRvdyl7dC53aW5kb3c9bnVsbH1lLnN0YXRlPW51bGw7cmV0dXJuIHp9ZnVuY3Rpb24gXyhlLHQpe3ZhciByO2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIFZ9cj1lLnN0YXRlO2lmKChyLndyYXAmMik9PT0wKXtyZXR1cm4gVn1yLmhlYWQ9dDt0LmRvbmU9ZmFsc2U7cmV0dXJuIHp9ZnVuY3Rpb24geShlLHQpe3ZhciByPXQubGVuZ3RoO3ZhciBuO3ZhciBpO3ZhciBvO2lmKCFlfHwhZS5zdGF0ZSl7cmV0dXJuIFZ9bj1lLnN0YXRlO2lmKG4ud3JhcCE9PTAmJm4ubW9kZSE9PWllKXtyZXR1cm4gVn1pZihuLm1vZGU9PT1pZSl7aT0xO2k9QShpLHQsciwwKTtpZihpIT09bi5jaGVjayl7cmV0dXJuIEh9fW89T2UoZSx0LHIscik7aWYobyl7bi5tb2RlPU1lO3JldHVybiBVfW4uaGF2ZWRpY3Q9MTtyZXR1cm4gen1yLmluZmxhdGVSZXNldD1jO3IuaW5mbGF0ZVJlc2V0Mj1sO3IuaW5mbGF0ZVJlc2V0S2VlcD11O3IuaW5mbGF0ZUluaXQ9cDtyLmluZmxhdGVJbml0Mj1oO3IuaW5mbGF0ZT1tO3IuaW5mbGF0ZUVuZD1nO3IuaW5mbGF0ZUdldEhlYWRlcj1fO3IuaW5mbGF0ZVNldERpY3Rpb25hcnk9eTtyLmluZmxhdGVJbmZvPVwicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KVwifSx7XCIuLi91dGlscy9jb21tb25cIjoyNixcIi4vYWRsZXIzMlwiOjI4LFwiLi9jcmMzMlwiOjMwLFwiLi9pbmZmYXN0XCI6MzMsXCIuL2luZnRyZWVzXCI6MzV9XSwzNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBOPWUoXCIuLi91dGlscy9jb21tb25cIik7dmFyIEk9MTU7dmFyIEQ9ODUyO3ZhciBCPTU5Mjt2YXIgRj0wO3ZhciB6PTE7dmFyICQ9Mjt2YXIgRz1bMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwwLDBdO3ZhciBWPVsxNiwxNiwxNiwxNiwxNiwxNiwxNiwxNiwxNywxNywxNywxNywxOCwxOCwxOCwxOCwxOSwxOSwxOSwxOSwyMCwyMCwyMCwyMCwyMSwyMSwyMSwyMSwxNiw3Miw3OF07dmFyIEg9WzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3NywwLDBdO3ZhciBVPVsxNiwxNiwxNiwxNiwxNywxNywxOCwxOCwxOSwxOSwyMCwyMCwyMSwyMSwyMiwyMiwyMywyMywyNCwyNCwyNSwyNSwyNiwyNiwyNywyNywyOCwyOCwyOSwyOSw2NCw2NF07dC5leHBvcnRzPWZ1bmN0aW9uIGUodCxyLG4saSxvLGEscyx1KXt2YXIgYz11LmJpdHM7dmFyIGw9MDt2YXIgaD0wO3ZhciBwPTAsZj0wO3ZhciBkPTA7dmFyIHY9MDt2YXIgbT0wO3ZhciBnPTA7dmFyIF89MDt2YXIgeT0wO3ZhciBiO3ZhciB4O3ZhciB3O3ZhciBTO3ZhciBNO3ZhciBDPW51bGw7dmFyIFQ9MDt2YXIgRTt2YXIgTz1uZXcgTi5CdWYxNihJKzEpO3ZhciBQPW5ldyBOLkJ1ZjE2KEkrMSk7dmFyIEE9bnVsbDt2YXIgaj0wO3ZhciBSLGssTDtmb3IobD0wO2w8PUk7bCsrKXtPW2xdPTB9Zm9yKGg9MDtoPGk7aCsrKXtPW3JbbitoXV0rK31kPWM7Zm9yKGY9STtmPj0xO2YtLSl7aWYoT1tmXSE9PTApe2JyZWFrfX1pZihkPmYpe2Q9Zn1pZihmPT09MCl7b1thKytdPTE8PDI0fDY0PDwxNnwwO29bYSsrXT0xPDwyNHw2NDw8MTZ8MDt1LmJpdHM9MTtyZXR1cm4gMH1mb3IocD0xO3A8ZjtwKyspe2lmKE9bcF0hPT0wKXticmVha319aWYoZDxwKXtkPXB9Zz0xO2ZvcihsPTE7bDw9STtsKyspe2c8PD0xO2ctPU9bbF07aWYoZzwwKXtyZXR1cm4tMX19aWYoZz4wJiYodD09PUZ8fGYhPT0xKSl7cmV0dXJuLTF9UFsxXT0wO2ZvcihsPTE7bDxJO2wrKyl7UFtsKzFdPVBbbF0rT1tsXX1mb3IoaD0wO2g8aTtoKyspe2lmKHJbbitoXSE9PTApe3NbUFtyW24raF1dKytdPWh9fWlmKHQ9PT1GKXtDPUE9cztFPTE5fWVsc2UgaWYodD09PXope0M9RztULT0yNTc7QT1WO2otPTI1NztFPTI1Nn1lbHNle0M9SDtBPVU7RT0tMX15PTA7aD0wO2w9cDtNPWE7dj1kO209MDt3PS0xO189MTw8ZDtTPV8tMTtpZih0PT09eiYmXz5EfHx0PT09JCYmXz5CKXtyZXR1cm4gMX1mb3IoOzspe1I9bC1tO2lmKHNbaF08RSl7az0wO0w9c1toXX1lbHNlIGlmKHNbaF0+RSl7az1BW2orc1toXV07TD1DW1Qrc1toXV19ZWxzZXtrPTMyKzY0O0w9MH1iPTE8PGwtbTt4PTE8PHY7cD14O2Rve3gtPWI7b1tNKyh5Pj5tKSt4XT1SPDwyNHxrPDwxNnxMfDB9d2hpbGUoeCE9PTApO2I9MTw8bC0xO3doaWxlKHkmYil7Yj4+PTF9aWYoYiE9PTApe3kmPWItMTt5Kz1ifWVsc2V7eT0wfWgrKztpZigtLU9bbF09PT0wKXtpZihsPT09Zil7YnJlYWt9bD1yW24rc1toXV19aWYobD5kJiYoeSZTKSE9PXcpe2lmKG09PT0wKXttPWR9TSs9cDt2PWwtbTtnPTE8PHY7d2hpbGUodittPGYpe2ctPU9bdittXTtpZihnPD0wKXticmVha312Kys7Zzw8PTF9Xys9MTw8djtpZih0PT09eiYmXz5EfHx0PT09JCYmXz5CKXtyZXR1cm4gMX13PXkmUztvW3ddPWQ8PDI0fHY8PDE2fE0tYXwwfX1pZih5IT09MCl7b1tNK3ldPWwtbTw8MjR8NjQ8PDE2fDB9dS5iaXRzPWQ7cmV0dXJuIDB9fSx7XCIuLi91dGlscy9jb21tb25cIjoyNn1dLDM2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPXsyOlwibmVlZCBkaWN0aW9uYXJ5XCIsMTpcInN0cmVhbSBlbmRcIiwwOlwiXCIsXCItMVwiOlwiZmlsZSBlcnJvclwiLFwiLTJcIjpcInN0cmVhbSBlcnJvclwiLFwiLTNcIjpcImRhdGEgZXJyb3JcIixcIi00XCI6XCJpbnN1ZmZpY2llbnQgbWVtb3J5XCIsXCItNVwiOlwiYnVmZmVyIGVycm9yXCIsXCItNlwiOlwiaW5jb21wYXRpYmxlIHZlcnNpb25cIn19LHt9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWUoXCIuLi91dGlscy9jb21tb25cIik7dmFyIHM9NDt2YXIgbj0wO3ZhciBvPTE7dmFyIHU9MjtmdW5jdGlvbiBhKGUpe3ZhciB0PWUubGVuZ3RoO3doaWxlKC0tdD49MCl7ZVt0XT0wfX12YXIgYz0wO3ZhciBsPTE7dmFyIGg9Mjt2YXIgcD0zO3ZhciBmPTI1ODt2YXIgZD0yOTt2YXIgdj0yNTY7dmFyIG09disxK2Q7dmFyIGc9MzA7dmFyIF89MTk7dmFyIHk9MiptKzE7dmFyIGI9MTU7dmFyIHg9MTY7dmFyIHc9Nzt2YXIgUz0yNTY7dmFyIE09MTY7dmFyIEM9MTc7dmFyIFQ9MTg7dmFyIEU9WzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF07dmFyIE89WzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdO3ZhciBQPVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XTt2YXIgQT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV07dmFyIGo9NTEyO3ZhciBSPW5ldyBBcnJheSgobSsyKSoyKTthKFIpO3ZhciBrPW5ldyBBcnJheShnKjIpO2Eoayk7dmFyIEw9bmV3IEFycmF5KGopO2EoTCk7dmFyIE49bmV3IEFycmF5KGYtcCsxKTthKE4pO3ZhciBJPW5ldyBBcnJheShkKTthKEkpO3ZhciBEPW5ldyBBcnJheShnKTthKEQpO2Z1bmN0aW9uIEIoZSx0LHIsbixpKXt0aGlzLnN0YXRpY190cmVlPWU7dGhpcy5leHRyYV9iaXRzPXQ7dGhpcy5leHRyYV9iYXNlPXI7dGhpcy5lbGVtcz1uO3RoaXMubWF4X2xlbmd0aD1pO3RoaXMuaGFzX3N0cmVlPWUmJmUubGVuZ3RofXZhciBGO3ZhciB6O3ZhciAkO2Z1bmN0aW9uIEcoZSx0KXt0aGlzLmR5bl90cmVlPWU7dGhpcy5tYXhfY29kZT0wO3RoaXMuc3RhdF9kZXNjPXR9ZnVuY3Rpb24gVihlKXtyZXR1cm4gZTwyNTY/TFtlXTpMWzI1NisoZT4+PjcpXX1mdW5jdGlvbiBIKGUsdCl7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109dCYyNTU7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109dD4+PjgmMjU1fWZ1bmN0aW9uIFUoZSx0LHIpe2lmKGUuYmlfdmFsaWQ+eC1yKXtlLmJpX2J1Znw9dDw8ZS5iaV92YWxpZCY2NTUzNTtIKGUsZS5iaV9idWYpO2UuYmlfYnVmPXQ+PngtZS5iaV92YWxpZDtlLmJpX3ZhbGlkKz1yLXh9ZWxzZXtlLmJpX2J1Znw9dDw8ZS5iaV92YWxpZCY2NTUzNTtlLmJpX3ZhbGlkKz1yfX1mdW5jdGlvbiBxKGUsdCxyKXtVKGUsclt0KjJdLHJbdCoyKzFdKX1mdW5jdGlvbiBXKGUsdCl7dmFyIHI9MDtkb3tyfD1lJjE7ZT4+Pj0xO3I8PD0xfXdoaWxlKC0tdD4wKTtyZXR1cm4gcj4+PjF9ZnVuY3Rpb24gWChlKXtpZihlLmJpX3ZhbGlkPT09MTYpe0goZSxlLmJpX2J1Zik7ZS5iaV9idWY9MDtlLmJpX3ZhbGlkPTB9ZWxzZSBpZihlLmJpX3ZhbGlkPj04KXtlLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXT1lLmJpX2J1ZiYyNTU7ZS5iaV9idWY+Pj04O2UuYmlfdmFsaWQtPTh9fWZ1bmN0aW9uIFkoZSx0KXt2YXIgcj10LmR5bl90cmVlO3ZhciBuPXQubWF4X2NvZGU7dmFyIGk9dC5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7dmFyIG89dC5zdGF0X2Rlc2MuaGFzX3N0cmVlO3ZhciBhPXQuc3RhdF9kZXNjLmV4dHJhX2JpdHM7dmFyIHM9dC5zdGF0X2Rlc2MuZXh0cmFfYmFzZTt2YXIgdT10LnN0YXRfZGVzYy5tYXhfbGVuZ3RoO3ZhciBjO3ZhciBsLGg7dmFyIHA7dmFyIGY7dmFyIGQ7dmFyIHY9MDtmb3IocD0wO3A8PWI7cCsrKXtlLmJsX2NvdW50W3BdPTB9cltlLmhlYXBbZS5oZWFwX21heF0qMisxXT0wO2ZvcihjPWUuaGVhcF9tYXgrMTtjPHk7YysrKXtsPWUuaGVhcFtjXTtwPXJbcltsKjIrMV0qMisxXSsxO2lmKHA+dSl7cD11O3YrK31yW2wqMisxXT1wO2lmKGw+bil7Y29udGludWV9ZS5ibF9jb3VudFtwXSsrO2Y9MDtpZihsPj1zKXtmPWFbbC1zXX1kPXJbbCoyXTtlLm9wdF9sZW4rPWQqKHArZik7aWYobyl7ZS5zdGF0aWNfbGVuKz1kKihpW2wqMisxXStmKX19aWYodj09PTApe3JldHVybn1kb3twPXUtMTt3aGlsZShlLmJsX2NvdW50W3BdPT09MCl7cC0tfWUuYmxfY291bnRbcF0tLTtlLmJsX2NvdW50W3ArMV0rPTI7ZS5ibF9jb3VudFt1XS0tO3YtPTJ9d2hpbGUodj4wKTtmb3IocD11O3AhPT0wO3AtLSl7bD1lLmJsX2NvdW50W3BdO3doaWxlKGwhPT0wKXtoPWUuaGVhcFstLWNdO2lmKGg+bil7Y29udGludWV9aWYocltoKjIrMV0hPT1wKXtlLm9wdF9sZW4rPShwLXJbaCoyKzFdKSpyW2gqMl07cltoKjIrMV09cH1sLS19fX1mdW5jdGlvbiBLKGUsdCxyKXt2YXIgbj1uZXcgQXJyYXkoYisxKTt2YXIgaT0wO3ZhciBvO3ZhciBhO2ZvcihvPTE7bzw9YjtvKyspe25bb109aT1pK3Jbby0xXTw8MX1mb3IoYT0wO2E8PXQ7YSsrKXt2YXIgcz1lW2EqMisxXTtpZihzPT09MCl7Y29udGludWV9ZVthKjJdPVcobltzXSsrLHMpfX1mdW5jdGlvbiBaKCl7dmFyIGU7dmFyIHQ7dmFyIHI7dmFyIG47dmFyIGk7dmFyIG89bmV3IEFycmF5KGIrMSk7cj0wO2ZvcihuPTA7bjxkLTE7bisrKXtJW25dPXI7Zm9yKGU9MDtlPDE8PEVbbl07ZSsrKXtOW3IrK109bn19TltyLTFdPW47aT0wO2ZvcihuPTA7bjwxNjtuKyspe0Rbbl09aTtmb3IoZT0wO2U8MTw8T1tuXTtlKyspe0xbaSsrXT1ufX1pPj49Nztmb3IoO248ZztuKyspe0Rbbl09aTw8Nztmb3IoZT0wO2U8MTw8T1tuXS03O2UrKyl7TFsyNTYraSsrXT1ufX1mb3IodD0wO3Q8PWI7dCsrKXtvW3RdPTB9ZT0wO3doaWxlKGU8PTE0Myl7UltlKjIrMV09ODtlKys7b1s4XSsrfXdoaWxlKGU8PTI1NSl7UltlKjIrMV09OTtlKys7b1s5XSsrfXdoaWxlKGU8PTI3OSl7UltlKjIrMV09NztlKys7b1s3XSsrfXdoaWxlKGU8PTI4Nyl7UltlKjIrMV09ODtlKys7b1s4XSsrfUsoUixtKzEsbyk7Zm9yKGU9MDtlPGc7ZSsrKXtrW2UqMisxXT01O2tbZSoyXT1XKGUsNSl9Rj1uZXcgQihSLEUsdisxLG0sYik7ej1uZXcgQihrLE8sMCxnLGIpOyQ9bmV3IEIobmV3IEFycmF5KDApLFAsMCxfLHcpfWZ1bmN0aW9uIEooZSl7dmFyIHQ7Zm9yKHQ9MDt0PG07dCsrKXtlLmR5bl9sdHJlZVt0KjJdPTB9Zm9yKHQ9MDt0PGc7dCsrKXtlLmR5bl9kdHJlZVt0KjJdPTB9Zm9yKHQ9MDt0PF87dCsrKXtlLmJsX3RyZWVbdCoyXT0wfWUuZHluX2x0cmVlW1MqMl09MTtlLm9wdF9sZW49ZS5zdGF0aWNfbGVuPTA7ZS5sYXN0X2xpdD1lLm1hdGNoZXM9MH1mdW5jdGlvbiBRKGUpe2lmKGUuYmlfdmFsaWQ+OCl7SChlLGUuYmlfYnVmKX1lbHNlIGlmKGUuYmlfdmFsaWQ+MCl7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109ZS5iaV9idWZ9ZS5iaV9idWY9MDtlLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gZWUoZSx0LHIsbil7UShlKTtpZihuKXtIKGUscik7SChlLH5yKX1pLmFycmF5U2V0KGUucGVuZGluZ19idWYsZS53aW5kb3csdCxyLGUucGVuZGluZyk7ZS5wZW5kaW5nKz1yfWZ1bmN0aW9uIHRlKGUsdCxyLG4pe3ZhciBpPXQqMjt2YXIgbz1yKjI7cmV0dXJuIGVbaV08ZVtvXXx8ZVtpXT09PWVbb10mJm5bdF08PW5bcl19ZnVuY3Rpb24gcmUoZSx0LHIpe3ZhciBuPWUuaGVhcFtyXTt2YXIgaT1yPDwxO3doaWxlKGk8PWUuaGVhcF9sZW4pe2lmKGk8ZS5oZWFwX2xlbiYmdGUodCxlLmhlYXBbaSsxXSxlLmhlYXBbaV0sZS5kZXB0aCkpe2krK31pZih0ZSh0LG4sZS5oZWFwW2ldLGUuZGVwdGgpKXticmVha31lLmhlYXBbcl09ZS5oZWFwW2ldO3I9aTtpPDw9MX1lLmhlYXBbcl09bn1mdW5jdGlvbiBuZShlLHQscil7dmFyIG47dmFyIGk7dmFyIG89MDt2YXIgYTt2YXIgcztpZihlLmxhc3RfbGl0IT09MCl7ZG97bj1lLnBlbmRpbmdfYnVmW2UuZF9idWYrbyoyXTw8OHxlLnBlbmRpbmdfYnVmW2UuZF9idWYrbyoyKzFdO2k9ZS5wZW5kaW5nX2J1ZltlLmxfYnVmK29dO28rKztpZihuPT09MCl7cShlLGksdCl9ZWxzZXthPU5baV07cShlLGErdisxLHQpO3M9RVthXTtpZihzIT09MCl7aS09SVthXTtVKGUsaSxzKX1uLS07YT1WKG4pO3EoZSxhLHIpO3M9T1thXTtpZihzIT09MCl7bi09RFthXTtVKGUsbixzKX19fXdoaWxlKG88ZS5sYXN0X2xpdCl9cShlLFMsdCl9ZnVuY3Rpb24gaWUoZSx0KXt2YXIgcj10LmR5bl90cmVlO3ZhciBuPXQuc3RhdF9kZXNjLnN0YXRpY190cmVlO3ZhciBpPXQuc3RhdF9kZXNjLmhhc19zdHJlZTt2YXIgbz10LnN0YXRfZGVzYy5lbGVtczt2YXIgYSxzO3ZhciB1PS0xO3ZhciBjO2UuaGVhcF9sZW49MDtlLmhlYXBfbWF4PXk7Zm9yKGE9MDthPG87YSsrKXtpZihyW2EqMl0hPT0wKXtlLmhlYXBbKytlLmhlYXBfbGVuXT11PWE7ZS5kZXB0aFthXT0wfWVsc2V7clthKjIrMV09MH19d2hpbGUoZS5oZWFwX2xlbjwyKXtjPWUuaGVhcFsrK2UuaGVhcF9sZW5dPXU8Mj8rK3U6MDtyW2MqMl09MTtlLmRlcHRoW2NdPTA7ZS5vcHRfbGVuLS07aWYoaSl7ZS5zdGF0aWNfbGVuLT1uW2MqMisxXX19dC5tYXhfY29kZT11O2ZvcihhPWUuaGVhcF9sZW4+PjE7YT49MTthLS0pe3JlKGUscixhKX1jPW87ZG97YT1lLmhlYXBbMV07ZS5oZWFwWzFdPWUuaGVhcFtlLmhlYXBfbGVuLS1dO3JlKGUsciwxKTtzPWUuaGVhcFsxXTtlLmhlYXBbLS1lLmhlYXBfbWF4XT1hO2UuaGVhcFstLWUuaGVhcF9tYXhdPXM7cltjKjJdPXJbYSoyXStyW3MqMl07ZS5kZXB0aFtjXT0oZS5kZXB0aFthXT49ZS5kZXB0aFtzXT9lLmRlcHRoW2FdOmUuZGVwdGhbc10pKzE7clthKjIrMV09cltzKjIrMV09YztlLmhlYXBbMV09YysrO3JlKGUsciwxKX13aGlsZShlLmhlYXBfbGVuPj0yKTtlLmhlYXBbLS1lLmhlYXBfbWF4XT1lLmhlYXBbMV07WShlLHQpO0socix1LGUuYmxfY291bnQpfWZ1bmN0aW9uIG9lKGUsdCxyKXt2YXIgbjt2YXIgaT0tMTt2YXIgbzt2YXIgYT10WzAqMisxXTt2YXIgcz0wO3ZhciB1PTc7dmFyIGM9NDtpZihhPT09MCl7dT0xMzg7Yz0zfXRbKHIrMSkqMisxXT02NTUzNTtmb3Iobj0wO248PXI7bisrKXtvPWE7YT10WyhuKzEpKjIrMV07aWYoKytzPHUmJm89PT1hKXtjb250aW51ZX1lbHNlIGlmKHM8Yyl7ZS5ibF90cmVlW28qMl0rPXN9ZWxzZSBpZihvIT09MCl7aWYobyE9PWkpe2UuYmxfdHJlZVtvKjJdKyt9ZS5ibF90cmVlW00qMl0rK31lbHNlIGlmKHM8PTEwKXtlLmJsX3RyZWVbQyoyXSsrfWVsc2V7ZS5ibF90cmVlW1QqMl0rK31zPTA7aT1vO2lmKGE9PT0wKXt1PTEzODtjPTN9ZWxzZSBpZihvPT09YSl7dT02O2M9M31lbHNle3U9NztjPTR9fX1mdW5jdGlvbiBhZShlLHQscil7dmFyIG47dmFyIGk9LTE7dmFyIG87dmFyIGE9dFswKjIrMV07dmFyIHM9MDt2YXIgdT03O3ZhciBjPTQ7aWYoYT09PTApe3U9MTM4O2M9M31mb3Iobj0wO248PXI7bisrKXtvPWE7YT10WyhuKzEpKjIrMV07aWYoKytzPHUmJm89PT1hKXtjb250aW51ZX1lbHNlIGlmKHM8Yyl7ZG97cShlLG8sZS5ibF90cmVlKX13aGlsZSgtLXMhPT0wKX1lbHNlIGlmKG8hPT0wKXtpZihvIT09aSl7cShlLG8sZS5ibF90cmVlKTtzLS19cShlLE0sZS5ibF90cmVlKTtVKGUscy0zLDIpfWVsc2UgaWYoczw9MTApe3EoZSxDLGUuYmxfdHJlZSk7VShlLHMtMywzKX1lbHNle3EoZSxULGUuYmxfdHJlZSk7VShlLHMtMTEsNyl9cz0wO2k9bztpZihhPT09MCl7dT0xMzg7Yz0zfWVsc2UgaWYobz09PWEpe3U9NjtjPTN9ZWxzZXt1PTc7Yz00fX19ZnVuY3Rpb24gc2UoZSl7dmFyIHQ7b2UoZSxlLmR5bl9sdHJlZSxlLmxfZGVzYy5tYXhfY29kZSk7b2UoZSxlLmR5bl9kdHJlZSxlLmRfZGVzYy5tYXhfY29kZSk7aWUoZSxlLmJsX2Rlc2MpO2Zvcih0PV8tMTt0Pj0zO3QtLSl7aWYoZS5ibF90cmVlW0FbdF0qMisxXSE9PTApe2JyZWFrfX1lLm9wdF9sZW4rPTMqKHQrMSkrNSs1KzQ7cmV0dXJuIHR9ZnVuY3Rpb24gdWUoZSx0LHIsbil7dmFyIGk7VShlLHQtMjU3LDUpO1UoZSxyLTEsNSk7VShlLG4tNCw0KTtmb3IoaT0wO2k8bjtpKyspe1UoZSxlLmJsX3RyZWVbQVtpXSoyKzFdLDMpfWFlKGUsZS5keW5fbHRyZWUsdC0xKTthZShlLGUuZHluX2R0cmVlLHItMSl9ZnVuY3Rpb24gY2UoZSl7dmFyIHQ9NDA5MzYyNDQ0Nzt2YXIgcjtmb3Iocj0wO3I8PTMxO3IrKyx0Pj4+PTEpe2lmKHQmMSYmZS5keW5fbHRyZWVbcioyXSE9PTApe3JldHVybiBufX1pZihlLmR5bl9sdHJlZVs5KjJdIT09MHx8ZS5keW5fbHRyZWVbMTAqMl0hPT0wfHxlLmR5bl9sdHJlZVsxMyoyXSE9PTApe3JldHVybiBvfWZvcihyPTMyO3I8djtyKyspe2lmKGUuZHluX2x0cmVlW3IqMl0hPT0wKXtyZXR1cm4gb319cmV0dXJuIG59dmFyIGxlPWZhbHNlO2Z1bmN0aW9uIGhlKGUpe2lmKCFsZSl7WigpO2xlPXRydWV9ZS5sX2Rlc2M9bmV3IEcoZS5keW5fbHRyZWUsRik7ZS5kX2Rlc2M9bmV3IEcoZS5keW5fZHRyZWUseik7ZS5ibF9kZXNjPW5ldyBHKGUuYmxfdHJlZSwkKTtlLmJpX2J1Zj0wO2UuYmlfdmFsaWQ9MDtKKGUpfWZ1bmN0aW9uIHBlKGUsdCxyLG4pe1UoZSwoYzw8MSkrKG4/MTowKSwzKTtlZShlLHQscix0cnVlKX1mdW5jdGlvbiBmZShlKXtVKGUsbDw8MSwzKTtxKGUsUyxSKTtYKGUpfWZ1bmN0aW9uIGRlKGUsdCxyLG4pe3ZhciBpLG87dmFyIGE9MDtpZihlLmxldmVsPjApe2lmKGUuc3RybS5kYXRhX3R5cGU9PT11KXtlLnN0cm0uZGF0YV90eXBlPWNlKGUpfWllKGUsZS5sX2Rlc2MpO2llKGUsZS5kX2Rlc2MpO2E9c2UoZSk7aT1lLm9wdF9sZW4rMys3Pj4+MztvPWUuc3RhdGljX2xlbiszKzc+Pj4zO2lmKG88PWkpe2k9b319ZWxzZXtpPW89cis1fWlmKHIrNDw9aSYmdCE9PS0xKXtwZShlLHQscixuKX1lbHNlIGlmKGUuc3RyYXRlZ3k9PT1zfHxvPT09aSl7VShlLChsPDwxKSsobj8xOjApLDMpO25lKGUsUixrKX1lbHNle1UoZSwoaDw8MSkrKG4/MTowKSwzKTt1ZShlLGUubF9kZXNjLm1heF9jb2RlKzEsZS5kX2Rlc2MubWF4X2NvZGUrMSxhKzEpO25lKGUsZS5keW5fbHRyZWUsZS5keW5fZHRyZWUpfUooZSk7aWYobil7UShlKX19ZnVuY3Rpb24gdmUoZSx0LHIpe2UucGVuZGluZ19idWZbZS5kX2J1ZitlLmxhc3RfbGl0KjJdPXQ+Pj44JjI1NTtlLnBlbmRpbmdfYnVmW2UuZF9idWYrZS5sYXN0X2xpdCoyKzFdPXQmMjU1O2UucGVuZGluZ19idWZbZS5sX2J1ZitlLmxhc3RfbGl0XT1yJjI1NTtlLmxhc3RfbGl0Kys7aWYodD09PTApe2UuZHluX2x0cmVlW3IqMl0rK31lbHNle2UubWF0Y2hlcysrO3QtLTtlLmR5bl9sdHJlZVsoTltyXSt2KzEpKjJdKys7ZS5keW5fZHRyZWVbVih0KSoyXSsrfXJldHVybiBlLmxhc3RfbGl0PT09ZS5saXRfYnVmc2l6ZS0xfXIuX3RyX2luaXQ9aGU7ci5fdHJfc3RvcmVkX2Jsb2NrPXBlO3IuX3RyX2ZsdXNoX2Jsb2NrPWRlO3IuX3RyX3RhbGx5PXZlO3IuX3RyX2FsaWduPWZlfSx7XCIuLi91dGlscy9jb21tb25cIjoyNn1dLDM4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe3RoaXMuaW5wdXQ9bnVsbDt0aGlzLm5leHRfaW49MDt0aGlzLmF2YWlsX2luPTA7dGhpcy50b3RhbF9pbj0wO3RoaXMub3V0cHV0PW51bGw7dGhpcy5uZXh0X291dD0wO3RoaXMuYXZhaWxfb3V0PTA7dGhpcy50b3RhbF9vdXQ9MDt0aGlzLm1zZz1cIlwiO3RoaXMuc3RhdGU9bnVsbDt0aGlzLmRhdGFfdHlwZT0yO3RoaXMuYWRsZXI9MH10LmV4cG9ydHM9bn0se31dLDM5OltmdW5jdGlvbihlLHQsYyl7KGZ1bmN0aW9uKGkpe2Z1bmN0aW9uIG8oZSx0KXt2YXIgcj0wO2Zvcih2YXIgbj1lLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgaT1lW25dO2lmKGk9PT1cIi5cIil7ZS5zcGxpY2UobiwxKX1lbHNlIGlmKGk9PT1cIi4uXCIpe2Uuc3BsaWNlKG4sMSk7cisrfWVsc2UgaWYocil7ZS5zcGxpY2UobiwxKTtyLS19fWlmKHQpe2Zvcig7ci0tO3Ipe2UudW5zaGlmdChcIi4uXCIpfX1yZXR1cm4gZX12YXIgdD0vXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLzt2YXIgYT1mdW5jdGlvbihlKXtyZXR1cm4gdC5leGVjKGUpLnNsaWNlKDEpfTtjLnJlc29sdmU9ZnVuY3Rpb24oKXt2YXIgZT1cIlwiLHQ9ZmFsc2U7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgtMTtyPj0tMSYmIXQ7ci0tKXt2YXIgbj1yPj0wP2FyZ3VtZW50c1tyXTppLmN3ZCgpO2lmKHR5cGVvZiBuIT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzXCIpfWVsc2UgaWYoIW4pe2NvbnRpbnVlfWU9bitcIi9cIitlO3Q9bi5jaGFyQXQoMCk9PT1cIi9cIn1lPW8ocyhlLnNwbGl0KFwiL1wiKSxmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSwhdCkuam9pbihcIi9cIik7cmV0dXJuKHQ/XCIvXCI6XCJcIikrZXx8XCIuXCJ9O2Mubm9ybWFsaXplPWZ1bmN0aW9uKGUpe3ZhciB0PWMuaXNBYnNvbHV0ZShlKSxyPW4oZSwtMSk9PT1cIi9cIjtlPW8ocyhlLnNwbGl0KFwiL1wiKSxmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSwhdCkuam9pbihcIi9cIik7aWYoIWUmJiF0KXtlPVwiLlwifWlmKGUmJnIpe2UrPVwiL1wifXJldHVybih0P1wiL1wiOlwiXCIpK2V9O2MuaXNBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCk9PT1cIi9cIn07Yy5qb2luPWZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBjLm5vcm1hbGl6ZShzKGUsZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZSE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5nc1wiKX1yZXR1cm4gZX0pLmpvaW4oXCIvXCIpKX07Yy5yZWxhdGl2ZT1mdW5jdGlvbihlLHQpe2U9Yy5yZXNvbHZlKGUpLnN1YnN0cigxKTt0PWMucmVzb2x2ZSh0KS5zdWJzdHIoMSk7ZnVuY3Rpb24gcihlKXt2YXIgdD0wO2Zvcig7dDxlLmxlbmd0aDt0Kyspe2lmKGVbdF0hPT1cIlwiKWJyZWFrfXZhciByPWUubGVuZ3RoLTE7Zm9yKDtyPj0wO3ItLSl7aWYoZVtyXSE9PVwiXCIpYnJlYWt9aWYodD5yKXJldHVybltdO3JldHVybiBlLnNsaWNlKHQsci10KzEpfXZhciBuPXIoZS5zcGxpdChcIi9cIikpO3ZhciBpPXIodC5zcGxpdChcIi9cIikpO3ZhciBvPU1hdGgubWluKG4ubGVuZ3RoLGkubGVuZ3RoKTt2YXIgYT1vO2Zvcih2YXIgcz0wO3M8bztzKyspe2lmKG5bc10hPT1pW3NdKXthPXM7YnJlYWt9fXZhciB1PVtdO2Zvcih2YXIgcz1hO3M8bi5sZW5ndGg7cysrKXt1LnB1c2goXCIuLlwiKX11PXUuY29uY2F0KGkuc2xpY2UoYSkpO3JldHVybiB1LmpvaW4oXCIvXCIpfTtjLnNlcD1cIi9cIjtjLmRlbGltaXRlcj1cIjpcIjtjLmRpcm5hbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9YShlKSxyPXRbMF0sbj10WzFdO2lmKCFyJiYhbil7cmV0dXJuXCIuXCJ9aWYobil7bj1uLnN1YnN0cigwLG4ubGVuZ3RoLTEpfXJldHVybiByK259O2MuYmFzZW5hbWU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1hKGUpWzJdO2lmKHQmJnIuc3Vic3RyKC0xKnQubGVuZ3RoKT09PXQpe3I9ci5zdWJzdHIoMCxyLmxlbmd0aC10Lmxlbmd0aCl9cmV0dXJuIHJ9O2MuZXh0bmFtZT1mdW5jdGlvbihlKXtyZXR1cm4gYShlKVszXX07ZnVuY3Rpb24gcyhlLHQpe2lmKGUuZmlsdGVyKXJldHVybiBlLmZpbHRlcih0KTt2YXIgcj1bXTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7aWYodChlW25dLG4sZSkpci5wdXNoKGVbbl0pfXJldHVybiByfXZhciBuPVwiYWJcIi5zdWJzdHIoLTEpPT09XCJiXCI/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLnN1YnN0cih0LHIpfTpmdW5jdGlvbihlLHQscil7aWYodDwwKXQ9ZS5sZW5ndGgrdDtyZXR1cm4gZS5zdWJzdHIodCxyKX19KS5jYWxsKHRoaXMsZShcIl9wcm9jZXNzXCIpKX0se19wcm9jZXNzOjd9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1pO3ZhciBuPWUoXCJpZWVlNzU0XCIpO2Z1bmN0aW9uIGkoZSl7dGhpcy5idWY9QXJyYXlCdWZmZXIuaXNWaWV3JiZBcnJheUJ1ZmZlci5pc1ZpZXcoZSk/ZTpuZXcgVWludDhBcnJheShlfHwwKTt0aGlzLnBvcz0wO3RoaXMudHlwZT0wO3RoaXMubGVuZ3RoPXRoaXMuYnVmLmxlbmd0aH1pLlZhcmludD0wO2kuRml4ZWQ2ND0xO2kuQnl0ZXM9MjtpLkZpeGVkMzI9NTt2YXIgbz0oMTw8MTYpKigxPDwxNiksYT0xL287dmFyIHM9MTI7dmFyIHU9dHlwZW9mIFRleHREZWNvZGVyPT09XCJ1bmRlZmluZWRcIj9udWxsOm5ldyBUZXh0RGVjb2RlcihcInV0ZjhcIik7aS5wcm90b3R5cGU9e2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJ1Zj1udWxsfSxyZWFkRmllbGRzOmZ1bmN0aW9uKGUsdCxyKXtyPXJ8fHRoaXMubGVuZ3RoO3doaWxlKHRoaXMucG9zPHIpe3ZhciBuPXRoaXMucmVhZFZhcmludCgpLGk9bj4+MyxvPXRoaXMucG9zO3RoaXMudHlwZT1uJjc7ZShpLHQsdGhpcyk7aWYodGhpcy5wb3M9PT1vKXRoaXMuc2tpcChuKX1yZXR1cm4gdH0scmVhZE1lc3NhZ2U6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWFkRmllbGRzKGUsdCx0aGlzLnJlYWRWYXJpbnQoKSt0aGlzLnBvcyl9LHJlYWRGaXhlZDMyOmZ1bmN0aW9uKCl7dmFyIGU9Qyh0aGlzLmJ1Zix0aGlzLnBvcyk7dGhpcy5wb3MrPTQ7cmV0dXJuIGV9LHJlYWRTRml4ZWQzMjpmdW5jdGlvbigpe3ZhciBlPUUodGhpcy5idWYsdGhpcy5wb3MpO3RoaXMucG9zKz00O3JldHVybiBlfSxyZWFkRml4ZWQ2NDpmdW5jdGlvbigpe3ZhciBlPUModGhpcy5idWYsdGhpcy5wb3MpK0ModGhpcy5idWYsdGhpcy5wb3MrNCkqbzt0aGlzLnBvcys9ODtyZXR1cm4gZX0scmVhZFNGaXhlZDY0OmZ1bmN0aW9uKCl7dmFyIGU9Qyh0aGlzLmJ1Zix0aGlzLnBvcykrRSh0aGlzLmJ1Zix0aGlzLnBvcys0KSpvO3RoaXMucG9zKz04O3JldHVybiBlfSxyZWFkRmxvYXQ6ZnVuY3Rpb24oKXt2YXIgZT1uLnJlYWQodGhpcy5idWYsdGhpcy5wb3MsdHJ1ZSwyMyw0KTt0aGlzLnBvcys9NDtyZXR1cm4gZX0scmVhZERvdWJsZTpmdW5jdGlvbigpe3ZhciBlPW4ucmVhZCh0aGlzLmJ1Zix0aGlzLnBvcyx0cnVlLDUyLDgpO3RoaXMucG9zKz04O3JldHVybiBlfSxyZWFkVmFyaW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmLHIsbjtuPXRbdGhpcy5wb3MrK107cj1uJjEyNztpZihuPDEyOClyZXR1cm4gcjtuPXRbdGhpcy5wb3MrK107cnw9KG4mMTI3KTw8NztpZihuPDEyOClyZXR1cm4gcjtuPXRbdGhpcy5wb3MrK107cnw9KG4mMTI3KTw8MTQ7aWYobjwxMjgpcmV0dXJuIHI7bj10W3RoaXMucG9zKytdO3J8PShuJjEyNyk8PDIxO2lmKG48MTI4KXJldHVybiByO249dFt0aGlzLnBvc107cnw9KG4mMTUpPDwyODtyZXR1cm4gYyhyLGUsdGhpcyl9LHJlYWRWYXJpbnQ2NDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRWYXJpbnQodHJ1ZSl9LHJlYWRTVmFyaW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZWFkVmFyaW50KCk7cmV0dXJuIGUlMj09PTE/KGUrMSkvLTI6ZS8yfSxyZWFkQm9vbGVhbjpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMucmVhZFZhcmludCgpKX0scmVhZFN0cmluZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVhZFZhcmludCgpK3RoaXMucG9zO3ZhciB0PXRoaXMucG9zO3RoaXMucG9zPWU7aWYoZS10Pj1zJiZ1KXtyZXR1cm4gUCh0aGlzLmJ1Zix0LGUpfXJldHVybiBPKHRoaXMuYnVmLHQsZSl9LHJlYWRCeXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVhZFZhcmludCgpK3RoaXMucG9zLHQ9dGhpcy5idWYuc3ViYXJyYXkodGhpcy5wb3MsZSk7dGhpcy5wb3M9ZTtyZXR1cm4gdH0scmVhZFBhY2tlZFZhcmludDpmdW5jdGlvbihlLHQpe2lmKHRoaXMudHlwZSE9PWkuQnl0ZXMpcmV0dXJuIGUucHVzaCh0aGlzLnJlYWRWYXJpbnQodCkpO3ZhciByPWwodGhpcyk7ZT1lfHxbXTt3aGlsZSh0aGlzLnBvczxyKWUucHVzaCh0aGlzLnJlYWRWYXJpbnQodCkpO3JldHVybiBlfSxyZWFkUGFja2VkU1ZhcmludDpmdW5jdGlvbihlKXtpZih0aGlzLnR5cGUhPT1pLkJ5dGVzKXJldHVybiBlLnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTt2YXIgdD1sKHRoaXMpO2U9ZXx8W107d2hpbGUodGhpcy5wb3M8dCllLnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtyZXR1cm4gZX0scmVhZFBhY2tlZEJvb2xlYW46ZnVuY3Rpb24oZSl7aWYodGhpcy50eXBlIT09aS5CeXRlcylyZXR1cm4gZS5wdXNoKHRoaXMucmVhZEJvb2xlYW4oKSk7dmFyIHQ9bCh0aGlzKTtlPWV8fFtdO3doaWxlKHRoaXMucG9zPHQpZS5wdXNoKHRoaXMucmVhZEJvb2xlYW4oKSk7cmV0dXJuIGV9LHJlYWRQYWNrZWRGbG9hdDpmdW5jdGlvbihlKXtpZih0aGlzLnR5cGUhPT1pLkJ5dGVzKXJldHVybiBlLnB1c2godGhpcy5yZWFkRmxvYXQoKSk7dmFyIHQ9bCh0aGlzKTtlPWV8fFtdO3doaWxlKHRoaXMucG9zPHQpZS5wdXNoKHRoaXMucmVhZEZsb2F0KCkpO3JldHVybiBlfSxyZWFkUGFja2VkRG91YmxlOmZ1bmN0aW9uKGUpe2lmKHRoaXMudHlwZSE9PWkuQnl0ZXMpcmV0dXJuIGUucHVzaCh0aGlzLnJlYWREb3VibGUoKSk7dmFyIHQ9bCh0aGlzKTtlPWV8fFtdO3doaWxlKHRoaXMucG9zPHQpZS5wdXNoKHRoaXMucmVhZERvdWJsZSgpKTtyZXR1cm4gZX0scmVhZFBhY2tlZEZpeGVkMzI6ZnVuY3Rpb24oZSl7aWYodGhpcy50eXBlIT09aS5CeXRlcylyZXR1cm4gZS5wdXNoKHRoaXMucmVhZEZpeGVkMzIoKSk7dmFyIHQ9bCh0aGlzKTtlPWV8fFtdO3doaWxlKHRoaXMucG9zPHQpZS5wdXNoKHRoaXMucmVhZEZpeGVkMzIoKSk7cmV0dXJuIGV9LHJlYWRQYWNrZWRTRml4ZWQzMjpmdW5jdGlvbihlKXtpZih0aGlzLnR5cGUhPT1pLkJ5dGVzKXJldHVybiBlLnB1c2godGhpcy5yZWFkU0ZpeGVkMzIoKSk7dmFyIHQ9bCh0aGlzKTtlPWV8fFtdO3doaWxlKHRoaXMucG9zPHQpZS5wdXNoKHRoaXMucmVhZFNGaXhlZDMyKCkpO3JldHVybiBlfSxyZWFkUGFja2VkRml4ZWQ2NDpmdW5jdGlvbihlKXtpZih0aGlzLnR5cGUhPT1pLkJ5dGVzKXJldHVybiBlLnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTt2YXIgdD1sKHRoaXMpO2U9ZXx8W107d2hpbGUodGhpcy5wb3M8dCllLnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTtyZXR1cm4gZX0scmVhZFBhY2tlZFNGaXhlZDY0OmZ1bmN0aW9uKGUpe2lmKHRoaXMudHlwZSE9PWkuQnl0ZXMpcmV0dXJuIGUucHVzaCh0aGlzLnJlYWRTRml4ZWQ2NCgpKTt2YXIgdD1sKHRoaXMpO2U9ZXx8W107d2hpbGUodGhpcy5wb3M8dCllLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7cmV0dXJuIGV9LHNraXA6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSY3O2lmKHQ9PT1pLlZhcmludCl3aGlsZSh0aGlzLmJ1Zlt0aGlzLnBvcysrXT4xMjcpe31lbHNlIGlmKHQ9PT1pLkJ5dGVzKXRoaXMucG9zPXRoaXMucmVhZFZhcmludCgpK3RoaXMucG9zO2Vsc2UgaWYodD09PWkuRml4ZWQzMil0aGlzLnBvcys9NDtlbHNlIGlmKHQ9PT1pLkZpeGVkNjQpdGhpcy5wb3MrPTg7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbmltcGxlbWVudGVkIHR5cGU6IFwiK3QpfSx3cml0ZVRhZzpmdW5jdGlvbihlLHQpe3RoaXMud3JpdGVWYXJpbnQoZTw8M3x0KX0scmVhbGxvYzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aHx8MTY7d2hpbGUodDx0aGlzLnBvcytlKXQqPTI7aWYodCE9PXRoaXMubGVuZ3RoKXt2YXIgcj1uZXcgVWludDhBcnJheSh0KTtyLnNldCh0aGlzLmJ1Zik7dGhpcy5idWY9cjt0aGlzLmxlbmd0aD10fX0sZmluaXNoOmZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9dGhpcy5wb3M7dGhpcy5wb3M9MDtyZXR1cm4gdGhpcy5idWYuc3ViYXJyYXkoMCx0aGlzLmxlbmd0aCl9LHdyaXRlRml4ZWQzMjpmdW5jdGlvbihlKXt0aGlzLnJlYWxsb2MoNCk7VCh0aGlzLmJ1ZixlLHRoaXMucG9zKTt0aGlzLnBvcys9NH0sd3JpdGVTRml4ZWQzMjpmdW5jdGlvbihlKXt0aGlzLnJlYWxsb2MoNCk7VCh0aGlzLmJ1ZixlLHRoaXMucG9zKTt0aGlzLnBvcys9NH0sd3JpdGVGaXhlZDY0OmZ1bmN0aW9uKGUpe3RoaXMucmVhbGxvYyg4KTtUKHRoaXMuYnVmLGUmLTEsdGhpcy5wb3MpO1QodGhpcy5idWYsTWF0aC5mbG9vcihlKmEpLHRoaXMucG9zKzQpO3RoaXMucG9zKz04fSx3cml0ZVNGaXhlZDY0OmZ1bmN0aW9uKGUpe3RoaXMucmVhbGxvYyg4KTtUKHRoaXMuYnVmLGUmLTEsdGhpcy5wb3MpO1QodGhpcy5idWYsTWF0aC5mbG9vcihlKmEpLHRoaXMucG9zKzQpO3RoaXMucG9zKz04fSx3cml0ZVZhcmludDpmdW5jdGlvbihlKXtlPStlfHwwO2lmKGU+MjY4NDM1NDU1fHxlPDApe3AoZSx0aGlzKTtyZXR1cm59dGhpcy5yZWFsbG9jKDQpO3RoaXMuYnVmW3RoaXMucG9zKytdPWUmMTI3fChlPjEyNz8xMjg6MCk7aWYoZTw9MTI3KXJldHVybjt0aGlzLmJ1Zlt0aGlzLnBvcysrXT0oZT4+Pj03KSYxMjd8KGU+MTI3PzEyODowKTtpZihlPD0xMjcpcmV0dXJuO3RoaXMuYnVmW3RoaXMucG9zKytdPShlPj4+PTcpJjEyN3woZT4xMjc/MTI4OjApO2lmKGU8PTEyNylyZXR1cm47dGhpcy5idWZbdGhpcy5wb3MrK109ZT4+PjcmMTI3fSx3cml0ZVNWYXJpbnQ6ZnVuY3Rpb24oZSl7dGhpcy53cml0ZVZhcmludChlPDA/LWUqMi0xOmUqMil9LHdyaXRlQm9vbGVhbjpmdW5jdGlvbihlKXt0aGlzLndyaXRlVmFyaW50KEJvb2xlYW4oZSkpfSx3cml0ZVN0cmluZzpmdW5jdGlvbihlKXtlPVN0cmluZyhlKTt0aGlzLnJlYWxsb2MoZS5sZW5ndGgqNCk7dGhpcy5wb3MrKzt2YXIgdD10aGlzLnBvczt0aGlzLnBvcz1BKHRoaXMuYnVmLGUsdGhpcy5wb3MpO3ZhciByPXRoaXMucG9zLXQ7aWYocj49MTI4KXYodCxyLHRoaXMpO3RoaXMucG9zPXQtMTt0aGlzLndyaXRlVmFyaW50KHIpO3RoaXMucG9zKz1yfSx3cml0ZUZsb2F0OmZ1bmN0aW9uKGUpe3RoaXMucmVhbGxvYyg0KTtuLndyaXRlKHRoaXMuYnVmLGUsdGhpcy5wb3MsdHJ1ZSwyMyw0KTt0aGlzLnBvcys9NH0sd3JpdGVEb3VibGU6ZnVuY3Rpb24oZSl7dGhpcy5yZWFsbG9jKDgpO24ud3JpdGUodGhpcy5idWYsZSx0aGlzLnBvcyx0cnVlLDUyLDgpO3RoaXMucG9zKz04fSx3cml0ZUJ5dGVzOmZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoO3RoaXMud3JpdGVWYXJpbnQodCk7dGhpcy5yZWFsbG9jKHQpO2Zvcih2YXIgcj0wO3I8dDtyKyspdGhpcy5idWZbdGhpcy5wb3MrK109ZVtyXX0sd3JpdGVSYXdNZXNzYWdlOmZ1bmN0aW9uKGUsdCl7dGhpcy5wb3MrKzt2YXIgcj10aGlzLnBvcztlKHQsdGhpcyk7dmFyIG49dGhpcy5wb3MtcjtpZihuPj0xMjgpdihyLG4sdGhpcyk7dGhpcy5wb3M9ci0xO3RoaXMud3JpdGVWYXJpbnQobik7dGhpcy5wb3MrPW59LHdyaXRlTWVzc2FnZTpmdW5jdGlvbihlLHQscil7dGhpcy53cml0ZVRhZyhlLGkuQnl0ZXMpO3RoaXMud3JpdGVSYXdNZXNzYWdlKHQscil9LHdyaXRlUGFja2VkVmFyaW50OmZ1bmN0aW9uKGUsdCl7aWYodC5sZW5ndGgpdGhpcy53cml0ZU1lc3NhZ2UoZSxtLHQpfSx3cml0ZVBhY2tlZFNWYXJpbnQ6ZnVuY3Rpb24oZSx0KXtpZih0Lmxlbmd0aCl0aGlzLndyaXRlTWVzc2FnZShlLGcsdCl9LHdyaXRlUGFja2VkQm9vbGVhbjpmdW5jdGlvbihlLHQpe2lmKHQubGVuZ3RoKXRoaXMud3JpdGVNZXNzYWdlKGUsYix0KX0sd3JpdGVQYWNrZWRGbG9hdDpmdW5jdGlvbihlLHQpe2lmKHQubGVuZ3RoKXRoaXMud3JpdGVNZXNzYWdlKGUsXyx0KX0sd3JpdGVQYWNrZWREb3VibGU6ZnVuY3Rpb24oZSx0KXtpZih0Lmxlbmd0aCl0aGlzLndyaXRlTWVzc2FnZShlLHksdCl9LHdyaXRlUGFja2VkRml4ZWQzMjpmdW5jdGlvbihlLHQpe2lmKHQubGVuZ3RoKXRoaXMud3JpdGVNZXNzYWdlKGUseCx0KX0sd3JpdGVQYWNrZWRTRml4ZWQzMjpmdW5jdGlvbihlLHQpe2lmKHQubGVuZ3RoKXRoaXMud3JpdGVNZXNzYWdlKGUsdyx0KX0sd3JpdGVQYWNrZWRGaXhlZDY0OmZ1bmN0aW9uKGUsdCl7aWYodC5sZW5ndGgpdGhpcy53cml0ZU1lc3NhZ2UoZSxTLHQpfSx3cml0ZVBhY2tlZFNGaXhlZDY0OmZ1bmN0aW9uKGUsdCl7aWYodC5sZW5ndGgpdGhpcy53cml0ZU1lc3NhZ2UoZSxNLHQpfSx3cml0ZUJ5dGVzRmllbGQ6ZnVuY3Rpb24oZSx0KXt0aGlzLndyaXRlVGFnKGUsaS5CeXRlcyk7dGhpcy53cml0ZUJ5dGVzKHQpfSx3cml0ZUZpeGVkMzJGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXMud3JpdGVUYWcoZSxpLkZpeGVkMzIpO3RoaXMud3JpdGVGaXhlZDMyKHQpfSx3cml0ZVNGaXhlZDMyRmllbGQ6ZnVuY3Rpb24oZSx0KXt0aGlzLndyaXRlVGFnKGUsaS5GaXhlZDMyKTt0aGlzLndyaXRlU0ZpeGVkMzIodCl9LHdyaXRlRml4ZWQ2NEZpZWxkOmZ1bmN0aW9uKGUsdCl7dGhpcy53cml0ZVRhZyhlLGkuRml4ZWQ2NCk7dGhpcy53cml0ZUZpeGVkNjQodCl9LHdyaXRlU0ZpeGVkNjRGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXMud3JpdGVUYWcoZSxpLkZpeGVkNjQpO3RoaXMud3JpdGVTRml4ZWQ2NCh0KX0sd3JpdGVWYXJpbnRGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXMud3JpdGVUYWcoZSxpLlZhcmludCk7dGhpcy53cml0ZVZhcmludCh0KX0sd3JpdGVTVmFyaW50RmllbGQ6ZnVuY3Rpb24oZSx0KXt0aGlzLndyaXRlVGFnKGUsaS5WYXJpbnQpO3RoaXMud3JpdGVTVmFyaW50KHQpfSx3cml0ZVN0cmluZ0ZpZWxkOmZ1bmN0aW9uKGUsdCl7dGhpcy53cml0ZVRhZyhlLGkuQnl0ZXMpO3RoaXMud3JpdGVTdHJpbmcodCl9LHdyaXRlRmxvYXRGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXMud3JpdGVUYWcoZSxpLkZpeGVkMzIpO3RoaXMud3JpdGVGbG9hdCh0KX0sd3JpdGVEb3VibGVGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXMud3JpdGVUYWcoZSxpLkZpeGVkNjQpO3RoaXMud3JpdGVEb3VibGUodCl9LHdyaXRlQm9vbGVhbkZpZWxkOmZ1bmN0aW9uKGUsdCl7dGhpcy53cml0ZVZhcmludEZpZWxkKGUsQm9vbGVhbih0KSl9fTtmdW5jdGlvbiBjKGUsdCxyKXt2YXIgbj1yLmJ1ZixpLG87bz1uW3IucG9zKytdO2k9KG8mMTEyKT4+NDtpZihvPDEyOClyZXR1cm4gaChlLGksdCk7bz1uW3IucG9zKytdO2l8PShvJjEyNyk8PDM7aWYobzwxMjgpcmV0dXJuIGgoZSxpLHQpO289bltyLnBvcysrXTtpfD0obyYxMjcpPDwxMDtpZihvPDEyOClyZXR1cm4gaChlLGksdCk7bz1uW3IucG9zKytdO2l8PShvJjEyNyk8PDE3O2lmKG88MTI4KXJldHVybiBoKGUsaSx0KTtvPW5bci5wb3MrK107aXw9KG8mMTI3KTw8MjQ7aWYobzwxMjgpcmV0dXJuIGgoZSxpLHQpO289bltyLnBvcysrXTtpfD0obyYxKTw8MzE7aWYobzwxMjgpcmV0dXJuIGgoZSxpLHQpO3Rocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHZhcmludCBub3QgbW9yZSB0aGFuIDEwIGJ5dGVzXCIpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUudHlwZT09PWkuQnl0ZXM/ZS5yZWFkVmFyaW50KCkrZS5wb3M6ZS5wb3MrMX1mdW5jdGlvbiBoKGUsdCxyKXtpZihyKXtyZXR1cm4gdCo0Mjk0OTY3Mjk2KyhlPj4+MCl9cmV0dXJuKHQ+Pj4wKSo0Mjk0OTY3Mjk2KyhlPj4+MCl9ZnVuY3Rpb24gcChlLHQpe3ZhciByLG47aWYoZT49MCl7cj1lJTQyOTQ5NjcyOTZ8MDtuPWUvNDI5NDk2NzI5NnwwfWVsc2V7cj1+KC1lJTQyOTQ5NjcyOTYpO249figtZS80Mjk0OTY3Mjk2KTtpZihyXjQyOTQ5NjcyOTUpe3I9cisxfDB9ZWxzZXtyPTA7bj1uKzF8MH19aWYoZT49MHgxMDAwMDAwMDAwMDAwMDAwMHx8ZTwtMHgxMDAwMDAwMDAwMDAwMDAwMCl7dGhyb3cgbmV3IEVycm9yKFwiR2l2ZW4gdmFyaW50IGRvZXNuJ3QgZml0IGludG8gMTAgYnl0ZXNcIil9dC5yZWFsbG9jKDEwKTtmKHIsbix0KTtkKG4sdCl9ZnVuY3Rpb24gZihlLHQscil7ci5idWZbci5wb3MrK109ZSYxMjd8MTI4O2U+Pj49NztyLmJ1ZltyLnBvcysrXT1lJjEyN3wxMjg7ZT4+Pj03O3IuYnVmW3IucG9zKytdPWUmMTI3fDEyODtlPj4+PTc7ci5idWZbci5wb3MrK109ZSYxMjd8MTI4O2U+Pj49NztyLmJ1ZltyLnBvc109ZSYxMjd9ZnVuY3Rpb24gZChlLHQpe3ZhciByPShlJjcpPDw0O3QuYnVmW3QucG9zKytdfD1yfCgoZT4+Pj0zKT8xMjg6MCk7aWYoIWUpcmV0dXJuO3QuYnVmW3QucG9zKytdPWUmMTI3fCgoZT4+Pj03KT8xMjg6MCk7aWYoIWUpcmV0dXJuO3QuYnVmW3QucG9zKytdPWUmMTI3fCgoZT4+Pj03KT8xMjg6MCk7aWYoIWUpcmV0dXJuO3QuYnVmW3QucG9zKytdPWUmMTI3fCgoZT4+Pj03KT8xMjg6MCk7aWYoIWUpcmV0dXJuO3QuYnVmW3QucG9zKytdPWUmMTI3fCgoZT4+Pj03KT8xMjg6MCk7aWYoIWUpcmV0dXJuO3QuYnVmW3QucG9zKytdPWUmMTI3fWZ1bmN0aW9uIHYoZSx0LHIpe3ZhciBuPXQ8PTE2MzgzPzE6dDw9MjA5NzE1MT8yOnQ8PTI2ODQzNTQ1NT8zOk1hdGguZmxvb3IoTWF0aC5sb2codCkvKE1hdGguTE4yKjcpKTtyLnJlYWxsb2Mobik7Zm9yKHZhciBpPXIucG9zLTE7aT49ZTtpLS0pci5idWZbaStuXT1yLmJ1ZltpXX1mdW5jdGlvbiBtKGUsdCl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdC53cml0ZVZhcmludChlW3JdKX1mdW5jdGlvbiBnKGUsdCl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdC53cml0ZVNWYXJpbnQoZVtyXSl9ZnVuY3Rpb24gXyhlLHQpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXQud3JpdGVGbG9hdChlW3JdKX1mdW5jdGlvbiB5KGUsdCl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdC53cml0ZURvdWJsZShlW3JdKX1mdW5jdGlvbiBiKGUsdCl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdC53cml0ZUJvb2xlYW4oZVtyXSl9ZnVuY3Rpb24geChlLHQpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXQud3JpdGVGaXhlZDMyKGVbcl0pfWZ1bmN0aW9uIHcoZSx0KXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0LndyaXRlU0ZpeGVkMzIoZVtyXSl9ZnVuY3Rpb24gUyhlLHQpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXQud3JpdGVGaXhlZDY0KGVbcl0pfWZ1bmN0aW9uIE0oZSx0KXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0LndyaXRlU0ZpeGVkNjQoZVtyXSl9ZnVuY3Rpb24gQyhlLHQpe3JldHVybihlW3RdfGVbdCsxXTw8OHxlW3QrMl08PDE2KStlW3QrM10qMTY3NzcyMTZ9ZnVuY3Rpb24gVChlLHQscil7ZVtyXT10O2VbcisxXT10Pj4+ODtlW3IrMl09dD4+PjE2O2VbciszXT10Pj4+MjR9ZnVuY3Rpb24gRShlLHQpe3JldHVybihlW3RdfGVbdCsxXTw8OHxlW3QrMl08PDE2KSsoZVt0KzNdPDwyNCl9ZnVuY3Rpb24gTyhlLHQscil7dmFyIG49XCJcIjt2YXIgaT10O3doaWxlKGk8cil7dmFyIG89ZVtpXTt2YXIgYT1udWxsO3ZhciBzPW8+MjM5PzQ6bz4yMjM/MzpvPjE5MT8yOjE7aWYoaStzPnIpYnJlYWs7dmFyIHUsYyxsO2lmKHM9PT0xKXtpZihvPDEyOCl7YT1vfX1lbHNlIGlmKHM9PT0yKXt1PWVbaSsxXTtpZigodSYxOTIpPT09MTI4KXthPShvJjMxKTw8Nnx1JjYzO2lmKGE8PTEyNyl7YT1udWxsfX19ZWxzZSBpZihzPT09Myl7dT1lW2krMV07Yz1lW2krMl07aWYoKHUmMTkyKT09PTEyOCYmKGMmMTkyKT09PTEyOCl7YT0obyYxNSk8PDEyfCh1JjYzKTw8NnxjJjYzO2lmKGE8PTIwNDd8fGE+PTU1Mjk2JiZhPD01NzM0Myl7YT1udWxsfX19ZWxzZSBpZihzPT09NCl7dT1lW2krMV07Yz1lW2krMl07bD1lW2krM107aWYoKHUmMTkyKT09PTEyOCYmKGMmMTkyKT09PTEyOCYmKGwmMTkyKT09PTEyOCl7YT0obyYxNSk8PDE4fCh1JjYzKTw8MTJ8KGMmNjMpPDw2fGwmNjM7aWYoYTw9NjU1MzV8fGE+PTExMTQxMTIpe2E9bnVsbH19fWlmKGE9PT1udWxsKXthPTY1NTMzO3M9MX1lbHNlIGlmKGE+NjU1MzUpe2EtPTY1NTM2O24rPVN0cmluZy5mcm9tQ2hhckNvZGUoYT4+PjEwJjEwMjN8NTUyOTYpO2E9NTYzMjB8YSYxMDIzfW4rPVN0cmluZy5mcm9tQ2hhckNvZGUoYSk7aSs9c31yZXR1cm4gbn1mdW5jdGlvbiBQKGUsdCxyKXtyZXR1cm4gdS5kZWNvZGUoZS5zdWJhcnJheSh0LHIpKX1mdW5jdGlvbiBBKGUsdCxyKXtmb3IodmFyIG49MCxpLG87bjx0Lmxlbmd0aDtuKyspe2k9dC5jaGFyQ29kZUF0KG4pO2lmKGk+NTUyOTUmJmk8NTczNDQpe2lmKG8pe2lmKGk8NTYzMjApe2VbcisrXT0yMzk7ZVtyKytdPTE5MTtlW3IrK109MTg5O289aTtjb250aW51ZX1lbHNle2k9by01NTI5Njw8MTB8aS01NjMyMHw2NTUzNjtvPW51bGx9fWVsc2V7aWYoaT41NjMxOXx8bisxPT09dC5sZW5ndGgpe2VbcisrXT0yMzk7ZVtyKytdPTE5MTtlW3IrK109MTg5fWVsc2V7bz1pfWNvbnRpbnVlfX1lbHNlIGlmKG8pe2VbcisrXT0yMzk7ZVtyKytdPTE5MTtlW3IrK109MTg5O289bnVsbH1pZihpPDEyOCl7ZVtyKytdPWl9ZWxzZXtpZihpPDIwNDgpe2VbcisrXT1pPj42fDE5Mn1lbHNle2lmKGk8NjU1MzYpe2VbcisrXT1pPj4xMnwyMjR9ZWxzZXtlW3IrK109aT4+MTh8MjQwO2VbcisrXT1pPj4xMiY2M3wxMjh9ZVtyKytdPWk+PjYmNjN8MTI4fWVbcisrXT1pJjYzfDEyOH19cmV0dXJuIHJ9fSx7aWVlZTc1NDo0MX1dLDQxOltmdW5jdGlvbihlLHQscil7ci5yZWFkPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG8sYTt2YXIgcz1pKjgtbi0xO3ZhciB1PSgxPDxzKS0xO3ZhciBjPXU+PjE7dmFyIGw9LTc7dmFyIGg9cj9pLTE6MDt2YXIgcD1yPy0xOjE7dmFyIGY9ZVt0K2hdO2grPXA7bz1mJigxPDwtbCktMTtmPj49LWw7bCs9cztmb3IoO2w+MDtvPW8qMjU2K2VbdCtoXSxoKz1wLGwtPTgpe31hPW8mKDE8PC1sKS0xO28+Pj0tbDtsKz1uO2Zvcig7bD4wO2E9YSoyNTYrZVt0K2hdLGgrPXAsbC09OCl7fWlmKG89PT0wKXtvPTEtY31lbHNlIGlmKG89PT11KXtyZXR1cm4gYT9OYU46KGY/LTE6MSkqSW5maW5pdHl9ZWxzZXthPWErTWF0aC5wb3coMixuKTtvPW8tY31yZXR1cm4oZj8tMToxKSphKk1hdGgucG93KDIsby1uKX07ci53cml0ZT1mdW5jdGlvbihlLHQscixuLGksbyl7dmFyIGEscyx1O3ZhciBjPW8qOC1pLTE7dmFyIGw9KDE8PGMpLTE7dmFyIGg9bD4+MTt2YXIgcD1pPT09MjM/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowO3ZhciBmPW4/MDpvLTE7dmFyIGQ9bj8xOi0xO3ZhciB2PXQ8MHx8dD09PTAmJjEvdDwwPzE6MDt0PU1hdGguYWJzKHQpO2lmKGlzTmFOKHQpfHx0PT09SW5maW5pdHkpe3M9aXNOYU4odCk/MTowO2E9bH1lbHNle2E9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMik7aWYodCoodT1NYXRoLnBvdygyLC1hKSk8MSl7YS0tO3UqPTJ9aWYoYStoPj0xKXt0Kz1wL3V9ZWxzZXt0Kz1wKk1hdGgucG93KDIsMS1oKX1pZih0KnU+PTIpe2ErKzt1Lz0yfWlmKGEraD49bCl7cz0wO2E9bH1lbHNlIGlmKGEraD49MSl7cz0odCp1LTEpKk1hdGgucG93KDIsaSk7YT1hK2h9ZWxzZXtzPXQqTWF0aC5wb3coMixoLTEpKk1hdGgucG93KDIsaSk7YT0wfX1mb3IoO2k+PTg7ZVtyK2ZdPXMmMjU1LGYrPWQscy89MjU2LGktPTgpe31hPWE8PGl8cztjKz1pO2Zvcig7Yz4wO2VbcitmXT1hJjI1NSxmKz1kLGEvPTI1NixjLT04KXt9ZVtyK2YtZF18PXYqMTI4fX0se31dLDQyOltmdW5jdGlvbihlLHIsbil7IWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIG4mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiByP3IuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgbyYmby5hbWQ/byh0KTooZT1lfHxzZWxmKS5SQnVzaD10KCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBzKGUsdCxyLG4saSl7IWZ1bmN0aW9uIGUodCxyLG4saSxvKXtmb3IoO2k+bjspe2lmKGktbj42MDApe3ZhciBhPWktbisxLHM9ci1uKzEsdT1NYXRoLmxvZyhhKSxjPS41Kk1hdGguZXhwKDIqdS8zKSxsPS41Kk1hdGguc3FydCh1KmMqKGEtYykvYSkqKHMtYS8yPDA/LTE6MSksaD1NYXRoLm1heChuLE1hdGguZmxvb3Ioci1zKmMvYStsKSkscD1NYXRoLm1pbihpLE1hdGguZmxvb3IocisoYS1zKSpjL2ErbCkpO2UodCxyLGgscCxvKX12YXIgZj10W3JdLGQ9bix2PWk7Zm9yKG0odCxuLHIpLG8odFtpXSxmKT4wJiZtKHQsbixpKTtkPHY7KXtmb3IobSh0LGQsdiksZCsrLHYtLTtvKHRbZF0sZik8MDspZCsrO2Zvcig7byh0W3ZdLGYpPjA7KXYtLX0wPT09byh0W25dLGYpP20odCxuLHYpOm0odCwrK3YsaSksdjw9ciYmKG49disxKSxyPD12JiYoaT12LTEpfX0oZSx0LHJ8fDAsbnx8ZS5sZW5ndGgtMSxpfHxvKX1mdW5jdGlvbiBtKGUsdCxyKXt2YXIgbj1lW3RdO2VbdF09ZVtyXSxlW3JdPW59ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBlPHQ/LTE6ZT50PzE6MH12YXIgZT1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT05KSx0aGlzLl9tYXhFbnRyaWVzPU1hdGgubWF4KDQsZSksdGhpcy5fbWluRW50cmllcz1NYXRoLm1heCgyLE1hdGguY2VpbCguNCp0aGlzLl9tYXhFbnRyaWVzKSksdGhpcy5jbGVhcigpfTtmdW5jdGlvbiBsKGUsdCxyKXtpZighcilyZXR1cm4gdC5pbmRleE9mKGUpO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKHIoZSx0W25dKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBmKGUsdCl7ZyhlLDAsZS5jaGlsZHJlbi5sZW5ndGgsdCxlKX1mdW5jdGlvbiBnKGUsdCxyLG4saSl7aXx8KGk9dihudWxsKSksaS5taW5YPTEvMCxpLm1pblk9MS8wLGkubWF4WD0tMS8wLGkubWF4WT0tMS8wO2Zvcih2YXIgbz10O288cjtvKyspe3ZhciBhPWUuY2hpbGRyZW5bb107cChpLGUubGVhZj9uKGEpOmEpfXJldHVybiBpfWZ1bmN0aW9uIHAoZSx0KXtyZXR1cm4gZS5taW5YPU1hdGgubWluKGUubWluWCx0Lm1pblgpLGUubWluWT1NYXRoLm1pbihlLm1pblksdC5taW5ZKSxlLm1heFg9TWF0aC5tYXgoZS5tYXhYLHQubWF4WCksZS5tYXhZPU1hdGgubWF4KGUubWF4WSx0Lm1heFkpLGV9ZnVuY3Rpb24gYShlLHQpe3JldHVybiBlLm1pblgtdC5taW5YfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZS5taW5ZLXQubWluWX1mdW5jdGlvbiBfKGUpe3JldHVybihlLm1heFgtZS5taW5YKSooZS5tYXhZLWUubWluWSl9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZS5tYXhYLWUubWluWCsoZS5tYXhZLWUubWluWSl9ZnVuY3Rpb24gaChlLHQpe3JldHVybiBlLm1pblg8PXQubWluWCYmZS5taW5ZPD10Lm1pblkmJnQubWF4WDw9ZS5tYXhYJiZ0Lm1heFk8PWUubWF4WX1mdW5jdGlvbiBjKGUsdCl7cmV0dXJuIHQubWluWDw9ZS5tYXhYJiZ0Lm1pblk8PWUubWF4WSYmdC5tYXhYPj1lLm1pblgmJnQubWF4WT49ZS5taW5ZfWZ1bmN0aW9uIHYoZSl7cmV0dXJue2NoaWxkcmVuOmUsaGVpZ2h0OjEsbGVhZjohMCxtaW5YOjEvMCxtaW5ZOjEvMCxtYXhYOi0xLzAsbWF4WTotMS8wfX1mdW5jdGlvbiB5KGUsdCxyLG4saSl7Zm9yKHZhciBvPVt0LHJdO28ubGVuZ3RoOylpZighKChyPW8ucG9wKCkpLSh0PW8ucG9wKCkpPD1uKSl7dmFyIGE9dCtNYXRoLmNlaWwoKHItdCkvbi8yKSpuO3MoZSxhLHQscixpKSxvLnB1c2godCxhLGEscil9fXJldHVybiBlLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxsKHRoaXMuZGF0YSxbXSl9LGUucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGEscj1bXTtpZighYyhlLHQpKXJldHVybiByO2Zvcih2YXIgbj10aGlzLnRvQkJveCxpPVtdO3Q7KXtmb3IodmFyIG89MDtvPHQuY2hpbGRyZW4ubGVuZ3RoO28rKyl7dmFyIGE9dC5jaGlsZHJlbltvXSxzPXQubGVhZj9uKGEpOmE7YyhlLHMpJiYodC5sZWFmP3IucHVzaChhKTpoKGUscyk/dGhpcy5fYWxsKGEscik6aS5wdXNoKGEpKX10PWkucG9wKCl9cmV0dXJuIHJ9LGUucHJvdG90eXBlLmNvbGxpZGVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YTtpZighYyhlLHQpKXJldHVybiExO2Zvcih2YXIgcj1bXTt0Oyl7Zm9yKHZhciBuPTA7bjx0LmNoaWxkcmVuLmxlbmd0aDtuKyspe3ZhciBpPXQuY2hpbGRyZW5bbl0sbz10LmxlYWY/dGhpcy50b0JCb3goaSk6aTtpZihjKGUsbykpe2lmKHQubGVhZnx8aChlLG8pKXJldHVybiEwO3IucHVzaChpKX19dD1yLnBvcCgpfXJldHVybiExfSxlLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5sZW5ndGgpcmV0dXJuIHRoaXM7aWYoZS5sZW5ndGg8dGhpcy5fbWluRW50cmllcyl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspdGhpcy5pbnNlcnQoZVt0XSk7cmV0dXJuIHRoaXN9dmFyIHI9dGhpcy5fYnVpbGQoZS5zbGljZSgpLDAsZS5sZW5ndGgtMSwwKTtpZih0aGlzLmRhdGEuY2hpbGRyZW4ubGVuZ3RoKWlmKHRoaXMuZGF0YS5oZWlnaHQ9PT1yLmhlaWdodCl0aGlzLl9zcGxpdFJvb3QodGhpcy5kYXRhLHIpO2Vsc2V7aWYodGhpcy5kYXRhLmhlaWdodDxyLmhlaWdodCl7dmFyIG49dGhpcy5kYXRhO3RoaXMuZGF0YT1yLHI9bn10aGlzLl9pbnNlcnQocix0aGlzLmRhdGEuaGVpZ2h0LXIuaGVpZ2h0LTEsITApfWVsc2UgdGhpcy5kYXRhPXI7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5faW5zZXJ0KGUsdGhpcy5kYXRhLmhlaWdodC0xKSx0aGlzfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGE9dihbXSksdGhpc30sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIHRoaXM7Zm9yKHZhciByLG4saSxvPXRoaXMuZGF0YSxhPXRoaXMudG9CQm94KGUpLHM9W10sdT1bXTtvfHxzLmxlbmd0aDspe2lmKG98fChvPXMucG9wKCksbj1zW3MubGVuZ3RoLTFdLHI9dS5wb3AoKSxpPSEwKSxvLmxlYWYpe3ZhciBjPWwoZSxvLmNoaWxkcmVuLHQpO2lmKC0xIT09YylyZXR1cm4gby5jaGlsZHJlbi5zcGxpY2UoYywxKSxzLnB1c2gobyksdGhpcy5fY29uZGVuc2UocyksdGhpc31pfHxvLmxlYWZ8fCFoKG8sYSk/bj8ocisrLG89bi5jaGlsZHJlbltyXSxpPSExKTpvPW51bGw6KHMucHVzaChvKSx1LnB1c2gocikscj0wLG49byxvPW8uY2hpbGRyZW5bMF0pfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS50b0JCb3g9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUucHJvdG90eXBlLmNvbXBhcmVNaW5YPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubWluWC10Lm1pblh9LGUucHJvdG90eXBlLmNvbXBhcmVNaW5ZPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubWluWS10Lm1pbll9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LGUucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGE9ZSx0aGlzfSxlLnByb3RvdHlwZS5fYWxsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdO2U7KWUubGVhZj90LnB1c2guYXBwbHkodCxlLmNoaWxkcmVuKTpyLnB1c2guYXBwbHkocixlLmNoaWxkcmVuKSxlPXIucG9wKCk7cmV0dXJuIHR9LGUucHJvdG90eXBlLl9idWlsZD1mdW5jdGlvbihlLHQscixuKXt2YXIgaSxvPXItdCsxLGE9dGhpcy5fbWF4RW50cmllcztpZihvPD1hKXJldHVybiBmKGk9dihlLnNsaWNlKHQscisxKSksdGhpcy50b0JCb3gpLGk7bnx8KG49TWF0aC5jZWlsKE1hdGgubG9nKG8pL01hdGgubG9nKGEpKSxhPU1hdGguY2VpbChvL01hdGgucG93KGEsbi0xKSkpLChpPXYoW10pKS5sZWFmPSExLGkuaGVpZ2h0PW47dmFyIHM9TWF0aC5jZWlsKG8vYSksdT1zKk1hdGguY2VpbChNYXRoLnNxcnQoYSkpO3koZSx0LHIsdSx0aGlzLmNvbXBhcmVNaW5YKTtmb3IodmFyIGM9dDtjPD1yO2MrPXUpe3ZhciBsPU1hdGgubWluKGMrdS0xLHIpO3koZSxjLGwscyx0aGlzLmNvbXBhcmVNaW5ZKTtmb3IodmFyIGg9YztoPD1sO2grPXMpe3ZhciBwPU1hdGgubWluKGgrcy0xLGwpO2kuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZChlLGgscCxuLTEpKX19cmV0dXJuIGYoaSx0aGlzLnRvQkJveCksaX0sZS5wcm90b3R5cGUuX2Nob29zZVN1YnRyZWU9ZnVuY3Rpb24oZSx0LHIsbil7Zm9yKDtuLnB1c2godCksIXQubGVhZiYmbi5sZW5ndGgtMSE9PXI7KXtmb3IodmFyIGk9MS8wLG89MS8wLGE9dm9pZCAwLHM9MDtzPHQuY2hpbGRyZW4ubGVuZ3RoO3MrKyl7dmFyIHU9dC5jaGlsZHJlbltzXSxjPV8odSksbD0oaD1lLHA9dSwoTWF0aC5tYXgocC5tYXhYLGgubWF4WCktTWF0aC5taW4ocC5taW5YLGgubWluWCkpKihNYXRoLm1heChwLm1heFksaC5tYXhZKS1NYXRoLm1pbihwLm1pblksaC5taW5ZKSktYyk7bDxvPyhvPWwsaT1jPGk/YzppLGE9dSk6bD09PW8mJmM8aSYmKGk9YyxhPXUpfXQ9YXx8dC5jaGlsZHJlblswXX12YXIgaCxwO3JldHVybiB0fSxlLnByb3RvdHlwZS5faW5zZXJ0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yP2U6dGhpcy50b0JCb3goZSksaT1bXSxvPXRoaXMuX2Nob29zZVN1YnRyZWUobix0aGlzLmRhdGEsdCxpKTtmb3Ioby5jaGlsZHJlbi5wdXNoKGUpLHAobyxuKTt0Pj0wJiZpW3RdLmNoaWxkcmVuLmxlbmd0aD50aGlzLl9tYXhFbnRyaWVzOyl0aGlzLl9zcGxpdChpLHQpLHQtLTt0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMobixpLHQpfSxlLnByb3RvdHlwZS5fc3BsaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lW3RdLG49ci5jaGlsZHJlbi5sZW5ndGgsaT10aGlzLl9taW5FbnRyaWVzO3RoaXMuX2Nob29zZVNwbGl0QXhpcyhyLGksbik7dmFyIG89dGhpcy5fY2hvb3NlU3BsaXRJbmRleChyLGksbiksYT12KHIuY2hpbGRyZW4uc3BsaWNlKG8sci5jaGlsZHJlbi5sZW5ndGgtbykpO2EuaGVpZ2h0PXIuaGVpZ2h0LGEubGVhZj1yLmxlYWYsZihyLHRoaXMudG9CQm94KSxmKGEsdGhpcy50b0JCb3gpLHQ/ZVt0LTFdLmNoaWxkcmVuLnB1c2goYSk6dGhpcy5fc3BsaXRSb290KHIsYSl9LGUucHJvdG90eXBlLl9zcGxpdFJvb3Q9ZnVuY3Rpb24oZSx0KXt0aGlzLmRhdGE9dihbZSx0XSksdGhpcy5kYXRhLmhlaWdodD1lLmhlaWdodCsxLHRoaXMuZGF0YS5sZWFmPSExLGYodGhpcy5kYXRhLHRoaXMudG9CQm94KX0sZS5wcm90b3R5cGUuX2Nob29zZVNwbGl0SW5kZXg9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbixpLG8sYSxzLHUsYyxsPTEvMCxoPTEvMCxwPXQ7cDw9ci10O3ArKyl7dmFyIGY9ZyhlLDAscCx0aGlzLnRvQkJveCksZD1nKGUscCxyLHRoaXMudG9CQm94KSx2PShpPWYsbz1kLGE9dm9pZCAwLHM9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGE9TWF0aC5tYXgoaS5taW5YLG8ubWluWCkscz1NYXRoLm1heChpLm1pblksby5taW5ZKSx1PU1hdGgubWluKGkubWF4WCxvLm1heFgpLGM9TWF0aC5taW4oaS5tYXhZLG8ubWF4WSksTWF0aC5tYXgoMCx1LWEpKk1hdGgubWF4KDAsYy1zKSksbT1fKGYpK18oZCk7djxsPyhsPXYsbj1wLGg9bTxoP206aCk6dj09PWwmJm08aCYmKGg9bSxuPXApfXJldHVybiBufHxyLXR9LGUucHJvdG90eXBlLl9jaG9vc2VTcGxpdEF4aXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUubGVhZj90aGlzLmNvbXBhcmVNaW5YOmEsaT1lLmxlYWY/dGhpcy5jb21wYXJlTWluWTp1O3RoaXMuX2FsbERpc3RNYXJnaW4oZSx0LHIsbik8dGhpcy5fYWxsRGlzdE1hcmdpbihlLHQscixpKSYmZS5jaGlsZHJlbi5zb3J0KG4pfSxlLnByb3RvdHlwZS5fYWxsRGlzdE1hcmdpbj1mdW5jdGlvbihlLHQscixuKXtlLmNoaWxkcmVuLnNvcnQobik7Zm9yKHZhciBpPXRoaXMudG9CQm94LG89ZyhlLDAsdCxpKSxhPWcoZSxyLXQscixpKSxzPWQobykrZChhKSx1PXQ7dTxyLXQ7dSsrKXt2YXIgYz1lLmNoaWxkcmVuW3VdO3AobyxlLmxlYWY/aShjKTpjKSxzKz1kKG8pfWZvcih2YXIgbD1yLXQtMTtsPj10O2wtLSl7dmFyIGg9ZS5jaGlsZHJlbltsXTtwKGEsZS5sZWFmP2koaCk6aCkscys9ZChhKX1yZXR1cm4gc30sZS5wcm90b3R5cGUuX2FkanVzdFBhcmVudEJCb3hlcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXI7bj49MDtuLS0pcCh0W25dLGUpfSxlLnByb3RvdHlwZS5fY29uZGVuc2U9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLTEscj12b2lkIDA7dD49MDt0LS0pMD09PWVbdF0uY2hpbGRyZW4ubGVuZ3RoP3Q+MD8ocj1lW3QtMV0uY2hpbGRyZW4pLnNwbGljZShyLmluZGV4T2YoZVt0XSksMSk6dGhpcy5jbGVhcigpOmYoZVt0XSx0aGlzLnRvQkJveCl9LGV9KX0se31dLDQzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9pbnRlcm5hbC9PYnNlcnZhYmxlXCIpO3IuT2JzZXJ2YWJsZT1uLk9ic2VydmFibGU7dmFyIGk9ZShcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGVcIik7ci5Db25uZWN0YWJsZU9ic2VydmFibGU9aS5Db25uZWN0YWJsZU9ic2VydmFibGU7dmFyIG89ZShcIi4vaW50ZXJuYWwvb3BlcmF0b3JzL2dyb3VwQnlcIik7ci5Hcm91cGVkT2JzZXJ2YWJsZT1vLkdyb3VwZWRPYnNlcnZhYmxlO3ZhciBhPWUoXCIuL2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlXCIpO3Iub2JzZXJ2YWJsZT1hLm9ic2VydmFibGU7dmFyIHM9ZShcIi4vaW50ZXJuYWwvU3ViamVjdFwiKTtyLlN1YmplY3Q9cy5TdWJqZWN0O3ZhciB1PWUoXCIuL2ludGVybmFsL0JlaGF2aW9yU3ViamVjdFwiKTtyLkJlaGF2aW9yU3ViamVjdD11LkJlaGF2aW9yU3ViamVjdDt2YXIgYz1lKFwiLi9pbnRlcm5hbC9SZXBsYXlTdWJqZWN0XCIpO3IuUmVwbGF5U3ViamVjdD1jLlJlcGxheVN1YmplY3Q7dmFyIGw9ZShcIi4vaW50ZXJuYWwvQXN5bmNTdWJqZWN0XCIpO3IuQXN5bmNTdWJqZWN0PWwuQXN5bmNTdWJqZWN0O3ZhciBoPWUoXCIuL2ludGVybmFsL3NjaGVkdWxlci9hc2FwXCIpO3IuYXNhcFNjaGVkdWxlcj1oLmFzYXA7dmFyIHA9ZShcIi4vaW50ZXJuYWwvc2NoZWR1bGVyL2FzeW5jXCIpO3IuYXN5bmNTY2hlZHVsZXI9cC5hc3luYzt2YXIgZj1lKFwiLi9pbnRlcm5hbC9zY2hlZHVsZXIvcXVldWVcIik7ci5xdWV1ZVNjaGVkdWxlcj1mLnF1ZXVlO3ZhciBkPWUoXCIuL2ludGVybmFsL3NjaGVkdWxlci9hbmltYXRpb25GcmFtZVwiKTtyLmFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyPWQuYW5pbWF0aW9uRnJhbWU7dmFyIHY9ZShcIi4vaW50ZXJuYWwvc2NoZWR1bGVyL1ZpcnR1YWxUaW1lU2NoZWR1bGVyXCIpO3IuVmlydHVhbFRpbWVTY2hlZHVsZXI9di5WaXJ0dWFsVGltZVNjaGVkdWxlcjtyLlZpcnR1YWxBY3Rpb249di5WaXJ0dWFsQWN0aW9uO3ZhciBtPWUoXCIuL2ludGVybmFsL1NjaGVkdWxlclwiKTtyLlNjaGVkdWxlcj1tLlNjaGVkdWxlcjt2YXIgZz1lKFwiLi9pbnRlcm5hbC9TdWJzY3JpcHRpb25cIik7ci5TdWJzY3JpcHRpb249Zy5TdWJzY3JpcHRpb247dmFyIF89ZShcIi4vaW50ZXJuYWwvU3Vic2NyaWJlclwiKTtyLlN1YnNjcmliZXI9Xy5TdWJzY3JpYmVyO3ZhciB5PWUoXCIuL2ludGVybmFsL05vdGlmaWNhdGlvblwiKTtyLk5vdGlmaWNhdGlvbj15Lk5vdGlmaWNhdGlvbjtyLk5vdGlmaWNhdGlvbktpbmQ9eS5Ob3RpZmljYXRpb25LaW5kO3ZhciBiPWUoXCIuL2ludGVybmFsL3V0aWwvcGlwZVwiKTtyLnBpcGU9Yi5waXBlO3ZhciB4PWUoXCIuL2ludGVybmFsL3V0aWwvbm9vcFwiKTtyLm5vb3A9eC5ub29wO3ZhciB3PWUoXCIuL2ludGVybmFsL3V0aWwvaWRlbnRpdHlcIik7ci5pZGVudGl0eT13LmlkZW50aXR5O3ZhciBTPWUoXCIuL2ludGVybmFsL3V0aWwvaXNPYnNlcnZhYmxlXCIpO3IuaXNPYnNlcnZhYmxlPVMuaXNPYnNlcnZhYmxlO3ZhciBNPWUoXCIuL2ludGVybmFsL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcIik7ci5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcj1NLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO3ZhciBDPWUoXCIuL2ludGVybmFsL3V0aWwvRW1wdHlFcnJvclwiKTtyLkVtcHR5RXJyb3I9Qy5FbXB0eUVycm9yO3ZhciBUPWUoXCIuL2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIik7ci5PYmplY3RVbnN1YnNjcmliZWRFcnJvcj1ULk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO3ZhciBFPWUoXCIuL2ludGVybmFsL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvclwiKTtyLlVuc3Vic2NyaXB0aW9uRXJyb3I9RS5VbnN1YnNjcmlwdGlvbkVycm9yO3ZhciBPPWUoXCIuL2ludGVybmFsL3V0aWwvVGltZW91dEVycm9yXCIpO3IuVGltZW91dEVycm9yPU8uVGltZW91dEVycm9yO3ZhciBQPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvYmluZENhbGxiYWNrXCIpO3IuYmluZENhbGxiYWNrPVAuYmluZENhbGxiYWNrO3ZhciBBPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFja1wiKTtyLmJpbmROb2RlQ2FsbGJhY2s9QS5iaW5kTm9kZUNhbGxiYWNrO3ZhciBqPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvY29tYmluZUxhdGVzdFwiKTtyLmNvbWJpbmVMYXRlc3Q9ai5jb21iaW5lTGF0ZXN0O3ZhciBSPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvY29uY2F0XCIpO3IuY29uY2F0PVIuY29uY2F0O3ZhciBrPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZGVmZXJcIik7ci5kZWZlcj1rLmRlZmVyO3ZhciBMPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZW1wdHlcIik7ci5lbXB0eT1MLmVtcHR5O3ZhciBOPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZm9ya0pvaW5cIik7ci5mb3JrSm9pbj1OLmZvcmtKb2luO3ZhciBJPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZnJvbVwiKTtyLmZyb209SS5mcm9tO3ZhciBEPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZnJvbUV2ZW50XCIpO3IuZnJvbUV2ZW50PUQuZnJvbUV2ZW50O3ZhciBCPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVyblwiKTtyLmZyb21FdmVudFBhdHRlcm49Qi5mcm9tRXZlbnRQYXR0ZXJuO3ZhciBGPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvZ2VuZXJhdGVcIik7ci5nZW5lcmF0ZT1GLmdlbmVyYXRlO3ZhciB6PWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvaWlmXCIpO3IuaWlmPXouaWlmO3ZhciAkPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvaW50ZXJ2YWxcIik7ci5pbnRlcnZhbD0kLmludGVydmFsO3ZhciBHPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvbWVyZ2VcIik7ci5tZXJnZT1HLm1lcmdlO3ZhciBWPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvbmV2ZXJcIik7ci5uZXZlcj1WLm5ldmVyO3ZhciBIPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvb2ZcIik7ci5vZj1ILm9mO3ZhciBVPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvb25FcnJvclJlc3VtZU5leHRcIik7ci5vbkVycm9yUmVzdW1lTmV4dD1VLm9uRXJyb3JSZXN1bWVOZXh0O3ZhciBxPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvcGFpcnNcIik7ci5wYWlycz1xLnBhaXJzO3ZhciBXPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvcGFydGl0aW9uXCIpO3IucGFydGl0aW9uPVcucGFydGl0aW9uO3ZhciBYPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvcmFjZVwiKTtyLnJhY2U9WC5yYWNlO3ZhciBZPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvcmFuZ2VcIik7ci5yYW5nZT1ZLnJhbmdlO3ZhciBLPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvdGhyb3dFcnJvclwiKTtyLnRocm93RXJyb3I9Sy50aHJvd0Vycm9yO3ZhciBaPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvdGltZXJcIik7ci50aW1lcj1aLnRpbWVyO3ZhciBKPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvdXNpbmdcIik7ci51c2luZz1KLnVzaW5nO3ZhciBRPWUoXCIuL2ludGVybmFsL29ic2VydmFibGUvemlwXCIpO3IuemlwPVEuemlwO3ZhciBlZT1lKFwiLi9pbnRlcm5hbC9zY2hlZHVsZWQvc2NoZWR1bGVkXCIpO3Iuc2NoZWR1bGVkPWVlLnNjaGVkdWxlZDt2YXIgdGU9ZShcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9lbXB0eVwiKTtyLkVNUFRZPXRlLkVNUFRZO3ZhciByZT1lKFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL25ldmVyXCIpO3IuTkVWRVI9cmUuTkVWRVI7dmFyIG5lPWUoXCIuL2ludGVybmFsL2NvbmZpZ1wiKTtyLmNvbmZpZz1uZS5jb25maWd9LHtcIi4vaW50ZXJuYWwvQXN5bmNTdWJqZWN0XCI6NDQsXCIuL2ludGVybmFsL0JlaGF2aW9yU3ViamVjdFwiOjQ1LFwiLi9pbnRlcm5hbC9Ob3RpZmljYXRpb25cIjo0NyxcIi4vaW50ZXJuYWwvT2JzZXJ2YWJsZVwiOjQ4LFwiLi9pbnRlcm5hbC9SZXBsYXlTdWJqZWN0XCI6NTEsXCIuL2ludGVybmFsL1NjaGVkdWxlclwiOjUyLFwiLi9pbnRlcm5hbC9TdWJqZWN0XCI6NTMsXCIuL2ludGVybmFsL1N1YnNjcmliZXJcIjo1NSxcIi4vaW50ZXJuYWwvU3Vic2NyaXB0aW9uXCI6NTYsXCIuL2ludGVybmFsL2NvbmZpZ1wiOjU3LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZVwiOjU4LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFja1wiOjYwLFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2tcIjo2MSxcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0XCI6NjIsXCIuL2ludGVybmFsL29ic2VydmFibGUvY29uY2F0XCI6NjMsXCIuL2ludGVybmFsL29ic2VydmFibGUvZGVmZXJcIjo2NCxcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9lbXB0eVwiOjY1LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2ZvcmtKb2luXCI6NjYsXCIuL2ludGVybmFsL29ic2VydmFibGUvZnJvbVwiOjY3LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2Zyb21FdmVudFwiOjY5LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm5cIjo3MCxcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9nZW5lcmF0ZVwiOjcxLFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2lpZlwiOjcyLFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL2ludGVydmFsXCI6NzMsXCIuL2ludGVybmFsL29ic2VydmFibGUvbWVyZ2VcIjo3NCxcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9uZXZlclwiOjc1LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL29mXCI6NzYsXCIuL2ludGVybmFsL29ic2VydmFibGUvb25FcnJvclJlc3VtZU5leHRcIjo3NyxcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9wYWlyc1wiOjc4LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL3BhcnRpdGlvblwiOjc5LFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL3JhY2VcIjo4MCxcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS9yYW5nZVwiOjgxLFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL3Rocm93RXJyb3JcIjo4MixcIi4vaW50ZXJuYWwvb2JzZXJ2YWJsZS90aW1lclwiOjgzLFwiLi9pbnRlcm5hbC9vYnNlcnZhYmxlL3VzaW5nXCI6ODQsXCIuL2ludGVybmFsL29ic2VydmFibGUvemlwXCI6ODUsXCIuL2ludGVybmFsL29wZXJhdG9ycy9ncm91cEJ5XCI6MTIxLFwiLi9pbnRlcm5hbC9zY2hlZHVsZWQvc2NoZWR1bGVkXCI6MTkzLFwiLi9pbnRlcm5hbC9zY2hlZHVsZXIvVmlydHVhbFRpbWVTY2hlZHVsZXJcIjoyMDMsXCIuL2ludGVybmFsL3NjaGVkdWxlci9hbmltYXRpb25GcmFtZVwiOjIwNCxcIi4vaW50ZXJuYWwvc2NoZWR1bGVyL2FzYXBcIjoyMDUsXCIuL2ludGVybmFsL3NjaGVkdWxlci9hc3luY1wiOjIwNixcIi4vaW50ZXJuYWwvc2NoZWR1bGVyL3F1ZXVlXCI6MjA3LFwiLi9pbnRlcm5hbC9zeW1ib2wvb2JzZXJ2YWJsZVwiOjIwOSxcIi4vaW50ZXJuYWwvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiOjIxMSxcIi4vaW50ZXJuYWwvdXRpbC9FbXB0eUVycm9yXCI6MjEyLFwiLi9pbnRlcm5hbC91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yXCI6MjE0LFwiLi9pbnRlcm5hbC91dGlsL1RpbWVvdXRFcnJvclwiOjIxNSxcIi4vaW50ZXJuYWwvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yXCI6MjE2LFwiLi9pbnRlcm5hbC91dGlsL2lkZW50aXR5XCI6MjE5LFwiLi9pbnRlcm5hbC91dGlsL2lzT2JzZXJ2YWJsZVwiOjIyOCxcIi4vaW50ZXJuYWwvdXRpbC9ub29wXCI6MjMxLFwiLi9pbnRlcm5hbC91dGlsL3BpcGVcIjoyMzN9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuL1N1YmplY3RcIik7dmFyIG89ZShcIi4vU3Vic2NyaXB0aW9uXCIpO3ZhciBhPWZ1bmN0aW9uKHQpe24oZSx0KTtmdW5jdGlvbiBlKCl7dmFyIGU9dCE9PW51bGwmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO2UudmFsdWU9bnVsbDtlLmhhc05leHQ9ZmFsc2U7ZS5oYXNDb21wbGV0ZWQ9ZmFsc2U7cmV0dXJuIGV9ZS5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLmhhc0Vycm9yKXtlLmVycm9yKHRoaXMudGhyb3duRXJyb3IpO3JldHVybiBvLlN1YnNjcmlwdGlvbi5FTVBUWX1lbHNlIGlmKHRoaXMuaGFzQ29tcGxldGVkJiZ0aGlzLmhhc05leHQpe2UubmV4dCh0aGlzLnZhbHVlKTtlLmNvbXBsZXRlKCk7cmV0dXJuIG8uU3Vic2NyaXB0aW9uLkVNUFRZfXJldHVybiB0LnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcyxlKX07ZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXtpZighdGhpcy5oYXNDb21wbGV0ZWQpe3RoaXMudmFsdWU9ZTt0aGlzLmhhc05leHQ9dHJ1ZX19O2UucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmhhc0NvbXBsZXRlZCl7dC5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLGUpfX07ZS5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbXBsZXRlZD10cnVlO2lmKHRoaXMuaGFzTmV4dCl7dC5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsdGhpcy52YWx1ZSl9dC5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKX07cmV0dXJuIGV9KGkuU3ViamVjdCk7ci5Bc3luY1N1YmplY3Q9YX0se1wiLi9TdWJqZWN0XCI6NTMsXCIuL1N1YnNjcmlwdGlvblwiOjU2fV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi9TdWJqZWN0XCIpO3ZhciBvPWUoXCIuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIik7dmFyIGE9ZnVuY3Rpb24ocil7bihlLHIpO2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ci5jYWxsKHRoaXMpfHx0aGlzO3QuX3ZhbHVlPWU7cmV0dXJuIHR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKX0sZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgdD1yLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcyxlKTtpZih0JiYhdC5jbG9zZWQpe2UubmV4dCh0aGlzLl92YWx1ZSl9cmV0dXJuIHR9O2UucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7aWYodGhpcy5oYXNFcnJvcil7dGhyb3cgdGhpcy50aHJvd25FcnJvcn1lbHNlIGlmKHRoaXMuY2xvc2VkKXt0aHJvdyBuZXcgby5PYmplY3RVbnN1YnNjcmliZWRFcnJvcn1lbHNle3JldHVybiB0aGlzLl92YWx1ZX19O2UucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oZSl7ci5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsdGhpcy5fdmFsdWU9ZSl9O3JldHVybiBlfShpLlN1YmplY3QpO3IuQmVoYXZpb3JTdWJqZWN0PWF9LHtcIi4vU3ViamVjdFwiOjUzLFwiLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yXCI6MjE0fV0sNDY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi9TdWJzY3JpYmVyXCIpO3ZhciBvPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyl8fHRoaXM7bi5wYXJlbnQ9ZTtuLm91dGVyVmFsdWU9dDtuLm91dGVySW5kZXg9cjtuLmluZGV4PTA7cmV0dXJuIG59ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnQubm90aWZ5TmV4dCh0aGlzLm91dGVyVmFsdWUsZSx0aGlzLm91dGVySW5kZXgsdGhpcy5pbmRleCsrLHRoaXMpfTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnQubm90aWZ5RXJyb3IoZSx0aGlzKTt0aGlzLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO3RoaXMudW5zdWJzY3JpYmUoKX07cmV0dXJuIGV9KGkuU3Vic2NyaWJlcik7ci5Jbm5lclN1YnNjcmliZXI9b30se1wiLi9TdWJzY3JpYmVyXCI6NTV9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vb2JzZXJ2YWJsZS9lbXB0eVwiKTt2YXIgaT1lKFwiLi9vYnNlcnZhYmxlL29mXCIpO3ZhciBvPWUoXCIuL29ic2VydmFibGUvdGhyb3dFcnJvclwiKTt2YXIgYTsoZnVuY3Rpb24oZSl7ZVtcIk5FWFRcIl09XCJOXCI7ZVtcIkVSUk9SXCJdPVwiRVwiO2VbXCJDT01QTEVURVwiXT1cIkNcIn0pKGE9ci5Ob3RpZmljYXRpb25LaW5kfHwoci5Ob3RpZmljYXRpb25LaW5kPXt9KSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsdCxyKXt0aGlzLmtpbmQ9ZTt0aGlzLnZhbHVlPXQ7dGhpcy5lcnJvcj1yO3RoaXMuaGFzVmFsdWU9ZT09PVwiTlwifXQucHJvdG90eXBlLm9ic2VydmU9ZnVuY3Rpb24oZSl7c3dpdGNoKHRoaXMua2luZCl7Y2FzZVwiTlwiOnJldHVybiBlLm5leHQmJmUubmV4dCh0aGlzLnZhbHVlKTtjYXNlXCJFXCI6cmV0dXJuIGUuZXJyb3ImJmUuZXJyb3IodGhpcy5lcnJvcik7Y2FzZVwiQ1wiOnJldHVybiBlLmNvbXBsZXRlJiZlLmNvbXBsZXRlKCl9fTt0LnByb3RvdHlwZS5kbz1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5raW5kO3N3aXRjaChuKXtjYXNlXCJOXCI6cmV0dXJuIGUmJmUodGhpcy52YWx1ZSk7Y2FzZVwiRVwiOnJldHVybiB0JiZ0KHRoaXMuZXJyb3IpO2Nhc2VcIkNcIjpyZXR1cm4gciYmcigpfX07dC5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGUsdCxyKXtpZihlJiZ0eXBlb2YgZS5uZXh0PT09XCJmdW5jdGlvblwiKXtyZXR1cm4gdGhpcy5vYnNlcnZlKGUpfWVsc2V7cmV0dXJuIHRoaXMuZG8oZSx0LHIpfX07dC5wcm90b3R5cGUudG9PYnNlcnZhYmxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5raW5kO3N3aXRjaChlKXtjYXNlXCJOXCI6cmV0dXJuIGkub2YodGhpcy52YWx1ZSk7Y2FzZVwiRVwiOnJldHVybiBvLnRocm93RXJyb3IodGhpcy5lcnJvcik7Y2FzZVwiQ1wiOnJldHVybiBuLmVtcHR5KCl9dGhyb3cgbmV3IEVycm9yKFwidW5leHBlY3RlZCBub3RpZmljYXRpb24ga2luZCB2YWx1ZVwiKX07dC5jcmVhdGVOZXh0PWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlIT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIG5ldyB0KFwiTlwiLGUpfXJldHVybiB0LnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9ufTt0LmNyZWF0ZUVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChcIkVcIix1bmRlZmluZWQsZSl9O3QuY3JlYXRlQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb21wbGV0ZU5vdGlmaWNhdGlvbn07dC5jb21wbGV0ZU5vdGlmaWNhdGlvbj1uZXcgdChcIkNcIik7dC51bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbj1uZXcgdChcIk5cIix1bmRlZmluZWQpO3JldHVybiB0fSgpO3IuTm90aWZpY2F0aW9uPXN9LHtcIi4vb2JzZXJ2YWJsZS9lbXB0eVwiOjY1LFwiLi9vYnNlcnZhYmxlL29mXCI6NzYsXCIuL29ic2VydmFibGUvdGhyb3dFcnJvclwiOjgyfV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL3V0aWwvY2FuUmVwb3J0RXJyb3JcIik7dmFyIG89ZShcIi4vdXRpbC90b1N1YnNjcmliZXJcIik7dmFyIGk9ZShcIi4vc3ltYm9sL29ic2VydmFibGVcIik7dmFyIGE9ZShcIi4vdXRpbC9waXBlXCIpO3ZhciBzPWUoXCIuL2NvbmZpZ1wiKTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSl7dGhpcy5faXNTY2FsYXI9ZmFsc2U7aWYoZSl7dGhpcy5fc3Vic2NyaWJlPWV9fXIucHJvdG90eXBlLmxpZnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHI7dC5zb3VyY2U9dGhpczt0Lm9wZXJhdG9yPWU7cmV0dXJuIHR9O3IucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5vcGVyYXRvcjt2YXIgaT1vLnRvU3Vic2NyaWJlcihlLHQscik7aWYobil7aS5hZGQobi5jYWxsKGksdGhpcy5zb3VyY2UpKX1lbHNle2kuYWRkKHRoaXMuc291cmNlfHxzLmNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nJiYhaS5zeW5jRXJyb3JUaHJvd2FibGU/dGhpcy5fc3Vic2NyaWJlKGkpOnRoaXMuX3RyeVN1YnNjcmliZShpKSl9aWYocy5jb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyl7aWYoaS5zeW5jRXJyb3JUaHJvd2FibGUpe2kuc3luY0Vycm9yVGhyb3dhYmxlPWZhbHNlO2lmKGkuc3luY0Vycm9yVGhyb3duKXt0aHJvdyBpLnN5bmNFcnJvclZhbHVlfX19cmV0dXJuIGl9O3IucHJvdG90eXBlLl90cnlTdWJzY3JpYmU9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiB0aGlzLl9zdWJzY3JpYmUodCl9Y2F0Y2goZSl7aWYocy5jb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyl7dC5zeW5jRXJyb3JUaHJvd249dHJ1ZTt0LnN5bmNFcnJvclZhbHVlPWV9aWYobi5jYW5SZXBvcnRFcnJvcih0KSl7dC5lcnJvcihlKX1lbHNle2NvbnNvbGUud2FybihlKX19fTtyLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKG4sZSl7dmFyIGk9dGhpcztlPWMoZSk7cmV0dXJuIG5ldyBlKGZ1bmN0aW9uKGUsdCl7dmFyIHI7cj1pLnN1YnNjcmliZShmdW5jdGlvbihlKXt0cnl7bihlKX1jYXRjaChlKXt0KGUpO2lmKHIpe3IudW5zdWJzY3JpYmUoKX19fSx0LGUpfSl9O3IucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zb3VyY2U7cmV0dXJuIHQmJnQuc3Vic2NyaWJlKGUpfTtyLnByb3RvdHlwZVtpLm9ic2VydmFibGVdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3IucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXt2YXIgZT1bXTtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXtlW3RdPWFyZ3VtZW50c1t0XX1pZihlLmxlbmd0aD09PTApe3JldHVybiB0aGlzfXJldHVybiBhLnBpcGVGcm9tQXJyYXkoZSkodGhpcyl9O3IucHJvdG90eXBlLnRvUHJvbWlzZT1mdW5jdGlvbihlKXt2YXIgbj10aGlzO2U9YyhlKTtyZXR1cm4gbmV3IGUoZnVuY3Rpb24oZSx0KXt2YXIgcjtuLnN1YnNjcmliZShmdW5jdGlvbihlKXtyZXR1cm4gcj1lfSxmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0sZnVuY3Rpb24oKXtyZXR1cm4gZShyKX0pfSl9O3IuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgcihlKX07cmV0dXJuIHJ9KCk7ci5PYnNlcnZhYmxlPXU7ZnVuY3Rpb24gYyhlKXtpZighZSl7ZT1zLmNvbmZpZy5Qcm9taXNlfHxQcm9taXNlfWlmKCFlKXt0aHJvdyBuZXcgRXJyb3IoXCJubyBQcm9taXNlIGltcGwgZm91bmRcIil9cmV0dXJuIGV9fSx7XCIuL2NvbmZpZ1wiOjU3LFwiLi9zeW1ib2wvb2JzZXJ2YWJsZVwiOjIwOSxcIi4vdXRpbC9jYW5SZXBvcnRFcnJvclwiOjIxNyxcIi4vdXRpbC9waXBlXCI6MjMzLFwiLi91dGlsL3RvU3Vic2NyaWJlclwiOjI0MH1dLDQ5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9jb25maWdcIik7dmFyIGk9ZShcIi4vdXRpbC9ob3N0UmVwb3J0RXJyb3JcIik7ci5lbXB0eT17Y2xvc2VkOnRydWUsbmV4dDpmdW5jdGlvbihlKXt9LGVycm9yOmZ1bmN0aW9uKGUpe2lmKG4uY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpe3Rocm93IGV9ZWxzZXtpLmhvc3RSZXBvcnRFcnJvcihlKX19LGNvbXBsZXRlOmZ1bmN0aW9uKCl7fX19LHtcIi4vY29uZmlnXCI6NTcsXCIuL3V0aWwvaG9zdFJlcG9ydEVycm9yXCI6MjE4fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi9TdWJzY3JpYmVyXCIpO3ZhciBvPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc310LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfTt0LnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlLHQpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9O3QucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX07cmV0dXJuIHR9KGkuU3Vic2NyaWJlcik7ci5PdXRlclN1YnNjcmliZXI9b30se1wiLi9TdWJzY3JpYmVyXCI6NTV9XSw1MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuL1N1YmplY3RcIik7dmFyIG89ZShcIi4vc2NoZWR1bGVyL3F1ZXVlXCIpO3ZhciBzPWUoXCIuL1N1YnNjcmlwdGlvblwiKTt2YXIgdT1lKFwiLi9vcGVyYXRvcnMvb2JzZXJ2ZU9uXCIpO3ZhciBjPWUoXCIuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIik7dmFyIGw9ZShcIi4vU3ViamVjdFN1YnNjcmlwdGlvblwiKTt2YXIgYT1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7aWYoZT09PXZvaWQgMCl7ZT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9aWYodD09PXZvaWQgMCl7dD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9dmFyIG49aS5jYWxsKHRoaXMpfHx0aGlzO24uc2NoZWR1bGVyPXI7bi5fZXZlbnRzPVtdO24uX2luZmluaXRlVGltZVdpbmRvdz1mYWxzZTtuLl9idWZmZXJTaXplPWU8MT8xOmU7bi5fd2luZG93VGltZT10PDE/MTp0O2lmKHQ9PT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpe24uX2luZmluaXRlVGltZVdpbmRvdz10cnVlO24ubmV4dD1uLm5leHRJbmZpbml0ZVRpbWVXaW5kb3d9ZWxzZXtuLm5leHQ9bi5uZXh0VGltZVdpbmRvd31yZXR1cm4gbn1lLnByb3RvdHlwZS5uZXh0SW5maW5pdGVUaW1lV2luZG93PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50czt0LnB1c2goZSk7aWYodC5sZW5ndGg+dGhpcy5fYnVmZmVyU2l6ZSl7dC5zaGlmdCgpfWkucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLGUpfTtlLnByb3RvdHlwZS5uZXh0VGltZVdpbmRvdz1mdW5jdGlvbihlKXt0aGlzLl9ldmVudHMucHVzaChuZXcgaCh0aGlzLl9nZXROb3coKSxlKSk7dGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMoKTtpLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcyxlKX07ZS5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9pbmZpbml0ZVRpbWVXaW5kb3c7dmFyIHI9dD90aGlzLl9ldmVudHM6dGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMoKTt2YXIgbj10aGlzLnNjaGVkdWxlcjt2YXIgaT1yLmxlbmd0aDt2YXIgbztpZih0aGlzLmNsb3NlZCl7dGhyb3cgbmV3IGMuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3J9ZWxzZSBpZih0aGlzLmlzU3RvcHBlZHx8dGhpcy5oYXNFcnJvcil7bz1zLlN1YnNjcmlwdGlvbi5FTVBUWX1lbHNle3RoaXMub2JzZXJ2ZXJzLnB1c2goZSk7bz1uZXcgbC5TdWJqZWN0U3Vic2NyaXB0aW9uKHRoaXMsZSl9aWYobil7ZS5hZGQoZT1uZXcgdS5PYnNlcnZlT25TdWJzY3JpYmVyKGUsbikpfWlmKHQpe2Zvcih2YXIgYT0wO2E8aSYmIWUuY2xvc2VkO2ErKyl7ZS5uZXh0KHJbYV0pfX1lbHNle2Zvcih2YXIgYT0wO2E8aSYmIWUuY2xvc2VkO2ErKyl7ZS5uZXh0KHJbYV0udmFsdWUpfX1pZih0aGlzLmhhc0Vycm9yKXtlLmVycm9yKHRoaXMudGhyb3duRXJyb3IpfWVsc2UgaWYodGhpcy5pc1N0b3BwZWQpe2UuY29tcGxldGUoKX1yZXR1cm4gb307ZS5wcm90b3R5cGUuX2dldE5vdz1mdW5jdGlvbigpe3JldHVybih0aGlzLnNjaGVkdWxlcnx8by5xdWV1ZSkubm93KCl9O2UucHJvdG90eXBlLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldE5vdygpO3ZhciB0PXRoaXMuX2J1ZmZlclNpemU7dmFyIHI9dGhpcy5fd2luZG93VGltZTt2YXIgbj10aGlzLl9ldmVudHM7dmFyIGk9bi5sZW5ndGg7dmFyIG89MDt3aGlsZShvPGkpe2lmKGUtbltvXS50aW1lPHIpe2JyZWFrfW8rK31pZihpPnQpe289TWF0aC5tYXgobyxpLXQpfWlmKG8+MCl7bi5zcGxpY2UoMCxvKX1yZXR1cm4gbn07cmV0dXJuIGV9KGkuU3ViamVjdCk7ci5SZXBsYXlTdWJqZWN0PWE7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy50aW1lPWU7dGhpcy52YWx1ZT10fXJldHVybiBlfSgpfSx7XCIuL1N1YmplY3RcIjo1MyxcIi4vU3ViamVjdFN1YnNjcmlwdGlvblwiOjU0LFwiLi9TdWJzY3JpcHRpb25cIjo1NixcIi4vb3BlcmF0b3JzL29ic2VydmVPblwiOjEzNixcIi4vc2NoZWR1bGVyL3F1ZXVlXCI6MjA3LFwiLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yXCI6MjE0fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLHQpe2lmKHQ9PT12b2lkIDApe3Q9ci5ub3d9dGhpcy5TY2hlZHVsZXJBY3Rpb249ZTt0aGlzLm5vdz10fXIucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUsdCxyKXtpZih0PT09dm9pZCAwKXt0PTB9cmV0dXJuIG5ldyB0aGlzLlNjaGVkdWxlckFjdGlvbih0aGlzLGUpLnNjaGVkdWxlKHIsdCl9O3Iubm93PWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCl9O3JldHVybiByfSgpO3IuU2NoZWR1bGVyPW59LHt9XSw1MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL09ic2VydmFibGVcIik7dmFyIG89ZShcIi4vU3Vic2NyaWJlclwiKTt2YXIgYT1lKFwiLi9TdWJzY3JpcHRpb25cIik7dmFyIHM9ZShcIi4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvclwiKTt2YXIgdT1lKFwiLi9TdWJqZWN0U3Vic2NyaXB0aW9uXCIpO3ZhciBjPWUoXCIuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyXCIpO3ZhciBsPWZ1bmN0aW9uKHIpe2koZSxyKTtmdW5jdGlvbiBlKGUpe3ZhciB0PXIuY2FsbCh0aGlzLGUpfHx0aGlzO3QuZGVzdGluYXRpb249ZTtyZXR1cm4gdH1yZXR1cm4gZX0oby5TdWJzY3JpYmVyKTtyLlN1YmplY3RTdWJzY3JpYmVyPWw7dmFyIGg9ZnVuY3Rpb24odCl7aShlLHQpO2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7ZS5vYnNlcnZlcnM9W107ZS5jbG9zZWQ9ZmFsc2U7ZS5pc1N0b3BwZWQ9ZmFsc2U7ZS5oYXNFcnJvcj1mYWxzZTtlLnRocm93bkVycm9yPW51bGw7cmV0dXJuIGV9ZS5wcm90b3R5cGVbYy5yeFN1YnNjcmliZXJdPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBsKHRoaXMpfTtlLnByb3RvdHlwZS5saWZ0PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBwKHRoaXMsdGhpcyk7dC5vcGVyYXRvcj1lO3JldHVybiB0fTtlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuY2xvc2VkKXt0aHJvdyBuZXcgcy5PYmplY3RVbnN1YnNjcmliZWRFcnJvcn1pZighdGhpcy5pc1N0b3BwZWQpe3ZhciB0PXRoaXMub2JzZXJ2ZXJzO3ZhciByPXQubGVuZ3RoO3ZhciBuPXQuc2xpY2UoKTtmb3IodmFyIGk9MDtpPHI7aSsrKXtuW2ldLm5leHQoZSl9fX07ZS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7aWYodGhpcy5jbG9zZWQpe3Rocm93IG5ldyBzLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yfXRoaXMuaGFzRXJyb3I9dHJ1ZTt0aGlzLnRocm93bkVycm9yPWU7dGhpcy5pc1N0b3BwZWQ9dHJ1ZTt2YXIgdD10aGlzLm9ic2VydmVyczt2YXIgcj10Lmxlbmd0aDt2YXIgbj10LnNsaWNlKCk7Zm9yKHZhciBpPTA7aTxyO2krKyl7bltpXS5lcnJvcihlKX10aGlzLm9ic2VydmVycy5sZW5ndGg9MH07ZS5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXtpZih0aGlzLmNsb3NlZCl7dGhyb3cgbmV3IHMuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3J9dGhpcy5pc1N0b3BwZWQ9dHJ1ZTt2YXIgZT10aGlzLm9ic2VydmVyczt2YXIgdD1lLmxlbmd0aDt2YXIgcj1lLnNsaWNlKCk7Zm9yKHZhciBuPTA7bjx0O24rKyl7cltuXS5jb21wbGV0ZSgpfXRoaXMub2JzZXJ2ZXJzLmxlbmd0aD0wfTtlLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkPXRydWU7dGhpcy5jbG9zZWQ9dHJ1ZTt0aGlzLm9ic2VydmVycz1udWxsfTtlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuY2xvc2VkKXt0aHJvdyBuZXcgcy5PYmplY3RVbnN1YnNjcmliZWRFcnJvcn1lbHNle3JldHVybiB0LnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcyxlKX19O2UucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5jbG9zZWQpe3Rocm93IG5ldyBzLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yfWVsc2UgaWYodGhpcy5oYXNFcnJvcil7ZS5lcnJvcih0aGlzLnRocm93bkVycm9yKTtyZXR1cm4gYS5TdWJzY3JpcHRpb24uRU1QVFl9ZWxzZSBpZih0aGlzLmlzU3RvcHBlZCl7ZS5jb21wbGV0ZSgpO3JldHVybiBhLlN1YnNjcmlwdGlvbi5FTVBUWX1lbHNle3RoaXMub2JzZXJ2ZXJzLnB1c2goZSk7cmV0dXJuIG5ldyB1LlN1YmplY3RTdWJzY3JpcHRpb24odGhpcyxlKX19O2UucHJvdG90eXBlLmFzT2JzZXJ2YWJsZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBuLk9ic2VydmFibGU7ZS5zb3VyY2U9dGhpcztyZXR1cm4gZX07ZS5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHAoZSx0KX07cmV0dXJuIGV9KG4uT2JzZXJ2YWJsZSk7ci5TdWJqZWN0PWg7dmFyIHA9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyl8fHRoaXM7ci5kZXN0aW5hdGlvbj1lO3Iuc291cmNlPXQ7cmV0dXJuIHJ9ZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlc3RpbmF0aW9uO2lmKHQmJnQubmV4dCl7dC5uZXh0KGUpfX07ZS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjtpZih0JiZ0LmVycm9yKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfX07ZS5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRlc3RpbmF0aW9uO2lmKGUmJmUuY29tcGxldGUpe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX19O2UucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zb3VyY2U7aWYodCl7cmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShlKX1lbHNle3JldHVybiBhLlN1YnNjcmlwdGlvbi5FTVBUWX19O3JldHVybiBlfShoKTtyLkFub255bW91c1N1YmplY3Q9cH0se1wiLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlclwiOjIxMCxcIi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi9TdWJqZWN0U3Vic2NyaXB0aW9uXCI6NTQsXCIuL1N1YnNjcmliZXJcIjo1NSxcIi4vU3Vic2NyaXB0aW9uXCI6NTYsXCIuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIjoyMTR9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL1N1YnNjcmlwdGlvblwiKTt2YXIgbz1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzKXx8dGhpcztyLnN1YmplY3Q9ZTtyLnN1YnNjcmliZXI9dDtyLmNsb3NlZD1mYWxzZTtyZXR1cm4gcn1lLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe2lmKHRoaXMuY2xvc2VkKXtyZXR1cm59dGhpcy5jbG9zZWQ9dHJ1ZTt2YXIgZT10aGlzLnN1YmplY3Q7dmFyIHQ9ZS5vYnNlcnZlcnM7dGhpcy5zdWJqZWN0PW51bGw7aWYoIXR8fHQubGVuZ3RoPT09MHx8ZS5pc1N0b3BwZWR8fGUuY2xvc2VkKXtyZXR1cm59dmFyIHI9dC5pbmRleE9mKHRoaXMuc3Vic2NyaWJlcik7aWYociE9PS0xKXt0LnNwbGljZShyLDEpfX07cmV0dXJuIGV9KG4uU3Vic2NyaXB0aW9uKTtyLlN1YmplY3RTdWJzY3JpcHRpb249b30se1wiLi9TdWJzY3JpcHRpb25cIjo1Nn1dLDU1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIHU9ZShcIi4vdXRpbC9pc0Z1bmN0aW9uXCIpO3ZhciBjPWUoXCIuL09ic2VydmVyXCIpO3ZhciBpPWUoXCIuL1N1YnNjcmlwdGlvblwiKTt2YXIgYT1lKFwiLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi9jb25maWdcIik7dmFyIGw9ZShcIi4vdXRpbC9ob3N0UmVwb3J0RXJyb3JcIik7dmFyIHM9ZnVuY3Rpb24oaSl7bihvLGkpO2Z1bmN0aW9uIG8oZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzKXx8dGhpcztuLnN5bmNFcnJvclZhbHVlPW51bGw7bi5zeW5jRXJyb3JUaHJvd249ZmFsc2U7bi5zeW5jRXJyb3JUaHJvd2FibGU9ZmFsc2U7bi5pc1N0b3BwZWQ9ZmFsc2U7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpuLmRlc3RpbmF0aW9uPWMuZW1wdHk7YnJlYWs7Y2FzZSAxOmlmKCFlKXtuLmRlc3RpbmF0aW9uPWMuZW1wdHk7YnJlYWt9aWYodHlwZW9mIGU9PT1cIm9iamVjdFwiKXtpZihlIGluc3RhbmNlb2Ygbyl7bi5zeW5jRXJyb3JUaHJvd2FibGU9ZS5zeW5jRXJyb3JUaHJvd2FibGU7bi5kZXN0aW5hdGlvbj1lO2UuYWRkKG4pfWVsc2V7bi5zeW5jRXJyb3JUaHJvd2FibGU9dHJ1ZTtuLmRlc3RpbmF0aW9uPW5ldyBoKG4sZSl9YnJlYWt9ZGVmYXVsdDpuLnN5bmNFcnJvclRocm93YWJsZT10cnVlO24uZGVzdGluYXRpb249bmV3IGgobixlLHQscik7YnJlYWt9cmV0dXJuIG59by5wcm90b3R5cGVbYS5yeFN1YnNjcmliZXJdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O28uY3JlYXRlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1uZXcgbyhlLHQscik7bi5zeW5jRXJyb3JUaHJvd2FibGU9ZmFsc2U7cmV0dXJuIG59O28ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNTdG9wcGVkKXt0aGlzLl9uZXh0KGUpfX07by5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNTdG9wcGVkKXt0aGlzLmlzU3RvcHBlZD10cnVlO3RoaXMuX2Vycm9yKGUpfX07by5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1N0b3BwZWQpe3RoaXMuaXNTdG9wcGVkPXRydWU7dGhpcy5fY29tcGxldGUoKX19O28ucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7aWYodGhpcy5jbG9zZWQpe3JldHVybn10aGlzLmlzU3RvcHBlZD10cnVlO2kucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyl9O28ucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dChlKX07by5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSk7dGhpcy51bnN1YnNjcmliZSgpfTtvLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7dGhpcy51bnN1YnNjcmliZSgpfTtvLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcGFyZW50T3JQYXJlbnRzO3RoaXMuX3BhcmVudE9yUGFyZW50cz1udWxsO3RoaXMudW5zdWJzY3JpYmUoKTt0aGlzLmNsb3NlZD1mYWxzZTt0aGlzLmlzU3RvcHBlZD1mYWxzZTt0aGlzLl9wYXJlbnRPclBhcmVudHM9ZTtyZXR1cm4gdGhpc307cmV0dXJuIG99KGkuU3Vic2NyaXB0aW9uKTtyLlN1YnNjcmliZXI9czt2YXIgaD1mdW5jdGlvbihzKXtuKGUscyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1zLmNhbGwodGhpcyl8fHRoaXM7aS5fcGFyZW50U3Vic2NyaWJlcj1lO3ZhciBvO3ZhciBhPWk7aWYodS5pc0Z1bmN0aW9uKHQpKXtvPXR9ZWxzZSBpZih0KXtvPXQubmV4dDtyPXQuZXJyb3I7bj10LmNvbXBsZXRlO2lmKHQhPT1jLmVtcHR5KXthPU9iamVjdC5jcmVhdGUodCk7aWYodS5pc0Z1bmN0aW9uKGEudW5zdWJzY3JpYmUpKXtpLmFkZChhLnVuc3Vic2NyaWJlLmJpbmQoYSkpfWEudW5zdWJzY3JpYmU9aS51bnN1YnNjcmliZS5iaW5kKGkpfX1pLl9jb250ZXh0PWE7aS5fbmV4dD1vO2kuX2Vycm9yPXI7aS5fY29tcGxldGU9bjtyZXR1cm4gaX1lLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCYmdGhpcy5fbmV4dCl7dmFyIHQ9dGhpcy5fcGFyZW50U3Vic2NyaWJlcjtpZighby5jb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZ3x8IXQuc3luY0Vycm9yVGhyb3dhYmxlKXt0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LGUpfWVsc2UgaWYodGhpcy5fX3RyeU9yU2V0RXJyb3IodCx0aGlzLl9uZXh0LGUpKXt0aGlzLnVuc3Vic2NyaWJlKCl9fX07ZS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgdD10aGlzLl9wYXJlbnRTdWJzY3JpYmVyO3ZhciByPW8uY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmc7aWYodGhpcy5fZXJyb3Ipe2lmKCFyfHwhdC5zeW5jRXJyb3JUaHJvd2FibGUpe3RoaXMuX190cnlPclVuc3ViKHRoaXMuX2Vycm9yLGUpO3RoaXMudW5zdWJzY3JpYmUoKX1lbHNle3RoaXMuX190cnlPclNldEVycm9yKHQsdGhpcy5fZXJyb3IsZSk7dGhpcy51bnN1YnNjcmliZSgpfX1lbHNlIGlmKCF0LnN5bmNFcnJvclRocm93YWJsZSl7dGhpcy51bnN1YnNjcmliZSgpO2lmKHIpe3Rocm93IGV9bC5ob3N0UmVwb3J0RXJyb3IoZSl9ZWxzZXtpZihyKXt0LnN5bmNFcnJvclZhbHVlPWU7dC5zeW5jRXJyb3JUaHJvd249dHJ1ZX1lbHNle2wuaG9zdFJlcG9ydEVycm9yKGUpfXRoaXMudW5zdWJzY3JpYmUoKX19fTtlLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgdD10aGlzLl9wYXJlbnRTdWJzY3JpYmVyO2lmKHRoaXMuX2NvbXBsZXRlKXt2YXIgcj1mdW5jdGlvbigpe3JldHVybiBlLl9jb21wbGV0ZS5jYWxsKGUuX2NvbnRleHQpfTtpZighby5jb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZ3x8IXQuc3luY0Vycm9yVGhyb3dhYmxlKXt0aGlzLl9fdHJ5T3JVbnN1YihyKTt0aGlzLnVuc3Vic2NyaWJlKCl9ZWxzZXt0aGlzLl9fdHJ5T3JTZXRFcnJvcih0LHIpO3RoaXMudW5zdWJzY3JpYmUoKX19ZWxzZXt0aGlzLnVuc3Vic2NyaWJlKCl9fX07ZS5wcm90b3R5cGUuX190cnlPclVuc3ViPWZ1bmN0aW9uKGUsdCl7dHJ5e2UuY2FsbCh0aGlzLl9jb250ZXh0LHQpfWNhdGNoKGUpe3RoaXMudW5zdWJzY3JpYmUoKTtpZihvLmNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKXt0aHJvdyBlfWVsc2V7bC5ob3N0UmVwb3J0RXJyb3IoZSl9fX07ZS5wcm90b3R5cGUuX190cnlPclNldEVycm9yPWZ1bmN0aW9uKHQsZSxyKXtpZighby5jb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyl7dGhyb3cgbmV3IEVycm9yKFwiYmFkIGNhbGxcIil9dHJ5e2UuY2FsbCh0aGlzLl9jb250ZXh0LHIpfWNhdGNoKGUpe2lmKG8uY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpe3Quc3luY0Vycm9yVmFsdWU9ZTt0LnN5bmNFcnJvclRocm93bj10cnVlO3JldHVybiB0cnVlfWVsc2V7bC5ob3N0UmVwb3J0RXJyb3IoZSk7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcGFyZW50U3Vic2NyaWJlcjt0aGlzLl9jb250ZXh0PW51bGw7dGhpcy5fcGFyZW50U3Vic2NyaWJlcj1udWxsO2UudW5zdWJzY3JpYmUoKX07cmV0dXJuIGV9KHMpO3IuU2FmZVN1YnNjcmliZXI9aH0se1wiLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlclwiOjIxMCxcIi4vT2JzZXJ2ZXJcIjo0OSxcIi4vU3Vic2NyaXB0aW9uXCI6NTYsXCIuL2NvbmZpZ1wiOjU3LFwiLi91dGlsL2hvc3RSZXBvcnRFcnJvclwiOjIxOCxcIi4vdXRpbC9pc0Z1bmN0aW9uXCI6MjIzfV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBsPWUoXCIuL3V0aWwvaXNBcnJheVwiKTt2YXIgaD1lKFwiLi91dGlsL2lzT2JqZWN0XCIpO3ZhciBwPWUoXCIuL3V0aWwvaXNGdW5jdGlvblwiKTt2YXIgZj1lKFwiLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3JcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBjKGUpe3RoaXMuY2xvc2VkPWZhbHNlO3RoaXMuX3BhcmVudE9yUGFyZW50cz1udWxsO3RoaXMuX3N1YnNjcmlwdGlvbnM9bnVsbDtpZihlKXt0aGlzLl91bnN1YnNjcmliZT1lfX1jLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciB0O2lmKHRoaXMuY2xvc2VkKXtyZXR1cm59dmFyIGU9dGhpcyxyPWUuX3BhcmVudE9yUGFyZW50cyxuPWUuX3Vuc3Vic2NyaWJlLGk9ZS5fc3Vic2NyaXB0aW9uczt0aGlzLmNsb3NlZD10cnVlO3RoaXMuX3BhcmVudE9yUGFyZW50cz1udWxsO3RoaXMuX3N1YnNjcmlwdGlvbnM9bnVsbDtpZihyIGluc3RhbmNlb2YgYyl7ci5yZW1vdmUodGhpcyl9ZWxzZSBpZihyIT09bnVsbCl7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDsrK28pe3ZhciBhPXJbb107YS5yZW1vdmUodGhpcyl9fWlmKHAuaXNGdW5jdGlvbihuKSl7dHJ5e24uY2FsbCh0aGlzKX1jYXRjaChlKXt0PWUgaW5zdGFuY2VvZiBmLlVuc3Vic2NyaXB0aW9uRXJyb3I/ZChlLmVycm9ycyk6W2VdfX1pZihsLmlzQXJyYXkoaSkpe3ZhciBvPS0xO3ZhciBzPWkubGVuZ3RoO3doaWxlKCsrbzxzKXt2YXIgdT1pW29dO2lmKGguaXNPYmplY3QodSkpe3RyeXt1LnVuc3Vic2NyaWJlKCl9Y2F0Y2goZSl7dD10fHxbXTtpZihlIGluc3RhbmNlb2YgZi5VbnN1YnNjcmlwdGlvbkVycm9yKXt0PXQuY29uY2F0KGQoZS5lcnJvcnMpKX1lbHNle3QucHVzaChlKX19fX19aWYodCl7dGhyb3cgbmV3IGYuVW5zdWJzY3JpcHRpb25FcnJvcih0KX19O2MucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD1lO2lmKCFlKXtyZXR1cm4gYy5FTVBUWX1zd2l0Y2godHlwZW9mIGUpe2Nhc2VcImZ1bmN0aW9uXCI6dD1uZXcgYyhlKTtjYXNlXCJvYmplY3RcIjppZih0PT09dGhpc3x8dC5jbG9zZWR8fHR5cGVvZiB0LnVuc3Vic2NyaWJlIT09XCJmdW5jdGlvblwiKXtyZXR1cm4gdH1lbHNlIGlmKHRoaXMuY2xvc2VkKXt0LnVuc3Vic2NyaWJlKCk7cmV0dXJuIHR9ZWxzZSBpZighKHQgaW5zdGFuY2VvZiBjKSl7dmFyIHI9dDt0PW5ldyBjO3QuX3N1YnNjcmlwdGlvbnM9W3JdfWJyZWFrO2RlZmF1bHQ6e3Rocm93IG5ldyBFcnJvcihcInVucmVjb2duaXplZCB0ZWFyZG93biBcIitlK1wiIGFkZGVkIHRvIFN1YnNjcmlwdGlvbi5cIil9fXZhciBuPXQuX3BhcmVudE9yUGFyZW50cztpZihuPT09bnVsbCl7dC5fcGFyZW50T3JQYXJlbnRzPXRoaXN9ZWxzZSBpZihuIGluc3RhbmNlb2YgYyl7aWYobj09PXRoaXMpe3JldHVybiB0fXQuX3BhcmVudE9yUGFyZW50cz1bbix0aGlzXX1lbHNlIGlmKG4uaW5kZXhPZih0aGlzKT09PS0xKXtuLnB1c2godGhpcyl9ZWxzZXtyZXR1cm4gdH12YXIgaT10aGlzLl9zdWJzY3JpcHRpb25zO2lmKGk9PT1udWxsKXt0aGlzLl9zdWJzY3JpcHRpb25zPVt0XX1lbHNle2kucHVzaCh0KX1yZXR1cm4gdH07Yy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N1YnNjcmlwdGlvbnM7aWYodCl7dmFyIHI9dC5pbmRleE9mKGUpO2lmKHIhPT0tMSl7dC5zcGxpY2UociwxKX19fTtjLkVNUFRZPWZ1bmN0aW9uKGUpe2UuY2xvc2VkPXRydWU7cmV0dXJuIGV9KG5ldyBjKTtyZXR1cm4gY30oKTtyLlN1YnNjcmlwdGlvbj1uO2Z1bmN0aW9uIGQoZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQgaW5zdGFuY2VvZiBmLlVuc3Vic2NyaXB0aW9uRXJyb3I/dC5lcnJvcnM6dCl9LFtdKX19LHtcIi4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yXCI6MjE2LFwiLi91dGlsL2lzQXJyYXlcIjoyMjAsXCIuL3V0aWwvaXNGdW5jdGlvblwiOjIyMyxcIi4vdXRpbC9pc09iamVjdFwiOjIyN31dLDU3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1mYWxzZTtyLmNvbmZpZz17UHJvbWlzZTp1bmRlZmluZWQsc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoZSl7aWYoZSl7dmFyIHQ9bmV3IEVycm9yO2NvbnNvbGUud2FybihcIkRFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG5cIit0LnN0YWNrKX1lbHNlIGlmKG4pe2NvbnNvbGUubG9nKFwiUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8M1wiKX1uPWV9LGdldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKCl7cmV0dXJuIG59fX0se31dLDU4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YmplY3RcIik7dmFyIG89ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGE9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL1N1YnNjcmlwdGlvblwiKTt2YXIgdT1lKFwiLi4vb3BlcmF0b3JzL3JlZkNvdW50XCIpO3ZhciBjPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMpfHx0aGlzO3Iuc291cmNlPWU7ci5zdWJqZWN0RmFjdG9yeT10O3IuX3JlZkNvdW50PTA7ci5faXNDb21wbGV0ZT1mYWxzZTtyZXR1cm4gcn1lLnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldFN1YmplY3QoKS5zdWJzY3JpYmUoZSl9O2UucHJvdG90eXBlLmdldFN1YmplY3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdWJqZWN0O2lmKCFlfHxlLmlzU3RvcHBlZCl7dGhpcy5fc3ViamVjdD10aGlzLnN1YmplY3RGYWN0b3J5KCl9cmV0dXJuIHRoaXMuX3N1YmplY3R9O2UucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb25uZWN0aW9uO2lmKCFlKXt0aGlzLl9pc0NvbXBsZXRlPWZhbHNlO2U9dGhpcy5fY29ubmVjdGlvbj1uZXcgcy5TdWJzY3JpcHRpb247ZS5hZGQodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBsKHRoaXMuZ2V0U3ViamVjdCgpLHRoaXMpKSk7aWYoZS5jbG9zZWQpe3RoaXMuX2Nvbm5lY3Rpb249bnVsbDtlPXMuU3Vic2NyaXB0aW9uLkVNUFRZfX1yZXR1cm4gZX07ZS5wcm90b3R5cGUucmVmQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdS5yZWZDb3VudCgpKHRoaXMpfTtyZXR1cm4gZX0oby5PYnNlcnZhYmxlKTtyLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZT1jO3IuY29ubmVjdGFibGVPYnNlcnZhYmxlRGVzY3JpcHRvcj1mdW5jdGlvbigpe3ZhciBlPWMucHJvdG90eXBlO3JldHVybntvcGVyYXRvcjp7dmFsdWU6bnVsbH0sX3JlZkNvdW50Ont2YWx1ZTowLHdyaXRhYmxlOnRydWV9LF9zdWJqZWN0Ont2YWx1ZTpudWxsLHdyaXRhYmxlOnRydWV9LF9jb25uZWN0aW9uOnt2YWx1ZTpudWxsLHdyaXRhYmxlOnRydWV9LF9zdWJzY3JpYmU6e3ZhbHVlOmUuX3N1YnNjcmliZX0sX2lzQ29tcGxldGU6e3ZhbHVlOmUuX2lzQ29tcGxldGUsd3JpdGFibGU6dHJ1ZX0sZ2V0U3ViamVjdDp7dmFsdWU6ZS5nZXRTdWJqZWN0fSxjb25uZWN0Ont2YWx1ZTplLmNvbm5lY3R9LHJlZkNvdW50Ont2YWx1ZTplLnJlZkNvdW50fX19KCk7dmFyIGw9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLmNvbm5lY3RhYmxlPXQ7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMuX3Vuc3Vic2NyaWJlKCk7bi5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcyxlKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0YWJsZS5faXNDb21wbGV0ZT10cnVlO3RoaXMuX3Vuc3Vic2NyaWJlKCk7bi5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9O2UucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29ubmVjdGFibGU7aWYoZSl7dGhpcy5jb25uZWN0YWJsZT1udWxsO3ZhciB0PWUuX2Nvbm5lY3Rpb247ZS5fcmVmQ291bnQ9MDtlLl9zdWJqZWN0PW51bGw7ZS5fY29ubmVjdGlvbj1udWxsO2lmKHQpe3QudW5zdWJzY3JpYmUoKX19fTtyZXR1cm4gZX0obi5TdWJqZWN0U3Vic2NyaWJlcik7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY29ubmVjdGFibGU9ZX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb25uZWN0YWJsZTtyLl9yZWZDb3VudCsrO3ZhciBuPW5ldyBwKGUscik7dmFyIGk9dC5zdWJzY3JpYmUobik7aWYoIW4uY2xvc2VkKXtuLmNvbm5lY3Rpb249ci5jb25uZWN0KCl9cmV0dXJuIGl9O3JldHVybiBlfSgpO3ZhciBwPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5jb25uZWN0YWJsZT10O3JldHVybiByfWUucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29ubmVjdGFibGU7aWYoIWUpe3RoaXMuY29ubmVjdGlvbj1udWxsO3JldHVybn10aGlzLmNvbm5lY3RhYmxlPW51bGw7dmFyIHQ9ZS5fcmVmQ291bnQ7aWYodDw9MCl7dGhpcy5jb25uZWN0aW9uPW51bGw7cmV0dXJufWUuX3JlZkNvdW50PXQtMTtpZih0PjEpe3RoaXMuY29ubmVjdGlvbj1udWxsO3JldHVybn12YXIgcj10aGlzLmNvbm5lY3Rpb247dmFyIG49ZS5fY29ubmVjdGlvbjt0aGlzLmNvbm5lY3Rpb249bnVsbDtpZihuJiYoIXJ8fG49PT1yKSl7bi51bnN1YnNjcmliZSgpfX07cmV0dXJuIGV9KGEuU3Vic2NyaWJlcil9LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL1N1YmplY3RcIjo1MyxcIi4uL1N1YnNjcmliZXJcIjo1NSxcIi4uL1N1YnNjcmlwdGlvblwiOjU2LFwiLi4vb3BlcmF0b3JzL3JlZkNvdW50XCI6MTQ3fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vT2JzZXJ2YWJsZVwiKTt2YXIgYT1lKFwiLi4vc2NoZWR1bGVyL2FzYXBcIik7dmFyIHM9ZShcIi4uL3V0aWwvaXNOdW1lcmljXCIpO3ZhciBvPWZ1bmN0aW9uKGkpe24obyxpKTtmdW5jdGlvbiBvKGUsdCxyKXtpZih0PT09dm9pZCAwKXt0PTB9aWYocj09PXZvaWQgMCl7cj1hLmFzYXB9dmFyIG49aS5jYWxsKHRoaXMpfHx0aGlzO24uc291cmNlPWU7bi5kZWxheVRpbWU9dDtuLnNjaGVkdWxlcj1yO2lmKCFzLmlzTnVtZXJpYyh0KXx8dDwwKXtuLmRlbGF5VGltZT0wfWlmKCFyfHx0eXBlb2Ygci5zY2hlZHVsZSE9PVwiZnVuY3Rpb25cIil7bi5zY2hlZHVsZXI9YS5hc2FwfXJldHVybiBufW8uY3JlYXRlPWZ1bmN0aW9uKGUsdCxyKXtpZih0PT09dm9pZCAwKXt0PTB9aWYocj09PXZvaWQgMCl7cj1hLmFzYXB9cmV0dXJuIG5ldyBvKGUsdCxyKX07by5kaXNwYXRjaD1mdW5jdGlvbihlKXt2YXIgdD1lLnNvdXJjZSxyPWUuc3Vic2NyaWJlcjtyZXR1cm4gdGhpcy5hZGQodC5zdWJzY3JpYmUocikpfTtvLnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVsYXlUaW1lO3ZhciByPXRoaXMuc291cmNlO3ZhciBuPXRoaXMuc2NoZWR1bGVyO3JldHVybiBuLnNjaGVkdWxlKG8uZGlzcGF0Y2gsdCx7c291cmNlOnIsc3Vic2NyaWJlcjplfSl9O3JldHVybiBvfShpLk9ic2VydmFibGUpO3IuU3Vic2NyaWJlT25PYnNlcnZhYmxlPW99LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL3NjaGVkdWxlci9hc2FwXCI6MjA1LFwiLi4vdXRpbC9pc051bWVyaWNcIjoyMjZ9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGM9ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGg9ZShcIi4uL0FzeW5jU3ViamVjdFwiKTt2YXIgbj1lKFwiLi4vb3BlcmF0b3JzL21hcFwiKTt2YXIgbD1lKFwiLi4vdXRpbC9jYW5SZXBvcnRFcnJvclwiKTt2YXIgaT1lKFwiLi4vdXRpbC9pc0FycmF5XCIpO3ZhciBvPWUoXCIuLi91dGlsL2lzU2NoZWR1bGVyXCIpO2Z1bmN0aW9uIGEocyxyLHUpe2lmKHIpe2lmKG8uaXNTY2hlZHVsZXIocikpe3U9cn1lbHNle3JldHVybiBmdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe2VbdF09YXJndW1lbnRzW3RdfXJldHVybiBhKHMsdSkuYXBwbHkodm9pZCAwLGUpLnBpcGUobi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGkuaXNBcnJheShlKT9yLmFwcGx5KHZvaWQgMCxlKTpyKGUpfSkpfX19cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7bltlXT1hcmd1bWVudHNbZV19dmFyIGk9dGhpczt2YXIgbzt2YXIgYT17Y29udGV4dDppLHN1YmplY3Q6byxjYWxsYmFja0Z1bmM6cyxzY2hlZHVsZXI6dX07cmV0dXJuIG5ldyBjLk9ic2VydmFibGUoZnVuY3Rpb24oZSl7aWYoIXUpe2lmKCFvKXtvPW5ldyBoLkFzeW5jU3ViamVjdDt2YXIgdD1mdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe2VbdF09YXJndW1lbnRzW3RdfW8ubmV4dChlLmxlbmd0aDw9MT9lWzBdOmUpO28uY29tcGxldGUoKX07dHJ5e3MuYXBwbHkoaSxuLmNvbmNhdChbdF0pKX1jYXRjaChlKXtpZihsLmNhblJlcG9ydEVycm9yKG8pKXtvLmVycm9yKGUpfWVsc2V7Y29uc29sZS53YXJuKGUpfX19cmV0dXJuIG8uc3Vic2NyaWJlKGUpfWVsc2V7dmFyIHI9e2FyZ3M6bixzdWJzY3JpYmVyOmUscGFyYW1zOmF9O3JldHVybiB1LnNjaGVkdWxlKHAsMCxyKX19KX19ci5iaW5kQ2FsbGJhY2s9YTtmdW5jdGlvbiBwKGUpe3ZhciBuPXRoaXM7dmFyIHQ9dGhpczt2YXIgcj1lLmFyZ3MsaT1lLnN1YnNjcmliZXIsbz1lLnBhcmFtczt2YXIgYT1vLmNhbGxiYWNrRnVuYyxzPW8uY29udGV4dCx1PW8uc2NoZWR1bGVyO3ZhciBjPW8uc3ViamVjdDtpZighYyl7Yz1vLnN1YmplY3Q9bmV3IGguQXN5bmNTdWJqZWN0O3ZhciBsPWZ1bmN0aW9uKCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19dmFyIHI9ZS5sZW5ndGg8PTE/ZVswXTplO24uYWRkKHUuc2NoZWR1bGUoZiwwLHt2YWx1ZTpyLHN1YmplY3Q6Y30pKX07dHJ5e2EuYXBwbHkocyxyLmNvbmNhdChbbF0pKX1jYXRjaChlKXtjLmVycm9yKGUpfX10aGlzLmFkZChjLnN1YnNjcmliZShpKSl9ZnVuY3Rpb24gZihlKXt2YXIgdD1lLnZhbHVlLHI9ZS5zdWJqZWN0O3IubmV4dCh0KTtyLmNvbXBsZXRlKCl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1lLmVycixyPWUuc3ViamVjdDtyLmVycm9yKHQpfX0se1wiLi4vQXN5bmNTdWJqZWN0XCI6NDQsXCIuLi9PYnNlcnZhYmxlXCI6NDgsXCIuLi9vcGVyYXRvcnMvbWFwXCI6MTI1LFwiLi4vdXRpbC9jYW5SZXBvcnRFcnJvclwiOjIxNyxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMCxcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIjoyMzB9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGw9ZShcIi4uL0FzeW5jU3ViamVjdFwiKTt2YXIgaT1lKFwiLi4vb3BlcmF0b3JzL21hcFwiKTt2YXIgdT1lKFwiLi4vdXRpbC9jYW5SZXBvcnRFcnJvclwiKTt2YXIgbz1lKFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiKTt2YXIgYz1lKFwiLi4vdXRpbC9pc0FycmF5XCIpO2Z1bmN0aW9uIGgoYSxyLHMpe2lmKHIpe2lmKG8uaXNTY2hlZHVsZXIocikpe3M9cn1lbHNle3JldHVybiBmdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe2VbdF09YXJndW1lbnRzW3RdfXJldHVybiBoKGEscykuYXBwbHkodm9pZCAwLGUpLnBpcGUoaS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGMuaXNBcnJheShlKT9yLmFwcGx5KHZvaWQgMCxlKTpyKGUpfSkpfX19cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7aVtlXT1hcmd1bWVudHNbZV19dmFyIG89e3N1YmplY3Q6dW5kZWZpbmVkLGFyZ3M6aSxjYWxsYmFja0Z1bmM6YSxzY2hlZHVsZXI6cyxjb250ZXh0OnRoaXN9O3JldHVybiBuZXcgbi5PYnNlcnZhYmxlKGZ1bmN0aW9uKGUpe3ZhciB0PW8uY29udGV4dDt2YXIgbj1vLnN1YmplY3Q7aWYoIXMpe2lmKCFuKXtuPW8uc3ViamVjdD1uZXcgbC5Bc3luY1N1YmplY3Q7dmFyIHI9ZnVuY3Rpb24oKXt2YXIgZT1bXTtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXtlW3RdPWFyZ3VtZW50c1t0XX12YXIgcj1lLnNoaWZ0KCk7aWYocil7bi5lcnJvcihyKTtyZXR1cm59bi5uZXh0KGUubGVuZ3RoPD0xP2VbMF06ZSk7bi5jb21wbGV0ZSgpfTt0cnl7YS5hcHBseSh0LGkuY29uY2F0KFtyXSkpfWNhdGNoKGUpe2lmKHUuY2FuUmVwb3J0RXJyb3Iobikpe24uZXJyb3IoZSl9ZWxzZXtjb25zb2xlLndhcm4oZSl9fX1yZXR1cm4gbi5zdWJzY3JpYmUoZSl9ZWxzZXtyZXR1cm4gcy5zY2hlZHVsZShwLDAse3BhcmFtczpvLHN1YnNjcmliZXI6ZSxjb250ZXh0OnR9KX19KX19ci5iaW5kTm9kZUNhbGxiYWNrPWg7ZnVuY3Rpb24gcChlKXt2YXIgaT10aGlzO3ZhciB0PWUucGFyYW1zLHI9ZS5zdWJzY3JpYmVyLG49ZS5jb250ZXh0O3ZhciBvPXQuY2FsbGJhY2tGdW5jLGE9dC5hcmdzLHM9dC5zY2hlZHVsZXI7dmFyIHU9dC5zdWJqZWN0O2lmKCF1KXt1PXQuc3ViamVjdD1uZXcgbC5Bc3luY1N1YmplY3Q7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXtlW3RdPWFyZ3VtZW50c1t0XX12YXIgcj1lLnNoaWZ0KCk7aWYocil7aS5hZGQocy5zY2hlZHVsZShkLDAse2VycjpyLHN1YmplY3Q6dX0pKX1lbHNle3ZhciBuPWUubGVuZ3RoPD0xP2VbMF06ZTtpLmFkZChzLnNjaGVkdWxlKGYsMCx7dmFsdWU6bixzdWJqZWN0OnV9KSl9fTt0cnl7by5hcHBseShuLGEuY29uY2F0KFtjXSkpfWNhdGNoKGUpe3RoaXMuYWRkKHMuc2NoZWR1bGUoZCwwLHtlcnI6ZSxzdWJqZWN0OnV9KSl9fXRoaXMuYWRkKHUuc3Vic2NyaWJlKHIpKX1mdW5jdGlvbiBmKGUpe3ZhciB0PWUudmFsdWUscj1lLnN1YmplY3Q7ci5uZXh0KHQpO3IuY29tcGxldGUoKX1mdW5jdGlvbiBkKGUpe3ZhciB0PWUuZXJyLHI9ZS5zdWJqZWN0O3IuZXJyb3IodCl9fSx7XCIuLi9Bc3luY1N1YmplY3RcIjo0NCxcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL29wZXJhdG9ycy9tYXBcIjoxMjUsXCIuLi91dGlsL2NhblJlcG9ydEVycm9yXCI6MjE3LFwiLi4vdXRpbC9pc0FycmF5XCI6MjIwLFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiOjIzMH1dLDYyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIik7dmFyIGE9ZShcIi4uL3V0aWwvaXNBcnJheVwiKTt2YXIgbj1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBzPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO3ZhciB1PWUoXCIuL2Zyb21BcnJheVwiKTt2YXIgYz17fTtmdW5jdGlvbiBsKCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19dmFyIHI9bnVsbDt2YXIgbj1udWxsO2lmKG8uaXNTY2hlZHVsZXIoZVtlLmxlbmd0aC0xXSkpe249ZS5wb3AoKX1pZih0eXBlb2YgZVtlLmxlbmd0aC0xXT09PVwiZnVuY3Rpb25cIil7cj1lLnBvcCgpfWlmKGUubGVuZ3RoPT09MSYmYS5pc0FycmF5KGVbMF0pKXtlPWVbMF19cmV0dXJuIHUuZnJvbUFycmF5KGUsbikubGlmdChuZXcgaChyKSl9ci5jb21iaW5lTGF0ZXN0PWw7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMucmVzdWx0U2VsZWN0b3I9ZX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBwKGUsdGhpcy5yZXN1bHRTZWxlY3RvcikpfTtyZXR1cm4gZX0oKTtyLkNvbWJpbmVMYXRlc3RPcGVyYXRvcj1oO3ZhciBwPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5yZXN1bHRTZWxlY3Rvcj10O3IuYWN0aXZlPTA7ci52YWx1ZXM9W107ci5vYnNlcnZhYmxlcz1bXTtyZXR1cm4gcn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnZhbHVlcy5wdXNoKGMpO3RoaXMub2JzZXJ2YWJsZXMucHVzaChlKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vYnNlcnZhYmxlczt2YXIgdD1lLmxlbmd0aDtpZih0PT09MCl7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfWVsc2V7dGhpcy5hY3RpdmU9dDt0aGlzLnRvUmVzcG9uZD10O2Zvcih2YXIgcj0wO3I8dDtyKyspe3ZhciBuPWVbcl07dGhpcy5hZGQocy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLG4sbixyKSl9fX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7aWYoKHRoaXMuYWN0aXZlLT0xKT09PTApe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX19O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzLnZhbHVlczt2YXIgYT1vW3JdO3ZhciBzPSF0aGlzLnRvUmVzcG9uZD8wOmE9PT1jPy0tdGhpcy50b1Jlc3BvbmQ6dGhpcy50b1Jlc3BvbmQ7b1tyXT10O2lmKHM9PT0wKXtpZih0aGlzLnJlc3VsdFNlbGVjdG9yKXt0aGlzLl90cnlSZXN1bHRTZWxlY3RvcihvKX1lbHNle3RoaXMuZGVzdGluYXRpb24ubmV4dChvLnNsaWNlKCkpfX19O2UucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3Rvcj1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLnJlc3VsdFNlbGVjdG9yLmFwcGx5KHRoaXMsZSl9Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtyZXR1cm59dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfTtyZXR1cm4gZX0obi5PdXRlclN1YnNjcmliZXIpO3IuQ29tYmluZUxhdGVzdFN1YnNjcmliZXI9cH0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi91dGlsL2lzQXJyYXlcIjoyMjAsXCIuLi91dGlsL2lzU2NoZWR1bGVyXCI6MjMwLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOSxcIi4vZnJvbUFycmF5XCI6Njh9XSw2MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vb2ZcIik7dmFyIGk9ZShcIi4uL29wZXJhdG9ycy9jb25jYXRBbGxcIik7ZnVuY3Rpb24gbygpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe2VbdF09YXJndW1lbnRzW3RdfXJldHVybiBpLmNvbmNhdEFsbCgpKG4ub2YuYXBwbHkodm9pZCAwLGUpKX1yLmNvbmNhdD1vfSx7XCIuLi9vcGVyYXRvcnMvY29uY2F0QWxsXCI6OTcsXCIuL29mXCI6NzZ9XSw2NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL09ic2VydmFibGVcIik7dmFyIG89ZShcIi4vZnJvbVwiKTt2YXIgYT1lKFwiLi9lbXB0eVwiKTtmdW5jdGlvbiBuKG4pe3JldHVybiBuZXcgaS5PYnNlcnZhYmxlKGZ1bmN0aW9uKHQpe3ZhciBlO3RyeXtlPW4oKX1jYXRjaChlKXt0LmVycm9yKGUpO3JldHVybiB1bmRlZmluZWR9dmFyIHI9ZT9vLmZyb20oZSk6YS5lbXB0eSgpO3JldHVybiByLnN1YnNjcmliZSh0KX0pfXIuZGVmZXI9bn0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi9lbXB0eVwiOjY1LFwiLi9mcm9tXCI6Njd9XSw2NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL09ic2VydmFibGVcIik7ci5FTVBUWT1uZXcgbi5PYnNlcnZhYmxlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbXBsZXRlKCl9KTtmdW5jdGlvbiBpKGUpe3JldHVybiBlP28oZSk6ci5FTVBUWX1yLmVtcHR5PWk7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gbmV3IG4uT2JzZXJ2YWJsZShmdW5jdGlvbihlKXtyZXR1cm4gdC5zY2hlZHVsZShmdW5jdGlvbigpe3JldHVybiBlLmNvbXBsZXRlKCl9KX0pfX0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4fV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBvPWUoXCIuLi91dGlsL2lzQXJyYXlcIik7dmFyIGE9ZShcIi4uL29wZXJhdG9ycy9tYXBcIik7dmFyIHM9ZShcIi4uL3V0aWwvaXNPYmplY3RcIik7dmFyIGw9ZShcIi4vZnJvbVwiKTtmdW5jdGlvbiBpKCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19aWYoZS5sZW5ndGg9PT0xKXt2YXIgcj1lWzBdO2lmKG8uaXNBcnJheShyKSl7cmV0dXJuIHUocixudWxsKX1pZihzLmlzT2JqZWN0KHIpJiZPYmplY3QuZ2V0UHJvdG90eXBlT2Yocik9PT1PYmplY3QucHJvdG90eXBlKXt2YXIgbj1PYmplY3Qua2V5cyhyKTtyZXR1cm4gdShuLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcltlXX0pLG4pfX1pZih0eXBlb2YgZVtlLmxlbmd0aC0xXT09PVwiZnVuY3Rpb25cIil7dmFyIGk9ZS5wb3AoKTtlPWUubGVuZ3RoPT09MSYmby5pc0FycmF5KGVbMF0pP2VbMF06ZTtyZXR1cm4gdShlLG51bGwpLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGkuYXBwbHkodm9pZCAwLGUpfSkpfXJldHVybiB1KGUsbnVsbCl9ci5mb3JrSm9pbj1pO2Z1bmN0aW9uIHUodSxjKXtyZXR1cm4gbmV3IG4uT2JzZXJ2YWJsZShmdW5jdGlvbihuKXt2YXIgaT11Lmxlbmd0aDtpZihpPT09MCl7bi5jb21wbGV0ZSgpO3JldHVybn12YXIgbz1uZXcgQXJyYXkoaSk7dmFyIGE9MDt2YXIgcz0wO3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPWwuZnJvbSh1W3RdKTt2YXIgcj1mYWxzZTtuLmFkZChlLnN1YnNjcmliZSh7bmV4dDpmdW5jdGlvbihlKXtpZighcil7cj10cnVlO3MrK31vW3RdPWV9LGVycm9yOmZ1bmN0aW9uKGUpe3JldHVybiBuLmVycm9yKGUpfSxjb21wbGV0ZTpmdW5jdGlvbigpe2ErKztpZihhPT09aXx8IXIpe2lmKHM9PT1pKXtuLm5leHQoYz9jLnJlZHVjZShmdW5jdGlvbihlLHQscil7cmV0dXJuIGVbdF09b1tyXSxlfSx7fSk6byl9bi5jb21wbGV0ZSgpfX19KSl9O2Zvcih2YXIgdD0wO3Q8aTt0Kyspe2UodCl9fSl9fSx7XCIuLi9PYnNlcnZhYmxlXCI6NDgsXCIuLi9vcGVyYXRvcnMvbWFwXCI6MTI1LFwiLi4vdXRpbC9pc0FycmF5XCI6MjIwLFwiLi4vdXRpbC9pc09iamVjdFwiOjIyNyxcIi4vZnJvbVwiOjY3fV0sNjc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBpPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvXCIpO3ZhciBvPWUoXCIuLi9zY2hlZHVsZWQvc2NoZWR1bGVkXCIpO2Z1bmN0aW9uIGEoZSx0KXtpZighdCl7aWYoZSBpbnN0YW5jZW9mIG4uT2JzZXJ2YWJsZSl7cmV0dXJuIGV9cmV0dXJuIG5ldyBuLk9ic2VydmFibGUoaS5zdWJzY3JpYmVUbyhlKSl9ZWxzZXtyZXR1cm4gby5zY2hlZHVsZWQoZSx0KX19ci5mcm9tPWF9LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL3NjaGVkdWxlZC9zY2hlZHVsZWRcIjoxOTMsXCIuLi91dGlsL3N1YnNjcmliZVRvXCI6MjM0fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBpPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvQXJyYXlcIik7dmFyIG89ZShcIi4uL3NjaGVkdWxlZC9zY2hlZHVsZUFycmF5XCIpO2Z1bmN0aW9uIGEoZSx0KXtpZighdCl7cmV0dXJuIG5ldyBuLk9ic2VydmFibGUoaS5zdWJzY3JpYmVUb0FycmF5KGUpKX1lbHNle3JldHVybiBvLnNjaGVkdWxlQXJyYXkoZSx0KX19ci5mcm9tQXJyYXk9YX0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vc2NoZWR1bGVkL3NjaGVkdWxlQXJyYXlcIjoxODksXCIuLi91dGlsL3N1YnNjcmliZVRvQXJyYXlcIjoyMzV9XSw2OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGE9ZShcIi4uL3V0aWwvaXNBcnJheVwiKTt2YXIgcz1lKFwiLi4vdXRpbC9pc0Z1bmN0aW9uXCIpO3ZhciB1PWUoXCIuLi9vcGVyYXRvcnMvbWFwXCIpO3ZhciBuPWZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmd9KCk7ZnVuY3Rpb24gYyhyLG4saSx0KXtpZihzLmlzRnVuY3Rpb24oaSkpe3Q9aTtpPXVuZGVmaW5lZH1pZih0KXtyZXR1cm4gYyhyLG4saSkucGlwZSh1Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gYS5pc0FycmF5KGUpP3QuYXBwbHkodm9pZCAwLGUpOnQoZSl9KSl9cmV0dXJuIG5ldyBvLk9ic2VydmFibGUoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3QubmV4dChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKX1lbHNle3QubmV4dChlKX19aChyLG4sZSx0LGkpfSl9ci5mcm9tRXZlbnQ9YztmdW5jdGlvbiBoKGUsdCxyLG4saSl7dmFyIG87aWYoZChlKSl7dmFyIGE9ZTtlLmFkZEV2ZW50TGlzdGVuZXIodCxyLGkpO289ZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW1vdmVFdmVudExpc3RlbmVyKHQscixpKX19ZWxzZSBpZihmKGUpKXt2YXIgcz1lO2Uub24odCxyKTtvPWZ1bmN0aW9uKCl7cmV0dXJuIHMub2ZmKHQscil9fWVsc2UgaWYocChlKSl7dmFyIHU9ZTtlLmFkZExpc3RlbmVyKHQscik7bz1mdW5jdGlvbigpe3JldHVybiB1LnJlbW92ZUxpc3RlbmVyKHQscil9fWVsc2UgaWYoZSYmZS5sZW5ndGgpe2Zvcih2YXIgYz0wLGw9ZS5sZW5ndGg7YzxsO2MrKyl7aChlW2NdLHQscixuLGkpfX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHRhcmdldFwiKX1uLmFkZChvKX1mdW5jdGlvbiBwKGUpe3JldHVybiBlJiZ0eXBlb2YgZS5hZGRMaXN0ZW5lcj09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGUucmVtb3ZlTGlzdGVuZXI9PT1cImZ1bmN0aW9uXCJ9ZnVuY3Rpb24gZihlKXtyZXR1cm4gZSYmdHlwZW9mIGUub249PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBlLm9mZj09PVwiZnVuY3Rpb25cIn1mdW5jdGlvbiBkKGUpe3JldHVybiBlJiZ0eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgZS5yZW1vdmVFdmVudExpc3RlbmVyPT09XCJmdW5jdGlvblwifX0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vb3BlcmF0b3JzL21hcFwiOjEyNSxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMCxcIi4uL3V0aWwvaXNGdW5jdGlvblwiOjIyM31dLDcwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbz1lKFwiLi4vT2JzZXJ2YWJsZVwiKTt2YXIgYT1lKFwiLi4vdXRpbC9pc0FycmF5XCIpO3ZhciBzPWUoXCIuLi91dGlsL2lzRnVuY3Rpb25cIik7dmFyIHU9ZShcIi4uL29wZXJhdG9ycy9tYXBcIik7ZnVuY3Rpb24gYyhuLGksdCl7aWYodCl7cmV0dXJuIGMobixpKS5waXBlKHUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBhLmlzQXJyYXkoZSk/dC5hcHBseSh2b2lkIDAsZSk6dChlKX0pKX1yZXR1cm4gbmV3IG8uT2JzZXJ2YWJsZShmdW5jdGlvbihyKXt2YXIgZT1mdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe2VbdF09YXJndW1lbnRzW3RdfXJldHVybiByLm5leHQoZS5sZW5ndGg9PT0xP2VbMF06ZSl9O3ZhciB0O3RyeXt0PW4oZSl9Y2F0Y2goZSl7ci5lcnJvcihlKTtyZXR1cm4gdW5kZWZpbmVkfWlmKCFzLmlzRnVuY3Rpb24oaSkpe3JldHVybiB1bmRlZmluZWR9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGkoZSx0KX19KX1yLmZyb21FdmVudFBhdHRlcm49Y30se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vb3BlcmF0b3JzL21hcFwiOjEyNSxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMCxcIi4uL3V0aWwvaXNGdW5jdGlvblwiOjIyM31dLDcxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vT2JzZXJ2YWJsZVwiKTt2YXIgYz1lKFwiLi4vdXRpbC9pZGVudGl0eVwiKTt2YXIgbD1lKFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiKTtmdW5jdGlvbiBpKGUsaSxvLHQsYSl7dmFyIHM7dmFyIHU7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7dmFyIHI9ZTt1PXIuaW5pdGlhbFN0YXRlO2k9ci5jb25kaXRpb247bz1yLml0ZXJhdGU7cz1yLnJlc3VsdFNlbGVjdG9yfHxjLmlkZW50aXR5O2E9ci5zY2hlZHVsZXJ9ZWxzZSBpZih0PT09dW5kZWZpbmVkfHxsLmlzU2NoZWR1bGVyKHQpKXt1PWU7cz1jLmlkZW50aXR5O2E9dH1lbHNle3U9ZTtzPXR9cmV0dXJuIG5ldyBuLk9ic2VydmFibGUoZnVuY3Rpb24odCl7dmFyIGU9dTtpZihhKXtyZXR1cm4gYS5zY2hlZHVsZShoLDAse3N1YnNjcmliZXI6dCxpdGVyYXRlOm8sY29uZGl0aW9uOmkscmVzdWx0U2VsZWN0b3I6cyxzdGF0ZTplfSl9ZG97aWYoaSl7dmFyIHI9dm9pZCAwO3RyeXtyPWkoZSl9Y2F0Y2goZSl7dC5lcnJvcihlKTtyZXR1cm4gdW5kZWZpbmVkfWlmKCFyKXt0LmNvbXBsZXRlKCk7YnJlYWt9fXZhciBuPXZvaWQgMDt0cnl7bj1zKGUpfWNhdGNoKGUpe3QuZXJyb3IoZSk7cmV0dXJuIHVuZGVmaW5lZH10Lm5leHQobik7aWYodC5jbG9zZWQpe2JyZWFrfXRyeXtlPW8oZSl9Y2F0Y2goZSl7dC5lcnJvcihlKTtyZXR1cm4gdW5kZWZpbmVkfX13aGlsZSh0cnVlKTtyZXR1cm4gdW5kZWZpbmVkfSl9ci5nZW5lcmF0ZT1pO2Z1bmN0aW9uIGgoZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS5jb25kaXRpb247aWYodC5jbG9zZWQpe3JldHVybiB1bmRlZmluZWR9aWYoZS5uZWVkSXRlcmF0ZSl7dHJ5e2Uuc3RhdGU9ZS5pdGVyYXRlKGUuc3RhdGUpfWNhdGNoKGUpe3QuZXJyb3IoZSk7cmV0dXJuIHVuZGVmaW5lZH19ZWxzZXtlLm5lZWRJdGVyYXRlPXRydWV9aWYocil7dmFyIG49dm9pZCAwO3RyeXtuPXIoZS5zdGF0ZSl9Y2F0Y2goZSl7dC5lcnJvcihlKTtyZXR1cm4gdW5kZWZpbmVkfWlmKCFuKXt0LmNvbXBsZXRlKCk7cmV0dXJuIHVuZGVmaW5lZH1pZih0LmNsb3NlZCl7cmV0dXJuIHVuZGVmaW5lZH19dmFyIGk7dHJ5e2k9ZS5yZXN1bHRTZWxlY3RvcihlLnN0YXRlKX1jYXRjaChlKXt0LmVycm9yKGUpO3JldHVybiB1bmRlZmluZWR9aWYodC5jbG9zZWQpe3JldHVybiB1bmRlZmluZWR9dC5uZXh0KGkpO2lmKHQuY2xvc2VkKXtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiB0aGlzLnNjaGVkdWxlKGUpfX0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vdXRpbC9pZGVudGl0eVwiOjIxOSxcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIjoyMzB9XSw3MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vZGVmZXJcIik7dmFyIGk9ZShcIi4vZW1wdHlcIik7ZnVuY3Rpb24gbyhlLHQscil7aWYodD09PXZvaWQgMCl7dD1pLkVNUFRZfWlmKHI9PT12b2lkIDApe3I9aS5FTVBUWX1yZXR1cm4gbi5kZWZlcihmdW5jdGlvbigpe3JldHVybiBlKCk/dDpyfSl9ci5paWY9b30se1wiLi9kZWZlclwiOjY0LFwiLi9lbXB0eVwiOjY1fV0sNzM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBpPWUoXCIuLi9zY2hlZHVsZXIvYXN5bmNcIik7dmFyIG89ZShcIi4uL3V0aWwvaXNOdW1lcmljXCIpO2Z1bmN0aW9uIGEodCxyKXtpZih0PT09dm9pZCAwKXt0PTB9aWYocj09PXZvaWQgMCl7cj1pLmFzeW5jfWlmKCFvLmlzTnVtZXJpYyh0KXx8dDwwKXt0PTB9aWYoIXJ8fHR5cGVvZiByLnNjaGVkdWxlIT09XCJmdW5jdGlvblwiKXtyPWkuYXN5bmN9cmV0dXJuIG5ldyBuLk9ic2VydmFibGUoZnVuY3Rpb24oZSl7ZS5hZGQoci5zY2hlZHVsZShzLHQse3N1YnNjcmliZXI6ZSxjb3VudGVyOjAscGVyaW9kOnR9KSk7cmV0dXJuIGV9KX1yLmludGVydmFsPWE7ZnVuY3Rpb24gcyhlKXt2YXIgdD1lLnN1YnNjcmliZXIscj1lLmNvdW50ZXIsbj1lLnBlcmlvZDt0Lm5leHQocik7dGhpcy5zY2hlZHVsZSh7c3Vic2NyaWJlcjp0LGNvdW50ZXI6cisxLHBlcmlvZDpufSxuKX19LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL3NjaGVkdWxlci9hc3luY1wiOjIwNixcIi4uL3V0aWwvaXNOdW1lcmljXCI6MjI2fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBhPWUoXCIuLi91dGlsL2lzU2NoZWR1bGVyXCIpO3ZhciBzPWUoXCIuLi9vcGVyYXRvcnMvbWVyZ2VBbGxcIik7dmFyIHU9ZShcIi4vZnJvbUFycmF5XCIpO2Z1bmN0aW9uIG4oKXt2YXIgZT1bXTtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXtlW3RdPWFyZ3VtZW50c1t0XX12YXIgcj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7dmFyIG49bnVsbDt2YXIgaT1lW2UubGVuZ3RoLTFdO2lmKGEuaXNTY2hlZHVsZXIoaSkpe249ZS5wb3AoKTtpZihlLmxlbmd0aD4xJiZ0eXBlb2YgZVtlLmxlbmd0aC0xXT09PVwibnVtYmVyXCIpe3I9ZS5wb3AoKX19ZWxzZSBpZih0eXBlb2YgaT09PVwibnVtYmVyXCIpe3I9ZS5wb3AoKX1pZihuPT09bnVsbCYmZS5sZW5ndGg9PT0xJiZlWzBdaW5zdGFuY2VvZiBvLk9ic2VydmFibGUpe3JldHVybiBlWzBdfXJldHVybiBzLm1lcmdlQWxsKHIpKHUuZnJvbUFycmF5KGUsbikpfXIubWVyZ2U9bn0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vb3BlcmF0b3JzL21lcmdlQWxsXCI6MTMwLFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiOjIzMCxcIi4vZnJvbUFycmF5XCI6Njh9XSw3NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGk9ZShcIi4uL3V0aWwvbm9vcFwiKTtyLk5FVkVSPW5ldyBuLk9ic2VydmFibGUoaS5ub29wKTtmdW5jdGlvbiBvKCl7cmV0dXJuIHIuTkVWRVJ9ci5uZXZlcj1vfSx7XCIuLi9PYnNlcnZhYmxlXCI6NDgsXCIuLi91dGlsL25vb3BcIjoyMzF9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIik7dmFyIGk9ZShcIi4vZnJvbUFycmF5XCIpO3ZhciBvPWUoXCIuLi9zY2hlZHVsZWQvc2NoZWR1bGVBcnJheVwiKTtmdW5jdGlvbiBhKCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19dmFyIHI9ZVtlLmxlbmd0aC0xXTtpZihuLmlzU2NoZWR1bGVyKHIpKXtlLnBvcCgpO3JldHVybiBvLnNjaGVkdWxlQXJyYXkoZSxyKX1lbHNle3JldHVybiBpLmZyb21BcnJheShlKX19ci5vZj1hfSx7XCIuLi9zY2hlZHVsZWQvc2NoZWR1bGVBcnJheVwiOjE4OSxcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIjoyMzAsXCIuL2Zyb21BcnJheVwiOjY4fV0sNzc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBvPWUoXCIuL2Zyb21cIik7dmFyIGE9ZShcIi4uL3V0aWwvaXNBcnJheVwiKTt2YXIgcz1lKFwiLi9lbXB0eVwiKTtmdW5jdGlvbiB1KCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19aWYoZS5sZW5ndGg9PT0wKXtyZXR1cm4gcy5FTVBUWX12YXIgcj1lWzBdLG49ZS5zbGljZSgxKTtpZihlLmxlbmd0aD09PTEmJmEuaXNBcnJheShyKSl7cmV0dXJuIHUuYXBwbHkodm9pZCAwLHIpfXJldHVybiBuZXcgaS5PYnNlcnZhYmxlKGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuYWRkKHUuYXBwbHkodm9pZCAwLG4pLnN1YnNjcmliZSh0KSl9O3JldHVybiBvLmZyb20ocikuc3Vic2NyaWJlKHtuZXh0OmZ1bmN0aW9uKGUpe3QubmV4dChlKX0sZXJyb3I6ZSxjb21wbGV0ZTplfSl9KX1yLm9uRXJyb3JSZXN1bWVOZXh0PXV9LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMCxcIi4vZW1wdHlcIjo2NSxcIi4vZnJvbVwiOjY3fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBhPWUoXCIuLi9TdWJzY3JpcHRpb25cIik7ZnVuY3Rpb24gbihpLG4pe2lmKCFuKXtyZXR1cm4gbmV3IG8uT2JzZXJ2YWJsZShmdW5jdGlvbihlKXt2YXIgdD1PYmplY3Qua2V5cyhpKTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoJiYhZS5jbG9zZWQ7cisrKXt2YXIgbj10W3JdO2lmKGkuaGFzT3duUHJvcGVydHkobikpe2UubmV4dChbbixpW25dXSl9fWUuY29tcGxldGUoKX0pfWVsc2V7cmV0dXJuIG5ldyBvLk9ic2VydmFibGUoZnVuY3Rpb24oZSl7dmFyIHQ9T2JqZWN0LmtleXMoaSk7dmFyIHI9bmV3IGEuU3Vic2NyaXB0aW9uO3IuYWRkKG4uc2NoZWR1bGUocywwLHtrZXlzOnQsaW5kZXg6MCxzdWJzY3JpYmVyOmUsc3Vic2NyaXB0aW9uOnIsb2JqOml9KSk7cmV0dXJuIHJ9KX19ci5wYWlycz1uO2Z1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5rZXlzLHI9ZS5pbmRleCxuPWUuc3Vic2NyaWJlcixpPWUuc3Vic2NyaXB0aW9uLG89ZS5vYmo7aWYoIW4uY2xvc2VkKXtpZihyPHQubGVuZ3RoKXt2YXIgYT10W3JdO24ubmV4dChbYSxvW2FdXSk7aS5hZGQodGhpcy5zY2hlZHVsZSh7a2V5czp0LGluZGV4OnIrMSxzdWJzY3JpYmVyOm4sc3Vic2NyaXB0aW9uOmksb2JqOm99KSl9ZWxzZXtuLmNvbXBsZXRlKCl9fX1yLmRpc3BhdGNoPXN9LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL1N1YnNjcmlwdGlvblwiOjU2fV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi91dGlsL25vdFwiKTt2YXIgaT1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1wiKTt2YXIgbz1lKFwiLi4vb3BlcmF0b3JzL2ZpbHRlclwiKTt2YXIgYT1lKFwiLi4vT2JzZXJ2YWJsZVwiKTtmdW5jdGlvbiBzKGUsdCxyKXtyZXR1cm5bby5maWx0ZXIodCxyKShuZXcgYS5PYnNlcnZhYmxlKGkuc3Vic2NyaWJlVG8oZSkpKSxvLmZpbHRlcihuLm5vdCh0LHIpKShuZXcgYS5PYnNlcnZhYmxlKGkuc3Vic2NyaWJlVG8oZSkpKV19ci5wYXJ0aXRpb249c30se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vb3BlcmF0b3JzL2ZpbHRlclwiOjExNixcIi4uL3V0aWwvbm90XCI6MjMyLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1wiOjIzNH1dLDgwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL3V0aWwvaXNBcnJheVwiKTt2YXIgbz1lKFwiLi9mcm9tQXJyYXlcIik7dmFyIGE9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgcz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiB1KCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19aWYoZS5sZW5ndGg9PT0xKXtpZihpLmlzQXJyYXkoZVswXSkpe2U9ZVswXX1lbHNle3JldHVybiBlWzBdfX1yZXR1cm4gby5mcm9tQXJyYXkoZSx1bmRlZmluZWQpLmxpZnQobmV3IGMpfXIucmFjZT11O3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBsKGUpKX07cmV0dXJuIGV9KCk7ci5SYWNlT3BlcmF0b3I9Yzt2YXIgbD1mdW5jdGlvbihyKXtuKGUscik7ZnVuY3Rpb24gZShlKXt2YXIgdD1yLmNhbGwodGhpcyxlKXx8dGhpczt0Lmhhc0ZpcnN0PWZhbHNlO3Qub2JzZXJ2YWJsZXM9W107dC5zdWJzY3JpcHRpb25zPVtdO3JldHVybiB0fWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMub2JzZXJ2YWJsZXMucHVzaChlKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vYnNlcnZhYmxlczt2YXIgdD1lLmxlbmd0aDtpZih0PT09MCl7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfWVsc2V7Zm9yKHZhciByPTA7cjx0JiYhdGhpcy5oYXNGaXJzdDtyKyspe3ZhciBuPWVbcl07dmFyIGk9cy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLG4sbixyKTtpZih0aGlzLnN1YnNjcmlwdGlvbnMpe3RoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGkpfXRoaXMuYWRkKGkpfXRoaXMub2JzZXJ2YWJsZXM9bnVsbH19O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXtpZighdGhpcy5oYXNGaXJzdCl7dGhpcy5oYXNGaXJzdD10cnVlO2Zvcih2YXIgbz0wO288dGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aDtvKyspe2lmKG8hPT1yKXt2YXIgYT10aGlzLnN1YnNjcmlwdGlvbnNbb107YS51bnN1YnNjcmliZSgpO3RoaXMucmVtb3ZlKGEpfX10aGlzLnN1YnNjcmlwdGlvbnM9bnVsbH10aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9O3JldHVybiBlfShhLk91dGVyU3Vic2NyaWJlcik7ci5SYWNlU3Vic2NyaWJlcj1sfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzksXCIuL2Zyb21BcnJheVwiOjY4fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBhPWUoXCIuLi9PYnNlcnZhYmxlXCIpO2Z1bmN0aW9uIG4obixpLG8pe2lmKG49PT12b2lkIDApe249MH1yZXR1cm4gbmV3IGEuT2JzZXJ2YWJsZShmdW5jdGlvbihlKXtpZihpPT09dW5kZWZpbmVkKXtpPW47bj0wfXZhciB0PTA7dmFyIHI9bjtpZihvKXtyZXR1cm4gby5zY2hlZHVsZShzLDAse2luZGV4OnQsY291bnQ6aSxzdGFydDpuLHN1YnNjcmliZXI6ZX0pfWVsc2V7ZG97aWYodCsrPj1pKXtlLmNvbXBsZXRlKCk7YnJlYWt9ZS5uZXh0KHIrKyk7aWYoZS5jbG9zZWQpe2JyZWFrfX13aGlsZSh0cnVlKX1yZXR1cm4gdW5kZWZpbmVkfSl9ci5yYW5nZT1uO2Z1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5zdGFydCxyPWUuaW5kZXgsbj1lLmNvdW50LGk9ZS5zdWJzY3JpYmVyO2lmKHI+PW4pe2kuY29tcGxldGUoKTtyZXR1cm59aS5uZXh0KHQpO2lmKGkuY2xvc2VkKXtyZXR1cm59ZS5pbmRleD1yKzE7ZS5zdGFydD10KzE7dGhpcy5zY2hlZHVsZShlKX1yLmRpc3BhdGNoPXN9LHtcIi4uL09ic2VydmFibGVcIjo0OH1dLDgyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vT2JzZXJ2YWJsZVwiKTtmdW5jdGlvbiBpKHQscil7aWYoIXIpe3JldHVybiBuZXcgbi5PYnNlcnZhYmxlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmVycm9yKHQpfSl9ZWxzZXtyZXR1cm4gbmV3IG4uT2JzZXJ2YWJsZShmdW5jdGlvbihlKXtyZXR1cm4gci5zY2hlZHVsZShvLDAse2Vycm9yOnQsc3Vic2NyaWJlcjplfSl9KX19ci50aHJvd0Vycm9yPWk7ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLmVycm9yLHI9ZS5zdWJzY3JpYmVyO3IuZXJyb3IodCl9fSx7XCIuLi9PYnNlcnZhYmxlXCI6NDh9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGE9ZShcIi4uL3NjaGVkdWxlci9hc3luY1wiKTt2YXIgcz1lKFwiLi4vdXRpbC9pc051bWVyaWNcIik7dmFyIHU9ZShcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIik7ZnVuY3Rpb24gbihyLGUsbil7aWYocj09PXZvaWQgMCl7cj0wfXZhciBpPS0xO2lmKHMuaXNOdW1lcmljKGUpKXtpPU51bWJlcihlKTwxJiYxfHxOdW1iZXIoZSl9ZWxzZSBpZih1LmlzU2NoZWR1bGVyKGUpKXtuPWV9aWYoIXUuaXNTY2hlZHVsZXIobikpe249YS5hc3luY31yZXR1cm4gbmV3IG8uT2JzZXJ2YWJsZShmdW5jdGlvbihlKXt2YXIgdD1zLmlzTnVtZXJpYyhyKT9yOityLW4ubm93KCk7cmV0dXJuIG4uc2NoZWR1bGUoYyx0LHtpbmRleDowLHBlcmlvZDppLHN1YnNjcmliZXI6ZX0pfSl9ci50aW1lcj1uO2Z1bmN0aW9uIGMoZSl7dmFyIHQ9ZS5pbmRleCxyPWUucGVyaW9kLG49ZS5zdWJzY3JpYmVyO24ubmV4dCh0KTtpZihuLmNsb3NlZCl7cmV0dXJufWVsc2UgaWYocj09PS0xKXtyZXR1cm4gbi5jb21wbGV0ZSgpfWUuaW5kZXg9dCsxO3RoaXMuc2NoZWR1bGUoZSxyKX19LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL3NjaGVkdWxlci9hc3luY1wiOjIwNixcIi4uL3V0aWwvaXNOdW1lcmljXCI6MjI2LFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiOjIzMH1dLDg0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vT2JzZXJ2YWJsZVwiKTt2YXIgcz1lKFwiLi9mcm9tXCIpO3ZhciB1PWUoXCIuL2VtcHR5XCIpO2Z1bmN0aW9uIGkobyxhKXtyZXR1cm4gbmV3IG4uT2JzZXJ2YWJsZShmdW5jdGlvbih0KXt2YXIgZTt0cnl7ZT1vKCl9Y2F0Y2goZSl7dC5lcnJvcihlKTtyZXR1cm4gdW5kZWZpbmVkfXZhciByO3RyeXtyPWEoZSl9Y2F0Y2goZSl7dC5lcnJvcihlKTtyZXR1cm4gdW5kZWZpbmVkfXZhciBuPXI/cy5mcm9tKHIpOnUuRU1QVFk7dmFyIGk9bi5zdWJzY3JpYmUodCk7cmV0dXJuIGZ1bmN0aW9uKCl7aS51bnN1YnNjcmliZSgpO2lmKGUpe2UudW5zdWJzY3JpYmUoKX19fSl9ci51c2luZz1pfSx7XCIuLi9PYnNlcnZhYmxlXCI6NDgsXCIuL2VtcHR5XCI6NjUsXCIuL2Zyb21cIjo2N31dLDg1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4vZnJvbUFycmF5XCIpO3ZhciBvPWUoXCIuLi91dGlsL2lzQXJyYXlcIik7dmFyIGE9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgdT1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTt2YXIgYz1lKFwiLi4vLi4vaW50ZXJuYWwvc3ltYm9sL2l0ZXJhdG9yXCIpO2Z1bmN0aW9uIGwoKXt2YXIgZT1bXTtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXtlW3RdPWFyZ3VtZW50c1t0XX12YXIgcj1lW2UubGVuZ3RoLTFdO2lmKHR5cGVvZiByPT09XCJmdW5jdGlvblwiKXtlLnBvcCgpfXJldHVybiBpLmZyb21BcnJheShlLHVuZGVmaW5lZCkubGlmdChuZXcgaChyKSl9ci56aXA9bDt2YXIgaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5yZXN1bHRTZWxlY3Rvcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHAoZSx0aGlzLnJlc3VsdFNlbGVjdG9yKSl9O3JldHVybiBlfSgpO3IuWmlwT3BlcmF0b3I9aDt2YXIgcD1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7aWYocj09PXZvaWQgMCl7cj1PYmplY3QuY3JlYXRlKG51bGwpfXZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24uaXRlcmF0b3JzPVtdO24uYWN0aXZlPTA7bi5yZXN1bHRTZWxlY3Rvcj10eXBlb2YgdD09PVwiZnVuY3Rpb25cIj90Om51bGw7bi52YWx1ZXM9cjtyZXR1cm4gbn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLml0ZXJhdG9ycztpZihvLmlzQXJyYXkoZSkpe3QucHVzaChuZXcgZChlKSl9ZWxzZSBpZih0eXBlb2YgZVtjLml0ZXJhdG9yXT09PVwiZnVuY3Rpb25cIil7dC5wdXNoKG5ldyBmKGVbYy5pdGVyYXRvcl0oKSkpfWVsc2V7dC5wdXNoKG5ldyB2KHRoaXMuZGVzdGluYXRpb24sdGhpcyxlKSl9fTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLml0ZXJhdG9yczt2YXIgdD1lLmxlbmd0aDt0aGlzLnVuc3Vic2NyaWJlKCk7aWYodD09PTApe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtyZXR1cm59dGhpcy5hY3RpdmU9dDtmb3IodmFyIHI9MDtyPHQ7cisrKXt2YXIgbj1lW3JdO2lmKG4uc3RpbGxVbnN1YnNjcmliZWQpe3ZhciBpPXRoaXMuZGVzdGluYXRpb247aS5hZGQobi5zdWJzY3JpYmUobixyKSl9ZWxzZXt0aGlzLmFjdGl2ZS0tfX19O2UucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlPWZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUtLTtpZih0aGlzLmFjdGl2ZT09PTApe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX19O2UucHJvdG90eXBlLmNoZWNrSXRlcmF0b3JzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pdGVyYXRvcnM7dmFyIHQ9ZS5sZW5ndGg7dmFyIHI9dGhpcy5kZXN0aW5hdGlvbjtmb3IodmFyIG49MDtuPHQ7bisrKXt2YXIgaT1lW25dO2lmKHR5cGVvZiBpLmhhc1ZhbHVlPT09XCJmdW5jdGlvblwiJiYhaS5oYXNWYWx1ZSgpKXtyZXR1cm59fXZhciBvPWZhbHNlO3ZhciBhPVtdO2Zvcih2YXIgbj0wO248dDtuKyspe3ZhciBpPWVbbl07dmFyIHM9aS5uZXh0KCk7aWYoaS5oYXNDb21wbGV0ZWQoKSl7bz10cnVlfWlmKHMuZG9uZSl7ci5jb21wbGV0ZSgpO3JldHVybn1hLnB1c2gocy52YWx1ZSl9aWYodGhpcy5yZXN1bHRTZWxlY3Rvcil7dGhpcy5fdHJ5cmVzdWx0U2VsZWN0b3IoYSl9ZWxzZXtyLm5leHQoYSl9aWYobyl7ci5jb21wbGV0ZSgpfX07ZS5wcm90b3R5cGUuX3RyeXJlc3VsdFNlbGVjdG9yPWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PXRoaXMucmVzdWx0U2VsZWN0b3IuYXBwbHkodGhpcyxlKX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpO3JldHVybn10aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9O3JldHVybiBlfShhLlN1YnNjcmliZXIpO3IuWmlwU3Vic2NyaWJlcj1wO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLml0ZXJhdG9yPWU7dGhpcy5uZXh0UmVzdWx0PWUubmV4dCgpfWUucHJvdG90eXBlLmhhc1ZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9O2UucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHRSZXN1bHQ7dGhpcy5uZXh0UmVzdWx0PXRoaXMuaXRlcmF0b3IubmV4dCgpO3JldHVybiBlfTtlLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHRSZXN1bHQ7cmV0dXJuIGUmJmUuZG9uZX07cmV0dXJuIGV9KCk7dmFyIGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuYXJyYXk9ZTt0aGlzLmluZGV4PTA7dGhpcy5sZW5ndGg9MDt0aGlzLmxlbmd0aD1lLmxlbmd0aH1lLnByb3RvdHlwZVtjLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaW5kZXgrKzt2YXIgcj10aGlzLmFycmF5O3JldHVybiB0PHRoaXMubGVuZ3RoP3t2YWx1ZTpyW3RdLGRvbmU6ZmFsc2V9Ont2YWx1ZTpudWxsLGRvbmU6dHJ1ZX19O2UucHJvdG90eXBlLmhhc1ZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoPnRoaXMuaW5kZXh9O2UucHJvdG90eXBlLmhhc0NvbXBsZXRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aD09PXRoaXMuaW5kZXh9O3JldHVybiBlfSgpO3ZhciB2PWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLnBhcmVudD10O24ub2JzZXJ2YWJsZT1yO24uc3RpbGxVbnN1YnNjcmliZWQ9dHJ1ZTtuLmJ1ZmZlcj1bXTtuLmlzQ29tcGxldGU9ZmFsc2U7cmV0dXJuIG59ZS5wcm90b3R5cGVbYy5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnVmZmVyO2lmKGUubGVuZ3RoPT09MCYmdGhpcy5pc0NvbXBsZXRlKXtyZXR1cm57dmFsdWU6bnVsbCxkb25lOnRydWV9fWVsc2V7cmV0dXJue3ZhbHVlOmUuc2hpZnQoKSxkb25lOmZhbHNlfX19O2UucHJvdG90eXBlLmhhc1ZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aD4wfTtlLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoPT09MCYmdGhpcy5pc0NvbXBsZXRlfTtlLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbigpe2lmKHRoaXMuYnVmZmVyLmxlbmd0aD4wKXt0aGlzLmlzQ29tcGxldGU9dHJ1ZTt0aGlzLnBhcmVudC5ub3RpZnlJbmFjdGl2ZSgpfWVsc2V7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfX07ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuLGkpe3RoaXMuYnVmZmVyLnB1c2godCk7dGhpcy5wYXJlbnQuY2hlY2tJdGVyYXRvcnMoKX07ZS5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyx0aGlzLm9ic2VydmFibGUsdGhpcyx0KX07cmV0dXJuIGV9KHMuT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vLi4vaW50ZXJuYWwvc3ltYm9sL2l0ZXJhdG9yXCI6MjA4LFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi91dGlsL2lzQXJyYXlcIjoyMjAsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5LFwiLi9mcm9tQXJyYXlcIjo2OH1dLDg2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBhKHIpe3JldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IHMocikpfX1yLmF1ZGl0PWE7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZHVyYXRpb25TZWxlY3Rvcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHUoZSx0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLmR1cmF0aW9uU2VsZWN0b3I9dDtyLmhhc1ZhbHVlPWZhbHNlO3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWU9ZTt0aGlzLmhhc1ZhbHVlPXRydWU7aWYoIXRoaXMudGhyb3R0bGVkKXt2YXIgdD12b2lkIDA7dHJ5e3ZhciByPXRoaXMuZHVyYXRpb25TZWxlY3Rvcjt0PXIoZSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9dmFyIG49by5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHQpO2lmKCFufHxuLmNsb3NlZCl7dGhpcy5jbGVhclRocm90dGxlKCl9ZWxzZXt0aGlzLmFkZCh0aGlzLnRocm90dGxlZD1uKX19fTtlLnByb3RvdHlwZS5jbGVhclRocm90dGxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUudmFsdWUscj1lLmhhc1ZhbHVlLG49ZS50aHJvdHRsZWQ7aWYobil7dGhpcy5yZW1vdmUobik7dGhpcy50aHJvdHRsZWQ9bnVsbDtuLnVuc3Vic2NyaWJlKCl9aWYocil7dGhpcy52YWx1ZT1udWxsO3RoaXMuaGFzVmFsdWU9ZmFsc2U7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfX07ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuKXt0aGlzLmNsZWFyVGhyb3R0bGUoKX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGhyb3R0bGUoKX07cmV0dXJuIGV9KG4uT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9zY2hlZHVsZXIvYXN5bmNcIik7dmFyIGk9ZShcIi4vYXVkaXRcIik7dmFyIG89ZShcIi4uL29ic2VydmFibGUvdGltZXJcIik7ZnVuY3Rpb24gYShlLHQpe2lmKHQ9PT12b2lkIDApe3Q9bi5hc3luY31yZXR1cm4gaS5hdWRpdChmdW5jdGlvbigpe3JldHVybiBvLnRpbWVyKGUsdCl9KX1yLmF1ZGl0VGltZT1hfSx7XCIuLi9vYnNlcnZhYmxlL3RpbWVyXCI6ODMsXCIuLi9zY2hlZHVsZXIvYXN5bmNcIjoyMDYsXCIuL2F1ZGl0XCI6ODZ9XSw4ODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIG89ZShcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZnVuY3Rpb24gYShyKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyBzKHIpKX19ci5idWZmZXI9YTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5jbG9zaW5nTm90aWZpZXI9ZX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5jbG9zaW5nTm90aWZpZXIpKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLmJ1ZmZlcj1bXTtyLmFkZChvLnN1YnNjcmliZVRvUmVzdWx0KHIsdCkpO3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuYnVmZmVyLnB1c2goZSl9O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzLmJ1ZmZlcjt0aGlzLmJ1ZmZlcj1bXTt0aGlzLmRlc3RpbmF0aW9uLm5leHQobyl9O3JldHVybiBlfShuLk91dGVyU3Vic2NyaWJlcil9LHtcIi4uL091dGVyU3Vic2NyaWJlclwiOjUwLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOX1dLDg5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gaShyLG4pe2lmKG49PT12b2lkIDApe249bnVsbH1yZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyBhKHIsbikpfX1yLmJ1ZmZlckNvdW50PWk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5idWZmZXJTaXplPWU7dGhpcy5zdGFydEJ1ZmZlckV2ZXJ5PXQ7aWYoIXR8fGU9PT10KXt0aGlzLnN1YnNjcmliZXJDbGFzcz1zfWVsc2V7dGhpcy5zdWJzY3JpYmVyQ2xhc3M9dX19ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgdGhpcy5zdWJzY3JpYmVyQ2xhc3MoZSx0aGlzLmJ1ZmZlclNpemUsdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5KSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKG4pe28oZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5idWZmZXJTaXplPXQ7ci5idWZmZXI9W107cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5idWZmZXI7dC5wdXNoKGUpO2lmKHQubGVuZ3RoPT10aGlzLmJ1ZmZlclNpemUpe3RoaXMuZGVzdGluYXRpb24ubmV4dCh0KTt0aGlzLmJ1ZmZlcj1bXX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnVmZmVyO2lmKGUubGVuZ3RoPjApe3RoaXMuZGVzdGluYXRpb24ubmV4dChlKX1uLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX07cmV0dXJuIGV9KG4uU3Vic2NyaWJlcik7dmFyIHU9ZnVuY3Rpb24oaSl7byhlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24uYnVmZmVyU2l6ZT10O24uc3RhcnRCdWZmZXJFdmVyeT1yO24uYnVmZmVycz1bXTtuLmNvdW50PTA7cmV0dXJuIG59ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuYnVmZmVyU2l6ZSxuPXQuc3RhcnRCdWZmZXJFdmVyeSxpPXQuYnVmZmVycyxvPXQuY291bnQ7dGhpcy5jb3VudCsrO2lmKG8lbj09PTApe2kucHVzaChbXSl9Zm9yKHZhciBhPWkubGVuZ3RoO2EtLTspe3ZhciBzPWlbYV07cy5wdXNoKGUpO2lmKHMubGVuZ3RoPT09cil7aS5zcGxpY2UoYSwxKTt0aGlzLmRlc3RpbmF0aW9uLm5leHQocyl9fX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuYnVmZmVycyxyPWUuZGVzdGluYXRpb247d2hpbGUodC5sZW5ndGg+MCl7dmFyIG49dC5zaGlmdCgpO2lmKG4ubGVuZ3RoPjApe3IubmV4dChuKX19aS5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9O3JldHVybiBlfShuLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSw5MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBhPWUoXCIuLi9zY2hlZHVsZXIvYXN5bmNcIik7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIik7ZnVuY3Rpb24gbyhyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoO3ZhciBuPWEuYXN5bmM7aWYocy5pc1NjaGVkdWxlcihhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXSkpe249YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV07ZS0tfXZhciBpPW51bGw7aWYoZT49Mil7aT1hcmd1bWVudHNbMV19dmFyIG89TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2lmKGU+PTMpe289YXJndW1lbnRzWzJdfXJldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IHUocixpLG8sbikpfX1yLmJ1ZmZlclRpbWU9bzt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbil7dGhpcy5idWZmZXJUaW1lU3Bhbj1lO3RoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbD10O3RoaXMubWF4QnVmZmVyU2l6ZT1yO3RoaXMuc2NoZWR1bGVyPW59ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgbChlLHRoaXMuYnVmZmVyVGltZVNwYW4sdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsLHRoaXMubWF4QnVmZmVyU2l6ZSx0aGlzLnNjaGVkdWxlcikpfTtyZXR1cm4gZX0oKTt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJ1ZmZlcj1bXX1yZXR1cm4gZX0oKTt2YXIgbD1mdW5jdGlvbihsKXtuKGUsbCk7ZnVuY3Rpb24gZShlLHQscixuLGkpe3ZhciBvPWwuY2FsbCh0aGlzLGUpfHx0aGlzO28uYnVmZmVyVGltZVNwYW49dDtvLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw9cjtvLm1heEJ1ZmZlclNpemU9bjtvLnNjaGVkdWxlcj1pO28uY29udGV4dHM9W107dmFyIGE9by5vcGVuQ29udGV4dCgpO28udGltZXNwYW5Pbmx5PXI9PW51bGx8fHI8MDtpZihvLnRpbWVzcGFuT25seSl7dmFyIHM9e3N1YnNjcmliZXI6byxjb250ZXh0OmEsYnVmZmVyVGltZVNwYW46dH07by5hZGQoYS5jbG9zZUFjdGlvbj1pLnNjaGVkdWxlKGgsdCxzKSl9ZWxzZXt2YXIgdT17c3Vic2NyaWJlcjpvLGNvbnRleHQ6YX07dmFyIGM9e2J1ZmZlclRpbWVTcGFuOnQsYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDpyLHN1YnNjcmliZXI6byxzY2hlZHVsZXI6aX07by5hZGQoYS5jbG9zZUFjdGlvbj1pLnNjaGVkdWxlKGYsdCx1KSk7by5hZGQoaS5zY2hlZHVsZShwLHIsYykpfXJldHVybiBvfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGV4dHM7dmFyIHI9dC5sZW5ndGg7dmFyIG47Zm9yKHZhciBpPTA7aTxyO2krKyl7dmFyIG89dFtpXTt2YXIgYT1vLmJ1ZmZlcjthLnB1c2goZSk7aWYoYS5sZW5ndGg9PXRoaXMubWF4QnVmZmVyU2l6ZSl7bj1vfX1pZihuKXt0aGlzLm9uQnVmZmVyRnVsbChuKX19O2UucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt0aGlzLmNvbnRleHRzLmxlbmd0aD0wO2wucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsZSl9O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmNvbnRleHRzLHI9ZS5kZXN0aW5hdGlvbjt3aGlsZSh0Lmxlbmd0aD4wKXt2YXIgbj10LnNoaWZ0KCk7ci5uZXh0KG4uYnVmZmVyKX1sLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX07ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0cz1udWxsfTtlLnByb3RvdHlwZS5vbkJ1ZmZlckZ1bGw9ZnVuY3Rpb24oZSl7dGhpcy5jbG9zZUNvbnRleHQoZSk7dmFyIHQ9ZS5jbG9zZUFjdGlvbjt0LnVuc3Vic2NyaWJlKCk7dGhpcy5yZW1vdmUodCk7aWYoIXRoaXMuY2xvc2VkJiZ0aGlzLnRpbWVzcGFuT25seSl7ZT10aGlzLm9wZW5Db250ZXh0KCk7dmFyIHI9dGhpcy5idWZmZXJUaW1lU3Bhbjt2YXIgbj17c3Vic2NyaWJlcjp0aGlzLGNvbnRleHQ6ZSxidWZmZXJUaW1lU3BhbjpyfTt0aGlzLmFkZChlLmNsb3NlQWN0aW9uPXRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGgscixuKSl9fTtlLnByb3RvdHlwZS5vcGVuQ29udGV4dD1mdW5jdGlvbigpe3ZhciBlPW5ldyBjO3RoaXMuY29udGV4dHMucHVzaChlKTtyZXR1cm4gZX07ZS5wcm90b3R5cGUuY2xvc2VDb250ZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dChlLmJ1ZmZlcik7dmFyIHQ9dGhpcy5jb250ZXh0czt2YXIgcj10P3QuaW5kZXhPZihlKTotMTtpZihyPj0wKXt0LnNwbGljZSh0LmluZGV4T2YoZSksMSl9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKTtmdW5jdGlvbiBoKGUpe3ZhciB0PWUuc3Vic2NyaWJlcjt2YXIgcj1lLmNvbnRleHQ7aWYocil7dC5jbG9zZUNvbnRleHQocil9aWYoIXQuY2xvc2VkKXtlLmNvbnRleHQ9dC5vcGVuQ29udGV4dCgpO2UuY29udGV4dC5jbG9zZUFjdGlvbj10aGlzLnNjaGVkdWxlKGUsZS5idWZmZXJUaW1lU3Bhbil9fWZ1bmN0aW9uIHAoZSl7dmFyIHQ9ZS5idWZmZXJDcmVhdGlvbkludGVydmFsLHI9ZS5idWZmZXJUaW1lU3BhbixuPWUuc3Vic2NyaWJlcixpPWUuc2NoZWR1bGVyO3ZhciBvPW4ub3BlbkNvbnRleHQoKTt2YXIgYT10aGlzO2lmKCFuLmNsb3NlZCl7bi5hZGQoby5jbG9zZUFjdGlvbj1pLnNjaGVkdWxlKGYscix7c3Vic2NyaWJlcjpuLGNvbnRleHQ6b30pKTthLnNjaGVkdWxlKGUsdCl9fWZ1bmN0aW9uIGYoZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS5jb250ZXh0O3QuY2xvc2VDb250ZXh0KHIpfX0se1wiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vc2NoZWR1bGVyL2FzeW5jXCI6MjA2LFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiOjIzMH1dLDkxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGE9ZShcIi4uL1N1YnNjcmlwdGlvblwiKTt2YXIgcz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG8ocixuKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyB1KHIsbikpfX1yLmJ1ZmZlclRvZ2dsZT1vO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMub3BlbmluZ3M9ZTt0aGlzLmNsb3NpbmdTZWxlY3Rvcj10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLm9wZW5pbmdzLHRoaXMuY2xvc2luZ1NlbGVjdG9yKSl9O3JldHVybiBlfSgpO3ZhciBjPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLm9wZW5pbmdzPXQ7bi5jbG9zaW5nU2VsZWN0b3I9cjtuLmNvbnRleHRzPVtdO24uYWRkKHMuc3Vic2NyaWJlVG9SZXN1bHQobix0KSk7cmV0dXJuIG59ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250ZXh0czt2YXIgcj10Lmxlbmd0aDtmb3IodmFyIG49MDtuPHI7bisrKXt0W25dLmJ1ZmZlci5wdXNoKGUpfX07ZS5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGV4dHM7d2hpbGUodC5sZW5ndGg+MCl7dmFyIHI9dC5zaGlmdCgpO3Iuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7ci5idWZmZXI9bnVsbDtyLnN1YnNjcmlwdGlvbj1udWxsfXRoaXMuY29udGV4dHM9bnVsbDtpLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLGUpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRleHRzO3doaWxlKGUubGVuZ3RoPjApe3ZhciB0PWUuc2hpZnQoKTt0aGlzLmRlc3RpbmF0aW9uLm5leHQodC5idWZmZXIpO3Quc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dC5idWZmZXI9bnVsbDt0LnN1YnNjcmlwdGlvbj1udWxsfXRoaXMuY29udGV4dHM9bnVsbDtpLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX07ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuLGkpe2U/dGhpcy5jbG9zZUJ1ZmZlcihlKTp0aGlzLm9wZW5CdWZmZXIodCl9O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3RoaXMuY2xvc2VCdWZmZXIoZS5jb250ZXh0KX07ZS5wcm90b3R5cGUub3BlbkJ1ZmZlcj1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9dGhpcy5jbG9zaW5nU2VsZWN0b3I7dmFyIHI9dC5jYWxsKHRoaXMsZSk7aWYocil7dGhpcy50cnlTdWJzY3JpYmUocil9fWNhdGNoKGUpe3RoaXMuX2Vycm9yKGUpfX07ZS5wcm90b3R5cGUuY2xvc2VCdWZmZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250ZXh0cztpZih0JiZlKXt2YXIgcj1lLmJ1ZmZlcixuPWUuc3Vic2NyaXB0aW9uO3RoaXMuZGVzdGluYXRpb24ubmV4dChyKTt0LnNwbGljZSh0LmluZGV4T2YoZSksMSk7dGhpcy5yZW1vdmUobik7bi51bnN1YnNjcmliZSgpfX07ZS5wcm90b3R5cGUudHJ5U3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGV4dHM7dmFyIHI9W107dmFyIG49bmV3IGEuU3Vic2NyaXB0aW9uO3ZhciBpPXtidWZmZXI6cixzdWJzY3JpcHRpb246bn07dC5wdXNoKGkpO3ZhciBvPXMuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlLGkpO2lmKCFvfHxvLmNsb3NlZCl7dGhpcy5jbG9zZUJ1ZmZlcihpKX1lbHNle28uY29udGV4dD1pO3RoaXMuYWRkKG8pO24uYWRkKG8pfX07cmV0dXJuIGV9KGkuT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9TdWJzY3JpcHRpb25cIjo1NixcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSw5MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuLi9TdWJzY3JpcHRpb25cIik7dmFyIG49ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgYT1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBzKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyB1KHQpKX19ci5idWZmZXJXaGVuPXM7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY2xvc2luZ1NlbGVjdG9yPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgYyhlLHRoaXMuY2xvc2luZ1NlbGVjdG9yKSl9O3JldHVybiBlfSgpO3ZhciBjPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5jbG9zaW5nU2VsZWN0b3I9dDtyLnN1YnNjcmliaW5nPWZhbHNlO3Iub3BlbkJ1ZmZlcigpO3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuYnVmZmVyLnB1c2goZSl9O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnVmZmVyO2lmKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dChlKX1uLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX07ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5idWZmZXI9bnVsbDt0aGlzLnN1YnNjcmliaW5nPWZhbHNlfTtlLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5vcGVuQnVmZmVyKCl9O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5zdWJzY3JpYmluZyl7dGhpcy5jb21wbGV0ZSgpfWVsc2V7dGhpcy5vcGVuQnVmZmVyKCl9fTtlLnByb3RvdHlwZS5vcGVuQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jbG9zaW5nU3Vic2NyaXB0aW9uO2lmKGUpe3RoaXMucmVtb3ZlKGUpO2UudW5zdWJzY3JpYmUoKX12YXIgdD10aGlzLmJ1ZmZlcjtpZih0aGlzLmJ1ZmZlcil7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfXRoaXMuYnVmZmVyPVtdO3ZhciByO3RyeXt2YXIgbj10aGlzLmNsb3NpbmdTZWxlY3RvcjtyPW4oKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5lcnJvcihlKX1lPW5ldyBvLlN1YnNjcmlwdGlvbjt0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb249ZTt0aGlzLmFkZChlKTt0aGlzLnN1YnNjcmliaW5nPXRydWU7ZS5hZGQoYS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHIpKTt0aGlzLnN1YnNjcmliaW5nPWZhbHNlfTtyZXR1cm4gZX0obi5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL1N1YnNjcmlwdGlvblwiOjU2LFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOX1dLDkzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vSW5uZXJTdWJzY3JpYmVyXCIpO3ZhciBhPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIHMoaSl7cmV0dXJuIGZ1bmN0aW9uIGUodCl7dmFyIHI9bmV3IHUoaSk7dmFyIG49dC5saWZ0KHIpO3JldHVybiByLmNhdWdodD1ufX1yLmNhdGNoRXJyb3I9czt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5zZWxlY3Rvcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLnNlbGVjdG9yLHRoaXMuY2F1Z2h0KSl9O3JldHVybiBlfSgpO3ZhciBjPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLnNlbGVjdG9yPXQ7bi5jYXVnaHQ9cjtyZXR1cm4gbn1lLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihlKXtpZighdGhpcy5pc1N0b3BwZWQpe3ZhciB0PXZvaWQgMDt0cnl7dD10aGlzLnNlbGVjdG9yKGUsdGhpcy5jYXVnaHQpfWNhdGNoKGUpe2kucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcyxlKTtyZXR1cm59dGhpcy5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlKCk7dmFyIHI9bmV3IG8uSW5uZXJTdWJzY3JpYmVyKHRoaXMsdW5kZWZpbmVkLHVuZGVmaW5lZCk7dGhpcy5hZGQocik7dmFyIG49YS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHQsdW5kZWZpbmVkLHVuZGVmaW5lZCxyKTtpZihuIT09cil7dGhpcy5hZGQobil9fX07cmV0dXJuIGV9KGkuT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vSW5uZXJTdWJzY3JpYmVyXCI6NDYsXCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSw5NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL29ic2VydmFibGUvY29tYmluZUxhdGVzdFwiKTtmdW5jdGlvbiBpKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBuLkNvbWJpbmVMYXRlc3RPcGVyYXRvcih0KSl9fXIuY29tYmluZUFsbD1pfSx7XCIuLi9vYnNlcnZhYmxlL2NvbWJpbmVMYXRlc3RcIjo2Mn1dLDk1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vdXRpbC9pc0FycmF5XCIpO3ZhciBpPWUoXCIuLi9vYnNlcnZhYmxlL2NvbWJpbmVMYXRlc3RcIik7dmFyIG89ZShcIi4uL29ic2VydmFibGUvZnJvbVwiKTt2YXIgYT17fTtmdW5jdGlvbiBzKCl7dmFyIHQ9W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dFtlXT1hcmd1bWVudHNbZV19dmFyIHI9bnVsbDtpZih0eXBlb2YgdFt0Lmxlbmd0aC0xXT09PVwiZnVuY3Rpb25cIil7cj10LnBvcCgpfWlmKHQubGVuZ3RoPT09MSYmbi5pc0FycmF5KHRbMF0pKXt0PXRbMF0uc2xpY2UoKX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdC5jYWxsKG8uZnJvbShbZV0uY29uY2F0KHQpKSxuZXcgaS5Db21iaW5lTGF0ZXN0T3BlcmF0b3IocikpfX1yLmNvbWJpbmVMYXRlc3Q9c30se1wiLi4vb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0XCI6NjIsXCIuLi9vYnNlcnZhYmxlL2Zyb21cIjo2NyxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMH1dLDk2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vb2JzZXJ2YWJsZS9jb25jYXRcIik7ZnVuY3Rpb24gaSgpe3ZhciB0PVtdO2Zvcih2YXIgZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3RbZV09YXJndW1lbnRzW2VdfXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0LmNhbGwobi5jb25jYXQuYXBwbHkodm9pZCAwLFtlXS5jb25jYXQodCkpKX19ci5jb25jYXQ9aX0se1wiLi4vb2JzZXJ2YWJsZS9jb25jYXRcIjo2M31dLDk3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9tZXJnZUFsbFwiKTtmdW5jdGlvbiBpKCl7cmV0dXJuIG4ubWVyZ2VBbGwoMSl9ci5jb25jYXRBbGw9aX0se1wiLi9tZXJnZUFsbFwiOjEzMH1dLDk4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9tZXJnZU1hcFwiKTtmdW5jdGlvbiBpKGUsdCl7cmV0dXJuIG4ubWVyZ2VNYXAoZSx0LDEpfXIuY29uY2F0TWFwPWl9LHtcIi4vbWVyZ2VNYXBcIjoxMzF9XSw5OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vY29uY2F0TWFwXCIpO2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gbi5jb25jYXRNYXAoZnVuY3Rpb24oKXtyZXR1cm4gZX0sdCl9ci5jb25jYXRNYXBUbz1pfSx7XCIuL2NvbmNhdE1hcFwiOjk4fV0sMTAwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0LGUpKX19ci5jb3VudD1vO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMucHJlZGljYXRlPWU7dGhpcy5zb3VyY2U9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBzKGUsdGhpcy5wcmVkaWNhdGUsdGhpcy5zb3VyY2UpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ucHJlZGljYXRlPXQ7bi5zb3VyY2U9cjtuLmNvdW50PTA7bi5pbmRleD0wO3JldHVybiBufWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMucHJlZGljYXRlKXt0aGlzLl90cnlQcmVkaWNhdGUoZSl9ZWxzZXt0aGlzLmNvdW50Kyt9fTtlLnByb3RvdHlwZS5fdHJ5UHJlZGljYXRlPWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PXRoaXMucHJlZGljYXRlKGUsdGhpcy5pbmRleCsrLHRoaXMuc291cmNlKX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpO3JldHVybn1pZih0KXt0aGlzLmNvdW50Kyt9fTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5jb3VudCk7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTAxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBhKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBzKHQpKX19ci5kZWJvdW5jZT1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmR1cmF0aW9uU2VsZWN0b3I9ZX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5kdXJhdGlvblNlbGVjdG9yKSl9O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5kdXJhdGlvblNlbGVjdG9yPXQ7ci5oYXNWYWx1ZT1mYWxzZTtyLmR1cmF0aW9uU3Vic2NyaXB0aW9uPW51bGw7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PXRoaXMuZHVyYXRpb25TZWxlY3Rvci5jYWxsKHRoaXMsZSk7aWYodCl7dGhpcy5fdHJ5TmV4dChlLHQpfX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5lbWl0VmFsdWUoKTt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9O2UucHJvdG90eXBlLl90cnlOZXh0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbjt0aGlzLnZhbHVlPWU7dGhpcy5oYXNWYWx1ZT10cnVlO2lmKHIpe3IudW5zdWJzY3JpYmUoKTt0aGlzLnJlbW92ZShyKX1yPW8uc3Vic2NyaWJlVG9SZXN1bHQodGhpcyx0KTtpZihyJiYhci5jbG9zZWQpe3RoaXMuYWRkKHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb249cil9fTtlLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5lbWl0VmFsdWUoKX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmVtaXRWYWx1ZSgpfTtlLnByb3RvdHlwZS5lbWl0VmFsdWU9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc1ZhbHVlKXt2YXIgZT10aGlzLnZhbHVlO3ZhciB0PXRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb247aWYodCl7dGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbj1udWxsO3QudW5zdWJzY3JpYmUoKTt0aGlzLnJlbW92ZSh0KX10aGlzLnZhbHVlPW51bGw7dGhpcy5oYXNWYWx1ZT1mYWxzZTtuLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsZSl9fTtyZXR1cm4gZX0obi5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxMDI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vc2NoZWR1bGVyL2FzeW5jXCIpO2Z1bmN0aW9uIGEodCxyKXtpZihyPT09dm9pZCAwKXtyPW8uYXN5bmN9cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IHModCxyKSl9fXIuZGVib3VuY2VUaW1lPWE7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5kdWVUaW1lPWU7dGhpcy5zY2hlZHVsZXI9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5kdWVUaW1lLHRoaXMuc2NoZWR1bGVyKSl9O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLmR1ZVRpbWU9dDtuLnNjaGVkdWxlcj1yO24uZGVib3VuY2VkU3Vic2NyaXB0aW9uPW51bGw7bi5sYXN0VmFsdWU9bnVsbDtuLmhhc1ZhbHVlPWZhbHNlO3JldHVybiBufWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuY2xlYXJEZWJvdW5jZSgpO3RoaXMubGFzdFZhbHVlPWU7dGhpcy5oYXNWYWx1ZT10cnVlO3RoaXMuYWRkKHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uPXRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGMsdGhpcy5kdWVUaW1lLHRoaXMpKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5kZWJvdW5jZWROZXh0KCk7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfTtlLnByb3RvdHlwZS5kZWJvdW5jZWROZXh0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhckRlYm91bmNlKCk7aWYodGhpcy5oYXNWYWx1ZSl7dmFyIGU9dGhpcy5sYXN0VmFsdWU7dGhpcy5sYXN0VmFsdWU9bnVsbDt0aGlzLmhhc1ZhbHVlPWZhbHNlO3RoaXMuZGVzdGluYXRpb24ubmV4dChlKX19O2UucHJvdG90eXBlLmNsZWFyRGVib3VuY2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbjtpZihlIT09bnVsbCl7dGhpcy5yZW1vdmUoZSk7ZS51bnN1YnNjcmliZSgpO3RoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uPW51bGx9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKTtmdW5jdGlvbiBjKGUpe2UuZGVib3VuY2VkTmV4dCgpfX0se1wiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vc2NoZWR1bGVyL2FzeW5jXCI6MjA2fV0sMTAzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0KXtpZih0PT09dm9pZCAwKXt0PW51bGx9cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IGEodCkpfX1yLmRlZmF1bHRJZkVtcHR5PW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZGVmYXVsdFZhbHVlPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlLHRoaXMuZGVmYXVsdFZhbHVlKSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5kZWZhdWx0VmFsdWU9dDtyLmlzRW1wdHk9dHJ1ZTtyZXR1cm4gcn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmlzRW1wdHk9ZmFsc2U7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkpe3RoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSl9dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfTtyZXR1cm4gZX0obi5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTA0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL3NjaGVkdWxlci9hc3luY1wiKTt2YXIgbz1lKFwiLi4vdXRpbC9pc0RhdGVcIik7dmFyIGE9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL05vdGlmaWNhdGlvblwiKTtmdW5jdGlvbiB1KGUsdCl7aWYodD09PXZvaWQgMCl7dD1pLmFzeW5jfXZhciByPW8uaXNEYXRlKGUpO3ZhciBuPXI/K2UtdC5ub3coKTpNYXRoLmFicyhlKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYyhuLHQpKX19ci5kZWxheT11O3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuZGVsYXk9ZTt0aGlzLnNjaGVkdWxlcj10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGwoZSx0aGlzLmRlbGF5LHRoaXMuc2NoZWR1bGVyKSl9O3JldHVybiBlfSgpO3ZhciBsPWZ1bmN0aW9uKGkpe24ocixpKTtmdW5jdGlvbiByKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLmRlbGF5PXQ7bi5zY2hlZHVsZXI9cjtuLnF1ZXVlPVtdO24uYWN0aXZlPWZhbHNlO24uZXJyb3JlZD1mYWxzZTtyZXR1cm4gbn1yLmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc291cmNlO3ZhciByPXQucXVldWU7dmFyIG49ZS5zY2hlZHVsZXI7dmFyIGk9ZS5kZXN0aW5hdGlvbjt3aGlsZShyLmxlbmd0aD4wJiZyWzBdLnRpbWUtbi5ub3coKTw9MCl7ci5zaGlmdCgpLm5vdGlmaWNhdGlvbi5vYnNlcnZlKGkpfWlmKHIubGVuZ3RoPjApe3ZhciBvPU1hdGgubWF4KDAsclswXS50aW1lLW4ubm93KCkpO3RoaXMuc2NoZWR1bGUoZSxvKX1lbHNle3RoaXMudW5zdWJzY3JpYmUoKTt0LmFjdGl2ZT1mYWxzZX19O3IucHJvdG90eXBlLl9zY2hlZHVsZT1mdW5jdGlvbihlKXt0aGlzLmFjdGl2ZT10cnVlO3ZhciB0PXRoaXMuZGVzdGluYXRpb247dC5hZGQoZS5zY2hlZHVsZShyLmRpc3BhdGNoLHRoaXMuZGVsYXkse3NvdXJjZTp0aGlzLGRlc3RpbmF0aW9uOnRoaXMuZGVzdGluYXRpb24sc2NoZWR1bGVyOmV9KSl9O3IucHJvdG90eXBlLnNjaGVkdWxlTm90aWZpY2F0aW9uPWZ1bmN0aW9uKGUpe2lmKHRoaXMuZXJyb3JlZD09PXRydWUpe3JldHVybn12YXIgdD10aGlzLnNjaGVkdWxlcjt2YXIgcj1uZXcgaCh0Lm5vdygpK3RoaXMuZGVsYXksZSk7dGhpcy5xdWV1ZS5wdXNoKHIpO2lmKHRoaXMuYWN0aXZlPT09ZmFsc2Upe3RoaXMuX3NjaGVkdWxlKHQpfX07ci5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihzLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KGUpKX07ci5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZXJyb3JlZD10cnVlO3RoaXMucXVldWU9W107dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTt0aGlzLnVuc3Vic2NyaWJlKCl9O3IucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24ocy5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7dGhpcy51bnN1YnNjcmliZSgpfTtyZXR1cm4gcn0oYS5TdWJzY3JpYmVyKTt2YXIgaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnRpbWU9ZTt0aGlzLm5vdGlmaWNhdGlvbj10fXJldHVybiBlfSgpfSx7XCIuLi9Ob3RpZmljYXRpb25cIjo0NyxcIi4uL1N1YnNjcmliZXJcIjo1NSxcIi4uL3NjaGVkdWxlci9hc3luY1wiOjIwNixcIi4uL3V0aWwvaXNEYXRlXCI6MjIyfV0sMTA1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIG89ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGE9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgcz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiB1KHQscil7aWYocil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaChlLHIpLmxpZnQobmV3IGModCkpfX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYyh0KSl9fXIuZGVsYXlXaGVuPXU7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgbChlLHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKSl9O3JldHVybiBlfSgpO3ZhciBsPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5kZWxheUR1cmF0aW9uU2VsZWN0b3I9dDtyLmNvbXBsZXRlZD1mYWxzZTtyLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zPVtdO3IuaW5kZXg9MDtyZXR1cm4gcn1lLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpO3RoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGkpO3RoaXMudHJ5Q29tcGxldGUoKX07ZS5wcm90b3R5cGUubm90aWZ5RXJyb3I9ZnVuY3Rpb24oZSx0KXt0aGlzLl9lcnJvcihlKX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oZSk7aWYodCl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfXRoaXMudHJ5Q29tcGxldGUoKX07ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbmRleCsrO3RyeXt2YXIgcj10aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvcihlLHQpO2lmKHIpe3RoaXMudHJ5RGVsYXkocixlKX19Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuY29tcGxldGVkPXRydWU7dGhpcy50cnlDb21wbGV0ZSgpO3RoaXMudW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUucmVtb3ZlU3Vic2NyaXB0aW9uPWZ1bmN0aW9uKGUpe2UudW5zdWJzY3JpYmUoKTt2YXIgdD10aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLmluZGV4T2YoZSk7aWYodCE9PS0xKXt0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnNwbGljZSh0LDEpfXJldHVybiBlLm91dGVyVmFsdWV9O2UucHJvdG90eXBlLnRyeURlbGF5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9cy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsdCk7aWYociYmIXIuY2xvc2VkKXt2YXIgbj10aGlzLmRlc3RpbmF0aW9uO24uYWRkKHIpO3RoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMucHVzaChyKX19O2UucHJvdG90eXBlLnRyeUNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5jb21wbGV0ZWQmJnRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMubGVuZ3RoPT09MCl7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfX07cmV0dXJuIGV9KGEuT3V0ZXJTdWJzY3JpYmVyKTt2YXIgaD1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzKXx8dGhpcztyLnNvdXJjZT1lO3Iuc3Vic2NyaXB0aW9uRGVsYXk9dDtyZXR1cm4gcn1lLnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3RoaXMuc3Vic2NyaXB0aW9uRGVsYXkuc3Vic2NyaWJlKG5ldyBwKGUsdGhpcy5zb3VyY2UpKX07cmV0dXJuIGV9KG8uT2JzZXJ2YWJsZSk7dmFyIHA9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyl8fHRoaXM7ci5wYXJlbnQ9ZTtyLnNvdXJjZT10O3Iuc291cmNlU3Vic2NyaWJlZD1mYWxzZTtyZXR1cm4gcn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnN1YnNjcmliZVRvU291cmNlKCl9O2UucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt0aGlzLnVuc3Vic2NyaWJlKCk7dGhpcy5wYXJlbnQuZXJyb3IoZSl9O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMudW5zdWJzY3JpYmUoKTt0aGlzLnN1YnNjcmliZVRvU291cmNlKCl9O2UucHJvdG90eXBlLnN1YnNjcmliZVRvU291cmNlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc291cmNlU3Vic2NyaWJlZCl7dGhpcy5zb3VyY2VTdWJzY3JpYmVkPXRydWU7dGhpcy51bnN1YnNjcmliZSgpO3RoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzLnBhcmVudCl9fTtyZXR1cm4gZX0obi5TdWJzY3JpYmVyKX0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5fV0sMTA2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbygpe3JldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IGEpfX1yLmRlbWF0ZXJpYWxpemU9bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlKSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKHQpe24oZSx0KTtmdW5jdGlvbiBlKGUpe3JldHVybiB0LmNhbGwodGhpcyxlKXx8dGhpc31lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXtlLm9ic2VydmUodGhpcy5kZXN0aW5hdGlvbil9O3JldHVybiBlfShpLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxMDc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIGEodCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgcyh0LHIpKX19ci5kaXN0aW5jdD1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMua2V5U2VsZWN0b3I9ZTt0aGlzLmZsdXNoZXM9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5rZXlTZWxlY3Rvcix0aGlzLmZsdXNoZXMpKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ua2V5U2VsZWN0b3I9dDtuLnZhbHVlcz1uZXcgU2V0O2lmKHIpe24uYWRkKG8uc3Vic2NyaWJlVG9SZXN1bHQobixyKSl9cmV0dXJuIG59ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuLGkpe3RoaXMudmFsdWVzLmNsZWFyKCl9O2UucHJvdG90eXBlLm5vdGlmeUVycm9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZXJyb3IoZSl9O2UucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMua2V5U2VsZWN0b3Ipe3RoaXMuX3VzZUtleVNlbGVjdG9yKGUpfWVsc2V7dGhpcy5fZmluYWxpemVOZXh0KGUsZSl9fTtlLnByb3RvdHlwZS5fdXNlS2V5U2VsZWN0b3I9ZnVuY3Rpb24oZSl7dmFyIHQ7dmFyIHI9dGhpcy5kZXN0aW5hdGlvbjt0cnl7dD10aGlzLmtleVNlbGVjdG9yKGUpfWNhdGNoKGUpe3IuZXJyb3IoZSk7cmV0dXJufXRoaXMuX2ZpbmFsaXplTmV4dCh0LGUpfTtlLnByb3RvdHlwZS5fZmluYWxpemVOZXh0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy52YWx1ZXM7aWYoIXIuaGFzKGUpKXtyLmFkZChlKTt0aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9fTtyZXR1cm4gZX0oaS5PdXRlclN1YnNjcmliZXIpO3IuRGlzdGluY3RTdWJzY3JpYmVyPXV9LHtcIi4uL091dGVyU3Vic2NyaWJlclwiOjUwLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOX1dLDEwODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG8odCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0LHIpKX19ci5kaXN0aW5jdFVudGlsQ2hhbmdlZD1vO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuY29tcGFyZT1lO3RoaXMua2V5U2VsZWN0b3I9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBzKGUsdGhpcy5jb21wYXJlLHRoaXMua2V5U2VsZWN0b3IpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ua2V5U2VsZWN0b3I9cjtuLmhhc0tleT1mYWxzZTtpZih0eXBlb2YgdD09PVwiZnVuY3Rpb25cIil7bi5jb21wYXJlPXR9cmV0dXJuIG59ZS5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihlLHQpe3JldHVybiBlPT09dH07ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3ZhciByPXRoaXMua2V5U2VsZWN0b3I7dD1yP3IoZSk6ZX1jYXRjaChlKXtyZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX12YXIgbj1mYWxzZTtpZih0aGlzLmhhc0tleSl7dHJ5e3ZhciBpPXRoaXMuY29tcGFyZTtuPWkodGhpcy5rZXksdCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9fWVsc2V7dGhpcy5oYXNLZXk9dHJ1ZX1pZighbil7dGhpcy5rZXk9dDt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTA5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi9kaXN0aW5jdFVudGlsQ2hhbmdlZFwiKTtmdW5jdGlvbiBuKHIsbil7cmV0dXJuIGkuZGlzdGluY3RVbnRpbENoYW5nZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbj9uKGVbcl0sdFtyXSk6ZVtyXT09PXRbcl19KX1yLmRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkPW59LHtcIi4vZGlzdGluY3RVbnRpbENoYW5nZWRcIjoxMDh9XSwxMTA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCIpO3ZhciBvPWUoXCIuL2ZpbHRlclwiKTt2YXIgYT1lKFwiLi90aHJvd0lmRW1wdHlcIik7dmFyIHM9ZShcIi4vZGVmYXVsdElmRW1wdHlcIik7dmFyIHU9ZShcIi4vdGFrZVwiKTtmdW5jdGlvbiBuKHIsdCl7aWYocjwwKXt0aHJvdyBuZXcgaS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcn12YXIgbj1hcmd1bWVudHMubGVuZ3RoPj0yO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5waXBlKG8uZmlsdGVyKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9PT1yfSksdS50YWtlKDEpLG4/cy5kZWZhdWx0SWZFbXB0eSh0KTphLnRocm93SWZFbXB0eShmdW5jdGlvbigpe3JldHVybiBuZXcgaS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0pKX19ci5lbGVtZW50QXQ9bn0se1wiLi4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiOjIxMSxcIi4vZGVmYXVsdElmRW1wdHlcIjoxMDMsXCIuL2ZpbHRlclwiOjExNixcIi4vdGFrZVwiOjE2OCxcIi4vdGhyb3dJZkVtcHR5XCI6MTc1fV0sMTExOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vb2JzZXJ2YWJsZS9jb25jYXRcIik7dmFyIGk9ZShcIi4uL29ic2VydmFibGUvb2ZcIik7ZnVuY3Rpb24gbygpe3ZhciB0PVtdO2Zvcih2YXIgZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3RbZV09YXJndW1lbnRzW2VdfXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbi5jb25jYXQoZSxpLm9mLmFwcGx5KHZvaWQgMCx0KSl9fXIuZW5kV2l0aD1vfSx7XCIuLi9vYnNlcnZhYmxlL2NvbmNhdFwiOjYzLFwiLi4vb2JzZXJ2YWJsZS9vZlwiOjc2fV0sMTEyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0LHIpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBhKHQscixlKSl9fXIuZXZlcnk9bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMucHJlZGljYXRlPWU7dGhpcy50aGlzQXJnPXQ7dGhpcy5zb3VyY2U9cn1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBzKGUsdGhpcy5wcmVkaWNhdGUsdGhpcy50aGlzQXJnLHRoaXMuc291cmNlKSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKG8pe24oZSxvKTtmdW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpPW8uY2FsbCh0aGlzLGUpfHx0aGlzO2kucHJlZGljYXRlPXQ7aS50aGlzQXJnPXI7aS5zb3VyY2U9bjtpLmluZGV4PTA7aS50aGlzQXJnPXJ8fGk7cmV0dXJuIGl9ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpO3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX07ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZmFsc2U7dHJ5e3Q9dGhpcy5wcmVkaWNhdGUuY2FsbCh0aGlzLnRoaXNBcmcsZSx0aGlzLmluZGV4KyssdGhpcy5zb3VyY2UpfWNhdGNoKGUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSk7cmV0dXJufWlmKCF0KXt0aGlzLm5vdGlmeUNvbXBsZXRlKGZhbHNlKX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMubm90aWZ5Q29tcGxldGUodHJ1ZSl9O3JldHVybiBlfShpLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxMTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgcyl9fXIuZXhoYXVzdD1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUpKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24ocil7bihlLHIpO2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSl8fHRoaXM7dC5oYXNDb21wbGV0ZWQ9ZmFsc2U7dC5oYXNTdWJzY3JpcHRpb249ZmFsc2U7cmV0dXJuIHR9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaGFzU3Vic2NyaXB0aW9uKXt0aGlzLmhhc1N1YnNjcmlwdGlvbj10cnVlO3RoaXMuYWRkKG8uc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlKSl9fTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbXBsZXRlZD10cnVlO2lmKCF0aGlzLmhhc1N1YnNjcmlwdGlvbil7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmUoZSk7dGhpcy5oYXNTdWJzY3JpcHRpb249ZmFsc2U7aWYodGhpcy5oYXNDb21wbGV0ZWQpe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX19O3JldHVybiBlfShpLk91dGVyU3Vic2NyaWJlcil9LHtcIi4uL091dGVyU3Vic2NyaWJlclwiOjUwLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOX1dLDExNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIGE9ZShcIi4uL0lubmVyU3Vic2NyaWJlclwiKTt2YXIgcz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTt2YXIgbz1lKFwiLi9tYXBcIik7dmFyIHU9ZShcIi4uL29ic2VydmFibGUvZnJvbVwiKTtmdW5jdGlvbiBjKHQsaSl7aWYoaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLnBpcGUoYyhmdW5jdGlvbihyLG4pe3JldHVybiB1LmZyb20odChyLG4pKS5waXBlKG8ubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkocixlLG4sdCl9KSl9KSl9fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBsKHQpKX19ci5leGhhdXN0TWFwPWM7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMucHJvamVjdD1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGgoZSx0aGlzLnByb2plY3QpKX07cmV0dXJuIGV9KCk7dmFyIGg9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLnByb2plY3Q9dDtyLmhhc1N1YnNjcmlwdGlvbj1mYWxzZTtyLmhhc0NvbXBsZXRlZD1mYWxzZTtyLmluZGV4PTA7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaGFzU3Vic2NyaXB0aW9uKXt0aGlzLnRyeU5leHQoZSl9fTtlLnByb3RvdHlwZS50cnlOZXh0PWZ1bmN0aW9uKGUpe3ZhciB0O3ZhciByPXRoaXMuaW5kZXgrKzt0cnl7dD10aGlzLnByb2plY3QoZSxyKX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpO3JldHVybn10aGlzLmhhc1N1YnNjcmlwdGlvbj10cnVlO3RoaXMuX2lubmVyU3ViKHQsZSxyKX07ZS5wcm90b3R5cGUuX2lubmVyU3ViPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1uZXcgYS5Jbm5lclN1YnNjcmliZXIodGhpcyx0LHIpO3ZhciBpPXRoaXMuZGVzdGluYXRpb247aS5hZGQobik7dmFyIG89cy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsdW5kZWZpbmVkLHVuZGVmaW5lZCxuKTtpZihvIT09bil7aS5hZGQobyl9fTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbXBsZXRlZD10cnVlO2lmKCF0aGlzLmhhc1N1YnNjcmlwdGlvbil7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfXRoaXMudW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuLGkpe3RoaXMuZGVzdGluYXRpb24ubmV4dCh0KX07ZS5wcm90b3R5cGUubm90aWZ5RXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0LnJlbW92ZShlKTt0aGlzLmhhc1N1YnNjcmlwdGlvbj1mYWxzZTtpZih0aGlzLmhhc0NvbXBsZXRlZCl7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfX07cmV0dXJuIGV9KG4uT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vSW5uZXJTdWJzY3JpYmVyXCI6NDYsXCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL29ic2VydmFibGUvZnJvbVwiOjY3LFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOSxcIi4vbWFwXCI6MTI1fV0sMTE1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgYT1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBvKHQscixuKXtpZihyPT09dm9pZCAwKXtyPU51bWJlci5QT1NJVElWRV9JTkZJTklUWX1pZihuPT09dm9pZCAwKXtuPXVuZGVmaW5lZH1yPShyfHwwKTwxP051bWJlci5QT1NJVElWRV9JTkZJTklUWTpyO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBzKHQscixuKSl9fXIuZXhwYW5kPW87dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLnByb2plY3Q9ZTt0aGlzLmNvbmN1cnJlbnQ9dDt0aGlzLnNjaGVkdWxlcj1yfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHUoZSx0aGlzLnByb2plY3QsdGhpcy5jb25jdXJyZW50LHRoaXMuc2NoZWR1bGVyKSl9O3JldHVybiBlfSgpO3IuRXhwYW5kT3BlcmF0b3I9czt2YXIgdT1mdW5jdGlvbihvKXtuKHMsbyk7ZnVuY3Rpb24gcyhlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlKXx8dGhpcztpLnByb2plY3Q9dDtpLmNvbmN1cnJlbnQ9cjtpLnNjaGVkdWxlcj1uO2kuaW5kZXg9MDtpLmFjdGl2ZT0wO2kuaGFzQ29tcGxldGVkPWZhbHNlO2lmKHI8TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKXtpLmJ1ZmZlcj1bXX1yZXR1cm4gaX1zLmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic2NyaWJlcixyPWUucmVzdWx0LG49ZS52YWx1ZSxpPWUuaW5kZXg7dC5zdWJzY3JpYmVUb1Byb2plY3Rpb24ocixuLGkpfTtzLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlc3RpbmF0aW9uO2lmKHQuY2xvc2VkKXt0aGlzLl9jb21wbGV0ZSgpO3JldHVybn12YXIgcj10aGlzLmluZGV4Kys7aWYodGhpcy5hY3RpdmU8dGhpcy5jb25jdXJyZW50KXt0Lm5leHQoZSk7dHJ5e3ZhciBuPXRoaXMucHJvamVjdDt2YXIgaT1uKGUscik7aWYoIXRoaXMuc2NoZWR1bGVyKXt0aGlzLnN1YnNjcmliZVRvUHJvamVjdGlvbihpLGUscil9ZWxzZXt2YXIgbz17c3Vic2NyaWJlcjp0aGlzLHJlc3VsdDppLHZhbHVlOmUsaW5kZXg6cn07dmFyIGE9dGhpcy5kZXN0aW5hdGlvbjthLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzLmRpc3BhdGNoLDAsbykpfX1jYXRjaChlKXt0LmVycm9yKGUpfX1lbHNle3RoaXMuYnVmZmVyLnB1c2goZSl9fTtzLnByb3RvdHlwZS5zdWJzY3JpYmVUb1Byb2plY3Rpb249ZnVuY3Rpb24oZSx0LHIpe3RoaXMuYWN0aXZlKys7dmFyIG49dGhpcy5kZXN0aW5hdGlvbjtuLmFkZChhLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSx0LHIpKX07cy5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb21wbGV0ZWQ9dHJ1ZTtpZih0aGlzLmhhc0NvbXBsZXRlZCYmdGhpcy5hY3RpdmU9PT0wKXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9dGhpcy51bnN1YnNjcmliZSgpfTtzLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5fbmV4dCh0KX07cy5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5idWZmZXI7dmFyIHI9dGhpcy5kZXN0aW5hdGlvbjtyLnJlbW92ZShlKTt0aGlzLmFjdGl2ZS0tO2lmKHQmJnQubGVuZ3RoPjApe3RoaXMuX25leHQodC5zaGlmdCgpKX1pZih0aGlzLmhhc0NvbXBsZXRlZCYmdGhpcy5hY3RpdmU9PT0wKXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9fTtyZXR1cm4gc30oaS5PdXRlclN1YnNjcmliZXIpO3IuRXhwYW5kU3Vic2NyaWJlcj11fSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxMTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaWJlclwiKTtmdW5jdGlvbiBvKHIsbil7cmV0dXJuIGZ1bmN0aW9uIGUodCl7cmV0dXJuIHQubGlmdChuZXcgYShyLG4pKX19ci5maWx0ZXI9bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnByZWRpY2F0ZT1lO3RoaXMudGhpc0FyZz10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSx0aGlzLnByZWRpY2F0ZSx0aGlzLnRoaXNBcmcpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ucHJlZGljYXRlPXQ7bi50aGlzQXJnPXI7bi5jb3VudD0wO3JldHVybiBufWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PXRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLGUsdGhpcy5jb3VudCsrKX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpO3JldHVybn1pZih0KXt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTE3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIG89ZShcIi4uL1N1YnNjcmlwdGlvblwiKTtmdW5jdGlvbiBhKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBzKHQpKX19ci5maW5hbGl6ZT1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNhbGxiYWNrPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgdShlLHRoaXMuY2FsbGJhY2spKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLmFkZChuZXcgby5TdWJzY3JpcHRpb24odCkpO3JldHVybiByfXJldHVybiBlfShuLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi9TdWJzY3JpcHRpb25cIjo1Nn1dLDExODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG8odCxyKXtpZih0eXBlb2YgdCE9PVwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcInByZWRpY2F0ZSBpcyBub3QgYSBmdW5jdGlvblwiKX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0LGUsZmFsc2UscikpfX1yLmZpbmQ9bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbil7dGhpcy5wcmVkaWNhdGU9ZTt0aGlzLnNvdXJjZT10O3RoaXMueWllbGRJbmRleD1yO3RoaXMudGhpc0FyZz1ufWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSx0aGlzLnByZWRpY2F0ZSx0aGlzLnNvdXJjZSx0aGlzLnlpZWxkSW5kZXgsdGhpcy50aGlzQXJnKSl9O3JldHVybiBlfSgpO3IuRmluZFZhbHVlT3BlcmF0b3I9YTt2YXIgcz1mdW5jdGlvbihhKXtuKGUsYSk7ZnVuY3Rpb24gZShlLHQscixuLGkpe3ZhciBvPWEuY2FsbCh0aGlzLGUpfHx0aGlzO28ucHJlZGljYXRlPXQ7by5zb3VyY2U9cjtvLnlpZWxkSW5kZXg9bjtvLnRoaXNBcmc9aTtvLmluZGV4PTA7cmV0dXJuIG99ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0Lm5leHQoZSk7dC5jb21wbGV0ZSgpO3RoaXMudW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQucHJlZGljYXRlLG49dC50aGlzQXJnO3ZhciBpPXRoaXMuaW5kZXgrKzt0cnl7dmFyIG89ci5jYWxsKG58fHRoaXMsZSxpLHRoaXMuc291cmNlKTtpZihvKXt0aGlzLm5vdGlmeUNvbXBsZXRlKHRoaXMueWllbGRJbmRleD9pOmUpfX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZnlDb21wbGV0ZSh0aGlzLnlpZWxkSW5kZXg/LTE6dW5kZWZpbmVkKX07cmV0dXJuIGV9KGkuU3Vic2NyaWJlcik7ci5GaW5kVmFsdWVTdWJzY3JpYmVyPXN9LHtcIi4uL1N1YnNjcmliZXJcIjo1NX1dLDExOTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL29wZXJhdG9ycy9maW5kXCIpO2Z1bmN0aW9uIGkodCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgbi5GaW5kVmFsdWVPcGVyYXRvcih0LGUsdHJ1ZSxyKSl9fXIuZmluZEluZGV4PWl9LHtcIi4uL29wZXJhdG9ycy9maW5kXCI6MTE4fV0sMTIwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vdXRpbC9FbXB0eUVycm9yXCIpO3ZhciBvPWUoXCIuL2ZpbHRlclwiKTt2YXIgYT1lKFwiLi90YWtlXCIpO3ZhciBzPWUoXCIuL2RlZmF1bHRJZkVtcHR5XCIpO3ZhciB1PWUoXCIuL3Rocm93SWZFbXB0eVwiKTt2YXIgYz1lKFwiLi4vdXRpbC9pZGVudGl0eVwiKTtmdW5jdGlvbiBuKG4sZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD49MjtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIHIucGlwZShuP28uZmlsdGVyKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oZSx0LHIpfSk6Yy5pZGVudGl0eSxhLnRha2UoMSksdD9zLmRlZmF1bHRJZkVtcHR5KGUpOnUudGhyb3dJZkVtcHR5KGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpLkVtcHR5RXJyb3J9KSl9fXIuZmlyc3Q9bn0se1wiLi4vdXRpbC9FbXB0eUVycm9yXCI6MjEyLFwiLi4vdXRpbC9pZGVudGl0eVwiOjIxOSxcIi4vZGVmYXVsdElmRW1wdHlcIjoxMDMsXCIuL2ZpbHRlclwiOjExNixcIi4vdGFrZVwiOjE2OCxcIi4vdGhyb3dJZkVtcHR5XCI6MTc1fV0sMTIxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIG89ZShcIi4uL1N1YnNjcmlwdGlvblwiKTt2YXIgYT1lKFwiLi4vT2JzZXJ2YWJsZVwiKTt2YXIgcz1lKFwiLi4vU3ViamVjdFwiKTtmdW5jdGlvbiB1KHQscixuLGkpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBjKHQscixuLGkpKX19ci5ncm91cEJ5PXU7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG4pe3RoaXMua2V5U2VsZWN0b3I9ZTt0aGlzLmVsZW1lbnRTZWxlY3Rvcj10O3RoaXMuZHVyYXRpb25TZWxlY3Rvcj1yO3RoaXMuc3ViamVjdFNlbGVjdG9yPW59ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgbChlLHRoaXMua2V5U2VsZWN0b3IsdGhpcy5lbGVtZW50U2VsZWN0b3IsdGhpcy5kdXJhdGlvblNlbGVjdG9yLHRoaXMuc3ViamVjdFNlbGVjdG9yKSl9O3JldHVybiBlfSgpO3ZhciBsPWZ1bmN0aW9uKGEpe24oZSxhKTtmdW5jdGlvbiBlKGUsdCxyLG4saSl7dmFyIG89YS5jYWxsKHRoaXMsZSl8fHRoaXM7by5rZXlTZWxlY3Rvcj10O28uZWxlbWVudFNlbGVjdG9yPXI7by5kdXJhdGlvblNlbGVjdG9yPW47by5zdWJqZWN0U2VsZWN0b3I9aTtvLmdyb3Vwcz1udWxsO28uYXR0ZW1wdGVkVG9VbnN1YnNjcmliZT1mYWxzZTtvLmNvdW50PTA7cmV0dXJuIG99ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9dGhpcy5rZXlTZWxlY3RvcihlKX1jYXRjaChlKXt0aGlzLmVycm9yKGUpO3JldHVybn10aGlzLl9ncm91cChlLHQpfTtlLnByb3RvdHlwZS5fZ3JvdXA9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3VwcztpZighcil7cj10aGlzLmdyb3Vwcz1uZXcgTWFwfXZhciBuPXIuZ2V0KHQpO3ZhciBpO2lmKHRoaXMuZWxlbWVudFNlbGVjdG9yKXt0cnl7aT10aGlzLmVsZW1lbnRTZWxlY3RvcihlKX1jYXRjaChlKXt0aGlzLmVycm9yKGUpfX1lbHNle2k9ZX1pZighbil7bj10aGlzLnN1YmplY3RTZWxlY3Rvcj90aGlzLnN1YmplY3RTZWxlY3RvcigpOm5ldyBzLlN1YmplY3Q7ci5zZXQodCxuKTt2YXIgbz1uZXcgcCh0LG4sdGhpcyk7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KG8pO2lmKHRoaXMuZHVyYXRpb25TZWxlY3Rvcil7dmFyIGE9dm9pZCAwO3RyeXthPXRoaXMuZHVyYXRpb25TZWxlY3RvcihuZXcgcCh0LG4pKX1jYXRjaChlKXt0aGlzLmVycm9yKGUpO3JldHVybn10aGlzLmFkZChhLnN1YnNjcmliZShuZXcgaCh0LG4sdGhpcykpKX19aWYoIW4uY2xvc2VkKXtuLm5leHQoaSl9fTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24ocil7dmFyIGU9dGhpcy5ncm91cHM7aWYoZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS5lcnJvcihyKX0pO2UuY2xlYXIoKX10aGlzLmRlc3RpbmF0aW9uLmVycm9yKHIpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwcztpZihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLmNvbXBsZXRlKCl9KTtlLmNsZWFyKCl9dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfTtlLnByb3RvdHlwZS5yZW1vdmVHcm91cD1mdW5jdGlvbihlKXt0aGlzLmdyb3Vwcy5kZWxldGUoZSl9O2UucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmU9dHJ1ZTtpZih0aGlzLmNvdW50PT09MCl7YS5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKX19fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKTt2YXIgaD1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsdCl8fHRoaXM7bi5rZXk9ZTtuLmdyb3VwPXQ7bi5wYXJlbnQ9cjtyZXR1cm4gbn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmNvbXBsZXRlKCl9O2UucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBhcmVudCxyPWUua2V5O3RoaXMua2V5PXRoaXMucGFyZW50PW51bGw7aWYodCl7dC5yZW1vdmVHcm91cChyKX19O3JldHVybiBlfShpLlN1YnNjcmliZXIpO3ZhciBwPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyl8fHRoaXM7bi5rZXk9ZTtuLmdyb3VwU3ViamVjdD10O24ucmVmQ291bnRTdWJzY3JpcHRpb249cjtyZXR1cm4gbn1lLnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBvLlN1YnNjcmlwdGlvbjt2YXIgcj10aGlzLG49ci5yZWZDb3VudFN1YnNjcmlwdGlvbixpPXIuZ3JvdXBTdWJqZWN0O2lmKG4mJiFuLmNsb3NlZCl7dC5hZGQobmV3IGYobikpfXQuYWRkKGkuc3Vic2NyaWJlKGUpKTtyZXR1cm4gdH07cmV0dXJuIGV9KGEuT2JzZXJ2YWJsZSk7ci5Hcm91cGVkT2JzZXJ2YWJsZT1wO3ZhciBmPWZ1bmN0aW9uKHIpe24oZSxyKTtmdW5jdGlvbiBlKGUpe3ZhciB0PXIuY2FsbCh0aGlzKXx8dGhpczt0LnBhcmVudD1lO2UuY291bnQrKztyZXR1cm4gdH1lLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyZW50O2lmKCFlLmNsb3NlZCYmIXRoaXMuY2xvc2VkKXtyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO2UuY291bnQtPTE7aWYoZS5jb3VudD09PTAmJmUuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSl7ZS51bnN1YnNjcmliZSgpfX19O3JldHVybiBlfShvLlN1YnNjcmlwdGlvbil9LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL1N1YmplY3RcIjo1MyxcIi4uL1N1YnNjcmliZXJcIjo1NSxcIi4uL1N1YnNjcmlwdGlvblwiOjU2fV0sMTIyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbygpe3JldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IGEpfX1yLmlnbm9yZUVsZW1lbnRzPW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSkpfTtyZXR1cm4gZX0oKTt2YXIgcz1mdW5jdGlvbihlKXtuKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiBlIT09bnVsbCYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9dC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7fTtyZXR1cm4gdH0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTIzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbygpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBhKX19ci5pc0VtcHR5PW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSkpfTtyZXR1cm4gZX0oKTt2YXIgcz1mdW5jdGlvbih0KXtuKGUsdCk7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSl8fHRoaXN9ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0Lm5leHQoZSk7dC5jb21wbGV0ZSgpfTtlLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLm5vdGlmeUNvbXBsZXRlKGZhbHNlKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZnlDb21wbGV0ZSh0cnVlKX07cmV0dXJuIGV9KGkuU3Vic2NyaWJlcil9LHtcIi4uL1N1YnNjcmliZXJcIjo1NX1dLDEyNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL3V0aWwvRW1wdHlFcnJvclwiKTt2YXIgbz1lKFwiLi9maWx0ZXJcIik7dmFyIGE9ZShcIi4vdGFrZUxhc3RcIik7dmFyIHM9ZShcIi4vdGhyb3dJZkVtcHR5XCIpO3ZhciB1PWUoXCIuL2RlZmF1bHRJZkVtcHR5XCIpO3ZhciBjPWUoXCIuLi91dGlsL2lkZW50aXR5XCIpO2Z1bmN0aW9uIG4obixlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPj0yO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gci5waXBlKG4/by5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbihlLHQscil9KTpjLmlkZW50aXR5LGEudGFrZUxhc3QoMSksdD91LmRlZmF1bHRJZkVtcHR5KGUpOnMudGhyb3dJZkVtcHR5KGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpLkVtcHR5RXJyb3J9KSl9fXIubGFzdD1ufSx7XCIuLi91dGlsL0VtcHR5RXJyb3JcIjoyMTIsXCIuLi91dGlsL2lkZW50aXR5XCI6MjE5LFwiLi9kZWZhdWx0SWZFbXB0eVwiOjEwMyxcIi4vZmlsdGVyXCI6MTE2LFwiLi90YWtlTGFzdFwiOjE2OSxcIi4vdGhyb3dJZkVtcHR5XCI6MTc1fV0sMTI1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyhyLG4pe3JldHVybiBmdW5jdGlvbiBlKHQpe2lmKHR5cGVvZiByIT09XCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uIEFyZSB5b3UgbG9va2luZyBmb3IgYG1hcFRvKClgP1wiKX1yZXR1cm4gdC5saWZ0KG5ldyBhKHIsbikpfX1yLm1hcD1vO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMucHJvamVjdD1lO3RoaXMudGhpc0FyZz10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSx0aGlzLnByb2plY3QsdGhpcy50aGlzQXJnKSl9O3JldHVybiBlfSgpO3IuTWFwT3BlcmF0b3I9YTt2YXIgcz1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsZSl8fHRoaXM7bi5wcm9qZWN0PXQ7bi5jb3VudD0wO24udGhpc0FyZz1yfHxuO3JldHVybiBufWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PXRoaXMucHJvamVjdC5jYWxsKHRoaXMudGhpc0FyZyxlLHRoaXMuY291bnQrKyl9Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtyZXR1cm59dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTI2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0KSl9fXIubWFwVG89bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy52YWx1ZT1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSx0aGlzLnZhbHVlKSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci52YWx1ZT10O3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKX07cmV0dXJuIGV9KG4uU3Vic2NyaWJlcil9LHtcIi4uL1N1YnNjcmliZXJcIjo1NX1dLDEyNzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi9Ob3RpZmljYXRpb25cIik7ZnVuY3Rpb24gYSgpe3JldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IHMpfX1yLm1hdGVyaWFsaXplPWE7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHUoZSkpfTtyZXR1cm4gZX0oKTt2YXIgdT1mdW5jdGlvbih0KXtuKGUsdCk7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSl8fHRoaXN9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KG8uTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQoZSkpfTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0Lm5leHQoby5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZSkpO3QuY29tcGxldGUoKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZXN0aW5hdGlvbjtlLm5leHQoby5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7ZS5jb21wbGV0ZSgpfTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vTm90aWZpY2F0aW9uXCI6NDcsXCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxMjg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL3JlZHVjZVwiKTtmdW5jdGlvbiBpKHIpe3ZhciBlPXR5cGVvZiByPT09XCJmdW5jdGlvblwiP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIHIoZSx0KT4wP2U6dH06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT50P2U6dH07cmV0dXJuIG4ucmVkdWNlKGUpfXIubWF4PWl9LHtcIi4vcmVkdWNlXCI6MTQ2fV0sMTI5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vb2JzZXJ2YWJsZS9tZXJnZVwiKTtmdW5jdGlvbiBpKCl7dmFyIHQ9W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dFtlXT1hcmd1bWVudHNbZV19cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQuY2FsbChuLm1lcmdlLmFwcGx5KHZvaWQgMCxbZV0uY29uY2F0KHQpKSl9fXIubWVyZ2U9aX0se1wiLi4vb2JzZXJ2YWJsZS9tZXJnZVwiOjc0fV0sMTMwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9tZXJnZU1hcFwiKTt2YXIgaT1lKFwiLi4vdXRpbC9pZGVudGl0eVwiKTtmdW5jdGlvbiBvKGUpe2lmKGU9PT12b2lkIDApe2U9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfXJldHVybiBuLm1lcmdlTWFwKGkuaWRlbnRpdHksZSl9ci5tZXJnZUFsbD1vfSx7XCIuLi91dGlsL2lkZW50aXR5XCI6MjE5LFwiLi9tZXJnZU1hcFwiOjEzMX1dLDEzMTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBhPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO3ZhciBpPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL0lubmVyU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi9tYXBcIik7dmFyIHU9ZShcIi4uL29ic2VydmFibGUvZnJvbVwiKTtmdW5jdGlvbiBjKHQsaSxyKXtpZihyPT09dm9pZCAwKXtyPU51bWJlci5QT1NJVElWRV9JTkZJTklUWX1pZih0eXBlb2YgaT09PVwiZnVuY3Rpb25cIil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLnBpcGUoYyhmdW5jdGlvbihyLG4pe3JldHVybiB1LmZyb20odChyLG4pKS5waXBlKG8ubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkocixlLG4sdCl9KSl9LHIpKX19ZWxzZSBpZih0eXBlb2YgaT09PVwibnVtYmVyXCIpe3I9aX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgbCh0LHIpKX19ci5tZXJnZU1hcD1jO3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2lmKHQ9PT12b2lkIDApe3Q9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfXRoaXMucHJvamVjdD1lO3RoaXMuY29uY3VycmVudD10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGgoZSx0aGlzLnByb2plY3QsdGhpcy5jb25jdXJyZW50KSl9O3JldHVybiBlfSgpO3IuTWVyZ2VNYXBPcGVyYXRvcj1sO3ZhciBoPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXtpZihyPT09dm9pZCAwKXtyPU51bWJlci5QT1NJVElWRV9JTkZJTklUWX12YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLnByb2plY3Q9dDtuLmNvbmN1cnJlbnQ9cjtuLmhhc0NvbXBsZXRlZD1mYWxzZTtuLmJ1ZmZlcj1bXTtuLmFjdGl2ZT0wO24uaW5kZXg9MDtyZXR1cm4gbn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXtpZih0aGlzLmFjdGl2ZTx0aGlzLmNvbmN1cnJlbnQpe3RoaXMuX3RyeU5leHQoZSl9ZWxzZXt0aGlzLmJ1ZmZlci5wdXNoKGUpfX07ZS5wcm90b3R5cGUuX3RyeU5leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ7dmFyIHI9dGhpcy5pbmRleCsrO3RyeXt0PXRoaXMucHJvamVjdChlLHIpfWNhdGNoKGUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSk7cmV0dXJufXRoaXMuYWN0aXZlKys7dGhpcy5faW5uZXJTdWIodCxlLHIpfTtlLnByb3RvdHlwZS5faW5uZXJTdWI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW5ldyBzLklubmVyU3Vic2NyaWJlcih0aGlzLHQscik7dmFyIGk9dGhpcy5kZXN0aW5hdGlvbjtpLmFkZChuKTt2YXIgbz1hLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSx1bmRlZmluZWQsdW5kZWZpbmVkLG4pO2lmKG8hPT1uKXtpLmFkZChvKX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkPXRydWU7aWYodGhpcy5hY3RpdmU9PT0wJiZ0aGlzLmJ1ZmZlci5sZW5ndGg9PT0wKXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9dGhpcy51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfTtlLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJ1ZmZlcjt0aGlzLnJlbW92ZShlKTt0aGlzLmFjdGl2ZS0tO2lmKHQubGVuZ3RoPjApe3RoaXMuX25leHQodC5zaGlmdCgpKX1lbHNlIGlmKHRoaXMuYWN0aXZlPT09MCYmdGhpcy5oYXNDb21wbGV0ZWQpe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX19O3JldHVybiBlfShpLk91dGVyU3Vic2NyaWJlcik7ci5NZXJnZU1hcFN1YnNjcmliZXI9aH0se1wiLi4vSW5uZXJTdWJzY3JpYmVyXCI6NDYsXCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL29ic2VydmFibGUvZnJvbVwiOjY3LFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOSxcIi4vbWFwXCI6MTI1fV0sMTMyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9tZXJnZU1hcFwiKTtmdW5jdGlvbiBpKGUsdCxyKXtpZihyPT09dm9pZCAwKXtyPU51bWJlci5QT1NJVElWRV9JTkZJTklUWX1pZih0eXBlb2YgdD09PVwiZnVuY3Rpb25cIil7cmV0dXJuIG4ubWVyZ2VNYXAoZnVuY3Rpb24oKXtyZXR1cm4gZX0sdCxyKX1pZih0eXBlb2YgdD09PVwibnVtYmVyXCIpe3I9dH1yZXR1cm4gbi5tZXJnZU1hcChmdW5jdGlvbigpe3JldHVybiBlfSxyKX1yLm1lcmdlTWFwVG89aX0se1wiLi9tZXJnZU1hcFwiOjEzMX1dLDEzMzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBhPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO3ZhciBpPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL0lubmVyU3Vic2NyaWJlclwiKTtmdW5jdGlvbiBvKHQscixuKXtpZihuPT09dm9pZCAwKXtuPU51bWJlci5QT1NJVElWRV9JTkZJTklUWX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgdSh0LHIsbikpfX1yLm1lcmdlU2Nhbj1vO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5hY2N1bXVsYXRvcj1lO3RoaXMuc2VlZD10O3RoaXMuY29uY3VycmVudD1yfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLmFjY3VtdWxhdG9yLHRoaXMuc2VlZCx0aGlzLmNvbmN1cnJlbnQpKX07cmV0dXJuIGV9KCk7ci5NZXJnZVNjYW5PcGVyYXRvcj11O3ZhciBjPWZ1bmN0aW9uKG8pe24oZSxvKTtmdW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpPW8uY2FsbCh0aGlzLGUpfHx0aGlzO2kuYWNjdW11bGF0b3I9dDtpLmFjYz1yO2kuY29uY3VycmVudD1uO2kuaGFzVmFsdWU9ZmFsc2U7aS5oYXNDb21wbGV0ZWQ9ZmFsc2U7aS5idWZmZXI9W107aS5hY3RpdmU9MDtpLmluZGV4PTA7cmV0dXJuIGl9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5hY3RpdmU8dGhpcy5jb25jdXJyZW50KXt2YXIgdD10aGlzLmluZGV4Kys7dmFyIHI9dGhpcy5kZXN0aW5hdGlvbjt2YXIgbj12b2lkIDA7dHJ5e3ZhciBpPXRoaXMuYWNjdW11bGF0b3I7bj1pKHRoaXMuYWNjLGUsdCl9Y2F0Y2goZSl7cmV0dXJuIHIuZXJyb3IoZSl9dGhpcy5hY3RpdmUrKzt0aGlzLl9pbm5lclN1YihuLGUsdCl9ZWxzZXt0aGlzLmJ1ZmZlci5wdXNoKGUpfX07ZS5wcm90b3R5cGUuX2lubmVyU3ViPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1uZXcgcy5Jbm5lclN1YnNjcmliZXIodGhpcyx0LHIpO3ZhciBpPXRoaXMuZGVzdGluYXRpb247aS5hZGQobik7dmFyIG89YS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsdW5kZWZpbmVkLHVuZGVmaW5lZCxuKTtpZihvIT09bil7aS5hZGQobyl9fTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbXBsZXRlZD10cnVlO2lmKHRoaXMuYWN0aXZlPT09MCYmdGhpcy5idWZmZXIubGVuZ3RoPT09MCl7aWYodGhpcy5oYXNWYWx1ZT09PWZhbHNlKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hY2MpfXRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX10aGlzLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzLmRlc3RpbmF0aW9uO3RoaXMuYWNjPXQ7dGhpcy5oYXNWYWx1ZT10cnVlO28ubmV4dCh0KX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5idWZmZXI7dmFyIHI9dGhpcy5kZXN0aW5hdGlvbjtyLnJlbW92ZShlKTt0aGlzLmFjdGl2ZS0tO2lmKHQubGVuZ3RoPjApe3RoaXMuX25leHQodC5zaGlmdCgpKX1lbHNlIGlmKHRoaXMuYWN0aXZlPT09MCYmdGhpcy5oYXNDb21wbGV0ZWQpe2lmKHRoaXMuaGFzVmFsdWU9PT1mYWxzZSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKX10aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9fTtyZXR1cm4gZX0oaS5PdXRlclN1YnNjcmliZXIpO3IuTWVyZ2VTY2FuU3Vic2NyaWJlcj1jfSx7XCIuLi9Jbm5lclN1YnNjcmliZXJcIjo0NixcIi4uL091dGVyU3Vic2NyaWJlclwiOjUwLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOX1dLDEzNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vcmVkdWNlXCIpO2Z1bmN0aW9uIGkocil7dmFyIGU9dHlwZW9mIHI9PT1cImZ1bmN0aW9uXCI/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcihlLHQpPDA/ZTp0fTpmdW5jdGlvbihlLHQpe3JldHVybiBlPHQ/ZTp0fTtyZXR1cm4gbi5yZWR1Y2UoZSl9ci5taW49aX0se1wiLi9yZWR1Y2VcIjoxNDZ9XSwxMzU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBhPWUoXCIuLi9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZVwiKTtmdW5jdGlvbiBuKGksbyl7cmV0dXJuIGZ1bmN0aW9uIGUodCl7dmFyIHI7aWYodHlwZW9mIGk9PT1cImZ1bmN0aW9uXCIpe3I9aX1lbHNle3I9ZnVuY3Rpb24gZSgpe3JldHVybiBpfX1pZih0eXBlb2Ygbz09PVwiZnVuY3Rpb25cIil7cmV0dXJuIHQubGlmdChuZXcgcyhyLG8pKX12YXIgbj1PYmplY3QuY3JlYXRlKHQsYS5jb25uZWN0YWJsZU9ic2VydmFibGVEZXNjcmlwdG9yKTtuLnNvdXJjZT10O24uc3ViamVjdEZhY3Rvcnk9cjtyZXR1cm4gbn19ci5tdWx0aWNhc3Q9bjt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnN1YmplY3RGYWN0b3J5PWU7dGhpcy5zZWxlY3Rvcj10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnNlbGVjdG9yO3ZhciBuPXRoaXMuc3ViamVjdEZhY3RvcnkoKTt2YXIgaT1yKG4pLnN1YnNjcmliZShlKTtpLmFkZCh0LnN1YnNjcmliZShuKSk7cmV0dXJuIGl9O3JldHVybiBlfSgpO3IuTXVsdGljYXN0T3BlcmF0b3I9c30se1wiLi4vb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGVcIjo1OH1dLDEzNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi9Ob3RpZmljYXRpb25cIik7ZnVuY3Rpb24gYShyLG4pe2lmKG49PT12b2lkIDApe249MH1yZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyBzKHIsbikpfX1yLm9ic2VydmVPbj1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2lmKHQ9PT12b2lkIDApe3Q9MH10aGlzLnNjaGVkdWxlcj1lO3RoaXMuZGVsYXk9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5zY2hlZHVsZXIsdGhpcy5kZWxheSkpfTtyZXR1cm4gZX0oKTtyLk9ic2VydmVPbk9wZXJhdG9yPXM7dmFyIHU9ZnVuY3Rpb24oaSl7bihyLGkpO2Z1bmN0aW9uIHIoZSx0LHIpe2lmKHI9PT12b2lkIDApe3I9MH12YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLnNjaGVkdWxlcj10O24uZGVsYXk9cjtyZXR1cm4gbn1yLmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUubm90aWZpY2F0aW9uLHI9ZS5kZXN0aW5hdGlvbjt0Lm9ic2VydmUocik7dGhpcy51bnN1YnNjcmliZSgpfTtyLnByb3RvdHlwZS5zY2hlZHVsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0LmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShyLmRpc3BhdGNoLHRoaXMuZGVsYXksbmV3IGMoZSx0aGlzLmRlc3RpbmF0aW9uKSkpfTtyLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnNjaGVkdWxlTWVzc2FnZShvLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KGUpKX07ci5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMuc2NoZWR1bGVNZXNzYWdlKG8uTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGUpKTt0aGlzLnVuc3Vic2NyaWJlKCl9O3IucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVNZXNzYWdlKG8uTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO3RoaXMudW5zdWJzY3JpYmUoKX07cmV0dXJuIHJ9KGkuU3Vic2NyaWJlcik7ci5PYnNlcnZlT25TdWJzY3JpYmVyPXU7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5ub3RpZmljYXRpb249ZTt0aGlzLmRlc3RpbmF0aW9uPXR9cmV0dXJuIGV9KCk7ci5PYnNlcnZlT25NZXNzYWdlPWN9LHtcIi4uL05vdGlmaWNhdGlvblwiOjQ3LFwiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTM3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL29ic2VydmFibGUvZnJvbVwiKTt2YXIgbz1lKFwiLi4vdXRpbC9pc0FycmF5XCIpO3ZhciBhPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIHM9ZShcIi4uL0lubmVyU3Vic2NyaWJlclwiKTt2YXIgdT1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBjKCl7dmFyIHQ9W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dFtlXT1hcmd1bWVudHNbZV19aWYodC5sZW5ndGg9PT0xJiZvLmlzQXJyYXkodFswXSkpe3Q9dFswXX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgaCh0KSl9fXIub25FcnJvclJlc3VtZU5leHQ9YztmdW5jdGlvbiBsKCl7dmFyIGU9W107Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7ZVt0XT1hcmd1bWVudHNbdF19dmFyIHI9bnVsbDtpZihlLmxlbmd0aD09PTEmJm8uaXNBcnJheShlWzBdKSl7ZT1lWzBdfXI9ZS5zaGlmdCgpO3JldHVybiBuLmZyb20ocixudWxsKS5saWZ0KG5ldyBoKGUpKX1yLm9uRXJyb3JSZXN1bWVOZXh0U3RhdGljPWw7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMubmV4dFNvdXJjZXM9ZX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBwKGUsdGhpcy5uZXh0U291cmNlcykpfTtyZXR1cm4gZX0oKTt2YXIgcD1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUpfHx0aGlzO3IuZGVzdGluYXRpb249ZTtyLm5leHRTb3VyY2VzPXQ7cmV0dXJuIHJ9ZS5wcm90b3R5cGUubm90aWZ5RXJyb3I9ZnVuY3Rpb24oZSx0KXt0aGlzLnN1YnNjcmliZVRvTmV4dFNvdXJjZSgpfTtlLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt0aGlzLnN1YnNjcmliZVRvTmV4dFNvdXJjZSgpfTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5zdWJzY3JpYmVUb05leHRTb3VyY2UoKTt0aGlzLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuc3Vic2NyaWJlVG9OZXh0U291cmNlKCk7dGhpcy51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5zdWJzY3JpYmVUb05leHRTb3VyY2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHRTb3VyY2VzLnNoaWZ0KCk7aWYoISFlKXt2YXIgdD1uZXcgcy5Jbm5lclN1YnNjcmliZXIodGhpcyx1bmRlZmluZWQsdW5kZWZpbmVkKTt2YXIgcj10aGlzLmRlc3RpbmF0aW9uO3IuYWRkKHQpO3ZhciBuPXUuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlLHVuZGVmaW5lZCx1bmRlZmluZWQsdCk7aWYobiE9PXQpe3IuYWRkKG4pfX1lbHNle3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX19O3JldHVybiBlfShhLk91dGVyU3Vic2NyaWJlcil9LHtcIi4uL0lubmVyU3Vic2NyaWJlclwiOjQ2LFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9vYnNlcnZhYmxlL2Zyb21cIjo2NyxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxMzg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaWJlclwiKTtmdW5jdGlvbiBvKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IGEpfX1yLnBhaXJ3aXNlPW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSkpfTtyZXR1cm4gZX0oKTt2YXIgcz1mdW5jdGlvbihyKXtuKGUscik7ZnVuY3Rpb24gZShlKXt2YXIgdD1yLmNhbGwodGhpcyxlKXx8dGhpczt0Lmhhc1ByZXY9ZmFsc2U7cmV0dXJuIHR9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYodGhpcy5oYXNQcmV2KXt0PVt0aGlzLnByZXYsZV19ZWxzZXt0aGlzLmhhc1ByZXY9dHJ1ZX10aGlzLnByZXY9ZTtpZih0KXt0aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTM5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vdXRpbC9ub3RcIik7dmFyIGk9ZShcIi4vZmlsdGVyXCIpO2Z1bmN0aW9uIG8odCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuW2kuZmlsdGVyKHQscikoZSksaS5maWx0ZXIobi5ub3QodCxyKSkoZSldfX1yLnBhcnRpdGlvbj1vfSx7XCIuLi91dGlsL25vdFwiOjIzMixcIi4vZmlsdGVyXCI6MTE2fV0sMTQwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9tYXBcIik7ZnVuY3Rpb24gaSgpe3ZhciB0PVtdO2Zvcih2YXIgZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3RbZV09YXJndW1lbnRzW2VdfXZhciByPXQubGVuZ3RoO2lmKHI9PT0wKXt0aHJvdyBuZXcgRXJyb3IoXCJsaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LlwiKX1yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG4ubWFwKG8odCxyKSkoZSl9fXIucGx1Y2s9aTtmdW5jdGlvbiBvKGksbyl7dmFyIGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IodmFyIHI9MDtyPG87cisrKXt2YXIgbj10W2lbcl1dO2lmKHR5cGVvZiBuIT09XCJ1bmRlZmluZWRcIil7dD1ufWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19cmV0dXJuIHR9O3JldHVybiBlfX0se1wiLi9tYXBcIjoxMjV9XSwxNDE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9TdWJqZWN0XCIpO3ZhciBpPWUoXCIuL211bHRpY2FzdFwiKTtmdW5jdGlvbiBvKGUpe3JldHVybiBlP2kubXVsdGljYXN0KGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuLlN1YmplY3R9LGUpOmkubXVsdGljYXN0KG5ldyBuLlN1YmplY3QpfXIucHVibGlzaD1vfSx7XCIuLi9TdWJqZWN0XCI6NTMsXCIuL211bHRpY2FzdFwiOjEzNX1dLDE0MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL0JlaGF2aW9yU3ViamVjdFwiKTt2YXIgaT1lKFwiLi9tdWx0aWNhc3RcIik7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGkubXVsdGljYXN0KG5ldyBuLkJlaGF2aW9yU3ViamVjdCh0KSkoZSl9fXIucHVibGlzaEJlaGF2aW9yPW99LHtcIi4uL0JlaGF2aW9yU3ViamVjdFwiOjQ1LFwiLi9tdWx0aWNhc3RcIjoxMzV9XSwxNDM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9Bc3luY1N1YmplY3RcIik7dmFyIGk9ZShcIi4vbXVsdGljYXN0XCIpO2Z1bmN0aW9uIG8oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGkubXVsdGljYXN0KG5ldyBuLkFzeW5jU3ViamVjdCkoZSl9fXIucHVibGlzaExhc3Q9b30se1wiLi4vQXN5bmNTdWJqZWN0XCI6NDQsXCIuL211bHRpY2FzdFwiOjEzNX1dLDE0NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGE9ZShcIi4uL1JlcGxheVN1YmplY3RcIik7dmFyIHM9ZShcIi4vbXVsdGljYXN0XCIpO2Z1bmN0aW9uIG4oZSx0LHIsbil7aWYociYmdHlwZW9mIHIhPT1cImZ1bmN0aW9uXCIpe249cn12YXIgaT10eXBlb2Ygcj09PVwiZnVuY3Rpb25cIj9yOnVuZGVmaW5lZDt2YXIgbz1uZXcgYS5SZXBsYXlTdWJqZWN0KGUsdCxuKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHMubXVsdGljYXN0KGZ1bmN0aW9uKCl7cmV0dXJuIG99LGkpKGUpfX1yLnB1Ymxpc2hSZXBsYXk9bn0se1wiLi4vUmVwbGF5U3ViamVjdFwiOjUxLFwiLi9tdWx0aWNhc3RcIjoxMzV9XSwxNDU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi91dGlsL2lzQXJyYXlcIik7dmFyIGk9ZShcIi4uL29ic2VydmFibGUvcmFjZVwiKTtmdW5jdGlvbiBvKCl7dmFyIHI9W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7cltlXT1hcmd1bWVudHNbZV19cmV0dXJuIGZ1bmN0aW9uIGUodCl7aWYoci5sZW5ndGg9PT0xJiZuLmlzQXJyYXkoclswXSkpe3I9clswXX1yZXR1cm4gdC5saWZ0LmNhbGwoaS5yYWNlLmFwcGx5KHZvaWQgMCxbdF0uY29uY2F0KHIpKSl9fXIucmFjZT1vfSx7XCIuLi9vYnNlcnZhYmxlL3JhY2VcIjo4MCxcIi4uL3V0aWwvaXNBcnJheVwiOjIyMH1dLDE0NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4vc2NhblwiKTt2YXIgbz1lKFwiLi90YWtlTGFzdFwiKTt2YXIgYT1lKFwiLi9kZWZhdWx0SWZFbXB0eVwiKTt2YXIgcz1lKFwiLi4vdXRpbC9waXBlXCIpO2Z1bmN0aW9uIG4obixyKXtpZihhcmd1bWVudHMubGVuZ3RoPj0yKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gcy5waXBlKGkuc2NhbihuLHIpLG8udGFrZUxhc3QoMSksYS5kZWZhdWx0SWZFbXB0eShyKSkodCl9fXJldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiBzLnBpcGUoaS5zY2FuKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbihlLHQscisxKX0pLG8udGFrZUxhc3QoMSkpKHQpfX1yLnJlZHVjZT1ufSx7XCIuLi91dGlsL3BpcGVcIjoyMzMsXCIuL2RlZmF1bHRJZkVtcHR5XCI6MTAzLFwiLi9zY2FuXCI6MTU0LFwiLi90YWtlTGFzdFwiOjE2OX1dLDE0NzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG8oKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyBhKHQpKX19ci5yZWZDb3VudD1vO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNvbm5lY3RhYmxlPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29ubmVjdGFibGU7ci5fcmVmQ291bnQrKzt2YXIgbj1uZXcgcyhlLHIpO3ZhciBpPXQuc3Vic2NyaWJlKG4pO2lmKCFuLmNsb3NlZCl7bi5jb25uZWN0aW9uPXIuY29ubmVjdCgpfXJldHVybiBpfTtyZXR1cm4gZX0oKTt2YXIgcz1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUpfHx0aGlzO3IuY29ubmVjdGFibGU9dDtyZXR1cm4gcn1lLnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbm5lY3RhYmxlO2lmKCFlKXt0aGlzLmNvbm5lY3Rpb249bnVsbDtyZXR1cm59dGhpcy5jb25uZWN0YWJsZT1udWxsO3ZhciB0PWUuX3JlZkNvdW50O2lmKHQ8PTApe3RoaXMuY29ubmVjdGlvbj1udWxsO3JldHVybn1lLl9yZWZDb3VudD10LTE7aWYodD4xKXt0aGlzLmNvbm5lY3Rpb249bnVsbDtyZXR1cm59dmFyIHI9dGhpcy5jb25uZWN0aW9uO3ZhciBuPWUuX2Nvbm5lY3Rpb247dGhpcy5jb25uZWN0aW9uPW51bGw7aWYobiYmKCFyfHxuPT09cikpe24udW5zdWJzY3JpYmUoKX19O3JldHVybiBlfShuLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxNDg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vb2JzZXJ2YWJsZS9lbXB0eVwiKTtmdW5jdGlvbiBhKHQpe2lmKHQ9PT12b2lkIDApe3Q9LTF9cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKHQ9PT0wKXtyZXR1cm4gby5lbXB0eSgpfWVsc2UgaWYodDwwKXtyZXR1cm4gZS5saWZ0KG5ldyBzKC0xLGUpKX1lbHNle3JldHVybiBlLmxpZnQobmV3IHModC0xLGUpKX19fXIucmVwZWF0PWE7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5jb3VudD1lO3RoaXMuc291cmNlPXR9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgdShlLHRoaXMuY291bnQsdGhpcy5zb3VyY2UpKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24uY291bnQ9dDtuLnNvdXJjZT1yO3JldHVybiBufWUucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgZT10aGlzLHQ9ZS5zb3VyY2Uscj1lLmNvdW50O2lmKHI9PT0wKXtyZXR1cm4gaS5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKX1lbHNlIGlmKHI+LTEpe3RoaXMuY291bnQ9ci0xfXQuc3Vic2NyaWJlKHRoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpKX19O3JldHVybiBlfShpLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi9vYnNlcnZhYmxlL2VtcHR5XCI6NjV9XSwxNDk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbz1lKFwiLi4vU3ViamVjdFwiKTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBhPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IHUodCkpfX1yLnJlcGVhdFdoZW49czt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5ub3RpZmllcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLm5vdGlmaWVyLHQpKX07cmV0dXJuIGV9KCk7dmFyIGM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ubm90aWZpZXI9dDtuLnNvdXJjZT1yO24uc291cmNlSXNCZWluZ1N1YnNjcmliZWRUbz10cnVlO3JldHVybiBufWUucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt0aGlzLnNvdXJjZUlzQmVpbmdTdWJzY3JpYmVkVG89dHJ1ZTt0aGlzLnNvdXJjZS5zdWJzY3JpYmUodGhpcyl9O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc291cmNlSXNCZWluZ1N1YnNjcmliZWRUbz09PWZhbHNlKXtyZXR1cm4gaS5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKX19O2UucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5zb3VyY2VJc0JlaW5nU3Vic2NyaWJlZFRvPWZhbHNlO2lmKCF0aGlzLmlzU3RvcHBlZCl7aWYoIXRoaXMucmV0cmllcyl7dGhpcy5zdWJzY3JpYmVUb1JldHJpZXMoKX1pZighdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9ufHx0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24uY2xvc2VkKXtyZXR1cm4gaS5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKX10aGlzLl91bnN1YnNjcmliZUFuZFJlY3ljbGUoKTt0aGlzLm5vdGlmaWNhdGlvbnMubmV4dCgpfX07ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUubm90aWZpY2F0aW9ucyxyPWUucmV0cmllc1N1YnNjcmlwdGlvbjtpZih0KXt0LnVuc3Vic2NyaWJlKCk7dGhpcy5ub3RpZmljYXRpb25zPW51bGx9aWYocil7ci51bnN1YnNjcmliZSgpO3RoaXMucmV0cmllc1N1YnNjcmlwdGlvbj1udWxsfXRoaXMucmV0cmllcz1udWxsfTtlLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdW5zdWJzY3JpYmU7dGhpcy5fdW5zdWJzY3JpYmU9bnVsbDtpLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlLmNhbGwodGhpcyk7dGhpcy5fdW5zdWJzY3JpYmU9ZTtyZXR1cm4gdGhpc307ZS5wcm90b3R5cGUuc3Vic2NyaWJlVG9SZXRyaWVzPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZmljYXRpb25zPW5ldyBvLlN1YmplY3Q7dmFyIGU7dHJ5e3ZhciB0PXRoaXMubm90aWZpZXI7ZT10KHRoaXMubm90aWZpY2F0aW9ucyl9Y2F0Y2goZSl7cmV0dXJuIGkucHJvdG90eXBlLmNvbXBsZXRlLmNhbGwodGhpcyl9dGhpcy5yZXRyaWVzPWU7dGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uPWEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlKX07cmV0dXJuIGV9KGkuT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9TdWJqZWN0XCI6NTMsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5fV0sMTUwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0KXtpZih0PT09dm9pZCAwKXt0PS0xfXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBhKHQsZSkpfX1yLnJldHJ5PW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5jb3VudD1lO3RoaXMuc291cmNlPXR9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlLHRoaXMuY291bnQsdGhpcy5zb3VyY2UpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24uY291bnQ9dDtuLnNvdXJjZT1yO3JldHVybiBufWUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dmFyIHQ9dGhpcyxyPXQuc291cmNlLG49dC5jb3VudDtpZihuPT09MCl7cmV0dXJuIGkucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcyxlKX1lbHNlIGlmKG4+LTEpe3RoaXMuY291bnQ9bi0xfXIuc3Vic2NyaWJlKHRoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpKX19O3JldHVybiBlfShpLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxNTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgYT1lKFwiLi4vU3ViamVjdFwiKTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBzPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIG8odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IHUodCxlKSl9fXIucmV0cnlXaGVuPW87dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5ub3RpZmllcj1lO3RoaXMuc291cmNlPXR9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgYyhlLHRoaXMubm90aWZpZXIsdGhpcy5zb3VyY2UpKX07cmV0dXJuIGV9KCk7dmFyIGM9ZnVuY3Rpb24obyl7bihlLG8pO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPW8uY2FsbCh0aGlzLGUpfHx0aGlzO24ubm90aWZpZXI9dDtuLnNvdXJjZT1yO3JldHVybiBufWUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dmFyIHQ9dGhpcy5lcnJvcnM7dmFyIHI9dGhpcy5yZXRyaWVzO3ZhciBuPXRoaXMucmV0cmllc1N1YnNjcmlwdGlvbjtpZighcil7dD1uZXcgYS5TdWJqZWN0O3RyeXt2YXIgaT10aGlzLm5vdGlmaWVyO3I9aSh0KX1jYXRjaChlKXtyZXR1cm4gby5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLGUpfW49cy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHIpfWVsc2V7dGhpcy5lcnJvcnM9bnVsbDt0aGlzLnJldHJpZXNTdWJzY3JpcHRpb249bnVsbH10aGlzLl91bnN1YnNjcmliZUFuZFJlY3ljbGUoKTt0aGlzLmVycm9ycz10O3RoaXMucmV0cmllcz1yO3RoaXMucmV0cmllc1N1YnNjcmlwdGlvbj1uO3QubmV4dChlKX19O2UucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVycm9ycyxyPWUucmV0cmllc1N1YnNjcmlwdGlvbjtpZih0KXt0LnVuc3Vic2NyaWJlKCk7dGhpcy5lcnJvcnM9bnVsbH1pZihyKXtyLnVuc3Vic2NyaWJlKCk7dGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uPW51bGx9dGhpcy5yZXRyaWVzPW51bGx9O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzLl91bnN1YnNjcmliZTt0aGlzLl91bnN1YnNjcmliZT1udWxsO3RoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpO3RoaXMuX3Vuc3Vic2NyaWJlPW87dGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMpfTtyZXR1cm4gZX0oaS5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL1N1YmplY3RcIjo1MyxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxNTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIGEodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IHModCkpfX1yLnNhbXBsZT1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLm5vdGlmaWVyPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyB1KGUpO3ZhciBuPXQuc3Vic2NyaWJlKHIpO24uYWRkKG8uc3Vic2NyaWJlVG9SZXN1bHQocix0aGlzLm5vdGlmaWVyKSk7cmV0dXJuIG59O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKHQpe24oZSx0KTtmdW5jdGlvbiBlKCl7dmFyIGU9dCE9PW51bGwmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO2UuaGFzVmFsdWU9ZmFsc2U7cmV0dXJuIGV9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy52YWx1ZT1lO3RoaXMuaGFzVmFsdWU9dHJ1ZX07ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuLGkpe3RoaXMuZW1pdFZhbHVlKCl9O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5lbWl0VmFsdWUoKX07ZS5wcm90b3R5cGUuZW1pdFZhbHVlPWZ1bmN0aW9uKCl7aWYodGhpcy5oYXNWYWx1ZSl7dGhpcy5oYXNWYWx1ZT1mYWxzZTt0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy52YWx1ZSl9fTtyZXR1cm4gZX0oaS5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxNTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vc2NoZWR1bGVyL2FzeW5jXCIpO2Z1bmN0aW9uIGEodCxyKXtpZihyPT09dm9pZCAwKXtyPW8uYXN5bmN9cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQobmV3IHModCxyKSl9fXIuc2FtcGxlVGltZT1hO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMucGVyaW9kPWU7dGhpcy5zY2hlZHVsZXI9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5wZXJpb2QsdGhpcy5zY2hlZHVsZXIpKX07cmV0dXJuIGV9KCk7dmFyIHU9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ucGVyaW9kPXQ7bi5zY2hlZHVsZXI9cjtuLmhhc1ZhbHVlPWZhbHNlO24uYWRkKHIuc2NoZWR1bGUoYyx0LHtzdWJzY3JpYmVyOm4scGVyaW9kOnR9KSk7cmV0dXJuIG59ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5sYXN0VmFsdWU9ZTt0aGlzLmhhc1ZhbHVlPXRydWV9O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc1ZhbHVlKXt0aGlzLmhhc1ZhbHVlPWZhbHNlO3RoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmxhc3RWYWx1ZSl9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKTtmdW5jdGlvbiBjKGUpe3ZhciB0PWUuc3Vic2NyaWJlcixyPWUucGVyaW9kO3Qubm90aWZ5TmV4dCgpO3RoaXMuc2NoZWR1bGUoZSxyKX19LHtcIi4uL1N1YnNjcmliZXJcIjo1NSxcIi4uL3NjaGVkdWxlci9hc3luY1wiOjIwNn1dLDE1NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG8ocixuKXt2YXIgaT1mYWxzZTtpZihhcmd1bWVudHMubGVuZ3RoPj0yKXtpPXRydWV9cmV0dXJuIGZ1bmN0aW9uIGUodCl7cmV0dXJuIHQubGlmdChuZXcgYShyLG4saSkpfX1yLnNjYW49bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe2lmKHI9PT12b2lkIDApe3I9ZmFsc2V9dGhpcy5hY2N1bXVsYXRvcj1lO3RoaXMuc2VlZD10O3RoaXMuaGFzU2VlZD1yfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IHMoZSx0aGlzLmFjY3VtdWxhdG9yLHRoaXMuc2VlZCx0aGlzLmhhc1NlZWQpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24obyl7bihlLG8pO2Z1bmN0aW9uIGUoZSx0LHIsbil7dmFyIGk9by5jYWxsKHRoaXMsZSl8fHRoaXM7aS5hY2N1bXVsYXRvcj10O2kuX3NlZWQ9cjtpLmhhc1NlZWQ9bjtpLmluZGV4PTA7cmV0dXJuIGl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2VlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VlZH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuaGFzU2VlZD10cnVlO3RoaXMuX3NlZWQ9ZX0sZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaGFzU2VlZCl7dGhpcy5zZWVkPWU7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpfWVsc2V7cmV0dXJuIHRoaXMuX3RyeU5leHQoZSl9fTtlLnByb3RvdHlwZS5fdHJ5TmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmluZGV4Kys7dmFyIHI7dHJ5e3I9dGhpcy5hY2N1bXVsYXRvcih0aGlzLnNlZWQsZSx0KX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfXRoaXMuc2VlZD1yO3RoaXMuZGVzdGluYXRpb24ubmV4dChyKX07cmV0dXJuIGV9KGkuU3Vic2NyaWJlcil9LHtcIi4uL1N1YnNjcmliZXJcIjo1NX1dLDE1NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIGkodCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0LHIpKX19ci5zZXF1ZW5jZUVxdWFsPWk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5jb21wYXJlVG89ZTt0aGlzLmNvbXBhcmF0b3I9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBzKGUsdGhpcy5jb21wYXJlVG8sdGhpcy5jb21wYXJhdG9yKSl9O3JldHVybiBlfSgpO3IuU2VxdWVuY2VFcXVhbE9wZXJhdG9yPWE7dmFyIHM9ZnVuY3Rpb24oaSl7byhlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24uY29tcGFyZVRvPXQ7bi5jb21wYXJhdG9yPXI7bi5fYT1bXTtuLl9iPVtdO24uX29uZUNvbXBsZXRlPWZhbHNlO24uZGVzdGluYXRpb24uYWRkKHQuc3Vic2NyaWJlKG5ldyB1KGUsbikpKTtyZXR1cm4gbn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXtpZih0aGlzLl9vbmVDb21wbGV0ZSYmdGhpcy5fYi5sZW5ndGg9PT0wKXt0aGlzLmVtaXQoZmFsc2UpfWVsc2V7dGhpcy5fYS5wdXNoKGUpO3RoaXMuY2hlY2tWYWx1ZXMoKX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe2lmKHRoaXMuX29uZUNvbXBsZXRlKXt0aGlzLmVtaXQodGhpcy5fYS5sZW5ndGg9PT0wJiZ0aGlzLl9iLmxlbmd0aD09PTApfWVsc2V7dGhpcy5fb25lQ29tcGxldGU9dHJ1ZX10aGlzLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLmNoZWNrVmFsdWVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2Escj1lLl9iLG49ZS5jb21wYXJhdG9yO3doaWxlKHQubGVuZ3RoPjAmJnIubGVuZ3RoPjApe3ZhciBpPXQuc2hpZnQoKTt2YXIgbz1yLnNoaWZ0KCk7dmFyIGE9ZmFsc2U7dHJ5e2E9bj9uKGksbyk6aT09PW99Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX1pZighYSl7dGhpcy5lbWl0KGZhbHNlKX19fTtlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVzdGluYXRpb247dC5uZXh0KGUpO3QuY29tcGxldGUoKX07ZS5wcm90b3R5cGUubmV4dEI9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb25lQ29tcGxldGUmJnRoaXMuX2EubGVuZ3RoPT09MCl7dGhpcy5lbWl0KGZhbHNlKX1lbHNle3RoaXMuX2IucHVzaChlKTt0aGlzLmNoZWNrVmFsdWVzKCl9fTtlLnByb3RvdHlwZS5jb21wbGV0ZUI9ZnVuY3Rpb24oKXtpZih0aGlzLl9vbmVDb21wbGV0ZSl7dGhpcy5lbWl0KHRoaXMuX2EubGVuZ3RoPT09MCYmdGhpcy5fYi5sZW5ndGg9PT0wKX1lbHNle3RoaXMuX29uZUNvbXBsZXRlPXRydWV9fTtyZXR1cm4gZX0obi5TdWJzY3JpYmVyKTtyLlNlcXVlbmNlRXF1YWxTdWJzY3JpYmVyPXM7dmFyIHU9ZnVuY3Rpb24obil7byhlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLnBhcmVudD10O3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Lm5leHRCKGUpfTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnQuZXJyb3IoZSk7dGhpcy51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5jb21wbGV0ZUIoKTt0aGlzLnVuc3Vic2NyaWJlKCl9O3JldHVybiBlfShuLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxNTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL211bHRpY2FzdFwiKTt2YXIgaT1lKFwiLi9yZWZDb3VudFwiKTt2YXIgbz1lKFwiLi4vU3ViamVjdFwiKTtmdW5jdGlvbiBhKCl7cmV0dXJuIG5ldyBvLlN1YmplY3R9ZnVuY3Rpb24gcygpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gaS5yZWZDb3VudCgpKG4ubXVsdGljYXN0KGEpKGUpKX19ci5zaGFyZT1zfSx7XCIuLi9TdWJqZWN0XCI6NTMsXCIuL211bHRpY2FzdFwiOjEzNSxcIi4vcmVmQ291bnRcIjoxNDd9XSwxNTc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBwPWUoXCIuLi9SZXBsYXlTdWJqZWN0XCIpO2Z1bmN0aW9uIG4oZSx0LHIpe3ZhciBuO2lmKGUmJnR5cGVvZiBlPT09XCJvYmplY3RcIil7bj1lfWVsc2V7bj17YnVmZmVyU2l6ZTplLHdpbmRvd1RpbWU6dCxyZWZDb3VudDpmYWxzZSxzY2hlZHVsZXI6cn19cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpZnQoaShuKSl9fXIuc2hhcmVSZXBsYXk9bjtmdW5jdGlvbiBpKGUpe3ZhciB0PWUuYnVmZmVyU2l6ZSxuPXQ9PT12b2lkIDA/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOnQscj1lLndpbmRvd1RpbWUsaT1yPT09dm9pZCAwP051bWJlci5QT1NJVElWRV9JTkZJTklUWTpyLG89ZS5yZWZDb3VudCxhPWUuc2NoZWR1bGVyO3ZhciBzO3ZhciB1PTA7dmFyIGM7dmFyIGw9ZmFsc2U7dmFyIGg9ZmFsc2U7cmV0dXJuIGZ1bmN0aW9uIGUodCl7dSsrO2lmKCFzfHxsKXtsPWZhbHNlO3M9bmV3IHAuUmVwbGF5U3ViamVjdChuLGksYSk7Yz10LnN1YnNjcmliZSh7bmV4dDpmdW5jdGlvbihlKXtzLm5leHQoZSl9LGVycm9yOmZ1bmN0aW9uKGUpe2w9dHJ1ZTtzLmVycm9yKGUpfSxjb21wbGV0ZTpmdW5jdGlvbigpe2g9dHJ1ZTtjPXVuZGVmaW5lZDtzLmNvbXBsZXRlKCl9fSl9dmFyIHI9cy5zdWJzY3JpYmUodGhpcyk7dGhpcy5hZGQoZnVuY3Rpb24oKXt1LS07ci51bnN1YnNjcmliZSgpO2lmKGMmJiFoJiZvJiZ1PT09MCl7Yy51bnN1YnNjcmliZSgpO2M9dW5kZWZpbmVkO3M9dW5kZWZpbmVkfX0pfX19LHtcIi4uL1JlcGxheVN1YmplY3RcIjo1MX1dLDE1ODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi91dGlsL0VtcHR5RXJyb3JcIik7ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgcyh0LGUpKX19ci5zaW5nbGU9YTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnByZWRpY2F0ZT1lO3RoaXMuc291cmNlPXR9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgdShlLHRoaXMucHJlZGljYXRlLHRoaXMuc291cmNlKSl9O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlKXx8dGhpcztuLnByZWRpY2F0ZT10O24uc291cmNlPXI7bi5zZWVuVmFsdWU9ZmFsc2U7bi5pbmRleD0wO3JldHVybiBufWUucHJvdG90eXBlLmFwcGx5U2luZ2xlVmFsdWU9ZnVuY3Rpb24oZSl7aWYodGhpcy5zZWVuVmFsdWUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoXCJTZXF1ZW5jZSBjb250YWlucyBtb3JlIHRoYW4gb25lIGVsZW1lbnRcIil9ZWxzZXt0aGlzLnNlZW5WYWx1ZT10cnVlO3RoaXMuc2luZ2xlVmFsdWU9ZX19O2UucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaW5kZXgrKztpZih0aGlzLnByZWRpY2F0ZSl7dGhpcy50cnlOZXh0KGUsdCl9ZWxzZXt0aGlzLmFwcGx5U2luZ2xlVmFsdWUoZSl9fTtlLnByb3RvdHlwZS50cnlOZXh0PWZ1bmN0aW9uKGUsdCl7dHJ5e2lmKHRoaXMucHJlZGljYXRlKGUsdCx0aGlzLnNvdXJjZSkpe3RoaXMuYXBwbHlTaW5nbGVWYWx1ZShlKX19Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGVzdGluYXRpb247aWYodGhpcy5pbmRleD4wKXtlLm5leHQodGhpcy5zZWVuVmFsdWU/dGhpcy5zaW5nbGVWYWx1ZTp1bmRlZmluZWQpO2UuY29tcGxldGUoKX1lbHNle2UuZXJyb3IobmV3IG8uRW1wdHlFcnJvcil9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vdXRpbC9FbXB0eUVycm9yXCI6MjEyfV0sMTU5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0KSl9fXIuc2tpcD1vO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnRvdGFsPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlLHRoaXMudG90YWwpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLnRvdGFsPXQ7ci5jb3VudD0wO3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKCsrdGhpcy5jb3VudD50aGlzLnRvdGFsKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9fTtyZXR1cm4gZX0obi5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTYwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIG89ZShcIi4uL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcIik7ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgcyh0KSl9fXIuc2tpcExhc3Q9YTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fc2tpcENvdW50PWU7aWYodGhpcy5fc2tpcENvdW50PDApe3Rocm93IG5ldyBvLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fc2tpcENvdW50PT09MCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBuLlN1YnNjcmliZXIoZSkpfWVsc2V7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5fc2tpcENvdW50KSl9fTtyZXR1cm4gZX0oKTt2YXIgdT1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUpfHx0aGlzO3IuX3NraXBDb3VudD10O3IuX2NvdW50PTA7ci5fcmluZz1uZXcgQXJyYXkodCk7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc2tpcENvdW50O3ZhciByPXRoaXMuX2NvdW50Kys7aWYocjx0KXt0aGlzLl9yaW5nW3JdPWV9ZWxzZXt2YXIgbj1yJXQ7dmFyIGk9dGhpcy5fcmluZzt2YXIgbz1pW25dO2lbbl09ZTt0aGlzLmRlc3RpbmF0aW9uLm5leHQobyl9fTtyZXR1cm4gZX0obi5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiOjIxMX1dLDE2MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIGE9ZShcIi4uL0lubmVyU3Vic2NyaWJlclwiKTt2YXIgcz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBvKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyB1KHQpKX19ci5za2lwVW50aWw9bzt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5ub3RpZmllcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLm5vdGlmaWVyKSl9O3JldHVybiBlfSgpO3ZhciBjPWZ1bmN0aW9uKG8pe24oZSxvKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9by5jYWxsKHRoaXMsZSl8fHRoaXM7ci5oYXNWYWx1ZT1mYWxzZTt2YXIgbj1uZXcgYS5Jbm5lclN1YnNjcmliZXIocix1bmRlZmluZWQsdW5kZWZpbmVkKTtyLmFkZChuKTtyLmlubmVyU3Vic2NyaXB0aW9uPW47dmFyIGk9cy5zdWJzY3JpYmVUb1Jlc3VsdChyLHQsdW5kZWZpbmVkLHVuZGVmaW5lZCxuKTtpZihpIT09bil7ci5hZGQoaSk7ci5pbm5lclN1YnNjcmlwdGlvbj1pfXJldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzVmFsdWUpe28ucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcyxlKX19O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt0aGlzLmhhc1ZhbHVlPXRydWU7aWYodGhpcy5pbm5lclN1YnNjcmlwdGlvbil7dGhpcy5pbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt9O3JldHVybiBlfShpLk91dGVyU3Vic2NyaWJlcil9LHtcIi4uL0lubmVyU3Vic2NyaWJlclwiOjQ2LFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5fV0sMTYyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0KSl9fXIuc2tpcFdoaWxlPW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMucHJlZGljYXRlPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlLHRoaXMucHJlZGljYXRlKSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5wcmVkaWNhdGU9dDtyLnNraXBwaW5nPXRydWU7ci5pbmRleD0wO3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVzdGluYXRpb247aWYodGhpcy5za2lwcGluZyl7dGhpcy50cnlDYWxsUHJlZGljYXRlKGUpfWlmKCF0aGlzLnNraXBwaW5nKXt0Lm5leHQoZSl9fTtlLnByb3RvdHlwZS50cnlDYWxsUHJlZGljYXRlPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD10aGlzLnByZWRpY2F0ZShlLHRoaXMuaW5kZXgrKyk7dGhpcy5za2lwcGluZz1Cb29sZWFuKHQpfWNhdGNoKGUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9fTtyZXR1cm4gZX0obi5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTYzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vb2JzZXJ2YWJsZS9jb25jYXRcIik7dmFyIGk9ZShcIi4uL3V0aWwvaXNTY2hlZHVsZXJcIik7ZnVuY3Rpb24gbygpe3ZhciB0PVtdO2Zvcih2YXIgZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3RbZV09YXJndW1lbnRzW2VdfXZhciByPXRbdC5sZW5ndGgtMV07aWYoaS5pc1NjaGVkdWxlcihyKSl7dC5wb3AoKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG4uY29uY2F0KHQsZSxyKX19ZWxzZXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG4uY29uY2F0KHQsZSl9fX1yLnN0YXJ0V2l0aD1vfSx7XCIuLi9vYnNlcnZhYmxlL2NvbmNhdFwiOjYzLFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiOjIzMH1dLDE2NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL29ic2VydmFibGUvU3Vic2NyaWJlT25PYnNlcnZhYmxlXCIpO2Z1bmN0aW9uIGkocixuKXtpZihuPT09dm9pZCAwKXtuPTB9cmV0dXJuIGZ1bmN0aW9uIGUodCl7cmV0dXJuIHQubGlmdChuZXcgbyhyLG4pKX19ci5zdWJzY3JpYmVPbj1pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuc2NoZWR1bGVyPWU7dGhpcy5kZWxheT10fWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IG4uU3Vic2NyaWJlT25PYnNlcnZhYmxlKHQsdGhpcy5kZWxheSx0aGlzLnNjaGVkdWxlcikuc3Vic2NyaWJlKGUpfTtyZXR1cm4gZX0oKX0se1wiLi4vb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGVcIjo1OX1dLDE2NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vc3dpdGNoTWFwXCIpO3ZhciBpPWUoXCIuLi91dGlsL2lkZW50aXR5XCIpO2Z1bmN0aW9uIG8oKXtyZXR1cm4gbi5zd2l0Y2hNYXAoaS5pZGVudGl0eSl9ci5zd2l0Y2hBbGw9b30se1wiLi4vdXRpbC9pZGVudGl0eVwiOjIxOSxcIi4vc3dpdGNoTWFwXCI6MTY2fV0sMTY2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgYT1lKFwiLi4vSW5uZXJTdWJzY3JpYmVyXCIpO3ZhciBzPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO3ZhciBvPWUoXCIuL21hcFwiKTt2YXIgdT1lKFwiLi4vb2JzZXJ2YWJsZS9mcm9tXCIpO2Z1bmN0aW9uIGModCxpKXtpZih0eXBlb2YgaT09PVwiZnVuY3Rpb25cIil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLnBpcGUoYyhmdW5jdGlvbihyLG4pe3JldHVybiB1LmZyb20odChyLG4pKS5waXBlKG8ubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkocixlLG4sdCl9KSl9KSl9fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBsKHQpKX19ci5zd2l0Y2hNYXA9Yzt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5wcm9qZWN0PWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgaChlLHRoaXMucHJvamVjdCkpfTtyZXR1cm4gZX0oKTt2YXIgaD1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUpfHx0aGlzO3IucHJvamVjdD10O3IuaW5kZXg9MDtyZXR1cm4gcn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdDt2YXIgcj10aGlzLmluZGV4Kys7dHJ5e3Q9dGhpcy5wcm9qZWN0KGUscil9Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtyZXR1cm59dGhpcy5faW5uZXJTdWIodCxlLHIpfTtlLnByb3RvdHlwZS5faW5uZXJTdWI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuaW5uZXJTdWJzY3JpcHRpb247aWYobil7bi51bnN1YnNjcmliZSgpfXZhciBpPW5ldyBhLklubmVyU3Vic2NyaWJlcih0aGlzLHQscik7dmFyIG89dGhpcy5kZXN0aW5hdGlvbjtvLmFkZChpKTt0aGlzLmlubmVyU3Vic2NyaXB0aW9uPXMuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlLHVuZGVmaW5lZCx1bmRlZmluZWQsaSk7aWYodGhpcy5pbm5lclN1YnNjcmlwdGlvbiE9PWkpe28uYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24pfX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pbm5lclN1YnNjcmlwdGlvbjtpZighZXx8ZS5jbG9zZWQpe24ucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpfXRoaXMudW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5pbm5lclN1YnNjcmlwdGlvbj1udWxsfTtlLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlc3RpbmF0aW9uO3QucmVtb3ZlKGUpO3RoaXMuaW5uZXJTdWJzY3JpcHRpb249bnVsbDtpZih0aGlzLmlzU3RvcHBlZCl7bi5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9fTtlLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfTtyZXR1cm4gZX0obi5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9Jbm5lclN1YnNjcmliZXJcIjo0NixcIi4uL091dGVyU3Vic2NyaWJlclwiOjUwLFwiLi4vb2JzZXJ2YWJsZS9mcm9tXCI6NjcsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5LFwiLi9tYXBcIjoxMjV9XSwxNjc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL3N3aXRjaE1hcFwiKTtmdW5jdGlvbiBpKGUsdCl7cmV0dXJuIHQ/bi5zd2l0Y2hNYXAoZnVuY3Rpb24oKXtyZXR1cm4gZX0sdCk6bi5zd2l0Y2hNYXAoZnVuY3Rpb24oKXtyZXR1cm4gZX0pfXIuc3dpdGNoTWFwVG89aX0se1wiLi9zd2l0Y2hNYXBcIjoxNjZ9XSwxNjg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiKTt2YXIgYT1lKFwiLi4vb2JzZXJ2YWJsZS9lbXB0eVwiKTtmdW5jdGlvbiBzKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZih0PT09MCl7cmV0dXJuIGEuZW1wdHkoKX1lbHNle3JldHVybiBlLmxpZnQobmV3IHUodCkpfX19ci50YWtlPXM7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMudG90YWw9ZTtpZih0aGlzLnRvdGFsPDApe3Rocm93IG5ldyBvLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfX1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy50b3RhbCkpfTtyZXR1cm4gZX0oKTt2YXIgYz1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUpfHx0aGlzO3IudG90YWw9dDtyLmNvdW50PTA7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50b3RhbDt2YXIgcj0rK3RoaXMuY291bnQ7aWYocjw9dCl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpO2lmKHI9PT10KXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7dGhpcy51bnN1YnNjcmliZSgpfX19O3JldHVybiBlfShuLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi9vYnNlcnZhYmxlL2VtcHR5XCI6NjUsXCIuLi91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCI6MjExfV0sMTY5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIG89ZShcIi4uL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcIik7dmFyIGE9ZShcIi4uL29ic2VydmFibGUvZW1wdHlcIik7ZnVuY3Rpb24gcyhyKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtpZihyPT09MCl7cmV0dXJuIGEuZW1wdHkoKX1lbHNle3JldHVybiB0LmxpZnQobmV3IHUocikpfX19ci50YWtlTGFzdD1zO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnRvdGFsPWU7aWYodGhpcy50b3RhbDwwKXt0aHJvdyBuZXcgby5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcn19ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgYyhlLHRoaXMudG90YWwpKX07cmV0dXJuIGV9KCk7dmFyIGM9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlKXx8dGhpcztyLnRvdGFsPXQ7ci5yaW5nPW5ldyBBcnJheTtyLmNvdW50PTA7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yaW5nO3ZhciByPXRoaXMudG90YWw7dmFyIG49dGhpcy5jb3VudCsrO2lmKHQubGVuZ3RoPHIpe3QucHVzaChlKX1lbHNle3ZhciBpPW4lcjt0W2ldPWV9fTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRlc3RpbmF0aW9uO3ZhciB0PXRoaXMuY291bnQ7aWYodD4wKXt2YXIgcj10aGlzLmNvdW50Pj10aGlzLnRvdGFsP3RoaXMudG90YWw6dGhpcy5jb3VudDt2YXIgbj10aGlzLnJpbmc7Zm9yKHZhciBpPTA7aTxyO2krKyl7dmFyIG89dCsrJXI7ZS5uZXh0KG5bb10pfX1lLmNvbXBsZXRlKCl9O3JldHVybiBlfShuLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi9vYnNlcnZhYmxlL2VtcHR5XCI6NjUsXCIuLi91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCI6MjExfV0sMTcwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiBhKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBzKHQpKX19ci50YWtlVW50aWw9YTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5ub3RpZmllcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgdShlKTt2YXIgbj1vLnN1YnNjcmliZVRvUmVzdWx0KHIsdGhpcy5ub3RpZmllcik7aWYobiYmIXIuc2VlblZhbHVlKXtyLmFkZChuKTtyZXR1cm4gdC5zdWJzY3JpYmUocil9cmV0dXJuIHJ9O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKHIpe24oZSxyKTtmdW5jdGlvbiBlKGUpe3ZhciB0PXIuY2FsbCh0aGlzLGUpfHx0aGlzO3Quc2VlblZhbHVlPWZhbHNlO3JldHVybiB0fWUucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt0aGlzLnNlZW5WYWx1ZT10cnVlO3RoaXMuY29tcGxldGUoKX07ZS5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt9O3JldHVybiBlfShpLk91dGVyU3Vic2NyaWJlcil9LHtcIi4uL091dGVyU3Vic2NyaWJlclwiOjUwLFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiOjIzOX1dLDE3MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG8odCxyKXtpZihyPT09dm9pZCAwKXtyPWZhbHNlfXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBhKHQscikpfX1yLnRha2VXaGlsZT1vO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMucHJlZGljYXRlPWU7dGhpcy5pbmNsdXNpdmU9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBzKGUsdGhpcy5wcmVkaWNhdGUsdGhpcy5pbmNsdXNpdmUpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24ucHJlZGljYXRlPXQ7bi5pbmNsdXNpdmU9cjtuLmluZGV4PTA7cmV0dXJuIG59ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt2YXIgcjt0cnl7cj10aGlzLnByZWRpY2F0ZShlLHRoaXMuaW5kZXgrKyl9Y2F0Y2goZSl7dC5lcnJvcihlKTtyZXR1cm59dGhpcy5uZXh0T3JDb21wbGV0ZShlLHIpfTtlLnByb3RvdHlwZS5uZXh0T3JDb21wbGV0ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZGVzdGluYXRpb247aWYoQm9vbGVhbih0KSl7ci5uZXh0KGUpfWVsc2V7aWYodGhpcy5pbmNsdXNpdmUpe3IubmV4dChlKX1yLmNvbXBsZXRlKCl9fTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1fV0sMTcyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIGE9ZShcIi4uL3V0aWwvbm9vcFwiKTt2YXIgcz1lKFwiLi4vdXRpbC9pc0Z1bmN0aW9uXCIpO2Z1bmN0aW9uIG8ocixuLGkpe3JldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IHUocixuLGkpKX19ci50YXA9bzt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMubmV4dE9yT2JzZXJ2ZXI9ZTt0aGlzLmVycm9yPXQ7dGhpcy5jb21wbGV0ZT1yfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLm5leHRPck9ic2VydmVyLHRoaXMuZXJyb3IsdGhpcy5jb21wbGV0ZSkpfTtyZXR1cm4gZX0oKTt2YXIgYz1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlKXx8dGhpcztpLl90YXBOZXh0PWEubm9vcDtpLl90YXBFcnJvcj1hLm5vb3A7aS5fdGFwQ29tcGxldGU9YS5ub29wO2kuX3RhcEVycm9yPXJ8fGEubm9vcDtpLl90YXBDb21wbGV0ZT1ufHxhLm5vb3A7aWYocy5pc0Z1bmN0aW9uKHQpKXtpLl9jb250ZXh0PWk7aS5fdGFwTmV4dD10fWVsc2UgaWYodCl7aS5fY29udGV4dD10O2kuX3RhcE5leHQ9dC5uZXh0fHxhLm5vb3A7aS5fdGFwRXJyb3I9dC5lcnJvcnx8YS5ub29wO2kuX3RhcENvbXBsZXRlPXQuY29tcGxldGV8fGEubm9vcH1yZXR1cm4gaX1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0cnl7dGhpcy5fdGFwTmV4dC5jYWxsKHRoaXMuX2NvbnRleHQsZSl9Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtyZXR1cm59dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpfTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dHJ5e3RoaXMuX3RhcEVycm9yLmNhbGwodGhpcy5fY29udGV4dCxlKX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpO3JldHVybn10aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0cnl7dGhpcy5fdGFwQ29tcGxldGUuY2FsbCh0aGlzLl9jb250ZXh0KX1jYXRjaChlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpO3JldHVybn1yZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfTtyZXR1cm4gZX0oaS5TdWJzY3JpYmVyKX0se1wiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vdXRpbC9pc0Z1bmN0aW9uXCI6MjIzLFwiLi4vdXRpbC9ub29wXCI6MjMxfV0sMTczOltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgYT1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtuLmRlZmF1bHRUaHJvdHRsZUNvbmZpZz17bGVhZGluZzp0cnVlLHRyYWlsaW5nOmZhbHNlfTtmdW5jdGlvbiBvKHQscil7aWYocj09PXZvaWQgMCl7cj1uLmRlZmF1bHRUaHJvdHRsZUNvbmZpZ31yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgcyh0LHIubGVhZGluZyxyLnRyYWlsaW5nKSl9fW4udGhyb3R0bGU9bzt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuZHVyYXRpb25TZWxlY3Rvcj1lO3RoaXMubGVhZGluZz10O3RoaXMudHJhaWxpbmc9cn1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5kdXJhdGlvblNlbGVjdG9yLHRoaXMubGVhZGluZyx0aGlzLnRyYWlsaW5nKSl9O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKG8pe3IoZSxvKTtmdW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpPW8uY2FsbCh0aGlzLGUpfHx0aGlzO2kuZGVzdGluYXRpb249ZTtpLmR1cmF0aW9uU2VsZWN0b3I9dDtpLl9sZWFkaW5nPXI7aS5fdHJhaWxpbmc9bjtpLl9oYXNWYWx1ZT1mYWxzZTtyZXR1cm4gaX1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLl9oYXNWYWx1ZT10cnVlO3RoaXMuX3NlbmRWYWx1ZT1lO2lmKCF0aGlzLl90aHJvdHRsZWQpe2lmKHRoaXMuX2xlYWRpbmcpe3RoaXMuc2VuZCgpfWVsc2V7dGhpcy50aHJvdHRsZShlKX19fTtlLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2hhc1ZhbHVlLHI9ZS5fc2VuZFZhbHVlO2lmKHQpe3RoaXMuZGVzdGluYXRpb24ubmV4dChyKTt0aGlzLnRocm90dGxlKHIpfXRoaXMuX2hhc1ZhbHVlPWZhbHNlO3RoaXMuX3NlbmRWYWx1ZT1udWxsfTtlLnByb3RvdHlwZS50aHJvdHRsZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyeUR1cmF0aW9uU2VsZWN0b3IoZSk7aWYoISF0KXt0aGlzLmFkZCh0aGlzLl90aHJvdHRsZWQ9YS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHQpKX19O2UucHJvdG90eXBlLnRyeUR1cmF0aW9uU2VsZWN0b3I9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiB0aGlzLmR1cmF0aW9uU2VsZWN0b3IoZSl9Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtyZXR1cm4gbnVsbH19O2UucHJvdG90eXBlLnRocm90dGxpbmdEb25lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3Rocm90dGxlZCxyPWUuX3RyYWlsaW5nO2lmKHQpe3QudW5zdWJzY3JpYmUoKX10aGlzLl90aHJvdHRsZWQ9bnVsbDtpZihyKXt0aGlzLnNlbmQoKX19O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt0aGlzLnRocm90dGxpbmdEb25lKCl9O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy50aHJvdHRsaW5nRG9uZSgpfTtyZXR1cm4gZX0oaS5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxNzQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vc2NoZWR1bGVyL2FzeW5jXCIpO3ZhciBhPWUoXCIuL3Rocm90dGxlXCIpO2Z1bmN0aW9uIHModCxyLG4pe2lmKHI9PT12b2lkIDApe3I9by5hc3luY31pZihuPT09dm9pZCAwKXtuPWEuZGVmYXVsdFRocm90dGxlQ29uZmlnfXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyB1KHQscixuLmxlYWRpbmcsbi50cmFpbGluZykpfX1yLnRocm90dGxlVGltZT1zO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuKXt0aGlzLmR1cmF0aW9uPWU7dGhpcy5zY2hlZHVsZXI9dDt0aGlzLmxlYWRpbmc9cjt0aGlzLnRyYWlsaW5nPW59ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgYyhlLHRoaXMuZHVyYXRpb24sdGhpcy5zY2hlZHVsZXIsdGhpcy5sZWFkaW5nLHRoaXMudHJhaWxpbmcpKX07cmV0dXJuIGV9KCk7dmFyIGM9ZnVuY3Rpb24oYSl7bihlLGEpO2Z1bmN0aW9uIGUoZSx0LHIsbixpKXt2YXIgbz1hLmNhbGwodGhpcyxlKXx8dGhpcztvLmR1cmF0aW9uPXQ7by5zY2hlZHVsZXI9cjtvLmxlYWRpbmc9bjtvLnRyYWlsaW5nPWk7by5faGFzVHJhaWxpbmdWYWx1ZT1mYWxzZTtvLl90cmFpbGluZ1ZhbHVlPW51bGw7cmV0dXJuIG99ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYodGhpcy50aHJvdHRsZWQpe2lmKHRoaXMudHJhaWxpbmcpe3RoaXMuX3RyYWlsaW5nVmFsdWU9ZTt0aGlzLl9oYXNUcmFpbGluZ1ZhbHVlPXRydWV9fWVsc2V7dGhpcy5hZGQodGhpcy50aHJvdHRsZWQ9dGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUobCx0aGlzLmR1cmF0aW9uLHtzdWJzY3JpYmVyOnRoaXN9KSk7aWYodGhpcy5sZWFkaW5nKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9ZWxzZSBpZih0aGlzLnRyYWlsaW5nKXt0aGlzLl90cmFpbGluZ1ZhbHVlPWU7dGhpcy5faGFzVHJhaWxpbmdWYWx1ZT10cnVlfX19O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe2lmKHRoaXMuX2hhc1RyYWlsaW5nVmFsdWUpe3RoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLl90cmFpbGluZ1ZhbHVlKTt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9ZWxzZXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9fTtlLnByb3RvdHlwZS5jbGVhclRocm90dGxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50aHJvdHRsZWQ7aWYoZSl7aWYodGhpcy50cmFpbGluZyYmdGhpcy5faGFzVHJhaWxpbmdWYWx1ZSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuX3RyYWlsaW5nVmFsdWUpO3RoaXMuX3RyYWlsaW5nVmFsdWU9bnVsbDt0aGlzLl9oYXNUcmFpbGluZ1ZhbHVlPWZhbHNlfWUudW5zdWJzY3JpYmUoKTt0aGlzLnJlbW92ZShlKTt0aGlzLnRocm90dGxlZD1udWxsfX07cmV0dXJuIGV9KGkuU3Vic2NyaWJlcik7ZnVuY3Rpb24gbChlKXt2YXIgdD1lLnN1YnNjcmliZXI7dC5jbGVhclRocm90dGxlKCl9fSx7XCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi9zY2hlZHVsZXIvYXN5bmNcIjoyMDYsXCIuL3Rocm90dGxlXCI6MTczfV0sMTc1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL3V0aWwvRW1wdHlFcnJvclwiKTt2YXIgbz1lKFwiLi4vU3Vic2NyaWJlclwiKTtmdW5jdGlvbiBhKHQpe2lmKHQ9PT12b2lkIDApe3Q9Y31yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgcyh0KSl9fXIudGhyb3dJZkVtcHR5PWE7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZXJyb3JGYWN0b3J5PWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgdShlLHRoaXMuZXJyb3JGYWN0b3J5KSl9O3JldHVybiBlfSgpO3ZhciB1PWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSl8fHRoaXM7ci5lcnJvckZhY3Rvcnk9dDtyLmhhc1ZhbHVlPWZhbHNlO3JldHVybiByfWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuaGFzVmFsdWU9dHJ1ZTt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9O2UucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe2lmKCF0aGlzLmhhc1ZhbHVlKXt2YXIgdD12b2lkIDA7dHJ5e3Q9dGhpcy5lcnJvckZhY3RvcnkoKX1jYXRjaChlKXt0PWV9dGhpcy5kZXN0aW5hdGlvbi5lcnJvcih0KX1lbHNle3JldHVybiB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9fTtyZXR1cm4gZX0oby5TdWJzY3JpYmVyKTtmdW5jdGlvbiBjKCl7cmV0dXJuIG5ldyBuLkVtcHR5RXJyb3J9fSx7XCIuLi9TdWJzY3JpYmVyXCI6NTUsXCIuLi91dGlsL0VtcHR5RXJyb3JcIjoyMTJ9XSwxNzY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9zY2hlZHVsZXIvYXN5bmNcIik7dmFyIG89ZShcIi4vc2NhblwiKTt2YXIgYT1lKFwiLi4vb2JzZXJ2YWJsZS9kZWZlclwiKTt2YXIgcz1lKFwiLi9tYXBcIik7ZnVuY3Rpb24gbihuKXtpZihuPT09dm9pZCAwKXtuPWkuYXN5bmN9cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBhLmRlZmVyKGZ1bmN0aW9uKCl7cmV0dXJuIGUucGlwZShvLnNjYW4oZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmN1cnJlbnQ7cmV0dXJue3ZhbHVlOnQsY3VycmVudDpuLm5vdygpLGxhc3Q6cn19LHtjdXJyZW50Om4ubm93KCksdmFsdWU6dW5kZWZpbmVkLGxhc3Q6dW5kZWZpbmVkfSkscy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jdXJyZW50LHI9ZS5sYXN0LG49ZS52YWx1ZTtyZXR1cm4gbmV3IHUobix0LXIpfSkpfSl9fXIudGltZUludGVydmFsPW47dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy52YWx1ZT1lO3RoaXMuaW50ZXJ2YWw9dH1yZXR1cm4gZX0oKTtyLlRpbWVJbnRlcnZhbD11fSx7XCIuLi9vYnNlcnZhYmxlL2RlZmVyXCI6NjQsXCIuLi9zY2hlZHVsZXIvYXN5bmNcIjoyMDYsXCIuL21hcFwiOjEyNSxcIi4vc2NhblwiOjE1NH1dLDE3NzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL3NjaGVkdWxlci9hc3luY1wiKTt2YXIgaT1lKFwiLi4vdXRpbC9UaW1lb3V0RXJyb3JcIik7dmFyIG89ZShcIi4vdGltZW91dFdpdGhcIik7dmFyIGE9ZShcIi4uL29ic2VydmFibGUvdGhyb3dFcnJvclwiKTtmdW5jdGlvbiBzKGUsdCl7aWYodD09PXZvaWQgMCl7dD1uLmFzeW5jfXJldHVybiBvLnRpbWVvdXRXaXRoKGUsYS50aHJvd0Vycm9yKG5ldyBpLlRpbWVvdXRFcnJvciksdCl9ci50aW1lb3V0PXN9LHtcIi4uL29ic2VydmFibGUvdGhyb3dFcnJvclwiOjgyLFwiLi4vc2NoZWR1bGVyL2FzeW5jXCI6MjA2LFwiLi4vdXRpbC9UaW1lb3V0RXJyb3JcIjoyMTUsXCIuL3RpbWVvdXRXaXRoXCI6MTc4fV0sMTc4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGE9ZShcIi4uL3NjaGVkdWxlci9hc3luY1wiKTt2YXIgcz1lKFwiLi4vdXRpbC9pc0RhdGVcIik7dmFyIGk9ZShcIi4uL091dGVyU3Vic2NyaWJlclwiKTt2YXIgbz1lKFwiLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtmdW5jdGlvbiB1KG4saSxvKXtpZihvPT09dm9pZCAwKXtvPWEuYXN5bmN9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXMuaXNEYXRlKG4pO3ZhciByPXQ/K24tby5ub3coKTpNYXRoLmFicyhuKTtyZXR1cm4gZS5saWZ0KG5ldyBjKHIsdCxpLG8pKX19ci50aW1lb3V0V2l0aD11O3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuKXt0aGlzLndhaXRGb3I9ZTt0aGlzLmFic29sdXRlVGltZW91dD10O3RoaXMud2l0aE9ic2VydmFibGU9cjt0aGlzLnNjaGVkdWxlcj1ufWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGwoZSx0aGlzLmFic29sdXRlVGltZW91dCx0aGlzLndhaXRGb3IsdGhpcy53aXRoT2JzZXJ2YWJsZSx0aGlzLnNjaGVkdWxlcikpfTtyZXR1cm4gZX0oKTt2YXIgbD1mdW5jdGlvbihhKXtuKHQsYSk7ZnVuY3Rpb24gdChlLHQscixuLGkpe3ZhciBvPWEuY2FsbCh0aGlzLGUpfHx0aGlzO28uYWJzb2x1dGVUaW1lb3V0PXQ7by53YWl0Rm9yPXI7by53aXRoT2JzZXJ2YWJsZT1uO28uc2NoZWR1bGVyPWk7by5hY3Rpb249bnVsbDtvLnNjaGVkdWxlVGltZW91dCgpO3JldHVybiBvfXQuZGlzcGF0Y2hUaW1lb3V0PWZ1bmN0aW9uKGUpe3ZhciB0PWUud2l0aE9ic2VydmFibGU7ZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlKCk7ZS5hZGQoby5zdWJzY3JpYmVUb1Jlc3VsdChlLHQpKX07dC5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hY3Rpb247aWYoZSl7dGhpcy5hY3Rpb249ZS5zY2hlZHVsZSh0aGlzLHRoaXMud2FpdEZvcil9ZWxzZXt0aGlzLmFkZCh0aGlzLmFjdGlvbj10aGlzLnNjaGVkdWxlci5zY2hlZHVsZSh0LmRpc3BhdGNoVGltZW91dCx0aGlzLndhaXRGb3IsdGhpcykpfX07dC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KXt0aGlzLnNjaGVkdWxlVGltZW91dCgpfWEucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcyxlKX07dC5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5hY3Rpb249bnVsbDt0aGlzLnNjaGVkdWxlcj1udWxsO3RoaXMud2l0aE9ic2VydmFibGU9bnVsbH07cmV0dXJuIHR9KGkuT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9zY2hlZHVsZXIvYXN5bmNcIjoyMDYsXCIuLi91dGlsL2lzRGF0ZVwiOjIyMixcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxNzk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9zY2hlZHVsZXIvYXN5bmNcIik7dmFyIGk9ZShcIi4vbWFwXCIpO2Z1bmN0aW9uIG8odCl7aWYodD09PXZvaWQgMCl7dD1uLmFzeW5jfXJldHVybiBpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGEoZSx0Lm5vdygpKX0pfXIudGltZXN0YW1wPW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy52YWx1ZT1lO3RoaXMudGltZXN0YW1wPXR9cmV0dXJuIGV9KCk7ci5UaW1lc3RhbXA9YX0se1wiLi4vc2NoZWR1bGVyL2FzeW5jXCI6MjA2LFwiLi9tYXBcIjoxMjV9XSwxODA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL3JlZHVjZVwiKTtmdW5jdGlvbiBpKGUsdCxyKXtpZihyPT09MCl7cmV0dXJuW3RdfWUucHVzaCh0KTtyZXR1cm4gZX1mdW5jdGlvbiBvKCl7cmV0dXJuIG4ucmVkdWNlKGksW10pfXIudG9BcnJheT1vfSx7XCIuL3JlZHVjZVwiOjE0Nn1dLDE4MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuLi9TdWJqZWN0XCIpO3ZhciBvPWUoXCIuLi9PdXRlclN1YnNjcmliZXJcIik7dmFyIGE9ZShcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZnVuY3Rpb24gcyhyKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyB1KHIpKX19ci53aW5kb3c9czt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy53aW5kb3dCb3VuZGFyaWVzPWV9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBjKGUpO3ZhciBuPXQuc3Vic2NyaWJlKHIpO2lmKCFuLmNsb3NlZCl7ci5hZGQoYS5zdWJzY3JpYmVUb1Jlc3VsdChyLHRoaXMud2luZG93Qm91bmRhcmllcykpfXJldHVybiBufTtyZXR1cm4gZX0oKTt2YXIgYz1mdW5jdGlvbihyKXtuKGUscik7ZnVuY3Rpb24gZShlKXt2YXIgdD1yLmNhbGwodGhpcyxlKXx8dGhpczt0LndpbmRvdz1uZXcgaS5TdWJqZWN0O2UubmV4dCh0LndpbmRvdyk7cmV0dXJuIHR9ZS5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixuLGkpe3RoaXMub3BlbldpbmRvdygpfTtlLnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlLHQpe3RoaXMuX2Vycm9yKGUpfTtlLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt0aGlzLl9jb21wbGV0ZSgpfTtlLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLndpbmRvdy5uZXh0KGUpfTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy53aW5kb3cuZXJyb3IoZSk7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuY29tcGxldGUoKTt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9O2UucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMud2luZG93PW51bGx9O2UucHJvdG90eXBlLm9wZW5XaW5kb3c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndpbmRvdztpZihlKXtlLmNvbXBsZXRlKCl9dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt2YXIgcj10aGlzLndpbmRvdz1uZXcgaS5TdWJqZWN0O3QubmV4dChyKX07cmV0dXJuIGV9KG8uT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9TdWJqZWN0XCI6NTMsXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCI6MjM5fV0sMTgyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL1N1YnNjcmliZXJcIik7dmFyIGM9ZShcIi4uL1N1YmplY3RcIik7ZnVuY3Rpb24gbyhyLG4pe2lmKG49PT12b2lkIDApe249MH1yZXR1cm4gZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5saWZ0KG5ldyBhKHIsbikpfX1yLndpbmRvd0NvdW50PW87dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy53aW5kb3dTaXplPWU7dGhpcy5zdGFydFdpbmRvd0V2ZXJ5PXR9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlLHRoaXMud2luZG93U2l6ZSx0aGlzLnN0YXJ0V2luZG93RXZlcnkpKX07cmV0dXJuIGV9KCk7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUpfHx0aGlzO24uZGVzdGluYXRpb249ZTtuLndpbmRvd1NpemU9dDtuLnN0YXJ0V2luZG93RXZlcnk9cjtuLndpbmRvd3M9W25ldyBjLlN1YmplY3RdO24uY291bnQ9MDtlLm5leHQobi53aW5kb3dzWzBdKTtyZXR1cm4gbn1lLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0YXJ0V2luZG93RXZlcnk+MD90aGlzLnN0YXJ0V2luZG93RXZlcnk6dGhpcy53aW5kb3dTaXplO3ZhciByPXRoaXMuZGVzdGluYXRpb247dmFyIG49dGhpcy53aW5kb3dTaXplO3ZhciBpPXRoaXMud2luZG93czt2YXIgbz1pLmxlbmd0aDtmb3IodmFyIGE9MDthPG8mJiF0aGlzLmNsb3NlZDthKyspe2lbYV0ubmV4dChlKX12YXIgcz10aGlzLmNvdW50LW4rMTtpZihzPj0wJiZzJXQ9PT0wJiYhdGhpcy5jbG9zZWQpe2kuc2hpZnQoKS5jb21wbGV0ZSgpfWlmKCsrdGhpcy5jb3VudCV0PT09MCYmIXRoaXMuY2xvc2VkKXt2YXIgdT1uZXcgYy5TdWJqZWN0O2kucHVzaCh1KTtyLm5leHQodSl9fTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53aW5kb3dzO2lmKHQpe3doaWxlKHQubGVuZ3RoPjAmJiF0aGlzLmNsb3NlZCl7dC5zaGlmdCgpLmVycm9yKGUpfX10aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndpbmRvd3M7aWYoZSl7d2hpbGUoZS5sZW5ndGg+MCYmIXRoaXMuY2xvc2VkKXtlLnNoaWZ0KCkuY29tcGxldGUoKX19dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfTtlLnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt0aGlzLmNvdW50PTA7dGhpcy53aW5kb3dzPW51bGx9O3JldHVybiBlfShpLlN1YnNjcmliZXIpfSx7XCIuLi9TdWJqZWN0XCI6NTMsXCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwxODM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3ViamVjdFwiKTt2YXIgYT1lKFwiLi4vc2NoZWR1bGVyL2FzeW5jXCIpO3ZhciBvPWUoXCIuLi9TdWJzY3JpYmVyXCIpO3ZhciBzPWUoXCIuLi91dGlsL2lzTnVtZXJpY1wiKTt2YXIgdT1lKFwiLi4vdXRpbC9pc1NjaGVkdWxlclwiKTtmdW5jdGlvbiBjKHIpe3ZhciBuPWEuYXN5bmM7dmFyIGk9bnVsbDt2YXIgbz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7aWYodS5pc1NjaGVkdWxlcihhcmd1bWVudHNbM10pKXtuPWFyZ3VtZW50c1szXX1pZih1LmlzU2NoZWR1bGVyKGFyZ3VtZW50c1syXSkpe249YXJndW1lbnRzWzJdfWVsc2UgaWYocy5pc051bWVyaWMoYXJndW1lbnRzWzJdKSl7bz1hcmd1bWVudHNbMl19aWYodS5pc1NjaGVkdWxlcihhcmd1bWVudHNbMV0pKXtuPWFyZ3VtZW50c1sxXX1lbHNlIGlmKHMuaXNOdW1lcmljKGFyZ3VtZW50c1sxXSkpe2k9YXJndW1lbnRzWzFdfXJldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiB0LmxpZnQobmV3IGwocixpLG8sbikpfX1yLndpbmRvd1RpbWU9Yzt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbil7dGhpcy53aW5kb3dUaW1lU3Bhbj1lO3RoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbD10O3RoaXMubWF4V2luZG93U2l6ZT1yO3RoaXMuc2NoZWR1bGVyPW59ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcChlLHRoaXMud2luZG93VGltZVNwYW4sdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsLHRoaXMubWF4V2luZG93U2l6ZSx0aGlzLnNjaGVkdWxlcikpfTtyZXR1cm4gZX0oKTt2YXIgaD1mdW5jdGlvbih0KXtuKGUsdCk7ZnVuY3Rpb24gZSgpe3ZhciBlPXQhPT1udWxsJiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztlLl9udW1iZXJPZk5leHRlZFZhbHVlcz0wO3JldHVybiBlfWUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oZSl7dGhpcy5fbnVtYmVyT2ZOZXh0ZWRWYWx1ZXMrKzt0LnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcyxlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibnVtYmVyT2ZOZXh0ZWRWYWx1ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bWJlck9mTmV4dGVkVmFsdWVzfSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9KTtyZXR1cm4gZX0oaS5TdWJqZWN0KTt2YXIgcD1mdW5jdGlvbihsKXtuKGUsbCk7ZnVuY3Rpb24gZShlLHQscixuLGkpe3ZhciBvPWwuY2FsbCh0aGlzLGUpfHx0aGlzO28uZGVzdGluYXRpb249ZTtvLndpbmRvd1RpbWVTcGFuPXQ7by53aW5kb3dDcmVhdGlvbkludGVydmFsPXI7by5tYXhXaW5kb3dTaXplPW47by5zY2hlZHVsZXI9aTtvLndpbmRvd3M9W107dmFyIGE9by5vcGVuV2luZG93KCk7aWYociE9PW51bGwmJnI+PTApe3ZhciBzPXtzdWJzY3JpYmVyOm8sd2luZG93OmEsY29udGV4dDpudWxsfTt2YXIgdT17d2luZG93VGltZVNwYW46dCx3aW5kb3dDcmVhdGlvbkludGVydmFsOnIsc3Vic2NyaWJlcjpvLHNjaGVkdWxlcjppfTtvLmFkZChpLnNjaGVkdWxlKHYsdCxzKSk7by5hZGQoaS5zY2hlZHVsZShkLHIsdSkpfWVsc2V7dmFyIGM9e3N1YnNjcmliZXI6byx3aW5kb3c6YSx3aW5kb3dUaW1lU3Bhbjp0fTtvLmFkZChpLnNjaGVkdWxlKGYsdCxjKSl9cmV0dXJuIG99ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53aW5kb3dzO3ZhciByPXQubGVuZ3RoO2Zvcih2YXIgbj0wO248cjtuKyspe3ZhciBpPXRbbl07aWYoIWkuY2xvc2VkKXtpLm5leHQoZSk7aWYoaS5udW1iZXJPZk5leHRlZFZhbHVlcz49dGhpcy5tYXhXaW5kb3dTaXplKXt0aGlzLmNsb3NlV2luZG93KGkpfX19fTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53aW5kb3dzO3doaWxlKHQubGVuZ3RoPjApe3Quc2hpZnQoKS5lcnJvcihlKX10aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfTtlLnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndpbmRvd3M7d2hpbGUoZS5sZW5ndGg+MCl7dmFyIHQ9ZS5zaGlmdCgpO2lmKCF0LmNsb3NlZCl7dC5jb21wbGV0ZSgpfX10aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9O2UucHJvdG90eXBlLm9wZW5XaW5kb3c9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgaDt0aGlzLndpbmRvd3MucHVzaChlKTt2YXIgdD10aGlzLmRlc3RpbmF0aW9uO3QubmV4dChlKTtyZXR1cm4gZX07ZS5wcm90b3R5cGUuY2xvc2VXaW5kb3c9ZnVuY3Rpb24oZSl7ZS5jb21wbGV0ZSgpO3ZhciB0PXRoaXMud2luZG93czt0LnNwbGljZSh0LmluZGV4T2YoZSksMSl9O3JldHVybiBlfShvLlN1YnNjcmliZXIpO2Z1bmN0aW9uIGYoZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS53aW5kb3dUaW1lU3BhbixuPWUud2luZG93O2lmKG4pe3QuY2xvc2VXaW5kb3cobil9ZS53aW5kb3c9dC5vcGVuV2luZG93KCk7dGhpcy5zY2hlZHVsZShlLHIpfWZ1bmN0aW9uIGQoZSl7dmFyIHQ9ZS53aW5kb3dUaW1lU3BhbixyPWUuc3Vic2NyaWJlcixuPWUuc2NoZWR1bGVyLGk9ZS53aW5kb3dDcmVhdGlvbkludGVydmFsO3ZhciBvPXIub3BlbldpbmRvdygpO3ZhciBhPXRoaXM7dmFyIHM9e2FjdGlvbjphLHN1YnNjcmlwdGlvbjpudWxsfTt2YXIgdT17c3Vic2NyaWJlcjpyLHdpbmRvdzpvLGNvbnRleHQ6c307cy5zdWJzY3JpcHRpb249bi5zY2hlZHVsZSh2LHQsdSk7YS5hZGQocy5zdWJzY3JpcHRpb24pO2Euc2NoZWR1bGUoZSxpKX1mdW5jdGlvbiB2KGUpe3ZhciB0PWUuc3Vic2NyaWJlcixyPWUud2luZG93LG49ZS5jb250ZXh0O2lmKG4mJm4uYWN0aW9uJiZuLnN1YnNjcmlwdGlvbil7bi5hY3Rpb24ucmVtb3ZlKG4uc3Vic2NyaXB0aW9uKX10LmNsb3NlV2luZG93KHIpfX0se1wiLi4vU3ViamVjdFwiOjUzLFwiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vc2NoZWR1bGVyL2FzeW5jXCI6MjA2LFwiLi4vdXRpbC9pc051bWVyaWNcIjoyMjYsXCIuLi91dGlsL2lzU2NoZWR1bGVyXCI6MjMwfV0sMTg0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGg9ZShcIi4uL1N1YmplY3RcIik7dmFyIHA9ZShcIi4uL1N1YnNjcmlwdGlvblwiKTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBmPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIG8odCxyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlmdChuZXcgYSh0LHIpKX19ci53aW5kb3dUb2dnbGU9bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm9wZW5pbmdzPWU7dGhpcy5jbG9zaW5nU2VsZWN0b3I9dH1lLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuc3Vic2NyaWJlKG5ldyBzKGUsdGhpcy5vcGVuaW5ncyx0aGlzLmNsb3NpbmdTZWxlY3RvcikpfTtyZXR1cm4gZX0oKTt2YXIgcz1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49by5jYWxsKHRoaXMsZSl8fHRoaXM7bi5vcGVuaW5ncz10O24uY2xvc2luZ1NlbGVjdG9yPXI7bi5jb250ZXh0cz1bXTtuLmFkZChuLm9wZW5TdWJzY3JpcHRpb249Zi5zdWJzY3JpYmVUb1Jlc3VsdChuLHQsdCkpO3JldHVybiBufWUucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGV4dHM7aWYodCl7dmFyIHI9dC5sZW5ndGg7Zm9yKHZhciBuPTA7bjxyO24rKyl7dFtuXS53aW5kb3cubmV4dChlKX19fTtlLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250ZXh0czt0aGlzLmNvbnRleHRzPW51bGw7aWYodCl7dmFyIHI9dC5sZW5ndGg7dmFyIG49LTE7d2hpbGUoKytuPHIpe3ZhciBpPXRbbl07aS53aW5kb3cuZXJyb3IoZSk7aS5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX19by5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcyxlKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0czt0aGlzLmNvbnRleHRzPW51bGw7aWYoZSl7dmFyIHQ9ZS5sZW5ndGg7dmFyIHI9LTE7d2hpbGUoKytyPHQpe3ZhciBuPWVbcl07bi53aW5kb3cuY29tcGxldGUoKTtuLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfX1vLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX07ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0czt0aGlzLmNvbnRleHRzPW51bGw7aWYoZSl7dmFyIHQ9ZS5sZW5ndGg7dmFyIHI9LTE7d2hpbGUoKytyPHQpe3ZhciBuPWVbcl07bi53aW5kb3cudW5zdWJzY3JpYmUoKTtuLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfX19O2UucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXtpZihlPT09dGhpcy5vcGVuaW5ncyl7dmFyIG89dm9pZCAwO3RyeXt2YXIgYT10aGlzLmNsb3NpbmdTZWxlY3RvcjtvPWEodCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuZXJyb3IoZSl9dmFyIHM9bmV3IGguU3ViamVjdDt2YXIgdT1uZXcgcC5TdWJzY3JpcHRpb247dmFyIGM9e3dpbmRvdzpzLHN1YnNjcmlwdGlvbjp1fTt0aGlzLmNvbnRleHRzLnB1c2goYyk7dmFyIGw9Zi5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLG8sYyk7aWYobC5jbG9zZWQpe3RoaXMuY2xvc2VXaW5kb3codGhpcy5jb250ZXh0cy5sZW5ndGgtMSl9ZWxzZXtsLmNvbnRleHQ9Yzt1LmFkZChsKX10aGlzLmRlc3RpbmF0aW9uLm5leHQocyl9ZWxzZXt0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMuaW5kZXhPZihlKSl9fTtlLnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlKXt0aGlzLmVycm9yKGUpfTtlLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXtpZihlIT09dGhpcy5vcGVuU3Vic2NyaXB0aW9uKXt0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMuaW5kZXhPZihlLmNvbnRleHQpKX19O2UucHJvdG90eXBlLmNsb3NlV2luZG93PWZ1bmN0aW9uKGUpe2lmKGU9PT0tMSl7cmV0dXJufXZhciB0PXRoaXMuY29udGV4dHM7dmFyIHI9dFtlXTt2YXIgbj1yLndpbmRvdyxpPXIuc3Vic2NyaXB0aW9uO3Quc3BsaWNlKGUsMSk7bi5jb21wbGV0ZSgpO2kudW5zdWJzY3JpYmUoKX07cmV0dXJuIGV9KGkuT3V0ZXJTdWJzY3JpYmVyKX0se1wiLi4vT3V0ZXJTdWJzY3JpYmVyXCI6NTAsXCIuLi9TdWJqZWN0XCI6NTMsXCIuLi9TdWJzY3JpcHRpb25cIjo1NixcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxODU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbz1lKFwiLi4vU3ViamVjdFwiKTt2YXIgbj1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciBhPWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIHMocil7cmV0dXJuIGZ1bmN0aW9uIGUodCl7cmV0dXJuIHQubGlmdChuZXcgdShyKSl9fXIud2luZG93V2hlbj1zO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNsb3NpbmdTZWxlY3Rvcj1lfWUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zdWJzY3JpYmUobmV3IGMoZSx0aGlzLmNsb3NpbmdTZWxlY3RvcikpfTtyZXR1cm4gZX0oKTt2YXIgYz1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUpfHx0aGlzO3IuZGVzdGluYXRpb249ZTtyLmNsb3NpbmdTZWxlY3Rvcj10O3Iub3BlbldpbmRvdygpO3JldHVybiByfWUucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt0aGlzLm9wZW5XaW5kb3coaSl9O2UucHJvdG90eXBlLm5vdGlmeUVycm9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZXJyb3IoZSl9O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3RoaXMub3BlbldpbmRvdyhlKX07ZS5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy53aW5kb3cubmV4dChlKX07ZS5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMud2luZG93LmVycm9yKGUpO3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSk7dGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKX07ZS5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuY29tcGxldGUoKTt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7dGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKX07ZS5wcm90b3R5cGUudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uKXt0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24udW5zdWJzY3JpYmUoKX19O2UucHJvdG90eXBlLm9wZW5XaW5kb3c9ZnVuY3Rpb24oZSl7aWYoZT09PXZvaWQgMCl7ZT1udWxsfWlmKGUpe3RoaXMucmVtb3ZlKGUpO2UudW5zdWJzY3JpYmUoKX12YXIgdD10aGlzLndpbmRvdztpZih0KXt0LmNvbXBsZXRlKCl9dmFyIHI9dGhpcy53aW5kb3c9bmV3IG8uU3ViamVjdDt0aGlzLmRlc3RpbmF0aW9uLm5leHQocik7dmFyIG47dHJ5e3ZhciBpPXRoaXMuY2xvc2luZ1NlbGVjdG9yO249aSgpfWNhdGNoKGUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSk7dGhpcy53aW5kb3cuZXJyb3IoZSk7cmV0dXJufXRoaXMuYWRkKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbj1hLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsbikpfTtyZXR1cm4gZX0obi5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL1N1YmplY3RcIjo1MyxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxODY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vT3V0ZXJTdWJzY3JpYmVyXCIpO3ZhciB1PWUoXCIuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Z1bmN0aW9uIG8oKXt2YXIgbj1bXTtmb3IodmFyIGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtuW2VdPWFyZ3VtZW50c1tlXX1yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ7aWYodHlwZW9mIG5bbi5sZW5ndGgtMV09PT1cImZ1bmN0aW9uXCIpe3Q9bi5wb3AoKX12YXIgcj1uO3JldHVybiBlLmxpZnQobmV3IGEocix0KSl9fXIud2l0aExhdGVzdEZyb209bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm9ic2VydmFibGVzPWU7dGhpcy5wcm9qZWN0PXR9ZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnN1YnNjcmliZShuZXcgcyhlLHRoaXMub2JzZXJ2YWJsZXMsdGhpcy5wcm9qZWN0KSl9O3JldHVybiBlfSgpO3ZhciBzPWZ1bmN0aW9uKHMpe24oZSxzKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1zLmNhbGwodGhpcyxlKXx8dGhpcztuLm9ic2VydmFibGVzPXQ7bi5wcm9qZWN0PXI7bi50b1Jlc3BvbmQ9W107dmFyIGk9dC5sZW5ndGg7bi52YWx1ZXM9bmV3IEFycmF5KGkpO2Zvcih2YXIgbz0wO288aTtvKyspe24udG9SZXNwb25kLnB1c2gobyl9Zm9yKHZhciBvPTA7bzxpO28rKyl7dmFyIGE9dFtvXTtuLmFkZCh1LnN1YnNjcmliZVRvUmVzdWx0KG4sYSxhLG8pKX1yZXR1cm4gbn1lLnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dGhpcy52YWx1ZXNbcl09dDt2YXIgbz10aGlzLnRvUmVzcG9uZDtpZihvLmxlbmd0aD4wKXt2YXIgYT1vLmluZGV4T2Yocik7aWYoYSE9PS0xKXtvLnNwbGljZShhLDEpfX19O2UucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKCl7fTtlLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXtpZih0aGlzLnRvUmVzcG9uZC5sZW5ndGg9PT0wKXt2YXIgdD1bZV0uY29uY2F0KHRoaXMudmFsdWVzKTtpZih0aGlzLnByb2plY3Qpe3RoaXMuX3RyeVByb2plY3QodCl9ZWxzZXt0aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9fX07ZS5wcm90b3R5cGUuX3RyeVByb2plY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9dGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsZSl9Y2F0Y2goZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKTtyZXR1cm59dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfTtyZXR1cm4gZX0oaS5PdXRlclN1YnNjcmliZXIpfSx7XCIuLi9PdXRlclN1YnNjcmliZXJcIjo1MCxcIi4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIjoyMzl9XSwxODc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9vYnNlcnZhYmxlL3ppcFwiKTtmdW5jdGlvbiBpKCl7dmFyIHI9W107Zm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7cltlXT1hcmd1bWVudHNbZV19cmV0dXJuIGZ1bmN0aW9uIGUodCl7cmV0dXJuIHQubGlmdC5jYWxsKG4uemlwLmFwcGx5KHZvaWQgMCxbdF0uY29uY2F0KHIpKSl9fXIuemlwPWl9LHtcIi4uL29ic2VydmFibGUvemlwXCI6ODV9XSwxODg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9vYnNlcnZhYmxlL3ppcFwiKTtmdW5jdGlvbiBpKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5saWZ0KG5ldyBuLlppcE9wZXJhdG9yKHQpKX19ci56aXBBbGw9aX0se1wiLi4vb2JzZXJ2YWJsZS96aXBcIjo4NX1dLDE4OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4uL09ic2VydmFibGVcIik7dmFyIGE9ZShcIi4uL1N1YnNjcmlwdGlvblwiKTtmdW5jdGlvbiBuKG4saSl7cmV0dXJuIG5ldyBvLk9ic2VydmFibGUoZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGEuU3Vic2NyaXB0aW9uO3ZhciByPTA7dC5hZGQoaS5zY2hlZHVsZShmdW5jdGlvbigpe2lmKHI9PT1uLmxlbmd0aCl7ZS5jb21wbGV0ZSgpO3JldHVybn1lLm5leHQobltyKytdKTtpZighZS5jbG9zZWQpe3QuYWRkKHRoaXMuc2NoZWR1bGUoKSl9fSkpO3JldHVybiB0fSl9ci5zY2hlZHVsZUFycmF5PW59LHtcIi4uL09ic2VydmFibGVcIjo0OCxcIi4uL1N1YnNjcmlwdGlvblwiOjU2fV0sMTkwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vT2JzZXJ2YWJsZVwiKTt2YXIgbz1lKFwiLi4vU3Vic2NyaXB0aW9uXCIpO3ZhciBhPWUoXCIuLi9zeW1ib2wvaXRlcmF0b3JcIik7ZnVuY3Rpb24gaSh0LHIpe2lmKCF0KXt0aHJvdyBuZXcgRXJyb3IoXCJJdGVyYWJsZSBjYW5ub3QgYmUgbnVsbFwiKX1yZXR1cm4gbmV3IG4uT2JzZXJ2YWJsZShmdW5jdGlvbihuKXt2YXIgZT1uZXcgby5TdWJzY3JpcHRpb247dmFyIGk7ZS5hZGQoZnVuY3Rpb24oKXtpZihpJiZ0eXBlb2YgaS5yZXR1cm49PT1cImZ1bmN0aW9uXCIpe2kucmV0dXJuKCl9fSk7ZS5hZGQoci5zY2hlZHVsZShmdW5jdGlvbigpe2k9dFthLml0ZXJhdG9yXSgpO2UuYWRkKHIuc2NoZWR1bGUoZnVuY3Rpb24oKXtpZihuLmNsb3NlZCl7cmV0dXJufXZhciBlO3ZhciB0O3RyeXt2YXIgcj1pLm5leHQoKTtlPXIudmFsdWU7dD1yLmRvbmV9Y2F0Y2goZSl7bi5lcnJvcihlKTtyZXR1cm59aWYodCl7bi5jb21wbGV0ZSgpfWVsc2V7bi5uZXh0KGUpO3RoaXMuc2NoZWR1bGUoKX19KSl9KSk7cmV0dXJuIGV9KX1yLnNjaGVkdWxlSXRlcmFibGU9aX0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vU3Vic2NyaXB0aW9uXCI6NTYsXCIuLi9zeW1ib2wvaXRlcmF0b3JcIjoyMDh9XSwxOTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuLi9PYnNlcnZhYmxlXCIpO3ZhciBhPWUoXCIuLi9TdWJzY3JpcHRpb25cIik7dmFyIHM9ZShcIi4uL3N5bWJvbC9vYnNlcnZhYmxlXCIpO2Z1bmN0aW9uIG4obixpKXtyZXR1cm4gbmV3IG8uT2JzZXJ2YWJsZShmdW5jdGlvbih0KXt2YXIgcj1uZXcgYS5TdWJzY3JpcHRpb247ci5hZGQoaS5zY2hlZHVsZShmdW5jdGlvbigpe3ZhciBlPW5bcy5vYnNlcnZhYmxlXSgpO3IuYWRkKGUuc3Vic2NyaWJlKHtuZXh0OmZ1bmN0aW9uKGUpe3IuYWRkKGkuc2NoZWR1bGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5uZXh0KGUpfSkpfSxlcnJvcjpmdW5jdGlvbihlKXtyLmFkZChpLnNjaGVkdWxlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZXJyb3IoZSl9KSl9LGNvbXBsZXRlOmZ1bmN0aW9uKCl7ci5hZGQoaS5zY2hlZHVsZShmdW5jdGlvbigpe3JldHVybiB0LmNvbXBsZXRlKCl9KSl9fSkpfSkpO3JldHVybiByfSl9ci5zY2hlZHVsZU9ic2VydmFibGU9bn0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vU3Vic2NyaXB0aW9uXCI6NTYsXCIuLi9zeW1ib2wvb2JzZXJ2YWJsZVwiOjIwOX1dLDE5MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4uL09ic2VydmFibGVcIik7dmFyIG89ZShcIi4uL1N1YnNjcmlwdGlvblwiKTtmdW5jdGlvbiBuKGUsbil7cmV0dXJuIG5ldyBpLk9ic2VydmFibGUoZnVuY3Rpb24odCl7dmFyIHI9bmV3IG8uU3Vic2NyaXB0aW9uO3IuYWRkKG4uc2NoZWR1bGUoZnVuY3Rpb24oKXtyZXR1cm4gZS50aGVuKGZ1bmN0aW9uKGUpe3IuYWRkKG4uc2NoZWR1bGUoZnVuY3Rpb24oKXt0Lm5leHQoZSk7ci5hZGQobi5zY2hlZHVsZShmdW5jdGlvbigpe3JldHVybiB0LmNvbXBsZXRlKCl9KSl9KSl9LGZ1bmN0aW9uKGUpe3IuYWRkKG4uc2NoZWR1bGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5lcnJvcihlKX0pKX0pfSkpO3JldHVybiByfSl9ci5zY2hlZHVsZVByb21pc2U9bn0se1wiLi4vT2JzZXJ2YWJsZVwiOjQ4LFwiLi4vU3Vic2NyaXB0aW9uXCI6NTZ9XSwxOTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL3NjaGVkdWxlT2JzZXJ2YWJsZVwiKTt2YXIgaT1lKFwiLi9zY2hlZHVsZVByb21pc2VcIik7dmFyIG89ZShcIi4vc2NoZWR1bGVBcnJheVwiKTt2YXIgYT1lKFwiLi9zY2hlZHVsZUl0ZXJhYmxlXCIpO3ZhciBzPWUoXCIuLi91dGlsL2lzSW50ZXJvcE9ic2VydmFibGVcIik7dmFyIHU9ZShcIi4uL3V0aWwvaXNQcm9taXNlXCIpO3ZhciBjPWUoXCIuLi91dGlsL2lzQXJyYXlMaWtlXCIpO3ZhciBsPWUoXCIuLi91dGlsL2lzSXRlcmFibGVcIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUhPW51bGwpe2lmKHMuaXNJbnRlcm9wT2JzZXJ2YWJsZShlKSl7cmV0dXJuIG4uc2NoZWR1bGVPYnNlcnZhYmxlKGUsdCl9ZWxzZSBpZih1LmlzUHJvbWlzZShlKSl7cmV0dXJuIGkuc2NoZWR1bGVQcm9taXNlKGUsdCl9ZWxzZSBpZihjLmlzQXJyYXlMaWtlKGUpKXtyZXR1cm4gby5zY2hlZHVsZUFycmF5KGUsdCl9ZWxzZSBpZihsLmlzSXRlcmFibGUoZSl8fHR5cGVvZiBlPT09XCJzdHJpbmdcIil7cmV0dXJuIGEuc2NoZWR1bGVJdGVyYWJsZShlLHQpfX10aHJvdyBuZXcgVHlwZUVycm9yKChlIT09bnVsbCYmdHlwZW9mIGV8fGUpK1wiIGlzIG5vdCBvYnNlcnZhYmxlXCIpfXIuc2NoZWR1bGVkPWh9LHtcIi4uL3V0aWwvaXNBcnJheUxpa2VcIjoyMjEsXCIuLi91dGlsL2lzSW50ZXJvcE9ic2VydmFibGVcIjoyMjQsXCIuLi91dGlsL2lzSXRlcmFibGVcIjoyMjUsXCIuLi91dGlsL2lzUHJvbWlzZVwiOjIyOSxcIi4vc2NoZWR1bGVBcnJheVwiOjE4OSxcIi4vc2NoZWR1bGVJdGVyYWJsZVwiOjE5MCxcIi4vc2NoZWR1bGVPYnNlcnZhYmxlXCI6MTkxLFwiLi9zY2hlZHVsZVByb21pc2VcIjoxOTJ9XSwxOTQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vU3Vic2NyaXB0aW9uXCIpO3ZhciBvPWZ1bmN0aW9uKHIpe24oZSxyKTtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIHIuY2FsbCh0aGlzKXx8dGhpc31lLnByb3RvdHlwZS5zY2hlZHVsZT1mdW5jdGlvbihlLHQpe2lmKHQ9PT12b2lkIDApe3Q9MH1yZXR1cm4gdGhpc307cmV0dXJuIGV9KGkuU3Vic2NyaXB0aW9uKTtyLkFjdGlvbj1vfSx7XCIuLi9TdWJzY3JpcHRpb25cIjo1Nn1dLDE5NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL0FzeW5jQWN0aW9uXCIpO3ZhciBvPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSx0KXx8dGhpcztyLnNjaGVkdWxlcj1lO3Iud29yaz10O3JldHVybiByfWUucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkPWZ1bmN0aW9uKGUsdCxyKXtpZihyPT09dm9pZCAwKXtyPTB9aWYociE9PW51bGwmJnI+MCl7cmV0dXJuIG4ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkLmNhbGwodGhpcyxlLHQscil9ZS5hY3Rpb25zLnB1c2godGhpcyk7cmV0dXJuIGUuc2NoZWR1bGVkfHwoZS5zY2hlZHVsZWQ9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZmx1c2gobnVsbCl9KSl9O2UucHJvdG90eXBlLnJlY3ljbGVBc3luY0lkPWZ1bmN0aW9uKGUsdCxyKXtpZihyPT09dm9pZCAwKXtyPTB9aWYociE9PW51bGwmJnI+MHx8cj09PW51bGwmJnRoaXMuZGVsYXk+MCl7cmV0dXJuIG4ucHJvdG90eXBlLnJlY3ljbGVBc3luY0lkLmNhbGwodGhpcyxlLHQscil9aWYoZS5hY3Rpb25zLmxlbmd0aD09PTApe2NhbmNlbEFuaW1hdGlvbkZyYW1lKHQpO2Uuc2NoZWR1bGVkPXVuZGVmaW5lZH1yZXR1cm4gdW5kZWZpbmVkfTtyZXR1cm4gZX0obi5Bc3luY0FjdGlvbik7ci5BbmltYXRpb25GcmFtZUFjdGlvbj1vfSx7XCIuL0FzeW5jQWN0aW9uXCI6MTk5fV0sMTk2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4vQXN5bmNTY2hlZHVsZXJcIik7dmFyIG89ZnVuY3Rpb24oZSl7bih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gZSE9PW51bGwmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZlPXRydWU7dGhpcy5zY2hlZHVsZWQ9dW5kZWZpbmVkO3ZhciB0PXRoaXMuYWN0aW9uczt2YXIgcjt2YXIgbj0tMTt2YXIgaT10Lmxlbmd0aDtlPWV8fHQuc2hpZnQoKTtkb3tpZihyPWUuZXhlY3V0ZShlLnN0YXRlLGUuZGVsYXkpKXticmVha319d2hpbGUoKytuPGkmJihlPXQuc2hpZnQoKSkpO3RoaXMuYWN0aXZlPWZhbHNlO2lmKHIpe3doaWxlKCsrbjxpJiYoZT10LnNoaWZ0KCkpKXtlLnVuc3Vic2NyaWJlKCl9dGhyb3cgcn19O3JldHVybiB0fShpLkFzeW5jU2NoZWR1bGVyKTtyLkFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyPW99LHtcIi4vQXN5bmNTY2hlZHVsZXJcIjoyMDB9XSwxOTc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbz1lKFwiLi4vdXRpbC9JbW1lZGlhdGVcIik7dmFyIG49ZShcIi4vQXN5bmNBY3Rpb25cIik7dmFyIGE9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlLHQpfHx0aGlzO3Iuc2NoZWR1bGVyPWU7ci53b3JrPXQ7cmV0dXJuIHJ9ZS5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHI9PT12b2lkIDApe3I9MH1pZihyIT09bnVsbCYmcj4wKXtyZXR1cm4gbi5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQuY2FsbCh0aGlzLGUsdCxyKX1lLmFjdGlvbnMucHVzaCh0aGlzKTtyZXR1cm4gZS5zY2hlZHVsZWR8fChlLnNjaGVkdWxlZD1vLkltbWVkaWF0ZS5zZXRJbW1lZGlhdGUoZS5mbHVzaC5iaW5kKGUsbnVsbCkpKX07ZS5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHI9PT12b2lkIDApe3I9MH1pZihyIT09bnVsbCYmcj4wfHxyPT09bnVsbCYmdGhpcy5kZWxheT4wKXtyZXR1cm4gbi5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQuY2FsbCh0aGlzLGUsdCxyKX1pZihlLmFjdGlvbnMubGVuZ3RoPT09MCl7by5JbW1lZGlhdGUuY2xlYXJJbW1lZGlhdGUodCk7ZS5zY2hlZHVsZWQ9dW5kZWZpbmVkfXJldHVybiB1bmRlZmluZWR9O3JldHVybiBlfShuLkFzeW5jQWN0aW9uKTtyLkFzYXBBY3Rpb249YX0se1wiLi4vdXRpbC9JbW1lZGlhdGVcIjoyMTMsXCIuL0FzeW5jQWN0aW9uXCI6MTk5fV0sMTk4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGk9ZShcIi4vQXN5bmNTY2hlZHVsZXJcIik7dmFyIG89ZnVuY3Rpb24oZSl7bih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gZSE9PW51bGwmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZlPXRydWU7dGhpcy5zY2hlZHVsZWQ9dW5kZWZpbmVkO3ZhciB0PXRoaXMuYWN0aW9uczt2YXIgcjt2YXIgbj0tMTt2YXIgaT10Lmxlbmd0aDtlPWV8fHQuc2hpZnQoKTtkb3tpZihyPWUuZXhlY3V0ZShlLnN0YXRlLGUuZGVsYXkpKXticmVha319d2hpbGUoKytuPGkmJihlPXQuc2hpZnQoKSkpO3RoaXMuYWN0aXZlPWZhbHNlO2lmKHIpe3doaWxlKCsrbjxpJiYoZT10LnNoaWZ0KCkpKXtlLnVuc3Vic2NyaWJlKCl9dGhyb3cgcn19O3JldHVybiB0fShpLkFzeW5jU2NoZWR1bGVyKTtyLkFzYXBTY2hlZHVsZXI9b30se1wiLi9Bc3luY1NjaGVkdWxlclwiOjIwMH1dLDE5OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL0FjdGlvblwiKTt2YXIgbz1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUsdCl8fHRoaXM7ci5zY2hlZHVsZXI9ZTtyLndvcms9dDtyLnBlbmRpbmc9ZmFsc2U7cmV0dXJuIHJ9ZS5wcm90b3R5cGUuc2NoZWR1bGU9ZnVuY3Rpb24oZSx0KXtpZih0PT09dm9pZCAwKXt0PTB9aWYodGhpcy5jbG9zZWQpe3JldHVybiB0aGlzfXRoaXMuc3RhdGU9ZTt2YXIgcj10aGlzLmlkO3ZhciBuPXRoaXMuc2NoZWR1bGVyO2lmKHIhPW51bGwpe3RoaXMuaWQ9dGhpcy5yZWN5Y2xlQXN5bmNJZChuLHIsdCl9dGhpcy5wZW5kaW5nPXRydWU7dGhpcy5kZWxheT10O3RoaXMuaWQ9dGhpcy5pZHx8dGhpcy5yZXF1ZXN0QXN5bmNJZChuLHRoaXMuaWQsdCk7cmV0dXJuIHRoaXN9O2UucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkPWZ1bmN0aW9uKGUsdCxyKXtpZihyPT09dm9pZCAwKXtyPTB9cmV0dXJuIHNldEludGVydmFsKGUuZmx1c2guYmluZChlLHRoaXMpLHIpfTtlLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZD1mdW5jdGlvbihlLHQscil7aWYocj09PXZvaWQgMCl7cj0wfWlmKHIhPT1udWxsJiZ0aGlzLmRlbGF5PT09ciYmdGhpcy5wZW5kaW5nPT09ZmFsc2Upe3JldHVybiB0fWNsZWFySW50ZXJ2YWwodCk7cmV0dXJuIHVuZGVmaW5lZH07ZS5wcm90b3R5cGUuZXhlY3V0ZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuY2xvc2VkKXtyZXR1cm4gbmV3IEVycm9yKFwiZXhlY3V0aW5nIGEgY2FuY2VsbGVkIGFjdGlvblwiKX10aGlzLnBlbmRpbmc9ZmFsc2U7dmFyIHI9dGhpcy5fZXhlY3V0ZShlLHQpO2lmKHIpe3JldHVybiByfWVsc2UgaWYodGhpcy5wZW5kaW5nPT09ZmFsc2UmJnRoaXMuaWQhPW51bGwpe3RoaXMuaWQ9dGhpcy5yZWN5Y2xlQXN5bmNJZCh0aGlzLnNjaGVkdWxlcix0aGlzLmlkLG51bGwpfX07ZS5wcm90b3R5cGUuX2V4ZWN1dGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1mYWxzZTt2YXIgbj11bmRlZmluZWQ7dHJ5e3RoaXMud29yayhlKX1jYXRjaChlKXtyPXRydWU7bj0hIWUmJmV8fG5ldyBFcnJvcihlKX1pZihyKXt0aGlzLnVuc3Vic2NyaWJlKCk7cmV0dXJuIG59fTtlLnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlkO3ZhciB0PXRoaXMuc2NoZWR1bGVyO3ZhciByPXQuYWN0aW9uczt2YXIgbj1yLmluZGV4T2YodGhpcyk7dGhpcy53b3JrPW51bGw7dGhpcy5zdGF0ZT1udWxsO3RoaXMucGVuZGluZz1mYWxzZTt0aGlzLnNjaGVkdWxlcj1udWxsO2lmKG4hPT0tMSl7ci5zcGxpY2UobiwxKX1pZihlIT1udWxsKXt0aGlzLmlkPXRoaXMucmVjeWNsZUFzeW5jSWQodCxlLG51bGwpfXRoaXMuZGVsYXk9bnVsbH07cmV0dXJuIGV9KG4uQWN0aW9uKTtyLkFzeW5jQWN0aW9uPW99LHtcIi4vQWN0aW9uXCI6MTk0fV0sMjAwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIGE9ZShcIi4uL1NjaGVkdWxlclwiKTt2YXIgbj1mdW5jdGlvbihuKXtvKGksbik7ZnVuY3Rpb24gaShlLHQpe2lmKHQ9PT12b2lkIDApe3Q9YS5TY2hlZHVsZXIubm93fXZhciByPW4uY2FsbCh0aGlzLGUsZnVuY3Rpb24oKXtpZihpLmRlbGVnYXRlJiZpLmRlbGVnYXRlIT09cil7cmV0dXJuIGkuZGVsZWdhdGUubm93KCl9ZWxzZXtyZXR1cm4gdCgpfX0pfHx0aGlzO3IuYWN0aW9ucz1bXTtyLmFjdGl2ZT1mYWxzZTtyLnNjaGVkdWxlZD11bmRlZmluZWQ7cmV0dXJuIHJ9aS5wcm90b3R5cGUuc2NoZWR1bGU9ZnVuY3Rpb24oZSx0LHIpe2lmKHQ9PT12b2lkIDApe3Q9MH1pZihpLmRlbGVnYXRlJiZpLmRlbGVnYXRlIT09dGhpcyl7cmV0dXJuIGkuZGVsZWdhdGUuc2NoZWR1bGUoZSx0LHIpfWVsc2V7cmV0dXJuIG4ucHJvdG90eXBlLnNjaGVkdWxlLmNhbGwodGhpcyxlLHQscil9fTtpLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmFjdGlvbnM7aWYodGhpcy5hY3RpdmUpe3QucHVzaChlKTtyZXR1cm59dmFyIHI7dGhpcy5hY3RpdmU9dHJ1ZTtkb3tpZihyPWUuZXhlY3V0ZShlLnN0YXRlLGUuZGVsYXkpKXticmVha319d2hpbGUoZT10LnNoaWZ0KCkpO3RoaXMuYWN0aXZlPWZhbHNlO2lmKHIpe3doaWxlKGU9dC5zaGlmdCgpKXtlLnVuc3Vic2NyaWJlKCl9dGhyb3cgcn19O3JldHVybiBpfShhLlNjaGVkdWxlcik7ci5Bc3luY1NjaGVkdWxlcj1ufSx7XCIuLi9TY2hlZHVsZXJcIjo1Mn1dLDIwMTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL0FzeW5jQWN0aW9uXCIpO3ZhciBvPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9bi5jYWxsKHRoaXMsZSx0KXx8dGhpcztyLnNjaGVkdWxlcj1lO3Iud29yaz10O3JldHVybiByfWUucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUsdCl7aWYodD09PXZvaWQgMCl7dD0wfWlmKHQ+MCl7cmV0dXJuIG4ucHJvdG90eXBlLnNjaGVkdWxlLmNhbGwodGhpcyxlLHQpfXRoaXMuZGVsYXk9dDt0aGlzLnN0YXRlPWU7dGhpcy5zY2hlZHVsZXIuZmx1c2godGhpcyk7cmV0dXJuIHRoaXN9O2UucHJvdG90eXBlLmV4ZWN1dGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD4wfHx0aGlzLmNsb3NlZD9uLnByb3RvdHlwZS5leGVjdXRlLmNhbGwodGhpcyxlLHQpOnRoaXMuX2V4ZWN1dGUoZSx0KX07ZS5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHI9PT12b2lkIDApe3I9MH1pZihyIT09bnVsbCYmcj4wfHxyPT09bnVsbCYmdGhpcy5kZWxheT4wKXtyZXR1cm4gbi5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQuY2FsbCh0aGlzLGUsdCxyKX1yZXR1cm4gZS5mbHVzaCh0aGlzKX07cmV0dXJuIGV9KG4uQXN5bmNBY3Rpb24pO3IuUXVldWVBY3Rpb249b30se1wiLi9Bc3luY0FjdGlvblwiOjE5OX1dLDIwMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBpPWUoXCIuL0FzeW5jU2NoZWR1bGVyXCIpO3ZhciBvPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdH0oaS5Bc3luY1NjaGVkdWxlcik7ci5RdWV1ZVNjaGVkdWxlcj1vfSx7XCIuL0FzeW5jU2NoZWR1bGVyXCI6MjAwfV0sMjAzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGE9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vQXN5bmNBY3Rpb25cIik7dmFyIGk9ZShcIi4vQXN5bmNTY2hlZHVsZXJcIik7dmFyIG89ZnVuY3Rpb24obil7YShlLG4pO2Z1bmN0aW9uIGUoZSx0KXtpZihlPT09dm9pZCAwKXtlPXN9aWYodD09PXZvaWQgMCl7dD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9dmFyIHI9bi5jYWxsKHRoaXMsZSxmdW5jdGlvbigpe3JldHVybiByLmZyYW1lfSl8fHRoaXM7ci5tYXhGcmFtZXM9dDtyLmZyYW1lPTA7ci5pbmRleD0tMTtyZXR1cm4gcn1lLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmFjdGlvbnMscj1lLm1heEZyYW1lczt2YXIgbixpO3doaWxlKChpPXRbMF0pJiZpLmRlbGF5PD1yKXt0LnNoaWZ0KCk7dGhpcy5mcmFtZT1pLmRlbGF5O2lmKG49aS5leGVjdXRlKGkuc3RhdGUsaS5kZWxheSkpe2JyZWFrfX1pZihuKXt3aGlsZShpPXQuc2hpZnQoKSl7aS51bnN1YnNjcmliZSgpfXRocm93IG59fTtlLmZyYW1lVGltZUZhY3Rvcj0xMDtyZXR1cm4gZX0oaS5Bc3luY1NjaGVkdWxlcik7ci5WaXJ0dWFsVGltZVNjaGVkdWxlcj1vO3ZhciBzPWZ1bmN0aW9uKGkpe2EobyxpKTtmdW5jdGlvbiBvKGUsdCxyKXtpZihyPT09dm9pZCAwKXtyPWUuaW5kZXgrPTF9dmFyIG49aS5jYWxsKHRoaXMsZSx0KXx8dGhpcztuLnNjaGVkdWxlcj1lO24ud29yaz10O24uaW5kZXg9cjtuLmFjdGl2ZT10cnVlO24uaW5kZXg9ZS5pbmRleD1yO3JldHVybiBufW8ucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUsdCl7aWYodD09PXZvaWQgMCl7dD0wfWlmKCF0aGlzLmlkKXtyZXR1cm4gaS5wcm90b3R5cGUuc2NoZWR1bGUuY2FsbCh0aGlzLGUsdCl9dGhpcy5hY3RpdmU9ZmFsc2U7dmFyIHI9bmV3IG8odGhpcy5zY2hlZHVsZXIsdGhpcy53b3JrKTt0aGlzLmFkZChyKTtyZXR1cm4gci5zY2hlZHVsZShlLHQpfTtvLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZD1mdW5jdGlvbihlLHQscil7aWYocj09PXZvaWQgMCl7cj0wfXRoaXMuZGVsYXk9ZS5mcmFtZStyO3ZhciBuPWUuYWN0aW9ucztuLnB1c2godGhpcyk7bi5zb3J0KG8uc29ydEFjdGlvbnMpO3JldHVybiB0cnVlfTtvLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZD1mdW5jdGlvbihlLHQscil7aWYocj09PXZvaWQgMCl7cj0wfXJldHVybiB1bmRlZmluZWR9O28ucHJvdG90eXBlLl9leGVjdXRlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5hY3RpdmU9PT10cnVlKXtyZXR1cm4gaS5wcm90b3R5cGUuX2V4ZWN1dGUuY2FsbCh0aGlzLGUsdCl9fTtvLnNvcnRBY3Rpb25zPWZ1bmN0aW9uKGUsdCl7aWYoZS5kZWxheT09PXQuZGVsYXkpe2lmKGUuaW5kZXg9PT10LmluZGV4KXtyZXR1cm4gMH1lbHNlIGlmKGUuaW5kZXg+dC5pbmRleCl7cmV0dXJuIDF9ZWxzZXtyZXR1cm4tMX19ZWxzZSBpZihlLmRlbGF5PnQuZGVsYXkpe3JldHVybiAxfWVsc2V7cmV0dXJuLTF9fTtyZXR1cm4gb30obi5Bc3luY0FjdGlvbik7ci5WaXJ0dWFsQWN0aW9uPXN9LHtcIi4vQXN5bmNBY3Rpb25cIjoxOTksXCIuL0FzeW5jU2NoZWR1bGVyXCI6MjAwfV0sMjA0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9BbmltYXRpb25GcmFtZUFjdGlvblwiKTt2YXIgaT1lKFwiLi9BbmltYXRpb25GcmFtZVNjaGVkdWxlclwiKTtyLmFuaW1hdGlvbkZyYW1lPW5ldyBpLkFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyKG4uQW5pbWF0aW9uRnJhbWVBY3Rpb24pfSx7XCIuL0FuaW1hdGlvbkZyYW1lQWN0aW9uXCI6MTk1LFwiLi9BbmltYXRpb25GcmFtZVNjaGVkdWxlclwiOjE5Nn1dLDIwNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vQXNhcEFjdGlvblwiKTt2YXIgaT1lKFwiLi9Bc2FwU2NoZWR1bGVyXCIpO3IuYXNhcD1uZXcgaS5Bc2FwU2NoZWR1bGVyKG4uQXNhcEFjdGlvbil9LHtcIi4vQXNhcEFjdGlvblwiOjE5NyxcIi4vQXNhcFNjaGVkdWxlclwiOjE5OH1dLDIwNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vQXN5bmNBY3Rpb25cIik7dmFyIGk9ZShcIi4vQXN5bmNTY2hlZHVsZXJcIik7ci5hc3luYz1uZXcgaS5Bc3luY1NjaGVkdWxlcihuLkFzeW5jQWN0aW9uKX0se1wiLi9Bc3luY0FjdGlvblwiOjE5OSxcIi4vQXN5bmNTY2hlZHVsZXJcIjoyMDB9XSwyMDc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL1F1ZXVlQWN0aW9uXCIpO3ZhciBpPWUoXCIuL1F1ZXVlU2NoZWR1bGVyXCIpO3IucXVldWU9bmV3IGkuUXVldWVTY2hlZHVsZXIobi5RdWV1ZUFjdGlvbil9LHtcIi4vUXVldWVBY3Rpb25cIjoyMDEsXCIuL1F1ZXVlU2NoZWR1bGVyXCI6MjAyfV0sMjA4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtmdW5jdGlvbiBuKCl7aWYodHlwZW9mIFN5bWJvbCE9PVwiZnVuY3Rpb25cInx8IVN5bWJvbC5pdGVyYXRvcil7cmV0dXJuXCJAQGl0ZXJhdG9yXCJ9cmV0dXJuIFN5bWJvbC5pdGVyYXRvcn1yLmdldFN5bWJvbEl0ZXJhdG9yPW47ci5pdGVyYXRvcj1uKCk7ci4kJGl0ZXJhdG9yPXIuaXRlcmF0b3J9LHt9XSwyMDk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3Iub2JzZXJ2YWJsZT1mdW5jdGlvbigpe3JldHVybiB0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZTeW1ib2wub2JzZXJ2YWJsZXx8XCJAQG9ic2VydmFibGVcIn0oKX0se31dLDIxMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5yeFN1YnNjcmliZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIj9TeW1ib2woXCJyeFN1YnNjcmliZXJcIik6XCJAQHJ4U3Vic2NyaWJlcl9cIitNYXRoLnJhbmRvbSgpfSgpO3IuJCRyeFN1YnNjcmliZXI9ci5yeFN1YnNjcmliZXJ9LHt9XSwyMTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe0Vycm9yLmNhbGwodGhpcyk7dGhpcy5tZXNzYWdlPVwiYXJndW1lbnQgb3V0IG9mIHJhbmdlXCI7dGhpcy5uYW1lPVwiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcIjtyZXR1cm4gdGhpc31lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7cmV0dXJuIGV9KCk7ci5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcj1ufSx7fV0sMjEyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtFcnJvci5jYWxsKHRoaXMpO3RoaXMubWVzc2FnZT1cIm5vIGVsZW1lbnRzIGluIHNlcXVlbmNlXCI7dGhpcy5uYW1lPVwiRW1wdHlFcnJvclwiO3JldHVybiB0aGlzfWUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtyZXR1cm4gZX0oKTtyLkVtcHR5RXJyb3I9bn0se31dLDIxMzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49MTt2YXIgaT1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX0oKTt2YXIgbz17fTtmdW5jdGlvbiBhKGUpe2lmKGUgaW4gbyl7ZGVsZXRlIG9bZV07cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfXIuSW1tZWRpYXRlPXtzZXRJbW1lZGlhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9bisrO29bdF09dHJ1ZTtpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYSh0KSYmZSgpfSk7cmV0dXJuIHR9LGNsZWFySW1tZWRpYXRlOmZ1bmN0aW9uKGUpe2EoZSl9fTtyLlRlc3RUb29scz17cGVuZGluZzpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhvKS5sZW5ndGh9fX0se31dLDIxNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7RXJyb3IuY2FsbCh0aGlzKTt0aGlzLm1lc3NhZ2U9XCJvYmplY3QgdW5zdWJzY3JpYmVkXCI7dGhpcy5uYW1lPVwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIjtyZXR1cm4gdGhpc31lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7cmV0dXJuIGV9KCk7ci5PYmplY3RVbnN1YnNjcmliZWRFcnJvcj1ufSx7fV0sMjE1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtFcnJvci5jYWxsKHRoaXMpO3RoaXMubWVzc2FnZT1cIlRpbWVvdXQgaGFzIG9jY3VycmVkXCI7dGhpcy5uYW1lPVwiVGltZW91dEVycm9yXCI7cmV0dXJuIHRoaXN9ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO3JldHVybiBlfSgpO3IuVGltZW91dEVycm9yPW59LHt9XSwyMTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtFcnJvci5jYWxsKHRoaXMpO3RoaXMubWVzc2FnZT1lP2UubGVuZ3RoK1wiIGVycm9ycyBvY2N1cnJlZCBkdXJpbmcgdW5zdWJzY3JpcHRpb246XFxuXCIrZS5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCsxK1wiKSBcIitlLnRvU3RyaW5nKCl9KS5qb2luKFwiXFxuICBcIik6XCJcIjt0aGlzLm5hbWU9XCJVbnN1YnNjcmlwdGlvbkVycm9yXCI7dGhpcy5lcnJvcnM9ZTtyZXR1cm4gdGhpc31lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7cmV0dXJuIGV9KCk7ci5VbnN1YnNjcmlwdGlvbkVycm9yPW59LHt9XSwyMTc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuLi9TdWJzY3JpYmVyXCIpO2Z1bmN0aW9uIG4oZSl7d2hpbGUoZSl7dmFyIHQ9ZSxyPXQuY2xvc2VkLG49dC5kZXN0aW5hdGlvbixpPXQuaXNTdG9wcGVkO2lmKHJ8fGkpe3JldHVybiBmYWxzZX1lbHNlIGlmKG4mJm4gaW5zdGFuY2VvZiBvLlN1YnNjcmliZXIpe2U9bn1lbHNle2U9bnVsbH19cmV0dXJuIHRydWV9ci5jYW5SZXBvcnRFcnJvcj1ufSx7XCIuLi9TdWJzY3JpYmVyXCI6NTV9XSwyMTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2Z1bmN0aW9uIG4oZSl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGV9LDApfXIuaG9zdFJlcG9ydEVycm9yPW59LHt9XSwyMTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGV9ci5pZGVudGl0eT1ufSx7fV0sMjIwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLmlzQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJnR5cGVvZiBlLmxlbmd0aD09PVwibnVtYmVyXCJ9fSgpfSx7fV0sMjIxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLmlzQXJyYXlMaWtlPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0eXBlb2YgZS5sZW5ndGg9PT1cIm51bWJlclwiJiZ0eXBlb2YgZSE9PVwiZnVuY3Rpb25cIn19LHt9XSwyMjI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRlJiYhaXNOYU4oK2UpfXIuaXNEYXRlPW59LHt9XSwyMjM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJmdW5jdGlvblwifXIuaXNGdW5jdGlvbj1ufSx7fV0sMjI0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi4vc3ltYm9sL29ic2VydmFibGVcIik7ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSYmdHlwZW9mIGVbbi5vYnNlcnZhYmxlXT09PVwiZnVuY3Rpb25cIn1yLmlzSW50ZXJvcE9ic2VydmFibGU9aX0se1wiLi4vc3ltYm9sL29ic2VydmFibGVcIjoyMDl9XSwyMjU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9zeW1ib2wvaXRlcmF0b3JcIik7ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSYmdHlwZW9mIGVbbi5pdGVyYXRvcl09PT1cImZ1bmN0aW9uXCJ9ci5pc0l0ZXJhYmxlPWl9LHtcIi4uL3N5bWJvbC9pdGVyYXRvclwiOjIwOH1dLDIyNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vaXNBcnJheVwiKTtmdW5jdGlvbiBpKGUpe3JldHVybiFuLmlzQXJyYXkoZSkmJmUtcGFyc2VGbG9hdChlKSsxPj0wfXIuaXNOdW1lcmljPWl9LHtcIi4vaXNBcnJheVwiOjIyMH1dLDIyNzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSE9PW51bGwmJnR5cGVvZiBlPT09XCJvYmplY3RcIn1yLmlzT2JqZWN0PW59LHt9XSwyMjg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9PYnNlcnZhYmxlXCIpO2Z1bmN0aW9uIGkoZSl7cmV0dXJuISFlJiYoZSBpbnN0YW5jZW9mIG4uT2JzZXJ2YWJsZXx8dHlwZW9mIGUubGlmdD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGUuc3Vic2NyaWJlPT09XCJmdW5jdGlvblwiKX1yLmlzT2JzZXJ2YWJsZT1pfSx7XCIuLi9PYnNlcnZhYmxlXCI6NDh9XSwyMjk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2Z1bmN0aW9uIG4oZSl7cmV0dXJuISFlJiZ0eXBlb2YgZS5zdWJzY3JpYmUhPT1cImZ1bmN0aW9uXCImJnR5cGVvZiBlLnRoZW49PT1cImZ1bmN0aW9uXCJ9ci5pc1Byb21pc2U9bn0se31dLDIzMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmdHlwZW9mIGUuc2NoZWR1bGU9PT1cImZ1bmN0aW9uXCJ9ci5pc1NjaGVkdWxlcj1ufSx7fV0sMjMxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtmdW5jdGlvbiBuKCl7fXIubm9vcD1ufSx7fV0sMjMyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtmdW5jdGlvbiBuKGUsdCl7ZnVuY3Rpb24gcigpe3JldHVybiFyLnByZWQuYXBwbHkoci50aGlzQXJnLGFyZ3VtZW50cyl9ci5wcmVkPWU7ci50aGlzQXJnPXQ7cmV0dXJuIHJ9ci5ub3Q9bn0se31dLDIzMzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vaWRlbnRpdHlcIik7ZnVuY3Rpb24gaSgpe3ZhciBlPVtdO2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe2VbdF09YXJndW1lbnRzW3RdfXJldHVybiBvKGUpfXIucGlwZT1pO2Z1bmN0aW9uIG8ocil7aWYoci5sZW5ndGg9PT0wKXtyZXR1cm4gbi5pZGVudGl0eX1pZihyLmxlbmd0aD09PTEpe3JldHVybiByWzBdfXJldHVybiBmdW5jdGlvbiBlKHQpe3JldHVybiByLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSx0KX19ci5waXBlRnJvbUFycmF5PW99LHtcIi4vaWRlbnRpdHlcIjoyMTl9XSwyMzQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL3N1YnNjcmliZVRvQXJyYXlcIik7dmFyIGk9ZShcIi4vc3Vic2NyaWJlVG9Qcm9taXNlXCIpO3ZhciBvPWUoXCIuL3N1YnNjcmliZVRvSXRlcmFibGVcIik7dmFyIGE9ZShcIi4vc3Vic2NyaWJlVG9PYnNlcnZhYmxlXCIpO3ZhciBzPWUoXCIuL2lzQXJyYXlMaWtlXCIpO3ZhciB1PWUoXCIuL2lzUHJvbWlzZVwiKTt2YXIgYz1lKFwiLi9pc09iamVjdFwiKTt2YXIgbD1lKFwiLi4vc3ltYm9sL2l0ZXJhdG9yXCIpO3ZhciBoPWUoXCIuLi9zeW1ib2wvb2JzZXJ2YWJsZVwiKTtyLnN1YnNjcmliZVRvPWZ1bmN0aW9uKGUpe2lmKCEhZSYmdHlwZW9mIGVbaC5vYnNlcnZhYmxlXT09PVwiZnVuY3Rpb25cIil7cmV0dXJuIGEuc3Vic2NyaWJlVG9PYnNlcnZhYmxlKGUpfWVsc2UgaWYocy5pc0FycmF5TGlrZShlKSl7cmV0dXJuIG4uc3Vic2NyaWJlVG9BcnJheShlKX1lbHNlIGlmKHUuaXNQcm9taXNlKGUpKXtyZXR1cm4gaS5zdWJzY3JpYmVUb1Byb21pc2UoZSl9ZWxzZSBpZighIWUmJnR5cGVvZiBlW2wuaXRlcmF0b3JdPT09XCJmdW5jdGlvblwiKXtyZXR1cm4gby5zdWJzY3JpYmVUb0l0ZXJhYmxlKGUpfWVsc2V7dmFyIHQ9Yy5pc09iamVjdChlKT9cImFuIGludmFsaWQgb2JqZWN0XCI6XCInXCIrZStcIidcIjt2YXIgcj1cIllvdSBwcm92aWRlZCBcIit0K1wiIHdoZXJlIGEgc3RyZWFtIHdhcyBleHBlY3RlZC5cIitcIiBZb3UgY2FuIHByb3ZpZGUgYW4gT2JzZXJ2YWJsZSwgUHJvbWlzZSwgQXJyYXksIG9yIEl0ZXJhYmxlLlwiO3Rocm93IG5ldyBUeXBlRXJyb3Iocil9fX0se1wiLi4vc3ltYm9sL2l0ZXJhdG9yXCI6MjA4LFwiLi4vc3ltYm9sL29ic2VydmFibGVcIjoyMDksXCIuL2lzQXJyYXlMaWtlXCI6MjIxLFwiLi9pc09iamVjdFwiOjIyNyxcIi4vaXNQcm9taXNlXCI6MjI5LFwiLi9zdWJzY3JpYmVUb0FycmF5XCI6MjM1LFwiLi9zdWJzY3JpYmVUb0l0ZXJhYmxlXCI6MjM2LFwiLi9zdWJzY3JpYmVUb09ic2VydmFibGVcIjoyMzcsXCIuL3N1YnNjcmliZVRvUHJvbWlzZVwiOjIzOH1dLDIzNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5zdWJzY3JpYmVUb0FycmF5PWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPW4ubGVuZ3RoO3Q8ciYmIWUuY2xvc2VkO3QrKyl7ZS5uZXh0KG5bdF0pfWUuY29tcGxldGUoKX19fSx7fV0sMjM2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgaT1lKFwiLi4vc3ltYm9sL2l0ZXJhdG9yXCIpO3Iuc3Vic2NyaWJlVG9JdGVyYWJsZT1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9bltpLml0ZXJhdG9yXSgpO2Rve3ZhciByPXQubmV4dCgpO2lmKHIuZG9uZSl7ZS5jb21wbGV0ZSgpO2JyZWFrfWUubmV4dChyLnZhbHVlKTtpZihlLmNsb3NlZCl7YnJlYWt9fXdoaWxlKHRydWUpO2lmKHR5cGVvZiB0LnJldHVybj09PVwiZnVuY3Rpb25cIil7ZS5hZGQoZnVuY3Rpb24oKXtpZih0LnJldHVybil7dC5yZXR1cm4oKX19KX1yZXR1cm4gZX19fSx7XCIuLi9zeW1ib2wvaXRlcmF0b3JcIjoyMDh9XSwyMzc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9zeW1ib2wvb2JzZXJ2YWJsZVwiKTtyLnN1YnNjcmliZVRvT2JzZXJ2YWJsZT1mdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9cltuLm9ic2VydmFibGVdKCk7aWYodHlwZW9mIHQuc3Vic2NyaWJlIT09XCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvdmlkZWQgb2JqZWN0IGRvZXMgbm90IGNvcnJlY3RseSBpbXBsZW1lbnQgU3ltYm9sLm9ic2VydmFibGVcIil9ZWxzZXtyZXR1cm4gdC5zdWJzY3JpYmUoZSl9fX19LHtcIi4uL3N5bWJvbC9vYnNlcnZhYmxlXCI6MjA5fV0sMjM4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9ob3N0UmVwb3J0RXJyb3JcIik7ci5zdWJzY3JpYmVUb1Byb21pc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2UudGhlbihmdW5jdGlvbihlKXtpZighdC5jbG9zZWQpe3QubmV4dChlKTt0LmNvbXBsZXRlKCl9fSxmdW5jdGlvbihlKXtyZXR1cm4gdC5lcnJvcihlKX0pLnRoZW4obnVsbCxuLmhvc3RSZXBvcnRFcnJvcik7cmV0dXJuIHR9fX0se1wiLi9ob3N0UmVwb3J0RXJyb3JcIjoyMTh9XSwyMzk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuLi9Jbm5lclN1YnNjcmliZXJcIik7dmFyIGE9ZShcIi4vc3Vic2NyaWJlVG9cIik7dmFyIHM9ZShcIi4uL09ic2VydmFibGVcIik7ZnVuY3Rpb24gbihlLHQscixuLGkpe2lmKGk9PT12b2lkIDApe2k9bmV3IG8uSW5uZXJTdWJzY3JpYmVyKGUscixuKX1pZihpLmNsb3NlZCl7cmV0dXJuIHVuZGVmaW5lZH1pZih0IGluc3RhbmNlb2Ygcy5PYnNlcnZhYmxlKXtyZXR1cm4gdC5zdWJzY3JpYmUoaSl9cmV0dXJuIGEuc3Vic2NyaWJlVG8odCkoaSl9ci5zdWJzY3JpYmVUb1Jlc3VsdD1ufSx7XCIuLi9Jbm5lclN1YnNjcmliZXJcIjo0NixcIi4uL09ic2VydmFibGVcIjo0OCxcIi4vc3Vic2NyaWJlVG9cIjoyMzR9XSwyNDA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuLi9TdWJzY3JpYmVyXCIpO3ZhciBpPWUoXCIuLi9zeW1ib2wvcnhTdWJzY3JpYmVyXCIpO3ZhciBvPWUoXCIuLi9PYnNlcnZlclwiKTtmdW5jdGlvbiBhKGUsdCxyKXtpZihlKXtpZihlIGluc3RhbmNlb2Ygbi5TdWJzY3JpYmVyKXtyZXR1cm4gZX1pZihlW2kucnhTdWJzY3JpYmVyXSl7cmV0dXJuIGVbaS5yeFN1YnNjcmliZXJdKCl9fWlmKCFlJiYhdCYmIXIpe3JldHVybiBuZXcgbi5TdWJzY3JpYmVyKG8uZW1wdHkpfXJldHVybiBuZXcgbi5TdWJzY3JpYmVyKGUsdCxyKX1yLnRvU3Vic2NyaWJlcj1hfSx7XCIuLi9PYnNlcnZlclwiOjQ5LFwiLi4vU3Vic2NyaWJlclwiOjU1LFwiLi4vc3ltYm9sL3J4U3Vic2NyaWJlclwiOjIxMH1dLDI0MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9hdWRpdFwiKTtyLmF1ZGl0PW4uYXVkaXQ7dmFyIGk9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9hdWRpdFRpbWVcIik7ci5hdWRpdFRpbWU9aS5hdWRpdFRpbWU7dmFyIG89ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9idWZmZXJcIik7ci5idWZmZXI9by5idWZmZXI7dmFyIGE9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9idWZmZXJDb3VudFwiKTtyLmJ1ZmZlckNvdW50PWEuYnVmZmVyQ291bnQ7dmFyIHM9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9idWZmZXJUaW1lXCIpO3IuYnVmZmVyVGltZT1zLmJ1ZmZlclRpbWU7dmFyIHU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9idWZmZXJUb2dnbGVcIik7ci5idWZmZXJUb2dnbGU9dS5idWZmZXJUb2dnbGU7dmFyIGM9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9idWZmZXJXaGVuXCIpO3IuYnVmZmVyV2hlbj1jLmJ1ZmZlcldoZW47dmFyIGw9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jYXRjaEVycm9yXCIpO3IuY2F0Y2hFcnJvcj1sLmNhdGNoRXJyb3I7dmFyIGg9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb21iaW5lQWxsXCIpO3IuY29tYmluZUFsbD1oLmNvbWJpbmVBbGw7dmFyIHA9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb21iaW5lTGF0ZXN0XCIpO3IuY29tYmluZUxhdGVzdD1wLmNvbWJpbmVMYXRlc3Q7dmFyIGY9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRcIik7ci5jb25jYXQ9Zi5jb25jYXQ7dmFyIGQ9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRBbGxcIik7ci5jb25jYXRBbGw9ZC5jb25jYXRBbGw7dmFyIHY9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRNYXBcIik7ci5jb25jYXRNYXA9di5jb25jYXRNYXA7dmFyIG09ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRNYXBUb1wiKTtyLmNvbmNhdE1hcFRvPW0uY29uY2F0TWFwVG87dmFyIGc9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb3VudFwiKTtyLmNvdW50PWcuY291bnQ7dmFyIF89ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWJvdW5jZVwiKTtyLmRlYm91bmNlPV8uZGVib3VuY2U7dmFyIHk9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWJvdW5jZVRpbWVcIik7ci5kZWJvdW5jZVRpbWU9eS5kZWJvdW5jZVRpbWU7dmFyIGI9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWZhdWx0SWZFbXB0eVwiKTtyLmRlZmF1bHRJZkVtcHR5PWIuZGVmYXVsdElmRW1wdHk7dmFyIHg9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWxheVwiKTtyLmRlbGF5PXguZGVsYXk7dmFyIHc9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWxheVdoZW5cIik7ci5kZWxheVdoZW49dy5kZWxheVdoZW47dmFyIFM9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZW1hdGVyaWFsaXplXCIpO3IuZGVtYXRlcmlhbGl6ZT1TLmRlbWF0ZXJpYWxpemU7dmFyIE09ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kaXN0aW5jdFwiKTtyLmRpc3RpbmN0PU0uZGlzdGluY3Q7dmFyIEM9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kaXN0aW5jdFVudGlsQ2hhbmdlZFwiKTtyLmRpc3RpbmN0VW50aWxDaGFuZ2VkPUMuZGlzdGluY3RVbnRpbENoYW5nZWQ7dmFyIFQ9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kaXN0aW5jdFVudGlsS2V5Q2hhbmdlZFwiKTtyLmRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkPVQuZGlzdGluY3RVbnRpbEtleUNoYW5nZWQ7dmFyIEU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9lbGVtZW50QXRcIik7ci5lbGVtZW50QXQ9RS5lbGVtZW50QXQ7dmFyIE89ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9lbmRXaXRoXCIpO3IuZW5kV2l0aD1PLmVuZFdpdGg7dmFyIFA9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9ldmVyeVwiKTtyLmV2ZXJ5PVAuZXZlcnk7dmFyIEE9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9leGhhdXN0XCIpO3IuZXhoYXVzdD1BLmV4aGF1c3Q7dmFyIGo9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9leGhhdXN0TWFwXCIpO3IuZXhoYXVzdE1hcD1qLmV4aGF1c3RNYXA7dmFyIFI9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9leHBhbmRcIik7ci5leHBhbmQ9Ui5leHBhbmQ7dmFyIGs9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maWx0ZXJcIik7ci5maWx0ZXI9ay5maWx0ZXI7dmFyIEw9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maW5hbGl6ZVwiKTtyLmZpbmFsaXplPUwuZmluYWxpemU7dmFyIE49ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maW5kXCIpO3IuZmluZD1OLmZpbmQ7dmFyIEk9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maW5kSW5kZXhcIik7ci5maW5kSW5kZXg9SS5maW5kSW5kZXg7dmFyIEQ9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maXJzdFwiKTtyLmZpcnN0PUQuZmlyc3Q7dmFyIEI9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9ncm91cEJ5XCIpO3IuZ3JvdXBCeT1CLmdyb3VwQnk7dmFyIEY9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9pZ25vcmVFbGVtZW50c1wiKTtyLmlnbm9yZUVsZW1lbnRzPUYuaWdub3JlRWxlbWVudHM7dmFyIHo9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9pc0VtcHR5XCIpO3IuaXNFbXB0eT16LmlzRW1wdHk7dmFyICQ9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9sYXN0XCIpO3IubGFzdD0kLmxhc3Q7dmFyIEc9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tYXBcIik7ci5tYXA9Ry5tYXA7dmFyIFY9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tYXBUb1wiKTtyLm1hcFRvPVYubWFwVG87dmFyIEg9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tYXRlcmlhbGl6ZVwiKTtyLm1hdGVyaWFsaXplPUgubWF0ZXJpYWxpemU7dmFyIFU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tYXhcIik7ci5tYXg9VS5tYXg7dmFyIHE9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tZXJnZVwiKTtyLm1lcmdlPXEubWVyZ2U7dmFyIFc9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tZXJnZUFsbFwiKTtyLm1lcmdlQWxsPVcubWVyZ2VBbGw7dmFyIFg9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tZXJnZU1hcFwiKTtyLm1lcmdlTWFwPVgubWVyZ2VNYXA7dmFyIFk9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tZXJnZU1hcFwiKTtyLmZsYXRNYXA9WS5tZXJnZU1hcDt2YXIgSz1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlTWFwVG9cIik7ci5tZXJnZU1hcFRvPUsubWVyZ2VNYXBUbzt2YXIgWj1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlU2NhblwiKTtyLm1lcmdlU2Nhbj1aLm1lcmdlU2Nhbjt2YXIgSj1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21pblwiKTtyLm1pbj1KLm1pbjt2YXIgUT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL211bHRpY2FzdFwiKTtyLm11bHRpY2FzdD1RLm11bHRpY2FzdDt2YXIgZWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9vYnNlcnZlT25cIik7ci5vYnNlcnZlT249ZWUub2JzZXJ2ZU9uO3ZhciB0ZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL29uRXJyb3JSZXN1bWVOZXh0XCIpO3Iub25FcnJvclJlc3VtZU5leHQ9dGUub25FcnJvclJlc3VtZU5leHQ7dmFyIHJlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvcGFpcndpc2VcIik7ci5wYWlyd2lzZT1yZS5wYWlyd2lzZTt2YXIgbmU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9wYXJ0aXRpb25cIik7ci5wYXJ0aXRpb249bmUucGFydGl0aW9uO3ZhciBpZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3BsdWNrXCIpO3IucGx1Y2s9aWUucGx1Y2s7dmFyIG9lPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvcHVibGlzaFwiKTtyLnB1Ymxpc2g9b2UucHVibGlzaDt2YXIgYWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9wdWJsaXNoQmVoYXZpb3JcIik7ci5wdWJsaXNoQmVoYXZpb3I9YWUucHVibGlzaEJlaGF2aW9yO3ZhciBzZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3B1Ymxpc2hMYXN0XCIpO3IucHVibGlzaExhc3Q9c2UucHVibGlzaExhc3Q7dmFyIHVlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvcHVibGlzaFJlcGxheVwiKTtyLnB1Ymxpc2hSZXBsYXk9dWUucHVibGlzaFJlcGxheTt2YXIgY2U9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9yYWNlXCIpO3IucmFjZT1jZS5yYWNlO3ZhciBsZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JlZHVjZVwiKTtyLnJlZHVjZT1sZS5yZWR1Y2U7dmFyIGhlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvcmVwZWF0XCIpO3IucmVwZWF0PWhlLnJlcGVhdDt2YXIgcGU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9yZXBlYXRXaGVuXCIpO3IucmVwZWF0V2hlbj1wZS5yZXBlYXRXaGVuO3ZhciBmZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JldHJ5XCIpO3IucmV0cnk9ZmUucmV0cnk7dmFyIGRlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvcmV0cnlXaGVuXCIpO3IucmV0cnlXaGVuPWRlLnJldHJ5V2hlbjt2YXIgdmU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9yZWZDb3VudFwiKTtyLnJlZkNvdW50PXZlLnJlZkNvdW50O3ZhciBtZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NhbXBsZVwiKTtyLnNhbXBsZT1tZS5zYW1wbGU7dmFyIGdlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2FtcGxlVGltZVwiKTtyLnNhbXBsZVRpbWU9Z2Uuc2FtcGxlVGltZTt2YXIgX2U9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zY2FuXCIpO3Iuc2Nhbj1fZS5zY2FuO3ZhciB5ZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NlcXVlbmNlRXF1YWxcIik7ci5zZXF1ZW5jZUVxdWFsPXllLnNlcXVlbmNlRXF1YWw7dmFyIGJlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2hhcmVcIik7ci5zaGFyZT1iZS5zaGFyZTt2YXIgeGU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zaGFyZVJlcGxheVwiKTtyLnNoYXJlUmVwbGF5PXhlLnNoYXJlUmVwbGF5O3ZhciB3ZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NpbmdsZVwiKTtyLnNpbmdsZT13ZS5zaW5nbGU7dmFyIFNlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2tpcFwiKTtyLnNraXA9U2Uuc2tpcDt2YXIgTWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9za2lwTGFzdFwiKTtyLnNraXBMYXN0PU1lLnNraXBMYXN0O3ZhciBDZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NraXBVbnRpbFwiKTtyLnNraXBVbnRpbD1DZS5za2lwVW50aWw7dmFyIFRlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2tpcFdoaWxlXCIpO3Iuc2tpcFdoaWxlPVRlLnNraXBXaGlsZTt2YXIgRWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zdGFydFdpdGhcIik7ci5zdGFydFdpdGg9RWUuc3RhcnRXaXRoO3ZhciBPZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3N1YnNjcmliZU9uXCIpO3Iuc3Vic2NyaWJlT249T2Uuc3Vic2NyaWJlT247dmFyIFBlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc3dpdGNoQWxsXCIpO3Iuc3dpdGNoQWxsPVBlLnN3aXRjaEFsbDt2YXIgQWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zd2l0Y2hNYXBcIik7ci5zd2l0Y2hNYXA9QWUuc3dpdGNoTWFwO3ZhciBqZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3N3aXRjaE1hcFRvXCIpO3Iuc3dpdGNoTWFwVG89amUuc3dpdGNoTWFwVG87dmFyIFJlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGFrZVwiKTtyLnRha2U9UmUudGFrZTt2YXIga2U9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy90YWtlTGFzdFwiKTtyLnRha2VMYXN0PWtlLnRha2VMYXN0O3ZhciBMZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3Rha2VVbnRpbFwiKTtyLnRha2VVbnRpbD1MZS50YWtlVW50aWw7dmFyIE5lPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGFrZVdoaWxlXCIpO3IudGFrZVdoaWxlPU5lLnRha2VXaGlsZTt2YXIgSWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy90YXBcIik7ci50YXA9SWUudGFwO3ZhciBEZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3Rocm90dGxlXCIpO3IudGhyb3R0bGU9RGUudGhyb3R0bGU7dmFyIEJlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGhyb3R0bGVUaW1lXCIpO3IudGhyb3R0bGVUaW1lPUJlLnRocm90dGxlVGltZTt2YXIgRmU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy90aHJvd0lmRW1wdHlcIik7ci50aHJvd0lmRW1wdHk9RmUudGhyb3dJZkVtcHR5O3ZhciB6ZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3RpbWVJbnRlcnZhbFwiKTtyLnRpbWVJbnRlcnZhbD16ZS50aW1lSW50ZXJ2YWw7dmFyICRlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGltZW91dFwiKTtyLnRpbWVvdXQ9JGUudGltZW91dDt2YXIgR2U9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy90aW1lb3V0V2l0aFwiKTtyLnRpbWVvdXRXaXRoPUdlLnRpbWVvdXRXaXRoO3ZhciBWZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3RpbWVzdGFtcFwiKTtyLnRpbWVzdGFtcD1WZS50aW1lc3RhbXA7dmFyIEhlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdG9BcnJheVwiKTtyLnRvQXJyYXk9SGUudG9BcnJheTt2YXIgVWU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy93aW5kb3dcIik7ci53aW5kb3c9VWUud2luZG93O3ZhciBxZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3dpbmRvd0NvdW50XCIpO3Iud2luZG93Q291bnQ9cWUud2luZG93Q291bnQ7dmFyIFdlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvd2luZG93VGltZVwiKTtyLndpbmRvd1RpbWU9V2Uud2luZG93VGltZTt2YXIgWGU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy93aW5kb3dUb2dnbGVcIik7ci53aW5kb3dUb2dnbGU9WGUud2luZG93VG9nZ2xlO3ZhciBZZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3dpbmRvd1doZW5cIik7ci53aW5kb3dXaGVuPVllLndpbmRvd1doZW47dmFyIEtlPWUoXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvd2l0aExhdGVzdEZyb21cIik7ci53aXRoTGF0ZXN0RnJvbT1LZS53aXRoTGF0ZXN0RnJvbTt2YXIgWmU9ZShcIi4uL2ludGVybmFsL29wZXJhdG9ycy96aXBcIik7ci56aXA9WmUuemlwO3ZhciBKZT1lKFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3ppcEFsbFwiKTtyLnppcEFsbD1KZS56aXBBbGx9LHtcIi4uL2ludGVybmFsL29wZXJhdG9ycy9hdWRpdFwiOjg2LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2F1ZGl0VGltZVwiOjg3LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2J1ZmZlclwiOjg4LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2J1ZmZlckNvdW50XCI6ODksXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvYnVmZmVyVGltZVwiOjkwLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2J1ZmZlclRvZ2dsZVwiOjkxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2J1ZmZlcldoZW5cIjo5MixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jYXRjaEVycm9yXCI6OTMsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvY29tYmluZUFsbFwiOjk0LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2NvbWJpbmVMYXRlc3RcIjo5NSxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRcIjo5NixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRBbGxcIjo5NyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRNYXBcIjo5OCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRNYXBUb1wiOjk5LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2NvdW50XCI6MTAwLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2RlYm91bmNlXCI6MTAxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2RlYm91bmNlVGltZVwiOjEwMixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWZhdWx0SWZFbXB0eVwiOjEwMyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWxheVwiOjEwNCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kZWxheVdoZW5cIjoxMDUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvZGVtYXRlcmlhbGl6ZVwiOjEwNixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kaXN0aW5jdFwiOjEwNyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kaXN0aW5jdFVudGlsQ2hhbmdlZFwiOjEwOCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9kaXN0aW5jdFVudGlsS2V5Q2hhbmdlZFwiOjEwOSxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9lbGVtZW50QXRcIjoxMTAsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvZW5kV2l0aFwiOjExMSxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9ldmVyeVwiOjExMixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9leGhhdXN0XCI6MTEzLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2V4aGF1c3RNYXBcIjoxMTQsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvZXhwYW5kXCI6MTE1LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2ZpbHRlclwiOjExNixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maW5hbGl6ZVwiOjExNyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maW5kXCI6MTE4LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2ZpbmRJbmRleFwiOjExOSxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9maXJzdFwiOjEyMCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9ncm91cEJ5XCI6MTIxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2lnbm9yZUVsZW1lbnRzXCI6MTIyLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL2lzRW1wdHlcIjoxMjMsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvbGFzdFwiOjEyNCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tYXBcIjoxMjUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvbWFwVG9cIjoxMjYsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvbWF0ZXJpYWxpemVcIjoxMjcsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvbWF4XCI6MTI4LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlXCI6MTI5LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlQWxsXCI6MTMwLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlTWFwXCI6MTMxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlTWFwVG9cIjoxMzIsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvbWVyZ2VTY2FuXCI6MTMzLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL21pblwiOjEzNCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9tdWx0aWNhc3RcIjoxMzUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvb2JzZXJ2ZU9uXCI6MTM2LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL29uRXJyb3JSZXN1bWVOZXh0XCI6MTM3LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3BhaXJ3aXNlXCI6MTM4LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3BhcnRpdGlvblwiOjEzOSxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9wbHVja1wiOjE0MCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9wdWJsaXNoXCI6MTQxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3B1Ymxpc2hCZWhhdmlvclwiOjE0MixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9wdWJsaXNoTGFzdFwiOjE0MyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9wdWJsaXNoUmVwbGF5XCI6MTQ0LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JhY2VcIjoxNDUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvcmVkdWNlXCI6MTQ2LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JlZkNvdW50XCI6MTQ3LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JlcGVhdFwiOjE0OCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9yZXBlYXRXaGVuXCI6MTQ5LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JldHJ5XCI6MTUwLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3JldHJ5V2hlblwiOjE1MSxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zYW1wbGVcIjoxNTIsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2FtcGxlVGltZVwiOjE1MyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zY2FuXCI6MTU0LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NlcXVlbmNlRXF1YWxcIjoxNTUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2hhcmVcIjoxNTYsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2hhcmVSZXBsYXlcIjoxNTcsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2luZ2xlXCI6MTU4LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NraXBcIjoxNTksXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2tpcExhc3RcIjoxNjAsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc2tpcFVudGlsXCI6MTYxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3NraXBXaGlsZVwiOjE2MixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zdGFydFdpdGhcIjoxNjMsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc3Vic2NyaWJlT25cIjoxNjQsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvc3dpdGNoQWxsXCI6MTY1LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3N3aXRjaE1hcFwiOjE2NixcIi4uL2ludGVybmFsL29wZXJhdG9ycy9zd2l0Y2hNYXBUb1wiOjE2NyxcIi4uL2ludGVybmFsL29wZXJhdG9ycy90YWtlXCI6MTY4LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3Rha2VMYXN0XCI6MTY5LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3Rha2VVbnRpbFwiOjE3MCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy90YWtlV2hpbGVcIjoxNzEsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGFwXCI6MTcyLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3Rocm90dGxlXCI6MTczLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3Rocm90dGxlVGltZVwiOjE3NCxcIi4uL2ludGVybmFsL29wZXJhdG9ycy90aHJvd0lmRW1wdHlcIjoxNzUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGltZUludGVydmFsXCI6MTc2LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3RpbWVvdXRcIjoxNzcsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGltZW91dFdpdGhcIjoxNzgsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvdGltZXN0YW1wXCI6MTc5LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3RvQXJyYXlcIjoxODAsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvd2luZG93XCI6MTgxLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3dpbmRvd0NvdW50XCI6MTgyLFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3dpbmRvd1RpbWVcIjoxODMsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvd2luZG93VG9nZ2xlXCI6MTg0LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3dpbmRvd1doZW5cIjoxODUsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvd2l0aExhdGVzdEZyb21cIjoxODYsXCIuLi9pbnRlcm5hbC9vcGVyYXRvcnMvemlwXCI6MTg3LFwiLi4vaW50ZXJuYWwvb3BlcmF0b3JzL3ppcEFsbFwiOjE4OH1dLDI0MjpbZnVuY3Rpb24oZSxyLG4peyhmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PT10eXBlb2YgbiYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiByP3Qobik6XCJmdW5jdGlvblwiPT09dHlwZW9mIG8mJm8uYW1kP28oW1wiZXhwb3J0c1wiXSx0KTooZT1lfHxzZWxmLHQoZS5USFJFRT17fSkpfSkodGhpcyxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7fWZ1bmN0aW9uIE1lKGUsdCl7dGhpcy54PWV8fDA7dGhpcy55PXR8fDB9ZnVuY3Rpb24gbSgpe3RoaXMuZWxlbWVudHM9WzEsMCwwLDAsMSwwLDAsMCwxXTswPGFyZ3VtZW50cy5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1mdW5jdGlvbiBwKGUsdCxyLG4saSxvLGEscyx1LGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6cW8rK30pO3RoaXMudXVpZD1Wby5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLmltYWdlPXZvaWQgMCE9PWU/ZTpwLkRFRkFVTFRfSU1BR0U7dGhpcy5taXBtYXBzPVtdO3RoaXMubWFwcGluZz12b2lkIDAhPT10P3Q6cC5ERUZBVUxUX01BUFBJTkc7dGhpcy53cmFwUz12b2lkIDAhPT1yP3I6MTAwMTt0aGlzLndyYXBUPXZvaWQgMCE9PW4/bjoxMDAxO3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWk/aToxMDA2O3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PW8/bzoxMDA4O3RoaXMuYW5pc290cm9weT12b2lkIDAhPT11P3U6MTt0aGlzLmZvcm1hdD12b2lkIDAhPT1hP2E6MTAyMzt0aGlzLmludGVybmFsRm9ybWF0PW51bGw7dGhpcy50eXBlPXZvaWQgMCE9PXM/czoxMDA5O3RoaXMub2Zmc2V0PW5ldyBNZSgwLDApO3RoaXMucmVwZWF0PW5ldyBNZSgxLDEpO3RoaXMuY2VudGVyPW5ldyBNZSgwLDApO3RoaXMucm90YXRpb249MDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITA7dGhpcy5tYXRyaXg9bmV3IG07dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITA7dGhpcy5wcmVtdWx0aXBseUFscGhhPSExO3RoaXMuZmxpcFk9ITA7dGhpcy51bnBhY2tBbGlnbm1lbnQ9NDt0aGlzLmVuY29kaW5nPXZvaWQgMCE9PWM/YzozZTM7dGhpcy52ZXJzaW9uPTA7dGhpcy5vblVwZGF0ZT1udWxsfWZ1bmN0aW9uIENlKGUsdCxyLG4pe3RoaXMueD1lfHwwO3RoaXMueT10fHwwO3RoaXMuej1yfHwwO3RoaXMudz12b2lkIDAhPT1uP246MX1mdW5jdGlvbiBUKGUsdCxyKXt0aGlzLndpZHRoPWU7dGhpcy5oZWlnaHQ9dDt0aGlzLnNjaXNzb3I9bmV3IENlKDAsMCxlLHQpO3RoaXMuc2Npc3NvclRlc3Q9ITE7dGhpcy52aWV3cG9ydD1uZXcgQ2UoMCwwLGUsdCk7cj1yfHx7fTt0aGlzLnRleHR1cmU9bmV3IHAodm9pZCAwLHIubWFwcGluZyxyLndyYXBTLHIud3JhcFQsci5tYWdGaWx0ZXIsci5taW5GaWx0ZXIsci5mb3JtYXQsci50eXBlLHIuYW5pc290cm9weSxyLmVuY29kaW5nKTt0aGlzLnRleHR1cmUuaW1hZ2U9e307dGhpcy50ZXh0dXJlLmltYWdlLndpZHRoPWU7dGhpcy50ZXh0dXJlLmltYWdlLmhlaWdodD10O3RoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9dm9pZCAwIT09ci5nZW5lcmF0ZU1pcG1hcHM/ci5nZW5lcmF0ZU1pcG1hcHM6ITE7dGhpcy50ZXh0dXJlLm1pbkZpbHRlcj12b2lkIDAhPT1yLm1pbkZpbHRlcj9yLm1pbkZpbHRlcjoxMDA2O3RoaXMuZGVwdGhCdWZmZXI9dm9pZCAwIT09ci5kZXB0aEJ1ZmZlcj9yLmRlcHRoQnVmZmVyOiEwO3RoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDAhPT1yLnN0ZW5jaWxCdWZmZXI/ci5zdGVuY2lsQnVmZmVyOiEwO3RoaXMuZGVwdGhUZXh0dXJlPXZvaWQgMCE9PXIuZGVwdGhUZXh0dXJlP3IuZGVwdGhUZXh0dXJlOm51bGx9ZnVuY3Rpb24gcihlLHQscil7VC5jYWxsKHRoaXMsZSx0LHIpO3RoaXMuc2FtcGxlcz00fWZ1bmN0aW9uIGQoZSx0LHIsbil7dGhpcy5feD1lfHwwO3RoaXMuX3k9dHx8MDt0aGlzLl96PXJ8fDA7dGhpcy5fdz12b2lkIDAhPT1uP246MX1mdW5jdGlvbiBUZShlLHQscil7dGhpcy54PWV8fDA7dGhpcy55PXR8fDA7dGhpcy56PXJ8fDB9ZnVuY3Rpb24gRWUoKXt0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXTswPGFyZ3VtZW50cy5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1mdW5jdGlvbiBpKGUsdCxyLG4pe3RoaXMuX3g9ZXx8MDt0aGlzLl95PXR8fDA7dGhpcy5fej1yfHwwO3RoaXMuX29yZGVyPW58fGkuRGVmYXVsdE9yZGVyfWZ1bmN0aW9uIG8oKXt0aGlzLm1hc2s9MX1mdW5jdGlvbiBmKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTppYSsrfSk7dGhpcy51dWlkPVZvLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIk9iamVjdDNEXCI7dGhpcy5wYXJlbnQ9bnVsbDt0aGlzLmNoaWxkcmVuPVtdO3RoaXMudXA9Zi5EZWZhdWx0VXAuY2xvbmUoKTt2YXIgZT1uZXcgVGUsdD1uZXcgaSxyPW5ldyBkLG49bmV3IFRlKDEsMSwxKTt0Ll9vbkNoYW5nZShmdW5jdGlvbigpe3Iuc2V0RnJvbUV1bGVyKHQsITEpfSk7ci5fb25DaGFuZ2UoZnVuY3Rpb24oKXt0LnNldEZyb21RdWF0ZXJuaW9uKHIsdm9pZCAwLCExKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Bvc2l0aW9uOntjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTplfSxyb3RhdGlvbjp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6dH0scXVhdGVybmlvbjp7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6cn0sc2NhbGU6e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOm59LG1vZGVsVmlld01hdHJpeDp7dmFsdWU6bmV3IEVlfSxub3JtYWxNYXRyaXg6e3ZhbHVlOm5ldyBtfX0pO3RoaXMubWF0cml4PW5ldyBFZTt0aGlzLm1hdHJpeFdvcmxkPW5ldyBFZTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9Zi5EZWZhdWx0TWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITE7dGhpcy5sYXllcnM9bmV3IG87dGhpcy52aXNpYmxlPSEwO3RoaXMucmVjZWl2ZVNoYWRvdz10aGlzLmNhc3RTaGFkb3c9ITE7dGhpcy5mcnVzdHVtQ3VsbGVkPSEwO3RoaXMucmVuZGVyT3JkZXI9MDt0aGlzLnVzZXJEYXRhPXt9fWZ1bmN0aW9uIE9lKCl7Zi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNjZW5lXCI7dGhpcy5vdmVycmlkZU1hdGVyaWFsPXRoaXMuZm9nPXRoaXMuZW52aXJvbm1lbnQ9dGhpcy5iYWNrZ3JvdW5kPW51bGw7dGhpcy5hdXRvVXBkYXRlPSEwO1widW5kZWZpbmVkXCIhPT10eXBlb2YgX19USFJFRV9ERVZUT09MU19fJiZfX1RIUkVFX0RFVlRPT0xTX18uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJvYnNlcnZlXCIse2RldGFpbDp0aGlzfSkpfWZ1bmN0aW9uIG4oZSx0KXt0aGlzLm1pbj12b2lkIDAhPT1lP2U6bmV3IFRlKEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT10P3Q6bmV3IFRlKC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KX1mdW5jdGlvbiBhKGUsdCxyLG4saSl7dmFyIG87dmFyIGE9MDtmb3Iobz1lLmxlbmd0aC0zO2E8PW87YSs9Myl7UGEuZnJvbUFycmF5KGUsYSk7dmFyIHM9aS54Kk1hdGguYWJzKFBhLngpK2kueSpNYXRoLmFicyhQYS55KStpLnoqTWF0aC5hYnMoUGEueiksdT10LmRvdChQYSksYz1yLmRvdChQYSksbD1uLmRvdChQYSk7aWYoTWF0aC5tYXgoLU1hdGgubWF4KHUsYyxsKSxNYXRoLm1pbih1LGMsbCkpPnMpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gbChlLHQpe3RoaXMuY2VudGVyPXZvaWQgMCE9PWU/ZTpuZXcgVGU7dGhpcy5yYWRpdXM9dm9pZCAwIT09dD90Oi0xfWZ1bmN0aW9uIHMoZSx0KXt0aGlzLm9yaWdpbj12b2lkIDAhPT1lP2U6bmV3IFRlO3RoaXMuZGlyZWN0aW9uPXZvaWQgMCE9PXQ/dDpuZXcgVGUoMCwwLC0xKX1mdW5jdGlvbiBnKGUsdCl7dGhpcy5ub3JtYWw9dm9pZCAwIT09ZT9lOm5ldyBUZSgxLDAsMCk7dGhpcy5jb25zdGFudD12b2lkIDAhPT10P3Q6MH1mdW5jdGlvbiBiKGUsdCxyKXt0aGlzLmE9dm9pZCAwIT09ZT9lOm5ldyBUZTt0aGlzLmI9dm9pZCAwIT09dD90Om5ldyBUZTt0aGlzLmM9dm9pZCAwIT09cj9yOm5ldyBUZX1mdW5jdGlvbiB2KGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmdm9pZCAwPT09cj90aGlzLnNldChlKTp0aGlzLnNldFJHQihlLHQscil9ZnVuY3Rpb24gdShlLHQscil7MD5yJiYocis9MSk7MTxyJiYtLXI7cmV0dXJuIHI8MS82P2UrNioodC1lKSpyOi41PnI/dDpyPDIvMz9lKzYqKHQtZSkqKDIvMy1yKTplfWZ1bmN0aW9uIGMoZSl7cmV0dXJuLjA0MDQ1PmU/LjA3NzM5OTM4MDgqZTpNYXRoLnBvdyguOTQ3ODY3Mjk4NiplKy4wNTIxMzI3MDE0LDIuNCl9ZnVuY3Rpb24gaChlKXtyZXR1cm4uMDAzMTMwOD5lPzEyLjkyKmU6MS4wNTUqTWF0aC5wb3coZSwuNDE2NjYpLS4wNTV9ZnVuY3Rpb24gXyhlLHQscixuLGksbyl7dGhpcy5hPWU7dGhpcy5iPXQ7dGhpcy5jPXI7dGhpcy5ub3JtYWw9biYmbi5pc1ZlY3RvcjM/bjpuZXcgVGU7dGhpcy52ZXJ0ZXhOb3JtYWxzPUFycmF5LmlzQXJyYXkobik/bjpbXTt0aGlzLmNvbG9yPWkmJmkuaXNDb2xvcj9pOm5ldyB2O3RoaXMudmVydGV4Q29sb3JzPUFycmF5LmlzQXJyYXkoaSk/aTpbXTt0aGlzLm1hdGVyaWFsSW5kZXg9dm9pZCAwIT09bz9vOjB9ZnVuY3Rpb24geSgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6ZXMrK30pO3RoaXMudXVpZD1Wby5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJNYXRlcmlhbFwiO3RoaXMuZm9nPSEwO3RoaXMuYmxlbmRpbmc9MTt0aGlzLnNpZGU9MDt0aGlzLnZlcnRleENvbG9ycz10aGlzLmZsYXRTaGFkaW5nPSExO3RoaXMub3BhY2l0eT0xO3RoaXMudHJhbnNwYXJlbnQ9ITE7dGhpcy5ibGVuZFNyYz0yMDQ7dGhpcy5ibGVuZERzdD0yMDU7dGhpcy5ibGVuZEVxdWF0aW9uPTEwMDt0aGlzLmJsZW5kRXF1YXRpb25BbHBoYT10aGlzLmJsZW5kRHN0QWxwaGE9dGhpcy5ibGVuZFNyY0FscGhhPW51bGw7dGhpcy5kZXB0aEZ1bmM9Mzt0aGlzLmRlcHRoV3JpdGU9dGhpcy5kZXB0aFRlc3Q9ITA7dGhpcy5zdGVuY2lsV3JpdGVNYXNrPTI1NTt0aGlzLnN0ZW5jaWxGdW5jPTUxOTt0aGlzLnN0ZW5jaWxSZWY9MDt0aGlzLnN0ZW5jaWxGdW5jTWFzaz0yNTU7dGhpcy5zdGVuY2lsWlBhc3M9dGhpcy5zdGVuY2lsWkZhaWw9dGhpcy5zdGVuY2lsRmFpbD03NjgwO3RoaXMuc3RlbmNpbFdyaXRlPSExO3RoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbDt0aGlzLmNsaXBTaGFkb3dzPXRoaXMuY2xpcEludGVyc2VjdGlvbj0hMTt0aGlzLnNoYWRvd1NpZGU9bnVsbDt0aGlzLmNvbG9yV3JpdGU9ITA7dGhpcy5wcmVjaXNpb249bnVsbDt0aGlzLnBvbHlnb25PZmZzZXQ9ITE7dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTA7dGhpcy5kaXRoZXJpbmc9ITE7dGhpcy5hbHBoYVRlc3Q9MDt0aGlzLnByZW11bHRpcGxpZWRBbHBoYT0hMTt0aGlzLnRvbmVNYXBwZWQ9dGhpcy52aXNpYmxlPSEwO3RoaXMudXNlckRhdGE9e307dGhpcy52ZXJzaW9uPTB9ZnVuY3Rpb24geChlKXt5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaEJhc2ljTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyB2KDE2Nzc3MjE1KTt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5jb21iaW5lPTA7dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhlKX1mdW5jdGlvbiBFKGUsdCxyKXtpZihBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IGFycmF5IHNob3VsZCBiZSBhIFR5cGVkIEFycmF5LlwiKTt0aGlzLm5hbWU9XCJcIjt0aGlzLmFycmF5PWU7dGhpcy5pdGVtU2l6ZT10O3RoaXMuY291bnQ9dm9pZCAwIT09ZT9lLmxlbmd0aC90OjA7dGhpcy5ub3JtYWxpemVkPSEwPT09cjt0aGlzLnVzYWdlPTM1MDQ0O3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLnZlcnNpb249MH1mdW5jdGlvbiB3KGUsdCxyKXtFLmNhbGwodGhpcyxuZXcgSW50OEFycmF5KGUpLHQscil9ZnVuY3Rpb24gUyhlLHQscil7RS5jYWxsKHRoaXMsbmV3IFVpbnQ4QXJyYXkoZSksdCxyKX1mdW5jdGlvbiBNKGUsdCxyKXtFLmNhbGwodGhpcyxuZXcgVWludDhDbGFtcGVkQXJyYXkoZSksdCxyKX1mdW5jdGlvbiBDKGUsdCxyKXtFLmNhbGwodGhpcyxuZXcgSW50MTZBcnJheShlKSx0LHIpfWZ1bmN0aW9uIE8oZSx0LHIpe0UuY2FsbCh0aGlzLG5ldyBVaW50MTZBcnJheShlKSx0LHIpfWZ1bmN0aW9uIFAoZSx0LHIpe0UuY2FsbCh0aGlzLG5ldyBJbnQzMkFycmF5KGUpLHQscil9ZnVuY3Rpb24gQShlLHQscil7RS5jYWxsKHRoaXMsbmV3IFVpbnQzMkFycmF5KGUpLHQscil9ZnVuY3Rpb24gaihlLHQscil7RS5jYWxsKHRoaXMsbmV3IEZsb2F0MzJBcnJheShlKSx0LHIpfWZ1bmN0aW9uIFIoZSx0LHIpe0UuY2FsbCh0aGlzLG5ldyBGbG9hdDY0QXJyYXkoZSksdCxyKX1mdW5jdGlvbiBrKCl7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLm5vcm1hbHM9W107dGhpcy5jb2xvcnM9W107dGhpcy51dnM9W107dGhpcy51dnMyPVtdO3RoaXMuZ3JvdXBzPVtdO3RoaXMubW9ycGhUYXJnZXRzPXt9O3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9dGhpcy51dnNOZWVkVXBkYXRlPXRoaXMuY29sb3JzTmVlZFVwZGF0ZT10aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPSExfWZ1bmN0aW9uIEwoZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybi1JbmZpbml0eTtmb3IodmFyIHQ9ZVswXSxyPTEsbj1lLmxlbmd0aDtyPG47KytyKWVbcl0+dCYmKHQ9ZVtyXSk7cmV0dXJuIHR9ZnVuY3Rpb24gTigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6cnMrPTJ9KTt0aGlzLnV1aWQ9Vm8uZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiQnVmZmVyR2VvbWV0cnlcIjt0aGlzLmluZGV4PW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O3RoaXMubW9ycGhBdHRyaWJ1dGVzPXt9O3RoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmU9ITE7dGhpcy5ncm91cHM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5kcmF3UmFuZ2U9e3N0YXJ0OjAsY291bnQ6SW5maW5pdHl9O3RoaXMudXNlckRhdGE9e319ZnVuY3Rpb24gSShlLHQpe2YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1lP2U6bmV3IE47dGhpcy5tYXRlcmlhbD12b2lkIDAhPT10P3Q6bmV3IHg7dGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX1mdW5jdGlvbiBEKGUsdCxyLG4saSxvLGEscyl7aWYobnVsbD09PSgxPT09dC5zaWRlP24uaW50ZXJzZWN0VHJpYW5nbGUoYSxvLGksITAscyk6bi5pbnRlcnNlY3RUcmlhbmdsZShpLG8sYSwyIT09dC5zaWRlLHMpKSlyZXR1cm4gbnVsbDtDcy5jb3B5KHMpO0NzLmFwcGx5TWF0cml4NChlLm1hdHJpeFdvcmxkKTt0PXIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKENzKTtyZXR1cm4gdDxyLm5lYXJ8fHQ+ci5mYXI/bnVsbDp7ZGlzdGFuY2U6dCxwb2ludDpDcy5jbG9uZSgpLG9iamVjdDplfX1mdW5jdGlvbiBCKGUsdCxyLG4saSxvLGEscyx1LGMsbCxoKXtwcy5mcm9tQnVmZmVyQXR0cmlidXRlKGksYyk7ZnMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShpLGwpO2RzLmZyb21CdWZmZXJBdHRyaWJ1dGUoaSxoKTtpPWUubW9ycGhUYXJnZXRJbmZsdWVuY2VzO2lmKHQubW9ycGhUYXJnZXRzJiZvJiZpKXtfcy5zZXQoMCwwLDApO3lzLnNldCgwLDAsMCk7YnMuc2V0KDAsMCwwKTtmb3IodmFyIHA9MCxmPW8ubGVuZ3RoO3A8ZjtwKyspe3ZhciBkPWlbcF0sdj1vW3BdOzAhPT1kJiYodnMuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh2LGMpLG1zLmZyb21CdWZmZXJBdHRyaWJ1dGUodixsKSxncy5mcm9tQnVmZmVyQXR0cmlidXRlKHYsaCksYT8oX3MuYWRkU2NhbGVkVmVjdG9yKHZzLGQpLHlzLmFkZFNjYWxlZFZlY3RvcihtcyxkKSxicy5hZGRTY2FsZWRWZWN0b3IoZ3MsZCkpOihfcy5hZGRTY2FsZWRWZWN0b3IodnMuc3ViKHBzKSxkKSx5cy5hZGRTY2FsZWRWZWN0b3IobXMuc3ViKGZzKSxkKSxicy5hZGRTY2FsZWRWZWN0b3IoZ3Muc3ViKGRzKSxkKSkpfXBzLmFkZChfcyk7ZnMuYWRkKHlzKTtkcy5hZGQoYnMpfWUuaXNTa2lubmVkTWVzaCYmKGUuYm9uZVRyYW5zZm9ybShjLHBzKSxlLmJvbmVUcmFuc2Zvcm0obCxmcyksZS5ib25lVHJhbnNmb3JtKGgsZHMpKTtpZihlPUQoZSx0LHIsbixwcyxmcyxkcyxNcykpcyYmKHhzLmZyb21CdWZmZXJBdHRyaWJ1dGUocyxjKSx3cy5mcm9tQnVmZmVyQXR0cmlidXRlKHMsbCksU3MuZnJvbUJ1ZmZlckF0dHJpYnV0ZShzLGgpLGUudXY9Yi5nZXRVVihNcyxwcyxmcyxkcyx4cyx3cyxTcyxuZXcgTWUpKSx1JiYoeHMuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh1LGMpLHdzLmZyb21CdWZmZXJBdHRyaWJ1dGUodSxsKSxTcy5mcm9tQnVmZmVyQXR0cmlidXRlKHUsaCksZS51djI9Yi5nZXRVVihNcyxwcyxmcyxkcyx4cyx3cyxTcyxuZXcgTWUpKSxzPW5ldyBfKGMsbCxoKSxiLmdldE5vcm1hbChwcyxmcyxkcyxzLm5vcm1hbCksZS5mYWNlPXM7cmV0dXJuIGV9ZnVuY3Rpb24gRigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6VHMrPTJ9KTt0aGlzLnV1aWQ9Vm8uZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiR2VvbWV0cnlcIjt0aGlzLnZlcnRpY2VzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMuZmFjZXM9W107dGhpcy5mYWNlVmVydGV4VXZzPVtbXV07dGhpcy5tb3JwaFRhcmdldHM9W107dGhpcy5tb3JwaE5vcm1hbHM9W107dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdO3RoaXMubGluZURpc3RhbmNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9dGhpcy5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT10aGlzLmNvbG9yc05lZWRVcGRhdGU9dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnV2c05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9dGhpcy5lbGVtZW50c05lZWRVcGRhdGU9ITF9ZnVuY3Rpb24geihlKXt2YXIgdD17fSxyO2ZvcihyIGluIGUpe3Rbcl09e307Zm9yKHZhciBuIGluIGVbcl0pe3ZhciBpPWVbcl1bbl07aSYmKGkuaXNDb2xvcnx8aS5pc01hdHJpeDN8fGkuaXNNYXRyaXg0fHxpLmlzVmVjdG9yMnx8aS5pc1ZlY3RvcjN8fGkuaXNWZWN0b3I0fHxpLmlzVGV4dHVyZSk/dFtyXVtuXT1pLmNsb25lKCk6QXJyYXkuaXNBcnJheShpKT90W3JdW25dPWkuc2xpY2UoKTp0W3JdW25dPWl9fXJldHVybiB0fWZ1bmN0aW9uICQoZSl7Zm9yKHZhciB0PXt9LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49eihlW3JdKSxpO2ZvcihpIGluIG4pdFtpXT1uW2ldfXJldHVybiB0fWZ1bmN0aW9uIEcoZSl7eS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYWRlck1hdGVyaWFsXCI7dGhpcy5kZWZpbmVzPXt9O3RoaXMudW5pZm9ybXM9e307dGhpcy52ZXJ0ZXhTaGFkZXI9XCJ2b2lkIG1haW4oKSB7XFxuXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbn1cIjt0aGlzLmZyYWdtZW50U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAwLjAsIDEuMCApO1xcbn1cIjt0aGlzLmxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz10aGlzLmNsaXBwaW5nPXRoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMuZXh0ZW5zaW9ucz17ZGVyaXZhdGl2ZXM6ITEsZnJhZ0RlcHRoOiExLGRyYXdCdWZmZXJzOiExLHNoYWRlclRleHR1cmVMT0Q6ITF9O3RoaXMuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz17Y29sb3I6WzEsMSwxXSx1djpbMCwwXSx1djI6WzAsMF19O3RoaXMuaW5kZXgwQXR0cmlidXRlTmFtZT12b2lkIDA7dGhpcy51bmlmb3Jtc05lZWRVcGRhdGU9ITE7dm9pZCAwIT09ZSYmKHZvaWQgMCE9PWUuYXR0cmlidXRlcyYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKSx0aGlzLnNldFZhbHVlcyhlKSl9ZnVuY3Rpb24gVigpe2YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDYW1lcmFcIjt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZT1uZXcgRWU7dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBFZTt0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlPW5ldyBFZX1mdW5jdGlvbiBIKGUsdCxyLG4pe1YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQZXJzcGVjdGl2ZUNhbWVyYVwiO3RoaXMuZm92PXZvaWQgMCE9PWU/ZTo1MDt0aGlzLnpvb209MTt0aGlzLm5lYXI9dm9pZCAwIT09cj9yOi4xO3RoaXMuZmFyPXZvaWQgMCE9PW4/bjoyZTM7dGhpcy5mb2N1cz0xMDt0aGlzLmFzcGVjdD12b2lkIDAhPT10P3Q6MTt0aGlzLnZpZXc9bnVsbDt0aGlzLmZpbG1HYXVnZT0zNTt0aGlzLmZpbG1PZmZzZXQ9MDt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX1mdW5jdGlvbiBVKGUsdCxhKXtmLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3ViZUNhbWVyYVwiO2lmKCEwIT09YS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldCljb25zb2xlLmVycm9yKFwiVEhSRUUuQ3ViZUNhbWVyYTogVGhlIGNvbnN0cnVjdG9yIG5vdyBleHBlY3RzIGFuIGluc3RhbmNlIG9mIFdlYkdMQ3ViZVJlbmRlclRhcmdldCBhcyB0aGlyZCBwYXJhbWV0ZXIuXCIpO2Vsc2V7dGhpcy5yZW5kZXJUYXJnZXQ9YTt2YXIgbz1uZXcgSCg5MCwxLGUsdCk7by5sYXllcnM9dGhpcy5sYXllcnM7by51cC5zZXQoMCwtMSwwKTtvLmxvb2tBdChuZXcgVGUoMSwwLDApKTt0aGlzLmFkZChvKTt2YXIgcz1uZXcgSCg5MCwxLGUsdCk7cy5sYXllcnM9dGhpcy5sYXllcnM7cy51cC5zZXQoMCwtMSwwKTtzLmxvb2tBdChuZXcgVGUoLTEsMCwwKSk7dGhpcy5hZGQocyk7dmFyIHU9bmV3IEgoOTAsMSxlLHQpO3UubGF5ZXJzPXRoaXMubGF5ZXJzO3UudXAuc2V0KDAsMCwxKTt1Lmxvb2tBdChuZXcgVGUoMCwxLDApKTt0aGlzLmFkZCh1KTt2YXIgYz1uZXcgSCg5MCwxLGUsdCk7Yy5sYXllcnM9dGhpcy5sYXllcnM7Yy51cC5zZXQoMCwwLC0xKTtjLmxvb2tBdChuZXcgVGUoMCwtMSwwKSk7dGhpcy5hZGQoYyk7dmFyIGw9bmV3IEgoOTAsMSxlLHQpO2wubGF5ZXJzPXRoaXMubGF5ZXJzO2wudXAuc2V0KDAsLTEsMCk7bC5sb29rQXQobmV3IFRlKDAsMCwxKSk7dGhpcy5hZGQobCk7dmFyIGg9bmV3IEgoOTAsMSxlLHQpO2gubGF5ZXJzPXRoaXMubGF5ZXJzO2gudXAuc2V0KDAsLTEsMCk7aC5sb29rQXQobmV3IFRlKDAsMCwtMSkpO3RoaXMuYWRkKGgpO3RoaXMudXBkYXRlPWZ1bmN0aW9uKGUsdCl7bnVsbD09PXRoaXMucGFyZW50JiZ0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCk7dmFyIHI9ZS54ci5lbmFibGVkLG49ZS5nZXRSZW5kZXJUYXJnZXQoKTtlLnhyLmVuYWJsZWQ9ITE7dmFyIGk9YS50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwczthLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPSExO2Uuc2V0UmVuZGVyVGFyZ2V0KGEsMCk7ZS5yZW5kZXIodCxvKTtlLnNldFJlbmRlclRhcmdldChhLDEpO2UucmVuZGVyKHQscyk7ZS5zZXRSZW5kZXJUYXJnZXQoYSwyKTtlLnJlbmRlcih0LHUpO2Uuc2V0UmVuZGVyVGFyZ2V0KGEsMyk7ZS5yZW5kZXIodCxjKTtlLnNldFJlbmRlclRhcmdldChhLDQpO2UucmVuZGVyKHQsbCk7YS50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1pO2Uuc2V0UmVuZGVyVGFyZ2V0KGEsNSk7ZS5yZW5kZXIodCxoKTtlLnNldFJlbmRlclRhcmdldChuKTtlLnhyLmVuYWJsZWQ9cn07dGhpcy5jbGVhcj1mdW5jdGlvbihlLHQscixuKXtmb3IodmFyIGk9ZS5nZXRSZW5kZXJUYXJnZXQoKSxvPTA7Nj5vO28rKyllLnNldFJlbmRlclRhcmdldChhLG8pLGUuY2xlYXIodCxyLG4pO2Uuc2V0UmVuZGVyVGFyZ2V0KGkpfX19ZnVuY3Rpb24gcShlLHQscil7TnVtYmVyLmlzSW50ZWdlcih0KSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMQ3ViZVJlbmRlclRhcmdldDogY29uc3RydWN0b3Igc2lnbmF0dXJlIGlzIG5vdyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQoIHNpemUsIG9wdGlvbnMgKVwiKSx0PXIpO1QuY2FsbCh0aGlzLGUsZSx0KX1mdW5jdGlvbiBQZShlLHQscixuLGksbyxhLHMsdSxjLGwsaCl7cC5jYWxsKHRoaXMsbnVsbCxvLGEscyx1LGMsbixpLGwsaCk7dGhpcy5pbWFnZT17ZGF0YTplfHxudWxsLHdpZHRoOnR8fDEsaGVpZ2h0OnJ8fDF9O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PXU/dToxMDAzO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWM/YzoxMDAzO3RoaXMuZmxpcFk9dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITE7dGhpcy51bnBhY2tBbGlnbm1lbnQ9MTt0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uIEFlKGUsdCxyLG4saSxvKXt0aGlzLnBsYW5lcz1bdm9pZCAwIT09ZT9lOm5ldyBnLHZvaWQgMCE9PXQ/dDpuZXcgZyx2b2lkIDAhPT1yP3I6bmV3IGcsdm9pZCAwIT09bj9uOm5ldyBnLHZvaWQgMCE9PWk/aTpuZXcgZyx2b2lkIDAhPT1vP286bmV3IGddfWZ1bmN0aW9uIGplKCl7ZnVuY3Rpb24gcihlLHQpeyExIT09aSYmKG8oZSx0KSxuLnJlcXVlc3RBbmltYXRpb25GcmFtZShyKSl9dmFyIG49bnVsbCxpPSExLG89bnVsbDtyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXshMCE9PWkmJm51bGwhPT1vJiYobi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUociksaT0hMCl9LHN0b3A6ZnVuY3Rpb24oKXtpPSExfSxzZXRBbmltYXRpb25Mb29wOmZ1bmN0aW9uKGUpe289ZX0sc2V0Q29udGV4dDpmdW5jdGlvbihlKXtuPWV9fX1mdW5jdGlvbiBSZShvLGUpe2Z1bmN0aW9uIGEoZSx0KXt2YXIgcj1lLmFycmF5LG49ZS51c2FnZSxpPW8uY3JlYXRlQnVmZmVyKCk7by5iaW5kQnVmZmVyKHQsaSk7by5idWZmZXJEYXRhKHQscixuKTtlLm9uVXBsb2FkQ2FsbGJhY2soKTt0PTUxMjY7ciBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheT90PTUxMjY6ciBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheT9jb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTEF0dHJpYnV0ZXM6IFVuc3VwcG9ydGVkIGRhdGEgYnVmZmVyIGZvcm1hdDogRmxvYXQ2NEFycmF5LlwiKTpyIGluc3RhbmNlb2YgVWludDE2QXJyYXk/dD01MTIzOnIgaW5zdGFuY2VvZiBJbnQxNkFycmF5P3Q9NTEyMjpyIGluc3RhbmNlb2YgVWludDMyQXJyYXk/dD01MTI1OnIgaW5zdGFuY2VvZiBJbnQzMkFycmF5P3Q9NTEyNDpyIGluc3RhbmNlb2YgSW50OEFycmF5P3Q9NTEyMDpyIGluc3RhbmNlb2YgVWludDhBcnJheSYmKHQ9NTEyMSk7cmV0dXJue2J1ZmZlcjppLHR5cGU6dCxieXRlc1BlckVsZW1lbnQ6ci5CWVRFU19QRVJfRUxFTUVOVCx2ZXJzaW9uOmUudmVyc2lvbn19dmFyIHM9ZS5pc1dlYkdMMix1PW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7ZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYoZT1lLmRhdGEpO3JldHVybiB1LmdldChlKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe2UuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSYmKGU9ZS5kYXRhKTt2YXIgdD11LmdldChlKTt0JiYoby5kZWxldGVCdWZmZXIodC5idWZmZXIpLHUuZGVsZXRlKGUpKX0sdXBkYXRlOmZ1bmN0aW9uKGUsdCl7ZS5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYoZT1lLmRhdGEpO3ZhciByPXUuZ2V0KGUpO2lmKHZvaWQgMD09PXIpdS5zZXQoZSxhKGUsdCkpO2Vsc2UgaWYoci52ZXJzaW9uPGUudmVyc2lvbil7dmFyIG49ZS5hcnJheSxpPWUudXBkYXRlUmFuZ2U7by5iaW5kQnVmZmVyKHQsci5idWZmZXIpOy0xPT09aS5jb3VudD9vLmJ1ZmZlclN1YkRhdGEodCwwLG4pOihzP28uYnVmZmVyU3ViRGF0YSh0LGkub2Zmc2V0Km4uQllURVNfUEVSX0VMRU1FTlQsbixpLm9mZnNldCxpLmNvdW50KTpvLmJ1ZmZlclN1YkRhdGEodCxpLm9mZnNldCpuLkJZVEVTX1BFUl9FTEVNRU5ULG4uc3ViYXJyYXkoaS5vZmZzZXQsaS5vZmZzZXQraS5jb3VudCkpLGkuY291bnQ9LTEpO3IudmVyc2lvbj1lLnZlcnNpb259fX19ZnVuY3Rpb24gVyhlLHQscixuKXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGxhbmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6ZSxoZWlnaHQ6dCx3aWR0aFNlZ21lbnRzOnIsaGVpZ2h0U2VnbWVudHM6bn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFgoZSx0LHIsbikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFgoZSx0LHIsbil7Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmUsaGVpZ2h0OnQsd2lkdGhTZWdtZW50czpyLGhlaWdodFNlZ21lbnRzOm59O2U9ZXx8MTt0PXR8fDE7dmFyIGk9ZS8yLG89dC8yO3I9TWF0aC5mbG9vcihyKXx8MTtuPU1hdGguZmxvb3Iobil8fDE7dmFyIGE9cisxLHM9bisxLHU9ZS9yLGM9dC9uLGw9W10saD1bXSxwPVtdLGY9W107Zm9yKGU9MDtlPHM7ZSsrKXt2YXIgZD1lKmMtbztmb3IodD0wO3Q8YTt0KyspaC5wdXNoKHQqdS1pLC1kLDApLHAucHVzaCgwLDAsMSksZi5wdXNoKHQvciksZi5wdXNoKDEtZS9uKX1mb3IoZT0wO2U8bjtlKyspZm9yKHQ9MDt0PHI7dCsrKWk9dCthKihlKzEpLG89dCsxK2EqKGUrMSkscz10KzErYSplLGwucHVzaCh0K2EqZSxpLHMpLGwucHVzaChpLG8scyk7dGhpcy5zZXRJbmRleChsKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooaCwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgaihwLDMpKTt0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IGooZiwyKSl9ZnVuY3Rpb24ga2UoaSxyLG8sbil7ZnVuY3Rpb24gYShlLHQpe3IuYnVmZmVycy5jb2xvci5zZXRDbGVhcihlLnIsZS5nLGUuYix0LG4pfXZhciBzPW5ldyB2KDApLHU9MCxjLGwsaD1udWxsLHA9MCxmPW51bGw7cmV0dXJue2dldENsZWFyQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gc30sc2V0Q2xlYXJDb2xvcjpmdW5jdGlvbihlLHQpe3Muc2V0KGUpO3U9dm9pZCAwIT09dD90OjE7YShzLHUpfSxnZXRDbGVhckFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIHV9LHNldENsZWFyQWxwaGE6ZnVuY3Rpb24oZSl7dT1lO2Eocyx1KX0scmVuZGVyOmZ1bmN0aW9uKGUsdCxyLG4pe3Q9dC5iYWNrZ3JvdW5kO3I9aS54cjsocj1yLmdldFNlc3Npb24mJnIuZ2V0U2Vzc2lvbigpKSYmXCJhZGRpdGl2ZVwiPT09ci5lbnZpcm9ubWVudEJsZW5kTW9kZSYmKHQ9bnVsbCk7bnVsbD09PXQ/YShzLHUpOnQmJnQuaXNDb2xvciYmKGEodCwxKSxuPSEwKTsoaS5hdXRvQ2xlYXJ8fG4pJiZpLmNsZWFyKGkuYXV0b0NsZWFyQ29sb3IsaS5hdXRvQ2xlYXJEZXB0aCxpLmF1dG9DbGVhclN0ZW5jaWwpO2lmKHQmJih0LmlzQ3ViZVRleHR1cmV8fHQuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXR8fDMwNj09PXQubWFwcGluZykpe3ZvaWQgMD09PWwmJihsPW5ldyBJKG5ldyBqcygxLDEsMSksbmV3IEcoe3R5cGU6XCJCYWNrZ3JvdW5kQ3ViZU1hdGVyaWFsXCIsdW5pZm9ybXM6eihEcy5jdWJlLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6RHMuY3ViZS52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6RHMuY3ViZS5mcmFnbWVudFNoYWRlcixzaWRlOjEsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpLGwuZ2VvbWV0cnkuZGVsZXRlQXR0cmlidXRlKFwibm9ybWFsXCIpLGwuZ2VvbWV0cnkuZGVsZXRlQXR0cmlidXRlKFwidXZcIiksbC5vbkJlZm9yZVJlbmRlcj1mdW5jdGlvbihlLHQscil7dGhpcy5tYXRyaXhXb3JsZC5jb3B5UG9zaXRpb24oci5tYXRyaXhXb3JsZCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLm1hdGVyaWFsLFwiZW52TWFwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLmVudk1hcC52YWx1ZX19KSxvLnVwZGF0ZShsKSk7bj10LmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0P3QudGV4dHVyZTp0O2wubWF0ZXJpYWwudW5pZm9ybXMuZW52TWFwLnZhbHVlPW47bC5tYXRlcmlhbC51bmlmb3Jtcy5mbGlwRW52TWFwLnZhbHVlPW4uaXNDdWJlVGV4dHVyZT8tMToxO2lmKGghPT10fHxwIT09bi52ZXJzaW9ufHxmIT09aS50b25lTWFwcGluZylsLm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwLGg9dCxwPW4udmVyc2lvbixmPWkudG9uZU1hcHBpbmc7ZS51bnNoaWZ0KGwsbC5nZW9tZXRyeSxsLm1hdGVyaWFsLDAsMCxudWxsKX1lbHNlIGlmKHQmJnQuaXNUZXh0dXJlKXt2b2lkIDA9PT1jJiYoYz1uZXcgSShuZXcgWCgyLDIpLG5ldyBHKHt0eXBlOlwiQmFja2dyb3VuZE1hdGVyaWFsXCIsdW5pZm9ybXM6eihEcy5iYWNrZ3JvdW5kLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6RHMuYmFja2dyb3VuZC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6RHMuYmFja2dyb3VuZC5mcmFnbWVudFNoYWRlcixzaWRlOjAsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpLGMuZ2VvbWV0cnkuZGVsZXRlQXR0cmlidXRlKFwibm9ybWFsXCIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLm1hdGVyaWFsLFwibWFwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaWZvcm1zLnQyRC52YWx1ZX19KSxvLnVwZGF0ZShjKSk7Yy5tYXRlcmlhbC51bmlmb3Jtcy50MkQudmFsdWU9dDshMD09PXQubWF0cml4QXV0b1VwZGF0ZSYmdC51cGRhdGVNYXRyaXgoKTtjLm1hdGVyaWFsLnVuaWZvcm1zLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkodC5tYXRyaXgpO2lmKGghPT10fHxwIT09dC52ZXJzaW9ufHxmIT09aS50b25lTWFwcGluZyljLm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwLGg9dCxwPXQudmVyc2lvbixmPWkudG9uZU1hcHBpbmc7ZS51bnNoaWZ0KGMsYy5nZW9tZXRyeSxjLm1hdGVyaWFsLDAsMCxudWxsKX19fX1mdW5jdGlvbiBMZShvLGEscyxlKXt2YXIgdT1lLmlzV2ViR0wyLGM7dGhpcy5zZXRNb2RlPWZ1bmN0aW9uKGUpe2M9ZX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oZSx0KXtvLmRyYXdBcnJheXMoYyxlLHQpO3MudXBkYXRlKHQsYyl9O3RoaXMucmVuZGVySW5zdGFuY2VzPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKDAhPT1uKXtpZih1KXtlPW87dmFyIGk9XCJkcmF3QXJyYXlzSW5zdGFuY2VkXCJ9ZWxzZSBpZihlPWEuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKSxpPVwiZHJhd0FycmF5c0luc3RhbmNlZEFOR0xFXCIsbnVsbD09PWUpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7cmV0dXJufWVbaV0oYyx0LHIsbik7cy51cGRhdGUocixjLG4pfX19ZnVuY3Rpb24gTmUodCxyLGUpe2Z1bmN0aW9uIG4oZSl7aWYoXCJoaWdocFwiPT09ZSl7aWYoMDx0LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCgzNTYzMywzNjMzOCkucHJlY2lzaW9uJiYwPHQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KDM1NjMyLDM2MzM4KS5wcmVjaXNpb24pcmV0dXJuXCJoaWdocFwiO2U9XCJtZWRpdW1wXCJ9cmV0dXJuXCJtZWRpdW1wXCI9PT1lJiYwPHQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KDM1NjMzLDM2MzM3KS5wcmVjaXNpb24mJjA8dC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoMzU2MzIsMzYzMzcpLnByZWNpc2lvbj9cIm1lZGl1bXBcIjpcImxvd3BcIn12YXIgaSxvPVwidW5kZWZpbmVkXCIhPT10eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCYmdCBpbnN0YW5jZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHR8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgV2ViR0wyQ29tcHV0ZVJlbmRlcmluZ0NvbnRleHQmJnQgaW5zdGFuY2VvZiBXZWJHTDJDb21wdXRlUmVuZGVyaW5nQ29udGV4dCxhPXZvaWQgMCE9PWUucHJlY2lzaW9uP2UucHJlY2lzaW9uOlwiaGlnaHBcIixzPW4oYSk7cyE9PWEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOlwiLGEsXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLHMsXCJpbnN0ZWFkLlwiKSxhPXMpO2U9ITA9PT1lLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI7cz10LmdldFBhcmFtZXRlcigzNDkzMCk7dmFyIHU9dC5nZXRQYXJhbWV0ZXIoMzU2NjApLGM9dC5nZXRQYXJhbWV0ZXIoMzM3OSksbD10LmdldFBhcmFtZXRlcigzNDA3NiksaD10LmdldFBhcmFtZXRlcigzNDkyMSkscD10LmdldFBhcmFtZXRlcigzNjM0NyksZj10LmdldFBhcmFtZXRlcigzNjM0OCksZD10LmdldFBhcmFtZXRlcigzNjM0OSksdj0wPHUsbT1vfHwhIXIuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIiksZz12JiZtLF89bz90LmdldFBhcmFtZXRlcigzNjE4Myk6MDtyZXR1cm57aXNXZWJHTDI6byxnZXRNYXhBbmlzb3Ryb3B5OmZ1bmN0aW9uKCl7aWYodm9pZCAwIT09aSlyZXR1cm4gaTt2YXIgZT1yLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTtyZXR1cm4gaT1udWxsIT09ZT90LmdldFBhcmFtZXRlcihlLk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCk6MH0sZ2V0TWF4UHJlY2lzaW9uOm4scHJlY2lzaW9uOmEsbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjplLG1heFRleHR1cmVzOnMsbWF4VmVydGV4VGV4dHVyZXM6dSxtYXhUZXh0dXJlU2l6ZTpjLG1heEN1YmVtYXBTaXplOmwsbWF4QXR0cmlidXRlczpoLG1heFZlcnRleFVuaWZvcm1zOnAsbWF4VmFyeWluZ3M6ZixtYXhGcmFnbWVudFVuaWZvcm1zOmQsdmVydGV4VGV4dHVyZXM6dixmbG9hdEZyYWdtZW50VGV4dHVyZXM6bSxmbG9hdFZlcnRleFRleHR1cmVzOmcsbWF4U2FtcGxlczpffX1mdW5jdGlvbiBJZSgpe2Z1bmN0aW9uIHUoKXt2LnZhbHVlIT09bCYmKHYudmFsdWU9bCx2Lm5lZWRzVXBkYXRlPTA8aCk7YS5udW1QbGFuZXM9aDthLm51bUludGVyc2VjdGlvbj0wfWZ1bmN0aW9uIGMoZSx0LHIsbil7dmFyIGk9bnVsbCE9PWU/ZS5sZW5ndGg6MCxvPW51bGw7aWYoMCE9PWkpe289di52YWx1ZTtpZighMCE9PW58fG51bGw9PT1vKXtuPXIrNCppO3Q9dC5tYXRyaXhXb3JsZEludmVyc2U7ZC5nZXROb3JtYWxNYXRyaXgodCk7aWYobnVsbD09PW98fG8ubGVuZ3RoPG4pbz1uZXcgRmxvYXQzMkFycmF5KG4pO2ZvcihuPTA7biE9PWk7KytuLHIrPTQpcy5jb3B5KGVbbl0pLmFwcGx5TWF0cml4NCh0LGQpLHMubm9ybWFsLnRvQXJyYXkobyxyKSxvW3IrM109cy5jb25zdGFudH12LnZhbHVlPW87di5uZWVkc1VwZGF0ZT0hMH1hLm51bVBsYW5lcz1pO2EubnVtSW50ZXJzZWN0aW9uPTA7cmV0dXJuIG99dmFyIGE9dGhpcyxsPW51bGwsaD0wLHA9ITEsZj0hMSxzPW5ldyBnLGQ9bmV3IG0sdj17dmFsdWU6bnVsbCxuZWVkc1VwZGF0ZTohMX07dGhpcy51bmlmb3JtPXY7dGhpcy5udW1JbnRlcnNlY3Rpb249dGhpcy5udW1QbGFuZXM9MDt0aGlzLmluaXQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAhPT1lLmxlbmd0aHx8dHx8MCE9PWh8fHA7cD10O2w9YyhlLHIsMCk7aD1lLmxlbmd0aDtyZXR1cm4gbn07dGhpcy5iZWdpblNoYWRvd3M9ZnVuY3Rpb24oKXtmPSEwO2MobnVsbCl9O3RoaXMuZW5kU2hhZG93cz1mdW5jdGlvbigpe2Y9ITE7dSgpfTt0aGlzLnNldFN0YXRlPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtpZighcHx8bnVsbD09PWV8fDA9PT1lLmxlbmd0aHx8ZiYmIXIpZj9jKG51bGwpOnUoKTtlbHNle3I9Zj8wOmg7dmFyIGE9NCpyLHM9aS5jbGlwcGluZ1N0YXRlfHxudWxsO3YudmFsdWU9cztzPWMoZSxuLGEsbyk7Zm9yKGU9MDtlIT09YTsrK2Upc1tlXT1sW2VdO2kuY2xpcHBpbmdTdGF0ZT1zO3RoaXMubnVtSW50ZXJzZWN0aW9uPXQ/dGhpcy5udW1QbGFuZXM6MDt0aGlzLm51bVBsYW5lcys9cn19fWZ1bmN0aW9uIERlKHIpe3ZhciBuPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09bltlXSlyZXR1cm4gbltlXTtzd2l0Y2goZSl7Y2FzZVwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiOnZhciB0PXIuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8ci5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8ci5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTticmVhaztjYXNlXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIjp0PXIuZ2V0RXh0ZW5zaW9uKFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxyLmdldEV4dGVuc2lvbihcIk1PWl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fHIuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTticmVhaztjYXNlXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiOnQ9ci5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8ci5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fHIuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpO2JyZWFrO2Nhc2VcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiOnQ9ci5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil8fHIuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKTticmVhaztkZWZhdWx0OnQ9ci5nZXRFeHRlbnNpb24oZSl9bnVsbD09PXQmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFwiK2UrXCIgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQuXCIpO3JldHVybiBuW2VdPXR9fX1mdW5jdGlvbiBCZShlLGMsbil7ZnVuY3Rpb24gaShlKXt2YXIgdD1lLnRhcmdldDtlPWEuZ2V0KHQpO251bGwhPT1lLmluZGV4JiZjLnJlbW92ZShlLmluZGV4KTtmb3IodmFyIHIgaW4gZS5hdHRyaWJ1dGVzKWMucmVtb3ZlKGUuYXR0cmlidXRlc1tyXSk7dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGkpO2EuZGVsZXRlKHQpO2lmKHI9bC5nZXQoZSkpYy5yZW1vdmUociksbC5kZWxldGUoZSk7bi5tZW1vcnkuZ2VvbWV0cmllcy0tfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9W10scj1lLmluZGV4LG49ZS5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKG51bGwhPT1yKXt2YXIgaT1yLmFycmF5O3I9ci52ZXJzaW9uO249MDtmb3IodmFyIG89aS5sZW5ndGg7bjxvO24rPTMpe3ZhciBhPWlbbiswXSxzPWlbbisxXSx1PWlbbisyXTt0LnB1c2goYSxzLHMsdSx1LGEpfX1lbHNlIGZvcihpPW4uYXJyYXkscj1uLnZlcnNpb24sbj0wLG89aS5sZW5ndGgvMy0xO248bztuKz0zKWE9biswLHM9bisxLHU9bisyLHQucHVzaChhLHMscyx1LHUsYSk7dD1uZXcoNjU1MzU8TCh0KT9BOk8pKHQsMSk7dC52ZXJzaW9uPXI7Yy51cGRhdGUodCwzNDk2Myk7KGk9bC5nZXQoZSkpJiZjLnJlbW92ZShpKTtsLnNldChlLHQpfXZhciBhPW5ldyBXZWFrTWFwLGw9bmV3IFdlYWtNYXA7cmV0dXJue2dldDpmdW5jdGlvbihlLHQpe3ZhciByPWEuZ2V0KHQpO2lmKHIpcmV0dXJuIHI7dC5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGkpO3QuaXNCdWZmZXJHZW9tZXRyeT9yPXQ6dC5pc0dlb21ldHJ5JiYodm9pZCAwPT09dC5fYnVmZmVyR2VvbWV0cnkmJih0Ll9idWZmZXJHZW9tZXRyeT0obmV3IE4pLnNldEZyb21PYmplY3QoZSkpLHI9dC5fYnVmZmVyR2VvbWV0cnkpO2Euc2V0KHQscik7bi5tZW1vcnkuZ2VvbWV0cmllcysrO3JldHVybiByfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleCxyPWUuYXR0cmlidXRlcztudWxsIT09dCYmYy51cGRhdGUodCwzNDk2Myk7Zm9yKHZhciBuIGluIHIpYy51cGRhdGUocltuXSwzNDk2Mik7ZT1lLm1vcnBoQXR0cmlidXRlcztmb3IobiBpbiBlKXt0PWVbbl07cj0wO2Zvcih2YXIgaT10Lmxlbmd0aDtyPGk7cisrKWMudXBkYXRlKHRbcl0sMzQ5NjIpfX0sZ2V0V2lyZWZyYW1lQXR0cmlidXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWwuZ2V0KGUpO2lmKHQpe3ZhciByPWUuaW5kZXg7bnVsbCE9PXImJnQudmVyc2lvbjxyLnZlcnNpb24mJm8oZSl9ZWxzZSBvKGUpO3JldHVybiBsLmdldChlKX19fWZ1bmN0aW9uIEZlKG8sYSxzLGUpe3ZhciB1PWUuaXNXZWJHTDIsYyxsLGg7dGhpcy5zZXRNb2RlPWZ1bmN0aW9uKGUpe2M9ZX07dGhpcy5zZXRJbmRleD1mdW5jdGlvbihlKXtsPWUudHlwZTtoPWUuYnl0ZXNQZXJFbGVtZW50fTt0aGlzLnJlbmRlcj1mdW5jdGlvbihlLHQpe28uZHJhd0VsZW1lbnRzKGMsdCxsLGUqaCk7cy51cGRhdGUodCxjKX07dGhpcy5yZW5kZXJJbnN0YW5jZXM9ZnVuY3Rpb24oZSx0LHIsbil7aWYoMCE9PW4pe2lmKHUpe2U9bzt2YXIgaT1cImRyYXdFbGVtZW50c0luc3RhbmNlZFwifWVsc2UgaWYoZT1hLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIiksaT1cImRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFXCIsbnVsbD09PWUpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEluZGV4ZWRCdWZmZXJSZW5kZXJlcjogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuXCIpO3JldHVybn1lW2ldKGMscixsLHQqaCxuKTtzLnVwZGF0ZShyLGMsbil9fX1mdW5jdGlvbiB6ZShlKXt2YXIgbj17ZnJhbWU6MCxjYWxsczowLHRyaWFuZ2xlczowLHBvaW50czowLGxpbmVzOjB9O3JldHVybnttZW1vcnk6e2dlb21ldHJpZXM6MCx0ZXh0dXJlczowfSxyZW5kZXI6bixwcm9ncmFtczpudWxsLGF1dG9SZXNldDohMCxyZXNldDpmdW5jdGlvbigpe24uZnJhbWUrKztuLmNhbGxzPTA7bi50cmlhbmdsZXM9MDtuLnBvaW50cz0wO24ubGluZXM9MH0sdXBkYXRlOmZ1bmN0aW9uKGUsdCxyKXtyPXJ8fDE7bi5jYWxscysrO3N3aXRjaCh0KXtjYXNlIDQ6bi50cmlhbmdsZXMrPWUvMypyO2JyZWFrO2Nhc2UgMTpuLmxpbmVzKz1lLzIqcjticmVhaztjYXNlIDM6bi5saW5lcys9ciooZS0xKTticmVhaztjYXNlIDI6bi5saW5lcys9ciplO2JyZWFrO2Nhc2UgMDpuLnBvaW50cys9ciplO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMSW5mbzogVW5rbm93biBkcmF3IG1vZGU6XCIsdCl9fX19ZnVuY3Rpb24gWShlLHQpe3JldHVybiBNYXRoLmFicyh0WzFdKS1NYXRoLmFicyhlWzFdKX1mdW5jdGlvbiAkZShjKXt2YXIgbD17fSxoPW5ldyBGbG9hdDMyQXJyYXkoOCk7cmV0dXJue3VwZGF0ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT1lLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyxvPXZvaWQgMD09PWk/MDppLmxlbmd0aDtlPWxbdC5pZF07aWYodm9pZCAwPT09ZSl7ZT1bXTtmb3IodmFyIGE9MDthPG87YSsrKWVbYV09W2EsMF07bFt0LmlkXT1lfXZhciBzPXIubW9ycGhUYXJnZXRzJiZ0Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbjtyPXIubW9ycGhOb3JtYWxzJiZ0Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWw7Zm9yKGE9MDthPG87YSsrKXt2YXIgdT1lW2FdOzAhPT11WzFdJiYocyYmdC5kZWxldGVBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK2EpLHImJnQuZGVsZXRlQXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIithKSl9Zm9yKGE9MDthPG87YSsrKXU9ZVthXSx1WzBdPWEsdVsxXT1pW2FdO2Uuc29ydChZKTtmb3IoYT1pPTA7OD5hO2ErKyl7aWYodT1lW2FdKWlmKG89dVswXSx1PXVbMV0pe3MmJnQuc2V0QXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIithLHNbb10pO3ImJnQuc2V0QXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIithLHJbb10pO2hbYV09dTtpKz11O2NvbnRpbnVlfWhbYV09MH10PXQubW9ycGhUYXJnZXRzUmVsYXRpdmU/MToxLWk7bi5nZXRVbmlmb3JtcygpLnNldFZhbHVlKGMsXCJtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2VcIix0KTtuLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoYyxcIm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wiLGgpfX19ZnVuY3Rpb24gR2UoZSxpLG8sYSl7dmFyIHM9bmV3IFdlYWtNYXA7cmV0dXJue3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1hLnJlbmRlci5mcmFtZSxyPWUuZ2VvbWV0cnksbj1pLmdldChlLHIpO3MuZ2V0KG4pIT09dCYmKHIuaXNHZW9tZXRyeSYmbi51cGRhdGVGcm9tT2JqZWN0KGUpLGkudXBkYXRlKG4pLHMuc2V0KG4sdCkpO2UuaXNJbnN0YW5jZWRNZXNoJiZvLnVwZGF0ZShlLmluc3RhbmNlTWF0cml4LDM0OTYyKTtyZXR1cm4gbn0sZGlzcG9zZTpmdW5jdGlvbigpe3M9bmV3IFdlYWtNYXB9fX1mdW5jdGlvbiBLKGUsdCxyLG4saSxvLGEscyx1LGMpe2U9dm9pZCAwIT09ZT9lOltdO3AuY2FsbCh0aGlzLGUsdm9pZCAwIT09dD90OjMwMSxyLG4saSxvLHZvaWQgMCE9PWE/YToxMDIyLHMsdSxjKTt0aGlzLmZsaXBZPSExfWZ1bmN0aW9uIFooZSx0LHIsbil7cC5jYWxsKHRoaXMsbnVsbCk7dGhpcy5pbWFnZT17ZGF0YTplfHxudWxsLHdpZHRoOnR8fDEsaGVpZ2h0OnJ8fDEsZGVwdGg6bnx8MX07dGhpcy5taW5GaWx0ZXI9dGhpcy5tYWdGaWx0ZXI9MTAwMzt0aGlzLndyYXBSPTEwMDE7dGhpcy5mbGlwWT10aGlzLmdlbmVyYXRlTWlwbWFwcz0hMTt0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uIEooZSx0LHIsbil7cC5jYWxsKHRoaXMsbnVsbCk7dGhpcy5pbWFnZT17ZGF0YTplfHxudWxsLHdpZHRoOnR8fDEsaGVpZ2h0OnJ8fDEsZGVwdGg6bnx8MX07dGhpcy5taW5GaWx0ZXI9dGhpcy5tYWdGaWx0ZXI9MTAwMzt0aGlzLndyYXBSPTEwMDE7dGhpcy5mbGlwWT10aGlzLmdlbmVyYXRlTWlwbWFwcz0hMTt0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uIFEoZSx0LHIpe3ZhciBuPWVbMF07aWYoMD49bnx8MDxuKXJldHVybiBlO3ZhciBpPXQqcixvPUdzW2ldO3ZvaWQgMD09PW8mJihvPW5ldyBGbG9hdDMyQXJyYXkoaSksR3NbaV09byk7aWYoMCE9PXQpZm9yKG4udG9BcnJheShvLDApLG49MSxpPTA7biE9PXQ7KytuKWkrPXIsZVtuXS50b0FycmF5KG8saSk7cmV0dXJuIG99ZnVuY3Rpb24gZWUoZSx0KXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wLG49ZS5sZW5ndGg7cjxuO3IrKylpZihlW3JdIT09dFtyXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB0ZShlLHQpe2Zvcih2YXIgcj0wLG49dC5sZW5ndGg7cjxuO3IrKyllW3JdPXRbcl19ZnVuY3Rpb24gcmUoZSx0KXt2YXIgcj1Wc1t0XTt2b2lkIDA9PT1yJiYocj1uZXcgSW50MzJBcnJheSh0KSxWc1t0XT1yKTtmb3IodmFyIG49MDtuIT09dDsrK24pcltuXT1lLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtyZXR1cm4gcn1mdW5jdGlvbiBuZShlLHQpe3ZhciByPXRoaXMuY2FjaGU7clswXSE9PXQmJihlLnVuaWZvcm0xZih0aGlzLmFkZHIsdCksclswXT10KX1mdW5jdGlvbiBpZShlLHQpe3ZhciByPXRoaXMuY2FjaGU7aWYodm9pZCAwIT09dC54KXtpZihyWzBdIT09dC54fHxyWzFdIT09dC55KWUudW5pZm9ybTJmKHRoaXMuYWRkcix0LngsdC55KSxyWzBdPXQueCxyWzFdPXQueX1lbHNlIGVlKHIsdCl8fChlLnVuaWZvcm0yZnYodGhpcy5hZGRyLHQpLHRlKHIsdCkpfWZ1bmN0aW9uIG9lKGUsdCl7dmFyIHI9dGhpcy5jYWNoZTtpZih2b2lkIDAhPT10Lngpe2lmKHJbMF0hPT10Lnh8fHJbMV0hPT10Lnl8fHJbMl0hPT10LnopZS51bmlmb3JtM2YodGhpcy5hZGRyLHQueCx0LnksdC56KSxyWzBdPXQueCxyWzFdPXQueSxyWzJdPXQuen1lbHNlIGlmKHZvaWQgMCE9PXQucil7aWYoclswXSE9PXQucnx8clsxXSE9PXQuZ3x8clsyXSE9PXQuYillLnVuaWZvcm0zZih0aGlzLmFkZHIsdC5yLHQuZyx0LmIpLHJbMF09dC5yLHJbMV09dC5nLHJbMl09dC5ifWVsc2UgZWUocix0KXx8KGUudW5pZm9ybTNmdih0aGlzLmFkZHIsdCksdGUocix0KSl9ZnVuY3Rpb24gYWUoZSx0KXt2YXIgcj10aGlzLmNhY2hlO2lmKHZvaWQgMCE9PXQueCl7aWYoclswXSE9PXQueHx8clsxXSE9PXQueXx8clsyXSE9PXQuenx8clszXSE9PXQudyllLnVuaWZvcm00Zih0aGlzLmFkZHIsdC54LHQueSx0LnosdC53KSxyWzBdPXQueCxyWzFdPXQueSxyWzJdPXQueixyWzNdPXQud31lbHNlIGVlKHIsdCl8fChlLnVuaWZvcm00ZnYodGhpcy5hZGRyLHQpLHRlKHIsdCkpfWZ1bmN0aW9uIHNlKGUsdCl7dmFyIHI9dGhpcy5jYWNoZSxuPXQuZWxlbWVudHM7dm9pZCAwPT09bj9lZShyLHQpfHwoZS51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSx0KSx0ZShyLHQpKTplZShyLG4pfHwocXMuc2V0KG4pLGUudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsITEscXMpLHRlKHIsbikpfWZ1bmN0aW9uIHVlKGUsdCl7dmFyIHI9dGhpcy5jYWNoZSxuPXQuZWxlbWVudHM7dm9pZCAwPT09bj9lZShyLHQpfHwoZS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSx0KSx0ZShyLHQpKTplZShyLG4pfHwoVXMuc2V0KG4pLGUudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsVXMpLHRlKHIsbikpfWZ1bmN0aW9uIGNlKGUsdCl7dmFyIHI9dGhpcy5jYWNoZSxuPXQuZWxlbWVudHM7dm9pZCAwPT09bj9lZShyLHQpfHwoZS51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSx0KSx0ZShyLHQpKTplZShyLG4pfHwoSHMuc2V0KG4pLGUudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsSHMpLHRlKHIsbikpfWZ1bmN0aW9uIGxlKGUsdCxyKXt2YXIgbj10aGlzLmNhY2hlLGk9ci5hbGxvY2F0ZVRleHR1cmVVbml0KCk7blswXSE9PWkmJihlLnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksblswXT1pKTtyLnNhZmVTZXRUZXh0dXJlMkQodHx8QnMsaSl9ZnVuY3Rpb24gaGUoZSx0LHIpe3ZhciBuPXRoaXMuY2FjaGUsaT1yLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtuWzBdIT09aSYmKGUudW5pZm9ybTFpKHRoaXMuYWRkcixpKSxuWzBdPWkpO3Iuc2V0VGV4dHVyZTJEQXJyYXkodHx8RnMsaSl9ZnVuY3Rpb24gcGUoZSx0LHIpe3ZhciBuPXRoaXMuY2FjaGUsaT1yLmFsbG9jYXRlVGV4dHVyZVVuaXQoKTtuWzBdIT09aSYmKGUudW5pZm9ybTFpKHRoaXMuYWRkcixpKSxuWzBdPWkpO3Iuc2V0VGV4dHVyZTNEKHR8fHpzLGkpfWZ1bmN0aW9uIGZlKGUsdCxyKXt2YXIgbj10aGlzLmNhY2hlLGk9ci5hbGxvY2F0ZVRleHR1cmVVbml0KCk7blswXSE9PWkmJihlLnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksblswXT1pKTtyLnNhZmVTZXRUZXh0dXJlQ3ViZSh0fHwkcyxpKX1mdW5jdGlvbiBkZShlLHQpe3ZhciByPXRoaXMuY2FjaGU7clswXSE9PXQmJihlLnVuaWZvcm0xaSh0aGlzLmFkZHIsdCksclswXT10KX1mdW5jdGlvbiB2ZShlLHQpe3ZhciByPXRoaXMuY2FjaGU7ZWUocix0KXx8KGUudW5pZm9ybTJpdih0aGlzLmFkZHIsdCksdGUocix0KSl9ZnVuY3Rpb24gbWUoZSx0KXt2YXIgcj10aGlzLmNhY2hlO2VlKHIsdCl8fChlLnVuaWZvcm0zaXYodGhpcy5hZGRyLHQpLHRlKHIsdCkpfWZ1bmN0aW9uIGdlKGUsdCl7dmFyIHI9dGhpcy5jYWNoZTtlZShyLHQpfHwoZS51bmlmb3JtNGl2KHRoaXMuYWRkcix0KSx0ZShyLHQpKX1mdW5jdGlvbiBfZShlLHQpe3ZhciByPXRoaXMuY2FjaGU7clswXSE9PXQmJihlLnVuaWZvcm0xdWkodGhpcy5hZGRyLHQpLHJbMF09dCl9ZnVuY3Rpb24geWUoZSl7c3dpdGNoKGUpe2Nhc2UgNTEyNjpyZXR1cm4gbmU7Y2FzZSAzNTY2NDpyZXR1cm4gaWU7Y2FzZSAzNTY2NTpyZXR1cm4gb2U7Y2FzZSAzNTY2NjpyZXR1cm4gYWU7Y2FzZSAzNTY3NDpyZXR1cm4gc2U7Y2FzZSAzNTY3NTpyZXR1cm4gdWU7Y2FzZSAzNTY3NjpyZXR1cm4gY2U7Y2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIGRlO2Nhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gdmU7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBtZTtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIGdlO2Nhc2UgNTEyNTpyZXR1cm4gX2U7Y2FzZSAzNTY3ODpjYXNlIDM2MTk4OmNhc2UgMzYyOTg6Y2FzZSAzNjMwNjpjYXNlIDM1NjgyOnJldHVybiBsZTtjYXNlIDM1Njc5OmNhc2UgMzYyOTk6Y2FzZSAzNjMwNzpyZXR1cm4gcGU7Y2FzZSAzNTY4MDpjYXNlIDM2MzAwOmNhc2UgMzYzMDg6Y2FzZSAzNjI5MzpyZXR1cm4gZmU7Y2FzZSAzNjI4OTpjYXNlIDM2MzAzOmNhc2UgMzYzMTE6Y2FzZSAzNjI5MjpyZXR1cm4gaGV9fWZ1bmN0aW9uIGJlKGUsdCl7ZS51bmlmb3JtMWZ2KHRoaXMuYWRkcix0KX1mdW5jdGlvbiB4ZShlLHQpe2UudW5pZm9ybTFpdih0aGlzLmFkZHIsdCl9ZnVuY3Rpb24gd2UoZSx0KXtlLnVuaWZvcm0yaXYodGhpcy5hZGRyLHQpfWZ1bmN0aW9uIFNlKGUsdCl7ZS51bmlmb3JtM2l2KHRoaXMuYWRkcix0KX1mdW5jdGlvbiBWZShlLHQpe2UudW5pZm9ybTRpdih0aGlzLmFkZHIsdCl9ZnVuY3Rpb24gSGUoZSx0KXt0PVEodCx0aGlzLnNpemUsMik7ZS51bmlmb3JtMmZ2KHRoaXMuYWRkcix0KX1mdW5jdGlvbiBVZShlLHQpe3Q9USh0LHRoaXMuc2l6ZSwzKTtlLnVuaWZvcm0zZnYodGhpcy5hZGRyLHQpfWZ1bmN0aW9uIHFlKGUsdCl7dD1RKHQsdGhpcy5zaXplLDQpO2UudW5pZm9ybTRmdih0aGlzLmFkZHIsdCl9ZnVuY3Rpb24gV2UoZSx0KXt0PVEodCx0aGlzLnNpemUsNCk7ZS51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSx0KX1mdW5jdGlvbiBYZShlLHQpe3Q9USh0LHRoaXMuc2l6ZSw5KTtlLnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLHQpfWZ1bmN0aW9uIFllKGUsdCl7dD1RKHQsdGhpcy5zaXplLDE2KTtlLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLCExLHQpfWZ1bmN0aW9uIEtlKGUsdCxyKXt2YXIgbj10Lmxlbmd0aCxpPXJlKHIsbik7ZS51bmlmb3JtMWl2KHRoaXMuYWRkcixpKTtmb3IoZT0wO2UhPT1uOysrZSlyLnNhZmVTZXRUZXh0dXJlMkQodFtlXXx8QnMsaVtlXSl9ZnVuY3Rpb24gWmUoZSx0LHIpe3ZhciBuPXQubGVuZ3RoLGk9cmUocixuKTtlLnVuaWZvcm0xaXYodGhpcy5hZGRyLGkpO2ZvcihlPTA7ZSE9PW47KytlKXIuc2FmZVNldFRleHR1cmVDdWJlKHRbZV18fCRzLGlbZV0pfWZ1bmN0aW9uIEplKGUpe3N3aXRjaChlKXtjYXNlIDUxMjY6cmV0dXJuIGJlO2Nhc2UgMzU2NjQ6cmV0dXJuIEhlO2Nhc2UgMzU2NjU6cmV0dXJuIFVlO2Nhc2UgMzU2NjY6cmV0dXJuIHFlO2Nhc2UgMzU2NzQ6cmV0dXJuIFdlO2Nhc2UgMzU2NzU6cmV0dXJuIFhlO2Nhc2UgMzU2NzY6cmV0dXJuIFllO2Nhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiB4ZTtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIHdlO2Nhc2UgMzU2Njg6Y2FzZSAzNTY3MjpyZXR1cm4gU2U7Y2FzZSAzNTY2OTpjYXNlIDM1NjczOnJldHVybiBWZTtjYXNlIDM1Njc4OmNhc2UgMzYxOTg6Y2FzZSAzNjI5ODpjYXNlIDM2MzA2OmNhc2UgMzU2ODI6cmV0dXJuIEtlO2Nhc2UgMzU2ODA6Y2FzZSAzNjMwMDpjYXNlIDM2MzA4OmNhc2UgMzYyOTM6cmV0dXJuIFplfX1mdW5jdGlvbiBRZShlLHQscil7dGhpcy5pZD1lO3RoaXMuYWRkcj1yO3RoaXMuY2FjaGU9W107dGhpcy5zZXRWYWx1ZT15ZSh0LnR5cGUpfWZ1bmN0aW9uIGV0KGUsdCxyKXt0aGlzLmlkPWU7dGhpcy5hZGRyPXI7dGhpcy5jYWNoZT1bXTt0aGlzLnNpemU9dC5zaXplO3RoaXMuc2V0VmFsdWU9SmUodC50eXBlKX1mdW5jdGlvbiB0dChlKXt0aGlzLmlkPWU7dGhpcy5zZXE9W107dGhpcy5tYXA9e319ZnVuY3Rpb24gcnQoZSx0KXt0aGlzLnNlcT1bXTt0aGlzLm1hcD17fTtmb3IodmFyIHI9ZS5nZXRQcm9ncmFtUGFyYW1ldGVyKHQsMzU3MTgpLG49MDtuPHI7KytuKXt2YXIgaT1lLmdldEFjdGl2ZVVuaWZvcm0odCxuKSxvPWUuZ2V0VW5pZm9ybUxvY2F0aW9uKHQsaS5uYW1lKSxhPXRoaXMscz1pLm5hbWUsdT1zLmxlbmd0aDtmb3IoV3MubGFzdEluZGV4PTA7Oyl7dmFyIGM9V3MuZXhlYyhzKSxsPVdzLmxhc3RJbmRleCxoPWNbMV0scD1jWzNdO1wiXVwiPT09Y1syXSYmKGh8PTApO2lmKHZvaWQgMD09PXB8fFwiW1wiPT09cCYmbCsyPT09dSl7cz1hO2k9dm9pZCAwPT09cD9uZXcgUWUoaCxpLG8pOm5ldyBldChoLGksbyk7cy5zZXEucHVzaChpKTtzLm1hcFtpLmlkXT1pO2JyZWFrfWVsc2UgcD1hLm1hcFtoXSx2b2lkIDA9PT1wJiYocD1uZXcgdHQoaCksaD1hLGE9cCxoLnNlcS5wdXNoKGEpLGgubWFwW2EuaWRdPWEpLGE9cH19fWZ1bmN0aW9uIG50KGUsdCxyKXt0PWUuY3JlYXRlU2hhZGVyKHQpO2Uuc2hhZGVyU291cmNlKHQscik7ZS5jb21waWxlU2hhZGVyKHQpO3JldHVybiB0fWZ1bmN0aW9uIGl0KGUpe3N3aXRjaChlKXtjYXNlIDNlMzpyZXR1cm5bXCJMaW5lYXJcIixcIiggdmFsdWUgKVwiXTtjYXNlIDMwMDE6cmV0dXJuW1wic1JHQlwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgMzAwMjpyZXR1cm5bXCJSR0JFXCIsXCIoIHZhbHVlIClcIl07Y2FzZSAzMDA0OnJldHVybltcIlJHQk1cIixcIiggdmFsdWUsIDcuMCApXCJdO2Nhc2UgMzAwNTpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCAxNi4wIClcIl07Y2FzZSAzMDA2OnJldHVybltcIlJHQkRcIixcIiggdmFsdWUsIDI1Ni4wIClcIl07Y2FzZSAzMDA3OnJldHVybltcIkdhbW1hXCIsXCIoIHZhbHVlLCBmbG9hdCggR0FNTUFfRkFDVE9SICkgKVwiXTtjYXNlIDMwMDM6cmV0dXJuW1wiTG9nTHV2XCIsXCIoIHZhbHVlIClcIl07ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuc3VwcG9ydGVkIGVuY29kaW5nOiBcIitlKX19ZnVuY3Rpb24gb3QoZSx0LHIpe3ZhciBuPWUuZ2V0U2hhZGVyUGFyYW1ldGVyKHQsMzU3MTMpLGk9ZS5nZXRTaGFkZXJJbmZvTG9nKHQpLnRyaW0oKTtpZihuJiZcIlwiPT09aSlyZXR1cm5cIlwiO2U9ZS5nZXRTaGFkZXJTb3VyY2UodCkuc3BsaXQoXCJcXG5cIik7Zm9yKHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdPXQrMStcIjogXCIrZVt0XTtlPWUuam9pbihcIlxcblwiKTtyZXR1cm5cIlRIUkVFLldlYkdMU2hhZGVyOiBnbC5nZXRTaGFkZXJJbmZvTG9nKCkgXCIrcitcIlxcblwiK2krZX1mdW5jdGlvbiBhdChlLHQpe3Q9aXQodCk7cmV0dXJuXCJ2ZWM0IFwiK2UrXCIoIHZlYzQgdmFsdWUgKSB7IHJldHVybiBcIit0WzBdK1wiVG9MaW5lYXJcIit0WzFdK1wiOyB9XCJ9ZnVuY3Rpb24gc3QoZSx0KXt0PWl0KHQpO3JldHVyblwidmVjNCBcIitlK1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gTGluZWFyVG9cIit0WzBdK3RbMV0rXCI7IH1cIn1mdW5jdGlvbiB1dChlLHQpe3N3aXRjaCh0KXtjYXNlIDE6dD1cIkxpbmVhclwiO2JyZWFrO2Nhc2UgMjp0PVwiUmVpbmhhcmRcIjticmVhaztjYXNlIDM6dD1cIlVuY2hhcnRlZDJcIjticmVhaztjYXNlIDQ6dD1cIk9wdGltaXplZENpbmVvblwiO2JyZWFrO2Nhc2UgNTp0PVwiQUNFU0ZpbG1pY1wiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bnN1cHBvcnRlZCB0b25lTWFwcGluZzogXCIrdCl9cmV0dXJuXCJ2ZWMzIFwiK2UrXCIoIHZlYzMgY29sb3IgKSB7IHJldHVybiBcIit0K1wiVG9uZU1hcHBpbmcoIGNvbG9yICk7IH1cIn1mdW5jdGlvbiBjdChlKXt2YXIgdD1bXSxyO2ZvcihyIGluIGUpe3ZhciBuPWVbcl07ITEhPT1uJiZ0LnB1c2goXCIjZGVmaW5lIFwiK3IrXCIgXCIrbil9cmV0dXJuIHQuam9pbihcIlxcblwiKX1mdW5jdGlvbiBsdChlKXtyZXR1cm5cIlwiIT09ZX1mdW5jdGlvbiBodChlLHQpe3JldHVybiBlLnJlcGxhY2UoL05VTV9ESVJfTElHSFRTL2csdC5udW1EaXJMaWdodHMpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUUy9nLHQubnVtU3BvdExpZ2h0cykucmVwbGFjZSgvTlVNX1JFQ1RfQVJFQV9MSUdIVFMvZyx0Lm51bVJlY3RBcmVhTGlnaHRzKS5yZXBsYWNlKC9OVU1fUE9JTlRfTElHSFRTL2csdC5udW1Qb2ludExpZ2h0cykucmVwbGFjZSgvTlVNX0hFTUlfTElHSFRTL2csdC5udW1IZW1pTGlnaHRzKS5yZXBsYWNlKC9OVU1fRElSX0xJR0hUX1NIQURPV1MvZyx0Lm51bURpckxpZ2h0U2hhZG93cykucmVwbGFjZSgvTlVNX1NQT1RfTElHSFRfU0hBRE9XUy9nLHQubnVtU3BvdExpZ2h0U2hhZG93cykucmVwbGFjZSgvTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MvZyx0Lm51bVBvaW50TGlnaHRTaGFkb3dzKX1mdW5jdGlvbiBwdChlLHQpe3JldHVybiBlLnJlcGxhY2UoL05VTV9DTElQUElOR19QTEFORVMvZyx0Lm51bUNsaXBwaW5nUGxhbmVzKS5yZXBsYWNlKC9VTklPTl9DTElQUElOR19QTEFORVMvZyx0Lm51bUNsaXBwaW5nUGxhbmVzLXQubnVtQ2xpcEludGVyc2VjdGlvbil9ZnVuY3Rpb24gZnQoZSx0KXtlPUlzW3RdO2lmKHZvaWQgMD09PWUpdGhyb3cgRXJyb3IoXCJDYW4gbm90IHJlc29sdmUgI2luY2x1ZGUgPFwiK3QrXCI+XCIpO3JldHVybiBlLnJlcGxhY2UoWXMsZnQpfWZ1bmN0aW9uIGR0KGUsdCxyLG4pe2NvbnNvbGUud2FybihcIldlYkdMUHJvZ3JhbTogI3ByYWdtYSB1bnJvbGxfbG9vcCBzaGFkZXIgc3ludGF4IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgI3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydCBzeW50YXggaW5zdGVhZC5cIik7cmV0dXJuIHZ0KGUsdCxyLG4pfWZ1bmN0aW9uIHZ0KGUsdCxyLG4pe2U9XCJcIjtmb3IodD1wYXJzZUludCh0KTt0PHBhcnNlSW50KHIpO3QrKyllKz1uLnJlcGxhY2UoL1xcWyBpIFxcXS9nLFwiWyBcIit0K1wiIF1cIikucmVwbGFjZSgvVU5ST0xMRURfTE9PUF9JTkRFWC9nLHQpO3JldHVybiBlfWZ1bmN0aW9uIG10KGUpe3ZhciB0PVwicHJlY2lzaW9uIFwiK2UucHJlY2lzaW9uK1wiIGZsb2F0O1xcbnByZWNpc2lvbiBcIitlLnByZWNpc2lvbitcIiBpbnQ7XCI7XCJoaWdocFwiPT09ZS5wcmVjaXNpb24/dCs9XCJcXG4jZGVmaW5lIEhJR0hfUFJFQ0lTSU9OXCI6XCJtZWRpdW1wXCI9PT1lLnByZWNpc2lvbj90Kz1cIlxcbiNkZWZpbmUgTUVESVVNX1BSRUNJU0lPTlwiOlwibG93cFwiPT09ZS5wcmVjaXNpb24mJih0Kz1cIlxcbiNkZWZpbmUgTE9XX1BSRUNJU0lPTlwiKTtyZXR1cm4gdH1mdW5jdGlvbiBndChlKXt2YXIgdD1cIlNIQURPV01BUF9UWVBFX0JBU0lDXCI7MT09PWUuc2hhZG93TWFwVHlwZT90PVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6Mj09PWUuc2hhZG93TWFwVHlwZT90PVwiU0hBRE9XTUFQX1RZUEVfUENGX1NPRlRcIjozPT09ZS5zaGFkb3dNYXBUeXBlJiYodD1cIlNIQURPV01BUF9UWVBFX1ZTTVwiKTtyZXR1cm4gdH1mdW5jdGlvbiBfdChlKXt2YXIgdD1cIkVOVk1BUF9UWVBFX0NVQkVcIjtpZihlLmVudk1hcClzd2l0Y2goZS5lbnZNYXBNb2RlKXtjYXNlIDMwMTpjYXNlIDMwMjp0PVwiRU5WTUFQX1RZUEVfQ1VCRVwiO2JyZWFrO2Nhc2UgMzA2OmNhc2UgMzA3OnQ9XCJFTlZNQVBfVFlQRV9DVUJFX1VWXCI7YnJlYWs7Y2FzZSAzMDM6Y2FzZSAzMDQ6dD1cIkVOVk1BUF9UWVBFX0VRVUlSRUNcIjticmVhaztjYXNlIDMwNTp0PVwiRU5WTUFQX1RZUEVfU1BIRVJFXCJ9cmV0dXJuIHR9ZnVuY3Rpb24geXQoZSl7dmFyIHQ9XCJFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXCI7aWYoZS5lbnZNYXApc3dpdGNoKGUuZW52TWFwTW9kZSl7Y2FzZSAzMDI6Y2FzZSAzMDQ6dD1cIkVOVk1BUF9NT0RFX1JFRlJBQ1RJT05cIn1yZXR1cm4gdH1mdW5jdGlvbiBidChlKXt2YXIgdD1cIkVOVk1BUF9CTEVORElOR19OT05FXCI7aWYoZS5lbnZNYXApc3dpdGNoKGUuY29tYmluZSl7Y2FzZSAwOnQ9XCJFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcIjticmVhaztjYXNlIDE6dD1cIkVOVk1BUF9CTEVORElOR19NSVhcIjticmVhaztjYXNlIDI6dD1cIkVOVk1BUF9CTEVORElOR19BRERcIn1yZXR1cm4gdH1mdW5jdGlvbiB4dChlLHQscil7dmFyIGk9ZS5nZXRDb250ZXh0KCksbj1yLmRlZmluZXMsbz1yLnZlcnRleFNoYWRlcixhPXIuZnJhZ21lbnRTaGFkZXIscz1ndChyKSx1PV90KHIpLGM9eXQociksbD1idChyKSxoPTA8ZS5nYW1tYUZhY3Rvcj9lLmdhbW1hRmFjdG9yOjEscD1yLmlzV2ViR0wyP1wiXCI6W3IuZXh0ZW5zaW9uRGVyaXZhdGl2ZXN8fHIuZW52TWFwQ3ViZVVWfHxyLmJ1bXBNYXB8fHIudGFuZ2VudFNwYWNlTm9ybWFsTWFwfHxyLmNsZWFyY29hdE5vcm1hbE1hcHx8ci5mbGF0U2hhZGluZ3x8XCJwaHlzaWNhbFwiPT09ci5zaGFkZXJJRD9cIiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXCI6XCJcIiwoci5leHRlbnNpb25GcmFnRGVwdGh8fHIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcikmJnIucmVuZGVyZXJFeHRlbnNpb25GcmFnRGVwdGg/XCIjZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXCI6XCJcIixyLmV4dGVuc2lvbkRyYXdCdWZmZXJzJiZyLnJlbmRlcmVyRXh0ZW5zaW9uRHJhd0J1ZmZlcnM/XCIjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnMgOiByZXF1aXJlXCI6XCJcIiwoci5leHRlbnNpb25TaGFkZXJUZXh0dXJlTE9EfHxyLmVudk1hcCkmJnIucmVuZGVyZXJFeHRlbnNpb25TaGFkZXJUZXh0dXJlTG9kP1wiI2V4dGVuc2lvbiBHTF9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIDogZW5hYmxlXCI6XCJcIl0uZmlsdGVyKGx0KS5qb2luKFwiXFxuXCIpLGY9Y3QobiksZD1pLmNyZWF0ZVByb2dyYW0oKTtyLmlzUmF3U2hhZGVyTWF0ZXJpYWw/KG49W2ZdLmZpbHRlcihsdCkuam9pbihcIlxcblwiKSwwPG4ubGVuZ3RoJiYobis9XCJcXG5cIikscz1bcCxmXS5maWx0ZXIobHQpLmpvaW4oXCJcXG5cIiksMDxzLmxlbmd0aCYmKHMrPVwiXFxuXCIpKToobj1bbXQociksXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK3Iuc2hhZGVyTmFtZSxmLHIuaW5zdGFuY2luZz9cIiNkZWZpbmUgVVNFX0lOU1RBTkNJTkdcIjpcIlwiLHIuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz9cIiNkZWZpbmUgVkVSVEVYX1RFWFRVUkVTXCI6XCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK2gsXCIjZGVmaW5lIE1BWF9CT05FUyBcIityLm1heEJvbmVzLHIudXNlRm9nJiZyLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsci51c2VGb2cmJnIuZm9nRXhwMj9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLHIubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixyLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsci5lbnZNYXA/XCIjZGVmaW5lIFwiK2M6XCJcIixyLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLHIuYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsci5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixyLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixyLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsci5ub3JtYWxNYXAmJnIub2JqZWN0U3BhY2VOb3JtYWxNYXA/XCIjZGVmaW5lIE9CSkVDVFNQQUNFX05PUk1BTE1BUFwiOlwiXCIsci5ub3JtYWxNYXAmJnIudGFuZ2VudFNwYWNlTm9ybWFsTWFwP1wiI2RlZmluZSBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQXCI6XCJcIixyLmNsZWFyY29hdE1hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVE1BUFwiOlwiXCIsci5jbGVhcmNvYXRSb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9DTEVBUkNPQVRfUk9VR0hORVNTTUFQXCI6XCJcIixyLmNsZWFyY29hdE5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcIjpcIlwiLHIuZGlzcGxhY2VtZW50TWFwJiZyLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM/XCIjZGVmaW5lIFVTRV9ESVNQTEFDRU1FTlRNQVBcIjpcIlwiLHIuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsci5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcIlwiLHIubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixyLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLHIudmVydGV4VGFuZ2VudHM/XCIjZGVmaW5lIFVTRV9UQU5HRU5UXCI6XCJcIixyLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixyLnZlcnRleFV2cz9cIiNkZWZpbmUgVVNFX1VWXCI6XCJcIixyLnV2c1ZlcnRleE9ubHk/XCIjZGVmaW5lIFVWU19WRVJURVhfT05MWVwiOlwiXCIsci5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLHIuc2tpbm5pbmc/XCIjZGVmaW5lIFVTRV9TS0lOTklOR1wiOlwiXCIsci51c2VWZXJ0ZXhUZXh0dXJlP1wiI2RlZmluZSBCT05FX1RFWFRVUkVcIjpcIlwiLHIubW9ycGhUYXJnZXRzP1wiI2RlZmluZSBVU0VfTU9SUEhUQVJHRVRTXCI6XCJcIixyLm1vcnBoTm9ybWFscyYmITE9PT1yLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBVU0VfTU9SUEhOT1JNQUxTXCI6XCJcIixyLmRvdWJsZVNpZGVkP1wiI2RlZmluZSBET1VCTEVfU0lERURcIjpcIlwiLHIuZmxpcFNpZGVkP1wiI2RlZmluZSBGTElQX1NJREVEXCI6XCJcIixyLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFVTRV9TSEFET1dNQVBcIjpcIlwiLHIuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgXCIrczpcIlwiLHIuc2l6ZUF0dGVudWF0aW9uP1wiI2RlZmluZSBVU0VfU0laRUFUVEVOVUFUSU9OXCI6XCJcIixyLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRlwiOlwiXCIsci5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZyLnJlbmRlcmVyRXh0ZW5zaW9uRnJhZ0RlcHRoP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcIixcInVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcIixcInVuaWZvcm0gYm9vbCBpc09ydGhvZ3JhcGhpYztcIixcIiNpZmRlZiBVU0VfSU5TVEFOQ0lOR1wiLFwiIGF0dHJpYnV0ZSBtYXQ0IGluc3RhbmNlTWF0cml4O1wiLFwiI2VuZGlmXCIsXCJhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMzIG5vcm1hbDtcIixcImF0dHJpYnV0ZSB2ZWMyIHV2O1wiLFwiI2lmZGVmIFVTRV9UQU5HRU5UXCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCB0YW5nZW50O1wiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX0NPTE9SXCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBjb2xvcjtcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MDtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MTtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MjtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MztcIixcIlxcdCNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDA7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDE7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDI7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDM7XCIsXCJcXHQjZWxzZVwiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ1O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ2O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ3O1wiLFwiXFx0I2VuZGlmXCIsXCIjZW5kaWZcIixcIiNpZmRlZiBVU0VfU0tJTk5JTkdcIixcIlxcdGF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDtcIixcIlxcdGF0dHJpYnV0ZSB2ZWM0IHNraW5XZWlnaHQ7XCIsXCIjZW5kaWZcIixcIlxcblwiXS5maWx0ZXIobHQpLmpvaW4oXCJcXG5cIikscz1bcCxtdChyKSxcIiNkZWZpbmUgU0hBREVSX05BTUUgXCIrci5zaGFkZXJOYW1lLGYsci5hbHBoYVRlc3Q/XCIjZGVmaW5lIEFMUEhBVEVTVCBcIityLmFscGhhVGVzdCsoci5hbHBoYVRlc3QlMT9cIlwiOlwiLjBcIik6XCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK2gsci51c2VGb2cmJnIuZm9nP1wiI2RlZmluZSBVU0VfRk9HXCI6XCJcIixyLnVzZUZvZyYmci5mb2dFeHAyP1wiI2RlZmluZSBGT0dfRVhQMlwiOlwiXCIsci5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLHIubWF0Y2FwP1wiI2RlZmluZSBVU0VfTUFUQ0FQXCI6XCJcIixyLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsci5lbnZNYXA/XCIjZGVmaW5lIFwiK3U6XCJcIixyLmVudk1hcD9cIiNkZWZpbmUgXCIrYzpcIlwiLHIuZW52TWFwP1wiI2RlZmluZSBcIitsOlwiXCIsci5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixyLmFvTWFwP1wiI2RlZmluZSBVU0VfQU9NQVBcIjpcIlwiLHIuZW1pc3NpdmVNYXA/XCIjZGVmaW5lIFVTRV9FTUlTU0lWRU1BUFwiOlwiXCIsci5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsci5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLHIubm9ybWFsTWFwJiZyLm9iamVjdFNwYWNlTm9ybWFsTWFwP1wiI2RlZmluZSBPQkpFQ1RTUEFDRV9OT1JNQUxNQVBcIjpcIlwiLHIubm9ybWFsTWFwJiZyLnRhbmdlbnRTcGFjZU5vcm1hbE1hcD9cIiNkZWZpbmUgVEFOR0VOVFNQQUNFX05PUk1BTE1BUFwiOlwiXCIsci5jbGVhcmNvYXRNYXA/XCIjZGVmaW5lIFVTRV9DTEVBUkNPQVRNQVBcIjpcIlwiLHIuY2xlYXJjb2F0Um91Z2huZXNzTWFwP1wiI2RlZmluZSBVU0VfQ0xFQVJDT0FUX1JPVUdITkVTU01BUFwiOlwiXCIsci5jbGVhcmNvYXROb3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQXCI6XCJcIixyLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLHIucm91Z2huZXNzTWFwP1wiI2RlZmluZSBVU0VfUk9VR0hORVNTTUFQXCI6XCJcIixyLm1ldGFsbmVzc01hcD9cIiNkZWZpbmUgVVNFX01FVEFMTkVTU01BUFwiOlwiXCIsci5hbHBoYU1hcD9cIiNkZWZpbmUgVVNFX0FMUEhBTUFQXCI6XCJcIixyLnNoZWVuP1wiI2RlZmluZSBVU0VfU0hFRU5cIjpcIlwiLHIudmVydGV4VGFuZ2VudHM/XCIjZGVmaW5lIFVTRV9UQU5HRU5UXCI6XCJcIixyLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixyLnZlcnRleFV2cz9cIiNkZWZpbmUgVVNFX1VWXCI6XCJcIixyLnV2c1ZlcnRleE9ubHk/XCIjZGVmaW5lIFVWU19WRVJURVhfT05MWVwiOlwiXCIsci5ncmFkaWVudE1hcD9cIiNkZWZpbmUgVVNFX0dSQURJRU5UTUFQXCI6XCJcIixyLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsci5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixyLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsci5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixyLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3M6XCJcIixyLnByZW11bHRpcGxpZWRBbHBoYT9cIiNkZWZpbmUgUFJFTVVMVElQTElFRF9BTFBIQVwiOlwiXCIsci5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1wiOlwiXCIsci5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLHIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmci5yZW5kZXJlckV4dGVuc2lvbkZyYWdEZXB0aD9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsKHIuZXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxPRHx8ci5lbnZNYXApJiZyLnJlbmRlcmVyRXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxvZD9cIiNkZWZpbmUgVEVYVFVSRV9MT0RfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLFwidW5pZm9ybSBib29sIGlzT3J0aG9ncmFwaGljO1wiLDAhPT1yLnRvbmVNYXBwaW5nP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjpcIlwiLDAhPT1yLnRvbmVNYXBwaW5nP0lzLnRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCJcIiwwIT09ci50b25lTWFwcGluZz91dChcInRvbmVNYXBwaW5nXCIsci50b25lTWFwcGluZyk6XCJcIixyLmRpdGhlcmluZz9cIiNkZWZpbmUgRElUSEVSSU5HXCI6XCJcIixyLm91dHB1dEVuY29kaW5nfHxyLm1hcEVuY29kaW5nfHxyLm1hdGNhcEVuY29kaW5nfHxyLmVudk1hcEVuY29kaW5nfHxyLmVtaXNzaXZlTWFwRW5jb2Rpbmd8fHIubGlnaHRNYXBFbmNvZGluZz9Jcy5lbmNvZGluZ3NfcGFyc19mcmFnbWVudDpcIlwiLHIubWFwRW5jb2Rpbmc/YXQoXCJtYXBUZXhlbFRvTGluZWFyXCIsci5tYXBFbmNvZGluZyk6XCJcIixyLm1hdGNhcEVuY29kaW5nP2F0KFwibWF0Y2FwVGV4ZWxUb0xpbmVhclwiLHIubWF0Y2FwRW5jb2RpbmcpOlwiXCIsci5lbnZNYXBFbmNvZGluZz9hdChcImVudk1hcFRleGVsVG9MaW5lYXJcIixyLmVudk1hcEVuY29kaW5nKTpcIlwiLHIuZW1pc3NpdmVNYXBFbmNvZGluZz9hdChcImVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhclwiLHIuZW1pc3NpdmVNYXBFbmNvZGluZyk6XCJcIixyLmxpZ2h0TWFwRW5jb2Rpbmc/YXQoXCJsaWdodE1hcFRleGVsVG9MaW5lYXJcIixyLmxpZ2h0TWFwRW5jb2RpbmcpOlwiXCIsci5vdXRwdXRFbmNvZGluZz9zdChcImxpbmVhclRvT3V0cHV0VGV4ZWxcIixyLm91dHB1dEVuY29kaW5nKTpcIlwiLHIuZGVwdGhQYWNraW5nP1wiI2RlZmluZSBERVBUSF9QQUNLSU5HIFwiK3IuZGVwdGhQYWNraW5nOlwiXCIsXCJcXG5cIl0uZmlsdGVyKGx0KS5qb2luKFwiXFxuXCIpKTtvPW8ucmVwbGFjZShZcyxmdCk7bz1odChvLHIpO289cHQobyxyKTthPWEucmVwbGFjZShZcyxmdCk7YT1odChhLHIpO2E9cHQoYSxyKTtvPW8ucmVwbGFjZShacyx2dCkucmVwbGFjZShLcyxkdCk7YT1hLnJlcGxhY2UoWnMsdnQpLnJlcGxhY2UoS3MsZHQpO3IuaXNXZWJHTDImJiFyLmlzUmF3U2hhZGVyTWF0ZXJpYWwmJih1PSExLGM9L15cXHMqI3ZlcnNpb25cXHMrMzAwXFxzK2VzXFxzKlxcbi8sci5pc1NoYWRlck1hdGVyaWFsJiZudWxsIT09by5tYXRjaChjKSYmbnVsbCE9PWEubWF0Y2goYykmJih1PSEwLG89by5yZXBsYWNlKGMsXCJcIiksYT1hLnJlcGxhY2UoYyxcIlwiKSksbj1cIiN2ZXJzaW9uIDMwMCBlc1xcblxcbiNkZWZpbmUgYXR0cmlidXRlIGluXFxuI2RlZmluZSB2YXJ5aW5nIG91dFxcbiNkZWZpbmUgdGV4dHVyZTJEIHRleHR1cmVcXG5cIituLHM9W1wiI3ZlcnNpb24gMzAwIGVzXFxuXFxuI2RlZmluZSB2YXJ5aW5nIGluXCIsdT9cIlwiOlwib3V0IGhpZ2hwIHZlYzQgcGNfZnJhZ0NvbG9yO1wiLHU/XCJcIjpcIiNkZWZpbmUgZ2xfRnJhZ0NvbG9yIHBjX2ZyYWdDb2xvclwiLFwiI2RlZmluZSBnbF9GcmFnRGVwdGhFWFQgZ2xfRnJhZ0RlcHRoXFxuI2RlZmluZSB0ZXh0dXJlMkQgdGV4dHVyZVxcbiNkZWZpbmUgdGV4dHVyZUN1YmUgdGV4dHVyZVxcbiNkZWZpbmUgdGV4dHVyZTJEUHJvaiB0ZXh0dXJlUHJvalxcbiNkZWZpbmUgdGV4dHVyZTJETG9kRVhUIHRleHR1cmVMb2RcXG4jZGVmaW5lIHRleHR1cmUyRFByb2pMb2RFWFQgdGV4dHVyZVByb2pMb2RcXG4jZGVmaW5lIHRleHR1cmVDdWJlTG9kRVhUIHRleHR1cmVMb2RcXG4jZGVmaW5lIHRleHR1cmUyREdyYWRFWFQgdGV4dHVyZUdyYWRcXG4jZGVmaW5lIHRleHR1cmUyRFByb2pHcmFkRVhUIHRleHR1cmVQcm9qR3JhZFxcbiNkZWZpbmUgdGV4dHVyZUN1YmVHcmFkRVhUIHRleHR1cmVHcmFkXCJdLmpvaW4oXCJcXG5cIikrXCJcXG5cIitzKTthPXMrYTtvPW50KGksMzU2MzMsbitvKTthPW50KGksMzU2MzIsYSk7aS5hdHRhY2hTaGFkZXIoZCxvKTtpLmF0dGFjaFNoYWRlcihkLGEpO3ZvaWQgMCE9PXIuaW5kZXgwQXR0cmlidXRlTmFtZT9pLmJpbmRBdHRyaWJMb2NhdGlvbihkLDAsci5pbmRleDBBdHRyaWJ1dGVOYW1lKTohMD09PXIubW9ycGhUYXJnZXRzJiZpLmJpbmRBdHRyaWJMb2NhdGlvbihkLDAsXCJwb3NpdGlvblwiKTtpLmxpbmtQcm9ncmFtKGQpO2lmKGUuZGVidWcuY2hlY2tTaGFkZXJFcnJvcnMpe2U9aS5nZXRQcm9ncmFtSW5mb0xvZyhkKS50cmltKCk7dT1pLmdldFNoYWRlckluZm9Mb2cobykudHJpbSgpO2M9aS5nZXRTaGFkZXJJbmZvTG9nKGEpLnRyaW0oKTtoPWw9ITA7aWYoITE9PT1pLmdldFByb2dyYW1QYXJhbWV0ZXIoZCwzNTcxNCkpbD0hMSxwPW90KGksbyxcInZlcnRleFwiKSxmPW90KGksYSxcImZyYWdtZW50XCIpLGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFByb2dyYW06IHNoYWRlciBlcnJvcjogXCIsaS5nZXRFcnJvcigpLFwiMzU3MTVcIixpLmdldFByb2dyYW1QYXJhbWV0ZXIoZCwzNTcxNSksXCJnbC5nZXRQcm9ncmFtSW5mb0xvZ1wiLGUscCxmKTtlbHNlIGlmKFwiXCIhPT1lKWNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coKVwiLGUpO2Vsc2UgaWYoXCJcIj09PXV8fFwiXCI9PT1jKWg9ITE7aCYmKHRoaXMuZGlhZ25vc3RpY3M9e3J1bm5hYmxlOmwscHJvZ3JhbUxvZzplLHZlcnRleFNoYWRlcjp7bG9nOnUscHJlZml4Om59LGZyYWdtZW50U2hhZGVyOntsb2c6YyxwcmVmaXg6c319KX1pLmRlbGV0ZVNoYWRlcihvKTtpLmRlbGV0ZVNoYWRlcihhKTt2YXIgdjt0aGlzLmdldFVuaWZvcm1zPWZ1bmN0aW9uKCl7dm9pZCAwPT09diYmKHY9bmV3IHJ0KGksZCkpO3JldHVybiB2fTt2YXIgbTt0aGlzLmdldEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT1tKXtmb3IodmFyIGU9e30sdD1pLmdldFByb2dyYW1QYXJhbWV0ZXIoZCwzNTcyMSkscj0wO3I8dDtyKyspe3ZhciBuPWkuZ2V0QWN0aXZlQXR0cmliKGQscikubmFtZTtlW25dPWkuZ2V0QXR0cmliTG9jYXRpb24oZCxuKX1tPWV9cmV0dXJuIG19O3RoaXMuZGVzdHJveT1mdW5jdGlvbigpe2kuZGVsZXRlUHJvZ3JhbShkKTt0aGlzLnByb2dyYW09dm9pZCAwfTt0aGlzLm5hbWU9ci5zaGFkZXJOYW1lO3RoaXMuaWQ9WHMrKzt0aGlzLmNhY2hlS2V5PXQ7dGhpcy51c2VkVGltZXM9MTt0aGlzLnByb2dyYW09ZDt0aGlzLnZlcnRleFNoYWRlcj1vO3RoaXMuZnJhZ21lbnRTaGFkZXI9YTtyZXR1cm4gdGhpc31mdW5jdGlvbiB3dChwLGYsZCl7ZnVuY3Rpb24gdihlKXtpZihlKWUuaXNUZXh0dXJlP3Q9ZS5lbmNvZGluZzplLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW1zLmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXA6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLHQ9ZS50ZXh0dXJlLmVuY29kaW5nKTtlbHNlIHZhciB0PTNlMztyZXR1cm4gdH12YXIgYT1bXSxtPWQuaXNXZWJHTDIsZz1kLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIsXz1kLmZsb2F0VmVydGV4VGV4dHVyZXMseT1kLnByZWNpc2lvbixiPWQubWF4VmVydGV4VW5pZm9ybXMseD1kLnZlcnRleFRleHR1cmVzLHc9e01lc2hEZXB0aE1hdGVyaWFsOlwiZGVwdGhcIixNZXNoRGlzdGFuY2VNYXRlcmlhbDpcImRpc3RhbmNlUkdCQVwiLE1lc2hOb3JtYWxNYXRlcmlhbDpcIm5vcm1hbFwiLE1lc2hCYXNpY01hdGVyaWFsOlwiYmFzaWNcIixNZXNoTGFtYmVydE1hdGVyaWFsOlwibGFtYmVydFwiLE1lc2hQaG9uZ01hdGVyaWFsOlwicGhvbmdcIixNZXNoVG9vbk1hdGVyaWFsOlwidG9vblwiLE1lc2hTdGFuZGFyZE1hdGVyaWFsOlwicGh5c2ljYWxcIixNZXNoUGh5c2ljYWxNYXRlcmlhbDpcInBoeXNpY2FsXCIsTWVzaE1hdGNhcE1hdGVyaWFsOlwibWF0Y2FwXCIsTGluZUJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLExpbmVEYXNoZWRNYXRlcmlhbDpcImRhc2hlZFwiLFBvaW50c01hdGVyaWFsOlwicG9pbnRzXCIsU2hhZG93TWF0ZXJpYWw6XCJzaGFkb3dcIixTcHJpdGVNYXRlcmlhbDpcInNwcml0ZVwifSxuPVwicHJlY2lzaW9uIGlzV2ViR0wyIHN1cHBvcnRzVmVydGV4VGV4dHVyZXMgb3V0cHV0RW5jb2RpbmcgaW5zdGFuY2luZyBtYXAgbWFwRW5jb2RpbmcgbWF0Y2FwIG1hdGNhcEVuY29kaW5nIGVudk1hcCBlbnZNYXBNb2RlIGVudk1hcEVuY29kaW5nIGVudk1hcEN1YmVVViBsaWdodE1hcCBsaWdodE1hcEVuY29kaW5nIGFvTWFwIGVtaXNzaXZlTWFwIGVtaXNzaXZlTWFwRW5jb2RpbmcgYnVtcE1hcCBub3JtYWxNYXAgb2JqZWN0U3BhY2VOb3JtYWxNYXAgdGFuZ2VudFNwYWNlTm9ybWFsTWFwIGNsZWFyY29hdE1hcCBjbGVhcmNvYXRSb3VnaG5lc3NNYXAgY2xlYXJjb2F0Tm9ybWFsTWFwIGRpc3BsYWNlbWVudE1hcCBzcGVjdWxhck1hcCByb3VnaG5lc3NNYXAgbWV0YWxuZXNzTWFwIGdyYWRpZW50TWFwIGFscGhhTWFwIGNvbWJpbmUgdmVydGV4Q29sb3JzIHZlcnRleFRhbmdlbnRzIHZlcnRleFV2cyB1dnNWZXJ0ZXhPbmx5IGZvZyB1c2VGb2cgZm9nRXhwMiBmbGF0U2hhZGluZyBzaXplQXR0ZW51YXRpb24gbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciBza2lubmluZyBtYXhCb25lcyB1c2VWZXJ0ZXhUZXh0dXJlIG1vcnBoVGFyZ2V0cyBtb3JwaE5vcm1hbHMgbWF4TW9ycGhUYXJnZXRzIG1heE1vcnBoTm9ybWFscyBwcmVtdWx0aXBsaWVkQWxwaGEgbnVtRGlyTGlnaHRzIG51bVBvaW50TGlnaHRzIG51bVNwb3RMaWdodHMgbnVtSGVtaUxpZ2h0cyBudW1SZWN0QXJlYUxpZ2h0cyBudW1EaXJMaWdodFNoYWRvd3MgbnVtUG9pbnRMaWdodFNoYWRvd3MgbnVtU3BvdExpZ2h0U2hhZG93cyBzaGFkb3dNYXBFbmFibGVkIHNoYWRvd01hcFR5cGUgdG9uZU1hcHBpbmcgcGh5c2ljYWxseUNvcnJlY3RMaWdodHMgYWxwaGFUZXN0IGRvdWJsZVNpZGVkIGZsaXBTaWRlZCBudW1DbGlwcGluZ1BsYW5lcyBudW1DbGlwSW50ZXJzZWN0aW9uIGRlcHRoUGFja2luZyBkaXRoZXJpbmcgc2hlZW5cIi5zcGxpdChcIiBcIik7dGhpcy5nZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe3ZhciBzPW4uZm9nO249ZS5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP24uZW52aXJvbm1lbnQ6bnVsbDtuPWUuZW52TWFwfHxuO3ZhciB1PXdbZS50eXBlXTtpZihhLmlzU2tpbm5lZE1lc2gpe3ZhciBjPWEuc2tlbGV0b24uYm9uZXM7aWYoXyljPTEwMjQ7ZWxzZXt2YXIgbD1NYXRoLm1pbihNYXRoLmZsb29yKChiLTIwKS80KSxjLmxlbmd0aCk7bDxjLmxlbmd0aD8oY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogU2tlbGV0b24gaGFzIFwiK2MubGVuZ3RoK1wiIGJvbmVzLiBUaGlzIEdQVSBzdXBwb3J0cyBcIitsK1wiLlwiKSxjPTApOmM9bH19ZWxzZSBjPTA7bnVsbCE9PWUucHJlY2lzaW9uJiYoeT1kLmdldE1heFByZWNpc2lvbihlLnByZWNpc2lvbikseSE9PWUucHJlY2lzaW9uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW0uZ2V0UGFyYW1ldGVyczpcIixlLnByZWNpc2lvbixcIm5vdCBzdXBwb3J0ZWQsIHVzaW5nXCIseSxcImluc3RlYWQuXCIpKTt1PyhsPURzW3VdLGw9e25hbWU6ZS50eXBlLHVuaWZvcm1zOlJzLmNsb25lKGwudW5pZm9ybXMpLHZlcnRleFNoYWRlcjpsLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpsLmZyYWdtZW50U2hhZGVyfSk6bD17bmFtZTplLnR5cGUsdW5pZm9ybXM6ZS51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6ZS52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6ZS5mcmFnbWVudFNoYWRlcn07ZS5vbkJlZm9yZUNvbXBpbGUobCxwKTt2YXIgaD1wLmdldFJlbmRlclRhcmdldCgpO3JldHVybntpc1dlYkdMMjptLHNoYWRlcklEOnUsc2hhZGVyTmFtZTpsLm5hbWUsdW5pZm9ybXM6bC51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6bC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6bC5mcmFnbWVudFNoYWRlcixkZWZpbmVzOmUuZGVmaW5lcyxpc1Jhd1NoYWRlck1hdGVyaWFsOmUuaXNSYXdTaGFkZXJNYXRlcmlhbCxpc1NoYWRlck1hdGVyaWFsOmUuaXNTaGFkZXJNYXRlcmlhbCxwcmVjaXNpb246eSxpbnN0YW5jaW5nOiEwPT09YS5pc0luc3RhbmNlZE1lc2gsc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczp4LG91dHB1dEVuY29kaW5nOm51bGwhPT1oP3YoaC50ZXh0dXJlKTpwLm91dHB1dEVuY29kaW5nLG1hcDohIWUubWFwLG1hcEVuY29kaW5nOnYoZS5tYXApLG1hdGNhcDohIWUubWF0Y2FwLG1hdGNhcEVuY29kaW5nOnYoZS5tYXRjYXApLGVudk1hcDohIW4sZW52TWFwTW9kZTpuJiZuLm1hcHBpbmcsZW52TWFwRW5jb2Rpbmc6dihuKSxlbnZNYXBDdWJlVVY6ISFuJiYoMzA2PT09bi5tYXBwaW5nfHwzMDc9PT1uLm1hcHBpbmcpLGxpZ2h0TWFwOiEhZS5saWdodE1hcCxsaWdodE1hcEVuY29kaW5nOnYoZS5saWdodE1hcCksYW9NYXA6ISFlLmFvTWFwLGVtaXNzaXZlTWFwOiEhZS5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOnYoZS5lbWlzc2l2ZU1hcCksYnVtcE1hcDohIWUuYnVtcE1hcCxub3JtYWxNYXA6ISFlLm5vcm1hbE1hcCxvYmplY3RTcGFjZU5vcm1hbE1hcDoxPT09ZS5ub3JtYWxNYXBUeXBlLHRhbmdlbnRTcGFjZU5vcm1hbE1hcDowPT09ZS5ub3JtYWxNYXBUeXBlLGNsZWFyY29hdE1hcDohIWUuY2xlYXJjb2F0TWFwLGNsZWFyY29hdFJvdWdobmVzc01hcDohIWUuY2xlYXJjb2F0Um91Z2huZXNzTWFwLGNsZWFyY29hdE5vcm1hbE1hcDohIWUuY2xlYXJjb2F0Tm9ybWFsTWFwLGRpc3BsYWNlbWVudE1hcDohIWUuZGlzcGxhY2VtZW50TWFwLHJvdWdobmVzc01hcDohIWUucm91Z2huZXNzTWFwLG1ldGFsbmVzc01hcDohIWUubWV0YWxuZXNzTWFwLHNwZWN1bGFyTWFwOiEhZS5zcGVjdWxhck1hcCxhbHBoYU1hcDohIWUuYWxwaGFNYXAsZ3JhZGllbnRNYXA6ISFlLmdyYWRpZW50TWFwLHNoZWVuOiEhZS5zaGVlbixjb21iaW5lOmUuY29tYmluZSx2ZXJ0ZXhUYW5nZW50czplLm5vcm1hbE1hcCYmZS52ZXJ0ZXhUYW5nZW50cyx2ZXJ0ZXhDb2xvcnM6ZS52ZXJ0ZXhDb2xvcnMsdmVydGV4VXZzOiEhZS5tYXB8fCEhZS5idW1wTWFwfHwhIWUubm9ybWFsTWFwfHwhIWUuc3BlY3VsYXJNYXB8fCEhZS5hbHBoYU1hcHx8ISFlLmVtaXNzaXZlTWFwfHwhIWUucm91Z2huZXNzTWFwfHwhIWUubWV0YWxuZXNzTWFwfHwhIWUuY2xlYXJjb2F0TWFwfHwhIWUuY2xlYXJjb2F0Um91Z2huZXNzTWFwfHwhIWUuY2xlYXJjb2F0Tm9ybWFsTWFwfHwhIWUuZGlzcGxhY2VtZW50TWFwLHV2c1ZlcnRleE9ubHk6IShlLm1hcHx8ZS5idW1wTWFwfHxlLm5vcm1hbE1hcHx8ZS5zcGVjdWxhck1hcHx8ZS5hbHBoYU1hcHx8ZS5lbWlzc2l2ZU1hcHx8ZS5yb3VnaG5lc3NNYXB8fGUubWV0YWxuZXNzTWFwfHxlLmNsZWFyY29hdE5vcm1hbE1hcCkmJiEhZS5kaXNwbGFjZW1lbnRNYXAsZm9nOiEhcyx1c2VGb2c6ZS5mb2csZm9nRXhwMjpzJiZzLmlzRm9nRXhwMixmbGF0U2hhZGluZzplLmZsYXRTaGFkaW5nLHNpemVBdHRlbnVhdGlvbjplLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmcsc2tpbm5pbmc6ZS5za2lubmluZyYmMDxjLG1heEJvbmVzOmMsdXNlVmVydGV4VGV4dHVyZTpfLG1vcnBoVGFyZ2V0czplLm1vcnBoVGFyZ2V0cyxtb3JwaE5vcm1hbHM6ZS5tb3JwaE5vcm1hbHMsbWF4TW9ycGhUYXJnZXRzOnAubWF4TW9ycGhUYXJnZXRzLG1heE1vcnBoTm9ybWFsczpwLm1heE1vcnBoTm9ybWFscyxudW1EaXJMaWdodHM6dC5kaXJlY3Rpb25hbC5sZW5ndGgsbnVtUG9pbnRMaWdodHM6dC5wb2ludC5sZW5ndGgsbnVtU3BvdExpZ2h0czp0LnNwb3QubGVuZ3RoLG51bVJlY3RBcmVhTGlnaHRzOnQucmVjdEFyZWEubGVuZ3RoLG51bUhlbWlMaWdodHM6dC5oZW1pLmxlbmd0aCxudW1EaXJMaWdodFNoYWRvd3M6dC5kaXJlY3Rpb25hbFNoYWRvd01hcC5sZW5ndGgsbnVtUG9pbnRMaWdodFNoYWRvd3M6dC5wb2ludFNoYWRvd01hcC5sZW5ndGgsbnVtU3BvdExpZ2h0U2hhZG93czp0LnNwb3RTaGFkb3dNYXAubGVuZ3RoLG51bUNsaXBwaW5nUGxhbmVzOmksbnVtQ2xpcEludGVyc2VjdGlvbjpvLGRpdGhlcmluZzplLmRpdGhlcmluZyxzaGFkb3dNYXBFbmFibGVkOnAuc2hhZG93TWFwLmVuYWJsZWQmJjA8ci5sZW5ndGgsc2hhZG93TWFwVHlwZTpwLnNoYWRvd01hcC50eXBlLHRvbmVNYXBwaW5nOmUudG9uZU1hcHBlZD9wLnRvbmVNYXBwaW5nOjAscGh5c2ljYWxseUNvcnJlY3RMaWdodHM6cC5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyxwcmVtdWx0aXBsaWVkQWxwaGE6ZS5wcmVtdWx0aXBsaWVkQWxwaGEsYWxwaGFUZXN0OmUuYWxwaGFUZXN0LGRvdWJsZVNpZGVkOjI9PT1lLnNpZGUsZmxpcFNpZGVkOjE9PT1lLnNpZGUsZGVwdGhQYWNraW5nOnZvaWQgMCE9PWUuZGVwdGhQYWNraW5nP2UuZGVwdGhQYWNraW5nOiExLGluZGV4MEF0dHJpYnV0ZU5hbWU6ZS5pbmRleDBBdHRyaWJ1dGVOYW1lLGV4dGVuc2lvbkRlcml2YXRpdmVzOmUuZXh0ZW5zaW9ucyYmZS5leHRlbnNpb25zLmRlcml2YXRpdmVzLGV4dGVuc2lvbkZyYWdEZXB0aDplLmV4dGVuc2lvbnMmJmUuZXh0ZW5zaW9ucy5mcmFnRGVwdGgsZXh0ZW5zaW9uRHJhd0J1ZmZlcnM6ZS5leHRlbnNpb25zJiZlLmV4dGVuc2lvbnMuZHJhd0J1ZmZlcnMsZXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxPRDplLmV4dGVuc2lvbnMmJmUuZXh0ZW5zaW9ucy5zaGFkZXJUZXh0dXJlTE9ELHJlbmRlcmVyRXh0ZW5zaW9uRnJhZ0RlcHRoOm18fG51bGwhPT1mLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpLHJlbmRlcmVyRXh0ZW5zaW9uRHJhd0J1ZmZlcnM6bXx8bnVsbCE9PWYuZ2V0KFwiV0VCR0xfZHJhd19idWZmZXJzXCIpLHJlbmRlcmVyRXh0ZW5zaW9uU2hhZGVyVGV4dHVyZUxvZDptfHxudWxsIT09Zi5nZXQoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpLG9uQmVmb3JlQ29tcGlsZTplLm9uQmVmb3JlQ29tcGlsZX19O3RoaXMuZ2V0UHJvZ3JhbUNhY2hlS2V5PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Uuc2hhZGVySUQ/dC5wdXNoKGUuc2hhZGVySUQpOih0LnB1c2goZS5mcmFnbWVudFNoYWRlciksdC5wdXNoKGUudmVydGV4U2hhZGVyKSk7aWYodm9pZCAwIT09ZS5kZWZpbmVzKWZvcih2YXIgciBpbiBlLmRlZmluZXMpdC5wdXNoKHIpLHQucHVzaChlLmRlZmluZXNbcl0pO2lmKHZvaWQgMD09PWUuaXNSYXdTaGFkZXJNYXRlcmlhbCl7Zm9yKHI9MDtyPG4ubGVuZ3RoO3IrKyl0LnB1c2goZVtuW3JdXSk7dC5wdXNoKHAub3V0cHV0RW5jb2RpbmcpO3QucHVzaChwLmdhbW1hRmFjdG9yKX10LnB1c2goZS5vbkJlZm9yZUNvbXBpbGUudG9TdHJpbmcoKSk7cmV0dXJuIHQuam9pbigpfTt0aGlzLmFjcXVpcmVQcm9ncmFtPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLG49MCxpPWEubGVuZ3RoO248aTtuKyspe3ZhciBvPWFbbl07aWYoby5jYWNoZUtleT09PXQpe3I9bzsrK3IudXNlZFRpbWVzO2JyZWFrfX12b2lkIDA9PT1yJiYocj1uZXcgeHQocCx0LGUpLGEucHVzaChyKSk7cmV0dXJuIHJ9O3RoaXMucmVsZWFzZVByb2dyYW09ZnVuY3Rpb24oZSl7aWYoMD09PS0tZS51c2VkVGltZXMpe3ZhciB0PWEuaW5kZXhPZihlKTthW3RdPWFbYS5sZW5ndGgtMV07YS5wb3AoKTtlLmRlc3Ryb3koKX19O3RoaXMucHJvZ3JhbXM9YX1mdW5jdGlvbiBTdCgpe3ZhciBuPW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bi5nZXQoZSk7dm9pZCAwPT09dCYmKHQ9e30sbi5zZXQoZSx0KSk7cmV0dXJuIHR9LHJlbW92ZTpmdW5jdGlvbihlKXtuLmRlbGV0ZShlKX0sdXBkYXRlOmZ1bmN0aW9uKGUsdCxyKXtuLmdldChlKVt0XT1yfSxkaXNwb3NlOmZ1bmN0aW9uKCl7bj1uZXcgV2Vha01hcH19fWZ1bmN0aW9uIE10KGUsdCl7cmV0dXJuIGUuZ3JvdXBPcmRlciE9PXQuZ3JvdXBPcmRlcj9lLmdyb3VwT3JkZXItdC5ncm91cE9yZGVyOmUucmVuZGVyT3JkZXIhPT10LnJlbmRlck9yZGVyP2UucmVuZGVyT3JkZXItdC5yZW5kZXJPcmRlcjplLnByb2dyYW0hPT10LnByb2dyYW0/ZS5wcm9ncmFtLmlkLXQucHJvZ3JhbS5pZDplLm1hdGVyaWFsLmlkIT09dC5tYXRlcmlhbC5pZD9lLm1hdGVyaWFsLmlkLXQubWF0ZXJpYWwuaWQ6ZS56IT09dC56P2Uuei10Lno6ZS5pZC10LmlkfWZ1bmN0aW9uIEN0KGUsdCl7cmV0dXJuIGUuZ3JvdXBPcmRlciE9PXQuZ3JvdXBPcmRlcj9lLmdyb3VwT3JkZXItdC5ncm91cE9yZGVyOmUucmVuZGVyT3JkZXIhPT10LnJlbmRlck9yZGVyP2UucmVuZGVyT3JkZXItdC5yZW5kZXJPcmRlcjplLnohPT10Lno/dC56LWUuejplLmlkLXQuaWR9ZnVuY3Rpb24gVHQoKXtmdW5jdGlvbiBhKGUsdCxyLG4saSxvKXt2YXIgYT1zW3VdO3ZvaWQgMD09PWE/KGE9e2lkOmUuaWQsb2JqZWN0OmUsZ2VvbWV0cnk6dCxtYXRlcmlhbDpyLHByb2dyYW06ci5wcm9ncmFtfHxoLGdyb3VwT3JkZXI6bixyZW5kZXJPcmRlcjplLnJlbmRlck9yZGVyLHo6aSxncm91cDpvfSxzW3VdPWEpOihhLmlkPWUuaWQsYS5vYmplY3Q9ZSxhLmdlb21ldHJ5PXQsYS5tYXRlcmlhbD1yLGEucHJvZ3JhbT1yLnByb2dyYW18fGgsYS5ncm91cE9yZGVyPW4sYS5yZW5kZXJPcmRlcj1lLnJlbmRlck9yZGVyLGEuej1pLGEuZ3JvdXA9byk7dSsrO3JldHVybiBhfXZhciBzPVtdLHU9MCxjPVtdLGw9W10saD17aWQ6LTF9O3JldHVybntvcGFxdWU6Yyx0cmFuc3BhcmVudDpsLGluaXQ6ZnVuY3Rpb24oKXt1PTA7Yy5sZW5ndGg9MDtsLmxlbmd0aD0wfSxwdXNoOmZ1bmN0aW9uKGUsdCxyLG4saSxvKXtlPWEoZSx0LHIsbixpLG8pOyghMD09PXIudHJhbnNwYXJlbnQ/bDpjKS5wdXNoKGUpfSx1bnNoaWZ0OmZ1bmN0aW9uKGUsdCxyLG4saSxvKXtlPWEoZSx0LHIsbixpLG8pOyghMD09PXIudHJhbnNwYXJlbnQ/bDpjKS51bnNoaWZ0KGUpfSxmaW5pc2g6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dSx0PXMubGVuZ3RoO2U8dDtlKyspe3ZhciByPXNbZV07aWYobnVsbD09PXIuaWQpYnJlYWs7ci5pZD1udWxsO3Iub2JqZWN0PW51bGw7ci5nZW9tZXRyeT1udWxsO3IubWF0ZXJpYWw9bnVsbDtyLnByb2dyYW09bnVsbDtyLmdyb3VwPW51bGx9fSxzb3J0OmZ1bmN0aW9uKGUsdCl7MTxjLmxlbmd0aCYmYy5zb3J0KGV8fE10KTsxPGwubGVuZ3RoJiZsLnNvcnQodHx8Q3QpfX19ZnVuY3Rpb24gRXQoKXtmdW5jdGlvbiBpKGUpe2U9ZS50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGkpO28uZGVsZXRlKGUpfXZhciBvPW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1vLmdldChlKTtpZih2b2lkIDA9PT1yKXt2YXIgbj1uZXcgVHQ7by5zZXQoZSxuZXcgV2Vha01hcCk7by5nZXQoZSkuc2V0KHQsbik7ZS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGkpfWVsc2Ugbj1yLmdldCh0KSx2b2lkIDA9PT1uJiYobj1uZXcgVHQsci5zZXQodCxuKSk7cmV0dXJuIG59LGRpc3Bvc2U6ZnVuY3Rpb24oKXtvPW5ldyBXZWFrTWFwfX19ZnVuY3Rpb24gT3QoKXt2YXIgcj17fTtyZXR1cm57Z2V0OmZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PXJbZS5pZF0pcmV0dXJuIHJbZS5pZF07c3dpdGNoKGUudHlwZSl7Y2FzZVwiRGlyZWN0aW9uYWxMaWdodFwiOnZhciB0PXtkaXJlY3Rpb246bmV3IFRlLGNvbG9yOm5ldyB2fTticmVhaztjYXNlXCJTcG90TGlnaHRcIjp0PXtwb3NpdGlvbjpuZXcgVGUsZGlyZWN0aW9uOm5ldyBUZSxjb2xvcjpuZXcgdixkaXN0YW5jZTowLGNvbmVDb3M6MCxwZW51bWJyYUNvczowLGRlY2F5OjB9O2JyZWFrO2Nhc2VcIlBvaW50TGlnaHRcIjp0PXtwb3NpdGlvbjpuZXcgVGUsY29sb3I6bmV3IHYsZGlzdGFuY2U6MCxkZWNheTowfTticmVhaztjYXNlXCJIZW1pc3BoZXJlTGlnaHRcIjp0PXtkaXJlY3Rpb246bmV3IFRlLHNreUNvbG9yOm5ldyB2LGdyb3VuZENvbG9yOm5ldyB2fTticmVhaztjYXNlXCJSZWN0QXJlYUxpZ2h0XCI6dD17Y29sb3I6bmV3IHYscG9zaXRpb246bmV3IFRlLGhhbGZXaWR0aDpuZXcgVGUsaGFsZkhlaWdodDpuZXcgVGV9fXJldHVybiByW2UuaWRdPXR9fX1mdW5jdGlvbiBQdCgpe3ZhciByPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09cltlLmlkXSlyZXR1cm4gcltlLmlkXTtzd2l0Y2goZS50eXBlKXtjYXNlXCJEaXJlY3Rpb25hbExpZ2h0XCI6dmFyIHQ9e3NoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBNZX07YnJlYWs7Y2FzZVwiU3BvdExpZ2h0XCI6dD17c2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IE1lfTticmVhaztjYXNlXCJQb2ludExpZ2h0XCI6dD17c2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IE1lLHNoYWRvd0NhbWVyYU5lYXI6MSxzaGFkb3dDYW1lcmFGYXI6MWUzfX1yZXR1cm4gcltlLmlkXT10fX19ZnVuY3Rpb24gQXQoZSx0KXtyZXR1cm4odC5jYXN0U2hhZG93PzE6MCktKGUuY2FzdFNoYWRvdz8xOjApfWZ1bmN0aW9uIGp0KCl7Zm9yKHZhciB4PW5ldyBPdCx3PVB0KCksUz17dmVyc2lvbjowLGhhc2g6e2RpcmVjdGlvbmFsTGVuZ3RoOi0xLHBvaW50TGVuZ3RoOi0xLHNwb3RMZW5ndGg6LTEscmVjdEFyZWFMZW5ndGg6LTEsaGVtaUxlbmd0aDotMSxudW1EaXJlY3Rpb25hbFNoYWRvd3M6LTEsbnVtUG9pbnRTaGFkb3dzOi0xLG51bVNwb3RTaGFkb3dzOi0xfSxhbWJpZW50OlswLDAsMF0scHJvYmU6W10sZGlyZWN0aW9uYWw6W10sZGlyZWN0aW9uYWxTaGFkb3c6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXA6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6W10sc3BvdDpbXSxzcG90U2hhZG93OltdLHNwb3RTaGFkb3dNYXA6W10sc3BvdFNoYWRvd01hdHJpeDpbXSxyZWN0QXJlYTpbXSxwb2ludDpbXSxwb2ludFNoYWRvdzpbXSxwb2ludFNoYWRvd01hcDpbXSxwb2ludFNoYWRvd01hdHJpeDpbXSxoZW1pOltdfSxlPTA7OT5lO2UrKylTLnByb2JlLnB1c2gobmV3IFRlKTt2YXIgTT1uZXcgVGUsQz1uZXcgRWUsVD1uZXcgRWU7cmV0dXJue3NldHVwOmZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49MCxpPTAsbz0wLGE9MDs5PmE7YSsrKVMucHJvYmVbYV0uc2V0KDAsMCwwKTt2YXIgcz10PTAsdT0wLGM9MCxsPTAsaD0wLHA9MCxmPTA7cj1yLm1hdHJpeFdvcmxkSW52ZXJzZTtlLnNvcnQoQXQpO2E9MDtmb3IodmFyIGQ9ZS5sZW5ndGg7YTxkO2ErKyl7dmFyIHY9ZVthXSxtPXYuY29sb3IsZz12LmludGVuc2l0eSxfPXYuZGlzdGFuY2UseT12LnNoYWRvdyYmdi5zaGFkb3cubWFwP3Yuc2hhZG93Lm1hcC50ZXh0dXJlOm51bGw7aWYodi5pc0FtYmllbnRMaWdodCluKz1tLnIqZyxpKz1tLmcqZyxvKz1tLmIqZztlbHNlIGlmKHYuaXNMaWdodFByb2JlKWZvcih5PTA7OT55O3krKylTLnByb2JlW3ldLmFkZFNjYWxlZFZlY3Rvcih2LnNoLmNvZWZmaWNpZW50c1t5XSxnKTtlbHNlIGlmKHYuaXNEaXJlY3Rpb25hbExpZ2h0KXt2YXIgYj14LmdldCh2KTtiLmNvbG9yLmNvcHkodi5jb2xvcikubXVsdGlwbHlTY2FsYXIodi5pbnRlbnNpdHkpO2IuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbih2Lm1hdHJpeFdvcmxkKTtNLnNldEZyb21NYXRyaXhQb3NpdGlvbih2LnRhcmdldC5tYXRyaXhXb3JsZCk7Yi5kaXJlY3Rpb24uc3ViKE0pO2IuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihyKTt2LmNhc3RTaGFkb3cmJihnPXYuc2hhZG93LG09dy5nZXQodiksbS5zaGFkb3dCaWFzPWcuYmlhcyxtLnNoYWRvd1JhZGl1cz1nLnJhZGl1cyxtLnNoYWRvd01hcFNpemU9Zy5tYXBTaXplLFMuZGlyZWN0aW9uYWxTaGFkb3dbdF09bSxTLmRpcmVjdGlvbmFsU2hhZG93TWFwW3RdPXksUy5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeFt0XT12LnNoYWRvdy5tYXRyaXgsaCsrKTtTLmRpcmVjdGlvbmFsW3RdPWI7dCsrfWVsc2Ugdi5pc1Nwb3RMaWdodD8oYj14LmdldCh2KSxiLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbih2Lm1hdHJpeFdvcmxkKSxiLnBvc2l0aW9uLmFwcGx5TWF0cml4NChyKSxiLmNvbG9yLmNvcHkobSkubXVsdGlwbHlTY2FsYXIoZyksYi5kaXN0YW5jZT1fLGIuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbih2Lm1hdHJpeFdvcmxkKSxNLnNldEZyb21NYXRyaXhQb3NpdGlvbih2LnRhcmdldC5tYXRyaXhXb3JsZCksYi5kaXJlY3Rpb24uc3ViKE0pLGIuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihyKSxiLmNvbmVDb3M9TWF0aC5jb3Modi5hbmdsZSksYi5wZW51bWJyYUNvcz1NYXRoLmNvcyh2LmFuZ2xlKigxLXYucGVudW1icmEpKSxiLmRlY2F5PXYuZGVjYXksdi5jYXN0U2hhZG93JiYoZz12LnNoYWRvdyxtPXcuZ2V0KHYpLG0uc2hhZG93Qmlhcz1nLmJpYXMsbS5zaGFkb3dSYWRpdXM9Zy5yYWRpdXMsbS5zaGFkb3dNYXBTaXplPWcubWFwU2l6ZSxTLnNwb3RTaGFkb3dbdV09bSxTLnNwb3RTaGFkb3dNYXBbdV09eSxTLnNwb3RTaGFkb3dNYXRyaXhbdV09di5zaGFkb3cubWF0cml4LGYrKyksUy5zcG90W3VdPWIsdSsrKTp2LmlzUmVjdEFyZWFMaWdodD8oYj14LmdldCh2KSxiLmNvbG9yLmNvcHkobSkubXVsdGlwbHlTY2FsYXIoZyksYi5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24odi5tYXRyaXhXb3JsZCksYi5wb3NpdGlvbi5hcHBseU1hdHJpeDQociksVC5pZGVudGl0eSgpLEMuY29weSh2Lm1hdHJpeFdvcmxkKSxDLnByZW11bHRpcGx5KHIpLFQuZXh0cmFjdFJvdGF0aW9uKEMpLGIuaGFsZldpZHRoLnNldCguNSp2LndpZHRoLDAsMCksYi5oYWxmSGVpZ2h0LnNldCgwLC41KnYuaGVpZ2h0LDApLGIuaGFsZldpZHRoLmFwcGx5TWF0cml4NChUKSxiLmhhbGZIZWlnaHQuYXBwbHlNYXRyaXg0KFQpLFMucmVjdEFyZWFbY109YixjKyspOnYuaXNQb2ludExpZ2h0PyhiPXguZ2V0KHYpLGIucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHYubWF0cml4V29ybGQpLGIucG9zaXRpb24uYXBwbHlNYXRyaXg0KHIpLGIuY29sb3IuY29weSh2LmNvbG9yKS5tdWx0aXBseVNjYWxhcih2LmludGVuc2l0eSksYi5kaXN0YW5jZT12LmRpc3RhbmNlLGIuZGVjYXk9di5kZWNheSx2LmNhc3RTaGFkb3cmJihnPXYuc2hhZG93LG09dy5nZXQodiksbS5zaGFkb3dCaWFzPWcuYmlhcyxtLnNoYWRvd1JhZGl1cz1nLnJhZGl1cyxtLnNoYWRvd01hcFNpemU9Zy5tYXBTaXplLG0uc2hhZG93Q2FtZXJhTmVhcj1nLmNhbWVyYS5uZWFyLG0uc2hhZG93Q2FtZXJhRmFyPWcuY2FtZXJhLmZhcixTLnBvaW50U2hhZG93W3NdPW0sUy5wb2ludFNoYWRvd01hcFtzXT15LFMucG9pbnRTaGFkb3dNYXRyaXhbc109di5zaGFkb3cubWF0cml4LHArKyksUy5wb2ludFtzXT1iLHMrKyk6di5pc0hlbWlzcGhlcmVMaWdodCYmKGI9eC5nZXQodiksYi5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHYubWF0cml4V29ybGQpLGIuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihyKSxiLmRpcmVjdGlvbi5ub3JtYWxpemUoKSxiLnNreUNvbG9yLmNvcHkodi5jb2xvcikubXVsdGlwbHlTY2FsYXIoZyksYi5ncm91bmRDb2xvci5jb3B5KHYuZ3JvdW5kQ29sb3IpLm11bHRpcGx5U2NhbGFyKGcpLFMuaGVtaVtsXT1iLGwrKyl9Uy5hbWJpZW50WzBdPW47Uy5hbWJpZW50WzFdPWk7Uy5hbWJpZW50WzJdPW87ZT1TLmhhc2g7aWYoZS5kaXJlY3Rpb25hbExlbmd0aCE9PXR8fGUucG9pbnRMZW5ndGghPT1zfHxlLnNwb3RMZW5ndGghPT11fHxlLnJlY3RBcmVhTGVuZ3RoIT09Y3x8ZS5oZW1pTGVuZ3RoIT09bHx8ZS5udW1EaXJlY3Rpb25hbFNoYWRvd3MhPT1ofHxlLm51bVBvaW50U2hhZG93cyE9PXB8fGUubnVtU3BvdFNoYWRvd3MhPT1mKVMuZGlyZWN0aW9uYWwubGVuZ3RoPXQsUy5zcG90Lmxlbmd0aD11LFMucmVjdEFyZWEubGVuZ3RoPWMsUy5wb2ludC5sZW5ndGg9cyxTLmhlbWkubGVuZ3RoPWwsUy5kaXJlY3Rpb25hbFNoYWRvdy5sZW5ndGg9aCxTLmRpcmVjdGlvbmFsU2hhZG93TWFwLmxlbmd0aD1oLFMucG9pbnRTaGFkb3cubGVuZ3RoPXAsUy5wb2ludFNoYWRvd01hcC5sZW5ndGg9cCxTLnNwb3RTaGFkb3cubGVuZ3RoPWYsUy5zcG90U2hhZG93TWFwLmxlbmd0aD1mLFMuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgubGVuZ3RoPWgsUy5wb2ludFNoYWRvd01hdHJpeC5sZW5ndGg9cCxTLnNwb3RTaGFkb3dNYXRyaXgubGVuZ3RoPWYsZS5kaXJlY3Rpb25hbExlbmd0aD10LGUucG9pbnRMZW5ndGg9cyxlLnNwb3RMZW5ndGg9dSxlLnJlY3RBcmVhTGVuZ3RoPWMsZS5oZW1pTGVuZ3RoPWwsZS5udW1EaXJlY3Rpb25hbFNoYWRvd3M9aCxlLm51bVBvaW50U2hhZG93cz1wLGUubnVtU3BvdFNoYWRvd3M9ZixTLnZlcnNpb249SnMrK30sc3RhdGU6U319ZnVuY3Rpb24gUnQoKXt2YXIgdD1uZXcganQscj1bXSxuPVtdO3JldHVybntpbml0OmZ1bmN0aW9uKCl7ci5sZW5ndGg9MDtuLmxlbmd0aD0wfSxzdGF0ZTp7bGlnaHRzQXJyYXk6cixzaGFkb3dzQXJyYXk6bixsaWdodHM6dH0sc2V0dXBMaWdodHM6ZnVuY3Rpb24oZSl7dC5zZXR1cChyLG4sZSl9LHB1c2hMaWdodDpmdW5jdGlvbihlKXtyLnB1c2goZSl9LHB1c2hTaGFkb3c6ZnVuY3Rpb24oZSl7bi5wdXNoKGUpfX19ZnVuY3Rpb24ga3QoKXtmdW5jdGlvbiBuKGUpe2U9ZS50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG4pO2kuZGVsZXRlKGUpfXZhciBpPW5ldyBXZWFrTWFwO3JldHVybntnZXQ6ZnVuY3Rpb24oZSx0KXtpZighMT09PWkuaGFzKGUpKXt2YXIgcj1uZXcgUnQ7aS5zZXQoZSxuZXcgV2Vha01hcCk7aS5nZXQoZSkuc2V0KHQscik7ZS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG4pfWVsc2UhMT09PWkuZ2V0KGUpLmhhcyh0KT8ocj1uZXcgUnQsaS5nZXQoZSkuc2V0KHQscikpOnI9aS5nZXQoZSkuZ2V0KHQpO3JldHVybiByfSxkaXNwb3NlOmZ1bmN0aW9uKCl7aT1uZXcgV2Vha01hcH19fWZ1bmN0aW9uIEx0KGUpe3kuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoRGVwdGhNYXRlcmlhbFwiO3RoaXMuZGVwdGhQYWNraW5nPTMyMDA7dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLmRpc3BsYWNlbWVudE1hcD10aGlzLmFscGhhTWFwPXRoaXMubWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoZSl9ZnVuY3Rpb24gTnQoZSl7eS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hEaXN0YW5jZU1hdGVyaWFsXCI7dGhpcy5yZWZlcmVuY2VQb3NpdGlvbj1uZXcgVGU7dGhpcy5uZWFyRGlzdGFuY2U9MTt0aGlzLmZhckRpc3RhbmNlPTFlMzt0aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuZGlzcGxhY2VtZW50TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoZSl9ZnVuY3Rpb24gSXQoZCx2LG0pe2Z1bmN0aW9uIGMoZSx0LHIpe3I9ZTw8MHx0PDwxfHI8PDI7dmFyIG49aVtyXTt2b2lkIDA9PT1uJiYobj1uZXcgTHQoe2RlcHRoUGFja2luZzozMjAxLG1vcnBoVGFyZ2V0czplLHNraW5uaW5nOnR9KSxpW3JdPW4pO3JldHVybiBufWZ1bmN0aW9uIGwoZSx0LHIpe3I9ZTw8MHx0PDwxfHI8PDI7dmFyIG49b1tyXTt2b2lkIDA9PT1uJiYobj1uZXcgTnQoe21vcnBoVGFyZ2V0czplLHNraW5uaW5nOnR9KSxvW3JdPW4pO3JldHVybiBufWZ1bmN0aW9uIHAoZSx0LHIsbixpLG8sYSl7dmFyIHM9Yyx1PWUuY3VzdG9tRGVwdGhNYXRlcmlhbDshMD09PW4uaXNQb2ludExpZ2h0JiYocz1sLHU9ZS5jdXN0b21EaXN0YW5jZU1hdGVyaWFsKTt2b2lkIDA9PT11Pyh1PSExLCEwPT09ci5tb3JwaFRhcmdldHMmJih1PXQubW9ycGhBdHRyaWJ1dGVzJiZ0Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbiYmMDx0Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGgpLHQ9ITEsITA9PT1lLmlzU2tpbm5lZE1lc2gmJighMD09PXIuc2tpbm5pbmc/dD0hMDpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRvd01hcDogVEhSRUUuU2tpbm5lZE1lc2ggd2l0aCBtYXRlcmlhbC5za2lubmluZyBzZXQgdG8gZmFsc2U6XCIsZSkpLGU9cyh1LHQsITA9PT1lLmlzSW5zdGFuY2VkTWVzaCkpOmU9dTtkLmxvY2FsQ2xpcHBpbmdFbmFibGVkJiYhMD09PXIuY2xpcFNoYWRvd3MmJjAhPT1yLmNsaXBwaW5nUGxhbmVzLmxlbmd0aCYmKHU9ZS51dWlkLHM9ci51dWlkLHQ9aFt1XSx2b2lkIDA9PT10JiYodD17fSxoW3VdPXQpLHU9dFtzXSx2b2lkIDA9PT11JiYodT1lLmNsb25lKCksdFtzXT11KSxlPXUpO2UudmlzaWJsZT1yLnZpc2libGU7ZS53aXJlZnJhbWU9ci53aXJlZnJhbWU7ZS5zaWRlPTM9PT1hP251bGwhPT1yLnNoYWRvd1NpZGU/ci5zaGFkb3dTaWRlOnIuc2lkZTpudWxsIT09ci5zaGFkb3dTaWRlP3Iuc2hhZG93U2lkZTpmW3Iuc2lkZV07ZS5jbGlwU2hhZG93cz1yLmNsaXBTaGFkb3dzO2UuY2xpcHBpbmdQbGFuZXM9ci5jbGlwcGluZ1BsYW5lcztlLmNsaXBJbnRlcnNlY3Rpb249ci5jbGlwSW50ZXJzZWN0aW9uO2Uud2lyZWZyYW1lTGluZXdpZHRoPXIud2lyZWZyYW1lTGluZXdpZHRoO2UubGluZXdpZHRoPXIubGluZXdpZHRoOyEwPT09bi5pc1BvaW50TGlnaHQmJiEwPT09ZS5pc01lc2hEaXN0YW5jZU1hdGVyaWFsJiYoZS5yZWZlcmVuY2VQb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obi5tYXRyaXhXb3JsZCksZS5uZWFyRGlzdGFuY2U9aSxlLmZhckRpc3RhbmNlPW8pO3JldHVybiBlfWZ1bmN0aW9uIGcoZSx0LHIsbixpKXtpZighMSE9PWUudmlzaWJsZSl7aWYoZS5sYXllcnMudGVzdCh0LmxheWVycykmJihlLmlzTWVzaHx8ZS5pc0xpbmV8fGUuaXNQb2ludHMpJiYoZS5jYXN0U2hhZG93fHxlLnJlY2VpdmVTaGFkb3cmJjM9PT1pKSYmKCFlLmZydXN0dW1DdWxsZWR8fF8uaW50ZXJzZWN0c09iamVjdChlKSkpe2UubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoci5tYXRyaXhXb3JsZEludmVyc2UsZS5tYXRyaXhXb3JsZCk7dmFyIG89di51cGRhdGUoZSksYT1lLm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBzPW8uZ3JvdXBzLHU9MCxjPXMubGVuZ3RoO3U8Yzt1Kyspe3ZhciBsPXNbdV0saD1hW2wubWF0ZXJpYWxJbmRleF07aCYmaC52aXNpYmxlJiYoaD1wKGUsbyxoLG4sci5uZWFyLHIuZmFyLGkpLGQucmVuZGVyQnVmZmVyRGlyZWN0KHIsbnVsbCxvLGgsZSxsKSl9ZWxzZSBhLnZpc2libGUmJihoPXAoZSxvLGEsbixyLm5lYXIsci5mYXIsaSksZC5yZW5kZXJCdWZmZXJEaXJlY3QocixudWxsLG8saCxlLG51bGwpKX1lPWUuY2hpbGRyZW47bz0wO2ZvcihhPWUubGVuZ3RoO288YTtvKyspZyhlW29dLHQscixuLGkpfX12YXIgXz1uZXcgQWUseT1uZXcgTWUsYj1uZXcgTWUseD1uZXcgQ2UsaT1bXSxvPVtdLGg9e30sZj17MDoxLDE6MCwyOjJ9LHc9bmV3IEcoe2RlZmluZXM6e1NBTVBMRV9SQVRFOi4yNSxIQUxGX1NBTVBMRV9SQVRFOi4xMjV9LHVuaWZvcm1zOntzaGFkb3dfcGFzczp7dmFsdWU6bnVsbH0scmVzb2x1dGlvbjp7dmFsdWU6bmV3IE1lfSxyYWRpdXM6e3ZhbHVlOjR9fSx2ZXJ0ZXhTaGFkZXI6XCJ2b2lkIG1haW4oKSB7XFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVwiLGZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBzYW1wbGVyMkQgc2hhZG93X3Bhc3M7XFxudW5pZm9ybSB2ZWMyIHJlc29sdXRpb247XFxudW5pZm9ybSBmbG9hdCByYWRpdXM7XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxudm9pZCBtYWluKCkge1xcbiAgZmxvYXQgbWVhbiA9IDAuMDtcXG4gIGZsb2F0IHNxdWFyZWRfbWVhbiA9IDAuMDtcXG5cXHRmbG9hdCBkZXB0aCA9IHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIHNoYWRvd19wYXNzLCAoIGdsX0ZyYWdDb29yZC54eSAgKSAvIHJlc29sdXRpb24gKSApO1xcbiAgZm9yICggZmxvYXQgaSA9IC0xLjA7IGkgPCAxLjAgOyBpICs9IFNBTVBMRV9SQVRFKSB7XFxuICAgICNpZmRlZiBIT1JJWk9OQUxfUEFTU1xcbiAgICAgIHZlYzIgZGlzdHJpYnV0aW9uID0gdW5wYWNrUkdCQVRvMkhhbGYoIHRleHR1cmUyRCggc2hhZG93X3Bhc3MsICggZ2xfRnJhZ0Nvb3JkLnh5ICsgdmVjMiggaSwgMC4wICkgKiByYWRpdXMgKSAvIHJlc29sdXRpb24gKSApO1xcbiAgICAgIG1lYW4gKz0gZGlzdHJpYnV0aW9uLng7XFxuICAgICAgc3F1YXJlZF9tZWFuICs9IGRpc3RyaWJ1dGlvbi55ICogZGlzdHJpYnV0aW9uLnkgKyBkaXN0cmlidXRpb24ueCAqIGRpc3RyaWJ1dGlvbi54O1xcbiAgICAjZWxzZVxcbiAgICAgIGZsb2F0IGRlcHRoID0gdW5wYWNrUkdCQVRvRGVwdGgoIHRleHR1cmUyRCggc2hhZG93X3Bhc3MsICggZ2xfRnJhZ0Nvb3JkLnh5ICsgdmVjMiggMC4wLCAgaSApICAqIHJhZGl1cyApIC8gcmVzb2x1dGlvbiApICk7XFxuICAgICAgbWVhbiArPSBkZXB0aDtcXG4gICAgICBzcXVhcmVkX21lYW4gKz0gZGVwdGggKiBkZXB0aDtcXG4gICAgI2VuZGlmXFxuICB9XFxuICBtZWFuID0gbWVhbiAqIEhBTEZfU0FNUExFX1JBVEU7XFxuICBzcXVhcmVkX21lYW4gPSBzcXVhcmVkX21lYW4gKiBIQUxGX1NBTVBMRV9SQVRFO1xcbiAgZmxvYXQgc3RkX2RldiA9IHNxcnQoIHNxdWFyZWRfbWVhbiAtIG1lYW4gKiBtZWFuICk7XFxuICBnbF9GcmFnQ29sb3IgPSBwYWNrMkhhbGZUb1JHQkEoIHZlYzIoIG1lYW4sIHN0ZF9kZXYgKSApO1xcbn1cIn0pLFM9dy5jbG9uZSgpO1MuZGVmaW5lcy5IT1JJWk9OQUxfUEFTUz0xO3ZhciBlPW5ldyBOO2Uuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgRShuZXcgRmxvYXQzMkFycmF5KFstMSwtMSwuNSwzLC0xLC41LC0xLDMsLjVdKSwzKSk7dmFyIE09bmV3IEkoZSx3KSxDPXRoaXM7dGhpcy5lbmFibGVkPSExO3RoaXMuYXV0b1VwZGF0ZT0hMDt0aGlzLm5lZWRzVXBkYXRlPSExO3RoaXMudHlwZT0xO3RoaXMucmVuZGVyPWZ1bmN0aW9uKGUsdCxyKXtpZighMSE9PUMuZW5hYmxlZCYmKCExIT09Qy5hdXRvVXBkYXRlfHwhMSE9PUMubmVlZHNVcGRhdGUpJiYwIT09ZS5sZW5ndGgpe3ZhciBuPWQuZ2V0UmVuZGVyVGFyZ2V0KCksaT1kLmdldEFjdGl2ZUN1YmVGYWNlKCksbz1kLmdldEFjdGl2ZU1pcG1hcExldmVsKCksYT1kLnN0YXRlO2Euc2V0QmxlbmRpbmcoMCk7YS5idWZmZXJzLmNvbG9yLnNldENsZWFyKDEsMSwxLDEpO2EuYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKTthLnNldFNjaXNzb3JUZXN0KCExKTtmb3IodmFyIHM9MCx1PWUubGVuZ3RoO3M8dTtzKyspe3ZhciBjPWVbc10sbD1jLnNoYWRvdztpZih2b2lkIDA9PT1sKWNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOlwiLGMsXCJoYXMgbm8gc2hhZG93LlwiKTtlbHNle3kuY29weShsLm1hcFNpemUpO3ZhciBoPWwuZ2V0RnJhbWVFeHRlbnRzKCk7eS5tdWx0aXBseShoKTtiLmNvcHkobC5tYXBTaXplKTtpZih5Lng+bXx8eS55Pm0peS54Pm0mJihiLng9TWF0aC5mbG9vcihtL2gueCkseS54PWIueCpoLngsbC5tYXBTaXplLng9Yi54KSx5Lnk+bSYmKGIueT1NYXRoLmZsb29yKG0vaC55KSx5Lnk9Yi55KmgueSxsLm1hcFNpemUueT1iLnkpO251bGwhPT1sLm1hcHx8bC5pc1BvaW50TGlnaHRTaGFkb3d8fDMhPT10aGlzLnR5cGV8fChoPXttaW5GaWx0ZXI6MTAwNixtYWdGaWx0ZXI6MTAwNixmb3JtYXQ6MTAyM30sbC5tYXA9bmV3IFQoeS54LHkueSxoKSxsLm1hcC50ZXh0dXJlLm5hbWU9Yy5uYW1lK1wiLnNoYWRvd01hcFwiLGwubWFwUGFzcz1uZXcgVCh5LngseS55LGgpLGwuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSk7bnVsbD09PWwubWFwJiYoaD17bWluRmlsdGVyOjEwMDMsbWFnRmlsdGVyOjEwMDMsZm9ybWF0OjEwMjN9LGwubWFwPW5ldyBUKHkueCx5LnksaCksbC5tYXAudGV4dHVyZS5uYW1lPWMubmFtZStcIi5zaGFkb3dNYXBcIixsLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCkpO2Quc2V0UmVuZGVyVGFyZ2V0KGwubWFwKTtkLmNsZWFyKCk7aD1sLmdldFZpZXdwb3J0Q291bnQoKTtmb3IodmFyIHA9MDtwPGg7cCsrKXt2YXIgZj1sLmdldFZpZXdwb3J0KHApO3guc2V0KGIueCpmLngsYi55KmYueSxiLngqZi56LGIueSpmLncpO2Eudmlld3BvcnQoeCk7bC51cGRhdGVNYXRyaWNlcyhjLHApO189bC5nZXRGcnVzdHVtKCk7Zyh0LHIsbC5jYW1lcmEsYyx0aGlzLnR5cGUpfWwuaXNQb2ludExpZ2h0U2hhZG93fHwzIT09dGhpcy50eXBlfHwoYz1sLGw9cixoPXYudXBkYXRlKE0pLHcudW5pZm9ybXMuc2hhZG93X3Bhc3MudmFsdWU9Yy5tYXAudGV4dHVyZSx3LnVuaWZvcm1zLnJlc29sdXRpb24udmFsdWU9Yy5tYXBTaXplLHcudW5pZm9ybXMucmFkaXVzLnZhbHVlPWMucmFkaXVzLGQuc2V0UmVuZGVyVGFyZ2V0KGMubWFwUGFzcyksZC5jbGVhcigpLGQucmVuZGVyQnVmZmVyRGlyZWN0KGwsbnVsbCxoLHcsTSxudWxsKSxTLnVuaWZvcm1zLnNoYWRvd19wYXNzLnZhbHVlPWMubWFwUGFzcy50ZXh0dXJlLFMudW5pZm9ybXMucmVzb2x1dGlvbi52YWx1ZT1jLm1hcFNpemUsUy51bmlmb3Jtcy5yYWRpdXMudmFsdWU9Yy5yYWRpdXMsZC5zZXRSZW5kZXJUYXJnZXQoYy5tYXApLGQuY2xlYXIoKSxkLnJlbmRlckJ1ZmZlckRpcmVjdChsLG51bGwsaCxTLE0sbnVsbCkpfX1DLm5lZWRzVXBkYXRlPSExO2Quc2V0UmVuZGVyVGFyZ2V0KG4saSxvKX19fWZ1bmN0aW9uIER0KGwscixlKXtmdW5jdGlvbiB0KGUsdCxyKXt2YXIgbj1uZXcgVWludDhBcnJheSg0KSxpPWwuY3JlYXRlVGV4dHVyZSgpO2wuYmluZFRleHR1cmUoZSxpKTtsLnRleFBhcmFtZXRlcmkoZSwxMDI0MSw5NzI4KTtsLnRleFBhcmFtZXRlcmkoZSwxMDI0MCw5NzI4KTtmb3IoZT0wO2U8cjtlKyspbC50ZXhJbWFnZTJEKHQrZSwwLDY0MDgsMSwxLDAsNjQwOCw1MTIxLG4pO3JldHVybiBpfWZ1bmN0aW9uIG4oZSx0KXttW2VdPTE7MD09PWdbZV0mJihsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLGdbZV09MSk7X1tlXSE9PXQmJigoYz9sOnIuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKSlbYz9cInZlcnRleEF0dHJpYkRpdmlzb3JcIjpcInZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRVwiXShlLHQpLF9bZV09dCl9ZnVuY3Rpb24gaChlKXshMCE9PXlbZV0mJihsLmVuYWJsZShlKSx5W2VdPSEwKX1mdW5jdGlvbiBwKGUpeyExIT09eVtlXSYmKGwuZGlzYWJsZShlKSx5W2VdPSExKX1mdW5jdGlvbiBpKGUsdCxyLG4saSxvLGEscyl7aWYoMD09PWUpeCYmKHAoMzA0MikseD0hMSk7ZWxzZSBpZih4fHwoaCgzMDQyKSx4PSEwKSw1IT09ZSl7aWYoZSE9PXd8fHMhPT1QKXtpZigxMDAhPT1TfHwxMDAhPT1UKWwuYmxlbmRFcXVhdGlvbigzMjc3NCksVD1TPTEwMDtpZihzKXN3aXRjaChlKXtjYXNlIDE6bC5ibGVuZEZ1bmNTZXBhcmF0ZSgxLDc3MSwxLDc3MSk7YnJlYWs7Y2FzZSAyOmwuYmxlbmRGdW5jKDEsMSk7YnJlYWs7Y2FzZSAzOmwuYmxlbmRGdW5jU2VwYXJhdGUoMCwwLDc2OSw3NzEpO2JyZWFrO2Nhc2UgNDpsLmJsZW5kRnVuY1NlcGFyYXRlKDAsNzY4LDAsNzcwKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOiBJbnZhbGlkIGJsZW5kaW5nOiBcIixlKX1lbHNlIHN3aXRjaChlKXtjYXNlIDE6bC5ibGVuZEZ1bmNTZXBhcmF0ZSg3NzAsNzcxLDEsNzcxKTticmVhaztjYXNlIDI6bC5ibGVuZEZ1bmMoNzcwLDEpO2JyZWFrO2Nhc2UgMzpsLmJsZW5kRnVuYygwLDc2OSk7YnJlYWs7Y2FzZSA0OmwuYmxlbmRGdW5jKDAsNzY4KTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOiBJbnZhbGlkIGJsZW5kaW5nOiBcIixlKX1PPUU9Qz1NPW51bGw7dz1lO1A9c319ZWxzZXtpPWl8fHQ7bz1vfHxyO2E9YXx8bjtpZih0IT09U3x8aSE9PVQpbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoR1t0XSxHW2ldKSxTPXQsVD1pO2lmKHIhPT1NfHxuIT09Q3x8byE9PUV8fGEhPT1PKWwuYmxlbmRGdW5jU2VwYXJhdGUoVltyXSxWW25dLFZbb10sVlthXSksTT1yLEM9bixFPW8sTz1hO3c9ZTtQPW51bGx9fWZ1bmN0aW9uIG8oZSl7QSE9PWUmJihlP2wuZnJvbnRGYWNlKDIzMDQpOmwuZnJvbnRGYWNlKDIzMDUpLEE9ZSl9ZnVuY3Rpb24gYShlKXswIT09ZT8oaCgyODg0KSxlIT09aiYmKDE9PT1lP2wuY3VsbEZhY2UoMTAyOSk6Mj09PWU/bC5jdWxsRmFjZSgxMDI4KTpsLmN1bGxGYWNlKDEwMzIpKSk6cCgyODg0KTtqPWV9ZnVuY3Rpb24gcyhlLHQscil7aWYoZSl7aWYoaCgzMjgyMyksayE9PXR8fEwhPT1yKWwucG9seWdvbk9mZnNldCh0LHIpLGs9dCxMPXJ9ZWxzZSBwKDMyODIzKX1mdW5jdGlvbiB1KGUpe3ZvaWQgMD09PWUmJihlPTMzOTg0K04tMSk7RCE9PWUmJihsLmFjdGl2ZVRleHR1cmUoZSksRD1lKX12YXIgYz1lLmlzV2ViR0wyLGY9bmV3IGZ1bmN0aW9uKCl7dmFyIHQ9ITEsbz1uZXcgQ2Uscj1udWxsLGE9bmV3IENlKDAsMCwwLDApO3JldHVybntzZXRNYXNrOmZ1bmN0aW9uKGUpe3I9PT1lfHx0fHwobC5jb2xvck1hc2soZSxlLGUsZSkscj1lKX0sc2V0TG9ja2VkOmZ1bmN0aW9uKGUpe3Q9ZX0sc2V0Q2xlYXI6ZnVuY3Rpb24oZSx0LHIsbixpKXshMD09PWkmJihlKj1uLHQqPW4scio9bik7by5zZXQoZSx0LHIsbik7ITE9PT1hLmVxdWFscyhvKSYmKGwuY2xlYXJDb2xvcihlLHQscixuKSxhLmNvcHkobykpfSxyZXNldDpmdW5jdGlvbigpe3Q9ITE7cj1udWxsO2Euc2V0KC0xLDAsMCwwKX19fSxkPW5ldyBmdW5jdGlvbigpe3ZhciB0PSExLHI9bnVsbCxuPW51bGwsaT1udWxsO3JldHVybntzZXRUZXN0OmZ1bmN0aW9uKGUpe2U/aCgyOTI5KTpwKDI5MjkpfSxzZXRNYXNrOmZ1bmN0aW9uKGUpe3I9PT1lfHx0fHwobC5kZXB0aE1hc2soZSkscj1lKX0sc2V0RnVuYzpmdW5jdGlvbihlKXtpZihuIT09ZSl7aWYoZSlzd2l0Y2goZSl7Y2FzZSAwOmwuZGVwdGhGdW5jKDUxMik7YnJlYWs7Y2FzZSAxOmwuZGVwdGhGdW5jKDUxOSk7YnJlYWs7Y2FzZSAyOmwuZGVwdGhGdW5jKDUxMyk7YnJlYWs7Y2FzZSAzOmwuZGVwdGhGdW5jKDUxNSk7YnJlYWs7Y2FzZSA0OmwuZGVwdGhGdW5jKDUxNCk7YnJlYWs7Y2FzZSA1OmwuZGVwdGhGdW5jKDUxOCk7YnJlYWs7Y2FzZSA2OmwuZGVwdGhGdW5jKDUxNik7YnJlYWs7Y2FzZSA3OmwuZGVwdGhGdW5jKDUxNyk7YnJlYWs7ZGVmYXVsdDpsLmRlcHRoRnVuYyg1MTUpfWVsc2UgbC5kZXB0aEZ1bmMoNTE1KTtuPWV9fSxzZXRMb2NrZWQ6ZnVuY3Rpb24oZSl7dD1lfSxzZXRDbGVhcjpmdW5jdGlvbihlKXtpIT09ZSYmKGwuY2xlYXJEZXB0aChlKSxpPWUpfSxyZXNldDpmdW5jdGlvbigpe3Q9ITE7aT1uPXI9bnVsbH19fSx2PW5ldyBmdW5jdGlvbigpe3ZhciB0PSExLHI9bnVsbCxuPW51bGwsaT1udWxsLG89bnVsbCxhPW51bGwscz1udWxsLHU9bnVsbCxjPW51bGw7cmV0dXJue3NldFRlc3Q6ZnVuY3Rpb24oZSl7dHx8KGU/aCgyOTYwKTpwKDI5NjApKX0sc2V0TWFzazpmdW5jdGlvbihlKXtyPT09ZXx8dHx8KGwuc3RlbmNpbE1hc2soZSkscj1lKX0sc2V0RnVuYzpmdW5jdGlvbihlLHQscil7aWYobiE9PWV8fGkhPT10fHxvIT09cilsLnN0ZW5jaWxGdW5jKGUsdCxyKSxuPWUsaT10LG89cn0sc2V0T3A6ZnVuY3Rpb24oZSx0LHIpe2lmKGEhPT1lfHxzIT09dHx8dSE9PXIpbC5zdGVuY2lsT3AoZSx0LHIpLGE9ZSxzPXQsdT1yfSxzZXRMb2NrZWQ6ZnVuY3Rpb24oZSl7dD1lfSxzZXRDbGVhcjpmdW5jdGlvbihlKXtjIT09ZSYmKGwuY2xlYXJTdGVuY2lsKGUpLGM9ZSl9LHJlc2V0OmZ1bmN0aW9uKCl7dD0hMTtjPXU9cz1hPW89aT1uPXI9bnVsbH19fTtlPWwuZ2V0UGFyYW1ldGVyKDM0OTIxKTt2YXIgbT1uZXcgVWludDhBcnJheShlKSxnPW5ldyBVaW50OEFycmF5KGUpLF89bmV3IFVpbnQ4QXJyYXkoZSkseT17fSxiPW51bGwseD1udWxsLHc9bnVsbCxTPW51bGwsTT1udWxsLEM9bnVsbCxUPW51bGwsRT1udWxsLE89bnVsbCxQPSExLEE9bnVsbCxqPW51bGwsUj1udWxsLGs9bnVsbCxMPW51bGwsTj1sLmdldFBhcmFtZXRlcigzNTY2MSksST0hMTtlPTA7ZT1sLmdldFBhcmFtZXRlcig3OTM4KTstMSE9PWUuaW5kZXhPZihcIldlYkdMXCIpPyhlPXBhcnNlRmxvYXQoL15XZWJHTCAoWzAtOV0pLy5leGVjKGUpWzFdKSxJPTE8PWUpOi0xIT09ZS5pbmRleE9mKFwiT3BlbkdMIEVTXCIpJiYoZT1wYXJzZUZsb2F0KC9eT3BlbkdMIEVTIChbMC05XSkvLmV4ZWMoZSlbMV0pLEk9Mjw9ZSk7dmFyIEQ9bnVsbCxCPXt9LEY9bmV3IENlLHo9bmV3IENlLCQ9e307JFszNTUzXT10KDM1NTMsMzU1MywxKTskWzM0MDY3XT10KDM0MDY3LDM0MDY5LDYpO2Yuc2V0Q2xlYXIoMCwwLDAsMSk7ZC5zZXRDbGVhcigxKTt2LnNldENsZWFyKDApO2goMjkyOSk7ZC5zZXRGdW5jKDMpO28oITEpO2EoMSk7aCgyODg0KTtpKDApO3ZhciBHPXsxMDA6MzI3NzQsMTAxOjMyNzc4LDEwMjozMjc3OX07Yz8oR1sxMDNdPTMyNzc1LEdbMTA0XT0zMjc3Nik6KGU9ci5nZXQoXCJFWFRfYmxlbmRfbWlubWF4XCIpLG51bGwhPT1lJiYoR1sxMDNdPWUuTUlOX0VYVCxHWzEwNF09ZS5NQVhfRVhUKSk7dmFyIFY9ezIwMDowLDIwMToxLDIwMjo3NjgsMjA0Ojc3MCwyMTA6Nzc2LDIwODo3NzQsMjA2Ojc3MiwyMDM6NzY5LDIwNTo3NzEsMjA5Ojc3NSwyMDc6NzczfTtyZXR1cm57YnVmZmVyczp7Y29sb3I6ZixkZXB0aDpkLHN0ZW5jaWw6dn0saW5pdEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PW0ubGVuZ3RoO2U8dDtlKyspbVtlXT0wfSxlbmFibGVBdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7bihlLDApfSxlbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yOm4sZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWcubGVuZ3RoO2UhPT10OysrZSlnW2VdIT09bVtlXSYmKGwuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLGdbZV09MCl9LHZlcnRleEF0dHJpYlBvaW50ZXI6ZnVuY3Rpb24oZSx0LHIsbixpLG8peyEwIT09Y3x8NTEyNCE9PXImJjUxMjUhPT1yP2wudmVydGV4QXR0cmliUG9pbnRlcihlLHQscixuLGksbyk6bC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQscixuLGksbyl9LGVuYWJsZTpoLGRpc2FibGU6cCx1c2VQcm9ncmFtOmZ1bmN0aW9uKGUpe3JldHVybiBiIT09ZT8obC51c2VQcm9ncmFtKGUpLGI9ZSwhMCk6ITF9LHNldEJsZW5kaW5nOmksc2V0TWF0ZXJpYWw6ZnVuY3Rpb24oZSx0KXsyPT09ZS5zaWRlP3AoMjg4NCk6aCgyODg0KTt2YXIgcj0xPT09ZS5zaWRlO3QmJihyPSFyKTtvKHIpOzE9PT1lLmJsZW5kaW5nJiYhMT09PWUudHJhbnNwYXJlbnQ/aSgwKTppKGUuYmxlbmRpbmcsZS5ibGVuZEVxdWF0aW9uLGUuYmxlbmRTcmMsZS5ibGVuZERzdCxlLmJsZW5kRXF1YXRpb25BbHBoYSxlLmJsZW5kU3JjQWxwaGEsZS5ibGVuZERzdEFscGhhLGUucHJlbXVsdGlwbGllZEFscGhhKTtkLnNldEZ1bmMoZS5kZXB0aEZ1bmMpO2Quc2V0VGVzdChlLmRlcHRoVGVzdCk7ZC5zZXRNYXNrKGUuZGVwdGhXcml0ZSk7Zi5zZXRNYXNrKGUuY29sb3JXcml0ZSk7dD1lLnN0ZW5jaWxXcml0ZTt2LnNldFRlc3QodCk7dCYmKHYuc2V0TWFzayhlLnN0ZW5jaWxXcml0ZU1hc2spLHYuc2V0RnVuYyhlLnN0ZW5jaWxGdW5jLGUuc3RlbmNpbFJlZixlLnN0ZW5jaWxGdW5jTWFzayksdi5zZXRPcChlLnN0ZW5jaWxGYWlsLGUuc3RlbmNpbFpGYWlsLGUuc3RlbmNpbFpQYXNzKSk7cyhlLnBvbHlnb25PZmZzZXQsZS5wb2x5Z29uT2Zmc2V0RmFjdG9yLGUucG9seWdvbk9mZnNldFVuaXRzKX0sc2V0RmxpcFNpZGVkOm8sc2V0Q3VsbEZhY2U6YSxzZXRMaW5lV2lkdGg6ZnVuY3Rpb24oZSl7ZSE9PVImJihJJiZsLmxpbmVXaWR0aChlKSxSPWUpfSxzZXRQb2x5Z29uT2Zmc2V0OnMsc2V0U2Npc3NvclRlc3Q6ZnVuY3Rpb24oZSl7ZT9oKDMwODkpOnAoMzA4OSl9LGFjdGl2ZVRleHR1cmU6dSxiaW5kVGV4dHVyZTpmdW5jdGlvbihlLHQpe251bGw9PT1EJiZ1KCk7dmFyIHI9QltEXTt2b2lkIDA9PT1yJiYocj17dHlwZTp2b2lkIDAsdGV4dHVyZTp2b2lkIDB9LEJbRF09cik7aWYoci50eXBlIT09ZXx8ci50ZXh0dXJlIT09dClsLmJpbmRUZXh0dXJlKGUsdHx8JFtlXSksci50eXBlPWUsci50ZXh0dXJlPXR9LHVuYmluZFRleHR1cmU6ZnVuY3Rpb24oKXt2YXIgZT1CW0RdO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PWUudHlwZSYmKGwuYmluZFRleHR1cmUoZS50eXBlLG51bGwpLGUudHlwZT12b2lkIDAsZS50ZXh0dXJlPXZvaWQgMCl9LGNvbXByZXNzZWRUZXhJbWFnZTJEOmZ1bmN0aW9uKCl7dHJ5e2wuY29tcHJlc3NlZFRleEltYWdlMkQuYXBwbHkobCxhcmd1bWVudHMpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLGUpfX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe3RyeXtsLnRleEltYWdlMkQuYXBwbHkobCxhcmd1bWVudHMpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLGUpfX0sdGV4SW1hZ2UzRDpmdW5jdGlvbigpe3RyeXtsLnRleEltYWdlM0QuYXBwbHkobCxhcmd1bWVudHMpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLGUpfX0sc2Npc3NvcjpmdW5jdGlvbihlKXshMT09PUYuZXF1YWxzKGUpJiYobC5zY2lzc29yKGUueCxlLnksZS56LGUudyksRi5jb3B5KGUpKX0sdmlld3BvcnQ6ZnVuY3Rpb24oZSl7ITE9PT16LmVxdWFscyhlKSYmKGwudmlld3BvcnQoZS54LGUueSxlLnosZS53KSx6LmNvcHkoZSkpfSxyZXNldDpmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8Zy5sZW5ndGg7ZSsrKTE9PT1nW2VdJiYobC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoZSksZ1tlXT0wKTt5PXt9O0Q9bnVsbDtCPXt9O2o9QT13PWI9bnVsbDtmLnJlc2V0KCk7ZC5yZXNldCgpO3YucmVzZXQoKX19fWZ1bmN0aW9uIEJ0KGYsbixkLHYsaSxtLHMpe2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm4gaz9uZXcgT2Zmc2NyZWVuQ2FudmFzKGUsdCk6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpfWZ1bmN0aW9uIGcoZSx0LHIsbil7dmFyIGk9MTtpZihlLndpZHRoPm58fGUuaGVpZ2h0Pm4paT1uL01hdGgubWF4KGUud2lkdGgsZS5oZWlnaHQpO2lmKDE+aXx8ITA9PT10KXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQmJmUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHxcInVuZGVmaW5lZFwiIT09dHlwZW9mIEhUTUxDYW52YXNFbGVtZW50JiZlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnR8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgSW1hZ2VCaXRtYXAmJmUgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcClyZXR1cm4gbj10P1ZvLmZsb29yUG93ZXJPZlR3bzpNYXRoLmZsb29yLHQ9bihpKmUud2lkdGgpLGk9bihpKmUuaGVpZ2h0KSx2b2lkIDA9PT1SJiYoUj1vKHQsaSkpLHI9cj9vKHQsaSk6UixyLndpZHRoPXQsci5oZWlnaHQ9aSxyLmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UoZSwwLDAsdCxpKSxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGhhcyBiZWVuIHJlc2l6ZWQgZnJvbSAoXCIrZS53aWR0aCtcInhcIitlLmhlaWdodCtcIikgdG8gKFwiK3QrXCJ4XCIraStcIikuXCIpLHI7XCJkYXRhXCJpbiBlJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBJbWFnZSBpbiBEYXRhVGV4dHVyZSBpcyB0b28gYmlnIChcIitlLndpZHRoK1wieFwiK2UuaGVpZ2h0K1wiKS5cIil9cmV0dXJuIGV9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gVm8uaXNQb3dlck9mVHdvKGUud2lkdGgpJiZWby5pc1Bvd2VyT2ZUd28oZS5oZWlnaHQpfWZ1bmN0aW9uIHkoZSx0KXtyZXR1cm4gZS5nZW5lcmF0ZU1pcG1hcHMmJnQmJjEwMDMhPT1lLm1pbkZpbHRlciYmMTAwNiE9PWUubWluRmlsdGVyfWZ1bmN0aW9uIGIoZSx0LHIsbil7Zi5nZW5lcmF0ZU1pcG1hcChlKTt2LmdldCh0KS5fX21heE1pcExldmVsPU1hdGgubG9nKE1hdGgubWF4KHIsbikpKk1hdGguTE9HMkV9ZnVuY3Rpb24geChlLHQscil7aWYoITE9PT1FKXJldHVybiB0O2lmKG51bGwhPT1lKXtpZih2b2lkIDAhPT1mW2VdKXJldHVybiBmW2VdO2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gdXNlIG5vbi1leGlzdGluZyBXZWJHTCBpbnRlcm5hbCBmb3JtYXQgJ1wiK2UrXCInXCIpfWU9dDs2NDAzPT09dCYmKDUxMjY9PT1yJiYoZT0zMzMyNiksNTEzMT09PXImJihlPTMzMzI1KSw1MTIxPT09ciYmKGU9MzMzMjEpKTs2NDA3PT09dCYmKDUxMjY9PT1yJiYoZT0zNDgzNyksNTEzMT09PXImJihlPTM0ODQzKSw1MTIxPT09ciYmKGU9MzI4NDkpKTs2NDA4PT09dCYmKDUxMjY9PT1yJiYoZT0zNDgzNiksNTEzMT09PXImJihlPTM0ODQyKSw1MTIxPT09ciYmKGU9MzI4NTYpKTszMzMyNSE9PWUmJjMzMzI2IT09ZSYmMzQ4NDIhPT1lJiYzNDgzNiE9PWV8fG4uZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKTtyZXR1cm4gZX1mdW5jdGlvbiBhKGUpe3JldHVybiAxMDAzPT09ZXx8MTAwND09PWV8fDEwMDU9PT1lPzk3Mjg6OTcyOX1mdW5jdGlvbiByKGUpe2U9ZS50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHIpO3ZhciB0PXYuZ2V0KGUpO3ZvaWQgMCE9PXQuX193ZWJnbEluaXQmJihmLmRlbGV0ZVRleHR1cmUodC5fX3dlYmdsVGV4dHVyZSksdi5yZW1vdmUoZSkpO2UuaXNWaWRlb1RleHR1cmUmJmouZGVsZXRlKGUpO3MubWVtb3J5LnRleHR1cmVzLS19ZnVuY3Rpb24gdShlKXtlPWUudGFyZ2V0O2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIix1KTt2YXIgdD12LmdldChlKSxyPXYuZ2V0KGUudGV4dHVyZSk7aWYoZSl7dm9pZCAwIT09ci5fX3dlYmdsVGV4dHVyZSYmZi5kZWxldGVUZXh0dXJlKHIuX193ZWJnbFRleHR1cmUpO2UuZGVwdGhUZXh0dXJlJiZlLmRlcHRoVGV4dHVyZS5kaXNwb3NlKCk7aWYoZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldClmb3Iocj0wOzY+cjtyKyspZi5kZWxldGVGcmFtZWJ1ZmZlcih0Ll9fd2ViZ2xGcmFtZWJ1ZmZlcltyXSksdC5fX3dlYmdsRGVwdGhidWZmZXImJmYuZGVsZXRlUmVuZGVyYnVmZmVyKHQuX193ZWJnbERlcHRoYnVmZmVyW3JdKTtlbHNlIGYuZGVsZXRlRnJhbWVidWZmZXIodC5fX3dlYmdsRnJhbWVidWZmZXIpLHQuX193ZWJnbERlcHRoYnVmZmVyJiZmLmRlbGV0ZVJlbmRlcmJ1ZmZlcih0Ll9fd2ViZ2xEZXB0aGJ1ZmZlciksdC5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXImJmYuZGVsZXRlRnJhbWVidWZmZXIodC5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpLHQuX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyJiZmLmRlbGV0ZVJlbmRlcmJ1ZmZlcih0Ll9fd2ViZ2xDb2xvclJlbmRlcmJ1ZmZlciksdC5fX3dlYmdsRGVwdGhSZW5kZXJidWZmZXImJmYuZGVsZXRlUmVuZGVyYnVmZmVyKHQuX193ZWJnbERlcHRoUmVuZGVyYnVmZmVyKTt2LnJlbW92ZShlLnRleHR1cmUpO3YucmVtb3ZlKGUpfXMubWVtb3J5LnRleHR1cmVzLS19ZnVuY3Rpb24gYyhlLHQpe3ZhciByPXYuZ2V0KGUpO2lmKGUuaXNWaWRlb1RleHR1cmUpe3ZhciBuPXMucmVuZGVyLmZyYW1lO2ouZ2V0KGUpIT09biYmKGouc2V0KGUsbiksZS51cGRhdGUoKSl9aWYoMDxlLnZlcnNpb24mJnIuX192ZXJzaW9uIT09ZS52ZXJzaW9uKWlmKG49ZS5pbWFnZSx2b2lkIDA9PT1uKWNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgbWFya2VkIGZvciB1cGRhdGUgYnV0IGltYWdlIGlzIHVuZGVmaW5lZFwiKTtlbHNlIGlmKCExPT09bi5jb21wbGV0ZSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlXCIpO2Vsc2V7cChyLGUsdCk7cmV0dXJufWQuYWN0aXZlVGV4dHVyZSgzMzk4NCt0KTtkLmJpbmRUZXh0dXJlKDM1NTMsci5fX3dlYmdsVGV4dHVyZSl9ZnVuY3Rpb24gbChlLHQpe2lmKDY9PT1lLmltYWdlLmxlbmd0aCl7dmFyIHI9di5nZXQoZSk7aWYoMDxlLnZlcnNpb24mJnIuX192ZXJzaW9uIT09ZS52ZXJzaW9uKXtTKHIsZSk7ZC5hY3RpdmVUZXh0dXJlKDMzOTg0K3QpO2QuYmluZFRleHR1cmUoMzQwNjcsci5fX3dlYmdsVGV4dHVyZSk7Zi5waXhlbFN0b3JlaSgzNzQ0MCxlLmZsaXBZKTt2YXIgbj1lJiYoZS5pc0NvbXByZXNzZWRUZXh0dXJlfHxlLmltYWdlWzBdLmlzQ29tcHJlc3NlZFRleHR1cmUpO3Q9ZS5pbWFnZVswXSYmZS5pbWFnZVswXS5pc0RhdGFUZXh0dXJlO2Zvcih2YXIgaT1bXSxvPTA7Nj5vO28rKylpW29dPW58fHQ/dD9lLmltYWdlW29dLmltYWdlOmUuaW1hZ2Vbb106ZyhlLmltYWdlW29dLCExLCEwLE8pO3ZhciBhPWlbMF0scz1fKGEpfHxFLHU9bS5jb252ZXJ0KGUuZm9ybWF0KSxjPW0uY29udmVydChlLnR5cGUpLGw9eChlLmludGVybmFsRm9ybWF0LHUsYyk7dygzNDA2NyxlLHMpO2lmKG4pe2ZvcihvPTA7Nj5vO28rKyl7dmFyIGg9aVtvXS5taXBtYXBzO2ZvcihuPTA7bjxoLmxlbmd0aDtuKyspe3ZhciBwPWhbbl07MTAyMyE9PWUuZm9ybWF0JiYxMDIyIT09ZS5mb3JtYXQ/bnVsbCE9PXU/ZC5jb21wcmVzc2VkVGV4SW1hZ2UyRCgzNDA2OStvLG4sbCxwLndpZHRoLHAuaGVpZ2h0LDAscC5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAuc2V0VGV4dHVyZUN1YmUoKVwiKTpkLnRleEltYWdlMkQoMzQwNjkrbyxuLGwscC53aWR0aCxwLmhlaWdodCwwLHUsYyxwLmRhdGEpfX1yLl9fbWF4TWlwTGV2ZWw9aC5sZW5ndGgtMX1lbHNle2g9ZS5taXBtYXBzO2ZvcihvPTA7Nj5vO28rKylpZih0KWZvcihkLnRleEltYWdlMkQoMzQwNjkrbywwLGwsaVtvXS53aWR0aCxpW29dLmhlaWdodCwwLHUsYyxpW29dLmRhdGEpLG49MDtuPGgubGVuZ3RoO24rKylwPWhbbl0scD1wLmltYWdlW29dLmltYWdlLGQudGV4SW1hZ2UyRCgzNDA2OStvLG4rMSxsLHAud2lkdGgscC5oZWlnaHQsMCx1LGMscC5kYXRhKTtlbHNlIGZvcihkLnRleEltYWdlMkQoMzQwNjkrbywwLGwsdSxjLGlbb10pLG49MDtuPGgubGVuZ3RoO24rKylwPWhbbl0sZC50ZXhJbWFnZTJEKDM0MDY5K28sbisxLGwsdSxjLHAuaW1hZ2Vbb10pO3IuX19tYXhNaXBMZXZlbD1oLmxlbmd0aH15KGUscykmJmIoMzQwNjcsZSxhLndpZHRoLGEuaGVpZ2h0KTtyLl9fdmVyc2lvbj1lLnZlcnNpb247aWYoZS5vblVwZGF0ZSllLm9uVXBkYXRlKGUpfWVsc2UgZC5hY3RpdmVUZXh0dXJlKDMzOTg0K3QpLGQuYmluZFRleHR1cmUoMzQwNjcsci5fX3dlYmdsVGV4dHVyZSl9fWZ1bmN0aW9uIGgoZSx0KXtkLmFjdGl2ZVRleHR1cmUoMzM5ODQrdCk7ZC5iaW5kVGV4dHVyZSgzNDA2Nyx2LmdldChlKS5fX3dlYmdsVGV4dHVyZSl9ZnVuY3Rpb24gdyhlLHQscil7cj8oZi50ZXhQYXJhbWV0ZXJpKGUsMTAyNDIsTlt0LndyYXBTXSksZi50ZXhQYXJhbWV0ZXJpKGUsMTAyNDMsTlt0LndyYXBUXSksMzI4NzkhPT1lJiYzNTg2NiE9PWV8fGYudGV4UGFyYW1ldGVyaShlLDMyODgyLE5bdC53cmFwUl0pLGYudGV4UGFyYW1ldGVyaShlLDEwMjQwLElbdC5tYWdGaWx0ZXJdKSxmLnRleFBhcmFtZXRlcmkoZSwxMDI0MSxJW3QubWluRmlsdGVyXSkpOihmLnRleFBhcmFtZXRlcmkoZSwxMDI0MiwzMzA3MSksZi50ZXhQYXJhbWV0ZXJpKGUsMTAyNDMsMzMwNzEpLDMyODc5IT09ZSYmMzU4NjYhPT1lfHxmLnRleFBhcmFtZXRlcmkoZSwzMjg4MiwzMzA3MSksMTAwMT09PXQud3JhcFMmJjEwMDE9PT10LndyYXBUfHxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUud3JhcFMgYW5kIFRleHR1cmUud3JhcFQgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLlwiKSxmLnRleFBhcmFtZXRlcmkoZSwxMDI0MCxhKHQubWFnRmlsdGVyKSksZi50ZXhQYXJhbWV0ZXJpKGUsMTAyNDEsYSh0Lm1pbkZpbHRlcikpLDEwMDMhPT10Lm1pbkZpbHRlciYmMTAwNiE9PXQubWluRmlsdGVyJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUubWluRmlsdGVyIHNob3VsZCBiZSBzZXQgdG8gVEhSRUUuTmVhcmVzdEZpbHRlciBvciBUSFJFRS5MaW5lYXJGaWx0ZXIuXCIpKTshKHI9bi5nZXQoXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIikpfHwxMDE1PT09dC50eXBlJiZudWxsPT09bi5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIil8fDEwMTY9PT10LnR5cGUmJm51bGw9PT0oRXx8bi5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKSl8fCEoMTx0LmFuaXNvdHJvcHl8fHYuZ2V0KHQpLl9fY3VycmVudEFuaXNvdHJvcHkpfHwoZi50ZXhQYXJhbWV0ZXJmKGUsci5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCxNYXRoLm1pbih0LmFuaXNvdHJvcHksaS5nZXRNYXhBbmlzb3Ryb3B5KCkpKSx2LmdldCh0KS5fX2N1cnJlbnRBbmlzb3Ryb3B5PXQuYW5pc290cm9weSl9ZnVuY3Rpb24gUyhlLHQpe3ZvaWQgMD09PWUuX193ZWJnbEluaXQmJihlLl9fd2ViZ2xJbml0PSEwLHQuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixyKSxlLl9fd2ViZ2xUZXh0dXJlPWYuY3JlYXRlVGV4dHVyZSgpLHMubWVtb3J5LnRleHR1cmVzKyspfWZ1bmN0aW9uIHAoZSx0LHIpe3ZhciBuPTM1NTM7dC5pc0RhdGFUZXh0dXJlMkRBcnJheSYmKG49MzU4NjYpO3QuaXNEYXRhVGV4dHVyZTNEJiYobj0zMjg3OSk7UyhlLHQpO2QuYWN0aXZlVGV4dHVyZSgzMzk4NCtyKTtkLmJpbmRUZXh0dXJlKG4sZS5fX3dlYmdsVGV4dHVyZSk7Zi5waXhlbFN0b3JlaSgzNzQ0MCx0LmZsaXBZKTtmLnBpeGVsU3RvcmVpKDM3NDQxLHQucHJlbXVsdGlwbHlBbHBoYSk7Zi5waXhlbFN0b3JlaSgzMzE3LHQudW5wYWNrQWxpZ25tZW50KTtyPUU/ITE6MTAwMSE9PXQud3JhcFN8fDEwMDEhPT10LndyYXBUfHwxMDAzIT09dC5taW5GaWx0ZXImJjEwMDYhPT10Lm1pbkZpbHRlcjtyPXImJiExPT09Xyh0LmltYWdlKTtyPWcodC5pbWFnZSxyLCExLFApO3ZhciBpPV8ocil8fEUsbz1tLmNvbnZlcnQodC5mb3JtYXQpLGE9bS5jb252ZXJ0KHQudHlwZSkscz14KHQuaW50ZXJuYWxGb3JtYXQsbyxhKTt3KG4sdCxpKTt2YXIgdT10Lm1pcG1hcHM7aWYodC5pc0RlcHRoVGV4dHVyZSlzPTY0MDIsRT9zPTEwMTU9PT10LnR5cGU/MzYwMTI6MTAxND09PXQudHlwZT8zMzE5MDoxMDIwPT09dC50eXBlPzM1MDU2OjMzMTg5OjEwMTU9PT10LnR5cGUmJmNvbnNvbGUuZXJyb3IoXCJXZWJHTFJlbmRlcmVyOiBGbG9hdGluZyBwb2ludCBkZXB0aCB0ZXh0dXJlIHJlcXVpcmVzIFdlYkdMMi5cIiksMTAyNj09PXQuZm9ybWF0JiY2NDAyPT09cyYmMTAxMiE9PXQudHlwZSYmMTAxNCE9PXQudHlwZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZFNob3J0VHlwZSBvciBVbnNpZ25lZEludFR5cGUgZm9yIERlcHRoRm9ybWF0IERlcHRoVGV4dHVyZS5cIiksdC50eXBlPTEwMTIsYT1tLmNvbnZlcnQodC50eXBlKSksMTAyNz09PXQuZm9ybWF0JiY2NDAyPT09cyYmKHM9MzQwNDEsMTAyMCE9PXQudHlwZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFVzZSBVbnNpZ25lZEludDI0OFR5cGUgZm9yIERlcHRoU3RlbmNpbEZvcm1hdCBEZXB0aFRleHR1cmUuXCIpLHQudHlwZT0xMDIwLGE9bS5jb252ZXJ0KHQudHlwZSkpKSxkLnRleEltYWdlMkQoMzU1MywwLHMsci53aWR0aCxyLmhlaWdodCwwLG8sYSxudWxsKTtlbHNlIGlmKHQuaXNEYXRhVGV4dHVyZSlpZigwPHUubGVuZ3RoJiZpKXtmb3IodmFyIGM9MCxsPXUubGVuZ3RoO2M8bDtjKyspe3ZhciBoPXVbY107ZC50ZXhJbWFnZTJEKDM1NTMsYyxzLGgud2lkdGgsaC5oZWlnaHQsMCxvLGEsaC5kYXRhKX10LmdlbmVyYXRlTWlwbWFwcz0hMTtlLl9fbWF4TWlwTGV2ZWw9dS5sZW5ndGgtMX1lbHNlIGQudGV4SW1hZ2UyRCgzNTUzLDAscyxyLndpZHRoLHIuaGVpZ2h0LDAsbyxhLHIuZGF0YSksZS5fX21heE1pcExldmVsPTA7ZWxzZSBpZih0LmlzQ29tcHJlc3NlZFRleHR1cmUpe2M9MDtmb3IobD11Lmxlbmd0aDtjPGw7YysrKWg9dVtjXSwxMDIzIT09dC5mb3JtYXQmJjEwMjIhPT10LmZvcm1hdD9udWxsIT09bz9kLmNvbXByZXNzZWRUZXhJbWFnZTJEKDM1NTMsYyxzLGgud2lkdGgsaC5oZWlnaHQsMCxoLmRhdGEpOmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gbG9hZCB1bnN1cHBvcnRlZCBjb21wcmVzc2VkIHRleHR1cmUgZm9ybWF0IGluIC51cGxvYWRUZXh0dXJlKClcIik6ZC50ZXhJbWFnZTJEKDM1NTMsYyxzLGgud2lkdGgsaC5oZWlnaHQsMCxvLGEsaC5kYXRhKTtlLl9fbWF4TWlwTGV2ZWw9dS5sZW5ndGgtMX1lbHNlIGlmKHQuaXNEYXRhVGV4dHVyZTJEQXJyYXkpZC50ZXhJbWFnZTNEKDM1ODY2LDAscyxyLndpZHRoLHIuaGVpZ2h0LHIuZGVwdGgsMCxvLGEsci5kYXRhKSxlLl9fbWF4TWlwTGV2ZWw9MDtlbHNlIGlmKHQuaXNEYXRhVGV4dHVyZTNEKWQudGV4SW1hZ2UzRCgzMjg3OSwwLHMsci53aWR0aCxyLmhlaWdodCxyLmRlcHRoLDAsbyxhLHIuZGF0YSksZS5fX21heE1pcExldmVsPTA7ZWxzZSBpZigwPHUubGVuZ3RoJiZpKXtjPTA7Zm9yKGw9dS5sZW5ndGg7YzxsO2MrKyloPXVbY10sZC50ZXhJbWFnZTJEKDM1NTMsYyxzLG8sYSxoKTt0LmdlbmVyYXRlTWlwbWFwcz0hMTtlLl9fbWF4TWlwTGV2ZWw9dS5sZW5ndGgtMX1lbHNlIGQudGV4SW1hZ2UyRCgzNTUzLDAscyxvLGEsciksZS5fX21heE1pcExldmVsPTA7eSh0LGkpJiZiKG4sdCxyLndpZHRoLHIuaGVpZ2h0KTtlLl9fdmVyc2lvbj10LnZlcnNpb247aWYodC5vblVwZGF0ZSl0Lm9uVXBkYXRlKHQpfWZ1bmN0aW9uIE0oZSx0LHIsbil7dmFyIGk9bS5jb252ZXJ0KHQudGV4dHVyZS5mb3JtYXQpLG89bS5jb252ZXJ0KHQudGV4dHVyZS50eXBlKSxhPXgodC50ZXh0dXJlLmludGVybmFsRm9ybWF0LGksbyk7ZC50ZXhJbWFnZTJEKG4sMCxhLHQud2lkdGgsdC5oZWlnaHQsMCxpLG8sbnVsbCk7Zi5iaW5kRnJhbWVidWZmZXIoMzYxNjAsZSk7Zi5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCxyLG4sdi5nZXQodC50ZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSwwKTtmLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxudWxsKX1mdW5jdGlvbiBDKGUsdCxyKXtmLmJpbmRSZW5kZXJidWZmZXIoMzYxNjEsZSk7aWYodC5kZXB0aEJ1ZmZlciYmIXQuc3RlbmNpbEJ1ZmZlcil7dmFyIG49MzMxODk7cj8oKHI9dC5kZXB0aFRleHR1cmUpJiZyLmlzRGVwdGhUZXh0dXJlJiYoMTAxNT09PXIudHlwZT9uPTM2MDEyOjEwMTQ9PT1yLnR5cGUmJihuPTMzMTkwKSkscj1UKHQpLGYucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHIsbix0LndpZHRoLHQuaGVpZ2h0KSk6Zi5yZW5kZXJidWZmZXJTdG9yYWdlKDM2MTYxLG4sdC53aWR0aCx0LmhlaWdodCk7Zi5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcigzNjE2MCwzNjA5NiwzNjE2MSxlKX1lbHNlIHQuZGVwdGhCdWZmZXImJnQuc3RlbmNpbEJ1ZmZlcj8ocj8ocj1UKHQpLGYucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKDM2MTYxLHIsMzUwNTYsdC53aWR0aCx0LmhlaWdodCkpOmYucmVuZGVyYnVmZmVyU3RvcmFnZSgzNjE2MSwzNDA0MSx0LndpZHRoLHQuaGVpZ2h0KSxmLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKDM2MTYwLDMzMzA2LDM2MTYxLGUpKTooZT1tLmNvbnZlcnQodC50ZXh0dXJlLmZvcm1hdCksbj1tLmNvbnZlcnQodC50ZXh0dXJlLnR5cGUpLG49eCh0LnRleHR1cmUuaW50ZXJuYWxGb3JtYXQsZSxuKSxyPyhyPVQodCksZi5yZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUoMzYxNjEscixuLHQud2lkdGgsdC5oZWlnaHQpKTpmLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoMzYxNjEsbix0LndpZHRoLHQuaGVpZ2h0KSk7Zi5iaW5kUmVuZGVyYnVmZmVyKDM2MTYxLG51bGwpfWZ1bmN0aW9uIFQoZSl7cmV0dXJuIEUmJmUuaXNXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0P01hdGgubWluKEEsZS5zYW1wbGVzKTowfXZhciBFPWkuaXNXZWJHTDIsdD1pLm1heFRleHR1cmVzLE89aS5tYXhDdWJlbWFwU2l6ZSxQPWkubWF4VGV4dHVyZVNpemUsQT1pLm1heFNhbXBsZXMsaj1uZXcgV2Vha01hcCxSLGs9ITE7dHJ5e2s9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBPZmZzY3JlZW5DYW52YXMmJm51bGwhPT1uZXcgT2Zmc2NyZWVuQ2FudmFzKDEsMSkuZ2V0Q29udGV4dChcIjJkXCIpfWNhdGNoKGUpe312YXIgTD0wLE49ezFlMzoxMDQ5NywxMDAxOjMzMDcxLDEwMDI6MzM2NDh9LEk9ezEwMDM6OTcyOCwxMDA0Ojk5ODQsMTAwNTo5OTg2LDEwMDY6OTcyOSwxMDA3Ojk5ODUsMTAwODo5OTg3fSxEPSExLEI9ITE7dGhpcy5hbGxvY2F0ZVRleHR1cmVVbml0PWZ1bmN0aW9uKCl7dmFyIGU9TDtlPj10JiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFRleHR1cmVzOiBUcnlpbmcgdG8gdXNlIFwiK2UrXCIgdGV4dHVyZSB1bml0cyB3aGlsZSB0aGlzIEdQVSBzdXBwb3J0cyBvbmx5IFwiK3QpO0wrPTE7cmV0dXJuIGV9O3RoaXMucmVzZXRUZXh0dXJlVW5pdHM9ZnVuY3Rpb24oKXtMPTB9O3RoaXMuc2V0VGV4dHVyZTJEPWM7dGhpcy5zZXRUZXh0dXJlMkRBcnJheT1mdW5jdGlvbihlLHQpe3ZhciByPXYuZ2V0KGUpOzA8ZS52ZXJzaW9uJiZyLl9fdmVyc2lvbiE9PWUudmVyc2lvbj9wKHIsZSx0KTooZC5hY3RpdmVUZXh0dXJlKDMzOTg0K3QpLGQuYmluZFRleHR1cmUoMzU4NjYsci5fX3dlYmdsVGV4dHVyZSkpfTt0aGlzLnNldFRleHR1cmUzRD1mdW5jdGlvbihlLHQpe3ZhciByPXYuZ2V0KGUpOzA8ZS52ZXJzaW9uJiZyLl9fdmVyc2lvbiE9PWUudmVyc2lvbj9wKHIsZSx0KTooZC5hY3RpdmVUZXh0dXJlKDMzOTg0K3QpLGQuYmluZFRleHR1cmUoMzI4Nzksci5fX3dlYmdsVGV4dHVyZSkpfTt0aGlzLnNldFRleHR1cmVDdWJlPWw7dGhpcy5zZXRUZXh0dXJlQ3ViZUR5bmFtaWM9aDt0aGlzLnNldHVwUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0PXYuZ2V0KGUpLHI9di5nZXQoZS50ZXh0dXJlKTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsdSk7ci5fX3dlYmdsVGV4dHVyZT1mLmNyZWF0ZVRleHR1cmUoKTtzLm1lbW9yeS50ZXh0dXJlcysrO3ZhciBuPSEwPT09ZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldCxpPSEwPT09ZS5pc1dlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQsbz1fKGUpfHxFOyFFfHwxMDIyIT09ZS50ZXh0dXJlLmZvcm1hdHx8MTAxNSE9PWUudGV4dHVyZS50eXBlJiYxMDE2IT09ZS50ZXh0dXJlLnR5cGV8fChlLnRleHR1cmUuZm9ybWF0PTEwMjMsY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogUmVuZGVyaW5nIHRvIHRleHR1cmVzIHdpdGggUkdCIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkLiBVc2luZyBSR0JBIGZvcm1hdCBpbnN0ZWFkLlwiKSk7aWYobilmb3IodC5fX3dlYmdsRnJhbWVidWZmZXI9W10saT0wOzY+aTtpKyspdC5fX3dlYmdsRnJhbWVidWZmZXJbaV09Zi5jcmVhdGVGcmFtZWJ1ZmZlcigpO2Vsc2UgaWYodC5fX3dlYmdsRnJhbWVidWZmZXI9Zi5jcmVhdGVGcmFtZWJ1ZmZlcigpLGkpaWYoRSl7dC5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXI9Zi5jcmVhdGVGcmFtZWJ1ZmZlcigpO3QuX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyPWYuY3JlYXRlUmVuZGVyYnVmZmVyKCk7Zi5iaW5kUmVuZGVyYnVmZmVyKDM2MTYxLHQuX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyKTtpPW0uY29udmVydChlLnRleHR1cmUuZm9ybWF0KTt2YXIgYT1tLmNvbnZlcnQoZS50ZXh0dXJlLnR5cGUpO2k9eChlLnRleHR1cmUuaW50ZXJuYWxGb3JtYXQsaSxhKTthPVQoZSk7Zi5yZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUoMzYxNjEsYSxpLGUud2lkdGgsZS5oZWlnaHQpO2YuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHQuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKTtmLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKDM2MTYwLDM2MDY0LDM2MTYxLHQuX193ZWJnbENvbG9yUmVuZGVyYnVmZmVyKTtmLmJpbmRSZW5kZXJidWZmZXIoMzYxNjEsbnVsbCk7ZS5kZXB0aEJ1ZmZlciYmKHQuX193ZWJnbERlcHRoUmVuZGVyYnVmZmVyPWYuY3JlYXRlUmVuZGVyYnVmZmVyKCksQyh0Ll9fd2ViZ2xEZXB0aFJlbmRlcmJ1ZmZlcixlLCEwKSk7Zi5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbnVsbCl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0IGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBXZWJHTDIuXCIpO2lmKG4pe2QuYmluZFRleHR1cmUoMzQwNjcsci5fX3dlYmdsVGV4dHVyZSk7dygzNDA2NyxlLnRleHR1cmUsbyk7Zm9yKGk9MDs2Pmk7aSsrKU0odC5fX3dlYmdsRnJhbWVidWZmZXJbaV0sZSwzNjA2NCwzNDA2OStpKTt5KGUudGV4dHVyZSxvKSYmYigzNDA2NyxlLnRleHR1cmUsZS53aWR0aCxlLmhlaWdodCk7ZC5iaW5kVGV4dHVyZSgzNDA2NyxudWxsKX1lbHNlIGQuYmluZFRleHR1cmUoMzU1MyxyLl9fd2ViZ2xUZXh0dXJlKSx3KDM1NTMsZS50ZXh0dXJlLG8pLE0odC5fX3dlYmdsRnJhbWVidWZmZXIsZSwzNjA2NCwzNTUzKSx5KGUudGV4dHVyZSxvKSYmYigzNTUzLGUudGV4dHVyZSxlLndpZHRoLGUuaGVpZ2h0KSxkLmJpbmRUZXh0dXJlKDM1NTMsbnVsbCk7aWYoZS5kZXB0aEJ1ZmZlcil7dD12LmdldChlKTtyPSEwPT09ZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldDtpZihlLmRlcHRoVGV4dHVyZSl7aWYocil0aHJvdyBFcnJvcihcInRhcmdldC5kZXB0aFRleHR1cmUgbm90IHN1cHBvcnRlZCBpbiBDdWJlIHJlbmRlciB0YXJnZXRzXCIpO2lmKGUmJmUuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQpdGhyb3cgRXJyb3IoXCJEZXB0aCBUZXh0dXJlIHdpdGggY3ViZSByZW5kZXIgdGFyZ2V0cyBpcyBub3Qgc3VwcG9ydGVkXCIpO2YuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHQuX193ZWJnbEZyYW1lYnVmZmVyKTtpZighZS5kZXB0aFRleHR1cmV8fCFlLmRlcHRoVGV4dHVyZS5pc0RlcHRoVGV4dHVyZSl0aHJvdyBFcnJvcihcInJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBUSFJFRS5EZXB0aFRleHR1cmVcIik7di5nZXQoZS5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlJiZlLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD09PWUud2lkdGgmJmUuZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD09PWUuaGVpZ2h0fHwoZS5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9ZS53aWR0aCxlLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9ZS5oZWlnaHQsZS5kZXB0aFRleHR1cmUubmVlZHNVcGRhdGU9ITApO2MoZS5kZXB0aFRleHR1cmUsMCk7dD12LmdldChlLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmU7aWYoMTAyNj09PWUuZGVwdGhUZXh0dXJlLmZvcm1hdClmLmZyYW1lYnVmZmVyVGV4dHVyZTJEKDM2MTYwLDM2MDk2LDM1NTMsdCwwKTtlbHNlIGlmKDEwMjc9PT1lLmRlcHRoVGV4dHVyZS5mb3JtYXQpZi5mcmFtZWJ1ZmZlclRleHR1cmUyRCgzNjE2MCwzMzMwNiwzNTUzLHQsMCk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gZGVwdGhUZXh0dXJlIGZvcm1hdFwiKX1lbHNlIGlmKHIpZm9yKHQuX193ZWJnbERlcHRoYnVmZmVyPVtdLHI9MDs2PnI7cisrKWYuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHQuX193ZWJnbEZyYW1lYnVmZmVyW3JdKSx0Ll9fd2ViZ2xEZXB0aGJ1ZmZlcltyXT1mLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLEModC5fX3dlYmdsRGVwdGhidWZmZXJbcl0sZSwhMSk7ZWxzZSBmLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCx0Ll9fd2ViZ2xGcmFtZWJ1ZmZlciksdC5fX3dlYmdsRGVwdGhidWZmZXI9Zi5jcmVhdGVSZW5kZXJidWZmZXIoKSxDKHQuX193ZWJnbERlcHRoYnVmZmVyLGUsITEpO2YuYmluZEZyYW1lYnVmZmVyKDM2MTYwLG51bGwpfX07dGhpcy51cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50ZXh0dXJlLHI9XyhlKXx8RTtpZih5KHQscikpe3I9ZS5pc1dlYkdMQ3ViZVJlbmRlclRhcmdldD8zNDA2NzozNTUzO3ZhciBuPXYuZ2V0KHQpLl9fd2ViZ2xUZXh0dXJlO2QuYmluZFRleHR1cmUocixuKTtiKHIsdCxlLndpZHRoLGUuaGVpZ2h0KTtkLmJpbmRUZXh0dXJlKHIsbnVsbCl9fTt0aGlzLnVwZGF0ZU11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGUpe2lmKGUuaXNXZWJHTE11bHRpc2FtcGxlUmVuZGVyVGFyZ2V0KWlmKEUpe3ZhciB0PXYuZ2V0KGUpO2YuYmluZEZyYW1lYnVmZmVyKDM2MDA4LHQuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyKTtmLmJpbmRGcmFtZWJ1ZmZlcigzNjAwOSx0Ll9fd2ViZ2xGcmFtZWJ1ZmZlcik7dmFyIHI9ZS53aWR0aCxuPWUuaGVpZ2h0LGk9MTYzODQ7ZS5kZXB0aEJ1ZmZlciYmKGl8PTI1Nik7ZS5zdGVuY2lsQnVmZmVyJiYoaXw9MTAyNCk7Zi5ibGl0RnJhbWVidWZmZXIoMCwwLHIsbiwwLDAscixuLGksOTcyOCk7Zi5iaW5kRnJhbWVidWZmZXIoMzYxNjAsdC5fX3dlYmdsTXVsdGlzYW1wbGVkRnJhbWVidWZmZXIpfWVsc2UgY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldCBjYW4gb25seSBiZSB1c2VkIHdpdGggV2ViR0wyLlwiKX07dGhpcy5zYWZlU2V0VGV4dHVyZTJEPWZ1bmN0aW9uKGUsdCl7ZSYmZS5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoITE9PT1EJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xUZXh0dXJlcy5zYWZlU2V0VGV4dHVyZTJEOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxEPSEwKSxlPWUudGV4dHVyZSk7YyhlLHQpfTt0aGlzLnNhZmVTZXRUZXh0dXJlQ3ViZT1mdW5jdGlvbihlLHQpe2UmJmUuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQmJighMT09PUImJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFRleHR1cmVzLnNhZmVTZXRUZXh0dXJlQ3ViZTogZG9uJ3QgdXNlIGN1YmUgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxCPSEwKSxlPWUudGV4dHVyZSk7ZSYmZS5pc0N1YmVUZXh0dXJlfHxBcnJheS5pc0FycmF5KGUuaW1hZ2UpJiY2PT09ZS5pbWFnZS5sZW5ndGg/bChlLHQpOmgoZSx0KX19ZnVuY3Rpb24gRnQoZSxyLHQpe3ZhciBuPXQuaXNXZWJHTDI7cmV0dXJue2NvbnZlcnQ6ZnVuY3Rpb24oZSl7aWYoMTAwOT09PWUpcmV0dXJuIDUxMjE7aWYoMTAxNz09PWUpcmV0dXJuIDMyODE5O2lmKDEwMTg9PT1lKXJldHVybiAzMjgyMDtpZigxMDE5PT09ZSlyZXR1cm4gMzM2MzU7aWYoMTAxMD09PWUpcmV0dXJuIDUxMjA7aWYoMTAxMT09PWUpcmV0dXJuIDUxMjI7aWYoMTAxMj09PWUpcmV0dXJuIDUxMjM7aWYoMTAxMz09PWUpcmV0dXJuIDUxMjQ7aWYoMTAxND09PWUpcmV0dXJuIDUxMjU7aWYoMTAxNT09PWUpcmV0dXJuIDUxMjY7aWYoMTAxNj09PWUpe2lmKG4pcmV0dXJuIDUxMzE7dmFyIHQ9ci5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpO3JldHVybiBudWxsIT09dD90LkhBTEZfRkxPQVRfT0VTOm51bGx9aWYoMTAyMT09PWUpcmV0dXJuIDY0MDY7aWYoMTAyMj09PWUpcmV0dXJuIDY0MDc7aWYoMTAyMz09PWUpcmV0dXJuIDY0MDg7aWYoMTAyND09PWUpcmV0dXJuIDY0MDk7aWYoMTAyNT09PWUpcmV0dXJuIDY0MTA7aWYoMTAyNj09PWUpcmV0dXJuIDY0MDI7aWYoMTAyNz09PWUpcmV0dXJuIDM0MDQxO2lmKDEwMjg9PT1lKXJldHVybiA2NDAzO2lmKDEwMjk9PT1lKXJldHVybiAzNjI0NDtpZigxMDMwPT09ZSlyZXR1cm4gMzMzMTk7aWYoMTAzMT09PWUpcmV0dXJuIDMzMzIwO2lmKDEwMzI9PT1lKXJldHVybiAzNjI0ODtpZigxMDMzPT09ZSlyZXR1cm4gMzYyNDk7aWYoMzM3NzY9PT1lfHwzMzc3Nz09PWV8fDMzNzc4PT09ZXx8MzM3Nzk9PT1lKWlmKHQ9ci5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSxudWxsIT09dCl7aWYoMzM3NzY9PT1lKXJldHVybiB0LkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7aWYoMzM3Nzc9PT1lKXJldHVybiB0LkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKDMzNzc4PT09ZSlyZXR1cm4gdC5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZigzMzc3OT09PWUpcmV0dXJuIHQuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFR9ZWxzZSByZXR1cm4gbnVsbDtpZigzNTg0MD09PWV8fDM1ODQxPT09ZXx8MzU4NDI9PT1lfHwzNTg0Mz09PWUpaWYodD1yLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKSxudWxsIT09dCl7aWYoMzU4NDA9PT1lKXJldHVybiB0LkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUc7aWYoMzU4NDE9PT1lKXJldHVybiB0LkNPTVBSRVNTRURfUkdCX1BWUlRDXzJCUFBWMV9JTUc7aWYoMzU4NDI9PT1lKXJldHVybiB0LkNPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HO2lmKDM1ODQzPT09ZSlyZXR1cm4gdC5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNR31lbHNlIHJldHVybiBudWxsO2lmKDM2MTk2PT09ZSlyZXR1cm4gdD1yLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpLG51bGwhPT10P3QuQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDpudWxsO2lmKDM3NDkyPT09ZXx8Mzc0OTY9PT1lKWlmKHQ9ci5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjXCIpLG51bGwhPT10KXtpZigzNzQ5Mj09PWUpcmV0dXJuIHQuQ09NUFJFU1NFRF9SR0I4X0VUQzI7aWYoMzc0OTY9PT1lKXJldHVybiB0LkNPTVBSRVNTRURfUkdCQThfRVRDMl9FQUN9aWYoMzc4MDg9PT1lfHwzNzgwOT09PWV8fDM3ODEwPT09ZXx8Mzc4MTE9PT1lfHwzNzgxMj09PWV8fDM3ODEzPT09ZXx8Mzc4MTQ9PT1lfHwzNzgxNT09PWV8fDM3ODE2PT09ZXx8Mzc4MTc9PT1lfHwzNzgxOD09PWV8fDM3ODE5PT09ZXx8Mzc4MjA9PT1lfHwzNzgyMT09PWV8fDM3ODQwPT09ZXx8Mzc4NDE9PT1lfHwzNzg0Mj09PWV8fDM3ODQzPT09ZXx8Mzc4NDQ9PT1lfHwzNzg0NT09PWV8fDM3ODQ2PT09ZXx8Mzc4NDc9PT1lfHwzNzg0OD09PWV8fDM3ODQ5PT09ZXx8Mzc4NTA9PT1lfHwzNzg1MT09PWV8fDM3ODUyPT09ZXx8Mzc4NTM9PT1lKXJldHVybiB0PXIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGNcIiksbnVsbCE9PXQ/ZTpudWxsO2lmKDM2NDkyPT09ZSlyZXR1cm4gdD1yLmdldChcIkVYVF90ZXh0dXJlX2NvbXByZXNzaW9uX2JwdGNcIiksbnVsbCE9PXQ/ZTpudWxsO2lmKDEwMjA9PT1lKXtpZihuKXJldHVybiAzNDA0Mjt0PXIuZ2V0KFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTtyZXR1cm4gbnVsbCE9PXQ/dC5VTlNJR05FRF9JTlRfMjRfOF9XRUJHTDpudWxsfX19fWZ1bmN0aW9uIHp0KGUpe0guY2FsbCh0aGlzKTt0aGlzLmNhbWVyYXM9ZXx8W119ZnVuY3Rpb24gJHQoKXtmLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiR3JvdXBcIn1mdW5jdGlvbiBHdCgpe3RoaXMuX2dyaXA9dGhpcy5fdGFyZ2V0UmF5PW51bGx9ZnVuY3Rpb24gVnQoYyx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PXYuZ2V0KGUuaW5wdXRTb3VyY2UpO3QmJnQuZGlzcGF0Y2hFdmVudCh7dHlwZTplLnR5cGV9KX1mdW5jdGlvbiBuKCl7di5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS5kaXNjb25uZWN0KHQpfSk7di5jbGVhcigpO2Muc2V0RnJhbWVidWZmZXIobnVsbCk7Yy5zZXRSZW5kZXJUYXJnZXQoYy5nZXRSZW5kZXJUYXJnZXQoKSk7Qy5zdG9wKCk7YS5pc1ByZXNlbnRpbmc9ITE7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic2Vzc2lvbmVuZFwifSl9ZnVuY3Rpb24gaShlKXtwPWU7Qy5zZXRDb250ZXh0KGgpO0Muc3RhcnQoKTthLmlzUHJlc2VudGluZz0hMDthLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzZXNzaW9uc3RhcnRcIn0pfWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PWguaW5wdXRTb3VyY2VzLHI9MDtyPGQubGVuZ3RoO3IrKyl2LnNldCh0W3JdLGRbcl0pO2ZvcihyPTA7cjxlLnJlbW92ZWQubGVuZ3RoO3IrKyl7dD1lLnJlbW92ZWRbcl07dmFyIG49di5nZXQodCk7biYmKG4uZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc2Nvbm5lY3RlZFwiLGRhdGE6dH0pLHYuZGVsZXRlKHQpKX1mb3Iocj0wO3I8ZS5hZGRlZC5sZW5ndGg7cisrKXQ9ZS5hZGRlZFtyXSwobj12LmdldCh0KSkmJm4uZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNvbm5lY3RlZFwiLGRhdGE6dH0pfWZ1bmN0aW9uIGwoZSx0KXtudWxsPT09dD9lLm1hdHJpeFdvcmxkLmNvcHkoZS5tYXRyaXgpOmUubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0Lm1hdHJpeFdvcmxkLGUubWF0cml4KTtlLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGUubWF0cml4V29ybGQpfXZhciBhPXRoaXMsaD1udWxsLHM9MSxwPW51bGwsdT1cImxvY2FsLWZsb29yXCIsZj1udWxsLGQ9W10sdj1uZXcgTWFwLG09bmV3IEg7bS5sYXllcnMuZW5hYmxlKDEpO20udmlld3BvcnQ9bmV3IENlO3ZhciBnPW5ldyBIO2cubGF5ZXJzLmVuYWJsZSgyKTtnLnZpZXdwb3J0PW5ldyBDZTt2YXIgXz1bbSxnXSx5PW5ldyB6dDt5LmxheWVycy5lbmFibGUoMSk7eS5sYXllcnMuZW5hYmxlKDIpO3ZhciBiPW51bGwseD1udWxsO3RoaXMuaXNQcmVzZW50aW5nPXRoaXMuZW5hYmxlZD0hMTt0aGlzLmdldENvbnRyb2xsZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZFtlXTt2b2lkIDA9PT10JiYodD1uZXcgR3QsZFtlXT10KTtyZXR1cm4gdC5nZXRUYXJnZXRSYXlTcGFjZSgpfTt0aGlzLmdldENvbnRyb2xsZXJHcmlwPWZ1bmN0aW9uKGUpe3ZhciB0PWRbZV07dm9pZCAwPT09dCYmKHQ9bmV3IEd0LGRbZV09dCk7cmV0dXJuIHQuZ2V0R3JpcFNwYWNlKCl9O3RoaXMuc2V0RnJhbWVidWZmZXJTY2FsZUZhY3Rvcj1mdW5jdGlvbihlKXtzPWU7ITA9PT1hLmlzUHJlc2VudGluZyYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViWFJNYW5hZ2VyOiBDYW5ub3QgY2hhbmdlIGZyYW1lYnVmZmVyIHNjYWxlIHdoaWxlIHByZXNlbnRpbmcuXCIpfTt0aGlzLnNldFJlZmVyZW5jZVNwYWNlVHlwZT1mdW5jdGlvbihlKXt1PWU7ITA9PT1hLmlzUHJlc2VudGluZyYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViWFJNYW5hZ2VyOiBDYW5ub3QgY2hhbmdlIHJlZmVyZW5jZSBzcGFjZSB0eXBlIHdoaWxlIHByZXNlbnRpbmcuXCIpfTt0aGlzLmdldFJlZmVyZW5jZVNwYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHB9O3RoaXMuZ2V0U2Vzc2lvbj1mdW5jdGlvbigpe3JldHVybiBofTt0aGlzLnNldFNlc3Npb249ZnVuY3Rpb24oZSl7aD1lO251bGwhPT1oJiYoaC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0XCIsciksaC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0c3RhcnRcIixyKSxoLmFkZEV2ZW50TGlzdGVuZXIoXCJzZWxlY3RlbmRcIixyKSxoLmFkZEV2ZW50TGlzdGVuZXIoXCJzcXVlZXplXCIsciksaC5hZGRFdmVudExpc3RlbmVyKFwic3F1ZWV6ZXN0YXJ0XCIsciksaC5hZGRFdmVudExpc3RlbmVyKFwic3F1ZWV6ZWVuZFwiLHIpLGguYWRkRXZlbnRMaXN0ZW5lcihcImVuZFwiLG4pLGU9dC5nZXRDb250ZXh0QXR0cmlidXRlcygpLCEwIT09ZS54ckNvbXBhdGlibGUmJnQubWFrZVhSQ29tcGF0aWJsZSgpLGU9bmV3IFhSV2ViR0xMYXllcihoLHQse2FudGlhbGlhczplLmFudGlhbGlhcyxhbHBoYTplLmFscGhhLGRlcHRoOmUuZGVwdGgsc3RlbmNpbDplLnN0ZW5jaWwsZnJhbWVidWZmZXJTY2FsZUZhY3RvcjpzfSksaC51cGRhdGVSZW5kZXJTdGF0ZSh7YmFzZUxheWVyOmV9KSxoLnJlcXVlc3RSZWZlcmVuY2VTcGFjZSh1KS50aGVuKGkpLGguYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0c291cmNlc2NoYW5nZVwiLG8pKX07dmFyIHc9bmV3IFRlLFM9bmV3IFRlO3RoaXMuZ2V0Q2FtZXJhPWZ1bmN0aW9uKGUpe3kubmVhcj1nLm5lYXI9bS5uZWFyPWUubmVhcjt5LmZhcj1nLmZhcj1tLmZhcj1lLmZhcjtpZihiIT09eS5uZWFyfHx4IT09eS5mYXIpaC51cGRhdGVSZW5kZXJTdGF0ZSh7ZGVwdGhOZWFyOnkubmVhcixkZXB0aEZhcjp5LmZhcn0pLGI9eS5uZWFyLHg9eS5mYXI7dmFyIHQ9ZS5wYXJlbnQscj15LmNhbWVyYXM7bCh5LHQpO2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKWwocltuXSx0KTtlLm1hdHJpeFdvcmxkLmNvcHkoeS5tYXRyaXhXb3JsZCk7ZT1lLmNoaWxkcmVuO249MDtmb3IodD1lLmxlbmd0aDtuPHQ7bisrKWVbbl0udXBkYXRlTWF0cml4V29ybGQoITApO2lmKDI9PT1yLmxlbmd0aCl7dy5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCk7Uy5zZXRGcm9tTWF0cml4UG9zaXRpb24oZy5tYXRyaXhXb3JsZCk7cj13LmRpc3RhbmNlVG8oUyk7dmFyIGk9bS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzLG89Zy5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzLGE9aVsxNF0vKGlbMTBdLTEpO249aVsxNF0vKGlbMTBdKzEpO2U9KGlbOV0rMSkvaVs1XTt0PShpWzldLTEpL2lbNV07dmFyIHM9KGlbOF0tMSkvaVswXSx1PShvWzhdKzEpL29bMF07bz1hKnM7aT1hKnU7dT1yLygtcyt1KTtzPXUqLXM7bS5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoeS5wb3NpdGlvbix5LnF1YXRlcm5pb24seS5zY2FsZSk7eS50cmFuc2xhdGVYKHMpO3kudHJhbnNsYXRlWih1KTt5Lm1hdHJpeFdvcmxkLmNvbXBvc2UoeS5wb3NpdGlvbix5LnF1YXRlcm5pb24seS5zY2FsZSk7eS5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZSh5Lm1hdHJpeFdvcmxkKTthKz11O3U9bit1O3kucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUoby1zLGkrKHItcyksZSpuL3UqYSx0Km4vdSphLGEsdSl9ZWxzZSB5LnByb2plY3Rpb25NYXRyaXguY29weShtLnByb2plY3Rpb25NYXRyaXgpO3JldHVybiB5fTt2YXIgTT1udWxsLEM9bmV3IGplO0Muc2V0QW5pbWF0aW9uTG9vcChmdW5jdGlvbihlLHQpe2Y9dC5nZXRWaWV3ZXJQb3NlKHApO2lmKG51bGwhPT1mKXt2YXIgcj1mLnZpZXdzLG49aC5yZW5kZXJTdGF0ZS5iYXNlTGF5ZXI7Yy5zZXRGcmFtZWJ1ZmZlcihuLmZyYW1lYnVmZmVyKTt2YXIgaT0hMTtyLmxlbmd0aCE9PXkuY2FtZXJhcy5sZW5ndGgmJih5LmNhbWVyYXMubGVuZ3RoPTAsaT0hMCk7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBhPXJbb10scz1uLmdldFZpZXdwb3J0KGEpLHU9X1tvXTt1Lm1hdHJpeC5mcm9tQXJyYXkoYS50cmFuc2Zvcm0ubWF0cml4KTt1LnByb2plY3Rpb25NYXRyaXguZnJvbUFycmF5KGEucHJvamVjdGlvbk1hdHJpeCk7dS52aWV3cG9ydC5zZXQocy54LHMueSxzLndpZHRoLHMuaGVpZ2h0KTswPT09byYmeS5tYXRyaXguY29weSh1Lm1hdHJpeCk7ITA9PT1pJiZ5LmNhbWVyYXMucHVzaCh1KX19cj1oLmlucHV0U291cmNlcztmb3Iobz0wO288ZC5sZW5ndGg7bysrKWRbb10udXBkYXRlKHJbb10sdCxwKTtNJiZNKGUsdCl9KTt0aGlzLnNldEFuaW1hdGlvbkxvb3A9ZnVuY3Rpb24oZSl7TT1lfTt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIEh0KG8pe2Z1bmN0aW9uIHMoZSx0LHIpe2Uub3BhY2l0eS52YWx1ZT10Lm9wYWNpdHk7dC5jb2xvciYmZS5kaWZmdXNlLnZhbHVlLmNvcHkodC5jb2xvcik7dC5lbWlzc2l2ZSYmZS5lbWlzc2l2ZS52YWx1ZS5jb3B5KHQuZW1pc3NpdmUpLm11bHRpcGx5U2NhbGFyKHQuZW1pc3NpdmVJbnRlbnNpdHkpO3QubWFwJiYoZS5tYXAudmFsdWU9dC5tYXApO3QuYWxwaGFNYXAmJihlLmFscGhhTWFwLnZhbHVlPXQuYWxwaGFNYXApO3Quc3BlY3VsYXJNYXAmJihlLnNwZWN1bGFyTWFwLnZhbHVlPXQuc3BlY3VsYXJNYXApO2lmKHI9dC5lbnZNYXB8fHIpZS5lbnZNYXAudmFsdWU9cixlLmZsaXBFbnZNYXAudmFsdWU9ci5pc0N1YmVUZXh0dXJlPy0xOjEsZS5yZWZsZWN0aXZpdHkudmFsdWU9dC5yZWZsZWN0aXZpdHksZS5yZWZyYWN0aW9uUmF0aW8udmFsdWU9dC5yZWZyYWN0aW9uUmF0aW8sZS5tYXhNaXBMZXZlbC52YWx1ZT1vLmdldChyKS5fX21heE1pcExldmVsO3QubGlnaHRNYXAmJihlLmxpZ2h0TWFwLnZhbHVlPXQubGlnaHRNYXAsZS5saWdodE1hcEludGVuc2l0eS52YWx1ZT10LmxpZ2h0TWFwSW50ZW5zaXR5KTt0LmFvTWFwJiYoZS5hb01hcC52YWx1ZT10LmFvTWFwLGUuYW9NYXBJbnRlbnNpdHkudmFsdWU9dC5hb01hcEludGVuc2l0eSk7aWYodC5tYXApdmFyIG49dC5tYXA7ZWxzZSB0LnNwZWN1bGFyTWFwP249dC5zcGVjdWxhck1hcDp0LmRpc3BsYWNlbWVudE1hcD9uPXQuZGlzcGxhY2VtZW50TWFwOnQubm9ybWFsTWFwP249dC5ub3JtYWxNYXA6dC5idW1wTWFwP249dC5idW1wTWFwOnQucm91Z2huZXNzTWFwP249dC5yb3VnaG5lc3NNYXA6dC5tZXRhbG5lc3NNYXA/bj10Lm1ldGFsbmVzc01hcDp0LmFscGhhTWFwP249dC5hbHBoYU1hcDp0LmVtaXNzaXZlTWFwJiYobj10LmVtaXNzaXZlTWFwKTt2b2lkIDAhPT1uJiYobi5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYobj1uLnRleHR1cmUpLCEwPT09bi5tYXRyaXhBdXRvVXBkYXRlJiZuLnVwZGF0ZU1hdHJpeCgpLGUudXZUcmFuc2Zvcm0udmFsdWUuY29weShuLm1hdHJpeCkpO2lmKHQuYW9NYXApdmFyIGk9dC5hb01hcDtlbHNlIHQubGlnaHRNYXAmJihpPXQubGlnaHRNYXApO3ZvaWQgMCE9PWkmJihpLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihpPWkudGV4dHVyZSksITA9PT1pLm1hdHJpeEF1dG9VcGRhdGUmJmkudXBkYXRlTWF0cml4KCksZS51djJUcmFuc2Zvcm0udmFsdWUuY29weShpLm1hdHJpeCkpfWZ1bmN0aW9uIHUoZSx0LHIpe2Uucm91Z2huZXNzLnZhbHVlPXQucm91Z2huZXNzO2UubWV0YWxuZXNzLnZhbHVlPXQubWV0YWxuZXNzO3Qucm91Z2huZXNzTWFwJiYoZS5yb3VnaG5lc3NNYXAudmFsdWU9dC5yb3VnaG5lc3NNYXApO3QubWV0YWxuZXNzTWFwJiYoZS5tZXRhbG5lc3NNYXAudmFsdWU9dC5tZXRhbG5lc3NNYXApO3QuZW1pc3NpdmVNYXAmJihlLmVtaXNzaXZlTWFwLnZhbHVlPXQuZW1pc3NpdmVNYXApO3QuYnVtcE1hcCYmKGUuYnVtcE1hcC52YWx1ZT10LmJ1bXBNYXAsZS5idW1wU2NhbGUudmFsdWU9dC5idW1wU2NhbGUsMT09PXQuc2lkZSYmKGUuYnVtcFNjYWxlLnZhbHVlKj0tMSkpO3Qubm9ybWFsTWFwJiYoZS5ub3JtYWxNYXAudmFsdWU9dC5ub3JtYWxNYXAsZS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KHQubm9ybWFsU2NhbGUpLDE9PT10LnNpZGUmJmUubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpO3QuZGlzcGxhY2VtZW50TWFwJiYoZS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9dC5kaXNwbGFjZW1lbnRNYXAsZS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT10LmRpc3BsYWNlbWVudFNjYWxlLGUuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT10LmRpc3BsYWNlbWVudEJpYXMpO2lmKHQuZW52TWFwfHxyKWUuZW52TWFwSW50ZW5zaXR5LnZhbHVlPXQuZW52TWFwSW50ZW5zaXR5fXJldHVybntyZWZyZXNoRm9nVW5pZm9ybXM6ZnVuY3Rpb24oZSx0KXtlLmZvZ0NvbG9yLnZhbHVlLmNvcHkodC5jb2xvcik7dC5pc0ZvZz8oZS5mb2dOZWFyLnZhbHVlPXQubmVhcixlLmZvZ0Zhci52YWx1ZT10LmZhcik6dC5pc0ZvZ0V4cDImJihlLmZvZ0RlbnNpdHkudmFsdWU9dC5kZW5zaXR5KX0scmVmcmVzaE1hdGVyaWFsVW5pZm9ybXM6ZnVuY3Rpb24oZSx0LHIsbixpKXtpZih0LmlzTWVzaEJhc2ljTWF0ZXJpYWwpcyhlLHQpO2Vsc2UgaWYodC5pc01lc2hMYW1iZXJ0TWF0ZXJpYWwpcyhlLHQpLHQuZW1pc3NpdmVNYXAmJihlLmVtaXNzaXZlTWFwLnZhbHVlPXQuZW1pc3NpdmVNYXApO2Vsc2UgaWYodC5pc01lc2hUb29uTWF0ZXJpYWwpcyhlLHQpLGUuc3BlY3VsYXIudmFsdWUuY29weSh0LnNwZWN1bGFyKSxlLnNoaW5pbmVzcy52YWx1ZT1NYXRoLm1heCh0LnNoaW5pbmVzcywxZS00KSx0LmdyYWRpZW50TWFwJiYoZS5ncmFkaWVudE1hcC52YWx1ZT10LmdyYWRpZW50TWFwKSx0LmVtaXNzaXZlTWFwJiYoZS5lbWlzc2l2ZU1hcC52YWx1ZT10LmVtaXNzaXZlTWFwKSx0LmJ1bXBNYXAmJihlLmJ1bXBNYXAudmFsdWU9dC5idW1wTWFwLGUuYnVtcFNjYWxlLnZhbHVlPXQuYnVtcFNjYWxlLDE9PT10LnNpZGUmJihlLmJ1bXBTY2FsZS52YWx1ZSo9LTEpKSx0Lm5vcm1hbE1hcCYmKGUubm9ybWFsTWFwLnZhbHVlPXQubm9ybWFsTWFwLGUubm9ybWFsU2NhbGUudmFsdWUuY29weSh0Lm5vcm1hbFNjYWxlKSwxPT09dC5zaWRlJiZlLm5vcm1hbFNjYWxlLnZhbHVlLm5lZ2F0ZSgpKSx0LmRpc3BsYWNlbWVudE1hcCYmKGUuZGlzcGxhY2VtZW50TWFwLnZhbHVlPXQuZGlzcGxhY2VtZW50TWFwLGUuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9dC5kaXNwbGFjZW1lbnRTY2FsZSxlLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9dC5kaXNwbGFjZW1lbnRCaWFzKTtlbHNlIGlmKHQuaXNNZXNoUGhvbmdNYXRlcmlhbClzKGUsdCksZS5zcGVjdWxhci52YWx1ZS5jb3B5KHQuc3BlY3VsYXIpLGUuc2hpbmluZXNzLnZhbHVlPU1hdGgubWF4KHQuc2hpbmluZXNzLDFlLTQpLHQuZW1pc3NpdmVNYXAmJihlLmVtaXNzaXZlTWFwLnZhbHVlPXQuZW1pc3NpdmVNYXApLHQuYnVtcE1hcCYmKGUuYnVtcE1hcC52YWx1ZT10LmJ1bXBNYXAsZS5idW1wU2NhbGUudmFsdWU9dC5idW1wU2NhbGUsMT09PXQuc2lkZSYmKGUuYnVtcFNjYWxlLnZhbHVlKj0tMSkpLHQubm9ybWFsTWFwJiYoZS5ub3JtYWxNYXAudmFsdWU9dC5ub3JtYWxNYXAsZS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KHQubm9ybWFsU2NhbGUpLDE9PT10LnNpZGUmJmUubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpLHQuZGlzcGxhY2VtZW50TWFwJiYoZS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9dC5kaXNwbGFjZW1lbnRNYXAsZS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT10LmRpc3BsYWNlbWVudFNjYWxlLGUuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT10LmRpc3BsYWNlbWVudEJpYXMpO2Vsc2UgaWYodC5pc01lc2hTdGFuZGFyZE1hdGVyaWFsKXMoZSx0LHIpLHQuaXNNZXNoUGh5c2ljYWxNYXRlcmlhbD8odShlLHQsciksZS5yZWZsZWN0aXZpdHkudmFsdWU9dC5yZWZsZWN0aXZpdHksZS5jbGVhcmNvYXQudmFsdWU9dC5jbGVhcmNvYXQsZS5jbGVhcmNvYXRSb3VnaG5lc3MudmFsdWU9dC5jbGVhcmNvYXRSb3VnaG5lc3MsdC5zaGVlbiYmZS5zaGVlbi52YWx1ZS5jb3B5KHQuc2hlZW4pLHQuY2xlYXJjb2F0TWFwJiYoZS5jbGVhcmNvYXRNYXAudmFsdWU9dC5jbGVhcmNvYXRNYXApLHQuY2xlYXJjb2F0Um91Z2huZXNzTWFwJiYoZS5jbGVhcmNvYXRSb3VnaG5lc3NNYXAudmFsdWU9dC5jbGVhcmNvYXRSb3VnaG5lc3NNYXApLHQuY2xlYXJjb2F0Tm9ybWFsTWFwJiYoZS5jbGVhcmNvYXROb3JtYWxTY2FsZS52YWx1ZS5jb3B5KHQuY2xlYXJjb2F0Tm9ybWFsU2NhbGUpLGUuY2xlYXJjb2F0Tm9ybWFsTWFwLnZhbHVlPXQuY2xlYXJjb2F0Tm9ybWFsTWFwLDE9PT10LnNpZGUmJmUuY2xlYXJjb2F0Tm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpLGUudHJhbnNwYXJlbmN5LnZhbHVlPXQudHJhbnNwYXJlbmN5KTp1KGUsdCxyKTtlbHNlIGlmKHQuaXNNZXNoTWF0Y2FwTWF0ZXJpYWwpcyhlLHQpLHQubWF0Y2FwJiYoZS5tYXRjYXAudmFsdWU9dC5tYXRjYXApLHQuYnVtcE1hcCYmKGUuYnVtcE1hcC52YWx1ZT10LmJ1bXBNYXAsZS5idW1wU2NhbGUudmFsdWU9dC5idW1wU2NhbGUsMT09PXQuc2lkZSYmKGUuYnVtcFNjYWxlLnZhbHVlKj0tMSkpLHQubm9ybWFsTWFwJiYoZS5ub3JtYWxNYXAudmFsdWU9dC5ub3JtYWxNYXAsZS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KHQubm9ybWFsU2NhbGUpLDE9PT10LnNpZGUmJmUubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpLHQuZGlzcGxhY2VtZW50TWFwJiYoZS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9dC5kaXNwbGFjZW1lbnRNYXAsZS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT10LmRpc3BsYWNlbWVudFNjYWxlLGUuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT10LmRpc3BsYWNlbWVudEJpYXMpO2Vsc2UgaWYodC5pc01lc2hEZXB0aE1hdGVyaWFsKXMoZSx0KSx0LmRpc3BsYWNlbWVudE1hcCYmKGUuZGlzcGxhY2VtZW50TWFwLnZhbHVlPXQuZGlzcGxhY2VtZW50TWFwLGUuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9dC5kaXNwbGFjZW1lbnRTY2FsZSxlLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9dC5kaXNwbGFjZW1lbnRCaWFzKTtlbHNlIGlmKHQuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbClzKGUsdCksdC5kaXNwbGFjZW1lbnRNYXAmJihlLmRpc3BsYWNlbWVudE1hcC52YWx1ZT10LmRpc3BsYWNlbWVudE1hcCxlLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPXQuZGlzcGxhY2VtZW50U2NhbGUsZS5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPXQuZGlzcGxhY2VtZW50QmlhcyksZS5yZWZlcmVuY2VQb3NpdGlvbi52YWx1ZS5jb3B5KHQucmVmZXJlbmNlUG9zaXRpb24pLGUubmVhckRpc3RhbmNlLnZhbHVlPXQubmVhckRpc3RhbmNlLGUuZmFyRGlzdGFuY2UudmFsdWU9dC5mYXJEaXN0YW5jZTtlbHNlIGlmKHQuaXNNZXNoTm9ybWFsTWF0ZXJpYWwpcyhlLHQpLHQuYnVtcE1hcCYmKGUuYnVtcE1hcC52YWx1ZT10LmJ1bXBNYXAsZS5idW1wU2NhbGUudmFsdWU9dC5idW1wU2NhbGUsMT09PXQuc2lkZSYmKGUuYnVtcFNjYWxlLnZhbHVlKj0tMSkpLHQubm9ybWFsTWFwJiYoZS5ub3JtYWxNYXAudmFsdWU9dC5ub3JtYWxNYXAsZS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KHQubm9ybWFsU2NhbGUpLDE9PT10LnNpZGUmJmUubm9ybWFsU2NhbGUudmFsdWUubmVnYXRlKCkpLHQuZGlzcGxhY2VtZW50TWFwJiYoZS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9dC5kaXNwbGFjZW1lbnRNYXAsZS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT10LmRpc3BsYWNlbWVudFNjYWxlLGUuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT10LmRpc3BsYWNlbWVudEJpYXMpO2Vsc2UgaWYodC5pc0xpbmVCYXNpY01hdGVyaWFsKWUuZGlmZnVzZS52YWx1ZS5jb3B5KHQuY29sb3IpLGUub3BhY2l0eS52YWx1ZT10Lm9wYWNpdHksdC5pc0xpbmVEYXNoZWRNYXRlcmlhbCYmKGUuZGFzaFNpemUudmFsdWU9dC5kYXNoU2l6ZSxlLnRvdGFsU2l6ZS52YWx1ZT10LmRhc2hTaXplK3QuZ2FwU2l6ZSxlLnNjYWxlLnZhbHVlPXQuc2NhbGUpO2Vsc2UgaWYodC5pc1BvaW50c01hdGVyaWFsKXtlLmRpZmZ1c2UudmFsdWUuY29weSh0LmNvbG9yKTtlLm9wYWNpdHkudmFsdWU9dC5vcGFjaXR5O2Uuc2l6ZS52YWx1ZT10LnNpemUqbjtlLnNjYWxlLnZhbHVlPS41Kmk7dC5tYXAmJihlLm1hcC52YWx1ZT10Lm1hcCk7dC5hbHBoYU1hcCYmKGUuYWxwaGFNYXAudmFsdWU9dC5hbHBoYU1hcCk7aWYodC5tYXApdmFyIG89dC5tYXA7ZWxzZSB0LmFscGhhTWFwJiYobz10LmFscGhhTWFwKTt2b2lkIDAhPT1vJiYoITA9PT1vLm1hdHJpeEF1dG9VcGRhdGUmJm8udXBkYXRlTWF0cml4KCksZS51dlRyYW5zZm9ybS52YWx1ZS5jb3B5KG8ubWF0cml4KSl9ZWxzZSBpZih0LmlzU3ByaXRlTWF0ZXJpYWwpe2UuZGlmZnVzZS52YWx1ZS5jb3B5KHQuY29sb3IpO2Uub3BhY2l0eS52YWx1ZT10Lm9wYWNpdHk7ZS5yb3RhdGlvbi52YWx1ZT10LnJvdGF0aW9uO3QubWFwJiYoZS5tYXAudmFsdWU9dC5tYXApO3QuYWxwaGFNYXAmJihlLmFscGhhTWFwLnZhbHVlPXQuYWxwaGFNYXApO2lmKHQubWFwKXZhciBhPXQubWFwO2Vsc2UgdC5hbHBoYU1hcCYmKGE9dC5hbHBoYU1hcCk7dm9pZCAwIT09YSYmKCEwPT09YS5tYXRyaXhBdXRvVXBkYXRlJiZhLnVwZGF0ZU1hdHJpeCgpLGUudXZUcmFuc2Zvcm0udmFsdWUuY29weShhLm1hdHJpeCkpfWVsc2UgdC5pc1NoYWRvd01hdGVyaWFsPyhlLmNvbG9yLnZhbHVlLmNvcHkodC5jb2xvciksZS5vcGFjaXR5LnZhbHVlPXQub3BhY2l0eSk6dC5pc1NoYWRlck1hdGVyaWFsJiYodC51bmlmb3Jtc05lZWRVcGRhdGU9ITEpfX19ZnVuY3Rpb24gVXQoZSl7dmFyIHc7ZnVuY3Rpb24gdCgpe3RlPW5ldyBEZShlZSk7cmU9bmV3IE5lKGVlLHRlLGUpOyExPT09cmUuaXNXZWJHTDImJih0ZS5nZXQoXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpLHRlLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpLHRlLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIiksdGUuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIiksdGUuZ2V0KFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpLHRlLmdldChcIk9FU19lbGVtZW50X2luZGV4X3VpbnRcIiksdGUuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKSk7dGUuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpO19lPW5ldyBGdChlZSx0ZSxyZSk7bmU9bmV3IER0KGVlLHRlLHJlKTtuZS5zY2lzc29yKEIuY29weShxKS5tdWx0aXBseVNjYWxhcihHKS5mbG9vcigpKTtuZS52aWV3cG9ydChELmNvcHkoVSkubXVsdGlwbHlTY2FsYXIoRykuZmxvb3IoKSk7aWU9bmV3IHplKGVlKTtvZT1uZXcgU3Q7YWU9bmV3IEJ0KGVlLHRlLG5lLG9lLHJlLF9lLGllKTtzZT1uZXcgUmUoZWUscmUpO3VlPW5ldyBCZShlZSxzZSxpZSk7Y2U9bmV3IEdlKGVlLHVlLHNlLGllKTt2ZT1uZXcgJGUoZWUpO2xlPW5ldyB3dChDLHRlLHJlKTtoZT1uZXcgSHQob2UpO3BlPW5ldyBFdDtmZT1uZXcga3Q7ZGU9bmV3IGtlKEMsbmUsY2UsZyk7bWU9bmV3IExlKGVlLHRlLGllLHJlKTtnZT1uZXcgRmUoZWUsdGUsaWUscmUpO2llLnByb2dyYW1zPWxlLnByb2dyYW1zO0MuY2FwYWJpbGl0aWVzPXJlO0MuZXh0ZW5zaW9ucz10ZTtDLnByb3BlcnRpZXM9b2U7Qy5yZW5kZXJMaXN0cz1wZTtDLnN0YXRlPW5lO0MuaW5mbz1pZX1mdW5jdGlvbiByKGUpe2UucHJldmVudERlZmF1bHQoKTtjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgTG9zdC5cIik7VD0hMH1mdW5jdGlvbiBuKCl7Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDb250ZXh0IFJlc3RvcmVkLlwiKTtUPSExO3QoKX1mdW5jdGlvbiBjKGUpe2U9ZS50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGMpO2woZSk7b2UucmVtb3ZlKGUpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9b2UuZ2V0KGUpLnByb2dyYW07ZS5wcm9ncmFtPXZvaWQgMDt2b2lkIDAhPT10JiZsZS5yZWxlYXNlUHJvZ3JhbSh0KX1mdW5jdGlvbiBzKGUsdCl7ZS5yZW5kZXIoZnVuY3Rpb24oZSl7Qy5yZW5kZXJCdWZmZXJJbW1lZGlhdGUoZSx0KX0pfWZ1bmN0aW9uIGgoZSx0LHIsbil7aWYoITEhPT1lLnZpc2libGUpe2lmKGUubGF5ZXJzLnRlc3QodC5sYXllcnMpKWlmKGUuaXNHcm91cClyPWUucmVuZGVyT3JkZXI7ZWxzZSBpZihlLmlzTE9EKSEwPT09ZS5hdXRvVXBkYXRlJiZlLnVwZGF0ZSh0KTtlbHNlIGlmKGUuaXNMaWdodClNLnB1c2hMaWdodChlKSxlLmNhc3RTaGFkb3cmJk0ucHVzaFNoYWRvdyhlKTtlbHNlIGlmKGUuaXNTcHJpdGUpe2lmKCFlLmZydXN0dW1DdWxsZWR8fFguaW50ZXJzZWN0c1Nwcml0ZShlKSl7biYmUS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KEopO3ZhciBpPWNlLnVwZGF0ZShlKSxvPWUubWF0ZXJpYWw7by52aXNpYmxlJiZ4LnB1c2goZSxpLG8scixRLnosbnVsbCl9fWVsc2UgaWYoZS5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdCluJiZRLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKS5hcHBseU1hdHJpeDQoSikseC5wdXNoKGUsbnVsbCxlLm1hdGVyaWFsLHIsUS56LG51bGwpO2Vsc2UgaWYoZS5pc01lc2h8fGUuaXNMaW5lfHxlLmlzUG9pbnRzKWlmKGUuaXNTa2lubmVkTWVzaCYmZS5za2VsZXRvbi5mcmFtZSE9PWllLnJlbmRlci5mcmFtZSYmKGUuc2tlbGV0b24udXBkYXRlKCksZS5za2VsZXRvbi5mcmFtZT1pZS5yZW5kZXIuZnJhbWUpLCFlLmZydXN0dW1DdWxsZWR8fFguaW50ZXJzZWN0c09iamVjdChlKSlpZihuJiZRLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKS5hcHBseU1hdHJpeDQoSiksaT1jZS51cGRhdGUoZSksbz1lLm1hdGVyaWFsLEFycmF5LmlzQXJyYXkobykpZm9yKHZhciBhPWkuZ3JvdXBzLHM9MCx1PWEubGVuZ3RoO3M8dTtzKyspe3ZhciBjPWFbc10sbD1vW2MubWF0ZXJpYWxJbmRleF07bCYmbC52aXNpYmxlJiZ4LnB1c2goZSxpLGwscixRLnosYyl9ZWxzZSBvLnZpc2libGUmJngucHVzaChlLGksbyxyLFEueixudWxsKTtlPWUuY2hpbGRyZW47cz0wO2Zvcih1PWUubGVuZ3RoO3M8dTtzKyspaChlW3NdLHQscixuKX19ZnVuY3Rpb24gYShlLHQscixuKXtmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspe3ZhciBhPWVbaV0scz1hLm9iamVjdCx1PWEuZ2VvbWV0cnksYz12b2lkIDA9PT1uP2EubWF0ZXJpYWw6bjthPWEuZ3JvdXA7aWYoci5pc0FycmF5Q2FtZXJhKXtJPXI7Zm9yKHZhciBsPXIuY2FtZXJhcyxoPTAscD1sLmxlbmd0aDtoPHA7aCsrKXt2YXIgZj1sW2hdO3MubGF5ZXJzLnRlc3QoZi5sYXllcnMpJiYobmUudmlld3BvcnQoRC5jb3B5KGYudmlld3BvcnQpKSxNLnNldHVwTGlnaHRzKGYpLGQocyx0LGYsdSxjLGEpKX19ZWxzZSBJPW51bGwsZChzLHQscix1LGMsYSl9fWZ1bmN0aW9uIGQoZSx0LHIsbixpLG8pe2Uub25CZWZvcmVSZW5kZXIoQyx0LHIsbixpLG8pO009ZmUuZ2V0KHQsSXx8cik7ZS5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhyLm1hdHJpeFdvcmxkSW52ZXJzZSxlLm1hdHJpeFdvcmxkKTtlLm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoZS5tb2RlbFZpZXdNYXRyaXgpO2lmKGUuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3Qpe3ZhciBhPVMocix0LGksZSk7bmUuc2V0TWF0ZXJpYWwoaSk7az13PW51bGw7TD0hMTtzKGUsYSl9ZWxzZSBDLnJlbmRlckJ1ZmZlckRpcmVjdChyLHQsbixpLGUsbyk7ZS5vbkFmdGVyUmVuZGVyKEMsdCxyLG4saSxvKTtNPWZlLmdldCh0LEl8fHIpfWZ1bmN0aW9uIHYoZSx0LHIpe3ZhciBuPW9lLmdldChlKSxpPU0uc3RhdGUubGlnaHRzLG89aS5zdGF0ZS52ZXJzaW9uO3I9bGUuZ2V0UGFyYW1ldGVycyhlLGkuc3RhdGUsTS5zdGF0ZS5zaGFkb3dzQXJyYXksdCxZLm51bVBsYW5lcyxZLm51bUludGVyc2VjdGlvbixyKTt2YXIgYT1sZS5nZXRQcm9ncmFtQ2FjaGVLZXkocikscz1uLnByb2dyYW0sdT0hMDtpZih2b2lkIDA9PT1zKWUuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixjKTtlbHNlIGlmKHMuY2FjaGVLZXkhPT1hKWwoZSk7ZWxzZXtpZihuLmxpZ2h0c1N0YXRlVmVyc2lvbiE9PW8pbi5saWdodHNTdGF0ZVZlcnNpb249bztlbHNlIGlmKHZvaWQgMCE9PXIuc2hhZGVySUQpcmV0dXJuO3U9ITF9dSYmKHM9bGUuYWNxdWlyZVByb2dyYW0ocixhKSxuLnByb2dyYW09cyxuLnVuaWZvcm1zPXIudW5pZm9ybXMsbi5vdXRwdXRFbmNvZGluZz1yLm91dHB1dEVuY29kaW5nLGUucHJvZ3JhbT1zKTtyPXMuZ2V0QXR0cmlidXRlcygpO2lmKGUubW9ycGhUYXJnZXRzKWZvcihhPWUubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzPTA7YTxDLm1heE1vcnBoVGFyZ2V0czthKyspMDw9cltcIm1vcnBoVGFyZ2V0XCIrYV0mJmUubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzKys7aWYoZS5tb3JwaE5vcm1hbHMpZm9yKGE9ZS5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHM9MDthPEMubWF4TW9ycGhOb3JtYWxzO2ErKykwPD1yW1wibW9ycGhOb3JtYWxcIithXSYmZS5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHMrKztyPW4udW5pZm9ybXM7aWYoIWUuaXNTaGFkZXJNYXRlcmlhbCYmIWUuaXNSYXdTaGFkZXJNYXRlcmlhbHx8ITA9PT1lLmNsaXBwaW5nKW4ubnVtQ2xpcHBpbmdQbGFuZXM9WS5udW1QbGFuZXMsbi5udW1JbnRlcnNlY3Rpb249WS5udW1JbnRlcnNlY3Rpb24sci5jbGlwcGluZ1BsYW5lcz1ZLnVuaWZvcm07bi5lbnZpcm9ubWVudD1lLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw/dC5lbnZpcm9ubWVudDpudWxsO24uZm9nPXQuZm9nO24ubmVlZHNMaWdodHM9ZS5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fGUuaXNNZXNoVG9vbk1hdGVyaWFsfHxlLmlzTWVzaFBob25nTWF0ZXJpYWx8fGUuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8ZS5pc1NoYWRvd01hdGVyaWFsfHxlLmlzU2hhZGVyTWF0ZXJpYWwmJiEwPT09ZS5saWdodHM7bi5saWdodHNTdGF0ZVZlcnNpb249bztuLm5lZWRzTGlnaHRzJiYoci5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT1pLnN0YXRlLmFtYmllbnQsci5saWdodFByb2JlLnZhbHVlPWkuc3RhdGUucHJvYmUsci5kaXJlY3Rpb25hbExpZ2h0cy52YWx1ZT1pLnN0YXRlLmRpcmVjdGlvbmFsLHIuZGlyZWN0aW9uYWxMaWdodFNoYWRvd3MudmFsdWU9aS5zdGF0ZS5kaXJlY3Rpb25hbFNoYWRvdyxyLnNwb3RMaWdodHMudmFsdWU9aS5zdGF0ZS5zcG90LHIuc3BvdExpZ2h0U2hhZG93cy52YWx1ZT1pLnN0YXRlLnNwb3RTaGFkb3csci5yZWN0QXJlYUxpZ2h0cy52YWx1ZT1pLnN0YXRlLnJlY3RBcmVhLHIucG9pbnRMaWdodHMudmFsdWU9aS5zdGF0ZS5wb2ludCxyLnBvaW50TGlnaHRTaGFkb3dzLnZhbHVlPWkuc3RhdGUucG9pbnRTaGFkb3csci5oZW1pc3BoZXJlTGlnaHRzLnZhbHVlPWkuc3RhdGUuaGVtaSxyLmRpcmVjdGlvbmFsU2hhZG93TWFwLnZhbHVlPWkuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXAsci5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeC52YWx1ZT1pLnN0YXRlLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LHIuc3BvdFNoYWRvd01hcC52YWx1ZT1pLnN0YXRlLnNwb3RTaGFkb3dNYXAsci5zcG90U2hhZG93TWF0cml4LnZhbHVlPWkuc3RhdGUuc3BvdFNoYWRvd01hdHJpeCxyLnBvaW50U2hhZG93TWFwLnZhbHVlPWkuc3RhdGUucG9pbnRTaGFkb3dNYXAsci5wb2ludFNoYWRvd01hdHJpeC52YWx1ZT1pLnN0YXRlLnBvaW50U2hhZG93TWF0cml4KTtlPW4ucHJvZ3JhbS5nZXRVbmlmb3JtcygpO2U9cnQuc2VxV2l0aFZhbHVlKGUuc2VxLHIpO24udW5pZm9ybXNMaXN0PWV9ZnVuY3Rpb24gUyhlLHQscixuKXthZS5yZXNldFRleHR1cmVVbml0cygpO3ZhciBpPXQuZm9nLG89ci5pc01lc2hTdGFuZGFyZE1hdGVyaWFsP3QuZW52aXJvbm1lbnQ6bnVsbCxhPW51bGw9PT1BP0Mub3V0cHV0RW5jb2Rpbmc6QS50ZXh0dXJlLmVuY29kaW5nLHM9b2UuZ2V0KHIpLHU9TS5zdGF0ZS5saWdodHM7SyYmKFp8fGUhPT1OKSYmWS5zZXRTdGF0ZShyLmNsaXBwaW5nUGxhbmVzLHIuY2xpcEludGVyc2VjdGlvbixyLmNsaXBTaGFkb3dzLGUscyxlPT09TiYmci5pZD09PVIpO3IudmVyc2lvbj09PXMuX192ZXJzaW9uP3ZvaWQgMD09PXMucHJvZ3JhbT92KHIsdCxuKTpyLmZvZyYmcy5mb2chPT1pP3Yocix0LG4pOnMuZW52aXJvbm1lbnQhPT1vP3Yocix0LG4pOnMubmVlZHNMaWdodHMmJnMubGlnaHRzU3RhdGVWZXJzaW9uIT09dS5zdGF0ZS52ZXJzaW9uP3Yocix0LG4pOnZvaWQgMD09PXMubnVtQ2xpcHBpbmdQbGFuZXN8fHMubnVtQ2xpcHBpbmdQbGFuZXM9PT1ZLm51bVBsYW5lcyYmcy5udW1JbnRlcnNlY3Rpb249PT1ZLm51bUludGVyc2VjdGlvbj9zLm91dHB1dEVuY29kaW5nIT09YSYmdihyLHQsbik6dihyLHQsbik6KHYocix0LG4pLHMuX192ZXJzaW9uPXIudmVyc2lvbik7dmFyIGM9ITEsbD0hMSxoPSExO3Q9cy5wcm9ncmFtO2E9dC5nZXRVbmlmb3JtcygpO3U9cy51bmlmb3JtcztuZS51c2VQcm9ncmFtKHQucHJvZ3JhbSkmJihoPWw9Yz0hMCk7ci5pZCE9PVImJihSPXIuaWQsbD0hMCk7aWYoY3x8TiE9PWUpe2Euc2V0VmFsdWUoZWUsXCJwcm9qZWN0aW9uTWF0cml4XCIsZS5wcm9qZWN0aW9uTWF0cml4KTtyZS5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZhLnNldFZhbHVlKGVlLFwibG9nRGVwdGhCdWZGQ1wiLDIvKE1hdGgubG9nKGUuZmFyKzEpL01hdGguTE4yKSk7TiE9PWUmJihOPWUsaD1sPSEwKTtpZihyLmlzU2hhZGVyTWF0ZXJpYWx8fHIuaXNNZXNoUGhvbmdNYXRlcmlhbHx8ci5pc01lc2hUb29uTWF0ZXJpYWx8fHIuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8ci5lbnZNYXApYz1hLm1hcC5jYW1lcmFQb3NpdGlvbix2b2lkIDAhPT1jJiZjLnNldFZhbHVlKGVlLFEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGUubWF0cml4V29ybGQpKTsoci5pc01lc2hQaG9uZ01hdGVyaWFsfHxyLmlzTWVzaFRvb25NYXRlcmlhbHx8ci5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fHIuaXNNZXNoQmFzaWNNYXRlcmlhbHx8ci5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxyLmlzU2hhZGVyTWF0ZXJpYWwpJiZhLnNldFZhbHVlKGVlLFwiaXNPcnRob2dyYXBoaWNcIiwhMD09PWUuaXNPcnRob2dyYXBoaWNDYW1lcmEpOyhyLmlzTWVzaFBob25nTWF0ZXJpYWx8fHIuaXNNZXNoVG9vbk1hdGVyaWFsfHxyLmlzTWVzaExhbWJlcnRNYXRlcmlhbHx8ci5pc01lc2hCYXNpY01hdGVyaWFsfHxyLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fHIuaXNTaGFkZXJNYXRlcmlhbHx8ci5za2lubmluZykmJmEuc2V0VmFsdWUoZWUsXCJ2aWV3TWF0cml4XCIsZS5tYXRyaXhXb3JsZEludmVyc2UpfWlmKHIuc2tpbm5pbmcmJihhLnNldE9wdGlvbmFsKGVlLG4sXCJiaW5kTWF0cml4XCIpLGEuc2V0T3B0aW9uYWwoZWUsbixcImJpbmRNYXRyaXhJbnZlcnNlXCIpLGU9bi5za2VsZXRvbikpaWYoYz1lLmJvbmVzLHJlLmZsb2F0VmVydGV4VGV4dHVyZXMpe2lmKHZvaWQgMD09PWUuYm9uZVRleHR1cmUpe2M9TWF0aC5zcXJ0KDQqYy5sZW5ndGgpO2M9Vm8uY2VpbFBvd2VyT2ZUd28oYyk7Yz1NYXRoLm1heChjLDQpO3ZhciBwPW5ldyBGbG9hdDMyQXJyYXkoYypjKjQpO3Auc2V0KGUuYm9uZU1hdHJpY2VzKTt2YXIgZj1uZXcgUGUocCxjLGMsMTAyMywxMDE1KTtlLmJvbmVNYXRyaWNlcz1wO2UuYm9uZVRleHR1cmU9ZjtlLmJvbmVUZXh0dXJlU2l6ZT1jfWEuc2V0VmFsdWUoZWUsXCJib25lVGV4dHVyZVwiLGUuYm9uZVRleHR1cmUsYWUpO2Euc2V0VmFsdWUoZWUsXCJib25lVGV4dHVyZVNpemVcIixlLmJvbmVUZXh0dXJlU2l6ZSl9ZWxzZSBhLnNldE9wdGlvbmFsKGVlLGUsXCJib25lTWF0cmljZXNcIik7aWYobHx8cy5yZWNlaXZlU2hhZG93IT09bi5yZWNlaXZlU2hhZG93KXMucmVjZWl2ZVNoYWRvdz1uLnJlY2VpdmVTaGFkb3csYS5zZXRWYWx1ZShlZSxcInJlY2VpdmVTaGFkb3dcIixuLnJlY2VpdmVTaGFkb3cpO2wmJihhLnNldFZhbHVlKGVlLFwidG9uZU1hcHBpbmdFeHBvc3VyZVwiLEMudG9uZU1hcHBpbmdFeHBvc3VyZSksYS5zZXRWYWx1ZShlZSxcInRvbmVNYXBwaW5nV2hpdGVQb2ludFwiLEMudG9uZU1hcHBpbmdXaGl0ZVBvaW50KSxzLm5lZWRzTGlnaHRzJiYobD1oLHUuYW1iaWVudExpZ2h0Q29sb3IubmVlZHNVcGRhdGU9bCx1LmxpZ2h0UHJvYmUubmVlZHNVcGRhdGU9bCx1LmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPWwsdS5kaXJlY3Rpb25hbExpZ2h0U2hhZG93cy5uZWVkc1VwZGF0ZT1sLHUucG9pbnRMaWdodHMubmVlZHNVcGRhdGU9bCx1LnBvaW50TGlnaHRTaGFkb3dzLm5lZWRzVXBkYXRlPWwsdS5zcG90TGlnaHRzLm5lZWRzVXBkYXRlPWwsdS5zcG90TGlnaHRTaGFkb3dzLm5lZWRzVXBkYXRlPWwsdS5yZWN0QXJlYUxpZ2h0cy5uZWVkc1VwZGF0ZT1sLHUuaGVtaXNwaGVyZUxpZ2h0cy5uZWVkc1VwZGF0ZT1sKSxpJiZyLmZvZyYmaGUucmVmcmVzaEZvZ1VuaWZvcm1zKHUsaSksaGUucmVmcmVzaE1hdGVyaWFsVW5pZm9ybXModSxyLG8sRywkKSx2b2lkIDAhPT11Lmx0Y18xJiYodS5sdGNfMS52YWx1ZT1Ocy5MVENfMSksdm9pZCAwIT09dS5sdGNfMiYmKHUubHRjXzIudmFsdWU9TnMuTFRDXzIpLHJ0LnVwbG9hZChlZSxzLnVuaWZvcm1zTGlzdCx1LGFlKSk7ci5pc1NoYWRlck1hdGVyaWFsJiYhMD09PXIudW5pZm9ybXNOZWVkVXBkYXRlJiYocnQudXBsb2FkKGVlLHMudW5pZm9ybXNMaXN0LHUsYWUpLHIudW5pZm9ybXNOZWVkVXBkYXRlPSExKTtyLmlzU3ByaXRlTWF0ZXJpYWwmJmEuc2V0VmFsdWUoZWUsXCJjZW50ZXJcIixuLmNlbnRlcik7YS5zZXRWYWx1ZShlZSxcIm1vZGVsVmlld01hdHJpeFwiLG4ubW9kZWxWaWV3TWF0cml4KTthLnNldFZhbHVlKGVlLFwibm9ybWFsTWF0cml4XCIsbi5ub3JtYWxNYXRyaXgpO2Euc2V0VmFsdWUoZWUsXCJtb2RlbE1hdHJpeFwiLG4ubWF0cml4V29ybGQpO3JldHVybiB0fWU9ZXx8e307dmFyIGk9dm9pZCAwIT09ZS5jYW52YXM/ZS5jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpLG89dm9pZCAwIT09ZS5jb250ZXh0P2UuY29udGV4dDpudWxsLHU9dm9pZCAwIT09ZS5hbHBoYT9lLmFscGhhOiExLHA9dm9pZCAwIT09ZS5kZXB0aD9lLmRlcHRoOiEwLGY9dm9pZCAwIT09ZS5zdGVuY2lsP2Uuc3RlbmNpbDohMCxtPXZvaWQgMCE9PWUuYW50aWFsaWFzP2UuYW50aWFsaWFzOiExLGc9dm9pZCAwIT09ZS5wcmVtdWx0aXBsaWVkQWxwaGE/ZS5wcmVtdWx0aXBsaWVkQWxwaGE6ITAsXz12b2lkIDAhPT1lLnByZXNlcnZlRHJhd2luZ0J1ZmZlcj9lLnByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMSx5PXZvaWQgMCE9PWUucG93ZXJQcmVmZXJlbmNlP2UucG93ZXJQcmVmZXJlbmNlOlwiZGVmYXVsdFwiLGI9dm9pZCAwIT09ZS5mYWlsSWZNYWpvclBlcmZvcm1hbmNlQ2F2ZWF0P2UuZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDohMSx4PW51bGwsTT1udWxsO3RoaXMuZG9tRWxlbWVudD1pO3RoaXMuZGVidWc9e2NoZWNrU2hhZGVyRXJyb3JzOiEwfTt0aGlzLnNvcnRPYmplY3RzPXRoaXMuYXV0b0NsZWFyU3RlbmNpbD10aGlzLmF1dG9DbGVhckRlcHRoPXRoaXMuYXV0b0NsZWFyQ29sb3I9dGhpcy5hdXRvQ2xlYXI9ITA7dGhpcy5jbGlwcGluZ1BsYW5lcz1bXTt0aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkPSExO3RoaXMuZ2FtbWFGYWN0b3I9Mjt0aGlzLm91dHB1dEVuY29kaW5nPTNlMzt0aGlzLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzPSExO3RoaXMudG9uZU1hcHBpbmc9MDt0aGlzLnRvbmVNYXBwaW5nV2hpdGVQb2ludD10aGlzLnRvbmVNYXBwaW5nRXhwb3N1cmU9MTt0aGlzLm1heE1vcnBoVGFyZ2V0cz04O3RoaXMubWF4TW9ycGhOb3JtYWxzPTQ7dmFyIEM9dGhpcyxUPSExLEU9bnVsbCxPPTAsUD0wLEE9bnVsbCxqPW51bGwsUj0tMTt2YXIgaz13PW51bGw7dmFyIEw9ITE7dmFyIE49bnVsbCxJPW51bGwsRD1uZXcgQ2UsQj1uZXcgQ2UsRj1udWxsLHo9aS53aWR0aCwkPWkuaGVpZ2h0LEc9MSxWPW51bGwsSD1udWxsLFU9bmV3IENlKDAsMCx6LCQpLHE9bmV3IENlKDAsMCx6LCQpLFc9ITEsWD1uZXcgQWUsWT1uZXcgSWUsSz0hMSxaPSExLEo9bmV3IEVlLFE9bmV3IFRlO3RyeXt1PXthbHBoYTp1LGRlcHRoOnAsc3RlbmNpbDpmLGFudGlhbGlhczptLHByZW11bHRpcGxpZWRBbHBoYTpnLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjpfLHBvd2VyUHJlZmVyZW5jZTp5LGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6Yn07aS5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLHIsITEpO2kuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dHJlc3RvcmVkXCIsbiwhMSk7dmFyIGVlPW98fGkuZ2V0Q29udGV4dChcIndlYmdsXCIsdSl8fGkuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHUpO2lmKG51bGw9PT1lZSl7aWYobnVsbCE9PWkuZ2V0Q29udGV4dChcIndlYmdsXCIpKXRocm93IEVycm9yKFwiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dCB3aXRoIHlvdXIgc2VsZWN0ZWQgYXR0cmlidXRlcy5cIik7dGhyb3cgRXJyb3IoXCJFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0LlwiKX12b2lkIDA9PT1lZS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQmJihlZS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm57cmFuZ2VNaW46MSxyYW5nZU1heDoxLHByZWNpc2lvbjoxfX0pfWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIitlLm1lc3NhZ2UpLGV9dmFyIHRlLHJlLG5lLGllLG9lLGFlLHNlLHVlLGNlLGxlLGhlLHBlLGZlLGRlLHZlLG1lLGdlLF9lO3QoKTt2YXIgeWU9bmV3IFZ0KEMsZWUpO3RoaXMueHI9eWU7dmFyIGJlPW5ldyBJdChDLGNlLHJlLm1heFRleHR1cmVTaXplKTt0aGlzLnNoYWRvd01hcD1iZTt0aGlzLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZWV9O3RoaXMuZ2V0Q29udGV4dEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gZWUuZ2V0Q29udGV4dEF0dHJpYnV0ZXMoKX07dGhpcy5mb3JjZUNvbnRleHRMb3NzPWZ1bmN0aW9uKCl7dmFyIGU9dGUuZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO2UmJmUubG9zZUNvbnRleHQoKX07dGhpcy5mb3JjZUNvbnRleHRSZXN0b3JlPWZ1bmN0aW9uKCl7dmFyIGU9dGUuZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpO2UmJmUucmVzdG9yZUNvbnRleHQoKX07dGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIEd9O3RoaXMuc2V0UGl4ZWxSYXRpbz1mdW5jdGlvbihlKXt2b2lkIDAhPT1lJiYoRz1lLHRoaXMuc2V0U2l6ZSh6LCQsITEpKX07dGhpcy5nZXRTaXplPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuZ2V0c2l6ZSgpIG5vdyByZXF1aXJlcyBhIFZlY3RvcjIgYXMgYW4gYXJndW1lbnRcIiksZT1uZXcgTWUpO3JldHVybiBlLnNldCh6LCQpfTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oZSx0LHIpe3llLmlzUHJlc2VudGluZz9jb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDYW4ndCBjaGFuZ2Ugc2l6ZSB3aGlsZSBWUiBkZXZpY2UgaXMgcHJlc2VudGluZy5cIik6KHo9ZSwkPXQsaS53aWR0aD1NYXRoLmZsb29yKGUqRyksaS5oZWlnaHQ9TWF0aC5mbG9vcih0KkcpLCExIT09ciYmKGkuc3R5bGUud2lkdGg9ZStcInB4XCIsaS5zdHlsZS5oZWlnaHQ9dCtcInB4XCIpLHRoaXMuc2V0Vmlld3BvcnQoMCwwLGUsdCkpfTt0aGlzLmdldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuZ2V0ZHJhd2luZ0J1ZmZlclNpemUoKSBub3cgcmVxdWlyZXMgYSBWZWN0b3IyIGFzIGFuIGFyZ3VtZW50XCIpLGU9bmV3IE1lKTtyZXR1cm4gZS5zZXQoeipHLCQqRykuZmxvb3IoKX07dGhpcy5zZXREcmF3aW5nQnVmZmVyU2l6ZT1mdW5jdGlvbihlLHQscil7ej1lOyQ9dDtHPXI7aS53aWR0aD1NYXRoLmZsb29yKGUqcik7aS5oZWlnaHQ9TWF0aC5mbG9vcih0KnIpO3RoaXMuc2V0Vmlld3BvcnQoMCwwLGUsdCl9O3RoaXMuZ2V0Q3VycmVudFZpZXdwb3J0PWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuZ2V0Q3VycmVudFZpZXdwb3J0KCkgbm93IHJlcXVpcmVzIGEgVmVjdG9yNCBhcyBhbiBhcmd1bWVudFwiKSxlPW5ldyBDZSk7cmV0dXJuIGUuY29weShEKX07dGhpcy5nZXRWaWV3cG9ydD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb3B5KFUpfTt0aGlzLnNldFZpZXdwb3J0PWZ1bmN0aW9uKGUsdCxyLG4pe2UuaXNWZWN0b3I0P1Uuc2V0KGUueCxlLnksZS56LGUudyk6VS5zZXQoZSx0LHIsbik7bmUudmlld3BvcnQoRC5jb3B5KFUpLm11bHRpcGx5U2NhbGFyKEcpLmZsb29yKCkpfTt0aGlzLmdldFNjaXNzb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29weShxKX07dGhpcy5zZXRTY2lzc29yPWZ1bmN0aW9uKGUsdCxyLG4pe2UuaXNWZWN0b3I0P3Euc2V0KGUueCxlLnksZS56LGUudyk6cS5zZXQoZSx0LHIsbik7bmUuc2Npc3NvcihCLmNvcHkocSkubXVsdGlwbHlTY2FsYXIoRykuZmxvb3IoKSl9O3RoaXMuZ2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gV307dGhpcy5zZXRTY2lzc29yVGVzdD1mdW5jdGlvbihlKXtuZS5zZXRTY2lzc29yVGVzdChXPWUpfTt0aGlzLnNldE9wYXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7Vj1lfTt0aGlzLnNldFRyYW5zcGFyZW50U29ydD1mdW5jdGlvbihlKXtIPWV9O3RoaXMuZ2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe3JldHVybiBkZS5nZXRDbGVhckNvbG9yKCl9O3RoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe2RlLnNldENsZWFyQ29sb3IuYXBwbHkoZGUsYXJndW1lbnRzKX07dGhpcy5nZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7cmV0dXJuIGRlLmdldENsZWFyQWxwaGEoKX07dGhpcy5zZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7ZGUuc2V0Q2xlYXJBbHBoYS5hcHBseShkZSxhcmd1bWVudHMpfTt0aGlzLmNsZWFyPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj0wO2lmKHZvaWQgMD09PWV8fGUpbnw9MTYzODQ7aWYodm9pZCAwPT09dHx8dClufD0yNTY7aWYodm9pZCAwPT09cnx8cilufD0xMDI0O2VlLmNsZWFyKG4pfTt0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCEwLCExLCExKX07dGhpcy5jbGVhckRlcHRoPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMSwhMCwhMSl9O3RoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMSwhMSwhMCl9O3RoaXMuZGlzcG9zZT1mdW5jdGlvbigpe2kucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixyLCExKTtpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLG4sITEpO3BlLmRpc3Bvc2UoKTtmZS5kaXNwb3NlKCk7b2UuZGlzcG9zZSgpO2NlLmRpc3Bvc2UoKTt5ZS5kaXNwb3NlKCk7U2Uuc3RvcCgpfTt0aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbihlLHQpe25lLmluaXRBdHRyaWJ1dGVzKCk7dmFyIHI9b2UuZ2V0KGUpO2UuaGFzUG9zaXRpb25zJiYhci5wb3NpdGlvbiYmKHIucG9zaXRpb249ZWUuY3JlYXRlQnVmZmVyKCkpO2UuaGFzTm9ybWFscyYmIXIubm9ybWFsJiYoci5ub3JtYWw9ZWUuY3JlYXRlQnVmZmVyKCkpO2UuaGFzVXZzJiYhci51diYmKHIudXY9ZWUuY3JlYXRlQnVmZmVyKCkpO2UuaGFzQ29sb3JzJiYhci5jb2xvciYmKHIuY29sb3I9ZWUuY3JlYXRlQnVmZmVyKCkpO3Q9dC5nZXRBdHRyaWJ1dGVzKCk7ZS5oYXNQb3NpdGlvbnMmJihlZS5iaW5kQnVmZmVyKDM0OTYyLHIucG9zaXRpb24pLGVlLmJ1ZmZlckRhdGEoMzQ5NjIsZS5wb3NpdGlvbkFycmF5LDM1MDQ4KSxuZS5lbmFibGVBdHRyaWJ1dGUodC5wb3NpdGlvbiksZWUudmVydGV4QXR0cmliUG9pbnRlcih0LnBvc2l0aW9uLDMsNTEyNiwhMSwwLDApKTtlLmhhc05vcm1hbHMmJihlZS5iaW5kQnVmZmVyKDM0OTYyLHIubm9ybWFsKSxlZS5idWZmZXJEYXRhKDM0OTYyLGUubm9ybWFsQXJyYXksMzUwNDgpLG5lLmVuYWJsZUF0dHJpYnV0ZSh0Lm5vcm1hbCksZWUudmVydGV4QXR0cmliUG9pbnRlcih0Lm5vcm1hbCwzLDUxMjYsITEsMCwwKSk7ZS5oYXNVdnMmJihlZS5iaW5kQnVmZmVyKDM0OTYyLHIudXYpLGVlLmJ1ZmZlckRhdGEoMzQ5NjIsZS51dkFycmF5LDM1MDQ4KSxuZS5lbmFibGVBdHRyaWJ1dGUodC51diksZWUudmVydGV4QXR0cmliUG9pbnRlcih0LnV2LDIsNTEyNiwhMSwwLDApKTtlLmhhc0NvbG9ycyYmKGVlLmJpbmRCdWZmZXIoMzQ5NjIsci5jb2xvciksZWUuYnVmZmVyRGF0YSgzNDk2MixlLmNvbG9yQXJyYXksMzUwNDgpLG5lLmVuYWJsZUF0dHJpYnV0ZSh0LmNvbG9yKSxlZS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHQuY29sb3IsMyw1MTI2LCExLDAsMCkpO25lLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7ZWUuZHJhd0FycmF5cyg0LDAsZS5jb3VudCk7ZS5jb3VudD0wfTt2YXIgeGU9bmV3IE9lO3RoaXMucmVuZGVyQnVmZmVyRGlyZWN0PWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtudWxsPT09dCYmKHQ9eGUpO3ZhciBhPWkuaXNNZXNoJiYwPmkubWF0cml4V29ybGQuZGV0ZXJtaW5hbnQoKSxzPVMoZSx0LG4saSk7bmUuc2V0TWF0ZXJpYWwobixhKTt2YXIgdT0hMTtpZih3IT09ci5pZHx8ayE9PXMuaWR8fEwhPT0oITA9PT1uLndpcmVmcmFtZSkpdz1yLmlkLGs9cy5pZCxMPSEwPT09bi53aXJlZnJhbWUsdT0hMDtpZihuLm1vcnBoVGFyZ2V0c3x8bi5tb3JwaE5vcm1hbHMpdmUudXBkYXRlKGkscixuLHMpLHU9ITA7ITA9PT1pLmlzSW5zdGFuY2VkTWVzaCYmKHU9ITApO2U9ci5pbmRleDt0PXIuYXR0cmlidXRlcy5wb3NpdGlvbjtpZihudWxsPT09ZSl7aWYodm9pZCAwPT09dHx8MD09PXQuY291bnQpcmV0dXJufWVsc2UgaWYoMD09PWUuY291bnQpcmV0dXJuO3ZhciBjPTE7ITA9PT1uLndpcmVmcmFtZSYmKGU9dWUuZ2V0V2lyZWZyYW1lQXR0cmlidXRlKHIpLGM9Mik7YT1tZTtpZihudWxsIT09ZSl7dmFyIGw9c2UuZ2V0KGUpO2E9Z2U7YS5zZXRJbmRleChsKX1pZih1KXtpZighMSE9PXJlLmlzV2ViR0wyfHwhaS5pc0luc3RhbmNlZE1lc2gmJiFyLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnl8fG51bGwhPT10ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpKXtuZS5pbml0QXR0cmlidXRlcygpO3U9ci5hdHRyaWJ1dGVzO3M9cy5nZXRBdHRyaWJ1dGVzKCk7dmFyIGg9bi5kZWZhdWx0QXR0cmlidXRlVmFsdWVzO2Zvcih4IGluIHMpe3ZhciBwPXNbeF07aWYoMDw9cCl7dmFyIGY9dVt4XTtpZih2b2lkIDAhPT1mKXt2YXIgZD1mLm5vcm1hbGl6ZWQsdj1mLml0ZW1TaXplLG09c2UuZ2V0KGYpO2lmKHZvaWQgMCE9PW0pe3ZhciBnPW0uYnVmZmVyLF89bS50eXBlO209bS5ieXRlc1BlckVsZW1lbnQ7aWYoZi5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXt2YXIgeT1mLmRhdGEsYj15LnN0cmlkZTtmPWYub2Zmc2V0O3kmJnkuaXNJbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcj8obmUuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihwLHkubWVzaFBlckF0dHJpYnV0ZSksdm9pZCAwPT09ci5fbWF4SW5zdGFuY2VDb3VudCYmKHIuX21heEluc3RhbmNlQ291bnQ9eS5tZXNoUGVyQXR0cmlidXRlKnkuY291bnQpKTpuZS5lbmFibGVBdHRyaWJ1dGUocCk7ZWUuYmluZEJ1ZmZlcigzNDk2MixnKTtuZS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHAsdixfLGQsYiptLGYqbSl9ZWxzZSBmLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPyhuZS5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHAsZi5tZXNoUGVyQXR0cmlidXRlKSx2b2lkIDA9PT1yLl9tYXhJbnN0YW5jZUNvdW50JiYoci5fbWF4SW5zdGFuY2VDb3VudD1mLm1lc2hQZXJBdHRyaWJ1dGUqZi5jb3VudCkpOm5lLmVuYWJsZUF0dHJpYnV0ZShwKSxlZS5iaW5kQnVmZmVyKDM0OTYyLGcpLG5lLnZlcnRleEF0dHJpYlBvaW50ZXIocCx2LF8sZCwwLDApfX1lbHNlIGlmKFwiaW5zdGFuY2VNYXRyaXhcIj09PXgpbT1zZS5nZXQoaS5pbnN0YW5jZU1hdHJpeCksdm9pZCAwIT09bSYmKGc9bS5idWZmZXIsXz1tLnR5cGUsbmUuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihwKzAsMSksbmUuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihwKzEsMSksbmUuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihwKzIsMSksbmUuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihwKzMsMSksZWUuYmluZEJ1ZmZlcigzNDk2MixnKSxlZS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHArMCw0LF8sITEsNjQsMCksZWUudmVydGV4QXR0cmliUG9pbnRlcihwKzEsNCxfLCExLDY0LDE2KSxlZS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHArMiw0LF8sITEsNjQsMzIpLGVlLnZlcnRleEF0dHJpYlBvaW50ZXIocCszLDQsXywhMSw2NCw0OCkpO2Vsc2UgaWYodm9pZCAwIT09aCYmKGQ9aFt4XSx2b2lkIDAhPT1kKSlzd2l0Y2goZC5sZW5ndGgpe2Nhc2UgMjplZS52ZXJ0ZXhBdHRyaWIyZnYocCxkKTticmVhaztjYXNlIDM6ZWUudmVydGV4QXR0cmliM2Z2KHAsZCk7YnJlYWs7Y2FzZSA0OmVlLnZlcnRleEF0dHJpYjRmdihwLGQpO2JyZWFrO2RlZmF1bHQ6ZWUudmVydGV4QXR0cmliMWZ2KHAsZCl9fX1uZS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpfW51bGwhPT1lJiZlZS5iaW5kQnVmZmVyKDM0OTYzLGwuYnVmZmVyKX12YXIgeD1yLmRyYXdSYW5nZS5zdGFydCpjO3U9bnVsbCE9PW8/by5zdGFydCpjOjA7bD1NYXRoLm1heCh4LHUpO289TWF0aC5tYXgoMCxNYXRoLm1pbihudWxsIT09ZT9lLmNvdW50OnQuY291bnQseCtyLmRyYXdSYW5nZS5jb3VudCpjLHUrKG51bGwhPT1vP28uY291bnQqYzpJbmZpbml0eSkpLTEtbCsxKTswIT09byYmKGkuaXNNZXNoPyEwPT09bi53aXJlZnJhbWU/KG5lLnNldExpbmVXaWR0aChuLndpcmVmcmFtZUxpbmV3aWR0aCoobnVsbD09PUE/RzoxKSksYS5zZXRNb2RlKDEpKTphLnNldE1vZGUoNCk6aS5pc0xpbmU/KG49bi5saW5ld2lkdGgsdm9pZCAwPT09biYmKG49MSksbmUuc2V0TGluZVdpZHRoKG4qKG51bGw9PT1BP0c6MSkpLGkuaXNMaW5lU2VnbWVudHM/YS5zZXRNb2RlKDEpOmkuaXNMaW5lTG9vcD9hLnNldE1vZGUoMik6YS5zZXRNb2RlKDMpKTppLmlzUG9pbnRzP2Euc2V0TW9kZSgwKTppLmlzU3ByaXRlJiZhLnNldE1vZGUoNCksaS5pc0luc3RhbmNlZE1lc2g/YS5yZW5kZXJJbnN0YW5jZXMocixsLG8saS5jb3VudCk6ci5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5P2EucmVuZGVySW5zdGFuY2VzKHIsbCxvLE1hdGgubWluKHIuaW5zdGFuY2VDb3VudCxyLl9tYXhJbnN0YW5jZUNvdW50KSk6YS5yZW5kZXIobCxvKSl9O3RoaXMuY29tcGlsZT1mdW5jdGlvbihpLGUpe009ZmUuZ2V0KGksZSk7TS5pbml0KCk7aS50cmF2ZXJzZShmdW5jdGlvbihlKXtlLmlzTGlnaHQmJihNLnB1c2hMaWdodChlKSxlLmNhc3RTaGFkb3cmJk0ucHVzaFNoYWRvdyhlKSl9KTtNLnNldHVwTGlnaHRzKGUpO3ZhciBvPXt9O2kudHJhdmVyc2UoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tYXRlcmlhbDtpZih0KWlmKEFycmF5LmlzQXJyYXkodCkpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07ITE9PT1uLnV1aWQgaW4gbyYmKHYobixpLGUpLG9bbi51dWlkXT0hMCl9ZWxzZSExPT09dC51dWlkIGluIG8mJih2KHQsaSxlKSxvW3QudXVpZF09ITApfSl9O3ZhciB3ZT1udWxsLFNlPW5ldyBqZTtTZS5zZXRBbmltYXRpb25Mb29wKGZ1bmN0aW9uKGUpe3llLmlzUHJlc2VudGluZ3x8d2UmJndlKGUpfSk7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJlNlLnNldENvbnRleHQod2luZG93KTt0aGlzLnNldEFuaW1hdGlvbkxvb3A9ZnVuY3Rpb24oZSl7d2U9ZTt5ZS5zZXRBbmltYXRpb25Mb29wKGUpO1NlLnN0YXJ0KCl9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKHZvaWQgMCE9PXIpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyKCk6IHRoZSByZW5kZXJUYXJnZXQgYXJndW1lbnQgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5zZXRSZW5kZXJUYXJnZXQoKSBpbnN0ZWFkLlwiKTt2YXIgaT1yfWlmKHZvaWQgMCE9PW4pe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVuZGVyKCk6IHRoZSBmb3JjZUNsZWFyIGFyZ3VtZW50IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuY2xlYXIoKSBpbnN0ZWFkLlwiKTt2YXIgbz1ufXQmJnQuaXNDYW1lcmE/VHx8KGs9dz1udWxsLEw9ITEsUj0tMSxOPW51bGwsITA9PT1lLmF1dG9VcGRhdGUmJmUudXBkYXRlTWF0cml4V29ybGQoKSxudWxsPT09dC5wYXJlbnQmJnQudXBkYXRlTWF0cml4V29ybGQoKSx5ZS5lbmFibGVkJiZ5ZS5pc1ByZXNlbnRpbmcmJih0PXllLmdldENhbWVyYSh0KSksZS5vbkJlZm9yZVJlbmRlcihDLGUsdCxpfHxBKSxNPWZlLmdldChlLHQpLE0uaW5pdCgpLEoubXVsdGlwbHlNYXRyaWNlcyh0LnByb2plY3Rpb25NYXRyaXgsdC5tYXRyaXhXb3JsZEludmVyc2UpLFguc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoSiksWj10aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkLEs9WS5pbml0KHRoaXMuY2xpcHBpbmdQbGFuZXMsWix0KSx4PXBlLmdldChlLHQpLHguaW5pdCgpLGgoZSx0LDAsQy5zb3J0T2JqZWN0cykseC5maW5pc2goKSwhMD09PUMuc29ydE9iamVjdHMmJnguc29ydChWLEgpLEsmJlkuYmVnaW5TaGFkb3dzKCksYmUucmVuZGVyKE0uc3RhdGUuc2hhZG93c0FycmF5LGUsdCksTS5zZXR1cExpZ2h0cyh0KSxLJiZZLmVuZFNoYWRvd3MoKSx0aGlzLmluZm8uYXV0b1Jlc2V0JiZ0aGlzLmluZm8ucmVzZXQoKSx2b2lkIDAhPT1pJiZ0aGlzLnNldFJlbmRlclRhcmdldChpKSxkZS5yZW5kZXIoeCxlLHQsbykscj14Lm9wYXF1ZSxuPXgudHJhbnNwYXJlbnQsZS5vdmVycmlkZU1hdGVyaWFsPyhpPWUub3ZlcnJpZGVNYXRlcmlhbCxyLmxlbmd0aCYmYShyLGUsdCxpKSxuLmxlbmd0aCYmYShuLGUsdCxpKSk6KHIubGVuZ3RoJiZhKHIsZSx0KSxuLmxlbmd0aCYmYShuLGUsdCkpLGUub25BZnRlclJlbmRlcihDLGUsdCksbnVsbCE9PUEmJihhZS51cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXAoQSksYWUudXBkYXRlTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQoQSkpLG5lLmJ1ZmZlcnMuZGVwdGguc2V0VGVzdCghMCksbmUuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCEwKSxuZS5idWZmZXJzLmNvbG9yLnNldE1hc2soITApLG5lLnNldFBvbHlnb25PZmZzZXQoITEpLE09eD1udWxsKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLlwiKX07dGhpcy5zZXRGcmFtZWJ1ZmZlcj1mdW5jdGlvbihlKXtFIT09ZSYmbnVsbD09PUEmJmVlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxlKTtFPWV9O3RoaXMuZ2V0QWN0aXZlQ3ViZUZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gT307dGhpcy5nZXRBY3RpdmVNaXBtYXBMZXZlbD1mdW5jdGlvbigpe3JldHVybiBQfTt0aGlzLmdldFJlbmRlclRhcmdldD1mdW5jdGlvbigpe3JldHVybiBBfTt0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbihlLHQscil7QT1lO089dDtQPXI7ZSYmdm9pZCAwPT09b2UuZ2V0KGUpLl9fd2ViZ2xGcmFtZWJ1ZmZlciYmYWUuc2V0dXBSZW5kZXJUYXJnZXQoZSk7dmFyIG49RSxpPSExO2U/KG49b2UuZ2V0KGUpLl9fd2ViZ2xGcmFtZWJ1ZmZlcixlLmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0PyhuPW5bdHx8MF0saT0hMCk6bj1lLmlzV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldD9vZS5nZXQoZSkuX193ZWJnbE11bHRpc2FtcGxlZEZyYW1lYnVmZmVyOm4sRC5jb3B5KGUudmlld3BvcnQpLEIuY29weShlLnNjaXNzb3IpLEY9ZS5zY2lzc29yVGVzdCk6KEQuY29weShVKS5tdWx0aXBseVNjYWxhcihHKS5mbG9vcigpLEIuY29weShxKS5tdWx0aXBseVNjYWxhcihHKS5mbG9vcigpLEY9Vyk7aiE9PW4mJihlZS5iaW5kRnJhbWVidWZmZXIoMzYxNjAsbiksaj1uKTtuZS52aWV3cG9ydChEKTtuZS5zY2lzc29yKEIpO25lLnNldFNjaXNzb3JUZXN0KEYpO2kmJihlPW9lLmdldChlLnRleHR1cmUpLGVlLmZyYW1lYnVmZmVyVGV4dHVyZTJEKDM2MTYwLDM2MDY0LDM0MDY5Kyh0fHwwKSxlLl9fd2ViZ2xUZXh0dXJlLHJ8fDApKX07dGhpcy5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzPWZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe2lmKGUmJmUuaXNXZWJHTFJlbmRlclRhcmdldCl7dmFyIHM9b2UuZ2V0KGUpLl9fd2ViZ2xGcmFtZWJ1ZmZlcjtlLmlzV2ViR0xDdWJlUmVuZGVyVGFyZ2V0JiZ2b2lkIDAhPT1hJiYocz1zW2FdKTtpZihzKXthPSExO3MhPT1qJiYoZWUuYmluZEZyYW1lYnVmZmVyKDM2MTYwLHMpLGE9ITApO3RyeXt2YXIgdT1lLnRleHR1cmUsYz11LmZvcm1hdCxsPXUudHlwZTsxMDIzIT09YyYmX2UuY29udmVydChjKSE9PWVlLmdldFBhcmFtZXRlcigzNTczOSk/Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBpbiBSR0JBIG9yIGltcGxlbWVudGF0aW9uIGRlZmluZWQgZm9ybWF0LlwiKToxMDA5PT09bHx8X2UuY29udmVydChsKT09PWVlLmdldFBhcmFtZXRlcigzNTczOCl8fDEwMTU9PT1sJiYocmUuaXNXZWJHTDJ8fHRlLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpfHx0ZS5nZXQoXCJXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXRcIikpfHwxMDE2PT09bCYmKHJlLmlzV2ViR0wyP3RlLmdldChcIkVYVF9jb2xvcl9idWZmZXJfZmxvYXRcIik6dGUuZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0XCIpKT8zNjA1Mz09PWVlLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoMzYxNjApPzA8PXQmJnQ8PWUud2lkdGgtbiYmMDw9ciYmcjw9ZS5oZWlnaHQtaSYmZWUucmVhZFBpeGVscyh0LHIsbixpLF9lLmNvbnZlcnQoYyksX2UuY29udmVydChsKSxvKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZWFkUGl4ZWxzIGZyb20gcmVuZGVyVGFyZ2V0IGZhaWxlZC4gRnJhbWVidWZmZXIgbm90IGNvbXBsZXRlLlwiKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFVuc2lnbmVkQnl0ZVR5cGUgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCB0eXBlLlwiKX1maW5hbGx5e2EmJmVlLmJpbmRGcmFtZWJ1ZmZlcigzNjE2MCxqKX19fWVsc2UgY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5cIil9O3RoaXMuY29weUZyYW1lYnVmZmVyVG9UZXh0dXJlPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0wKTt2YXIgbj1NYXRoLnBvdygyLC1yKSxpPU1hdGguZmxvb3IodC5pbWFnZS53aWR0aCpuKTtuPU1hdGguZmxvb3IodC5pbWFnZS5oZWlnaHQqbik7dmFyIG89X2UuY29udmVydCh0LmZvcm1hdCk7YWUuc2V0VGV4dHVyZTJEKHQsMCk7ZWUuY29weVRleEltYWdlMkQoMzU1MyxyLG8sZS54LGUueSxpLG4sMCk7bmUudW5iaW5kVGV4dHVyZSgpfTt0aGlzLmNvcHlUZXh0dXJlVG9UZXh0dXJlPWZ1bmN0aW9uKGUsdCxyLG4pe3ZvaWQgMD09PW4mJihuPTApO3ZhciBpPXQuaW1hZ2Uud2lkdGgsbz10LmltYWdlLmhlaWdodCxhPV9lLmNvbnZlcnQoci5mb3JtYXQpLHM9X2UuY29udmVydChyLnR5cGUpO2FlLnNldFRleHR1cmUyRChyLDApO3QuaXNEYXRhVGV4dHVyZT9lZS50ZXhTdWJJbWFnZTJEKDM1NTMsbixlLngsZS55LGksbyxhLHMsdC5pbWFnZS5kYXRhKTp0LmlzQ29tcHJlc3NlZFRleHR1cmU/ZWUuY29tcHJlc3NlZFRleFN1YkltYWdlMkQoMzU1MyxuLGUueCxlLnksdC5taXBtYXBzWzBdLndpZHRoLHQubWlwbWFwc1swXS5oZWlnaHQsYSx0Lm1pcG1hcHNbMF0uZGF0YSk6ZWUudGV4U3ViSW1hZ2UyRCgzNTUzLG4sZS54LGUueSxhLHMsdC5pbWFnZSk7MD09PW4mJnIuZ2VuZXJhdGVNaXBtYXBzJiZlZS5nZW5lcmF0ZU1pcG1hcCgzNTUzKTtuZS51bmJpbmRUZXh0dXJlKCl9O3RoaXMuaW5pdFRleHR1cmU9ZnVuY3Rpb24oZSl7YWUuc2V0VGV4dHVyZTJEKGUsMCk7bmUudW5iaW5kVGV4dHVyZSgpfTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIF9fVEhSRUVfREVWVE9PTFNfXyYmX19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwib2JzZXJ2ZVwiLHtkZXRhaWw6dGhpc30pKX1mdW5jdGlvbiBxdChlLHQpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IHYoZSk7dGhpcy5kZW5zaXR5PXZvaWQgMCE9PXQ/dDoyNWUtNX1mdW5jdGlvbiBXdChlLHQscil7dGhpcy5uYW1lPVwiXCI7dGhpcy5jb2xvcj1uZXcgdihlKTt0aGlzLm5lYXI9dm9pZCAwIT09dD90OjE7dGhpcy5mYXI9dm9pZCAwIT09cj9yOjFlM31mdW5jdGlvbiBYdChlLHQpe3RoaXMuYXJyYXk9ZTt0aGlzLnN0cmlkZT10O3RoaXMuY291bnQ9dm9pZCAwIT09ZT9lLmxlbmd0aC90OjA7dGhpcy51c2FnZT0zNTA0NDt0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX07dGhpcy52ZXJzaW9uPTB9ZnVuY3Rpb24gWXQoZSx0LHIsbil7dGhpcy5uYW1lPVwiXCI7dGhpcy5kYXRhPWU7dGhpcy5pdGVtU2l6ZT10O3RoaXMub2Zmc2V0PXI7dGhpcy5ub3JtYWxpemVkPSEwPT09bn1mdW5jdGlvbiBLdChlKXt5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3ByaXRlTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyB2KDE2Nzc3MjE1KTt0aGlzLmFscGhhTWFwPXRoaXMubWFwPW51bGw7dGhpcy5yb3RhdGlvbj0wO3RoaXMudHJhbnNwYXJlbnQ9dGhpcy5zaXplQXR0ZW51YXRpb249ITA7dGhpcy5zZXRWYWx1ZXMoZSl9ZnVuY3Rpb24gWnQoZSl7Zi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwcml0ZVwiO2lmKHZvaWQgMD09PWV1KXtldT1uZXcgTjt2YXIgdD1uZXcgRmxvYXQzMkFycmF5KFstLjUsLS41LDAsMCwwLC41LC0uNSwwLDEsMCwuNSwuNSwwLDEsMSwtLjUsLjUsMCwwLDFdKTt0PW5ldyBYdCh0LDUpO2V1LnNldEluZGV4KFswLDEsMiwwLDIsM10pO2V1LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFl0KHQsMywwLCExKSk7ZXUuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgWXQodCwyLDMsITEpKX10aGlzLmdlb21ldHJ5PWV1O3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09ZT9lOm5ldyBLdDt0aGlzLmNlbnRlcj1uZXcgTWUoLjUsLjUpfWZ1bmN0aW9uIEp0KGUsdCxyLG4saSxvKXtpdS5zdWJWZWN0b3JzKGUscikuYWRkU2NhbGFyKC41KS5tdWx0aXBseShuKTt2b2lkIDAhPT1pPyhvdS54PW8qaXUueC1pKml1Lnksb3UueT1pKml1LngrbyppdS55KTpvdS5jb3B5KGl1KTtlLmNvcHkodCk7ZS54Kz1vdS54O2UueSs9b3UueTtlLmFwcGx5TWF0cml4NChhdSl9ZnVuY3Rpb24gUXQoKXtmLmNhbGwodGhpcyk7dGhpcy5fY3VycmVudExldmVsPTA7dGhpcy50eXBlPVwiTE9EXCI7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7bGV2ZWxzOntlbnVtZXJhYmxlOiEwLHZhbHVlOltdfX0pO3RoaXMuYXV0b1VwZGF0ZT0hMH1mdW5jdGlvbiBlcihlLHQpe2UmJmUuaXNHZW9tZXRyeSYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNraW5uZWRNZXNoIG5vIGxvbmdlciBzdXBwb3J0cyBUSFJFRS5HZW9tZXRyeS4gVXNlIFRIUkVFLkJ1ZmZlckdlb21ldHJ5IGluc3RlYWQuXCIpO0kuY2FsbCh0aGlzLGUsdCk7dGhpcy50eXBlPVwiU2tpbm5lZE1lc2hcIjt0aGlzLmJpbmRNb2RlPVwiYXR0YWNoZWRcIjt0aGlzLmJpbmRNYXRyaXg9bmV3IEVlO3RoaXMuYmluZE1hdHJpeEludmVyc2U9bmV3IEVlfWZ1bmN0aW9uIHRyKGUsdCl7ZT1lfHxbXTt0aGlzLmJvbmVzPWUuc2xpY2UoMCk7dGhpcy5ib25lTWF0cmljZXM9bmV3IEZsb2F0MzJBcnJheSgxNip0aGlzLmJvbmVzLmxlbmd0aCk7dGhpcy5mcmFtZT0tMTtpZih2b2lkIDA9PT10KXRoaXMuY2FsY3VsYXRlSW52ZXJzZXMoKTtlbHNlIGlmKHRoaXMuYm9uZXMubGVuZ3RoPT09dC5sZW5ndGgpdGhpcy5ib25lSW52ZXJzZXM9dC5zbGljZSgwKTtlbHNlIGZvcihjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbiBib25lSW52ZXJzZXMgaXMgdGhlIHdyb25nIGxlbmd0aC5cIiksdGhpcy5ib25lSW52ZXJzZXM9W10sZT0wLHQ9dGhpcy5ib25lcy5sZW5ndGg7ZTx0O2UrKyl0aGlzLmJvbmVJbnZlcnNlcy5wdXNoKG5ldyBFZSl9ZnVuY3Rpb24gcnIoKXtmLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQm9uZVwifWZ1bmN0aW9uIG5yKGUsdCxyKXtJLmNhbGwodGhpcyxlLHQpO3RoaXMuaW5zdGFuY2VNYXRyaXg9bmV3IEUobmV3IEZsb2F0MzJBcnJheSgxNipyKSwxNik7dGhpcy5jb3VudD1yO3RoaXMuZnJ1c3R1bUN1bGxlZD0hMX1mdW5jdGlvbiBpcihlKXt5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZUJhc2ljTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyB2KDE2Nzc3MjE1KTt0aGlzLmxpbmV3aWR0aD0xO3RoaXMubGluZWpvaW49dGhpcy5saW5lY2FwPVwicm91bmRcIjt0aGlzLm1vcnBoVGFyZ2V0cz0hMTt0aGlzLnNldFZhbHVlcyhlKX1mdW5jdGlvbiBvcihlLHQscil7MT09PXImJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5MaW5lOiBwYXJhbWV0ZXIgVEhSRUUuTGluZVBpZWNlcyBubyBsb25nZXIgc3VwcG9ydGVkLiBVc2UgVEhSRUUuTGluZVNlZ21lbnRzIGluc3RlYWQuXCIpO2YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1lP2U6bmV3IE47dGhpcy5tYXRlcmlhbD12b2lkIDAhPT10P3Q6bmV3IGlyO3RoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9ZnVuY3Rpb24gYXIoZSx0KXtvci5jYWxsKHRoaXMsZSx0KTt0aGlzLnR5cGU9XCJMaW5lU2VnbWVudHNcIn1mdW5jdGlvbiBzcihlLHQpe29yLmNhbGwodGhpcyxlLHQpO3RoaXMudHlwZT1cIkxpbmVMb29wXCJ9ZnVuY3Rpb24gdXIoZSl7eS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvaW50c01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgdigxNjc3NzIxNSk7dGhpcy5hbHBoYU1hcD10aGlzLm1hcD1udWxsO3RoaXMuc2l6ZT0xO3RoaXMuc2l6ZUF0dGVudWF0aW9uPSEwO3RoaXMubW9ycGhUYXJnZXRzPSExO3RoaXMuc2V0VmFsdWVzKGUpfWZ1bmN0aW9uIGNyKGUsdCl7Zi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvaW50c1wiO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09ZT9lOm5ldyBOO3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09dD90Om5ldyB1cjt0aGlzLnVwZGF0ZU1vcnBoVGFyZ2V0cygpfWZ1bmN0aW9uIGxyKGUsdCxyLG4saSxvLGEpe3ZhciBzPVB1LmRpc3RhbmNlU3FUb1BvaW50KGUpO3M8ciYmKHI9bmV3IFRlLFB1LmNsb3Nlc3RQb2ludFRvUG9pbnQoZSxyKSxyLmFwcGx5TWF0cml4NChuKSxlPWkucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHIpLGU8aS5uZWFyfHxlPmkuZmFyfHxvLnB1c2goe2Rpc3RhbmNlOmUsZGlzdGFuY2VUb1JheTpNYXRoLnNxcnQocykscG9pbnQ6cixpbmRleDp0LGZhY2U6bnVsbCxvYmplY3Q6YX0pKX1mdW5jdGlvbiBocihlLHQscixuLGksbyxhLHMsdSl7cC5jYWxsKHRoaXMsZSx0LHIsbixpLG8sYSxzLHUpO3RoaXMuZm9ybWF0PXZvaWQgMCE9PWE/YToxMDIyO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PW8/bzoxMDA2O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWk/aToxMDA2O3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSExfWZ1bmN0aW9uIHByKGUsdCxyLG4saSxvLGEscyx1LGMsbCxoKXtwLmNhbGwodGhpcyxudWxsLG8sYSxzLHUsYyxuLGksbCxoKTt0aGlzLmltYWdlPXt3aWR0aDp0LGhlaWdodDpyfTt0aGlzLm1pcG1hcHM9ZTt0aGlzLmdlbmVyYXRlTWlwbWFwcz10aGlzLmZsaXBZPSExfWZ1bmN0aW9uIGZyKGUsdCxyLG4saSxvLGEscyx1KXtwLmNhbGwodGhpcyxlLHQscixuLGksbyxhLHMsdSk7dGhpcy5uZWVkc1VwZGF0ZT0hMH1mdW5jdGlvbiBkcihlLHQscixuLGksbyxhLHMsdSxjKXtjPXZvaWQgMCE9PWM/YzoxMDI2O2lmKDEwMjYhPT1jJiYxMDI3IT09Yyl0aHJvdyBFcnJvcihcIkRlcHRoVGV4dHVyZSBmb3JtYXQgbXVzdCBiZSBlaXRoZXIgVEhSRUUuRGVwdGhGb3JtYXQgb3IgVEhSRUUuRGVwdGhTdGVuY2lsRm9ybWF0XCIpO3ZvaWQgMD09PXImJjEwMjY9PT1jJiYocj0xMDEyKTt2b2lkIDA9PT1yJiYxMDI3PT09YyYmKHI9MTAyMCk7cC5jYWxsKHRoaXMsbnVsbCxuLGksbyxhLHMsYyxyLHUpO3RoaXMuaW1hZ2U9e3dpZHRoOmUsaGVpZ2h0OnR9O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWE/YToxMDAzO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PXM/czoxMDAzO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZmxpcFk9ITF9ZnVuY3Rpb24gdnIoZSl7Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIldpcmVmcmFtZUdlb21ldHJ5XCI7dmFyIHQ9W10scixuLGksbz1bMCwwXSxhPXt9LHM9W1wiYVwiLFwiYlwiLFwiY1wiXTtpZihlJiZlLmlzR2VvbWV0cnkpe3ZhciB1PWUuZmFjZXM7dmFyIGM9MDtmb3Iobj11Lmxlbmd0aDtjPG47YysrKXt2YXIgbD11W2NdO2ZvcihyPTA7Mz5yO3IrKyl7dmFyIGg9bFtzW3JdXTt2YXIgcD1sW3NbKHIrMSklM11dO29bMF09TWF0aC5taW4oaCxwKTtvWzFdPU1hdGgubWF4KGgscCk7aD1vWzBdK1wiLFwiK29bMV07dm9pZCAwPT09YVtoXSYmKGFbaF09e2luZGV4MTpvWzBdLGluZGV4MjpvWzFdfSl9fWZvcihoIGluIGEpYz1hW2hdLHM9ZS52ZXJ0aWNlc1tjLmluZGV4MV0sdC5wdXNoKHMueCxzLnkscy56KSxzPWUudmVydGljZXNbYy5pbmRleDJdLHQucHVzaChzLngscy55LHMueil9ZWxzZSBpZihlJiZlLmlzQnVmZmVyR2VvbWV0cnkpaWYocz1uZXcgVGUsbnVsbCE9PWUuaW5kZXgpe3U9ZS5hdHRyaWJ1dGVzLnBvc2l0aW9uO2w9ZS5pbmRleDt2YXIgZj1lLmdyb3VwczswPT09Zi5sZW5ndGgmJihmPVt7c3RhcnQ6MCxjb3VudDpsLmNvdW50LG1hdGVyaWFsSW5kZXg6MH1dKTtlPTA7Zm9yKGk9Zi5sZW5ndGg7ZTxpOysrZSlmb3IoYz1mW2VdLHI9Yy5zdGFydCxuPWMuY291bnQsYz1yLG49cituO2M8bjtjKz0zKWZvcihyPTA7Mz5yO3IrKyloPWwuZ2V0WChjK3IpLHA9bC5nZXRYKGMrKHIrMSklMyksb1swXT1NYXRoLm1pbihoLHApLG9bMV09TWF0aC5tYXgoaCxwKSxoPW9bMF0rXCIsXCIrb1sxXSx2b2lkIDA9PT1hW2hdJiYoYVtoXT17aW5kZXgxOm9bMF0saW5kZXgyOm9bMV19KTtmb3IoaCBpbiBhKWM9YVtoXSxzLmZyb21CdWZmZXJBdHRyaWJ1dGUodSxjLmluZGV4MSksdC5wdXNoKHMueCxzLnkscy56KSxzLmZyb21CdWZmZXJBdHRyaWJ1dGUodSxjLmluZGV4MiksdC5wdXNoKHMueCxzLnkscy56KX1lbHNlIGZvcih1PWUuYXR0cmlidXRlcy5wb3NpdGlvbixjPTAsbj11LmNvdW50LzM7YzxuO2MrKylmb3Iocj0wOzM+cjtyKyspYT0zKmMrcixzLmZyb21CdWZmZXJBdHRyaWJ1dGUodSxhKSx0LnB1c2gocy54LHMueSxzLnopLGE9MypjKyhyKzEpJTMscy5mcm9tQnVmZmVyQXR0cmlidXRlKHUsYSksdC5wdXNoKHMueCxzLnkscy56KTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGoodCwzKSl9ZnVuY3Rpb24gbXIoZSx0LHIpe0YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQYXJhbWV0cmljR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6ZSxzbGljZXM6dCxzdGFja3M6cn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGdyKGUsdCxyKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gZ3IoZSx0LHIpe04uY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQYXJhbWV0cmljQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6ZSxzbGljZXM6dCxzdGFja3M6cn07dmFyIG49W10saT1bXSxvPVtdLGE9W10scz1uZXcgVGUsdT1uZXcgVGUsYz1uZXcgVGUsbD1uZXcgVGUsaD1uZXcgVGUscCxmOzM+ZS5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnk6IEZ1bmN0aW9uIG11c3Qgbm93IG1vZGlmeSBhIFZlY3RvcjMgYXMgdGhpcmQgcGFyYW1ldGVyLlwiKTt2YXIgZD10KzE7Zm9yKHA9MDtwPD1yO3ArKyl7dmFyIHY9cC9yO2ZvcihmPTA7Zjw9dDtmKyspe3ZhciBtPWYvdDtlKG0sdix1KTtpLnB1c2godS54LHUueSx1LnopOzA8PW0tMWUtNT8oZShtLTFlLTUsdixjKSxsLnN1YlZlY3RvcnModSxjKSk6KGUobSsxZS01LHYsYyksbC5zdWJWZWN0b3JzKGMsdSkpOzA8PXYtMWUtNT8oZShtLHYtMWUtNSxjKSxoLnN1YlZlY3RvcnModSxjKSk6KGUobSx2KzFlLTUsYyksaC5zdWJWZWN0b3JzKGMsdSkpO3MuY3Jvc3NWZWN0b3JzKGwsaCkubm9ybWFsaXplKCk7by5wdXNoKHMueCxzLnkscy56KTthLnB1c2gobSx2KX19Zm9yKHA9MDtwPHI7cCsrKWZvcihmPTA7Zjx0O2YrKyllPXAqZCtmKzEscz0ocCsxKSpkK2YrMSx1PShwKzEpKmQrZixuLnB1c2gocCpkK2YsZSx1KSxuLnB1c2goZSxzLHUpO3RoaXMuc2V0SW5kZXgobik7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKGksMykpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGoobywzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKGEsMikpfWZ1bmN0aW9uIF9yKGUsdCxyLG4pe0YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2x5aGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOmUsaW5kaWNlczp0LHJhZGl1czpyLGRldGFpbDpufTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgeXIoZSx0LHIsbikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIHlyKHIsdixlLHQpe2Z1bmN0aW9uIG0oZSl7aC5wdXNoKGUueCxlLnksZS56KX1mdW5jdGlvbiBnKGUsdCl7ZSo9Mzt0Lng9cltlKzBdO3QueT1yW2UrMV07dC56PXJbZSsyXX1mdW5jdGlvbiBsKGUsdCxyLG4pezA+biYmMT09PWUueCYmKHBbdF09ZS54LTEpOzA9PT1yLngmJjA9PT1yLnomJihwW3RdPW4vMi9NYXRoLlBJKy41KX1OLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt2ZXJ0aWNlczpyLGluZGljZXM6dixyYWRpdXM6ZSxkZXRhaWw6dH07ZT1lfHwxO3Q9dHx8MDt2YXIgaD1bXSxwPVtdOyhmdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFRlLHI9bmV3IFRlLG49bmV3IFRlLGk9MDtpPHYubGVuZ3RoO2krPTMpe2codltpKzBdLHQpO2codltpKzFdLHIpO2codltpKzJdLG4pO3ZhciBvLGEscz10LHU9cixjPW4sbD1NYXRoLnBvdygyLGUpLGg9W107Zm9yKGE9MDthPD1sO2ErKyl7aFthXT1bXTt2YXIgcD1zLmNsb25lKCkubGVycChjLGEvbCksZj11LmNsb25lKCkubGVycChjLGEvbCksZD1sLWE7Zm9yKG89MDtvPD1kO28rKyloW2FdW29dPTA9PT1vJiZhPT09bD9wOnAuY2xvbmUoKS5sZXJwKGYsby9kKX1mb3IoYT0wO2E8bDthKyspZm9yKG89MDtvPDIqKGwtYSktMTtvKyspcz1NYXRoLmZsb29yKG8vMiksMD09PW8lMj8obShoW2FdW3MrMV0pLG0oaFthKzFdW3NdKSxtKGhbYV1bc10pKToobShoW2FdW3MrMV0pLG0oaFthKzFdW3MrMV0pLG0oaFthKzFdW3NdKSl9fSkodCk7KGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgVGUscj0wO3I8aC5sZW5ndGg7cis9Myl0Lng9aFtyKzBdLHQueT1oW3IrMV0sdC56PWhbcisyXSx0Lm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKGUpLGhbciswXT10LngsaFtyKzFdPXQueSxoW3IrMl09dC56fSkoZSk7KGZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBUZSx0PTA7dDxoLmxlbmd0aDt0Kz0zKWUueD1oW3QrMF0sZS55PWhbdCsxXSxlLno9aFt0KzJdLHAucHVzaChNYXRoLmF0YW4yKGUueiwtZS54KS8yL01hdGguUEkrLjUsMS0oTWF0aC5hdGFuMigtZS55LE1hdGguc3FydChlLngqZS54K2UueiplLnopKS9NYXRoLlBJKy41KSk7ZT1uZXcgVGU7dD1uZXcgVGU7Zm9yKHZhciByPW5ldyBUZSxuPW5ldyBUZSxpPW5ldyBNZSxvPW5ldyBNZSxhPW5ldyBNZSxzPTAsdT0wO3M8aC5sZW5ndGg7cys9OSx1Kz02KXtlLnNldChoW3MrMF0saFtzKzFdLGhbcysyXSk7dC5zZXQoaFtzKzNdLGhbcys0XSxoW3MrNV0pO3Iuc2V0KGhbcys2XSxoW3MrN10saFtzKzhdKTtpLnNldChwW3UrMF0scFt1KzFdKTtvLnNldChwW3UrMl0scFt1KzNdKTthLnNldChwW3UrNF0scFt1KzVdKTtuLmNvcHkoZSkuYWRkKHQpLmFkZChyKS5kaXZpZGVTY2FsYXIoMyk7dmFyIGM9TWF0aC5hdGFuMihuLnosLW4ueCk7bChpLHUrMCxlLGMpO2wobyx1KzIsdCxjKTtsKGEsdSs0LHIsYyl9Zm9yKGU9MDtlPHAubGVuZ3RoO2UrPTYpdD1wW2UrMF0scj1wW2UrMl0sbj1wW2UrNF0saT1NYXRoLm1pbih0LHIsbiksLjk8TWF0aC5tYXgodCxyLG4pJiYuMT5pJiYoLjI+dCYmKHBbZSswXSs9MSksLjI+ciYmKHBbZSsyXSs9MSksLjI+biYmKHBbZSs0XSs9MSkpfSkoKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooaCwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgaihoLnNsaWNlKCksMykpO3RoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgaihwLDIpKTswPT09dD90aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk6dGhpcy5ub3JtYWxpemVOb3JtYWxzKCl9ZnVuY3Rpb24gYnIoZSx0KXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVGV0cmFoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsZGV0YWlsOnR9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB4cihlLHQpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiB4cihlLHQpe3lyLmNhbGwodGhpcyxbMSwxLDEsLTEsLTEsMSwtMSwxLC0xLDEsLTEsLTFdLFsyLDEsMCwwLDMsMiwxLDMsMCwyLDMsMV0sZSx0KTt0aGlzLnR5cGU9XCJUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6ZSxkZXRhaWw6dH19ZnVuY3Rpb24gd3IoZSx0KXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiT2N0YWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6ZSxkZXRhaWw6dH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFNyKGUsdCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFNyKGUsdCl7eXIuY2FsbCh0aGlzLFsxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMV0sWzAsMiw0LDAsNCwzLDAsMyw1LDAsNSwyLDEsMiw1LDEsNSwzLDEsMyw0LDEsNCwyXSxlLHQpO3RoaXMudHlwZT1cIk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsZGV0YWlsOnR9fWZ1bmN0aW9uIE1yKGUsdCl7Ri5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkljb3NhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czplLGRldGFpbDp0fTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgQ3IoZSx0KSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gQ3IoZSx0KXt2YXIgcj0oMStNYXRoLnNxcnQoNSkpLzI7eXIuY2FsbCh0aGlzLFstMSxyLDAsMSxyLDAsLTEsLXIsMCwxLC1yLDAsMCwtMSxyLDAsMSxyLDAsLTEsLXIsMCwxLC1yLHIsMCwtMSxyLDAsMSwtciwwLC0xLC1yLDAsMV0sWzAsMTEsNSwwLDUsMSwwLDEsNywwLDcsMTAsMCwxMCwxMSwxLDUsOSw1LDExLDQsMTEsMTAsMiwxMCw3LDYsNywxLDgsMyw5LDQsMyw0LDIsMywyLDYsMyw2LDgsMyw4LDksNCw5LDUsMiw0LDExLDYsMiwxMCw4LDYsNyw5LDgsMV0sZSx0KTt0aGlzLnR5cGU9XCJJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6ZSxkZXRhaWw6dH19ZnVuY3Rpb24gVHIoZSx0KXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czplLGRldGFpbDp0fTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgRXIoZSx0KSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gRXIoZSx0KXt2YXIgcj0oMStNYXRoLnNxcnQoNSkpLzIsbj0xL3I7eXIuY2FsbCh0aGlzLFstMSwtMSwtMSwtMSwtMSwxLC0xLDEsLTEsLTEsMSwxLDEsLTEsLTEsMSwtMSwxLDEsMSwtMSwxLDEsMSwwLC1uLC1yLDAsLW4sciwwLG4sLXIsMCxuLHIsLW4sLXIsMCwtbixyLDAsbiwtciwwLG4sciwwLC1yLDAsLW4sciwwLC1uLC1yLDAsbixyLDAsbl0sWzMsMTEsNywzLDcsMTUsMywxNSwxMyw3LDE5LDE3LDcsMTcsNiw3LDYsMTUsMTcsNCw4LDE3LDgsMTAsMTcsMTAsNiw4LDAsMTYsOCwxNiwyLDgsMiwxMCwwLDEyLDEsMCwxLDE4LDAsMTgsMTYsNiwxMCwyLDYsMiwxMyw2LDEzLDE1LDIsMTYsMTgsMiwxOCwzLDIsMywxMywxOCwxLDksMTgsOSwxMSwxOCwxMSwzLDQsMTQsMTIsNCwxMiwwLDQsMCw4LDExLDksNSwxMSw1LDE5LDExLDE5LDcsMTksNSwxNCwxOSwxNCw0LDE5LDQsMTcsMSwxMiwxNCwxLDE0LDUsMSw1LDldLGUsdCk7dGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czplLGRldGFpbDp0fX1mdW5jdGlvbiBPcihlLHQscixuLGksbyl7Ri5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlR1YmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cGF0aDplLHR1YnVsYXJTZWdtZW50czp0LHJhZGl1czpyLHJhZGlhbFNlZ21lbnRzOm4sY2xvc2VkOml9O3ZvaWQgMCE9PW8mJmNvbnNvbGUud2FybihcIlRIUkVFLlR1YmVHZW9tZXRyeTogdGFwZXIgaGFzIGJlZW4gcmVtb3ZlZC5cIik7ZT1uZXcgUHIoZSx0LHIsbixpKTt0aGlzLnRhbmdlbnRzPWUudGFuZ2VudHM7dGhpcy5ub3JtYWxzPWUubm9ybWFsczt0aGlzLmJpbm9ybWFscz1lLmJpbm9ybWFsczt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShlKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBQcihpLG8sYSxzLGUpe2Z1bmN0aW9uIHQoZSl7aD1pLmdldFBvaW50QXQoZS9vLGgpO3ZhciB0PXUubm9ybWFsc1tlXTtlPXUuYmlub3JtYWxzW2VdO2ZvcihwPTA7cDw9cztwKyspe3ZhciByPXAvcypNYXRoLlBJKjIsbj1NYXRoLnNpbihyKTtyPS1NYXRoLmNvcyhyKTtsLng9cip0LngrbiplLng7bC55PXIqdC55K24qZS55O2wuej1yKnQueituKmUuejtsLm5vcm1hbGl6ZSgpO2QucHVzaChsLngsbC55LGwueik7Yy54PWgueCthKmwueDtjLnk9aC55K2EqbC55O2Muej1oLnorYSpsLno7Zi5wdXNoKGMueCxjLnksYy56KX19Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlR1YmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cGF0aDppLHR1YnVsYXJTZWdtZW50czpvLHJhZGl1czphLHJhZGlhbFNlZ21lbnRzOnMsY2xvc2VkOmV9O289b3x8NjQ7YT1hfHwxO3M9c3x8ODtlPWV8fCExO3ZhciB1PWkuY29tcHV0ZUZyZW5ldEZyYW1lcyhvLGUpO3RoaXMudGFuZ2VudHM9dS50YW5nZW50czt0aGlzLm5vcm1hbHM9dS5ub3JtYWxzO3RoaXMuYmlub3JtYWxzPXUuYmlub3JtYWxzO3ZhciBjPW5ldyBUZSxsPW5ldyBUZSxyPW5ldyBNZSxoPW5ldyBUZSxuLHAsZj1bXSxkPVtdLHY9W10sbT1bXTtmb3Iobj0wO248bztuKyspdChuKTt0KCExPT09ZT9vOjApO2ZvcihuPTA7bjw9bztuKyspZm9yKHA9MDtwPD1zO3ArKylyLng9bi9vLHIueT1wL3Msdi5wdXNoKHIueCxyLnkpOyhmdW5jdGlvbigpe2ZvcihwPTE7cDw9bztwKyspZm9yKG49MTtuPD1zO24rKyl7dmFyIGU9KHMrMSkqcCsobi0xKSx0PShzKzEpKnArbixyPShzKzEpKihwLTEpK247bS5wdXNoKChzKzEpKihwLTEpKyhuLTEpLGUscik7bS5wdXNoKGUsdCxyKX19KSgpO3RoaXMuc2V0SW5kZXgobSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKGYsMykpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGooZCwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKHYsMikpfWZ1bmN0aW9uIEFyKGUsdCxyLG4saSxvLGEpe0YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0tub3RHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsdHViZTp0LHR1YnVsYXJTZWdtZW50czpyLHJhZGlhbFNlZ21lbnRzOm4scDppLHE6b307dm9pZCAwIT09YSYmY29uc29sZS53YXJuKFwiVEhSRUUuVG9ydXNLbm90R2VvbWV0cnk6IGhlaWdodFNjYWxlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2NhbGUoIHgsIHksIHogKSBpbnN0ZWFkLlwiKTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcganIoZSx0LHIsbixpLG8pKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBqcihlLHQscixuLGksbyl7ZnVuY3Rpb24gYShlLHQscixuLGkpe3ZhciBvPU1hdGguc2luKGUpO3Q9ci90KmU7cj1NYXRoLmNvcyh0KTtpLng9biooMityKSouNSpNYXRoLmNvcyhlKTtpLnk9biooMityKSpvKi41O2kuej1uKk1hdGguc2luKHQpKi41fU4uY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsdHViZTp0LHR1YnVsYXJTZWdtZW50czpyLHJhZGlhbFNlZ21lbnRzOm4scDppLHE6b307ZT1lfHwxO3Q9dHx8LjQ7cj1NYXRoLmZsb29yKHIpfHw2NDtuPU1hdGguZmxvb3Iobil8fDg7aT1pfHwyO289b3x8Mzt2YXIgcz1bXSx1PVtdLGM9W10sbD1bXSxoLHA9bmV3IFRlLGY9bmV3IFRlLGQ9bmV3IFRlLHY9bmV3IFRlLG09bmV3IFRlLGc9bmV3IFRlLF89bmV3IFRlO2ZvcihoPTA7aDw9cjsrK2gpe3ZhciB5PWgvcippKk1hdGguUEkqMjthKHksaSxvLGUsZCk7YSh5Ky4wMSxpLG8sZSx2KTtnLnN1YlZlY3RvcnModixkKTtfLmFkZFZlY3RvcnModixkKTttLmNyb3NzVmVjdG9ycyhnLF8pO18uY3Jvc3NWZWN0b3JzKG0sZyk7bS5ub3JtYWxpemUoKTtfLm5vcm1hbGl6ZSgpO2Zvcih5PTA7eTw9bjsrK3kpe3ZhciBiPXkvbipNYXRoLlBJKjIseD0tdCpNYXRoLmNvcyhiKTtiPXQqTWF0aC5zaW4oYik7cC54PWQueCsoeCpfLngrYiptLngpO3AueT1kLnkrKHgqXy55K2IqbS55KTtwLno9ZC56Kyh4Kl8ueitiKm0ueik7dS5wdXNoKHAueCxwLnkscC56KTtmLnN1YlZlY3RvcnMocCxkKS5ub3JtYWxpemUoKTtjLnB1c2goZi54LGYueSxmLnopO2wucHVzaChoL3IpO2wucHVzaCh5L24pfX1mb3IoeT0xO3k8PXI7eSsrKWZvcihoPTE7aDw9bjtoKyspZT0obisxKSp5KyhoLTEpLHQ9KG4rMSkqeStoLGk9KG4rMSkqKHktMSkraCxzLnB1c2goKG4rMSkqKHktMSkrKGgtMSksZSxpKSxzLnB1c2goZSx0LGkpO3RoaXMuc2V0SW5kZXgocyk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKHUsMykpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGooYywzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKGwsMikpfWZ1bmN0aW9uIFJyKGUsdCxyLG4saSl7Ri5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czplLHR1YmU6dCxyYWRpYWxTZWdtZW50czpyLHR1YnVsYXJTZWdtZW50czpuLGFyYzppfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcga3IoZSx0LHIsbixpKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24ga3IoZSx0LHIsbixpKXtOLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsdHViZTp0LHJhZGlhbFNlZ21lbnRzOnIsdHVidWxhclNlZ21lbnRzOm4sYXJjOml9O2U9ZXx8MTt0PXR8fC40O3I9TWF0aC5mbG9vcihyKXx8ODtuPU1hdGguZmxvb3Iobil8fDY7aT1pfHwyKk1hdGguUEk7dmFyIG89W10sYT1bXSxzPVtdLHU9W10sYz1uZXcgVGUsbD1uZXcgVGUsaD1uZXcgVGUscCxmO2ZvcihwPTA7cDw9cjtwKyspZm9yKGY9MDtmPD1uO2YrKyl7dmFyIGQ9Zi9uKmksdj1wL3IqTWF0aC5QSSoyO2wueD0oZSt0Kk1hdGguY29zKHYpKSpNYXRoLmNvcyhkKTtsLnk9KGUrdCpNYXRoLmNvcyh2KSkqTWF0aC5zaW4oZCk7bC56PXQqTWF0aC5zaW4odik7YS5wdXNoKGwueCxsLnksbC56KTtjLng9ZSpNYXRoLmNvcyhkKTtjLnk9ZSpNYXRoLnNpbihkKTtoLnN1YlZlY3RvcnMobCxjKS5ub3JtYWxpemUoKTtzLnB1c2goaC54LGgueSxoLnopO3UucHVzaChmL24pO3UucHVzaChwL3IpfWZvcihwPTE7cDw9cjtwKyspZm9yKGY9MTtmPD1uO2YrKyllPShuKzEpKihwLTEpK2YtMSx0PShuKzEpKihwLTEpK2YsaT0obisxKSpwK2Ysby5wdXNoKChuKzEpKnArZi0xLGUsaSksby5wdXNoKGUsdCxpKTt0aGlzLnNldEluZGV4KG8pO3RoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaihhLDMpKTt0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBqKHMsMykpO3RoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgaih1LDIpKX1mdW5jdGlvbiBMcihlLHQscixuLGkpe2Zvcih2YXIgbyxhPTAscz10LHU9ci1uO3M8cjtzKz1uKWErPShlW3VdLWVbc10pKihlW3MrMV0rZVt1KzFdKSx1PXM7aWYoaT09PTA8YSlmb3IoaT10O2k8cjtpKz1uKW89S3IoaSxlW2ldLGVbaSsxXSxvKTtlbHNlIGZvcihpPXItbjtpPj10O2ktPW4pbz1LcihpLGVbaV0sZVtpKzFdLG8pO28mJkhyKG8sby5uZXh0KSYmKFpyKG8pLG89by5uZXh0KTtyZXR1cm4gb31mdW5jdGlvbiBOcihlLHQpe2lmKCFlKXJldHVybiBlO3R8fCh0PWUpO2Rve3ZhciByPSExO2lmKGUuc3RlaW5lcnx8IUhyKGUsZS5uZXh0KSYmMCE9PVZyKGUucHJldixlLGUubmV4dCkpZT1lLm5leHQ7ZWxzZXtacihlKTtlPXQ9ZS5wcmV2O2lmKGU9PT1lLm5leHQpYnJlYWs7cj0hMH19d2hpbGUocnx8ZSE9PXQpO3JldHVybiB0fWZ1bmN0aW9uIElyKGUsdCxyLG4saSxvLGEpe2lmKGUpe2lmKCFhJiZvKXt2YXIgcz1lLHU9cztkb3tudWxsPT09dS56JiYodS56PXpyKHUueCx1LnksbixpLG8pKSx1LnByZXZaPXUucHJldix1PXUubmV4dFo9dS5uZXh0fXdoaWxlKHUhPT1zKTt1LnByZXZaLm5leHRaPW51bGw7dS5wcmV2Wj1udWxsO3M9dTt2YXIgYyxsLGgscCxmPTE7ZG97dT1zO3ZhciBkPXM9bnVsbDtmb3IobD0wO3U7KXtsKys7dmFyIHY9dTtmb3IoYz1oPTA7YzxmJiYoaCsrLHY9di5uZXh0Wix2KTtjKyspO2ZvcihwPWY7MDxofHwwPHAmJnY7KTAhPT1oJiYoMD09PXB8fCF2fHx1Lno8PXYueik/KGM9dSx1PXUubmV4dFosaC0tKTooYz12LHY9di5uZXh0WixwLS0pLGQ/ZC5uZXh0Wj1jOnM9YyxjLnByZXZaPWQsZD1jO3U9dn1kLm5leHRaPW51bGw7Zio9Mn13aGlsZSgxPGwpfWZvcihzPWU7ZS5wcmV2IT09ZS5uZXh0Oyl7dT1lLnByZXY7dj1lLm5leHQ7aWYobylkPURyKGUsbixpLG8pO2Vsc2UgZTppZihkPWUsbD1kLnByZXYsaD1kLGY9ZC5uZXh0LDA8PVZyKGwsaCxmKSlkPSExO2Vsc2V7Zm9yKGM9ZC5uZXh0Lm5leHQ7YyE9PWQucHJldjspe2lmKEdyKGwueCxsLnksaC54LGgueSxmLngsZi55LGMueCxjLnkpJiYwPD1WcihjLnByZXYsYyxjLm5leHQpKXtkPSExO2JyZWFrIGV9Yz1jLm5leHR9ZD0hMH1pZihkKXQucHVzaCh1LmkvciksdC5wdXNoKGUuaS9yKSx0LnB1c2godi5pL3IpLFpyKGUpLHM9ZT12Lm5leHQ7ZWxzZSBpZihlPXYsZT09PXMpe2lmKCFhKUlyKE5yKGUpLHQscixuLGksbywxKTtlbHNlIGlmKDE9PT1hKXtlPU5yKGUpO2E9dDtzPXI7dT1lO2Rve3Y9dS5wcmV2LGQ9dS5uZXh0Lm5leHQsIUhyKHYsZCkmJlVyKHYsdSx1Lm5leHQsZCkmJlhyKHYsZCkmJlhyKGQsdikmJihhLnB1c2godi5pL3MpLGEucHVzaCh1LmkvcyksYS5wdXNoKGQuaS9zKSxacih1KSxacih1Lm5leHQpLHU9ZT1kKSx1PXUubmV4dH13aGlsZSh1IT09ZSk7ZT1Ocih1KTtJcihlLHQscixuLGksbywyKX1lbHNlIGlmKDI9PT1hKWU6e2E9ZTtkb3tmb3Iocz1hLm5leHQubmV4dDtzIT09YS5wcmV2Oyl7aWYodT1hLmkhPT1zLmkpe3U9YTt2PXM7aWYoZD11Lm5leHQuaSE9PXYuaSYmdS5wcmV2LmkhPT12Lmkpe3Q6e2Q9dTtkb3tpZihkLmkhPT11LmkmJmQubmV4dC5pIT09dS5pJiZkLmkhPT12LmkmJmQubmV4dC5pIT09di5pJiZVcihkLGQubmV4dCx1LHYpKXtkPSEwO2JyZWFrIHR9ZD1kLm5leHR9d2hpbGUoZCE9PXUpO2Q9ITF9ZD0hZH1pZihkKXtpZihkPVhyKHUsdikmJlhyKHYsdSkpe2Q9dTtsPSExO2g9KHUueCt2LngpLzI7Zj0odS55K3YueSkvMjtkb3tkLnk+ZiE9PWQubmV4dC55PmYmJmQubmV4dC55IT09ZC55JiZoPChkLm5leHQueC1kLngpKihmLWQueSkvKGQubmV4dC55LWQueSkrZC54JiYobD0hbCksZD1kLm5leHR9d2hpbGUoZCE9PXUpO2Q9bH1kPWQmJihWcih1LnByZXYsdSx2LnByZXYpfHxWcih1LHYucHJldix2KSl8fEhyKHUsdikmJjA8VnIodS5wcmV2LHUsdS5uZXh0KSYmMDxWcih2LnByZXYsdix2Lm5leHQpfXU9ZH1pZih1KXtlPVlyKGEscyk7YT1OcihhLGEubmV4dCk7ZT1OcihlLGUubmV4dCk7SXIoYSx0LHIsbixpLG8pO0lyKGUsdCxyLG4saSxvKTticmVhayBlfXM9cy5uZXh0fWE9YS5uZXh0fXdoaWxlKGEhPT1lKX1icmVha319fX1mdW5jdGlvbiBEcihlLHQscixuKXt2YXIgaT1lLnByZXYsbz1lLm5leHQ7aWYoMDw9VnIoaSxlLG8pKXJldHVybiExO3ZhciBhPWkueD5lLng/aS54Pm8ueD9pLng6by54OmUueD5vLng/ZS54Om8ueCxzPWkueT5lLnk/aS55Pm8ueT9pLnk6by55OmUueT5vLnk/ZS55Om8ueSx1PXpyKGkueDxlLng/aS54PG8ueD9pLng6by54OmUueDxvLng/ZS54Om8ueCxpLnk8ZS55P2kueTxvLnk/aS55Om8ueTplLnk8by55P2UueTpvLnksdCxyLG4pO3Q9enIoYSxzLHQscixuKTtyPWUucHJldlo7Zm9yKG49ZS5uZXh0WjtyJiZyLno+PXUmJm4mJm4uejw9dDspe2lmKHIhPT1lLnByZXYmJnIhPT1lLm5leHQmJkdyKGkueCxpLnksZS54LGUueSxvLngsby55LHIueCxyLnkpJiYwPD1WcihyLnByZXYscixyLm5leHQpKXJldHVybiExO3I9ci5wcmV2WjtpZihuIT09ZS5wcmV2JiZuIT09ZS5uZXh0JiZHcihpLngsaS55LGUueCxlLnksby54LG8ueSxuLngsbi55KSYmMDw9VnIobi5wcmV2LG4sbi5uZXh0KSlyZXR1cm4hMTtuPW4ubmV4dFp9Zm9yKDtyJiZyLno+PXU7KXtpZihyIT09ZS5wcmV2JiZyIT09ZS5uZXh0JiZHcihpLngsaS55LGUueCxlLnksby54LG8ueSxyLngsci55KSYmMDw9VnIoci5wcmV2LHIsci5uZXh0KSlyZXR1cm4hMTtyPXIucHJldlp9Zm9yKDtuJiZuLno8PXQ7KXtpZihuIT09ZS5wcmV2JiZuIT09ZS5uZXh0JiZHcihpLngsaS55LGUueCxlLnksby54LG8ueSxuLngsbi55KSYmMDw9VnIobi5wcmV2LG4sbi5uZXh0KSlyZXR1cm4hMTtuPW4ubmV4dFp9cmV0dXJuITB9ZnVuY3Rpb24gQnIoZSx0KXtyZXR1cm4gZS54LXQueH1mdW5jdGlvbiBGcihlLHQpe3ZhciByPXQsbj1lLngsaT1lLnksbz0tSW5maW5pdHk7ZG97aWYoaTw9ci55JiZpPj1yLm5leHQueSYmci5uZXh0LnkhPT1yLnkpe3ZhciBhPXIueCsoaS1yLnkpKihyLm5leHQueC1yLngpLyhyLm5leHQueS1yLnkpO2lmKGE8PW4mJmE+byl7bz1hO2lmKGE9PT1uKXtpZihpPT09ci55KXJldHVybiByO2lmKGk9PT1yLm5leHQueSlyZXR1cm4gci5uZXh0fXZhciBzPXIueDxyLm5leHQueD9yOnIubmV4dH19cj1yLm5leHR9d2hpbGUociE9PXQpO2lmKCFzKXJldHVybiBudWxsO2lmKG49PT1vKXJldHVybiBzO3Q9czthPXMueDt2YXIgdT1zLnksYz1JbmZpbml0eTtyPXM7ZG97aWYobj49ci54JiZyLng+PWEmJm4hPT1yLngmJkdyKGk8dT9uOm8saSxhLHUsaTx1P286bixpLHIueCxyLnkpKXt2YXIgbD1NYXRoLmFicyhpLXIueSkvKG4tci54KTt2YXIgaDtpZigoaD1YcihyLGUpKSYmIShoPWw8YykmJihoPWw9PT1jKSYmIShoPXIueD5zLngpJiYoaD1yLng9PT1zLngpKXtoPXM7dmFyIHA9cjtoPTA+VnIoaC5wcmV2LGgscC5wcmV2KSYmMD5WcihwLm5leHQsaCxoLm5leHQpfWgmJihzPXIsYz1sKX1yPXIubmV4dH13aGlsZShyIT09dCk7cmV0dXJuIHN9ZnVuY3Rpb24genIoZSx0LHIsbixpKXtlPTMyNzY3KihlLXIpKmk7dD0zMjc2NyoodC1uKSppO2U9KGV8ZTw8OCkmMTY3MTE5MzU7ZT0oZXxlPDw0KSYyNTI2NDUxMzU7ZT0oZXxlPDwyKSY4NTg5OTM0NTk7dD0odHx0PDw4KSYxNjcxMTkzNTt0PSh0fHQ8PDQpJjI1MjY0NTEzNTt0PSh0fHQ8PDIpJjg1ODk5MzQ1OTtyZXR1cm4oZXxlPDwxKSYxNDMxNjU1NzY1fCgodHx0PDwxKSYxNDMxNjU1NzY1KTw8MX1mdW5jdGlvbiAkcihlKXt2YXIgdD1lLHI9ZTtkb3tpZih0Lng8ci54fHx0Lng9PT1yLngmJnQueTxyLnkpcj10O3Q9dC5uZXh0fXdoaWxlKHQhPT1lKTtyZXR1cm4gcn1mdW5jdGlvbiBHcihlLHQscixuLGksbyxhLHMpe3JldHVybiAwPD0oaS1hKSoodC1zKS0oZS1hKSooby1zKSYmMDw9KGUtYSkqKG4tcyktKHItYSkqKHQtcykmJjA8PShyLWEpKihvLXMpLShpLWEpKihuLXMpfWZ1bmN0aW9uIFZyKGUsdCxyKXtyZXR1cm4odC55LWUueSkqKHIueC10LngpLSh0LngtZS54KSooci55LXQueSl9ZnVuY3Rpb24gSHIoZSx0KXtyZXR1cm4gZS54PT09dC54JiZlLnk9PT10Lnl9ZnVuY3Rpb24gVXIoZSx0LHIsbil7dmFyIGk9V3IoVnIoZSx0LHIpKSxvPVdyKFZyKGUsdCxuKSksYT1XcihWcihyLG4sZSkpLHM9V3IoVnIocixuLHQpKTtyZXR1cm4gaSE9PW8mJmEhPT1zfHwwPT09aSYmcXIoZSxyLHQpfHwwPT09byYmcXIoZSxuLHQpfHwwPT09YSYmcXIocixlLG4pfHwwPT09cyYmcXIocix0LG4pPyEwOiExfWZ1bmN0aW9uIHFyKGUsdCxyKXtyZXR1cm4gdC54PD1NYXRoLm1heChlLngsci54KSYmdC54Pj1NYXRoLm1pbihlLngsci54KSYmdC55PD1NYXRoLm1heChlLnksci55KSYmdC55Pj1NYXRoLm1pbihlLnksci55KX1mdW5jdGlvbiBXcihlKXtyZXR1cm4gMDxlPzE6MD5lPy0xOjB9ZnVuY3Rpb24gWHIoZSx0KXtyZXR1cm4gMD5WcihlLnByZXYsZSxlLm5leHQpPzA8PVZyKGUsdCxlLm5leHQpJiYwPD1WcihlLGUucHJldix0KTowPlZyKGUsdCxlLnByZXYpfHwwPlZyKGUsZS5uZXh0LHQpfWZ1bmN0aW9uIFlyKGUsdCl7dmFyIHI9bmV3IEpyKGUuaSxlLngsZS55KSxuPW5ldyBKcih0LmksdC54LHQueSksaT1lLm5leHQsbz10LnByZXY7ZS5uZXh0PXQ7dC5wcmV2PWU7ci5uZXh0PWk7aS5wcmV2PXI7bi5uZXh0PXI7ci5wcmV2PW47by5uZXh0PW47bi5wcmV2PW87cmV0dXJuIG59ZnVuY3Rpb24gS3IoZSx0LHIsbil7ZT1uZXcgSnIoZSx0LHIpO24/KGUubmV4dD1uLm5leHQsZS5wcmV2PW4sbi5uZXh0LnByZXY9ZSxuLm5leHQ9ZSk6KGUucHJldj1lLGUubmV4dD1lKTtyZXR1cm4gZX1mdW5jdGlvbiBacihlKXtlLm5leHQucHJldj1lLnByZXY7ZS5wcmV2Lm5leHQ9ZS5uZXh0O2UucHJldlomJihlLnByZXZaLm5leHRaPWUubmV4dFopO2UubmV4dFomJihlLm5leHRaLnByZXZaPWUucHJldlopfWZ1bmN0aW9uIEpyKGUsdCxyKXt0aGlzLmk9ZTt0aGlzLng9dDt0aGlzLnk9cjt0aGlzLm5leHRaPXRoaXMucHJldlo9dGhpcy56PXRoaXMubmV4dD10aGlzLnByZXY9bnVsbDt0aGlzLnN0ZWluZXI9ITF9ZnVuY3Rpb24gUXIoZSl7dmFyIHQ9ZS5sZW5ndGg7Mjx0JiZlW3QtMV0uZXF1YWxzKGVbMF0pJiZlLnBvcCgpfWZ1bmN0aW9uIGVuKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspZS5wdXNoKHRbcl0ueCksZS5wdXNoKHRbcl0ueSl9ZnVuY3Rpb24gdG4oZSx0KXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRXh0cnVkZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6ZSxvcHRpb25zOnR9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBybihlLHQpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBybihlLEcpe2Z1bmN0aW9uIHQoZSl7ZnVuY3Rpb24gdChlLHQscil7dHx8Y29uc29sZS5lcnJvcihcIlRIUkVFLkV4dHJ1ZGVHZW9tZXRyeTogdmVjIGRvZXMgbm90IGV4aXN0XCIpO3JldHVybiB0LmNsb25lKCkubXVsdGlwbHlTY2FsYXIocikuYWRkKGUpfWZ1bmN0aW9uIHIoZSx0LHIpe3ZhciBuPWUueC10Lng7dmFyIGk9ZS55LXQueTt2YXIgbz1yLngtZS54O3ZhciBhPXIueS1lLnkscz1uKm4raSppO2lmKE1hdGguYWJzKG4qYS1pKm8pPk51bWJlci5FUFNJTE9OKXt2YXIgdT1NYXRoLnNxcnQocyksYz1NYXRoLnNxcnQobypvK2EqYSk7cz10LngtaS91O3Q9dC55K24vdTthPSgoci54LWEvYy1zKSphLShyLnkrby9jLXQpKm8pLyhuKmEtaSpvKTtvPXMrbiphLWUueDtuPXQraSphLWUueTtpPW8qbytuKm47aWYoMj49aSlyZXR1cm4gbmV3IE1lKG8sbik7aT1NYXRoLnNxcnQoaS8yKX1lbHNlIGU9ITEsbj5OdW1iZXIuRVBTSUxPTj9vPk51bWJlci5FUFNJTE9OJiYoZT0hMCk6bjwtTnVtYmVyLkVQU0lMT04/bzwtTnVtYmVyLkVQU0lMT04mJihlPSEwKTpNYXRoLnNpZ24oaSk9PT1NYXRoLnNpZ24oYSkmJihlPSEwKSxlPyhvPS1pLGk9TWF0aC5zcXJ0KHMpKToobz1uLG49aSxpPU1hdGguc3FydChzLzIpKTtyZXR1cm4gbmV3IE1lKG8vaSxuL2kpfWZ1bmN0aW9uIG4oZSx0KXtmb3IoTj1lLmxlbmd0aDswPD0tLU47KXt2YXIgcj1OO3ZhciBuPU4tMTswPm4mJihuPWUubGVuZ3RoLTEpO3ZhciBpLG89cCsyKm07Zm9yKGk9MDtpPG87aSsrKXt2YXIgYT1SKmkscz1SKihpKzEpLHU9dCtuK2EsYz10K24rcztzPXQrcitzO2wodCtyK2EpO2wodSk7bChzKTtsKHUpO2woYyk7bChzKTthPUgubGVuZ3RoLzM7YT1fLmdlbmVyYXRlU2lkZVdhbGxVVihWLEgsYS02LGEtMyxhLTIsYS0xKTtoKGFbMF0pO2goYVsxXSk7aChhWzNdKTtoKGFbMV0pO2goYVsyXSk7aChhWzNdKX19fWZ1bmN0aW9uIGkoZSx0LHIpe2EucHVzaChlKTthLnB1c2godCk7YS5wdXNoKHIpfWZ1bmN0aW9uIG8oZSx0LHIpe2woZSk7bCh0KTtsKHIpO2U9SC5sZW5ndGgvMztlPV8uZ2VuZXJhdGVUb3BVVihWLEgsZS0zLGUtMixlLTEpO2goZVswXSk7aChlWzFdKTtoKGVbMl0pfWZ1bmN0aW9uIGwoZSl7SC5wdXNoKGFbMyplXSk7SC5wdXNoKGFbMyplKzFdKTtILnB1c2goYVszKmUrMl0pfWZ1bmN0aW9uIGgoZSl7VS5wdXNoKGUueCk7VS5wdXNoKGUueSl9dmFyIGE9W10scz12b2lkIDAhPT1HLmN1cnZlU2VnbWVudHM/Ry5jdXJ2ZVNlZ21lbnRzOjEyLHA9dm9pZCAwIT09Ry5zdGVwcz9HLnN0ZXBzOjEsdT12b2lkIDAhPT1HLmRlcHRoP0cuZGVwdGg6MTAwLGM9dm9pZCAwIT09Ry5iZXZlbEVuYWJsZWQ/Ry5iZXZlbEVuYWJsZWQ6ITAsZj12b2lkIDAhPT1HLmJldmVsVGhpY2tuZXNzP0cuYmV2ZWxUaGlja25lc3M6NixkPXZvaWQgMCE9PUcuYmV2ZWxTaXplP0cuYmV2ZWxTaXplOmYtMix2PXZvaWQgMCE9PUcuYmV2ZWxPZmZzZXQ/Ry5iZXZlbE9mZnNldDowLG09dm9pZCAwIT09Ry5iZXZlbFNlZ21lbnRzP0cuYmV2ZWxTZWdtZW50czozLGc9Ry5leHRydWRlUGF0aCxfPXZvaWQgMCE9PUcuVVZHZW5lcmF0b3I/Ry5VVkdlbmVyYXRvcjpMdTt2b2lkIDAhPT1HLmFtb3VudCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeTogYW1vdW50IGhhcyBiZWVuIHJlbmFtZWQgdG8gZGVwdGguXCIpLHU9Ry5hbW91bnQpO3ZhciB5PSExO2lmKGcpe3ZhciBiPWcuZ2V0U3BhY2VkUG9pbnRzKHApO3k9ITA7Yz0hMTt2YXIgeD1nLmNvbXB1dGVGcmVuZXRGcmFtZXMocCwhMSk7dmFyIHc9bmV3IFRlO3ZhciBTPW5ldyBUZTt2YXIgTT1uZXcgVGV9Y3x8KHY9ZD1mPW09MCk7dmFyIEM7cz1lLmV4dHJhY3RQb2ludHMocyk7ZT1zLnNoYXBlO3ZhciBUPXMuaG9sZXM7aWYoIWt1LmlzQ2xvY2tXaXNlKGUpKXtlPWUucmV2ZXJzZSgpO3ZhciBFPTA7Zm9yKEM9VC5sZW5ndGg7RTxDO0UrKyl7dmFyIE89VFtFXTtrdS5pc0Nsb2NrV2lzZShPKSYmKFRbRV09Ty5yZXZlcnNlKCkpfX12YXIgUD1rdS50cmlhbmd1bGF0ZVNoYXBlKGUsVCksQT1lO0U9MDtmb3IoQz1ULmxlbmd0aDtFPEM7RSsrKU89VFtFXSxlPWUuY29uY2F0KE8pO3ZhciBqLFI9ZS5sZW5ndGgsayxMPVAubGVuZ3RoO3M9W107dmFyIE49MDt2YXIgST1BLmxlbmd0aDt2YXIgRD1JLTE7Zm9yKGo9TisxO048STtOKyssRCsrLGorKylEPT09SSYmKEQ9MCksaj09PUkmJihqPTApLHNbTl09cihBW05dLEFbRF0sQVtqXSk7Zz1bXTt2YXIgQj1zLmNvbmNhdCgpO0U9MDtmb3IoQz1ULmxlbmd0aDtFPEM7RSsrKXtPPVRbRV07dmFyIEY9W107Tj0wO0k9Ty5sZW5ndGg7RD1JLTE7Zm9yKGo9TisxO048STtOKyssRCsrLGorKylEPT09SSYmKEQ9MCksaj09PUkmJihqPTApLEZbTl09cihPW05dLE9bRF0sT1tqXSk7Zy5wdXNoKEYpO0I9Qi5jb25jYXQoRil9Zm9yKEQ9MDtEPG07RCsrKXtJPUQvbTt2YXIgej1mKk1hdGguY29zKEkqTWF0aC5QSS8yKTtqPWQqTWF0aC5zaW4oSSpNYXRoLlBJLzIpK3Y7Tj0wO2ZvcihJPUEubGVuZ3RoO048STtOKyspe3ZhciAkPXQoQVtOXSxzW05dLGopO2koJC54LCQueSwteil9RT0wO2ZvcihDPVQubGVuZ3RoO0U8QztFKyspZm9yKE89VFtFXSxGPWdbRV0sTj0wLEk9Ty5sZW5ndGg7TjxJO04rKykkPXQoT1tOXSxGW05dLGopLGkoJC54LCQueSwteil9aj1kK3Y7Zm9yKE49MDtOPFI7TisrKSQ9Yz90KGVbTl0sQltOXSxqKTplW05dLHk/KFMuY29weSh4Lm5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKCQueCksdy5jb3B5KHguYmlub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcigkLnkpLE0uY29weShiWzBdKS5hZGQoUykuYWRkKHcpLGkoTS54LE0ueSxNLnopKTppKCQueCwkLnksMCk7Zm9yKEk9MTtJPD1wO0krKylmb3IoTj0wO048UjtOKyspJD1jP3QoZVtOXSxCW05dLGopOmVbTl0seT8oUy5jb3B5KHgubm9ybWFsc1tJXSkubXVsdGlwbHlTY2FsYXIoJC54KSx3LmNvcHkoeC5iaW5vcm1hbHNbSV0pLm11bHRpcGx5U2NhbGFyKCQueSksTS5jb3B5KGJbSV0pLmFkZChTKS5hZGQodyksaShNLngsTS55LE0ueikpOmkoJC54LCQueSx1L3AqSSk7Zm9yKEQ9bS0xOzA8PUQ7RC0tKXtJPUQvbTt6PWYqTWF0aC5jb3MoSSpNYXRoLlBJLzIpO2o9ZCpNYXRoLnNpbihJKk1hdGguUEkvMikrdjtOPTA7Zm9yKEk9QS5sZW5ndGg7TjxJO04rKykkPXQoQVtOXSxzW05dLGopLGkoJC54LCQueSx1K3opO0U9MDtmb3IoQz1ULmxlbmd0aDtFPEM7RSsrKWZvcihPPVRbRV0sRj1nW0VdLE49MCxJPU8ubGVuZ3RoO048STtOKyspJD10KE9bTl0sRltOXSxqKSx5P2koJC54LCQueStiW3AtMV0ueSxiW3AtMV0ueCt6KTppKCQueCwkLnksdSt6KX0oZnVuY3Rpb24oKXt2YXIgZT1ILmxlbmd0aC8zO2lmKGMpe3ZhciB0PTAqUjtmb3IoTj0wO048TDtOKyspaz1QW05dLG8oa1syXSt0LGtbMV0rdCxrWzBdK3QpO3Q9UioocCsyKm0pO2ZvcihOPTA7TjxMO04rKylrPVBbTl0sbyhrWzBdK3Qsa1sxXSt0LGtbMl0rdCl9ZWxzZXtmb3IoTj0wO048TDtOKyspaz1QW05dLG8oa1syXSxrWzFdLGtbMF0pO2ZvcihOPTA7TjxMO04rKylrPVBbTl0sbyhrWzBdK1IqcCxrWzFdK1IqcCxrWzJdK1IqcCl9Vi5hZGRHcm91cChlLEgubGVuZ3RoLzMtZSwwKX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGU9SC5sZW5ndGgvMyx0PTA7bihBLHQpO3QrPUEubGVuZ3RoO0U9MDtmb3IoQz1ULmxlbmd0aDtFPEM7RSsrKU89VFtFXSxuKE8sdCksdCs9Ty5sZW5ndGg7Vi5hZGRHcm91cChlLEgubGVuZ3RoLzMtZSwxKX0pKCl9Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17c2hhcGVzOmUsb3B0aW9uczpHfTtlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKHZhciBWPXRoaXMsSD1bXSxVPVtdLHI9MCxuPWUubGVuZ3RoO3I8bjtyKyspdChlW3JdKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooSCwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKFUsMikpO3RoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKX1mdW5jdGlvbiBubihlLHQscil7ci5zaGFwZXM9W107aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIG49MCxpPWUubGVuZ3RoO248aTtuKyspci5zaGFwZXMucHVzaChlW25dLnV1aWQpO2Vsc2Ugci5zaGFwZXMucHVzaChlLnV1aWQpO3ZvaWQgMCE9PXQuZXh0cnVkZVBhdGgmJihyLm9wdGlvbnMuZXh0cnVkZVBhdGg9dC5leHRydWRlUGF0aC50b0pTT04oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gb24oZSx0KXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVGV4dEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt0ZXh0OmUscGFyYW1ldGVyczp0fTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYW4oZSx0KSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gYW4oZSx0KXt0PXR8fHt9O3ZhciByPXQuZm9udDtpZighcnx8IXIuaXNGb250KXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuVGV4dEdlb21ldHJ5OiBmb250IHBhcmFtZXRlciBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRm9udC5cIiksbmV3IEY7ZT1yLmdlbmVyYXRlU2hhcGVzKGUsdC5zaXplKTt0LmRlcHRoPXZvaWQgMCE9PXQuaGVpZ2h0P3QuaGVpZ2h0OjUwO3ZvaWQgMD09PXQuYmV2ZWxUaGlja25lc3MmJih0LmJldmVsVGhpY2tuZXNzPTEwKTt2b2lkIDA9PT10LmJldmVsU2l6ZSYmKHQuYmV2ZWxTaXplPTgpO3ZvaWQgMD09PXQuYmV2ZWxFbmFibGVkJiYodC5iZXZlbEVuYWJsZWQ9ITEpO3JuLmNhbGwodGhpcyxlLHQpO3RoaXMudHlwZT1cIlRleHRCdWZmZXJHZW9tZXRyeVwifWZ1bmN0aW9uIHNuKGUsdCxyLG4saSxvLGEpe0YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcGhlcmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsd2lkdGhTZWdtZW50czp0LGhlaWdodFNlZ21lbnRzOnIscGhpU3RhcnQ6bixwaGlMZW5ndGg6aSx0aGV0YVN0YXJ0Om8sdGhldGFMZW5ndGg6YX07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IHVuKGUsdCxyLG4saSxvLGEpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiB1bihlLHQscixuLGksbyxhKXtOLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czplLHdpZHRoU2VnbWVudHM6dCxoZWlnaHRTZWdtZW50czpyLHBoaVN0YXJ0Om4scGhpTGVuZ3RoOmksdGhldGFTdGFydDpvLHRoZXRhTGVuZ3RoOmF9O2U9ZXx8MTt0PU1hdGgubWF4KDMsTWF0aC5mbG9vcih0KXx8OCk7cj1NYXRoLm1heCgyLE1hdGguZmxvb3Iocil8fDYpO249dm9pZCAwIT09bj9uOjA7aT12b2lkIDAhPT1pP2k6MipNYXRoLlBJO289dm9pZCAwIT09bz9vOjA7YT12b2lkIDAhPT1hP2E6TWF0aC5QSTt2YXIgcz1NYXRoLm1pbihvK2EsTWF0aC5QSSksdSxjLGw9MCxoPVtdLHA9bmV3IFRlLGY9bmV3IFRlLGQ9W10sdj1bXSxtPVtdLGc9W107Zm9yKGM9MDtjPD1yO2MrKyl7dmFyIF89W10seT1jL3IsYj0wOzA9PWMmJjA9PW8/Yj0uNS90OmM9PXImJnM9PU1hdGguUEkmJihiPS0uNS90KTtmb3IodT0wO3U8PXQ7dSsrKXt2YXIgeD11L3Q7cC54PS1lKk1hdGguY29zKG4reCppKSpNYXRoLnNpbihvK3kqYSk7cC55PWUqTWF0aC5jb3Mobyt5KmEpO3Auej1lKk1hdGguc2luKG4reCppKSpNYXRoLnNpbihvK3kqYSk7di5wdXNoKHAueCxwLnkscC56KTtmLmNvcHkocCkubm9ybWFsaXplKCk7bS5wdXNoKGYueCxmLnksZi56KTtnLnB1c2goeCtiLDEteSk7Xy5wdXNoKGwrKyl9aC5wdXNoKF8pfWZvcihjPTA7YzxyO2MrKylmb3IodT0wO3U8dDt1KyspZT1oW2NdW3UrMV0sbj1oW2NdW3VdLGk9aFtjKzFdW3VdLGE9aFtjKzFdW3UrMV0sKDAhPT1jfHwwPG8pJiZkLnB1c2goZSxuLGEpLChjIT09ci0xfHxzPE1hdGguUEkpJiZkLnB1c2gobixpLGEpO3RoaXMuc2V0SW5kZXgoZCk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKHYsMykpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGoobSwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKGcsMikpfWZ1bmN0aW9uIGNuKGUsdCxyLG4saSxvKXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUmluZ0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtpbm5lclJhZGl1czplLG91dGVyUmFkaXVzOnQsdGhldGFTZWdtZW50czpyLHBoaVNlZ21lbnRzOm4sdGhldGFTdGFydDppLHRoZXRhTGVuZ3RoOm99O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBsbihlLHQscixuLGksbykpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGxuKGUsdCxyLG4saSxvKXtOLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUmluZ0J1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtpbm5lclJhZGl1czplLG91dGVyUmFkaXVzOnQsdGhldGFTZWdtZW50czpyLHBoaVNlZ21lbnRzOm4sdGhldGFTdGFydDppLHRoZXRhTGVuZ3RoOm99O2U9ZXx8LjU7dD10fHwxO2k9dm9pZCAwIT09aT9pOjA7bz12b2lkIDAhPT1vP286MipNYXRoLlBJO3I9dm9pZCAwIT09cj9NYXRoLm1heCgzLHIpOjg7bj12b2lkIDAhPT1uP01hdGgubWF4KDEsbik6MTt2YXIgYT1bXSxzPVtdLHU9W10sYz1bXSxsPWUsaD0odC1lKS9uLHA9bmV3IFRlLGY9bmV3IE1lLGQsdjtmb3IoZD0wO2Q8PW47ZCsrKXtmb3Iodj0wO3Y8PXI7disrKWU9aSt2L3IqbyxwLng9bCpNYXRoLmNvcyhlKSxwLnk9bCpNYXRoLnNpbihlKSxzLnB1c2gocC54LHAueSxwLnopLHUucHVzaCgwLDAsMSksZi54PShwLngvdCsxKS8yLGYueT0ocC55L3QrMSkvMixjLnB1c2goZi54LGYueSk7bCs9aH1mb3IoZD0wO2Q8bjtkKyspZm9yKHQ9ZCoocisxKSx2PTA7djxyO3YrKyllPXYrdCxpPWUrcisxLG89ZStyKzIsbD1lKzEsYS5wdXNoKGUsaSxsKSxhLnB1c2goaSxvLGwpO3RoaXMuc2V0SW5kZXgoYSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKHMsMykpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGoodSwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKGMsMikpfWZ1bmN0aW9uIGhuKGUsdCxyLG4pe0YuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMYXRoZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtwb2ludHM6ZSxzZWdtZW50czp0LHBoaVN0YXJ0OnIscGhpTGVuZ3RoOm59O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBwbihlLHQscixuKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gcG4oZSx0LHIsbil7Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BvaW50czplLHNlZ21lbnRzOnQscGhpU3RhcnQ6cixwaGlMZW5ndGg6bn07dD1NYXRoLmZsb29yKHQpfHwxMjtyPXJ8fDA7bj1ufHwyKk1hdGguUEk7bj1Wby5jbGFtcChuLDAsMipNYXRoLlBJKTt2YXIgaT1bXSxvPVtdLGE9W10scz0xL3QsdT1uZXcgVGUsYz1uZXcgTWUsbDtmb3IobD0wO2w8PXQ7bCsrKXt2YXIgaD1yK2wqcypuO3ZhciBwPU1hdGguc2luKGgpLGY9TWF0aC5jb3MoaCk7Zm9yKGg9MDtoPD1lLmxlbmd0aC0xO2grKyl1Lng9ZVtoXS54KnAsdS55PWVbaF0ueSx1Lno9ZVtoXS54KmYsby5wdXNoKHUueCx1LnksdS56KSxjLng9bC90LGMueT1oLyhlLmxlbmd0aC0xKSxhLnB1c2goYy54LGMueSl9Zm9yKGw9MDtsPHQ7bCsrKWZvcihoPTA7aDxlLmxlbmd0aC0xO2grKylyPWgrbCplLmxlbmd0aCxzPXIrZS5sZW5ndGgsdT1yK2UubGVuZ3RoKzEsYz1yKzEsaS5wdXNoKHIscyxjKSxpLnB1c2gocyx1LGMpO3RoaXMuc2V0SW5kZXgoaSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKG8sMykpO3RoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgaihhLDIpKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7aWYobj09PTIqTWF0aC5QSSlmb3Iobj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGk9bmV3IFRlLG89bmV3IFRlLGE9bmV3IFRlLHI9dCplLmxlbmd0aCozLGg9bD0wO2w8ZS5sZW5ndGg7bCsrLGgrPTMpaS54PW5baCswXSxpLnk9bltoKzFdLGkuej1uW2grMl0sby54PW5bcitoKzBdLG8ueT1uW3IraCsxXSxvLno9bltyK2grMl0sYS5hZGRWZWN0b3JzKGksbykubm9ybWFsaXplKCksbltoKzBdPW5bcitoKzBdPWEueCxuW2grMV09bltyK2grMV09YS55LG5baCsyXT1uW3IraCsyXT1hLnp9ZnVuY3Rpb24gZm4oZSx0KXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU2hhcGVHZW9tZXRyeVwiO1wib2JqZWN0XCI9PT10eXBlb2YgdCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlR2VvbWV0cnk6IE9wdGlvbnMgcGFyYW1ldGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpLHQ9dC5jdXJ2ZVNlZ21lbnRzKTt0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczplLGN1cnZlU2VnbWVudHM6dH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGRuKGUsdCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGRuKGUscyl7ZnVuY3Rpb24gdChlKXt2YXIgdCxyPWMubGVuZ3RoLzM7ZT1lLmV4dHJhY3RQb2ludHMocyk7dmFyIG49ZS5zaGFwZSxpPWUuaG9sZXM7ITE9PT1rdS5pc0Nsb2NrV2lzZShuKSYmKG49bi5yZXZlcnNlKCkpO2U9MDtmb3IodD1pLmxlbmd0aDtlPHQ7ZSsrKXt2YXIgbz1pW2VdOyEwPT09a3UuaXNDbG9ja1dpc2UobykmJihpW2VdPW8ucmV2ZXJzZSgpKX12YXIgYT1rdS50cmlhbmd1bGF0ZVNoYXBlKG4saSk7ZT0wO2Zvcih0PWkubGVuZ3RoO2U8dDtlKyspbz1pW2VdLG49bi5jb25jYXQobyk7ZT0wO2Zvcih0PW4ubGVuZ3RoO2U8dDtlKyspbz1uW2VdLGMucHVzaChvLngsby55LDApLGwucHVzaCgwLDAsMSksaC5wdXNoKG8ueCxvLnkpO2U9MDtmb3IodD1hLmxlbmd0aDtlPHQ7ZSsrKW49YVtlXSx1LnB1c2goblswXStyLG5bMV0rcixuWzJdK3IpLHArPTN9Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYXBlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczplLGN1cnZlU2VnbWVudHM6c307cz1zfHwxMjt2YXIgdT1bXSxjPVtdLGw9W10saD1bXSxyPTAscD0wO2lmKCExPT09QXJyYXkuaXNBcnJheShlKSl0KGUpO2Vsc2UgZm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdChlW25dKSx0aGlzLmFkZEdyb3VwKHIscCxuKSxyKz1wLHA9MDt0aGlzLnNldEluZGV4KHUpO3RoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaihjLDMpKTt0aGlzLnNldEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBqKGwsMykpO3RoaXMuc2V0QXR0cmlidXRlKFwidXZcIixuZXcgaihoLDIpKX1mdW5jdGlvbiB2bihlLHQpe3Quc2hhcGVzPVtdO2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTAsbj1lLmxlbmd0aDtyPG47cisrKXQuc2hhcGVzLnB1c2goZVtyXS51dWlkKTtlbHNlIHQuc2hhcGVzLnB1c2goZS51dWlkKTtyZXR1cm4gdH1mdW5jdGlvbiBtbihlLHQpe04uY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJFZGdlc0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt0aHJlc2hvbGRBbmdsZTp0fTt2YXIgcj1bXTt0PU1hdGguY29zKFZvLkRFRzJSQUQqKHZvaWQgMCE9PXQ/dDoxKSk7dmFyIG49WzAsMF0saT17fSxvPVtcImFcIixcImJcIixcImNcIl07aWYoZS5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgYT1uZXcgRjthLmZyb21CdWZmZXJHZW9tZXRyeShlKX1lbHNlIGE9ZS5jbG9uZSgpO2EubWVyZ2VWZXJ0aWNlcygpO2EuY29tcHV0ZUZhY2VOb3JtYWxzKCk7ZT1hLnZlcnRpY2VzO2E9YS5mYWNlcztmb3IodmFyIHM9MCx1PWEubGVuZ3RoO3M8dTtzKyspZm9yKHZhciBjPWFbc10sbD0wOzM+bDtsKyspe3ZhciBoPWNbb1tsXV07dmFyIHA9Y1tvWyhsKzEpJTNdXTtuWzBdPU1hdGgubWluKGgscCk7blsxXT1NYXRoLm1heChoLHApO2g9blswXStcIixcIituWzFdO3ZvaWQgMD09PWlbaF0/aVtoXT17aW5kZXgxOm5bMF0saW5kZXgyOm5bMV0sZmFjZTE6cyxmYWNlMjp2b2lkIDB9OmlbaF0uZmFjZTI9c31mb3IoaCBpbiBpKWlmKG49aVtoXSx2b2lkIDA9PT1uLmZhY2UyfHxhW24uZmFjZTFdLm5vcm1hbC5kb3QoYVtuLmZhY2UyXS5ub3JtYWwpPD10KW89ZVtuLmluZGV4MV0sci5wdXNoKG8ueCxvLnksby56KSxvPWVbbi5pbmRleDJdLHIucHVzaChvLngsby55LG8ueik7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKHIsMykpfWZ1bmN0aW9uIGduKGUsdCxyLG4saSxvLGEscyl7Ri5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN5bGluZGVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1c1RvcDplLHJhZGl1c0JvdHRvbTp0LGhlaWdodDpyLHJhZGlhbFNlZ21lbnRzOm4saGVpZ2h0U2VnbWVudHM6aSxvcGVuRW5kZWQ6byx0aGV0YVN0YXJ0OmEsdGhldGFMZW5ndGg6c307dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IF9uKGUsdCxyLG4saSxvLGEscykpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIF9uKHAsZixkLHYsbSxlLGcsXyl7ZnVuY3Rpb24gdChlKXt2YXIgdCxyPW5ldyBNZSxuPW5ldyBUZSxpPTAsbz0hMD09PWU/cDpmLGE9ITA9PT1lPzE6LTE7dmFyIHM9TTtmb3IodD0xO3Q8PXY7dCsrKXgucHVzaCgwLFQqYSwwKSx3LnB1c2goMCxhLDApLFMucHVzaCguNSwuNSksTSsrO3ZhciB1PU07Zm9yKHQ9MDt0PD12O3QrKyl7dmFyIGM9dC92Kl8rZyxsPU1hdGguY29zKGMpO2M9TWF0aC5zaW4oYyk7bi54PW8qYztuLnk9VCphO24uej1vKmw7eC5wdXNoKG4ueCxuLnksbi56KTt3LnB1c2goMCxhLDApO3IueD0uNSpsKy41O3IueT0uNSpjKmErLjU7Uy5wdXNoKHIueCxyLnkpO00rK31mb3IodD0wO3Q8djt0Kyspcj1zK3Qsbj11K3QsITA9PT1lP2IucHVzaChuLG4rMSxyKTpiLnB1c2gobisxLG4sciksaSs9Mzt5LmFkZEdyb3VwKEUsaSwhMD09PWU/MToyKTtFKz1pfU4uY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6cCxyYWRpdXNCb3R0b206ZixoZWlnaHQ6ZCxyYWRpYWxTZWdtZW50czp2LGhlaWdodFNlZ21lbnRzOm0sb3BlbkVuZGVkOmUsdGhldGFTdGFydDpnLHRoZXRhTGVuZ3RoOl99O3ZhciB5PXRoaXM7cD12b2lkIDAhPT1wP3A6MTtmPXZvaWQgMCE9PWY/ZjoxO2Q9ZHx8MTt2PU1hdGguZmxvb3Iodil8fDg7bT1NYXRoLmZsb29yKG0pfHwxO2U9dm9pZCAwIT09ZT9lOiExO2c9dm9pZCAwIT09Zz9nOjA7Xz12b2lkIDAhPT1fP186MipNYXRoLlBJO3ZhciBiPVtdLHg9W10sdz1bXSxTPVtdLE09MCxDPVtdLFQ9ZC8yLEU9MDsoZnVuY3Rpb24oKXt2YXIgZSx0LHI9bmV3IFRlLG49bmV3IFRlLGk9MCxvPShmLXApL2Q7Zm9yKHQ9MDt0PD1tO3QrKyl7dmFyIGE9W10scz10L20sdT1zKihmLXApK3A7Zm9yKGU9MDtlPD12O2UrKyl7dmFyIGM9ZS92LGw9YypfK2csaD1NYXRoLnNpbihsKTtsPU1hdGguY29zKGwpO24ueD11Kmg7bi55PS1zKmQrVDtuLno9dSpsO3gucHVzaChuLngsbi55LG4ueik7ci5zZXQoaCxvLGwpLm5vcm1hbGl6ZSgpO3cucHVzaChyLngsci55LHIueik7Uy5wdXNoKGMsMS1zKTthLnB1c2goTSsrKX1DLnB1c2goYSl9Zm9yKGU9MDtlPHY7ZSsrKWZvcih0PTA7dDxtO3QrKylyPUNbdCsxXVtlXSxuPUNbdCsxXVtlKzFdLG89Q1t0XVtlKzFdLGIucHVzaChDW3RdW2VdLHIsbyksYi5wdXNoKHIsbixvKSxpKz02O3kuYWRkR3JvdXAoRSxpLDApO0UrPWl9KSgpOyExPT09ZSYmKDA8cCYmdCghMCksMDxmJiZ0KCExKSk7dGhpcy5zZXRJbmRleChiKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooeCwzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgaih3LDMpKTt0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IGooUywyKSl9ZnVuY3Rpb24geW4oZSx0LHIsbixpLG8sYSl7Z24uY2FsbCh0aGlzLDAsZSx0LHIsbixpLG8sYSk7dGhpcy50eXBlPVwiQ29uZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6ZSxoZWlnaHQ6dCxyYWRpYWxTZWdtZW50czpyLGhlaWdodFNlZ21lbnRzOm4sb3BlbkVuZGVkOmksdGhldGFTdGFydDpvLHRoZXRhTGVuZ3RoOmF9fWZ1bmN0aW9uIGJuKGUsdCxyLG4saSxvLGEpe19uLmNhbGwodGhpcywwLGUsdCxyLG4saSxvLGEpO3RoaXMudHlwZT1cIkNvbmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmUsaGVpZ2h0OnQscmFkaWFsU2VnbWVudHM6cixoZWlnaHRTZWdtZW50czpuLG9wZW5FbmRlZDppLHRoZXRhU3RhcnQ6byx0aGV0YUxlbmd0aDphfX1mdW5jdGlvbiB4bihlLHQscixuKXtGLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2lyY2xlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czplLHNlZ21lbnRzOnQsdGhldGFTdGFydDpyLHRoZXRhTGVuZ3RoOm59O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyB3bihlLHQscixuKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gd24oZSx0LHIsbil7Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6ZSxzZWdtZW50czp0LHRoZXRhU3RhcnQ6cix0aGV0YUxlbmd0aDpufTtlPWV8fDE7dD12b2lkIDAhPT10P01hdGgubWF4KDMsdCk6ODtyPXZvaWQgMCE9PXI/cjowO249dm9pZCAwIT09bj9uOjIqTWF0aC5QSTt2YXIgaT1bXSxvPVtdLGE9W10scz1bXSx1LGM9bmV3IFRlLGw9bmV3IE1lO28ucHVzaCgwLDAsMCk7YS5wdXNoKDAsMCwxKTtzLnB1c2goLjUsLjUpO3ZhciBoPTA7Zm9yKHU9MztoPD10O2grKyx1Kz0zKXt2YXIgcD1yK2gvdCpuO2MueD1lKk1hdGguY29zKHApO2MueT1lKk1hdGguc2luKHApO28ucHVzaChjLngsYy55LGMueik7YS5wdXNoKDAsMCwxKTtsLng9KG9bdV0vZSsxKS8yO2wueT0ob1t1KzFdL2UrMSkvMjtzLnB1c2gobC54LGwueSl9Zm9yKHU9MTt1PD10O3UrKylpLnB1c2godSx1KzEsMCk7dGhpcy5zZXRJbmRleChpKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGoobywzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgaihhLDMpKTt0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IGoocywyKSl9ZnVuY3Rpb24gU24oZSl7eS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYWRvd01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgdigwKTt0aGlzLnRyYW5zcGFyZW50PSEwO3RoaXMuc2V0VmFsdWVzKGUpfWZ1bmN0aW9uIE1uKGUpe0cuY2FsbCh0aGlzLGUpO3RoaXMudHlwZT1cIlJhd1NoYWRlck1hdGVyaWFsXCJ9ZnVuY3Rpb24gQ24oZSl7eS5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn07dGhpcy50eXBlPVwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyB2KDE2Nzc3MjE1KTt0aGlzLnJvdWdobmVzcz0xO3RoaXMubWV0YWxuZXNzPTA7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IHYoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT0wO3RoaXMubm9ybWFsU2NhbGU9bmV3IE1lKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLm1ldGFsbmVzc01hcD10aGlzLnJvdWdobmVzc01hcD1udWxsO3RoaXMuZW52TWFwSW50ZW5zaXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMudmVydGV4VGFuZ2VudHM9dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhlKX1mdW5jdGlvbiBUbihlKXtDbi5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIixQSFlTSUNBTDpcIlwifTt0aGlzLnR5cGU9XCJNZXNoUGh5c2ljYWxNYXRlcmlhbFwiO3RoaXMuY2xlYXJjb2F0PTA7dGhpcy5jbGVhcmNvYXRNYXA9bnVsbDt0aGlzLmNsZWFyY29hdFJvdWdobmVzcz0wO3RoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwPW51bGw7dGhpcy5jbGVhcmNvYXROb3JtYWxTY2FsZT1uZXcgTWUoMSwxKTt0aGlzLmNsZWFyY29hdE5vcm1hbE1hcD1udWxsO3RoaXMucmVmbGVjdGl2aXR5PS41O3RoaXMuc2hlZW49bnVsbDt0aGlzLnRyYW5zcGFyZW5jeT0wO3RoaXMuc2V0VmFsdWVzKGUpfWZ1bmN0aW9uIEVuKGUpe3kuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IHYoMTY3NzcyMTUpO3RoaXMuc3BlY3VsYXI9bmV3IHYoMTExODQ4MSk7dGhpcy5zaGluaW5lc3M9MzA7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IHYoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT0wO3RoaXMubm9ybWFsU2NhbGU9bmV3IE1lKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5jb21iaW5lPTA7dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhlKX1mdW5jdGlvbiBPbihlKXt5LmNhbGwodGhpcyk7dGhpcy5kZWZpbmVzPXtUT09OOlwiXCJ9O3RoaXMudHlwZT1cIk1lc2hUb29uTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyB2KDE2Nzc3MjE1KTt0aGlzLnNwZWN1bGFyPW5ldyB2KDExMTg0ODEpO3RoaXMuc2hpbmluZXNzPTMwO3RoaXMubGlnaHRNYXA9dGhpcy5ncmFkaWVudE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IHYoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT0wO3RoaXMubm9ybWFsU2NhbGU9bmV3IE1lKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5hbHBoYU1hcD10aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhlKX1mdW5jdGlvbiBQbihlKXt5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaE5vcm1hbE1hdGVyaWFsXCI7dGhpcy5idW1wTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT0wO3RoaXMubm9ybWFsU2NhbGU9bmV3IE1lKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPXRoaXMuZm9nPSExO3RoaXMuc2V0VmFsdWVzKGUpfWZ1bmN0aW9uIEFuKGUpe3kuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoTGFtYmVydE1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgdigxNjc3NzIxNSk7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IHYoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5zcGVjdWxhck1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5jb21iaW5lPTA7dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhlKX1mdW5jdGlvbiBqbihlKXt5LmNhbGwodGhpcyk7dGhpcy5kZWZpbmVzPXtNQVRDQVA6XCJcIn07dGhpcy50eXBlPVwiTWVzaE1hdGNhcE1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgdigxNjc3NzIxNSk7dGhpcy5idW1wTWFwPXRoaXMubWFwPXRoaXMubWF0Y2FwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsTWFwVHlwZT0wO3RoaXMubm9ybWFsU2NhbGU9bmV3IE1lKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5hbHBoYU1hcD1udWxsO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoZSl9ZnVuY3Rpb24gUm4oZSl7aXIuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lRGFzaGVkTWF0ZXJpYWxcIjt0aGlzLnNjYWxlPTE7dGhpcy5kYXNoU2l6ZT0zO3RoaXMuZ2FwU2l6ZT0xO3RoaXMuc2V0VmFsdWVzKGUpfWZ1bmN0aW9uIGtuKGUsdCxyLG4pe3RoaXMucGFyYW1ldGVyUG9zaXRpb25zPWU7dGhpcy5fY2FjaGVkSW5kZXg9MDt0aGlzLnJlc3VsdEJ1ZmZlcj12b2lkIDAhPT1uP246bmV3IHQuY29uc3RydWN0b3Iocik7dGhpcy5zYW1wbGVWYWx1ZXM9dDt0aGlzLnZhbHVlU2l6ZT1yfWZ1bmN0aW9uIExuKGUsdCxyLG4pe2tuLmNhbGwodGhpcyxlLHQscixuKTt0aGlzLl9vZmZzZXROZXh0PXRoaXMuX3dlaWdodE5leHQ9dGhpcy5fb2Zmc2V0UHJldj10aGlzLl93ZWlnaHRQcmV2PS0wfWZ1bmN0aW9uIE5uKGUsdCxyLG4pe2tuLmNhbGwodGhpcyxlLHQscixuKX1mdW5jdGlvbiBJbihlLHQscixuKXtrbi5jYWxsKHRoaXMsZSx0LHIsbil9ZnVuY3Rpb24gRG4oZSx0LHIsbil7aWYodm9pZCAwPT09ZSl0aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIG5hbWUgaXMgdW5kZWZpbmVkXCIpO2lmKHZvaWQgMD09PXR8fDA9PT10Lmxlbmd0aCl0aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IG5vIGtleWZyYW1lcyBpbiB0cmFjayBuYW1lZCBcIitlKTt0aGlzLm5hbWU9ZTt0aGlzLnRpbWVzPUR1LmNvbnZlcnRBcnJheSh0LHRoaXMuVGltZUJ1ZmZlclR5cGUpO3RoaXMudmFsdWVzPUR1LmNvbnZlcnRBcnJheShyLHRoaXMuVmFsdWVCdWZmZXJUeXBlKTt0aGlzLnNldEludGVycG9sYXRpb24obnx8dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbil9ZnVuY3Rpb24gQm4oZSx0LHIpe0RuLmNhbGwodGhpcyxlLHQscil9ZnVuY3Rpb24gRm4oZSx0LHIsbil7RG4uY2FsbCh0aGlzLGUsdCxyLG4pfWZ1bmN0aW9uIHpuKGUsdCxyLG4pe0RuLmNhbGwodGhpcyxlLHQscixuKX1mdW5jdGlvbiAkbihlLHQscixuKXtrbi5jYWxsKHRoaXMsZSx0LHIsbil9ZnVuY3Rpb24gR24oZSx0LHIsbil7RG4uY2FsbCh0aGlzLGUsdCxyLG4pfWZ1bmN0aW9uIFZuKGUsdCxyLG4pe0RuLmNhbGwodGhpcyxlLHQscixuKX1mdW5jdGlvbiBIbihlLHQscixuKXtEbi5jYWxsKHRoaXMsZSx0LHIsbil9ZnVuY3Rpb24gVW4oZSx0LHIsbil7dGhpcy5uYW1lPWU7dGhpcy50cmFja3M9cjt0aGlzLmR1cmF0aW9uPXZvaWQgMCE9PXQ/dDotMTt0aGlzLmJsZW5kTW9kZT12b2lkIDAhPT1uP246MjUwMDt0aGlzLnV1aWQ9Vm8uZ2VuZXJhdGVVVUlEKCk7MD50aGlzLmR1cmF0aW9uJiZ0aGlzLnJlc2V0RHVyYXRpb24oKX1mdW5jdGlvbiBxbihlKXtzd2l0Y2goZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJzY2FsYXJcIjpjYXNlXCJkb3VibGVcIjpjYXNlXCJmbG9hdFwiOmNhc2VcIm51bWJlclwiOmNhc2VcImludGVnZXJcIjpyZXR1cm4gem47Y2FzZVwidmVjdG9yXCI6Y2FzZVwidmVjdG9yMlwiOmNhc2VcInZlY3RvcjNcIjpjYXNlXCJ2ZWN0b3I0XCI6cmV0dXJuIEhuO2Nhc2VcImNvbG9yXCI6cmV0dXJuIEZuO2Nhc2VcInF1YXRlcm5pb25cIjpyZXR1cm4gR247Y2FzZVwiYm9vbFwiOmNhc2VcImJvb2xlYW5cIjpyZXR1cm4gQm47Y2FzZVwic3RyaW5nXCI6cmV0dXJuIFZufXRocm93IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVW5zdXBwb3J0ZWQgdHlwZU5hbWU6IFwiK2UpfWZ1bmN0aW9uIFduKGUpe2lmKHZvaWQgMD09PWUudHlwZSl0aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIHR5cGUgdW5kZWZpbmVkLCBjYW4gbm90IHBhcnNlXCIpO3ZhciB0PXFuKGUudHlwZSk7aWYodm9pZCAwPT09ZS50aW1lcyl7dmFyIHI9W10sbj1bXTtEdS5mbGF0dGVuSlNPTihlLmtleXMscixuLFwidmFsdWVcIik7ZS50aW1lcz1yO2UudmFsdWVzPW59cmV0dXJuIHZvaWQgMCE9PXQucGFyc2U/dC5wYXJzZShlKTpuZXcgdChlLm5hbWUsZS50aW1lcyxlLnZhbHVlcyxlLmludGVycG9sYXRpb24pfWZ1bmN0aW9uIFhuKGUsdCxyKXt2YXIgbj10aGlzLGk9ITEsbz0wLGE9MCxzPXZvaWQgMCx1PVtdO3RoaXMub25TdGFydD12b2lkIDA7dGhpcy5vbkxvYWQ9ZTt0aGlzLm9uUHJvZ3Jlc3M9dDt0aGlzLm9uRXJyb3I9cjt0aGlzLml0ZW1TdGFydD1mdW5jdGlvbihlKXthKys7aWYoITE9PT1pJiZ2b2lkIDAhPT1uLm9uU3RhcnQpbi5vblN0YXJ0KGUsbyxhKTtpPSEwfTt0aGlzLml0ZW1FbmQ9ZnVuY3Rpb24oZSl7bysrO2lmKHZvaWQgMCE9PW4ub25Qcm9ncmVzcyluLm9uUHJvZ3Jlc3MoZSxvLGEpO2lmKG89PT1hJiYoaT0hMSx2b2lkIDAhPT1uLm9uTG9hZCkpbi5vbkxvYWQoKX07dGhpcy5pdGVtRXJyb3I9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09bi5vbkVycm9yKW4ub25FcnJvcihlKX07dGhpcy5yZXNvbHZlVVJMPWZ1bmN0aW9uKGUpe3JldHVybiBzP3MoZSk6ZX07dGhpcy5zZXRVUkxNb2RpZmllcj1mdW5jdGlvbihlKXtzPWU7cmV0dXJuIHRoaXN9O3RoaXMuYWRkSGFuZGxlcj1mdW5jdGlvbihlLHQpe3UucHVzaChlLHQpO3JldHVybiB0aGlzfTt0aGlzLnJlbW92ZUhhbmRsZXI9ZnVuY3Rpb24oZSl7ZT11LmluZGV4T2YoZSk7LTEhPT1lJiZ1LnNwbGljZShlLDIpO3JldHVybiB0aGlzfTt0aGlzLmdldEhhbmRsZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj11Lmxlbmd0aDt0PHI7dCs9Mil7dmFyIG49dVt0XSxpPXVbdCsxXTtuLmdsb2JhbCYmKG4ubGFzdEluZGV4PTApO2lmKG4udGVzdChlKSlyZXR1cm4gaX1yZXR1cm4gbnVsbH19ZnVuY3Rpb24gWW4oZSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWU/ZTpGdTt0aGlzLmNyb3NzT3JpZ2luPVwiYW5vbnltb3VzXCI7dGhpcy5yZXNvdXJjZVBhdGg9dGhpcy5wYXRoPVwiXCI7dGhpcy5yZXF1ZXN0SGVhZGVyPXt9fWZ1bmN0aW9uIEtuKGUpe1luLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBabihlKXtZbi5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gSm4oZSl7WW4uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIFFuKGUpe1luLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBlaShlKXtZbi5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gdGkoZSl7WW4uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHJpKGUpe1luLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBuaSgpe3RoaXMudHlwZT1cIkN1cnZlXCI7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9MjAwfWZ1bmN0aW9uIGlpKGUsdCxyLG4saSxvLGEscyl7bmkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJFbGxpcHNlQ3VydmVcIjt0aGlzLmFYPWV8fDA7dGhpcy5hWT10fHwwO3RoaXMueFJhZGl1cz1yfHwxO3RoaXMueVJhZGl1cz1ufHwxO3RoaXMuYVN0YXJ0QW5nbGU9aXx8MDt0aGlzLmFFbmRBbmdsZT1vfHwyKk1hdGguUEk7dGhpcy5hQ2xvY2t3aXNlPWF8fCExO3RoaXMuYVJvdGF0aW9uPXN8fDB9ZnVuY3Rpb24gb2koZSx0LHIsbixpLG8pe2lpLmNhbGwodGhpcyxlLHQscixyLG4saSxvKTt0aGlzLnR5cGU9XCJBcmNDdXJ2ZVwifWZ1bmN0aW9uIGFpKCl7dmFyIHM9MCx1PTAsYz0wLGw9MDtyZXR1cm57aW5pdENhdG11bGxSb206ZnVuY3Rpb24oZSx0LHIsbixpKXtlPWkqKHItZSk7bj1pKihuLXQpO3M9dDt1PWU7Yz0tMyp0KzMqci0yKmUtbjtsPTIqdC0yKnIrZStufSxpbml0Tm9udW5pZm9ybUNhdG11bGxSb206ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7ZT0oKHQtZSkvaS0oci1lKS8oaStvKSsoci10KS9vKSpvO249KChyLXQpL28tKG4tdCkvKG8rYSkrKG4tcikvYSkqbztzPXQ7dT1lO2M9LTMqdCszKnItMiplLW47bD0yKnQtMipyK2Urbn0sY2FsYzpmdW5jdGlvbihlKXt2YXIgdD1lKmU7cmV0dXJuIHMrdSplK2MqdCtsKnQqZX19fWZ1bmN0aW9uIHNpKGUsdCxyLG4pe25pLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2F0bXVsbFJvbUN1cnZlM1wiO3RoaXMucG9pbnRzPWV8fFtdO3RoaXMuY2xvc2VkPXR8fCExO3RoaXMuY3VydmVUeXBlPXJ8fFwiY2VudHJpcGV0YWxcIjt0aGlzLnRlbnNpb249bnx8LjV9ZnVuY3Rpb24gdWkoZSx0LHIsbixpKXt0PS41KihuLXQpO2k9LjUqKGktcik7dmFyIG89ZSplO3JldHVybigyKnItMipuK3QraSkqZSpvKygtMypyKzMqbi0yKnQtaSkqbyt0KmUrcn1mdW5jdGlvbiBjaShlLHQscixuKXt2YXIgaT0xLWU7cmV0dXJuIGkqaSp0KzIqKDEtZSkqZSpyK2UqZSpufWZ1bmN0aW9uIGxpKGUsdCxyLG4saSl7dmFyIG89MS1lLGE9MS1lO3JldHVybiBvKm8qbyp0KzMqYSphKmUqciszKigxLWUpKmUqZSpuK2UqZSplKml9ZnVuY3Rpb24gaGkoZSx0LHIsbil7bmkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJpY0JlemllckN1cnZlXCI7dGhpcy52MD1lfHxuZXcgTWU7dGhpcy52MT10fHxuZXcgTWU7dGhpcy52Mj1yfHxuZXcgTWU7dGhpcy52Mz1ufHxuZXcgTWV9ZnVuY3Rpb24gcGkoZSx0LHIsbil7bmkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJpY0JlemllckN1cnZlM1wiO3RoaXMudjA9ZXx8bmV3IFRlO3RoaXMudjE9dHx8bmV3IFRlO3RoaXMudjI9cnx8bmV3IFRlO3RoaXMudjM9bnx8bmV3IFRlfWZ1bmN0aW9uIGZpKGUsdCl7bmkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lQ3VydmVcIjt0aGlzLnYxPWV8fG5ldyBNZTt0aGlzLnYyPXR8fG5ldyBNZX1mdW5jdGlvbiBkaShlLHQpe25pLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZUN1cnZlM1wiO3RoaXMudjE9ZXx8bmV3IFRlO3RoaXMudjI9dHx8bmV3IFRlfWZ1bmN0aW9uIHZpKGUsdCxyKXtuaS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlF1YWRyYXRpY0JlemllckN1cnZlXCI7dGhpcy52MD1lfHxuZXcgTWU7dGhpcy52MT10fHxuZXcgTWU7dGhpcy52Mj1yfHxuZXcgTWV9ZnVuY3Rpb24gbWkoZSx0LHIpe25pLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUXVhZHJhdGljQmV6aWVyQ3VydmUzXCI7dGhpcy52MD1lfHxuZXcgVGU7dGhpcy52MT10fHxuZXcgVGU7dGhpcy52Mj1yfHxuZXcgVGV9ZnVuY3Rpb24gZ2koZSl7bmkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcGxpbmVDdXJ2ZVwiO3RoaXMucG9pbnRzPWV8fFtdfWZ1bmN0aW9uIF9pKCl7bmkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdXJ2ZVBhdGhcIjt0aGlzLmN1cnZlcz1bXTt0aGlzLmF1dG9DbG9zZT0hMX1mdW5jdGlvbiB5aShlKXtfaS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBhdGhcIjt0aGlzLmN1cnJlbnRQb2ludD1uZXcgTWU7ZSYmdGhpcy5zZXRGcm9tUG9pbnRzKGUpfWZ1bmN0aW9uIGJpKGUpe3lpLmNhbGwodGhpcyxlKTt0aGlzLnV1aWQ9Vm8uZ2VuZXJhdGVVVUlEKCk7dGhpcy50eXBlPVwiU2hhcGVcIjt0aGlzLmhvbGVzPVtdfWZ1bmN0aW9uIHhpKGUsdCl7Zi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpZ2h0XCI7dGhpcy5jb2xvcj1uZXcgdihlKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT10P3Q6MTt0aGlzLnJlY2VpdmVTaGFkb3c9dm9pZCAwfWZ1bmN0aW9uIHdpKGUsdCxyKXt4aS5jYWxsKHRoaXMsZSxyKTt0aGlzLnR5cGU9XCJIZW1pc3BoZXJlTGlnaHRcIjt0aGlzLmNhc3RTaGFkb3c9dm9pZCAwO3RoaXMucG9zaXRpb24uY29weShmLkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLmdyb3VuZENvbG9yPW5ldyB2KHQpfWZ1bmN0aW9uIFNpKGUpe3RoaXMuY2FtZXJhPWU7dGhpcy5iaWFzPTA7dGhpcy5yYWRpdXM9MTt0aGlzLm1hcFNpemU9bmV3IE1lKDUxMiw1MTIpO3RoaXMubWFwUGFzcz10aGlzLm1hcD1udWxsO3RoaXMubWF0cml4PW5ldyBFZTt0aGlzLl9mcnVzdHVtPW5ldyBBZTt0aGlzLl9mcmFtZUV4dGVudHM9bmV3IE1lKDEsMSk7dGhpcy5fdmlld3BvcnRDb3VudD0xO3RoaXMuX3ZpZXdwb3J0cz1bbmV3IENlKDAsMCwxLDEpXX1mdW5jdGlvbiBNaSgpe1NpLmNhbGwodGhpcyxuZXcgSCg1MCwxLC41LDUwMCkpfWZ1bmN0aW9uIENpKGUsdCxyLG4saSxvKXt4aS5jYWxsKHRoaXMsZSx0KTt0aGlzLnR5cGU9XCJTcG90TGlnaHRcIjt0aGlzLnBvc2l0aW9uLmNvcHkoZi5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy50YXJnZXQ9bmV3IGY7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuaW50ZW5zaXR5PWUvTWF0aC5QSX19KTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PXI/cjowO3RoaXMuYW5nbGU9dm9pZCAwIT09bj9uOk1hdGguUEkvMzt0aGlzLnBlbnVtYnJhPXZvaWQgMCE9PWk/aTowO3RoaXMuZGVjYXk9dm9pZCAwIT09bz9vOjE7dGhpcy5zaGFkb3c9bmV3IE1pfWZ1bmN0aW9uIFRpKCl7U2kuY2FsbCh0aGlzLG5ldyBIKDkwLDEsLjUsNTAwKSk7dGhpcy5fZnJhbWVFeHRlbnRzPW5ldyBNZSg0LDIpO3RoaXMuX3ZpZXdwb3J0Q291bnQ9Njt0aGlzLl92aWV3cG9ydHM9W25ldyBDZSgyLDEsMSwxKSxuZXcgQ2UoMCwxLDEsMSksbmV3IENlKDMsMSwxLDEpLG5ldyBDZSgxLDEsMSwxKSxuZXcgQ2UoMywwLDEsMSksbmV3IENlKDEsMCwxLDEpXTt0aGlzLl9jdWJlRGlyZWN0aW9ucz1bbmV3IFRlKDEsMCwwKSxuZXcgVGUoLTEsMCwwKSxuZXcgVGUoMCwwLDEpLG5ldyBUZSgwLDAsLTEpLG5ldyBUZSgwLDEsMCksbmV3IFRlKDAsLTEsMCldO3RoaXMuX2N1YmVVcHM9W25ldyBUZSgwLDEsMCksbmV3IFRlKDAsMSwwKSxuZXcgVGUoMCwxLDApLG5ldyBUZSgwLDEsMCksbmV3IFRlKDAsMCwxKSxuZXcgVGUoMCwwLC0xKV19ZnVuY3Rpb24gRWkoZSx0LHIsbil7eGkuY2FsbCh0aGlzLGUsdCk7dGhpcy50eXBlPVwiUG9pbnRMaWdodFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicG93ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDQqdGhpcy5pbnRlbnNpdHkqTWF0aC5QSX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuaW50ZW5zaXR5PWUvKDQqTWF0aC5QSSl9fSk7dGhpcy5kaXN0YW5jZT12b2lkIDAhPT1yP3I6MDt0aGlzLmRlY2F5PXZvaWQgMCE9PW4/bjoxO3RoaXMuc2hhZG93PW5ldyBUaX1mdW5jdGlvbiBPaShlLHQscixuLGksbyl7Vi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk9ydGhvZ3JhcGhpY0NhbWVyYVwiO3RoaXMuem9vbT0xO3RoaXMudmlldz1udWxsO3RoaXMubGVmdD12b2lkIDAhPT1lP2U6LTE7dGhpcy5yaWdodD12b2lkIDAhPT10P3Q6MTt0aGlzLnRvcD12b2lkIDAhPT1yP3I6MTt0aGlzLmJvdHRvbT12b2lkIDAhPT1uP246LTE7dGhpcy5uZWFyPXZvaWQgMCE9PWk/aTouMTt0aGlzLmZhcj12b2lkIDAhPT1vP286MmUzO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfWZ1bmN0aW9uIFBpKCl7U2kuY2FsbCh0aGlzLG5ldyBPaSgtNSw1LDUsLTUsLjUsNTAwKSl9ZnVuY3Rpb24gQWkoZSx0KXt4aS5jYWxsKHRoaXMsZSx0KTt0aGlzLnR5cGU9XCJEaXJlY3Rpb25hbExpZ2h0XCI7dGhpcy5wb3NpdGlvbi5jb3B5KGYuRGVmYXVsdFVwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMudGFyZ2V0PW5ldyBmO3RoaXMuc2hhZG93PW5ldyBQaX1mdW5jdGlvbiBqaShlLHQpe3hpLmNhbGwodGhpcyxlLHQpO3RoaXMudHlwZT1cIkFtYmllbnRMaWdodFwiO3RoaXMuY2FzdFNoYWRvdz12b2lkIDB9ZnVuY3Rpb24gUmkoZSx0LHIsbil7eGkuY2FsbCh0aGlzLGUsdCk7dGhpcy50eXBlPVwiUmVjdEFyZWFMaWdodFwiO3RoaXMud2lkdGg9dm9pZCAwIT09cj9yOjEwO3RoaXMuaGVpZ2h0PXZvaWQgMCE9PW4/bjoxMH1mdW5jdGlvbiBraSgpe3RoaXMuY29lZmZpY2llbnRzPVtdO2Zvcih2YXIgZT0wOzk+ZTtlKyspdGhpcy5jb2VmZmljaWVudHMucHVzaChuZXcgVGUpfWZ1bmN0aW9uIExpKGUsdCl7eGkuY2FsbCh0aGlzLHZvaWQgMCx0KTt0aGlzLnR5cGU9XCJMaWdodFByb2JlXCI7dGhpcy5zaD12b2lkIDAhPT1lP2U6bmV3IGtpfWZ1bmN0aW9uIE5pKGUpe1luLmNhbGwodGhpcyxlKTt0aGlzLnRleHR1cmVzPXt9fWZ1bmN0aW9uIElpKCl7Ti5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5pbnN0YW5jZUNvdW50PUluZmluaXR5fWZ1bmN0aW9uIERpKGUsdCxyLG4pe1wibnVtYmVyXCI9PT10eXBlb2YgciYmKG49cixyPSExLGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU6IFRoZSBjb25zdHJ1Y3RvciBub3cgZXhwZWN0cyBub3JtYWxpemVkIGFzIHRoZSB0aGlyZCBhcmd1bWVudC5cIikpO0UuY2FsbCh0aGlzLGUsdCxyKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9bnx8MX1mdW5jdGlvbiBCaShlKXtZbi5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gRmkoZSl7WW4uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHppKGUpe1widW5kZWZpbmVkXCI9PT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXAmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBjcmVhdGVJbWFnZUJpdG1hcCgpIG5vdCBzdXBwb3J0ZWQuXCIpO1widW5kZWZpbmVkXCI9PT10eXBlb2YgZmV0Y2gmJmNvbnNvbGUud2FybihcIlRIUkVFLkltYWdlQml0bWFwTG9hZGVyOiBmZXRjaCgpIG5vdCBzdXBwb3J0ZWQuXCIpO1luLmNhbGwodGhpcyxlKTt0aGlzLm9wdGlvbnM9dm9pZCAwfWZ1bmN0aW9uICRpKCl7dGhpcy50eXBlPVwiU2hhcGVQYXRoXCI7dGhpcy5jb2xvcj1uZXcgdjt0aGlzLnN1YlBhdGhzPVtdO3RoaXMuY3VycmVudFBhdGg9bnVsbH1mdW5jdGlvbiBHaShlKXt0aGlzLnR5cGU9XCJGb250XCI7dGhpcy5kYXRhPWV9ZnVuY3Rpb24gVmkoZSl7WW4uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIEhpKGUpe1luLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBVaShlLHQscil7TGkuY2FsbCh0aGlzLHZvaWQgMCxyKTtlPShuZXcgdikuc2V0KGUpO3I9KG5ldyB2KS5zZXQodCk7dD1uZXcgVGUoZS5yLGUuZyxlLmIpO2U9bmV3IFRlKHIucixyLmcsci5iKTtyPU1hdGguc3FydChNYXRoLlBJKTt2YXIgbj1yKk1hdGguc3FydCguNzUpO3RoaXMuc2guY29lZmZpY2llbnRzWzBdLmNvcHkodCkuYWRkKGUpLm11bHRpcGx5U2NhbGFyKHIpO3RoaXMuc2guY29lZmZpY2llbnRzWzFdLmNvcHkodCkuc3ViKGUpLm11bHRpcGx5U2NhbGFyKG4pfWZ1bmN0aW9uIHFpKGUsdCl7TGkuY2FsbCh0aGlzLHZvaWQgMCx0KTtlPShuZXcgdikuc2V0KGUpO3RoaXMuc2guY29lZmZpY2llbnRzWzBdLnNldChlLnIsZS5nLGUuYikubXVsdGlwbHlTY2FsYXIoMipNYXRoLnNxcnQoTWF0aC5QSSkpfWZ1bmN0aW9uIFdpKCl7dGhpcy50eXBlPVwiU3RlcmVvQ2FtZXJhXCI7dGhpcy5hc3BlY3Q9MTt0aGlzLmV5ZVNlcD0uMDY0O3RoaXMuY2FtZXJhTD1uZXcgSDt0aGlzLmNhbWVyYUwubGF5ZXJzLmVuYWJsZSgxKTt0aGlzLmNhbWVyYUwubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNhbWVyYVI9bmV3IEg7dGhpcy5jYW1lcmFSLmxheWVycy5lbmFibGUoMik7dGhpcy5jYW1lcmFSLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5fY2FjaGU9e2ZvY3VzOm51bGwsZm92Om51bGwsYXNwZWN0Om51bGwsbmVhcjpudWxsLGZhcjpudWxsLHpvb206bnVsbCxleWVTZXA6bnVsbH19ZnVuY3Rpb24gWGkoZSl7dGhpcy5hdXRvU3RhcnQ9dm9pZCAwIT09ZT9lOiEwO3RoaXMuZWxhcHNlZFRpbWU9dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPTA7dGhpcy5ydW5uaW5nPSExfWZ1bmN0aW9uIFlpKCl7Zi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkF1ZGlvTGlzdGVuZXJcIjt0aGlzLmNvbnRleHQ9SnUuZ2V0Q29udGV4dCgpO3RoaXMuZ2Fpbj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO3RoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7dGhpcy5maWx0ZXI9bnVsbDt0aGlzLnRpbWVEZWx0YT0wO3RoaXMuX2Nsb2NrPW5ldyBYaX1mdW5jdGlvbiBLaShlKXtmLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQXVkaW9cIjt0aGlzLmxpc3RlbmVyPWU7dGhpcy5jb250ZXh0PWUuY29udGV4dDt0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTt0aGlzLmdhaW4uY29ubmVjdChlLmdldElucHV0KCkpO3RoaXMuYXV0b3BsYXk9ITE7dGhpcy5idWZmZXI9bnVsbDt0aGlzLmRldHVuZT0wO3RoaXMubG9vcD0hMTt0aGlzLm9mZnNldD10aGlzLmxvb3BFbmQ9dGhpcy5sb29wU3RhcnQ9MDt0aGlzLmR1cmF0aW9uPXZvaWQgMDt0aGlzLnBsYXliYWNrUmF0ZT0xO3RoaXMuaXNQbGF5aW5nPSExO3RoaXMuaGFzUGxheWJhY2tDb250cm9sPSEwO3RoaXMuc291cmNlVHlwZT1cImVtcHR5XCI7dGhpcy5fcHJvZ3Jlc3M9dGhpcy5fc3RhcnRlZEF0PTA7dGhpcy5maWx0ZXJzPVtdfWZ1bmN0aW9uIFppKGUpe0tpLmNhbGwodGhpcyxlKTt0aGlzLnBhbm5lcj10aGlzLmNvbnRleHQuY3JlYXRlUGFubmVyKCk7dGhpcy5wYW5uZXIucGFubmluZ01vZGVsPVwiSFJURlwiO3RoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKX1mdW5jdGlvbiBKaShlLHQpe3RoaXMuYW5hbHlzZXI9ZS5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7dGhpcy5hbmFseXNlci5mZnRTaXplPXZvaWQgMCE9PXQ/dDoyMDQ4O3RoaXMuZGF0YT1uZXcgVWludDhBcnJheSh0aGlzLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KTtlLmdldE91dHB1dCgpLmNvbm5lY3QodGhpcy5hbmFseXNlcil9ZnVuY3Rpb24gUWkoZSx0LHIpe3RoaXMuYmluZGluZz1lO3RoaXMudmFsdWVTaXplPXI7c3dpdGNoKHQpe2Nhc2VcInF1YXRlcm5pb25cIjplPXRoaXMuX3NsZXJwO3Q9dGhpcy5fc2xlcnBBZGRpdGl2ZTt2YXIgbj10aGlzLl9zZXRBZGRpdGl2ZUlkZW50aXR5UXVhdGVybmlvbjt0aGlzLmJ1ZmZlcj1uZXcgRmxvYXQ2NEFycmF5KDYqcik7dGhpcy5fd29ya0luZGV4PTU7YnJlYWs7Y2FzZVwic3RyaW5nXCI6Y2FzZVwiYm9vbFwiOnQ9ZT10aGlzLl9zZWxlY3Q7bj10aGlzLl9zZXRBZGRpdGl2ZUlkZW50aXR5T3RoZXI7dGhpcy5idWZmZXI9QXJyYXkoNSpyKTticmVhaztkZWZhdWx0OmU9dGhpcy5fbGVycCx0PXRoaXMuX2xlcnBBZGRpdGl2ZSxuPXRoaXMuX3NldEFkZGl0aXZlSWRlbnRpdHlOdW1lcmljLHRoaXMuYnVmZmVyPW5ldyBGbG9hdDY0QXJyYXkoNSpyKX10aGlzLl9taXhCdWZmZXJSZWdpb249ZTt0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZT10O3RoaXMuX3NldElkZW50aXR5PW47dGhpcy5fb3JpZ0luZGV4PTM7dGhpcy5fYWRkSW5kZXg9NDt0aGlzLnJlZmVyZW5jZUNvdW50PXRoaXMudXNlQ291bnQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmU9dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTB9ZnVuY3Rpb24gZW8oZSx0LHIpe3I9cnx8dG8ucGFyc2VUcmFja05hbWUodCk7dGhpcy5fdGFyZ2V0R3JvdXA9ZTt0aGlzLl9iaW5kaW5ncz1lLnN1YnNjcmliZV8odCxyKX1mdW5jdGlvbiB0byhlLHQscil7dGhpcy5wYXRoPXQ7dGhpcy5wYXJzZWRQYXRoPXJ8fHRvLnBhcnNlVHJhY2tOYW1lKHQpO3RoaXMubm9kZT10by5maW5kTm9kZShlLHRoaXMucGFyc2VkUGF0aC5ub2RlTmFtZSl8fGU7dGhpcy5yb290Tm9kZT1lfWZ1bmN0aW9uIHJvKCl7dGhpcy51dWlkPVZvLmdlbmVyYXRlVVVJRCgpO3RoaXMuX29iamVjdHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt0aGlzLm5DYWNoZWRPYmplY3RzXz0wO3ZhciBlPXt9O3RoaXMuX2luZGljZXNCeVVVSUQ9ZTtmb3IodmFyIHQ9MCxyPWFyZ3VtZW50cy5sZW5ndGg7dCE9PXI7Kyt0KWVbYXJndW1lbnRzW3RdLnV1aWRdPXQ7dGhpcy5fcGF0aHM9W107dGhpcy5fcGFyc2VkUGF0aHM9W107dGhpcy5fYmluZGluZ3M9W107dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoPXt9O3ZhciBuPXRoaXM7dGhpcy5zdGF0cz17b2JqZWN0czp7Z2V0IHRvdGFsKCl7cmV0dXJuIG4uX29iamVjdHMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gdGhpcy50b3RhbC1uLm5DYWNoZWRPYmplY3RzX319LGdldCBiaW5kaW5nc1Blck9iamVjdCgpe3JldHVybiBuLl9iaW5kaW5ncy5sZW5ndGh9fX1mdW5jdGlvbiBubyhlLHQscixuKXt0aGlzLl9taXhlcj1lO3RoaXMuX2NsaXA9dDt0aGlzLl9sb2NhbFJvb3Q9cnx8bnVsbDt0aGlzLmJsZW5kTW9kZT1ufHx0LmJsZW5kTW9kZTtlPXQudHJhY2tzO3Q9ZS5sZW5ndGg7cj1BcnJheSh0KTtuPXtlbmRpbmdTdGFydDoyNDAwLGVuZGluZ0VuZDoyNDAwfTtmb3IodmFyIGk9MDtpIT09dDsrK2kpe3ZhciBvPWVbaV0uY3JlYXRlSW50ZXJwb2xhbnQobnVsbCk7cltpXT1vO28uc2V0dGluZ3M9bn10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzPW47dGhpcy5faW50ZXJwb2xhbnRzPXI7dGhpcy5fcHJvcGVydHlCaW5kaW5ncz1BcnJheSh0KTt0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD10aGlzLl9ieUNsaXBDYWNoZUluZGV4PXRoaXMuX2NhY2hlSW5kZXg9bnVsbDt0aGlzLmxvb3A9MjIwMTt0aGlzLl9sb29wQ291bnQ9LTE7dGhpcy5fc3RhcnRUaW1lPW51bGw7dGhpcy50aW1lPTA7dGhpcy5fZWZmZWN0aXZlV2VpZ2h0PXRoaXMud2VpZ2h0PXRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnRpbWVTY2FsZT0xO3RoaXMucmVwZXRpdGlvbnM9SW5maW5pdHk7dGhpcy5wYXVzZWQ9ITE7dGhpcy5lbmFibGVkPSEwO3RoaXMuY2xhbXBXaGVuRmluaXNoZWQ9ITE7dGhpcy56ZXJvU2xvcGVBdEVuZD10aGlzLnplcm9TbG9wZUF0U3RhcnQ9ITB9ZnVuY3Rpb24gaW8oZSl7dGhpcy5fcm9vdD1lO3RoaXMuX2luaXRNZW1vcnlNYW5hZ2VyKCk7dGhpcy50aW1lPXRoaXMuX2FjY3VJbmRleD0wO3RoaXMudGltZVNjYWxlPTF9ZnVuY3Rpb24gb28oZSx0KXtcInN0cmluZ1wiPT09dHlwZW9mIGUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Vbmlmb3JtOiBUeXBlIHBhcmFtZXRlciBpcyBubyBsb25nZXIgbmVlZGVkLlwiKSxlPXQpO3RoaXMudmFsdWU9ZX1mdW5jdGlvbiBhbyhlLHQscil7WHQuY2FsbCh0aGlzLGUsdCk7dGhpcy5tZXNoUGVyQXR0cmlidXRlPXJ8fDF9ZnVuY3Rpb24gc28oZSx0LHIsbil7dGhpcy5yYXk9bmV3IHMoZSx0KTt0aGlzLm5lYXI9cnx8MDt0aGlzLmZhcj1ufHxJbmZpbml0eTt0aGlzLmNhbWVyYT1udWxsO3RoaXMubGF5ZXJzPW5ldyBvO3RoaXMucGFyYW1zPXtNZXNoOnt9LExpbmU6e3RocmVzaG9sZDoxfSxMT0Q6e30sUG9pbnRzOnt0aHJlc2hvbGQ6MX0sU3ByaXRlOnt9fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBhcmFtcyx7UG9pbnRDbG91ZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyOiBwYXJhbXMuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIHBhcmFtcy5Qb2ludHMuXCIpO3JldHVybiB0aGlzLlBvaW50c319fSl9ZnVuY3Rpb24gdW8oZSx0KXtyZXR1cm4gZS5kaXN0YW5jZS10LmRpc3RhbmNlfWZ1bmN0aW9uIGNvKGUsdCxyLG4pe2UubGF5ZXJzLnRlc3QodC5sYXllcnMpJiZlLnJheWNhc3QodCxyKTtpZighMD09PW4pe2U9ZS5jaGlsZHJlbjtuPTA7Zm9yKHZhciBpPWUubGVuZ3RoO248aTtuKyspY28oZVtuXSx0LHIsITApfX1mdW5jdGlvbiBsbyhlLHQscil7dGhpcy5yYWRpdXM9dm9pZCAwIT09ZT9lOjE7dGhpcy5waGk9dm9pZCAwIT09dD90OjA7dGhpcy50aGV0YT12b2lkIDAhPT1yP3I6MDtyZXR1cm4gdGhpc31mdW5jdGlvbiBobyhlLHQscil7dGhpcy5yYWRpdXM9dm9pZCAwIT09ZT9lOjE7dGhpcy50aGV0YT12b2lkIDAhPT10P3Q6MDt0aGlzLnk9dm9pZCAwIT09cj9yOjA7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gcG8oZSx0KXt0aGlzLm1pbj12b2lkIDAhPT1lP2U6bmV3IE1lKEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT10P3Q6bmV3IE1lKC1JbmZpbml0eSwtSW5maW5pdHkpfWZ1bmN0aW9uIGZvKGUsdCl7dGhpcy5zdGFydD12b2lkIDAhPT1lP2U6bmV3IFRlO3RoaXMuZW5kPXZvaWQgMCE9PXQ/dDpuZXcgVGV9ZnVuY3Rpb24gdm8oZSl7Zi5jYWxsKHRoaXMpO3RoaXMubWF0ZXJpYWw9ZTt0aGlzLnJlbmRlcj1mdW5jdGlvbigpe307dGhpcy5oYXNVdnM9dGhpcy5oYXNDb2xvcnM9dGhpcy5oYXNOb3JtYWxzPXRoaXMuaGFzUG9zaXRpb25zPSExO3RoaXMudXZBcnJheT10aGlzLmNvbG9yQXJyYXk9dGhpcy5ub3JtYWxBcnJheT10aGlzLnBvc2l0aW9uQXJyYXk9bnVsbDt0aGlzLmNvdW50PTB9ZnVuY3Rpb24gbW8oZSx0KXtmLmNhbGwodGhpcyk7dGhpcy5saWdodD1lO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1lLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNvbG9yPXQ7ZT1uZXcgTjt0PVswLDAsMCwwLDAsMSwwLDAsMCwxLDAsMSwwLDAsMCwtMSwwLDEsMCwwLDAsMCwxLDEsMCwwLDAsMCwtMSwxXTtmb3IodmFyIHI9MCxuPTE7MzI+cjtyKyssbisrKXt2YXIgaT1yLzMyKk1hdGguUEkqMixvPW4vMzIqTWF0aC5QSSoyO3QucHVzaChNYXRoLmNvcyhpKSxNYXRoLnNpbihpKSwxLE1hdGguY29zKG8pLE1hdGguc2luKG8pLDEpfWUuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaih0LDMpKTt0PW5ldyBpcih7Zm9nOiExLHRvbmVNYXBwZWQ6ITF9KTt0aGlzLmNvbmU9bmV3IGFyKGUsdCk7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIGdvKGUpe3ZhciB0PVtdO2UmJmUuaXNCb25lJiZ0LnB1c2goZSk7Zm9yKHZhciByPTA7cjxlLmNoaWxkcmVuLmxlbmd0aDtyKyspdC5wdXNoLmFwcGx5KHQsZ28oZS5jaGlsZHJlbltyXSkpO3JldHVybiB0fWZ1bmN0aW9uIF9vKGUpe2Zvcih2YXIgdD1nbyhlKSxyPW5ldyBOLG49W10saT1bXSxvPW5ldyB2KDAsMCwxKSxhPW5ldyB2KDAsMSwwKSxzPTA7czx0Lmxlbmd0aDtzKyspe3ZhciB1PXRbc107dS5wYXJlbnQmJnUucGFyZW50LmlzQm9uZSYmKG4ucHVzaCgwLDAsMCksbi5wdXNoKDAsMCwwKSxpLnB1c2goby5yLG8uZyxvLmIpLGkucHVzaChhLnIsYS5nLGEuYikpfXIuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaihuLDMpKTtyLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IGooaSwzKSk7bj1uZXcgaXIoe3ZlcnRleENvbG9yczohMCxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSx0b25lTWFwcGVkOiExLHRyYW5zcGFyZW50OiEwfSk7YXIuY2FsbCh0aGlzLHIsbik7dGhpcy50eXBlPVwiU2tlbGV0b25IZWxwZXJcIjt0aGlzLnJvb3Q9ZTt0aGlzLmJvbmVzPXQ7dGhpcy5tYXRyaXg9ZS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITF9ZnVuY3Rpb24geW8oZSx0LHIpe3RoaXMubGlnaHQ9ZTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5jb2xvcj1yO2U9bmV3IHVuKHQsNCwyKTt0PW5ldyB4KHt3aXJlZnJhbWU6ITAsZm9nOiExLHRvbmVNYXBwZWQ6ITF9KTtJLmNhbGwodGhpcyxlLHQpO3RoaXMudHlwZT1cIlBvaW50TGlnaHRIZWxwZXJcIjt0aGlzLm1hdHJpeD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIGJvKGUsdCxyKXtmLmNhbGwodGhpcyk7dGhpcy5saWdodD1lO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1lLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNvbG9yPXI7ZT1uZXcgU3IodCk7ZS5yb3RhdGVZKC41Kk1hdGguUEkpO3RoaXMubWF0ZXJpYWw9bmV3IHgoe3dpcmVmcmFtZTohMCxmb2c6ITEsdG9uZU1hcHBlZDohMX0pO3ZvaWQgMD09PXRoaXMuY29sb3ImJih0aGlzLm1hdGVyaWFsLnZlcnRleENvbG9ycz0hMCk7dD1lLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3Q9bmV3IEZsb2F0MzJBcnJheSgzKnQuY291bnQpO2Uuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgRSh0LDMpKTt0aGlzLmFkZChuZXcgSShlLHRoaXMubWF0ZXJpYWwpKTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIHhvKGUsdCxyLG4pe2U9ZXx8MTA7dD10fHwxMDtyPW5ldyB2KHZvaWQgMCE9PXI/cjo0NDczOTI0KTtuPW5ldyB2KHZvaWQgMCE9PW4/bjo4OTQ3ODQ4KTt2YXIgaT10LzIsbz1lL3QsYT1lLzI7ZT1bXTtmb3IodmFyIHM9W10sdT0wLGM9MCxsPS1hO3U8PXQ7dSsrLGwrPW8pe2UucHVzaCgtYSwwLGwsYSwwLGwpO2UucHVzaChsLDAsLWEsbCwwLGEpO3ZhciBoPXU9PT1pP3I6bjtoLnRvQXJyYXkocyxjKTtjKz0zO2gudG9BcnJheShzLGMpO2MrPTM7aC50b0FycmF5KHMsYyk7Yys9MztoLnRvQXJyYXkocyxjKTtjKz0zfXQ9bmV3IE47dC5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKGUsMykpO3Quc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgaihzLDMpKTtyPW5ldyBpcih7dmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KTthci5jYWxsKHRoaXMsdCxyKTt0aGlzLnR5cGU9XCJHcmlkSGVscGVyXCJ9ZnVuY3Rpb24gd28oZSx0LHIsbixpLG8pe2U9ZXx8MTA7dD10fHwxNjtyPXJ8fDg7bj1ufHw2NDtpPW5ldyB2KHZvaWQgMCE9PWk/aTo0NDczOTI0KTtvPW5ldyB2KHZvaWQgMCE9PW8/bzo4OTQ3ODQ4KTt2YXIgYT1bXSxzPVtdLHU7Zm9yKHU9MDt1PD10O3UrKyl7dmFyIGM9dS90KjIqTWF0aC5QSTt2YXIgbD1NYXRoLnNpbihjKSplO2M9TWF0aC5jb3MoYykqZTthLnB1c2goMCwwLDApO2EucHVzaChsLDAsYyk7dmFyIGg9dSYxP2k6bztzLnB1c2goaC5yLGguZyxoLmIpO3MucHVzaChoLnIsaC5nLGguYil9Zm9yKHU9MDt1PD1yO3UrKyl7aD11JjE/aTpvO3ZhciBwPWUtZS9yKnU7Zm9yKHQ9MDt0PG47dCsrKWM9dC9uKjIqTWF0aC5QSSxsPU1hdGguc2luKGMpKnAsYz1NYXRoLmNvcyhjKSpwLGEucHVzaChsLDAsYykscy5wdXNoKGgucixoLmcsaC5iKSxjPSh0KzEpL24qMipNYXRoLlBJLGw9TWF0aC5zaW4oYykqcCxjPU1hdGguY29zKGMpKnAsYS5wdXNoKGwsMCxjKSxzLnB1c2goaC5yLGguZyxoLmIpfWU9bmV3IE47ZS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKGEsMykpO2Uuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgaihzLDMpKTthPW5ldyBpcih7dmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KTthci5jYWxsKHRoaXMsZSxhKTt0aGlzLnR5cGU9XCJQb2xhckdyaWRIZWxwZXJcIn1mdW5jdGlvbiBTbyhlLHQscil7Zi5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9ZTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9ZS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcj1yO3ZvaWQgMD09PXQmJih0PTEpO2U9bmV3IE47ZS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKFstdCx0LDAsdCx0LDAsdCwtdCwwLC10LC10LDAsLXQsdCwwXSwzKSk7dD1uZXcgaXIoe2ZvZzohMSx0b25lTWFwcGVkOiExfSk7dGhpcy5saWdodFBsYW5lPW5ldyBvcihlLHQpO3RoaXMuYWRkKHRoaXMubGlnaHRQbGFuZSk7ZT1uZXcgTjtlLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooWzAsMCwwLDAsMCwxXSwzKSk7dGhpcy50YXJnZXRMaW5lPW5ldyBvcihlLHQpO3RoaXMuYWRkKHRoaXMudGFyZ2V0TGluZSk7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBNbyhlKXtmdW5jdGlvbiB0KGUsdCxyKXtuKGUscik7bih0LHIpfWZ1bmN0aW9uIG4oZSx0KXtvLnB1c2goMCwwLDApO2EucHVzaCh0LnIsdC5nLHQuYik7dm9pZCAwPT09c1tlXSYmKHNbZV09W10pO3NbZV0ucHVzaChvLmxlbmd0aC8zLTEpfXZhciByPW5ldyBOLGk9bmV3IGlyKHtjb2xvcjoxNjc3NzIxNSx2ZXJ0ZXhDb2xvcnM6ITAsdG9uZU1hcHBlZDohMX0pLG89W10sYT1bXSxzPXt9LHU9bmV3IHYoMTY3NTUyMDApLGM9bmV3IHYoMTY3MTE2ODApLGw9bmV3IHYoNDM3NzUpLGg9bmV3IHYoMTY3NzcyMTUpLHA9bmV3IHYoMzM1NTQ0Myk7dChcIm4xXCIsXCJuMlwiLHUpO3QoXCJuMlwiLFwibjRcIix1KTt0KFwibjRcIixcIm4zXCIsdSk7dChcIm4zXCIsXCJuMVwiLHUpO3QoXCJmMVwiLFwiZjJcIix1KTt0KFwiZjJcIixcImY0XCIsdSk7dChcImY0XCIsXCJmM1wiLHUpO3QoXCJmM1wiLFwiZjFcIix1KTt0KFwibjFcIixcImYxXCIsdSk7dChcIm4yXCIsXCJmMlwiLHUpO3QoXCJuM1wiLFwiZjNcIix1KTt0KFwibjRcIixcImY0XCIsdSk7dChcInBcIixcIm4xXCIsYyk7dChcInBcIixcIm4yXCIsYyk7dChcInBcIixcIm4zXCIsYyk7dChcInBcIixcIm40XCIsYyk7dChcInUxXCIsXCJ1MlwiLGwpO3QoXCJ1MlwiLFwidTNcIixsKTt0KFwidTNcIixcInUxXCIsbCk7dChcImNcIixcInRcIixoKTt0KFwicFwiLFwiY1wiLHApO3QoXCJjbjFcIixcImNuMlwiLHApO3QoXCJjbjNcIixcImNuNFwiLHApO3QoXCJjZjFcIixcImNmMlwiLHApO3QoXCJjZjNcIixcImNmNFwiLHApO3Iuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaihvLDMpKTtyLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IGooYSwzKSk7YXIuY2FsbCh0aGlzLHIsaSk7dGhpcy50eXBlPVwiQ2FtZXJhSGVscGVyXCI7dGhpcy5jYW1lcmE9ZTt0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4JiZ0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7dGhpcy5tYXRyaXg9ZS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5wb2ludE1hcD1zO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gQ28oZSx0LHIsbixpLG8sYSl7QWMuc2V0KGksbyxhKS51bnByb2plY3Qobik7ZT10W2VdO2lmKHZvaWQgMCE9PWUpZm9yKHI9ci5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSx0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXIuc2V0WFlaKGVbdF0sQWMueCxBYy55LEFjLnopfWZ1bmN0aW9uIFRvKGUsdCl7dGhpcy5vYmplY3Q9ZTt2b2lkIDA9PT10JiYodD0xNjc3Njk2MCk7ZT1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCw0LDEsNSwyLDYsMyw3XSk7dmFyIHI9bmV3IEZsb2F0MzJBcnJheSgyNCksbj1uZXcgTjtuLnNldEluZGV4KG5ldyBFKGUsMSkpO24uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgRShyLDMpKTthci5jYWxsKHRoaXMsbixuZXcgaXIoe2NvbG9yOnQsdG9uZU1hcHBlZDohMX0pKTt0aGlzLnR5cGU9XCJCb3hIZWxwZXJcIjt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBFbyhlLHQpe3RoaXMudHlwZT1cIkJveDNIZWxwZXJcIjt0aGlzLmJveD1lO3Q9dHx8MTY3NzY5NjA7ZT1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCw0LDEsNSwyLDYsMyw3XSk7dmFyIHI9bmV3IE47ci5zZXRJbmRleChuZXcgRShlLDEpKTtyLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooWzEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsLTEsMSwxLDEsLTEsLTEsMSwtMSwtMSwtMSwtMSwxLC0xLC0xXSwzKSk7YXIuY2FsbCh0aGlzLHIsbmV3IGlyKHtjb2xvcjp0LHRvbmVNYXBwZWQ6ITF9KSk7dGhpcy50eXBlPVwiQm94M0hlbHBlclwiO3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl9ZnVuY3Rpb24gT28oZSx0LHIpe3RoaXMucGxhbmU9ZTt0aGlzLnNpemU9dm9pZCAwPT09dD8xOnQ7ZT12b2lkIDAhPT1yP3I6MTY3NzY5NjA7dD1uZXcgTjt0LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooWzEsLTEsMSwtMSwxLDEsLTEsLTEsMSwxLDEsMSwtMSwxLDEsLTEsLTEsMSwxLC0xLDEsMSwxLDEsMCwwLDEsMCwwLDBdLDMpKTt0LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO29yLmNhbGwodGhpcyx0LG5ldyBpcih7Y29sb3I6ZSx0b25lTWFwcGVkOiExfSkpO3RoaXMudHlwZT1cIlBsYW5lSGVscGVyXCI7dD1uZXcgTjt0LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGooWzEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsMSwxLC0xLC0xLDEsMSwtMSwxXSwzKSk7dC5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt0aGlzLmFkZChuZXcgSSh0LG5ldyB4KHtjb2xvcjplLG9wYWNpdHk6LjIsdHJhbnNwYXJlbnQ6ITAsZGVwdGhXcml0ZTohMSx0b25lTWFwcGVkOiExfSkpKX1mdW5jdGlvbiBQbyhlLHQscixuLGksbyl7Zi5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkFycm93SGVscGVyXCI7dm9pZCAwPT09ZSYmKGU9bmV3IFRlKDAsMCwxKSk7dm9pZCAwPT09dCYmKHQ9bmV3IFRlKDAsMCwwKSk7dm9pZCAwPT09ciYmKHI9MSk7dm9pZCAwPT09biYmKG49MTY3NzY5NjApO3ZvaWQgMD09PWkmJihpPS4yKnIpO3ZvaWQgMD09PW8mJihvPS4yKmkpO3ZvaWQgMD09PUxjJiYoTGM9bmV3IE4sTGMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaihbMCwwLDAsMCwxLDBdLDMpKSxOYz1uZXcgX24oMCwuNSwxLDUsMSksTmMudHJhbnNsYXRlKDAsLS41LDApKTt0aGlzLnBvc2l0aW9uLmNvcHkodCk7dGhpcy5saW5lPW5ldyBvcihMYyxuZXcgaXIoe2NvbG9yOm4sdG9uZU1hcHBlZDohMX0pKTt0aGlzLmxpbmUubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmFkZCh0aGlzLmxpbmUpO3RoaXMuY29uZT1uZXcgSShOYyxuZXcgeCh7Y29sb3I6bix0b25lTWFwcGVkOiExfSkpO3RoaXMuY29uZS5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy5zZXREaXJlY3Rpb24oZSk7dGhpcy5zZXRMZW5ndGgocixpLG8pfWZ1bmN0aW9uIEFvKGUpe2U9ZXx8MTt2YXIgdD1bMCwwLDAsZSwwLDAsMCwwLDAsMCxlLDAsMCwwLDAsMCwwLGVdO2U9bmV3IE47ZS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKHQsMykpO2Uuc2V0QXR0cmlidXRlKFwiY29sb3JcIixuZXcgaihbMSwwLDAsMSwuNiwwLDAsMSwwLC42LDEsMCwwLDAsMSwwLC42LDFdLDMpKTt0PW5ldyBpcih7dmVydGV4Q29sb3JzOiEwLHRvbmVNYXBwZWQ6ITF9KTthci5jYWxsKHRoaXMsZSx0KTt0aGlzLnR5cGU9XCJBeGVzSGVscGVyXCJ9ZnVuY3Rpb24gam8oZSl7dGhpcy5fcmVuZGVyZXI9ZTt0aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldD1udWxsO2U9bmV3IEZsb2F0MzJBcnJheSgyMCk7dmFyIHQ9bmV3IFRlKDAsMSwwKTtlPW5ldyBNbih7ZGVmaW5lczp7bjoyMH0sdW5pZm9ybXM6e2Vudk1hcDp7dmFsdWU6bnVsbH0sc2FtcGxlczp7dmFsdWU6MX0sd2VpZ2h0czp7dmFsdWU6ZX0sbGF0aXR1ZGluYWw6e3ZhbHVlOiExfSxkVGhldGE6e3ZhbHVlOjB9LG1pcEludDp7dmFsdWU6MH0scG9sZUF4aXM6e3ZhbHVlOnR9LGlucHV0RW5jb2Rpbmc6e3ZhbHVlOkZjWzNlM119LG91dHB1dEVuY29kaW5nOnt2YWx1ZTpGY1szZTNdfX0sdmVydGV4U2hhZGVyOklvKCksZnJhZ21lbnRTaGFkZXI6XCJcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5wcmVjaXNpb24gbWVkaXVtcCBpbnQ7XFxudmFyeWluZyB2ZWMzIHZPdXRwdXREaXJlY3Rpb247XFxudW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcbnVuaWZvcm0gaW50IHNhbXBsZXM7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHRzW25dO1xcbnVuaWZvcm0gYm9vbCBsYXRpdHVkaW5hbDtcXG51bmlmb3JtIGZsb2F0IGRUaGV0YTtcXG51bmlmb3JtIGZsb2F0IG1pcEludDtcXG51bmlmb3JtIHZlYzMgcG9sZUF4aXM7XFxuXFxuXCIrRG8oKStcIlxcblxcbiNkZWZpbmUgRU5WTUFQX1RZUEVfQ1VCRV9VVlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuXFxudmVjMyBnZXRTYW1wbGUoZmxvYXQgdGhldGEsIHZlYzMgYXhpcykge1xcblxcdGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKTtcXG5cXHQvLyBSb2RyaWd1ZXMnIGF4aXMtYW5nbGUgcm90YXRpb25cXG5cXHR2ZWMzIHNhbXBsZURpcmVjdGlvbiA9IHZPdXRwdXREaXJlY3Rpb24gKiBjb3NUaGV0YVxcblxcdFxcdCsgY3Jvc3MoYXhpcywgdk91dHB1dERpcmVjdGlvbikgKiBzaW4odGhldGEpXFxuXFx0XFx0KyBheGlzICogZG90KGF4aXMsIHZPdXRwdXREaXJlY3Rpb24pICogKDEuMCAtIGNvc1RoZXRhKTtcXG5cXHRyZXR1cm4gYmlsaW5lYXJDdWJlVVYoZW52TWFwLCBzYW1wbGVEaXJlY3Rpb24sIG1pcEludCk7XFxufVxcblxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGF4aXMgPSBsYXRpdHVkaW5hbCA/IHBvbGVBeGlzIDogY3Jvc3MocG9sZUF4aXMsIHZPdXRwdXREaXJlY3Rpb24pO1xcblxcdGlmIChhbGwoZXF1YWwoYXhpcywgdmVjMygwLjApKSkpXFxuXFx0XFx0YXhpcyA9IHZlYzModk91dHB1dERpcmVjdGlvbi56LCAwLjAsIC0gdk91dHB1dERpcmVjdGlvbi54KTtcXG5cXHRheGlzID0gbm9ybWFsaXplKGF4aXMpO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wKTtcXG5cXHRnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbMF0gKiBnZXRTYW1wbGUoMC4wLCBheGlzKTtcXG5cXHRmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKykge1xcblxcdFxcdGlmIChpID49IHNhbXBsZXMpXFxuXFx0XFx0XFx0YnJlYWs7XFxuXFx0XFx0ZmxvYXQgdGhldGEgPSBkVGhldGEgKiBmbG9hdChpKTtcXG5cXHRcXHRnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbaV0gKiBnZXRTYW1wbGUoLTEuMCAqIHRoZXRhLCBheGlzKTtcXG5cXHRcXHRnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbaV0gKiBnZXRTYW1wbGUodGhldGEsIGF4aXMpO1xcblxcdH1cXG5cXHRnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb091dHB1dFRleGVsKGdsX0ZyYWdDb2xvcik7XFxufVxcblxcdFxcdFwiLGJsZW5kaW5nOjAsZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITF9KTtlLnR5cGU9XCJTcGhlcmljYWxHYXVzc2lhbkJsdXJcIjt0aGlzLl9ibHVyTWF0ZXJpYWw9ZTt0aGlzLl9jdWJlbWFwU2hhZGVyPXRoaXMuX2VxdWlyZWN0U2hhZGVyPW51bGw7dGhpcy5fY29tcGlsZU1hdGVyaWFsKHRoaXMuX2JsdXJNYXRlcmlhbCl9ZnVuY3Rpb24gUm8oZSl7ZT1uZXcgVCgzKkljLDMqSWMsZSk7ZS50ZXh0dXJlLm1hcHBpbmc9MzA2O2UudGV4dHVyZS5uYW1lPVwiUE1SRU0uY3ViZVV2XCI7ZS5zY2lzc29yVGVzdD0hMDtyZXR1cm4gZX1mdW5jdGlvbiBrbyhlLHQscixuLGkpe2Uudmlld3BvcnQuc2V0KHQscixuLGkpO2Uuc2Npc3Nvci5zZXQodCxyLG4saSl9ZnVuY3Rpb24gTG8oKXt2YXIgZT1uZXcgTWUoMSwxKTtlPW5ldyBNbih7dW5pZm9ybXM6e2Vudk1hcDp7dmFsdWU6bnVsbH0sdGV4ZWxTaXplOnt2YWx1ZTplfSxpbnB1dEVuY29kaW5nOnt2YWx1ZTpGY1szZTNdfSxvdXRwdXRFbmNvZGluZzp7dmFsdWU6RmNbM2UzXX19LHZlcnRleFNoYWRlcjpJbygpLGZyYWdtZW50U2hhZGVyOlwiXFxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxucHJlY2lzaW9uIG1lZGl1bXAgaW50O1xcbnZhcnlpbmcgdmVjMyB2T3V0cHV0RGlyZWN0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG51bmlmb3JtIHZlYzIgdGV4ZWxTaXplO1xcblxcblwiK0RvKCkrXCJcXG5cXG4jaW5jbHVkZSA8Y29tbW9uPlxcblxcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuXFx0dmVjMyBvdXRwdXREaXJlY3Rpb24gPSBub3JtYWxpemUodk91dHB1dERpcmVjdGlvbik7XFxuXFx0dmVjMiB1diA9IGVxdWlyZWN0VXYoIG91dHB1dERpcmVjdGlvbiApO1xcblxcdHZlYzIgZiA9IGZyYWN0KHV2IC8gdGV4ZWxTaXplIC0gMC41KTtcXG5cXHR1diAtPSBmICogdGV4ZWxTaXplO1xcblxcdHZlYzMgdGwgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2KSkucmdiO1xcblxcdHV2LnggKz0gdGV4ZWxTaXplLng7XFxuXFx0dmVjMyB0ciA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXYpKS5yZ2I7XFxuXFx0dXYueSArPSB0ZXhlbFNpemUueTtcXG5cXHR2ZWMzIGJyID0gZW52TWFwVGV4ZWxUb0xpbmVhcih0ZXh0dXJlMkQoZW52TWFwLCB1dikpLnJnYjtcXG5cXHR1di54IC09IHRleGVsU2l6ZS54O1xcblxcdHZlYzMgYmwgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2KSkucmdiO1xcblxcdHZlYzMgdG0gPSBtaXgodGwsIHRyLCBmLngpO1xcblxcdHZlYzMgYm0gPSBtaXgoYmwsIGJyLCBmLngpO1xcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgodG0sIGJtLCBmLnkpO1xcblxcdGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoZ2xfRnJhZ0NvbG9yKTtcXG59XFxuXFx0XFx0XCIsYmxlbmRpbmc6MCxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMX0pO2UudHlwZT1cIkVxdWlyZWN0YW5ndWxhclRvQ3ViZVVWXCI7cmV0dXJuIGV9ZnVuY3Rpb24gTm8oKXt2YXIgZT1uZXcgTW4oe3VuaWZvcm1zOntlbnZNYXA6e3ZhbHVlOm51bGx9LGlucHV0RW5jb2Rpbmc6e3ZhbHVlOkZjWzNlM119LG91dHB1dEVuY29kaW5nOnt2YWx1ZTpGY1szZTNdfX0sdmVydGV4U2hhZGVyOklvKCksZnJhZ21lbnRTaGFkZXI6XCJcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5wcmVjaXNpb24gbWVkaXVtcCBpbnQ7XFxudmFyeWluZyB2ZWMzIHZPdXRwdXREaXJlY3Rpb247XFxudW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZNYXA7XFxuXFxuXCIrRG8oKStcIlxcblxcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZUN1YmUoZW52TWFwLCB2ZWMzKCAtIHZPdXRwdXREaXJlY3Rpb24ueCwgdk91dHB1dERpcmVjdGlvbi55eiApKSkucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoZ2xfRnJhZ0NvbG9yKTtcXG59XFxuXFx0XFx0XCIsYmxlbmRpbmc6MCxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMX0pO2UudHlwZT1cIkN1YmVtYXBUb0N1YmVVVlwiO3JldHVybiBlfWZ1bmN0aW9uIElvKCl7cmV0dXJuXCJcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5wcmVjaXNpb24gbWVkaXVtcCBpbnQ7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxuYXR0cmlidXRlIGZsb2F0IGZhY2VJbmRleDtcXG52YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcXG5cXG4vLyBSSCBjb29yZGluYXRlIHN5c3RlbTsgUE1SRU0gZmFjZS1pbmRleGluZyBjb252ZW50aW9uXFxudmVjMyBnZXREaXJlY3Rpb24odmVjMiB1diwgZmxvYXQgZmFjZSkge1xcblxcdHV2ID0gMi4wICogdXYgLSAxLjA7XFxuXFx0dmVjMyBkaXJlY3Rpb24gPSB2ZWMzKHV2LCAxLjApO1xcblxcdGlmIChmYWNlID09IDAuMCkge1xcblxcdFxcdGRpcmVjdGlvbiA9IGRpcmVjdGlvbi56eXg7IC8vICggMSwgdiwgdSApIHBvcyB4XFxuXFx0fSBlbHNlIGlmIChmYWNlID09IDEuMCkge1xcblxcdFxcdGRpcmVjdGlvbiA9IGRpcmVjdGlvbi54enk7XFxuXFx0XFx0ZGlyZWN0aW9uLnh6ICo9IC0xLjA7IC8vICggLXUsIDEsIC12ICkgcG9zIHlcXG5cXHR9IGVsc2UgaWYgKGZhY2UgPT0gMi4wKSB7XFxuXFx0XFx0ZGlyZWN0aW9uLnggKj0gLTEuMDsgLy8gKCAtdSwgdiwgMSApIHBvcyB6XFxuXFx0fSBlbHNlIGlmIChmYWNlID09IDMuMCkge1xcblxcdFxcdGRpcmVjdGlvbiA9IGRpcmVjdGlvbi56eXg7XFxuXFx0XFx0ZGlyZWN0aW9uLnh6ICo9IC0xLjA7IC8vICggLTEsIHYsIC11ICkgbmVnIHhcXG5cXHR9IGVsc2UgaWYgKGZhY2UgPT0gNC4wKSB7XFxuXFx0XFx0ZGlyZWN0aW9uID0gZGlyZWN0aW9uLnh6eTtcXG5cXHRcXHRkaXJlY3Rpb24ueHkgKj0gLTEuMDsgLy8gKCAtdSwgLTEsIHYgKSBuZWcgeVxcblxcdH0gZWxzZSBpZiAoZmFjZSA9PSA1LjApIHtcXG5cXHRcXHRkaXJlY3Rpb24ueiAqPSAtMS4wOyAvLyAoIHUsIHYsIC0xICkgbmVnIHpcXG5cXHR9XFxuXFx0cmV0dXJuIGRpcmVjdGlvbjtcXG59XFxuXFxudm9pZCBtYWluKCkge1xcblxcdHZPdXRwdXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24odXYsIGZhY2VJbmRleCk7XFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVxcblxcdFwifWZ1bmN0aW9uIERvKCl7cmV0dXJuXCJcXG51bmlmb3JtIGludCBpbnB1dEVuY29kaW5nO1xcbnVuaWZvcm0gaW50IG91dHB1dEVuY29kaW5nO1xcblxcbiNpbmNsdWRlIDxlbmNvZGluZ3NfcGFyc19mcmFnbWVudD5cXG5cXG52ZWM0IGlucHV0VGV4ZWxUb0xpbmVhcih2ZWM0IHZhbHVlKXtcXG5cXHRpZihpbnB1dEVuY29kaW5nID09IDApe1xcblxcdFxcdHJldHVybiB2YWx1ZTtcXG5cXHR9ZWxzZSBpZihpbnB1dEVuY29kaW5nID09IDEpe1xcblxcdFxcdHJldHVybiBzUkdCVG9MaW5lYXIodmFsdWUpO1xcblxcdH1lbHNlIGlmKGlucHV0RW5jb2RpbmcgPT0gMil7XFxuXFx0XFx0cmV0dXJuIFJHQkVUb0xpbmVhcih2YWx1ZSk7XFxuXFx0fWVsc2UgaWYoaW5wdXRFbmNvZGluZyA9PSAzKXtcXG5cXHRcXHRyZXR1cm4gUkdCTVRvTGluZWFyKHZhbHVlLCA3LjApO1xcblxcdH1lbHNlIGlmKGlucHV0RW5jb2RpbmcgPT0gNCl7XFxuXFx0XFx0cmV0dXJuIFJHQk1Ub0xpbmVhcih2YWx1ZSwgMTYuMCk7XFxuXFx0fWVsc2UgaWYoaW5wdXRFbmNvZGluZyA9PSA1KXtcXG5cXHRcXHRyZXR1cm4gUkdCRFRvTGluZWFyKHZhbHVlLCAyNTYuMCk7XFxuXFx0fWVsc2V7XFxuXFx0XFx0cmV0dXJuIEdhbW1hVG9MaW5lYXIodmFsdWUsIDIuMik7XFxuXFx0fVxcbn1cXG5cXG52ZWM0IGxpbmVhclRvT3V0cHV0VGV4ZWwodmVjNCB2YWx1ZSl7XFxuXFx0aWYob3V0cHV0RW5jb2RpbmcgPT0gMCl7XFxuXFx0XFx0cmV0dXJuIHZhbHVlO1xcblxcdH1lbHNlIGlmKG91dHB1dEVuY29kaW5nID09IDEpe1xcblxcdFxcdHJldHVybiBMaW5lYXJUb3NSR0IodmFsdWUpO1xcblxcdH1lbHNlIGlmKG91dHB1dEVuY29kaW5nID09IDIpe1xcblxcdFxcdHJldHVybiBMaW5lYXJUb1JHQkUodmFsdWUpO1xcblxcdH1lbHNlIGlmKG91dHB1dEVuY29kaW5nID09IDMpe1xcblxcdFxcdHJldHVybiBMaW5lYXJUb1JHQk0odmFsdWUsIDcuMCk7XFxuXFx0fWVsc2UgaWYob3V0cHV0RW5jb2RpbmcgPT0gNCl7XFxuXFx0XFx0cmV0dXJuIExpbmVhclRvUkdCTSh2YWx1ZSwgMTYuMCk7XFxuXFx0fWVsc2UgaWYob3V0cHV0RW5jb2RpbmcgPT0gNSl7XFxuXFx0XFx0cmV0dXJuIExpbmVhclRvUkdCRCh2YWx1ZSwgMjU2LjApO1xcblxcdH1lbHNle1xcblxcdFxcdHJldHVybiBMaW5lYXJUb0dhbW1hKHZhbHVlLCAyLjIpO1xcblxcdH1cXG59XFxuXFxudmVjNCBlbnZNYXBUZXhlbFRvTGluZWFyKHZlYzQgY29sb3IpIHtcXG5cXHRyZXR1cm4gaW5wdXRUZXhlbFRvTGluZWFyKGNvbG9yKTtcXG59XFxuXFx0XCJ9ZnVuY3Rpb24gQm8oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ2xvc2VkU3BsaW5lQ3VydmUzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpO3NpLmNhbGwodGhpcyxlKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCI7dGhpcy5jbG9zZWQ9ITB9ZnVuY3Rpb24gRm8oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lQ3VydmUzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpO3NpLmNhbGwodGhpcyxlKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCJ9ZnVuY3Rpb24gem8oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzIGluc3RlYWQuXCIpO3NpLmNhbGwodGhpcyxlKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCJ9dm9pZCAwPT09TnVtYmVyLkVQU0lMT04mJihOdW1iZXIuRVBTSUxPTj1NYXRoLnBvdygyLC01MikpO3ZvaWQgMD09PU51bWJlci5pc0ludGVnZXImJihOdW1iZXIuaXNJbnRlZ2VyPWZ1bmN0aW9uKGUpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgZSYmaXNGaW5pdGUoZSkmJk1hdGguZmxvb3IoZSk9PT1lfSk7dm9pZCAwPT09TWF0aC5zaWduJiYoTWF0aC5zaWduPWZ1bmN0aW9uKGUpe3JldHVybiAwPmU/LTE6MDxlPzE6K2V9KTshMT09PVwibmFtZVwiaW4gRnVuY3Rpb24ucHJvdG90eXBlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpLm1hdGNoKC9eXFxzKmZ1bmN0aW9uXFxzKihbXlxcKFxcc10qKS8pWzFdfX0pO3ZvaWQgMD09PU9iamVjdC5hc3NpZ24mJihPYmplY3QuYXNzaWduPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWV8fG51bGw9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7Zm9yKHZhciB0PU9iamVjdChlKSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIG49YXJndW1lbnRzW3JdO2lmKHZvaWQgMCE9PW4mJm51bGwhPT1uKWZvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0pO09iamVjdC5hc3NpZ24odC5wcm90b3R5cGUse2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnM9e30pO3ZhciByPXRoaXMuX2xpc3RlbmVyczt2b2lkIDA9PT1yW2VdJiYocltlXT1bXSk7LTE9PT1yW2VdLmluZGV4T2YodCkmJnJbZV0ucHVzaCh0KX0saGFzRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm4hMTt2YXIgcj10aGlzLl9saXN0ZW5lcnM7cmV0dXJuIHZvaWQgMCE9PXJbZV0mJi0xIT09cltlXS5pbmRleE9mKHQpfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGUsdCl7dm9pZCAwIT09dGhpcy5fbGlzdGVuZXJzJiYoZT10aGlzLl9saXN0ZW5lcnNbZV0sdm9pZCAwIT09ZSYmKHQ9ZS5pbmRleE9mKHQpLC0xIT09dCYmZS5zcGxpY2UodCwxKSkpfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PXRoaXMuX2xpc3RlbmVycyl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzW2UudHlwZV07aWYodm9pZCAwIT09dCl7ZS50YXJnZXQ9dGhpczt0PXQuc2xpY2UoMCk7Zm9yKHZhciByPTAsbj10Lmxlbmd0aDtyPG47cisrKXRbcl0uY2FsbCh0aGlzLGUpfX19fSk7Zm9yKHZhciAkbz1bXSxHbz0wOzI1Nj5HbztHbysrKSRvW0dvXT0oMTY+R28/XCIwXCI6XCJcIikrR28udG9TdHJpbmcoMTYpO3ZhciBWbz17REVHMlJBRDpNYXRoLlBJLzE4MCxSQUQyREVHOjE4MC9NYXRoLlBJLGdlbmVyYXRlVVVJRDpmdW5jdGlvbigpe3ZhciBlPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwLHQ9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDAscj00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MCxuPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwO3JldHVybigkb1tlJjI1NV0rJG9bZT4+OCYyNTVdKyRvW2U+PjE2JjI1NV0rJG9bZT4+MjQmMjU1XStcIi1cIiskb1t0JjI1NV0rJG9bdD4+OCYyNTVdK1wiLVwiKyRvW3Q+PjE2JjE1fDY0XSskb1t0Pj4yNCYyNTVdK1wiLVwiKyRvW3ImNjN8MTI4XSskb1tyPj44JjI1NV0rXCItXCIrJG9bcj4+MTYmMjU1XSskb1tyPj4yNCYyNTVdKyRvW24mMjU1XSskb1tuPj44JjI1NV0rJG9bbj4+MTYmMjU1XSskb1tuPj4yNCYyNTVdKS50b1VwcGVyQ2FzZSgpfSxjbGFtcDpmdW5jdGlvbihlLHQscil7cmV0dXJuIE1hdGgubWF4KHQsTWF0aC5taW4ocixlKSl9LGV1Y2xpZGVhbk1vZHVsbzpmdW5jdGlvbihlLHQpe3JldHVybihlJXQrdCkldH0sbWFwTGluZWFyOmZ1bmN0aW9uKGUsdCxyLG4saSl7cmV0dXJuIG4rKGUtdCkqKGktbikvKHItdCl9LGxlcnA6ZnVuY3Rpb24oZSx0LHIpe3JldHVybigxLXIpKmUrcip0fSxzbW9vdGhzdGVwOmZ1bmN0aW9uKGUsdCxyKXtpZihlPD10KXJldHVybiAwO2lmKGU+PXIpcmV0dXJuIDE7ZT0oZS10KS8oci10KTtyZXR1cm4gZSplKigzLTIqZSl9LHNtb290aGVyc3RlcDpmdW5jdGlvbihlLHQscil7aWYoZTw9dClyZXR1cm4gMDtpZihlPj1yKXJldHVybiAxO2U9KGUtdCkvKHItdCk7cmV0dXJuIGUqZSplKihlKig2KmUtMTUpKzEwKX0scmFuZEludDpmdW5jdGlvbihlLHQpe3JldHVybiBlK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoodC1lKzEpKX0scmFuZEZsb2F0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrTWF0aC5yYW5kb20oKSoodC1lKX0scmFuZEZsb2F0U3ByZWFkOmZ1bmN0aW9uKGUpe3JldHVybiBlKiguNS1NYXRoLnJhbmRvbSgpKX0sZGVnVG9SYWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUqVm8uREVHMlJBRH0scmFkVG9EZWc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUqVm8uUkFEMkRFR30saXNQb3dlck9mVHdvOmZ1bmN0aW9uKGUpe3JldHVybiAwPT09KGUmZS0xKSYmMCE9PWV9LGNlaWxQb3dlck9mVHdvOmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnBvdygyLE1hdGguY2VpbChNYXRoLmxvZyhlKS9NYXRoLkxOMikpfSxmbG9vclBvd2VyT2ZUd286ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyhlKS9NYXRoLkxOMikpfSxzZXRRdWF0ZXJuaW9uRnJvbVByb3BlckV1bGVyOmZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89TWF0aC5jb3MsYT1NYXRoLnNpbixzPW8oci8yKTtyPWEoci8yKTt2YXIgdT1vKCh0K24pLzIpLGM9YSgodCtuKS8yKSxsPW8oKHQtbikvMiksaD1hKCh0LW4pLzIpO289bygobi10KS8yKTt0PWEoKG4tdCkvMik7c3dpdGNoKGkpe2Nhc2VcIlhZWFwiOmUuc2V0KHMqYyxyKmwscipoLHMqdSk7YnJlYWs7Y2FzZVwiWVpZXCI6ZS5zZXQocipoLHMqYyxyKmwscyp1KTticmVhaztjYXNlXCJaWFpcIjplLnNldChyKmwscipoLHMqYyxzKnUpO2JyZWFrO2Nhc2VcIlhaWFwiOmUuc2V0KHMqYyxyKnQscipvLHMqdSk7YnJlYWs7Y2FzZVwiWVhZXCI6ZS5zZXQocipvLHMqYyxyKnQscyp1KTticmVhaztjYXNlXCJaWVpcIjplLnNldChyKnQscipvLHMqYyxzKnUpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aFV0aWxzOiAuc2V0UXVhdGVybmlvbkZyb21Qcm9wZXJFdWxlcigpIGVuY291bnRlcmVkIGFuIHVua25vd24gb3JkZXI6IFwiK2kpfX19O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE1lLnByb3RvdHlwZSx7d2lkdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnh9LHNldDpmdW5jdGlvbihlKXt0aGlzLng9ZX19LGhlaWdodDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMueT1lfX19KTtPYmplY3QuYXNzaWduKE1lLnByb3RvdHlwZSx7aXNWZWN0b3IyOiEwLHNldDpmdW5jdGlvbihlLHQpe3RoaXMueD1lO3RoaXMueT10O3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oZSl7dGhpcy55PXRoaXMueD1lO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGUpe3RoaXMueD1lO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGUpe3RoaXMueT1lO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oZSx0KXtzd2l0Y2goZSl7Y2FzZSAwOnRoaXMueD10O2JyZWFrO2Nhc2UgMTp0aGlzLnk9dDticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitlKX1yZXR1cm4gdGhpc30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitlKX19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnkpfSxjb3B5OmZ1bmN0aW9uKGUpe3RoaXMueD1lLng7dGhpcy55PWUueTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dClyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoZSx0KTt0aGlzLngrPWUueDt0aGlzLnkrPWUueTtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGUpe3RoaXMueCs9ZTt0aGlzLnkrPWU7cmV0dXJuIHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24oZSx0KXt0aGlzLng9ZS54K3QueDt0aGlzLnk9ZS55K3QueTtyZXR1cm4gdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGUsdCl7dGhpcy54Kz1lLngqdDt0aGlzLnkrPWUueSp0O3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhlLHQpO3RoaXMueC09ZS54O3RoaXMueS09ZS55O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oZSl7dGhpcy54LT1lO3RoaXMueS09ZTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihlLHQpe3RoaXMueD1lLngtdC54O3RoaXMueT1lLnktdC55O3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihlKXt0aGlzLngqPWUueDt0aGlzLnkqPWUueTtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oZSl7dGhpcy54Kj1lO3RoaXMueSo9ZTtyZXR1cm4gdGhpc30sZGl2aWRlOmZ1bmN0aW9uKGUpe3RoaXMueC89ZS54O3RoaXMueS89ZS55O3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9lKX0sYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMueCxyPXRoaXMueTtlPWUuZWxlbWVudHM7dGhpcy54PWVbMF0qdCtlWzNdKnIrZVs2XTt0aGlzLnk9ZVsxXSp0K2VbNF0qcitlWzddO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oZSl7dGhpcy54PU1hdGgubWluKHRoaXMueCxlLngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksZS55KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGUpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsZS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGUueSk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGUsdCl7dGhpcy54PU1hdGgubWF4KGUueCxNYXRoLm1pbih0LngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KGUueSxNYXRoLm1pbih0LnksdGhpcy55KSk7cmV0dXJuIHRoaXN9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKGUsdCl7dGhpcy54PU1hdGgubWF4KGUsTWF0aC5taW4odCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoZSxNYXRoLm1pbih0LHRoaXMueSkpO3JldHVybiB0aGlzfSxjbGFtcExlbmd0aDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHJ8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGUsTWF0aC5taW4odCxyKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpc30sY2VpbDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3JldHVybiB0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD0wPnRoaXMueD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy54PS10aGlzLng7dGhpcy55PS10aGlzLnk7cmV0dXJuIHRoaXN9LGRvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy54KmUueCt0aGlzLnkqZS55fSxjcm9zczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy54KmUueS10aGlzLnkqZS54fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnl9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sbWFuaGF0dGFuTGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfSxhbmdsZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKC10aGlzLnksLXRoaXMueCkrTWF0aC5QSX0sZGlzdGFuY2VUbzpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoZSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLngtZS54O2U9dGhpcy55LWUueTtyZXR1cm4gdCp0K2UqZX0sbWFuaGF0dGFuRGlzdGFuY2VUbzpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5hYnModGhpcy54LWUueCkrTWF0aC5hYnModGhpcy55LWUueSl9LHNldExlbmd0aDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihlKX0sbGVycDpmdW5jdGlvbihlLHQpe3RoaXMueCs9KGUueC10aGlzLngpKnQ7dGhpcy55Kz0oZS55LXRoaXMueSkqdDtyZXR1cm4gdGhpc30sbGVycFZlY3RvcnM6ZnVuY3Rpb24oZSx0LHIpe3RoaXMueD1lLngrKHQueC1lLngpKnI7dGhpcy55PWUueSsodC55LWUueSkqcjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlLng9PT10aGlzLngmJmUueT09PXRoaXMueX0sZnJvbUFycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCk7dGhpcy54PWVbdF07dGhpcy55PWVbdCsxXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPVtdKTt2b2lkIDA9PT10JiYodD0wKTtlW3RdPXRoaXMueDtlW3QrMV09dGhpcy55O3JldHVybiBlfSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGUsdCxyKXt2b2lkIDAhPT1yJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1lLmdldFgodCk7dGhpcy55PWUuZ2V0WSh0KTtyZXR1cm4gdGhpc30scm90YXRlQXJvdW5kOmZ1bmN0aW9uKGUsdCl7dmFyIHI9TWF0aC5jb3ModCk7dD1NYXRoLnNpbih0KTt2YXIgbj10aGlzLngtZS54LGk9dGhpcy55LWUueTt0aGlzLng9bipyLWkqdCtlLng7dGhpcy55PW4qdCtpKnIrZS55O3JldHVybiB0aGlzfSxyYW5kb206ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yYW5kb20oKTt0aGlzLnk9TWF0aC5yYW5kb20oKTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKG0ucHJvdG90eXBlLHtpc01hdHJpeDM6ITAsc2V0OmZ1bmN0aW9uKGUsdCxyLG4saSxvLGEscyx1KXt2YXIgYz10aGlzLmVsZW1lbnRzO2NbMF09ZTtjWzFdPW47Y1syXT1hO2NbM109dDtjWzRdPWk7Y1s1XT1zO2NbNl09cjtjWzddPW87Y1s4XT11O3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKX0sY29weTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnRzO2U9ZS5lbGVtZW50czt0WzBdPWVbMF07dFsxXT1lWzFdO3RbMl09ZVsyXTt0WzNdPWVbM107dFs0XT1lWzRdO3RbNV09ZVs1XTt0WzZdPWVbNl07dFs3XT1lWzddO3RbOF09ZVs4XTtyZXR1cm4gdGhpc30sZXh0cmFjdEJhc2lzOmZ1bmN0aW9uKGUsdCxyKXtlLnNldEZyb21NYXRyaXgzQ29sdW1uKHRoaXMsMCk7dC5zZXRGcm9tTWF0cml4M0NvbHVtbih0aGlzLDEpO3Iuc2V0RnJvbU1hdHJpeDNDb2x1bW4odGhpcywyKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeDQ6ZnVuY3Rpb24oZSl7ZT1lLmVsZW1lbnRzO3RoaXMuc2V0KGVbMF0sZVs0XSxlWzhdLGVbMV0sZVs1XSxlWzldLGVbMl0sZVs2XSxlWzEwXSk7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxlKX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyhlLHRoaXMpfSxtdWx0aXBseU1hdHJpY2VzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5lbGVtZW50cyxuPXQuZWxlbWVudHM7dD10aGlzLmVsZW1lbnRzO2U9clswXTt2YXIgaT1yWzNdLG89cls2XSxhPXJbMV0scz1yWzRdLHU9cls3XSxjPXJbMl0sbD1yWzVdO3I9cls4XTt2YXIgaD1uWzBdLHA9blszXSxmPW5bNl0sZD1uWzFdLHY9bls0XSxtPW5bN10sZz1uWzJdLF89bls1XTtuPW5bOF07dFswXT1lKmgraSpkK28qZzt0WzNdPWUqcCtpKnYrbypfO3RbNl09ZSpmK2kqbStvKm47dFsxXT1hKmgrcypkK3UqZzt0WzRdPWEqcCtzKnYrdSpfO3RbN109YSpmK3MqbSt1Km47dFsyXT1jKmgrbCpkK3IqZzt0WzVdPWMqcCtsKnYrcipfO3RbOF09YypmK2wqbStyKm47cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudHM7dFswXSo9ZTt0WzNdKj1lO3RbNl0qPWU7dFsxXSo9ZTt0WzRdKj1lO3RbN10qPWU7dFsyXSo9ZTt0WzVdKj1lO3RbOF0qPWU7cmV0dXJuIHRoaXN9LGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50cyx0PWVbMF0scj1lWzFdLG49ZVsyXSxpPWVbM10sbz1lWzRdLGE9ZVs1XSxzPWVbNl0sdT1lWzddO2U9ZVs4XTtyZXR1cm4gdCpvKmUtdCphKnUtcippKmUrciphKnMrbippKnUtbipvKnN9LGdldEludmVyc2U6ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT10JiZjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuZ2V0SW52ZXJzZSgpIGNhbiBubyBsb25nZXIgYmUgY29uZmlndXJlZCB0byB0aHJvdyBvbiBkZWdlbmVyYXRlLlwiKTt2YXIgcj1lLmVsZW1lbnRzO2U9dGhpcy5lbGVtZW50czt0PXJbMF07dmFyIG49clsxXSxpPXJbMl0sbz1yWzNdLGE9cls0XSxzPXJbNV0sdT1yWzZdLGM9cls3XTtyPXJbOF07dmFyIGw9ciphLXMqYyxoPXMqdS1yKm8scD1jKm8tYSp1LGY9dCpsK24qaCtpKnA7aWYoMD09PWYpcmV0dXJuIHRoaXMuc2V0KDAsMCwwLDAsMCwwLDAsMCwwKTtmPTEvZjtlWzBdPWwqZjtlWzFdPShpKmMtcipuKSpmO2VbMl09KHMqbi1pKmEpKmY7ZVszXT1oKmY7ZVs0XT0ocip0LWkqdSkqZjtlWzVdPShpKm8tcyp0KSpmO2VbNl09cCpmO2VbN109KG4qdS1jKnQpKmY7ZVs4XT0oYSp0LW4qbykqZjtyZXR1cm4gdGhpc30sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50czt2YXIgdD1lWzFdO2VbMV09ZVszXTtlWzNdPXQ7dD1lWzJdO2VbMl09ZVs2XTtlWzZdPXQ7dD1lWzVdO2VbNV09ZVs3XTtlWzddPXQ7cmV0dXJuIHRoaXN9LGdldE5vcm1hbE1hdHJpeDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4NChlKS5nZXRJbnZlcnNlKHRoaXMpLnRyYW5zcG9zZSgpfSx0cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50cztlWzBdPXRbMF07ZVsxXT10WzNdO2VbMl09dFs2XTtlWzNdPXRbMV07ZVs0XT10WzRdO2VbNV09dFs3XTtlWzZdPXRbMl07ZVs3XT10WzVdO2VbOF09dFs4XTtyZXR1cm4gdGhpc30sc2V0VXZUcmFuc2Zvcm06ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7dmFyIHM9TWF0aC5jb3MoaSk7aT1NYXRoLnNpbihpKTt0aGlzLnNldChyKnMscippLC1yKihzKm8raSphKStvK2UsLW4qaSxuKnMsLW4qKC1pKm8rcyphKSthK3QsMCwwLDEpfSxzY2FsZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZWxlbWVudHM7clswXSo9ZTtyWzNdKj1lO3JbNl0qPWU7clsxXSo9dDtyWzRdKj10O3JbN10qPXQ7cmV0dXJuIHRoaXN9LHJvdGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1NYXRoLmNvcyhlKTtlPU1hdGguc2luKGUpO3ZhciByPXRoaXMuZWxlbWVudHMsbj1yWzBdLGk9clszXSxvPXJbNl0sYT1yWzFdLHM9cls0XSx1PXJbN107clswXT10Km4rZSphO3JbM109dCppK2UqcztyWzZdPXQqbytlKnU7clsxXT0tZSpuK3QqYTtyWzRdPS1lKmkrdCpzO3JbN109LWUqbyt0KnU7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZWxlbWVudHM7clswXSs9ZSpyWzJdO3JbM10rPWUqcls1XTtyWzZdKz1lKnJbOF07clsxXSs9dCpyWzJdO3JbNF0rPXQqcls1XTtyWzddKz10KnJbOF07cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnRzO2U9ZS5lbGVtZW50cztmb3IodmFyIHI9MDs5PnI7cisrKWlmKHRbcl0hPT1lW3JdKXJldHVybiExO3JldHVybiEwfSxmcm9tQXJyYXk6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0wKTtmb3IodmFyIHI9MDs5PnI7cisrKXRoaXMuZWxlbWVudHNbcl09ZVtyK3RdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9W10pO3ZvaWQgMD09PXQmJih0PTApO3ZhciByPXRoaXMuZWxlbWVudHM7ZVt0XT1yWzBdO2VbdCsxXT1yWzFdO2VbdCsyXT1yWzJdO2VbdCszXT1yWzNdO2VbdCs0XT1yWzRdO2VbdCs1XT1yWzVdO2VbdCs2XT1yWzZdO2VbdCs3XT1yWzddO2VbdCs4XT1yWzhdO3JldHVybiBlfX0pO3ZhciBIbyxVbz17Z2V0RGF0YVVSTDpmdW5jdGlvbihlKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQpcmV0dXJuIGUuc3JjO2lmKCEoZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSl7dm9pZCAwPT09SG8mJihIbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIikpO0hvLndpZHRoPWUud2lkdGg7SG8uaGVpZ2h0PWUuaGVpZ2h0O3ZhciB0PUhvLmdldENvbnRleHQoXCIyZFwiKTtlIGluc3RhbmNlb2YgSW1hZ2VEYXRhP3QucHV0SW1hZ2VEYXRhKGUsMCwwKTp0LmRyYXdJbWFnZShlLDAsMCxlLndpZHRoLGUuaGVpZ2h0KTtlPUhvfXJldHVybiAyMDQ4PGUud2lkdGh8fDIwNDg8ZS5oZWlnaHQ/ZS50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIsLjYpOmUudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpfX0scW89MDtwLkRFRkFVTFRfSU1BR0U9dm9pZCAwO3AuREVGQVVMVF9NQVBQSU5HPTMwMDtwLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpwLGlzVGV4dHVyZTohMCx1cGRhdGVNYXRyaXg6ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5zZXRVdlRyYW5zZm9ybSh0aGlzLm9mZnNldC54LHRoaXMub2Zmc2V0LnksdGhpcy5yZXBlYXQueCx0aGlzLnJlcGVhdC55LHRoaXMucm90YXRpb24sdGhpcy5jZW50ZXIueCx0aGlzLmNlbnRlci55KX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5uYW1lPWUubmFtZTt0aGlzLmltYWdlPWUuaW1hZ2U7dGhpcy5taXBtYXBzPWUubWlwbWFwcy5zbGljZSgwKTt0aGlzLm1hcHBpbmc9ZS5tYXBwaW5nO3RoaXMud3JhcFM9ZS53cmFwUzt0aGlzLndyYXBUPWUud3JhcFQ7dGhpcy5tYWdGaWx0ZXI9ZS5tYWdGaWx0ZXI7dGhpcy5taW5GaWx0ZXI9ZS5taW5GaWx0ZXI7dGhpcy5hbmlzb3Ryb3B5PWUuYW5pc290cm9weTt0aGlzLmZvcm1hdD1lLmZvcm1hdDt0aGlzLmludGVybmFsRm9ybWF0PWUuaW50ZXJuYWxGb3JtYXQ7dGhpcy50eXBlPWUudHlwZTt0aGlzLm9mZnNldC5jb3B5KGUub2Zmc2V0KTt0aGlzLnJlcGVhdC5jb3B5KGUucmVwZWF0KTt0aGlzLmNlbnRlci5jb3B5KGUuY2VudGVyKTt0aGlzLnJvdGF0aW9uPWUucm90YXRpb247dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWUubWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeC5jb3B5KGUubWF0cml4KTt0aGlzLmdlbmVyYXRlTWlwbWFwcz1lLmdlbmVyYXRlTWlwbWFwczt0aGlzLnByZW11bHRpcGx5QWxwaGE9ZS5wcmVtdWx0aXBseUFscGhhO3RoaXMuZmxpcFk9ZS5mbGlwWTt0aGlzLnVucGFja0FsaWdubWVudD1lLnVucGFja0FsaWdubWVudDt0aGlzLmVuY29kaW5nPWUuZW5jb2Rpbmc7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lfHxcInN0cmluZ1wiPT09dHlwZW9mIGU7aWYoIXQmJnZvaWQgMCE9PWUudGV4dHVyZXNbdGhpcy51dWlkXSlyZXR1cm4gZS50ZXh0dXJlc1t0aGlzLnV1aWRdO3ZhciByPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIlRleHR1cmVcIixnZW5lcmF0b3I6XCJUZXh0dXJlLnRvSlNPTlwifSx1dWlkOnRoaXMudXVpZCxuYW1lOnRoaXMubmFtZSxtYXBwaW5nOnRoaXMubWFwcGluZyxyZXBlYXQ6W3RoaXMucmVwZWF0LngsdGhpcy5yZXBlYXQueV0sb2Zmc2V0Olt0aGlzLm9mZnNldC54LHRoaXMub2Zmc2V0LnldLGNlbnRlcjpbdGhpcy5jZW50ZXIueCx0aGlzLmNlbnRlci55XSxyb3RhdGlvbjp0aGlzLnJvdGF0aW9uLHdyYXA6W3RoaXMud3JhcFMsdGhpcy53cmFwVF0sZm9ybWF0OnRoaXMuZm9ybWF0LHR5cGU6dGhpcy50eXBlLGVuY29kaW5nOnRoaXMuZW5jb2RpbmcsbWluRmlsdGVyOnRoaXMubWluRmlsdGVyLG1hZ0ZpbHRlcjp0aGlzLm1hZ0ZpbHRlcixhbmlzb3Ryb3B5OnRoaXMuYW5pc290cm9weSxmbGlwWTp0aGlzLmZsaXBZLHByZW11bHRpcGx5QWxwaGE6dGhpcy5wcmVtdWx0aXBseUFscGhhLHVucGFja0FsaWdubWVudDp0aGlzLnVucGFja0FsaWdubWVudH07aWYodm9pZCAwIT09dGhpcy5pbWFnZSl7dmFyIG49dGhpcy5pbWFnZTt2b2lkIDA9PT1uLnV1aWQmJihuLnV1aWQ9Vm8uZ2VuZXJhdGVVVUlEKCkpO2lmKCF0JiZ2b2lkIDA9PT1lLmltYWdlc1tuLnV1aWRdKXtpZihBcnJheS5pc0FycmF5KG4pKXt2YXIgaT1bXTtmb3IodmFyIG89MCxhPW4ubGVuZ3RoO288YTtvKyspaS5wdXNoKFVvLmdldERhdGFVUkwobltvXSkpfWVsc2UgaT1Vby5nZXREYXRhVVJMKG4pO2UuaW1hZ2VzW24udXVpZF09e3V1aWQ6bi51dWlkLHVybDppfX1yLmltYWdlPW4udXVpZH10fHwoZS50ZXh0dXJlc1t0aGlzLnV1aWRdPXIpO3JldHVybiByfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9LHRyYW5zZm9ybVV2OmZ1bmN0aW9uKGUpe2lmKDMwMCE9PXRoaXMubWFwcGluZylyZXR1cm4gZTtlLmFwcGx5TWF0cml4Myh0aGlzLm1hdHJpeCk7aWYoMD5lLnh8fDE8ZS54KXN3aXRjaCh0aGlzLndyYXBTKXtjYXNlIDFlMzplLngtPU1hdGguZmxvb3IoZS54KTticmVhaztjYXNlIDEwMDE6ZS54PTA+ZS54PzA6MTticmVhaztjYXNlIDEwMDI6ZS54PTE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGUueCklMik/TWF0aC5jZWlsKGUueCktZS54OmUueC1NYXRoLmZsb29yKGUueCl9aWYoMD5lLnl8fDE8ZS55KXN3aXRjaCh0aGlzLndyYXBUKXtjYXNlIDFlMzplLnktPU1hdGguZmxvb3IoZS55KTticmVhaztjYXNlIDEwMDE6ZS55PTA+ZS55PzA6MTticmVhaztjYXNlIDEwMDI6ZS55PTE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGUueSklMik/TWF0aC5jZWlsKGUueSktZS55OmUueS1NYXRoLmZsb29yKGUueSl9dGhpcy5mbGlwWSYmKGUueT0xLWUueSk7cmV0dXJuIGV9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGUpeyEwPT09ZSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ2UucHJvdG90eXBlLHt3aWR0aDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuen0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuej1lfX0saGVpZ2h0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy53PWV9fX0pO09iamVjdC5hc3NpZ24oQ2UucHJvdG90eXBlLHtpc1ZlY3RvcjQ6ITAsc2V0OmZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMueD1lO3RoaXMueT10O3RoaXMuej1yO3RoaXMudz1uO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oZSl7dGhpcy53PXRoaXMuej10aGlzLnk9dGhpcy54PWU7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oZSl7dGhpcy54PWU7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oZSl7dGhpcy55PWU7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oZSl7dGhpcy56PWU7cmV0dXJuIHRoaXN9LHNldFc6ZnVuY3Rpb24oZSl7dGhpcy53PWU7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlIDA6dGhpcy54PXQ7YnJlYWs7Y2FzZSAxOnRoaXMueT10O2JyZWFrO2Nhc2UgMjp0aGlzLno9dDticmVhaztjYXNlIDM6dGhpcy53PXQ7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrZSl9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrZSl9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLncpfSxjb3B5OmZ1bmN0aW9uKGUpe3RoaXMueD1lLng7dGhpcy55PWUueTt0aGlzLno9ZS56O3RoaXMudz12b2lkIDAhPT1lLnc/ZS53OjE7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PXQpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGUsdCk7dGhpcy54Kz1lLng7dGhpcy55Kz1lLnk7dGhpcy56Kz1lLno7dGhpcy53Kz1lLnc7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihlKXt0aGlzLngrPWU7dGhpcy55Kz1lO3RoaXMueis9ZTt0aGlzLncrPWU7cmV0dXJuIHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24oZSx0KXt0aGlzLng9ZS54K3QueDt0aGlzLnk9ZS55K3QueTt0aGlzLno9ZS56K3Quejt0aGlzLnc9ZS53K3QudztyZXR1cm4gdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGUsdCl7dGhpcy54Kz1lLngqdDt0aGlzLnkrPWUueSp0O3RoaXMueis9ZS56KnQ7dGhpcy53Kz1lLncqdDtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dClyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoZSx0KTt0aGlzLngtPWUueDt0aGlzLnktPWUueTt0aGlzLnotPWUuejt0aGlzLnctPWUudztyZXR1cm4gdGhpc30sc3ViU2NhbGFyOmZ1bmN0aW9uKGUpe3RoaXMueC09ZTt0aGlzLnktPWU7dGhpcy56LT1lO3RoaXMudy09ZTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihlLHQpe3RoaXMueD1lLngtdC54O3RoaXMueT1lLnktdC55O3RoaXMuej1lLnotdC56O3RoaXMudz1lLnctdC53O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihlKXt0aGlzLngqPWU7dGhpcy55Kj1lO3RoaXMueio9ZTt0aGlzLncqPWU7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLngscj10aGlzLnksbj10aGlzLnosaT10aGlzLnc7ZT1lLmVsZW1lbnRzO3RoaXMueD1lWzBdKnQrZVs0XSpyK2VbOF0qbitlWzEyXSppO3RoaXMueT1lWzFdKnQrZVs1XSpyK2VbOV0qbitlWzEzXSppO3RoaXMuej1lWzJdKnQrZVs2XSpyK2VbMTBdKm4rZVsxNF0qaTt0aGlzLnc9ZVszXSp0K2VbN10qcitlWzExXSpuK2VbMTVdKmk7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL2UpfSxzZXRBeGlzQW5nbGVGcm9tUXVhdGVybmlvbjpmdW5jdGlvbihlKXt0aGlzLnc9MipNYXRoLmFjb3MoZS53KTt2YXIgdD1NYXRoLnNxcnQoMS1lLncqZS53KTsxZS00PnQ/KHRoaXMueD0xLHRoaXMuej10aGlzLnk9MCk6KHRoaXMueD1lLngvdCx0aGlzLnk9ZS55L3QsdGhpcy56PWUuei90KTtyZXR1cm4gdGhpc30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGUpe2U9ZS5lbGVtZW50czt2YXIgdD1lWzBdO3ZhciByPWVbNF07dmFyIG49ZVs4XSxpPWVbMV0sbz1lWzVdLGE9ZVs5XTt2YXIgcz1lWzJdO3ZhciB1PWVbNl07dmFyIGM9ZVsxMF07aWYoLjAxPk1hdGguYWJzKHItaSkmJi4wMT5NYXRoLmFicyhuLXMpJiYuMDE+TWF0aC5hYnMoYS11KSl7aWYoLjE+TWF0aC5hYnMocitpKSYmLjE+TWF0aC5hYnMobitzKSYmLjE+TWF0aC5hYnMoYSt1KSYmLjE+TWF0aC5hYnModCtvK2MtMykpcmV0dXJuIHRoaXMuc2V0KDEsMCwwLDApLHRoaXM7ZT1NYXRoLlBJO3Q9KHQrMSkvMjtvPShvKzEpLzI7Yz0oYysxKS8yO3I9KHIraSkvNDtuPShuK3MpLzQ7YT0oYSt1KS80O3Q+byYmdD5jPy4wMT50Pyh1PTAscj1zPS43MDcxMDY3ODEpOih1PU1hdGguc3FydCh0KSxzPXIvdSxyPW4vdSk6bz5jPy4wMT5vPyh1PS43MDcxMDY3ODEscz0wLHI9LjcwNzEwNjc4MSk6KHM9TWF0aC5zcXJ0KG8pLHU9ci9zLHI9YS9zKTouMDE+Yz8ocz11PS43MDcxMDY3ODEscj0wKToocj1NYXRoLnNxcnQoYyksdT1uL3Iscz1hL3IpO3RoaXMuc2V0KHUscyxyLGUpO3JldHVybiB0aGlzfWU9TWF0aC5zcXJ0KCh1LWEpKih1LWEpKyhuLXMpKihuLXMpKyhpLXIpKihpLXIpKTsuMDAxPk1hdGguYWJzKGUpJiYoZT0xKTt0aGlzLng9KHUtYSkvZTt0aGlzLnk9KG4tcykvZTt0aGlzLno9KGktcikvZTt0aGlzLnc9TWF0aC5hY29zKCh0K28rYy0xKS8yKTtyZXR1cm4gdGhpc30sbWluOmZ1bmN0aW9uKGUpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsZS54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LGUueSk7dGhpcy56PU1hdGgubWluKHRoaXMueixlLnopO3RoaXMudz1NYXRoLm1pbih0aGlzLncsZS53KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGUpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsZS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGUueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueixlLnopO3RoaXMudz1NYXRoLm1heCh0aGlzLncsZS53KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oZSx0KXt0aGlzLng9TWF0aC5tYXgoZS54LE1hdGgubWluKHQueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoZS55LE1hdGgubWluKHQueSx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgoZS56LE1hdGgubWluKHQueix0aGlzLnopKTt0aGlzLnc9TWF0aC5tYXgoZS53LE1hdGgubWluKHQudyx0aGlzLncpKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oZSx0KXt0aGlzLng9TWF0aC5tYXgoZSxNYXRoLm1pbih0LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChlLE1hdGgubWluKHQsdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KGUsTWF0aC5taW4odCx0aGlzLnopKTt0aGlzLnc9TWF0aC5tYXgoZSxNYXRoLm1pbih0LHRoaXMudykpO3JldHVybiB0aGlzfSxjbGFtcExlbmd0aDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHJ8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGUsTWF0aC5taW4odCxyKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz1NYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3RoaXMuej1NYXRoLmNlaWwodGhpcy56KTt0aGlzLnc9TWF0aC5jZWlsKHRoaXMudyk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7dGhpcy53PU1hdGgucm91bmQodGhpcy53KTtyZXR1cm4gdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9MD50aGlzLng/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT0wPnRoaXMueT9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PTA+dGhpcy56P01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9MD50aGlzLnc/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTt0aGlzLno9LXRoaXMuejt0aGlzLnc9LXRoaXMudztyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLngqZS54K3RoaXMueSplLnkrdGhpcy56KmUueit0aGlzLncqZS53fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLncpfSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoZSl9LGxlcnA6ZnVuY3Rpb24oZSx0KXt0aGlzLngrPShlLngtdGhpcy54KSp0O3RoaXMueSs9KGUueS10aGlzLnkpKnQ7dGhpcy56Kz0oZS56LXRoaXMueikqdDt0aGlzLncrPShlLnctdGhpcy53KSp0O3JldHVybiB0aGlzfSxsZXJwVmVjdG9yczpmdW5jdGlvbihlLHQscil7dGhpcy54PWUueCsodC54LWUueCkqcjt0aGlzLnk9ZS55Kyh0LnktZS55KSpyO3RoaXMuej1lLnorKHQuei1lLnopKnI7dGhpcy53PWUudysodC53LWUudykqcjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlLng9PT10aGlzLngmJmUueT09PXRoaXMueSYmZS56PT09dGhpcy56JiZlLnc9PT10aGlzLnd9LGZyb21BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PTApO3RoaXMueD1lW3RdO3RoaXMueT1lW3QrMV07dGhpcy56PWVbdCsyXTt0aGlzLnc9ZVt0KzNdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9W10pO3ZvaWQgMD09PXQmJih0PTApO2VbdF09dGhpcy54O2VbdCsxXT10aGlzLnk7ZVt0KzJdPXRoaXMuejtlW3QrM109dGhpcy53O3JldHVybiBlfSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGUsdCxyKXt2b2lkIDAhPT1yJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1lLmdldFgodCk7dGhpcy55PWUuZ2V0WSh0KTt0aGlzLno9ZS5nZXRaKHQpO3RoaXMudz1lLmdldFcodCk7cmV0dXJuIHRoaXN9LHJhbmRvbTpmdW5jdGlvbigpe3RoaXMueD1NYXRoLnJhbmRvbSgpO3RoaXMueT1NYXRoLnJhbmRvbSgpO3RoaXMuej1NYXRoLnJhbmRvbSgpO3RoaXMudz1NYXRoLnJhbmRvbSgpO3JldHVybiB0aGlzfX0pO1QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlQsaXNXZWJHTFJlbmRlclRhcmdldDohMCxzZXRTaXplOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy53aWR0aCE9PWV8fHRoaXMuaGVpZ2h0IT09dCl0aGlzLndpZHRoPWUsdGhpcy5oZWlnaHQ9dCx0aGlzLnRleHR1cmUuaW1hZ2Uud2lkdGg9ZSx0aGlzLnRleHR1cmUuaW1hZ2UuaGVpZ2h0PXQsdGhpcy5kaXNwb3NlKCk7dGhpcy52aWV3cG9ydC5zZXQoMCwwLGUsdCk7dGhpcy5zY2lzc29yLnNldCgwLDAsZSx0KX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy53aWR0aD1lLndpZHRoO3RoaXMuaGVpZ2h0PWUuaGVpZ2h0O3RoaXMudmlld3BvcnQuY29weShlLnZpZXdwb3J0KTt0aGlzLnRleHR1cmU9ZS50ZXh0dXJlLmNsb25lKCk7dGhpcy5kZXB0aEJ1ZmZlcj1lLmRlcHRoQnVmZmVyO3RoaXMuc3RlbmNpbEJ1ZmZlcj1lLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9ZS5kZXB0aFRleHR1cmU7cmV0dXJuIHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtyLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpyLGlzV2ViR0xNdWx0aXNhbXBsZVJlbmRlclRhcmdldDohMCxjb3B5OmZ1bmN0aW9uKGUpe1QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuc2FtcGxlcz1lLnNhbXBsZXM7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihkLHtzbGVycDpmdW5jdGlvbihlLHQscixuKXtyZXR1cm4gci5jb3B5KGUpLnNsZXJwKHQsbil9LHNsZXJwRmxhdDpmdW5jdGlvbihlLHQscixuLGksbyxhKXt2YXIgcz1yW24rMF0sdT1yW24rMV0sYz1yW24rMl07cj1yW24rM107bj1pW28rMF07dmFyIGw9aVtvKzFdLGg9aVtvKzJdO2k9aVtvKzNdO2lmKHIhPT1pfHxzIT09bnx8dSE9PWx8fGMhPT1oKXtvPTEtYTt2YXIgcD1zKm4rdSpsK2MqaCtyKmksZj0wPD1wPzE6LTEsZD0xLXAqcDtkPk51bWJlci5FUFNJTE9OJiYoZD1NYXRoLnNxcnQoZCkscD1NYXRoLmF0YW4yKGQscCpmKSxvPU1hdGguc2luKG8qcCkvZCxhPU1hdGguc2luKGEqcCkvZCk7Zio9YTtzPXMqbytuKmY7dT11Km8rbCpmO2M9YypvK2gqZjtyPXIqbytpKmY7bz09PTEtYSYmKGE9MS9NYXRoLnNxcnQocypzK3UqdStjKmMrcipyKSxzKj1hLHUqPWEsYyo9YSxyKj1hKX1lW3RdPXM7ZVt0KzFdPXU7ZVt0KzJdPWM7ZVt0KzNdPXJ9LG11bHRpcGx5UXVhdGVybmlvbnNGbGF0OmZ1bmN0aW9uKGUsdCxyLG4saSxvKXt2YXIgYT1yW25dLHM9cltuKzFdLHU9cltuKzJdO3I9cltuKzNdO249aVtvXTt2YXIgYz1pW28rMV0sbD1pW28rMl07aT1pW28rM107ZVt0XT1hKmkrcipuK3MqbC11KmM7ZVt0KzFdPXMqaStyKmMrdSpuLWEqbDtlW3QrMl09dSppK3IqbCthKmMtcypuO2VbdCszXT1yKmktYSpuLXMqYy11Kmw7cmV0dXJuIGV9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUse3g6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5feD1lO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX19LHk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5feT1lO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX19LHo6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fej1lO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX19LHc6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdz1lO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKX19fSk7T2JqZWN0LmFzc2lnbihkLnByb3RvdHlwZSx7aXNRdWF0ZXJuaW9uOiEwLHNldDpmdW5jdGlvbihlLHQscixuKXt0aGlzLl94PWU7dGhpcy5feT10O3RoaXMuX3o9cjt0aGlzLl93PW47dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl93KX0sY29weTpmdW5jdGlvbihlKXt0aGlzLl94PWUueDt0aGlzLl95PWUueTt0aGlzLl96PWUuejt0aGlzLl93PWUudzt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21FdWxlcjpmdW5jdGlvbihlLHQpe2lmKCFlfHwhZS5pc0V1bGVyKXRocm93IEVycm9yKFwiVEhSRUUuUXVhdGVybmlvbjogLnNldEZyb21FdWxlcigpIG5vdyBleHBlY3RzIGFuIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO3ZhciByPWUuX3gsbj1lLl95LGk9ZS5fejtlPWUub3JkZXI7dmFyIG89TWF0aC5jb3MsYT1NYXRoLnNpbixzPW8oci8yKSx1PW8obi8yKTtvPW8oaS8yKTtyPWEoci8yKTtuPWEobi8yKTtpPWEoaS8yKTtzd2l0Y2goZSl7Y2FzZVwiWFlaXCI6dGhpcy5feD1yKnUqbytzKm4qaTt0aGlzLl95PXMqbipvLXIqdSppO3RoaXMuX3o9cyp1KmkrcipuKm87dGhpcy5fdz1zKnUqby1yKm4qaTticmVhaztjYXNlXCJZWFpcIjp0aGlzLl94PXIqdSpvK3MqbippO3RoaXMuX3k9cypuKm8tcip1Kmk7dGhpcy5fej1zKnUqaS1yKm4qbzt0aGlzLl93PXMqdSpvK3IqbippO2JyZWFrO2Nhc2VcIlpYWVwiOnRoaXMuX3g9cip1Km8tcypuKmk7dGhpcy5feT1zKm4qbytyKnUqaTt0aGlzLl96PXMqdSppK3IqbipvO3RoaXMuX3c9cyp1Km8tcipuKmk7YnJlYWs7Y2FzZVwiWllYXCI6dGhpcy5feD1yKnUqby1zKm4qaTt0aGlzLl95PXMqbipvK3IqdSppO3RoaXMuX3o9cyp1KmktcipuKm87dGhpcy5fdz1zKnUqbytyKm4qaTticmVhaztjYXNlXCJZWlhcIjp0aGlzLl94PXIqdSpvK3MqbippO3RoaXMuX3k9cypuKm8rcip1Kmk7dGhpcy5fej1zKnUqaS1yKm4qbzt0aGlzLl93PXMqdSpvLXIqbippO2JyZWFrO2Nhc2VcIlhaWVwiOnRoaXMuX3g9cip1Km8tcypuKmk7dGhpcy5feT1zKm4qby1yKnUqaTt0aGlzLl96PXMqdSppK3IqbipvO3RoaXMuX3c9cyp1Km8rcipuKmk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgZW5jb3VudGVyZWQgYW4gdW5rbm93biBvcmRlcjogXCIrZSl9ITEhPT10JiZ0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oZSx0KXt0Lz0yO3ZhciByPU1hdGguc2luKHQpO3RoaXMuX3g9ZS54KnI7dGhpcy5feT1lLnkqcjt0aGlzLl96PWUueipyO3RoaXMuX3c9TWF0aC5jb3ModCk7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbGVtZW50cyxyPXRbMF07ZT10WzRdO3ZhciBuPXRbOF0saT10WzFdLG89dFs1XSxhPXRbOV0scz10WzJdLHU9dFs2XTt0PXRbMTBdO3ZhciBjPXIrbyt0OzA8Yz8ocj0uNS9NYXRoLnNxcnQoYysxKSx0aGlzLl93PS4yNS9yLHRoaXMuX3g9KHUtYSkqcix0aGlzLl95PShuLXMpKnIsdGhpcy5fej0oaS1lKSpyKTpyPm8mJnI+dD8ocj0yKk1hdGguc3FydCgxK3Itby10KSx0aGlzLl93PSh1LWEpL3IsdGhpcy5feD0uMjUqcix0aGlzLl95PShlK2kpL3IsdGhpcy5fej0obitzKS9yKTpvPnQ/KHI9MipNYXRoLnNxcnQoMStvLXItdCksdGhpcy5fdz0obi1zKS9yLHRoaXMuX3g9KGUraSkvcix0aGlzLl95PS4yNSpyLHRoaXMuX3o9KGErdSkvcik6KHI9MipNYXRoLnNxcnQoMSt0LXItbyksdGhpcy5fdz0oaS1lKS9yLHRoaXMuX3g9KG4rcykvcix0aGlzLl95PShhK3UpL3IsdGhpcy5fej0uMjUqcik7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tVW5pdFZlY3RvcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmRvdCh0KSsxOzFlLTY+cj8ocj0wLE1hdGguYWJzKGUueCk+TWF0aC5hYnMoZS56KT8odGhpcy5feD0tZS55LHRoaXMuX3k9ZS54LHRoaXMuX3o9MCk6KHRoaXMuX3g9MCx0aGlzLl95PS1lLnosdGhpcy5fej1lLnkpKToodGhpcy5feD1lLnkqdC56LWUueip0LnksdGhpcy5feT1lLnoqdC54LWUueCp0LnosdGhpcy5fej1lLngqdC55LWUueSp0LngpO3RoaXMuX3c9cjtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKX0sYW5nbGVUbzpmdW5jdGlvbihlKXtyZXR1cm4gMipNYXRoLmFjb3MoTWF0aC5hYnMoVm8uY2xhbXAodGhpcy5kb3QoZSksLTEsMSkpKX0scm90YXRlVG93YXJkczpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYW5nbGVUbyhlKTtpZigwPT09cilyZXR1cm4gdGhpczt0aGlzLnNsZXJwKGUsTWF0aC5taW4oMSx0L3IpKTtyZXR1cm4gdGhpc30saW52ZXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmp1Z2F0ZSgpfSxjb25qdWdhdGU6ZnVuY3Rpb24oKXt0aGlzLl94Kj0tMTt0aGlzLl95Kj0tMTt0aGlzLl96Kj0tMTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGRvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5feCplLl94K3RoaXMuX3kqZS5feSt0aGlzLl96KmUuX3ordGhpcy5fdyplLl93fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3d9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGgoKTswPT09ZT8odGhpcy5fej10aGlzLl95PXRoaXMuX3g9MCx0aGlzLl93PTEpOihlPTEvZSx0aGlzLl94Kj1lLHRoaXMuX3kqPWUsdGhpcy5feio9ZSx0aGlzLl93Kj1lKTt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMCE9PXQ/KGNvbnNvbGUud2FybihcIlRIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoZSx0KSk6dGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMsZSl9LHByZW11bHRpcGx5OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoZSx0aGlzKX0sbXVsdGlwbHlRdWF0ZXJuaW9uczpmdW5jdGlvbihlLHQpe3ZhciByPWUuX3gsbj1lLl95LGk9ZS5fejtlPWUuX3c7dmFyIG89dC5feCxhPXQuX3kscz10Ll96O3Q9dC5fdzt0aGlzLl94PXIqdCtlKm8rbipzLWkqYTt0aGlzLl95PW4qdCtlKmEraSpvLXIqczt0aGlzLl96PWkqdCtlKnMrciphLW4qbzt0aGlzLl93PWUqdC1yKm8tbiphLWkqczt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNsZXJwOmZ1bmN0aW9uKGUsdCl7aWYoMD09PXQpcmV0dXJuIHRoaXM7aWYoMT09PXQpcmV0dXJuIHRoaXMuY29weShlKTt2YXIgcj10aGlzLl94LG49dGhpcy5feSxpPXRoaXMuX3osbz10aGlzLl93LGE9byplLl93K3IqZS5feCtuKmUuX3kraSplLl96OzA+YT8odGhpcy5fdz0tZS5fdyx0aGlzLl94PS1lLl94LHRoaXMuX3k9LWUuX3ksdGhpcy5fej0tZS5feixhPS1hKTp0aGlzLmNvcHkoZSk7aWYoMTw9YSlyZXR1cm4gdGhpcy5fdz1vLHRoaXMuX3g9cix0aGlzLl95PW4sdGhpcy5fej1pLHRoaXM7ZT0xLWEqYTtpZihlPD1OdW1iZXIuRVBTSUxPTilyZXR1cm4gYT0xLXQsdGhpcy5fdz1hKm8rdCp0aGlzLl93LHRoaXMuX3g9YSpyK3QqdGhpcy5feCx0aGlzLl95PWEqbit0KnRoaXMuX3ksdGhpcy5fej1hKmkrdCp0aGlzLl96LHRoaXMubm9ybWFsaXplKCksdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpLHRoaXM7ZT1NYXRoLnNxcnQoZSk7dmFyIHM9TWF0aC5hdGFuMihlLGEpO2E9TWF0aC5zaW4oKDEtdCkqcykvZTt0PU1hdGguc2luKHQqcykvZTt0aGlzLl93PW8qYSt0aGlzLl93KnQ7dGhpcy5feD1yKmErdGhpcy5feCp0O3RoaXMuX3k9biphK3RoaXMuX3kqdDt0aGlzLl96PWkqYSt0aGlzLl96KnQ7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX3g9PT10aGlzLl94JiZlLl95PT09dGhpcy5feSYmZS5fej09PXRoaXMuX3omJmUuX3c9PT10aGlzLl93fSxmcm9tQXJyYXk6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0wKTt0aGlzLl94PWVbdF07dGhpcy5feT1lW3QrMV07dGhpcy5fej1lW3QrMl07dGhpcy5fdz1lW3QrM107dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9W10pO3ZvaWQgMD09PXQmJih0PTApO2VbdF09dGhpcy5feDtlW3QrMV09dGhpcy5feTtlW3QrMl09dGhpcy5fejtlW3QrM109dGhpcy5fdztyZXR1cm4gZX0sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3g9ZS5nZXRYKHQpO3RoaXMuX3k9ZS5nZXRZKHQpO3RoaXMuX3o9ZS5nZXRaKHQpO3RoaXMuX3c9ZS5nZXRXKHQpO3JldHVybiB0aGlzfSxfb25DaGFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaz1lO3JldHVybiB0aGlzfSxfb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319KTt2YXIgV289bmV3IFRlLFhvPW5ldyBkO09iamVjdC5hc3NpZ24oVGUucHJvdG90eXBlLHtpc1ZlY3RvcjM6ITAsc2V0OmZ1bmN0aW9uKGUsdCxyKXt0aGlzLng9ZTt0aGlzLnk9dDt0aGlzLno9cjtyZXR1cm4gdGhpc30sc2V0U2NhbGFyOmZ1bmN0aW9uKGUpe3RoaXMuej10aGlzLnk9dGhpcy54PWU7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oZSl7dGhpcy54PWU7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oZSl7dGhpcy55PWU7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oZSl7dGhpcy56PWU7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlIDA6dGhpcy54PXQ7YnJlYWs7Y2FzZSAxOnRoaXMueT10O2JyZWFrO2Nhc2UgMjp0aGlzLno9dDticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitlKX1yZXR1cm4gdGhpc30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtjYXNlIDI6cmV0dXJuIHRoaXMuejtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitlKX19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56KX0sY29weTpmdW5jdGlvbihlKXt0aGlzLng9ZS54O3RoaXMueT1lLnk7dGhpcy56PWUuejtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dClyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoZSx0KTt0aGlzLngrPWUueDt0aGlzLnkrPWUueTt0aGlzLnorPWUuejtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGUpe3RoaXMueCs9ZTt0aGlzLnkrPWU7dGhpcy56Kz1lO3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGUsdCl7dGhpcy54PWUueCt0Lng7dGhpcy55PWUueSt0Lnk7dGhpcy56PWUueit0Lno7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihlLHQpe3RoaXMueCs9ZS54KnQ7dGhpcy55Kz1lLnkqdDt0aGlzLnorPWUueip0O3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhlLHQpO3RoaXMueC09ZS54O3RoaXMueS09ZS55O3RoaXMuei09ZS56O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oZSl7dGhpcy54LT1lO3RoaXMueS09ZTt0aGlzLnotPWU7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oZSx0KXt0aGlzLng9ZS54LXQueDt0aGlzLnk9ZS55LXQueTt0aGlzLno9ZS56LXQuejtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5VmVjdG9ycyhlLHQpO3RoaXMueCo9ZS54O3RoaXMueSo9ZS55O3RoaXMueio9ZS56O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihlKXt0aGlzLngqPWU7dGhpcy55Kj1lO3RoaXMueio9ZTtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3JzOmZ1bmN0aW9uKGUsdCl7dGhpcy54PWUueCp0Lng7dGhpcy55PWUueSp0Lnk7dGhpcy56PWUueip0Lno7cmV0dXJuIHRoaXN9LGFwcGx5RXVsZXI6ZnVuY3Rpb24oZSl7ZSYmZS5pc0V1bGVyfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKTtyZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24oWG8uc2V0RnJvbUV1bGVyKGUpKX0sYXBwbHlBeGlzQW5nbGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24oWG8uc2V0RnJvbUF4aXNBbmdsZShlLHQpKX0sYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMueCxyPXRoaXMueSxuPXRoaXMuejtlPWUuZWxlbWVudHM7dGhpcy54PWVbMF0qdCtlWzNdKnIrZVs2XSpuO3RoaXMueT1lWzFdKnQrZVs0XSpyK2VbN10qbjt0aGlzLno9ZVsyXSp0K2VbNV0qcitlWzhdKm47cmV0dXJuIHRoaXN9LGFwcGx5Tm9ybWFsTWF0cml4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFwcGx5TWF0cml4MyhlKS5ub3JtYWxpemUoKX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMueCxyPXRoaXMueSxuPXRoaXMuejtlPWUuZWxlbWVudHM7dmFyIGk9MS8oZVszXSp0K2VbN10qcitlWzExXSpuK2VbMTVdKTt0aGlzLng9KGVbMF0qdCtlWzRdKnIrZVs4XSpuK2VbMTJdKSppO3RoaXMueT0oZVsxXSp0K2VbNV0qcitlWzldKm4rZVsxM10pKmk7dGhpcy56PShlWzJdKnQrZVs2XSpyK2VbMTBdKm4rZVsxNF0pKmk7cmV0dXJuIHRoaXN9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLngscj10aGlzLnksbj10aGlzLnosaT1lLngsbz1lLnksYT1lLno7ZT1lLnc7dmFyIHM9ZSp0K28qbi1hKnIsdT1lKnIrYSp0LWkqbixjPWUqbitpKnItbyp0O3Q9LWkqdC1vKnItYSpuO3RoaXMueD1zKmUrdCotaSt1Ki1hLWMqLW87dGhpcy55PXUqZSt0Ki1vK2MqLWktcyotYTt0aGlzLno9YyplK3QqLWErcyotby11Ki1pO3JldHVybiB0aGlzfSxwcm9qZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFwcGx5TWF0cml4NChlLm1hdHJpeFdvcmxkSW52ZXJzZSkuYXBwbHlNYXRyaXg0KGUucHJvamVjdGlvbk1hdHJpeCl9LHVucHJvamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoZS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSkuYXBwbHlNYXRyaXg0KGUubWF0cml4V29ybGQpfSx0cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy54LHI9dGhpcy55LG49dGhpcy56O2U9ZS5lbGVtZW50czt0aGlzLng9ZVswXSp0K2VbNF0qcitlWzhdKm47dGhpcy55PWVbMV0qdCtlWzVdKnIrZVs5XSpuO3RoaXMuej1lWzJdKnQrZVs2XSpyK2VbMTBdKm47cmV0dXJuIHRoaXMubm9ybWFsaXplKCl9LGRpdmlkZTpmdW5jdGlvbihlKXt0aGlzLngvPWUueDt0aGlzLnkvPWUueTt0aGlzLnovPWUuejtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvZSl9LG1pbjpmdW5jdGlvbihlKXt0aGlzLng9TWF0aC5taW4odGhpcy54LGUueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSxlLnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosZS56KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGUpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsZS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGUueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueixlLnopO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihlLHQpe3RoaXMueD1NYXRoLm1heChlLngsTWF0aC5taW4odC54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChlLnksTWF0aC5taW4odC55LHRoaXMueSkpO3RoaXMuej1NYXRoLm1heChlLnosTWF0aC5taW4odC56LHRoaXMueikpO3JldHVybiB0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbihlLHQpe3RoaXMueD1NYXRoLm1heChlLE1hdGgubWluKHQsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KGUsTWF0aC5taW4odCx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgoZSxNYXRoLm1pbih0LHRoaXMueikpO3JldHVybiB0aGlzfSxjbGFtcExlbmd0aDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHJ8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGUsTWF0aC5taW4odCxyKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7cmV0dXJuIHRoaXN9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uKCl7dGhpcy54PTA+dGhpcy54P01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9MD50aGlzLnk/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej0wPnRoaXMuej9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3RoaXMuej0tdGhpcy56O3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMueCplLngrdGhpcy55KmUueSt0aGlzLnoqZS56fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMuen0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueil9LG1hbmhhdHRhbkxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoZSl9LGxlcnA6ZnVuY3Rpb24oZSx0KXt0aGlzLngrPShlLngtdGhpcy54KSp0O3RoaXMueSs9KGUueS10aGlzLnkpKnQ7dGhpcy56Kz0oZS56LXRoaXMueikqdDtyZXR1cm4gdGhpc30sbGVycFZlY3RvcnM6ZnVuY3Rpb24oZSx0LHIpe3RoaXMueD1lLngrKHQueC1lLngpKnI7dGhpcy55PWUueSsodC55LWUueSkqcjt0aGlzLno9ZS56Kyh0LnotZS56KSpyO3JldHVybiB0aGlzfSxjcm9zczpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDAhPT10Pyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuY3Jvc3MoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5jcm9zc1ZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmNyb3NzVmVjdG9ycyhlLHQpKTp0aGlzLmNyb3NzVmVjdG9ycyh0aGlzLGUpfSxjcm9zc1ZlY3RvcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLngsbj1lLnk7ZT1lLno7dmFyIGk9dC54LG89dC55O3Q9dC56O3RoaXMueD1uKnQtZSpvO3RoaXMueT1lKmktcip0O3RoaXMuej1yKm8tbippO3JldHVybiB0aGlzfSxwcm9qZWN0T25WZWN0b3I6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGhTcSgpO2lmKDA9PT10KXJldHVybiB0aGlzLnNldCgwLDAsMCk7dD1lLmRvdCh0aGlzKS90O3JldHVybiB0aGlzLmNvcHkoZSkubXVsdGlwbHlTY2FsYXIodCl9LHByb2plY3RPblBsYW5lOmZ1bmN0aW9uKGUpe1dvLmNvcHkodGhpcykucHJvamVjdE9uVmVjdG9yKGUpO3JldHVybiB0aGlzLnN1YihXbyl9LHJlZmxlY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3ViKFdvLmNvcHkoZSkubXVsdGlwbHlTY2FsYXIoMip0aGlzLmRvdChlKSkpfSxhbmdsZVRvOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGguc3FydCh0aGlzLmxlbmd0aFNxKCkqZS5sZW5ndGhTcSgpKTtpZigwPT09dClyZXR1cm4gTWF0aC5QSS8yO2U9dGhpcy5kb3QoZSkvdDtyZXR1cm4gTWF0aC5hY29zKFZvLmNsYW1wKGUsLTEsMSkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChlKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMueC1lLngscj10aGlzLnktZS55O2U9dGhpcy56LWUuejtyZXR1cm4gdCp0K3IqcitlKmV9LG1hbmhhdHRhbkRpc3RhbmNlVG86ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguYWJzKHRoaXMueC1lLngpK01hdGguYWJzKHRoaXMueS1lLnkpK01hdGguYWJzKHRoaXMuei1lLnopfSxzZXRGcm9tU3BoZXJpY2FsOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldEZyb21TcGhlcmljYWxDb29yZHMoZS5yYWRpdXMsZS5waGksZS50aGV0YSl9LHNldEZyb21TcGhlcmljYWxDb29yZHM6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguc2luKHQpKmU7dGhpcy54PW4qTWF0aC5zaW4ocik7dGhpcy55PU1hdGguY29zKHQpKmU7dGhpcy56PW4qTWF0aC5jb3Mocik7cmV0dXJuIHRoaXN9LHNldEZyb21DeWxpbmRyaWNhbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXRGcm9tQ3lsaW5kcmljYWxDb29yZHMoZS5yYWRpdXMsZS50aGV0YSxlLnkpfSxzZXRGcm9tQ3lsaW5kcmljYWxDb29yZHM6ZnVuY3Rpb24oZSx0LHIpe3RoaXMueD1lKk1hdGguc2luKHQpO3RoaXMueT1yO3RoaXMuej1lKk1hdGguY29zKHQpO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4UG9zaXRpb246ZnVuY3Rpb24oZSl7ZT1lLmVsZW1lbnRzO3RoaXMueD1lWzEyXTt0aGlzLnk9ZVsxM107dGhpcy56PWVbMTRdO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4U2NhbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGUsMCkubGVuZ3RoKCkscj10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oZSwxKS5sZW5ndGgoKTtlPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihlLDIpLmxlbmd0aCgpO3RoaXMueD10O3RoaXMueT1yO3RoaXMuej1lO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4Q29sdW1uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZnJvbUFycmF5KGUuZWxlbWVudHMsNCp0KX0sc2V0RnJvbU1hdHJpeDNDb2x1bW46ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5mcm9tQXJyYXkoZS5lbGVtZW50cywzKnQpfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUueD09PXRoaXMueCYmZS55PT09dGhpcy55JiZlLno9PT10aGlzLnp9LGZyb21BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PTApO3RoaXMueD1lW3RdO3RoaXMueT1lW3QrMV07dGhpcy56PWVbdCsyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPVtdKTt2b2lkIDA9PT10JiYodD0wKTtlW3RdPXRoaXMueDtlW3QrMV09dGhpcy55O2VbdCsyXT10aGlzLno7cmV0dXJuIGV9LGZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMCE9PXImJmNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIik7dGhpcy54PWUuZ2V0WCh0KTt0aGlzLnk9ZS5nZXRZKHQpO3RoaXMuej1lLmdldFoodCk7cmV0dXJuIHRoaXN9LHJhbmRvbTpmdW5jdGlvbigpe3RoaXMueD1NYXRoLnJhbmRvbSgpO3RoaXMueT1NYXRoLnJhbmRvbSgpO3RoaXMuej1NYXRoLnJhbmRvbSgpO3JldHVybiB0aGlzfX0pO3ZhciBZbz1uZXcgVGUsS289bmV3IEVlLFpvPW5ldyBUZSgwLDAsMCksSm89bmV3IFRlKDEsMSwxKSxRbz1uZXcgVGUsZWE9bmV3IFRlLHRhPW5ldyBUZTtPYmplY3QuYXNzaWduKEVlLnByb3RvdHlwZSx7aXNNYXRyaXg0OiEwLHNldDpmdW5jdGlvbihlLHQscixuLGksbyxhLHMsdSxjLGwsaCxwLGYsZCx2KXt2YXIgbT10aGlzLmVsZW1lbnRzO21bMF09ZTttWzRdPXQ7bVs4XT1yO21bMTJdPW47bVsxXT1pO21bNV09bzttWzldPWE7bVsxM109czttWzJdPXU7bVs2XT1jO21bMTBdPWw7bVsxNF09aDttWzNdPXA7bVs3XT1mO21bMTFdPWQ7bVsxNV09djtyZXR1cm4gdGhpc30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IEVlKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyl9LGNvcHk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50cztlPWUuZWxlbWVudHM7dFswXT1lWzBdO3RbMV09ZVsxXTt0WzJdPWVbMl07dFszXT1lWzNdO3RbNF09ZVs0XTt0WzVdPWVbNV07dFs2XT1lWzZdO3RbN109ZVs3XTt0WzhdPWVbOF07dFs5XT1lWzldO3RbMTBdPWVbMTBdO3RbMTFdPWVbMTFdO3RbMTJdPWVbMTJdO3RbMTNdPWVbMTNdO3RbMTRdPWVbMTRdO3RbMTVdPWVbMTVdO3JldHVybiB0aGlzfSxjb3B5UG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50cztlPWUuZWxlbWVudHM7dFsxMl09ZVsxMl07dFsxM109ZVsxM107dFsxNF09ZVsxNF07cmV0dXJuIHRoaXN9LGV4dHJhY3RCYXNpczpmdW5jdGlvbihlLHQscil7ZS5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMCk7dC5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMSk7ci5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMik7cmV0dXJuIHRoaXN9LG1ha2VCYXNpczpmdW5jdGlvbihlLHQscil7dGhpcy5zZXQoZS54LHQueCxyLngsMCxlLnksdC55LHIueSwwLGUueix0Lnosci56LDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGV4dHJhY3RSb3RhdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnRzLHI9ZS5lbGVtZW50cyxuPTEvWW8uc2V0RnJvbU1hdHJpeENvbHVtbihlLDApLmxlbmd0aCgpLGk9MS9Zby5zZXRGcm9tTWF0cml4Q29sdW1uKGUsMSkubGVuZ3RoKCk7ZT0xL1lvLnNldEZyb21NYXRyaXhDb2x1bW4oZSwyKS5sZW5ndGgoKTt0WzBdPXJbMF0qbjt0WzFdPXJbMV0qbjt0WzJdPXJbMl0qbjt0WzNdPTA7dFs0XT1yWzRdKmk7dFs1XT1yWzVdKmk7dFs2XT1yWzZdKmk7dFs3XT0wO3RbOF09cls4XSplO3RbOV09cls5XSplO3RbMTBdPXJbMTBdKmU7dFsxMV09MDt0WzEyXT0wO3RbMTNdPTA7dFsxNF09MDt0WzE1XT0xO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oZSl7ZSYmZS5pc0V1bGVyfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dmFyIHQ9dGhpcy5lbGVtZW50cyxyPWUueCxuPWUueSxpPWUueixvPU1hdGguY29zKHIpO3I9TWF0aC5zaW4ocik7dmFyIGE9TWF0aC5jb3Mobik7bj1NYXRoLnNpbihuKTt2YXIgcz1NYXRoLmNvcyhpKTtpPU1hdGguc2luKGkpO2lmKFwiWFlaXCI9PT1lLm9yZGVyKXtlPW8qczt2YXIgdT1vKmksYz1yKnMsbD1yKmk7dFswXT1hKnM7dFs0XT0tYSppO3RbOF09bjt0WzFdPXUrYypuO3RbNV09ZS1sKm47dFs5XT0tciphO3RbMl09bC1lKm47dFs2XT1jK3Uqbjt0WzEwXT1vKmF9ZWxzZVwiWVhaXCI9PT1lLm9yZGVyPyhlPWEqcyx1PWEqaSxjPW4qcyxsPW4qaSx0WzBdPWUrbCpyLHRbNF09YypyLXUsdFs4XT1vKm4sdFsxXT1vKmksdFs1XT1vKnMsdFs5XT0tcix0WzJdPXUqci1jLHRbNl09bCtlKnIsdFsxMF09byphKTpcIlpYWVwiPT09ZS5vcmRlcj8oZT1hKnMsdT1hKmksYz1uKnMsbD1uKmksdFswXT1lLWwqcix0WzRdPS1vKmksdFs4XT1jK3Uqcix0WzFdPXUrYypyLHRbNV09bypzLHRbOV09bC1lKnIsdFsyXT0tbypuLHRbNl09cix0WzEwXT1vKmEpOlwiWllYXCI9PT1lLm9yZGVyPyhlPW8qcyx1PW8qaSxjPXIqcyxsPXIqaSx0WzBdPWEqcyx0WzRdPWMqbi11LHRbOF09ZSpuK2wsdFsxXT1hKmksdFs1XT1sKm4rZSx0WzldPXUqbi1jLHRbMl09LW4sdFs2XT1yKmEsdFsxMF09byphKTpcIllaWFwiPT09ZS5vcmRlcj8oZT1vKmEsdT1vKm4sYz1yKmEsbD1yKm4sdFswXT1hKnMsdFs0XT1sLWUqaSx0WzhdPWMqaSt1LHRbMV09aSx0WzVdPW8qcyx0WzldPS1yKnMsdFsyXT0tbipzLHRbNl09dSppK2MsdFsxMF09ZS1sKmkpOlwiWFpZXCI9PT1lLm9yZGVyJiYoZT1vKmEsdT1vKm4sYz1yKmEsbD1yKm4sdFswXT1hKnMsdFs0XT0taSx0WzhdPW4qcyx0WzFdPWUqaStsLHRbNV09bypzLHRbOV09dSppLWMsdFsyXT1jKmktdSx0WzZdPXIqcyx0WzEwXT1sKmkrZSk7dFszXT0wO3RbN109MDt0WzExXT0wO3RbMTJdPTA7dFsxM109MDt0WzE0XT0wO3RbMTVdPTE7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXBvc2UoWm8sZSxKbyl9LGxvb2tBdDpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5lbGVtZW50czt0YS5zdWJWZWN0b3JzKGUsdCk7MD09PXRhLmxlbmd0aFNxKCkmJih0YS56PTEpO3RhLm5vcm1hbGl6ZSgpO1FvLmNyb3NzVmVjdG9ycyhyLHRhKTswPT09UW8ubGVuZ3RoU3EoKSYmKDE9PT1NYXRoLmFicyhyLnopP3RhLngrPTFlLTQ6dGEueis9MWUtNCx0YS5ub3JtYWxpemUoKSxRby5jcm9zc1ZlY3RvcnMocix0YSkpO1FvLm5vcm1hbGl6ZSgpO2VhLmNyb3NzVmVjdG9ycyh0YSxRbyk7blswXT1Rby54O25bNF09ZWEueDtuWzhdPXRhLng7blsxXT1Rby55O25bNV09ZWEueTtuWzldPXRhLnk7blsyXT1Rby56O25bNl09ZWEuejtuWzEwXT10YS56O3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDAhPT10Pyhjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseU1hdHJpY2VzKGUsdCkpOnRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLGUpfSxwcmVtdWx0aXBseTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKGUsdGhpcyl9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmVsZW1lbnRzLG49dC5lbGVtZW50czt0PXRoaXMuZWxlbWVudHM7ZT1yWzBdO3ZhciBpPXJbNF0sbz1yWzhdLGE9clsxMl0scz1yWzFdLHU9cls1XSxjPXJbOV0sbD1yWzEzXSxoPXJbMl0scD1yWzZdLGY9clsxMF0sZD1yWzE0XSx2PXJbM10sbT1yWzddLGc9clsxMV07cj1yWzE1XTt2YXIgXz1uWzBdLHk9bls0XSxiPW5bOF0seD1uWzEyXSx3PW5bMV0sUz1uWzVdLE09bls5XSxDPW5bMTNdLFQ9blsyXSxFPW5bNl0sTz1uWzEwXSxQPW5bMTRdLEE9blszXSxqPW5bN10sUj1uWzExXTtuPW5bMTVdO3RbMF09ZSpfK2kqdytvKlQrYSpBO3RbNF09ZSp5K2kqUytvKkUrYSpqO3RbOF09ZSpiK2kqTStvKk8rYSpSO3RbMTJdPWUqeCtpKkMrbypQK2Eqbjt0WzFdPXMqXyt1KncrYypUK2wqQTt0WzVdPXMqeSt1KlMrYypFK2wqajt0WzldPXMqYit1Kk0rYypPK2wqUjt0WzEzXT1zKngrdSpDK2MqUCtsKm47dFsyXT1oKl8rcCp3K2YqVCtkKkE7dFs2XT1oKnkrcCpTK2YqRStkKmo7dFsxMF09aCpiK3AqTStmKk8rZCpSO3RbMTRdPWgqeCtwKkMrZipQK2Qqbjt0WzNdPXYqXyttKncrZypUK3IqQTt0WzddPXYqeSttKlMrZypFK3Iqajt0WzExXT12KmIrbSpNK2cqTytyKlI7dFsxNV09dip4K20qQytnKlArcipuO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnRzO3RbMF0qPWU7dFs0XSo9ZTt0WzhdKj1lO3RbMTJdKj1lO3RbMV0qPWU7dFs1XSo9ZTt0WzldKj1lO3RbMTNdKj1lO3RbMl0qPWU7dFs2XSo9ZTt0WzEwXSo9ZTt0WzE0XSo9ZTt0WzNdKj1lO3RbN10qPWU7dFsxMV0qPWU7dFsxNV0qPWU7cmV0dXJuIHRoaXN9LGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50cyx0PWVbMF0scj1lWzRdLG49ZVs4XSxpPWVbMTJdLG89ZVsxXSxhPWVbNV0scz1lWzldLHU9ZVsxM10sYz1lWzJdLGw9ZVs2XSxoPWVbMTBdLHA9ZVsxNF07cmV0dXJuIGVbM10qKCtpKnMqbC1uKnUqbC1pKmEqaCtyKnUqaCtuKmEqcC1yKnMqcCkrZVs3XSooK3QqcypwLXQqdSpoK2kqbypoLW4qbypwK24qdSpjLWkqcypjKStlWzExXSooK3QqdSpsLXQqYSpwLWkqbypsK3IqbypwK2kqYSpjLXIqdSpjKStlWzE1XSooLW4qYSpjLXQqcypsK3QqYSpoK24qbypsLXIqbypoK3IqcypjKX0sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50czt2YXIgdD1lWzFdO2VbMV09ZVs0XTtlWzRdPXQ7dD1lWzJdO2VbMl09ZVs4XTtlWzhdPXQ7dD1lWzZdO2VbNl09ZVs5XTtlWzldPXQ7dD1lWzNdO2VbM109ZVsxMl07ZVsxMl09dDt0PWVbN107ZVs3XT1lWzEzXTtlWzEzXT10O3Q9ZVsxMV07ZVsxMV09ZVsxNF07ZVsxNF09dDtyZXR1cm4gdGhpc30sc2V0UG9zaXRpb246ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuZWxlbWVudHM7ZS5pc1ZlY3RvcjM/KG5bMTJdPWUueCxuWzEzXT1lLnksblsxNF09ZS56KTooblsxMl09ZSxuWzEzXT10LG5bMTRdPXIpO3JldHVybiB0aGlzfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKGUsdCl7dm9pZCAwIT09dCYmY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmdldEludmVyc2UoKSBjYW4gbm8gbG9uZ2VyIGJlIGNvbmZpZ3VyZWQgdG8gdGhyb3cgb24gZGVnZW5lcmF0ZS5cIik7dD10aGlzLmVsZW1lbnRzO3ZhciByPWUuZWxlbWVudHM7ZT1yWzBdO3ZhciBuPXJbMV0saT1yWzJdLG89clszXSxhPXJbNF0scz1yWzVdLHU9cls2XSxjPXJbN10sbD1yWzhdLGg9cls5XSxwPXJbMTBdLGY9clsxMV0sZD1yWzEyXSx2PXJbMTNdLG09clsxNF07cj1yWzE1XTt2YXIgZz1oKm0qYy12KnAqYyt2KnUqZi1zKm0qZi1oKnUqcitzKnAqcixfPWQqcCpjLWwqbSpjLWQqdSpmK2EqbSpmK2wqdSpyLWEqcCpyLHk9bCp2KmMtZCpoKmMrZCpzKmYtYSp2KmYtbCpzKnIrYSpoKnIsYj1kKmgqdS1sKnYqdS1kKnMqcCthKnYqcCtsKnMqbS1hKmgqbSx4PWUqZytuKl8raSp5K28qYjtpZigwPT09eClyZXR1cm4gdGhpcy5zZXQoMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCk7eD0xL3g7dFswXT1nKng7dFsxXT0odipwKm8taCptKm8tdippKmYrbiptKmYraCppKnItbipwKnIpKng7dFsyXT0ocyptKm8tdip1Km8rdippKmMtbiptKmMtcyppKnIrbip1KnIpKng7dFszXT0oaCp1Km8tcypwKm8taCppKmMrbipwKmMrcyppKmYtbip1KmYpKng7dFs0XT1fKng7dFs1XT0obCptKm8tZCpwKm8rZCppKmYtZSptKmYtbCppKnIrZSpwKnIpKng7dFs2XT0oZCp1Km8tYSptKm8tZCppKmMrZSptKmMrYSppKnItZSp1KnIpKng7dFs3XT0oYSpwKm8tbCp1Km8rbCppKmMtZSpwKmMtYSppKmYrZSp1KmYpKng7dFs4XT15Kng7dFs5XT0oZCpoKm8tbCp2Km8tZCpuKmYrZSp2KmYrbCpuKnItZSpoKnIpKng7dFsxMF09KGEqdipvLWQqcypvK2QqbipjLWUqdipjLWEqbipyK2UqcypyKSp4O3RbMTFdPShsKnMqby1hKmgqby1sKm4qYytlKmgqYythKm4qZi1lKnMqZikqeDt0WzEyXT1iKng7dFsxM109KGwqdippLWQqaCppK2QqbipwLWUqdipwLWwqbiptK2UqaCptKSp4O3RbMTRdPShkKnMqaS1hKnYqaS1kKm4qdStlKnYqdSthKm4qbS1lKnMqbSkqeDt0WzE1XT0oYSpoKmktbCpzKmkrbCpuKnUtZSpoKnUtYSpuKnArZSpzKnApKng7cmV0dXJuIHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudHMscj1lLngsbj1lLnk7ZT1lLno7dFswXSo9cjt0WzRdKj1uO3RbOF0qPWU7dFsxXSo9cjt0WzVdKj1uO3RbOV0qPWU7dFsyXSo9cjt0WzZdKj1uO3RbMTBdKj1lO3RbM10qPXI7dFs3XSo9bjt0WzExXSo9ZTtyZXR1cm4gdGhpc30sZ2V0TWF4U2NhbGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRzO3JldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoZVswXSplWzBdK2VbMV0qZVsxXStlWzJdKmVbMl0sZVs0XSplWzRdK2VbNV0qZVs1XStlWzZdKmVbNl0sZVs4XSplWzhdK2VbOV0qZVs5XStlWzEwXSplWzEwXSkpfSxtYWtlVHJhbnNsYXRpb246ZnVuY3Rpb24oZSx0LHIpe3RoaXMuc2V0KDEsMCwwLGUsMCwxLDAsdCwwLDAsMSxyLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25YOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGguY29zKGUpO2U9TWF0aC5zaW4oZSk7dGhpcy5zZXQoMSwwLDAsMCwwLHQsLWUsMCwwLGUsdCwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25ZOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGguY29zKGUpO2U9TWF0aC5zaW4oZSk7dGhpcy5zZXQodCwwLGUsMCwwLDEsMCwwLC1lLDAsdCwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25aOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGguY29zKGUpO2U9TWF0aC5zaW4oZSk7dGhpcy5zZXQodCwtZSwwLDAsZSx0LDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25BeGlzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9TWF0aC5jb3ModCk7dD1NYXRoLnNpbih0KTt2YXIgbj0xLXIsaT1lLngsbz1lLnk7ZT1lLno7dmFyIGE9bippLHM9bipvO3RoaXMuc2V0KGEqaStyLGEqby10KmUsYSplK3QqbywwLGEqbyt0KmUscypvK3IscyplLXQqaSwwLGEqZS10Km8scyplK3QqaSxuKmUqZStyLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VTY2FsZTpmdW5jdGlvbihlLHQscil7dGhpcy5zZXQoZSwwLDAsMCwwLHQsMCwwLDAsMCxyLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VTaGVhcjpmdW5jdGlvbihlLHQscil7dGhpcy5zZXQoMSx0LHIsMCxlLDEsciwwLGUsdCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNvbXBvc2U6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuZWxlbWVudHMsaT10Ll94LG89dC5feSxhPXQuX3oscz10Ll93LHU9aStpLGM9bytvLGw9YSthO3Q9aSp1O3ZhciBoPWkqYztpKj1sO3ZhciBwPW8qYztvKj1sO2EqPWw7dSo9cztjKj1zO3MqPWw7bD1yLng7dmFyIGY9ci55O3I9ci56O25bMF09KDEtKHArYSkpKmw7blsxXT0oaCtzKSpsO25bMl09KGktYykqbDtuWzNdPTA7bls0XT0oaC1zKSpmO25bNV09KDEtKHQrYSkpKmY7bls2XT0obyt1KSpmO25bN109MDtuWzhdPShpK2MpKnI7bls5XT0oby11KSpyO25bMTBdPSgxLSh0K3ApKSpyO25bMTFdPTA7blsxMl09ZS54O25bMTNdPWUueTtuWzE0XT1lLno7blsxNV09MTtyZXR1cm4gdGhpc30sZGVjb21wb3NlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLmVsZW1lbnRzLGk9WW8uc2V0KG5bMF0sblsxXSxuWzJdKS5sZW5ndGgoKSxvPVlvLnNldChuWzRdLG5bNV0sbls2XSkubGVuZ3RoKCksYT1Zby5zZXQobls4XSxuWzldLG5bMTBdKS5sZW5ndGgoKTswPnRoaXMuZGV0ZXJtaW5hbnQoKSYmKGk9LWkpO2UueD1uWzEyXTtlLnk9blsxM107ZS56PW5bMTRdO0tvLmNvcHkodGhpcyk7ZT0xL2k7bj0xL287dmFyIHM9MS9hO0tvLmVsZW1lbnRzWzBdKj1lO0tvLmVsZW1lbnRzWzFdKj1lO0tvLmVsZW1lbnRzWzJdKj1lO0tvLmVsZW1lbnRzWzRdKj1uO0tvLmVsZW1lbnRzWzVdKj1uO0tvLmVsZW1lbnRzWzZdKj1uO0tvLmVsZW1lbnRzWzhdKj1zO0tvLmVsZW1lbnRzWzldKj1zO0tvLmVsZW1lbnRzWzEwXSo9czt0LnNldEZyb21Sb3RhdGlvbk1hdHJpeChLbyk7ci54PWk7ci55PW87ci56PWE7cmV0dXJuIHRoaXN9LG1ha2VQZXJzcGVjdGl2ZTpmdW5jdGlvbihlLHQscixuLGksbyl7dm9pZCAwPT09byYmY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm1ha2VQZXJzcGVjdGl2ZSgpIGhhcyBiZWVuIHJlZGVmaW5lZCBhbmQgaGFzIGEgbmV3IHNpZ25hdHVyZS4gUGxlYXNlIGNoZWNrIHRoZSBkb2NzLlwiKTt2YXIgYT10aGlzLmVsZW1lbnRzO2FbMF09MippLyh0LWUpO2FbNF09MDthWzhdPSh0K2UpLyh0LWUpO2FbMTJdPTA7YVsxXT0wO2FbNV09MippLyhyLW4pO2FbOV09KHIrbikvKHItbik7YVsxM109MDthWzJdPTA7YVs2XT0wO2FbMTBdPS0obytpKS8oby1pKTthWzE0XT0tMipvKmkvKG8taSk7YVszXT0wO2FbN109MDthWzExXT0tMTthWzE1XT0wO3JldHVybiB0aGlzfSxtYWtlT3J0aG9ncmFwaGljOmZ1bmN0aW9uKGUsdCxyLG4saSxvKXt2YXIgYT10aGlzLmVsZW1lbnRzLHM9MS8odC1lKSx1PTEvKHItbiksYz0xLyhvLWkpO2FbMF09MipzO2FbNF09MDthWzhdPTA7YVsxMl09LSgodCtlKSpzKTthWzFdPTA7YVs1XT0yKnU7YVs5XT0wO2FbMTNdPS0oKHIrbikqdSk7YVsyXT0wO2FbNl09MDthWzEwXT0tMipjO2FbMTRdPS0oKG8raSkqYyk7YVszXT0wO2FbN109MDthWzExXT0wO2FbMTVdPTE7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnRzO2U9ZS5lbGVtZW50cztmb3IodmFyIHI9MDsxNj5yO3IrKylpZih0W3JdIT09ZVtyXSlyZXR1cm4hMTtyZXR1cm4hMH0sZnJvbUFycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCk7Zm9yKHZhciByPTA7MTY+cjtyKyspdGhpcy5lbGVtZW50c1tyXT1lW3IrdF07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1lJiYoZT1bXSk7dm9pZCAwPT09dCYmKHQ9MCk7dmFyIHI9dGhpcy5lbGVtZW50cztlW3RdPXJbMF07ZVt0KzFdPXJbMV07ZVt0KzJdPXJbMl07ZVt0KzNdPXJbM107ZVt0KzRdPXJbNF07ZVt0KzVdPXJbNV07ZVt0KzZdPXJbNl07ZVt0KzddPXJbN107ZVt0KzhdPXJbOF07ZVt0KzldPXJbOV07ZVt0KzEwXT1yWzEwXTtlW3QrMTFdPXJbMTFdO2VbdCsxMl09clsxMl07ZVt0KzEzXT1yWzEzXTtlW3QrMTRdPXJbMTRdO2VbdCsxNV09clsxNV07cmV0dXJuIGV9fSk7dmFyIHJhPW5ldyBFZSxuYT1uZXcgZDtpLlJvdGF0aW9uT3JkZXJzPVwiWFlaIFlaWCBaWFkgWFpZIFlYWiBaWVhcIi5zcGxpdChcIiBcIik7aS5EZWZhdWx0T3JkZXI9XCJYWVpcIjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLnByb3RvdHlwZSx7eDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3h9LHNldDpmdW5jdGlvbihlKXt0aGlzLl94PWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfX0seTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3l9LHNldDpmdW5jdGlvbihlKXt0aGlzLl95PWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfX0sejp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3p9LHNldDpmdW5jdGlvbihlKXt0aGlzLl96PWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfX0sb3JkZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29yZGVyPWU7dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpfX19KTtPYmplY3QuYXNzaWduKGkucHJvdG90eXBlLHtpc0V1bGVyOiEwLHNldDpmdW5jdGlvbihlLHQscixuKXt0aGlzLl94PWU7dGhpcy5feT10O3RoaXMuX3o9cjt0aGlzLl9vcmRlcj1ufHx0aGlzLl9vcmRlcjt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyKX0sY29weTpmdW5jdGlvbihlKXt0aGlzLl94PWUuX3g7dGhpcy5feT1lLl95O3RoaXMuX3o9ZS5fejt0aGlzLl9vcmRlcj1lLl9vcmRlcjt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihlLHQscil7dmFyIG49Vm8uY2xhbXAsaT1lLmVsZW1lbnRzO2U9aVswXTt2YXIgbz1pWzRdLGE9aVs4XSxzPWlbMV0sdT1pWzVdLGM9aVs5XSxsPWlbMl0saD1pWzZdO2k9aVsxMF07dD10fHx0aGlzLl9vcmRlcjtzd2l0Y2godCl7Y2FzZVwiWFlaXCI6dGhpcy5feT1NYXRoLmFzaW4obihhLC0xLDEpKTsuOTk5OTk5OT5NYXRoLmFicyhhKT8odGhpcy5feD1NYXRoLmF0YW4yKC1jLGkpLHRoaXMuX3o9TWF0aC5hdGFuMigtbyxlKSk6KHRoaXMuX3g9TWF0aC5hdGFuMihoLHUpLHRoaXMuX3o9MCk7YnJlYWs7Y2FzZVwiWVhaXCI6dGhpcy5feD1NYXRoLmFzaW4oLW4oYywtMSwxKSk7Ljk5OTk5OTk+TWF0aC5hYnMoYyk/KHRoaXMuX3k9TWF0aC5hdGFuMihhLGkpLHRoaXMuX3o9TWF0aC5hdGFuMihzLHUpKToodGhpcy5feT1NYXRoLmF0YW4yKC1sLGUpLHRoaXMuX3o9MCk7YnJlYWs7Y2FzZVwiWlhZXCI6dGhpcy5feD1NYXRoLmFzaW4obihoLC0xLDEpKTsuOTk5OTk5OT5NYXRoLmFicyhoKT8odGhpcy5feT1NYXRoLmF0YW4yKC1sLGkpLHRoaXMuX3o9TWF0aC5hdGFuMigtbyx1KSk6KHRoaXMuX3k9MCx0aGlzLl96PU1hdGguYXRhbjIocyxlKSk7YnJlYWs7Y2FzZVwiWllYXCI6dGhpcy5feT1NYXRoLmFzaW4oLW4obCwtMSwxKSk7Ljk5OTk5OTk+TWF0aC5hYnMobCk/KHRoaXMuX3g9TWF0aC5hdGFuMihoLGkpLHRoaXMuX3o9TWF0aC5hdGFuMihzLGUpKToodGhpcy5feD0wLHRoaXMuX3o9TWF0aC5hdGFuMigtbyx1KSk7YnJlYWs7Y2FzZVwiWVpYXCI6dGhpcy5fej1NYXRoLmFzaW4obihzLC0xLDEpKTsuOTk5OTk5OT5NYXRoLmFicyhzKT8odGhpcy5feD1NYXRoLmF0YW4yKC1jLHUpLHRoaXMuX3k9TWF0aC5hdGFuMigtbCxlKSk6KHRoaXMuX3g9MCx0aGlzLl95PU1hdGguYXRhbjIoYSxpKSk7YnJlYWs7Y2FzZVwiWFpZXCI6dGhpcy5fej1NYXRoLmFzaW4oLW4obywtMSwxKSk7Ljk5OTk5OTk+TWF0aC5hYnMobyk/KHRoaXMuX3g9TWF0aC5hdGFuMihoLHUpLHRoaXMuX3k9TWF0aC5hdGFuMihhLGUpKToodGhpcy5feD1NYXRoLmF0YW4yKC1jLGkpLHRoaXMuX3k9MCk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGVuY291bnRlcmVkIGFuIHVua25vd24gb3JkZXI6IFwiK3QpfXRoaXMuX29yZGVyPXQ7ITEhPT1yJiZ0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGUsdCxyKXtyYS5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihlKTtyZXR1cm4gdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXgocmEsdCxyKX0sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zZXQoZS54LGUueSxlLnosdHx8dGhpcy5fb3JkZXIpfSxyZW9yZGVyOmZ1bmN0aW9uKGUpe25hLnNldEZyb21FdWxlcih0aGlzKTtyZXR1cm4gdGhpcy5zZXRGcm9tUXVhdGVybmlvbihuYSxlKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlLl94PT09dGhpcy5feCYmZS5feT09PXRoaXMuX3kmJmUuX3o9PT10aGlzLl96JiZlLl9vcmRlcj09PXRoaXMuX29yZGVyfSxmcm9tQXJyYXk6ZnVuY3Rpb24oZSl7dGhpcy5feD1lWzBdO3RoaXMuX3k9ZVsxXTt0aGlzLl96PWVbMl07dm9pZCAwIT09ZVszXSYmKHRoaXMuX29yZGVyPWVbM10pO3RoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPVtdKTt2b2lkIDA9PT10JiYodD0wKTtlW3RdPXRoaXMuX3g7ZVt0KzFdPXRoaXMuX3k7ZVt0KzJdPXRoaXMuX3o7ZVt0KzNdPXRoaXMuX29yZGVyO3JldHVybiBlfSx0b1ZlY3RvcjM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZS5zZXQodGhpcy5feCx0aGlzLl95LHRoaXMuX3opOm5ldyBUZSh0aGlzLl94LHRoaXMuX3ksdGhpcy5feil9LF9vbkNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLl9vbkNoYW5nZUNhbGxiYWNrPWU7cmV0dXJuIHRoaXN9LF9vbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uKCl7fX0pO09iamVjdC5hc3NpZ24oby5wcm90b3R5cGUse3NldDpmdW5jdGlvbihlKXt0aGlzLm1hc2s9MTw8ZXwwfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5tYXNrPXRoaXMubWFza3wxPDxlfDB9LGVuYWJsZUFsbDpmdW5jdGlvbigpe3RoaXMubWFzaz0tMX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3RoaXMubWFza149MTw8ZXwwfSxkaXNhYmxlOmZ1bmN0aW9uKGUpe3RoaXMubWFzayY9figxPDxlfDApfSxkaXNhYmxlQWxsOmZ1bmN0aW9uKCl7dGhpcy5tYXNrPTB9LHRlc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT0odGhpcy5tYXNrJmUubWFzayl9fSk7dmFyIGlhPTAsb2E9bmV3IFRlLGFhPW5ldyBkLHNhPW5ldyBFZSx1YT1uZXcgVGUsY2E9bmV3IFRlLGxhPW5ldyBUZSxoYT1uZXcgZCxwYT1uZXcgVGUoMSwwLDApLGZhPW5ldyBUZSgwLDEsMCksZGE9bmV3IFRlKDAsMCwxKSx2YT17dHlwZTpcImFkZGVkXCJ9LG1hPXt0eXBlOlwicmVtb3ZlZFwifTtmLkRlZmF1bHRVcD1uZXcgVGUoMCwxLDApO2YuRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU9ITA7Zi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Zixpc09iamVjdDNEOiEwLG9uQmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7fSxvbkFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7fSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oZSl7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMubWF0cml4LnByZW11bHRpcGx5KGUpO3RoaXMubWF0cml4LmRlY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKX0sYXBwbHlRdWF0ZXJuaW9uOmZ1bmN0aW9uKGUpe3RoaXMucXVhdGVybmlvbi5wcmVtdWx0aXBseShlKTtyZXR1cm4gdGhpc30sc2V0Um90YXRpb25Gcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uKGUsdCl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoZSx0KX0sc2V0Um90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oZSl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihlLCEwKX0sc2V0Um90YXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGUpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoZSl9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oZSl7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoZSl9LHJvdGF0ZU9uQXhpczpmdW5jdGlvbihlLHQpe2FhLnNldEZyb21BeGlzQW5nbGUoZSx0KTt0aGlzLnF1YXRlcm5pb24ubXVsdGlwbHkoYWEpO3JldHVybiB0aGlzfSxyb3RhdGVPbldvcmxkQXhpczpmdW5jdGlvbihlLHQpe2FhLnNldEZyb21BeGlzQW5nbGUoZSx0KTt0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoYWEpO3JldHVybiB0aGlzfSxyb3RhdGVYOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhwYSxlKX0scm90YXRlWTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoZmEsZSl9LHJvdGF0ZVo6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGRhLGUpfSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oZSx0KXtvYS5jb3B5KGUpLmFwcGx5UXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO3RoaXMucG9zaXRpb24uYWRkKG9hLm11bHRpcGx5U2NhbGFyKHQpKTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlWDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMocGEsZSl9LHRyYW5zbGF0ZVk6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGZhLGUpfSx0cmFuc2xhdGVaOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhkYSxlKX0sbG9jYWxUb1dvcmxkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKX0sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGx5TWF0cml4NChzYS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpKX0sbG9va0F0OmZ1bmN0aW9uKGUsdCxyKXtlLmlzVmVjdG9yMz91YS5jb3B5KGUpOnVhLnNldChlLHQscik7ZT10aGlzLnBhcmVudDt0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KCEwLCExKTtjYS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7dGhpcy5pc0NhbWVyYXx8dGhpcy5pc0xpZ2h0P3NhLmxvb2tBdChjYSx1YSx0aGlzLnVwKTpzYS5sb29rQXQodWEsY2EsdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChzYSk7ZSYmKHNhLmV4dHJhY3RSb3RhdGlvbihlLm1hdHJpeFdvcmxkKSxhYS5zZXRGcm9tUm90YXRpb25NYXRyaXgoc2EpLHRoaXMucXVhdGVybmlvbi5wcmVtdWx0aXBseShhYS5pbnZlcnNlKCkpKX0sYWRkOmZ1bmN0aW9uKGUpe2lmKDE8YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl0aGlzLmFkZChhcmd1bWVudHNbdF0pO3JldHVybiB0aGlzfWlmKGU9PT10aGlzKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0M0QuYWRkOiBvYmplY3QgY2FuJ3QgYmUgYWRkZWQgYXMgYSBjaGlsZCBvZiBpdHNlbGYuXCIsZSksdGhpcztlJiZlLmlzT2JqZWN0M0Q/KG51bGwhPT1lLnBhcmVudCYmZS5wYXJlbnQucmVtb3ZlKGUpLGUucGFyZW50PXRoaXMsdGhpcy5jaGlsZHJlbi5wdXNoKGUpLGUuZGlzcGF0Y2hFdmVudCh2YSkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuT2JqZWN0M0QuXCIsZSk7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbihlKXtpZigxPGFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspdGhpcy5yZW1vdmUoYXJndW1lbnRzW3RdKTtyZXR1cm4gdGhpc310PXRoaXMuY2hpbGRyZW4uaW5kZXhPZihlKTstMSE9PXQmJihlLnBhcmVudD1udWxsLHRoaXMuY2hpbGRyZW4uc3BsaWNlKHQsMSksZS5kaXNwYXRjaEV2ZW50KG1hKSk7cmV0dXJuIHRoaXN9LGF0dGFjaDpmdW5jdGlvbihlKXt0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KCEwLCExKTtzYS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpO251bGwhPT1lLnBhcmVudCYmKGUucGFyZW50LnVwZGF0ZVdvcmxkTWF0cml4KCEwLCExKSxzYS5tdWx0aXBseShlLnBhcmVudC5tYXRyaXhXb3JsZCkpO2UuYXBwbHlNYXRyaXg0KHNhKTtlLnVwZGF0ZVdvcmxkTWF0cml4KCExLCExKTt0aGlzLmFkZChlKTtyZXR1cm4gdGhpc30sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KFwiaWRcIixlKX0sZ2V0T2JqZWN0QnlOYW1lOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJuYW1lXCIsZSl9LGdldE9iamVjdEJ5UHJvcGVydHk6ZnVuY3Rpb24oZSx0KXtpZih0aGlzW2VdPT09dClyZXR1cm4gdGhpcztmb3IodmFyIHI9MCxuPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO3I8bjtyKyspe3ZhciBpPXRoaXMuY2hpbGRyZW5bcl0uZ2V0T2JqZWN0QnlQcm9wZXJ0eShlLHQpO2lmKHZvaWQgMCE9PWkpcmV0dXJuIGl9fSxnZXRXb3JsZFBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkUG9zaXRpb24oKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IFRlKTt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtyZXR1cm4gZS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCl9LGdldFdvcmxkUXVhdGVybmlvbjpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRXb3JsZFF1YXRlcm5pb24oKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IGQpO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGNhLGUsbGEpO3JldHVybiBlfSxnZXRXb3JsZFNjYWxlOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkU2NhbGUoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IFRlKTt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShjYSxoYSxlKTtyZXR1cm4gZX0sZ2V0V29ybGREaXJlY3Rpb246ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0V29ybGREaXJlY3Rpb24oKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IFRlKTt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt2YXIgdD10aGlzLm1hdHJpeFdvcmxkLmVsZW1lbnRzO3JldHVybiBlLnNldCh0WzhdLHRbOV0sdFsxMF0pLm5vcm1hbGl6ZSgpfSxyYXljYXN0OmZ1bmN0aW9uKCl7fSx0cmF2ZXJzZTpmdW5jdGlvbihlKXtlKHRoaXMpO2Zvcih2YXIgdD10aGlzLmNoaWxkcmVuLHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspdFtyXS50cmF2ZXJzZShlKX0sdHJhdmVyc2VWaXNpYmxlOmZ1bmN0aW9uKGUpe2lmKCExIT09dGhpcy52aXNpYmxlKXtlKHRoaXMpO2Zvcih2YXIgdD10aGlzLmNoaWxkcmVuLHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspdFtyXS50cmF2ZXJzZVZpc2libGUoZSl9fSx0cmF2ZXJzZUFuY2VzdG9yczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnBhcmVudDtudWxsIT09dCYmKGUodCksdC50cmF2ZXJzZUFuY2VzdG9ycyhlKSl9LHVwZGF0ZU1hdHJpeDpmdW5jdGlvbigpe3RoaXMubWF0cml4LmNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSk7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbihlKXt0aGlzLm1hdHJpeEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlTWF0cml4KCk7aWYodGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHxlKW51bGw9PT10aGlzLnBhcmVudD90aGlzLm1hdHJpeFdvcmxkLmNvcHkodGhpcy5tYXRyaXgpOnRoaXMubWF0cml4V29ybGQubXVsdGlwbHlNYXRyaWNlcyh0aGlzLnBhcmVudC5tYXRyaXhXb3JsZCx0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLGU9ITA7Zm9yKHZhciB0PXRoaXMuY2hpbGRyZW4scj0wLG49dC5sZW5ndGg7cjxuO3IrKyl0W3JdLnVwZGF0ZU1hdHJpeFdvcmxkKGUpfSx1cGRhdGVXb3JsZE1hdHJpeDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMucGFyZW50OyEwPT09ZSYmbnVsbCE9PXImJnIudXBkYXRlV29ybGRNYXRyaXgoITAsITEpO3RoaXMubWF0cml4QXV0b1VwZGF0ZSYmdGhpcy51cGRhdGVNYXRyaXgoKTtudWxsPT09dGhpcy5wYXJlbnQ/dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KTp0aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpO2lmKCEwPT09dClmb3IoZT10aGlzLmNoaWxkcmVuLHQ9MCxyPWUubGVuZ3RoO3Q8cjt0KyspZVt0XS51cGRhdGVXb3JsZE1hdHJpeCghMSwhMCl9LHRvSlNPTjpmdW5jdGlvbihyKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09ZVt0LnV1aWRdJiYoZVt0LnV1aWRdPXQudG9KU09OKHIpKTtyZXR1cm4gdC51dWlkfWZ1bmN0aW9uIHQoZSl7dmFyIHQ9W10scjtmb3IociBpbiBlKXt2YXIgbj1lW3JdO2RlbGV0ZSBuLm1ldGFkYXRhO3QucHVzaChuKX1yZXR1cm4gdH12YXIgbj12b2lkIDA9PT1yfHxcInN0cmluZ1wiPT09dHlwZW9mIHIsaT17fTtuJiYocj17Z2VvbWV0cmllczp7fSxtYXRlcmlhbHM6e30sdGV4dHVyZXM6e30saW1hZ2VzOnt9LHNoYXBlczp7fX0saS5tZXRhZGF0YT17dmVyc2lvbjo0LjUsdHlwZTpcIk9iamVjdFwiLGdlbmVyYXRvcjpcIk9iamVjdDNELnRvSlNPTlwifSk7dmFyIG89e307by51dWlkPXRoaXMudXVpZDtvLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihvLm5hbWU9dGhpcy5uYW1lKTshMD09PXRoaXMuY2FzdFNoYWRvdyYmKG8uY2FzdFNoYWRvdz0hMCk7ITA9PT10aGlzLnJlY2VpdmVTaGFkb3cmJihvLnJlY2VpdmVTaGFkb3c9ITApOyExPT09dGhpcy52aXNpYmxlJiYoby52aXNpYmxlPSExKTshMT09PXRoaXMuZnJ1c3R1bUN1bGxlZCYmKG8uZnJ1c3R1bUN1bGxlZD0hMSk7MCE9PXRoaXMucmVuZGVyT3JkZXImJihvLnJlbmRlck9yZGVyPXRoaXMucmVuZGVyT3JkZXIpO1wie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiYoby51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTtvLmxheWVycz10aGlzLmxheWVycy5tYXNrO28ubWF0cml4PXRoaXMubWF0cml4LnRvQXJyYXkoKTshMT09PXRoaXMubWF0cml4QXV0b1VwZGF0ZSYmKG8ubWF0cml4QXV0b1VwZGF0ZT0hMSk7dGhpcy5pc0luc3RhbmNlZE1lc2gmJihvLnR5cGU9XCJJbnN0YW5jZWRNZXNoXCIsby5jb3VudD10aGlzLmNvdW50LG8uaW5zdGFuY2VNYXRyaXg9dGhpcy5pbnN0YW5jZU1hdHJpeC50b0pTT04oKSk7aWYodGhpcy5pc01lc2h8fHRoaXMuaXNMaW5lfHx0aGlzLmlzUG9pbnRzKXtvLmdlb21ldHJ5PWUoci5nZW9tZXRyaWVzLHRoaXMuZ2VvbWV0cnkpO3ZhciBhPXRoaXMuZ2VvbWV0cnkucGFyYW1ldGVycztpZih2b2lkIDAhPT1hJiZ2b2lkIDAhPT1hLnNoYXBlcylpZihhPWEuc2hhcGVzLEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBzPTAsdT1hLmxlbmd0aDtzPHU7cysrKWUoci5zaGFwZXMsYVtzXSk7ZWxzZSBlKHIuc2hhcGVzLGEpfWlmKHZvaWQgMCE9PXRoaXMubWF0ZXJpYWwpaWYoQXJyYXkuaXNBcnJheSh0aGlzLm1hdGVyaWFsKSl7YT1bXTtzPTA7Zm9yKHU9dGhpcy5tYXRlcmlhbC5sZW5ndGg7czx1O3MrKylhLnB1c2goZShyLm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsW3NdKSk7by5tYXRlcmlhbD1hfWVsc2Ugby5tYXRlcmlhbD1lKHIubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWwpO2lmKDA8dGhpcy5jaGlsZHJlbi5sZW5ndGgpZm9yKG8uY2hpbGRyZW49W10scz0wO3M8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cysrKW8uY2hpbGRyZW4ucHVzaCh0aGlzLmNoaWxkcmVuW3NdLnRvSlNPTihyKS5vYmplY3QpO2lmKG4pe249dChyLmdlb21ldHJpZXMpO3M9dChyLm1hdGVyaWFscyk7dT10KHIudGV4dHVyZXMpO3ZhciBjPXQoci5pbWFnZXMpO2E9dChyLnNoYXBlcyk7MDxuLmxlbmd0aCYmKGkuZ2VvbWV0cmllcz1uKTswPHMubGVuZ3RoJiYoaS5tYXRlcmlhbHM9cyk7MDx1Lmxlbmd0aCYmKGkudGV4dHVyZXM9dSk7MDxjLmxlbmd0aCYmKGkuaW1hZ2VzPWMpOzA8YS5sZW5ndGgmJihpLnNoYXBlcz1hKX1pLm9iamVjdD1vO3JldHVybiBpfSxjbG9uZTpmdW5jdGlvbihlKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyxlKX0sY29weTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PSEwKTt0aGlzLm5hbWU9ZS5uYW1lO3RoaXMudXAuY29weShlLnVwKTt0aGlzLnBvc2l0aW9uLmNvcHkoZS5wb3NpdGlvbik7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoZS5xdWF0ZXJuaW9uKTt0aGlzLnNjYWxlLmNvcHkoZS5zY2FsZSk7dGhpcy5tYXRyaXguY29weShlLm1hdHJpeCk7dGhpcy5tYXRyaXhXb3JsZC5jb3B5KGUubWF0cml4V29ybGQpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1lLm1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPWUubWF0cml4V29ybGROZWVkc1VwZGF0ZTt0aGlzLmxheWVycy5tYXNrPWUubGF5ZXJzLm1hc2s7dGhpcy52aXNpYmxlPWUudmlzaWJsZTt0aGlzLmNhc3RTaGFkb3c9ZS5jYXN0U2hhZG93O3RoaXMucmVjZWl2ZVNoYWRvdz1lLnJlY2VpdmVTaGFkb3c7dGhpcy5mcnVzdHVtQ3VsbGVkPWUuZnJ1c3R1bUN1bGxlZDt0aGlzLnJlbmRlck9yZGVyPWUucmVuZGVyT3JkZXI7dGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUudXNlckRhdGEpKTtpZighMD09PXQpZm9yKHQ9MDt0PGUuY2hpbGRyZW4ubGVuZ3RoO3QrKyl0aGlzLmFkZChlLmNoaWxkcmVuW3RdLmNsb25lKCkpO3JldHVybiB0aGlzfX0pO09lLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpPZSxpc1NjZW5lOiEwLGNvcHk6ZnVuY3Rpb24oZSx0KXtmLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlLHQpO251bGwhPT1lLmJhY2tncm91bmQmJih0aGlzLmJhY2tncm91bmQ9ZS5iYWNrZ3JvdW5kLmNsb25lKCkpO251bGwhPT1lLmVudmlyb25tZW50JiYodGhpcy5lbnZpcm9ubWVudD1lLmVudmlyb25tZW50LmNsb25lKCkpO251bGwhPT1lLmZvZyYmKHRoaXMuZm9nPWUuZm9nLmNsb25lKCkpO251bGwhPT1lLm92ZXJyaWRlTWF0ZXJpYWwmJih0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9ZS5vdmVycmlkZU1hdGVyaWFsLmNsb25lKCkpO3RoaXMuYXV0b1VwZGF0ZT1lLmF1dG9VcGRhdGU7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWUubWF0cml4QXV0b1VwZGF0ZTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsZSk7bnVsbCE9PXRoaXMuYmFja2dyb3VuZCYmKHQub2JqZWN0LmJhY2tncm91bmQ9dGhpcy5iYWNrZ3JvdW5kLnRvSlNPTihlKSk7bnVsbCE9PXRoaXMuZW52aXJvbm1lbnQmJih0Lm9iamVjdC5lbnZpcm9ubWVudD10aGlzLmVudmlyb25tZW50LnRvSlNPTihlKSk7bnVsbCE9PXRoaXMuZm9nJiYodC5vYmplY3QuZm9nPXRoaXMuZm9nLnRvSlNPTigpKTtyZXR1cm4gdH0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO3ZhciBnYT1bbmV3IFRlLG5ldyBUZSxuZXcgVGUsbmV3IFRlLG5ldyBUZSxuZXcgVGUsbmV3IFRlLG5ldyBUZV0sX2E9bmV3IFRlLHlhPW5ldyBuLGJhPW5ldyBUZSx4YT1uZXcgVGUsd2E9bmV3IFRlLFNhPW5ldyBUZSxNYT1uZXcgVGUsQ2E9bmV3IFRlLFRhPW5ldyBUZSxFYT1uZXcgVGUsT2E9bmV3IFRlLFBhPW5ldyBUZTtPYmplY3QuYXNzaWduKG4ucHJvdG90eXBlLHtpc0JveDM6ITAsc2V0OmZ1bmN0aW9uKGUsdCl7dGhpcy5taW4uY29weShlKTt0aGlzLm1heC5jb3B5KHQpO3JldHVybiB0aGlzfSxzZXRGcm9tQXJyYXk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PUluZmluaXR5LHI9SW5maW5pdHksbj1JbmZpbml0eSxpPS1JbmZpbml0eSxvPS1JbmZpbml0eSxhPS1JbmZpbml0eSxzPTAsdT1lLmxlbmd0aDtzPHU7cys9Myl7dmFyIGM9ZVtzXSxsPWVbcysxXSxoPWVbcysyXTtjPHQmJih0PWMpO2w8ciYmKHI9bCk7aDxuJiYobj1oKTtjPmkmJihpPWMpO2w+byYmKG89bCk7aD5hJiYoYT1oKX10aGlzLm1pbi5zZXQodCxyLG4pO3RoaXMubWF4LnNldChpLG8sYSk7cmV0dXJuIHRoaXN9LHNldEZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PUluZmluaXR5LHI9SW5maW5pdHksbj1JbmZpbml0eSxpPS1JbmZpbml0eSxvPS1JbmZpbml0eSxhPS1JbmZpbml0eSxzPTAsdT1lLmNvdW50O3M8dTtzKyspe3ZhciBjPWUuZ2V0WChzKSxsPWUuZ2V0WShzKSxoPWUuZ2V0WihzKTtjPHQmJih0PWMpO2w8ciYmKHI9bCk7aDxuJiYobj1oKTtjPmkmJihpPWMpO2w+byYmKG89bCk7aD5hJiYoYT1oKX10aGlzLm1pbi5zZXQodCxyLG4pO3RoaXMubWF4LnNldChpLG8sYSk7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oZSl7dGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIHQ9MCxyPWUubGVuZ3RoO3Q8cjt0KyspdGhpcy5leHBhbmRCeVBvaW50KGVbdF0pO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbihlLHQpe3Q9X2EuY29weSh0KS5tdWx0aXBseVNjYWxhciguNSk7dGhpcy5taW4uY29weShlKS5zdWIodCk7dGhpcy5tYXguY29weShlKS5hZGQodCk7cmV0dXJuIHRoaXN9LHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oZSl7dGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpcy5leHBhbmRCeU9iamVjdChlKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5taW4uY29weShlLm1pbik7dGhpcy5tYXguY29weShlLm1heCk7cmV0dXJuIHRoaXN9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3RoaXMubWluLng9dGhpcy5taW4ueT10aGlzLm1pbi56PUluZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT10aGlzLm1heC56PS1JbmZpbml0eTtyZXR1cm4gdGhpc30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueXx8dGhpcy5tYXguejx0aGlzLm1pbi56fSxnZXRDZW50ZXI6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5nZXRDZW50ZXIoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IFRlKTtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/ZS5zZXQoMCwwLDApOmUuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoLjUpfSxnZXRTaXplOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZ2V0U2l6ZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgVGUpO3JldHVybiB0aGlzLmlzRW1wdHkoKT9lLnNldCgwLDAsMCk6ZS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihlKXt0aGlzLm1pbi5taW4oZSk7dGhpcy5tYXgubWF4KGUpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihlKXt0aGlzLm1pbi5zdWIoZSk7dGhpcy5tYXguYWRkKGUpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihlKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWUpO3RoaXMubWF4LmFkZFNjYWxhcihlKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlPYmplY3Q6ZnVuY3Rpb24oZSl7ZS51cGRhdGVXb3JsZE1hdHJpeCghMSwhMSk7dmFyIHQ9ZS5nZW9tZXRyeTt2b2lkIDAhPT10JiYobnVsbD09PXQuYm91bmRpbmdCb3gmJnQuY29tcHV0ZUJvdW5kaW5nQm94KCkseWEuY29weSh0LmJvdW5kaW5nQm94KSx5YS5hcHBseU1hdHJpeDQoZS5tYXRyaXhXb3JsZCksdGhpcy51bmlvbih5YSkpO2U9ZS5jaGlsZHJlbjt0PTA7Zm9yKHZhciByPWUubGVuZ3RoO3Q8cjt0KyspdGhpcy5leHBhbmRCeU9iamVjdChlW3RdKTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gZS54PHRoaXMubWluLnh8fGUueD50aGlzLm1heC54fHxlLnk8dGhpcy5taW4ueXx8ZS55PnRoaXMubWF4Lnl8fGUuejx0aGlzLm1pbi56fHxlLno+dGhpcy5tYXguej8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWluLng8PWUubWluLngmJmUubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWUubWluLnkmJmUubWF4Lnk8PXRoaXMubWF4LnkmJnRoaXMubWluLno8PWUubWluLnomJmUubWF4Lno8PXRoaXMubWF4Lnp9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZ2V0UGFyYW1ldGVyKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBUZSk7cmV0dXJuIHQuc2V0KChlLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKGUueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwoZS56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXgueDx0aGlzLm1pbi54fHxlLm1pbi54PnRoaXMubWF4Lnh8fGUubWF4Lnk8dGhpcy5taW4ueXx8ZS5taW4ueT50aGlzLm1heC55fHxlLm1heC56PHRoaXMubWluLnp8fGUubWluLno+dGhpcy5tYXguej8hMTohMH0saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihlKXt0aGlzLmNsYW1wUG9pbnQoZS5jZW50ZXIsX2EpO3JldHVybiBfYS5kaXN0YW5jZVRvU3F1YXJlZChlLmNlbnRlcik8PWUucmFkaXVzKmUucmFkaXVzfSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24oZSl7aWYoMDxlLm5vcm1hbC54KXt2YXIgdD1lLm5vcm1hbC54KnRoaXMubWluLng7dmFyIHI9ZS5ub3JtYWwueCp0aGlzLm1heC54fWVsc2UgdD1lLm5vcm1hbC54KnRoaXMubWF4Lngscj1lLm5vcm1hbC54KnRoaXMubWluLng7MDxlLm5vcm1hbC55Pyh0Kz1lLm5vcm1hbC55KnRoaXMubWluLnkscis9ZS5ub3JtYWwueSp0aGlzLm1heC55KToodCs9ZS5ub3JtYWwueSp0aGlzLm1heC55LHIrPWUubm9ybWFsLnkqdGhpcy5taW4ueSk7MDxlLm5vcm1hbC56Pyh0Kz1lLm5vcm1hbC56KnRoaXMubWluLnoscis9ZS5ub3JtYWwueip0aGlzLm1heC56KToodCs9ZS5ub3JtYWwueip0aGlzLm1heC56LHIrPWUubm9ybWFsLnoqdGhpcy5taW4ueik7cmV0dXJuIHQ8PS1lLmNvbnN0YW50JiZyPj0tZS5jb25zdGFudH0saW50ZXJzZWN0c1RyaWFuZ2xlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiExO3RoaXMuZ2V0Q2VudGVyKFRhKTtFYS5zdWJWZWN0b3JzKHRoaXMubWF4LFRhKTtiYS5zdWJWZWN0b3JzKGUuYSxUYSk7eGEuc3ViVmVjdG9ycyhlLmIsVGEpO3dhLnN1YlZlY3RvcnMoZS5jLFRhKTtTYS5zdWJWZWN0b3JzKHhhLGJhKTtNYS5zdWJWZWN0b3JzKHdhLHhhKTtDYS5zdWJWZWN0b3JzKGJhLHdhKTtlPVswLC1TYS56LFNhLnksMCwtTWEueixNYS55LDAsLUNhLnosQ2EueSxTYS56LDAsLVNhLngsTWEueiwwLC1NYS54LENhLnosMCwtQ2EueCwtU2EueSxTYS54LDAsLU1hLnksTWEueCwwLC1DYS55LENhLngsMF07aWYoIWEoZSxiYSx4YSx3YSxFYSkpcmV0dXJuITE7ZT1bMSwwLDAsMCwxLDAsMCwwLDFdO2lmKCFhKGUsYmEseGEsd2EsRWEpKXJldHVybiExO09hLmNyb3NzVmVjdG9ycyhTYSxNYSk7ZT1bT2EueCxPYS55LE9hLnpdO3JldHVybiBhKGUsYmEseGEsd2EsRWEpfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5jbGFtcFBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBUZSk7cmV0dXJuIHQuY29weShlKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gX2EuY29weShlKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGUpLmxlbmd0aCgpfSxnZXRCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuQm94MzogLmdldEJvdW5kaW5nU3BoZXJlKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKTt0aGlzLmdldENlbnRlcihlLmNlbnRlcik7ZS5yYWRpdXM9LjUqdGhpcy5nZXRTaXplKF9hKS5sZW5ndGgoKTtyZXR1cm4gZX0saW50ZXJzZWN0OmZ1bmN0aW9uKGUpe3RoaXMubWluLm1heChlLm1pbik7dGhpcy5tYXgubWluKGUubWF4KTt0aGlzLmlzRW1wdHkoKSYmdGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpc30sdW5pb246ZnVuY3Rpb24oZSl7dGhpcy5taW4ubWluKGUubWluKTt0aGlzLm1heC5tYXgoZS5tYXgpO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXM7Z2FbMF0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoZSk7Z2FbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoZSk7Z2FbMl0uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoZSk7Z2FbM10uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoZSk7Z2FbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoZSk7Z2FbNV0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoZSk7Z2FbNl0uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoZSk7Z2FbN10uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoZSk7dGhpcy5zZXRGcm9tUG9pbnRzKGdhKTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGUpe3RoaXMubWluLmFkZChlKTt0aGlzLm1heC5hZGQoZSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZS5taW4uZXF1YWxzKHRoaXMubWluKSYmZS5tYXguZXF1YWxzKHRoaXMubWF4KX19KTt2YXIgQWE9bmV3IG47T2JqZWN0LmFzc2lnbihsLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGUsdCl7dGhpcy5jZW50ZXIuY29weShlKTt0aGlzLnJhZGl1cz10O3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jZW50ZXI7dm9pZCAwIT09dD9yLmNvcHkodCk6QWEuc2V0RnJvbVBvaW50cyhlKS5nZXRDZW50ZXIocik7Zm9yKHZhciBuPXQ9MCxpPWUubGVuZ3RoO248aTtuKyspdD1NYXRoLm1heCh0LHIuZGlzdGFuY2VUb1NxdWFyZWQoZVtuXSkpO3RoaXMucmFkaXVzPU1hdGguc3FydCh0KTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5jZW50ZXIuY29weShlLmNlbnRlcik7dGhpcy5yYWRpdXM9ZS5yYWRpdXM7cmV0dXJuIHRoaXN9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD50aGlzLnJhZGl1c30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5jZW50ZXIuc2V0KDAsMCwwKTt0aGlzLnJhZGl1cz0tMTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PXRoaXMucmFkaXVzKnRoaXMucmFkaXVzfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzdGFuY2VUbyh0aGlzLmNlbnRlciktdGhpcy5yYWRpdXN9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yYWRpdXMrZS5yYWRpdXM7cmV0dXJuIGUuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9dCp0fSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGUpe3JldHVybiBlLmludGVyc2VjdHNTcGhlcmUodGhpcyl9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5hYnMoZS5kaXN0YW5jZVRvUG9pbnQodGhpcy5jZW50ZXIpKTw9dGhpcy5yYWRpdXN9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZChlKTt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuU3BoZXJlOiAuY2xhbXBQb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgVGUpO3QuY29weShlKTtyPnRoaXMucmFkaXVzKnRoaXMucmFkaXVzJiYodC5zdWIodGhpcy5jZW50ZXIpLm5vcm1hbGl6ZSgpLHQubXVsdGlwbHlTY2FsYXIodGhpcy5yYWRpdXMpLmFkZCh0aGlzLmNlbnRlcikpO3JldHVybiB0fSxnZXRCb3VuZGluZ0JveDpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuU3BoZXJlOiAuZ2V0Qm91bmRpbmdCb3goKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGU9bmV3IG4pO2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiBlLm1ha2VFbXB0eSgpLGU7ZS5zZXQodGhpcy5jZW50ZXIsdGhpcy5jZW50ZXIpO2UuZXhwYW5kQnlTY2FsYXIodGhpcy5yYWRpdXMpO3JldHVybiBlfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oZSl7dGhpcy5jZW50ZXIuYXBwbHlNYXRyaXg0KGUpO3RoaXMucmFkaXVzKj1lLmdldE1heFNjYWxlT25BeGlzKCk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihlKXt0aGlzLmNlbnRlci5hZGQoZSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZS5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmZS5yYWRpdXM9PT10aGlzLnJhZGl1c319KTt2YXIgamE9bmV3IFRlLFJhPW5ldyBUZSxrYT1uZXcgVGUsTGE9bmV3IFRlLE5hPW5ldyBUZSxJYT1uZXcgVGUsRGE9bmV3IFRlO09iamVjdC5hc3NpZ24ocy5wcm90b3R5cGUse3NldDpmdW5jdGlvbihlLHQpe3RoaXMub3JpZ2luLmNvcHkoZSk7dGhpcy5kaXJlY3Rpb24uY29weSh0KTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5vcmlnaW4uY29weShlLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShlLmRpcmVjdGlvbik7cmV0dXJuIHRoaXN9LGF0OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmF0KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBUZSk7cmV0dXJuIHQuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZSkuYWRkKHRoaXMub3JpZ2luKX0sbG9va0F0OmZ1bmN0aW9uKGUpe3RoaXMuZGlyZWN0aW9uLmNvcHkoZSkuc3ViKHRoaXMub3JpZ2luKS5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30scmVjYXN0OmZ1bmN0aW9uKGUpe3RoaXMub3JpZ2luLmNvcHkodGhpcy5hdChlLGphKSk7cmV0dXJuIHRoaXN9LGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuY2xvc2VzdFBvaW50VG9Qb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgVGUpO3Quc3ViVmVjdG9ycyhlLHRoaXMub3JpZ2luKTtlPXQuZG90KHRoaXMuZGlyZWN0aW9uKTtyZXR1cm4gMD5lP3QuY29weSh0aGlzLm9yaWdpbik6dC5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihlKS5hZGQodGhpcy5vcmlnaW4pfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlU3FUb1BvaW50KGUpKX0sZGlzdGFuY2VTcVRvUG9pbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9amEuc3ViVmVjdG9ycyhlLHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA+dClyZXR1cm4gdGhpcy5vcmlnaW4uZGlzdGFuY2VUb1NxdWFyZWQoZSk7amEuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMub3JpZ2luKTtyZXR1cm4gamEuZGlzdGFuY2VUb1NxdWFyZWQoZSl9LGRpc3RhbmNlU3FUb1NlZ21lbnQ6ZnVuY3Rpb24oZSx0LHIsbil7UmEuY29weShlKS5hZGQodCkubXVsdGlwbHlTY2FsYXIoLjUpO2thLmNvcHkodCkuc3ViKGUpLm5vcm1hbGl6ZSgpO0xhLmNvcHkodGhpcy5vcmlnaW4pLnN1YihSYSk7dmFyIGk9LjUqZS5kaXN0YW5jZVRvKHQpLG89LXRoaXMuZGlyZWN0aW9uLmRvdChrYSksYT1MYS5kb3QodGhpcy5kaXJlY3Rpb24pLHM9LUxhLmRvdChrYSksdT1MYS5sZW5ndGhTcSgpLGM9TWF0aC5hYnMoMS1vKm8pO2lmKDA8Yyl7ZT1vKnMtYTt0PW8qYS1zO3ZhciBsPWkqYzswPD1lP3Q+PS1sP3Q8PWw/KGk9MS9jLGUqPWksdCo9aSxvPWUqKGUrbyp0KzIqYSkrdCoobyplK3QrMipzKSt1KToodD1pLGU9TWF0aC5tYXgoMCwtKG8qdCthKSksbz0tZSplK3QqKHQrMipzKSt1KToodD0taSxlPU1hdGgubWF4KDAsLShvKnQrYSkpLG89LWUqZSt0Kih0KzIqcykrdSk6dDw9LWw/KGU9TWF0aC5tYXgoMCwtKC1vKmkrYSkpLHQ9MDxlPy1pOk1hdGgubWluKE1hdGgubWF4KC1pLC1zKSxpKSxvPS1lKmUrdCoodCsyKnMpK3UpOnQ8PWw/KGU9MCx0PU1hdGgubWluKE1hdGgubWF4KC1pLC1zKSxpKSxvPXQqKHQrMipzKSt1KTooZT1NYXRoLm1heCgwLC0obyppK2EpKSx0PTA8ZT9pOk1hdGgubWluKE1hdGgubWF4KC1pLC1zKSxpKSxvPS1lKmUrdCoodCsyKnMpK3UpfWVsc2UgdD0wPG8/LWk6aSxlPU1hdGgubWF4KDAsLShvKnQrYSkpLG89LWUqZSt0Kih0KzIqcykrdTtyJiZyLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGUpLmFkZCh0aGlzLm9yaWdpbik7biYmbi5jb3B5KGthKS5tdWx0aXBseVNjYWxhcih0KS5hZGQoUmEpO3JldHVybiBvfSxpbnRlcnNlY3RTcGhlcmU6ZnVuY3Rpb24oZSx0KXtqYS5zdWJWZWN0b3JzKGUuY2VudGVyLHRoaXMub3JpZ2luKTt2YXIgcj1qYS5kb3QodGhpcy5kaXJlY3Rpb24pLG49amEuZG90KGphKS1yKnI7ZT1lLnJhZGl1cyplLnJhZGl1cztpZihuPmUpcmV0dXJuIG51bGw7ZT1NYXRoLnNxcnQoZS1uKTtuPXItZTtyKz1lO3JldHVybiAwPm4mJjA+cj9udWxsOjA+bj90aGlzLmF0KHIsdCk6dGhpcy5hdChuLHQpfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRpc3RhbmNlU3FUb1BvaW50KGUuY2VudGVyKTw9ZS5yYWRpdXMqZS5yYWRpdXN9LGRpc3RhbmNlVG9QbGFuZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA9PT10KXJldHVybiAwPT09ZS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pPzA6bnVsbDtlPS0odGhpcy5vcmlnaW4uZG90KGUubm9ybWFsKStlLmNvbnN0YW50KS90O3JldHVybiAwPD1lP2U6bnVsbH0saW50ZXJzZWN0UGxhbmU6ZnVuY3Rpb24oZSx0KXtlPXRoaXMuZGlzdGFuY2VUb1BsYW5lKGUpO3JldHVybiBudWxsPT09ZT9udWxsOnRoaXMuYXQoZSx0KX0saW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKTtyZXR1cm4gMD09PXR8fDA+ZS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSp0PyEwOiExfSxpbnRlcnNlY3RCb3g6ZnVuY3Rpb24oZSx0KXt2YXIgcj0xL3RoaXMuZGlyZWN0aW9uLng7dmFyIG49MS90aGlzLmRpcmVjdGlvbi55O3ZhciBpPTEvdGhpcy5kaXJlY3Rpb24ueixvPXRoaXMub3JpZ2luO2lmKDA8PXIpe3ZhciBhPShlLm1pbi54LW8ueCkqcjtyKj1lLm1heC54LW8ueH1lbHNlIGE9KGUubWF4Lngtby54KSpyLHIqPWUubWluLngtby54O2lmKDA8PW4pe3ZhciBzPShlLm1pbi55LW8ueSkqbjtuKj1lLm1heC55LW8ueX1lbHNlIHM9KGUubWF4Lnktby55KSpuLG4qPWUubWluLnktby55O2lmKGE+bnx8cz5yKXJldHVybiBudWxsO2lmKHM+YXx8YSE9PWEpYT1zO2lmKG48cnx8ciE9PXIpcj1uOzA8PWk/KHM9KGUubWluLnotby56KSppLGU9KGUubWF4Lnotby56KSppKToocz0oZS5tYXguei1vLnopKmksZT0oZS5taW4uei1vLnopKmkpO2lmKGE+ZXx8cz5yKXJldHVybiBudWxsO2lmKHM+YXx8YSE9PWEpYT1zO2lmKGU8cnx8ciE9PXIpcj1lO3JldHVybiAwPnI/bnVsbDp0aGlzLmF0KDA8PWE/YTpyLHQpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcnNlY3RCb3goZSxqYSl9LGludGVyc2VjdFRyaWFuZ2xlOmZ1bmN0aW9uKGUsdCxyLG4saSl7TmEuc3ViVmVjdG9ycyh0LGUpO0lhLnN1YlZlY3RvcnMocixlKTtEYS5jcm9zc1ZlY3RvcnMoTmEsSWEpO3Q9dGhpcy5kaXJlY3Rpb24uZG90KERhKTtpZigwPHQpe2lmKG4pcmV0dXJuIG51bGw7bj0xfWVsc2UgaWYoMD50KW49LTEsdD0tdDtlbHNlIHJldHVybiBudWxsO0xhLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sZSk7ZT1uKnRoaXMuZGlyZWN0aW9uLmRvdChJYS5jcm9zc1ZlY3RvcnMoTGEsSWEpKTtpZigwPmUpcmV0dXJuIG51bGw7cj1uKnRoaXMuZGlyZWN0aW9uLmRvdChOYS5jcm9zcyhMYSkpO2lmKDA+cnx8ZStyPnQpcmV0dXJuIG51bGw7ZT0tbipMYS5kb3QoRGEpO3JldHVybiAwPmU/bnVsbDp0aGlzLmF0KGUvdCxpKX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGUpe3RoaXMub3JpZ2luLmFwcGx5TWF0cml4NChlKTt0aGlzLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24oZSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZS5vcmlnaW4uZXF1YWxzKHRoaXMub3JpZ2luKSYmZS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKX19KTt2YXIgQmE9bmV3IFRlLEZhPW5ldyBUZSx6YT1uZXcgbTtPYmplY3QuYXNzaWduKGcucHJvdG90eXBlLHtpc1BsYW5lOiEwLHNldDpmdW5jdGlvbihlLHQpe3RoaXMubm9ybWFsLmNvcHkoZSk7dGhpcy5jb25zdGFudD10O3JldHVybiB0aGlzfSxzZXRDb21wb25lbnRzOmZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMubm9ybWFsLnNldChlLHQscik7dGhpcy5jb25zdGFudD1uO3JldHVybiB0aGlzfSxzZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludDpmdW5jdGlvbihlLHQpe3RoaXMubm9ybWFsLmNvcHkoZSk7dGhpcy5jb25zdGFudD0tdC5kb3QodGhpcy5ub3JtYWwpO3JldHVybiB0aGlzfSxzZXRGcm9tQ29wbGFuYXJQb2ludHM6ZnVuY3Rpb24oZSx0LHIpe3Q9QmEuc3ViVmVjdG9ycyhyLHQpLmNyb3NzKEZhLnN1YlZlY3RvcnMoZSx0KSkubm9ybWFsaXplKCk7dGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCh0LGUpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihlKXt0aGlzLm5vcm1hbC5jb3B5KGUubm9ybWFsKTt0aGlzLmNvbnN0YW50PWUuY29uc3RhbnQ7cmV0dXJuIHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBlPTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7dGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIoZSk7dGhpcy5jb25zdGFudCo9ZTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KGUpK3RoaXMuY29uc3RhbnR9LGRpc3RhbmNlVG9TcGhlcmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGUuY2VudGVyKS1lLnJhZGl1c30scHJvamVjdFBvaW50OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAucHJvamVjdFBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBUZSk7cmV0dXJuIHQuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoLXRoaXMuZGlzdGFuY2VUb1BvaW50KGUpKS5hZGQoZSl9LGludGVyc2VjdExpbmU6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5pbnRlcnNlY3RMaW5lKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSx0PW5ldyBUZSk7dmFyIHI9ZS5kZWx0YShCYSksbj10aGlzLm5vcm1hbC5kb3Qocik7aWYoMD09PW4pe2lmKDA9PT10aGlzLmRpc3RhbmNlVG9Qb2ludChlLnN0YXJ0KSlyZXR1cm4gdC5jb3B5KGUuc3RhcnQpfWVsc2UgaWYobj0tKGUuc3RhcnQuZG90KHRoaXMubm9ybWFsKSt0aGlzLmNvbnN0YW50KS9uLCEoMD5ufHwxPG4pKXJldHVybiB0LmNvcHkocikubXVsdGlwbHlTY2FsYXIobikuYWRkKGUuc3RhcnQpfSxpbnRlcnNlY3RzTGluZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRpc3RhbmNlVG9Qb2ludChlLnN0YXJ0KTtlPXRoaXMuZGlzdGFuY2VUb1BvaW50KGUuZW5kKTtyZXR1cm4gMD50JiYwPGV8fDA+ZSYmMDx0fSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGUpe3JldHVybiBlLmludGVyc2VjdHNQbGFuZSh0aGlzKX0saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pbnRlcnNlY3RzUGxhbmUodGhpcyl9LGNvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAuY29wbGFuYXJQb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgVGUpO3JldHVybiBlLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGUsdCl7dD10fHx6YS5nZXROb3JtYWxNYXRyaXgoZSk7ZT10aGlzLmNvcGxhbmFyUG9pbnQoQmEpLmFwcGx5TWF0cml4NChlKTt0PXRoaXMubm9ybWFsLmFwcGx5TWF0cml4Myh0KS5ub3JtYWxpemUoKTt0aGlzLmNvbnN0YW50PS1lLmRvdCh0KTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGUpe3RoaXMuY29uc3RhbnQtPWUuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlLm5vcm1hbC5lcXVhbHModGhpcy5ub3JtYWwpJiZlLmNvbnN0YW50PT09dGhpcy5jb25zdGFudH19KTt2YXIgJGE9bmV3IFRlLEdhPW5ldyBUZSxWYT1uZXcgVGUsSGE9bmV3IFRlLFVhPW5ldyBUZSxxYT1uZXcgVGUsV2E9bmV3IFRlLFhhPW5ldyBUZSxZYT1uZXcgVGUsS2E9bmV3IFRlO09iamVjdC5hc3NpZ24oYix7Z2V0Tm9ybWFsOmZ1bmN0aW9uKGUsdCxyLG4pe3ZvaWQgMD09PW4mJihjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmdldE5vcm1hbCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksbj1uZXcgVGUpO24uc3ViVmVjdG9ycyhyLHQpOyRhLnN1YlZlY3RvcnMoZSx0KTtuLmNyb3NzKCRhKTtlPW4ubGVuZ3RoU3EoKTtyZXR1cm4gMDxlP24ubXVsdGlwbHlTY2FsYXIoMS9NYXRoLnNxcnQoZSkpOm4uc2V0KDAsMCwwKX0sZ2V0QmFyeWNvb3JkOmZ1bmN0aW9uKGUsdCxyLG4saSl7JGEuc3ViVmVjdG9ycyhuLHQpO0dhLnN1YlZlY3RvcnMocix0KTtWYS5zdWJWZWN0b3JzKGUsdCk7ZT0kYS5kb3QoJGEpO3Q9JGEuZG90KEdhKTtyPSRhLmRvdChWYSk7dmFyIG89R2EuZG90KEdhKTtuPUdhLmRvdChWYSk7dmFyIGE9ZSpvLXQqdDt2b2lkIDA9PT1pJiYoY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5nZXRCYXJ5Y29vcmQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLGk9bmV3IFRlKTtpZigwPT09YSlyZXR1cm4gaS5zZXQoLTIsLTEsLTEpO2E9MS9hO289KG8qci10Km4pKmE7ZT0oZSpuLXQqcikqYTtyZXR1cm4gaS5zZXQoMS1vLWUsZSxvKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbihlLHQscixuKXtiLmdldEJhcnljb29yZChlLHQscixuLEhhKTtyZXR1cm4gMDw9SGEueCYmMDw9SGEueSYmMT49SGEueCtIYS55fSxnZXRVVjpmdW5jdGlvbihlLHQscixuLGksbyxhLHMpe3RoaXMuZ2V0QmFyeWNvb3JkKGUsdCxyLG4sSGEpO3Muc2V0KDAsMCk7cy5hZGRTY2FsZWRWZWN0b3IoaSxIYS54KTtzLmFkZFNjYWxlZFZlY3RvcihvLEhhLnkpO3MuYWRkU2NhbGVkVmVjdG9yKGEsSGEueik7cmV0dXJuIHN9LGlzRnJvbnRGYWNpbmc6ZnVuY3Rpb24oZSx0LHIsbil7JGEuc3ViVmVjdG9ycyhyLHQpO0dhLnN1YlZlY3RvcnMoZSx0KTtyZXR1cm4gMD4kYS5jcm9zcyhHYSkuZG90KG4pPyEwOiExfX0pO09iamVjdC5hc3NpZ24oYi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihlLHQscil7dGhpcy5hLmNvcHkoZSk7dGhpcy5iLmNvcHkodCk7dGhpcy5jLmNvcHkocik7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHNBbmRJbmRpY2VzOmZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMuYS5jb3B5KGVbdF0pO3RoaXMuYi5jb3B5KGVbcl0pO3RoaXMuYy5jb3B5KGVbbl0pO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihlKXt0aGlzLmEuY29weShlLmEpO3RoaXMuYi5jb3B5KGUuYik7dGhpcy5jLmNvcHkoZS5jKTtyZXR1cm4gdGhpc30sZ2V0QXJlYTpmdW5jdGlvbigpeyRhLnN1YlZlY3RvcnModGhpcy5jLHRoaXMuYik7R2Euc3ViVmVjdG9ycyh0aGlzLmEsdGhpcy5iKTtyZXR1cm4uNSokYS5jcm9zcyhHYSkubGVuZ3RoKCl9LGdldE1pZHBvaW50OmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmdldE1pZHBvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBUZSk7cmV0dXJuIGUuYWRkVmVjdG9ycyh0aGlzLmEsdGhpcy5iKS5hZGQodGhpcy5jKS5tdWx0aXBseVNjYWxhcigxLzMpfSxnZXROb3JtYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZ2V0Tm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLGUpfSxnZXRQbGFuZTpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5nZXRQbGFuZSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgZyk7cmV0dXJuIGUuc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKX0sZ2V0QmFyeWNvb3JkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuZ2V0QmFyeWNvb3JkKGUsdGhpcy5hLHRoaXMuYix0aGlzLmMsdCl9LGdldFVWOmZ1bmN0aW9uKGUsdCxyLG4saSl7cmV0dXJuIGIuZ2V0VVYoZSx0aGlzLmEsdGhpcy5iLHRoaXMuYyx0LHIsbixpKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gYi5jb250YWluc1BvaW50KGUsdGhpcy5hLHRoaXMuYix0aGlzLmMpfSxpc0Zyb250RmFjaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBiLmlzRnJvbnRGYWNpbmcodGhpcy5hLHRoaXMuYix0aGlzLmMsZSl9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW50ZXJzZWN0c1RyaWFuZ2xlKHRoaXMpfSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuY2xvc2VzdFBvaW50VG9Qb2ludCgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgVGUpO3ZhciByPXRoaXMuYSxuPXRoaXMuYixpPXRoaXMuYztVYS5zdWJWZWN0b3JzKG4scik7cWEuc3ViVmVjdG9ycyhpLHIpO1hhLnN1YlZlY3RvcnMoZSxyKTt2YXIgbz1VYS5kb3QoWGEpLGE9cWEuZG90KFhhKTtpZigwPj1vJiYwPj1hKXJldHVybiB0LmNvcHkocik7WWEuc3ViVmVjdG9ycyhlLG4pO3ZhciBzPVVhLmRvdChZYSksdT1xYS5kb3QoWWEpO2lmKDA8PXMmJnU8PXMpcmV0dXJuIHQuY29weShuKTt2YXIgYz1vKnUtcyphO2lmKDA+PWMmJjA8PW8mJjA+PXMpcmV0dXJuIG49by8oby1zKSx0LmNvcHkocikuYWRkU2NhbGVkVmVjdG9yKFVhLG4pO0thLnN1YlZlY3RvcnMoZSxpKTtlPVVhLmRvdChLYSk7dmFyIGw9cWEuZG90KEthKTtpZigwPD1sJiZlPD1sKXJldHVybiB0LmNvcHkoaSk7bz1lKmEtbypsO2lmKDA+PW8mJjA8PWEmJjA+PWwpcmV0dXJuIGM9YS8oYS1sKSx0LmNvcHkocikuYWRkU2NhbGVkVmVjdG9yKHFhLGMpO2E9cypsLWUqdTtpZigwPj1hJiYwPD11LXMmJjA8PWUtbClyZXR1cm4gV2Euc3ViVmVjdG9ycyhpLG4pLGM9KHUtcykvKHUtcysoZS1sKSksdC5jb3B5KG4pLmFkZFNjYWxlZFZlY3RvcihXYSxjKTtpPTEvKGErbytjKTtuPW8qaTtjKj1pO3JldHVybiB0LmNvcHkocikuYWRkU2NhbGVkVmVjdG9yKFVhLG4pLmFkZFNjYWxlZFZlY3RvcihxYSxjKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlLmEuZXF1YWxzKHRoaXMuYSkmJmUuYi5lcXVhbHModGhpcy5iKSYmZS5jLmVxdWFscyh0aGlzLmMpfX0pO3ZhciBaYT17YWxpY2VibHVlOjE1NzkyMzgzLGFudGlxdWV3aGl0ZToxNjQ0NDM3NSxhcXVhOjY1NTM1LGFxdWFtYXJpbmU6ODM4ODU2NCxhenVyZToxNTc5NDE3NSxiZWlnZToxNjExOTI2MCxiaXNxdWU6MTY3NzAyNDQsYmxhY2s6MCxibGFuY2hlZGFsbW9uZDoxNjc3MjA0NSxibHVlOjI1NSxibHVldmlvbGV0OjkwNTUyMDIsYnJvd246MTA4MjQyMzQsYnVybHl3b29kOjE0NTk2MjMxLGNhZGV0Ymx1ZTo2MjY2NTI4LGNoYXJ0cmV1c2U6ODM4ODM1MixjaG9jb2xhdGU6MTM3ODk0NzAsY29yYWw6MTY3NDQyNzIsY29ybmZsb3dlcmJsdWU6NjU5MTk4MSxjb3Juc2lsazoxNjc3NTM4OCxjcmltc29uOjE0NDIzMTAwLGN5YW46NjU1MzUsZGFya2JsdWU6MTM5LGRhcmtjeWFuOjM1NzIzLGRhcmtnb2xkZW5yb2Q6MTIwOTI5MzksZGFya2dyYXk6MTExMTkwMTcsZGFya2dyZWVuOjI1NjAwLGRhcmtncmV5OjExMTE5MDE3LGRhcmtraGFraToxMjQzMzI1OSxkYXJrbWFnZW50YTo5MTA5NjQzLGRhcmtvbGl2ZWdyZWVuOjU1OTc5OTksZGFya29yYW5nZToxNjc0NzUyMCxkYXJrb3JjaGlkOjEwMDQwMDEyLGRhcmtyZWQ6OTEwOTUwNCxkYXJrc2FsbW9uOjE1MzA4NDEwLGRhcmtzZWFncmVlbjo5NDE5OTE5LGRhcmtzbGF0ZWJsdWU6NDczNDM0NyxkYXJrc2xhdGVncmF5OjMxMDA0OTUsZGFya3NsYXRlZ3JleTozMTAwNDk1LGRhcmt0dXJxdW9pc2U6NTI5NDUsZGFya3Zpb2xldDo5Njk5NTM5LGRlZXBwaW5rOjE2NzE2OTQ3LGRlZXBza3libHVlOjQ5MTUxLGRpbWdyYXk6NjkwODI2NSxkaW1ncmV5OjY5MDgyNjUsZG9kZ2VyYmx1ZToyMDAzMTk5LGZpcmVicmljazoxMTY3NDE0NixmbG9yYWx3aGl0ZToxNjc3NTkyMCxmb3Jlc3RncmVlbjoyMjYzODQyLGZ1Y2hzaWE6MTY3MTE5MzUsZ2FpbnNib3JvOjE0NDc0NDYwLGdob3N0d2hpdGU6MTYzMTY2NzEsZ29sZDoxNjc2NjcyMCxnb2xkZW5yb2Q6MTQzMjkxMjAsZ3JheTo4NDIxNTA0LGdyZWVuOjMyNzY4LGdyZWVueWVsbG93OjExNDAzMDU1LGdyZXk6ODQyMTUwNCxob25leWRldzoxNTc5NDE2MCxob3RwaW5rOjE2NzM4NzQwLGluZGlhbnJlZDoxMzQ1ODUyNCxpbmRpZ286NDkxNTMzMCxpdm9yeToxNjc3NzIwMCxraGFraToxNTc4NzY2MCxsYXZlbmRlcjoxNTEzMjQxMCxsYXZlbmRlcmJsdXNoOjE2NzczMzY1LGxhd25ncmVlbjo4MTkwOTc2LGxlbW9uY2hpZmZvbjoxNjc3NTg4NSxsaWdodGJsdWU6MTEzOTMyNTQsbGlnaHRjb3JhbDoxNTc2MTUzNixsaWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsbGltZTo2NTI4MCxsaW1lZ3JlZW46MzMyOTMzMCxsaW5lbjoxNjQ0NTY3MCxtYWdlbnRhOjE2NzExOTM1LG1hcm9vbjo4Mzg4NjA4LG1lZGl1bWFxdWFtYXJpbmU6NjczNzMyMixtZWRpdW1ibHVlOjIwNSxtZWRpdW1vcmNoaWQ6MTIyMTE2NjcsbWVkaXVtcHVycGxlOjk2NjI2ODMsbWVkaXVtc2VhZ3JlZW46Mzk3ODA5NyxtZWRpdW1zbGF0ZWJsdWU6ODA4Nzc5MCxtZWRpdW1zcHJpbmdncmVlbjo2NDE1NCxtZWRpdW10dXJxdW9pc2U6NDc3MjMwMCxtZWRpdW12aW9sZXRyZWQ6MTMwNDcxNzMsbWlkbmlnaHRibHVlOjE2NDQ5MTIsbWludGNyZWFtOjE2MTIxODUwLG1pc3R5cm9zZToxNjc3MDI3Myxtb2NjYXNpbjoxNjc3MDIyOSxuYXZham93aGl0ZToxNjc2ODY4NSxuYXZ5OjEyOCxvbGRsYWNlOjE2NjQzNTU4LG9saXZlOjg0MjEzNzYsb2xpdmVkcmFiOjcwNDg3Mzksb3JhbmdlOjE2NzUzOTIwLG9yYW5nZXJlZDoxNjcyOTM0NCxvcmNoaWQ6MTQzMTU3MzQscGFsZWdvbGRlbnJvZDoxNTY1NzEzMCxwYWxlZ3JlZW46MTAwMjU4ODAscGFsZXR1cnF1b2lzZToxMTUyOTk2NixwYWxldmlvbGV0cmVkOjE0MzgxMjAzLHBhcGF5YXdoaXA6MTY3NzMwNzcscGVhY2hwdWZmOjE2NzY3NjczLHBlcnU6MTM0Njg5OTEscGluazoxNjc2MTAzNSxwbHVtOjE0NTI0NjM3LHBvd2RlcmJsdWU6MTE1OTE5MTAscHVycGxlOjgzODg3MzYscmViZWNjYXB1cnBsZTo2Njk3ODgxLHJlZDoxNjcxMTY4MCxyb3N5YnJvd246MTIzNTc1MTkscm95YWxibHVlOjQyODY5NDUsc2FkZGxlYnJvd246OTEyNzE4NyxzYWxtb246MTY0MTY4ODIsc2FuZHlicm93bjoxNjAzMjg2NCxzZWFncmVlbjozMDUwMzI3LHNlYXNoZWxsOjE2Nzc0NjM4LHNpZW5uYToxMDUwNjc5NyxzaWx2ZXI6MTI2MzIyNTYsc2t5Ymx1ZTo4OTAwMzMxLHNsYXRlYmx1ZTo2OTcwMDYxLHNsYXRlZ3JheTo3MzcyOTQ0LHNsYXRlZ3JleTo3MzcyOTQ0LHNub3c6MTY3NzU5MzAsc3ByaW5nZ3JlZW46NjU0MDcsc3RlZWxibHVlOjQ2MjA5ODAsdGFuOjEzODA4NzgwLHRlYWw6MzI4OTYsdGhpc3RsZToxNDIwNDg4OCx0b21hdG86MTY3MzcwOTUsdHVycXVvaXNlOjQyNTE4NTYsdmlvbGV0OjE1NjMxMDg2LHdoZWF0OjE2MTEzMzMxLHdoaXRlOjE2Nzc3MjE1LHdoaXRlc21va2U6MTYxMTkyODUseWVsbG93OjE2Nzc2OTYwLHllbGxvd2dyZWVuOjEwMTQ1MDc0fSxKYT17aDowLHM6MCxsOjB9LFFhPXtoOjAsczowLGw6MH07T2JqZWN0LmFzc2lnbih2LnByb3RvdHlwZSx7aXNDb2xvcjohMCxyOjEsZzoxLGI6MSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmZS5pc0NvbG9yP3RoaXMuY29weShlKTpcIm51bWJlclwiPT09dHlwZW9mIGU/dGhpcy5zZXRIZXgoZSk6XCJzdHJpbmdcIj09PXR5cGVvZiBlJiZ0aGlzLnNldFN0eWxlKGUpO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oZSl7dGhpcy5iPXRoaXMuZz10aGlzLnI9ZTtyZXR1cm4gdGhpc30sc2V0SGV4OmZ1bmN0aW9uKGUpe2U9TWF0aC5mbG9vcihlKTt0aGlzLnI9KGU+PjE2JjI1NSkvMjU1O3RoaXMuZz0oZT4+OCYyNTUpLzI1NTt0aGlzLmI9KGUmMjU1KS8yNTU7cmV0dXJuIHRoaXN9LHNldFJHQjpmdW5jdGlvbihlLHQscil7dGhpcy5yPWU7dGhpcy5nPXQ7dGhpcy5iPXI7cmV0dXJuIHRoaXN9LHNldEhTTDpmdW5jdGlvbihlLHQscil7ZT1Wby5ldWNsaWRlYW5Nb2R1bG8oZSwxKTt0PVZvLmNsYW1wKHQsMCwxKTtyPVZvLmNsYW1wKHIsMCwxKTswPT09dD90aGlzLnI9dGhpcy5nPXRoaXMuYj1yOih0PS41Pj1yP3IqKDErdCk6cit0LXIqdCxyPTIqci10LHRoaXMucj11KHIsdCxlKzEvMyksdGhpcy5nPXUocix0LGUpLHRoaXMuYj11KHIsdCxlLTEvMykpO3JldHVybiB0aGlzfSxzZXRTdHlsZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZvaWQgMCE9PWUmJjE+cGFyc2VGbG9hdChlKSYmY29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IEFscGhhIGNvbXBvbmVudCBvZiBcIit0K1wiIHdpbGwgYmUgaWdub3JlZC5cIil9dmFyIHI7aWYocj0vXigoPzpyZ2J8aHNsKWE/KVxcKFxccyooW15cXCldKilcXCkvLmV4ZWModCkpe3ZhciBuPXJbMl07c3dpdGNoKHJbMV0pe2Nhc2VcInJnYlwiOmNhc2VcInJnYmFcIjppZihyPS9eKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMobikpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigyNTUscGFyc2VJbnQoclsxXSwxMCkpLzI1NSx0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KHJbMl0sMTApKS8yNTUsdGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChyWzNdLDEwKSkvMjU1LGUocls1XSksdGhpcztpZihyPS9eKFxcZCspJVxccyosXFxzKihcXGQrKSVcXHMqLFxccyooXFxkKyklXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMobikpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigxMDAscGFyc2VJbnQoclsxXSwxMCkpLzEwMCx0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KHJbMl0sMTApKS8xMDAsdGhpcy5iPU1hdGgubWluKDEwMCxwYXJzZUludChyWzNdLDEwKSkvMTAwLGUocls1XSksdGhpczticmVhaztjYXNlXCJoc2xcIjpjYXNlXCJoc2xhXCI6aWYocj0vXihbMC05XSpcXC4/WzAtOV0rKVxccyosXFxzKihcXGQrKSVcXHMqLFxccyooXFxkKyklXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMobikpe249cGFyc2VGbG9hdChyWzFdKS8zNjA7dmFyIGk9cGFyc2VJbnQoclsyXSwxMCkvMTAwLG89cGFyc2VJbnQoclszXSwxMCkvMTAwO2Uocls1XSk7cmV0dXJuIHRoaXMuc2V0SFNMKG4saSxvKX19fWVsc2UgaWYocj0vXiMoW0EtRmEtZjAtOV0rKSQvLmV4ZWModCkpe3I9clsxXTtuPXIubGVuZ3RoO2lmKDM9PT1uKXJldHVybiB0aGlzLnI9cGFyc2VJbnQoci5jaGFyQXQoMCkrci5jaGFyQXQoMCksMTYpLzI1NSx0aGlzLmc9cGFyc2VJbnQoci5jaGFyQXQoMSkrci5jaGFyQXQoMSksMTYpLzI1NSx0aGlzLmI9cGFyc2VJbnQoci5jaGFyQXQoMikrci5jaGFyQXQoMiksMTYpLzI1NSx0aGlzO2lmKDY9PT1uKXJldHVybiB0aGlzLnI9cGFyc2VJbnQoci5jaGFyQXQoMCkrci5jaGFyQXQoMSksMTYpLzI1NSx0aGlzLmc9cGFyc2VJbnQoci5jaGFyQXQoMikrci5jaGFyQXQoMyksMTYpLzI1NSx0aGlzLmI9cGFyc2VJbnQoci5jaGFyQXQoNCkrci5jaGFyQXQoNSksMTYpLzI1NSx0aGlzfXJldHVybiB0JiYwPHQubGVuZ3RoP3RoaXMuc2V0Q29sb3JOYW1lKHQpOnRoaXN9LHNldENvbG9yTmFtZTpmdW5jdGlvbihlKXt2YXIgdD1aYVtlXTt2b2lkIDAhPT10P3RoaXMuc2V0SGV4KHQpOmNvbnNvbGUud2FybihcIlRIUkVFLkNvbG9yOiBVbmtub3duIGNvbG9yIFwiK2UpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnIsdGhpcy5nLHRoaXMuYil9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5yPWUucjt0aGlzLmc9ZS5nO3RoaXMuYj1lLmI7cmV0dXJuIHRoaXN9LGNvcHlHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9Mik7dGhpcy5yPU1hdGgucG93KGUucix0KTt0aGlzLmc9TWF0aC5wb3coZS5nLHQpO3RoaXMuYj1NYXRoLnBvdyhlLmIsdCk7cmV0dXJuIHRoaXN9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9Mik7dD0wPHQ/MS90OjE7dGhpcy5yPU1hdGgucG93KGUucix0KTt0aGlzLmc9TWF0aC5wb3coZS5nLHQpO3RoaXMuYj1NYXRoLnBvdyhlLmIsdCk7cmV0dXJuIHRoaXN9LGNvbnZlcnRHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKGUpe3RoaXMuY29weUdhbW1hVG9MaW5lYXIodGhpcyxlKTtyZXR1cm4gdGhpc30sY29udmVydExpbmVhclRvR2FtbWE6ZnVuY3Rpb24oZSl7dGhpcy5jb3B5TGluZWFyVG9HYW1tYSh0aGlzLGUpO3JldHVybiB0aGlzfSxjb3B5U1JHQlRvTGluZWFyOmZ1bmN0aW9uKGUpe3RoaXMucj1jKGUucik7dGhpcy5nPWMoZS5nKTt0aGlzLmI9YyhlLmIpO3JldHVybiB0aGlzfSxjb3B5TGluZWFyVG9TUkdCOmZ1bmN0aW9uKGUpe3RoaXMucj1oKGUucik7dGhpcy5nPWgoZS5nKTt0aGlzLmI9aChlLmIpO3JldHVybiB0aGlzfSxjb252ZXJ0U1JHQlRvTGluZWFyOmZ1bmN0aW9uKCl7dGhpcy5jb3B5U1JHQlRvTGluZWFyKHRoaXMpO3JldHVybiB0aGlzfSxjb252ZXJ0TGluZWFyVG9TUkdCOmZ1bmN0aW9uKCl7dGhpcy5jb3B5TGluZWFyVG9TUkdCKHRoaXMpO3JldHVybiB0aGlzfSxnZXRIZXg6ZnVuY3Rpb24oKXtyZXR1cm4gMjU1KnRoaXMucjw8MTZeMjU1KnRoaXMuZzw8OF4yNTUqdGhpcy5iPDwwfSxnZXRIZXhTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oXCIwMDAwMDBcIit0aGlzLmdldEhleCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfSxnZXRIU0w6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkNvbG9yOiAuZ2V0SFNMKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPXtoOjAsczowLGw6MH0pO3ZhciB0PXRoaXMucixyPXRoaXMuZyxuPXRoaXMuYixpPU1hdGgubWF4KHQscixuKSxvPU1hdGgubWluKHQscixuKSxhLHM9KG8raSkvMjtpZihvPT09aSlvPWE9MDtlbHNle3ZhciB1PWktbztvPS41Pj1zP3UvKGkrbyk6dS8oMi1pLW8pO3N3aXRjaChpKXtjYXNlIHQ6YT0oci1uKS91KyhyPG4/NjowKTticmVhaztjYXNlIHI6YT0obi10KS91KzI7YnJlYWs7Y2FzZSBuOmE9KHQtcikvdSs0fWEvPTZ9ZS5oPWE7ZS5zPW87ZS5sPXM7cmV0dXJuIGV9LGdldFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJyZ2IoXCIrKDI1NSp0aGlzLnJ8MCkrXCIsXCIrKDI1NSp0aGlzLmd8MCkrXCIsXCIrKDI1NSp0aGlzLmJ8MCkrXCIpXCJ9LG9mZnNldEhTTDpmdW5jdGlvbihlLHQscil7dGhpcy5nZXRIU0woSmEpO0phLmgrPWU7SmEucys9dDtKYS5sKz1yO3RoaXMuc2V0SFNMKEphLmgsSmEucyxKYS5sKTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGUpe3RoaXMucis9ZS5yO3RoaXMuZys9ZS5nO3RoaXMuYis9ZS5iO3JldHVybiB0aGlzfSxhZGRDb2xvcnM6ZnVuY3Rpb24oZSx0KXt0aGlzLnI9ZS5yK3Qucjt0aGlzLmc9ZS5nK3QuZzt0aGlzLmI9ZS5iK3QuYjtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGUpe3RoaXMucis9ZTt0aGlzLmcrPWU7dGhpcy5iKz1lO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oZSl7dGhpcy5yPU1hdGgubWF4KDAsdGhpcy5yLWUucik7dGhpcy5nPU1hdGgubWF4KDAsdGhpcy5nLWUuZyk7dGhpcy5iPU1hdGgubWF4KDAsdGhpcy5iLWUuYik7cmV0dXJuIHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGUpe3RoaXMucio9ZS5yO3RoaXMuZyo9ZS5nO3RoaXMuYio9ZS5iO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihlKXt0aGlzLnIqPWU7dGhpcy5nKj1lO3RoaXMuYio9ZTtyZXR1cm4gdGhpc30sbGVycDpmdW5jdGlvbihlLHQpe3RoaXMucis9KGUuci10aGlzLnIpKnQ7dGhpcy5nKz0oZS5nLXRoaXMuZykqdDt0aGlzLmIrPShlLmItdGhpcy5iKSp0O3JldHVybiB0aGlzfSxsZXJwSFNMOmZ1bmN0aW9uKGUsdCl7dGhpcy5nZXRIU0woSmEpO2UuZ2V0SFNMKFFhKTtlPVZvLmxlcnAoSmEuaCxRYS5oLHQpO3ZhciByPVZvLmxlcnAoSmEucyxRYS5zLHQpO3Q9Vm8ubGVycChKYS5sLFFhLmwsdCk7dGhpcy5zZXRIU0woZSxyLHQpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucj09PXRoaXMuciYmZS5nPT09dGhpcy5nJiZlLmI9PT10aGlzLmJ9LGZyb21BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PTApO3RoaXMucj1lW3RdO3RoaXMuZz1lW3QrMV07dGhpcy5iPWVbdCsyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPVtdKTt2b2lkIDA9PT10JiYodD0wKTtlW3RdPXRoaXMucjtlW3QrMV09dGhpcy5nO2VbdCsyXT10aGlzLmI7cmV0dXJuIGV9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEhleCgpfX0pO3YuTkFNRVM9WmE7T2JqZWN0LmFzc2lnbihfLnByb3RvdHlwZSx7Y2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5hPWUuYTt0aGlzLmI9ZS5iO3RoaXMuYz1lLmM7dGhpcy5ub3JtYWwuY29weShlLm5vcm1hbCk7dGhpcy5jb2xvci5jb3B5KGUuY29sb3IpO3RoaXMubWF0ZXJpYWxJbmRleD1lLm1hdGVyaWFsSW5kZXg7Zm9yKHZhciB0PTAscj1lLnZlcnRleE5vcm1hbHMubGVuZ3RoO3Q8cjt0KyspdGhpcy52ZXJ0ZXhOb3JtYWxzW3RdPWUudmVydGV4Tm9ybWFsc1t0XS5jbG9uZSgpO3Q9MDtmb3Iocj1lLnZlcnRleENvbG9ycy5sZW5ndGg7dDxyO3QrKyl0aGlzLnZlcnRleENvbG9yc1t0XT1lLnZlcnRleENvbG9yc1t0XS5jbG9uZSgpO3JldHVybiB0aGlzfX0pO3ZhciBlcz0wO3kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnksaXNNYXRlcmlhbDohMCxvbkJlZm9yZUNvbXBpbGU6ZnVuY3Rpb24oKXt9LHNldFZhbHVlczpmdW5jdGlvbihlKXtpZih2b2lkIDAhPT1lKWZvcih2YXIgdCBpbiBlKXt2YXIgcj1lW3RdO2lmKHZvaWQgMD09PXIpY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6ICdcIit0K1wiJyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkLlwiKTtlbHNlIGlmKFwic2hhZGluZ1wiPT09dCljb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC5zaGFkaW5nIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB0aGUgYm9vbGVhbiAuZmxhdFNoYWRpbmcgaW5zdGVhZC5cIiksdGhpcy5mbGF0U2hhZGluZz0xPT09cj8hMDohMTtlbHNle3ZhciBuPXRoaXNbdF07dm9pZCAwPT09bj9jb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6ICdcIit0K1wiJyBpcyBub3QgYSBwcm9wZXJ0eSBvZiB0aGlzIG1hdGVyaWFsLlwiKTpuJiZuLmlzQ29sb3I/bi5zZXQocik6biYmbi5pc1ZlY3RvcjMmJnImJnIuaXNWZWN0b3IzP24uY29weShyKTp0aGlzW3RdPXJ9fX0sdG9KU09OOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQ9W10scjtmb3IociBpbiBlKXt2YXIgbj1lW3JdO2RlbGV0ZSBuLm1ldGFkYXRhO3QucHVzaChuKX1yZXR1cm4gdH12YXIgcj12b2lkIDA9PT1lfHxcInN0cmluZ1wiPT09dHlwZW9mIGU7ciYmKGU9e3RleHR1cmVzOnt9LGltYWdlczp7fX0pO3ZhciBuPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIk1hdGVyaWFsXCIsZ2VuZXJhdG9yOlwiTWF0ZXJpYWwudG9KU09OXCJ9fTtuLnV1aWQ9dGhpcy51dWlkO24udHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKG4ubmFtZT10aGlzLm5hbWUpO3RoaXMuY29sb3ImJnRoaXMuY29sb3IuaXNDb2xvciYmKG4uY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKSk7dm9pZCAwIT09dGhpcy5yb3VnaG5lc3MmJihuLnJvdWdobmVzcz10aGlzLnJvdWdobmVzcyk7dm9pZCAwIT09dGhpcy5tZXRhbG5lc3MmJihuLm1ldGFsbmVzcz10aGlzLm1ldGFsbmVzcyk7dGhpcy5zaGVlbiYmdGhpcy5zaGVlbi5pc0NvbG9yJiYobi5zaGVlbj10aGlzLnNoZWVuLmdldEhleCgpKTt0aGlzLmVtaXNzaXZlJiZ0aGlzLmVtaXNzaXZlLmlzQ29sb3ImJihuLmVtaXNzaXZlPXRoaXMuZW1pc3NpdmUuZ2V0SGV4KCkpO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHkmJjEhPT10aGlzLmVtaXNzaXZlSW50ZW5zaXR5JiYobi5lbWlzc2l2ZUludGVuc2l0eT10aGlzLmVtaXNzaXZlSW50ZW5zaXR5KTt0aGlzLnNwZWN1bGFyJiZ0aGlzLnNwZWN1bGFyLmlzQ29sb3ImJihuLnNwZWN1bGFyPXRoaXMuc3BlY3VsYXIuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMuc2hpbmluZXNzJiYobi5zaGluaW5lc3M9dGhpcy5zaGluaW5lc3MpO3ZvaWQgMCE9PXRoaXMuY2xlYXJjb2F0JiYobi5jbGVhcmNvYXQ9dGhpcy5jbGVhcmNvYXQpO3ZvaWQgMCE9PXRoaXMuY2xlYXJjb2F0Um91Z2huZXNzJiYobi5jbGVhcmNvYXRSb3VnaG5lc3M9dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3MpO3RoaXMuY2xlYXJjb2F0TWFwJiZ0aGlzLmNsZWFyY29hdE1hcC5pc1RleHR1cmUmJihuLmNsZWFyY29hdE1hcD10aGlzLmNsZWFyY29hdE1hcC50b0pTT04oZSkudXVpZCk7dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXAmJnRoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwLmlzVGV4dHVyZSYmKG4uY2xlYXJjb2F0Um91Z2huZXNzTWFwPXRoaXMuY2xlYXJjb2F0Um91Z2huZXNzTWFwLnRvSlNPTihlKS51dWlkKTt0aGlzLmNsZWFyY29hdE5vcm1hbE1hcCYmdGhpcy5jbGVhcmNvYXROb3JtYWxNYXAuaXNUZXh0dXJlJiYobi5jbGVhcmNvYXROb3JtYWxNYXA9dGhpcy5jbGVhcmNvYXROb3JtYWxNYXAudG9KU09OKGUpLnV1aWQsbi5jbGVhcmNvYXROb3JtYWxTY2FsZT10aGlzLmNsZWFyY29hdE5vcm1hbFNjYWxlLnRvQXJyYXkoKSk7dGhpcy5tYXAmJnRoaXMubWFwLmlzVGV4dHVyZSYmKG4ubWFwPXRoaXMubWFwLnRvSlNPTihlKS51dWlkKTt0aGlzLm1hdGNhcCYmdGhpcy5tYXRjYXAuaXNUZXh0dXJlJiYobi5tYXRjYXA9dGhpcy5tYXRjYXAudG9KU09OKGUpLnV1aWQpO3RoaXMuYWxwaGFNYXAmJnRoaXMuYWxwaGFNYXAuaXNUZXh0dXJlJiYobi5hbHBoYU1hcD10aGlzLmFscGhhTWFwLnRvSlNPTihlKS51dWlkKTt0aGlzLmxpZ2h0TWFwJiZ0aGlzLmxpZ2h0TWFwLmlzVGV4dHVyZSYmKG4ubGlnaHRNYXA9dGhpcy5saWdodE1hcC50b0pTT04oZSkudXVpZCk7dGhpcy5hb01hcCYmdGhpcy5hb01hcC5pc1RleHR1cmUmJihuLmFvTWFwPXRoaXMuYW9NYXAudG9KU09OKGUpLnV1aWQsbi5hb01hcEludGVuc2l0eT10aGlzLmFvTWFwSW50ZW5zaXR5KTt0aGlzLmJ1bXBNYXAmJnRoaXMuYnVtcE1hcC5pc1RleHR1cmUmJihuLmJ1bXBNYXA9dGhpcy5idW1wTWFwLnRvSlNPTihlKS51dWlkLG4uYnVtcFNjYWxlPXRoaXMuYnVtcFNjYWxlKTt0aGlzLm5vcm1hbE1hcCYmdGhpcy5ub3JtYWxNYXAuaXNUZXh0dXJlJiYobi5ub3JtYWxNYXA9dGhpcy5ub3JtYWxNYXAudG9KU09OKGUpLnV1aWQsbi5ub3JtYWxNYXBUeXBlPXRoaXMubm9ybWFsTWFwVHlwZSxuLm5vcm1hbFNjYWxlPXRoaXMubm9ybWFsU2NhbGUudG9BcnJheSgpKTt0aGlzLmRpc3BsYWNlbWVudE1hcCYmdGhpcy5kaXNwbGFjZW1lbnRNYXAuaXNUZXh0dXJlJiYobi5kaXNwbGFjZW1lbnRNYXA9dGhpcy5kaXNwbGFjZW1lbnRNYXAudG9KU09OKGUpLnV1aWQsbi5kaXNwbGFjZW1lbnRTY2FsZT10aGlzLmRpc3BsYWNlbWVudFNjYWxlLG4uZGlzcGxhY2VtZW50Qmlhcz10aGlzLmRpc3BsYWNlbWVudEJpYXMpO3RoaXMucm91Z2huZXNzTWFwJiZ0aGlzLnJvdWdobmVzc01hcC5pc1RleHR1cmUmJihuLnJvdWdobmVzc01hcD10aGlzLnJvdWdobmVzc01hcC50b0pTT04oZSkudXVpZCk7dGhpcy5tZXRhbG5lc3NNYXAmJnRoaXMubWV0YWxuZXNzTWFwLmlzVGV4dHVyZSYmKG4ubWV0YWxuZXNzTWFwPXRoaXMubWV0YWxuZXNzTWFwLnRvSlNPTihlKS51dWlkKTt0aGlzLmVtaXNzaXZlTWFwJiZ0aGlzLmVtaXNzaXZlTWFwLmlzVGV4dHVyZSYmKG4uZW1pc3NpdmVNYXA9dGhpcy5lbWlzc2l2ZU1hcC50b0pTT04oZSkudXVpZCk7dGhpcy5zcGVjdWxhck1hcCYmdGhpcy5zcGVjdWxhck1hcC5pc1RleHR1cmUmJihuLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXAudG9KU09OKGUpLnV1aWQpO3RoaXMuZW52TWFwJiZ0aGlzLmVudk1hcC5pc1RleHR1cmUmJihuLmVudk1hcD10aGlzLmVudk1hcC50b0pTT04oZSkudXVpZCxuLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eSxuLnJlZnJhY3Rpb25SYXRpbz10aGlzLnJlZnJhY3Rpb25SYXRpbyx2b2lkIDAhPT10aGlzLmNvbWJpbmUmJihuLmNvbWJpbmU9dGhpcy5jb21iaW5lKSx2b2lkIDAhPT10aGlzLmVudk1hcEludGVuc2l0eSYmKG4uZW52TWFwSW50ZW5zaXR5PXRoaXMuZW52TWFwSW50ZW5zaXR5KSk7dGhpcy5ncmFkaWVudE1hcCYmdGhpcy5ncmFkaWVudE1hcC5pc1RleHR1cmUmJihuLmdyYWRpZW50TWFwPXRoaXMuZ3JhZGllbnRNYXAudG9KU09OKGUpLnV1aWQpO3ZvaWQgMCE9PXRoaXMuc2l6ZSYmKG4uc2l6ZT10aGlzLnNpemUpO3ZvaWQgMCE9PXRoaXMuc2l6ZUF0dGVudWF0aW9uJiYobi5zaXplQXR0ZW51YXRpb249dGhpcy5zaXplQXR0ZW51YXRpb24pOzEhPT10aGlzLmJsZW5kaW5nJiYobi5ibGVuZGluZz10aGlzLmJsZW5kaW5nKTshMD09PXRoaXMuZmxhdFNoYWRpbmcmJihuLmZsYXRTaGFkaW5nPXRoaXMuZmxhdFNoYWRpbmcpOzAhPT10aGlzLnNpZGUmJihuLnNpZGU9dGhpcy5zaWRlKTt0aGlzLnZlcnRleENvbG9ycyYmKG4udmVydGV4Q29sb3JzPSEwKTsxPnRoaXMub3BhY2l0eSYmKG4ub3BhY2l0eT10aGlzLm9wYWNpdHkpOyEwPT09dGhpcy50cmFuc3BhcmVudCYmKG4udHJhbnNwYXJlbnQ9dGhpcy50cmFuc3BhcmVudCk7bi5kZXB0aEZ1bmM9dGhpcy5kZXB0aEZ1bmM7bi5kZXB0aFRlc3Q9dGhpcy5kZXB0aFRlc3Q7bi5kZXB0aFdyaXRlPXRoaXMuZGVwdGhXcml0ZTtuLnN0ZW5jaWxXcml0ZT10aGlzLnN0ZW5jaWxXcml0ZTtuLnN0ZW5jaWxXcml0ZU1hc2s9dGhpcy5zdGVuY2lsV3JpdGVNYXNrO24uc3RlbmNpbEZ1bmM9dGhpcy5zdGVuY2lsRnVuYztuLnN0ZW5jaWxSZWY9dGhpcy5zdGVuY2lsUmVmO24uc3RlbmNpbEZ1bmNNYXNrPXRoaXMuc3RlbmNpbEZ1bmNNYXNrO24uc3RlbmNpbEZhaWw9dGhpcy5zdGVuY2lsRmFpbDtuLnN0ZW5jaWxaRmFpbD10aGlzLnN0ZW5jaWxaRmFpbDtuLnN0ZW5jaWxaUGFzcz10aGlzLnN0ZW5jaWxaUGFzczt0aGlzLnJvdGF0aW9uJiYwIT09dGhpcy5yb3RhdGlvbiYmKG4ucm90YXRpb249dGhpcy5yb3RhdGlvbik7ITA9PT10aGlzLnBvbHlnb25PZmZzZXQmJihuLnBvbHlnb25PZmZzZXQ9ITApOzAhPT10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3ImJihuLnBvbHlnb25PZmZzZXRGYWN0b3I9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yKTswIT09dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHMmJihuLnBvbHlnb25PZmZzZXRVbml0cz10aGlzLnBvbHlnb25PZmZzZXRVbml0cyk7dGhpcy5saW5ld2lkdGgmJjEhPT10aGlzLmxpbmV3aWR0aCYmKG4ubGluZXdpZHRoPXRoaXMubGluZXdpZHRoKTt2b2lkIDAhPT10aGlzLmRhc2hTaXplJiYobi5kYXNoU2l6ZT10aGlzLmRhc2hTaXplKTt2b2lkIDAhPT10aGlzLmdhcFNpemUmJihuLmdhcFNpemU9dGhpcy5nYXBTaXplKTt2b2lkIDAhPT10aGlzLnNjYWxlJiYobi5zY2FsZT10aGlzLnNjYWxlKTshMD09PXRoaXMuZGl0aGVyaW5nJiYobi5kaXRoZXJpbmc9ITApOzA8dGhpcy5hbHBoYVRlc3QmJihuLmFscGhhVGVzdD10aGlzLmFscGhhVGVzdCk7ITA9PT10aGlzLnByZW11bHRpcGxpZWRBbHBoYSYmKG4ucHJlbXVsdGlwbGllZEFscGhhPXRoaXMucHJlbXVsdGlwbGllZEFscGhhKTshMD09PXRoaXMud2lyZWZyYW1lJiYobi53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWUpOzE8dGhpcy53aXJlZnJhbWVMaW5ld2lkdGgmJihuLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aCk7XCJyb3VuZFwiIT09dGhpcy53aXJlZnJhbWVMaW5lY2FwJiYobi53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcCk7XCJyb3VuZFwiIT09dGhpcy53aXJlZnJhbWVMaW5lam9pbiYmKG4ud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lam9pbik7ITA9PT10aGlzLm1vcnBoVGFyZ2V0cyYmKG4ubW9ycGhUYXJnZXRzPSEwKTshMD09PXRoaXMubW9ycGhOb3JtYWxzJiYobi5tb3JwaE5vcm1hbHM9ITApOyEwPT09dGhpcy5za2lubmluZyYmKG4uc2tpbm5pbmc9ITApOyExPT09dGhpcy52aXNpYmxlJiYobi52aXNpYmxlPSExKTshMT09PXRoaXMudG9uZU1hcHBlZCYmKG4udG9uZU1hcHBlZD0hMSk7XCJ7fVwiIT09SlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkmJihuLnVzZXJEYXRhPXRoaXMudXNlckRhdGEpO3ImJihyPXQoZS50ZXh0dXJlcyksZT10KGUuaW1hZ2VzKSwwPHIubGVuZ3RoJiYobi50ZXh0dXJlcz1yKSwwPGUubGVuZ3RoJiYobi5pbWFnZXM9ZSkpO3JldHVybiBufSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihlKXt0aGlzLm5hbWU9ZS5uYW1lO3RoaXMuZm9nPWUuZm9nO3RoaXMuYmxlbmRpbmc9ZS5ibGVuZGluZzt0aGlzLnNpZGU9ZS5zaWRlO3RoaXMuZmxhdFNoYWRpbmc9ZS5mbGF0U2hhZGluZzt0aGlzLnZlcnRleENvbG9ycz1lLnZlcnRleENvbG9yczt0aGlzLm9wYWNpdHk9ZS5vcGFjaXR5O3RoaXMudHJhbnNwYXJlbnQ9ZS50cmFuc3BhcmVudDt0aGlzLmJsZW5kU3JjPWUuYmxlbmRTcmM7dGhpcy5ibGVuZERzdD1lLmJsZW5kRHN0O3RoaXMuYmxlbmRFcXVhdGlvbj1lLmJsZW5kRXF1YXRpb247dGhpcy5ibGVuZFNyY0FscGhhPWUuYmxlbmRTcmNBbHBoYTt0aGlzLmJsZW5kRHN0QWxwaGE9ZS5ibGVuZERzdEFscGhhO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPWUuYmxlbmRFcXVhdGlvbkFscGhhO3RoaXMuZGVwdGhGdW5jPWUuZGVwdGhGdW5jO3RoaXMuZGVwdGhUZXN0PWUuZGVwdGhUZXN0O3RoaXMuZGVwdGhXcml0ZT1lLmRlcHRoV3JpdGU7dGhpcy5zdGVuY2lsV3JpdGVNYXNrPWUuc3RlbmNpbFdyaXRlTWFzazt0aGlzLnN0ZW5jaWxGdW5jPWUuc3RlbmNpbEZ1bmM7dGhpcy5zdGVuY2lsUmVmPWUuc3RlbmNpbFJlZjt0aGlzLnN0ZW5jaWxGdW5jTWFzaz1lLnN0ZW5jaWxGdW5jTWFzazt0aGlzLnN0ZW5jaWxGYWlsPWUuc3RlbmNpbEZhaWw7dGhpcy5zdGVuY2lsWkZhaWw9ZS5zdGVuY2lsWkZhaWw7dGhpcy5zdGVuY2lsWlBhc3M9ZS5zdGVuY2lsWlBhc3M7dGhpcy5zdGVuY2lsV3JpdGU9ZS5zdGVuY2lsV3JpdGU7dmFyIHQ9ZS5jbGlwcGluZ1BsYW5lcyxyPW51bGw7aWYobnVsbCE9PXQpe3ZhciBuPXQubGVuZ3RoO3I9QXJyYXkobik7Zm9yKHZhciBpPTA7aSE9PW47KytpKXJbaV09dFtpXS5jbG9uZSgpfXRoaXMuY2xpcHBpbmdQbGFuZXM9cjt0aGlzLmNsaXBJbnRlcnNlY3Rpb249ZS5jbGlwSW50ZXJzZWN0aW9uO3RoaXMuY2xpcFNoYWRvd3M9ZS5jbGlwU2hhZG93czt0aGlzLnNoYWRvd1NpZGU9ZS5zaGFkb3dTaWRlO3RoaXMuY29sb3JXcml0ZT1lLmNvbG9yV3JpdGU7dGhpcy5wcmVjaXNpb249ZS5wcmVjaXNpb247dGhpcy5wb2x5Z29uT2Zmc2V0PWUucG9seWdvbk9mZnNldDt0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9ZS5wb2x5Z29uT2Zmc2V0RmFjdG9yO3RoaXMucG9seWdvbk9mZnNldFVuaXRzPWUucG9seWdvbk9mZnNldFVuaXRzO3RoaXMuZGl0aGVyaW5nPWUuZGl0aGVyaW5nO3RoaXMuYWxwaGFUZXN0PWUuYWxwaGFUZXN0O3RoaXMucHJlbXVsdGlwbGllZEFscGhhPWUucHJlbXVsdGlwbGllZEFscGhhO3RoaXMudmlzaWJsZT1lLnZpc2libGU7dGhpcy50b25lTWFwcGVkPWUudG9uZU1hcHBlZDt0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZS51c2VyRGF0YSkpO3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHkucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGUpeyEwPT09ZSYmdGhpcy52ZXJzaW9uKyt9fSk7eC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSk7eC5wcm90b3R5cGUuY29uc3RydWN0b3I9eDt4LnByb3RvdHlwZS5pc01lc2hCYXNpY01hdGVyaWFsPSEwO3gucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7eS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5jb2xvci5jb3B5KGUuY29sb3IpO3RoaXMubWFwPWUubWFwO3RoaXMubGlnaHRNYXA9ZS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWUubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1lLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9ZS5hb01hcEludGVuc2l0eTt0aGlzLnNwZWN1bGFyTWFwPWUuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1lLmFscGhhTWFwO3RoaXMuZW52TWFwPWUuZW52TWFwO3RoaXMuY29tYmluZT1lLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9ZS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89ZS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9ZS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9ZS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWUud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWUud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1lLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWUubW9ycGhUYXJnZXRzO3JldHVybiB0aGlzfTt2YXIgdHM9bmV3IFRlO09iamVjdC5kZWZpbmVQcm9wZXJ0eShFLnByb3RvdHlwZSxcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbihlKXshMD09PWUmJnRoaXMudmVyc2lvbisrfX0pO09iamVjdC5hc3NpZ24oRS5wcm90b3R5cGUse2lzQnVmZmVyQXR0cmlidXRlOiEwLG9uVXBsb2FkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt9LHNldFVzYWdlOmZ1bmN0aW9uKGUpe3RoaXMudXNhZ2U9ZTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihlKXt0aGlzLm5hbWU9ZS5uYW1lO3RoaXMuYXJyYXk9bmV3IGUuYXJyYXkuY29uc3RydWN0b3IoZS5hcnJheSk7dGhpcy5pdGVtU2l6ZT1lLml0ZW1TaXplO3RoaXMuY291bnQ9ZS5jb3VudDt0aGlzLm5vcm1hbGl6ZWQ9ZS5ub3JtYWxpemVkO3RoaXMudXNhZ2U9ZS51c2FnZTtyZXR1cm4gdGhpc30sY29weUF0OmZ1bmN0aW9uKGUsdCxyKXtlKj10aGlzLml0ZW1TaXplO3IqPXQuaXRlbVNpemU7Zm9yKHZhciBuPTAsaT10aGlzLml0ZW1TaXplO248aTtuKyspdGhpcy5hcnJheVtlK25dPXQuYXJyYXlbcituXTtyZXR1cm4gdGhpc30sY29weUFycmF5OmZ1bmN0aW9uKGUpe3RoaXMuYXJyYXkuc2V0KGUpO3JldHVybiB0aGlzfSxjb3B5Q29sb3JzQXJyYXk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuYXJyYXkscj0wLG49MCxpPWUubGVuZ3RoO248aTtuKyspe3ZhciBvPWVbbl07dm9pZCAwPT09byYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5Q29sb3JzQXJyYXkoKTogY29sb3IgaXMgdW5kZWZpbmVkXCIsbiksbz1uZXcgdik7dFtyKytdPW8ucjt0W3IrK109by5nO3RbcisrXT1vLmJ9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Iyc0FycmF5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmFycmF5LHI9MCxuPTAsaT1lLmxlbmd0aDtuPGk7bisrKXt2YXIgbz1lW25dO3ZvaWQgMD09PW8mJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjJzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLG4pLG89bmV3IE1lKTt0W3IrK109by54O3RbcisrXT1vLnl9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Izc0FycmF5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmFycmF5LHI9MCxuPTAsaT1lLmxlbmd0aDtuPGk7bisrKXt2YXIgbz1lW25dO3ZvaWQgMD09PW8mJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjNzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLG4pLG89bmV3IFRlKTt0W3IrK109by54O3RbcisrXT1vLnk7dFtyKytdPW8uen1yZXR1cm4gdGhpc30sY29weVZlY3RvcjRzQXJyYXk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuYXJyYXkscj0wLG49MCxpPWUubGVuZ3RoO248aTtuKyspe3ZhciBvPWVbbl07dm9pZCAwPT09byYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yNHNBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkXCIsbiksbz1uZXcgQ2UpO3RbcisrXT1vLng7dFtyKytdPW8ueTt0W3IrK109by56O3RbcisrXT1vLnd9cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4MzpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPXRoaXMuY291bnQ7dDxyO3QrKyl0cy54PXRoaXMuZ2V0WCh0KSx0cy55PXRoaXMuZ2V0WSh0KSx0cy56PXRoaXMuZ2V0Wih0KSx0cy5hcHBseU1hdHJpeDMoZSksdGhpcy5zZXRYWVoodCx0cy54LHRzLnksdHMueik7cmV0dXJuIHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPXRoaXMuY291bnQ7dDxyO3QrKyl0cy54PXRoaXMuZ2V0WCh0KSx0cy55PXRoaXMuZ2V0WSh0KSx0cy56PXRoaXMuZ2V0Wih0KSx0cy5hcHBseU1hdHJpeDQoZSksdGhpcy5zZXRYWVoodCx0cy54LHRzLnksdHMueik7cmV0dXJuIHRoaXN9LGFwcGx5Tm9ybWFsTWF0cml4OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9dGhpcy5jb3VudDt0PHI7dCsrKXRzLng9dGhpcy5nZXRYKHQpLHRzLnk9dGhpcy5nZXRZKHQpLHRzLno9dGhpcy5nZXRaKHQpLHRzLmFwcGx5Tm9ybWFsTWF0cml4KGUpLHRoaXMuc2V0WFlaKHQsdHMueCx0cy55LHRzLnopO3JldHVybiB0aGlzfSx0cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj10aGlzLmNvdW50O3Q8cjt0KyspdHMueD10aGlzLmdldFgodCksdHMueT10aGlzLmdldFkodCksdHMuej10aGlzLmdldFoodCksdHMudHJhbnNmb3JtRGlyZWN0aW9uKGUpLHRoaXMuc2V0WFlaKHQsdHMueCx0cy55LHRzLnopO3JldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0wKTt0aGlzLmFycmF5LnNldChlLHQpO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFycmF5W2UqdGhpcy5pdGVtU2l6ZV19LHNldFg6ZnVuY3Rpb24oZSx0KXt0aGlzLmFycmF5W2UqdGhpcy5pdGVtU2l6ZV09dDtyZXR1cm4gdGhpc30sZ2V0WTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hcnJheVtlKnRoaXMuaXRlbVNpemUrMV19LHNldFk6ZnVuY3Rpb24oZSx0KXt0aGlzLmFycmF5W2UqdGhpcy5pdGVtU2l6ZSsxXT10O3JldHVybiB0aGlzfSxnZXRaOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFycmF5W2UqdGhpcy5pdGVtU2l6ZSsyXX0sc2V0WjpmdW5jdGlvbihlLHQpe3RoaXMuYXJyYXlbZSp0aGlzLml0ZW1TaXplKzJdPXQ7cmV0dXJuIHRoaXN9LGdldFc6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYXJyYXlbZSp0aGlzLml0ZW1TaXplKzNdfSxzZXRXOmZ1bmN0aW9uKGUsdCl7dGhpcy5hcnJheVtlKnRoaXMuaXRlbVNpemUrM109dDtyZXR1cm4gdGhpc30sc2V0WFk6ZnVuY3Rpb24oZSx0LHIpe2UqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVtlKzBdPXQ7dGhpcy5hcnJheVtlKzFdPXI7cmV0dXJuIHRoaXN9LHNldFhZWjpmdW5jdGlvbihlLHQscixuKXtlKj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbZSswXT10O3RoaXMuYXJyYXlbZSsxXT1yO3RoaXMuYXJyYXlbZSsyXT1uO3JldHVybiB0aGlzfSxzZXRYWVpXOmZ1bmN0aW9uKGUsdCxyLG4saSl7ZSo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2UrMF09dDt0aGlzLmFycmF5W2UrMV09cjt0aGlzLmFycmF5W2UrMl09bjt0aGlzLmFycmF5W2UrM109aTtyZXR1cm4gdGhpc30sb25VcGxvYWQ6ZnVuY3Rpb24oZSl7dGhpcy5vblVwbG9hZENhbGxiYWNrPWU7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXJyYXksdGhpcy5pdGVtU2l6ZSkuY29weSh0aGlzKX0sdG9KU09OOmZ1bmN0aW9uKCl7cmV0dXJue2l0ZW1TaXplOnRoaXMuaXRlbVNpemUsdHlwZTp0aGlzLmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5hcnJheSksbm9ybWFsaXplZDp0aGlzLm5vcm1hbGl6ZWR9fX0pO3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO3cucHJvdG90eXBlLmNvbnN0cnVjdG9yPXc7Uy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7Uy5wcm90b3R5cGUuY29uc3RydWN0b3I9UztNLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtNLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NO0MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO0MucHJvdG90eXBlLmNvbnN0cnVjdG9yPUM7Ty5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7Ty5wcm90b3R5cGUuY29uc3RydWN0b3I9TztQLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtQLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1QO0EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO0EucHJvdG90eXBlLmNvbnN0cnVjdG9yPUE7ai5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7ai5wcm90b3R5cGUuY29uc3RydWN0b3I9ajtSLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtSLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1SO09iamVjdC5hc3NpZ24oay5wcm90b3R5cGUse2NvbXB1dGVHcm91cHM6ZnVuY3Rpb24oZSl7dmFyIHQ9W10scj12b2lkIDA7ZT1lLmZhY2VzO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2lmKGkubWF0ZXJpYWxJbmRleCE9PXIpe3I9aS5tYXRlcmlhbEluZGV4O3ZvaWQgMCE9PW8mJihvLmNvdW50PTMqbi1vLnN0YXJ0LHQucHVzaChvKSk7dmFyIG89e3N0YXJ0OjMqbixtYXRlcmlhbEluZGV4OnJ9fX12b2lkIDAhPT1vJiYoby5jb3VudD0zKm4tby5zdGFydCx0LnB1c2gobykpO3RoaXMuZ3JvdXBzPXR9LGZyb21HZW9tZXRyeTpmdW5jdGlvbihlKXt2YXIgdD1lLmZhY2VzLHI9ZS52ZXJ0aWNlcyxuPWUuZmFjZVZlcnRleFV2cyxpPW5bMF0mJjA8blswXS5sZW5ndGgsbz1uWzFdJiYwPG5bMV0ubGVuZ3RoLGE9ZS5tb3JwaFRhcmdldHMscz1hLmxlbmd0aDtpZigwPHMpe3ZhciB1PVtdO2Zvcih2YXIgYz0wO2M8cztjKyspdVtjXT17bmFtZTphW2NdLm5hbWUsZGF0YTpbXX07dGhpcy5tb3JwaFRhcmdldHMucG9zaXRpb249dX12YXIgbD1lLm1vcnBoTm9ybWFscyxoPWwubGVuZ3RoO2lmKDA8aCl7dmFyIHA9W107Zm9yKGM9MDtjPGg7YysrKXBbY109e25hbWU6bFtjXS5uYW1lLGRhdGE6W119O3RoaXMubW9ycGhUYXJnZXRzLm5vcm1hbD1wfXZhciBmPWUuc2tpbkluZGljZXMsZD1lLnNraW5XZWlnaHRzLHY9Zi5sZW5ndGg9PT1yLmxlbmd0aCxtPWQubGVuZ3RoPT09ci5sZW5ndGg7MDxyLmxlbmd0aCYmMD09PXQubGVuZ3RoJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnk6IEZhY2VsZXNzIGdlb21ldHJpZXMgYXJlIG5vdCBzdXBwb3J0ZWQuXCIpO2ZvcihjPTA7Yzx0Lmxlbmd0aDtjKyspe3ZhciBnPXRbY107dGhpcy52ZXJ0aWNlcy5wdXNoKHJbZy5hXSxyW2cuYl0scltnLmNdKTt2YXIgXz1nLnZlcnRleE5vcm1hbHM7Mz09PV8ubGVuZ3RoP3RoaXMubm9ybWFscy5wdXNoKF9bMF0sX1sxXSxfWzJdKTooXz1nLm5vcm1hbCx0aGlzLm5vcm1hbHMucHVzaChfLF8sXykpO189Zy52ZXJ0ZXhDb2xvcnM7Mz09PV8ubGVuZ3RoP3RoaXMuY29sb3JzLnB1c2goX1swXSxfWzFdLF9bMl0pOihfPWcuY29sb3IsdGhpcy5jb2xvcnMucHVzaChfLF8sXykpOyEwPT09aSYmKF89blswXVtjXSx2b2lkIDAhPT1fP3RoaXMudXZzLnB1c2goX1swXSxfWzFdLF9bMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2IFwiLGMpLHRoaXMudXZzLnB1c2gobmV3IE1lLG5ldyBNZSxuZXcgTWUpKSk7ITA9PT1vJiYoXz1uWzFdW2NdLHZvaWQgMCE9PV8/dGhpcy51dnMyLnB1c2goX1swXSxfWzFdLF9bMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2MiBcIixjKSx0aGlzLnV2czIucHVzaChuZXcgTWUsbmV3IE1lLG5ldyBNZSkpKTtmb3IoXz0wO188cztfKyspe3ZhciB5PWFbX10udmVydGljZXM7dVtfXS5kYXRhLnB1c2goeVtnLmFdLHlbZy5iXSx5W2cuY10pfWZvcihfPTA7XzxoO18rKyl5PWxbX10udmVydGV4Tm9ybWFsc1tjXSxwW19dLmRhdGEucHVzaCh5LmEseS5iLHkuYyk7diYmdGhpcy5za2luSW5kaWNlcy5wdXNoKGZbZy5hXSxmW2cuYl0sZltnLmNdKTttJiZ0aGlzLnNraW5XZWlnaHRzLnB1c2goZFtnLmFdLGRbZy5iXSxkW2cuY10pfXRoaXMuY29tcHV0ZUdyb3VwcyhlKTt0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT1lLnZlcnRpY2VzTmVlZFVwZGF0ZTt0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPWUubm9ybWFsc05lZWRVcGRhdGU7dGhpcy5jb2xvcnNOZWVkVXBkYXRlPWUuY29sb3JzTmVlZFVwZGF0ZTt0aGlzLnV2c05lZWRVcGRhdGU9ZS51dnNOZWVkVXBkYXRlO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT1lLmdyb3Vwc05lZWRVcGRhdGU7bnVsbCE9PWUuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWUuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7bnVsbCE9PWUuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWUuYm91bmRpbmdCb3guY2xvbmUoKSk7cmV0dXJuIHRoaXN9fSk7dmFyIHJzPTEsbnM9bmV3IEVlLGlzPW5ldyBmLG9zPW5ldyBUZSxhcz1uZXcgbixzcz1uZXcgbix1cz1uZXcgVGU7Ti5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Tixpc0J1ZmZlckdlb21ldHJ5OiEwLGdldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXh9LHNldEluZGV4OmZ1bmN0aW9uKGUpe0FycmF5LmlzQXJyYXkoZSk/dGhpcy5pbmRleD1uZXcoNjU1MzU8TChlKT9BOk8pKGUsMSk6dGhpcy5pbmRleD1lfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1tlXX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGUsdCl7dGhpcy5hdHRyaWJ1dGVzW2VdPXQ7cmV0dXJuIHRoaXN9LGRlbGV0ZUF0dHJpYnV0ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW2VdO3JldHVybiB0aGlzfSxhZGRHcm91cDpmdW5jdGlvbihlLHQscil7dGhpcy5ncm91cHMucHVzaCh7c3RhcnQ6ZSxjb3VudDp0LG1hdGVyaWFsSW5kZXg6dm9pZCAwIT09cj9yOjB9KX0sY2xlYXJHcm91cHM6ZnVuY3Rpb24oKXt0aGlzLmdyb3Vwcz1bXX0sc2V0RHJhd1JhbmdlOmZ1bmN0aW9uKGUsdCl7dGhpcy5kcmF3UmFuZ2Uuc3RhcnQ9ZTt0aGlzLmRyYXdSYW5nZS5jb3VudD10fSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PXQmJih0LmFwcGx5TWF0cml4NChlKSx0Lm5lZWRzVXBkYXRlPSEwKTt0PXRoaXMuYXR0cmlidXRlcy5ub3JtYWw7aWYodm9pZCAwIT09dCl7dmFyIHI9KG5ldyBtKS5nZXROb3JtYWxNYXRyaXgoZSk7dC5hcHBseU5vcm1hbE1hdHJpeChyKTt0Lm5lZWRzVXBkYXRlPSEwfXQ9dGhpcy5hdHRyaWJ1dGVzLnRhbmdlbnQ7dm9pZCAwIT09dCYmKHQudHJhbnNmb3JtRGlyZWN0aW9uKGUpLHQubmVlZHNVcGRhdGU9ITApO251bGwhPT10aGlzLmJvdW5kaW5nQm94JiZ0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO251bGwhPT10aGlzLmJvdW5kaW5nU3BoZXJlJiZ0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3JldHVybiB0aGlzfSxyb3RhdGVYOmZ1bmN0aW9uKGUpe25zLm1ha2VSb3RhdGlvblgoZSk7dGhpcy5hcHBseU1hdHJpeDQobnMpO3JldHVybiB0aGlzfSxyb3RhdGVZOmZ1bmN0aW9uKGUpe25zLm1ha2VSb3RhdGlvblkoZSk7dGhpcy5hcHBseU1hdHJpeDQobnMpO3JldHVybiB0aGlzfSxyb3RhdGVaOmZ1bmN0aW9uKGUpe25zLm1ha2VSb3RhdGlvblooZSk7dGhpcy5hcHBseU1hdHJpeDQobnMpO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSx0LHIpe25zLm1ha2VUcmFuc2xhdGlvbihlLHQscik7dGhpcy5hcHBseU1hdHJpeDQobnMpO3JldHVybiB0aGlzfSxzY2FsZTpmdW5jdGlvbihlLHQscil7bnMubWFrZVNjYWxlKGUsdCxyKTt0aGlzLmFwcGx5TWF0cml4NChucyk7cmV0dXJuIHRoaXN9LGxvb2tBdDpmdW5jdGlvbihlKXtpcy5sb29rQXQoZSk7aXMudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeDQoaXMubWF0cml4KTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt0aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcihvcykubmVnYXRlKCk7dGhpcy50cmFuc2xhdGUob3MueCxvcy55LG9zLnopO3JldHVybiB0aGlzfSxzZXRGcm9tT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2VvbWV0cnk7aWYoZS5pc1BvaW50c3x8ZS5pc0xpbmUpe2U9bmV3IGooMyp0LnZlcnRpY2VzLmxlbmd0aCwzKTt2YXIgcj1uZXcgaigzKnQuY29sb3JzLmxlbmd0aCwzKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsZS5jb3B5VmVjdG9yM3NBcnJheSh0LnZlcnRpY2VzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLHIuY29weUNvbG9yc0FycmF5KHQuY29sb3JzKSk7dC5saW5lRGlzdGFuY2VzJiZ0LmxpbmVEaXN0YW5jZXMubGVuZ3RoPT09dC52ZXJ0aWNlcy5sZW5ndGgmJihlPW5ldyBqKHQubGluZURpc3RhbmNlcy5sZW5ndGgsMSksdGhpcy5zZXRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIixlLmNvcHlBcnJheSh0LmxpbmVEaXN0YW5jZXMpKSk7bnVsbCE9PXQuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPXQuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7bnVsbCE9PXQuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PXQuYm91bmRpbmdCb3guY2xvbmUoKSl9ZWxzZSBlLmlzTWVzaCYmdCYmdC5pc0dlb21ldHJ5JiZ0aGlzLmZyb21HZW9tZXRyeSh0KTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0wLG49ZS5sZW5ndGg7cjxuO3IrKyl7dmFyIGk9ZVtyXTt0LnB1c2goaS54LGkueSxpLnp8fDApfXRoaXMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgaih0LDMpKTtyZXR1cm4gdGhpc30sdXBkYXRlRnJvbU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdlb21ldHJ5O2lmKGUuaXNNZXNoKXt2YXIgcj10Ll9fZGlyZWN0R2VvbWV0cnk7ITA9PT10LmVsZW1lbnRzTmVlZFVwZGF0ZSYmKHI9dm9pZCAwLHQuZWxlbWVudHNOZWVkVXBkYXRlPSExKTtpZih2b2lkIDA9PT1yKXJldHVybiB0aGlzLmZyb21HZW9tZXRyeSh0KTtyLnZlcnRpY2VzTmVlZFVwZGF0ZT10LnZlcnRpY2VzTmVlZFVwZGF0ZTtyLm5vcm1hbHNOZWVkVXBkYXRlPXQubm9ybWFsc05lZWRVcGRhdGU7ci5jb2xvcnNOZWVkVXBkYXRlPXQuY29sb3JzTmVlZFVwZGF0ZTtyLnV2c05lZWRVcGRhdGU9dC51dnNOZWVkVXBkYXRlO3IuZ3JvdXBzTmVlZFVwZGF0ZT10Lmdyb3Vwc05lZWRVcGRhdGU7dC52ZXJ0aWNlc05lZWRVcGRhdGU9ITE7dC5ub3JtYWxzTmVlZFVwZGF0ZT0hMTt0LmNvbG9yc05lZWRVcGRhdGU9ITE7dC51dnNOZWVkVXBkYXRlPSExO3QuZ3JvdXBzTmVlZFVwZGF0ZT0hMTt0PXJ9ITA9PT10LnZlcnRpY2VzTmVlZFVwZGF0ZSYmKHI9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLHZvaWQgMCE9PXImJihyLmNvcHlWZWN0b3Izc0FycmF5KHQudmVydGljZXMpLHIubmVlZHNVcGRhdGU9ITApLHQudmVydGljZXNOZWVkVXBkYXRlPSExKTshMD09PXQubm9ybWFsc05lZWRVcGRhdGUmJihyPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwsdm9pZCAwIT09ciYmKHIuY29weVZlY3RvcjNzQXJyYXkodC5ub3JtYWxzKSxyLm5lZWRzVXBkYXRlPSEwKSx0Lm5vcm1hbHNOZWVkVXBkYXRlPSExKTshMD09PXQuY29sb3JzTmVlZFVwZGF0ZSYmKHI9dGhpcy5hdHRyaWJ1dGVzLmNvbG9yLHZvaWQgMCE9PXImJihyLmNvcHlDb2xvcnNBcnJheSh0LmNvbG9ycyksci5uZWVkc1VwZGF0ZT0hMCksdC5jb2xvcnNOZWVkVXBkYXRlPSExKTt0LnV2c05lZWRVcGRhdGUmJihyPXRoaXMuYXR0cmlidXRlcy51dix2b2lkIDAhPT1yJiYoci5jb3B5VmVjdG9yMnNBcnJheSh0LnV2cyksci5uZWVkc1VwZGF0ZT0hMCksdC51dnNOZWVkVXBkYXRlPSExKTt0LmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlJiYocj10aGlzLmF0dHJpYnV0ZXMubGluZURpc3RhbmNlLHZvaWQgMCE9PXImJihyLmNvcHlBcnJheSh0LmxpbmVEaXN0YW5jZXMpLHIubmVlZHNVcGRhdGU9ITApLHQubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ITEpO3QuZ3JvdXBzTmVlZFVwZGF0ZSYmKHQuY29tcHV0ZUdyb3VwcyhlLmdlb21ldHJ5KSx0aGlzLmdyb3Vwcz10Lmdyb3Vwcyx0Lmdyb3Vwc05lZWRVcGRhdGU9ITEpO3JldHVybiB0aGlzfSxmcm9tR2VvbWV0cnk6ZnVuY3Rpb24oZSl7ZS5fX2RpcmVjdEdlb21ldHJ5PShuZXcgaykuZnJvbUdlb21ldHJ5KGUpO3JldHVybiB0aGlzLmZyb21EaXJlY3RHZW9tZXRyeShlLl9fZGlyZWN0R2VvbWV0cnkpfSxmcm9tRGlyZWN0R2VvbWV0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEZsb2F0MzJBcnJheSgzKmUudmVydGljZXMubGVuZ3RoKTt0aGlzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEUodCwzKS5jb3B5VmVjdG9yM3NBcnJheShlLnZlcnRpY2VzKSk7MDxlLm5vcm1hbHMubGVuZ3RoJiYodD1uZXcgRmxvYXQzMkFycmF5KDMqZS5ub3JtYWxzLmxlbmd0aCksdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgRSh0LDMpLmNvcHlWZWN0b3Izc0FycmF5KGUubm9ybWFscykpKTswPGUuY29sb3JzLmxlbmd0aCYmKHQ9bmV3IEZsb2F0MzJBcnJheSgzKmUuY29sb3JzLmxlbmd0aCksdGhpcy5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBFKHQsMykuY29weUNvbG9yc0FycmF5KGUuY29sb3JzKSkpOzA8ZS51dnMubGVuZ3RoJiYodD1uZXcgRmxvYXQzMkFycmF5KDIqZS51dnMubGVuZ3RoKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IEUodCwyKS5jb3B5VmVjdG9yMnNBcnJheShlLnV2cykpKTswPGUudXZzMi5sZW5ndGgmJih0PW5ldyBGbG9hdDMyQXJyYXkoMiplLnV2czIubGVuZ3RoKSx0aGlzLnNldEF0dHJpYnV0ZShcInV2MlwiLG5ldyBFKHQsMikuY29weVZlY3RvcjJzQXJyYXkoZS51dnMyKSkpO3RoaXMuZ3JvdXBzPWUuZ3JvdXBzO2Zvcih2YXIgciBpbiBlLm1vcnBoVGFyZ2V0cyl7dD1bXTtmb3IodmFyIG49ZS5tb3JwaFRhcmdldHNbcl0saT0wLG89bi5sZW5ndGg7aTxvO2krKyl7dmFyIGE9bltpXSxzPW5ldyBqKDMqYS5kYXRhLmxlbmd0aCwzKTtzLm5hbWU9YS5uYW1lO3QucHVzaChzLmNvcHlWZWN0b3Izc0FycmF5KGEuZGF0YSkpfXRoaXMubW9ycGhBdHRyaWJ1dGVzW3JdPXR9MDxlLnNraW5JbmRpY2VzLmxlbmd0aCYmKHI9bmV3IGooNCplLnNraW5JbmRpY2VzLmxlbmd0aCw0KSx0aGlzLnNldEF0dHJpYnV0ZShcInNraW5JbmRleFwiLHIuY29weVZlY3RvcjRzQXJyYXkoZS5za2luSW5kaWNlcykpKTswPGUuc2tpbldlaWdodHMubGVuZ3RoJiYocj1uZXcgaig0KmUuc2tpbldlaWdodHMubGVuZ3RoLDQpLHRoaXMuc2V0QXR0cmlidXRlKFwic2tpbldlaWdodFwiLHIuY29weVZlY3RvcjRzQXJyYXkoZS5za2luV2VpZ2h0cykpKTtudWxsIT09ZS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9ZS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtudWxsIT09ZS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9ZS5ib3VuZGluZ0JveC5jbG9uZSgpKTtyZXR1cm4gdGhpc30sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBuKTt2YXIgZT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24sdD10aGlzLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbjtpZih2b2lkIDAhPT1lKXtpZih0aGlzLmJvdW5kaW5nQm94LnNldEZyb21CdWZmZXJBdHRyaWJ1dGUoZSksdCl7ZT0wO2Zvcih2YXIgcj10Lmxlbmd0aDtlPHI7ZSsrKWFzLnNldEZyb21CdWZmZXJBdHRyaWJ1dGUodFtlXSksdGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZT8odXMuYWRkVmVjdG9ycyh0aGlzLmJvdW5kaW5nQm94Lm1pbixhcy5taW4pLHRoaXMuYm91bmRpbmdCb3guZXhwYW5kQnlQb2ludCh1cyksdXMuYWRkVmVjdG9ycyh0aGlzLmJvdW5kaW5nQm94Lm1heCxhcy5tYXgpLHRoaXMuYm91bmRpbmdCb3guZXhwYW5kQnlQb2ludCh1cykpOih0aGlzLmJvdW5kaW5nQm94LmV4cGFuZEJ5UG9pbnQoYXMubWluKSx0aGlzLmJvdW5kaW5nQm94LmV4cGFuZEJ5UG9pbnQoYXMubWF4KSl9fWVsc2UgdGhpcy5ib3VuZGluZ0JveC5tYWtlRW1wdHkoKTsoaXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueCl8fGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLnkpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi56KSkmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveDogQ29tcHV0ZWQgbWluL21heCBoYXZlIE5hTiB2YWx1ZXMuIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyx0aGlzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBsKTt2YXIgZT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24sdD10aGlzLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbjtpZihlKXt2YXIgcj10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcjthcy5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKGUpO2lmKHQpZm9yKHZhciBuPTAsaT10Lmxlbmd0aDtuPGk7bisrKXt2YXIgbz10W25dO3NzLnNldEZyb21CdWZmZXJBdHRyaWJ1dGUobyk7dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZT8odXMuYWRkVmVjdG9ycyhhcy5taW4sc3MubWluKSxhcy5leHBhbmRCeVBvaW50KHVzKSx1cy5hZGRWZWN0b3JzKGFzLm1heCxzcy5tYXgpLGFzLmV4cGFuZEJ5UG9pbnQodXMpKTooYXMuZXhwYW5kQnlQb2ludChzcy5taW4pLGFzLmV4cGFuZEJ5UG9pbnQoc3MubWF4KSl9YXMuZ2V0Q2VudGVyKHIpO3ZhciBhPTA7bj0wO2ZvcihpPWUuY291bnQ7bjxpO24rKyl1cy5mcm9tQnVmZmVyQXR0cmlidXRlKGUsbiksYT1NYXRoLm1heChhLHIuZGlzdGFuY2VUb1NxdWFyZWQodXMpKTtpZih0KWZvcihuPTAsaT10Lmxlbmd0aDtuPGk7bisrKXtvPXRbbl07Zm9yKHZhciBzPXRoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmUsdT0wLGM9by5jb3VudDt1PGM7dSsrKXVzLmZyb21CdWZmZXJBdHRyaWJ1dGUobyx1KSxzJiYob3MuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHUpLHVzLmFkZChvcykpLGE9TWF0aC5tYXgoYSxyLmRpc3RhbmNlVG9TcXVhcmVkKHVzKSl9dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KGEpO2lzTmFOKHRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzKSYmY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk6IENvbXB1dGVkIHJhZGl1cyBpcyBOYU4uIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyx0aGlzKX19LGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe30sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmluZGV4LHQ9dGhpcy5hdHRyaWJ1dGVzO2lmKHQucG9zaXRpb24pe3ZhciByPXQucG9zaXRpb24uYXJyYXk7aWYodm9pZCAwPT09dC5ub3JtYWwpdGhpcy5zZXRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgRShuZXcgRmxvYXQzMkFycmF5KHIubGVuZ3RoKSwzKSk7ZWxzZSBmb3IodmFyIG49dC5ub3JtYWwuYXJyYXksaT0wLG89bi5sZW5ndGg7aTxvO2krKyluW2ldPTA7bj10Lm5vcm1hbC5hcnJheTt2YXIgYT1uZXcgVGUscz1uZXcgVGUsdT1uZXcgVGUsYz1uZXcgVGUsbD1uZXcgVGU7aWYoZSl7dmFyIGg9ZS5hcnJheTtpPTA7Zm9yKG89ZS5jb3VudDtpPG87aSs9Myl7ZT0zKmhbaSswXTt2YXIgcD0zKmhbaSsxXTt2YXIgZj0zKmhbaSsyXTthLmZyb21BcnJheShyLGUpO3MuZnJvbUFycmF5KHIscCk7dS5mcm9tQXJyYXkocixmKTtjLnN1YlZlY3RvcnModSxzKTtsLnN1YlZlY3RvcnMoYSxzKTtjLmNyb3NzKGwpO25bZV0rPWMueDtuW2UrMV0rPWMueTtuW2UrMl0rPWMuejtuW3BdKz1jLng7bltwKzFdKz1jLnk7bltwKzJdKz1jLno7bltmXSs9Yy54O25bZisxXSs9Yy55O25bZisyXSs9Yy56fX1lbHNlIGZvcihpPTAsbz1yLmxlbmd0aDtpPG87aSs9OSlhLmZyb21BcnJheShyLGkpLHMuZnJvbUFycmF5KHIsaSszKSx1LmZyb21BcnJheShyLGkrNiksYy5zdWJWZWN0b3JzKHUscyksbC5zdWJWZWN0b3JzKGEscyksYy5jcm9zcyhsKSxuW2ldPWMueCxuW2krMV09Yy55LG5baSsyXT1jLnosbltpKzNdPWMueCxuW2krNF09Yy55LG5baSs1XT1jLnosbltpKzZdPWMueCxuW2krN109Yy55LG5baSs4XT1jLno7dGhpcy5ub3JtYWxpemVOb3JtYWxzKCk7dC5ub3JtYWwubmVlZHNVcGRhdGU9ITB9fSxtZXJnZTpmdW5jdGlvbihlLHQpe2lmKGUmJmUuaXNCdWZmZXJHZW9tZXRyeSl7dm9pZCAwPT09dCYmKHQ9MCxjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5tZXJnZSgpOiBPdmVyd3JpdGluZyBvcmlnaW5hbCBnZW9tZXRyeSwgc3RhcnRpbmcgYXQgb2Zmc2V0PTAuIFVzZSBCdWZmZXJHZW9tZXRyeVV0aWxzLm1lcmdlQnVmZmVyR2VvbWV0cmllcygpIGZvciBsb3NzbGVzcyBtZXJnZS5cIikpO3ZhciByPXRoaXMuYXR0cmlidXRlcyxuO2ZvcihuIGluIHIpaWYodm9pZCAwIT09ZS5hdHRyaWJ1dGVzW25dKXt2YXIgaT1yW25dLmFycmF5LG89ZS5hdHRyaWJ1dGVzW25dLGE9by5hcnJheSxzPW8uaXRlbVNpemUqdDtvPU1hdGgubWluKGEubGVuZ3RoLGkubGVuZ3RoLXMpO2Zvcih2YXIgdT0wO3U8bzt1KysscysrKWlbc109YVt1XX1yZXR1cm4gdGhpc31jb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5LlwiLGUpfSxub3JtYWxpemVOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwsdD0wLHI9ZS5jb3VudDt0PHI7dCsrKXVzLng9ZS5nZXRYKHQpLHVzLnk9ZS5nZXRZKHQpLHVzLno9ZS5nZXRaKHQpLHVzLm5vcm1hbGl6ZSgpLGUuc2V0WFlaKHQsdXMueCx1cy55LHVzLnopfSx0b05vbkluZGV4ZWQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9ZS5hcnJheSxuPWUuaXRlbVNpemU7ZT1lLm5vcm1hbGl6ZWQ7Zm9yKHZhciBpPW5ldyByLmNvbnN0cnVjdG9yKHQubGVuZ3RoKm4pLG8sYT0wLHM9MCx1PXQubGVuZ3RoO3M8dTtzKyspe289dFtzXSpuO2Zvcih2YXIgYz0wO2M8bjtjKyspaVthKytdPXJbbysrXX1yZXR1cm4gbmV3IEUoaSxuLGUpfWlmKG51bGw9PT10aGlzLmluZGV4KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS50b05vbkluZGV4ZWQoKTogR2VvbWV0cnkgaXMgYWxyZWFkeSBub24taW5kZXhlZC5cIiksdGhpczt2YXIgdD1uZXcgTixyPXRoaXMuaW5kZXguYXJyYXksbj10aGlzLmF0dHJpYnV0ZXMsaTtmb3IoaSBpbiBuKXt2YXIgbz1uW2ldO289ZShvLHIpO3Quc2V0QXR0cmlidXRlKGksbyl9dmFyIGE9dGhpcy5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGkgaW4gYSl7dmFyIHM9W10sdT1hW2ldO249MDtmb3IodmFyIGM9dS5sZW5ndGg7bjxjO24rKylvPXVbbl0sbz1lKG8scikscy5wdXNoKG8pO3QubW9ycGhBdHRyaWJ1dGVzW2ldPXN9dC5tb3JwaFRhcmdldHNSZWxhdGl2ZT10aGlzLm1vcnBoVGFyZ2V0c1JlbGF0aXZlO3I9dGhpcy5ncm91cHM7bj0wO2ZvcihpPXIubGVuZ3RoO248aTtuKyspbz1yW25dLHQuYWRkR3JvdXAoby5zdGFydCxvLmNvdW50LG8ubWF0ZXJpYWxJbmRleCk7cmV0dXJuIHR9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkJ1ZmZlckdlb21ldHJ5XCIsZ2VuZXJhdG9yOlwiQnVmZmVyR2VvbWV0cnkudG9KU09OXCJ9fTtlLnV1aWQ9dGhpcy51dWlkO2UudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGUubmFtZT10aGlzLm5hbWUpOzA8T2JqZWN0LmtleXModGhpcy51c2VyRGF0YSkubGVuZ3RoJiYoZS51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTtpZih2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe3ZhciB0PXRoaXMucGFyYW1ldGVycztmb3IoYyBpbiB0KXZvaWQgMCE9PXRbY10mJihlW2NdPXRbY10pO3JldHVybiBlfWUuZGF0YT17YXR0cmlidXRlczp7fX07dD10aGlzLmluZGV4O251bGwhPT10JiYoZS5kYXRhLmluZGV4PXt0eXBlOnQuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmFycmF5KX0pO3ZhciByPXRoaXMuYXR0cmlidXRlcztmb3IoYyBpbiByKXt0PXJbY107dmFyIG49dC50b0pTT04oKTtcIlwiIT09dC5uYW1lJiYobi5uYW1lPXQubmFtZSk7ZS5kYXRhLmF0dHJpYnV0ZXNbY109bn1yPXt9O3ZhciBpPSExO2ZvcihjIGluIHRoaXMubW9ycGhBdHRyaWJ1dGVzKXtmb3IodmFyIG89dGhpcy5tb3JwaEF0dHJpYnV0ZXNbY10sYT1bXSxzPTAsdT1vLmxlbmd0aDtzPHU7cysrKXQ9b1tzXSxuPXQudG9KU09OKCksXCJcIiE9PXQubmFtZSYmKG4ubmFtZT10Lm5hbWUpLGEucHVzaChuKTswPGEubGVuZ3RoJiYocltjXT1hLGk9ITApfWkmJihlLmRhdGEubW9ycGhBdHRyaWJ1dGVzPXIsZS5kYXRhLm1vcnBoVGFyZ2V0c1JlbGF0aXZlPXRoaXMubW9ycGhUYXJnZXRzUmVsYXRpdmUpO3ZhciBjPXRoaXMuZ3JvdXBzOzA8Yy5sZW5ndGgmJihlLmRhdGEuZ3JvdXBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpKTtjPXRoaXMuYm91bmRpbmdTcGhlcmU7bnVsbCE9PWMmJihlLmRhdGEuYm91bmRpbmdTcGhlcmU9e2NlbnRlcjpjLmNlbnRlci50b0FycmF5KCkscmFkaXVzOmMucmFkaXVzfSk7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBOKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGUpe3ZhciB0O3RoaXMuaW5kZXg9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaEF0dHJpYnV0ZXM9e307dGhpcy5ncm91cHM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5uYW1lPWUubmFtZTt2YXIgcj1lLmluZGV4O251bGwhPT1yJiZ0aGlzLnNldEluZGV4KHIuY2xvbmUoKSk7cj1lLmF0dHJpYnV0ZXM7Zm9yKGEgaW4gcil0aGlzLnNldEF0dHJpYnV0ZShhLHJbYV0uY2xvbmUoKSk7dmFyIG49ZS5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGEgaW4gbil7dmFyIGk9W10sbz1uW2FdO3I9MDtmb3IodD1vLmxlbmd0aDtyPHQ7cisrKWkucHVzaChvW3JdLmNsb25lKCkpO3RoaXMubW9ycGhBdHRyaWJ1dGVzW2FdPWl9dGhpcy5tb3JwaFRhcmdldHNSZWxhdGl2ZT1lLm1vcnBoVGFyZ2V0c1JlbGF0aXZlO3ZhciBhPWUuZ3JvdXBzO3I9MDtmb3IodD1hLmxlbmd0aDtyPHQ7cisrKW49YVtyXSx0aGlzLmFkZEdyb3VwKG4uc3RhcnQsbi5jb3VudCxuLm1hdGVyaWFsSW5kZXgpO2E9ZS5ib3VuZGluZ0JveDtudWxsIT09YSYmKHRoaXMuYm91bmRpbmdCb3g9YS5jbG9uZSgpKTthPWUuYm91bmRpbmdTcGhlcmU7bnVsbCE9PWEmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWEuY2xvbmUoKSk7dGhpcy5kcmF3UmFuZ2Uuc3RhcnQ9ZS5kcmF3UmFuZ2Uuc3RhcnQ7dGhpcy5kcmF3UmFuZ2UuY291bnQ9ZS5kcmF3UmFuZ2UuY291bnQ7dGhpcy51c2VyRGF0YT1lLnVzZXJEYXRhO3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7dmFyIGNzPW5ldyBFZSxscz1uZXcgcyxocz1uZXcgbCxwcz1uZXcgVGUsZnM9bmV3IFRlLGRzPW5ldyBUZSx2cz1uZXcgVGUsbXM9bmV3IFRlLGdzPW5ldyBUZSxfcz1uZXcgVGUseXM9bmV3IFRlLGJzPW5ldyBUZSx4cz1uZXcgTWUsd3M9bmV3IE1lLFNzPW5ldyBNZSxNcz1uZXcgVGUsQ3M9bmV3IFRlO0kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkksaXNNZXNoOiEwLGNvcHk6ZnVuY3Rpb24oZSl7Zi5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dm9pZCAwIT09ZS5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1lLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5zbGljZSgpKTt2b2lkIDAhPT1lLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSYmKHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PU9iamVjdC5hc3NpZ24oe30sZS5tb3JwaFRhcmdldERpY3Rpb25hcnkpKTtyZXR1cm4gdGhpc30sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZW9tZXRyeTtpZihlLmlzQnVmZmVyR2VvbWV0cnkpe2U9ZS5tb3JwaEF0dHJpYnV0ZXM7dmFyIHQ9T2JqZWN0LmtleXMoZSk7aWYoMDx0Lmxlbmd0aCl7dmFyIHI9ZVt0WzBdXTtpZih2b2lkIDAhPT1yKWZvcih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fSxlPTAsdD1yLmxlbmd0aDtlPHQ7ZSsrKXt2YXIgbj1yW2VdLm5hbWV8fFN0cmluZyhlKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25dPWV9fX1lbHNlIGU9ZS5tb3JwaFRhcmdldHMsdm9pZCAwIT09ZSYmMDxlLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1lc2gudXBkYXRlTW9ycGhUYXJnZXRzKCkgbm8gbG9uZ2VyIHN1cHBvcnRzIFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIil9LHJheWNhc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdlb21ldHJ5LG49dGhpcy5tYXRlcmlhbCxpPXRoaXMubWF0cml4V29ybGQ7aWYodm9pZCAwIT09biYmKG51bGw9PT1yLmJvdW5kaW5nU3BoZXJlJiZyLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLGhzLmNvcHkoci5ib3VuZGluZ1NwaGVyZSksaHMuYXBwbHlNYXRyaXg0KGkpLCExIT09ZS5yYXkuaW50ZXJzZWN0c1NwaGVyZShocykmJihjcy5nZXRJbnZlcnNlKGkpLGxzLmNvcHkoZS5yYXkpLmFwcGx5TWF0cml4NChjcyksbnVsbD09PXIuYm91bmRpbmdCb3h8fCExIT09bHMuaW50ZXJzZWN0c0JveChyLmJvdW5kaW5nQm94KSkpKWlmKHIuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIG89ci5pbmRleDtpPXIuYXR0cmlidXRlcy5wb3NpdGlvbjt2YXIgYT1yLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbixzPXIubW9ycGhUYXJnZXRzUmVsYXRpdmUsdT1yLmF0dHJpYnV0ZXMudXYsYz1yLmF0dHJpYnV0ZXMudXYyLGw9ci5ncm91cHMsaD1yLmRyYXdSYW5nZSxwLGY7aWYobnVsbCE9PW8paWYoQXJyYXkuaXNBcnJheShuKSl7dmFyIGQ9MDtmb3IocD1sLmxlbmd0aDtkPHA7ZCsrKXt2YXIgdj1sW2RdO3ZhciBtPW5bdi5tYXRlcmlhbEluZGV4XTt2YXIgZz1NYXRoLm1heCh2LnN0YXJ0LGguc3RhcnQpO2ZvcihmPXI9TWF0aC5taW4odi5zdGFydCt2LmNvdW50LGguc3RhcnQraC5jb3VudCk7ZzxmO2crPTMpe3I9by5nZXRYKGcpO3ZhciBfPW8uZ2V0WChnKzEpO3ZhciB5PW8uZ2V0WChnKzIpO2lmKHI9Qih0aGlzLG0sZSxscyxpLGEscyx1LGMscixfLHkpKXIuZmFjZUluZGV4PU1hdGguZmxvb3IoZy8zKSxyLmZhY2UubWF0ZXJpYWxJbmRleD12Lm1hdGVyaWFsSW5kZXgsdC5wdXNoKHIpfX19ZWxzZSBmb3IoZz1NYXRoLm1heCgwLGguc3RhcnQpLHI9TWF0aC5taW4oby5jb3VudCxoLnN0YXJ0K2guY291bnQpLGQ9ZyxwPXI7ZDxwO2QrPTMpe2lmKHI9by5nZXRYKGQpLF89by5nZXRYKGQrMSkseT1vLmdldFgoZCsyKSxyPUIodGhpcyxuLGUsbHMsaSxhLHMsdSxjLHIsXyx5KSlyLmZhY2VJbmRleD1NYXRoLmZsb29yKGQvMyksdC5wdXNoKHIpfWVsc2UgaWYodm9pZCAwIT09aSlpZihBcnJheS5pc0FycmF5KG4pKWZvcihkPTAscD1sLmxlbmd0aDtkPHA7ZCsrKWZvcih2PWxbZF0sbT1uW3YubWF0ZXJpYWxJbmRleF0sZz1NYXRoLm1heCh2LnN0YXJ0LGguc3RhcnQpLGY9cj1NYXRoLm1pbih2LnN0YXJ0K3YuY291bnQsaC5zdGFydCtoLmNvdW50KTtnPGY7Zys9Myl7aWYocj1nLF89ZysxLHk9ZysyLHI9Qih0aGlzLG0sZSxscyxpLGEscyx1LGMscixfLHkpKXIuZmFjZUluZGV4PU1hdGguZmxvb3IoZy8zKSxyLmZhY2UubWF0ZXJpYWxJbmRleD12Lm1hdGVyaWFsSW5kZXgsdC5wdXNoKHIpfWVsc2UgZm9yKGc9TWF0aC5tYXgoMCxoLnN0YXJ0KSxyPU1hdGgubWluKGkuY291bnQsaC5zdGFydCtoLmNvdW50KSxkPWcscD1yO2Q8cDtkKz0zKWlmKHI9ZCxfPWQrMSx5PWQrMixyPUIodGhpcyxuLGUsbHMsaSxhLHMsdSxjLHIsXyx5KSlyLmZhY2VJbmRleD1NYXRoLmZsb29yKGQvMyksdC5wdXNoKHIpfWVsc2UgaWYoci5pc0dlb21ldHJ5KWZvcihpPUFycmF5LmlzQXJyYXkobiksYT1yLnZlcnRpY2VzLHM9ci5mYWNlcyxyPXIuZmFjZVZlcnRleFV2c1swXSwwPHIubGVuZ3RoJiYobz1yKSxoPTAsZD1zLmxlbmd0aDtoPGQ7aCsrKWlmKHA9c1toXSxyPWk/bltwLm1hdGVyaWFsSW5kZXhdOm4sdm9pZCAwIT09ciYmKHU9YVtwLmFdLGM9YVtwLmJdLGw9YVtwLmNdLHI9RCh0aGlzLHIsZSxscyx1LGMsbCxNcykpKW8mJm9baF0mJih2PW9baF0seHMuY29weSh2WzBdKSx3cy5jb3B5KHZbMV0pLFNzLmNvcHkodlsyXSksci51dj1iLmdldFVWKE1zLHUsYyxsLHhzLHdzLFNzLG5ldyBNZSkpLHIuZmFjZT1wLHIuZmFjZUluZGV4PWgsdC5wdXNoKHIpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpLmNvcHkodGhpcyl9fSk7dmFyIFRzPTAsRXM9bmV3IEVlLE9zPW5ldyBmLFBzPW5ldyBUZTtGLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpGLGlzR2VvbWV0cnk6ITAsYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0obmV3IG0pLmdldE5vcm1hbE1hdHJpeChlKSxyPTAsbj10aGlzLnZlcnRpY2VzLmxlbmd0aDtyPG47cisrKXRoaXMudmVydGljZXNbcl0uYXBwbHlNYXRyaXg0KGUpO3I9MDtmb3Iobj10aGlzLmZhY2VzLmxlbmd0aDtyPG47cisrKXtlPXRoaXMuZmFjZXNbcl07ZS5ub3JtYWwuYXBwbHlNYXRyaXgzKHQpLm5vcm1hbGl6ZSgpO2Zvcih2YXIgaT0wLG89ZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtpPG87aSsrKWUudmVydGV4Tm9ybWFsc1tpXS5hcHBseU1hdHJpeDModCkubm9ybWFsaXplKCl9bnVsbCE9PXRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7bnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDtyZXR1cm4gdGhpc30scm90YXRlWDpmdW5jdGlvbihlKXtFcy5tYWtlUm90YXRpb25YKGUpO3RoaXMuYXBwbHlNYXRyaXg0KEVzKTtyZXR1cm4gdGhpc30scm90YXRlWTpmdW5jdGlvbihlKXtFcy5tYWtlUm90YXRpb25ZKGUpO3RoaXMuYXBwbHlNYXRyaXg0KEVzKTtyZXR1cm4gdGhpc30scm90YXRlWjpmdW5jdGlvbihlKXtFcy5tYWtlUm90YXRpb25aKGUpO3RoaXMuYXBwbHlNYXRyaXg0KEVzKTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCxyKXtFcy5tYWtlVHJhbnNsYXRpb24oZSx0LHIpO3RoaXMuYXBwbHlNYXRyaXg0KEVzKTtyZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24oZSx0LHIpe0VzLm1ha2VTY2FsZShlLHQscik7dGhpcy5hcHBseU1hdHJpeDQoRXMpO3JldHVybiB0aGlzfSxsb29rQXQ6ZnVuY3Rpb24oZSl7T3MubG9va0F0KGUpO09zLnVwZGF0ZU1hdHJpeCgpO3RoaXMuYXBwbHlNYXRyaXg0KE9zLm1hdHJpeCk7cmV0dXJuIHRoaXN9LGZyb21CdWZmZXJHZW9tZXRyeTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxyLG4pe3ZhciBpPXZvaWQgMD09PXU/W106W2EuY29sb3JzW2VdLmNsb25lKCksYS5jb2xvcnNbdF0uY2xvbmUoKSxhLmNvbG9yc1tyXS5jbG9uZSgpXSxvPXZvaWQgMD09PXM/W106WyhuZXcgVGUpLmZyb21BcnJheShzLDMqZSksKG5ldyBUZSkuZnJvbUFycmF5KHMsMyp0KSwobmV3IFRlKS5mcm9tQXJyYXkocywzKnIpXTtuPW5ldyBfKGUsdCxyLG8saSxuKTthLmZhY2VzLnB1c2gobik7dm9pZCAwIT09YyYmYS5mYWNlVmVydGV4VXZzWzBdLnB1c2goWyhuZXcgTWUpLmZyb21BcnJheShjLDIqZSksKG5ldyBNZSkuZnJvbUFycmF5KGMsMip0KSwobmV3IE1lKS5mcm9tQXJyYXkoYywyKnIpXSk7dm9pZCAwIT09bCYmYS5mYWNlVmVydGV4VXZzWzFdLnB1c2goWyhuZXcgTWUpLmZyb21BcnJheShsLDIqZSksKG5ldyBNZSkuZnJvbUFycmF5KGwsMip0KSwobmV3IE1lKS5mcm9tQXJyYXkobCwyKnIpXSl9dmFyIGE9dGhpcyxyPW51bGwhPT1lLmluZGV4P2UuaW5kZXguYXJyYXk6dm9pZCAwLG49ZS5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PW4ucG9zaXRpb24pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5mcm9tQnVmZmVyR2VvbWV0cnkoKTogUG9zaXRpb24gYXR0cmlidXRlIHJlcXVpcmVkIGZvciBjb252ZXJzaW9uLlwiKSx0aGlzO3ZhciBpPW4ucG9zaXRpb24uYXJyYXkscz12b2lkIDAhPT1uLm5vcm1hbD9uLm5vcm1hbC5hcnJheTp2b2lkIDAsdT12b2lkIDAhPT1uLmNvbG9yP24uY29sb3IuYXJyYXk6dm9pZCAwLGM9dm9pZCAwIT09bi51dj9uLnV2LmFycmF5OnZvaWQgMCxsPXZvaWQgMCE9PW4udXYyP24udXYyLmFycmF5OnZvaWQgMDt2b2lkIDAhPT1sJiYodGhpcy5mYWNlVmVydGV4VXZzWzFdPVtdKTtmb3Iobj0wO248aS5sZW5ndGg7bis9MylhLnZlcnRpY2VzLnB1c2goKG5ldyBUZSkuZnJvbUFycmF5KGksbikpLHZvaWQgMCE9PXUmJmEuY29sb3JzLnB1c2goKG5ldyB2KS5mcm9tQXJyYXkodSxuKSk7dmFyIG89ZS5ncm91cHM7aWYoMDxvLmxlbmd0aClmb3Iobj0wO248by5sZW5ndGg7bisrKXtpPW9bbl07dmFyIGg9aS5zdGFydCxwPWg7Zm9yKGgrPWkuY291bnQ7cDxoO3ArPTMpdm9pZCAwIT09cj90KHJbcF0scltwKzFdLHJbcCsyXSxpLm1hdGVyaWFsSW5kZXgpOnQocCxwKzEscCsyLGkubWF0ZXJpYWxJbmRleCl9ZWxzZSBpZih2b2lkIDAhPT1yKWZvcihuPTA7bjxyLmxlbmd0aDtuKz0zKXQocltuXSxyW24rMV0scltuKzJdKTtlbHNlIGZvcihuPTA7bjxpLmxlbmd0aC8zO24rPTMpdChuLG4rMSxuKzIpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7bnVsbCE9PWUuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWUuYm91bmRpbmdCb3guY2xvbmUoKSk7bnVsbCE9PWUuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWUuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7cmV0dXJuIHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoUHMpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKFBzLngsUHMueSxQcy56KTtyZXR1cm4gdGhpc30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt2YXIgZT10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcix0PXRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzO3Q9MD09PXQ/MToxL3Q7dmFyIHI9bmV3IEVlO3Iuc2V0KHQsMCwwLC10KmUueCwwLHQsMCwtdCplLnksMCwwLHQsLXQqZS56LDAsMCwwLDEpO3RoaXMuYXBwbHlNYXRyaXg0KHIpO3JldHVybiB0aGlzfSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IFRlLHQ9bmV3IFRlLHI9MCxuPXRoaXMuZmFjZXMubGVuZ3RoO3I8bjtyKyspe3ZhciBpPXRoaXMuZmFjZXNbcl0sbz10aGlzLnZlcnRpY2VzW2kuYV0sYT10aGlzLnZlcnRpY2VzW2kuYl07ZS5zdWJWZWN0b3JzKHRoaXMudmVydGljZXNbaS5jXSxhKTt0LnN1YlZlY3RvcnMobyxhKTtlLmNyb3NzKHQpO2Uubm9ybWFsaXplKCk7aS5ub3JtYWwuY29weShlKX19LGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPSEwKTt2YXIgdDt2YXIgcj1BcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCk7dmFyIG49MDtmb3IodD10aGlzLnZlcnRpY2VzLmxlbmd0aDtuPHQ7bisrKXJbbl09bmV3IFRlO2lmKGUpe3ZhciBpPW5ldyBUZSxvPW5ldyBUZTtlPTA7Zm9yKG49dGhpcy5mYWNlcy5sZW5ndGg7ZTxuO2UrKyl7dD10aGlzLmZhY2VzW2VdO3ZhciBhPXRoaXMudmVydGljZXNbdC5hXTt2YXIgcz10aGlzLnZlcnRpY2VzW3QuYl07dmFyIHU9dGhpcy52ZXJ0aWNlc1t0LmNdO2kuc3ViVmVjdG9ycyh1LHMpO28uc3ViVmVjdG9ycyhhLHMpO2kuY3Jvc3Mobyk7clt0LmFdLmFkZChpKTtyW3QuYl0uYWRkKGkpO3JbdC5jXS5hZGQoaSl9fWVsc2UgZm9yKHRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCksZT0wLG49dGhpcy5mYWNlcy5sZW5ndGg7ZTxuO2UrKyl0PXRoaXMuZmFjZXNbZV0sclt0LmFdLmFkZCh0Lm5vcm1hbCksclt0LmJdLmFkZCh0Lm5vcm1hbCksclt0LmNdLmFkZCh0Lm5vcm1hbCk7bj0wO2Zvcih0PXRoaXMudmVydGljZXMubGVuZ3RoO248dDtuKyspcltuXS5ub3JtYWxpemUoKTtlPTA7Zm9yKG49dGhpcy5mYWNlcy5sZW5ndGg7ZTxuO2UrKyl0PXRoaXMuZmFjZXNbZV0sYT10LnZlcnRleE5vcm1hbHMsMz09PWEubGVuZ3RoPyhhWzBdLmNvcHkoclt0LmFdKSxhWzFdLmNvcHkoclt0LmJdKSxhWzJdLmNvcHkoclt0LmNdKSk6KGFbMF09clt0LmFdLmNsb25lKCksYVsxXT1yW3QuYl0uY2xvbmUoKSxhWzJdPXJbdC5jXS5jbG9uZSgpKTswPHRoaXMuZmFjZXMubGVuZ3RoJiYodGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCl9LGNvbXB1dGVGbGF0VmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe3ZhciBlO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dmFyIHQ9MDtmb3IoZT10aGlzLmZhY2VzLmxlbmd0aDt0PGU7dCsrKXt2YXIgcj10aGlzLmZhY2VzW3RdO3ZhciBuPXIudmVydGV4Tm9ybWFsczszPT09bi5sZW5ndGg/KG5bMF0uY29weShyLm5vcm1hbCksblsxXS5jb3B5KHIubm9ybWFsKSxuWzJdLmNvcHkoci5ub3JtYWwpKTooblswXT1yLm5vcm1hbC5jbG9uZSgpLG5bMV09ci5ub3JtYWwuY2xvbmUoKSxuWzJdPXIubm9ybWFsLmNsb25lKCkpfTA8dGhpcy5mYWNlcy5sZW5ndGgmJih0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwKX0sY29tcHV0ZU1vcnBoTm9ybWFsczpmdW5jdGlvbigpe3ZhciBlLHQ7dmFyIHI9MDtmb3IodD10aGlzLmZhY2VzLmxlbmd0aDtyPHQ7cisrKXt2YXIgbj10aGlzLmZhY2VzW3JdO24uX19vcmlnaW5hbEZhY2VOb3JtYWw/bi5fX29yaWdpbmFsRmFjZU5vcm1hbC5jb3B5KG4ubm9ybWFsKTpuLl9fb3JpZ2luYWxGYWNlTm9ybWFsPW4ubm9ybWFsLmNsb25lKCk7bi5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc3x8KG4uX19vcmlnaW5hbFZlcnRleE5vcm1hbHM9W10pO3ZhciBpPTA7Zm9yKGU9bi52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtpPGU7aSsrKW4uX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbaV0/bi5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tpXS5jb3B5KG4udmVydGV4Tm9ybWFsc1tpXSk6bi5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1tpXT1uLnZlcnRleE5vcm1hbHNbaV0uY2xvbmUoKX12YXIgbz1uZXcgRjtvLmZhY2VzPXRoaXMuZmFjZXM7aT0wO2ZvcihlPXRoaXMubW9ycGhUYXJnZXRzLmxlbmd0aDtpPGU7aSsrKXtpZighdGhpcy5tb3JwaE5vcm1hbHNbaV0pe3RoaXMubW9ycGhOb3JtYWxzW2ldPXt9O3RoaXMubW9ycGhOb3JtYWxzW2ldLmZhY2VOb3JtYWxzPVtdO3RoaXMubW9ycGhOb3JtYWxzW2ldLnZlcnRleE5vcm1hbHM9W107bj10aGlzLm1vcnBoTm9ybWFsc1tpXS5mYWNlTm9ybWFsczt2YXIgYT10aGlzLm1vcnBoTm9ybWFsc1tpXS52ZXJ0ZXhOb3JtYWxzO3I9MDtmb3IodD10aGlzLmZhY2VzLmxlbmd0aDtyPHQ7cisrKXt2YXIgcz1uZXcgVGU7dmFyIHU9e2E6bmV3IFRlLGI6bmV3IFRlLGM6bmV3IFRlfTtuLnB1c2gocyk7YS5wdXNoKHUpfX1hPXRoaXMubW9ycGhOb3JtYWxzW2ldO28udmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbaV0udmVydGljZXM7by5jb21wdXRlRmFjZU5vcm1hbHMoKTtvLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7cj0wO2Zvcih0PXRoaXMuZmFjZXMubGVuZ3RoO3I8dDtyKyspbj10aGlzLmZhY2VzW3JdLHM9YS5mYWNlTm9ybWFsc1tyXSx1PWEudmVydGV4Tm9ybWFsc1tyXSxzLmNvcHkobi5ub3JtYWwpLHUuYS5jb3B5KG4udmVydGV4Tm9ybWFsc1swXSksdS5iLmNvcHkobi52ZXJ0ZXhOb3JtYWxzWzFdKSx1LmMuY29weShuLnZlcnRleE5vcm1hbHNbMl0pfXI9MDtmb3IodD10aGlzLmZhY2VzLmxlbmd0aDtyPHQ7cisrKW49dGhpcy5mYWNlc1tyXSxuLm5vcm1hbD1uLl9fb3JpZ2luYWxGYWNlTm9ybWFsLG4udmVydGV4Tm9ybWFscz1uLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IG4pO3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBsKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlOmZ1bmN0aW9uKGUsdCxyKXtpZihlJiZlLmlzR2VvbWV0cnkpe3ZhciBuLGk9dGhpcy52ZXJ0aWNlcy5sZW5ndGgsbz10aGlzLnZlcnRpY2VzLGE9ZS52ZXJ0aWNlcyxzPXRoaXMuZmFjZXMsdT1lLmZhY2VzLGM9dGhpcy5jb2xvcnMsbD1lLmNvbG9yczt2b2lkIDA9PT1yJiYocj0wKTt2b2lkIDAhPT10JiYobj0obmV3IG0pLmdldE5vcm1hbE1hdHJpeCh0KSk7Zm9yKHZhciBoPTAscD1hLmxlbmd0aDtoPHA7aCsrKXt2YXIgZj1hW2hdLmNsb25lKCk7dm9pZCAwIT09dCYmZi5hcHBseU1hdHJpeDQodCk7by5wdXNoKGYpfWg9MDtmb3IocD1sLmxlbmd0aDtoPHA7aCsrKWMucHVzaChsW2hdLmNsb25lKCkpO2g9MDtmb3IocD11Lmxlbmd0aDtoPHA7aCsrKXthPXVbaF07dmFyIGQ9YS52ZXJ0ZXhOb3JtYWxzO2w9YS52ZXJ0ZXhDb2xvcnM7Yz1uZXcgXyhhLmEraSxhLmIraSxhLmMraSk7Yy5ub3JtYWwuY29weShhLm5vcm1hbCk7dm9pZCAwIT09biYmYy5ub3JtYWwuYXBwbHlNYXRyaXgzKG4pLm5vcm1hbGl6ZSgpO3Q9MDtmb3Iobz1kLmxlbmd0aDt0PG87dCsrKWY9ZFt0XS5jbG9uZSgpLHZvaWQgMCE9PW4mJmYuYXBwbHlNYXRyaXgzKG4pLm5vcm1hbGl6ZSgpLGMudmVydGV4Tm9ybWFscy5wdXNoKGYpO2MuY29sb3IuY29weShhLmNvbG9yKTt0PTA7Zm9yKG89bC5sZW5ndGg7dDxvO3QrKylmPWxbdF0sYy52ZXJ0ZXhDb2xvcnMucHVzaChmLmNsb25lKCkpO2MubWF0ZXJpYWxJbmRleD1hLm1hdGVyaWFsSW5kZXgrcjtzLnB1c2goYyl9aD0wO2ZvcihwPWUuZmFjZVZlcnRleFV2cy5sZW5ndGg7aDxwO2grKylmb3Iocj1lLmZhY2VWZXJ0ZXhVdnNbaF0sdm9pZCAwPT09dGhpcy5mYWNlVmVydGV4VXZzW2hdJiYodGhpcy5mYWNlVmVydGV4VXZzW2hdPVtdKSx0PTAsbz1yLmxlbmd0aDt0PG87dCsrKXtuPXJbdF07aT1bXTtzPTA7Zm9yKHU9bi5sZW5ndGg7czx1O3MrKylpLnB1c2gobltzXS5jbG9uZSgpKTt0aGlzLmZhY2VWZXJ0ZXhVdnNbaF0ucHVzaChpKX19ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkdlb21ldHJ5LlwiLGUpfSxtZXJnZU1lc2g6ZnVuY3Rpb24oZSl7ZSYmZS5pc01lc2g/KGUubWF0cml4QXV0b1VwZGF0ZSYmZS51cGRhdGVNYXRyaXgoKSx0aGlzLm1lcmdlKGUuZ2VvbWV0cnksZS5tYXRyaXgpKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkubWVyZ2VNZXNoKCk6IG1lc2ggbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk1lc2guXCIsZSl9LG1lcmdlVmVydGljZXM6ZnVuY3Rpb24oKXt2YXIgZT17fSx0PVtdLHI9W10sbj1NYXRoLnBvdygxMCw0KSxpO3ZhciBvPTA7Zm9yKGk9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7bzxpO28rKyl7dmFyIGE9dGhpcy52ZXJ0aWNlc1tvXTthPU1hdGgucm91bmQoYS54Km4pK1wiX1wiK01hdGgucm91bmQoYS55Km4pK1wiX1wiK01hdGgucm91bmQoYS56Km4pO3ZvaWQgMD09PWVbYV0/KGVbYV09byx0LnB1c2godGhpcy52ZXJ0aWNlc1tvXSkscltvXT10Lmxlbmd0aC0xKTpyW29dPXJbZVthXV19ZT1bXTtvPTA7Zm9yKGk9dGhpcy5mYWNlcy5sZW5ndGg7bzxpO28rKylmb3Iobj10aGlzLmZhY2VzW29dLG4uYT1yW24uYV0sbi5iPXJbbi5iXSxuLmM9cltuLmNdLG49W24uYSxuLmIsbi5jXSxhPTA7Mz5hO2ErKylpZihuW2FdPT09blsoYSsxKSUzXSl7ZS5wdXNoKG8pO2JyZWFrfWZvcihvPWUubGVuZ3RoLTE7MDw9bztvLS0pZm9yKG49ZVtvXSx0aGlzLmZhY2VzLnNwbGljZShuLDEpLHI9MCxpPXRoaXMuZmFjZVZlcnRleFV2cy5sZW5ndGg7cjxpO3IrKyl0aGlzLmZhY2VWZXJ0ZXhVdnNbcl0uc3BsaWNlKG4sMSk7bz10aGlzLnZlcnRpY2VzLmxlbmd0aC10Lmxlbmd0aDt0aGlzLnZlcnRpY2VzPXQ7cmV0dXJuIG99LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oZSl7dGhpcy52ZXJ0aWNlcz1bXTtmb3IodmFyIHQ9MCxyPWUubGVuZ3RoO3Q8cjt0Kyspe3ZhciBuPWVbdF07dGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUZShuLngsbi55LG4uenx8MCkpfXJldHVybiB0aGlzfSxzb3J0RmFjZXNCeU1hdGVyaWFsSW5kZXg6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5mYWNlcyx0PWUubGVuZ3RoLHI9MDtyPHQ7cisrKWVbcl0uX2lkPXI7ZS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubWF0ZXJpYWxJbmRleC10Lm1hdGVyaWFsSW5kZXh9KTt2YXIgbj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0saT10aGlzLmZhY2VWZXJ0ZXhVdnNbMV0sbyxhO24mJm4ubGVuZ3RoPT09dCYmKG89W10pO2kmJmkubGVuZ3RoPT09dCYmKGE9W10pO2ZvcihyPTA7cjx0O3IrKyl7dmFyIHM9ZVtyXS5faWQ7byYmby5wdXNoKG5bc10pO2EmJmEucHVzaChpW3NdKX1vJiYodGhpcy5mYWNlVmVydGV4VXZzWzBdPW8pO2EmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09YSl9LHRvSlNPTjpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3JldHVybiByP2V8MTw8dDplJn4oMTw8dCl9ZnVuY3Rpb24gdChlKXt2YXIgdD1lLngudG9TdHJpbmcoKStlLnkudG9TdHJpbmcoKStlLnoudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1jW3RdKXJldHVybiBjW3RdO2NbdF09dS5sZW5ndGgvMzt1LnB1c2goZS54LGUueSxlLnopO3JldHVybiBjW3RdfWZ1bmN0aW9uIHIoZSl7dmFyIHQ9ZS5yLnRvU3RyaW5nKCkrZS5nLnRvU3RyaW5nKCkrZS5iLnRvU3RyaW5nKCk7aWYodm9pZCAwIT09aFt0XSlyZXR1cm4gaFt0XTtoW3RdPWwubGVuZ3RoO2wucHVzaChlLmdldEhleCgpKTtyZXR1cm4gaFt0XX1mdW5jdGlvbiBuKGUpe3ZhciB0PWUueC50b1N0cmluZygpK2UueS50b1N0cmluZygpO2lmKHZvaWQgMCE9PWZbdF0pcmV0dXJuIGZbdF07Zlt0XT1wLmxlbmd0aC8yO3AucHVzaChlLngsZS55KTtyZXR1cm4gZlt0XX12YXIgaT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJHZW9tZXRyeVwiLGdlbmVyYXRvcjpcIkdlb21ldHJ5LnRvSlNPTlwifX07aS51dWlkPXRoaXMudXVpZDtpLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihpLm5hbWU9dGhpcy5uYW1lKTtpZih2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe3ZhciBvPXRoaXMucGFyYW1ldGVycyxhO2ZvcihhIGluIG8pdm9pZCAwIT09b1thXSYmKGlbYV09b1thXSk7cmV0dXJuIGl9bz1bXTtmb3IoYT0wO2E8dGhpcy52ZXJ0aWNlcy5sZW5ndGg7YSsrKXt2YXIgcz10aGlzLnZlcnRpY2VzW2FdO28ucHVzaChzLngscy55LHMueil9cz1bXTt2YXIgdT1bXSxjPXt9LGw9W10saD17fSxwPVtdLGY9e307Zm9yKGE9MDthPHRoaXMuZmFjZXMubGVuZ3RoO2ErKyl7dmFyIGQ9dGhpcy5mYWNlc1thXSx2PXZvaWQgMCE9PXRoaXMuZmFjZVZlcnRleFV2c1swXVthXSxtPTA8ZC5ub3JtYWwubGVuZ3RoKCksZz0wPGQudmVydGV4Tm9ybWFscy5sZW5ndGgsXz0xIT09ZC5jb2xvci5yfHwxIT09ZC5jb2xvci5nfHwxIT09ZC5jb2xvci5iLHk9MDxkLnZlcnRleENvbG9ycy5sZW5ndGgsYj0wO2I9ZShiLDAsMCk7Yj1lKGIsMSwhMCk7Yj1lKGIsMiwhMSk7Yj1lKGIsMyx2KTtiPWUoYiw0LG0pO2I9ZShiLDUsZyk7Yj1lKGIsNixfKTtiPWUoYiw3LHkpO3MucHVzaChiKTtzLnB1c2goZC5hLGQuYixkLmMpO3MucHVzaChkLm1hdGVyaWFsSW5kZXgpO3YmJih2PXRoaXMuZmFjZVZlcnRleFV2c1swXVthXSxzLnB1c2gobih2WzBdKSxuKHZbMV0pLG4odlsyXSkpKTttJiZzLnB1c2godChkLm5vcm1hbCkpO2cmJihtPWQudmVydGV4Tm9ybWFscyxzLnB1c2godChtWzBdKSx0KG1bMV0pLHQobVsyXSkpKTtfJiZzLnB1c2gocihkLmNvbG9yKSk7eSYmKGQ9ZC52ZXJ0ZXhDb2xvcnMscy5wdXNoKHIoZFswXSkscihkWzFdKSxyKGRbMl0pKSl9aS5kYXRhPXt9O2kuZGF0YS52ZXJ0aWNlcz1vO2kuZGF0YS5ub3JtYWxzPXU7MDxsLmxlbmd0aCYmKGkuZGF0YS5jb2xvcnM9bCk7MDxwLmxlbmd0aCYmKGkuZGF0YS51dnM9W3BdKTtpLmRhdGEuZmFjZXM9cztyZXR1cm4gaX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IEYpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dmFyIHQscixuO3RoaXMudmVydGljZXM9W107dGhpcy5jb2xvcnM9W107dGhpcy5mYWNlcz1bXTt0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXTt0aGlzLm1vcnBoVGFyZ2V0cz1bXTt0aGlzLm1vcnBoTm9ybWFscz1bXTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5saW5lRGlzdGFuY2VzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMubmFtZT1lLm5hbWU7dmFyIGk9ZS52ZXJ0aWNlczt2YXIgbz0wO2Zvcih0PWkubGVuZ3RoO288dDtvKyspdGhpcy52ZXJ0aWNlcy5wdXNoKGlbb10uY2xvbmUoKSk7aT1lLmNvbG9ycztvPTA7Zm9yKHQ9aS5sZW5ndGg7bzx0O28rKyl0aGlzLmNvbG9ycy5wdXNoKGlbb10uY2xvbmUoKSk7aT1lLmZhY2VzO289MDtmb3IodD1pLmxlbmd0aDtvPHQ7bysrKXRoaXMuZmFjZXMucHVzaChpW29dLmNsb25lKCkpO289MDtmb3IodD1lLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO288dDtvKyspe3ZhciBhPWUuZmFjZVZlcnRleFV2c1tvXTt2b2lkIDA9PT10aGlzLmZhY2VWZXJ0ZXhVdnNbb10mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbb109W10pO2k9MDtmb3Iocj1hLmxlbmd0aDtpPHI7aSsrKXt2YXIgcz1hW2ldLHU9W107dmFyIGM9MDtmb3Iobj1zLmxlbmd0aDtjPG47YysrKXUucHVzaChzW2NdLmNsb25lKCkpO3RoaXMuZmFjZVZlcnRleFV2c1tvXS5wdXNoKHUpfX1jPWUubW9ycGhUYXJnZXRzO289MDtmb3IodD1jLmxlbmd0aDtvPHQ7bysrKXtuPXt9O24ubmFtZT1jW29dLm5hbWU7aWYodm9pZCAwIT09Y1tvXS52ZXJ0aWNlcylmb3Iobi52ZXJ0aWNlcz1bXSxpPTAscj1jW29dLnZlcnRpY2VzLmxlbmd0aDtpPHI7aSsrKW4udmVydGljZXMucHVzaChjW29dLnZlcnRpY2VzW2ldLmNsb25lKCkpO2lmKHZvaWQgMCE9PWNbb10ubm9ybWFscylmb3Iobi5ub3JtYWxzPVtdLGk9MCxyPWNbb10ubm9ybWFscy5sZW5ndGg7aTxyO2krKyluLm5vcm1hbHMucHVzaChjW29dLm5vcm1hbHNbaV0uY2xvbmUoKSk7dGhpcy5tb3JwaFRhcmdldHMucHVzaChuKX1jPWUubW9ycGhOb3JtYWxzO289MDtmb3IodD1jLmxlbmd0aDtvPHQ7bysrKXtuPXt9O2lmKHZvaWQgMCE9PWNbb10udmVydGV4Tm9ybWFscylmb3Iobi52ZXJ0ZXhOb3JtYWxzPVtdLGk9MCxyPWNbb10udmVydGV4Tm9ybWFscy5sZW5ndGg7aTxyO2krKylhPWNbb10udmVydGV4Tm9ybWFsc1tpXSxzPXt9LHMuYT1hLmEuY2xvbmUoKSxzLmI9YS5iLmNsb25lKCkscy5jPWEuYy5jbG9uZSgpLG4udmVydGV4Tm9ybWFscy5wdXNoKHMpO2lmKHZvaWQgMCE9PWNbb10uZmFjZU5vcm1hbHMpZm9yKG4uZmFjZU5vcm1hbHM9W10saT0wLHI9Y1tvXS5mYWNlTm9ybWFscy5sZW5ndGg7aTxyO2krKyluLmZhY2VOb3JtYWxzLnB1c2goY1tvXS5mYWNlTm9ybWFsc1tpXS5jbG9uZSgpKTt0aGlzLm1vcnBoTm9ybWFscy5wdXNoKG4pfWk9ZS5za2luV2VpZ2h0cztvPTA7Zm9yKHQ9aS5sZW5ndGg7bzx0O28rKyl0aGlzLnNraW5XZWlnaHRzLnB1c2goaVtvXS5jbG9uZSgpKTtpPWUuc2tpbkluZGljZXM7bz0wO2Zvcih0PWkubGVuZ3RoO288dDtvKyspdGhpcy5za2luSW5kaWNlcy5wdXNoKGlbb10uY2xvbmUoKSk7aT1lLmxpbmVEaXN0YW5jZXM7bz0wO2Zvcih0PWkubGVuZ3RoO288dDtvKyspdGhpcy5saW5lRGlzdGFuY2VzLnB1c2goaVtvXSk7bz1lLmJvdW5kaW5nQm94O251bGwhPT1vJiYodGhpcy5ib3VuZGluZ0JveD1vLmNsb25lKCkpO289ZS5ib3VuZGluZ1NwaGVyZTtudWxsIT09byYmKHRoaXMuYm91bmRpbmdTcGhlcmU9by5jbG9uZSgpKTt0aGlzLmVsZW1lbnRzTmVlZFVwZGF0ZT1lLmVsZW1lbnRzTmVlZFVwZGF0ZTt0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT1lLnZlcnRpY2VzTmVlZFVwZGF0ZTt0aGlzLnV2c05lZWRVcGRhdGU9ZS51dnNOZWVkVXBkYXRlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9ZS5ub3JtYWxzTmVlZFVwZGF0ZTt0aGlzLmNvbG9yc05lZWRVcGRhdGU9ZS5jb2xvcnNOZWVkVXBkYXRlO3RoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ZS5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9ZS5ncm91cHNOZWVkVXBkYXRlO3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7dmFyIEFzPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGUoZSx0LHIsbixpLG8pe2EuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJCb3hHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6ZSxoZWlnaHQ6dCxkZXB0aDpyLHdpZHRoU2VnbWVudHM6bixoZWlnaHRTZWdtZW50czppLGRlcHRoU2VnbWVudHM6b307dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGpzKGUsdCxyLG4saSxvKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9YSYmKGUuX19wcm90b19fPWEpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYSYmYS5wcm90b3R5cGUpO3JldHVybiBlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lfShGKSxqcz1mdW5jdGlvbihzKXtmdW5jdGlvbiBlKGUsdCxyLG4saSxvKXtmdW5jdGlvbiBhKGUsdCxyLG4saSxvLGEscyx1LGMsbCl7dmFyIGg9by91LHA9YS9jLGY9by8yLGQ9YS8yLHY9cy8yO2E9dSsxO2Zvcih2YXIgbT1jKzEsZz1vPTAsXz1uZXcgVGUseT0wO3k8bTt5KyspZm9yKHZhciBiPXkqcC1kLHg9MDt4PGE7eCsrKV9bZV09KHgqaC1mKSpuLF9bdF09YippLF9bcl09dixNLnB1c2goXy54LF8ueSxfLnopLF9bZV09MCxfW3RdPTAsX1tyXT0wPHM/MTotMSxDLnB1c2goXy54LF8ueSxfLnopLFQucHVzaCh4L3UpLFQucHVzaCgxLXkvYyksbys9MTtmb3IoZT0wO2U8YztlKyspZm9yKHQ9MDt0PHU7dCsrKXI9RSt0K2EqKGUrMSksbj1FKyh0KzEpK2EqKGUrMSksaT1FKyh0KzEpK2EqZSxTLnB1c2goRSt0K2EqZSxyLGkpLFMucHVzaChyLG4saSksZys9Njt3LmFkZEdyb3VwKE8sZyxsKTtPKz1nO0UrPW99cy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJveEJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDplLGhlaWdodDp0LGRlcHRoOnIsd2lkdGhTZWdtZW50czpuLGhlaWdodFNlZ21lbnRzOmksZGVwdGhTZWdtZW50czpvfTt2YXIgdz10aGlzO2U9ZXx8MTt0PXR8fDE7cj1yfHwxO249TWF0aC5mbG9vcihuKXx8MTtpPU1hdGguZmxvb3IoaSl8fDE7bz1NYXRoLmZsb29yKG8pfHwxO3ZhciBTPVtdLE09W10sQz1bXSxUPVtdLEU9MCxPPTA7YShcInpcIixcInlcIixcInhcIiwtMSwtMSxyLHQsZSxvLGksMCk7YShcInpcIixcInlcIixcInhcIiwxLC0xLHIsdCwtZSxvLGksMSk7YShcInhcIixcInpcIixcInlcIiwxLDEsZSxyLHQsbixvLDIpO2EoXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwtMSxlLHIsLXQsbixvLDMpO2EoXCJ4XCIsXCJ5XCIsXCJ6XCIsMSwtMSxlLHQscixuLGksNCk7YShcInhcIixcInlcIixcInpcIiwtMSwtMSxlLHQsLXIsbixpLDUpO3RoaXMuc2V0SW5kZXgoUyk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBqKE0sMykpO3RoaXMuc2V0QXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGooQywzKSk7dGhpcy5zZXRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBqKFQsMikpfXMmJihlLl9fcHJvdG9fXz1zKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMmJnMucHJvdG90eXBlKTtyZXR1cm4gZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZX0oTiksUnM9e2Nsb25lOnosbWVyZ2U6JH07Ry5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSk7Ry5wcm90b3R5cGUuY29uc3RydWN0b3I9RztHLnByb3RvdHlwZS5pc1NoYWRlck1hdGVyaWFsPSEwO0cucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7eS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5mcmFnbWVudFNoYWRlcj1lLmZyYWdtZW50U2hhZGVyO3RoaXMudmVydGV4U2hhZGVyPWUudmVydGV4U2hhZGVyO3RoaXMudW5pZm9ybXM9eihlLnVuaWZvcm1zKTt0aGlzLmRlZmluZXM9T2JqZWN0LmFzc2lnbih7fSxlLmRlZmluZXMpO3RoaXMud2lyZWZyYW1lPWUud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWUud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMubGlnaHRzPWUubGlnaHRzO3RoaXMuY2xpcHBpbmc9ZS5jbGlwcGluZzt0aGlzLnNraW5uaW5nPWUuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9ZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9ZS5tb3JwaE5vcm1hbHM7dGhpcy5leHRlbnNpb25zPU9iamVjdC5hc3NpZ24oe30sZS5leHRlbnNpb25zKTtyZXR1cm4gdGhpc307Ry5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGUpe3ZhciB0PXkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsZSk7dC51bmlmb3Jtcz17fTtmb3IodmFyIHIgaW4gdGhpcy51bmlmb3Jtcyl7dmFyIG49dGhpcy51bmlmb3Jtc1tyXS52YWx1ZTt0LnVuaWZvcm1zW3JdPW4mJm4uaXNUZXh0dXJlP3t0eXBlOlwidFwiLHZhbHVlOm4udG9KU09OKGUpLnV1aWR9Om4mJm4uaXNDb2xvcj97dHlwZTpcImNcIix2YWx1ZTpuLmdldEhleCgpfTpuJiZuLmlzVmVjdG9yMj97dHlwZTpcInYyXCIsdmFsdWU6bi50b0FycmF5KCl9Om4mJm4uaXNWZWN0b3IzP3t0eXBlOlwidjNcIix2YWx1ZTpuLnRvQXJyYXkoKX06biYmbi5pc1ZlY3RvcjQ/e3R5cGU6XCJ2NFwiLHZhbHVlOm4udG9BcnJheSgpfTpuJiZuLmlzTWF0cml4Mz97dHlwZTpcIm0zXCIsdmFsdWU6bi50b0FycmF5KCl9Om4mJm4uaXNNYXRyaXg0P3t0eXBlOlwibTRcIix2YWx1ZTpuLnRvQXJyYXkoKX06e3ZhbHVlOm59fTA8T2JqZWN0LmtleXModGhpcy5kZWZpbmVzKS5sZW5ndGgmJih0LmRlZmluZXM9dGhpcy5kZWZpbmVzKTt0LnZlcnRleFNoYWRlcj10aGlzLnZlcnRleFNoYWRlcjt0LmZyYWdtZW50U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI7ZT17fTtmb3IodmFyIGkgaW4gdGhpcy5leHRlbnNpb25zKSEwPT09dGhpcy5leHRlbnNpb25zW2ldJiYoZVtpXT0hMCk7MDxPYmplY3Qua2V5cyhlKS5sZW5ndGgmJih0LmV4dGVuc2lvbnM9ZSk7cmV0dXJuIHR9O1YucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlYsaXNDYW1lcmE6ITAsY29weTpmdW5jdGlvbihlLHQpe2YucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUsdCk7dGhpcy5tYXRyaXhXb3JsZEludmVyc2UuY29weShlLm1hdHJpeFdvcmxkSW52ZXJzZSk7dGhpcy5wcm9qZWN0aW9uTWF0cml4LmNvcHkoZS5wcm9qZWN0aW9uTWF0cml4KTt0aGlzLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkoZS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZSk7cmV0dXJuIHRoaXN9LGdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5DYW1lcmE6IC5nZXRXb3JsZERpcmVjdGlvbigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgVGUpO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3ZhciB0PXRoaXMubWF0cml4V29ybGQuZWxlbWVudHM7cmV0dXJuIGUuc2V0KC10WzhdLC10WzldLC10WzEwXSkubm9ybWFsaXplKCl9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGUpe2YucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxlKTt0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpfSx1cGRhdGVXb3JsZE1hdHJpeDpmdW5jdGlvbihlLHQpe2YucHJvdG90eXBlLnVwZGF0ZVdvcmxkTWF0cml4LmNhbGwodGhpcyxlLHQpO3RoaXMubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfX0pO0gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShWLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkgsaXNQZXJzcGVjdGl2ZUNhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKGUsdCl7Vi5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSx0KTt0aGlzLmZvdj1lLmZvdjt0aGlzLnpvb209ZS56b29tO3RoaXMubmVhcj1lLm5lYXI7dGhpcy5mYXI9ZS5mYXI7dGhpcy5mb2N1cz1lLmZvY3VzO3RoaXMuYXNwZWN0PWUuYXNwZWN0O3RoaXMudmlldz1udWxsPT09ZS52aWV3P251bGw6T2JqZWN0LmFzc2lnbih7fSxlLnZpZXcpO3RoaXMuZmlsbUdhdWdlPWUuZmlsbUdhdWdlO3RoaXMuZmlsbU9mZnNldD1lLmZpbG1PZmZzZXQ7cmV0dXJuIHRoaXN9LHNldEZvY2FsTGVuZ3RoOmZ1bmN0aW9uKGUpe2U9LjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvZTt0aGlzLmZvdj0yKlZvLlJBRDJERUcqTWF0aC5hdGFuKGUpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxnZXRGb2NhbExlbmd0aDpmdW5jdGlvbigpe3ZhciBlPU1hdGgudGFuKC41KlZvLkRFRzJSQUQqdGhpcy5mb3YpO3JldHVybi41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL2V9LGdldEVmZmVjdGl2ZUZPVjpmdW5jdGlvbigpe3JldHVybiAyKlZvLlJBRDJERUcqTWF0aC5hdGFuKE1hdGgudGFuKC41KlZvLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSl9LGdldEZpbG1XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZSpNYXRoLm1pbih0aGlzLmFzcGVjdCwxKX0sZ2V0RmlsbUhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZS9NYXRoLm1heCh0aGlzLmFzcGVjdCwxKX0sc2V0Vmlld09mZnNldDpmdW5jdGlvbihlLHQscixuLGksbyl7dGhpcy5hc3BlY3Q9ZS90O251bGw9PT10aGlzLnZpZXcmJih0aGlzLnZpZXc9e2VuYWJsZWQ6ITAsZnVsbFdpZHRoOjEsZnVsbEhlaWdodDoxLG9mZnNldFg6MCxvZmZzZXRZOjAsd2lkdGg6MSxoZWlnaHQ6MX0pO3RoaXMudmlldy5lbmFibGVkPSEwO3RoaXMudmlldy5mdWxsV2lkdGg9ZTt0aGlzLnZpZXcuZnVsbEhlaWdodD10O3RoaXMudmlldy5vZmZzZXRYPXI7dGhpcy52aWV3Lm9mZnNldFk9bjt0aGlzLnZpZXcud2lkdGg9aTt0aGlzLnZpZXcuaGVpZ2h0PW87dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe251bGwhPT10aGlzLnZpZXcmJih0aGlzLnZpZXcuZW5hYmxlZD0hMSk7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5lYXIsdD1lKk1hdGgudGFuKC41KlZvLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSxyPTIqdCxuPXRoaXMuYXNwZWN0KnIsaT0tLjUqbixvPXRoaXMudmlldztpZihudWxsIT09dGhpcy52aWV3JiZ0aGlzLnZpZXcuZW5hYmxlZCl7dmFyIGE9by5mdWxsV2lkdGgscz1vLmZ1bGxIZWlnaHQ7aSs9by5vZmZzZXRYKm4vYTt0LT1vLm9mZnNldFkqci9zO24qPW8ud2lkdGgvYTtyKj1vLmhlaWdodC9zfW89dGhpcy5maWxtT2Zmc2V0OzAhPT1vJiYoaSs9ZSpvL3RoaXMuZ2V0RmlsbVdpZHRoKCkpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUoaSxpK24sdCx0LXIsZSx0aGlzLmZhcik7dGhpcy5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMucHJvamVjdGlvbk1hdHJpeCl9LHRvSlNPTjpmdW5jdGlvbihlKXtlPWYucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsZSk7ZS5vYmplY3QuZm92PXRoaXMuZm92O2Uub2JqZWN0Lnpvb209dGhpcy56b29tO2Uub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2Uub2JqZWN0LmZhcj10aGlzLmZhcjtlLm9iamVjdC5mb2N1cz10aGlzLmZvY3VzO2Uub2JqZWN0LmFzcGVjdD10aGlzLmFzcGVjdDtudWxsIT09dGhpcy52aWV3JiYoZS5vYmplY3Qudmlldz1PYmplY3QuYXNzaWduKHt9LHRoaXMudmlldykpO2Uub2JqZWN0LmZpbG1HYXVnZT10aGlzLmZpbG1HYXVnZTtlLm9iamVjdC5maWxtT2Zmc2V0PXRoaXMuZmlsbU9mZnNldDtyZXR1cm4gZX19KTtVLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKTtVLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1VO3EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpO3EucHJvdG90eXBlLmNvbnN0cnVjdG9yPXE7cS5wcm90b3R5cGUuaXNXZWJHTEN1YmVSZW5kZXJUYXJnZXQ9ITA7cS5wcm90b3R5cGUuZnJvbUVxdWlyZWN0YW5ndWxhclRleHR1cmU9ZnVuY3Rpb24oZSx0KXt0aGlzLnRleHR1cmUudHlwZT10LnR5cGU7dGhpcy50ZXh0dXJlLmZvcm1hdD10LmZvcm1hdDt0aGlzLnRleHR1cmUuZW5jb2Rpbmc9dC5lbmNvZGluZzt2YXIgcj1uZXcgT2Usbj1uZXcgRyh7dHlwZTpcIkN1YmVtYXBGcm9tRXF1aXJlY3RcIix1bmlmb3Jtczp6KHt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9fSksdmVydGV4U2hhZGVyOlwidmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG52ZWMzIHRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblxcdHJldHVybiBub3JtYWxpemUoICggbWF0cml4ICogdmVjNCggZGlyLCAwLjAgKSApLnh5eiApO1xcbn1cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkRGlyZWN0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG59XCIsZnJhZ21lbnRTaGFkZXI6XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XFxudmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkRGlyZWN0aW9uICk7XFxuXFx0dmVjMiBzYW1wbGVVViA9IGVxdWlyZWN0VXYoIGRpcmVjdGlvbiApO1xcblxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggdEVxdWlyZWN0LCBzYW1wbGVVViApO1xcbn1cIixzaWRlOjEsYmxlbmRpbmc6MH0pO24udW5pZm9ybXMudEVxdWlyZWN0LnZhbHVlPXQ7dD1uZXcgSShuZXcganMoNSw1LDUpLG4pO3IuYWRkKHQpO25ldyBVKDEsMTAsdGhpcykudXBkYXRlKGUscik7dC5nZW9tZXRyeS5kaXNwb3NlKCk7dC5tYXRlcmlhbC5kaXNwb3NlKCk7cmV0dXJuIHRoaXN9O1BlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHAucHJvdG90eXBlKTtQZS5wcm90b3R5cGUuY29uc3RydWN0b3I9UGU7UGUucHJvdG90eXBlLmlzRGF0YVRleHR1cmU9ITA7dmFyIGtzPW5ldyBsLExzPW5ldyBUZTtPYmplY3QuYXNzaWduKEFlLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGUsdCxyLG4saSxvKXt2YXIgYT10aGlzLnBsYW5lczthWzBdLmNvcHkoZSk7YVsxXS5jb3B5KHQpO2FbMl0uY29weShyKTthWzNdLmNvcHkobik7YVs0XS5jb3B5KGkpO2FbNV0uY29weShvKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMucGxhbmVzLHI9MDs2PnI7cisrKXRbcl0uY29weShlLnBsYW5lc1tyXSk7cmV0dXJuIHRoaXN9LHNldEZyb21Qcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGxhbmVzLHI9ZS5lbGVtZW50cztlPXJbMF07dmFyIG49clsxXSxpPXJbMl0sbz1yWzNdLGE9cls0XSxzPXJbNV0sdT1yWzZdLGM9cls3XSxsPXJbOF0saD1yWzldLHA9clsxMF0sZj1yWzExXSxkPXJbMTJdLHY9clsxM10sbT1yWzE0XTtyPXJbMTVdO3RbMF0uc2V0Q29tcG9uZW50cyhvLWUsYy1hLGYtbCxyLWQpLm5vcm1hbGl6ZSgpO3RbMV0uc2V0Q29tcG9uZW50cyhvK2UsYythLGYrbCxyK2QpLm5vcm1hbGl6ZSgpO3RbMl0uc2V0Q29tcG9uZW50cyhvK24sYytzLGYraCxyK3YpLm5vcm1hbGl6ZSgpO3RbM10uc2V0Q29tcG9uZW50cyhvLW4sYy1zLGYtaCxyLXYpLm5vcm1hbGl6ZSgpO3RbNF0uc2V0Q29tcG9uZW50cyhvLWksYy11LGYtcCxyLW0pLm5vcm1hbGl6ZSgpO3RbNV0uc2V0Q29tcG9uZW50cyhvK2ksYyt1LGYrcCxyK20pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxpbnRlcnNlY3RzT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2VvbWV0cnk7bnVsbD09PXQuYm91bmRpbmdTcGhlcmUmJnQuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7a3MuY29weSh0LmJvdW5kaW5nU3BoZXJlKS5hcHBseU1hdHJpeDQoZS5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShrcyl9LGludGVyc2VjdHNTcHJpdGU6ZnVuY3Rpb24oZSl7a3MuY2VudGVyLnNldCgwLDAsMCk7a3MucmFkaXVzPS43MDcxMDY3ODExODY1NDc2O2tzLmFwcGx5TWF0cml4NChlLm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGtzKX0saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnBsYW5lcyxyPWUuY2VudGVyO2U9LWUucmFkaXVzO2Zvcih2YXIgbj0wOzY+bjtuKyspaWYodFtuXS5kaXN0YW5jZVRvUG9pbnQocik8ZSlyZXR1cm4hMTtyZXR1cm4hMH0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5wbGFuZXMscj0wOzY+cjtyKyspe3ZhciBuPXRbcl07THMueD0wPG4ubm9ybWFsLng/ZS5tYXgueDplLm1pbi54O0xzLnk9MDxuLm5vcm1hbC55P2UubWF4Lnk6ZS5taW4ueTtMcy56PTA8bi5ub3JtYWwuej9lLm1heC56OmUubWluLno7aWYoMD5uLmRpc3RhbmNlVG9Qb2ludChMcykpcmV0dXJuITF9cmV0dXJuITB9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMucGxhbmVzLHI9MDs2PnI7cisrKWlmKDA+dFtyXS5kaXN0YW5jZVRvUG9pbnQoZSkpcmV0dXJuITE7cmV0dXJuITB9fSk7dmFyIE5zPXtjb21tb246e2RpZmZ1c2U6e3ZhbHVlOm5ldyB2KDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sbWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IG19LHV2MlRyYW5zZm9ybTp7dmFsdWU6bmV3IG19LGFscGhhTWFwOnt2YWx1ZTpudWxsfX0sc3BlY3VsYXJtYXA6e3NwZWN1bGFyTWFwOnt2YWx1ZTpudWxsfX0sZW52bWFwOntlbnZNYXA6e3ZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3ZhbHVlOi0xfSxyZWZsZWN0aXZpdHk6e3ZhbHVlOjF9LHJlZnJhY3Rpb25SYXRpbzp7dmFsdWU6Ljk4fSxtYXhNaXBMZXZlbDp7dmFsdWU6MH19LGFvbWFwOnthb01hcDp7dmFsdWU6bnVsbH0sYW9NYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxsaWdodG1hcDp7bGlnaHRNYXA6e3ZhbHVlOm51bGx9LGxpZ2h0TWFwSW50ZW5zaXR5Ont2YWx1ZToxfX0sZW1pc3NpdmVtYXA6e2VtaXNzaXZlTWFwOnt2YWx1ZTpudWxsfX0sYnVtcG1hcDp7YnVtcE1hcDp7dmFsdWU6bnVsbH0sYnVtcFNjYWxlOnt2YWx1ZToxfX0sbm9ybWFsbWFwOntub3JtYWxNYXA6e3ZhbHVlOm51bGx9LG5vcm1hbFNjYWxlOnt2YWx1ZTpuZXcgTWUoMSwxKX19LGRpc3BsYWNlbWVudG1hcDp7ZGlzcGxhY2VtZW50TWFwOnt2YWx1ZTpudWxsfSxkaXNwbGFjZW1lbnRTY2FsZTp7dmFsdWU6MX0sZGlzcGxhY2VtZW50Qmlhczp7dmFsdWU6MH19LHJvdWdobmVzc21hcDp7cm91Z2huZXNzTWFwOnt2YWx1ZTpudWxsfX0sbWV0YWxuZXNzbWFwOnttZXRhbG5lc3NNYXA6e3ZhbHVlOm51bGx9fSxncmFkaWVudG1hcDp7Z3JhZGllbnRNYXA6e3ZhbHVlOm51bGx9fSxmb2c6e2ZvZ0RlbnNpdHk6e3ZhbHVlOjI1ZS01fSxmb2dOZWFyOnt2YWx1ZToxfSxmb2dGYXI6e3ZhbHVlOjJlM30sZm9nQ29sb3I6e3ZhbHVlOm5ldyB2KDE2Nzc3MjE1KX19LGxpZ2h0czp7YW1iaWVudExpZ2h0Q29sb3I6e3ZhbHVlOltdfSxsaWdodFByb2JlOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxjb2xvcjp7fX19LGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntzaGFkb3dCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9fX0sZGlyZWN0aW9uYWxTaGFkb3dNYXA6e3ZhbHVlOltdfSxkaXJlY3Rpb25hbFNoYWRvd01hdHJpeDp7dmFsdWU6W119LHNwb3RMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRpcmVjdGlvbjp7fSxkaXN0YW5jZTp7fSxjb25lQ29zOnt9LHBlbnVtYnJhQ29zOnt9LGRlY2F5Ont9fX0sc3BvdExpZ2h0U2hhZG93czp7dmFsdWU6W10scHJvcGVydGllczp7c2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LHNwb3RTaGFkb3dNYXA6e3ZhbHVlOltdfSxzcG90U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0scG9pbnRMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRlY2F5Ont9LGRpc3RhbmNlOnt9fX0scG9pbnRMaWdodFNoYWRvd3M6e3ZhbHVlOltdLHByb3BlcnRpZXM6e3NoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e30sc2hhZG93Q2FtZXJhTmVhcjp7fSxzaGFkb3dDYW1lcmFGYXI6e319fSxwb2ludFNoYWRvd01hcDp7dmFsdWU6W119LHBvaW50U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7ZGlyZWN0aW9uOnt9LHNreUNvbG9yOnt9LGdyb3VuZENvbG9yOnt9fX0scmVjdEFyZWFMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LHdpZHRoOnt9LGhlaWdodDp7fX19fSxwb2ludHM6e2RpZmZ1c2U6e3ZhbHVlOm5ldyB2KDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sc2l6ZTp7dmFsdWU6MX0sc2NhbGU6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sYWxwaGFNYXA6e3ZhbHVlOm51bGx9LHV2VHJhbnNmb3JtOnt2YWx1ZTpuZXcgbX19LHNwcml0ZTp7ZGlmZnVzZTp7dmFsdWU6bmV3IHYoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxjZW50ZXI6e3ZhbHVlOm5ldyBNZSguNSwuNSl9LHJvdGF0aW9uOnt2YWx1ZTowfSxtYXA6e3ZhbHVlOm51bGx9LGFscGhhTWFwOnt2YWx1ZTpudWxsfSx1dlRyYW5zZm9ybTp7dmFsdWU6bmV3IG19fX07Vy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGLnByb3RvdHlwZSk7Vy5wcm90b3R5cGUuY29uc3RydWN0b3I9VztYLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE4ucHJvdG90eXBlKTtYLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1YO3ZhciBJcz17YWxwaGFtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXFx0ZGlmZnVzZUNvbG9yLmEgKj0gdGV4dHVyZTJEKCBhbHBoYU1hcCwgdlV2ICkuZztcXG4jZW5kaWZcIixhbHBoYW1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbiNlbmRpZlwiLGFscGhhdGVzdF9mcmFnbWVudDpcIiNpZmRlZiBBTFBIQVRFU1RcXG5cXHRpZiAoIGRpZmZ1c2VDb2xvci5hIDwgQUxQSEFURVNUICkgZGlzY2FyZDtcXG4jZW5kaWZcIixhb21hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQU9NQVBcXG5cXHRmbG9hdCBhbWJpZW50T2NjbHVzaW9uID0gKCB0ZXh0dXJlMkQoIGFvTWFwLCB2VXYyICkuciAtIDEuMCApICogYW9NYXBJbnRlbnNpdHkgKyAxLjA7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGFtYmllbnRPY2NsdXNpb247XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBTVEFOREFSRCApXFxuXFx0XFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKj0gY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBkb3ROViwgYW1iaWVudE9jY2x1c2lvbiwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixhb21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BT01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgYW9NYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsYmVnaW5fdmVydGV4OlwidmVjMyB0cmFuc2Zvcm1lZCA9IHZlYzMoIHBvc2l0aW9uICk7XCIsYmVnaW5ub3JtYWxfdmVydGV4OlwidmVjMyBvYmplY3ROb3JtYWwgPSB2ZWMzKCBub3JtYWwgKTtcXG4jaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHR2ZWMzIG9iamVjdFRhbmdlbnQgPSB2ZWMzKCB0YW5nZW50Lnh5eiApO1xcbiNlbmRpZlwiLGJzZGZzOlwidmVjMiBpbnRlZ3JhdGVTcGVjdWxhckJSREYoIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0Y29uc3QgdmVjNCBjMCA9IHZlYzQoIC0gMSwgLSAwLjAyNzUsIC0gMC41NzIsIDAuMDIyICk7XFxuXFx0Y29uc3QgdmVjNCBjMSA9IHZlYzQoIDEsIDAuMDQyNSwgMS4wNCwgLSAwLjA0ICk7XFxuXFx0dmVjNCByID0gcm91Z2huZXNzICogYzAgKyBjMTtcXG5cXHRmbG9hdCBhMDA0ID0gbWluKCByLnggKiByLngsIGV4cDIoIC0gOS4yOCAqIGRvdE5WICkgKSAqIHIueCArIHIueTtcXG5cXHRyZXR1cm4gdmVjMiggLTEuMDQsIDEuMDQgKSAqIGEwMDQgKyByLnp3O1xcbn1cXG5mbG9hdCBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBjb25zdCBpbiBmbG9hdCBsaWdodERpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBjdXRvZmZEaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgZGVjYXlFeHBvbmVudCApIHtcXG4jaWYgZGVmaW5lZCAoIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMgKVxcblxcdGZsb2F0IGRpc3RhbmNlRmFsbG9mZiA9IDEuMCAvIG1heCggcG93KCBsaWdodERpc3RhbmNlLCBkZWNheUV4cG9uZW50ICksIDAuMDEgKTtcXG5cXHRpZiggY3V0b2ZmRGlzdGFuY2UgPiAwLjAgKSB7XFxuXFx0XFx0ZGlzdGFuY2VGYWxsb2ZmICo9IHBvdzIoIHNhdHVyYXRlKCAxLjAgLSBwb3c0KCBsaWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKSApICk7XFxuXFx0fVxcblxcdHJldHVybiBkaXN0YW5jZUZhbGxvZmY7XFxuI2Vsc2VcXG5cXHRpZiggY3V0b2ZmRGlzdGFuY2UgPiAwLjAgJiYgZGVjYXlFeHBvbmVudCA+IDAuMCApIHtcXG5cXHRcXHRyZXR1cm4gcG93KCBzYXR1cmF0ZSggLWxpZ2h0RGlzdGFuY2UgLyBjdXRvZmZEaXN0YW5jZSArIDEuMCApLCBkZWNheUV4cG9uZW50ICk7XFxuXFx0fVxcblxcdHJldHVybiAxLjA7XFxuI2VuZGlmXFxufVxcbnZlYzMgQlJERl9EaWZmdXNlX0xhbWJlcnQoIGNvbnN0IGluIHZlYzMgZGlmZnVzZUNvbG9yICkge1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogZGlmZnVzZUNvbG9yO1xcbn1cXG52ZWMzIEZfU2NobGljayggY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBkb3RMSCApIHtcXG5cXHRmbG9hdCBmcmVzbmVsID0gZXhwMiggKCAtNS41NTQ3MyAqIGRvdExIIC0gNi45ODMxNiApICogZG90TEggKTtcXG5cXHRyZXR1cm4gKCAxLjAgLSBzcGVjdWxhckNvbG9yICkgKiBmcmVzbmVsICsgc3BlY3VsYXJDb2xvcjtcXG59XFxudmVjMyBGX1NjaGxpY2tfUm91Z2huZXNzRGVwZW5kZW50KCBjb25zdCBpbiB2ZWMzIEYwLCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGZyZXNuZWwgPSBleHAyKCAoIC01LjU1NDczICogZG90TlYgLSA2Ljk4MzE2ICkgKiBkb3ROViApO1xcblxcdHZlYzMgRnIgPSBtYXgoIHZlYzMoIDEuMCAtIHJvdWdobmVzcyApLCBGMCApIC0gRjA7XFxuXFx0cmV0dXJuIEZyICogZnJlc25lbCArIEYwO1xcbn1cXG5mbG9hdCBHX0dHWF9TbWl0aCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROTCArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdGZsb2F0IGd2ID0gZG90TlYgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcXG5cXHRyZXR1cm4gMS4wIC8gKCBnbCAqIGd2ICk7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoQ29ycmVsYXRlZCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROTCAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdGZsb2F0IGdsID0gZG90TlYgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcXG5cXHRyZXR1cm4gMC41IC8gbWF4KCBndiArIGdsLCBFUFNJTE9OICk7XFxufVxcbmZsb2F0IERfR0dYKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblxcdGZsb2F0IGRlbm9tID0gcG93MiggZG90TkggKSAqICggYTIgLSAxLjAgKSArIDEuMDtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGEyIC8gcG93MiggZGVub20gKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiB2ZWMzIHZpZXdEaXIsIGNvbnN0IGluIHZlYzMgbm9ybWFsLCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBhbHBoYSA9IHBvdzIoIHJvdWdobmVzcyApO1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyB2aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIG5vcm1hbCwgdmlld0RpciApICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19HR1hfU21pdGhDb3JyZWxhdGVkKCBhbHBoYSwgZG90TkwsIGRvdE5WICk7XFxuXFx0ZmxvYXQgRCA9IERfR0dYKCBhbHBoYSwgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxudmVjMiBMVENfVXYoIGNvbnN0IGluIHZlYzMgTiwgY29uc3QgaW4gdmVjMyBWLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX1NJWkUgID0gNjQuMDtcXG5cXHRjb25zdCBmbG9hdCBMVVRfU0NBTEUgPSAoIExVVF9TSVpFIC0gMS4wICkgLyBMVVRfU0laRTtcXG5cXHRjb25zdCBmbG9hdCBMVVRfQklBUyAgPSAwLjUgLyBMVVRfU0laRTtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIE4sIFYgKSApO1xcblxcdHZlYzIgdXYgPSB2ZWMyKCByb3VnaG5lc3MsIHNxcnQoIDEuMCAtIGRvdE5WICkgKTtcXG5cXHR1diA9IHV2ICogTFVUX1NDQUxFICsgTFVUX0JJQVM7XFxuXFx0cmV0dXJuIHV2O1xcbn1cXG5mbG9hdCBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIGNvbnN0IGluIHZlYzMgZiApIHtcXG5cXHRmbG9hdCBsID0gbGVuZ3RoKCBmICk7XFxuXFx0cmV0dXJuIG1heCggKCBsICogbCArIGYueiApIC8gKCBsICsgMS4wICksIDAuMCApO1xcbn1cXG52ZWMzIExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29uc3QgaW4gdmVjMyB2MSwgY29uc3QgaW4gdmVjMyB2MiApIHtcXG5cXHRmbG9hdCB4ID0gZG90KCB2MSwgdjIgKTtcXG5cXHRmbG9hdCB5ID0gYWJzKCB4ICk7XFxuXFx0ZmxvYXQgYSA9IDAuODU0Mzk4NSArICggMC40OTY1MTU1ICsgMC4wMTQ1MjA2ICogeSApICogeTtcXG5cXHRmbG9hdCBiID0gMy40MTc1OTQwICsgKCA0LjE2MTY3MjQgKyB5ICkgKiB5O1xcblxcdGZsb2F0IHYgPSBhIC8gYjtcXG5cXHRmbG9hdCB0aGV0YV9zaW50aGV0YSA9ICggeCA+IDAuMCApID8gdiA6IDAuNSAqIGludmVyc2VzcXJ0KCBtYXgoIDEuMCAtIHggKiB4LCAxZS03ICkgKSAtIHY7XFxuXFx0cmV0dXJuIGNyb3NzKCB2MSwgdjIgKSAqIHRoZXRhX3NpbnRoZXRhO1xcbn1cXG52ZWMzIExUQ19FdmFsdWF0ZSggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIHZlYzMgUCwgY29uc3QgaW4gbWF0MyBtSW52LCBjb25zdCBpbiB2ZWMzIHJlY3RDb29yZHNbIDQgXSApIHtcXG5cXHR2ZWMzIHYxID0gcmVjdENvb3Jkc1sgMSBdIC0gcmVjdENvb3Jkc1sgMCBdO1xcblxcdHZlYzMgdjIgPSByZWN0Q29vcmRzWyAzIF0gLSByZWN0Q29vcmRzWyAwIF07XFxuXFx0dmVjMyBsaWdodE5vcm1hbCA9IGNyb3NzKCB2MSwgdjIgKTtcXG5cXHRpZiggZG90KCBsaWdodE5vcm1hbCwgUCAtIHJlY3RDb29yZHNbIDAgXSApIDwgMC4wICkgcmV0dXJuIHZlYzMoIDAuMCApO1xcblxcdHZlYzMgVDEsIFQyO1xcblxcdFQxID0gbm9ybWFsaXplKCBWIC0gTiAqIGRvdCggViwgTiApICk7XFxuXFx0VDIgPSAtIGNyb3NzKCBOLCBUMSApO1xcblxcdG1hdDMgbWF0ID0gbUludiAqIHRyYW5zcG9zZU1hdDMoIG1hdDMoIFQxLCBUMiwgTiApICk7XFxuXFx0dmVjMyBjb29yZHNbIDQgXTtcXG5cXHRjb29yZHNbIDAgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMCBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMSBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAxIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAyIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDIgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDMgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMyBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMCBdID0gbm9ybWFsaXplKCBjb29yZHNbIDAgXSApO1xcblxcdGNvb3Jkc1sgMSBdID0gbm9ybWFsaXplKCBjb29yZHNbIDEgXSApO1xcblxcdGNvb3Jkc1sgMiBdID0gbm9ybWFsaXplKCBjb29yZHNbIDIgXSApO1xcblxcdGNvb3Jkc1sgMyBdID0gbm9ybWFsaXplKCBjb29yZHNbIDMgXSApO1xcblxcdHZlYzMgdmVjdG9yRm9ybUZhY3RvciA9IHZlYzMoIDAuMCApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDAgXSwgY29vcmRzWyAxIF0gKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAxIF0sIGNvb3Jkc1sgMiBdICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMiBdLCBjb29yZHNbIDMgXSApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDMgXSwgY29vcmRzWyAwIF0gKTtcXG5cXHRmbG9hdCByZXN1bHQgPSBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIHZlY3RvckZvcm1GYWN0b3IgKTtcXG5cXHRyZXR1cm4gdmVjMyggcmVzdWx0ICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGNvbnN0IGluIHZlYzMgdmlld0RpciwgY29uc3QgaW4gdmVjMyBub3JtYWwsIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggbm9ybWFsLCB2aWV3RGlyICkgKTtcXG5cXHR2ZWMyIGJyZGYgPSBpbnRlZ3JhdGVTcGVjdWxhckJSREYoIGRvdE5WLCByb3VnaG5lc3MgKTtcXG5cXHRyZXR1cm4gc3BlY3VsYXJDb2xvciAqIGJyZGYueCArIGJyZGYueTtcXG59XFxudm9pZCBCUkRGX1NwZWN1bGFyX011bHRpc2NhdHRlcmluZ19FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MsIGlub3V0IHZlYzMgc2luZ2xlU2NhdHRlciwgaW5vdXQgdmVjMyBtdWx0aVNjYXR0ZXIgKSB7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGlja19Sb3VnaG5lc3NEZXBlbmRlbnQoIHNwZWN1bGFyQ29sb3IsIGRvdE5WLCByb3VnaG5lc3MgKTtcXG5cXHR2ZWMyIGJyZGYgPSBpbnRlZ3JhdGVTcGVjdWxhckJSREYoIGRvdE5WLCByb3VnaG5lc3MgKTtcXG5cXHR2ZWMzIEZzc0VzcyA9IEYgKiBicmRmLnggKyBicmRmLnk7XFxuXFx0ZmxvYXQgRXNzID0gYnJkZi54ICsgYnJkZi55O1xcblxcdGZsb2F0IEVtcyA9IDEuMCAtIEVzcztcXG5cXHR2ZWMzIEZhdmcgPSBzcGVjdWxhckNvbG9yICsgKCAxLjAgLSBzcGVjdWxhckNvbG9yICkgKiAwLjA0NzYxOTtcXHR2ZWMzIEZtcyA9IEZzc0VzcyAqIEZhdmcgLyAoIDEuMCAtIEVtcyAqIEZhdmcgKTtcXG5cXHRzaW5nbGVTY2F0dGVyICs9IEZzc0VzcztcXG5cXHRtdWx0aVNjYXR0ZXIgKz0gRm1zICogRW1zO1xcbn1cXG5mbG9hdCBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICkge1xcblxcdHJldHVybiAwLjI1O1xcbn1cXG5mbG9hdCBEX0JsaW5uUGhvbmcoIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19CbGlublBob25nX0ltcGxpY2l0KCApO1xcblxcdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxuZmxvYXQgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBjb25zdCBpbiBmbG9hdCBnZ3hSb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuICggMi4wIC8gcG93MiggZ2d4Um91Z2huZXNzICsgMC4wMDAxICkgLSAyLjAgKTtcXG59XFxuZmxvYXQgQmxpbm5FeHBvbmVudFRvR0dYUm91Z2huZXNzKCBjb25zdCBpbiBmbG9hdCBibGlubkV4cG9uZW50ICkge1xcblxcdHJldHVybiBzcXJ0KCAyLjAgLyAoIGJsaW5uRXhwb25lbnQgKyAyLjAgKSApO1xcbn1cXG4jaWYgZGVmaW5lZCggVVNFX1NIRUVOIClcXG5mbG9hdCBEX0NoYXJsaWUoZmxvYXQgcm91Z2huZXNzLCBmbG9hdCBOb0gpIHtcXG5cXHRmbG9hdCBpbnZBbHBoYSAgPSAxLjAgLyByb3VnaG5lc3M7XFxuXFx0ZmxvYXQgY29zMmggPSBOb0ggKiBOb0g7XFxuXFx0ZmxvYXQgc2luMmggPSBtYXgoMS4wIC0gY29zMmgsIDAuMDA3ODEyNSk7XFx0cmV0dXJuICgyLjAgKyBpbnZBbHBoYSkgKiBwb3coc2luMmgsIGludkFscGhhICogMC41KSAvICgyLjAgKiBQSSk7XFxufVxcbmZsb2F0IFZfTmV1YmVsdChmbG9hdCBOb1YsIGZsb2F0IE5vTCkge1xcblxcdHJldHVybiBzYXR1cmF0ZSgxLjAgLyAoNC4wICogKE5vTCArIE5vViAtIE5vTCAqIE5vVikpKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX1NoZWVuKCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MsIGNvbnN0IGluIHZlYzMgTCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgdmVjMyBzcGVjdWxhckNvbG9yICkge1xcblxcdHZlYzMgTiA9IGdlb21ldHJ5Lm5vcm1hbDtcXG5cXHR2ZWMzIFYgPSBnZW9tZXRyeS52aWV3RGlyO1xcblxcdHZlYzMgSCA9IG5vcm1hbGl6ZSggViArIEwgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIE4sIEggKSApO1xcblxcdHJldHVybiBzcGVjdWxhckNvbG9yICogRF9DaGFybGllKCByb3VnaG5lc3MsIGRvdE5IICkgKiBWX05ldWJlbHQoIGRvdChOLCBWKSwgZG90KE4sIEwpICk7XFxufVxcbiNlbmRpZlwiLGJ1bXBtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQlVNUE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXFx0dmVjMiBkSGR4eV9md2QoKSB7XFxuXFx0XFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblxcdFxcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5cXHRcXHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuXFx0XFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXFx0XFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxuXFx0XFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxuXFx0fVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXFx0XFx0dmVjMyB2U2lnbWFYID0gdmVjMyggZEZkeCggc3VyZl9wb3MueCApLCBkRmR4KCBzdXJmX3Bvcy55ICksIGRGZHgoIHN1cmZfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgdlNpZ21hWSA9IHZlYzMoIGRGZHkoIHN1cmZfcG9zLnggKSwgZEZkeSggc3VyZl9wb3MueSApLCBkRmR5KCBzdXJmX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMzIHZOID0gc3VyZl9ub3JtO1xcblxcdFxcdHZlYzMgUjEgPSBjcm9zcyggdlNpZ21hWSwgdk4gKTtcXG5cXHRcXHR2ZWMzIFIyID0gY3Jvc3MoIHZOLCB2U2lnbWFYICk7XFxuXFx0XFx0ZmxvYXQgZkRldCA9IGRvdCggdlNpZ21hWCwgUjEgKTtcXG5cXHRcXHRmRGV0ICo9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHRcXHR2ZWMzIHZHcmFkID0gc2lnbiggZkRldCApICogKCBkSGR4eS54ICogUjEgKyBkSGR4eS55ICogUjIgKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCBhYnMoIGZEZXQgKSAqIHN1cmZfbm9ybSAtIHZHcmFkICk7XFxuXFx0fVxcbiNlbmRpZlwiLGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdHZlYzQgcGxhbmU7XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IFVOSU9OX0NMSVBQSU5HX1BMQU5FUzsgaSArKyApIHtcXG5cXHRcXHRwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XFxuXFx0XFx0aWYgKCBkb3QoIHZDbGlwUG9zaXRpb24sIHBsYW5lLnh5eiApID4gcGxhbmUudyApIGRpc2NhcmQ7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2lmIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyA8IE5VTV9DTElQUElOR19QTEFORVNcXG5cXHRcXHRib29sIGNsaXBwZWQgPSB0cnVlO1xcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IFVOSU9OX0NMSVBQSU5HX1BMQU5FUzsgaSA8IE5VTV9DTElQUElOR19QTEFORVM7IGkgKysgKSB7XFxuXFx0XFx0XFx0cGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdFxcdGNsaXBwZWQgPSAoIGRvdCggdkNsaXBQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgJiYgY2xpcHBlZDtcXG5cXHRcXHR9XFxuXFx0XFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHRcXHRpZiAoIGNsaXBwZWQgKSBkaXNjYXJkO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0dmFyeWluZyB2ZWMzIHZDbGlwUG9zaXRpb247XFxuXFx0dW5pZm9ybSB2ZWM0IGNsaXBwaW5nUGxhbmVzWyBOVU1fQ0xJUFBJTkdfUExBTkVTIF07XFxuI2VuZGlmXCIsY2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0dmFyeWluZyB2ZWMzIHZDbGlwUG9zaXRpb247XFxuI2VuZGlmXCIsY2xpcHBpbmdfcGxhbmVzX3ZlcnRleDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdHZDbGlwUG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlwiLGNvbG9yX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdGRpZmZ1c2VDb2xvci5yZ2IgKj0gdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlwiLGNvbG9yX3ZlcnRleDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2Q29sb3IueHl6ID0gY29sb3IueHl6O1xcbiNlbmRpZlwiLGNvbW1vbjpcIiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1OVxcbiNkZWZpbmUgUEkyIDYuMjgzMTg1MzA3MThcXG4jZGVmaW5lIFBJX0hBTEYgMS41NzA3OTYzMjY3OTQ5XFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJIDAuMzE4MzA5ODg2MThcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkyIDAuMTU5MTU0OTRcXG4jZGVmaW5lIExPRzIgMS40NDI2OTVcXG4jZGVmaW5lIEVQU0lMT04gMWUtNlxcbiNpZm5kZWYgc2F0dXJhdGVcXG4jZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXFxuI2VuZGlmXFxuI2RlZmluZSB3aGl0ZUNvbXBsZW1lbnQoYSkgKCAxLjAgLSBzYXR1cmF0ZSggYSApIClcXG5mbG9hdCBwb3cyKCBjb25zdCBpbiBmbG9hdCB4ICkgeyByZXR1cm4geCp4OyB9XFxuZmxvYXQgcG93MyggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeCp4OyB9XFxuZmxvYXQgcG93NCggY29uc3QgaW4gZmxvYXQgeCApIHsgZmxvYXQgeDIgPSB4Kng7IHJldHVybiB4Mip4MjsgfVxcbmZsb2F0IGF2ZXJhZ2UoIGNvbnN0IGluIHZlYzMgY29sb3IgKSB7IHJldHVybiBkb3QoIGNvbG9yLCB2ZWMzKCAwLjMzMzMgKSApOyB9XFxuaGlnaHAgZmxvYXQgcmFuZCggY29uc3QgaW4gdmVjMiB1diApIHtcXG5cXHRjb25zdCBoaWdocCBmbG9hdCBhID0gMTIuOTg5OCwgYiA9IDc4LjIzMywgYyA9IDQzNzU4LjU0NTM7XFxuXFx0aGlnaHAgZmxvYXQgZHQgPSBkb3QoIHV2Lnh5LCB2ZWMyKCBhLGIgKSApLCBzbiA9IG1vZCggZHQsIFBJICk7XFxuXFx0cmV0dXJuIGZyYWN0KHNpbihzbikgKiBjKTtcXG59XFxuI2lmZGVmIEhJR0hfUFJFQ0lTSU9OXFxuXFx0ZmxvYXQgcHJlY2lzaW9uU2FmZUxlbmd0aCggdmVjMyB2ICkgeyByZXR1cm4gbGVuZ3RoKCB2ICk7IH1cXG4jZWxzZVxcblxcdGZsb2F0IG1heDMoIHZlYzMgdiApIHsgcmV0dXJuIG1heCggbWF4KCB2LngsIHYueSApLCB2LnogKTsgfVxcblxcdGZsb2F0IHByZWNpc2lvblNhZmVMZW5ndGgoIHZlYzMgdiApIHtcXG5cXHRcXHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgzKCBhYnMoIHYgKSApO1xcblxcdFxcdHJldHVybiBsZW5ndGgoIHYgLyBtYXhDb21wb25lbnQgKSAqIG1heENvbXBvbmVudDtcXG5cXHR9XFxuI2VuZGlmXFxuc3RydWN0IEluY2lkZW50TGlnaHQge1xcblxcdHZlYzMgY29sb3I7XFxuXFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0Ym9vbCB2aXNpYmxlO1xcbn07XFxuc3RydWN0IFJlZmxlY3RlZExpZ2h0IHtcXG5cXHR2ZWMzIGRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBkaXJlY3RTcGVjdWxhcjtcXG5cXHR2ZWMzIGluZGlyZWN0RGlmZnVzZTtcXG5cXHR2ZWMzIGluZGlyZWN0U3BlY3VsYXI7XFxufTtcXG5zdHJ1Y3QgR2VvbWV0cmljQ29udGV4dCB7XFxuXFx0dmVjMyBwb3NpdGlvbjtcXG5cXHR2ZWMzIG5vcm1hbDtcXG5cXHR2ZWMzIHZpZXdEaXI7XFxuI2lmZGVmIENMRUFSQ09BVFxcblxcdHZlYzMgY2xlYXJjb2F0Tm9ybWFsO1xcbiNlbmRpZlxcbn07XFxudmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIG1hdHJpeCAqIHZlYzQoIGRpciwgMC4wICkgKS54eXogKTtcXG59XFxudmVjMyBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XFxufVxcbnZlYzMgcHJvamVjdE9uUGxhbmUoaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0ZmxvYXQgZGlzdGFuY2UgPSBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludCAtIHBvaW50T25QbGFuZSApO1xcblxcdHJldHVybiAtIGRpc3RhbmNlICogcGxhbmVOb3JtYWwgKyBwb2ludDtcXG59XFxuZmxvYXQgc2lkZU9mUGxhbmUoIGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XFxufVxcbnZlYzMgbGluZVBsYW5lSW50ZXJzZWN0KCBpbiB2ZWMzIHBvaW50T25MaW5lLCBpbiB2ZWMzIGxpbmVEaXJlY3Rpb24sIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBsaW5lRGlyZWN0aW9uICogKCBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludE9uUGxhbmUgLSBwb2ludE9uTGluZSApIC8gZG90KCBwbGFuZU5vcm1hbCwgbGluZURpcmVjdGlvbiApICkgKyBwb2ludE9uTGluZTtcXG59XFxubWF0MyB0cmFuc3Bvc2VNYXQzKCBjb25zdCBpbiBtYXQzIG0gKSB7XFxuXFx0bWF0MyB0bXA7XFxuXFx0dG1wWyAwIF0gPSB2ZWMzKCBtWyAwIF0ueCwgbVsgMSBdLngsIG1bIDIgXS54ICk7XFxuXFx0dG1wWyAxIF0gPSB2ZWMzKCBtWyAwIF0ueSwgbVsgMSBdLnksIG1bIDIgXS55ICk7XFxuXFx0dG1wWyAyIF0gPSB2ZWMzKCBtWyAwIF0ueiwgbVsgMSBdLnosIG1bIDIgXS56ICk7XFxuXFx0cmV0dXJuIHRtcDtcXG59XFxuZmxvYXQgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggY29uc3QgaW4gdmVjMyBjb2xvciApIHtcXG5cXHR2ZWMzIHdlaWdodHMgPSB2ZWMzKCAwLjIxMjYsIDAuNzE1MiwgMC4wNzIyICk7XFxuXFx0cmV0dXJuIGRvdCggd2VpZ2h0cywgY29sb3IucmdiICk7XFxufVxcbmJvb2wgaXNQZXJzcGVjdGl2ZU1hdHJpeCggbWF0NCBtICkge1xcbiAgcmV0dXJuIG1bIDIgXVsgMyBdID09IC0gMS4wO1xcbn1cXG52ZWMyIGVxdWlyZWN0VXYoIGluIHZlYzMgZGlyICkge1xcblxcdGZsb2F0IHUgPSBhdGFuKCBkaXIueiwgZGlyLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdGZsb2F0IHYgPSBhc2luKCBjbGFtcCggZGlyLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcXG5cXHRyZXR1cm4gdmVjMiggdSwgdiApO1xcbn1cIixjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ6XCIjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRV9VVlxcbiNkZWZpbmUgY3ViZVVWX21heE1pcExldmVsIDguMFxcbiNkZWZpbmUgY3ViZVVWX21pbk1pcExldmVsIDQuMFxcbiNkZWZpbmUgY3ViZVVWX21heFRpbGVTaXplIDI1Ni4wXFxuI2RlZmluZSBjdWJlVVZfbWluVGlsZVNpemUgMTYuMFxcbmZsb2F0IGdldEZhY2UodmVjMyBkaXJlY3Rpb24pIHtcXG4gICAgdmVjMyBhYnNEaXJlY3Rpb24gPSBhYnMoZGlyZWN0aW9uKTtcXG4gICAgZmxvYXQgZmFjZSA9IC0xLjA7XFxuICAgIGlmIChhYnNEaXJlY3Rpb24ueCA+IGFic0RpcmVjdGlvbi56KSB7XFxuICAgICAgaWYgKGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnkpXFxuICAgICAgICBmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwLjAgOiAzLjA7XFxuICAgICAgZWxzZVxcbiAgICAgICAgZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMS4wIDogNC4wO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGlmIChhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55KVxcbiAgICAgICAgZmFjZSA9IGRpcmVjdGlvbi56ID4gMC4wID8gMi4wIDogNS4wO1xcbiAgICAgIGVsc2VcXG4gICAgICAgIGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEuMCA6IDQuMDtcXG4gICAgfVxcbiAgICByZXR1cm4gZmFjZTtcXG59XFxudmVjMiBnZXRVVih2ZWMzIGRpcmVjdGlvbiwgZmxvYXQgZmFjZSkge1xcbiAgICB2ZWMyIHV2O1xcbiAgICBpZiAoZmFjZSA9PSAwLjApIHtcXG4gICAgICB1diA9IHZlYzIoZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KSAvIGFicyhkaXJlY3Rpb24ueCk7ICAgIH0gZWxzZSBpZiAoZmFjZSA9PSAxLjApIHtcXG4gICAgICB1diA9IHZlYzIoLWRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnopIC8gYWJzKGRpcmVjdGlvbi55KTsgICAgfSBlbHNlIGlmIChmYWNlID09IDIuMCkge1xcbiAgICAgIHV2ID0gdmVjMigtZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55KSAvIGFicyhkaXJlY3Rpb24ueik7ICAgIH0gZWxzZSBpZiAoZmFjZSA9PSAzLjApIHtcXG4gICAgICB1diA9IHZlYzIoLWRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSkgLyBhYnMoZGlyZWN0aW9uLngpOyAgICB9IGVsc2UgaWYgKGZhY2UgPT0gNC4wKSB7XFxuICAgICAgdXYgPSB2ZWMyKC1kaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnopIC8gYWJzKGRpcmVjdGlvbi55KTsgICAgfSBlbHNlIHtcXG4gICAgICB1diA9IHZlYzIoZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55KSAvIGFicyhkaXJlY3Rpb24ueik7ICAgIH1cXG4gICAgcmV0dXJuIDAuNSAqICh1diArIDEuMCk7XFxufVxcbnZlYzMgYmlsaW5lYXJDdWJlVVYoc2FtcGxlcjJEIGVudk1hcCwgdmVjMyBkaXJlY3Rpb24sIGZsb2F0IG1pcEludCkge1xcbiAgZmxvYXQgZmFjZSA9IGdldEZhY2UoZGlyZWN0aW9uKTtcXG4gIGZsb2F0IGZpbHRlckludCA9IG1heChjdWJlVVZfbWluTWlwTGV2ZWwgLSBtaXBJbnQsIDAuMCk7XFxuICBtaXBJbnQgPSBtYXgobWlwSW50LCBjdWJlVVZfbWluTWlwTGV2ZWwpO1xcbiAgZmxvYXQgZmFjZVNpemUgPSBleHAyKG1pcEludCk7XFxuICBmbG9hdCB0ZXhlbFNpemUgPSAxLjAgLyAoMy4wICogY3ViZVVWX21heFRpbGVTaXplKTtcXG4gIHZlYzIgdXYgPSBnZXRVVihkaXJlY3Rpb24sIGZhY2UpICogKGZhY2VTaXplIC0gMS4wKTtcXG4gIHZlYzIgZiA9IGZyYWN0KHV2KTtcXG4gIHV2ICs9IDAuNSAtIGY7XFxuICBpZiAoZmFjZSA+IDIuMCkge1xcbiAgICB1di55ICs9IGZhY2VTaXplO1xcbiAgICBmYWNlIC09IDMuMDtcXG4gIH1cXG4gIHV2LnggKz0gZmFjZSAqIGZhY2VTaXplO1xcbiAgaWYobWlwSW50IDwgY3ViZVVWX21heE1pcExldmVsKXtcXG4gICAgdXYueSArPSAyLjAgKiBjdWJlVVZfbWF4VGlsZVNpemU7XFxuICB9XFxuICB1di55ICs9IGZpbHRlckludCAqIDIuMCAqIGN1YmVVVl9taW5UaWxlU2l6ZTtcXG4gIHV2LnggKz0gMy4wICogbWF4KDAuMCwgY3ViZVVWX21heFRpbGVTaXplIC0gMi4wICogZmFjZVNpemUpO1xcbiAgdXYgKj0gdGV4ZWxTaXplO1xcbiAgdmVjMyB0bCA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXYpKS5yZ2I7XFxuICB1di54ICs9IHRleGVsU2l6ZTtcXG4gIHZlYzMgdHIgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2KSkucmdiO1xcbiAgdXYueSArPSB0ZXhlbFNpemU7XFxuICB2ZWMzIGJyID0gZW52TWFwVGV4ZWxUb0xpbmVhcih0ZXh0dXJlMkQoZW52TWFwLCB1dikpLnJnYjtcXG4gIHV2LnggLT0gdGV4ZWxTaXplO1xcbiAgdmVjMyBibCA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXYpKS5yZ2I7XFxuICB2ZWMzIHRtID0gbWl4KHRsLCB0ciwgZi54KTtcXG4gIHZlYzMgYm0gPSBtaXgoYmwsIGJyLCBmLngpO1xcbiAgcmV0dXJuIG1peCh0bSwgYm0sIGYueSk7XFxufVxcbiNkZWZpbmUgcjAgMS4wXFxuI2RlZmluZSB2MCAwLjMzOVxcbiNkZWZpbmUgbTAgLTIuMFxcbiNkZWZpbmUgcjEgMC44XFxuI2RlZmluZSB2MSAwLjI3NlxcbiNkZWZpbmUgbTEgLTEuMFxcbiNkZWZpbmUgcjQgMC40XFxuI2RlZmluZSB2NCAwLjA0NlxcbiNkZWZpbmUgbTQgMi4wXFxuI2RlZmluZSByNSAwLjMwNVxcbiNkZWZpbmUgdjUgMC4wMTZcXG4jZGVmaW5lIG01IDMuMFxcbiNkZWZpbmUgcjYgMC4yMVxcbiNkZWZpbmUgdjYgMC4wMDM4XFxuI2RlZmluZSBtNiA0LjBcXG5mbG9hdCByb3VnaG5lc3NUb01pcChmbG9hdCByb3VnaG5lc3MpIHtcXG4gIGZsb2F0IG1pcCA9IDAuMDtcXG4gIGlmIChyb3VnaG5lc3MgPj0gcjEpIHtcXG4gICAgbWlwID0gKHIwIC0gcm91Z2huZXNzKSAqIChtMSAtIG0wKSAvIChyMCAtIHIxKSArIG0wO1xcbiAgfSBlbHNlIGlmIChyb3VnaG5lc3MgPj0gcjQpIHtcXG4gICAgbWlwID0gKHIxIC0gcm91Z2huZXNzKSAqIChtNCAtIG0xKSAvIChyMSAtIHI0KSArIG0xO1xcbiAgfSBlbHNlIGlmIChyb3VnaG5lc3MgPj0gcjUpIHtcXG4gICAgbWlwID0gKHI0IC0gcm91Z2huZXNzKSAqIChtNSAtIG00KSAvIChyNCAtIHI1KSArIG00O1xcbiAgfSBlbHNlIGlmIChyb3VnaG5lc3MgPj0gcjYpIHtcXG4gICAgbWlwID0gKHI1IC0gcm91Z2huZXNzKSAqIChtNiAtIG01KSAvIChyNSAtIHI2KSArIG01O1xcbiAgfSBlbHNlIHtcXG4gICAgbWlwID0gLTIuMCAqIGxvZzIoMS4xNiAqIHJvdWdobmVzcyk7ICB9XFxuICByZXR1cm4gbWlwO1xcbn1cXG52ZWM0IHRleHR1cmVDdWJlVVYoc2FtcGxlcjJEIGVudk1hcCwgdmVjMyBzYW1wbGVEaXIsIGZsb2F0IHJvdWdobmVzcykge1xcbiAgZmxvYXQgbWlwID0gY2xhbXAocm91Z2huZXNzVG9NaXAocm91Z2huZXNzKSwgbTAsIGN1YmVVVl9tYXhNaXBMZXZlbCk7XFxuICBmbG9hdCBtaXBGID0gZnJhY3QobWlwKTtcXG4gIGZsb2F0IG1pcEludCA9IGZsb29yKG1pcCk7XFxuICB2ZWMzIGNvbG9yMCA9IGJpbGluZWFyQ3ViZVVWKGVudk1hcCwgc2FtcGxlRGlyLCBtaXBJbnQpO1xcbiAgaWYgKG1pcEYgPT0gMC4wKSB7XFxuICAgIHJldHVybiB2ZWM0KGNvbG9yMCwgMS4wKTtcXG4gIH0gZWxzZSB7XFxuICAgIHZlYzMgY29sb3IxID0gYmlsaW5lYXJDdWJlVVYoZW52TWFwLCBzYW1wbGVEaXIsIG1pcEludCArIDEuMCk7XFxuICAgIHJldHVybiB2ZWM0KG1peChjb2xvcjAsIGNvbG9yMSwgbWlwRiksIDEuMCk7XFxuICB9XFxufVxcbiNlbmRpZlwiLGRlZmF1bHRub3JtYWxfdmVydGV4OlwidmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG9iamVjdE5vcm1hbDtcXG4jaWZkZWYgVVNFX0lOU1RBTkNJTkdcXG5cXHRtYXQzIG0gPSBtYXQzKCBpbnN0YW5jZU1hdHJpeCApO1xcblxcdHRyYW5zZm9ybWVkTm9ybWFsIC89IHZlYzMoIGRvdCggbVsgMCBdLCBtWyAwIF0gKSwgZG90KCBtWyAxIF0sIG1bIDEgXSApLCBkb3QoIG1bIDIgXSwgbVsgMiBdICkgKTtcXG5cXHR0cmFuc2Zvcm1lZE5vcm1hbCA9IG0gKiB0cmFuc2Zvcm1lZE5vcm1hbDtcXG4jZW5kaWZcXG50cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIHRyYW5zZm9ybWVkTm9ybWFsO1xcbiNpZmRlZiBGTElQX1NJREVEXFxuXFx0dHJhbnNmb3JtZWROb3JtYWwgPSAtIHRyYW5zZm9ybWVkTm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdHZlYzMgdHJhbnNmb3JtZWRUYW5nZW50ID0gKCBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBvYmplY3RUYW5nZW50LCAwLjAgKSApLnh5ejtcXG5cXHQjaWZkZWYgRkxJUF9TSURFRFxcblxcdFxcdHRyYW5zZm9ybWVkVGFuZ2VudCA9IC0gdHJhbnNmb3JtZWRUYW5nZW50O1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlzcGxhY2VtZW50TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50U2NhbGU7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlwiLGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdHRyYW5zZm9ybWVkICs9IG5vcm1hbGl6ZSggb2JqZWN0Tm9ybWFsICkgKiAoIHRleHR1cmUyRCggZGlzcGxhY2VtZW50TWFwLCB2VXYgKS54ICogZGlzcGxhY2VtZW50U2NhbGUgKyBkaXNwbGFjZW1lbnRCaWFzICk7XFxuI2VuZGlmXCIsZW1pc3NpdmVtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dmVjNCBlbWlzc2l2ZUNvbG9yID0gdGV4dHVyZTJEKCBlbWlzc2l2ZU1hcCwgdlV2ICk7XFxuXFx0ZW1pc3NpdmVDb2xvci5yZ2IgPSBlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXIoIGVtaXNzaXZlQ29sb3IgKS5yZ2I7XFxuXFx0dG90YWxFbWlzc2l2ZVJhZGlhbmNlICo9IGVtaXNzaXZlQ29sb3IucmdiO1xcbiNlbmRpZlwiLGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZW1pc3NpdmVNYXA7XFxuI2VuZGlmXCIsZW5jb2RpbmdzX2ZyYWdtZW50OlwiZ2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7XCIsZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ6XCJcXG52ZWM0IExpbmVhclRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2YWx1ZTtcXG59XFxudmVjNCBHYW1tYVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUuYSApO1xcbn1cXG52ZWM0IExpbmVhclRvR2FtbWEoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IGdhbW1hRmFjdG9yICkge1xcblxcdHJldHVybiB2ZWM0KCBwb3coIHZhbHVlLnJnYiwgdmVjMyggMS4wIC8gZ2FtbWFGYWN0b3IgKSApLCB2YWx1ZS5hICk7XFxufVxcbnZlYzQgc1JHQlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiICogMC45NDc4NjcyOTg2ICsgdmVjMyggMC4wNTIxMzI3MDE0ICksIHZlYzMoIDIuNCApICksIHZhbHVlLnJnYiAqIDAuMDc3Mzk5MzgwOCwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjA0MDQ1ICkgKSApICksIHZhbHVlLmEgKTtcXG59XFxudmVjNCBMaW5lYXJUb3NSR0IoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIDAuNDE2NjYgKSApICogMS4wNTUgLSB2ZWMzKCAwLjA1NSApLCB2YWx1ZS5yZ2IgKiAxMi45MiwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjAwMzEzMDggKSApICkgKSwgdmFsdWUuYSApO1xcbn1cXG52ZWM0IFJHQkVUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogZXhwMiggdmFsdWUuYSAqIDI1NS4wIC0gMTI4LjAgKSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JFKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdGZsb2F0IG1heENvbXBvbmVudCA9IG1heCggbWF4KCB2YWx1ZS5yLCB2YWx1ZS5nICksIHZhbHVlLmIgKTtcXG5cXHRmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gZXhwMiggZkV4cCApLCAoIGZFeHAgKyAxMjguMCApIC8gMjU1LjAgKTtcXG59XFxudmVjNCBSR0JNVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiB2YWx1ZS5hICogbWF4UmFuZ2UsIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCTSggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0ZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS5yLCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcblxcdGZsb2F0IE0gPSBjbGFtcCggbWF4UkdCIC8gbWF4UmFuZ2UsIDAuMCwgMS4wICk7XFxuXFx0TSA9IGNlaWwoIE0gKiAyNTUuMCApIC8gMjU1LjA7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvICggTSAqIG1heFJhbmdlICksIE0gKTtcXG59XFxudmVjNCBSR0JEVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoICggbWF4UmFuZ2UgLyAyNTUuMCApIC8gdmFsdWUuYSApLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQkQoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUuciwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG5cXHRmbG9hdCBEID0gbWF4KCBtYXhSYW5nZSAvIG1heFJHQiwgMS4wICk7XFxuXFx0RCA9IGNsYW1wKCBmbG9vciggRCApIC8gMjU1LjAsIDAuMCwgMS4wICk7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggRCAqICggMjU1LjAgLyBtYXhSYW5nZSApICksIEQgKTtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2TSA9IG1hdDMoIDAuMjIwOSwgMC4zMzkwLCAwLjQxODQsIDAuMTEzOCwgMC42NzgwLCAwLjczMTksIDAuMDEwMiwgMC4xMTMwLCAwLjI5NjkgKTtcXG52ZWM0IExpbmVhclRvTG9nTHV2KCBpbiB2ZWM0IHZhbHVlICkgIHtcXG5cXHR2ZWMzIFhwX1lfWFlacCA9IGNMb2dMdXZNICogdmFsdWUucmdiO1xcblxcdFhwX1lfWFlacCA9IG1heCggWHBfWV9YWVpwLCB2ZWMzKCAxZS02LCAxZS02LCAxZS02ICkgKTtcXG5cXHR2ZWM0IHZSZXN1bHQ7XFxuXFx0dlJlc3VsdC54eSA9IFhwX1lfWFlacC54eSAvIFhwX1lfWFlacC56O1xcblxcdGZsb2F0IExlID0gMi4wICogbG9nMihYcF9ZX1hZWnAueSkgKyAxMjcuMDtcXG5cXHR2UmVzdWx0LncgPSBmcmFjdCggTGUgKTtcXG5cXHR2UmVzdWx0LnogPSAoIExlIC0gKCBmbG9vciggdlJlc3VsdC53ICogMjU1LjAgKSApIC8gMjU1LjAgKSAvIDI1NS4wO1xcblxcdHJldHVybiB2UmVzdWx0O1xcbn1cXG5jb25zdCBtYXQzIGNMb2dMdXZJbnZlcnNlTSA9IG1hdDMoIDYuMDAxNCwgLTIuNzAwOCwgLTEuNzk5NiwgLTEuMzMyMCwgMy4xMDI5LCAtNS43NzIxLCAwLjMwMDgsIC0xLjA4ODIsIDUuNjI2OCApO1xcbnZlYzQgTG9nTHV2VG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0ZmxvYXQgTGUgPSB2YWx1ZS56ICogMjU1LjAgKyB2YWx1ZS53O1xcblxcdHZlYzMgWHBfWV9YWVpwO1xcblxcdFhwX1lfWFlacC55ID0gZXhwMiggKCBMZSAtIDEyNy4wICkgLyAyLjAgKTtcXG5cXHRYcF9ZX1hZWnAueiA9IFhwX1lfWFlacC55IC8gdmFsdWUueTtcXG5cXHRYcF9ZX1hZWnAueCA9IHZhbHVlLnggKiBYcF9ZX1hZWnAuejtcXG5cXHR2ZWMzIHZSR0IgPSBjTG9nTHV2SW52ZXJzZU0gKiBYcF9ZX1hZWnAucmdiO1xcblxcdHJldHVybiB2ZWM0KCBtYXgoIHZSR0IsIDAuMCApLCAxLjAgKTtcXG59XCIsZW52bWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWZkZWYgRU5WX1dPUkxEUE9TXFxuXFx0XFx0dmVjMyBjYW1lcmFUb0ZyYWc7XFxuXFx0XFx0XFxuXFx0XFx0aWYgKCBpc09ydGhvZ3JhcGhpYyApIHtcXG5cXHRcXHRcXHRjYW1lcmFUb0ZyYWcgPSBub3JtYWxpemUoIHZlYzMoIC0gdmlld01hdHJpeFsgMCBdWyAyIF0sIC0gdmlld01hdHJpeFsgMSBdWyAyIF0sIC0gdmlld01hdHJpeFsgMiBdWyAyIF0gKSApO1xcblxcdFxcdH0gIGVsc2Uge1xcblxcdFxcdFxcdGNhbWVyYVRvRnJhZyA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbiApO1xcblxcdFxcdH1cXG5cXHRcXHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggbm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCBjYW1lcmFUb0ZyYWcsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb0ZyYWcsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcblxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBlbnZNYXAsIHJlZmxlY3RWZWMsIDAuMCApO1xcblxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxcblxcdFxcdHJlZmxlY3RWZWMgPSBub3JtYWxpemUoIHJlZmxlY3RWZWMgKTtcXG5cXHRcXHR2ZWMyIHNhbXBsZVVWID0gZXF1aXJlY3RVdiggcmVmbGVjdFZlYyApO1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdHJlZmxlY3RWZWMgPSBub3JtYWxpemUoIHJlZmxlY3RWZWMgKTtcXG5cXHRcXHR2ZWMzIHJlZmxlY3RWaWV3ID0gbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwgMC4wLCAxLjAgKSApO1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUgKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaWZuZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG5cXHRcXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxcblxcdFxcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfQUREIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsZW52bWFwX2NvbW1vbl9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHR1bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc2l0eTtcXG5cXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxuXFx0dW5pZm9ybSBpbnQgbWF4TWlwTGV2ZWw7XFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG5cXHQjZW5kaWZcXG5cXHRcXG4jZW5kaWZcIixlbnZtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0dW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHQjZGVmaW5lIEVOVl9XT1JMRFBPU1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZfV09STERQT1NcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2Vsc2VcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsZW52bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHxkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0I2RlZmluZSBFTlZfV09STERQT1NcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRU5WX1dPUkxEUE9TXFxuXFx0XFx0XFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGVudm1hcF9waHlzaWNhbF9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKVxcblxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZSQUNUSU9OXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2VuZGlmXFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgd29ybGROb3JtYWwsIDEuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHZlYzQoIDAuMCApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBQSSAqIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0U3BlY3VsYXJNSVBMZXZlbCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0ZmxvYXQgbWF4TUlQTGV2ZWxTY2FsYXIgPSBmbG9hdCggbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBzaWdtYSA9IFBJICogcm91Z2huZXNzICogcm91Z2huZXNzIC8gKCAxLjAgKyByb3VnaG5lc3MgKTtcXG5cXHRcXHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciArIGxvZzIoIHNpZ21hICk7XFxuXFx0XFx0cmV0dXJuIGNsYW1wKCBkZXNpcmVkTUlQTGV2ZWwsIDAuMCwgbWF4TUlQTGV2ZWxTY2FsYXIgKTtcXG5cXHR9XFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggY29uc3QgaW4gdmVjMyB2aWV3RGlyLCBjb25zdCBpbiB2ZWMzIG5vcm1hbCwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHQgIHZlYzMgcmVmbGVjdFZlYyA9IHJlZmxlY3QoIC12aWV3RGlyLCBub3JtYWwgKTtcXG5cXHRcXHQgIHJlZmxlY3RWZWMgPSBub3JtYWxpemUoIG1peCggcmVmbGVjdFZlYywgbm9ybWFsLCByb3VnaG5lc3MgKiByb3VnaG5lc3MpICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHQgIHZlYzMgcmVmbGVjdFZlYyA9IHJlZnJhY3QoIC12aWV3RGlyLCBub3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJlZmxlY3RWZWMgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCByZWZsZWN0VmVjLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0ZmxvYXQgc3BlY3VsYXJNSVBMZXZlbCA9IGdldFNwZWN1bGFyTUlQTGV2ZWwoIHJvdWdobmVzcywgbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdFxcdHZlYzMgcXVlcnlSZWZsZWN0VmVjID0gdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIGVudk1hcCwgcmVmbGVjdFZlYywgcm91Z2huZXNzICk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXFx0XFx0XFx0dmVjMiBzYW1wbGVVViA9IGVxdWlyZWN0VXYoIHJlZmxlY3RWZWMgKTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRExvZEVYVCggZW52TWFwLCBzYW1wbGVVViwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRCggZW52TWFwLCBzYW1wbGVVViwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX1NQSEVSRSApXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmlldyA9IG5vcm1hbGl6ZSggKCB2aWV3TWF0cml4ICogdmVjNCggcmVmbGVjdFZlYywgMC4wICkgKS54eXogKyB2ZWMzKCAwLjAsMC4wLDEuMCApICk7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkRMb2RFWFQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblxcdH1cXG4jZW5kaWZcIixlbnZtYXBfdmVydGV4OlwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWZkZWYgRU5WX1dPUkxEUE9TXFxuXFx0XFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgY2FtZXJhVG9WZXJ0ZXg7XFxuXFx0XFx0aWYgKCBpc09ydGhvZ3JhcGhpYyApIHsgXFxuXFx0XFx0XFx0Y2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHZlYzMoIC0gdmlld01hdHJpeFsgMCBdWyAyIF0sIC0gdmlld01hdHJpeFsgMSBdWyAyIF0sIC0gdmlld01hdHJpeFsgMiBdWyAyIF0gKSApO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0Y2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRcXHR9XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHRyYW5zZm9ybWVkTm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2UmVmbGVjdCA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGZvZ192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0ZPR1xcblxcdGZvZ0RlcHRoID0gLW12UG9zaXRpb24uejtcXG4jZW5kaWZcIixmb2dfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0ZPR1xcblxcdHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxuI2VuZGlmXCIsZm9nX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSAxLjAgLSBleHAoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBmb2dEZXB0aCAqIGZvZ0RlcHRoICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGZvZ0RlcHRoICk7XFxuXFx0I2VuZGlmXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xcbiNlbmRpZlwiLGZvZ19wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHR1bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxuXFx0dmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsZ3JhZGllbnRtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfR1JBRElFTlRNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBncmFkaWVudE1hcDtcXG4jZW5kaWZcXG52ZWMzIGdldEdyYWRpZW50SXJyYWRpYW5jZSggdmVjMyBub3JtYWwsIHZlYzMgbGlnaHREaXJlY3Rpb24gKSB7XFxuXFx0ZmxvYXQgZG90TkwgPSBkb3QoIG5vcm1hbCwgbGlnaHREaXJlY3Rpb24gKTtcXG5cXHR2ZWMyIGNvb3JkID0gdmVjMiggZG90TkwgKiAwLjUgKyAwLjUsIDAuMCApO1xcblxcdCNpZmRlZiBVU0VfR1JBRElFTlRNQVBcXG5cXHRcXHRyZXR1cm4gdGV4dHVyZTJEKCBncmFkaWVudE1hcCwgY29vcmQgKS5yZ2I7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZXR1cm4gKCBjb29yZC54IDwgMC43ICkgPyB2ZWMzKCAwLjcgKSA6IHZlYzMoIDEuMCApO1xcblxcdCNlbmRpZlxcbn1cIixsaWdodG1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHR2ZWM0IGxpZ2h0TWFwVGV4ZWw9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKTtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gUEkgKiBsaWdodE1hcFRleGVsVG9MaW5lYXIoIGxpZ2h0TWFwVGV4ZWwgKS5yZ2IgKiBsaWdodE1hcEludGVuc2l0eTtcXG4jZW5kaWZcIixsaWdodG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsbGlnaHRzX2xhbWJlcnRfdmVydGV4OlwidmVjMyBkaWZmdXNlID0gdmVjMyggMS4wICk7XFxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcXG5nZW9tZXRyeS5wb3NpdGlvbiA9IG12UG9zaXRpb24ueHl6O1xcbmdlb21ldHJ5Lm5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5nZW9tZXRyeS52aWV3RGlyID0gKCBpc09ydGhvZ3JhcGhpYyApID8gdmVjMyggMCwgMCwgMSApIDogbm9ybWFsaXplKCAtbXZQb3NpdGlvbi54eXogKTtcXG5HZW9tZXRyaWNDb250ZXh0IGJhY2tHZW9tZXRyeTtcXG5iYWNrR2VvbWV0cnkucG9zaXRpb24gPSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5iYWNrR2VvbWV0cnkubm9ybWFsID0gLWdlb21ldHJ5Lm5vcm1hbDtcXG5iYWNrR2VvbWV0cnkudmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XFxudkxpZ2h0RnJvbnQgPSB2ZWMzKCAwLjAgKTtcXG52SW5kaXJlY3RGcm9udCA9IHZlYzMoIDAuMCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XFxuXFx0dkluZGlyZWN0QmFjayA9IHZlYzMoIDAuMCApO1xcbiNlbmRpZlxcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuZmxvYXQgZG90Tkw7XFxudmVjMyBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxudkluZGlyZWN0RnJvbnQgKz0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG52SW5kaXJlY3RGcm9udCArPSBnZXRMaWdodFByb2JlSXJyYWRpYW5jZSggbGlnaHRQcm9iZSwgZ2VvbWV0cnkgKTtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dkluZGlyZWN0QmFjayArPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblxcdHZJbmRpcmVjdEJhY2sgKz0gZ2V0TGlnaHRQcm9iZUlycmFkaWFuY2UoIGxpZ2h0UHJvYmUsIGJhY2tHZW9tZXRyeSApO1xcbiNlbmRpZlxcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dkluZGlyZWN0RnJvbnQgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2SW5kaXJlY3RCYWNrICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgYmFja0dlb21ldHJ5ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXCIsbGlnaHRzX3BhcnNfYmVnaW46XCJ1bmlmb3JtIGJvb2wgcmVjZWl2ZVNoYWRvdztcXG51bmlmb3JtIHZlYzMgYW1iaWVudExpZ2h0Q29sb3I7XFxudW5pZm9ybSB2ZWMzIGxpZ2h0UHJvYmVbIDkgXTtcXG52ZWMzIHNoR2V0SXJyYWRpYW5jZUF0KCBpbiB2ZWMzIG5vcm1hbCwgaW4gdmVjMyBzaENvZWZmaWNpZW50c1sgOSBdICkge1xcblxcdGZsb2F0IHggPSBub3JtYWwueCwgeSA9IG5vcm1hbC55LCB6ID0gbm9ybWFsLno7XFxuXFx0dmVjMyByZXN1bHQgPSBzaENvZWZmaWNpZW50c1sgMCBdICogMC44ODYyMjc7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyAxIF0gKiAyLjAgKiAwLjUxMTY2NCAqIHk7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyAyIF0gKiAyLjAgKiAwLjUxMTY2NCAqIHo7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyAzIF0gKiAyLjAgKiAwLjUxMTY2NCAqIHg7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyA0IF0gKiAyLjAgKiAwLjQyOTA0MyAqIHggKiB5O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgNSBdICogMi4wICogMC40MjkwNDMgKiB5ICogejtcXG5cXHRyZXN1bHQgKz0gc2hDb2VmZmljaWVudHNbIDYgXSAqICggMC43NDMxMjUgKiB6ICogeiAtIDAuMjQ3NzA4ICk7XFxuXFx0cmVzdWx0ICs9IHNoQ29lZmZpY2llbnRzWyA3IF0gKiAyLjAgKiAwLjQyOTA0MyAqIHggKiB6O1xcblxcdHJlc3VsdCArPSBzaENvZWZmaWNpZW50c1sgOCBdICogMC40MjkwNDMgKiAoIHggKiB4IC0geSAqIHkgKTtcXG5cXHRyZXR1cm4gcmVzdWx0O1xcbn1cXG52ZWMzIGdldExpZ2h0UHJvYmVJcnJhZGlhbmNlKCBjb25zdCBpbiB2ZWMzIGxpZ2h0UHJvYmVbIDkgXSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSApIHtcXG5cXHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggZ2VvbWV0cnkubm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gc2hHZXRJcnJhZGlhbmNlQXQoIHdvcmxkTm9ybWFsLCBsaWdodFByb2JlICk7XFxuXFx0cmV0dXJuIGlycmFkaWFuY2U7XFxufVxcbnZlYzMgZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBhbWJpZW50TGlnaHRDb2xvciApIHtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBhbWJpZW50TGlnaHRDb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdHJldHVybiBpcnJhZGlhbmNlO1xcbn1cXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHRTaGFkb3cge1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHR9O1xcblxcdFxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodFNoYWRvdyBkaXJlY3Rpb25hbExpZ2h0U2hhZG93c1sgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0dm9pZCBnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IGRpcmVjdGlvbmFsTGlnaHQuY29sb3I7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gZGlyZWN0aW9uYWxMaWdodC5kaXJlY3Rpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdHN0cnVjdCBQb2ludExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIFBvaW50TGlnaHQgcG9pbnRMaWdodHNbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFxcdHN0cnVjdCBQb2ludExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgc2hhZG93Q2FtZXJhTmVhcjtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFGYXI7XFxuXFx0XFx0fTtcXG5cXHRcXHR1bmlmb3JtIFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodFNoYWRvd3NbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0dm9pZCBnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gUG9pbnRMaWdodCBwb2ludExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHR2ZWMzIGxWZWN0b3IgPSBwb2ludExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gcG9pbnRMaWdodC5jb2xvcjtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBwb2ludExpZ2h0LmRpc3RhbmNlLCBwb2ludExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9ICggZGlyZWN0TGlnaHQuY29sb3IgIT0gdmVjMyggMC4wICkgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgU3BvdExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0XFx0ZmxvYXQgY29uZUNvcztcXG5cXHRcXHRmbG9hdCBwZW51bWJyYUNvcztcXG5cXHR9O1xcblxcdHVuaWZvcm0gU3BvdExpZ2h0IHNwb3RMaWdodHNbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfU0hBRE9XTUFQICkgJiYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHRzdHJ1Y3QgU3BvdExpZ2h0U2hhZG93IHtcXG5cXHRcXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0fTtcXG5cXHRcXHR1bmlmb3JtIFNwb3RMaWdodFNoYWRvdyBzcG90TGlnaHRTaGFkb3dzWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0dm9pZCBnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBTcG90TGlnaHQgc3BvdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCAgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gc3BvdExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRpZiAoIGFuZ2xlQ29zID4gc3BvdExpZ2h0LmNvbmVDb3MgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc3BvdEVmZmVjdCA9IHNtb290aHN0ZXAoIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBzcG90TGlnaHQuY29sb3I7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gc3BvdEVmZmVjdCAqIHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSwgc3BvdExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUmVjdEFyZWFMaWdodCB7XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoO1xcblxcdFxcdHZlYzMgaGFsZkhlaWdodDtcXG5cXHR9O1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y18xO1xcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y18yO1xcblxcdHVuaWZvcm0gUmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0c1sgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgXTtcXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblxcdHN0cnVjdCBIZW1pc3BoZXJlTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgc2t5Q29sb3I7XFxuXFx0XFx0dmVjMyBncm91bmRDb2xvcjtcXG5cXHR9O1xcblxcdHVuaWZvcm0gSGVtaXNwaGVyZUxpZ2h0IGhlbWlzcGhlcmVMaWdodHNbIE5VTV9IRU1JX0xJR0hUUyBdO1xcblxcdHZlYzMgZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gSGVtaXNwaGVyZUxpZ2h0IGhlbWlMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSApIHtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoZW1pTGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3ROTCArIDAuNTtcXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBtaXgoIGhlbWlMaWdodC5ncm91bmRDb2xvciwgaGVtaUxpZ2h0LnNreUNvbG9yLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGlycmFkaWFuY2U7XFxuXFx0fVxcbiNlbmRpZlwiLGxpZ2h0c190b29uX2ZyYWdtZW50OlwiVG9vbk1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxubWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IHNwZWN1bGFyO1xcbm1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzID0gc2hpbmluZXNzO1xcbm1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGggPSBzcGVjdWxhclN0cmVuZ3RoO1wiLGxpZ2h0c190b29uX3BhcnNfZnJhZ21lbnQ6XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuc3RydWN0IFRvb25NYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHR2ZWMzXFx0c3BlY3VsYXJDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyU2hpbmluZXNzO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTdHJlbmd0aDtcXG59O1xcbnZvaWQgUkVfRGlyZWN0X1Rvb24oIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFRvb25NYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfQmxpbm5QaG9uZyggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyApICogbWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aDtcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfVG9vbiggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBUb29uTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9Ub29uXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfVG9vblxcbiNkZWZpbmUgTWF0ZXJpYWxfTGlnaHRQcm9iZUxPRCggbWF0ZXJpYWwgKVxcdCgwKVwiLGxpZ2h0c19waG9uZ19mcmFnbWVudDpcIkJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiO1xcbm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBzcGVjdWxhcjtcXG5tYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyA9IHNoaW5pbmVzcztcXG5tYXRlcmlhbC5zcGVjdWxhclN0cmVuZ3RoID0gc3BlY3VsYXJTdHJlbmd0aDtcIixsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudDpcInZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG5zdHJ1Y3QgQmxpbm5QaG9uZ01hdGVyaWFsIHtcXG5cXHR2ZWMzXFx0ZGlmZnVzZUNvbG9yO1xcblxcdHZlYzNcXHRzcGVjdWxhckNvbG9yO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTaGluaW5lc3M7XFxuXFx0ZmxvYXRcXHRzcGVjdWxhclN0cmVuZ3RoO1xcbn07XFxudm9pZCBSRV9EaXJlY3RfQmxpbm5QaG9uZyggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgKSAqIG1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGg7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmcoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmdcXG4jZGVmaW5lIE1hdGVyaWFsX0xpZ2h0UHJvYmVMT0QoIG1hdGVyaWFsIClcXHQoMClcIixsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ6XCJQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xcbnZlYzMgZHh5ID0gbWF4KCBhYnMoIGRGZHgoIGdlb21ldHJ5Tm9ybWFsICkgKSwgYWJzKCBkRmR5KCBnZW9tZXRyeU5vcm1hbCApICkgKTtcXG5mbG9hdCBnZW9tZXRyeVJvdWdobmVzcyA9IG1heCggbWF4KCBkeHkueCwgZHh5LnkgKSwgZHh5LnogKTtcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1heCggcm91Z2huZXNzRmFjdG9yLCAwLjA1MjUgKTttYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyArPSBnZW9tZXRyeVJvdWdobmVzcztcXG5tYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1pbiggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MsIDEuMCApO1xcbiNpZmRlZiBSRUZMRUNUSVZJVFlcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UICogcG93MiggcmVmbGVjdGl2aXR5ICkgKSwgZGlmZnVzZUNvbG9yLnJnYiwgbWV0YWxuZXNzRmFjdG9yICk7XFxuI2Vsc2VcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xcbiNlbmRpZlxcbiNpZmRlZiBDTEVBUkNPQVRcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXQgPSBjbGVhcmNvYXQ7XFxuXFx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzID0gY2xlYXJjb2F0Um91Z2huZXNzO1xcblxcdCNpZmRlZiBVU0VfQ0xFQVJDT0FUTUFQXFxuXFx0XFx0bWF0ZXJpYWwuY2xlYXJjb2F0ICo9IHRleHR1cmUyRCggY2xlYXJjb2F0TWFwLCB2VXYgKS54O1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBVU0VfQ0xFQVJDT0FUX1JPVUdITkVTU01BUFxcblxcdFxcdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyAqPSB0ZXh0dXJlMkQoIGNsZWFyY29hdFJvdWdobmVzc01hcCwgdlV2ICkueTtcXG5cXHQjZW5kaWZcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXQgPSBzYXR1cmF0ZSggbWF0ZXJpYWwuY2xlYXJjb2F0ICk7XFx0bWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzID0gbWF4KCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MsIDAuMDUyNSApO1xcblxcdG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcyArPSBnZW9tZXRyeVJvdWdobmVzcztcXG5cXHRtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgPSBtaW4oIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcywgMS4wICk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9TSEVFTlxcblxcdG1hdGVyaWFsLnNoZWVuQ29sb3IgPSBzaGVlbjtcXG4jZW5kaWZcIixsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudDpcInN0cnVjdCBQaHlzaWNhbE1hdGVyaWFsIHtcXG5cXHR2ZWMzXFx0ZGlmZnVzZUNvbG9yO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJSb3VnaG5lc3M7XFxuXFx0dmVjM1xcdHNwZWN1bGFyQ29sb3I7XFxuI2lmZGVmIENMRUFSQ09BVFxcblxcdGZsb2F0IGNsZWFyY29hdDtcXG5cXHRmbG9hdCBjbGVhcmNvYXRSb3VnaG5lc3M7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9TSEVFTlxcblxcdHZlYzMgc2hlZW5Db2xvcjtcXG4jZW5kaWZcXG59O1xcbiNkZWZpbmUgTUFYSU1VTV9TUEVDVUxBUl9DT0VGRklDSUVOVCAwLjE2XFxuI2RlZmluZSBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMDRcXG5mbG9hdCBjbGVhcmNvYXRESFJBcHByb3goIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkwgKSB7XFxuXFx0cmV0dXJuIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKyAoIDEuMCAtIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSAqICggcG93KCAxLjAgLSBkb3ROTCwgNS4wICkgKiBwb3coIDEuMCAtIHJvdWdobmVzcywgMi4wICkgKTtcXG59XFxuI2lmIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMFxcblxcdHZvaWQgUkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsKCBjb25zdCBpbiBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbm9ybWFsID0gZ2VvbWV0cnkubm9ybWFsO1xcblxcdFxcdHZlYzMgdmlld0RpciA9IGdlb21ldHJ5LnZpZXdEaXI7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdHZlYzMgbGlnaHRQb3MgPSByZWN0QXJlYUxpZ2h0LnBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoID0gcmVjdEFyZWFMaWdodC5oYWxmV2lkdGg7XFxuXFx0XFx0dmVjMyBoYWxmSGVpZ2h0ID0gcmVjdEFyZWFMaWdodC5oYWxmSGVpZ2h0O1xcblxcdFxcdHZlYzMgbGlnaHRDb2xvciA9IHJlY3RBcmVhTGlnaHQuY29sb3I7XFxuXFx0XFx0ZmxvYXQgcm91Z2huZXNzID0gbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3M7XFxuXFx0XFx0dmVjMyByZWN0Q29vcmRzWyA0IF07XFxuXFx0XFx0cmVjdENvb3Jkc1sgMCBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcdFxcdHJlY3RDb29yZHNbIDEgXSA9IGxpZ2h0UG9zIC0gaGFsZldpZHRoIC0gaGFsZkhlaWdodDtcXG5cXHRcXHRyZWN0Q29vcmRzWyAyIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XFxuXFx0XFx0cmVjdENvb3Jkc1sgMyBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xcblxcdFxcdHZlYzIgdXYgPSBMVENfVXYoIG5vcm1hbCwgdmlld0Rpciwgcm91Z2huZXNzICk7XFxuXFx0XFx0dmVjNCB0MSA9IHRleHR1cmUyRCggbHRjXzEsIHV2ICk7XFxuXFx0XFx0dmVjNCB0MiA9IHRleHR1cmUyRCggbHRjXzIsIHV2ICk7XFxuXFx0XFx0bWF0MyBtSW52ID0gbWF0MyhcXG5cXHRcXHRcXHR2ZWMzKCB0MS54LCAwLCB0MS55ICksXFxuXFx0XFx0XFx0dmVjMyggICAgMCwgMSwgICAgMCApLFxcblxcdFxcdFxcdHZlYzMoIHQxLnosIDAsIHQxLncgKVxcblxcdFxcdCk7XFxuXFx0XFx0dmVjMyBmcmVzbmVsID0gKCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yICogdDIueCArICggdmVjMyggMS4wICkgLSBtYXRlcmlhbC5zcGVjdWxhckNvbG9yICkgKiB0Mi55ICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gbGlnaHRDb2xvciAqIGZyZXNuZWwgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1JbnYsIHJlY3RDb29yZHMgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGxpZ2h0Q29sb3IgKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1hdDMoIDEuMCApLCByZWN0Q29vcmRzICk7XFxuXFx0fVxcbiNlbmRpZlxcbnZvaWQgUkVfRGlyZWN0X1BoeXNpY2FsKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIENMRUFSQ09BVFxcblxcdFxcdGZsb2F0IGNjRG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0XFx0dmVjMyBjY0lycmFkaWFuY2UgPSBjY0RvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0XFx0Y2NJcnJhZGlhbmNlICo9IFBJO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdGZsb2F0IGNsZWFyY29hdERIUiA9IG1hdGVyaWFsLmNsZWFyY29hdCAqIGNsZWFyY29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzLCBjY0RvdE5MICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gY2NJcnJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJjb2F0ICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5jbGVhcmNvYXROb3JtYWwsIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhcmNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIFVTRV9TSEVFTlxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJjb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9TaGVlbihcXG5cXHRcXHRcXHRtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyxcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24sXFxuXFx0XFx0XFx0Z2VvbWV0cnksXFxuXFx0XFx0XFx0bWF0ZXJpYWwuc2hlZW5Db2xvclxcblxcdFxcdCk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSAoIDEuMCAtIGNsZWFyY29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSAoIDEuMCAtIGNsZWFyY29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyByYWRpYW5jZSwgY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiB2ZWMzIGNsZWFyY29hdFJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCkge1xcblxcdCNpZmRlZiBDTEVBUkNPQVRcXG5cXHRcXHRmbG9hdCBjY0RvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9IGNsZWFyY29hdFJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJjb2F0ICogQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgKTtcXG5cXHRcXHRmbG9hdCBjY0RvdE5MID0gY2NEb3ROVjtcXG5cXHRcXHRmbG9hdCBjbGVhcmNvYXRESFIgPSBtYXRlcmlhbC5jbGVhcmNvYXQgKiBjbGVhcmNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyY29hdFJvdWdobmVzcywgY2NEb3ROTCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgY2xlYXJjb2F0REhSID0gMC4wO1xcblxcdCNlbmRpZlxcblxcdGZsb2F0IGNsZWFyY29hdEludiA9IDEuMCAtIGNsZWFyY29hdERIUjtcXG5cXHR2ZWMzIHNpbmdsZVNjYXR0ZXJpbmcgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIG11bHRpU2NhdHRlcmluZyA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzMgY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlID0gaXJyYWRpYW5jZSAqIFJFQ0lQUk9DQUxfUEk7XFxuXFx0QlJERl9TcGVjdWxhcl9NdWx0aXNjYXR0ZXJpbmdfRW52aXJvbm1lbnQoIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcywgc2luZ2xlU2NhdHRlcmluZywgbXVsdGlTY2F0dGVyaW5nICk7XFxuXFx0dmVjMyBkaWZmdXNlID0gbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICogKCAxLjAgLSAoIHNpbmdsZVNjYXR0ZXJpbmcgKyBtdWx0aVNjYXR0ZXJpbmcgKSApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gY2xlYXJjb2F0SW52ICogcmFkaWFuY2UgKiBzaW5nbGVTY2F0dGVyaW5nO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gbXVsdGlTY2F0dGVyaW5nICogY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBkaWZmdXNlICogY29zaW5lV2VpZ2h0ZWRJcnJhZGlhbmNlO1xcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfRGlyZWN0X1JlY3RBcmVhXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0luZGlyZWN0U3BlY3VsYXJcXHRcXHRSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsXFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdHJldHVybiBzYXR1cmF0ZSggcG93KCBkb3ROViArIGFtYmllbnRPY2NsdXNpb24sIGV4cDIoIC0gMTYuMCAqIHJvdWdobmVzcyAtIDEuMCApICkgLSAxLjAgKyBhbWJpZW50T2NjbHVzaW9uICk7XFxufVwiLGxpZ2h0c19mcmFnbWVudF9iZWdpbjpcIlxcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XFxuZ2VvbWV0cnkucG9zaXRpb24gPSAtIHZWaWV3UG9zaXRpb247XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSAoIGlzT3J0aG9ncmFwaGljICkgPyB2ZWMzKCAwLCAwLCAxICkgOiBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG4jaWZkZWYgQ0xFQVJDT0FUXFxuXFx0Z2VvbWV0cnkuY2xlYXJjb2F0Tm9ybWFsID0gY2xlYXJjb2F0Tm9ybWFsO1xcbiNlbmRpZlxcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuI2lmICggTlVNX1BPSU5UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodFNoYWRvdztcXG5cXHQjZW5kaWZcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiAoIFVOUk9MTEVEX0xPT1BfSU5ERVggPCBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyApXFxuXFx0XFx0cG9pbnRMaWdodFNoYWRvdyA9IHBvaW50TGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0TGlnaHQudmlzaWJsZSwgcmVjZWl2ZVNoYWRvdyApICkgPyBnZXRQb2ludFNoYWRvdyggcG9pbnRTaGFkb3dNYXBbIGkgXSwgcG9pbnRMaWdodFNoYWRvdy5zaGFkb3dNYXBTaXplLCBwb2ludExpZ2h0U2hhZG93LnNoYWRvd0JpYXMsIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93UmFkaXVzLCB2UG9pbnRTaGFkb3dDb29yZFsgaSBdLCBwb2ludExpZ2h0U2hhZG93LnNoYWRvd0NhbWVyYU5lYXIsIHBvaW50TGlnaHRTaGFkb3cuc2hhZG93Q2FtZXJhRmFyICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcbiNlbmRpZlxcbiNpZiAoIE5VTV9TUE9UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9TSEFET1dNQVAgKSAmJiBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFNwb3RMaWdodFNoYWRvdyBzcG90TGlnaHRTaGFkb3c7XFxuXFx0I2VuZGlmXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRzcG90TGlnaHQgPSBzcG90TGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmICggVU5ST0xMRURfTE9PUF9JTkRFWCA8IE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgKVxcblxcdFxcdHNwb3RMaWdodFNoYWRvdyA9IHNwb3RMaWdodFNoYWRvd3NbIGkgXTtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3RMaWdodC52aXNpYmxlLCByZWNlaXZlU2hhZG93ICkgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHRTaGFkb3cuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0U2hhZG93LnNoYWRvd0JpYXMsIHNwb3RMaWdodFNoYWRvdy5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgKCBOVU1fRElSX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHREaXJlY3Rpb25hbExpZ2h0U2hhZG93IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3c7XFxuXFx0I2VuZGlmXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggVVNFX1NIQURPV01BUCApICYmICggVU5ST0xMRURfTE9PUF9JTkRFWCA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUyApXFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodFNoYWRvdyA9IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0TGlnaHQudmlzaWJsZSwgcmVjZWl2ZVNoYWRvdyApICkgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3cuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodFNoYWRvdy5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG4jZW5kaWZcXG4jaWYgKCBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3RfUmVjdEFyZWEgKVxcblxcdFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodDtcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1JFQ1RfQVJFQV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cmVjdEFyZWFMaWdodCA9IHJlY3RBcmVhTGlnaHRzWyBpIF07XFxuXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhKCByZWN0QXJlYUxpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0RGlmZnVzZSApXFxuXFx0dmVjMyBpYmxJcnJhZGlhbmNlID0gdmVjMyggMC4wICk7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG5cXHRpcnJhZGlhbmNlICs9IGdldExpZ2h0UHJvYmVJcnJhZGlhbmNlKCBsaWdodFByb2JlLCBnZW9tZXRyeSApO1xcblxcdCNpZiAoIE5VTV9IRU1JX0xJR0hUUyA+IDAgKVxcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0XFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXFx0XFx0fVxcblxcdFxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxcblxcdHZlYzMgcmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIGNsZWFyY29hdFJhZGlhbmNlID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXCIsbGlnaHRzX2ZyYWdtZW50X21hcHM6XCIjaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHQjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0XFx0dmVjNCBsaWdodE1hcFRleGVsPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICk7XFxuXFx0XFx0dmVjMyBsaWdodE1hcElycmFkaWFuY2UgPSBsaWdodE1hcFRleGVsVG9MaW5lYXIoIGxpZ2h0TWFwVGV4ZWwgKS5yZ2IgKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRsaWdodE1hcElycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBsaWdodE1hcElycmFkaWFuY2U7XFxuXFx0I2VuZGlmXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBTVEFOREFSRCApICYmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdGlibElycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggZ2VvbWV0cnksIG1heE1pcExldmVsICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBSRV9JbmRpcmVjdFNwZWN1bGFyIClcXG5cXHRyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcywgbWF4TWlwTGV2ZWwgKTtcXG5cXHQjaWZkZWYgQ0xFQVJDT0FUXFxuXFx0XFx0Y2xlYXJjb2F0UmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5LmNsZWFyY29hdE5vcm1hbCwgbWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzLCBtYXhNaXBMZXZlbCApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLGxpZ2h0c19mcmFnbWVudF9lbmQ6XCIjaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHRSRV9JbmRpcmVjdERpZmZ1c2UoIGlycmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3RTcGVjdWxhciApXFxuXFx0UkVfSW5kaXJlY3RTcGVjdWxhciggcmFkaWFuY2UsIGlibElycmFkaWFuY2UsIGNsZWFyY29hdFJhZGlhbmNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGICkgJiYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGX0VYVCApXFxuXFx0Z2xfRnJhZ0RlcHRoRVhUID0gdklzUGVyc3BlY3RpdmUgPT0gMC4wID8gZ2xfRnJhZ0Nvb3JkLnogOiBsb2cyKCB2RnJhZ0RlcHRoICkgKiBsb2dEZXB0aEJ1ZkZDICogMC41O1xcbiNlbmRpZlwiLGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGICkgJiYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGX0VYVCApXFxuXFx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcblxcdHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcXG5cXHR2YXJ5aW5nIGZsb2F0IHZJc1BlcnNwZWN0aXZlO1xcbiNlbmRpZlwiLGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xcblxcdFxcdHZhcnlpbmcgZmxvYXQgdklzUGVyc3BlY3RpdmU7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfdmVydGV4OlwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dkZyYWdEZXB0aCA9IDEuMCArIGdsX1Bvc2l0aW9uLnc7XFxuXFx0XFx0dklzUGVyc3BlY3RpdmUgPSBmbG9hdCggaXNQZXJzcGVjdGl2ZU1hdHJpeCggcHJvamVjdGlvbk1hdHJpeCApICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRpZiAoIGlzUGVyc3BlY3RpdmVNYXRyaXgoIHByb2plY3Rpb25NYXRyaXggKSApIHtcXG5cXHRcXHRcXHRnbF9Qb3NpdGlvbi56ID0gbG9nMiggbWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkgKSAqIGxvZ0RlcHRoQnVmRkMgLSAxLjA7XFxuXFx0XFx0XFx0Z2xfUG9zaXRpb24ueiAqPSBnbF9Qb3NpdGlvbi53O1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHZlYzQgdGV4ZWxDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VXYgKTtcXG5cXHR0ZXhlbENvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4ZWxDb2xvciApO1xcblxcdGRpZmZ1c2VDb2xvciAqPSB0ZXhlbENvbG9yO1xcbiNlbmRpZlwiLG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXCIsbWFwX3BhcnRpY2xlX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKVxcblxcdHZlYzIgdXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggZ2xfUG9pbnRDb29yZC54LCAxLjAgLSBnbF9Qb2ludENvb3JkLnksIDEgKSApLnh5O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCBtYXBUZXhlbCA9IHRleHR1cmUyRCggbWFwLCB1diApO1xcblxcdGRpZmZ1c2VDb2xvciAqPSBtYXBUZXhlbFRvTGluZWFyKCBtYXBUZXhlbCApO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB1diApLmc7XFxuI2VuZGlmXCIsbWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApXFxuXFx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDtcXG4jZW5kaWZcIixtZXRhbG5lc3NtYXBfZnJhZ21lbnQ6XCJmbG9hdCBtZXRhbG5lc3NGYWN0b3IgPSBtZXRhbG5lc3M7XFxuI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR2ZWM0IHRleGVsTWV0YWxuZXNzID0gdGV4dHVyZTJEKCBtZXRhbG5lc3NNYXAsIHZVdiApO1xcblxcdG1ldGFsbmVzc0ZhY3RvciAqPSB0ZXhlbE1ldGFsbmVzcy5iO1xcbiNlbmRpZlwiLG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XFxuI2VuZGlmXCIsbW9ycGhub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRvYmplY3ROb3JtYWwgKj0gbW9ycGhUYXJnZXRCYXNlSW5mbHVlbmNlO1xcblxcdG9iamVjdE5vcm1hbCArPSBtb3JwaE5vcm1hbDAgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gbW9ycGhOb3JtYWwxICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9IG1vcnBoTm9ybWFsMiAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcblxcdG9iamVjdE5vcm1hbCArPSBtb3JwaE5vcm1hbDMgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG4jZW5kaWZcIixtb3JwaHRhcmdldF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2U7XFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDggXTtcXG5cXHQjZWxzZVxcblxcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbW9ycGh0YXJnZXRfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHR0cmFuc2Zvcm1lZCAqPSBtb3JwaFRhcmdldEJhc2VJbmZsdWVuY2U7XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQwICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQxICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQyICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQzICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ0ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ1ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA1IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ2ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA2IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gbW9ycGhUYXJnZXQ3ICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsbm9ybWFsX2ZyYWdtZW50X2JlZ2luOlwiI2lmZGVmIEZMQVRfU0hBREVEXFxuXFx0dmVjMyBmZHggPSB2ZWMzKCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeCggdlZpZXdQb3NpdGlvbi55ICksIGRGZHgoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXFx0dmVjMyBmZHkgPSB2ZWMzKCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeSggdlZpZXdQb3NpdGlvbi55ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXFx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIGNyb3NzKCBmZHgsIGZkeSApICk7XFxuI2Vsc2VcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggdk5vcm1hbCApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRub3JtYWwgPSBub3JtYWwgKiAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0dmVjMyB0YW5nZW50ID0gbm9ybWFsaXplKCB2VGFuZ2VudCApO1xcblxcdFxcdHZlYzMgYml0YW5nZW50ID0gbm9ybWFsaXplKCB2Qml0YW5nZW50ICk7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHRhbmdlbnQgPSB0YW5nZW50ICogKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdFxcdFxcdGJpdGFuZ2VudCA9IGJpdGFuZ2VudCAqICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHQjaWYgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQIClcXG5cXHRcXHRcXHRtYXQzIHZUQk4gPSBtYXQzKCB0YW5nZW50LCBiaXRhbmdlbnQsIG5vcm1hbCApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbmRpZlxcbiNlbmRpZlxcbnZlYzMgZ2VvbWV0cnlOb3JtYWwgPSBub3JtYWw7XCIsbm9ybWFsX2ZyYWdtZW50X21hcHM6XCIjaWZkZWYgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXFxuXFx0bm9ybWFsID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcXG5cXHQjaWZkZWYgRkxJUF9TSURFRFxcblxcdFxcdG5vcm1hbCA9IC0gbm9ybWFsO1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRub3JtYWwgPSBub3JtYWwgKiAoIGZsb2F0KCBnbF9Gcm9udEZhY2luZyApICogMi4wIC0gMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0bm9ybWFsID0gbm9ybWFsaXplKCBub3JtYWxNYXRyaXggKiBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQIClcXG5cXHR2ZWMzIG1hcE4gPSB0ZXh0dXJlMkQoIG5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcblxcdG1hcE4ueHkgKj0gbm9ybWFsU2NhbGU7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0bm9ybWFsID0gbm9ybWFsaXplKCB2VEJOICogbWFwTiApO1xcblxcdCNlbHNlXFxuXFx0XFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIG1hcE4gKTtcXG5cXHQjZW5kaWZcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcIixub3JtYWxtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcXG4jZW5kaWZcXG4jaWZkZWYgT0JKRUNUU1BBQ0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcXG4jZW5kaWZcXG4jaWYgISBkZWZpbmVkICggVVNFX1RBTkdFTlQgKSAmJiAoIGRlZmluZWQgKCBUQU5HRU5UU1BBQ0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCAoIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQICkgKVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbDJBcmIoIHZlYzMgZXllX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzMgbWFwTiApIHtcXG5cXHRcXHR2ZWMzIHEwID0gdmVjMyggZEZkeCggZXllX3Bvcy54ICksIGRGZHgoIGV5ZV9wb3MueSApLCBkRmR4KCBleWVfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgcTEgPSB2ZWMzKCBkRmR5KCBleWVfcG9zLnggKSwgZEZkeSggZXllX3Bvcy55ICksIGRGZHkoIGV5ZV9wb3MueiApICk7XFxuXFx0XFx0dmVjMiBzdDAgPSBkRmR4KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xcblxcdFxcdGZsb2F0IHNjYWxlID0gc2lnbiggc3QxLnQgKiBzdDAucyAtIHN0MC50ICogc3QxLnMgKTtcXG5cXHRcXHR2ZWMzIFMgPSBub3JtYWxpemUoICggcTAgKiBzdDEudCAtIHExICogc3QwLnQgKSAqIHNjYWxlICk7XFxuXFx0XFx0dmVjMyBUID0gbm9ybWFsaXplKCAoIC0gcTAgKiBzdDEucyArIHExICogc3QwLnMgKSAqIHNjYWxlICk7XFxuXFx0XFx0dmVjMyBOID0gbm9ybWFsaXplKCBzdXJmX25vcm0gKTtcXG5cXHRcXHRtYXQzIHRzbiA9IG1hdDMoIFMsIFQsIE4gKTtcXG5cXHRcXHRtYXBOLnh5ICo9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxuXFx0fVxcbiNlbmRpZlwiLGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfYmVnaW46XCIjaWZkZWYgQ0xFQVJDT0FUXFxuXFx0dmVjMyBjbGVhcmNvYXROb3JtYWwgPSBnZW9tZXRyeU5vcm1hbDtcXG4jZW5kaWZcIixjbGVhcmNvYXRfbm9ybWFsX2ZyYWdtZW50X21hcHM6XCIjaWZkZWYgVVNFX0NMRUFSQ09BVF9OT1JNQUxNQVBcXG5cXHR2ZWMzIGNsZWFyY29hdE1hcE4gPSB0ZXh0dXJlMkQoIGNsZWFyY29hdE5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcblxcdGNsZWFyY29hdE1hcE4ueHkgKj0gY2xlYXJjb2F0Tm9ybWFsU2NhbGU7XFxuXFx0I2lmZGVmIFVTRV9UQU5HRU5UXFxuXFx0XFx0Y2xlYXJjb2F0Tm9ybWFsID0gbm9ybWFsaXplKCB2VEJOICogY2xlYXJjb2F0TWFwTiApO1xcblxcdCNlbHNlXFxuXFx0XFx0Y2xlYXJjb2F0Tm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC0gdlZpZXdQb3NpdGlvbiwgY2xlYXJjb2F0Tm9ybWFsLCBjbGVhcmNvYXRNYXBOICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsY2xlYXJjb2F0X3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0NMRUFSQ09BVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGNsZWFyY29hdE1hcDtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0NMRUFSQ09BVF9ST1VHSE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBjbGVhcmNvYXRSb3VnaG5lc3NNYXA7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9DTEVBUkNPQVRfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgY2xlYXJjb2F0Tm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBjbGVhcmNvYXROb3JtYWxTY2FsZTtcXG4jZW5kaWZcIixwYWNraW5nOlwidmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xcblxcdHJldHVybiBub3JtYWxpemUoIG5vcm1hbCApICogMC41ICsgMC41O1xcbn1cXG52ZWMzIHVucGFja1JHQlRvTm9ybWFsKCBjb25zdCBpbiB2ZWMzIHJnYiApIHtcXG5cXHRyZXR1cm4gMi4wICogcmdiLnh5eiAtIDEuMDtcXG59XFxuY29uc3QgZmxvYXQgUGFja1Vwc2NhbGUgPSAyNTYuIC8gMjU1Ljtjb25zdCBmbG9hdCBVbnBhY2tEb3duc2NhbGUgPSAyNTUuIC8gMjU2LjtcXG5jb25zdCB2ZWMzIFBhY2tGYWN0b3JzID0gdmVjMyggMjU2LiAqIDI1Ni4gKiAyNTYuLCAyNTYuICogMjU2LiwgIDI1Ni4gKTtcXG5jb25zdCB2ZWM0IFVucGFja0ZhY3RvcnMgPSBVbnBhY2tEb3duc2NhbGUgLyB2ZWM0KCBQYWNrRmFjdG9ycywgMS4gKTtcXG5jb25zdCBmbG9hdCBTaGlmdFJpZ2h0OCA9IDEuIC8gMjU2LjtcXG52ZWM0IHBhY2tEZXB0aFRvUkdCQSggY29uc3QgaW4gZmxvYXQgdiApIHtcXG5cXHR2ZWM0IHIgPSB2ZWM0KCBmcmFjdCggdiAqIFBhY2tGYWN0b3JzICksIHYgKTtcXG5cXHRyLnl6dyAtPSByLnh5eiAqIFNoaWZ0UmlnaHQ4O1xcdHJldHVybiByICogUGFja1Vwc2NhbGU7XFxufVxcbmZsb2F0IHVucGFja1JHQkFUb0RlcHRoKCBjb25zdCBpbiB2ZWM0IHYgKSB7XFxuXFx0cmV0dXJuIGRvdCggdiwgVW5wYWNrRmFjdG9ycyApO1xcbn1cXG52ZWM0IHBhY2sySGFsZlRvUkdCQSggdmVjMiB2ICkge1xcblxcdHZlYzQgciA9IHZlYzQoIHYueCwgZnJhY3QoIHYueCAqIDI1NS4wICksIHYueSwgZnJhY3QoIHYueSAqIDI1NS4wICkpO1xcblxcdHJldHVybiB2ZWM0KCByLnggLSByLnkgLyAyNTUuMCwgci55LCByLnogLSByLncgLyAyNTUuMCwgci53KTtcXG59XFxudmVjMiB1bnBhY2tSR0JBVG8ySGFsZiggdmVjNCB2ICkge1xcblxcdHJldHVybiB2ZWMyKCB2LnggKyAoIHYueSAvIDI1NS4wICksIHYueiArICggdi53IC8gMjU1LjAgKSApO1xcbn1cXG5mbG9hdCB2aWV3WlRvT3J0aG9ncmFwaGljRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICggdmlld1ogKyBuZWFyICkgLyAoIG5lYXIgLSBmYXIgKTtcXG59XFxuZmxvYXQgb3J0aG9ncmFwaGljRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBsaW5lYXJDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiBsaW5lYXJDbGlwWiAqICggbmVhciAtIGZhciApIC0gbmVhcjtcXG59XFxuZmxvYXQgdmlld1pUb1BlcnNwZWN0aXZlRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICgoIG5lYXIgKyB2aWV3WiApICogZmFyICkgLyAoKCBmYXIgLSBuZWFyICkgKiB2aWV3WiApO1xcbn1cXG5mbG9hdCBwZXJzcGVjdGl2ZURlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgaW52Q2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gKCBuZWFyICogZmFyICkgLyAoICggZmFyIC0gbmVhciApICogaW52Q2xpcFogLSBmYXIgKTtcXG59XCIscHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudDpcIiNpZmRlZiBQUkVNVUxUSVBMSUVEX0FMUEhBXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiAqPSBnbF9GcmFnQ29sb3IuYTtcXG4jZW5kaWZcIixwcm9qZWN0X3ZlcnRleDpcInZlYzQgbXZQb3NpdGlvbiA9IHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG4jaWZkZWYgVVNFX0lOU1RBTkNJTkdcXG5cXHRtdlBvc2l0aW9uID0gaW5zdGFuY2VNYXRyaXggKiBtdlBvc2l0aW9uO1xcbiNlbmRpZlxcbm12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiBtdlBvc2l0aW9uO1xcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XCIsZGl0aGVyaW5nX2ZyYWdtZW50OlwiI2lmZGVmIERJVEhFUklOR1xcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBkaXRoZXJpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcXG4jZW5kaWZcIixkaXRoZXJpbmdfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBESVRIRVJJTkdcXG5cXHR2ZWMzIGRpdGhlcmluZyggdmVjMyBjb2xvciApIHtcXG5cXHRcXHRmbG9hdCBncmlkX3Bvc2l0aW9uID0gcmFuZCggZ2xfRnJhZ0Nvb3JkLnh5ICk7XFxuXFx0XFx0dmVjMyBkaXRoZXJfc2hpZnRfUkdCID0gdmVjMyggMC4yNSAvIDI1NS4wLCAtMC4yNSAvIDI1NS4wLCAwLjI1IC8gMjU1LjAgKTtcXG5cXHRcXHRkaXRoZXJfc2hpZnRfUkdCID0gbWl4KCAyLjAgKiBkaXRoZXJfc2hpZnRfUkdCLCAtMi4wICogZGl0aGVyX3NoaWZ0X1JHQiwgZ3JpZF9wb3NpdGlvbiApO1xcblxcdFxcdHJldHVybiBjb2xvciArIGRpdGhlcl9zaGlmdF9SR0I7XFxuXFx0fVxcbiNlbmRpZlwiLHJvdWdobmVzc21hcF9mcmFnbWVudDpcImZsb2F0IHJvdWdobmVzc0ZhY3RvciA9IHJvdWdobmVzcztcXG4jaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHZlYzQgdGV4ZWxSb3VnaG5lc3MgPSB0ZXh0dXJlMkQoIHJvdWdobmVzc01hcCwgdlV2ICk7XFxuXFx0cm91Z2huZXNzRmFjdG9yICo9IHRleGVsUm91Z2huZXNzLmc7XFxuI2VuZGlmXCIscm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcXG4jZW5kaWZcIixzaGFkb3dtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBOVU1fRElSX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBzcG90U2hhZG93TWFwWyBOVU1fU1BPVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgcG9pbnRTaGFkb3dNYXBbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xcblxcdCNlbmRpZlxcblxcdGZsb2F0IHRleHR1cmUyRENvbXBhcmUoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XFxuXFx0XFx0cmV0dXJuIHN0ZXAoIGNvbXBhcmUsIHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIGRlcHRocywgdXYgKSApICk7XFxuXFx0fVxcblxcdHZlYzIgdGV4dHVyZTJERGlzdHJpYnV0aW9uKCBzYW1wbGVyMkQgc2hhZG93LCB2ZWMyIHV2ICkge1xcblxcdFxcdHJldHVybiB1bnBhY2tSR0JBVG8ySGFsZiggdGV4dHVyZTJEKCBzaGFkb3csIHV2ICkgKTtcXG5cXHR9XFxuXFx0ZmxvYXQgVlNNU2hhZG93IChzYW1wbGVyMkQgc2hhZG93LCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICl7XFxuXFx0XFx0ZmxvYXQgb2NjbHVzaW9uID0gMS4wO1xcblxcdFxcdHZlYzIgZGlzdHJpYnV0aW9uID0gdGV4dHVyZTJERGlzdHJpYnV0aW9uKCBzaGFkb3csIHV2ICk7XFxuXFx0XFx0ZmxvYXQgaGFyZF9zaGFkb3cgPSBzdGVwKCBjb21wYXJlICwgZGlzdHJpYnV0aW9uLnggKTtcXG5cXHRcXHRpZiAoaGFyZF9zaGFkb3cgIT0gMS4wICkge1xcblxcdFxcdFxcdGZsb2F0IGRpc3RhbmNlID0gY29tcGFyZSAtIGRpc3RyaWJ1dGlvbi54IDtcXG5cXHRcXHRcXHRmbG9hdCB2YXJpYW5jZSA9IG1heCggMC4wMDAwMCwgZGlzdHJpYnV0aW9uLnkgKiBkaXN0cmlidXRpb24ueSApO1xcblxcdFxcdFxcdGZsb2F0IHNvZnRuZXNzX3Byb2JhYmlsaXR5ID0gdmFyaWFuY2UgLyAodmFyaWFuY2UgKyBkaXN0YW5jZSAqIGRpc3RhbmNlICk7XFx0XFx0XFx0c29mdG5lc3NfcHJvYmFiaWxpdHkgPSBjbGFtcCggKCBzb2Z0bmVzc19wcm9iYWJpbGl0eSAtIDAuMyApIC8gKCAwLjk1IC0gMC4zICksIDAuMCwgMS4wICk7XFx0XFx0XFx0b2NjbHVzaW9uID0gY2xhbXAoIG1heCggaGFyZF9zaGFkb3csIHNvZnRuZXNzX3Byb2JhYmlsaXR5ICksIDAuMCwgMS4wICk7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiBvY2NsdXNpb247XFxuXFx0fVxcblxcdGZsb2F0IGdldFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQgKSB7XFxuXFx0XFx0ZmxvYXQgc2hhZG93ID0gMS4wO1xcblxcdFxcdHNoYWRvd0Nvb3JkLnh5eiAvPSBzaGFkb3dDb29yZC53O1xcblxcdFxcdHNoYWRvd0Nvb3JkLnogKz0gc2hhZG93QmlhcztcXG5cXHRcXHRidmVjNCBpbkZydXN0dW1WZWMgPSBidmVjNCAoIHNoYWRvd0Nvb3JkLnggPj0gMC4wLCBzaGFkb3dDb29yZC54IDw9IDEuMCwgc2hhZG93Q29vcmQueSA+PSAwLjAsIHNoYWRvd0Nvb3JkLnkgPD0gMS4wICk7XFxuXFx0XFx0Ym9vbCBpbkZydXN0dW0gPSBhbGwoIGluRnJ1c3R1bVZlYyApO1xcblxcdFxcdGJ2ZWMyIGZydXN0dW1UZXN0VmVjID0gYnZlYzIoIGluRnJ1c3R1bSwgc2hhZG93Q29vcmQueiA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGZydXN0dW1UZXN0ID0gYWxsKCBmcnVzdHVtVGVzdFZlYyApO1xcblxcdFxcdGlmICggZnJ1c3R1bVRlc3QgKSB7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApXFxuXFx0XFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgZHgwID0gLSB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTAgPSAtIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR4MSA9ICsgdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkxID0gKyB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeDIgPSBkeDAgLyAyLjA7XFxuXFx0XFx0XFx0ZmxvYXQgZHkyID0gZHkwIC8gMi4wO1xcblxcdFxcdFxcdGZsb2F0IGR4MyA9IGR4MSAvIDIuMDtcXG5cXHRcXHRcXHRmbG9hdCBkeTMgPSBkeTEgLyAyLjA7XFxuXFx0XFx0XFx0c2hhZG93ID0gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDIsIGR5MiApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MiApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDMsIGR5MiApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDIsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MywgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MiwgZHkzICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkzICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MywgZHkzICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICksIHNoYWRvd0Nvb3JkLnogKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDE3LjAgKTtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApXFxuXFx0XFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgZHggPSB0ZXhlbFNpemUueDtcXG5cXHRcXHRcXHRmbG9hdCBkeSA9IHRleGVsU2l6ZS55O1xcblxcdFxcdFxcdHZlYzIgdXYgPSBzaGFkb3dDb29yZC54eTtcXG5cXHRcXHRcXHR2ZWMyIGYgPSBmcmFjdCggdXYgKiBzaGFkb3dNYXBTaXplICsgMC41ICk7XFxuXFx0XFx0XFx0dXYgLT0gZiAqIHRleGVsU2l6ZTtcXG5cXHRcXHRcXHRzaGFkb3cgPSAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggZHgsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAwLjAsIGR5ICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHRleGVsU2l6ZSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHRtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAtZHgsIDAuMCApLCBzaGFkb3dDb29yZC56ICksIFxcblxcdFxcdFxcdFxcdFxcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMi4wICogZHgsIDAuMCApLCBzaGFkb3dDb29yZC56ICksXFxuXFx0XFx0XFx0XFx0XFx0IGYueCApICtcXG5cXHRcXHRcXHRcXHRtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAtZHgsIGR5ICksIHNoYWRvd0Nvb3JkLnogKSwgXFxuXFx0XFx0XFx0XFx0XFx0IHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAyLjAgKiBkeCwgZHkgKSwgc2hhZG93Q29vcmQueiApLFxcblxcdFxcdFxcdFxcdFxcdCBmLnggKSArXFxuXFx0XFx0XFx0XFx0bWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMC4wLCAtZHkgKSwgc2hhZG93Q29vcmQueiApLCBcXG5cXHRcXHRcXHRcXHRcXHQgdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCB1diArIHZlYzIoIDAuMCwgMi4wICogZHkgKSwgc2hhZG93Q29vcmQueiApLFxcblxcdFxcdFxcdFxcdFxcdCBmLnkgKSArXFxuXFx0XFx0XFx0XFx0bWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggZHgsIC1keSApLCBzaGFkb3dDb29yZC56ICksIFxcblxcdFxcdFxcdFxcdFxcdCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggZHgsIDIuMCAqIGR5ICksIHNoYWRvd0Nvb3JkLnogKSxcXG5cXHRcXHRcXHRcXHRcXHQgZi55ICkgK1xcblxcdFxcdFxcdFxcdG1peCggbWl4KCB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggLWR4LCAtZHkgKSwgc2hhZG93Q29vcmQueiApLCBcXG5cXHRcXHRcXHRcXHRcXHRcXHQgIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAyLjAgKiBkeCwgLWR5ICksIHNoYWRvd0Nvb3JkLnogKSxcXG5cXHRcXHRcXHRcXHRcXHRcXHQgIGYueCApLFxcblxcdFxcdFxcdFxcdFxcdCBtaXgoIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgdXYgKyB2ZWMyKCAtZHgsIDIuMCAqIGR5ICksIHNoYWRvd0Nvb3JkLnogKSwgXFxuXFx0XFx0XFx0XFx0XFx0XFx0ICB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHV2ICsgdmVjMiggMi4wICogZHgsIDIuMCAqIGR5ICksIHNoYWRvd0Nvb3JkLnogKSxcXG5cXHRcXHRcXHRcXHRcXHRcXHQgIGYueCApLFxcblxcdFxcdFxcdFxcdFxcdCBmLnkgKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1ZTTSApXFxuXFx0XFx0XFx0c2hhZG93ID0gVlNNU2hhZG93KCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRzaGFkb3cgPSB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiBzaGFkb3c7XFxuXFx0fVxcblxcdHZlYzIgY3ViZVRvVVYoIHZlYzMgdiwgZmxvYXQgdGV4ZWxTaXplWSApIHtcXG5cXHRcXHR2ZWMzIGFic1YgPSBhYnMoIHYgKTtcXG5cXHRcXHRmbG9hdCBzY2FsZVRvQ3ViZSA9IDEuMCAvIG1heCggYWJzVi54LCBtYXgoIGFic1YueSwgYWJzVi56ICkgKTtcXG5cXHRcXHRhYnNWICo9IHNjYWxlVG9DdWJlO1xcblxcdFxcdHYgKj0gc2NhbGVUb0N1YmUgKiAoIDEuMCAtIDIuMCAqIHRleGVsU2l6ZVkgKTtcXG5cXHRcXHR2ZWMyIHBsYW5hciA9IHYueHk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0QVRleGVsID0gMS41ICogdGV4ZWxTaXplWTtcXG5cXHRcXHRmbG9hdCBhbG1vc3RPbmUgPSAxLjAgLSBhbG1vc3RBVGV4ZWw7XFxuXFx0XFx0aWYgKCBhYnNWLnogPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGlmICggdi56ID4gMC4wIClcXG5cXHRcXHRcXHRcXHRwbGFuYXIueCA9IDQuMCAtIHYueDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnggPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25YID0gc2lnbiggdi54ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnogKiBzaWduWCArIDIuMCAqIHNpZ25YO1xcblxcdFxcdH0gZWxzZSBpZiAoIGFic1YueSA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc2lnblkgPSBzaWduKCB2LnkgKTtcXG5cXHRcXHRcXHRwbGFuYXIueCA9IHYueCArIDIuMCAqIHNpZ25ZICsgMi4wO1xcblxcdFxcdFxcdHBsYW5hci55ID0gdi56ICogc2lnblkgLSAyLjA7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiB2ZWMyKCAwLjEyNSwgMC4yNSApICogcGxhbmFyICsgdmVjMiggMC4zNzUsIDAuNzUgKTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0UG9pbnRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkLCBmbG9hdCBzaGFkb3dDYW1lcmFOZWFyLCBmbG9hdCBzaGFkb3dDYW1lcmFGYXIgKSB7XFxuXFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvICggc2hhZG93TWFwU2l6ZSAqIHZlYzIoIDQuMCwgMi4wICkgKTtcXG5cXHRcXHR2ZWMzIGxpZ2h0VG9Qb3NpdGlvbiA9IHNoYWRvd0Nvb3JkLnh5ejtcXG5cXHRcXHRmbG9hdCBkcCA9ICggbGVuZ3RoKCBsaWdodFRvUG9zaXRpb24gKSAtIHNoYWRvd0NhbWVyYU5lYXIgKSAvICggc2hhZG93Q2FtZXJhRmFyIC0gc2hhZG93Q2FtZXJhTmVhciApO1xcdFxcdGRwICs9IHNoYWRvd0JpYXM7XFxuXFx0XFx0dmVjMyBiZDNEID0gbm9ybWFsaXplKCBsaWdodFRvUG9zaXRpb24gKTtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGICkgfHwgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKSB8fCBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9WU00gKVxcblxcdFxcdFxcdHZlYzIgb2Zmc2V0ID0gdmVjMiggLSAxLCAxICkgKiBzaGFkb3dSYWRpdXMgKiB0ZXhlbFNpemUueTtcXG5cXHRcXHRcXHRyZXR1cm4gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlwiLHNoYWRvd21hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR1bmlmb3JtIG1hdDQgZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIE5VTV9ESVJfTElHSFRfU0hBRE9XUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVF9TSEFET1dTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IHNwb3RTaGFkb3dNYXRyaXhbIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRfU0hBRE9XUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyA+IDBcXG5cXHRcXHR1bmlmb3JtIG1hdDQgcG9pbnRTaGFkb3dNYXRyaXhbIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRfU0hBRE9XUyBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLHNoYWRvd21hcF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRfU0hBRE9XUzsgaSArKyApIHtcXG5cXHRcXHR2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdID0gZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUX1NIQURPV1M7IGkgKysgKSB7XFxuXFx0XFx0dlNwb3RTaGFkb3dDb29yZFsgaSBdID0gc3BvdFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTOyBpICsrICkge1xcblxcdFxcdHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0gPSBwb2ludFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmRcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ6XCJmbG9hdCBnZXRTaGFkb3dNYXNrKCkge1xcblxcdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUX1NIQURPV1MgPiAwXFxuXFx0RGlyZWN0aW9uYWxMaWdodFNoYWRvdyBkaXJlY3Rpb25hbExpZ2h0O1xcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUX1NIQURPV1M7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IHJlY2VpdmVTaGFkb3cgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX2VuZFxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFNwb3RMaWdodFNoYWRvdyBzcG90TGlnaHQ7XFxuXFx0I3ByYWdtYSB1bnJvbGxfbG9vcF9zdGFydFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUX1NIQURPV1M7IGkgKysgKSB7XFxuXFx0XFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0U2hhZG93c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSByZWNlaXZlU2hhZG93ID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodC5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHQuc2hhZG93Qmlhcywgc3BvdExpZ2h0LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVF9TSEFET1dTID4gMFxcblxcdFBvaW50TGlnaHRTaGFkb3cgcG9pbnRMaWdodDtcXG5cXHQjcHJhZ21hIHVucm9sbF9sb29wX3N0YXJ0XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUX1NIQURPV1M7IGkgKysgKSB7XFxuXFx0XFx0cG9pbnRMaWdodCA9IHBvaW50TGlnaHRTaGFkb3dzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IHJlY2VpdmVTaGFkb3cgPyBnZXRQb2ludFNoYWRvdyggcG9pbnRTaGFkb3dNYXBbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dNYXBTaXplLCBwb2ludExpZ2h0LnNoYWRvd0JpYXMsIHBvaW50TGlnaHQuc2hhZG93UmFkaXVzLCB2UG9pbnRTaGFkb3dDb29yZFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd0NhbWVyYU5lYXIsIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhRmFyICkgOiAxLjA7XFxuXFx0fVxcblxcdCNwcmFnbWEgdW5yb2xsX2xvb3BfZW5kXFxuXFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuXFx0cmV0dXJuIHNoYWRvdztcXG59XCIsc2tpbmJhc2VfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdG1hdDQgYm9uZU1hdFggPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueCApO1xcblxcdG1hdDQgYm9uZU1hdFkgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueSApO1xcblxcdG1hdDQgYm9uZU1hdFogPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueiApO1xcblxcdG1hdDQgYm9uZU1hdFcgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgudyApO1xcbiNlbmRpZlwiLHNraW5uaW5nX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4O1xcblxcdHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4SW52ZXJzZTtcXG5cXHQjaWZkZWYgQk9ORV9URVhUVVJFXFxuXFx0XFx0dW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgYm9uZVRleHR1cmU7XFxuXFx0XFx0dW5pZm9ybSBpbnQgYm9uZVRleHR1cmVTaXplO1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRmbG9hdCBqID0gaSAqIDQuMDtcXG5cXHRcXHRcXHRmbG9hdCB4ID0gbW9kKCBqLCBmbG9hdCggYm9uZVRleHR1cmVTaXplICkgKTtcXG5cXHRcXHRcXHRmbG9hdCB5ID0gZmxvb3IoIGogLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICkgKTtcXG5cXHRcXHRcXHRmbG9hdCBkeCA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKTtcXG5cXHRcXHRcXHRmbG9hdCBkeSA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKTtcXG5cXHRcXHRcXHR5ID0gZHkgKiAoIHkgKyAwLjUgKTtcXG5cXHRcXHRcXHR2ZWM0IHYxID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAwLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2MiA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMS41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjMgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDIuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHY0ID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAzLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0bWF0NCBib25lID0gbWF0NCggdjEsIHYyLCB2MywgdjQgKTtcXG5cXHRcXHRcXHRyZXR1cm4gYm9uZTtcXG5cXHRcXHR9XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIG1hdDQgYm9uZU1hdHJpY2VzWyBNQVhfQk9ORVMgXTtcXG5cXHRcXHRtYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxuXFx0XFx0XFx0bWF0NCBib25lID0gYm9uZU1hdHJpY2VzWyBpbnQoaSkgXTtcXG5cXHRcXHRcXHRyZXR1cm4gYm9uZTtcXG5cXHRcXHR9XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCIsc2tpbm5pbmdfdmVydGV4OlwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdHZlYzQgc2tpblZlcnRleCA9IGJpbmRNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuXFx0dmVjNCBza2lubmVkID0gdmVjNCggMC4wICk7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnk7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0WiAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lno7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XFxuXFx0dHJhbnNmb3JtZWQgPSAoIGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZCApLnh5ejtcXG4jZW5kaWZcIixza2lubm9ybWFsX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRtYXQ0IHNraW5NYXRyaXggPSBtYXQ0KCAwLjAgKTtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC55ICogYm9uZU1hdFk7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnogKiBib25lTWF0WjtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xcblxcdHNraW5NYXRyaXggID0gYmluZE1hdHJpeEludmVyc2UgKiBza2luTWF0cml4ICogYmluZE1hdHJpeDtcXG5cXHRvYmplY3ROb3JtYWwgPSB2ZWM0KCBza2luTWF0cml4ICogdmVjNCggb2JqZWN0Tm9ybWFsLCAwLjAgKSApLnh5ejtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHRvYmplY3RUYW5nZW50ID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdFRhbmdlbnQsIDAuMCApICkueHl6O1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiLHNwZWN1bGFybWFwX2ZyYWdtZW50OlwiZmxvYXQgc3BlY3VsYXJTdHJlbmd0aDtcXG4jaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXFx0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7XFxuXFx0c3BlY3VsYXJTdHJlbmd0aCA9IHRleGVsU3BlY3VsYXIucjtcXG4jZWxzZVxcblxcdHNwZWN1bGFyU3RyZW5ndGggPSAxLjA7XFxuI2VuZGlmXCIsc3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcXG4jZW5kaWZcIix0b25lbWFwcGluZ19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBUT05FX01BUFBJTkcgKVxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSB0b25lTWFwcGluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlwiLHRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCIjaWZuZGVmIHNhdHVyYXRlXFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nV2hpdGVQb2ludDtcXG52ZWMzIExpbmVhclRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XFxufVxcbnZlYzMgUmVpbmhhcmRUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdHJldHVybiBzYXR1cmF0ZSggY29sb3IgLyAoIHZlYzMoIDEuMCApICsgY29sb3IgKSApO1xcbn1cXG4jZGVmaW5lIFVuY2hhcnRlZDJIZWxwZXIoIHggKSBtYXgoICggKCB4ICogKCAwLjE1ICogeCArIDAuMTAgKiAwLjUwICkgKyAwLjIwICogMC4wMiApIC8gKCB4ICogKCAwLjE1ICogeCArIDAuNTAgKSArIDAuMjAgKiAwLjMwICkgKSAtIDAuMDIgLyAwLjMwLCB2ZWMzKCAwLjAgKSApXFxudmVjMyBVbmNoYXJ0ZWQyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRyZXR1cm4gc2F0dXJhdGUoIFVuY2hhcnRlZDJIZWxwZXIoIGNvbG9yICkgLyBVbmNoYXJ0ZWQySGVscGVyKCB2ZWMzKCB0b25lTWFwcGluZ1doaXRlUG9pbnQgKSApICk7XFxufVxcbnZlYzMgT3B0aW1pemVkQ2luZW9uVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRjb2xvciA9IG1heCggdmVjMyggMC4wICksIGNvbG9yIC0gMC4wMDQgKTtcXG5cXHRyZXR1cm4gcG93KCAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDAuNSApICkgLyAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDEuNyApICsgMC4wNiApLCB2ZWMzKCAyLjIgKSApO1xcbn1cXG52ZWMzIEFDRVNGaWxtaWNUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcblxcdHJldHVybiBzYXR1cmF0ZSggKCBjb2xvciAqICggMi41MSAqIGNvbG9yICsgMC4wMyApICkgLyAoIGNvbG9yICogKCAyLjQzICogY29sb3IgKyAwLjU5ICkgKyAwLjE0ICkgKTtcXG59XCIsdXZfcGFyc19mcmFnbWVudDpcIiNpZiAoIGRlZmluZWQoIFVTRV9VViApICYmICEgZGVmaW5lZCggVVZTX1ZFUlRFWF9PTkxZICkgKVxcblxcdHZhcnlpbmcgdmVjMiB2VXY7XFxuI2VuZGlmXCIsdXZfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX1VWXFxuXFx0I2lmZGVmIFVWU19WRVJURVhfT05MWVxcblxcdFxcdHZlYzIgdlV2O1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMyIHZVdjtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxuI2VuZGlmXCIsdXZfdmVydGV4OlwiI2lmZGVmIFVTRV9VVlxcblxcdHZVdiA9ICggdXZUcmFuc2Zvcm0gKiB2ZWMzKCB1diwgMSApICkueHk7XFxuI2VuZGlmXCIsdXYyX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIix1djJfcGFyc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHRhdHRyaWJ1dGUgdmVjMiB1djI7XFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuXFx0dW5pZm9ybSBtYXQzIHV2MlRyYW5zZm9ybTtcXG4jZW5kaWZcIix1djJfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dlV2MiA9ICggdXYyVHJhbnNmb3JtICogdmVjMyggdXYyLCAxICkgKS54eTtcXG4jZW5kaWZcIix3b3JsZHBvc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIERJU1RBTkNFICkgfHwgZGVmaW5lZCAoIFVTRV9TSEFET1dNQVAgKVxcblxcdHZlYzQgd29ybGRQb3NpdGlvbiA9IHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHQjaWZkZWYgVVNFX0lOU1RBTkNJTkdcXG5cXHRcXHR3b3JsZFBvc2l0aW9uID0gaW5zdGFuY2VNYXRyaXggKiB3b3JsZFBvc2l0aW9uO1xcblxcdCNlbmRpZlxcblxcdHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHdvcmxkUG9zaXRpb247XFxuI2VuZGlmXCIsYmFja2dyb3VuZF9mcmFnOlwidW5pZm9ybSBzYW1wbGVyMkQgdDJEO1xcbnZhcnlpbmcgdmVjMiB2VXY7XFxudm9pZCBtYWluKCkge1xcblxcdHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQoIHQyRCwgdlV2ICk7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gbWFwVGV4ZWxUb0xpbmVhciggdGV4Q29sb3IgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG59XCIsYmFja2dyb3VuZF92ZXJ0OlwidmFyeWluZyB2ZWMyIHZVdjtcXG51bmlmb3JtIG1hdDMgdXZUcmFuc2Zvcm07XFxudm9pZCBtYWluKCkge1xcblxcdHZVdiA9ICggdXZUcmFuc2Zvcm0gKiB2ZWMzKCB1diwgMSApICkueHk7XFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCBwb3NpdGlvbi54eSwgMS4wLCAxLjAgKTtcXG59XCIsY3ViZV9mcmFnOlwiI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIHZSZWZsZWN0ID0gdldvcmxkRGlyZWN0aW9uO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gZW52Q29sb3I7XFxuXFx0Z2xfRnJhZ0NvbG9yLmEgKj0gb3BhY2l0eTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG59XCIsY3ViZV92ZXJ0OlwidmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGREaXJlY3Rpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdGdsX1Bvc2l0aW9uLnogPSBnbF9Qb3NpdGlvbi53O1xcbn1cIixkZXB0aF9mcmFnOlwiI2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdHVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudmFyeWluZyB2ZWMyIHZIaWdoUHJlY2lzaW9uWlc7XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0ZGlmZnVzZUNvbG9yLmEgPSBvcGFjaXR5O1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdGZsb2F0IGZyYWdDb29yZFogPSAwLjUgKiB2SGlnaFByZWNpc2lvblpXWzBdIC8gdkhpZ2hQcmVjaXNpb25aV1sxXSArIDAuNTtcXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggMS4wIC0gZnJhZ0Nvb3JkWiApLCBvcGFjaXR5ICk7XFxuXFx0I2VsaWYgREVQVEhfUEFDS0lORyA9PSAzMjAxXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBmcmFnQ29vcmRaICk7XFxuXFx0I2VuZGlmXFxufVwiLGRlcHRoX3ZlcnQ6XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudmFyeWluZyB2ZWMyIHZIaWdoUHJlY2lzaW9uWlc7XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdFxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dkhpZ2hQcmVjaXNpb25aVyA9IGdsX1Bvc2l0aW9uLnp3O1xcbn1cIixkaXN0YW5jZVJHQkFfZnJhZzpcIiNkZWZpbmUgRElTVEFOQ0VcXG51bmlmb3JtIHZlYzMgcmVmZXJlbmNlUG9zaXRpb247XFxudW5pZm9ybSBmbG9hdCBuZWFyRGlzdGFuY2U7XFxudW5pZm9ybSBmbG9hdCBmYXJEaXN0YW5jZTtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbiAoKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIDEuMCApO1xcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0ZmxvYXQgZGlzdCA9IGxlbmd0aCggdldvcmxkUG9zaXRpb24gLSByZWZlcmVuY2VQb3NpdGlvbiApO1xcblxcdGRpc3QgPSAoIGRpc3QgLSBuZWFyRGlzdGFuY2UgKSAvICggZmFyRGlzdGFuY2UgLSBuZWFyRGlzdGFuY2UgKTtcXG5cXHRkaXN0ID0gc2F0dXJhdGUoIGRpc3QgKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGRpc3QgKTtcXG59XCIsZGlzdGFuY2VSR0JBX3ZlcnQ6XCIjZGVmaW5lIERJU1RBTkNFXFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHRcXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0XFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxufVwiLGVxdWlyZWN0X2ZyYWc6XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XFxudmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkRGlyZWN0aW9uICk7XFxuXFx0dmVjMiBzYW1wbGVVViA9IGVxdWlyZWN0VXYoIGRpcmVjdGlvbiApO1xcblxcdHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG5cXHRnbF9GcmFnQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhDb2xvciApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50Plxcbn1cIixlcXVpcmVjdF92ZXJ0OlwidmFyeWluZyB2ZWMzIHZXb3JsZERpcmVjdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGREaXJlY3Rpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cIixsaW5lZGFzaGVkX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBkYXNoU2l6ZTtcXG51bmlmb3JtIGZsb2F0IHRvdGFsU2l6ZTtcXG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdGlmICggbW9kKCB2TGluZURpc3RhbmNlLCB0b3RhbFNpemUgKSA+IGRhc2hTaXplICkge1xcblxcdFxcdGRpc2NhcmQ7XFxuXFx0fVxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0b3V0Z29pbmdMaWdodCA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50Plxcbn1cIixsaW5lZGFzaGVkX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xcbmF0dHJpYnV0ZSBmbG9hdCBsaW5lRGlzdGFuY2U7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2TGluZURpc3RhbmNlID0gc2NhbGUgKiBsaW5lRGlzdGFuY2U7XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2hiYXNpY19mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdFxcblxcdFxcdHZlYzQgbGlnaHRNYXBUZXhlbD0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBsaWdodE1hcFRleGVsVG9MaW5lYXIoIGxpZ2h0TWFwVGV4ZWwgKS5yZ2IgKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHQjZWxzZVxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB2ZWMzKCAxLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVwiLG1lc2hiYXNpY192ZXJ0OlwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsbWVzaGxhbWJlcnRfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbnZhcnlpbmcgdmVjMyB2SW5kaXJlY3RGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuXFx0dmFyeWluZyB2ZWMzIHZJbmRpcmVjdEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX2NvbW1vbl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSAoIGdsX0Zyb250RmFjaW5nICkgPyB2SW5kaXJlY3RGcm9udCA6IHZJbmRpcmVjdEJhY2s7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gdkluZGlyZWN0RnJvbnQ7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGxpZ2h0bWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZMaWdodEZyb250O1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKSAqIGdldFNoYWRvd01hc2soKTtcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cIixtZXNobGFtYmVydF92ZXJ0OlwiI2RlZmluZSBMQU1CRVJUXFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbnZhcnlpbmcgdmVjMyB2SW5kaXJlY3RGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuXFx0dmFyeWluZyB2ZWMzIHZJbmRpcmVjdEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfbGFtYmVydF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2htYXRjYXBfZnJhZzpcIiNkZWZpbmUgTUFUQ0FQXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hdGNhcDtcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8ZGl0aGVyaW5nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdHZlYzMgdmlld0RpciA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcblxcdHZlYzMgeCA9IG5vcm1hbGl6ZSggdmVjMyggdmlld0Rpci56LCAwLjAsIC0gdmlld0Rpci54ICkgKTtcXG5cXHR2ZWMzIHkgPSBjcm9zcyggdmlld0RpciwgeCApO1xcblxcdHZlYzIgdXYgPSB2ZWMyKCBkb3QoIHgsIG5vcm1hbCApLCBkb3QoIHksIG5vcm1hbCApICkgKiAwLjQ5NSArIDAuNTtcXG5cXHQjaWZkZWYgVVNFX01BVENBUFxcblxcdFxcdHZlYzQgbWF0Y2FwQ29sb3IgPSB0ZXh0dXJlMkQoIG1hdGNhcCwgdXYgKTtcXG5cXHRcXHRtYXRjYXBDb2xvciA9IG1hdGNhcFRleGVsVG9MaW5lYXIoIG1hdGNhcENvbG9yICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWM0IG1hdGNhcENvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYiAqIG1hdGNhcENvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaG1hdGNhcF92ZXJ0OlwiI2RlZmluZSBNQVRDQVBcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0XFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG59XCIsbWVzaHRvb25fZnJhZzpcIiNkZWZpbmUgVE9PTlxcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XFxudW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGxpZ2h0c190b29uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c190b29uX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19mcmFnbWVudF9tYXBzPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfZW5kPlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cIixtZXNodG9vbl92ZXJ0OlwiI2RlZmluZSBUT09OXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVwiLG1lc2hwaG9uZ19mcmFnOlwiI2RlZmluZSBQSE9OR1xcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XFxudW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9jb21tb25fcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFyc19iZWdpbj5cXG4jaW5jbHVkZSA8bGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19waG9uZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2VuZD5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50Plxcbn1cIixtZXNocGhvbmdfdmVydDpcIiNkZWZpbmUgUEhPTkdcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixtZXNocGh5c2ljYWxfZnJhZzpcIiNkZWZpbmUgU1RBTkRBUkRcXG4jaWZkZWYgUEhZU0lDQUxcXG5cXHQjZGVmaW5lIFJFRkxFQ1RJVklUWVxcblxcdCNkZWZpbmUgQ0xFQVJDT0FUXFxuXFx0I2RlZmluZSBUUkFOU1BBUkVOQ1lcXG4jZW5kaWZcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCByb3VnaG5lc3M7XFxudW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZmRlZiBUUkFOU1BBUkVOQ1lcXG5cXHR1bmlmb3JtIGZsb2F0IHRyYW5zcGFyZW5jeTtcXG4jZW5kaWZcXG4jaWZkZWYgUkVGTEVDVElWSVRZXFxuXFx0dW5pZm9ybSBmbG9hdCByZWZsZWN0aXZpdHk7XFxuI2VuZGlmXFxuI2lmZGVmIENMRUFSQ09BVFxcblxcdHVuaWZvcm0gZmxvYXQgY2xlYXJjb2F0O1xcblxcdHVuaWZvcm0gZmxvYXQgY2xlYXJjb2F0Um91Z2huZXNzO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfU0hFRU5cXG5cXHR1bmlmb3JtIHZlYzMgc2hlZW47XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfY29tbW9uX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9waHlzaWNhbF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xlYXJjb2F0X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cm91Z2huZXNzbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9iZWdpbj5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50X21hcHM+XFxuXFx0I2luY2x1ZGUgPGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPGNsZWFyY29hdF9ub3JtYWxfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2JlZ2luPlxcblxcdCNpbmNsdWRlIDxsaWdodHNfZnJhZ21lbnRfbWFwcz5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2ZyYWdtZW50X2VuZD5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaWZkZWYgVFJBTlNQQVJFTkNZXFxuXFx0XFx0ZGlmZnVzZUNvbG9yLmEgKj0gc2F0dXJhdGUoIDEuIC0gdHJhbnNwYXJlbmN5ICsgbGluZWFyVG9SZWxhdGl2ZUx1bWluYW5jZSggcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICkgKTtcXG5cXHQjZW5kaWZcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XCIsbWVzaHBoeXNpY2FsX3ZlcnQ6XCIjZGVmaW5lIFNUQU5EQVJEXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2VGFuZ2VudCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWRUYW5nZW50ICk7XFxuXFx0XFx0dkJpdGFuZ2VudCA9IG5vcm1hbGl6ZSggY3Jvc3MoIHZOb3JtYWwsIHZUYW5nZW50ICkgKiB0YW5nZW50LncgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixub3JtYWxfZnJhZzpcIiNkZWZpbmUgTk9STUFMXFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnRfYmVnaW4+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudF9tYXBzPlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIHBhY2tOb3JtYWxUb1JHQiggbm9ybWFsICksIG9wYWNpdHkgKTtcXG59XCIsbm9ybWFsX3ZlcnQ6XCIjZGVmaW5lIE5PUk1BTFxcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVEFOR0VOVFNQQUNFX05PUk1BTE1BUCApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcblxcdCNpZmRlZiBVU0VfVEFOR0VOVFxcblxcdFxcdHZhcnlpbmcgdmVjMyB2VGFuZ2VudDtcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdkJpdGFuZ2VudDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG5cXHQjaWZkZWYgVVNFX1RBTkdFTlRcXG5cXHRcXHR2VGFuZ2VudCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWRUYW5nZW50ICk7XFxuXFx0XFx0dkJpdGFuZ2VudCA9IG5vcm1hbGl6ZSggY3Jvc3MoIHZOb3JtYWwsIHZUYW5nZW50ICkgKiB0YW5nZW50LncgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFRBTkdFTlRTUEFDRV9OT1JNQUxNQVAgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcbn1cIixwb2ludHNfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX3BhcnRpY2xlX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG59XCIscG9pbnRzX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNpemU7XFxudW5pZm9ybSBmbG9hdCBzY2FsZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdGdsX1BvaW50U2l6ZSA9IHNpemU7XFxuXFx0I2lmZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5cXHRcXHRib29sIGlzUGVyc3BlY3RpdmUgPSBpc1BlcnNwZWN0aXZlTWF0cml4KCBwcm9qZWN0aW9uTWF0cml4ICk7XFxuXFx0XFx0aWYgKCBpc1BlcnNwZWN0aXZlICkgZ2xfUG9pbnRTaXplICo9ICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XCIsc2hhZG93X2ZyYWc6XCJ1bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnNfYmVnaW4+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yLCBvcGFjaXR5ICogKCAxLjAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVwiLHNoYWRvd192ZXJ0OlwiI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIixzcHJpdGVfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XCIsc3ByaXRlX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xcbnVuaWZvcm0gdmVjMiBjZW50ZXI7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG5cXHR2ZWMyIHNjYWxlO1xcblxcdHNjYWxlLnggPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAwIF0ueCwgbW9kZWxNYXRyaXhbIDAgXS55LCBtb2RlbE1hdHJpeFsgMCBdLnogKSApO1xcblxcdHNjYWxlLnkgPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAxIF0ueCwgbW9kZWxNYXRyaXhbIDEgXS55LCBtb2RlbE1hdHJpeFsgMSBdLnogKSApO1xcblxcdCNpZm5kZWYgVVNFX1NJWkVBVFRFTlVBVElPTlxcblxcdFxcdGJvb2wgaXNQZXJzcGVjdGl2ZSA9IGlzUGVyc3BlY3RpdmVNYXRyaXgoIHByb2plY3Rpb25NYXRyaXggKTtcXG5cXHRcXHRpZiAoIGlzUGVyc3BlY3RpdmUgKSBzY2FsZSAqPSAtIG12UG9zaXRpb24uejtcXG5cXHQjZW5kaWZcXG5cXHR2ZWMyIGFsaWduZWRQb3NpdGlvbiA9ICggcG9zaXRpb24ueHkgLSAoIGNlbnRlciAtIHZlYzIoIDAuNSApICkgKSAqIHNjYWxlO1xcblxcdHZlYzIgcm90YXRlZFBvc2l0aW9uO1xcblxcdHJvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG5cXHRyb3RhdGVkUG9zaXRpb24ueSA9IHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxuXFx0bXZQb3NpdGlvbi54eSArPSByb3RhdGVkUG9zaXRpb247XFxuXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cIn0sRHM9e2Jhc2ljOnt1bmlmb3JtczokKFtOcy5jb21tb24sTnMuc3BlY3VsYXJtYXAsTnMuZW52bWFwLE5zLmFvbWFwLE5zLmxpZ2h0bWFwLE5zLmZvZ10pLHZlcnRleFNoYWRlcjpJcy5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpJcy5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6JChbTnMuY29tbW9uLE5zLnNwZWN1bGFybWFwLE5zLmVudm1hcCxOcy5hb21hcCxOcy5saWdodG1hcCxOcy5lbWlzc2l2ZW1hcCxOcy5mb2csTnMubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHYoMCl9fV0pLHZlcnRleFNoYWRlcjpJcy5tZXNobGFtYmVydF92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLm1lc2hsYW1iZXJ0X2ZyYWd9LHBob25nOnt1bmlmb3JtczokKFtOcy5jb21tb24sTnMuc3BlY3VsYXJtYXAsTnMuZW52bWFwLE5zLmFvbWFwLE5zLmxpZ2h0bWFwLE5zLmVtaXNzaXZlbWFwLE5zLmJ1bXBtYXAsTnMubm9ybWFsbWFwLE5zLmRpc3BsYWNlbWVudG1hcCxOcy5mb2csTnMubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHYoMCl9LHNwZWN1bGFyOnt2YWx1ZTpuZXcgdigxMTE4NDgxKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOklzLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOklzLm1lc2hwaG9uZ19mcmFnfSxzdGFuZGFyZDp7dW5pZm9ybXM6JChbTnMuY29tbW9uLE5zLmVudm1hcCxOcy5hb21hcCxOcy5saWdodG1hcCxOcy5lbWlzc2l2ZW1hcCxOcy5idW1wbWFwLE5zLm5vcm1hbG1hcCxOcy5kaXNwbGFjZW1lbnRtYXAsTnMucm91Z2huZXNzbWFwLE5zLm1ldGFsbmVzc21hcCxOcy5mb2csTnMubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHYoMCl9LHJvdWdobmVzczp7dmFsdWU6MX0sbWV0YWxuZXNzOnt2YWx1ZTowfSxlbnZNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpJcy5tZXNocGh5c2ljYWxfdmVydCxmcmFnbWVudFNoYWRlcjpJcy5tZXNocGh5c2ljYWxfZnJhZ30sdG9vbjp7dW5pZm9ybXM6JChbTnMuY29tbW9uLE5zLnNwZWN1bGFybWFwLE5zLmFvbWFwLE5zLmxpZ2h0bWFwLE5zLmVtaXNzaXZlbWFwLE5zLmJ1bXBtYXAsTnMubm9ybWFsbWFwLE5zLmRpc3BsYWNlbWVudG1hcCxOcy5ncmFkaWVudG1hcCxOcy5mb2csTnMubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHYoMCl9LHNwZWN1bGFyOnt2YWx1ZTpuZXcgdigxMTE4NDgxKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOklzLm1lc2h0b29uX3ZlcnQsZnJhZ21lbnRTaGFkZXI6SXMubWVzaHRvb25fZnJhZ30sbWF0Y2FwOnt1bmlmb3JtczokKFtOcy5jb21tb24sTnMuYnVtcG1hcCxOcy5ub3JtYWxtYXAsTnMuZGlzcGxhY2VtZW50bWFwLE5zLmZvZyx7bWF0Y2FwOnt2YWx1ZTpudWxsfX1dKSx2ZXJ0ZXhTaGFkZXI6SXMubWVzaG1hdGNhcF92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLm1lc2htYXRjYXBfZnJhZ30scG9pbnRzOnt1bmlmb3JtczokKFtOcy5wb2ludHMsTnMuZm9nXSksdmVydGV4U2hhZGVyOklzLnBvaW50c192ZXJ0LGZyYWdtZW50U2hhZGVyOklzLnBvaW50c19mcmFnfSxkYXNoZWQ6e3VuaWZvcm1zOiQoW05zLmNvbW1vbixOcy5mb2cse3NjYWxlOnt2YWx1ZToxfSxkYXNoU2l6ZTp7dmFsdWU6MX0sdG90YWxTaXplOnt2YWx1ZToyfX1dKSx2ZXJ0ZXhTaGFkZXI6SXMubGluZWRhc2hlZF92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLmxpbmVkYXNoZWRfZnJhZ30sZGVwdGg6e3VuaWZvcm1zOiQoW05zLmNvbW1vbixOcy5kaXNwbGFjZW1lbnRtYXBdKSx2ZXJ0ZXhTaGFkZXI6SXMuZGVwdGhfdmVydCxmcmFnbWVudFNoYWRlcjpJcy5kZXB0aF9mcmFnfSxub3JtYWw6e3VuaWZvcm1zOiQoW05zLmNvbW1vbixOcy5idW1wbWFwLE5zLm5vcm1hbG1hcCxOcy5kaXNwbGFjZW1lbnRtYXAse29wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpJcy5ub3JtYWxfdmVydCxmcmFnbWVudFNoYWRlcjpJcy5ub3JtYWxfZnJhZ30sc3ByaXRlOnt1bmlmb3JtczokKFtOcy5zcHJpdGUsTnMuZm9nXSksdmVydGV4U2hhZGVyOklzLnNwcml0ZV92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLnNwcml0ZV9mcmFnfSxiYWNrZ3JvdW5kOnt1bmlmb3Jtczp7dXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBtfSx0MkQ6e3ZhbHVlOm51bGx9fSx2ZXJ0ZXhTaGFkZXI6SXMuYmFja2dyb3VuZF92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLmJhY2tncm91bmRfZnJhZ30sY3ViZTp7dW5pZm9ybXM6JChbTnMuZW52bWFwLHtvcGFjaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6SXMuY3ViZV92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLmN1YmVfZnJhZ30sZXF1aXJlY3Q6e3VuaWZvcm1zOnt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9fSx2ZXJ0ZXhTaGFkZXI6SXMuZXF1aXJlY3RfdmVydCxmcmFnbWVudFNoYWRlcjpJcy5lcXVpcmVjdF9mcmFnfSxkaXN0YW5jZVJHQkE6e3VuaWZvcm1zOiQoW05zLmNvbW1vbixOcy5kaXNwbGFjZW1lbnRtYXAse3JlZmVyZW5jZVBvc2l0aW9uOnt2YWx1ZTpuZXcgVGV9LG5lYXJEaXN0YW5jZTp7dmFsdWU6MX0sZmFyRGlzdGFuY2U6e3ZhbHVlOjFlM319XSksdmVydGV4U2hhZGVyOklzLmRpc3RhbmNlUkdCQV92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLmRpc3RhbmNlUkdCQV9mcmFnfSxzaGFkb3c6e3VuaWZvcm1zOiQoW05zLmxpZ2h0cyxOcy5mb2cse2NvbG9yOnt2YWx1ZTpuZXcgdigwKX0sb3BhY2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOklzLnNoYWRvd192ZXJ0LGZyYWdtZW50U2hhZGVyOklzLnNoYWRvd19mcmFnfX07RHMucGh5c2ljYWw9e3VuaWZvcm1zOiQoW0RzLnN0YW5kYXJkLnVuaWZvcm1zLHtjbGVhcmNvYXQ6e3ZhbHVlOjB9LGNsZWFyY29hdE1hcDp7dmFsdWU6bnVsbH0sY2xlYXJjb2F0Um91Z2huZXNzOnt2YWx1ZTowfSxjbGVhcmNvYXRSb3VnaG5lc3NNYXA6e3ZhbHVlOm51bGx9LGNsZWFyY29hdE5vcm1hbFNjYWxlOnt2YWx1ZTpuZXcgTWUoMSwxKX0sY2xlYXJjb2F0Tm9ybWFsTWFwOnt2YWx1ZTpudWxsfSxzaGVlbjp7dmFsdWU6bmV3IHYoMCl9LHRyYW5zcGFyZW5jeTp7dmFsdWU6MH19XSksdmVydGV4U2hhZGVyOklzLm1lc2hwaHlzaWNhbF92ZXJ0LGZyYWdtZW50U2hhZGVyOklzLm1lc2hwaHlzaWNhbF9mcmFnfTtLLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHAucHJvdG90eXBlKTtLLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1LO0sucHJvdG90eXBlLmlzQ3ViZVRleHR1cmU9ITA7T2JqZWN0LmRlZmluZVByb3BlcnR5KEsucHJvdG90eXBlLFwiaW1hZ2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltYWdlfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pbWFnZT1lfX0pO1oucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocC5wcm90b3R5cGUpO1oucHJvdG90eXBlLmNvbnN0cnVjdG9yPVo7Wi5wcm90b3R5cGUuaXNEYXRhVGV4dHVyZTJEQXJyYXk9ITA7Si5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShwLnByb3RvdHlwZSk7Si5wcm90b3R5cGUuY29uc3RydWN0b3I9SjtKLnByb3RvdHlwZS5pc0RhdGFUZXh0dXJlM0Q9ITA7dmFyIEJzPW5ldyBwLEZzPW5ldyBaLHpzPW5ldyBKLCRzPW5ldyBLLEdzPVtdLFZzPVtdLEhzPW5ldyBGbG9hdDMyQXJyYXkoMTYpLFVzPW5ldyBGbG9hdDMyQXJyYXkoOSkscXM9bmV3IEZsb2F0MzJBcnJheSg0KTtldC5wcm90b3R5cGUudXBkYXRlQ2FjaGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jYWNoZTtlIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5JiZ0Lmxlbmd0aCE9PWUubGVuZ3RoJiYodGhpcy5jYWNoZT1uZXcgRmxvYXQzMkFycmF5KGUubGVuZ3RoKSk7dGUodCxlKX07dHQucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49dGhpcy5zZXEsaT0wLG89bi5sZW5ndGg7aSE9PW87KytpKXt2YXIgYT1uW2ldO2Euc2V0VmFsdWUoZSx0W2EuaWRdLHIpfX07dmFyIFdzPS8oW1xcd1xcZF9dKykoXFxdKT8oXFxbfFxcLik/L2c7cnQucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsdCxyLG4pe3Q9dGhpcy5tYXBbdF07dm9pZCAwIT09dCYmdC5zZXRWYWx1ZShlLHIsbil9O3J0LnByb3RvdHlwZS5zZXRPcHRpb25hbD1mdW5jdGlvbihlLHQscil7dD10W3JdO3ZvaWQgMCE9PXQmJnRoaXMuc2V0VmFsdWUoZSxyLHQpfTtydC51cGxvYWQ9ZnVuY3Rpb24oZSx0LHIsbil7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtpIT09bzsrK2kpe3ZhciBhPXRbaV0scz1yW2EuaWRdOyExIT09cy5uZWVkc1VwZGF0ZSYmYS5zZXRWYWx1ZShlLHMudmFsdWUsbil9fTtydC5zZXFXaXRoVmFsdWU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10sbj0wLGk9ZS5sZW5ndGg7biE9PWk7KytuKXt2YXIgbz1lW25dO28uaWQgaW4gdCYmci5wdXNoKG8pfXJldHVybiByfTt2YXIgWHM9MCxZcz0vXlsgXFx0XSojaW5jbHVkZSArPChbXFx3XFxkLi9dKyk+L2dtLEtzPS8jcHJhZ21hIHVucm9sbF9sb29wW1xcc10rP2ZvciBcXCggaW50IGkgPSAoXFxkKyk7IGkgPCAoXFxkKyk7IGkgXFwrXFwrIFxcKSBcXHsoW1xcc1xcU10rPykoPz1cXH0pXFx9L2csWnM9LyNwcmFnbWEgdW5yb2xsX2xvb3Bfc3RhcnRbXFxzXSs/Zm9yIFxcKCBpbnQgaSA9IChcXGQrKTsgaSA8IChcXGQrKTsgaSBcXCtcXCsgXFwpIFxceyhbXFxzXFxTXSs/KSg/PVxcfSlcXH1bXFxzXSs/I3ByYWdtYSB1bnJvbGxfbG9vcF9lbmQvZyxKcz0wO0x0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkucHJvdG90eXBlKTtMdC5wcm90b3R5cGUuY29uc3RydWN0b3I9THQ7THQucHJvdG90eXBlLmlzTWVzaERlcHRoTWF0ZXJpYWw9ITA7THQucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7eS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5kZXB0aFBhY2tpbmc9ZS5kZXB0aFBhY2tpbmc7dGhpcy5za2lubmluZz1lLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWUubW9ycGhUYXJnZXRzO3RoaXMubWFwPWUubWFwO3RoaXMuYWxwaGFNYXA9ZS5hbHBoYU1hcDt0aGlzLmRpc3BsYWNlbWVudE1hcD1lLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWUuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWUuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1lLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1lLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gdGhpc307TnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeS5wcm90b3R5cGUpO050LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1OdDtOdC5wcm90b3R5cGUuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD0hMDtOdC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXt5LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLnJlZmVyZW5jZVBvc2l0aW9uLmNvcHkoZS5yZWZlcmVuY2VQb3NpdGlvbik7dGhpcy5uZWFyRGlzdGFuY2U9ZS5uZWFyRGlzdGFuY2U7dGhpcy5mYXJEaXN0YW5jZT1lLmZhckRpc3RhbmNlO3RoaXMuc2tpbm5pbmc9ZS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1lLm1vcnBoVGFyZ2V0czt0aGlzLm1hcD1lLm1hcDt0aGlzLmFscGhhTWFwPWUuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9ZS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1lLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1lLmRpc3BsYWNlbWVudEJpYXM7cmV0dXJuIHRoaXN9O3p0LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoSC5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp6dCxpc0FycmF5Q2FtZXJhOiEwfSk7JHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOiR0LGlzR3JvdXA6ITB9KTtPYmplY3QuYXNzaWduKEd0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6R3QsZ2V0VGFyZ2V0UmF5U3BhY2U6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5fdGFyZ2V0UmF5JiYodGhpcy5fdGFyZ2V0UmF5PW5ldyAkdCx0aGlzLl90YXJnZXRSYXkubWF0cml4QXV0b1VwZGF0ZT0hMSx0aGlzLl90YXJnZXRSYXkudmlzaWJsZT0hMSk7cmV0dXJuIHRoaXMuX3RhcmdldFJheX0sZ2V0R3JpcFNwYWNlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuX2dyaXAmJih0aGlzLl9ncmlwPW5ldyAkdCx0aGlzLl9ncmlwLm1hdHJpeEF1dG9VcGRhdGU9ITEsdGhpcy5fZ3JpcC52aXNpYmxlPSExKTtyZXR1cm4gdGhpcy5fZ3JpcH0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihlKXtudWxsIT09dGhpcy5fdGFyZ2V0UmF5JiZ0aGlzLl90YXJnZXRSYXkuZGlzcGF0Y2hFdmVudChlKTtudWxsIT09dGhpcy5fZ3JpcCYmdGhpcy5fZ3JpcC5kaXNwYXRjaEV2ZW50KGUpO3JldHVybiB0aGlzfSxkaXNjb25uZWN0OmZ1bmN0aW9uKGUpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc2Nvbm5lY3RlZFwiLGRhdGE6ZX0pO251bGwhPT10aGlzLl90YXJnZXRSYXkmJih0aGlzLl90YXJnZXRSYXkudmlzaWJsZT0hMSk7bnVsbCE9PXRoaXMuX2dyaXAmJih0aGlzLl9ncmlwLnZpc2libGU9ITEpO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW51bGwsaT1udWxsLG89dGhpcy5fdGFyZ2V0UmF5LGE9dGhpcy5fZ3JpcDtlJiYobnVsbCE9PW8mJihuPXQuZ2V0UG9zZShlLnRhcmdldFJheVNwYWNlLHIpLG51bGwhPT1uJiYoby5tYXRyaXguZnJvbUFycmF5KG4udHJhbnNmb3JtLm1hdHJpeCksby5tYXRyaXguZGVjb21wb3NlKG8ucG9zaXRpb24sby5yb3RhdGlvbixvLnNjYWxlKSkpLG51bGwhPT1hJiZlLmdyaXBTcGFjZSYmKGk9dC5nZXRQb3NlKGUuZ3JpcFNwYWNlLHIpLG51bGwhPT1pJiYoYS5tYXRyaXguZnJvbUFycmF5KGkudHJhbnNmb3JtLm1hdHJpeCksYS5tYXRyaXguZGVjb21wb3NlKGEucG9zaXRpb24sYS5yb3RhdGlvbixhLnNjYWxlKSkpKTtudWxsIT09byYmKG8udmlzaWJsZT1udWxsIT09bik7bnVsbCE9PWEmJihhLnZpc2libGU9bnVsbCE9PWkpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oVnQucHJvdG90eXBlLHQucHJvdG90eXBlKTtPYmplY3QuYXNzaWduKHF0LnByb3RvdHlwZSx7aXNGb2dFeHAyOiEwLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBxdCh0aGlzLmNvbG9yLHRoaXMuZGVuc2l0eSl9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiRm9nRXhwMlwiLGNvbG9yOnRoaXMuY29sb3IuZ2V0SGV4KCksZGVuc2l0eTp0aGlzLmRlbnNpdHl9fX0pO09iamVjdC5hc3NpZ24oV3QucHJvdG90eXBlLHtpc0ZvZzohMCxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgV3QodGhpcy5jb2xvcix0aGlzLm5lYXIsdGhpcy5mYXIpfSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkZvZ1wiLGNvbG9yOnRoaXMuY29sb3IuZ2V0SGV4KCksbmVhcjp0aGlzLm5lYXIsZmFyOnRoaXMuZmFyfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoWHQucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGUpeyEwPT09ZSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmFzc2lnbihYdC5wcm90b3R5cGUse2lzSW50ZXJsZWF2ZWRCdWZmZXI6ITAsb25VcGxvYWRDYWxsYmFjazpmdW5jdGlvbigpe30sc2V0VXNhZ2U6ZnVuY3Rpb24oZSl7dGhpcy51c2FnZT1lO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGUpe3RoaXMuYXJyYXk9bmV3IGUuYXJyYXkuY29uc3RydWN0b3IoZS5hcnJheSk7dGhpcy5jb3VudD1lLmNvdW50O3RoaXMuc3RyaWRlPWUuc3RyaWRlO3RoaXMudXNhZ2U9ZS51c2FnZTtyZXR1cm4gdGhpc30sY29weUF0OmZ1bmN0aW9uKGUsdCxyKXtlKj10aGlzLnN0cmlkZTtyKj10LnN0cmlkZTtmb3IodmFyIG49MCxpPXRoaXMuc3RyaWRlO248aTtuKyspdGhpcy5hcnJheVtlK25dPXQuYXJyYXlbcituXTtyZXR1cm4gdGhpc30sc2V0OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCk7dGhpcy5hcnJheS5zZXQoZSx0KTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LG9uVXBsb2FkOmZ1bmN0aW9uKGUpe3RoaXMub25VcGxvYWRDYWxsYmFjaz1lO3JldHVybiB0aGlzfX0pO3ZhciBRcz1uZXcgVGU7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoWXQucHJvdG90eXBlLHtjb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5jb3VudH19LGFycmF5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5fX19KTtPYmplY3QuYXNzaWduKFl0LnByb3RvdHlwZSx7aXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZTohMCxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj10aGlzLmRhdGEuY291bnQ7dDxyO3QrKylRcy54PXRoaXMuZ2V0WCh0KSxRcy55PXRoaXMuZ2V0WSh0KSxRcy56PXRoaXMuZ2V0Wih0KSxRcy5hcHBseU1hdHJpeDQoZSksdGhpcy5zZXRYWVoodCxRcy54LFFzLnksUXMueik7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oZSx0KXt0aGlzLmRhdGEuYXJyYXlbZSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XT10O3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGUsdCl7dGhpcy5kYXRhLmFycmF5W2UqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXT10O3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGUsdCl7dGhpcy5kYXRhLmFycmF5W2UqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXT10O3JldHVybiB0aGlzfSxzZXRXOmZ1bmN0aW9uKGUsdCl7dGhpcy5kYXRhLmFycmF5W2UqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXT10O3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbZSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XX0sZ2V0WTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2UqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXX0sZ2V0WjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2UqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXX0sZ2V0VzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2UqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXX0sc2V0WFk6ZnVuY3Rpb24oZSx0LHIpe2U9ZSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVtlKzBdPXQ7dGhpcy5kYXRhLmFycmF5W2UrMV09cjtyZXR1cm4gdGhpc30sc2V0WFlaOmZ1bmN0aW9uKGUsdCxyLG4pe2U9ZSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVtlKzBdPXQ7dGhpcy5kYXRhLmFycmF5W2UrMV09cjt0aGlzLmRhdGEuYXJyYXlbZSsyXT1uO3JldHVybiB0aGlzfSxzZXRYWVpXOmZ1bmN0aW9uKGUsdCxyLG4saSl7ZT1lKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2UrMF09dDt0aGlzLmRhdGEuYXJyYXlbZSsxXT1yO3RoaXMuZGF0YS5hcnJheVtlKzJdPW47dGhpcy5kYXRhLmFycmF5W2UrM109aTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhcIlRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLmNsb25lKCk6IENsb25pbmcgYW4gaW50ZXJsYXZlZCBidWZmZXIgYXR0cmlidXRlIHdpbGwgZGVpbnRlcmxlYXZlIGJ1ZmZlciBkYXRhLlwiKTtmb3IodmFyIGU9W10sdD0wO3Q8dGhpcy5jb3VudDt0KyspZm9yKHZhciByPXQqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCxuPTA7bjx0aGlzLml0ZW1TaXplO24rKyllLnB1c2godGhpcy5kYXRhLmFycmF5W3Irbl0pO3JldHVybiBuZXcgRShuZXcgdGhpcy5hcnJheS5jb25zdHJ1Y3RvcihlKSx0aGlzLml0ZW1TaXplLHRoaXMubm9ybWFsaXplZCl9LHRvSlNPTjpmdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUudG9KU09OKCk6IFNlcmlhbGl6aW5nIGFuIGludGVybGF2ZWQgYnVmZmVyIGF0dHJpYnV0ZSB3aWxsIGRlaW50ZXJsZWF2ZSBidWZmZXIgZGF0YS5cIik7Zm9yKHZhciBlPVtdLHQ9MDt0PHRoaXMuY291bnQ7dCsrKWZvcih2YXIgcj10KnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQsbj0wO248dGhpcy5pdGVtU2l6ZTtuKyspZS5wdXNoKHRoaXMuZGF0YS5hcnJheVtyK25dKTtyZXR1cm57aXRlbVNpemU6dGhpcy5pdGVtU2l6ZSx0eXBlOnRoaXMuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTplLG5vcm1hbGl6ZWQ6dGhpcy5ub3JtYWxpemVkfX19KTtLdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSk7S3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPUt0O0t0LnByb3RvdHlwZS5pc1Nwcml0ZU1hdGVyaWFsPSEwO0t0LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe3kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuY29sb3IuY29weShlLmNvbG9yKTt0aGlzLm1hcD1lLm1hcDt0aGlzLmFscGhhTWFwPWUuYWxwaGFNYXA7dGhpcy5yb3RhdGlvbj1lLnJvdGF0aW9uO3RoaXMuc2l6ZUF0dGVudWF0aW9uPWUuc2l6ZUF0dGVudWF0aW9uO3JldHVybiB0aGlzfTt2YXIgZXUsdHU9bmV3IFRlLHJ1PW5ldyBUZSxudT1uZXcgVGUsaXU9bmV3IE1lLG91PW5ldyBNZSxhdT1uZXcgRWUsc3U9bmV3IFRlLHV1PW5ldyBUZSxjdT1uZXcgVGUsbHU9bmV3IE1lLGh1PW5ldyBNZSxwdT1uZXcgTWU7WnQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlp0LGlzU3ByaXRlOiEwLHJheWNhc3Q6ZnVuY3Rpb24oZSx0KXtudWxsPT09ZS5jYW1lcmEmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLlNwcml0ZTogXCJSYXljYXN0ZXIuY2FtZXJhXCIgbmVlZHMgdG8gYmUgc2V0IGluIG9yZGVyIHRvIHJheWNhc3QgYWdhaW5zdCBzcHJpdGVzLicpO3J1LnNldEZyb21NYXRyaXhTY2FsZSh0aGlzLm1hdHJpeFdvcmxkKTthdS5jb3B5KGUuY2FtZXJhLm1hdHJpeFdvcmxkKTt0aGlzLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGUuY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSx0aGlzLm1hdHJpeFdvcmxkKTtudS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tb2RlbFZpZXdNYXRyaXgpO2UuY2FtZXJhLmlzUGVyc3BlY3RpdmVDYW1lcmEmJiExPT09dGhpcy5tYXRlcmlhbC5zaXplQXR0ZW51YXRpb24mJnJ1Lm11bHRpcGx5U2NhbGFyKC1udS56KTt2YXIgcj10aGlzLm1hdGVyaWFsLnJvdGF0aW9uO2lmKDAhPT1yKXt2YXIgbj1NYXRoLmNvcyhyKTt2YXIgaT1NYXRoLnNpbihyKX1yPXRoaXMuY2VudGVyO0p0KHN1LnNldCgtLjUsLS41LDApLG51LHIscnUsaSxuKTtKdCh1dS5zZXQoLjUsLS41LDApLG51LHIscnUsaSxuKTtKdChjdS5zZXQoLjUsLjUsMCksbnUscixydSxpLG4pO2x1LnNldCgwLDApO2h1LnNldCgxLDApO3B1LnNldCgxLDEpO3ZhciBvPWUucmF5LmludGVyc2VjdFRyaWFuZ2xlKHN1LHV1LGN1LCExLHR1KTtpZihudWxsPT09byYmKEp0KHV1LnNldCgtLjUsLjUsMCksbnUscixydSxpLG4pLGh1LnNldCgwLDEpLG89ZS5yYXkuaW50ZXJzZWN0VHJpYW5nbGUoc3UsY3UsdXUsITEsdHUpLG51bGw9PT1vKSlyZXR1cm47aT1lLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh0dSk7aTxlLm5lYXJ8fGk+ZS5mYXJ8fHQucHVzaCh7ZGlzdGFuY2U6aSxwb2ludDp0dS5jbG9uZSgpLHV2OmIuZ2V0VVYodHUsc3UsdXUsY3UsbHUsaHUscHUsbmV3IE1lKSxmYWNlOm51bGwsb2JqZWN0OnRoaXN9KX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihlKXtmLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt2b2lkIDAhPT1lLmNlbnRlciYmdGhpcy5jZW50ZXIuY29weShlLmNlbnRlcik7cmV0dXJuIHRoaXN9fSk7dmFyIGZ1PW5ldyBUZSxkdT1uZXcgVGU7UXQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlF0LGlzTE9EOiEwLGNvcHk6ZnVuY3Rpb24oZSl7Zi5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSwhMSk7Zm9yKHZhciB0PWUubGV2ZWxzLHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspe3ZhciBpPXRbcl07dGhpcy5hZGRMZXZlbChpLm9iamVjdC5jbG9uZSgpLGkuZGlzdGFuY2UpfXRoaXMuYXV0b1VwZGF0ZT1lLmF1dG9VcGRhdGU7cmV0dXJuIHRoaXN9LGFkZExldmVsOmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCk7dD1NYXRoLmFicyh0KTtmb3IodmFyIHI9dGhpcy5sZXZlbHMsbj0wO248ci5sZW5ndGgmJiEodDxyW25dLmRpc3RhbmNlKTtuKyspO3Iuc3BsaWNlKG4sMCx7ZGlzdGFuY2U6dCxvYmplY3Q6ZX0pO3RoaXMuYWRkKGUpO3JldHVybiB0aGlzfSxnZXRDdXJyZW50TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudExldmVsfSxnZXRPYmplY3RGb3JEaXN0YW5jZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxldmVscztpZigwPHQubGVuZ3RoKXtmb3IodmFyIHI9MSxuPXQubGVuZ3RoO3I8biYmIShlPHRbcl0uZGlzdGFuY2UpO3IrKyk7cmV0dXJuIHRbci0xXS5vYmplY3R9cmV0dXJuIG51bGx9LHJheWNhc3Q6ZnVuY3Rpb24oZSx0KXtpZigwPHRoaXMubGV2ZWxzLmxlbmd0aCl7ZnUuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO3ZhciByPWUucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGZ1KTt0aGlzLmdldE9iamVjdEZvckRpc3RhbmNlKHIpLnJheWNhc3QoZSx0KX19LHVwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxldmVscztpZigxPHQubGVuZ3RoKXtmdS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCk7ZHUuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO2U9ZnUuZGlzdGFuY2VUbyhkdSkvZS56b29tO3RbMF0ub2JqZWN0LnZpc2libGU9ITA7Zm9yKHZhciByPTEsbj10Lmxlbmd0aDtyPG47cisrKWlmKGU+PXRbcl0uZGlzdGFuY2UpdFtyLTFdLm9iamVjdC52aXNpYmxlPSExLHRbcl0ub2JqZWN0LnZpc2libGU9ITA7ZWxzZSBicmVhaztmb3IodGhpcy5fY3VycmVudExldmVsPXItMTtyPG47cisrKXRbcl0ub2JqZWN0LnZpc2libGU9ITF9fSx0b0pTT046ZnVuY3Rpb24oZSl7ZT1mLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGUpOyExPT09dGhpcy5hdXRvVXBkYXRlJiYoZS5vYmplY3QuYXV0b1VwZGF0ZT0hMSk7ZS5vYmplY3QubGV2ZWxzPVtdO2Zvcih2YXIgdD10aGlzLmxldmVscyxyPTAsbj10Lmxlbmd0aDtyPG47cisrKXt2YXIgaT10W3JdO2Uub2JqZWN0LmxldmVscy5wdXNoKHtvYmplY3Q6aS5vYmplY3QudXVpZCxkaXN0YW5jZTppLmRpc3RhbmNlfSl9cmV0dXJuIGV9fSk7ZXIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShJLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmVyLGlzU2tpbm5lZE1lc2g6ITAsYmluZDpmdW5jdGlvbihlLHQpe3RoaXMuc2tlbGV0b249ZTt2b2lkIDA9PT10JiYodGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCksdGhpcy5za2VsZXRvbi5jYWxjdWxhdGVJbnZlcnNlcygpLHQ9dGhpcy5tYXRyaXhXb3JsZCk7dGhpcy5iaW5kTWF0cml4LmNvcHkodCk7dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHQpfSxwb3NlOmZ1bmN0aW9uKCl7dGhpcy5za2VsZXRvbi5wb3NlKCl9LG5vcm1hbGl6ZVNraW5XZWlnaHRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBDZSx0PXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0LHI9MCxuPXQuY291bnQ7cjxuO3IrKyl7ZS54PXQuZ2V0WChyKTtlLnk9dC5nZXRZKHIpO2Uuej10LmdldFoocik7ZS53PXQuZ2V0VyhyKTt2YXIgaT0xL2UubWFuaGF0dGFuTGVuZ3RoKCk7SW5maW5pdHkhPT1pP2UubXVsdGlwbHlTY2FsYXIoaSk6ZS5zZXQoMSwwLDAsMCk7dC5zZXRYWVpXKHIsZS54LGUueSxlLnosZS53KX19LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGUpe0kucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxlKTtcImF0dGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLm1hdHJpeFdvcmxkKTpcImRldGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLmJpbmRNYXRyaXgpOmNvbnNvbGUud2FybihcIlRIUkVFLlNraW5uZWRNZXNoOiBVbnJlY29nbml6ZWQgYmluZE1vZGU6IFwiK3RoaXMuYmluZE1vZGUpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpLmNvcHkodGhpcyl9LGJvbmVUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgbz1uZXcgVGUsYT1uZXcgQ2Uscz1uZXcgQ2UsdT1uZXcgVGUsYz1uZXcgRWU7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5za2VsZXRvbixuPXRoaXMuZ2VvbWV0cnk7YS5mcm9tQnVmZmVyQXR0cmlidXRlKG4uYXR0cmlidXRlcy5za2luSW5kZXgsZSk7cy5mcm9tQnVmZmVyQXR0cmlidXRlKG4uYXR0cmlidXRlcy5za2luV2VpZ2h0LGUpO28uZnJvbUJ1ZmZlckF0dHJpYnV0ZShuLmF0dHJpYnV0ZXMucG9zaXRpb24sZSkuYXBwbHlNYXRyaXg0KHRoaXMuYmluZE1hdHJpeCk7dC5zZXQoMCwwLDApO2ZvcihlPTA7ND5lO2UrKylpZihuPXMuZ2V0Q29tcG9uZW50KGUpLDAhPT1uKXt2YXIgaT1hLmdldENvbXBvbmVudChlKTtjLm11bHRpcGx5TWF0cmljZXMoci5ib25lc1tpXS5tYXRyaXhXb3JsZCxyLmJvbmVJbnZlcnNlc1tpXSk7dC5hZGRTY2FsZWRWZWN0b3IodS5jb3B5KG8pLmFwcGx5TWF0cml4NChjKSxuKX1yZXR1cm4gdC5hcHBseU1hdHJpeDQodGhpcy5iaW5kTWF0cml4SW52ZXJzZSl9fSgpfSk7dmFyIHZ1PW5ldyBFZSxtdT1uZXcgRWU7T2JqZWN0LmFzc2lnbih0ci5wcm90b3R5cGUse2NhbGN1bGF0ZUludmVyc2VzOmZ1bmN0aW9uKCl7dGhpcy5ib25lSW52ZXJzZXM9W107Zm9yKHZhciBlPTAsdD10aGlzLmJvbmVzLmxlbmd0aDtlPHQ7ZSsrKXt2YXIgcj1uZXcgRWU7dGhpcy5ib25lc1tlXSYmci5nZXRJbnZlcnNlKHRoaXMuYm9uZXNbZV0ubWF0cml4V29ybGQpO3RoaXMuYm9uZUludmVyc2VzLnB1c2gocil9fSxwb3NlOmZ1bmN0aW9uKCl7dmFyIGUsdDt2YXIgcj0wO2Zvcih0PXRoaXMuYm9uZXMubGVuZ3RoO3I8dDtyKyspKGU9dGhpcy5ib25lc1tyXSkmJmUubWF0cml4V29ybGQuZ2V0SW52ZXJzZSh0aGlzLmJvbmVJbnZlcnNlc1tyXSk7cj0wO2Zvcih0PXRoaXMuYm9uZXMubGVuZ3RoO3I8dDtyKyspaWYoZT10aGlzLmJvbmVzW3JdKWUucGFyZW50JiZlLnBhcmVudC5pc0JvbmU/KGUubWF0cml4LmdldEludmVyc2UoZS5wYXJlbnQubWF0cml4V29ybGQpLGUubWF0cml4Lm11bHRpcGx5KGUubWF0cml4V29ybGQpKTplLm1hdHJpeC5jb3B5KGUubWF0cml4V29ybGQpLGUubWF0cml4LmRlY29tcG9zZShlLnBvc2l0aW9uLGUucXVhdGVybmlvbixlLnNjYWxlKX0sdXBkYXRlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuYm9uZXMsdD10aGlzLmJvbmVJbnZlcnNlcyxyPXRoaXMuYm9uZU1hdHJpY2VzLG49dGhpcy5ib25lVGV4dHVyZSxpPTAsbz1lLmxlbmd0aDtpPG87aSsrKXZ1Lm11bHRpcGx5TWF0cmljZXMoZVtpXT9lW2ldLm1hdHJpeFdvcmxkOm11LHRbaV0pLHZ1LnRvQXJyYXkociwxNippKTt2b2lkIDAhPT1uJiYobi5uZWVkc1VwZGF0ZT0hMCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0cih0aGlzLmJvbmVzLHRoaXMuYm9uZUludmVyc2VzKX0sZ2V0Qm9uZUJ5TmFtZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPXRoaXMuYm9uZXMubGVuZ3RoO3Q8cjt0Kyspe3ZhciBuPXRoaXMuYm9uZXNbdF07aWYobi5uYW1lPT09ZSlyZXR1cm4gbn19LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmJvbmVUZXh0dXJlJiYodGhpcy5ib25lVGV4dHVyZS5kaXNwb3NlKCksdGhpcy5ib25lVGV4dHVyZT12b2lkIDApfX0pO3JyLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjpycixpc0JvbmU6ITB9KTt2YXIgZ3U9bmV3IEVlLF91PW5ldyBFZSx5dT1bXSxidT1uZXcgSTtuci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKEkucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6bnIsaXNJbnN0YW5jZWRNZXNoOiEwLGdldE1hdHJpeEF0OmZ1bmN0aW9uKGUsdCl7dC5mcm9tQXJyYXkodGhpcy5pbnN0YW5jZU1hdHJpeC5hcnJheSwxNiplKX0scmF5Y2FzdDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMubWF0cml4V29ybGQsbj10aGlzLmNvdW50O2J1Lmdlb21ldHJ5PXRoaXMuZ2VvbWV0cnk7YnUubWF0ZXJpYWw9dGhpcy5tYXRlcmlhbDtpZih2b2lkIDAhPT1idS5tYXRlcmlhbClmb3IodmFyIGk9MDtpPG47aSsrKXt0aGlzLmdldE1hdHJpeEF0KGksZ3UpO191Lm11bHRpcGx5TWF0cmljZXMocixndSk7YnUubWF0cml4V29ybGQ9X3U7YnUucmF5Y2FzdChlLHl1KTtmb3IodmFyIG89MCxhPXl1Lmxlbmd0aDtvPGE7bysrKXt2YXIgcz15dVtvXTtzLmluc3RhbmNlSWQ9aTtzLm9iamVjdD10aGlzO3QucHVzaChzKX15dS5sZW5ndGg9MH19LHNldE1hdHJpeEF0OmZ1bmN0aW9uKGUsdCl7dC50b0FycmF5KHRoaXMuaW5zdGFuY2VNYXRyaXguYXJyYXksMTYqZSl9LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe319KTtpci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSk7aXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWlyO2lyLnByb3RvdHlwZS5pc0xpbmVCYXNpY01hdGVyaWFsPSEwO2lyLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe3kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuY29sb3IuY29weShlLmNvbG9yKTt0aGlzLmxpbmV3aWR0aD1lLmxpbmV3aWR0aDt0aGlzLmxpbmVjYXA9ZS5saW5lY2FwO3RoaXMubGluZWpvaW49ZS5saW5lam9pbjt0aGlzLm1vcnBoVGFyZ2V0cz1lLm1vcnBoVGFyZ2V0cztyZXR1cm4gdGhpc307dmFyIHh1PW5ldyBUZSx3dT1uZXcgVGUsU3U9bmV3IEVlLE11PW5ldyBzLEN1PW5ldyBsO29yLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjpvcixpc0xpbmU6ITAsY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdlb21ldHJ5O2lmKGUuaXNCdWZmZXJHZW9tZXRyeSlpZihudWxsPT09ZS5pbmRleCl7Zm9yKHZhciB0PWUuYXR0cmlidXRlcy5wb3NpdGlvbixyPVswXSxuPTEsaT10LmNvdW50O248aTtuKyspeHUuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LG4tMSksd3UuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LG4pLHJbbl09cltuLTFdLHJbbl0rPXh1LmRpc3RhbmNlVG8od3UpO2Uuc2V0QXR0cmlidXRlKFwibGluZURpc3RhbmNlXCIsbmV3IGoociwxKSl9ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lLmNvbXB1dGVMaW5lRGlzdGFuY2VzKCk6IENvbXB1dGF0aW9uIG9ubHkgcG9zc2libGUgd2l0aCBub24taW5kZXhlZCBCdWZmZXJHZW9tZXRyeS5cIik7ZWxzZSBpZihlLmlzR2VvbWV0cnkpZm9yKHQ9ZS52ZXJ0aWNlcyxyPWUubGluZURpc3RhbmNlcyxyWzBdPTAsbj0xLGk9dC5sZW5ndGg7bjxpO24rKylyW25dPXJbbi0xXSxyW25dKz10W24tMV0uZGlzdGFuY2VUbyh0W25dKTtyZXR1cm4gdGhpc30scmF5Y2FzdDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2VvbWV0cnksbj10aGlzLm1hdHJpeFdvcmxkLGk9ZS5wYXJhbXMuTGluZS50aHJlc2hvbGQ7bnVsbD09PXIuYm91bmRpbmdTcGhlcmUmJnIuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7Q3UuY29weShyLmJvdW5kaW5nU3BoZXJlKTtDdS5hcHBseU1hdHJpeDQobik7Q3UucmFkaXVzKz1pO2lmKCExIT09ZS5yYXkuaW50ZXJzZWN0c1NwaGVyZShDdSkpe1N1LmdldEludmVyc2Uobik7TXUuY29weShlLnJheSkuYXBwbHlNYXRyaXg0KFN1KTtuPWkvKCh0aGlzLnNjYWxlLngrdGhpcy5zY2FsZS55K3RoaXMuc2NhbGUueikvMyk7bio9bjt2YXIgbz1uZXcgVGUsYT1uZXcgVGU7aT1uZXcgVGU7dmFyIHM9bmV3IFRlLHU9dGhpcyYmdGhpcy5pc0xpbmVTZWdtZW50cz8yOjE7aWYoci5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgYz1yLmluZGV4LGw9ci5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKG51bGwhPT1jKXtjPWMuYXJyYXk7cj0wO2Zvcih2YXIgaD1jLmxlbmd0aC0xO3I8aDtyKz11KXt2YXIgcD1jW3IrMV07by5mcm9tQXJyYXkobCwzKmNbcl0pO2EuZnJvbUFycmF5KGwsMypwKTtwPU11LmRpc3RhbmNlU3FUb1NlZ21lbnQobyxhLHMsaSk7cD5ufHwocy5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCkscD1lLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhzKSxwPGUubmVhcnx8cD5lLmZhcnx8dC5wdXNoKHtkaXN0YW5jZTpwLHBvaW50OmkuY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6cixmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KSl9fWVsc2UgZm9yKHI9MCxoPWwubGVuZ3RoLzMtMTtyPGg7cis9dSlvLmZyb21BcnJheShsLDMqciksYS5mcm9tQXJyYXkobCwzKnIrMykscD1NdS5kaXN0YW5jZVNxVG9TZWdtZW50KG8sYSxzLGkpLHA+bnx8KHMuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHA9ZS5yYXkub3JpZ2luLmRpc3RhbmNlVG8ocykscDxlLm5lYXJ8fHA+ZS5mYXJ8fHQucHVzaCh7ZGlzdGFuY2U6cCxwb2ludDppLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OnIsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfWVsc2UgaWYoci5pc0dlb21ldHJ5KWZvcihvPXIudmVydGljZXMsYT1vLmxlbmd0aCxyPTA7cjxhLTE7cis9dSlwPU11LmRpc3RhbmNlU3FUb1NlZ21lbnQob1tyXSxvW3IrMV0scyxpKSxwPm58fChzLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxwPWUucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHMpLHA8ZS5uZWFyfHxwPmUuZmFyfHx0LnB1c2goe2Rpc3RhbmNlOnAscG9pbnQ6aS5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDpyLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pKX19LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2VvbWV0cnk7aWYoZS5pc0J1ZmZlckdlb21ldHJ5KXtlPWUubW9ycGhBdHRyaWJ1dGVzO3ZhciB0PU9iamVjdC5rZXlzKGUpO2lmKDA8dC5sZW5ndGgpe3ZhciByPWVbdFswXV07aWYodm9pZCAwIT09cilmb3IodGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W10sdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e30sZT0wLHQ9ci5sZW5ndGg7ZTx0O2UrKyl7dmFyIG49cltlXS5uYW1lfHxTdHJpbmcoZSk7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuXT1lfX19ZWxzZSBlPWUubW9ycGhUYXJnZXRzLHZvaWQgMCE9PWUmJjA8ZS5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5MaW5lLnVwZGF0ZU1vcnBoVGFyZ2V0cygpIGRvZXMgbm90IHN1cHBvcnQgVEhSRUUuR2VvbWV0cnkuIFVzZSBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKS5jb3B5KHRoaXMpfX0pO3ZhciBUdT1uZXcgVGUsRXU9bmV3IFRlO2FyLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUob3IucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6YXIsaXNMaW5lU2VnbWVudHM6ITAsY29tcHV0ZUxpbmVEaXN0YW5jZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdlb21ldHJ5O2lmKGUuaXNCdWZmZXJHZW9tZXRyeSlpZihudWxsPT09ZS5pbmRleCl7Zm9yKHZhciB0PWUuYXR0cmlidXRlcy5wb3NpdGlvbixyPVtdLG49MCxpPXQuY291bnQ7bjxpO24rPTIpVHUuZnJvbUJ1ZmZlckF0dHJpYnV0ZSh0LG4pLEV1LmZyb21CdWZmZXJBdHRyaWJ1dGUodCxuKzEpLHJbbl09MD09PW4/MDpyW24tMV0scltuKzFdPXJbbl0rVHUuZGlzdGFuY2VUbyhFdSk7ZS5zZXRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIixuZXcgaihyLDEpKX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmVTZWdtZW50cy5jb21wdXRlTGluZURpc3RhbmNlcygpOiBDb21wdXRhdGlvbiBvbmx5IHBvc3NpYmxlIHdpdGggbm9uLWluZGV4ZWQgQnVmZmVyR2VvbWV0cnkuXCIpO2Vsc2UgaWYoZS5pc0dlb21ldHJ5KWZvcih0PWUudmVydGljZXMscj1lLmxpbmVEaXN0YW5jZXMsbj0wLGk9dC5sZW5ndGg7bjxpO24rPTIpVHUuY29weSh0W25dKSxFdS5jb3B5KHRbbisxXSkscltuXT0wPT09bj8wOnJbbi0xXSxyW24rMV09cltuXStUdS5kaXN0YW5jZVRvKEV1KTtyZXR1cm4gdGhpc319KTtzci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG9yLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnNyLGlzTGluZUxvb3A6ITB9KTt1ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSk7dXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXVyO3VyLnByb3RvdHlwZS5pc1BvaW50c01hdGVyaWFsPSEwO3VyLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe3kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuY29sb3IuY29weShlLmNvbG9yKTt0aGlzLm1hcD1lLm1hcDt0aGlzLmFscGhhTWFwPWUuYWxwaGFNYXA7dGhpcy5zaXplPWUuc2l6ZTt0aGlzLnNpemVBdHRlbnVhdGlvbj1lLnNpemVBdHRlbnVhdGlvbjt0aGlzLm1vcnBoVGFyZ2V0cz1lLm1vcnBoVGFyZ2V0cztyZXR1cm4gdGhpc307dmFyIE91PW5ldyBFZSxQdT1uZXcgcyxBdT1uZXcgbCxqdT1uZXcgVGU7Y3IucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmNyLGlzUG9pbnRzOiEwLHJheWNhc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdlb21ldHJ5LG49dGhpcy5tYXRyaXhXb3JsZCxpPWUucGFyYW1zLlBvaW50cy50aHJlc2hvbGQ7bnVsbD09PXIuYm91bmRpbmdTcGhlcmUmJnIuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7QXUuY29weShyLmJvdW5kaW5nU3BoZXJlKTtBdS5hcHBseU1hdHJpeDQobik7QXUucmFkaXVzKz1pO2lmKCExIT09ZS5yYXkuaW50ZXJzZWN0c1NwaGVyZShBdSkpaWYoT3UuZ2V0SW52ZXJzZShuKSxQdS5jb3B5KGUucmF5KS5hcHBseU1hdHJpeDQoT3UpLGkvPSh0aGlzLnNjYWxlLngrdGhpcy5zY2FsZS55K3RoaXMuc2NhbGUueikvMyxpKj1pLHIuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIG89ci5pbmRleDtyPXIuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihudWxsIT09byl7dmFyIGE9by5hcnJheTtvPTA7Zm9yKHZhciBzPWEubGVuZ3RoO288cztvKyspe3ZhciB1PWFbb107anUuZnJvbUFycmF5KHIsMyp1KTtscihqdSx1LGksbixlLHQsdGhpcyl9fWVsc2UgZm9yKG89MCxhPXIubGVuZ3RoLzM7bzxhO28rKylqdS5mcm9tQXJyYXkociwzKm8pLGxyKGp1LG8saSxuLGUsdCx0aGlzKX1lbHNlIGZvcihyPXIudmVydGljZXMsbz0wLGE9ci5sZW5ndGg7bzxhO28rKylscihyW29dLG8saSxuLGUsdCx0aGlzKX0sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZW9tZXRyeTtpZihlLmlzQnVmZmVyR2VvbWV0cnkpe2U9ZS5tb3JwaEF0dHJpYnV0ZXM7dmFyIHQ9T2JqZWN0LmtleXMoZSk7aWYoMDx0Lmxlbmd0aCl7dmFyIHI9ZVt0WzBdXTtpZih2b2lkIDAhPT1yKWZvcih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fSxlPTAsdD1yLmxlbmd0aDtlPHQ7ZSsrKXt2YXIgbj1yW2VdLm5hbWV8fFN0cmluZyhlKTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApO3RoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25dPWV9fX1lbHNlIGU9ZS5tb3JwaFRhcmdldHMsdm9pZCAwIT09ZSYmMDxlLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLlBvaW50cy51cGRhdGVNb3JwaFRhcmdldHMoKSBkb2VzIG5vdCBzdXBwb3J0IFRIUkVFLkdlb21ldHJ5LiBVc2UgVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKX19KTtoci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHAucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6aHIsaXNWaWRlb1RleHR1cmU6ITAsdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pbWFnZTtlLnJlYWR5U3RhdGU+PWUuSEFWRV9DVVJSRU5UX0RBVEEmJih0aGlzLm5lZWRzVXBkYXRlPSEwKX19KTtwci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShwLnByb3RvdHlwZSk7cHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXByO3ByLnByb3RvdHlwZS5pc0NvbXByZXNzZWRUZXh0dXJlPSEwO2ZyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHAucHJvdG90eXBlKTtmci5wcm90b3R5cGUuY29uc3RydWN0b3I9ZnI7ZnIucHJvdG90eXBlLmlzQ2FudmFzVGV4dHVyZT0hMDtkci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShwLnByb3RvdHlwZSk7ZHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWRyO2RyLnByb3RvdHlwZS5pc0RlcHRoVGV4dHVyZT0hMDt2ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShOLnByb3RvdHlwZSk7dnIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXZyO21yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEYucHJvdG90eXBlKTttci5wcm90b3R5cGUuY29uc3RydWN0b3I9bXI7Z3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpO2dyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ncjtfci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGLnByb3RvdHlwZSk7X3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPV9yO3lyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE4ucHJvdG90eXBlKTt5ci5wcm90b3R5cGUuY29uc3RydWN0b3I9eXI7YnIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO2JyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1icjt4ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5ci5wcm90b3R5cGUpO3hyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj14cjt3ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGLnByb3RvdHlwZSk7d3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPXdyO1NyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHlyLnByb3RvdHlwZSk7U3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPVNyO01yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEYucHJvdG90eXBlKTtNci5wcm90b3R5cGUuY29uc3RydWN0b3I9TXI7Q3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeXIucHJvdG90eXBlKTtDci5wcm90b3R5cGUuY29uc3RydWN0b3I9Q3I7VHIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO1RyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1UcjtFci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5ci5wcm90b3R5cGUpO0VyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FcjtPci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGLnByb3RvdHlwZSk7T3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPU9yO1ByLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE4ucHJvdG90eXBlKTtQci5wcm90b3R5cGUuY29uc3RydWN0b3I9UHI7UHIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPU4ucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2UucGF0aD10aGlzLnBhcmFtZXRlcnMucGF0aC50b0pTT04oKTtyZXR1cm4gZX07QXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO0FyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1Bcjtqci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShOLnByb3RvdHlwZSk7anIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWpyO1JyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEYucHJvdG90eXBlKTtSci5wcm90b3R5cGUuY29uc3RydWN0b3I9UnI7a3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpO2tyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1rcjt2YXIgUnU9e3RyaWFuZ3VsYXRlOmZ1bmN0aW9uKGUsdCxyKXtyPXJ8fDI7dmFyIG49dCYmdC5sZW5ndGgsaT1uP3RbMF0qcjplLmxlbmd0aCxvPUxyKGUsMCxpLHIsITApLGE9W107aWYoIW98fG8ubmV4dD09PW8ucHJldilyZXR1cm4gYTt2YXIgcztpZihuKXt2YXIgdT1yO249W107dmFyIGM7dmFyIGw9MDtmb3IoYz10Lmxlbmd0aDtsPGM7bCsrKXt2YXIgaD10W2xdKnU7dmFyIHA9bDxjLTE/dFtsKzFdKnU6ZS5sZW5ndGg7aD1McihlLGgscCx1LCExKTtoPT09aC5uZXh0JiYoaC5zdGVpbmVyPSEwKTtuLnB1c2goJHIoaCkpfW4uc29ydChCcik7Zm9yKGw9MDtsPG4ubGVuZ3RoO2wrKyl7dT1uW2xdO3Q9bztpZih0PUZyKHUsdCkpdT1Zcih0LHUpLE5yKHQsdC5uZXh0KSxOcih1LHUubmV4dCk7bz1OcihvLG8ubmV4dCl9fWlmKGUubGVuZ3RoPjgwKnIpe3ZhciBmPXM9ZVswXTt2YXIgZD1uPWVbMV07Zm9yKHU9cjt1PGk7dSs9cilsPWVbdV0sdD1lW3UrMV0sbDxmJiYoZj1sKSx0PGQmJihkPXQpLGw+cyYmKHM9bCksdD5uJiYobj10KTtzPU1hdGgubWF4KHMtZixuLWQpO3M9MCE9PXM/MS9zOjB9SXIobyxhLHIsZixkLHMpO3JldHVybiBhfX0sa3U9e2FyZWE6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLHI9MCxuPXQtMSxpPTA7aTx0O249aSsrKXIrPWVbbl0ueCplW2ldLnktZVtpXS54KmVbbl0ueTtyZXR1cm4uNSpyfSxpc0Nsb2NrV2lzZTpmdW5jdGlvbihlKXtyZXR1cm4gMD5rdS5hcmVhKGUpfSx0cmlhbmd1bGF0ZVNoYXBlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9W10sbj1bXSxpPVtdO1FyKGUpO2VuKHIsZSk7dmFyIG89ZS5sZW5ndGg7dC5mb3JFYWNoKFFyKTtmb3IoZT0wO2U8dC5sZW5ndGg7ZSsrKW4ucHVzaChvKSxvKz10W2VdLmxlbmd0aCxlbihyLHRbZV0pO3Q9UnUudHJpYW5ndWxhdGUocixuKTtmb3IoZT0wO2U8dC5sZW5ndGg7ZSs9MylpLnB1c2godC5zbGljZShlLGUrMykpO3JldHVybiBpfX07dG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO3RuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10bjt0bi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9Ri5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIG5uKHRoaXMucGFyYW1ldGVycy5zaGFwZXMsdGhpcy5wYXJhbWV0ZXJzLm9wdGlvbnMsZSl9O3JuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE4ucHJvdG90eXBlKTtybi5wcm90b3R5cGUuY29uc3RydWN0b3I9cm47cm4ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPU4ucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBubih0aGlzLnBhcmFtZXRlcnMuc2hhcGVzLHRoaXMucGFyYW1ldGVycy5vcHRpb25zLGUpfTt2YXIgTHU9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oZSx0LHIsbixpKXtlPXRbMypuXTtuPXRbMypuKzFdO3ZhciBvPXRbMyppXTtpPXRbMyppKzFdO3JldHVybltuZXcgTWUodFszKnJdLHRbMypyKzFdKSxuZXcgTWUoZSxuKSxuZXcgTWUobyxpKV19LGdlbmVyYXRlU2lkZVdhbGxVVjpmdW5jdGlvbihlLHQscixuLGksbyl7ZT10WzMqcl07dmFyIGE9dFszKnIrMV07cj10WzMqcisyXTt2YXIgcz10WzMqbl0sdT10WzMqbisxXTtuPXRbMypuKzJdO3ZhciBjPXRbMyppXSxsPXRbMyppKzFdO2k9dFszKmkrMl07dmFyIGg9dFszKm9dLHA9dFszKm8rMV07dD10WzMqbysyXTtyZXR1cm4uMDE+TWF0aC5hYnMoYS11KT9bbmV3IE1lKGUsMS1yKSxuZXcgTWUocywxLW4pLG5ldyBNZShjLDEtaSksbmV3IE1lKGgsMS10KV06W25ldyBNZShhLDEtciksbmV3IE1lKHUsMS1uKSxuZXcgTWUobCwxLWkpLG5ldyBNZShwLDEtdCldfX07b24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO29uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vbjthbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShybi5wcm90b3R5cGUpO2FuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hbjtzbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGLnByb3RvdHlwZSk7c24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPXNuO3VuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE4ucHJvdG90eXBlKTt1bi5wcm90b3R5cGUuY29uc3RydWN0b3I9dW47Y24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO2NuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jbjtsbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShOLnByb3RvdHlwZSk7bG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWxuO2huLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEYucHJvdG90eXBlKTtobi5wcm90b3R5cGUuY29uc3RydWN0b3I9aG47cG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpO3BuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wbjtmbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGLnByb3RvdHlwZSk7Zm4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWZuO2ZuLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT1GLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gdm4odGhpcy5wYXJhbWV0ZXJzLnNoYXBlcyxlKX07ZG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpO2RuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kbjtkbi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9Ti5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIHZuKHRoaXMucGFyYW1ldGVycy5zaGFwZXMsZSl9O21uLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE4ucHJvdG90eXBlKTttbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bW47Z24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRi5wcm90b3R5cGUpO2duLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nbjtfbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShOLnByb3RvdHlwZSk7X24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPV9uO3luLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGduLnByb3RvdHlwZSk7eW4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPXluO2JuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKF9uLnByb3RvdHlwZSk7Ym4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWJuO3huLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEYucHJvdG90eXBlKTt4bi5wcm90b3R5cGUuY29uc3RydWN0b3I9eG47d24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTi5wcm90b3R5cGUpO3duLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj13bjt2YXIgTnU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsV2lyZWZyYW1lR2VvbWV0cnk6dnIsUGFyYW1ldHJpY0dlb21ldHJ5Om1yLFBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeTpncixUZXRyYWhlZHJvbkdlb21ldHJ5OmJyLFRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnk6eHIsT2N0YWhlZHJvbkdlb21ldHJ5OndyLE9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeTpTcixJY29zYWhlZHJvbkdlb21ldHJ5Ok1yLEljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnk6Q3IsRG9kZWNhaGVkcm9uR2VvbWV0cnk6VHIsRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnk6RXIsUG9seWhlZHJvbkdlb21ldHJ5Ol9yLFBvbHloZWRyb25CdWZmZXJHZW9tZXRyeTp5cixUdWJlR2VvbWV0cnk6T3IsVHViZUJ1ZmZlckdlb21ldHJ5OlByLFRvcnVzS25vdEdlb21ldHJ5OkFyLFRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5OmpyLFRvcnVzR2VvbWV0cnk6UnIsVG9ydXNCdWZmZXJHZW9tZXRyeTprcixUZXh0R2VvbWV0cnk6b24sVGV4dEJ1ZmZlckdlb21ldHJ5OmFuLFNwaGVyZUdlb21ldHJ5OnNuLFNwaGVyZUJ1ZmZlckdlb21ldHJ5OnVuLFJpbmdHZW9tZXRyeTpjbixSaW5nQnVmZmVyR2VvbWV0cnk6bG4sUGxhbmVHZW9tZXRyeTpXLFBsYW5lQnVmZmVyR2VvbWV0cnk6WCxMYXRoZUdlb21ldHJ5OmhuLExhdGhlQnVmZmVyR2VvbWV0cnk6cG4sU2hhcGVHZW9tZXRyeTpmbixTaGFwZUJ1ZmZlckdlb21ldHJ5OmRuLEV4dHJ1ZGVHZW9tZXRyeTp0bixFeHRydWRlQnVmZmVyR2VvbWV0cnk6cm4sRWRnZXNHZW9tZXRyeTptbixDb25lR2VvbWV0cnk6eW4sQ29uZUJ1ZmZlckdlb21ldHJ5OmJuLEN5bGluZGVyR2VvbWV0cnk6Z24sQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeTpfbixDaXJjbGVHZW9tZXRyeTp4bixDaXJjbGVCdWZmZXJHZW9tZXRyeTp3bixCb3hHZW9tZXRyeTpBcyxCb3hCdWZmZXJHZW9tZXRyeTpqc30pO1NuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkucHJvdG90eXBlKTtTbi5wcm90b3R5cGUuY29uc3RydWN0b3I9U247U24ucHJvdG90eXBlLmlzU2hhZG93TWF0ZXJpYWw9ITA7U24ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7eS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5jb2xvci5jb3B5KGUuY29sb3IpO3JldHVybiB0aGlzfTtNbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShHLnByb3RvdHlwZSk7TW4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPU1uO01uLnByb3RvdHlwZS5pc1Jhd1NoYWRlck1hdGVyaWFsPSEwO0NuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkucHJvdG90eXBlKTtDbi5wcm90b3R5cGUuY29uc3RydWN0b3I9Q247Q24ucHJvdG90eXBlLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWw9ITA7Q24ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7eS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5kZWZpbmVzPXtTVEFOREFSRDpcIlwifTt0aGlzLmNvbG9yLmNvcHkoZS5jb2xvcik7dGhpcy5yb3VnaG5lc3M9ZS5yb3VnaG5lc3M7dGhpcy5tZXRhbG5lc3M9ZS5tZXRhbG5lc3M7dGhpcy5tYXA9ZS5tYXA7dGhpcy5saWdodE1hcD1lLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9ZS5saWdodE1hcEludGVuc2l0eTt0aGlzLmFvTWFwPWUuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1lLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShlLmVtaXNzaXZlKTt0aGlzLmVtaXNzaXZlTWFwPWUuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1lLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuYnVtcE1hcD1lLmJ1bXBNYXA7dGhpcy5idW1wU2NhbGU9ZS5idW1wU2NhbGU7dGhpcy5ub3JtYWxNYXA9ZS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxNYXBUeXBlPWUubm9ybWFsTWFwVHlwZTt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoZS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9ZS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1lLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1lLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5yb3VnaG5lc3NNYXA9ZS5yb3VnaG5lc3NNYXA7dGhpcy5tZXRhbG5lc3NNYXA9ZS5tZXRhbG5lc3NNYXA7dGhpcy5hbHBoYU1hcD1lLmFscGhhTWFwO3RoaXMuZW52TWFwPWUuZW52TWFwO3RoaXMuZW52TWFwSW50ZW5zaXR5PWUuZW52TWFwSW50ZW5zaXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWUucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWUud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWUud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1lLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1lLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9ZS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1lLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1lLm1vcnBoTm9ybWFsczt0aGlzLnZlcnRleFRhbmdlbnRzPWUudmVydGV4VGFuZ2VudHM7cmV0dXJuIHRoaXN9O1RuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKENuLnByb3RvdHlwZSk7VG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRuO1RuLnByb3RvdHlwZS5pc01lc2hQaHlzaWNhbE1hdGVyaWFsPSEwO1RuLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe0NuLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCIsUEhZU0lDQUw6XCJcIn07dGhpcy5jbGVhcmNvYXQ9ZS5jbGVhcmNvYXQ7dGhpcy5jbGVhcmNvYXRNYXA9ZS5jbGVhcmNvYXRNYXA7dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3M9ZS5jbGVhcmNvYXRSb3VnaG5lc3M7dGhpcy5jbGVhcmNvYXRSb3VnaG5lc3NNYXA9ZS5jbGVhcmNvYXRSb3VnaG5lc3NNYXA7dGhpcy5jbGVhcmNvYXROb3JtYWxNYXA9ZS5jbGVhcmNvYXROb3JtYWxNYXA7dGhpcy5jbGVhcmNvYXROb3JtYWxTY2FsZS5jb3B5KGUuY2xlYXJjb2F0Tm9ybWFsU2NhbGUpO3RoaXMucmVmbGVjdGl2aXR5PWUucmVmbGVjdGl2aXR5O3RoaXMuc2hlZW49ZS5zaGVlbj8odGhpcy5zaGVlbnx8bmV3IHYpLmNvcHkoZS5zaGVlbik6bnVsbDt0aGlzLnRyYW5zcGFyZW5jeT1lLnRyYW5zcGFyZW5jeTtyZXR1cm4gdGhpc307RW4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeS5wcm90b3R5cGUpO0VuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FbjtFbi5wcm90b3R5cGUuaXNNZXNoUGhvbmdNYXRlcmlhbD0hMDtFbi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXt5LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmNvbG9yLmNvcHkoZS5jb2xvcik7dGhpcy5zcGVjdWxhci5jb3B5KGUuc3BlY3VsYXIpO3RoaXMuc2hpbmluZXNzPWUuc2hpbmluZXNzO3RoaXMubWFwPWUubWFwO3RoaXMubGlnaHRNYXA9ZS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWUubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1lLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9ZS5hb01hcEludGVuc2l0eTt0aGlzLmVtaXNzaXZlLmNvcHkoZS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1lLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9ZS5lbWlzc2l2ZUludGVuc2l0eTt0aGlzLmJ1bXBNYXA9ZS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWUuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPWUubm9ybWFsTWFwO3RoaXMubm9ybWFsTWFwVHlwZT1lLm5vcm1hbE1hcFR5cGU7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KGUubm9ybWFsU2NhbGUpO3RoaXMuZGlzcGxhY2VtZW50TWFwPWUuZGlzcGxhY2VtZW50TWFwO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9ZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9ZS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMuc3BlY3VsYXJNYXA9ZS5zcGVjdWxhck1hcDt0aGlzLmFscGhhTWFwPWUuYWxwaGFNYXA7dGhpcy5lbnZNYXA9ZS5lbnZNYXA7dGhpcy5jb21iaW5lPWUuY29tYmluZTt0aGlzLnJlZmxlY3Rpdml0eT1lLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1lLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1lLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1lLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9ZS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49ZS53aXJlZnJhbWVMaW5lam9pbjt0aGlzLnNraW5uaW5nPWUuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9ZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9ZS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O09uLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkucHJvdG90eXBlKTtPbi5wcm90b3R5cGUuY29uc3RydWN0b3I9T247T24ucHJvdG90eXBlLmlzTWVzaFRvb25NYXRlcmlhbD0hMDtPbi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXt5LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmNvbG9yLmNvcHkoZS5jb2xvcik7dGhpcy5zcGVjdWxhci5jb3B5KGUuc3BlY3VsYXIpO3RoaXMuc2hpbmluZXNzPWUuc2hpbmluZXNzO3RoaXMubWFwPWUubWFwO3RoaXMuZ3JhZGllbnRNYXA9ZS5ncmFkaWVudE1hcDt0aGlzLmxpZ2h0TWFwPWUubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1lLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9ZS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWUuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGUuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9ZS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWUuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPWUuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1lLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1lLm5vcm1hbE1hcDt0aGlzLm5vcm1hbE1hcFR5cGU9ZS5ub3JtYWxNYXBUeXBlO3RoaXMubm9ybWFsU2NhbGUuY29weShlLm5vcm1hbFNjYWxlKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1lLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWUuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWUuZGlzcGxhY2VtZW50Qmlhczt0aGlzLnNwZWN1bGFyTWFwPWUuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1lLmFscGhhTWFwO3RoaXMud2lyZWZyYW1lPWUud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWUud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1lLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1lLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9ZS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1lLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1lLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307UG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeS5wcm90b3R5cGUpO1BuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1QbjtQbi5wcm90b3R5cGUuaXNNZXNoTm9ybWFsTWF0ZXJpYWw9ITA7UG4ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7eS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5idW1wTWFwPWUuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1lLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1lLm5vcm1hbE1hcDt0aGlzLm5vcm1hbE1hcFR5cGU9ZS5ub3JtYWxNYXBUeXBlO3RoaXMubm9ybWFsU2NhbGUuY29weShlLm5vcm1hbFNjYWxlKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1lLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWUuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWUuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1lLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1lLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLnNraW5uaW5nPWUuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9ZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9ZS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O0FuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkucHJvdG90eXBlKTtBbi5wcm90b3R5cGUuY29uc3RydWN0b3I9QW47QW4ucHJvdG90eXBlLmlzTWVzaExhbWJlcnRNYXRlcmlhbD0hMDtBbi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXt5LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmNvbG9yLmNvcHkoZS5jb2xvcik7dGhpcy5tYXA9ZS5tYXA7dGhpcy5saWdodE1hcD1lLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9ZS5saWdodE1hcEludGVuc2l0eTt0aGlzLmFvTWFwPWUuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1lLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShlLmVtaXNzaXZlKTt0aGlzLmVtaXNzaXZlTWFwPWUuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1lLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9ZS5zcGVjdWxhck1hcDt0aGlzLmFscGhhTWFwPWUuYWxwaGFNYXA7dGhpcy5lbnZNYXA9ZS5lbnZNYXA7dGhpcy5jb21iaW5lPWUuY29tYmluZTt0aGlzLnJlZmxlY3Rpdml0eT1lLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1lLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1lLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1lLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9ZS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49ZS53aXJlZnJhbWVMaW5lam9pbjt0aGlzLnNraW5uaW5nPWUuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9ZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9ZS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O2puLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkucHJvdG90eXBlKTtqbi5wcm90b3R5cGUuY29uc3RydWN0b3I9am47am4ucHJvdG90eXBlLmlzTWVzaE1hdGNhcE1hdGVyaWFsPSEwO2puLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe3kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuZGVmaW5lcz17TUFUQ0FQOlwiXCJ9O3RoaXMuY29sb3IuY29weShlLmNvbG9yKTt0aGlzLm1hdGNhcD1lLm1hdGNhcDt0aGlzLm1hcD1lLm1hcDt0aGlzLmJ1bXBNYXA9ZS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWUuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPWUubm9ybWFsTWFwO3RoaXMubm9ybWFsTWFwVHlwZT1lLm5vcm1hbE1hcFR5cGU7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KGUubm9ybWFsU2NhbGUpO3RoaXMuZGlzcGxhY2VtZW50TWFwPWUuZGlzcGxhY2VtZW50TWFwO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9ZS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9ZS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMuYWxwaGFNYXA9ZS5hbHBoYU1hcDt0aGlzLnNraW5uaW5nPWUuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9ZS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9ZS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O1JuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGlyLnByb3RvdHlwZSk7Um4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPVJuO1JuLnByb3RvdHlwZS5pc0xpbmVEYXNoZWRNYXRlcmlhbD0hMDtSbi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXtpci5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5zY2FsZT1lLnNjYWxlO3RoaXMuZGFzaFNpemU9ZS5kYXNoU2l6ZTt0aGlzLmdhcFNpemU9ZS5nYXBTaXplO3JldHVybiB0aGlzfTt2YXIgSXU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsU2hhZG93TWF0ZXJpYWw6U24sU3ByaXRlTWF0ZXJpYWw6S3QsUmF3U2hhZGVyTWF0ZXJpYWw6TW4sU2hhZGVyTWF0ZXJpYWw6RyxQb2ludHNNYXRlcmlhbDp1cixNZXNoUGh5c2ljYWxNYXRlcmlhbDpUbixNZXNoU3RhbmRhcmRNYXRlcmlhbDpDbixNZXNoUGhvbmdNYXRlcmlhbDpFbixNZXNoVG9vbk1hdGVyaWFsOk9uLE1lc2hOb3JtYWxNYXRlcmlhbDpQbixNZXNoTGFtYmVydE1hdGVyaWFsOkFuLE1lc2hEZXB0aE1hdGVyaWFsOkx0LE1lc2hEaXN0YW5jZU1hdGVyaWFsOk50LE1lc2hCYXNpY01hdGVyaWFsOngsTWVzaE1hdGNhcE1hdGVyaWFsOmpuLExpbmVEYXNoZWRNYXRlcmlhbDpSbixMaW5lQmFzaWNNYXRlcmlhbDppcixNYXRlcmlhbDp5fSksRHU9e2FycmF5U2xpY2U6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBEdS5pc1R5cGVkQXJyYXkoZSk/bmV3IGUuY29uc3RydWN0b3IoZS5zdWJhcnJheSh0LHZvaWQgMCE9PXI/cjplLmxlbmd0aCkpOmUuc2xpY2UodCxyKX0sY29udmVydEFycmF5OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4hZXx8IXImJmUuY29uc3RydWN0b3I9PT10P2U6XCJudW1iZXJcIj09PXR5cGVvZiB0LkJZVEVTX1BFUl9FTEVNRU5UP25ldyB0KGUpOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpfSxpc1R5cGVkQXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhlKSYmIShlIGluc3RhbmNlb2YgRGF0YVZpZXcpfSxnZXRLZXlmcmFtZU9yZGVyOmZ1bmN0aW9uKHIpe2Zvcih2YXIgZT1yLmxlbmd0aCx0PUFycmF5KGUpLG49MDtuIT09ZTsrK24pdFtuXT1uO3Quc29ydChmdW5jdGlvbihlLHQpe3JldHVybiByW2VdLXJbdF19KTtyZXR1cm4gdH0sc29ydGVkQXJyYXk6ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1lLmxlbmd0aCxpPW5ldyBlLmNvbnN0cnVjdG9yKG4pLG89MCxhPTA7YSE9PW47KytvKWZvcih2YXIgcz1yW29dKnQsdT0wO3UhPT10OysrdSlpW2ErK109ZVtzK3VdO3JldHVybiBpfSxmbGF0dGVuSlNPTjpmdW5jdGlvbihlLHQscixuKXtmb3IodmFyIGk9MSxvPWVbMF07dm9pZCAwIT09byYmdm9pZCAwPT09b1tuXTspbz1lW2krK107aWYodm9pZCAwIT09byl7dmFyIGE9b1tuXTtpZih2b2lkIDAhPT1hKWlmKEFycmF5LmlzQXJyYXkoYSkpe2Rve2E9b1tuXSx2b2lkIDAhPT1hJiYodC5wdXNoKG8udGltZSksci5wdXNoLmFwcGx5KHIsYSkpLG89ZVtpKytdfXdoaWxlKHZvaWQgMCE9PW8pfWVsc2UgaWYodm9pZCAwIT09YS50b0FycmF5KXtkb3thPW9bbl0sdm9pZCAwIT09YSYmKHQucHVzaChvLnRpbWUpLGEudG9BcnJheShyLHIubGVuZ3RoKSksbz1lW2krK119d2hpbGUodm9pZCAwIT09byl9ZWxzZXtkb3thPW9bbl0sdm9pZCAwIT09YSYmKHQucHVzaChvLnRpbWUpLHIucHVzaChhKSksbz1lW2krK119d2hpbGUodm9pZCAwIT09byl9fX0sc3ViY2xpcDpmdW5jdGlvbihlLHQscixuLGkpe2k9aXx8MzA7ZT1lLmNsb25lKCk7ZS5uYW1lPXQ7dmFyIG89W107Zm9yKHQ9MDt0PGUudHJhY2tzLmxlbmd0aDsrK3Qpe2Zvcih2YXIgYT1lLnRyYWNrc1t0XSxzPWEuZ2V0VmFsdWVTaXplKCksdT1bXSxjPVtdLGw9MDtsPGEudGltZXMubGVuZ3RoOysrbCl7dmFyIGg9YS50aW1lc1tsXSppO2lmKCEoaDxyfHxoPj1uKSlmb3IodS5wdXNoKGEudGltZXNbbF0pLGg9MDtoPHM7KytoKWMucHVzaChhLnZhbHVlc1tsKnMraF0pfTAhPT11Lmxlbmd0aCYmKGEudGltZXM9RHUuY29udmVydEFycmF5KHUsYS50aW1lcy5jb25zdHJ1Y3RvciksYS52YWx1ZXM9RHUuY29udmVydEFycmF5KGMsYS52YWx1ZXMuY29uc3RydWN0b3IpLG8ucHVzaChhKSl9ZS50cmFja3M9bztyPUluZmluaXR5O2Zvcih0PTA7dDxlLnRyYWNrcy5sZW5ndGg7Kyt0KXI+ZS50cmFja3NbdF0udGltZXNbMF0mJihyPWUudHJhY2tzW3RdLnRpbWVzWzBdKTtmb3IodD0wO3Q8ZS50cmFja3MubGVuZ3RoOysrdCllLnRyYWNrc1t0XS5zaGlmdCgtMSpyKTtlLnJlc2V0RHVyYXRpb24oKTtyZXR1cm4gZX0sbWFrZUNsaXBBZGRpdGl2ZTpmdW5jdGlvbihlLHQscixuKXt2b2lkIDA9PT10JiYodD0wKTt2b2lkIDA9PT1yJiYocj1lKTtpZih2b2lkIDA9PT1ufHwwPj1uKW49MzA7dmFyIGk9ZS50cmFja3MubGVuZ3RoO3QvPW47Zm9yKG49MDtuPGk7KytuKXt2YXIgbz1yLnRyYWNrc1tuXSxhPW8uVmFsdWVUeXBlTmFtZTtpZihcImJvb2xcIiE9PWEmJlwic3RyaW5nXCIhPT1hKXt2YXIgcz1lLnRyYWNrcy5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWU9PT1vLm5hbWUmJmUuVmFsdWVUeXBlTmFtZT09PWF9KTtpZih2b2lkIDAhPT1zKXt2YXIgdT1vLmdldFZhbHVlU2l6ZSgpLGM9by50aW1lcy5sZW5ndGgtMTt0PD1vLnRpbWVzWzBdP2M9RHUuYXJyYXlTbGljZShvLnZhbHVlcywwLG8udmFsdWVTaXplKTp0Pj1vLnRpbWVzW2NdP2M9RHUuYXJyYXlTbGljZShvLnZhbHVlcyxjKnUpOihjPW8uY3JlYXRlSW50ZXJwb2xhbnQoKSxjLmV2YWx1YXRlKHQpLGM9Yy5yZXN1bHRCdWZmZXIpO1wicXVhdGVybmlvblwiPT09YSYmbmV3IGQoY1swXSxjWzFdLGNbMl0sY1szXSkubm9ybWFsaXplKCkuY29uanVnYXRlKCkudG9BcnJheShjKTtmb3IodmFyIGw9cy50aW1lcy5sZW5ndGgsaD0wO2g8bDsrK2gpe3ZhciBwPWgqdTtpZihcInF1YXRlcm5pb25cIj09PWEpZC5tdWx0aXBseVF1YXRlcm5pb25zRmxhdChzLnZhbHVlcyxwLGMsMCxzLnZhbHVlcyxwKTtlbHNlIGZvcih2YXIgZj0wO2Y8dTsrK2Ypcy52YWx1ZXNbcCtmXS09Y1tmXX19fX1lLmJsZW5kTW9kZT0yNTAxO3JldHVybiBlfX07T2JqZWN0LmFzc2lnbihrbi5wcm90b3R5cGUse2V2YWx1YXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLHI9dGhpcy5fY2FjaGVkSW5kZXgsbj10W3JdLGk9dFtyLTFdO2U6e3Q6e3I6e246aWYoIShlPG4pKXtmb3IodmFyIG89cisyOzspe2lmKHZvaWQgMD09PW4pe2lmKGU8aSlicmVhayBuO3RoaXMuX2NhY2hlZEluZGV4PXI9dC5sZW5ndGg7cmV0dXJuIHRoaXMuYWZ0ZXJFbmRfKHItMSxlLGkpfWlmKHI9PT1vKWJyZWFrO2k9bjtuPXRbKytyXTtpZihlPG4pYnJlYWsgdH1uPXQubGVuZ3RoO2JyZWFrIHJ9aWYoZT49aSlicmVhayBlO2Vsc2V7bz10WzFdO2U8byYmKHI9MixpPW8pO2ZvcihvPXItMjs7KXtpZih2b2lkIDA9PT1pKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsZSxuKTtpZihyPT09bylicmVhaztuPWk7aT10Wy0tci0xXTtpZihlPj1pKWJyZWFrIHR9bj1yO3I9MH19Zm9yKDtyPG47KWk9cituPj4+MSxlPHRbaV0/bj1pOnI9aSsxO249dFtyXTtpPXRbci0xXTtpZih2b2lkIDA9PT1pKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsZSxuKTtpZih2b2lkIDA9PT1uKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD1yPXQubGVuZ3RoLHRoaXMuYWZ0ZXJFbmRfKHItMSxpLGUpfXRoaXMuX2NhY2hlZEluZGV4PXI7dGhpcy5pbnRlcnZhbENoYW5nZWRfKHIsaSxuKX1yZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8ocixpLGUsbil9LHNldHRpbmdzOm51bGwsRGVmYXVsdFNldHRpbmdzXzp7fSxnZXRTZXR0aW5nc186ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXR0aW5nc3x8dGhpcy5EZWZhdWx0U2V0dGluZ3NffSxjb3B5U2FtcGxlVmFsdWVfOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucmVzdWx0QnVmZmVyLHI9dGhpcy5zYW1wbGVWYWx1ZXMsbj10aGlzLnZhbHVlU2l6ZTtlKj1uO2Zvcih2YXIgaT0wO2khPT1uOysraSl0W2ldPXJbZStpXTtyZXR1cm4gdH0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJjYWxsIHRvIGFic3RyYWN0IG1ldGhvZFwiKX0saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbigpe319KTtPYmplY3QuYXNzaWduKGtuLnByb3RvdHlwZSx7YmVmb3JlU3RhcnRfOmtuLnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfLGFmdGVyRW5kXzprbi5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlX30pO0xuLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoa24ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TG4sRGVmYXVsdFNldHRpbmdzXzp7ZW5kaW5nU3RhcnQ6MjQwMCxlbmRpbmdFbmQ6MjQwMH0saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnMsaT1lLTIsbz1lKzEsYT1uW2ldLHM9bltvXTtpZih2b2lkIDA9PT1hKXN3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ1N0YXJ0KXtjYXNlIDI0MDE6aT1lO2E9Mip0LXI7YnJlYWs7Y2FzZSAyNDAyOmk9bi5sZW5ndGgtMjthPXQrbltpXS1uW2krMV07YnJlYWs7ZGVmYXVsdDppPWUsYT1yfWlmKHZvaWQgMD09PXMpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nRW5kKXtjYXNlIDI0MDE6bz1lO3M9MipyLXQ7YnJlYWs7Y2FzZSAyNDAyOm89MTtzPXIrblsxXS1uWzBdO2JyZWFrO2RlZmF1bHQ6bz1lLTEscz10fWU9LjUqKHItdCk7bj10aGlzLnZhbHVlU2l6ZTt0aGlzLl93ZWlnaHRQcmV2PWUvKHQtYSk7dGhpcy5fd2VpZ2h0TmV4dD1lLyhzLXIpO3RoaXMuX29mZnNldFByZXY9aSpuO3RoaXMuX29mZnNldE5leHQ9bypufSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5yZXN1bHRCdWZmZXIsbz10aGlzLnNhbXBsZVZhbHVlcyxhPXRoaXMudmFsdWVTaXplO2UqPWE7dmFyIHM9ZS1hLHU9dGhpcy5fb2Zmc2V0UHJldixjPXRoaXMuX29mZnNldE5leHQsbD10aGlzLl93ZWlnaHRQcmV2LGg9dGhpcy5fd2VpZ2h0TmV4dCxwPShyLXQpLyhuLXQpO3I9cCpwO249cipwO3Q9LWwqbisyKmwqci1sKnA7bD0oMStsKSpuKygtMS41LTIqbCkqcisoLS41K2wpKnArMTtwPSgtMS1oKSpuKygxLjUraCkqcisuNSpwO2g9aCpuLWgqcjtmb3Iocj0wO3IhPT1hOysrcilpW3JdPXQqb1t1K3JdK2wqb1tzK3JdK3Aqb1tlK3JdK2gqb1tjK3JdO3JldHVybiBpfX0pO05uLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoa24ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Tm4saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMucmVzdWx0QnVmZmVyLG89dGhpcy5zYW1wbGVWYWx1ZXMsYT10aGlzLnZhbHVlU2l6ZTtlKj1hO3ZhciBzPWUtYTt0PShyLXQpLyhuLXQpO3I9MS10O2ZvcihuPTA7biE9PWE7KytuKWlbbl09b1tzK25dKnIrb1tlK25dKnQ7cmV0dXJuIGl9fSk7SW4ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShrbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpJbixpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29weVNhbXBsZVZhbHVlXyhlLTEpfX0pO09iamVjdC5hc3NpZ24oRG4se3RvSlNPTjpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnN0cnVjdG9yO2lmKHZvaWQgMCE9PXQudG9KU09OKXQ9dC50b0pTT04oZSk7ZWxzZXt0PXtuYW1lOmUubmFtZSx0aW1lczpEdS5jb252ZXJ0QXJyYXkoZS50aW1lcyxBcnJheSksdmFsdWVzOkR1LmNvbnZlcnRBcnJheShlLnZhbHVlcyxBcnJheSl9O3ZhciByPWUuZ2V0SW50ZXJwb2xhdGlvbigpO3IhPT1lLkRlZmF1bHRJbnRlcnBvbGF0aW9uJiYodC5pbnRlcnBvbGF0aW9uPXIpfXQudHlwZT1lLlZhbHVlVHlwZU5hbWU7cmV0dXJuIHR9fSk7T2JqZWN0LmFzc2lnbihEbi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOkRuLFRpbWVCdWZmZXJUeXBlOkZsb2F0MzJBcnJheSxWYWx1ZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOjIzMDEsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBJbih0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksZSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IE5uKHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxlKX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTG4odGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGUpfSxzZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIDIzMDA6dmFyIHQ9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTticmVhaztjYXNlIDIzMDE6dD10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjticmVhaztjYXNlIDIzMDI6dD10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aH1pZih2b2lkIDA9PT10KXt0PVwidW5zdXBwb3J0ZWQgaW50ZXJwb2xhdGlvbiBmb3IgXCIrdGhpcy5WYWx1ZVR5cGVOYW1lK1wiIGtleWZyYW1lIHRyYWNrIG5hbWVkIFwiK3RoaXMubmFtZTtpZih2b2lkIDA9PT10aGlzLmNyZWF0ZUludGVycG9sYW50KWlmKGUhPT10aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKXRoaXMuc2V0SW50ZXJwb2xhdGlvbih0aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKTtlbHNlIHRocm93IEVycm9yKHQpO2NvbnNvbGUud2FybihcIlRIUkVFLktleWZyYW1lVHJhY2s6XCIsdCk7cmV0dXJuIHRoaXN9dGhpcy5jcmVhdGVJbnRlcnBvbGFudD10O3JldHVybiB0aGlzfSxnZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpe2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTpyZXR1cm4gMjMwMDtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnJldHVybiAyMzAxO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6cmV0dXJuIDIzMDJ9fSxnZXRWYWx1ZVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoL3RoaXMudGltZXMubGVuZ3RofSxzaGlmdDpmdW5jdGlvbihlKXtpZigwIT09ZSlmb3IodmFyIHQ9dGhpcy50aW1lcyxyPTAsbj10Lmxlbmd0aDtyIT09bjsrK3IpdFtyXSs9ZTtyZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24oZSl7aWYoMSE9PWUpZm9yKHZhciB0PXRoaXMudGltZXMscj0wLG49dC5sZW5ndGg7ciE9PW47KytyKXRbcl0qPWU7cmV0dXJuIHRoaXN9LHRyaW06ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy50aW1lcyxuPXIubGVuZ3RoLGk9MCxvPW4tMTtpIT09biYmcltpXTxlOykrK2k7Zm9yKDstMSE9PW8mJnJbb10+dDspLS1vOysrbztpZigwIT09aXx8byE9PW4paT49byYmKG89TWF0aC5tYXgobywxKSxpPW8tMSksZT10aGlzLmdldFZhbHVlU2l6ZSgpLHRoaXMudGltZXM9RHUuYXJyYXlTbGljZShyLGksbyksdGhpcy52YWx1ZXM9RHUuYXJyYXlTbGljZSh0aGlzLnZhbHVlcyxpKmUsbyplKTtyZXR1cm4gdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXt2YXIgZT0hMCx0PXRoaXMuZ2V0VmFsdWVTaXplKCk7MCE9PXQtTWF0aC5mbG9vcih0KSYmKGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBJbnZhbGlkIHZhbHVlIHNpemUgaW4gdHJhY2suXCIsdGhpcyksZT0hMSk7dmFyIHI9dGhpcy50aW1lczt0PXRoaXMudmFsdWVzO3ZhciBuPXIubGVuZ3RoOzA9PT1uJiYoY29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRyYWNrIGlzIGVtcHR5LlwiLHRoaXMpLGU9ITEpO2Zvcih2YXIgaT1udWxsLG89MDtvIT09bjtvKyspe3ZhciBhPXJbb107aWYoXCJudW1iZXJcIj09PXR5cGVvZiBhJiZpc05hTihhKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFRpbWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyLlwiLHRoaXMsbyxhKTtlPSExO2JyZWFrfWlmKG51bGwhPT1pJiZpPmEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBPdXQgb2Ygb3JkZXIga2V5cy5cIix0aGlzLG8sYSxpKTtlPSExO2JyZWFrfWk9YX1pZih2b2lkIDAhPT10JiZEdS5pc1R5cGVkQXJyYXkodCkpZm9yKG89MCxyPXQubGVuZ3RoO28hPT1yOysrbylpZihuPXRbb10saXNOYU4obikpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBWYWx1ZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuXCIsdGhpcyxvLG4pO2U9ITE7YnJlYWt9cmV0dXJuIGV9LG9wdGltaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPUR1LmFycmF5U2xpY2UodGhpcy50aW1lcyksdD1EdS5hcnJheVNsaWNlKHRoaXMudmFsdWVzKSxyPXRoaXMuZ2V0VmFsdWVTaXplKCksbj0yMzAyPT09dGhpcy5nZXRJbnRlcnBvbGF0aW9uKCksaT0xLG89ZS5sZW5ndGgtMSxhPTE7YTxvOysrYSl7dmFyIHM9ITEsdT1lW2FdO2lmKHUhPT1lW2ErMV0mJigxIT09YXx8dSE9PXVbMF0pKWlmKG4pcz0hMDtlbHNle3ZhciBjPWEqcixsPWMtcixoPWMrcjtmb3IodT0wO3UhPT1yOysrdSl7dmFyIHA9dFtjK3VdO2lmKHAhPT10W2wrdV18fHAhPT10W2grdV0pe3M9ITA7YnJlYWt9fX1pZihzKXtpZihhIT09aSlmb3IoZVtpXT1lW2FdLHM9YSpyLGM9aSpyLHU9MDt1IT09cjsrK3UpdFtjK3VdPXRbcyt1XTsrK2l9fWlmKDA8byl7ZVtpXT1lW29dO3M9bypyO2M9aSpyO2Zvcih1PTA7dSE9PXI7Kyt1KXRbYyt1XT10W3MrdV07KytpfWkhPT1lLmxlbmd0aD8odGhpcy50aW1lcz1EdS5hcnJheVNsaWNlKGUsMCxpKSx0aGlzLnZhbHVlcz1EdS5hcnJheVNsaWNlKHQsMCxpKnIpKToodGhpcy50aW1lcz1lLHRoaXMudmFsdWVzPXQpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPUR1LmFycmF5U2xpY2UodGhpcy50aW1lcywwKSx0PUR1LmFycmF5U2xpY2UodGhpcy52YWx1ZXMsMCk7ZT1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm5hbWUsZSx0KTtlLmNyZWF0ZUludGVycG9sYW50PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQ7cmV0dXJuIGV9fSk7Qm4ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShEbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpCbixWYWx1ZVR5cGVOYW1lOlwiYm9vbFwiLFZhbHVlQnVmZmVyVHlwZTpBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjoyMzAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjp2b2lkIDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pO0ZuLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoRG4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Rm4sVmFsdWVUeXBlTmFtZTpcImNvbG9yXCJ9KTt6bi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKERuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnpuLFZhbHVlVHlwZU5hbWU6XCJudW1iZXJcIn0pOyRuLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoa24ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6JG4saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMucmVzdWx0QnVmZmVyLG89dGhpcy5zYW1wbGVWYWx1ZXMsYT10aGlzLnZhbHVlU2l6ZTtlKj1hO3Q9KHItdCkvKG4tdCk7Zm9yKHI9ZSthO2UhPT1yO2UrPTQpZC5zbGVycEZsYXQoaSwwLG8sZS1hLG8sZSx0KTtyZXR1cm4gaX19KTtHbi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKERuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkduLFZhbHVlVHlwZU5hbWU6XCJxdWF0ZXJuaW9uXCIsRGVmYXVsdEludGVycG9sYXRpb246MjMwMSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyAkbih0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksZSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtWbi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKERuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlZuLFZhbHVlVHlwZU5hbWU6XCJzdHJpbmdcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246MjMwMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dm9pZCAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtIbi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKERuLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkhuLFZhbHVlVHlwZU5hbWU6XCJ2ZWN0b3JcIn0pO09iamVjdC5hc3NpZ24oVW4se3BhcnNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPWUudHJhY2tzLG49MS8oZS5mcHN8fDEpLGk9MCxvPXIubGVuZ3RoO2khPT1vOysraSl0LnB1c2goV24ocltpXSkuc2NhbGUobikpO3JldHVybiBuZXcgVW4oZS5uYW1lLGUuZHVyYXRpb24sdCxlLmJsZW5kTW9kZSl9LHRvSlNPTjpmdW5jdGlvbihlKXt2YXIgdD1bXSxyPWUudHJhY2tzO2U9e25hbWU6ZS5uYW1lLGR1cmF0aW9uOmUuZHVyYXRpb24sdHJhY2tzOnQsdXVpZDplLnV1aWQsYmxlbmRNb2RlOmUuYmxlbmRNb2RlfTtmb3IodmFyIG49MCxpPXIubGVuZ3RoO24hPT1pOysrbil0LnB1c2goRG4udG9KU09OKHJbbl0pKTtyZXR1cm4gZX0sQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2U6ZnVuY3Rpb24oZSx0LHIsbil7Zm9yKHZhciBpPXQubGVuZ3RoLG89W10sYT0wO2E8aTthKyspe3ZhciBzPVtdLHU9W107cy5wdXNoKChhK2ktMSklaSxhLChhKzEpJWkpO3UucHVzaCgwLDEsMCk7dmFyIGM9RHUuZ2V0S2V5ZnJhbWVPcmRlcihzKTtzPUR1LnNvcnRlZEFycmF5KHMsMSxjKTt1PUR1LnNvcnRlZEFycmF5KHUsMSxjKTtufHwwIT09c1swXXx8KHMucHVzaChpKSx1LnB1c2godVswXSkpO28ucHVzaChuZXcgem4oXCIubW9ycGhUYXJnZXRJbmZsdWVuY2VzW1wiK3RbYV0ubmFtZStcIl1cIixzLHUpLnNjYWxlKDEvcikpfXJldHVybiBuZXcgVW4oZSwtMSxvKX0sZmluZEJ5TmFtZTpmdW5jdGlvbihlLHQpe3ZhciByPWU7QXJyYXkuaXNBcnJheShlKXx8KHI9ZS5nZW9tZXRyeSYmZS5nZW9tZXRyeS5hbmltYXRpb25zfHxlLmFuaW1hdGlvbnMpO2ZvcihlPTA7ZTxyLmxlbmd0aDtlKyspaWYocltlXS5uYW1lPT09dClyZXR1cm4gcltlXTtyZXR1cm4gbnVsbH0sQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXM6ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj17fSxpPS9eKFtcXHctXSo/KShbXFxkXSspJC8sbz0wLGE9ZS5sZW5ndGg7bzxhO28rKyl7dmFyIHM9ZVtvXSx1PXMubmFtZS5tYXRjaChpKTtpZih1JiYxPHUubGVuZ3RoKXt2YXIgYz11WzFdOyh1PW5bY10pfHwobltjXT11PVtdKTt1LnB1c2gocyl9fWU9W107Zm9yKGMgaW4gbillLnB1c2goVW4uQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UoYyxuW2NdLHQscikpO3JldHVybiBlfSxwYXJzZUFuaW1hdGlvbjpmdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuQW5pbWF0aW9uQ2xpcDogTm8gYW5pbWF0aW9uIGluIEpTT05Mb2FkZXIgZGF0YS5cIiksbnVsbDt2YXIgcj1mdW5jdGlvbihlLHQscixuLGkpe2lmKDAhPT1yLmxlbmd0aCl7dmFyIG89W10sYT1bXTtEdS5mbGF0dGVuSlNPTihyLG8sYSxuKTswIT09by5sZW5ndGgmJmkucHVzaChuZXcgZSh0LG8sYSkpfX0sbj1bXSxpPWUubmFtZXx8XCJkZWZhdWx0XCIsbz1lLmxlbmd0aHx8LTEsYT1lLmZwc3x8MzAscz1lLmJsZW5kTW9kZTtlPWUuaGllcmFyY2h5fHxbXTtmb3IodmFyIHU9MDt1PGUubGVuZ3RoO3UrKyl7dmFyIGM9ZVt1XS5rZXlzO2lmKGMmJjAhPT1jLmxlbmd0aClpZihjWzBdLm1vcnBoVGFyZ2V0cyl7bz17fTtmb3IodmFyIGw9MDtsPGMubGVuZ3RoO2wrKylpZihjW2xdLm1vcnBoVGFyZ2V0cylmb3IodmFyIGg9MDtoPGNbbF0ubW9ycGhUYXJnZXRzLmxlbmd0aDtoKyspb1tjW2xdLm1vcnBoVGFyZ2V0c1toXV09LTE7Zm9yKHZhciBwIGluIG8pe3ZhciBmPVtdLGQ9W107Zm9yKGg9MDtoIT09Y1tsXS5tb3JwaFRhcmdldHMubGVuZ3RoOysraCl7dmFyIHY9Y1tsXTtmLnB1c2godi50aW1lKTtkLnB1c2godi5tb3JwaFRhcmdldD09PXA/MTowKX1uLnB1c2gobmV3IHpuKFwiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlW1wiK3ArXCJdXCIsZixkKSl9bz1vLmxlbmd0aCooYXx8MSl9ZWxzZSBsPVwiLmJvbmVzW1wiK3RbdV0ubmFtZStcIl1cIixyKEhuLGwrXCIucG9zaXRpb25cIixjLFwicG9zXCIsbikscihHbixsK1wiLnF1YXRlcm5pb25cIixjLFwicm90XCIsbikscihIbixsK1wiLnNjYWxlXCIsYyxcInNjbFwiLG4pfXJldHVybiAwPT09bi5sZW5ndGg/bnVsbDpuZXcgVW4oaSxvLG4scyl9fSk7T2JqZWN0LmFzc2lnbihVbi5wcm90b3R5cGUse3Jlc2V0RHVyYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PTAscj10aGlzLnRyYWNrcy5sZW5ndGg7dCE9PXI7Kyt0KXt2YXIgbj10aGlzLnRyYWNrc1t0XTtlPU1hdGgubWF4KGUsbi50aW1lc1tuLnRpbWVzLmxlbmd0aC0xXSl9dGhpcy5kdXJhdGlvbj1lO3JldHVybiB0aGlzfSx0cmltOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnRyYWNrcy5sZW5ndGg7ZSsrKXRoaXMudHJhY2tzW2VdLnRyaW0oMCx0aGlzLmR1cmF0aW9uKTtyZXR1cm4gdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9ITAsdD0wO3Q8dGhpcy50cmFja3MubGVuZ3RoO3QrKyllPWUmJnRoaXMudHJhY2tzW3RdLnZhbGlkYXRlKCk7cmV0dXJuIGV9LG9wdGltaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnRyYWNrcy5sZW5ndGg7ZSsrKXRoaXMudHJhY2tzW2VdLm9wdGltaXplKCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PHRoaXMudHJhY2tzLmxlbmd0aDt0KyspZS5wdXNoKHRoaXMudHJhY2tzW3RdLmNsb25lKCkpO3JldHVybiBuZXcgVW4odGhpcy5uYW1lLHRoaXMuZHVyYXRpb24sZSx0aGlzLmJsZW5kTW9kZSl9fSk7dmFyIEJ1PXtlbmFibGVkOiExLGZpbGVzOnt9LGFkZDpmdW5jdGlvbihlLHQpeyExIT09dGhpcy5lbmFibGVkJiYodGhpcy5maWxlc1tlXT10KX0sZ2V0OmZ1bmN0aW9uKGUpe2lmKCExIT09dGhpcy5lbmFibGVkKXJldHVybiB0aGlzLmZpbGVzW2VdfSxyZW1vdmU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuZmlsZXNbZV19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fX19LEZ1PW5ldyBYbjtPYmplY3QuYXNzaWduKFluLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbigpe30sbG9hZEFzeW5jOmZ1bmN0aW9uKHIsbil7dmFyIGk9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSx0KXtpLmxvYWQocixlLG4sdCl9KX0scGFyc2U6ZnVuY3Rpb24oKXt9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGUpe3RoaXMuY3Jvc3NPcmlnaW49ZTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihlKXt0aGlzLnBhdGg9ZTtyZXR1cm4gdGhpc30sc2V0UmVzb3VyY2VQYXRoOmZ1bmN0aW9uKGUpe3RoaXMucmVzb3VyY2VQYXRoPWU7cmV0dXJuIHRoaXN9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSl7dGhpcy5yZXF1ZXN0SGVhZGVyPWU7cmV0dXJuIHRoaXN9fSk7dmFyIHp1PXt9O0tuLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6S24sbG9hZDpmdW5jdGlvbihhLGUsdCxyKXt2b2lkIDA9PT1hJiYoYT1cIlwiKTt2b2lkIDAhPT10aGlzLnBhdGgmJihhPXRoaXMucGF0aCthKTthPXRoaXMubWFuYWdlci5yZXNvbHZlVVJMKGEpO3ZhciBzPXRoaXMsbj1CdS5nZXQoYSk7aWYodm9pZCAwIT09bilyZXR1cm4gcy5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSYmZShuKTtzLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksbjtpZih2b2lkIDAhPT16dVthXSl6dVthXS5wdXNoKHtvbkxvYWQ6ZSxvblByb2dyZXNzOnQsb25FcnJvcjpyfSk7ZWxzZXt2YXIgaT1hLm1hdGNoKC9eZGF0YTooLio/KSg7YmFzZTY0KT8sKC4qKSQvKTtpZihpKXt0PWlbMV07dmFyIG89ISFpWzJdO2k9aVszXTtpPWRlY29kZVVSSUNvbXBvbmVudChpKTtvJiYoaT1hdG9iKGkpKTt0cnl7dmFyIHU9KHRoaXMucmVzcG9uc2VUeXBlfHxcIlwiKS50b0xvd2VyQ2FzZSgpO3N3aXRjaCh1KXtjYXNlXCJhcnJheWJ1ZmZlclwiOmNhc2VcImJsb2JcIjp2YXIgYz1uZXcgVWludDhBcnJheShpLmxlbmd0aCk7Zm9yKG89MDtvPGkubGVuZ3RoO28rKyljW29dPWkuY2hhckNvZGVBdChvKTt2YXIgbD1cImJsb2JcIj09PXU/bmV3IEJsb2IoW2MuYnVmZmVyXSx7dHlwZTp0fSk6Yy5idWZmZXI7YnJlYWs7Y2FzZVwiZG9jdW1lbnRcIjpsPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoaSx0KTticmVhaztjYXNlXCJqc29uXCI6bD1KU09OLnBhcnNlKGkpO2JyZWFrO2RlZmF1bHQ6bD1pfXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlJiZlKGwpO3MubWFuYWdlci5pdGVtRW5kKGEpfSwwKX1jYXRjaChlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ciYmcihlKTtzLm1hbmFnZXIuaXRlbUVycm9yKGEpO3MubWFuYWdlci5pdGVtRW5kKGEpfSwwKX19ZWxzZXt6dVthXT1bXTt6dVthXS5wdXNoKHtvbkxvYWQ6ZSxvblByb2dyZXNzOnQsb25FcnJvcjpyfSk7dmFyIGg9bmV3IFhNTEh0dHBSZXF1ZXN0O2gub3BlbihcIkdFVFwiLGEsITApO2guYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJlc3BvbnNlLHI9enVbYV07ZGVsZXRlIHp1W2FdO2lmKDIwMD09PXRoaXMuc3RhdHVzfHwwPT09dGhpcy5zdGF0dXMpezA9PT10aGlzLnN0YXR1cyYmY29uc29sZS53YXJuKFwiVEhSRUUuRmlsZUxvYWRlcjogSFRUUCBTdGF0dXMgMCByZWNlaXZlZC5cIik7QnUuYWRkKGEsdCk7Zm9yKHZhciBuPTAsaT1yLmxlbmd0aDtuPGk7bisrKXt2YXIgbz1yW25dO2lmKG8ub25Mb2FkKW8ub25Mb2FkKHQpfX1lbHNle249MDtmb3IoaT1yLmxlbmd0aDtuPGk7bisrKWlmKG89cltuXSxvLm9uRXJyb3Ipby5vbkVycm9yKGUpO3MubWFuYWdlci5pdGVtRXJyb3IoYSl9cy5tYW5hZ2VyLml0ZW1FbmQoYSl9LCExKTtoLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD16dVthXSxyPTAsbj10Lmxlbmd0aDtyPG47cisrKXt2YXIgaT10W3JdO2lmKGkub25Qcm9ncmVzcylpLm9uUHJvZ3Jlc3MoZSl9fSwhMSk7aC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihlKXt2YXIgdD16dVthXTtkZWxldGUgenVbYV07Zm9yKHZhciByPTAsbj10Lmxlbmd0aDtyPG47cisrKXt2YXIgaT10W3JdO2lmKGkub25FcnJvcilpLm9uRXJyb3IoZSl9cy5tYW5hZ2VyLml0ZW1FcnJvcihhKTtzLm1hbmFnZXIuaXRlbUVuZChhKX0sITEpO2guYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsZnVuY3Rpb24oZSl7dmFyIHQ9enVbYV07ZGVsZXRlIHp1W2FdO2Zvcih2YXIgcj0wLG49dC5sZW5ndGg7cjxuO3IrKyl7dmFyIGk9dFtyXTtpZihpLm9uRXJyb3IpaS5vbkVycm9yKGUpfXMubWFuYWdlci5pdGVtRXJyb3IoYSk7cy5tYW5hZ2VyLml0ZW1FbmQoYSl9LCExKTt2b2lkIDAhPT10aGlzLnJlc3BvbnNlVHlwZSYmKGgucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlKTt2b2lkIDAhPT10aGlzLndpdGhDcmVkZW50aWFscyYmKGgud2l0aENyZWRlbnRpYWxzPXRoaXMud2l0aENyZWRlbnRpYWxzKTtoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZSh2b2lkIDAhPT10aGlzLm1pbWVUeXBlP3RoaXMubWltZVR5cGU6XCJ0ZXh0L3BsYWluXCIpO2ZvcihvIGluIHRoaXMucmVxdWVzdEhlYWRlciloLnNldFJlcXVlc3RIZWFkZXIobyx0aGlzLnJlcXVlc3RIZWFkZXJbb10pO2guc2VuZChudWxsKX1zLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO3JldHVybiBofX0sc2V0UmVzcG9uc2VUeXBlOmZ1bmN0aW9uKGUpe3RoaXMucmVzcG9uc2VUeXBlPWU7cmV0dXJuIHRoaXN9LHNldFdpdGhDcmVkZW50aWFsczpmdW5jdGlvbihlKXt0aGlzLndpdGhDcmVkZW50aWFscz1lO3JldHVybiB0aGlzfSxzZXRNaW1lVHlwZTpmdW5jdGlvbihlKXt0aGlzLm1pbWVUeXBlPWU7cmV0dXJuIHRoaXN9fSk7Wm4ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShZbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjpabixsb2FkOmZ1bmN0aW9uKHQscixlLG4pe3ZhciBpPXRoaXMsbz1uZXcgS24oaS5tYW5hZ2VyKTtvLnNldFBhdGgoaS5wYXRoKTtvLmxvYWQodCxmdW5jdGlvbihlKXt0cnl7cihpLnBhcnNlKEpTT04ucGFyc2UoZSkpKX1jYXRjaChlKXtuP24oZSk6Y29uc29sZS5lcnJvcihlKSxpLm1hbmFnZXIuaXRlbUVycm9yKHQpfX0sZSxuKX0scGFyc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49VW4ucGFyc2UoZVtyXSk7dC5wdXNoKG4pfXJldHVybiB0fX0pO0puLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Sm4sbG9hZDpmdW5jdGlvbihlLGkscixuKXtmdW5jdGlvbiB0KHQpe3UubG9hZChlW3RdLGZ1bmN0aW9uKGUpe2U9by5wYXJzZShlLCEwKTthW3RdPXt3aWR0aDplLndpZHRoLGhlaWdodDplLmhlaWdodCxmb3JtYXQ6ZS5mb3JtYXQsbWlwbWFwczplLm1pcG1hcHN9O2MrPTE7Nj09PWMmJigxPT09ZS5taXBtYXBDb3VudCYmKHMubWluRmlsdGVyPTEwMDYpLHMuZm9ybWF0PWUuZm9ybWF0LHMubmVlZHNVcGRhdGU9ITAsaSYmaShzKSl9LHIsbil9dmFyIG89dGhpcyxhPVtdLHM9bmV3IHByO3MuaW1hZ2U9YTt2YXIgdT1uZXcgS24odGhpcy5tYW5hZ2VyKTt1LnNldFBhdGgodGhpcy5wYXRoKTt1LnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciBjPTAsbD0wLGg9ZS5sZW5ndGg7bDxoOysrbCl0KGwpO2Vsc2UgdS5sb2FkKGUsZnVuY3Rpb24oZSl7ZT1vLnBhcnNlKGUsITApO2lmKGUuaXNDdWJlbWFwKWZvcih2YXIgdD1lLm1pcG1hcHMubGVuZ3RoL2UubWlwbWFwQ291bnQscj0wO3I8dDtyKyspe2Fbcl09e21pcG1hcHM6W119O2Zvcih2YXIgbj0wO248ZS5taXBtYXBDb3VudDtuKyspYVtyXS5taXBtYXBzLnB1c2goZS5taXBtYXBzW3IqZS5taXBtYXBDb3VudCtuXSksYVtyXS5mb3JtYXQ9ZS5mb3JtYXQsYVtyXS53aWR0aD1lLndpZHRoLGFbcl0uaGVpZ2h0PWUuaGVpZ2h0fWVsc2Ugcy5pbWFnZS53aWR0aD1lLndpZHRoLHMuaW1hZ2UuaGVpZ2h0PWUuaGVpZ2h0LHMubWlwbWFwcz1lLm1pcG1hcHM7MT09PWUubWlwbWFwQ291bnQmJihzLm1pbkZpbHRlcj0xMDA2KTtzLmZvcm1hdD1lLmZvcm1hdDtzLm5lZWRzVXBkYXRlPSEwO2kmJmkocyl9LHIsbik7cmV0dXJuIHN9fSk7UW4ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShZbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpRbixsb2FkOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsbz1uZXcgUGUsYT1uZXcgS24odGhpcy5tYW5hZ2VyKTthLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2Euc2V0UGF0aCh0aGlzLnBhdGgpO2EubG9hZChlLGZ1bmN0aW9uKGUpe2lmKGU9aS5wYXJzZShlKSl2b2lkIDAhPT1lLmltYWdlP28uaW1hZ2U9ZS5pbWFnZTp2b2lkIDAhPT1lLmRhdGEmJihvLmltYWdlLndpZHRoPWUud2lkdGgsby5pbWFnZS5oZWlnaHQ9ZS5oZWlnaHQsby5pbWFnZS5kYXRhPWUuZGF0YSksby53cmFwUz12b2lkIDAhPT1lLndyYXBTP2Uud3JhcFM6MTAwMSxvLndyYXBUPXZvaWQgMCE9PWUud3JhcFQ/ZS53cmFwVDoxMDAxLG8ubWFnRmlsdGVyPXZvaWQgMCE9PWUubWFnRmlsdGVyP2UubWFnRmlsdGVyOjEwMDYsby5taW5GaWx0ZXI9dm9pZCAwIT09ZS5taW5GaWx0ZXI/ZS5taW5GaWx0ZXI6MTAwNixvLmFuaXNvdHJvcHk9dm9pZCAwIT09ZS5hbmlzb3Ryb3B5P2UuYW5pc290cm9weToxLHZvaWQgMCE9PWUuZm9ybWF0JiYoby5mb3JtYXQ9ZS5mb3JtYXQpLHZvaWQgMCE9PWUudHlwZSYmKG8udHlwZT1lLnR5cGUpLHZvaWQgMCE9PWUubWlwbWFwcyYmKG8ubWlwbWFwcz1lLm1pcG1hcHMsby5taW5GaWx0ZXI9MTAwOCksMT09PWUubWlwbWFwQ291bnQmJihvLm1pbkZpbHRlcj0xMDA2KSxvLm5lZWRzVXBkYXRlPSEwLHQmJnQobyxlKX0scixuKTtyZXR1cm4gb319KTtlaS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFluLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmVpLGxvYWQ6ZnVuY3Rpb24odCxlLHIsbil7ZnVuY3Rpb24gaSgpe3UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpLCExKTt1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLG8sITEpO0J1LmFkZCh0LHRoaXMpO2UmJmUodGhpcyk7YS5tYW5hZ2VyLml0ZW1FbmQodCl9ZnVuY3Rpb24gbyhlKXt1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsaSwhMSk7dS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixvLCExKTtuJiZuKGUpO2EubWFuYWdlci5pdGVtRXJyb3IodCk7YS5tYW5hZ2VyLml0ZW1FbmQodCl9dm9pZCAwIT09dGhpcy5wYXRoJiYodD10aGlzLnBhdGgrdCk7dD10aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh0KTt2YXIgYT10aGlzLHM9QnUuZ2V0KHQpO2lmKHZvaWQgMCE9PXMpcmV0dXJuIGEubWFuYWdlci5pdGVtU3RhcnQodCksc2V0VGltZW91dChmdW5jdGlvbigpe2UmJmUocyk7YS5tYW5hZ2VyLml0ZW1FbmQodCl9LDApLHM7dmFyIHU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiaW1nXCIpO3UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpLCExKTt1LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLG8sITEpO1wiZGF0YTpcIiE9PXQuc3Vic3RyKDAsNSkmJnZvaWQgMCE9PXRoaXMuY3Jvc3NPcmlnaW4mJih1LmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pO2EubWFuYWdlci5pdGVtU3RhcnQodCk7dS5zcmM9dDtyZXR1cm4gdX19KTt0aS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFluLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnRpLGxvYWQ6ZnVuY3Rpb24oZSxyLHQsbil7ZnVuY3Rpb24gaSh0KXthLmxvYWQoZVt0XSxmdW5jdGlvbihlKXtvLmltYWdlc1t0XT1lO3MrKzs2PT09cyYmKG8ubmVlZHNVcGRhdGU9ITAsciYmcihvKSl9LHZvaWQgMCxuKX12YXIgbz1uZXcgSyxhPW5ldyBlaSh0aGlzLm1hbmFnZXIpO2Euc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7YS5zZXRQYXRoKHRoaXMucGF0aCk7dmFyIHM9MDtmb3IodD0wO3Q8ZS5sZW5ndGg7Kyt0KWkodCk7cmV0dXJuIG99fSk7cmkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShZbi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpyaSxsb2FkOmZ1bmN0aW9uKHQscixlLG4pe3ZhciBpPW5ldyBwLG89bmV3IGVpKHRoaXMubWFuYWdlcik7by5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtvLnNldFBhdGgodGhpcy5wYXRoKTtvLmxvYWQodCxmdW5jdGlvbihlKXtpLmltYWdlPWU7ZT0wPHQuc2VhcmNoKC9cXC5qcGU/ZygkfFxcPykvaSl8fDA9PT10LnNlYXJjaCgvXmRhdGE6aW1hZ2VcXC9qcGVnLyk7aS5mb3JtYXQ9ZT8xMDIyOjEwMjM7aS5uZWVkc1VwZGF0ZT0hMDt2b2lkIDAhPT1yJiZyKGkpfSxlLG4pO3JldHVybiBpfX0pO09iamVjdC5hc3NpZ24obmkucHJvdG90eXBlLHtnZXRQb2ludDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuZ2V0UG9pbnQoKSBub3QgaW1wbGVtZW50ZWQuXCIpO3JldHVybiBudWxsfSxnZXRQb2ludEF0OmZ1bmN0aW9uKGUsdCl7ZT10aGlzLmdldFV0b1RtYXBwaW5nKGUpO3JldHVybiB0aGlzLmdldFBvaW50KGUsdCl9LGdldFBvaW50czpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT01KTtmb3IodmFyIHQ9W10scj0wO3I8PWU7cisrKXQucHVzaCh0aGlzLmdldFBvaW50KHIvZSkpO3JldHVybiB0fSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9NSk7Zm9yKHZhciB0PVtdLHI9MDtyPD1lO3IrKyl0LnB1c2godGhpcy5nZXRQb2ludEF0KHIvZSkpO3JldHVybiB0fSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldExlbmd0aHMoKTtyZXR1cm4gZVtlLmxlbmd0aC0xXX0sZ2V0TGVuZ3RoczpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT10aGlzLmFyY0xlbmd0aERpdmlzaW9ucyk7aWYodGhpcy5jYWNoZUFyY0xlbmd0aHMmJnRoaXMuY2FjaGVBcmNMZW5ndGhzLmxlbmd0aD09PWUrMSYmIXRoaXMubmVlZHNVcGRhdGUpcmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzO3RoaXMubmVlZHNVcGRhdGU9ITE7dmFyIHQ9W10scj10aGlzLmdldFBvaW50KDApLG4saT0wO3QucHVzaCgwKTtmb3Iobj0xO248PWU7bisrKXt2YXIgbz10aGlzLmdldFBvaW50KG4vZSk7aSs9by5kaXN0YW5jZVRvKHIpO3QucHVzaChpKTtyPW99cmV0dXJuIHRoaXMuY2FjaGVBcmNMZW5ndGhzPXR9LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwO3RoaXMuZ2V0TGVuZ3RocygpfSxnZXRVdG9UbWFwcGluZzpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2V0TGVuZ3RocygpLG49ci5sZW5ndGg7dD10P3Q6ZSpyW24tMV07Zm9yKHZhciBpPTAsbz1uLTEsYTtpPD1vOylpZihlPU1hdGguZmxvb3IoaSsoby1pKS8yKSxhPXJbZV0tdCwwPmEpaT1lKzE7ZWxzZSBpZigwPGEpbz1lLTE7ZWxzZXtvPWU7YnJlYWt9ZT1vO2lmKHJbZV09PT10KXJldHVybiBlLyhuLTEpO2k9cltlXTtyZXR1cm4oZSsodC1pKS8ocltlKzFdLWkpKS8obi0xKX0sZ2V0VGFuZ2VudDpmdW5jdGlvbihlLHQpe3ZhciByPWUtMWUtNDtlKz0xZS00OzA+ciYmKHI9MCk7MTxlJiYoZT0xKTtyPXRoaXMuZ2V0UG9pbnQocik7ZT10aGlzLmdldFBvaW50KGUpO3Q9dHx8KHIuaXNWZWN0b3IyP25ldyBNZTpuZXcgVGUpO3QuY29weShlKS5zdWIocikubm9ybWFsaXplKCk7cmV0dXJuIHR9LGdldFRhbmdlbnRBdDpmdW5jdGlvbihlLHQpe2U9dGhpcy5nZXRVdG9UbWFwcGluZyhlKTtyZXR1cm4gdGhpcy5nZXRUYW5nZW50KGUsdCl9LGNvbXB1dGVGcmVuZXRGcmFtZXM6ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgVGUsbj1bXSxpPVtdLG89W10sYT1uZXcgVGUscz1uZXcgRWUsdTtmb3IodT0wO3U8PWU7dSsrKXt2YXIgYz11L2U7blt1XT10aGlzLmdldFRhbmdlbnRBdChjLG5ldyBUZSk7blt1XS5ub3JtYWxpemUoKX1pWzBdPW5ldyBUZTtvWzBdPW5ldyBUZTt1PU51bWJlci5NQVhfVkFMVUU7Yz1NYXRoLmFicyhuWzBdLngpO3ZhciBsPU1hdGguYWJzKG5bMF0ueSksaD1NYXRoLmFicyhuWzBdLnopO2M8PXUmJih1PWMsci5zZXQoMSwwLDApKTtsPD11JiYodT1sLHIuc2V0KDAsMSwwKSk7aDw9dSYmci5zZXQoMCwwLDEpO2EuY3Jvc3NWZWN0b3JzKG5bMF0scikubm9ybWFsaXplKCk7aVswXS5jcm9zc1ZlY3RvcnMoblswXSxhKTtvWzBdLmNyb3NzVmVjdG9ycyhuWzBdLGlbMF0pO2Zvcih1PTE7dTw9ZTt1KyspaVt1XT1pW3UtMV0uY2xvbmUoKSxvW3VdPW9bdS0xXS5jbG9uZSgpLGEuY3Jvc3NWZWN0b3JzKG5bdS0xXSxuW3VdKSxhLmxlbmd0aCgpPk51bWJlci5FUFNJTE9OJiYoYS5ub3JtYWxpemUoKSxyPU1hdGguYWNvcyhWby5jbGFtcChuW3UtMV0uZG90KG5bdV0pLC0xLDEpKSxpW3VdLmFwcGx5TWF0cml4NChzLm1ha2VSb3RhdGlvbkF4aXMoYSxyKSkpLG9bdV0uY3Jvc3NWZWN0b3JzKG5bdV0saVt1XSk7aWYoITA9PT10KWZvcihyPU1hdGguYWNvcyhWby5jbGFtcChpWzBdLmRvdChpW2VdKSwtMSwxKSksci89ZSwwPG5bMF0uZG90KGEuY3Jvc3NWZWN0b3JzKGlbMF0saVtlXSkpJiYocj0tciksdT0xO3U8PWU7dSsrKWlbdV0uYXBwbHlNYXRyaXg0KHMubWFrZVJvdGF0aW9uQXhpcyhuW3VdLHIqdSkpLG9bdV0uY3Jvc3NWZWN0b3JzKG5bdV0saVt1XSk7cmV0dXJue3RhbmdlbnRzOm4sbm9ybWFsczppLGJpbm9ybWFsczpvfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oZSl7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9ZS5hcmNMZW5ndGhEaXZpc2lvbnM7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkN1cnZlXCIsZ2VuZXJhdG9yOlwiQ3VydmUudG9KU09OXCJ9fTtlLmFyY0xlbmd0aERpdmlzaW9ucz10aGlzLmFyY0xlbmd0aERpdmlzaW9ucztlLnR5cGU9dGhpcy50eXBlO3JldHVybiBlfSxmcm9tSlNPTjpmdW5jdGlvbihlKXt0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz1lLmFyY0xlbmd0aERpdmlzaW9ucztyZXR1cm4gdGhpc319KTtpaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO2lpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1paTtpaS5wcm90b3R5cGUuaXNFbGxpcHNlQ3VydmU9ITA7aWkucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGUsdCl7dD10fHxuZXcgTWU7Zm9yKHZhciByPTIqTWF0aC5QSSxuPXRoaXMuYUVuZEFuZ2xlLXRoaXMuYVN0YXJ0QW5nbGUsaT1NYXRoLmFicyhuKTxOdW1iZXIuRVBTSUxPTjswPm47KW4rPXI7Zm9yKDtuPnI7KW4tPXI7bjxOdW1iZXIuRVBTSUxPTiYmKG49aT8wOnIpOyEwIT09dGhpcy5hQ2xvY2t3aXNlfHxpfHwobj1uPT09cj8tcjpuLXIpO3I9dGhpcy5hU3RhcnRBbmdsZStlKm47ZT10aGlzLmFYK3RoaXMueFJhZGl1cypNYXRoLmNvcyhyKTt2YXIgbz10aGlzLmFZK3RoaXMueVJhZGl1cypNYXRoLnNpbihyKTswIT09dGhpcy5hUm90YXRpb24mJihyPU1hdGguY29zKHRoaXMuYVJvdGF0aW9uKSxuPU1hdGguc2luKHRoaXMuYVJvdGF0aW9uKSxpPWUtdGhpcy5hWCxvLT10aGlzLmFZLGU9aSpyLW8qbit0aGlzLmFYLG89aSpuK28qcit0aGlzLmFZKTtyZXR1cm4gdC5zZXQoZSxvKX07aWkucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7bmkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuYVg9ZS5hWDt0aGlzLmFZPWUuYVk7dGhpcy54UmFkaXVzPWUueFJhZGl1czt0aGlzLnlSYWRpdXM9ZS55UmFkaXVzO3RoaXMuYVN0YXJ0QW5nbGU9ZS5hU3RhcnRBbmdsZTt0aGlzLmFFbmRBbmdsZT1lLmFFbmRBbmdsZTt0aGlzLmFDbG9ja3dpc2U9ZS5hQ2xvY2t3aXNlO3RoaXMuYVJvdGF0aW9uPWUuYVJvdGF0aW9uO3JldHVybiB0aGlzfTtpaS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9bmkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2UuYVg9dGhpcy5hWDtlLmFZPXRoaXMuYVk7ZS54UmFkaXVzPXRoaXMueFJhZGl1cztlLnlSYWRpdXM9dGhpcy55UmFkaXVzO2UuYVN0YXJ0QW5nbGU9dGhpcy5hU3RhcnRBbmdsZTtlLmFFbmRBbmdsZT10aGlzLmFFbmRBbmdsZTtlLmFDbG9ja3dpc2U9dGhpcy5hQ2xvY2t3aXNlO2UuYVJvdGF0aW9uPXRoaXMuYVJvdGF0aW9uO3JldHVybiBlfTtpaS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oZSl7bmkucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxlKTt0aGlzLmFYPWUuYVg7dGhpcy5hWT1lLmFZO3RoaXMueFJhZGl1cz1lLnhSYWRpdXM7dGhpcy55UmFkaXVzPWUueVJhZGl1czt0aGlzLmFTdGFydEFuZ2xlPWUuYVN0YXJ0QW5nbGU7dGhpcy5hRW5kQW5nbGU9ZS5hRW5kQW5nbGU7dGhpcy5hQ2xvY2t3aXNlPWUuYUNsb2Nrd2lzZTt0aGlzLmFSb3RhdGlvbj1lLmFSb3RhdGlvbjtyZXR1cm4gdGhpc307b2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoaWkucHJvdG90eXBlKTtvaS5wcm90b3R5cGUuY29uc3RydWN0b3I9b2k7b2kucHJvdG90eXBlLmlzQXJjQ3VydmU9ITA7dmFyICR1PW5ldyBUZSxHdT1uZXcgYWksVnU9bmV3IGFpLEh1PW5ldyBhaTtzaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO3NpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1zaTtzaS5wcm90b3R5cGUuaXNDYXRtdWxsUm9tQ3VydmUzPSEwO3NpLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihlLHQpe3Q9dHx8bmV3IFRlO3ZhciByPXRoaXMucG9pbnRzLG49ci5sZW5ndGg7ZSo9bi0odGhpcy5jbG9zZWQ/MDoxKTt2YXIgaT1NYXRoLmZsb29yKGUpO2UtPWk7dGhpcy5jbG9zZWQ/aSs9MDxpPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMoaSkvbikrMSkqbjowPT09ZSYmaT09PW4tMSYmKGk9bi0yLGU9MSk7aWYodGhpcy5jbG9zZWR8fDA8aSl2YXIgbz1yWyhpLTEpJW5dO2Vsc2UgJHUuc3ViVmVjdG9ycyhyWzBdLHJbMV0pLmFkZChyWzBdKSxvPSR1O3ZhciBhPXJbaSVuXTt2YXIgcz1yWyhpKzEpJW5dO3RoaXMuY2xvc2VkfHxpKzI8bj9yPXJbKGkrMiklbl06KCR1LnN1YlZlY3RvcnMocltuLTFdLHJbbi0yXSkuYWRkKHJbbi0xXSkscj0kdSk7aWYoXCJjZW50cmlwZXRhbFwiPT09dGhpcy5jdXJ2ZVR5cGV8fFwiY2hvcmRhbFwiPT09dGhpcy5jdXJ2ZVR5cGUpe3ZhciB1PVwiY2hvcmRhbFwiPT09dGhpcy5jdXJ2ZVR5cGU/LjU6LjI1O249TWF0aC5wb3coby5kaXN0YW5jZVRvU3F1YXJlZChhKSx1KTtpPU1hdGgucG93KGEuZGlzdGFuY2VUb1NxdWFyZWQocyksdSk7dT1NYXRoLnBvdyhzLmRpc3RhbmNlVG9TcXVhcmVkKHIpLHUpOzFlLTQ+aSYmKGk9MSk7MWUtND5uJiYobj1pKTsxZS00PnUmJih1PWkpO0d1LmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShvLngsYS54LHMueCxyLngsbixpLHUpO1Z1LmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShvLnksYS55LHMueSxyLnksbixpLHUpO0h1LmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShvLnosYS56LHMueixyLnosbixpLHUpfWVsc2VcImNhdG11bGxyb21cIj09PXRoaXMuY3VydmVUeXBlJiYoR3UuaW5pdENhdG11bGxSb20oby54LGEueCxzLngsci54LHRoaXMudGVuc2lvbiksVnUuaW5pdENhdG11bGxSb20oby55LGEueSxzLnksci55LHRoaXMudGVuc2lvbiksSHUuaW5pdENhdG11bGxSb20oby56LGEueixzLnosci56LHRoaXMudGVuc2lvbikpO3Quc2V0KEd1LmNhbGMoZSksVnUuY2FsYyhlKSxIdS5jYWxjKGUpKTtyZXR1cm4gdH07c2kucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7bmkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgdD0wLHI9ZS5wb2ludHMubGVuZ3RoO3Q8cjt0KyspdGhpcy5wb2ludHMucHVzaChlLnBvaW50c1t0XS5jbG9uZSgpKTt0aGlzLmNsb3NlZD1lLmNsb3NlZDt0aGlzLmN1cnZlVHlwZT1lLmN1cnZlVHlwZTt0aGlzLnRlbnNpb249ZS50ZW5zaW9uO3JldHVybiB0aGlzfTtzaS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9bmkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2UucG9pbnRzPVtdO2Zvcih2YXIgdD0wLHI9dGhpcy5wb2ludHMubGVuZ3RoO3Q8cjt0KyspZS5wb2ludHMucHVzaCh0aGlzLnBvaW50c1t0XS50b0FycmF5KCkpO2UuY2xvc2VkPXRoaXMuY2xvc2VkO2UuY3VydmVUeXBlPXRoaXMuY3VydmVUeXBlO2UudGVuc2lvbj10aGlzLnRlbnNpb247cmV0dXJuIGV9O3NpLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgdD0wLHI9ZS5wb2ludHMubGVuZ3RoO3Q8cjt0Kyspe3ZhciBuPWUucG9pbnRzW3RdO3RoaXMucG9pbnRzLnB1c2goKG5ldyBUZSkuZnJvbUFycmF5KG4pKX10aGlzLmNsb3NlZD1lLmNsb3NlZDt0aGlzLmN1cnZlVHlwZT1lLmN1cnZlVHlwZTt0aGlzLnRlbnNpb249ZS50ZW5zaW9uO3JldHVybiB0aGlzfTtoaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO2hpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oaTtoaS5wcm90b3R5cGUuaXNDdWJpY0JlemllckN1cnZlPSEwO2hpLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihlLHQpe3Q9dHx8bmV3IE1lO3ZhciByPXRoaXMudjAsbj10aGlzLnYxLGk9dGhpcy52MixvPXRoaXMudjM7dC5zZXQobGkoZSxyLngsbi54LGkueCxvLngpLGxpKGUsci55LG4ueSxpLnksby55KSk7cmV0dXJuIHR9O2hpLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe25pLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLnYwLmNvcHkoZS52MCk7dGhpcy52MS5jb3B5KGUudjEpO3RoaXMudjIuY29weShlLnYyKTt0aGlzLnYzLmNvcHkoZS52Myk7cmV0dXJuIHRoaXN9O2hpLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT1uaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7ZS52MD10aGlzLnYwLnRvQXJyYXkoKTtlLnYxPXRoaXMudjEudG9BcnJheSgpO2UudjI9dGhpcy52Mi50b0FycmF5KCk7ZS52Mz10aGlzLnYzLnRvQXJyYXkoKTtyZXR1cm4gZX07aGkucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGUpe25pLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsZSk7dGhpcy52MC5mcm9tQXJyYXkoZS52MCk7dGhpcy52MS5mcm9tQXJyYXkoZS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoZS52Mik7dGhpcy52My5mcm9tQXJyYXkoZS52Myk7cmV0dXJuIHRoaXN9O3BpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG5pLnByb3RvdHlwZSk7cGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPXBpO3BpLnByb3RvdHlwZS5pc0N1YmljQmV6aWVyQ3VydmUzPSEwO3BpLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihlLHQpe3Q9dHx8bmV3IFRlO3ZhciByPXRoaXMudjAsbj10aGlzLnYxLGk9dGhpcy52MixvPXRoaXMudjM7dC5zZXQobGkoZSxyLngsbi54LGkueCxvLngpLGxpKGUsci55LG4ueSxpLnksby55KSxsaShlLHIueixuLnosaS56LG8ueikpO3JldHVybiB0fTtwaS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy52MC5jb3B5KGUudjApO3RoaXMudjEuY29weShlLnYxKTt0aGlzLnYyLmNvcHkoZS52Mik7dGhpcy52My5jb3B5KGUudjMpO3JldHVybiB0aGlzfTtwaS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9bmkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2UudjA9dGhpcy52MC50b0FycmF5KCk7ZS52MT10aGlzLnYxLnRvQXJyYXkoKTtlLnYyPXRoaXMudjIudG9BcnJheSgpO2UudjM9dGhpcy52My50b0FycmF5KCk7cmV0dXJuIGV9O3BpLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMudjAuZnJvbUFycmF5KGUudjApO3RoaXMudjEuZnJvbUFycmF5KGUudjEpO3RoaXMudjIuZnJvbUFycmF5KGUudjIpO3RoaXMudjMuZnJvbUFycmF5KGUudjMpO3JldHVybiB0aGlzfTtmaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO2ZpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1maTtmaS5wcm90b3R5cGUuaXNMaW5lQ3VydmU9ITA7ZmkucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGUsdCl7dD10fHxuZXcgTWU7MT09PWU/dC5jb3B5KHRoaXMudjIpOih0LmNvcHkodGhpcy52Mikuc3ViKHRoaXMudjEpLHQubXVsdGlwbHlTY2FsYXIoZSkuYWRkKHRoaXMudjEpKTtyZXR1cm4gdH07ZmkucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nZXRQb2ludChlLHQpfTtmaS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihlLHQpe2U9dHx8bmV3IE1lO3JldHVybiBlPWUuY29weSh0aGlzLnYyKS5zdWIodGhpcy52MSkubm9ybWFsaXplKCl9O2ZpLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe25pLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLnYxLmNvcHkoZS52MSk7dGhpcy52Mi5jb3B5KGUudjIpO3JldHVybiB0aGlzfTtmaS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9bmkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2UudjE9dGhpcy52MS50b0FycmF5KCk7ZS52Mj10aGlzLnYyLnRvQXJyYXkoKTtyZXR1cm4gZX07ZmkucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGUpe25pLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsZSk7dGhpcy52MS5mcm9tQXJyYXkoZS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoZS52Mik7cmV0dXJuIHRoaXN9O2RpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG5pLnByb3RvdHlwZSk7ZGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWRpO2RpLnByb3RvdHlwZS5pc0xpbmVDdXJ2ZTM9ITA7ZGkucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGUsdCl7dD10fHxuZXcgVGU7MT09PWU/dC5jb3B5KHRoaXMudjIpOih0LmNvcHkodGhpcy52Mikuc3ViKHRoaXMudjEpLHQubXVsdGlwbHlTY2FsYXIoZSkuYWRkKHRoaXMudjEpKTtyZXR1cm4gdH07ZGkucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nZXRQb2ludChlLHQpfTtkaS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy52MS5jb3B5KGUudjEpO3RoaXMudjIuY29weShlLnYyKTtyZXR1cm4gdGhpc307ZGkucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPW5pLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtlLnYxPXRoaXMudjEudG9BcnJheSgpO2UudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGV9O2RpLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMudjEuZnJvbUFycmF5KGUudjEpO3RoaXMudjIuZnJvbUFycmF5KGUudjIpO3JldHVybiB0aGlzfTt2aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO3ZpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj12aTt2aS5wcm90b3R5cGUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZT0hMDt2aS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oZSx0KXt0PXR8fG5ldyBNZTt2YXIgcj10aGlzLnYwLG49dGhpcy52MSxpPXRoaXMudjI7dC5zZXQoY2koZSxyLngsbi54LGkueCksY2koZSxyLnksbi55LGkueSkpO3JldHVybiB0fTt2aS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy52MC5jb3B5KGUudjApO3RoaXMudjEuY29weShlLnYxKTt0aGlzLnYyLmNvcHkoZS52Mik7cmV0dXJuIHRoaXN9O3ZpLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT1uaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7ZS52MD10aGlzLnYwLnRvQXJyYXkoKTtlLnYxPXRoaXMudjEudG9BcnJheSgpO2UudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGV9O3ZpLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMudjAuZnJvbUFycmF5KGUudjApO3RoaXMudjEuZnJvbUFycmF5KGUudjEpO3RoaXMudjIuZnJvbUFycmF5KGUudjIpO3JldHVybiB0aGlzfTttaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO21pLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1taTttaS5wcm90b3R5cGUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZTM9ITA7bWkucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGUsdCl7dD10fHxuZXcgVGU7dmFyIHI9dGhpcy52MCxuPXRoaXMudjEsaT10aGlzLnYyO3Quc2V0KGNpKGUsci54LG4ueCxpLngpLGNpKGUsci55LG4ueSxpLnkpLGNpKGUsci56LG4ueixpLnopKTtyZXR1cm4gdH07bWkucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7bmkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMudjAuY29weShlLnYwKTt0aGlzLnYxLmNvcHkoZS52MSk7dGhpcy52Mi5jb3B5KGUudjIpO3JldHVybiB0aGlzfTttaS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9bmkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2UudjA9dGhpcy52MC50b0FycmF5KCk7ZS52MT10aGlzLnYxLnRvQXJyYXkoKTtlLnYyPXRoaXMudjIudG9BcnJheSgpO3JldHVybiBlfTttaS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oZSl7bmkucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxlKTt0aGlzLnYwLmZyb21BcnJheShlLnYwKTt0aGlzLnYxLmZyb21BcnJheShlLnYxKTt0aGlzLnYyLmZyb21BcnJheShlLnYyKTtyZXR1cm4gdGhpc307Z2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobmkucHJvdG90eXBlKTtnaS5wcm90b3R5cGUuY29uc3RydWN0b3I9Z2k7Z2kucHJvdG90eXBlLmlzU3BsaW5lQ3VydmU9ITA7Z2kucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGUsdCl7dD10fHxuZXcgTWU7dmFyIHI9dGhpcy5wb2ludHMsbj0oci5sZW5ndGgtMSkqZTtlPU1hdGguZmxvb3Iobik7bi09ZTt2YXIgaT1yWzA9PT1lP2U6ZS0xXSxvPXJbZV0sYT1yW2U+ci5sZW5ndGgtMj9yLmxlbmd0aC0xOmUrMV07cj1yW2U+ci5sZW5ndGgtMz9yLmxlbmd0aC0xOmUrMl07dC5zZXQodWkobixpLngsby54LGEueCxyLngpLHVpKG4saS55LG8ueSxhLnksci55KSk7cmV0dXJuIHR9O2dpLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe25pLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLnBvaW50cz1bXTtmb3IodmFyIHQ9MCxyPWUucG9pbnRzLmxlbmd0aDt0PHI7dCsrKXRoaXMucG9pbnRzLnB1c2goZS5wb2ludHNbdF0uY2xvbmUoKSk7cmV0dXJuIHRoaXN9O2dpLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT1uaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7ZS5wb2ludHM9W107Zm9yKHZhciB0PTAscj10aGlzLnBvaW50cy5sZW5ndGg7dDxyO3QrKyllLnBvaW50cy5wdXNoKHRoaXMucG9pbnRzW3RdLnRvQXJyYXkoKSk7cmV0dXJuIGV9O2dpLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgdD0wLHI9ZS5wb2ludHMubGVuZ3RoO3Q8cjt0Kyspe3ZhciBuPWUucG9pbnRzW3RdO3RoaXMucG9pbnRzLnB1c2goKG5ldyBNZSkuZnJvbUFycmF5KG4pKX1yZXR1cm4gdGhpc307dmFyIFV1PU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLEFyY0N1cnZlOm9pLENhdG11bGxSb21DdXJ2ZTM6c2ksQ3ViaWNCZXppZXJDdXJ2ZTpoaSxDdWJpY0JlemllckN1cnZlMzpwaSxFbGxpcHNlQ3VydmU6aWksTGluZUN1cnZlOmZpLExpbmVDdXJ2ZTM6ZGksUXVhZHJhdGljQmV6aWVyQ3VydmU6dmksUXVhZHJhdGljQmV6aWVyQ3VydmUzOm1pLFNwbGluZUN1cnZlOmdpfSk7X2kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpfaSxhZGQ6ZnVuY3Rpb24oZSl7dGhpcy5jdXJ2ZXMucHVzaChlKX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksdD10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7ZS5lcXVhbHModCl8fHRoaXMuY3VydmVzLnB1c2gobmV3IGZpKHQsZSkpfSxnZXRQb2ludDpmdW5jdGlvbihlKXt2YXIgdD1lKnRoaXMuZ2V0TGVuZ3RoKCkscj10aGlzLmdldEN1cnZlTGVuZ3RocygpO2ZvcihlPTA7ZTxyLmxlbmd0aDspe2lmKHJbZV0+PXQpcmV0dXJuIHQ9cltlXS10LGU9dGhpcy5jdXJ2ZXNbZV0scj1lLmdldExlbmd0aCgpLGUuZ2V0UG9pbnRBdCgwPT09cj8wOjEtdC9yKTtlKyt9cmV0dXJuIG51bGx9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIGVbZS5sZW5ndGgtMV19LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwO3RoaXMuY2FjaGVMZW5ndGhzPW51bGw7dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKX0sZ2V0Q3VydmVMZW5ndGhzOmZ1bmN0aW9uKCl7aWYodGhpcy5jYWNoZUxlbmd0aHMmJnRoaXMuY2FjaGVMZW5ndGhzLmxlbmd0aD09PXRoaXMuY3VydmVzLmxlbmd0aClyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7Zm9yKHZhciBlPVtdLHQ9MCxyPTAsbj10aGlzLmN1cnZlcy5sZW5ndGg7cjxuO3IrKyl0Kz10aGlzLmN1cnZlc1tyXS5nZXRMZW5ndGgoKSxlLnB1c2godCk7cmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzPWV9LGdldFNwYWNlZFBvaW50czpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT00MCk7Zm9yKHZhciB0PVtdLHI9MDtyPD1lO3IrKyl0LnB1c2godGhpcy5nZXRQb2ludChyL2UpKTt0aGlzLmF1dG9DbG9zZSYmdC5wdXNoKHRbMF0pO3JldHVybiB0fSxnZXRQb2ludHM6ZnVuY3Rpb24oZSl7ZT1lfHwxMjtmb3IodmFyIHQ9W10scixuPTAsaT10aGlzLmN1cnZlcztuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtvPW8uZ2V0UG9pbnRzKG8mJm8uaXNFbGxpcHNlQ3VydmU/MiplOm8mJihvLmlzTGluZUN1cnZlfHxvLmlzTGluZUN1cnZlMyk/MTpvJiZvLmlzU3BsaW5lQ3VydmU/ZSpvLnBvaW50cy5sZW5ndGg6ZSk7Zm9yKHZhciBhPTA7YTxvLmxlbmd0aDthKyspe3ZhciBzPW9bYV07ciYmci5lcXVhbHMocyl8fCh0LnB1c2gocykscj1zKX19dGhpcy5hdXRvQ2xvc2UmJjE8dC5sZW5ndGgmJiF0W3QubGVuZ3RoLTFdLmVxdWFscyh0WzBdKSYmdC5wdXNoKHRbMF0pO3JldHVybiB0fSxjb3B5OmZ1bmN0aW9uKGUpe25pLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmN1cnZlcz1bXTtmb3IodmFyIHQ9MCxyPWUuY3VydmVzLmxlbmd0aDt0PHI7dCsrKXRoaXMuY3VydmVzLnB1c2goZS5jdXJ2ZXNbdF0uY2xvbmUoKSk7dGhpcy5hdXRvQ2xvc2U9ZS5hdXRvQ2xvc2U7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPW5pLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtlLmF1dG9DbG9zZT10aGlzLmF1dG9DbG9zZTtlLmN1cnZlcz1bXTtmb3IodmFyIHQ9MCxyPXRoaXMuY3VydmVzLmxlbmd0aDt0PHI7dCsrKWUuY3VydmVzLnB1c2godGhpcy5jdXJ2ZXNbdF0udG9KU09OKCkpO3JldHVybiBlfSxmcm9tSlNPTjpmdW5jdGlvbihlKXtuaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMuYXV0b0Nsb3NlPWUuYXV0b0Nsb3NlO3RoaXMuY3VydmVzPVtdO2Zvcih2YXIgdD0wLHI9ZS5jdXJ2ZXMubGVuZ3RoO3Q8cjt0Kyspe3ZhciBuPWUuY3VydmVzW3RdO3RoaXMuY3VydmVzLnB1c2goKG5ldyBVdVtuLnR5cGVdKS5mcm9tSlNPTihuKSl9cmV0dXJuIHRoaXN9fSk7eWkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShfaS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp5aSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGUpe3RoaXMubW92ZVRvKGVbMF0ueCxlWzBdLnkpO2Zvcih2YXIgdD0xLHI9ZS5sZW5ndGg7dDxyO3QrKyl0aGlzLmxpbmVUbyhlW3RdLngsZVt0XS55KTtyZXR1cm4gdGhpc30sbW92ZVRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGUsdCk7cmV0dXJuIHRoaXN9LGxpbmVUbzpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBmaSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBNZShlLHQpKTt0aGlzLmN1cnZlcy5wdXNoKHIpO3RoaXMuY3VycmVudFBvaW50LnNldChlLHQpO3JldHVybiB0aGlzfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKGUsdCxyLG4pe2U9bmV3IHZpKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IE1lKGUsdCksbmV3IE1lKHIsbikpO3RoaXMuY3VydmVzLnB1c2goZSk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KHIsbik7cmV0dXJuIHRoaXN9LGJlemllckN1cnZlVG86ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2U9bmV3IGhpKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IE1lKGUsdCksbmV3IE1lKHIsbiksbmV3IE1lKGksbykpO3RoaXMuY3VydmVzLnB1c2goZSk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGksbyk7cmV0dXJuIHRoaXN9LHNwbGluZVRocnU6ZnVuY3Rpb24oZSl7dmFyIHQ9W3RoaXMuY3VycmVudFBvaW50LmNsb25lKCldLmNvbmNhdChlKTt0PW5ldyBnaSh0KTt0aGlzLmN1cnZlcy5wdXNoKHQpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoZVtlLmxlbmd0aC0xXSk7cmV0dXJuIHRoaXN9LGFyYzpmdW5jdGlvbihlLHQscixuLGksbyl7dGhpcy5hYnNhcmMoZSt0aGlzLmN1cnJlbnRQb2ludC54LHQrdGhpcy5jdXJyZW50UG9pbnQueSxyLG4saSxvKTtyZXR1cm4gdGhpc30sYWJzYXJjOmZ1bmN0aW9uKGUsdCxyLG4saSxvKXt0aGlzLmFic2VsbGlwc2UoZSx0LHIscixuLGksbyk7cmV0dXJuIHRoaXN9LGVsbGlwc2U6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzKXt0aGlzLmFic2VsbGlwc2UoZSt0aGlzLmN1cnJlbnRQb2ludC54LHQrdGhpcy5jdXJyZW50UG9pbnQueSxyLG4saSxvLGEscyk7cmV0dXJuIHRoaXN9LGFic2VsbGlwc2U6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzKXtlPW5ldyBpaShlLHQscixuLGksbyxhLHMpOzA8dGhpcy5jdXJ2ZXMubGVuZ3RoJiYodD1lLmdldFBvaW50KDApLHQuZXF1YWxzKHRoaXMuY3VycmVudFBvaW50KXx8dGhpcy5saW5lVG8odC54LHQueSkpO3RoaXMuY3VydmVzLnB1c2goZSk7ZT1lLmdldFBvaW50KDEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoZSk7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oZSl7X2kucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoZS5jdXJyZW50UG9pbnQpO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgZT1faS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7ZS5jdXJyZW50UG9pbnQ9dGhpcy5jdXJyZW50UG9pbnQudG9BcnJheSgpO3JldHVybiBlfSxmcm9tSlNPTjpmdW5jdGlvbihlKXtfaS5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGUpO3RoaXMuY3VycmVudFBvaW50LmZyb21BcnJheShlLmN1cnJlbnRQb2ludCk7cmV0dXJuIHRoaXN9fSk7YmkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh5aS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpiaSxnZXRQb2ludHNIb2xlczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0wLG49dGhpcy5ob2xlcy5sZW5ndGg7cjxuO3IrKyl0W3JdPXRoaXMuaG9sZXNbcl0uZ2V0UG9pbnRzKGUpO3JldHVybiB0fSxleHRyYWN0UG9pbnRzOmZ1bmN0aW9uKGUpe3JldHVybntzaGFwZTp0aGlzLmdldFBvaW50cyhlKSxob2xlczp0aGlzLmdldFBvaW50c0hvbGVzKGUpfX0sY29weTpmdW5jdGlvbihlKXt5aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5ob2xlcz1bXTtmb3IodmFyIHQ9MCxyPWUuaG9sZXMubGVuZ3RoO3Q8cjt0KyspdGhpcy5ob2xlcy5wdXNoKGUuaG9sZXNbdF0uY2xvbmUoKSk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPXlpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtlLnV1aWQ9dGhpcy51dWlkO2UuaG9sZXM9W107Zm9yKHZhciB0PTAscj10aGlzLmhvbGVzLmxlbmd0aDt0PHI7dCsrKWUuaG9sZXMucHVzaCh0aGlzLmhvbGVzW3RdLnRvSlNPTigpKTtyZXR1cm4gZX0sZnJvbUpTT046ZnVuY3Rpb24oZSl7eWkucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxlKTt0aGlzLnV1aWQ9ZS51dWlkO3RoaXMuaG9sZXM9W107Zm9yKHZhciB0PTAscj1lLmhvbGVzLmxlbmd0aDt0PHI7dCsrKXt2YXIgbj1lLmhvbGVzW3RdO3RoaXMuaG9sZXMucHVzaCgobmV3IHlpKS5mcm9tSlNPTihuKSl9cmV0dXJuIHRoaXN9fSk7eGkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnhpLGlzTGlnaHQ6ITAsY29weTpmdW5jdGlvbihlKXtmLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmNvbG9yLmNvcHkoZS5jb2xvcik7dGhpcy5pbnRlbnNpdHk9ZS5pbnRlbnNpdHk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihlKXtlPWYucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsZSk7ZS5vYmplY3QuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKTtlLm9iamVjdC5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7dm9pZCAwIT09dGhpcy5ncm91bmRDb2xvciYmKGUub2JqZWN0Lmdyb3VuZENvbG9yPXRoaXMuZ3JvdW5kQ29sb3IuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMuZGlzdGFuY2UmJihlLm9iamVjdC5kaXN0YW5jZT10aGlzLmRpc3RhbmNlKTt2b2lkIDAhPT10aGlzLmFuZ2xlJiYoZS5vYmplY3QuYW5nbGU9dGhpcy5hbmdsZSk7dm9pZCAwIT09dGhpcy5kZWNheSYmKGUub2JqZWN0LmRlY2F5PXRoaXMuZGVjYXkpO3ZvaWQgMCE9PXRoaXMucGVudW1icmEmJihlLm9iamVjdC5wZW51bWJyYT10aGlzLnBlbnVtYnJhKTt2b2lkIDAhPT10aGlzLnNoYWRvdyYmKGUub2JqZWN0LnNoYWRvdz10aGlzLnNoYWRvdy50b0pTT04oKSk7cmV0dXJuIGV9fSk7d2kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4aS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp3aSxpc0hlbWlzcGhlcmVMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGUpe3hpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmdyb3VuZENvbG9yLmNvcHkoZS5ncm91bmRDb2xvcik7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihTaS5wcm90b3R5cGUse19wcm9qU2NyZWVuTWF0cml4Om5ldyBFZSxfbGlnaHRQb3NpdGlvbldvcmxkOm5ldyBUZSxfbG9va1RhcmdldDpuZXcgVGUsZ2V0Vmlld3BvcnRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aWV3cG9ydENvdW50fSxnZXRGcnVzdHVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZydXN0dW19LHVwZGF0ZU1hdHJpY2VzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2FtZXJhLHI9dGhpcy5tYXRyaXgsbj10aGlzLl9wcm9qU2NyZWVuTWF0cml4LGk9dGhpcy5fbG9va1RhcmdldCxvPXRoaXMuX2xpZ2h0UG9zaXRpb25Xb3JsZDtvLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKTt0LnBvc2l0aW9uLmNvcHkobyk7aS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS50YXJnZXQubWF0cml4V29ybGQpO3QubG9va0F0KGkpO3QudXBkYXRlTWF0cml4V29ybGQoKTtuLm11bHRpcGx5TWF0cmljZXModC5wcm9qZWN0aW9uTWF0cml4LHQubWF0cml4V29ybGRJbnZlcnNlKTt0aGlzLl9mcnVzdHVtLnNldEZyb21Qcm9qZWN0aW9uTWF0cml4KG4pO3Iuc2V0KC41LDAsMCwuNSwwLC41LDAsLjUsMCwwLC41LC41LDAsMCwwLDEpO3IubXVsdGlwbHkodC5wcm9qZWN0aW9uTWF0cml4KTtyLm11bHRpcGx5KHQubWF0cml4V29ybGRJbnZlcnNlKX0sZ2V0Vmlld3BvcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3ZpZXdwb3J0c1tlXX0sZ2V0RnJhbWVFeHRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZyYW1lRXh0ZW50c30sY29weTpmdW5jdGlvbihlKXt0aGlzLmNhbWVyYT1lLmNhbWVyYS5jbG9uZSgpO3RoaXMuYmlhcz1lLmJpYXM7dGhpcy5yYWRpdXM9ZS5yYWRpdXM7dGhpcy5tYXBTaXplLmNvcHkoZS5tYXBTaXplKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPXt9OzAhPT10aGlzLmJpYXMmJihlLmJpYXM9dGhpcy5iaWFzKTsxIT09dGhpcy5yYWRpdXMmJihlLnJhZGl1cz10aGlzLnJhZGl1cyk7aWYoNTEyIT09dGhpcy5tYXBTaXplLnh8fDUxMiE9PXRoaXMubWFwU2l6ZS55KWUubWFwU2l6ZT10aGlzLm1hcFNpemUudG9BcnJheSgpO2UuY2FtZXJhPXRoaXMuY2FtZXJhLnRvSlNPTighMSkub2JqZWN0O2RlbGV0ZSBlLmNhbWVyYS5tYXRyaXg7cmV0dXJuIGV9fSk7TWkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShTaS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpNaSxpc1Nwb3RMaWdodFNoYWRvdzohMCx1cGRhdGVNYXRyaWNlczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNhbWVyYSxyPTIqVm8uUkFEMkRFRyplLmFuZ2xlLG49dGhpcy5tYXBTaXplLndpZHRoL3RoaXMubWFwU2l6ZS5oZWlnaHQsaT1lLmRpc3RhbmNlfHx0LmZhcjtpZihyIT09dC5mb3Z8fG4hPT10LmFzcGVjdHx8aSE9PXQuZmFyKXQuZm92PXIsdC5hc3BlY3Q9bix0LmZhcj1pLHQudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1NpLnByb3RvdHlwZS51cGRhdGVNYXRyaWNlcy5jYWxsKHRoaXMsZSl9fSk7Q2kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4aS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpDaSxpc1Nwb3RMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGUpe3hpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmRpc3RhbmNlPWUuZGlzdGFuY2U7dGhpcy5hbmdsZT1lLmFuZ2xlO3RoaXMucGVudW1icmE9ZS5wZW51bWJyYTt0aGlzLmRlY2F5PWUuZGVjYXk7dGhpcy50YXJnZXQ9ZS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1lLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO1RpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoU2kucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VGksaXNQb2ludExpZ2h0U2hhZG93OiEwLHVwZGF0ZU1hdHJpY2VzOmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCk7dmFyIHI9dGhpcy5jYW1lcmEsbj10aGlzLm1hdHJpeCxpPXRoaXMuX2xpZ2h0UG9zaXRpb25Xb3JsZCxvPXRoaXMuX2xvb2tUYXJnZXQsYT10aGlzLl9wcm9qU2NyZWVuTWF0cml4O2kuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGUubWF0cml4V29ybGQpO3IucG9zaXRpb24uY29weShpKTtvLmNvcHkoci5wb3NpdGlvbik7by5hZGQodGhpcy5fY3ViZURpcmVjdGlvbnNbdF0pO3IudXAuY29weSh0aGlzLl9jdWJlVXBzW3RdKTtyLmxvb2tBdChvKTtyLnVwZGF0ZU1hdHJpeFdvcmxkKCk7bi5tYWtlVHJhbnNsYXRpb24oLWkueCwtaS55LC1pLnopO2EubXVsdGlwbHlNYXRyaWNlcyhyLnByb2plY3Rpb25NYXRyaXgsci5tYXRyaXhXb3JsZEludmVyc2UpO3RoaXMuX2ZydXN0dW0uc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoYSl9fSk7RWkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4aS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpFaSxpc1BvaW50TGlnaHQ6ITAsY29weTpmdW5jdGlvbihlKXt4aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5kaXN0YW5jZT1lLmRpc3RhbmNlO3RoaXMuZGVjYXk9ZS5kZWNheTt0aGlzLnNoYWRvdz1lLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO09pLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpPaSxpc09ydGhvZ3JhcGhpY0NhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKGUsdCl7Vi5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSx0KTt0aGlzLmxlZnQ9ZS5sZWZ0O3RoaXMucmlnaHQ9ZS5yaWdodDt0aGlzLnRvcD1lLnRvcDt0aGlzLmJvdHRvbT1lLmJvdHRvbTt0aGlzLm5lYXI9ZS5uZWFyO3RoaXMuZmFyPWUuZmFyO3RoaXMuem9vbT1lLnpvb207dGhpcy52aWV3PW51bGw9PT1lLnZpZXc/bnVsbDpPYmplY3QuYXNzaWduKHt9LGUudmlldyk7cmV0dXJuIHRoaXN9LHNldFZpZXdPZmZzZXQ6ZnVuY3Rpb24oZSx0LHIsbixpLG8pe251bGw9PT10aGlzLnZpZXcmJih0aGlzLnZpZXc9e2VuYWJsZWQ6ITAsZnVsbFdpZHRoOjEsZnVsbEhlaWdodDoxLG9mZnNldFg6MCxvZmZzZXRZOjAsd2lkdGg6MSxoZWlnaHQ6MX0pO3RoaXMudmlldy5lbmFibGVkPSEwO3RoaXMudmlldy5mdWxsV2lkdGg9ZTt0aGlzLnZpZXcuZnVsbEhlaWdodD10O3RoaXMudmlldy5vZmZzZXRYPXI7dGhpcy52aWV3Lm9mZnNldFk9bjt0aGlzLnZpZXcud2lkdGg9aTt0aGlzLnZpZXcuaGVpZ2h0PW87dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe251bGwhPT10aGlzLnZpZXcmJih0aGlzLnZpZXcuZW5hYmxlZD0hMSk7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6ZnVuY3Rpb24oKXt2YXIgZT0odGhpcy5yaWdodC10aGlzLmxlZnQpLygyKnRoaXMuem9vbSksdD0odGhpcy50b3AtdGhpcy5ib3R0b20pLygyKnRoaXMuem9vbSkscj0odGhpcy5yaWdodCt0aGlzLmxlZnQpLzIsbj0odGhpcy50b3ArdGhpcy5ib3R0b20pLzIsaT1yLWU7cis9ZTtlPW4rdDt0PW4tdDtudWxsIT09dGhpcy52aWV3JiZ0aGlzLnZpZXcuZW5hYmxlZCYmKG49KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS90aGlzLnZpZXcuZnVsbFdpZHRoL3RoaXMuem9vbSx0PSh0aGlzLnRvcC10aGlzLmJvdHRvbSkvdGhpcy52aWV3LmZ1bGxIZWlnaHQvdGhpcy56b29tLGkrPW4qdGhpcy52aWV3Lm9mZnNldFgscj1pK24qdGhpcy52aWV3LndpZHRoLGUtPXQqdGhpcy52aWV3Lm9mZnNldFksdD1lLXQqdGhpcy52aWV3LmhlaWdodCk7dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VPcnRob2dyYXBoaWMoaSxyLGUsdCx0aGlzLm5lYXIsdGhpcy5mYXIpO3RoaXMucHJvamVjdGlvbk1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLnByb2plY3Rpb25NYXRyaXgpfSx0b0pTT046ZnVuY3Rpb24oZSl7ZT1mLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGUpO2Uub2JqZWN0Lnpvb209dGhpcy56b29tO2Uub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0O2Uub2JqZWN0LnJpZ2h0PXRoaXMucmlnaHQ7ZS5vYmplY3QudG9wPXRoaXMudG9wO2Uub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbTtlLm9iamVjdC5uZWFyPXRoaXMubmVhcjtlLm9iamVjdC5mYXI9dGhpcy5mYXI7bnVsbCE9PXRoaXMudmlldyYmKGUub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKTtyZXR1cm4gZX19KTtQaS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFNpLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlBpLGlzRGlyZWN0aW9uYWxMaWdodFNoYWRvdzohMCx1cGRhdGVNYXRyaWNlczpmdW5jdGlvbihlKXtTaS5wcm90b3R5cGUudXBkYXRlTWF0cmljZXMuY2FsbCh0aGlzLGUpfX0pO0FpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeGkucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QWksaXNEaXJlY3Rpb25hbExpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oZSl7eGkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMudGFyZ2V0PWUudGFyZ2V0LmNsb25lKCk7dGhpcy5zaGFkb3c9ZS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpc319KTtqaS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHhpLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmppLGlzQW1iaWVudExpZ2h0OiEwfSk7UmkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4aS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpSaSxpc1JlY3RBcmVhTGlnaHQ6ITAsY29weTpmdW5jdGlvbihlKXt4aS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy53aWR0aD1lLndpZHRoO3RoaXMuaGVpZ2h0PWUuaGVpZ2h0O3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oZSl7ZT14aS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxlKTtlLm9iamVjdC53aWR0aD10aGlzLndpZHRoO2Uub2JqZWN0LmhlaWdodD10aGlzLmhlaWdodDtyZXR1cm4gZX19KTtPYmplY3QuYXNzaWduKGtpLnByb3RvdHlwZSx7aXNTcGhlcmljYWxIYXJtb25pY3MzOiEwLHNldDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDs5PnQ7dCsrKXRoaXMuY29lZmZpY2llbnRzW3RdLmNvcHkoZVt0XSk7cmV0dXJuIHRoaXN9LHplcm86ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDs5PmU7ZSsrKXRoaXMuY29lZmZpY2llbnRzW2VdLnNldCgwLDAsMCk7cmV0dXJuIHRoaXN9LGdldEF0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS54LG49ZS55O2U9ZS56O3ZhciBpPXRoaXMuY29lZmZpY2llbnRzO3QuY29weShpWzBdKS5tdWx0aXBseVNjYWxhciguMjgyMDk1KTt0LmFkZFNjYWxlZFZlY3RvcihpWzFdLC40ODg2MDMqbik7dC5hZGRTY2FsZWRWZWN0b3IoaVsyXSwuNDg4NjAzKmUpO3QuYWRkU2NhbGVkVmVjdG9yKGlbM10sLjQ4ODYwMypyKTt0LmFkZFNjYWxlZFZlY3RvcihpWzRdLDEuMDkyNTQ4KnIqbik7dC5hZGRTY2FsZWRWZWN0b3IoaVs1XSwxLjA5MjU0OCpuKmUpO3QuYWRkU2NhbGVkVmVjdG9yKGlbNl0sLjMxNTM5MiooMyplKmUtMSkpO3QuYWRkU2NhbGVkVmVjdG9yKGlbN10sMS4wOTI1NDgqciplKTt0LmFkZFNjYWxlZFZlY3RvcihpWzhdLC41NDYyNzQqKHIqci1uKm4pKTtyZXR1cm4gdH0sZ2V0SXJyYWRpYW5jZUF0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS54LG49ZS55O2U9ZS56O3ZhciBpPXRoaXMuY29lZmZpY2llbnRzO3QuY29weShpWzBdKS5tdWx0aXBseVNjYWxhciguODg2MjI3KTt0LmFkZFNjYWxlZFZlY3RvcihpWzFdLDEuMDIzMzI4Km4pO3QuYWRkU2NhbGVkVmVjdG9yKGlbMl0sMS4wMjMzMjgqZSk7dC5hZGRTY2FsZWRWZWN0b3IoaVszXSwxLjAyMzMyOCpyKTt0LmFkZFNjYWxlZFZlY3RvcihpWzRdLC44NTgwODYqcipuKTt0LmFkZFNjYWxlZFZlY3RvcihpWzVdLC44NTgwODYqbiplKTt0LmFkZFNjYWxlZFZlY3RvcihpWzZdLC43NDMxMjUqZSplLS4yNDc3MDgpO3QuYWRkU2NhbGVkVmVjdG9yKGlbN10sLjg1ODA4NipyKmUpO3QuYWRkU2NhbGVkVmVjdG9yKGlbOF0sLjQyOTA0MyoocipyLW4qbikpO3JldHVybiB0fSxhZGQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7OT50O3QrKyl0aGlzLmNvZWZmaWNpZW50c1t0XS5hZGQoZS5jb2VmZmljaWVudHNbdF0pO3JldHVybiB0aGlzfSxhZGRTY2FsZWRTSDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wOzk+cjtyKyspdGhpcy5jb2VmZmljaWVudHNbcl0uYWRkU2NhbGVkVmVjdG9yKGUuY29lZmZpY2llbnRzW3JdLHQpO3JldHVybiB0aGlzfSxzY2FsZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDs5PnQ7dCsrKXRoaXMuY29lZmZpY2llbnRzW3RdLm11bHRpcGx5U2NhbGFyKGUpO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTA7OT5yO3IrKyl0aGlzLmNvZWZmaWNpZW50c1tyXS5sZXJwKGUuY29lZmZpY2llbnRzW3JdLHQpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7OT50O3QrKylpZighdGhpcy5jb2VmZmljaWVudHNbdF0uZXF1YWxzKGUuY29lZmZpY2llbnRzW3RdKSlyZXR1cm4hMTtyZXR1cm4hMH0sY29weTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXQoZS5jb2VmZmljaWVudHMpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sZnJvbUFycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCk7Zm9yKHZhciByPXRoaXMuY29lZmZpY2llbnRzLG49MDs5Pm47bisrKXJbbl0uZnJvbUFycmF5KGUsdCszKm4pO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZSYmKGU9W10pO3ZvaWQgMD09PXQmJih0PTApO2Zvcih2YXIgcj10aGlzLmNvZWZmaWNpZW50cyxuPTA7OT5uO24rKylyW25dLnRvQXJyYXkoZSx0KzMqbik7cmV0dXJuIGV9fSk7T2JqZWN0LmFzc2lnbihraSx7Z2V0QmFzaXNBdDpmdW5jdGlvbihlLHQpe3ZhciByPWUueCxuPWUueTtlPWUuejt0WzBdPS4yODIwOTU7dFsxXT0uNDg4NjAzKm47dFsyXT0uNDg4NjAzKmU7dFszXT0uNDg4NjAzKnI7dFs0XT0xLjA5MjU0OCpyKm47dFs1XT0xLjA5MjU0OCpuKmU7dFs2XT0uMzE1MzkyKigzKmUqZS0xKTt0WzddPTEuMDkyNTQ4KnIqZTt0WzhdPS41NDYyNzQqKHIqci1uKm4pfX0pO0xpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeGkucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TGksaXNMaWdodFByb2JlOiEwLGNvcHk6ZnVuY3Rpb24oZSl7eGkucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGUpO3RoaXMuc2guY29weShlLnNoKTtyZXR1cm4gdGhpc30sZnJvbUpTT046ZnVuY3Rpb24oZSl7dGhpcy5pbnRlbnNpdHk9ZS5pbnRlbnNpdHk7dGhpcy5zaC5mcm9tQXJyYXkoZS5zaCk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihlKXtlPXhpLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGUpO2Uub2JqZWN0LnNoPXRoaXMuc2gudG9BcnJheSgpO3JldHVybiBlfX0pO05pLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TmksbG9hZDpmdW5jdGlvbih0LHIsZSxuKXt2YXIgaT10aGlzLG89bmV3IEtuKGkubWFuYWdlcik7by5zZXRQYXRoKGkucGF0aCk7by5sb2FkKHQsZnVuY3Rpb24oZSl7dHJ5e3IoaS5wYXJzZShKU09OLnBhcnNlKGUpKSl9Y2F0Y2goZSl7bj9uKGUpOmNvbnNvbGUuZXJyb3IoZSksaS5tYW5hZ2VyLml0ZW1FcnJvcih0KX19LGUsbil9LHBhcnNlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dm9pZCAwPT09cltlXSYmY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWxMb2FkZXI6IFVuZGVmaW5lZCB0ZXh0dXJlXCIsZSk7cmV0dXJuIHJbZV19dmFyIHI9dGhpcy50ZXh0dXJlcyxuPW5ldyBJdVtlLnR5cGVdO3ZvaWQgMCE9PWUudXVpZCYmKG4udXVpZD1lLnV1aWQpO3ZvaWQgMCE9PWUubmFtZSYmKG4ubmFtZT1lLm5hbWUpO3ZvaWQgMCE9PWUuY29sb3ImJm4uY29sb3Iuc2V0SGV4KGUuY29sb3IpO3ZvaWQgMCE9PWUucm91Z2huZXNzJiYobi5yb3VnaG5lc3M9ZS5yb3VnaG5lc3MpO3ZvaWQgMCE9PWUubWV0YWxuZXNzJiYobi5tZXRhbG5lc3M9ZS5tZXRhbG5lc3MpO3ZvaWQgMCE9PWUuc2hlZW4mJihuLnNoZWVuPShuZXcgdikuc2V0SGV4KGUuc2hlZW4pKTt2b2lkIDAhPT1lLmVtaXNzaXZlJiZuLmVtaXNzaXZlLnNldEhleChlLmVtaXNzaXZlKTt2b2lkIDAhPT1lLnNwZWN1bGFyJiZuLnNwZWN1bGFyLnNldEhleChlLnNwZWN1bGFyKTt2b2lkIDAhPT1lLnNoaW5pbmVzcyYmKG4uc2hpbmluZXNzPWUuc2hpbmluZXNzKTt2b2lkIDAhPT1lLmNsZWFyY29hdCYmKG4uY2xlYXJjb2F0PWUuY2xlYXJjb2F0KTt2b2lkIDAhPT1lLmNsZWFyY29hdFJvdWdobmVzcyYmKG4uY2xlYXJjb2F0Um91Z2huZXNzPWUuY2xlYXJjb2F0Um91Z2huZXNzKTt2b2lkIDAhPT1lLmZvZyYmKG4uZm9nPWUuZm9nKTt2b2lkIDAhPT1lLmZsYXRTaGFkaW5nJiYobi5mbGF0U2hhZGluZz1lLmZsYXRTaGFkaW5nKTt2b2lkIDAhPT1lLmJsZW5kaW5nJiYobi5ibGVuZGluZz1lLmJsZW5kaW5nKTt2b2lkIDAhPT1lLmNvbWJpbmUmJihuLmNvbWJpbmU9ZS5jb21iaW5lKTt2b2lkIDAhPT1lLnNpZGUmJihuLnNpZGU9ZS5zaWRlKTt2b2lkIDAhPT1lLm9wYWNpdHkmJihuLm9wYWNpdHk9ZS5vcGFjaXR5KTt2b2lkIDAhPT1lLnRyYW5zcGFyZW50JiYobi50cmFuc3BhcmVudD1lLnRyYW5zcGFyZW50KTt2b2lkIDAhPT1lLmFscGhhVGVzdCYmKG4uYWxwaGFUZXN0PWUuYWxwaGFUZXN0KTt2b2lkIDAhPT1lLmRlcHRoVGVzdCYmKG4uZGVwdGhUZXN0PWUuZGVwdGhUZXN0KTt2b2lkIDAhPT1lLmRlcHRoV3JpdGUmJihuLmRlcHRoV3JpdGU9ZS5kZXB0aFdyaXRlKTt2b2lkIDAhPT1lLmNvbG9yV3JpdGUmJihuLmNvbG9yV3JpdGU9ZS5jb2xvcldyaXRlKTt2b2lkIDAhPT1lLnN0ZW5jaWxXcml0ZSYmKG4uc3RlbmNpbFdyaXRlPWUuc3RlbmNpbFdyaXRlKTt2b2lkIDAhPT1lLnN0ZW5jaWxXcml0ZU1hc2smJihuLnN0ZW5jaWxXcml0ZU1hc2s9ZS5zdGVuY2lsV3JpdGVNYXNrKTt2b2lkIDAhPT1lLnN0ZW5jaWxGdW5jJiYobi5zdGVuY2lsRnVuYz1lLnN0ZW5jaWxGdW5jKTt2b2lkIDAhPT1lLnN0ZW5jaWxSZWYmJihuLnN0ZW5jaWxSZWY9ZS5zdGVuY2lsUmVmKTt2b2lkIDAhPT1lLnN0ZW5jaWxGdW5jTWFzayYmKG4uc3RlbmNpbEZ1bmNNYXNrPWUuc3RlbmNpbEZ1bmNNYXNrKTt2b2lkIDAhPT1lLnN0ZW5jaWxGYWlsJiYobi5zdGVuY2lsRmFpbD1lLnN0ZW5jaWxGYWlsKTt2b2lkIDAhPT1lLnN0ZW5jaWxaRmFpbCYmKG4uc3RlbmNpbFpGYWlsPWUuc3RlbmNpbFpGYWlsKTt2b2lkIDAhPT1lLnN0ZW5jaWxaUGFzcyYmKG4uc3RlbmNpbFpQYXNzPWUuc3RlbmNpbFpQYXNzKTt2b2lkIDAhPT1lLndpcmVmcmFtZSYmKG4ud2lyZWZyYW1lPWUud2lyZWZyYW1lKTt2b2lkIDAhPT1lLndpcmVmcmFtZUxpbmV3aWR0aCYmKG4ud2lyZWZyYW1lTGluZXdpZHRoPWUud2lyZWZyYW1lTGluZXdpZHRoKTt2b2lkIDAhPT1lLndpcmVmcmFtZUxpbmVjYXAmJihuLndpcmVmcmFtZUxpbmVjYXA9ZS53aXJlZnJhbWVMaW5lY2FwKTt2b2lkIDAhPT1lLndpcmVmcmFtZUxpbmVqb2luJiYobi53aXJlZnJhbWVMaW5lam9pbj1lLndpcmVmcmFtZUxpbmVqb2luKTt2b2lkIDAhPT1lLnJvdGF0aW9uJiYobi5yb3RhdGlvbj1lLnJvdGF0aW9uKTsxIT09ZS5saW5ld2lkdGgmJihuLmxpbmV3aWR0aD1lLmxpbmV3aWR0aCk7dm9pZCAwIT09ZS5kYXNoU2l6ZSYmKG4uZGFzaFNpemU9ZS5kYXNoU2l6ZSk7dm9pZCAwIT09ZS5nYXBTaXplJiYobi5nYXBTaXplPWUuZ2FwU2l6ZSk7dm9pZCAwIT09ZS5zY2FsZSYmKG4uc2NhbGU9ZS5zY2FsZSk7dm9pZCAwIT09ZS5wb2x5Z29uT2Zmc2V0JiYobi5wb2x5Z29uT2Zmc2V0PWUucG9seWdvbk9mZnNldCk7dm9pZCAwIT09ZS5wb2x5Z29uT2Zmc2V0RmFjdG9yJiYobi5wb2x5Z29uT2Zmc2V0RmFjdG9yPWUucG9seWdvbk9mZnNldEZhY3Rvcik7dm9pZCAwIT09ZS5wb2x5Z29uT2Zmc2V0VW5pdHMmJihuLnBvbHlnb25PZmZzZXRVbml0cz1lLnBvbHlnb25PZmZzZXRVbml0cyk7dm9pZCAwIT09ZS5za2lubmluZyYmKG4uc2tpbm5pbmc9ZS5za2lubmluZyk7dm9pZCAwIT09ZS5tb3JwaFRhcmdldHMmJihuLm1vcnBoVGFyZ2V0cz1lLm1vcnBoVGFyZ2V0cyk7dm9pZCAwIT09ZS5tb3JwaE5vcm1hbHMmJihuLm1vcnBoTm9ybWFscz1lLm1vcnBoTm9ybWFscyk7dm9pZCAwIT09ZS5kaXRoZXJpbmcmJihuLmRpdGhlcmluZz1lLmRpdGhlcmluZyk7dm9pZCAwIT09ZS52ZXJ0ZXhUYW5nZW50cyYmKG4udmVydGV4VGFuZ2VudHM9ZS52ZXJ0ZXhUYW5nZW50cyk7dm9pZCAwIT09ZS52aXNpYmxlJiYobi52aXNpYmxlPWUudmlzaWJsZSk7dm9pZCAwIT09ZS50b25lTWFwcGVkJiYobi50b25lTWFwcGVkPWUudG9uZU1hcHBlZCk7dm9pZCAwIT09ZS51c2VyRGF0YSYmKG4udXNlckRhdGE9ZS51c2VyRGF0YSk7dm9pZCAwIT09ZS52ZXJ0ZXhDb2xvcnMmJihuLnZlcnRleENvbG9ycz1cIm51bWJlclwiPT09dHlwZW9mIGUudmVydGV4Q29sb3JzPzA8ZS52ZXJ0ZXhDb2xvcnM/ITA6ITE6ZS52ZXJ0ZXhDb2xvcnMpO2lmKHZvaWQgMCE9PWUudW5pZm9ybXMpZm9yKHZhciBpIGluIGUudW5pZm9ybXMpe3ZhciBvPWUudW5pZm9ybXNbaV07bi51bmlmb3Jtc1tpXT17fTtzd2l0Y2goby50eXBlKXtjYXNlXCJ0XCI6bi51bmlmb3Jtc1tpXS52YWx1ZT10KG8udmFsdWUpO2JyZWFrO2Nhc2VcImNcIjpuLnVuaWZvcm1zW2ldLnZhbHVlPShuZXcgdikuc2V0SGV4KG8udmFsdWUpO2JyZWFrO2Nhc2VcInYyXCI6bi51bmlmb3Jtc1tpXS52YWx1ZT0obmV3IE1lKS5mcm9tQXJyYXkoby52YWx1ZSk7YnJlYWs7Y2FzZVwidjNcIjpuLnVuaWZvcm1zW2ldLnZhbHVlPShuZXcgVGUpLmZyb21BcnJheShvLnZhbHVlKTticmVhaztjYXNlXCJ2NFwiOm4udW5pZm9ybXNbaV0udmFsdWU9KG5ldyBDZSkuZnJvbUFycmF5KG8udmFsdWUpO2JyZWFrO2Nhc2VcIm0zXCI6bi51bmlmb3Jtc1tpXS52YWx1ZT0obmV3IG0pLmZyb21BcnJheShvLnZhbHVlKTtjYXNlXCJtNFwiOm4udW5pZm9ybXNbaV0udmFsdWU9KG5ldyBFZSkuZnJvbUFycmF5KG8udmFsdWUpO2JyZWFrO2RlZmF1bHQ6bi51bmlmb3Jtc1tpXS52YWx1ZT1vLnZhbHVlfX12b2lkIDAhPT1lLmRlZmluZXMmJihuLmRlZmluZXM9ZS5kZWZpbmVzKTt2b2lkIDAhPT1lLnZlcnRleFNoYWRlciYmKG4udmVydGV4U2hhZGVyPWUudmVydGV4U2hhZGVyKTt2b2lkIDAhPT1lLmZyYWdtZW50U2hhZGVyJiYobi5mcmFnbWVudFNoYWRlcj1lLmZyYWdtZW50U2hhZGVyKTtpZih2b2lkIDAhPT1lLmV4dGVuc2lvbnMpZm9yKHZhciBhIGluIGUuZXh0ZW5zaW9ucyluLmV4dGVuc2lvbnNbYV09ZS5leHRlbnNpb25zW2FdO3ZvaWQgMCE9PWUuc2hhZGluZyYmKG4uZmxhdFNoYWRpbmc9MT09PWUuc2hhZGluZyk7dm9pZCAwIT09ZS5zaXplJiYobi5zaXplPWUuc2l6ZSk7dm9pZCAwIT09ZS5zaXplQXR0ZW51YXRpb24mJihuLnNpemVBdHRlbnVhdGlvbj1lLnNpemVBdHRlbnVhdGlvbik7dm9pZCAwIT09ZS5tYXAmJihuLm1hcD10KGUubWFwKSk7dm9pZCAwIT09ZS5tYXRjYXAmJihuLm1hdGNhcD10KGUubWF0Y2FwKSk7dm9pZCAwIT09ZS5hbHBoYU1hcCYmKG4uYWxwaGFNYXA9dChlLmFscGhhTWFwKSk7dm9pZCAwIT09ZS5idW1wTWFwJiYobi5idW1wTWFwPXQoZS5idW1wTWFwKSk7dm9pZCAwIT09ZS5idW1wU2NhbGUmJihuLmJ1bXBTY2FsZT1lLmJ1bXBTY2FsZSk7dm9pZCAwIT09ZS5ub3JtYWxNYXAmJihuLm5vcm1hbE1hcD10KGUubm9ybWFsTWFwKSk7dm9pZCAwIT09ZS5ub3JtYWxNYXBUeXBlJiYobi5ub3JtYWxNYXBUeXBlPWUubm9ybWFsTWFwVHlwZSk7dm9pZCAwIT09ZS5ub3JtYWxTY2FsZSYmKGk9ZS5ub3JtYWxTY2FsZSwhMT09PUFycmF5LmlzQXJyYXkoaSkmJihpPVtpLGldKSxuLm5vcm1hbFNjYWxlPShuZXcgTWUpLmZyb21BcnJheShpKSk7dm9pZCAwIT09ZS5kaXNwbGFjZW1lbnRNYXAmJihuLmRpc3BsYWNlbWVudE1hcD10KGUuZGlzcGxhY2VtZW50TWFwKSk7dm9pZCAwIT09ZS5kaXNwbGFjZW1lbnRTY2FsZSYmKG4uZGlzcGxhY2VtZW50U2NhbGU9ZS5kaXNwbGFjZW1lbnRTY2FsZSk7dm9pZCAwIT09ZS5kaXNwbGFjZW1lbnRCaWFzJiYobi5kaXNwbGFjZW1lbnRCaWFzPWUuZGlzcGxhY2VtZW50Qmlhcyk7dm9pZCAwIT09ZS5yb3VnaG5lc3NNYXAmJihuLnJvdWdobmVzc01hcD10KGUucm91Z2huZXNzTWFwKSk7dm9pZCAwIT09ZS5tZXRhbG5lc3NNYXAmJihuLm1ldGFsbmVzc01hcD10KGUubWV0YWxuZXNzTWFwKSk7dm9pZCAwIT09ZS5lbWlzc2l2ZU1hcCYmKG4uZW1pc3NpdmVNYXA9dChlLmVtaXNzaXZlTWFwKSk7dm9pZCAwIT09ZS5lbWlzc2l2ZUludGVuc2l0eSYmKG4uZW1pc3NpdmVJbnRlbnNpdHk9ZS5lbWlzc2l2ZUludGVuc2l0eSk7dm9pZCAwIT09ZS5zcGVjdWxhck1hcCYmKG4uc3BlY3VsYXJNYXA9dChlLnNwZWN1bGFyTWFwKSk7dm9pZCAwIT09ZS5lbnZNYXAmJihuLmVudk1hcD10KGUuZW52TWFwKSk7dm9pZCAwIT09ZS5lbnZNYXBJbnRlbnNpdHkmJihuLmVudk1hcEludGVuc2l0eT1lLmVudk1hcEludGVuc2l0eSk7dm9pZCAwIT09ZS5yZWZsZWN0aXZpdHkmJihuLnJlZmxlY3Rpdml0eT1lLnJlZmxlY3Rpdml0eSk7dm9pZCAwIT09ZS5yZWZyYWN0aW9uUmF0aW8mJihuLnJlZnJhY3Rpb25SYXRpbz1lLnJlZnJhY3Rpb25SYXRpbyk7dm9pZCAwIT09ZS5saWdodE1hcCYmKG4ubGlnaHRNYXA9dChlLmxpZ2h0TWFwKSk7dm9pZCAwIT09ZS5saWdodE1hcEludGVuc2l0eSYmKG4ubGlnaHRNYXBJbnRlbnNpdHk9ZS5saWdodE1hcEludGVuc2l0eSk7dm9pZCAwIT09ZS5hb01hcCYmKG4uYW9NYXA9dChlLmFvTWFwKSk7dm9pZCAwIT09ZS5hb01hcEludGVuc2l0eSYmKG4uYW9NYXBJbnRlbnNpdHk9ZS5hb01hcEludGVuc2l0eSk7dm9pZCAwIT09ZS5ncmFkaWVudE1hcCYmKG4uZ3JhZGllbnRNYXA9dChlLmdyYWRpZW50TWFwKSk7dm9pZCAwIT09ZS5jbGVhcmNvYXRNYXAmJihuLmNsZWFyY29hdE1hcD10KGUuY2xlYXJjb2F0TWFwKSk7dm9pZCAwIT09ZS5jbGVhcmNvYXRSb3VnaG5lc3NNYXAmJihuLmNsZWFyY29hdFJvdWdobmVzc01hcD10KGUuY2xlYXJjb2F0Um91Z2huZXNzTWFwKSk7dm9pZCAwIT09ZS5jbGVhcmNvYXROb3JtYWxNYXAmJihuLmNsZWFyY29hdE5vcm1hbE1hcD10KGUuY2xlYXJjb2F0Tm9ybWFsTWFwKSk7dm9pZCAwIT09ZS5jbGVhcmNvYXROb3JtYWxTY2FsZSYmKG4uY2xlYXJjb2F0Tm9ybWFsU2NhbGU9KG5ldyBNZSkuZnJvbUFycmF5KGUuY2xlYXJjb2F0Tm9ybWFsU2NhbGUpKTtyZXR1cm4gbn0sc2V0VGV4dHVyZXM6ZnVuY3Rpb24oZSl7dGhpcy50ZXh0dXJlcz1lO3JldHVybiB0aGlzfX0pO3ZhciBxdT17ZGVjb2RlVGV4dDpmdW5jdGlvbihlKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIFRleHREZWNvZGVyKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZShlKTtmb3IodmFyIHQ9XCJcIixyPTAsbj1lLmxlbmd0aDtyPG47cisrKXQrPVN0cmluZy5mcm9tQ2hhckNvZGUoZVtyXSk7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHQpKX1jYXRjaChlKXtyZXR1cm4gdH19LGV4dHJhY3RVcmxCYXNlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubGFzdEluZGV4T2YoXCIvXCIpO3JldHVybi0xPT09dD9cIi4vXCI6ZS5zdWJzdHIoMCx0KzEpfX07SWkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShOLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOklpLGlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk6ITAsY29weTpmdW5jdGlvbihlKXtOLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmluc3RhbmNlQ291bnQ9ZS5pbnN0YW5jZUNvdW50O3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGU9Ti5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7ZS5pbnN0YW5jZUNvdW50PXRoaXMuaW5zdGFuY2VDb3VudDtlLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk9ITA7cmV0dXJuIGV9fSk7RGkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkRpLGlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlOiEwLGNvcHk6ZnVuY3Rpb24oZSl7RS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWUubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGU9RS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7ZS5tZXNoUGVyQXR0cmlidXRlPXRoaXMubWVzaFBlckF0dHJpYnV0ZTtlLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPSEwO3JldHVybiBlfX0pO0JpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6QmksbG9hZDpmdW5jdGlvbih0LHIsZSxuKXt2YXIgaT10aGlzLG89bmV3IEtuKGkubWFuYWdlcik7by5zZXRQYXRoKGkucGF0aCk7by5sb2FkKHQsZnVuY3Rpb24oZSl7dHJ5e3IoaS5wYXJzZShKU09OLnBhcnNlKGUpKSl9Y2F0Y2goZSl7bj9uKGUpOmNvbnNvbGUuZXJyb3IoZSksaS5tYW5hZ2VyLml0ZW1FcnJvcih0KX19LGUsbil9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT9uZXcgSWk6bmV3IE4scj1lLmRhdGEuaW5kZXg7aWYodm9pZCAwIT09cil7dmFyIG49bmV3IFd1W3IudHlwZV0oci5hcnJheSk7dC5zZXRJbmRleChuZXcgRShuLDEpKX1yPWUuZGF0YS5hdHRyaWJ1dGVzO2Zvcih2YXIgaSBpbiByKXt2YXIgbz1yW2ldO249bmV3IFd1W28udHlwZV0oby5hcnJheSk7bj1uZXcoby5pc0luc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZT9EaTpFKShuLG8uaXRlbVNpemUsby5ub3JtYWxpemVkKTt2b2lkIDAhPT1vLm5hbWUmJihuLm5hbWU9by5uYW1lKTt0LnNldEF0dHJpYnV0ZShpLG4pfXZhciBhPWUuZGF0YS5tb3JwaEF0dHJpYnV0ZXM7aWYoYSlmb3IoaSBpbiBhKXt2YXIgcz1hW2ldLHU9W107cj0wO2Zvcih2YXIgYz1zLmxlbmd0aDtyPGM7cisrKW89c1tyXSxuPW5ldyBXdVtvLnR5cGVdKG8uYXJyYXkpLG49bmV3IEUobixvLml0ZW1TaXplLG8ubm9ybWFsaXplZCksdm9pZCAwIT09by5uYW1lJiYobi5uYW1lPW8ubmFtZSksdS5wdXNoKG4pO3QubW9ycGhBdHRyaWJ1dGVzW2ldPXV9ZS5kYXRhLm1vcnBoVGFyZ2V0c1JlbGF0aXZlJiYodC5tb3JwaFRhcmdldHNSZWxhdGl2ZT0hMCk7aT1lLmRhdGEuZ3JvdXBzfHxlLmRhdGEuZHJhd2NhbGxzfHxlLmRhdGEub2Zmc2V0cztpZih2b2lkIDAhPT1pKWZvcihyPTAsbz1pLmxlbmd0aDtyIT09bzsrK3Ipbj1pW3JdLHQuYWRkR3JvdXAobi5zdGFydCxuLmNvdW50LG4ubWF0ZXJpYWxJbmRleCk7cj1lLmRhdGEuYm91bmRpbmdTcGhlcmU7dm9pZCAwIT09ciYmKGk9bmV3IFRlLHZvaWQgMCE9PXIuY2VudGVyJiZpLmZyb21BcnJheShyLmNlbnRlciksdC5ib3VuZGluZ1NwaGVyZT1uZXcgbChpLHIucmFkaXVzKSk7ZS5uYW1lJiYodC5uYW1lPWUubmFtZSk7ZS51c2VyRGF0YSYmKHQudXNlckRhdGE9ZS51c2VyRGF0YSk7cmV0dXJuIHR9fSk7dmFyIFd1PXtJbnQ4QXJyYXk6SW50OEFycmF5LFVpbnQ4QXJyYXk6VWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5P1VpbnQ4Q2xhbXBlZEFycmF5OlVpbnQ4QXJyYXksSW50MTZBcnJheTpJbnQxNkFycmF5LFVpbnQxNkFycmF5OlVpbnQxNkFycmF5LEludDMyQXJyYXk6SW50MzJBcnJheSxVaW50MzJBcnJheTpVaW50MzJBcnJheSxGbG9hdDMyQXJyYXk6RmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheTpGbG9hdDY0QXJyYXl9O0ZpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RmksbG9hZDpmdW5jdGlvbihyLG4sZSxpKXt2YXIgbz10aGlzLHQ9XCJcIj09PXRoaXMucGF0aD9xdS5leHRyYWN0VXJsQmFzZShyKTp0aGlzLnBhdGg7dGhpcy5yZXNvdXJjZVBhdGg9dGhpcy5yZXNvdXJjZVBhdGh8fHQ7dD1uZXcgS24oby5tYW5hZ2VyKTt0LnNldFBhdGgodGhpcy5wYXRoKTt0LmxvYWQocixmdW5jdGlvbihlKXt2YXIgdD1udWxsO3RyeXt0PUpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7dm9pZCAwIT09aSYmaShlKTtjb25zb2xlLmVycm9yKFwiVEhSRUU6T2JqZWN0TG9hZGVyOiBDYW4ndCBwYXJzZSBcIityK1wiLlwiLGUubWVzc2FnZSk7cmV0dXJufWU9dC5tZXRhZGF0YTt2b2lkIDA9PT1lfHx2b2lkIDA9PT1lLnR5cGV8fFwiZ2VvbWV0cnlcIj09PWUudHlwZS50b0xvd2VyQ2FzZSgpP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IENhbid0IGxvYWQgXCIrcik6by5wYXJzZSh0LG4pfSxlLGkpfSxwYXJzZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMucGFyc2VTaGFwZShlLnNoYXBlcyk7cj10aGlzLnBhcnNlR2VvbWV0cmllcyhlLmdlb21ldHJpZXMscik7dmFyIG49dGhpcy5wYXJzZUltYWdlcyhlLmltYWdlcyxmdW5jdGlvbigpe3ZvaWQgMCE9PXQmJnQoaSl9KTtuPXRoaXMucGFyc2VUZXh0dXJlcyhlLnRleHR1cmVzLG4pO249dGhpcy5wYXJzZU1hdGVyaWFscyhlLm1hdGVyaWFscyxuKTt2YXIgaT10aGlzLnBhcnNlT2JqZWN0KGUub2JqZWN0LHIsbik7ZS5hbmltYXRpb25zJiYoaS5hbmltYXRpb25zPXRoaXMucGFyc2VBbmltYXRpb25zKGUuYW5pbWF0aW9ucykpO3ZvaWQgMCE9PWUuaW1hZ2VzJiYwIT09ZS5pbWFnZXMubGVuZ3RofHx2b2lkIDA9PT10fHx0KGkpO3JldHVybiBpfSxwYXJzZVNoYXBlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9O2lmKHZvaWQgMCE9PWUpZm9yKHZhciByPTAsbj1lLmxlbmd0aDtyPG47cisrKXt2YXIgaT0obmV3IGJpKS5mcm9tSlNPTihlW3JdKTt0W2kudXVpZF09aX1yZXR1cm4gdH0scGFyc2VHZW9tZXRyaWVzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9e307aWYodm9pZCAwIT09ZSlmb3IodmFyIG49bmV3IEJpLGk9MCxvPWUubGVuZ3RoO2k8bztpKyspe3ZhciBhPWVbaV07c3dpdGNoKGEudHlwZSl7Y2FzZVwiUGxhbmVHZW9tZXRyeVwiOmNhc2VcIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjp2YXIgcz1uZXcgTnVbYS50eXBlXShhLndpZHRoLGEuaGVpZ2h0LGEud2lkdGhTZWdtZW50cyxhLmhlaWdodFNlZ21lbnRzKTticmVhaztjYXNlXCJCb3hHZW9tZXRyeVwiOmNhc2VcIkJveEJ1ZmZlckdlb21ldHJ5XCI6Y2FzZVwiQ3ViZUdlb21ldHJ5XCI6cz1uZXcgTnVbYS50eXBlXShhLndpZHRoLGEuaGVpZ2h0LGEuZGVwdGgsYS53aWR0aFNlZ21lbnRzLGEuaGVpZ2h0U2VnbWVudHMsYS5kZXB0aFNlZ21lbnRzKTticmVhaztjYXNlXCJDaXJjbGVHZW9tZXRyeVwiOmNhc2VcIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCI6cz1uZXcgTnVbYS50eXBlXShhLnJhZGl1cyxhLnNlZ21lbnRzLGEudGhldGFTdGFydCxhLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlXCJDeWxpbmRlckdlb21ldHJ5XCI6Y2FzZVwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiOnM9bmV3IE51W2EudHlwZV0oYS5yYWRpdXNUb3AsYS5yYWRpdXNCb3R0b20sYS5oZWlnaHQsYS5yYWRpYWxTZWdtZW50cyxhLmhlaWdodFNlZ21lbnRzLGEub3BlbkVuZGVkLGEudGhldGFTdGFydCxhLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlXCJDb25lR2VvbWV0cnlcIjpjYXNlXCJDb25lQnVmZmVyR2VvbWV0cnlcIjpzPW5ldyBOdVthLnR5cGVdKGEucmFkaXVzLGEuaGVpZ2h0LGEucmFkaWFsU2VnbWVudHMsYS5oZWlnaHRTZWdtZW50cyxhLm9wZW5FbmRlZCxhLnRoZXRhU3RhcnQsYS50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZVwiU3BoZXJlR2VvbWV0cnlcIjpjYXNlXCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiOnM9bmV3IE51W2EudHlwZV0oYS5yYWRpdXMsYS53aWR0aFNlZ21lbnRzLGEuaGVpZ2h0U2VnbWVudHMsYS5waGlTdGFydCxhLnBoaUxlbmd0aCxhLnRoZXRhU3RhcnQsYS50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZVwiRG9kZWNhaGVkcm9uR2VvbWV0cnlcIjpjYXNlXCJEb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2VcIkljb3NhaGVkcm9uR2VvbWV0cnlcIjpjYXNlXCJJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZVwiT2N0YWhlZHJvbkdlb21ldHJ5XCI6Y2FzZVwiT2N0YWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZVwiVGV0cmFoZWRyb25HZW9tZXRyeVwiOmNhc2VcIlRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjpzPW5ldyBOdVthLnR5cGVdKGEucmFkaXVzLGEuZGV0YWlsKTticmVhaztjYXNlXCJSaW5nR2VvbWV0cnlcIjpjYXNlXCJSaW5nQnVmZmVyR2VvbWV0cnlcIjpzPW5ldyBOdVthLnR5cGVdKGEuaW5uZXJSYWRpdXMsYS5vdXRlclJhZGl1cyxhLnRoZXRhU2VnbWVudHMsYS5waGlTZWdtZW50cyxhLnRoZXRhU3RhcnQsYS50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZVwiVG9ydXNHZW9tZXRyeVwiOmNhc2VcIlRvcnVzQnVmZmVyR2VvbWV0cnlcIjpzPW5ldyBOdVthLnR5cGVdKGEucmFkaXVzLGEudHViZSxhLnJhZGlhbFNlZ21lbnRzLGEudHVidWxhclNlZ21lbnRzLGEuYXJjKTticmVhaztjYXNlXCJUb3J1c0tub3RHZW9tZXRyeVwiOmNhc2VcIlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5XCI6cz1uZXcgTnVbYS50eXBlXShhLnJhZGl1cyxhLnR1YmUsYS50dWJ1bGFyU2VnbWVudHMsYS5yYWRpYWxTZWdtZW50cyxhLnAsYS5xKTticmVhaztjYXNlXCJUdWJlR2VvbWV0cnlcIjpjYXNlXCJUdWJlQnVmZmVyR2VvbWV0cnlcIjpzPW5ldyBOdVthLnR5cGVdKChuZXcgVXVbYS5wYXRoLnR5cGVdKS5mcm9tSlNPTihhLnBhdGgpLGEudHVidWxhclNlZ21lbnRzLGEucmFkaXVzLGEucmFkaWFsU2VnbWVudHMsYS5jbG9zZWQpO2JyZWFrO2Nhc2VcIkxhdGhlR2VvbWV0cnlcIjpjYXNlXCJMYXRoZUJ1ZmZlckdlb21ldHJ5XCI6cz1uZXcgTnVbYS50eXBlXShhLnBvaW50cyxhLnNlZ21lbnRzLGEucGhpU3RhcnQsYS5waGlMZW5ndGgpO2JyZWFrO2Nhc2VcIlBvbHloZWRyb25HZW9tZXRyeVwiOmNhc2VcIlBvbHloZWRyb25CdWZmZXJHZW9tZXRyeVwiOnM9bmV3IE51W2EudHlwZV0oYS52ZXJ0aWNlcyxhLmluZGljZXMsYS5yYWRpdXMsYS5kZXRhaWxzKTticmVhaztjYXNlXCJTaGFwZUdlb21ldHJ5XCI6Y2FzZVwiU2hhcGVCdWZmZXJHZW9tZXRyeVwiOnM9W107Zm9yKHZhciB1PTAsYz1hLnNoYXBlcy5sZW5ndGg7dTxjO3UrKyl7dmFyIGw9dFthLnNoYXBlc1t1XV07cy5wdXNoKGwpfXM9bmV3IE51W2EudHlwZV0ocyxhLmN1cnZlU2VnbWVudHMpO2JyZWFrO2Nhc2VcIkV4dHJ1ZGVHZW9tZXRyeVwiOmNhc2VcIkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeVwiOnM9W107dT0wO2ZvcihjPWEuc2hhcGVzLmxlbmd0aDt1PGM7dSsrKWw9dFthLnNoYXBlc1t1XV0scy5wdXNoKGwpO3U9YS5vcHRpb25zLmV4dHJ1ZGVQYXRoO3ZvaWQgMCE9PXUmJihhLm9wdGlvbnMuZXh0cnVkZVBhdGg9KG5ldyBVdVt1LnR5cGVdKS5mcm9tSlNPTih1KSk7cz1uZXcgTnVbYS50eXBlXShzLGEub3B0aW9ucyk7YnJlYWs7Y2FzZVwiQnVmZmVyR2VvbWV0cnlcIjpjYXNlXCJJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeVwiOnM9bi5wYXJzZShhKTticmVhaztjYXNlXCJHZW9tZXRyeVwiOmNvbnNvbGUuZXJyb3IoJ1RIUkVFLk9iamVjdExvYWRlcjogTG9hZGluZyBcIkdlb21ldHJ5XCIgaXMgbm90IHN1cHBvcnRlZCBhbnltb3JlLicpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IFVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGUgXCInK2EudHlwZSsnXCInKTtjb250aW51ZX1zLnV1aWQ9YS51dWlkO3ZvaWQgMCE9PWEubmFtZSYmKHMubmFtZT1hLm5hbWUpOyEwPT09cy5pc0J1ZmZlckdlb21ldHJ5JiZ2b2lkIDAhPT1hLnVzZXJEYXRhJiYocy51c2VyRGF0YT1hLnVzZXJEYXRhKTtyW2EudXVpZF09c31yZXR1cm4gcn0scGFyc2VNYXRlcmlhbHM6ZnVuY3Rpb24oZSx0KXt2YXIgcj17fSxuPXt9O2lmKHZvaWQgMCE9PWUpe3ZhciBpPW5ldyBOaTtpLnNldFRleHR1cmVzKHQpO3Q9MDtmb3IodmFyIG89ZS5sZW5ndGg7dDxvO3QrKyl7dmFyIGE9ZVt0XTtpZihcIk11bHRpTWF0ZXJpYWxcIj09PWEudHlwZSl7Zm9yKHZhciBzPVtdLHU9MDt1PGEubWF0ZXJpYWxzLmxlbmd0aDt1Kyspe3ZhciBjPWEubWF0ZXJpYWxzW3VdO3ZvaWQgMD09PXJbYy51dWlkXSYmKHJbYy51dWlkXT1pLnBhcnNlKGMpKTtzLnB1c2gocltjLnV1aWRdKX1uW2EudXVpZF09c31lbHNlIHZvaWQgMD09PXJbYS51dWlkXSYmKHJbYS51dWlkXT1pLnBhcnNlKGEpKSxuW2EudXVpZF09clthLnV1aWRdfX1yZXR1cm4gbn0scGFyc2VBbmltYXRpb25zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl0saT1Vbi5wYXJzZShuKTt2b2lkIDAhPT1uLnV1aWQmJihpLnV1aWQ9bi51dWlkKTt0LnB1c2goaSl9cmV0dXJuIHR9LHBhcnNlSW1hZ2VzOmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcihlKXtuLm1hbmFnZXIuaXRlbVN0YXJ0KGUpO3JldHVybiBvLmxvYWQoZSxmdW5jdGlvbigpe24ubWFuYWdlci5pdGVtRW5kKGUpfSx2b2lkIDAsZnVuY3Rpb24oKXtuLm1hbmFnZXIuaXRlbUVycm9yKGUpO24ubWFuYWdlci5pdGVtRW5kKGUpfSl9dmFyIG49dGhpcyxpPXt9O2lmKHZvaWQgMCE9PWUmJjA8ZS5sZW5ndGgpe3Q9bmV3IFhuKHQpO3ZhciBvPW5ldyBlaSh0KTtvLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO3Q9MDtmb3IodmFyIGE9ZS5sZW5ndGg7dDxhO3QrKyl7dmFyIHM9ZVt0XSx1PXMudXJsO2lmKEFycmF5LmlzQXJyYXkodSkpe2lbcy51dWlkXT1bXTtmb3IodmFyIGM9MCxsPXUubGVuZ3RoO2M8bDtjKyspe3ZhciBoPXVbY107aD0vXihcXC9cXC8pfChbYS16XSs6KFxcL1xcLyk/KS9pLnRlc3QoaCk/aDpuLnJlc291cmNlUGF0aCtoO2lbcy51dWlkXS5wdXNoKHIoaCkpfX1lbHNlIGg9L14oXFwvXFwvKXwoW2Etel0rOihcXC9cXC8pPykvaS50ZXN0KHMudXJsKT9zLnVybDpuLnJlc291cmNlUGF0aCtzLnVybCxpW3MudXVpZF09cihoKX19cmV0dXJuIGl9LHBhcnNlVGV4dHVyZXM6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKGUsdCl7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBlKXJldHVybiBlO2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlci5wYXJzZVRleHR1cmU6IENvbnN0YW50IHNob3VsZCBiZSBpbiBudW1lcmljIGZvcm0uXCIsZSk7cmV0dXJuIHRbZV19dmFyIG49e307aWYodm9pZCAwIT09ZSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspe3ZhciBhPWVbaV07dm9pZCAwPT09YS5pbWFnZSYmY29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IE5vIFwiaW1hZ2VcIiBzcGVjaWZpZWQgZm9yJyxhLnV1aWQpO3ZvaWQgMD09PXRbYS5pbWFnZV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGltYWdlXCIsYS5pbWFnZSk7dmFyIHM9QXJyYXkuaXNBcnJheSh0W2EuaW1hZ2VdKT9uZXcgSyh0W2EuaW1hZ2VdKTpuZXcgcCh0W2EuaW1hZ2VdKTtzLm5lZWRzVXBkYXRlPSEwO3MudXVpZD1hLnV1aWQ7dm9pZCAwIT09YS5uYW1lJiYocy5uYW1lPWEubmFtZSk7dm9pZCAwIT09YS5tYXBwaW5nJiYocy5tYXBwaW5nPXIoYS5tYXBwaW5nLFh1KSk7dm9pZCAwIT09YS5vZmZzZXQmJnMub2Zmc2V0LmZyb21BcnJheShhLm9mZnNldCk7dm9pZCAwIT09YS5yZXBlYXQmJnMucmVwZWF0LmZyb21BcnJheShhLnJlcGVhdCk7dm9pZCAwIT09YS5jZW50ZXImJnMuY2VudGVyLmZyb21BcnJheShhLmNlbnRlcik7dm9pZCAwIT09YS5yb3RhdGlvbiYmKHMucm90YXRpb249YS5yb3RhdGlvbik7dm9pZCAwIT09YS53cmFwJiYocy53cmFwUz1yKGEud3JhcFswXSxZdSkscy53cmFwVD1yKGEud3JhcFsxXSxZdSkpO3ZvaWQgMCE9PWEuZm9ybWF0JiYocy5mb3JtYXQ9YS5mb3JtYXQpO3ZvaWQgMCE9PWEudHlwZSYmKHMudHlwZT1hLnR5cGUpO3ZvaWQgMCE9PWEuZW5jb2RpbmcmJihzLmVuY29kaW5nPWEuZW5jb2RpbmcpO3ZvaWQgMCE9PWEubWluRmlsdGVyJiYocy5taW5GaWx0ZXI9cihhLm1pbkZpbHRlcixLdSkpO3ZvaWQgMCE9PWEubWFnRmlsdGVyJiYocy5tYWdGaWx0ZXI9cihhLm1hZ0ZpbHRlcixLdSkpO3ZvaWQgMCE9PWEuYW5pc290cm9weSYmKHMuYW5pc290cm9weT1hLmFuaXNvdHJvcHkpO3ZvaWQgMCE9PWEuZmxpcFkmJihzLmZsaXBZPWEuZmxpcFkpO3ZvaWQgMCE9PWEucHJlbXVsdGlwbHlBbHBoYSYmKHMucHJlbXVsdGlwbHlBbHBoYT1hLnByZW11bHRpcGx5QWxwaGEpO3ZvaWQgMCE9PWEudW5wYWNrQWxpZ25tZW50JiYocy51bnBhY2tBbGlnbm1lbnQ9YS51bnBhY2tBbGlnbm1lbnQpO25bYS51dWlkXT1zfXJldHVybiBufSxwYXJzZU9iamVjdDpmdW5jdGlvbihlLHQsbyl7ZnVuY3Rpb24gcihlKXt2b2lkIDA9PT10W2VdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBnZW9tZXRyeVwiLGUpO3JldHVybiB0W2VdfWZ1bmN0aW9uIG4oZSl7aWYodm9pZCAwIT09ZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PVtdLHI9MCxuPWUubGVuZ3RoO3I8bjtyKyspe3ZhciBpPWVbcl07dm9pZCAwPT09b1tpXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWxcIixpKTt0LnB1c2gob1tpXSl9cmV0dXJuIHR9dm9pZCAwPT09b1tlXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWxcIixlKTtyZXR1cm4gb1tlXX19c3dpdGNoKGUudHlwZSl7Y2FzZVwiU2NlbmVcIjp2YXIgaT1uZXcgT2U7dm9pZCAwIT09ZS5iYWNrZ3JvdW5kJiZOdW1iZXIuaXNJbnRlZ2VyKGUuYmFja2dyb3VuZCkmJihpLmJhY2tncm91bmQ9bmV3IHYoZS5iYWNrZ3JvdW5kKSk7dm9pZCAwIT09ZS5mb2cmJihcIkZvZ1wiPT09ZS5mb2cudHlwZT9pLmZvZz1uZXcgV3QoZS5mb2cuY29sb3IsZS5mb2cubmVhcixlLmZvZy5mYXIpOlwiRm9nRXhwMlwiPT09ZS5mb2cudHlwZSYmKGkuZm9nPW5ldyBxdChlLmZvZy5jb2xvcixlLmZvZy5kZW5zaXR5KSkpO2JyZWFrO2Nhc2VcIlBlcnNwZWN0aXZlQ2FtZXJhXCI6aT1uZXcgSChlLmZvdixlLmFzcGVjdCxlLm5lYXIsZS5mYXIpO3ZvaWQgMCE9PWUuZm9jdXMmJihpLmZvY3VzPWUuZm9jdXMpO3ZvaWQgMCE9PWUuem9vbSYmKGkuem9vbT1lLnpvb20pO3ZvaWQgMCE9PWUuZmlsbUdhdWdlJiYoaS5maWxtR2F1Z2U9ZS5maWxtR2F1Z2UpO3ZvaWQgMCE9PWUuZmlsbU9mZnNldCYmKGkuZmlsbU9mZnNldD1lLmZpbG1PZmZzZXQpO3ZvaWQgMCE9PWUudmlldyYmKGkudmlldz1PYmplY3QuYXNzaWduKHt9LGUudmlldykpO2JyZWFrO2Nhc2VcIk9ydGhvZ3JhcGhpY0NhbWVyYVwiOmk9bmV3IE9pKGUubGVmdCxlLnJpZ2h0LGUudG9wLGUuYm90dG9tLGUubmVhcixlLmZhcik7dm9pZCAwIT09ZS56b29tJiYoaS56b29tPWUuem9vbSk7dm9pZCAwIT09ZS52aWV3JiYoaS52aWV3PU9iamVjdC5hc3NpZ24oe30sZS52aWV3KSk7YnJlYWs7Y2FzZVwiQW1iaWVudExpZ2h0XCI6aT1uZXcgamkoZS5jb2xvcixlLmludGVuc2l0eSk7YnJlYWs7Y2FzZVwiRGlyZWN0aW9uYWxMaWdodFwiOmk9bmV3IEFpKGUuY29sb3IsZS5pbnRlbnNpdHkpO2JyZWFrO2Nhc2VcIlBvaW50TGlnaHRcIjppPW5ldyBFaShlLmNvbG9yLGUuaW50ZW5zaXR5LGUuZGlzdGFuY2UsZS5kZWNheSk7YnJlYWs7Y2FzZVwiUmVjdEFyZWFMaWdodFwiOmk9bmV3IFJpKGUuY29sb3IsZS5pbnRlbnNpdHksZS53aWR0aCxlLmhlaWdodCk7YnJlYWs7Y2FzZVwiU3BvdExpZ2h0XCI6aT1uZXcgQ2koZS5jb2xvcixlLmludGVuc2l0eSxlLmRpc3RhbmNlLGUuYW5nbGUsZS5wZW51bWJyYSxlLmRlY2F5KTticmVhaztjYXNlXCJIZW1pc3BoZXJlTGlnaHRcIjppPW5ldyB3aShlLmNvbG9yLGUuZ3JvdW5kQ29sb3IsZS5pbnRlbnNpdHkpO2JyZWFrO2Nhc2VcIkxpZ2h0UHJvYmVcIjppPShuZXcgTGkpLmZyb21KU09OKGUpO2JyZWFrO2Nhc2VcIlNraW5uZWRNZXNoXCI6Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyLnBhcnNlT2JqZWN0KCkgZG9lcyBub3Qgc3VwcG9ydCBTa2lubmVkTWVzaCB5ZXQuXCIpO2Nhc2VcIk1lc2hcIjppPXIoZS5nZW9tZXRyeSk7dmFyIGE9bihlLm1hdGVyaWFsKTtpPW5ldyBJKGksYSk7YnJlYWs7Y2FzZVwiSW5zdGFuY2VkTWVzaFwiOmk9cihlLmdlb21ldHJ5KTthPW4oZS5tYXRlcmlhbCk7dmFyIHM9ZS5pbnN0YW5jZU1hdHJpeDtpPW5ldyBucihpLGEsZS5jb3VudCk7aS5pbnN0YW5jZU1hdHJpeD1uZXcgRShuZXcgRmxvYXQzMkFycmF5KHMuYXJyYXkpLDE2KTticmVhaztjYXNlXCJMT0RcIjppPW5ldyBRdDticmVhaztjYXNlXCJMaW5lXCI6aT1uZXcgb3IocihlLmdlb21ldHJ5KSxuKGUubWF0ZXJpYWwpLGUubW9kZSk7YnJlYWs7Y2FzZVwiTGluZUxvb3BcIjppPW5ldyBzcihyKGUuZ2VvbWV0cnkpLG4oZS5tYXRlcmlhbCkpO2JyZWFrO2Nhc2VcIkxpbmVTZWdtZW50c1wiOmk9bmV3IGFyKHIoZS5nZW9tZXRyeSksbihlLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZVwiUG9pbnRDbG91ZFwiOmNhc2VcIlBvaW50c1wiOmk9bmV3IGNyKHIoZS5nZW9tZXRyeSksbihlLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZVwiU3ByaXRlXCI6aT1uZXcgWnQobihlLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZVwiR3JvdXBcIjppPW5ldyAkdDticmVhaztkZWZhdWx0Omk9bmV3IGZ9aS51dWlkPWUudXVpZDt2b2lkIDAhPT1lLm5hbWUmJihpLm5hbWU9ZS5uYW1lKTt2b2lkIDAhPT1lLm1hdHJpeD8oaS5tYXRyaXguZnJvbUFycmF5KGUubWF0cml4KSx2b2lkIDAhPT1lLm1hdHJpeEF1dG9VcGRhdGUmJihpLm1hdHJpeEF1dG9VcGRhdGU9ZS5tYXRyaXhBdXRvVXBkYXRlKSxpLm1hdHJpeEF1dG9VcGRhdGUmJmkubWF0cml4LmRlY29tcG9zZShpLnBvc2l0aW9uLGkucXVhdGVybmlvbixpLnNjYWxlKSk6KHZvaWQgMCE9PWUucG9zaXRpb24mJmkucG9zaXRpb24uZnJvbUFycmF5KGUucG9zaXRpb24pLHZvaWQgMCE9PWUucm90YXRpb24mJmkucm90YXRpb24uZnJvbUFycmF5KGUucm90YXRpb24pLHZvaWQgMCE9PWUucXVhdGVybmlvbiYmaS5xdWF0ZXJuaW9uLmZyb21BcnJheShlLnF1YXRlcm5pb24pLHZvaWQgMCE9PWUuc2NhbGUmJmkuc2NhbGUuZnJvbUFycmF5KGUuc2NhbGUpKTt2b2lkIDAhPT1lLmNhc3RTaGFkb3cmJihpLmNhc3RTaGFkb3c9ZS5jYXN0U2hhZG93KTt2b2lkIDAhPT1lLnJlY2VpdmVTaGFkb3cmJihpLnJlY2VpdmVTaGFkb3c9ZS5yZWNlaXZlU2hhZG93KTtlLnNoYWRvdyYmKHZvaWQgMCE9PWUuc2hhZG93LmJpYXMmJihpLnNoYWRvdy5iaWFzPWUuc2hhZG93LmJpYXMpLHZvaWQgMCE9PWUuc2hhZG93LnJhZGl1cyYmKGkuc2hhZG93LnJhZGl1cz1lLnNoYWRvdy5yYWRpdXMpLHZvaWQgMCE9PWUuc2hhZG93Lm1hcFNpemUmJmkuc2hhZG93Lm1hcFNpemUuZnJvbUFycmF5KGUuc2hhZG93Lm1hcFNpemUpLHZvaWQgMCE9PWUuc2hhZG93LmNhbWVyYSYmKGkuc2hhZG93LmNhbWVyYT10aGlzLnBhcnNlT2JqZWN0KGUuc2hhZG93LmNhbWVyYSkpKTt2b2lkIDAhPT1lLnZpc2libGUmJihpLnZpc2libGU9ZS52aXNpYmxlKTt2b2lkIDAhPT1lLmZydXN0dW1DdWxsZWQmJihpLmZydXN0dW1DdWxsZWQ9ZS5mcnVzdHVtQ3VsbGVkKTt2b2lkIDAhPT1lLnJlbmRlck9yZGVyJiYoaS5yZW5kZXJPcmRlcj1lLnJlbmRlck9yZGVyKTt2b2lkIDAhPT1lLnVzZXJEYXRhJiYoaS51c2VyRGF0YT1lLnVzZXJEYXRhKTt2b2lkIDAhPT1lLmxheWVycyYmKGkubGF5ZXJzLm1hc2s9ZS5sYXllcnMpO2lmKHZvaWQgMCE9PWUuY2hpbGRyZW4pZm9yKHM9ZS5jaGlsZHJlbixhPTA7YTxzLmxlbmd0aDthKyspaS5hZGQodGhpcy5wYXJzZU9iamVjdChzW2FdLHQsbykpO2lmKFwiTE9EXCI9PT1lLnR5cGUpZm9yKHZvaWQgMCE9PWUuYXV0b1VwZGF0ZSYmKGkuYXV0b1VwZGF0ZT1lLmF1dG9VcGRhdGUpLGU9ZS5sZXZlbHMscz0wO3M8ZS5sZW5ndGg7cysrKXthPWVbc107dmFyIHU9aS5nZXRPYmplY3RCeVByb3BlcnR5KFwidXVpZFwiLGEub2JqZWN0KTt2b2lkIDAhPT11JiZpLmFkZExldmVsKHUsYS5kaXN0YW5jZSl9cmV0dXJuIGl9fSk7dmFyIFh1PXtVVk1hcHBpbmc6MzAwLEN1YmVSZWZsZWN0aW9uTWFwcGluZzozMDEsQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOjMwMixFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZzozMDMsRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6MzA0LFNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nOjMwNSxDdWJlVVZSZWZsZWN0aW9uTWFwcGluZzozMDYsQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6MzA3fSxZdT17UmVwZWF0V3JhcHBpbmc6MWUzLENsYW1wVG9FZGdlV3JhcHBpbmc6MTAwMSxNaXJyb3JlZFJlcGVhdFdyYXBwaW5nOjEwMDJ9LEt1PXtOZWFyZXN0RmlsdGVyOjEwMDMsTmVhcmVzdE1pcG1hcE5lYXJlc3RGaWx0ZXI6MTAwNCxOZWFyZXN0TWlwbWFwTGluZWFyRmlsdGVyOjEwMDUsTGluZWFyRmlsdGVyOjEwMDYsTGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlcjoxMDA3LExpbmVhck1pcG1hcExpbmVhckZpbHRlcjoxMDA4fTt6aS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFluLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnppLHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWU7cmV0dXJuIHRoaXN9LGxvYWQ6ZnVuY3Rpb24odCxyLGUsbil7dm9pZCAwPT09dCYmKHQ9XCJcIik7dm9pZCAwIT09dGhpcy5wYXRoJiYodD10aGlzLnBhdGgrdCk7dD10aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh0KTt2YXIgaT10aGlzLG89QnUuZ2V0KHQpO2lmKHZvaWQgMCE9PW8pcmV0dXJuIGkubWFuYWdlci5pdGVtU3RhcnQodCksc2V0VGltZW91dChmdW5jdGlvbigpe3ImJnIobyk7aS5tYW5hZ2VyLml0ZW1FbmQodCl9LDApLG87ZmV0Y2godCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5ibG9iKCl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1pLm9wdGlvbnM/Y3JlYXRlSW1hZ2VCaXRtYXAoZSk6Y3JlYXRlSW1hZ2VCaXRtYXAoZSxpLm9wdGlvbnMpfSkudGhlbihmdW5jdGlvbihlKXtCdS5hZGQodCxlKTtyJiZyKGUpO2kubWFuYWdlci5pdGVtRW5kKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7biYmbihlKTtpLm1hbmFnZXIuaXRlbUVycm9yKHQpO2kubWFuYWdlci5pdGVtRW5kKHQpfSk7aS5tYW5hZ2VyLml0ZW1TdGFydCh0KX19KTtPYmplY3QuYXNzaWduKCRpLnByb3RvdHlwZSx7bW92ZVRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5jdXJyZW50UGF0aD1uZXcgeWk7dGhpcy5zdWJQYXRocy5wdXNoKHRoaXMuY3VycmVudFBhdGgpO3RoaXMuY3VycmVudFBhdGgubW92ZVRvKGUsdCk7cmV0dXJuIHRoaXN9LGxpbmVUbzpmdW5jdGlvbihlLHQpe3RoaXMuY3VycmVudFBhdGgubGluZVRvKGUsdCk7cmV0dXJuIHRoaXN9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5jdXJyZW50UGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKGUsdCxyLG4pO3JldHVybiB0aGlzfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGUsdCxyLG4saSxvKXt0aGlzLmN1cnJlbnRQYXRoLmJlemllckN1cnZlVG8oZSx0LHIsbixpLG8pO3JldHVybiB0aGlzfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKGUpe3RoaXMuY3VycmVudFBhdGguc3BsaW5lVGhydShlKTtyZXR1cm4gdGhpc30sdG9TaGFwZXM6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKGUpe2Zvcih2YXIgdD1bXSxyPTAsbj1lLmxlbmd0aDtyPG47cisrKXt2YXIgaT1lW3JdLG89bmV3IGJpO28uY3VydmVzPWkuY3VydmVzO3QucHVzaChvKX1yZXR1cm4gdH1mdW5jdGlvbiBuKGUsdCl7Zm9yKHZhciByPXQubGVuZ3RoLG49ITEsaT1yLTEsbz0wO288cjtpPW8rKyl7dmFyIGE9dFtpXSxzPXRbb10sdT1zLngtYS54LGM9cy55LWEueTtpZihNYXRoLmFicyhjKT5OdW1iZXIuRVBTSUxPTil7aWYoMD5jJiYoYT10W29dLHU9LXUscz10W2ldLGM9LWMpLCEoZS55PGEueXx8ZS55PnMueSkpaWYoZS55PT09YS55KXtpZihlLng9PT1hLngpcmV0dXJuITB9ZWxzZXtpPWMqKGUueC1hLngpLXUqKGUueS1hLnkpO2lmKDA9PT1pKXJldHVybiEwOzA+aXx8KG49IW4pfX1lbHNlIGlmKGUueT09PWEueSYmKHMueDw9ZS54JiZlLng8PWEueHx8YS54PD1lLngmJmUueDw9cy54KSlyZXR1cm4hMH1yZXR1cm4gbn12YXIgaT1rdS5pc0Nsb2NrV2lzZSxvPXRoaXMuc3ViUGF0aHM7aWYoMD09PW8ubGVuZ3RoKXJldHVybltdO2lmKCEwPT09dClyZXR1cm4gcihvKTt0PVtdO2lmKDE9PT1vLmxlbmd0aCl7dmFyIGE9b1swXTt2YXIgcz1uZXcgYmk7cy5jdXJ2ZXM9YS5jdXJ2ZXM7dC5wdXNoKHMpO3JldHVybiB0fXZhciB1PSFpKG9bMF0uZ2V0UG9pbnRzKCkpO3U9ZT8hdTp1O3M9W107dmFyIGM9W10sbD1bXSxoPTA7Y1toXT12b2lkIDA7bFtoXT1bXTtmb3IodmFyIHA9MCxmPW8ubGVuZ3RoO3A8ZjtwKyspe2E9b1twXTt2YXIgZD1hLmdldFBvaW50cygpO3ZhciB2PWkoZCk7KHY9ZT8hdjp2KT8oIXUmJmNbaF0mJmgrKyxjW2hdPXtzOm5ldyBiaSxwOmR9LGNbaF0ucy5jdXJ2ZXM9YS5jdXJ2ZXMsdSYmaCsrLGxbaF09W10pOmxbaF0ucHVzaCh7aDphLHA6ZFswXX0pfWlmKCFjWzBdKXJldHVybiByKG8pO2lmKDE8Yy5sZW5ndGgpe3A9ITE7ZT1bXTtpPTA7Zm9yKG89Yy5sZW5ndGg7aTxvO2krKylzW2ldPVtdO2k9MDtmb3Iobz1jLmxlbmd0aDtpPG87aSsrKWZvcihhPWxbaV0sdj0wO3Y8YS5sZW5ndGg7disrKXt1PWFbdl07aD0hMDtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKW4odS5wLGNbZF0ucCkmJihpIT09ZCYmZS5wdXNoKHtmcm9tczppLHRvczpkLGhvbGU6dn0pLGg/KGg9ITEsc1tkXS5wdXNoKHUpKTpwPSEwKTtoJiZzW2ldLnB1c2godSl9MDxlLmxlbmd0aCYmKHB8fChsPXMpKX1wPTA7Zm9yKGk9Yy5sZW5ndGg7cDxpO3ArKylmb3Iocz1jW3BdLnMsdC5wdXNoKHMpLGU9bFtwXSxvPTAsYT1lLmxlbmd0aDtvPGE7bysrKXMuaG9sZXMucHVzaChlW29dLmgpO3JldHVybiB0fX0pO09iamVjdC5hc3NpZ24oR2kucHJvdG90eXBlLHtpc0ZvbnQ6ITAsZ2VuZXJhdGVTaGFwZXM6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0xMDApO3ZhciByPVtdLG49dDt0PXRoaXMuZGF0YTt2YXIgaT1BcnJheS5mcm9tP0FycmF5LmZyb20oZSk6U3RyaW5nKGUpLnNwbGl0KFwiXCIpO24vPXQucmVzb2x1dGlvbjt2YXIgbz0odC5ib3VuZGluZ0JveC55TWF4LXQuYm91bmRpbmdCb3gueU1pbit0LnVuZGVybGluZVRoaWNrbmVzcykqbjtlPVtdO2Zvcih2YXIgYT0wLHM9MCx1PTA7dTxpLmxlbmd0aDt1Kyspe3ZhciBjPWlbdV07aWYoXCJcXG5cIj09PWMpYT0wLHMtPW87ZWxzZXt2YXIgbD1jO2M9bjt2YXIgaD1hLHA9cyxmPXQsZD1mLmdseXBoc1tsXXx8Zi5nbHlwaHNbXCI/XCJdO2lmKGQpe2w9bmV3ICRpO2lmKGQubyl7Zj1kLl9jYWNoZWRPdXRsaW5lfHwoZC5fY2FjaGVkT3V0bGluZT1kLm8uc3BsaXQoXCIgXCIpKTtmb3IodmFyIHY9MCxtPWYubGVuZ3RoO3Y8bTspc3dpdGNoKGZbdisrXSl7Y2FzZVwibVwiOnZhciBnPWZbdisrXSpjK2g7dmFyIF89Zlt2KytdKmMrcDtsLm1vdmVUbyhnLF8pO2JyZWFrO2Nhc2VcImxcIjpnPWZbdisrXSpjK2g7Xz1mW3YrK10qYytwO2wubGluZVRvKGcsXyk7YnJlYWs7Y2FzZVwicVwiOnZhciB5PWZbdisrXSpjK2g7dmFyIGI9Zlt2KytdKmMrcDt2YXIgeD1mW3YrK10qYytoO3ZhciB3PWZbdisrXSpjK3A7bC5xdWFkcmF0aWNDdXJ2ZVRvKHgsdyx5LGIpO2JyZWFrO2Nhc2VcImJcIjp5PWZbdisrXSpjK2gsYj1mW3YrK10qYytwLHg9Zlt2KytdKmMraCx3PWZbdisrXSpjK3AsZz1mW3YrK10qYytoLF89Zlt2KytdKmMrcCxsLmJlemllckN1cnZlVG8oeCx3LGcsXyx5LGIpfX1jPXtvZmZzZXRYOmQuaGEqYyxwYXRoOmx9fWVsc2UgY29uc29sZS5lcnJvcignVEhSRUUuRm9udDogY2hhcmFjdGVyIFwiJytsKydcIiBkb2VzIG5vdCBleGlzdHMgaW4gZm9udCBmYW1pbHkgJytmLmZhbWlseU5hbWUrXCIuXCIpLGM9dm9pZCAwO2ErPWMub2Zmc2V0WDtlLnB1c2goYy5wYXRoKX19dD0wO2ZvcihpPWUubGVuZ3RoO3Q8aTt0KyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocixlW3RdLnRvU2hhcGVzKCkpO3JldHVybiByfX0pO1ZpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VmksbG9hZDpmdW5jdGlvbihlLG4sdCxyKXt2YXIgaT10aGlzLG89bmV3IEtuKHRoaXMubWFuYWdlcik7by5zZXRQYXRoKHRoaXMucGF0aCk7by5sb2FkKGUsZnVuY3Rpb24odCl7dHJ5e3ZhciByPUpTT04ucGFyc2UodCl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuRm9udExvYWRlcjogdHlwZWZhY2UuanMgc3VwcG9ydCBpcyBiZWluZyBkZXByZWNhdGVkLiBVc2UgdHlwZWZhY2UuanNvbiBpbnN0ZWFkLlwiKSxyPUpTT04ucGFyc2UodC5zdWJzdHJpbmcoNjUsdC5sZW5ndGgtMikpfXQ9aS5wYXJzZShyKTtuJiZuKHQpfSx0LHIpfSxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEdpKGUpfX0pO3ZhciBadSxKdT17Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZvaWQgMD09PVp1JiYoWnU9bmV3KHdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKTtyZXR1cm4gWnV9LHNldENvbnRleHQ6ZnVuY3Rpb24oZSl7WnU9ZX19O0hpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoWW4ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SGksbG9hZDpmdW5jdGlvbihyLG4sZSxpKXt2YXIgbz10aGlzLHQ9bmV3IEtuKG8ubWFuYWdlcik7dC5zZXRSZXNwb25zZVR5cGUoXCJhcnJheWJ1ZmZlclwiKTt0LnNldFBhdGgoby5wYXRoKTt0LmxvYWQocixmdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS5zbGljZSgwKTtKdS5nZXRDb250ZXh0KCkuZGVjb2RlQXVkaW9EYXRhKHQsZnVuY3Rpb24oZSl7bihlKX0pfWNhdGNoKGUpe2k/aShlKTpjb25zb2xlLmVycm9yKGUpLG8ubWFuYWdlci5pdGVtRXJyb3Iocil9fSxlLGkpfX0pO1VpLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTGkucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VWksaXNIZW1pc3BoZXJlTGlnaHRQcm9iZTohMCxjb3B5OmZ1bmN0aW9uKGUpe0xpLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKGUpe3JldHVybiBMaS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxlKX19KTtxaS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKExpLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnFpLGlzQW1iaWVudExpZ2h0UHJvYmU6ITAsY29weTpmdW5jdGlvbihlKXtMaS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihlKXtyZXR1cm4gTGkucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsZSl9fSk7dmFyIFF1PW5ldyBFZSxlYz1uZXcgRWU7T2JqZWN0LmFzc2lnbihXaS5wcm90b3R5cGUse3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jYWNoZTtpZih0LmZvY3VzIT09ZS5mb2N1c3x8dC5mb3YhPT1lLmZvdnx8dC5hc3BlY3QhPT1lLmFzcGVjdCp0aGlzLmFzcGVjdHx8dC5uZWFyIT09ZS5uZWFyfHx0LmZhciE9PWUuZmFyfHx0Lnpvb20hPT1lLnpvb218fHQuZXllU2VwIT09dGhpcy5leWVTZXApe3QuZm9jdXM9ZS5mb2N1czt0LmZvdj1lLmZvdjt0LmFzcGVjdD1lLmFzcGVjdCp0aGlzLmFzcGVjdDt0Lm5lYXI9ZS5uZWFyO3QuZmFyPWUuZmFyO3Quem9vbT1lLnpvb207dC5leWVTZXA9dGhpcy5leWVTZXA7dmFyIHI9ZS5wcm9qZWN0aW9uTWF0cml4LmNsb25lKCksbj10LmV5ZVNlcC8yLGk9bip0Lm5lYXIvdC5mb2N1cyxvPXQubmVhcipNYXRoLnRhbihWby5ERUcyUkFEKnQuZm92Ki41KS90Lnpvb207ZWMuZWxlbWVudHNbMTJdPS1uO1F1LmVsZW1lbnRzWzEyXT1uO249LW8qdC5hc3BlY3QraTt2YXIgYT1vKnQuYXNwZWN0K2k7ci5lbGVtZW50c1swXT0yKnQubmVhci8oYS1uKTtyLmVsZW1lbnRzWzhdPShhK24pLyhhLW4pO3RoaXMuY2FtZXJhTC5wcm9qZWN0aW9uTWF0cml4LmNvcHkocik7bj0tbyp0LmFzcGVjdC1pO2E9byp0LmFzcGVjdC1pO3IuZWxlbWVudHNbMF09Mip0Lm5lYXIvKGEtbik7ci5lbGVtZW50c1s4XT0oYStuKS8oYS1uKTt0aGlzLmNhbWVyYVIucHJvamVjdGlvbk1hdHJpeC5jb3B5KHIpfXRoaXMuY2FtZXJhTC5tYXRyaXhXb3JsZC5jb3B5KGUubWF0cml4V29ybGQpLm11bHRpcGx5KGVjKTt0aGlzLmNhbWVyYVIubWF0cml4V29ybGQuY29weShlLm1hdHJpeFdvcmxkKS5tdWx0aXBseShRdSl9fSk7T2JqZWN0LmFzc2lnbihYaS5wcm90b3R5cGUse3N0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPShcInVuZGVmaW5lZFwiPT09dHlwZW9mIHBlcmZvcm1hbmNlP0RhdGU6cGVyZm9ybWFuY2UpLm5vdygpO3RoaXMuZWxhcHNlZFRpbWU9MDt0aGlzLnJ1bm5pbmc9ITB9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmdldEVsYXBzZWRUaW1lKCk7dGhpcy5hdXRvU3RhcnQ9dGhpcy5ydW5uaW5nPSExfSxnZXRFbGFwc2VkVGltZTpmdW5jdGlvbigpe3RoaXMuZ2V0RGVsdGEoKTtyZXR1cm4gdGhpcy5lbGFwc2VkVGltZX0sZ2V0RGVsdGE6ZnVuY3Rpb24oKXt2YXIgZT0wO2lmKHRoaXMuYXV0b1N0YXJ0JiYhdGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLnN0YXJ0KCksMDtpZih0aGlzLnJ1bm5pbmcpe3ZhciB0PShcInVuZGVmaW5lZFwiPT09dHlwZW9mIHBlcmZvcm1hbmNlP0RhdGU6cGVyZm9ybWFuY2UpLm5vdygpO2U9KHQtdGhpcy5vbGRUaW1lKS8xZTM7dGhpcy5vbGRUaW1lPXQ7dGhpcy5lbGFwc2VkVGltZSs9ZX1yZXR1cm4gZX19KTt2YXIgdGM9bmV3IFRlLHJjPW5ldyBkLG5jPW5ldyBUZSxpYz1uZXcgVGU7WWkucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOllpLGdldElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbn0scmVtb3ZlRmlsdGVyOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuZmlsdGVyJiYodGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXIpLHRoaXMuZmlsdGVyLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZmlsdGVyPW51bGwpO3JldHVybiB0aGlzfSxnZXRGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJ9LHNldEZpbHRlcjpmdW5jdGlvbihlKXtudWxsIT09dGhpcy5maWx0ZXI/KHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbikpOnRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7dGhpcy5maWx0ZXI9ZTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmZpbHRlcik7dGhpcy5maWx0ZXIuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3JldHVybiB0aGlzfSxnZXRNYXN0ZXJWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWV9LHNldE1hc3RlclZvbHVtZTpmdW5jdGlvbihlKXt0aGlzLmdhaW4uZ2Fpbi5zZXRUYXJnZXRBdFRpbWUoZSx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUsLjAxKTtyZXR1cm4gdGhpc30sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oZSl7Zi5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGUpO2U9dGhpcy5jb250ZXh0Lmxpc3RlbmVyO3ZhciB0PXRoaXMudXA7dGhpcy50aW1lRGVsdGE9dGhpcy5fY2xvY2suZ2V0RGVsdGEoKTt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZSh0YyxyYyxuYyk7aWMuc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKHJjKTtpZihlLnBvc2l0aW9uWCl7dmFyIHI9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lK3RoaXMudGltZURlbHRhO2UucG9zaXRpb25YLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRjLngscik7ZS5wb3NpdGlvblkubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodGMueSxyKTtlLnBvc2l0aW9uWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0Yy56LHIpO2UuZm9yd2FyZFgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoaWMueCxyKTtlLmZvcndhcmRZLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGljLnkscik7ZS5mb3J3YXJkWi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShpYy56LHIpO2UudXBYLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHQueCxyKTtlLnVwWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0Lnkscik7ZS51cFoubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodC56LHIpfWVsc2UgZS5zZXRQb3NpdGlvbih0Yy54LHRjLnksdGMueiksZS5zZXRPcmllbnRhdGlvbihpYy54LGljLnksaWMueix0LngsdC55LHQueil9fSk7S2kucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOktpLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW59LHNldE5vZGVTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITE7dGhpcy5zb3VyY2VUeXBlPVwiYXVkaW9Ob2RlXCI7dGhpcy5zb3VyY2U9ZTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpc30sc2V0TWVkaWFFbGVtZW50U291cmNlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzUGxheWJhY2tDb250cm9sPSExO3RoaXMuc291cmNlVHlwZT1cIm1lZGlhTm9kZVwiO3RoaXMuc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UoZSk7dGhpcy5jb25uZWN0KCk7cmV0dXJuIHRoaXN9LHNldE1lZGlhU3RyZWFtU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzUGxheWJhY2tDb250cm9sPSExO3RoaXMuc291cmNlVHlwZT1cIm1lZGlhU3RyZWFtTm9kZVwiO3RoaXMuc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShlKTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpc30sc2V0QnVmZmVyOmZ1bmN0aW9uKGUpe3RoaXMuYnVmZmVyPWU7dGhpcy5zb3VyY2VUeXBlPVwiYnVmZmVyXCI7dGhpcy5hdXRvcGxheSYmdGhpcy5wbGF5KCk7cmV0dXJuIHRoaXN9LHBsYXk6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9MCk7aWYoITA9PT10aGlzLmlzUGxheWluZyljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogQXVkaW8gaXMgYWxyZWFkeSBwbGF5aW5nLlwiKTtlbHNlIGlmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO2Vsc2UgcmV0dXJuIHRoaXMuX3N0YXJ0ZWRBdD10aGlzLmNvbnRleHQuY3VycmVudFRpbWUrZSxlPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKSxlLmJ1ZmZlcj10aGlzLmJ1ZmZlcixlLmxvb3A9dGhpcy5sb29wLGUubG9vcFN0YXJ0PXRoaXMubG9vcFN0YXJ0LGUubG9vcEVuZD10aGlzLmxvb3BFbmQsZS5vbmVuZGVkPXRoaXMub25FbmRlZC5iaW5kKHRoaXMpLGUuc3RhcnQodGhpcy5fc3RhcnRlZEF0LHRoaXMuX3Byb2dyZXNzK3RoaXMub2Zmc2V0LHRoaXMuZHVyYXRpb24pLHRoaXMuaXNQbGF5aW5nPSEwLHRoaXMuc291cmNlPWUsdGhpcy5zZXREZXR1bmUodGhpcy5kZXR1bmUpLHRoaXMuc2V0UGxheWJhY2tSYXRlKHRoaXMucGxheWJhY2tSYXRlKSx0aGlzLmNvbm5lY3QoKX0scGF1c2U6ZnVuY3Rpb24oKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiEwPT09dGhpcy5pc1BsYXlpbmcmJih0aGlzLl9wcm9ncmVzcys9TWF0aC5tYXgodGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLXRoaXMuX3N0YXJ0ZWRBdCwwKSp0aGlzLnBsYXliYWNrUmF0ZSwhMD09PXRoaXMubG9vcCYmKHRoaXMuX3Byb2dyZXNzJT10aGlzLmR1cmF0aW9ufHx0aGlzLmJ1ZmZlci5kdXJhdGlvbiksdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMuc291cmNlLm9uZW5kZWQ9bnVsbCx0aGlzLmlzUGxheWluZz0hMSksdGhpc30sc3RvcDpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO2Vsc2UgcmV0dXJuIHRoaXMuX3Byb2dyZXNzPTAsdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMuc291cmNlLm9uZW5kZWQ9bnVsbCx0aGlzLmlzUGxheWluZz0hMSx0aGlzfSxjb25uZWN0OmZ1bmN0aW9uKCl7aWYoMDx0aGlzLmZpbHRlcnMubGVuZ3RoKXt0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZmlsdGVyc1swXSk7Zm9yKHZhciBlPTEsdD10aGlzLmZpbHRlcnMubGVuZ3RoO2U8dDtlKyspdGhpcy5maWx0ZXJzW2UtMV0uY29ubmVjdCh0aGlzLmZpbHRlcnNbZV0pO3RoaXMuZmlsdGVyc1t0aGlzLmZpbHRlcnMubGVuZ3RoLTFdLmNvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSl9ZWxzZSB0aGlzLnNvdXJjZS5jb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO3JldHVybiB0aGlzfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7aWYoMDx0aGlzLmZpbHRlcnMubGVuZ3RoKXt0aGlzLnNvdXJjZS5kaXNjb25uZWN0KHRoaXMuZmlsdGVyc1swXSk7Zm9yKHZhciBlPTEsdD10aGlzLmZpbHRlcnMubGVuZ3RoO2U8dDtlKyspdGhpcy5maWx0ZXJzW2UtMV0uZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbZV0pO3RoaXMuZmlsdGVyc1t0aGlzLmZpbHRlcnMubGVuZ3RoLTFdLmRpc2Nvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSl9ZWxzZSB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO3JldHVybiB0aGlzfSxnZXRGaWx0ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyc30sc2V0RmlsdGVyczpmdW5jdGlvbihlKXtlfHwoZT1bXSk7ITA9PT10aGlzLmlzUGxheWluZz8odGhpcy5kaXNjb25uZWN0KCksdGhpcy5maWx0ZXJzPWUsdGhpcy5jb25uZWN0KCkpOnRoaXMuZmlsdGVycz1lO3JldHVybiB0aGlzfSxzZXREZXR1bmU6ZnVuY3Rpb24oZSl7dGhpcy5kZXR1bmU9ZTtpZih2b2lkIDAhPT10aGlzLnNvdXJjZS5kZXR1bmUpcmV0dXJuITA9PT10aGlzLmlzUGxheWluZyYmdGhpcy5zb3VyY2UuZGV0dW5lLnNldFRhcmdldEF0VGltZSh0aGlzLmRldHVuZSx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUsLjAxKSx0aGlzfSxnZXREZXR1bmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZXR1bmV9LGdldEZpbHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEZpbHRlcnMoKVswXX0sc2V0RmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldEZpbHRlcnMoZT9bZV06W10pfSxzZXRQbGF5YmFja1JhdGU6ZnVuY3Rpb24oZSl7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZSByZXR1cm4gdGhpcy5wbGF5YmFja1JhdGU9ZSwhMD09PXRoaXMuaXNQbGF5aW5nJiZ0aGlzLnNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VGFyZ2V0QXRUaW1lKHRoaXMucGxheWJhY2tSYXRlLHRoaXMuY29udGV4dC5jdXJyZW50VGltZSwuMDEpLHRoaXN9LGdldFBsYXliYWNrUmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBsYXliYWNrUmF0ZX0sb25FbmRlZDpmdW5jdGlvbigpe3RoaXMuaXNQbGF5aW5nPSExfSxnZXRMb29wOmZ1bmN0aW9uKCl7cmV0dXJuITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbD8oY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpLCExKTp0aGlzLmxvb3B9LHNldExvb3A6ZnVuY3Rpb24oZSl7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZSByZXR1cm4gdGhpcy5sb29wPWUsITA9PT10aGlzLmlzUGxheWluZyYmKHRoaXMuc291cmNlLmxvb3A9dGhpcy5sb29wKSx0aGlzfSxzZXRMb29wU3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy5sb29wU3RhcnQ9ZTtyZXR1cm4gdGhpc30sc2V0TG9vcEVuZDpmdW5jdGlvbihlKXt0aGlzLmxvb3BFbmQ9ZTtyZXR1cm4gdGhpc30sZ2V0Vm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlfSxzZXRWb2x1bWU6ZnVuY3Rpb24oZSl7dGhpcy5nYWluLmdhaW4uc2V0VGFyZ2V0QXRUaW1lKGUsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLC4wMSk7cmV0dXJuIHRoaXN9fSk7dmFyIG9jPW5ldyBUZSxhYz1uZXcgZCxzYz1uZXcgVGUsdWM9bmV3IFRlO1ppLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoS2kucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6WmksZ2V0T3V0cHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFubmVyfSxnZXRSZWZEaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZX0sc2V0UmVmRGlzdGFuY2U6ZnVuY3Rpb24oZSl7dGhpcy5wYW5uZXIucmVmRGlzdGFuY2U9ZTtyZXR1cm4gdGhpc30sZ2V0Um9sbG9mZkZhY3RvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yfSxzZXRSb2xsb2ZmRmFjdG9yOmZ1bmN0aW9uKGUpe3RoaXMucGFubmVyLnJvbGxvZmZGYWN0b3I9ZTtyZXR1cm4gdGhpc30sZ2V0RGlzdGFuY2VNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsfSxzZXREaXN0YW5jZU1vZGVsOmZ1bmN0aW9uKGUpe3RoaXMucGFubmVyLmRpc3RhbmNlTW9kZWw9ZTtyZXR1cm4gdGhpc30sZ2V0TWF4RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2V9LHNldE1heERpc3RhbmNlOmZ1bmN0aW9uKGUpe3RoaXMucGFubmVyLm1heERpc3RhbmNlPWU7cmV0dXJuIHRoaXN9LHNldERpcmVjdGlvbmFsQ29uZTpmdW5jdGlvbihlLHQscil7dGhpcy5wYW5uZXIuY29uZUlubmVyQW5nbGU9ZTt0aGlzLnBhbm5lci5jb25lT3V0ZXJBbmdsZT10O3RoaXMucGFubmVyLmNvbmVPdXRlckdhaW49cjtyZXR1cm4gdGhpc30sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oZSl7Zi5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGUpO2lmKCEwIT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2x8fCExIT09dGhpcy5pc1BsYXlpbmcpaWYodGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2Uob2MsYWMsc2MpLHVjLnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKGFjKSxlPXRoaXMucGFubmVyLGUucG9zaXRpb25YKXt2YXIgdD10aGlzLmNvbnRleHQuY3VycmVudFRpbWUrdGhpcy5saXN0ZW5lci50aW1lRGVsdGE7ZS5wb3NpdGlvblgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUob2MueCx0KTtlLnBvc2l0aW9uWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShvYy55LHQpO2UucG9zaXRpb25aLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKG9jLnosdCk7ZS5vcmllbnRhdGlvblgubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodWMueCx0KTtlLm9yaWVudGF0aW9uWS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh1Yy55LHQpO2Uub3JpZW50YXRpb25aLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHVjLnosdCl9ZWxzZSBlLnNldFBvc2l0aW9uKG9jLngsb2MueSxvYy56KSxlLnNldE9yaWVudGF0aW9uKHVjLngsdWMueSx1Yy56KX19KTtPYmplY3QuYXNzaWduKEppLnByb3RvdHlwZSx7Z2V0RnJlcXVlbmN5RGF0YTpmdW5jdGlvbigpe3RoaXMuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5kYXRhKTtyZXR1cm4gdGhpcy5kYXRhfSxnZXRBdmVyYWdlRnJlcXVlbmN5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlzLmdldEZyZXF1ZW5jeURhdGEoKSxyPTA7cjx0Lmxlbmd0aDtyKyspZSs9dFtyXTtyZXR1cm4gZS90Lmxlbmd0aH19KTtPYmplY3QuYXNzaWduKFFpLnByb3RvdHlwZSx7YWNjdW11bGF0ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYnVmZmVyLG49dGhpcy52YWx1ZVNpemU7ZT1lKm4rbjt2YXIgaT10aGlzLmN1bXVsYXRpdmVXZWlnaHQ7aWYoMD09PWkpe2ZvcihpPTA7aSE9PW47KytpKXJbZStpXT1yW2ldO2k9dH1lbHNlIGkrPXQsdGhpcy5fbWl4QnVmZmVyUmVnaW9uKHIsZSwwLHQvaSxuKTt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9aX0sYWNjdW11bGF0ZUFkZGl0aXZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmZmVyLHI9dGhpcy52YWx1ZVNpemUsbj1yKnRoaXMuX2FkZEluZGV4OzA9PT10aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZSYmdGhpcy5fc2V0SWRlbnRpdHkoKTt0aGlzLl9taXhCdWZmZXJSZWdpb25BZGRpdGl2ZSh0LG4sMCxlLHIpO3RoaXMuY3VtdWxhdGl2ZVdlaWdodEFkZGl0aXZlKz1lfSxhcHBseTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnZhbHVlU2l6ZSxyPXRoaXMuYnVmZmVyO2U9ZSp0K3Q7dmFyIG49dGhpcy5jdW11bGF0aXZlV2VpZ2h0LGk9dGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmUsbz10aGlzLmJpbmRpbmc7dGhpcy5jdW11bGF0aXZlV2VpZ2h0QWRkaXRpdmU9dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTA7MT5uJiZ0aGlzLl9taXhCdWZmZXJSZWdpb24ocixlLHQqdGhpcy5fb3JpZ0luZGV4LDEtbix0KTswPGkmJnRoaXMuX21peEJ1ZmZlclJlZ2lvbkFkZGl0aXZlKHIsZSx0aGlzLl9hZGRJbmRleCp0LDEsdCk7bj10O2ZvcihpPXQrdDtuIT09aTsrK24paWYocltuXSE9PXJbbit0XSl7by5zZXRWYWx1ZShyLGUpO2JyZWFrfX0sc2F2ZU9yaWdpbmFsU3RhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJ1ZmZlcix0PXRoaXMudmFsdWVTaXplLHI9dCp0aGlzLl9vcmlnSW5kZXg7dGhpcy5iaW5kaW5nLmdldFZhbHVlKGUscik7Zm9yKHZhciBuPXQ7biE9PXI7KytuKWVbbl09ZVtyK24ldF07dGhpcy5fc2V0SWRlbnRpdHkoKTt0aGlzLmN1bXVsYXRpdmVXZWlnaHRBZGRpdGl2ZT10aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MH0scmVzdG9yZU9yaWdpbmFsU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmcuc2V0VmFsdWUodGhpcy5idWZmZXIsMyp0aGlzLnZhbHVlU2l6ZSl9LF9zZXRBZGRpdGl2ZUlkZW50aXR5TnVtZXJpYzpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9hZGRJbmRleCp0aGlzLnZhbHVlU2l6ZSx0PWUrdGhpcy52YWx1ZVNpemU7ZTx0O2UrKyl0aGlzLmJ1ZmZlcltlXT0wfSxfc2V0QWRkaXRpdmVJZGVudGl0eVF1YXRlcm5pb246ZnVuY3Rpb24oKXt0aGlzLl9zZXRBZGRpdGl2ZUlkZW50aXR5TnVtZXJpYygpO3RoaXMuYnVmZmVyWzQqdGhpcy5fYWRkSW5kZXgrM109MX0sX3NldEFkZGl0aXZlSWRlbnRpdHlPdGhlcjpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9vcmlnSW5kZXgqdGhpcy52YWx1ZVNpemUsdD10aGlzLl9hZGRJbmRleCp0aGlzLnZhbHVlU2l6ZSxyPTA7cjx0aGlzLnZhbHVlU2l6ZTtyKyspdGhpcy5idWZmZXJbdCtyXT10aGlzLmJ1ZmZlcltlK3JdfSxfc2VsZWN0OmZ1bmN0aW9uKGUsdCxyLG4saSl7aWYoLjU8PW4pZm9yKG49MDtuIT09aTsrK24pZVt0K25dPWVbcituXX0sX3NsZXJwOmZ1bmN0aW9uKGUsdCxyLG4pe2Quc2xlcnBGbGF0KGUsdCxlLHQsZSxyLG4pfSxfc2xlcnBBZGRpdGl2ZTpmdW5jdGlvbihlLHQscixuLGkpe2kqPXRoaXMuX3dvcmtJbmRleDtkLm11bHRpcGx5UXVhdGVybmlvbnNGbGF0KGUsaSxlLHQsZSxyKTtkLnNsZXJwRmxhdChlLHQsZSx0LGUsaSxuKX0sX2xlcnA6ZnVuY3Rpb24oZSx0LHIsbixpKXtmb3IodmFyIG89MS1uLGE9MDthIT09aTsrK2Epe3ZhciBzPXQrYTtlW3NdPWVbc10qbytlW3IrYV0qbn19LF9sZXJwQWRkaXRpdmU6ZnVuY3Rpb24oZSx0LHIsbixpKXtmb3IodmFyIG89MDtvIT09aTsrK28pe3ZhciBhPXQrbztlW2FdKz1lW3Irb10qbn19fSk7dmFyIGNjPS9bXFxbXFxdXFwuOlxcL10vZyxsYz1cIlteXCIrXCJcXFxcW1xcXFxdXFxcXC46XFxcXC9cIi5yZXBsYWNlKFwiXFxcXC5cIixcIlwiKStcIl1cIixoYz0vKCg/OldDK1tcXC86XSkqKS8uc291cmNlLnJlcGxhY2UoXCJXQ1wiLFwiW15cXFxcW1xcXFxdXFxcXC46XFxcXC9dXCIpLHBjPS8oV0NPRCspPy8uc291cmNlLnJlcGxhY2UoXCJXQ09EXCIsbGMpLGZjPS8oPzpcXC4oV0MrKSg/OlxcWyguKylcXF0pPyk/Ly5zb3VyY2UucmVwbGFjZShcIldDXCIsXCJbXlxcXFxbXFxcXF1cXFxcLjpcXFxcL11cIiksZGM9L1xcLihXQyspKD86XFxbKC4rKVxcXSk/Ly5zb3VyY2UucmVwbGFjZShcIldDXCIsXCJbXlxcXFxbXFxcXF1cXFxcLjpcXFxcL11cIiksdmM9bmV3IFJlZ0V4cChcIl5cIitoYytwYytmYytkYytcIiRcIiksbWM9W1wibWF0ZXJpYWxcIixcIm1hdGVyaWFsc1wiLFwiYm9uZXNcIl07T2JqZWN0LmFzc2lnbihlby5wcm90b3R5cGUse2dldFZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5iaW5kKCk7dmFyIHI9dGhpcy5fYmluZGluZ3NbdGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfXTt2b2lkIDAhPT1yJiZyLmdldFZhbHVlKGUsdCl9LHNldFZhbHVlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuX2JpbmRpbmdzLG49dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGk9ci5sZW5ndGg7biE9PWk7KytuKXJbbl0uc2V0VmFsdWUoZSx0KX0sYmluZDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9iaW5kaW5ncyx0PXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxyPWUubGVuZ3RoO3QhPT1yOysrdCllW3RdLmJpbmQoKX0sdW5iaW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX2JpbmRpbmdzLHQ9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLHI9ZS5sZW5ndGg7dCE9PXI7Kyt0KWVbdF0udW5iaW5kKCl9fSk7T2JqZWN0LmFzc2lnbih0byx7Q29tcG9zaXRlOmVvLGNyZWF0ZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGUmJmUuaXNBbmltYXRpb25PYmplY3RHcm91cD9uZXcgdG8uQ29tcG9zaXRlKGUsdCxyKTpuZXcgdG8oZSx0LHIpfSxzYW5pdGl6ZU5vZGVOYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xccy9nLFwiX1wiKS5yZXBsYWNlKGNjLFwiXCIpfSxwYXJzZVRyYWNrTmFtZTpmdW5jdGlvbihlKXt2YXIgdD12Yy5leGVjKGUpO2lmKCF0KXRocm93IEVycm9yKFwiUHJvcGVydHlCaW5kaW5nOiBDYW5ub3QgcGFyc2UgdHJhY2tOYW1lOiBcIitlKTt0PXtub2RlTmFtZTp0WzJdLG9iamVjdE5hbWU6dFszXSxvYmplY3RJbmRleDp0WzRdLHByb3BlcnR5TmFtZTp0WzVdLHByb3BlcnR5SW5kZXg6dFs2XX07dmFyIHI9dC5ub2RlTmFtZSYmdC5ub2RlTmFtZS5sYXN0SW5kZXhPZihcIi5cIik7aWYodm9pZCAwIT09ciYmLTEhPT1yKXt2YXIgbj10Lm5vZGVOYW1lLnN1YnN0cmluZyhyKzEpOy0xIT09bWMuaW5kZXhPZihuKSYmKHQubm9kZU5hbWU9dC5ub2RlTmFtZS5zdWJzdHJpbmcoMCxyKSx0Lm9iamVjdE5hbWU9bil9aWYobnVsbD09PXQucHJvcGVydHlOYW1lfHwwPT09dC5wcm9wZXJ0eU5hbWUubGVuZ3RoKXRocm93IEVycm9yKFwiUHJvcGVydHlCaW5kaW5nOiBjYW4gbm90IHBhcnNlIHByb3BlcnR5TmFtZSBmcm9tIHRyYWNrTmFtZTogXCIrZSk7cmV0dXJuIHR9LGZpbmROb2RlOmZ1bmN0aW9uKGUsbil7aWYoIW58fFwiXCI9PT1ufHxcIi5cIj09PW58fC0xPT09bnx8bj09PWUubmFtZXx8bj09PWUudXVpZClyZXR1cm4gZTtpZihlLnNrZWxldG9uKXt2YXIgdD1lLnNrZWxldG9uLmdldEJvbmVCeU5hbWUobik7aWYodm9pZCAwIT09dClyZXR1cm4gdH1pZihlLmNoaWxkcmVuKXt2YXIgaT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtpZihyLm5hbWU9PT1ufHxyLnV1aWQ9PT1ufHwocj1pKHIuY2hpbGRyZW4pKSlyZXR1cm4gcn1yZXR1cm4gbnVsbH07aWYoZT1pKGUuY2hpbGRyZW4pKXJldHVybiBlfXJldHVybiBudWxsfX0pO09iamVjdC5hc3NpZ24odG8ucHJvdG90eXBlLHtfZ2V0VmFsdWVfdW5hdmFpbGFibGU6ZnVuY3Rpb24oKXt9LF9zZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sQmluZGluZ1R5cGU6e0RpcmVjdDowLEVudGlyZUFycmF5OjEsQXJyYXlFbGVtZW50OjIsSGFzRnJvbVRvQXJyYXk6M30sVmVyc2lvbmluZzp7Tm9uZTowLE5lZWRzVXBkYXRlOjEsTWF0cml4V29ybGROZWVkc1VwZGF0ZToyfSxHZXR0ZXJCeUJpbmRpbmdUeXBlOltmdW5jdGlvbihlLHQpe2VbdF09dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXX0sZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5yZXNvbHZlZFByb3BlcnR5LG49MCxpPXIubGVuZ3RoO24hPT1pOysrbillW3QrK109cltuXX0sZnVuY3Rpb24oZSx0KXtlW3RdPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdfSxmdW5jdGlvbihlLHQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS50b0FycmF5KGUsdCl9XSxTZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZzpbW2Z1bmN0aW9uKGUsdCl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWVbdF19LGZ1bmN0aW9uKGUsdCl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWVbdF07dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGUsdCl7dGhpcy50YXJnZXRPYmplY3RbdGhpcy5wcm9wZXJ0eU5hbWVdPWVbdF07dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnJlc29sdmVkUHJvcGVydHksbj0wLGk9ci5sZW5ndGg7biE9PWk7KytuKXJbbl09ZVt0KytdfSxmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnJlc29sdmVkUHJvcGVydHksbj0wLGk9ci5sZW5ndGg7biE9PWk7KytuKXJbbl09ZVt0KytdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnJlc29sdmVkUHJvcGVydHksbj0wLGk9ci5sZW5ndGg7biE9PWk7KytuKXJbbl09ZVt0KytdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oZSx0KXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1lW3RdfSxmdW5jdGlvbihlLHQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWVbdF07dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGUsdCl7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09ZVt0XTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKGUsdCl7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShlLHQpfSxmdW5jdGlvbihlLHQpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoZSx0KTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oZSx0KXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KGUsdCk7dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dXSxnZXRWYWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuYmluZCgpO3RoaXMuZ2V0VmFsdWUoZSx0KX0sc2V0VmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmJpbmQoKTt0aGlzLnNldFZhbHVlKGUsdCl9LGJpbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5vZGUsdD10aGlzLnBhcnNlZFBhdGgscj10Lm9iamVjdE5hbWUsbj10LnByb3BlcnR5TmFtZSxpPXQucHJvcGVydHlJbmRleDtlfHwodGhpcy5ub2RlPWU9dG8uZmluZE5vZGUodGhpcy5yb290Tm9kZSx0Lm5vZGVOYW1lKXx8dGhpcy5yb290Tm9kZSk7dGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmF2YWlsYWJsZTt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYXZhaWxhYmxlO2lmKGUpe2lmKHIpe3ZhciBvPXQub2JqZWN0SW5kZXg7c3dpdGNoKHIpe2Nhc2VcIm1hdGVyaWFsc1wiOmlmKCFlLm1hdGVyaWFsKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbWF0ZXJpYWwgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgbWF0ZXJpYWwuXCIsdGhpcyk7cmV0dXJufWlmKCFlLm1hdGVyaWFsLm1hdGVyaWFscyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsLm1hdGVyaWFscyBhcyBub2RlLm1hdGVyaWFsIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbHMgYXJyYXkuXCIsdGhpcyk7cmV0dXJufWU9ZS5tYXRlcmlhbC5tYXRlcmlhbHM7YnJlYWs7Y2FzZVwiYm9uZXNcIjppZighZS5za2VsZXRvbil7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIGJvbmVzIGFzIG5vZGUgZG9lcyBub3QgaGF2ZSBhIHNrZWxldG9uLlwiLHRoaXMpO3JldHVybn1lPWUuc2tlbGV0b24uYm9uZXM7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihlW3JdLm5hbWU9PT1vKXtvPXI7YnJlYWt9YnJlYWs7ZGVmYXVsdDppZih2b2lkIDA9PT1lW3JdKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gb2JqZWN0TmFtZSBvZiBub2RlIHVuZGVmaW5lZC5cIix0aGlzKTtyZXR1cm59ZT1lW3JdfWlmKHZvaWQgMCE9PW8pe2lmKHZvaWQgMD09PWVbb10pe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IFRyeWluZyB0byBiaW5kIHRvIG9iamVjdEluZGV4IG9mIG9iamVjdE5hbWUsIGJ1dCBpcyB1bmRlZmluZWQuXCIsdGhpcyxlKTtyZXR1cm59ZT1lW29dfX1vPWVbbl07aWYodm9pZCAwPT09byljb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gdXBkYXRlIHByb3BlcnR5IGZvciB0cmFjazogXCIrdC5ub2RlTmFtZStcIi5cIituK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIsZSk7ZWxzZXt0PXRoaXMuVmVyc2lvbmluZy5Ob25lO3RoaXMudGFyZ2V0T2JqZWN0PWU7dm9pZCAwIT09ZS5uZWVkc1VwZGF0ZT90PXRoaXMuVmVyc2lvbmluZy5OZWVkc1VwZGF0ZTp2b2lkIDAhPT1lLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUmJih0PXRoaXMuVmVyc2lvbmluZy5NYXRyaXhXb3JsZE5lZWRzVXBkYXRlKTtyPXRoaXMuQmluZGluZ1R5cGUuRGlyZWN0O2lmKHZvaWQgMCE9PWkpe2lmKFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCI9PT1uKXtpZighZS5nZW9tZXRyeSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5LlwiLHRoaXMpO3JldHVybn1pZihlLmdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpe2lmKCFlLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5cIix0aGlzKTtyZXR1cm59dm9pZCAwIT09ZS5tb3JwaFRhcmdldERpY3Rpb25hcnlbaV0mJihpPWUubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2ldKX1lbHNle2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgb24gVEhSRUUuR2VvbWV0cnkuIFVzZSBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiLHRoaXMpO3JldHVybn19cj10aGlzLkJpbmRpbmdUeXBlLkFycmF5RWxlbWVudDt0aGlzLnJlc29sdmVkUHJvcGVydHk9bzt0aGlzLnByb3BlcnR5SW5kZXg9aX1lbHNlIHZvaWQgMCE9PW8uZnJvbUFycmF5JiZ2b2lkIDAhPT1vLnRvQXJyYXk/KHI9dGhpcy5CaW5kaW5nVHlwZS5IYXNGcm9tVG9BcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9byk6QXJyYXkuaXNBcnJheShvKT8ocj10aGlzLkJpbmRpbmdUeXBlLkVudGlyZUFycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1vKTp0aGlzLnByb3BlcnR5TmFtZT1uO3RoaXMuZ2V0VmFsdWU9dGhpcy5HZXR0ZXJCeUJpbmRpbmdUeXBlW3JdO3RoaXMuc2V0VmFsdWU9dGhpcy5TZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZ1tyXVt0XX19ZWxzZSBjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gdXBkYXRlIG5vZGUgZm9yIHRyYWNrOiBcIit0aGlzLnBhdGgrXCIgYnV0IGl0IHdhc24ndCBmb3VuZC5cIil9LHVuYmluZDpmdW5jdGlvbigpe3RoaXMubm9kZT1udWxsO3RoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5ib3VuZDt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYm91bmR9fSk7T2JqZWN0LmFzc2lnbih0by5wcm90b3R5cGUse19nZXRWYWx1ZV91bmJvdW5kOnRvLnByb3RvdHlwZS5nZXRWYWx1ZSxfc2V0VmFsdWVfdW5ib3VuZDp0by5wcm90b3R5cGUuc2V0VmFsdWV9KTtPYmplY3QuYXNzaWduKHJvLnByb3RvdHlwZSx7aXNBbmltYXRpb25PYmplY3RHcm91cDohMCxhZGQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fb2JqZWN0cyx0PWUubGVuZ3RoLHI9dGhpcy5uQ2FjaGVkT2JqZWN0c18sbj10aGlzLl9pbmRpY2VzQnlVVUlELGk9dGhpcy5fcGF0aHMsbz10aGlzLl9wYXJzZWRQYXRocyxhPXRoaXMuX2JpbmRpbmdzLHM9YS5sZW5ndGgsdT12b2lkIDAsYz0wLGw9YXJndW1lbnRzLmxlbmd0aDtjIT09bDsrK2Mpe3ZhciBoPWFyZ3VtZW50c1tjXSxwPWgudXVpZCxmPW5bcF07aWYodm9pZCAwPT09Zil7Zj10Kys7bltwXT1mO2UucHVzaChoKTtwPTA7Zm9yKHZhciBkPXM7cCE9PWQ7KytwKWFbcF0ucHVzaChuZXcgdG8oaCxpW3BdLG9bcF0pKX1lbHNlIGlmKGY8cil7dT1lW2ZdO3ZhciB2PS0tcjtkPWVbdl07bltkLnV1aWRdPWY7ZVtmXT1kO25bcF09djtlW3ZdPWg7cD0wO2ZvcihkPXM7cCE9PWQ7KytwKXt2YXIgbT1hW3BdLGc9bVtmXTttW2ZdPW1bdl07dm9pZCAwPT09ZyYmKGc9bmV3IHRvKGgsaVtwXSxvW3BdKSk7bVt2XT1nfX1lbHNlIGVbZl0hPT11JiZjb25zb2xlLmVycm9yKFwiVEhSRUUuQW5pbWF0aW9uT2JqZWN0R3JvdXA6IERpZmZlcmVudCBvYmplY3RzIHdpdGggdGhlIHNhbWUgVVVJRCBkZXRlY3RlZC4gQ2xlYW4gdGhlIGNhY2hlcyBvciByZWNyZWF0ZSB5b3VyIGluZnJhc3RydWN0dXJlIHdoZW4gcmVsb2FkaW5nIHNjZW5lcy5cIil9dGhpcy5uQ2FjaGVkT2JqZWN0c189cn0scmVtb3ZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX29iamVjdHMsdD10aGlzLm5DYWNoZWRPYmplY3RzXyxyPXRoaXMuX2luZGljZXNCeVVVSUQsbj10aGlzLl9iaW5kaW5ncyxpPW4ubGVuZ3RoLG89MCxhPWFyZ3VtZW50cy5sZW5ndGg7byE9PWE7KytvKXt2YXIgcz1hcmd1bWVudHNbb10sdT1zLnV1aWQsYz1yW3VdO2lmKHZvaWQgMCE9PWMmJmM+PXQpe3ZhciBsPXQrKyxoPWVbbF07cltoLnV1aWRdPWM7ZVtjXT1oO3JbdV09bDtlW2xdPXM7cz0wO2Zvcih1PWk7cyE9PXU7KytzKXtoPW5bc107dmFyIHA9aFtjXTtoW2NdPWhbbF07aFtsXT1wfX19dGhpcy5uQ2FjaGVkT2JqZWN0c189dH0sdW5jYWNoZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9vYmplY3RzLHQ9ZS5sZW5ndGgscj10aGlzLm5DYWNoZWRPYmplY3RzXyxuPXRoaXMuX2luZGljZXNCeVVVSUQsaT10aGlzLl9iaW5kaW5ncyxvPWkubGVuZ3RoLGE9MCxzPWFyZ3VtZW50cy5sZW5ndGg7YSE9PXM7KythKXt2YXIgdT1hcmd1bWVudHNbYV0udXVpZCxjPW5bdV07aWYodm9pZCAwIT09YylpZihkZWxldGUgblt1XSxjPHIpe3U9LS1yO3ZhciBsPWVbdV0saD0tLXQscD1lW2hdO25bbC51dWlkXT1jO2VbY109bDtuW3AudXVpZF09dTtlW3VdPXA7ZS5wb3AoKTtsPTA7Zm9yKHA9bztsIT09cDsrK2wpe3ZhciBmPWlbbF0sZD1mW2hdO2ZbY109Zlt1XTtmW3VdPWQ7Zi5wb3AoKX19ZWxzZSBmb3IoaD0tLXQscD1lW2hdLG5bcC51dWlkXT1jLGVbY109cCxlLnBvcCgpLGw9MCxwPW87bCE9PXA7KytsKWY9aVtsXSxmW2NdPWZbaF0sZi5wb3AoKX10aGlzLm5DYWNoZWRPYmplY3RzXz1yfSxzdWJzY3JpYmVfOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoLG49cltlXSxpPXRoaXMuX2JpbmRpbmdzO2lmKHZvaWQgMCE9PW4pcmV0dXJuIGlbbl07dmFyIG89dGhpcy5fcGF0aHMsYT10aGlzLl9wYXJzZWRQYXRocyxzPXRoaXMuX29iamVjdHMsdT10aGlzLm5DYWNoZWRPYmplY3RzXyxjPUFycmF5KHMubGVuZ3RoKTtuPWkubGVuZ3RoO3JbZV09bjtvLnB1c2goZSk7YS5wdXNoKHQpO2kucHVzaChjKTtyPXU7Zm9yKG49cy5sZW5ndGg7ciE9PW47KytyKWNbcl09bmV3IHRvKHNbcl0sZSx0KTtyZXR1cm4gY30sdW5zdWJzY3JpYmVfOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aCxyPXRbZV07aWYodm9pZCAwIT09cil7dmFyIG49dGhpcy5fcGF0aHMsaT10aGlzLl9wYXJzZWRQYXRocyxvPXRoaXMuX2JpbmRpbmdzLGE9by5sZW5ndGgtMSxzPW9bYV07dFtlW2FdXT1yO29bcl09cztvLnBvcCgpO2lbcl09aVthXTtpLnBvcCgpO25bcl09blthXTtuLnBvcCgpfX19KTtPYmplY3QuYXNzaWduKG5vLnByb3RvdHlwZSx7cGxheTpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9hY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpc30sc3RvcDpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9kZWFjdGl2YXRlQWN0aW9uKHRoaXMpO3JldHVybiB0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5wYXVzZWQ9ITE7dGhpcy5lbmFibGVkPSEwO3RoaXMudGltZT0wO3RoaXMuX2xvb3BDb3VudD0tMTt0aGlzLl9zdGFydFRpbWU9bnVsbDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKX0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmIXRoaXMucGF1c2VkJiYwIT09dGhpcy50aW1lU2NhbGUmJm51bGw9PT10aGlzLl9zdGFydFRpbWUmJnRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX0saXNTY2hlZHVsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfSxzdGFydEF0OmZ1bmN0aW9uKGUpe3RoaXMuX3N0YXJ0VGltZT1lO3JldHVybiB0aGlzfSxzZXRMb29wOmZ1bmN0aW9uKGUsdCl7dGhpcy5sb29wPWU7dGhpcy5yZXBldGl0aW9ucz10O3JldHVybiB0aGlzfSxzZXRFZmZlY3RpdmVXZWlnaHQ6ZnVuY3Rpb24oZSl7dGhpcy53ZWlnaHQ9ZTt0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9dGhpcy5lbmFibGVkP2U6MDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCl9LGdldEVmZmVjdGl2ZVdlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHR9LGZhZGVJbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVGYWRpbmcoZSwwLDEpfSxmYWRlT3V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhlLDEsMCl9LGNyb3NzRmFkZUZyb206ZnVuY3Rpb24oZSx0LHIpe2UuZmFkZU91dCh0KTt0aGlzLmZhZGVJbih0KTtpZihyKXtyPXRoaXMuX2NsaXAuZHVyYXRpb247dmFyIG49ZS5fY2xpcC5kdXJhdGlvbixpPXIvbjtlLndhcnAoMSxuL3IsdCk7dGhpcy53YXJwKGksMSx0KX1yZXR1cm4gdGhpc30sY3Jvc3NGYWRlVG86ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLmNyb3NzRmFkZUZyb20odGhpcyx0LHIpfSxzdG9wRmFkaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7bnVsbCE9PWUmJih0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1udWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudChlKSk7cmV0dXJuIHRoaXN9LHNldEVmZmVjdGl2ZVRpbWVTY2FsZTpmdW5jdGlvbihlKXt0aGlzLnRpbWVTY2FsZT1lO3RoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnBhdXNlZD8wOmU7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0sZ2V0RWZmZWN0aXZlVGltZVNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZX0sc2V0RHVyYXRpb246ZnVuY3Rpb24oZSl7dGhpcy50aW1lU2NhbGU9dGhpcy5fY2xpcC5kdXJhdGlvbi9lO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCl9LHN5bmNXaXRoOmZ1bmN0aW9uKGUpe3RoaXMudGltZT1lLnRpbWU7dGhpcy50aW1lU2NhbGU9ZS50aW1lU2NhbGU7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0saGFsdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy53YXJwKHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZSwwLGUpfSx3YXJwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLl9taXhlcixpPW4udGltZSxvPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50LGE9dGhpcy50aW1lU2NhbGU7bnVsbD09PW8mJih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1vPW4uX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSk7bj1vLnBhcmFtZXRlclBvc2l0aW9ucztvPW8uc2FtcGxlVmFsdWVzO25bMF09aTtuWzFdPWkrcjtvWzBdPWUvYTtvWzFdPXQvYTtyZXR1cm4gdGhpc30sc3RvcFdhcnBpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtudWxsIT09ZSYmKHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PW51bGwsdGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KGUpKTtyZXR1cm4gdGhpc30sZ2V0TWl4ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXJ9LGdldENsaXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xpcH0sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFJvb3R8fHRoaXMuX21peGVyLl9yb290fSxfdXBkYXRlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKHRoaXMuZW5hYmxlZCl7dmFyIGk9dGhpcy5fc3RhcnRUaW1lO2lmKG51bGwhPT1pKXt0PShlLWkpKnI7aWYoMD50fHwwPT09cilyZXR1cm47dGhpcy5fc3RhcnRUaW1lPW51bGw7dCo9cn10Kj10aGlzLl91cGRhdGVUaW1lU2NhbGUoZSk7cj10aGlzLl91cGRhdGVUaW1lKHQpO2U9dGhpcy5fdXBkYXRlV2VpZ2h0KGUpO2lmKDA8ZSlzd2l0Y2godD10aGlzLl9pbnRlcnBvbGFudHMsaT10aGlzLl9wcm9wZXJ0eUJpbmRpbmdzLHRoaXMuYmxlbmRNb2RlKXtjYXNlIDI1MDE6Zm9yKHZhciBvPTAsYT10Lmxlbmd0aDtvIT09YTsrK28pdFtvXS5ldmFsdWF0ZShyKSxpW29dLmFjY3VtdWxhdGVBZGRpdGl2ZShlKTticmVhaztkZWZhdWx0OmZvcihvPTAsYT10Lmxlbmd0aDtvIT09YTsrK28pdFtvXS5ldmFsdWF0ZShyKSxpW29dLmFjY3VtdWxhdGUobixlKX19ZWxzZSB0aGlzLl91cGRhdGVXZWlnaHQoZSl9LF91cGRhdGVXZWlnaHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9MDtpZih0aGlzLmVuYWJsZWQpe3Q9dGhpcy53ZWlnaHQ7dmFyIHI9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7aWYobnVsbCE9PXIpe3ZhciBuPXIuZXZhbHVhdGUoZSlbMF07dCo9bjtlPnIucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wRmFkaW5nKCksMD09PW4mJih0aGlzLmVuYWJsZWQ9ITEpKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodD10fSxfdXBkYXRlVGltZVNjYWxlOmZ1bmN0aW9uKGUpe3ZhciB0PTA7aWYoIXRoaXMucGF1c2VkKXt0PXRoaXMudGltZVNjYWxlO3ZhciByPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O2lmKG51bGwhPT1yKXt2YXIgbj1yLmV2YWx1YXRlKGUpWzBdO3QqPW47ZT5yLnBhcmFtZXRlclBvc2l0aW9uc1sxXSYmKHRoaXMuc3RvcFdhcnBpbmcoKSwwPT09dD90aGlzLnBhdXNlZD0hMDp0aGlzLnRpbWVTY2FsZT10KX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10fSxfdXBkYXRlVGltZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRpbWUrZSxyPXRoaXMuX2NsaXAuZHVyYXRpb24sbj10aGlzLmxvb3AsaT10aGlzLl9sb29wQ291bnQsbz0yMjAyPT09bjtpZigwPT09ZSlyZXR1cm4tMT09PWk/dDpvJiYxPT09KGkmMSk/ci10OnQ7aWYoMjIwMD09PW4pZTp7aWYoLTE9PT1pJiYodGhpcy5fbG9vcENvdW50PTAsdGhpcy5fc2V0RW5kaW5ncyghMCwhMCwhMSkpLHQ+PXIpdD1yO2Vsc2UgaWYoMD50KXQ9MDtlbHNle3RoaXMudGltZT10O2JyZWFrIGV9dGhpcy5jbGFtcFdoZW5GaW5pc2hlZD90aGlzLnBhdXNlZD0hMDp0aGlzLmVuYWJsZWQ9ITE7dGhpcy50aW1lPXQ7dGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpbmlzaGVkXCIsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOjA+ZT8tMToxfSl9ZWxzZXstMT09PWkmJigwPD1lPyhpPTAsdGhpcy5fc2V0RW5kaW5ncyghMCwwPT09dGhpcy5yZXBldGl0aW9ucyxvKSk6dGhpcy5fc2V0RW5kaW5ncygwPT09dGhpcy5yZXBldGl0aW9ucywhMCxvKSk7aWYodD49cnx8MD50KXtuPU1hdGguZmxvb3IodC9yKTt0LT1yKm47aSs9TWF0aC5hYnMobik7dmFyIGE9dGhpcy5yZXBldGl0aW9ucy1pOzA+PWE/KHRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLHRoaXMudGltZT10PTA8ZT9yOjAsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpbmlzaGVkXCIsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOjA8ZT8xOi0xfSkpOigxPT09YT8oZT0wPmUsdGhpcy5fc2V0RW5kaW5ncyhlLCFlLG8pKTp0aGlzLl9zZXRFbmRpbmdzKCExLCExLG8pLHRoaXMuX2xvb3BDb3VudD1pLHRoaXMudGltZT10LHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJsb29wXCIsYWN0aW9uOnRoaXMsbG9vcERlbHRhOm59KSl9ZWxzZSB0aGlzLnRpbWU9dDtpZihvJiYxPT09KGkmMSkpcmV0dXJuIHItdH1yZXR1cm4gdH0sX3NldEVuZGluZ3M6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M7cj8obi5lbmRpbmdTdGFydD0yNDAxLG4uZW5kaW5nRW5kPTI0MDEpOihuLmVuZGluZ1N0YXJ0PWU/dGhpcy56ZXJvU2xvcGVBdFN0YXJ0PzI0MDE6MjQwMDoyNDAyLG4uZW5kaW5nRW5kPXQ/dGhpcy56ZXJvU2xvcGVBdEVuZD8yNDAxOjI0MDA6MjQwMil9LF9zY2hlZHVsZUZhZGluZzpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fbWl4ZXIsaT1uLnRpbWUsbz10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtudWxsPT09byYmKHRoaXMuX3dlaWdodEludGVycG9sYW50PW89bi5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpKTtuPW8ucGFyYW1ldGVyUG9zaXRpb25zO289by5zYW1wbGVWYWx1ZXM7blswXT1pO29bMF09dDtuWzFdPWkrZTtvWzFdPXI7cmV0dXJuIHRoaXN9fSk7aW8ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmlvLF9iaW5kQWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5fbG9jYWxSb290fHx0aGlzLl9yb290LG49ZS5fY2xpcC50cmFja3MsaT1uLmxlbmd0aCxvPWUuX3Byb3BlcnR5QmluZGluZ3M7ZT1lLl9pbnRlcnBvbGFudHM7dmFyIGE9ci51dWlkLHM9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLHU9c1thXTt2b2lkIDA9PT11JiYodT17fSxzW2FdPXUpO2ZvcihzPTA7cyE9PWk7KytzKXt2YXIgYz1uW3NdLGw9Yy5uYW1lLGg9dVtsXTtpZih2b2lkIDA9PT1oKXtoPW9bc107aWYodm9pZCAwIT09aCl7bnVsbD09PWguX2NhY2hlSW5kZXgmJigrK2gucmVmZXJlbmNlQ291bnQsdGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKGgsYSxsKSk7Y29udGludWV9aD1uZXcgUWkodG8uY3JlYXRlKHIsbCx0JiZ0Ll9wcm9wZXJ0eUJpbmRpbmdzW3NdLmJpbmRpbmcucGFyc2VkUGF0aCksYy5WYWx1ZVR5cGVOYW1lLGMuZ2V0VmFsdWVTaXplKCkpOysraC5yZWZlcmVuY2VDb3VudDt0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcoaCxhLGwpfW9bc109aDtlW3NdLnJlc3VsdEJ1ZmZlcj1oLmJ1ZmZlcn19LF9hY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihlKXtpZighdGhpcy5faXNBY3RpdmVBY3Rpb24oZSkpe2lmKG51bGw9PT1lLl9jYWNoZUluZGV4KXt2YXIgdD0oZS5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkLHI9ZS5fY2xpcC51dWlkLG49dGhpcy5fYWN0aW9uc0J5Q2xpcFtyXTt0aGlzLl9iaW5kQWN0aW9uKGUsbiYmbi5rbm93bkFjdGlvbnNbMF0pO3RoaXMuX2FkZEluYWN0aXZlQWN0aW9uKGUscix0KX10PWUuX3Byb3BlcnR5QmluZGluZ3M7cj0wO2ZvcihuPXQubGVuZ3RoO3IhPT1uOysrcil7dmFyIGk9dFtyXTswPT09aS51c2VDb3VudCsrJiYodGhpcy5fbGVuZEJpbmRpbmcoaSksaS5zYXZlT3JpZ2luYWxTdGF0ZSgpKX10aGlzLl9sZW5kQWN0aW9uKGUpfX0sX2RlYWN0aXZhdGVBY3Rpb246ZnVuY3Rpb24oZSl7aWYodGhpcy5faXNBY3RpdmVBY3Rpb24oZSkpe2Zvcih2YXIgdD1lLl9wcm9wZXJ0eUJpbmRpbmdzLHI9MCxuPXQubGVuZ3RoO3IhPT1uOysrcil7dmFyIGk9dFtyXTswPT09LS1pLnVzZUNvdW50JiYoaS5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3Rha2VCYWNrQmluZGluZyhpKSl9dGhpcy5fdGFrZUJhY2tBY3Rpb24oZSl9fSxfaW5pdE1lbW9yeU1hbmFnZXI6ZnVuY3Rpb24oKXt0aGlzLl9hY3Rpb25zPVtdO3RoaXMuX25BY3RpdmVBY3Rpb25zPTA7dGhpcy5fYWN0aW9uc0J5Q2xpcD17fTt0aGlzLl9iaW5kaW5ncz1bXTt0aGlzLl9uQWN0aXZlQmluZGluZ3M9MDt0aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWU9e307dGhpcy5fY29udHJvbEludGVycG9sYW50cz1bXTt0aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cz0wO3ZhciBlPXRoaXM7dGhpcy5zdGF0cz17YWN0aW9uczp7Z2V0IHRvdGFsKCl7cmV0dXJuIGUuX2FjdGlvbnMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gZS5fbkFjdGl2ZUFjdGlvbnN9fSxiaW5kaW5nczp7Z2V0IHRvdGFsKCl7cmV0dXJuIGUuX2JpbmRpbmdzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGUuX25BY3RpdmVCaW5kaW5nc319LGNvbnRyb2xJbnRlcnBvbGFudHM6e2dldCB0b3RhbCgpe3JldHVybiBlLl9jb250cm9sSW50ZXJwb2xhbnRzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGUuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzfX19fSxfaXNBY3RpdmVBY3Rpb246ZnVuY3Rpb24oZSl7ZT1lLl9jYWNoZUluZGV4O3JldHVybiBudWxsIT09ZSYmZTx0aGlzLl9uQWN0aXZlQWN0aW9uc30sX2FkZEluYWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLl9hY3Rpb25zLGk9dGhpcy5fYWN0aW9uc0J5Q2xpcCxvPWlbdF07dm9pZCAwPT09bz8obz17a25vd25BY3Rpb25zOltlXSxhY3Rpb25CeVJvb3Q6e319LGUuX2J5Q2xpcENhY2hlSW5kZXg9MCxpW3RdPW8pOih0PW8ua25vd25BY3Rpb25zLGUuX2J5Q2xpcENhY2hlSW5kZXg9dC5sZW5ndGgsdC5wdXNoKGUpKTtlLl9jYWNoZUluZGV4PW4ubGVuZ3RoO24ucHVzaChlKTtvLmFjdGlvbkJ5Um9vdFtyXT1lfSxfcmVtb3ZlSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aW9ucyxyPXRbdC5sZW5ndGgtMV0sbj1lLl9jYWNoZUluZGV4O3IuX2NhY2hlSW5kZXg9bjt0W25dPXI7dC5wb3AoKTtlLl9jYWNoZUluZGV4PW51bGw7dD1lLl9jbGlwLnV1aWQ7cj10aGlzLl9hY3Rpb25zQnlDbGlwO249clt0XTt2YXIgaT1uLmtub3duQWN0aW9ucyxvPWlbaS5sZW5ndGgtMV0sYT1lLl9ieUNsaXBDYWNoZUluZGV4O28uX2J5Q2xpcENhY2hlSW5kZXg9YTtpW2FdPW87aS5wb3AoKTtlLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7ZGVsZXRlIG4uYWN0aW9uQnlSb290WyhlLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWRdOzA9PT1pLmxlbmd0aCYmZGVsZXRlIHJbdF07dGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbihlKX0sX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb246ZnVuY3Rpb24oZSl7ZT1lLl9wcm9wZXJ0eUJpbmRpbmdzO2Zvcih2YXIgdD0wLHI9ZS5sZW5ndGg7dCE9PXI7Kyt0KXt2YXIgbj1lW3RdOzA9PT0tLW4ucmVmZXJlbmNlQ291bnQmJnRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhuKX19LF9sZW5kQWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGlvbnMscj1lLl9jYWNoZUluZGV4LG49dGhpcy5fbkFjdGl2ZUFjdGlvbnMrKyxpPXRbbl07ZS5fY2FjaGVJbmRleD1uO3Rbbl09ZTtpLl9jYWNoZUluZGV4PXI7dFtyXT1pfSxfdGFrZUJhY2tBY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aW9ucyxyPWUuX2NhY2hlSW5kZXgsbj0tLXRoaXMuX25BY3RpdmVBY3Rpb25zLGk9dFtuXTtlLl9jYWNoZUluZGV4PW47dFtuXT1lO2kuX2NhY2hlSW5kZXg9cjt0W3JdPWl9LF9hZGRJbmFjdGl2ZUJpbmRpbmc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxpPW5bdF0sbz10aGlzLl9iaW5kaW5nczt2b2lkIDA9PT1pJiYoaT17fSxuW3RdPWkpO2lbcl09ZTtlLl9jYWNoZUluZGV4PW8ubGVuZ3RoO28ucHVzaChlKX0sX3JlbW92ZUluYWN0aXZlQmluZGluZzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9iaW5kaW5ncyxyPWUuYmluZGluZyxuPXIucm9vdE5vZGUudXVpZDtyPXIucGF0aDt2YXIgaT10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsbz1pW25dLGE9dFt0Lmxlbmd0aC0xXTtlPWUuX2NhY2hlSW5kZXg7YS5fY2FjaGVJbmRleD1lO3RbZV09YTt0LnBvcCgpO2RlbGV0ZSBvW3JdOzA9PT1PYmplY3Qua2V5cyhvKS5sZW5ndGgmJmRlbGV0ZSBpW25dfSxfbGVuZEJpbmRpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYmluZGluZ3Mscj1lLl9jYWNoZUluZGV4LG49dGhpcy5fbkFjdGl2ZUJpbmRpbmdzKyssaT10W25dO2UuX2NhY2hlSW5kZXg9bjt0W25dPWU7aS5fY2FjaGVJbmRleD1yO3Rbcl09aX0sX3Rha2VCYWNrQmluZGluZzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9iaW5kaW5ncyxyPWUuX2NhY2hlSW5kZXgsbj0tLXRoaXMuX25BY3RpdmVCaW5kaW5ncyxpPXRbbl07ZS5fY2FjaGVJbmRleD1uO3Rbbl09ZTtpLl9jYWNoZUluZGV4PXI7dFtyXT1pfSxfbGVuZENvbnRyb2xJbnRlcnBvbGFudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsdD10aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cysrLHI9ZVt0XTt2b2lkIDA9PT1yJiYocj1uZXcgTm4obmV3IEZsb2F0MzJBcnJheSgyKSxuZXcgRmxvYXQzMkFycmF5KDIpLDEsdGhpcy5fY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlciksci5fX2NhY2hlSW5kZXg9dCxlW3RdPXIpO3JldHVybiByfSxfdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29udHJvbEludGVycG9sYW50cyxyPWUuX19jYWNoZUluZGV4LG49LS10aGlzLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50cyxpPXRbbl07ZS5fX2NhY2hlSW5kZXg9bjt0W25dPWU7aS5fX2NhY2hlSW5kZXg9cjt0W3JdPWl9LF9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyOm5ldyBGbG9hdDMyQXJyYXkoMSksY2xpcEFjdGlvbjpmdW5jdGlvbihlLHQscil7dmFyIG49dHx8dGhpcy5fcm9vdCxpPW4udXVpZDtuPVwic3RyaW5nXCI9PT10eXBlb2YgZT9Vbi5maW5kQnlOYW1lKG4sZSk6ZTtlPW51bGwhPT1uP24udXVpZDplO3ZhciBvPXRoaXMuX2FjdGlvbnNCeUNsaXBbZV0sYT1udWxsO3ZvaWQgMD09PXImJihyPW51bGwhPT1uP24uYmxlbmRNb2RlOjI1MDApO2lmKHZvaWQgMCE9PW8pe2E9by5hY3Rpb25CeVJvb3RbaV07aWYodm9pZCAwIT09YSYmYS5ibGVuZE1vZGU9PT1yKXJldHVybiBhO2E9by5rbm93bkFjdGlvbnNbMF07bnVsbD09PW4mJihuPWEuX2NsaXApfWlmKG51bGw9PT1uKXJldHVybiBudWxsO3Q9bmV3IG5vKHRoaXMsbix0LHIpO3RoaXMuX2JpbmRBY3Rpb24odCxhKTt0aGlzLl9hZGRJbmFjdGl2ZUFjdGlvbih0LGUsaSk7cmV0dXJuIHR9LGV4aXN0aW5nQWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dHx8dGhpcy5fcm9vdDt0PXIudXVpZDtyPVwic3RyaW5nXCI9PT10eXBlb2YgZT9Vbi5maW5kQnlOYW1lKHIsZSk6ZTtlPXRoaXMuX2FjdGlvbnNCeUNsaXBbcj9yLnV1aWQ6ZV07cmV0dXJuIHZvaWQgMCE9PWU/ZS5hY3Rpb25CeVJvb3RbdF18fG51bGw6bnVsbH0sc3RvcEFsbEFjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9hY3Rpb25zLHQ9dGhpcy5fbkFjdGl2ZUFjdGlvbnMtMTswPD10Oy0tdCllW3RdLnN0b3AoKTtyZXR1cm4gdGhpc30sdXBkYXRlOmZ1bmN0aW9uKGUpe2UqPXRoaXMudGltZVNjYWxlO2Zvcih2YXIgdD10aGlzLl9hY3Rpb25zLHI9dGhpcy5fbkFjdGl2ZUFjdGlvbnMsbj10aGlzLnRpbWUrPWUsaT1NYXRoLnNpZ24oZSksbz10aGlzLl9hY2N1SW5kZXhePTEsYT0wO2EhPT1yOysrYSl0W2FdLl91cGRhdGUobixlLGksbyk7ZT10aGlzLl9iaW5kaW5nczt0PXRoaXMuX25BY3RpdmVCaW5kaW5ncztmb3IoYT0wO2EhPT10OysrYSllW2FdLmFwcGx5KG8pO3JldHVybiB0aGlzfSxzZXRUaW1lOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRpbWU9MDt0PHRoaXMuX2FjdGlvbnMubGVuZ3RoO3QrKyl0aGlzLl9hY3Rpb25zW3RdLnRpbWU9MDtyZXR1cm4gdGhpcy51cGRhdGUoZSl9LGdldFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9vdH0sdW5jYWNoZUNsaXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aW9ucztlPWUudXVpZDt2YXIgcj10aGlzLl9hY3Rpb25zQnlDbGlwLG49cltlXTtpZih2b2lkIDAhPT1uKXtuPW4ua25vd25BY3Rpb25zO2Zvcih2YXIgaT0wLG89bi5sZW5ndGg7aSE9PW87KytpKXt2YXIgYT1uW2ldO3RoaXMuX2RlYWN0aXZhdGVBY3Rpb24oYSk7dmFyIHM9YS5fY2FjaGVJbmRleCx1PXRbdC5sZW5ndGgtMV07YS5fY2FjaGVJbmRleD1udWxsO2EuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbDt1Ll9jYWNoZUluZGV4PXM7dFtzXT11O3QucG9wKCk7dGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbihhKX1kZWxldGUgcltlXX19LHVuY2FjaGVSb290OmZ1bmN0aW9uKGUpe2U9ZS51dWlkO3ZhciB0PXRoaXMuX2FjdGlvbnNCeUNsaXA7Zm9yKG4gaW4gdCl7dmFyIHI9dFtuXS5hY3Rpb25CeVJvb3RbZV07dm9pZCAwIT09ciYmKHRoaXMuX2RlYWN0aXZhdGVBY3Rpb24ociksdGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24ocikpfXZhciBuPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZVtlXTtpZih2b2lkIDAhPT1uKWZvcih2YXIgaSBpbiBuKWU9bltpXSxlLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCksdGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nKGUpfSx1bmNhY2hlQWN0aW9uOmZ1bmN0aW9uKGUsdCl7ZT10aGlzLmV4aXN0aW5nQWN0aW9uKGUsdCk7bnVsbCE9PWUmJih0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGUpLHRoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKGUpKX19KTtvby5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG9vKHZvaWQgMD09PXRoaXMudmFsdWUuY2xvbmU/dGhpcy52YWx1ZTp0aGlzLnZhbHVlLmNsb25lKCkpfTthby5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFh0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmFvLGlzSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI6ITAsY29weTpmdW5jdGlvbihlKXtYdC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSk7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWUubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKHNvLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGUsdCl7dGhpcy5yYXkuc2V0KGUsdCl9LHNldEZyb21DYW1lcmE6ZnVuY3Rpb24oZSx0KXt0JiZ0LmlzUGVyc3BlY3RpdmVDYW1lcmE/KHRoaXMucmF5Lm9yaWdpbi5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCksdGhpcy5yYXkuZGlyZWN0aW9uLnNldChlLngsZS55LC41KS51bnByb2plY3QodCkuc3ViKHRoaXMucmF5Lm9yaWdpbikubm9ybWFsaXplKCksdGhpcy5jYW1lcmE9dCk6dCYmdC5pc09ydGhvZ3JhcGhpY0NhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldChlLngsZS55LCh0Lm5lYXIrdC5mYXIpLyh0Lm5lYXItdC5mYXIpKS51bnByb2plY3QodCksdGhpcy5yYXkuZGlyZWN0aW9uLnNldCgwLDAsLTEpLnRyYW5zZm9ybURpcmVjdGlvbih0Lm1hdHJpeFdvcmxkKSx0aGlzLmNhbWVyYT10KTpjb25zb2xlLmVycm9yKFwiVEhSRUUuUmF5Y2FzdGVyOiBVbnN1cHBvcnRlZCBjYW1lcmEgdHlwZS5cIil9LGludGVyc2VjdE9iamVjdDpmdW5jdGlvbihlLHQscil7cj1yfHxbXTtjbyhlLHRoaXMscix0KTtyLnNvcnQodW8pO3JldHVybiByfSxpbnRlcnNlY3RPYmplY3RzOmZ1bmN0aW9uKGUsdCxyKXtyPXJ8fFtdO2lmKCExPT09QXJyYXkuaXNBcnJheShlKSlyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHM6IG9iamVjdHMgaXMgbm90IGFuIEFycmF5LlwiKSxyO2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7bjxpO24rKyljbyhlW25dLHRoaXMscix0KTtyLnNvcnQodW8pO3JldHVybiByfX0pO09iamVjdC5hc3NpZ24obG8ucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oZSx0LHIpe3RoaXMucmFkaXVzPWU7dGhpcy5waGk9dDt0aGlzLnRoZXRhPXI7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGUpe3RoaXMucmFkaXVzPWUucmFkaXVzO3RoaXMucGhpPWUucGhpO3RoaXMudGhldGE9ZS50aGV0YTtyZXR1cm4gdGhpc30sbWFrZVNhZmU6ZnVuY3Rpb24oKXt0aGlzLnBoaT1NYXRoLm1heCgxZS02LE1hdGgubWluKE1hdGguUEktMWUtNix0aGlzLnBoaSkpO3JldHVybiB0aGlzfSxzZXRGcm9tVmVjdG9yMzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXRGcm9tQ2FydGVzaWFuQ29vcmRzKGUueCxlLnksZS56KX0sc2V0RnJvbUNhcnRlc2lhbkNvb3JkczpmdW5jdGlvbihlLHQscil7dGhpcy5yYWRpdXM9TWF0aC5zcXJ0KGUqZSt0KnQrcipyKTswPT09dGhpcy5yYWRpdXM/dGhpcy5waGk9dGhpcy50aGV0YT0wOih0aGlzLnRoZXRhPU1hdGguYXRhbjIoZSxyKSx0aGlzLnBoaT1NYXRoLmFjb3MoVm8uY2xhbXAodC90aGlzLnJhZGl1cywtMSwxKSkpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oaG8ucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oZSx0LHIpe3RoaXMucmFkaXVzPWU7dGhpcy50aGV0YT10O3RoaXMueT1yO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihlKXt0aGlzLnJhZGl1cz1lLnJhZGl1czt0aGlzLnRoZXRhPWUudGhldGE7dGhpcy55PWUueTtyZXR1cm4gdGhpc30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0RnJvbUNhcnRlc2lhbkNvb3JkcyhlLngsZS55LGUueil9LHNldEZyb21DYXJ0ZXNpYW5Db29yZHM6ZnVuY3Rpb24oZSx0LHIpe3RoaXMucmFkaXVzPU1hdGguc3FydChlKmUrcipyKTt0aGlzLnRoZXRhPU1hdGguYXRhbjIoZSxyKTt0aGlzLnk9dDtyZXR1cm4gdGhpc319KTt2YXIgZ2M9bmV3IE1lO09iamVjdC5hc3NpZ24ocG8ucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLm1pbi5jb3B5KGUpO3RoaXMubWF4LmNvcHkodCk7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oZSl7dGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIHQ9MCxyPWUubGVuZ3RoO3Q8cjt0KyspdGhpcy5leHBhbmRCeVBvaW50KGVbdF0pO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbihlLHQpe3Q9Z2MuY29weSh0KS5tdWx0aXBseVNjYWxhciguNSk7dGhpcy5taW4uY29weShlKS5zdWIodCk7dGhpcy5tYXguY29weShlKS5hZGQodCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGUpe3RoaXMubWluLmNvcHkoZS5taW4pO3RoaXMubWF4LmNvcHkoZS5tYXgpO3JldHVybiB0aGlzfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PS1JbmZpbml0eTtyZXR1cm4gdGhpc30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZ2V0Q2VudGVyKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBNZSk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Uuc2V0KDAsMCk6ZS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LGdldFNpemU6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5nZXRTaXplKCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxlPW5ldyBNZSk7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Uuc2V0KDAsMCk6ZS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihlKXt0aGlzLm1pbi5taW4oZSk7dGhpcy5tYXgubWF4KGUpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihlKXt0aGlzLm1pbi5zdWIoZSk7dGhpcy5tYXguYWRkKGUpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihlKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWUpO3RoaXMubWF4LmFkZFNjYWxhcihlKTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gZS54PHRoaXMubWluLnh8fGUueD50aGlzLm1heC54fHxlLnk8dGhpcy5taW4ueXx8ZS55PnRoaXMubWF4Lnk/ITE6ITB9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1pbi54PD1lLm1pbi54JiZlLm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD1lLm1pbi55JiZlLm1heC55PD10aGlzLm1heC55fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmdldFBhcmFtZXRlcigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksdD1uZXcgTWUpO3JldHVybiB0LnNldCgoZS54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLChlLnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSkpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGUpe3JldHVybiBlLm1heC54PHRoaXMubWluLnh8fGUubWluLng+dGhpcy5tYXgueHx8ZS5tYXgueTx0aGlzLm1pbi55fHxlLm1pbi55PnRoaXMubWF4Lnk/ITE6ITB9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYoY29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmNsYW1wUG9pbnQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IE1lKTtyZXR1cm4gdC5jb3B5KGUpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGUpe3JldHVybiBnYy5jb3B5KGUpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIoZSkubGVuZ3RoKCl9LGludGVyc2VjdDpmdW5jdGlvbihlKXt0aGlzLm1pbi5tYXgoZS5taW4pO3RoaXMubWF4Lm1pbihlLm1heCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGUpe3RoaXMubWluLm1pbihlLm1pbik7dGhpcy5tYXgubWF4KGUubWF4KTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGUpe3RoaXMubWluLmFkZChlKTt0aGlzLm1heC5hZGQoZSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZS5taW4uZXF1YWxzKHRoaXMubWluKSYmZS5tYXguZXF1YWxzKHRoaXMubWF4KX19KTt2YXIgX2M9bmV3IFRlLHljPW5ldyBUZTtPYmplY3QuYXNzaWduKGZvLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGUsdCl7dGhpcy5zdGFydC5jb3B5KGUpO3RoaXMuZW5kLmNvcHkodCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGUpe3RoaXMuc3RhcnQuY29weShlLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGUuZW5kKTtyZXR1cm4gdGhpc30sZ2V0Q2VudGVyOmZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lMzogLmdldENlbnRlcigpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgVGUpO3JldHVybiBlLmFkZFZlY3RvcnModGhpcy5zdGFydCx0aGlzLmVuZCkubXVsdGlwbHlTY2FsYXIoLjUpfSxkZWx0YTpmdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoY29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5kZWx0YSgpIHRhcmdldCBpcyBub3cgcmVxdWlyZWRcIiksZT1uZXcgVGUpO3JldHVybiBlLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCl9LGRpc3RhbmNlU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCl9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUbyh0aGlzLmVuZCl9LGF0OmZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmUzOiAuYXQoKSB0YXJnZXQgaXMgbm93IHJlcXVpcmVkXCIpLHQ9bmV3IFRlKTtyZXR1cm4gdGhpcy5kZWx0YSh0KS5tdWx0aXBseVNjYWxhcihlKS5hZGQodGhpcy5zdGFydCl9LGNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXI6ZnVuY3Rpb24oZSx0KXtfYy5zdWJWZWN0b3JzKGUsdGhpcy5zdGFydCk7eWMuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KTtlPXljLmRvdCh5Yyk7ZT15Yy5kb3QoX2MpL2U7dCYmKGU9Vm8uY2xhbXAoZSwwLDEpKTtyZXR1cm4gZX0sY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihlLHQscil7ZT10aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIoZSx0KTt2b2lkIDA9PT1yJiYoY29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5jbG9zZXN0UG9pbnRUb1BvaW50KCkgdGFyZ2V0IGlzIG5vdyByZXF1aXJlZFwiKSxyPW5ldyBUZSk7cmV0dXJuIHRoaXMuZGVsdGEocikubXVsdGlwbHlTY2FsYXIoZSkuYWRkKHRoaXMuc3RhcnQpfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oZSl7dGhpcy5zdGFydC5hcHBseU1hdHJpeDQoZSk7dGhpcy5lbmQuYXBwbHlNYXRyaXg0KGUpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhcnQuZXF1YWxzKHRoaXMuc3RhcnQpJiZlLmVuZC5lcXVhbHModGhpcy5lbmQpfX0pO3ZvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKTt2by5wcm90b3R5cGUuY29uc3RydWN0b3I9dm87dm8ucHJvdG90eXBlLmlzSW1tZWRpYXRlUmVuZGVyT2JqZWN0PSEwO3ZhciBiYz1uZXcgVGU7bW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpO21vLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1tbzttby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29uZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jb25lLm1hdGVyaWFsLmRpc3Bvc2UoKX07bW8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt2YXIgZT10aGlzLmxpZ2h0LmRpc3RhbmNlP3RoaXMubGlnaHQuZGlzdGFuY2U6MWUzLHQ9ZSpNYXRoLnRhbih0aGlzLmxpZ2h0LmFuZ2xlKTt0aGlzLmNvbmUuc2NhbGUuc2V0KHQsdCxlKTtiYy5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO3RoaXMuY29uZS5sb29rQXQoYmMpO3ZvaWQgMCE9PXRoaXMuY29sb3I/dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKX07dmFyIHhjPW5ldyBUZSx3Yz1uZXcgRWUsU2M9bmV3IEVlO19vLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGFyLnByb3RvdHlwZSk7X28ucHJvdG90eXBlLmNvbnN0cnVjdG9yPV9vO19vLnByb3RvdHlwZS5pc1NrZWxldG9uSGVscGVyPSEwO19vLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJvbmVzLHI9dGhpcy5nZW9tZXRyeSxuPXIuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7U2MuZ2V0SW52ZXJzZSh0aGlzLnJvb3QubWF0cml4V29ybGQpO2Zvcih2YXIgaT0wLG89MDtpPHQubGVuZ3RoO2krKyl7dmFyIGE9dFtpXTthLnBhcmVudCYmYS5wYXJlbnQuaXNCb25lJiYod2MubXVsdGlwbHlNYXRyaWNlcyhTYyxhLm1hdHJpeFdvcmxkKSx4Yy5zZXRGcm9tTWF0cml4UG9zaXRpb24od2MpLG4uc2V0WFlaKG8seGMueCx4Yy55LHhjLnopLHdjLm11bHRpcGx5TWF0cmljZXMoU2MsYS5wYXJlbnQubWF0cml4V29ybGQpLHhjLnNldEZyb21NYXRyaXhQb3NpdGlvbih3Yyksbi5zZXRYWVoobysxLHhjLngseGMueSx4Yy56KSxvKz0yKX1yLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLm5lZWRzVXBkYXRlPSEwO2YucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxlKX07eW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSS5wcm90b3R5cGUpO3lvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15bzt5by5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubWF0ZXJpYWwuZGlzcG9zZSgpfTt5by5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5jb2xvcj90aGlzLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9O3ZhciBNYz1uZXcgVGUsQ2M9bmV3IHYsVGM9bmV3IHY7Ym8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpO2JvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ibztiby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY2hpbGRyZW5bMF0uZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMuY2hpbGRyZW5bMF0ubWF0ZXJpYWwuZGlzcG9zZSgpfTtiby5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jaGlsZHJlblswXTtpZih2b2lkIDAhPT10aGlzLmNvbG9yKXRoaXMubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpO2Vsc2V7dmFyIHQ9ZS5nZW9tZXRyeS5nZXRBdHRyaWJ1dGUoXCJjb2xvclwiKTtDYy5jb3B5KHRoaXMubGlnaHQuY29sb3IpO1RjLmNvcHkodGhpcy5saWdodC5ncm91bmRDb2xvcik7Zm9yKHZhciByPTAsbj10LmNvdW50O3I8bjtyKyspe3ZhciBpPXI8bi8yP0NjOlRjO3Quc2V0WFlaKHIsaS5yLGkuZyxpLmIpfXQubmVlZHNVcGRhdGU9ITB9ZS5sb29rQXQoTWMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpLm5lZ2F0ZSgpKX07eG8ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShhci5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp4byxjb3B5OmZ1bmN0aW9uKGUpe2FyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLmdlb21ldHJ5LmNvcHkoZS5nZW9tZXRyeSk7dGhpcy5tYXRlcmlhbC5jb3B5KGUubWF0ZXJpYWwpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX19KTt3by5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhci5wcm90b3R5cGUpO3dvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj13bzt2YXIgRWM9bmV3IFRlLE9jPW5ldyBUZSxQYz1uZXcgVGU7U28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpO1NvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1TbztTby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMubGlnaHRQbGFuZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5saWdodFBsYW5lLm1hdGVyaWFsLmRpc3Bvc2UoKTt0aGlzLnRhcmdldExpbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5kaXNwb3NlKCl9O1NvLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtFYy5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7T2Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTtQYy5zdWJWZWN0b3JzKE9jLEVjKTt0aGlzLmxpZ2h0UGxhbmUubG9va0F0KE9jKTt2b2lkIDAhPT10aGlzLmNvbG9yPyh0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpLHRoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcikpOih0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKSx0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKSk7dGhpcy50YXJnZXRMaW5lLmxvb2tBdChPYyk7dGhpcy50YXJnZXRMaW5lLnNjYWxlLno9UGMubGVuZ3RoKCl9O3ZhciBBYz1uZXcgVGUsamM9bmV3IFY7TW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYXIucHJvdG90eXBlKTtNby5wcm90b3R5cGUuY29uc3RydWN0b3I9TW87TW8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2VvbWV0cnksdD10aGlzLnBvaW50TWFwO2pjLnByb2plY3Rpb25NYXRyaXhJbnZlcnNlLmNvcHkodGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeEludmVyc2UpO0NvKFwiY1wiLHQsZSxqYywwLDAsLTEpO0NvKFwidFwiLHQsZSxqYywwLDAsMSk7Q28oXCJuMVwiLHQsZSxqYywtMSwtMSwtMSk7Q28oXCJuMlwiLHQsZSxqYywxLC0xLC0xKTtDbyhcIm4zXCIsdCxlLGpjLC0xLDEsLTEpO0NvKFwibjRcIix0LGUsamMsMSwxLC0xKTtDbyhcImYxXCIsdCxlLGpjLC0xLC0xLDEpO0NvKFwiZjJcIix0LGUsamMsMSwtMSwxKTtDbyhcImYzXCIsdCxlLGpjLC0xLDEsMSk7Q28oXCJmNFwiLHQsZSxqYywxLDEsMSk7Q28oXCJ1MVwiLHQsZSxqYywuNywxLjEsLTEpO0NvKFwidTJcIix0LGUsamMsLS43LDEuMSwtMSk7Q28oXCJ1M1wiLHQsZSxqYywwLDIsLTEpO0NvKFwiY2YxXCIsdCxlLGpjLC0xLDAsMSk7Q28oXCJjZjJcIix0LGUsamMsMSwwLDEpO0NvKFwiY2YzXCIsdCxlLGpjLDAsLTEsMSk7Q28oXCJjZjRcIix0LGUsamMsMCwxLDEpO0NvKFwiY24xXCIsdCxlLGpjLC0xLDAsLTEpO0NvKFwiY24yXCIsdCxlLGpjLDEsMCwtMSk7Q28oXCJjbjNcIix0LGUsamMsMCwtMSwtMSk7Q28oXCJjbjRcIix0LGUsamMsMCwxLC0xKTtlLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLm5lZWRzVXBkYXRlPSEwfTt2YXIgUmM9bmV3IG47VG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYXIucHJvdG90eXBlKTtUby5wcm90b3R5cGUuY29uc3RydWN0b3I9VG87VG8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlKXt2b2lkIDAhPT1lJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3hIZWxwZXI6IC51cGRhdGUoKSBoYXMgbm8gbG9uZ2VyIGFyZ3VtZW50cy5cIik7dm9pZCAwIT09dGhpcy5vYmplY3QmJlJjLnNldEZyb21PYmplY3QodGhpcy5vYmplY3QpO2lmKCFSYy5pc0VtcHR5KCkpe2U9UmMubWluO3ZhciB0PVJjLm1heCxyPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbixuPXIuYXJyYXk7blswXT10Lng7blsxXT10Lnk7blsyXT10Lno7blszXT1lLng7bls0XT10Lnk7bls1XT10Lno7bls2XT1lLng7bls3XT1lLnk7bls4XT10Lno7bls5XT10Lng7blsxMF09ZS55O25bMTFdPXQuejtuWzEyXT10Lng7blsxM109dC55O25bMTRdPWUuejtuWzE1XT1lLng7blsxNl09dC55O25bMTddPWUuejtuWzE4XT1lLng7blsxOV09ZS55O25bMjBdPWUuejtuWzIxXT10Lng7blsyMl09ZS55O25bMjNdPWUuejtyLm5lZWRzVXBkYXRlPSEwO3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl9fTtUby5wcm90b3R5cGUuc2V0RnJvbU9iamVjdD1mdW5jdGlvbihlKXt0aGlzLm9iamVjdD1lO3RoaXMudXBkYXRlKCk7cmV0dXJuIHRoaXN9O1RvLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe2FyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxlKTt0aGlzLm9iamVjdD1lLm9iamVjdDtyZXR1cm4gdGhpc307VG8ucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfTtFby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhci5wcm90b3R5cGUpO0VvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FbztFby5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ib3g7dC5pc0VtcHR5KCl8fCh0LmdldENlbnRlcih0aGlzLnBvc2l0aW9uKSx0LmdldFNpemUodGhpcy5zY2FsZSksdGhpcy5zY2FsZS5tdWx0aXBseVNjYWxhciguNSksZi5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGUpKX07T28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUob3IucHJvdG90eXBlKTtPby5wcm90b3R5cGUuY29uc3RydWN0b3I9T287T28ucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkPWZ1bmN0aW9uKGUpe3ZhciB0PS10aGlzLnBsYW5lLmNvbnN0YW50OzFlLTg+TWF0aC5hYnModCkmJih0PTFlLTgpO3RoaXMuc2NhbGUuc2V0KC41KnRoaXMuc2l6ZSwuNSp0aGlzLnNpemUsdCk7dGhpcy5jaGlsZHJlblswXS5tYXRlcmlhbC5zaWRlPTA+dD8xOjA7dGhpcy5sb29rQXQodGhpcy5wbGFuZS5ub3JtYWwpO2YucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxlKX07dmFyIGtjPW5ldyBUZSxMYyxOYztQby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7UG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPVBvO1BvLnByb3RvdHlwZS5zZXREaXJlY3Rpb249ZnVuY3Rpb24oZSl7Ljk5OTk5PGUueT90aGlzLnF1YXRlcm5pb24uc2V0KDAsMCwwLDEpOi0uOTk5OTk+ZS55P3RoaXMucXVhdGVybmlvbi5zZXQoMSwwLDAsMCk6KGtjLnNldChlLnosMCwtZS54KS5ub3JtYWxpemUoKSx0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShrYyxNYXRoLmFjb3MoZS55KSkpfTtQby5wcm90b3R5cGUuc2V0TGVuZ3RoPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT10JiYodD0uMiplKTt2b2lkIDA9PT1yJiYocj0uMip0KTt0aGlzLmxpbmUuc2NhbGUuc2V0KDEsTWF0aC5tYXgoMWUtNCxlLXQpLDEpO3RoaXMubGluZS51cGRhdGVNYXRyaXgoKTt0aGlzLmNvbmUuc2NhbGUuc2V0KHIsdCxyKTt0aGlzLmNvbmUucG9zaXRpb24ueT1lO3RoaXMuY29uZS51cGRhdGVNYXRyaXgoKX07UG8ucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGUpe3RoaXMubGluZS5tYXRlcmlhbC5jb2xvci5zZXQoZSk7dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLnNldChlKX07UG8ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7Zi5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsZSwhMSk7dGhpcy5saW5lLmNvcHkoZS5saW5lKTt0aGlzLmNvbmUuY29weShlLmNvbmUpO3JldHVybiB0aGlzfTtQby5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9O0FvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGFyLnByb3RvdHlwZSk7QW8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFvO3ZhciBJYz1NYXRoLnBvdygyLDgpLERjPVsuMTI1LC4yMTUsLjM1LC40NDYsLjUyNiwuNTgyXSxCYz01K0RjLmxlbmd0aCxGYz17M2UzOjAsMzAwMToxLDMwMDI6MiwzMDA0OjMsMzAwNTo0LDMwMDY6NSwzMDA3OjZ9LHpjPW5ldyBPaSwkYz1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PVtdLHI9W10sbj04LGk9MDtpPEJjO2krKyl7dmFyIG89TWF0aC5wb3coMixuKTt0LnB1c2gobyk7dmFyIGE9MS9vOzQ8aT9hPURjW2ktOCs0LTFdOjA9PWkmJihhPTApO3IucHVzaChhKTthPTEvKG8tMSk7bz0tYS8yO2E9MSthLzI7dmFyIHM9W28sbyxhLG8sYSxhLG8sbyxhLGEsbyxhXTtvPW5ldyBGbG9hdDMyQXJyYXkoMTA4KTthPW5ldyBGbG9hdDMyQXJyYXkoNzIpO2Zvcih2YXIgdT1uZXcgRmxvYXQzMkFycmF5KDM2KSxjPTA7Nj5jO2MrKyl7dmFyIGw9YyUzKjIvMy0xLGg9MjxjPzA6LTE7by5zZXQoW2wsaCwwLGwrMi8zLGgsMCxsKzIvMyxoKzEsMCxsLGgsMCxsKzIvMyxoKzEsMCxsLGgrMSwwXSwxOCpjKTthLnNldChzLDEyKmMpO3Uuc2V0KFtjLGMsYyxjLGMsY10sNipjKX1zPW5ldyBOO3Muc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgRShvLDMpKTtzLnNldEF0dHJpYnV0ZShcInV2XCIsbmV3IEUoYSwyKSk7cy5zZXRBdHRyaWJ1dGUoXCJmYWNlSW5kZXhcIixuZXcgRSh1LDEpKTtlLnB1c2gocyk7NDxuJiZuLS19cmV0dXJue19sb2RQbGFuZXM6ZSxfc2l6ZUxvZHM6dCxfc2lnbWFzOnJ9fSgpLEdjPSRjLl9sb2RQbGFuZXMsVmM9JGMuX3NpemVMb2RzLEhjPSRjLl9zaWdtYXMsVWM9bnVsbCxxYz0oMStNYXRoLnNxcnQoNSkpLzIsV2M9MS9xYyxYYz1bbmV3IFRlKDEsMSwxKSxuZXcgVGUoLTEsMSwxKSxuZXcgVGUoMSwxLC0xKSxuZXcgVGUoLTEsMSwtMSksbmV3IFRlKDAscWMsV2MpLG5ldyBUZSgwLHFjLC1XYyksbmV3IFRlKFdjLDAscWMpLG5ldyBUZSgtV2MsMCxxYyksbmV3IFRlKHFjLFdjLDApLG5ldyBUZSgtcWMsV2MsMCldO2pvLnByb3RvdHlwZT17Y29uc3RydWN0b3I6am8sZnJvbVNjZW5lOmZ1bmN0aW9uKGUsdCxyLG4pe3ZvaWQgMD09PXQmJih0PTApO3ZvaWQgMD09PXImJihyPS4xKTt2b2lkIDA9PT1uJiYobj0xMDApO1VjPXRoaXMuX3JlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO3ZhciBpPXRoaXMuX2FsbG9jYXRlVGFyZ2V0cygpO3RoaXMuX3NjZW5lVG9DdWJlVVYoZSxyLG4saSk7MDx0JiZ0aGlzLl9ibHVyKGksMCwwLHQpO3RoaXMuX2FwcGx5UE1SRU0oaSk7dGhpcy5fY2xlYW51cChpKTtyZXR1cm4gaX0sZnJvbUVxdWlyZWN0YW5ndWxhcjpmdW5jdGlvbihlKXtlLm1hZ0ZpbHRlcj0xMDAzO2UubWluRmlsdGVyPTEwMDM7ZS5nZW5lcmF0ZU1pcG1hcHM9ITE7cmV0dXJuIHRoaXMuZnJvbUN1YmVtYXAoZSl9LGZyb21DdWJlbWFwOmZ1bmN0aW9uKGUpe1VjPXRoaXMuX3JlbmRlcmVyLmdldFJlbmRlclRhcmdldCgpO3ZhciB0PXRoaXMuX2FsbG9jYXRlVGFyZ2V0cyhlKTt0aGlzLl90ZXh0dXJlVG9DdWJlVVYoZSx0KTt0aGlzLl9hcHBseVBNUkVNKHQpO3RoaXMuX2NsZWFudXAodCk7cmV0dXJuIHR9LGNvbXBpbGVDdWJlbWFwU2hhZGVyOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuX2N1YmVtYXBTaGFkZXImJih0aGlzLl9jdWJlbWFwU2hhZGVyPU5vKCksdGhpcy5fY29tcGlsZU1hdGVyaWFsKHRoaXMuX2N1YmVtYXBTaGFkZXIpKX0sY29tcGlsZUVxdWlyZWN0YW5ndWxhclNoYWRlcjpmdW5jdGlvbigpe251bGw9PT10aGlzLl9lcXVpcmVjdFNoYWRlciYmKHRoaXMuX2VxdWlyZWN0U2hhZGVyPUxvKCksdGhpcy5fY29tcGlsZU1hdGVyaWFsKHRoaXMuX2VxdWlyZWN0U2hhZGVyKSl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9ibHVyTWF0ZXJpYWwuZGlzcG9zZSgpO251bGwhPT10aGlzLl9jdWJlbWFwU2hhZGVyJiZ0aGlzLl9jdWJlbWFwU2hhZGVyLmRpc3Bvc2UoKTtudWxsIT09dGhpcy5fZXF1aXJlY3RTaGFkZXImJnRoaXMuX2VxdWlyZWN0U2hhZGVyLmRpc3Bvc2UoKTtmb3IodmFyIGU9MDtlPEdjLmxlbmd0aDtlKyspR2NbZV0uZGlzcG9zZSgpfSxfY2xlYW51cDpmdW5jdGlvbihlKXt0aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldC5kaXNwb3NlKCk7dGhpcy5fcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KFVjKTtlLnNjaXNzb3JUZXN0PSExO2Uuc2V0U2l6ZShlLndpZHRoLGUuaGVpZ2h0KX0sX2FsbG9jYXRlVGFyZ2V0czpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lfHwxMDA5IT09ZS50eXBlPyExOjNlMz09PWUuZW5jb2Rpbmd8fDMwMDE9PT1lLmVuY29kaW5nfHwzMDA3PT09ZS5lbmNvZGluZzt0PXttYWdGaWx0ZXI6MTAwMyxtaW5GaWx0ZXI6MTAwMyxnZW5lcmF0ZU1pcG1hcHM6ITEsdHlwZToxMDA5LGZvcm1hdDoxMDIzLGVuY29kaW5nOnQ/ZS5lbmNvZGluZzozMDAyLGRlcHRoQnVmZmVyOiExLHN0ZW5jaWxCdWZmZXI6ITF9O3ZhciByPVJvKHQpO3IuZGVwdGhCdWZmZXI9ZT8hMTohMDt0aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldD1Sbyh0KTtyZXR1cm4gcn0sX2NvbXBpbGVNYXRlcmlhbDpmdW5jdGlvbihlKXtlPW5ldyBJKEdjWzBdLGUpO3RoaXMuX3JlbmRlcmVyLmNvbXBpbGUoZSx6Yyl9LF9zY2VuZVRvQ3ViZVVWOmZ1bmN0aW9uKGUsdCxyLG4pe3Q9bmV3IEgoOTAsMSx0LHIpO3I9WzEsLTEsMSwxLDEsMV07dmFyIGk9WzEsMSwxLC0xLC0xLC0xXSxvPXRoaXMuX3JlbmRlcmVyLGE9by5vdXRwdXRFbmNvZGluZyxzPW8udG9uZU1hcHBpbmcsdT1vLnRvbmVNYXBwaW5nRXhwb3N1cmUsYz1vLmdldENsZWFyQ29sb3IoKSxsPW8uZ2V0Q2xlYXJBbHBoYSgpO28udG9uZU1hcHBpbmc9MTtvLnRvbmVNYXBwaW5nRXhwb3N1cmU9MTtvLm91dHB1dEVuY29kaW5nPTNlMzt2YXIgaD1lLmJhY2tncm91bmQ7aWYoaCYmaC5pc0NvbG9yKXtoLmNvbnZlcnRTUkdCVG9MaW5lYXIoKTt2YXIgcD1NYXRoLm1pbihNYXRoLm1heChNYXRoLmNlaWwoTWF0aC5sb2cyKE1hdGgubWF4KGgucixoLmcsaC5iKSkpLC0xMjgpLDEyNyk7aD1oLm11bHRpcGx5U2NhbGFyKE1hdGgucG93KDIsLXApKTtvLnNldENsZWFyQ29sb3IoaCwocCsxMjgpLzI1NSk7ZS5iYWNrZ3JvdW5kPW51bGx9Zm9yKGg9MDs2Pmg7aCsrKXA9aCUzLDA9PXA/KHQudXAuc2V0KDAscltoXSwwKSx0Lmxvb2tBdChpW2hdLDAsMCkpOjE9PXA/KHQudXAuc2V0KDAsMCxyW2hdKSx0Lmxvb2tBdCgwLGlbaF0sMCkpOih0LnVwLnNldCgwLHJbaF0sMCksdC5sb29rQXQoMCwwLGlbaF0pKSxrbyhuLHAqSWMsMjxoP0ljOjAsSWMsSWMpLG8uc2V0UmVuZGVyVGFyZ2V0KG4pLG8ucmVuZGVyKGUsdCk7by50b25lTWFwcGluZz1zO28udG9uZU1hcHBpbmdFeHBvc3VyZT11O28ub3V0cHV0RW5jb2Rpbmc9YTtvLnNldENsZWFyQ29sb3IoYyxsKX0sX3RleHR1cmVUb0N1YmVVVjpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX3JlbmRlcmVyO2UuaXNDdWJlVGV4dHVyZT9udWxsPT10aGlzLl9jdWJlbWFwU2hhZGVyJiYodGhpcy5fY3ViZW1hcFNoYWRlcj1ObygpKTpudWxsPT10aGlzLl9lcXVpcmVjdFNoYWRlciYmKHRoaXMuX2VxdWlyZWN0U2hhZGVyPUxvKCkpO3ZhciBuPWUuaXNDdWJlVGV4dHVyZT90aGlzLl9jdWJlbWFwU2hhZGVyOnRoaXMuX2VxdWlyZWN0U2hhZGVyLGk9bmV3IEkoR2NbMF0sbik7bj1uLnVuaWZvcm1zO24uZW52TWFwLnZhbHVlPWU7ZS5pc0N1YmVUZXh0dXJlfHxuLnRleGVsU2l6ZS52YWx1ZS5zZXQoMS9lLmltYWdlLndpZHRoLDEvZS5pbWFnZS5oZWlnaHQpO24uaW5wdXRFbmNvZGluZy52YWx1ZT1GY1tlLmVuY29kaW5nXTtuLm91dHB1dEVuY29kaW5nLnZhbHVlPUZjW3QudGV4dHVyZS5lbmNvZGluZ107a28odCwwLDAsMypJYywyKkljKTtyLnNldFJlbmRlclRhcmdldCh0KTtyLnJlbmRlcihpLHpjKX0sX2FwcGx5UE1SRU06ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcmVuZGVyZXIscj10LmF1dG9DbGVhcjt0LmF1dG9DbGVhcj0hMTtmb3IodmFyIG49MTtuPEJjO24rKyl0aGlzLl9ibHVyKGUsbi0xLG4sTWF0aC5zcXJ0KEhjW25dKkhjW25dLUhjW24tMV0qSGNbbi0xXSksWGNbKG4tMSklWGMubGVuZ3RoXSk7dC5hdXRvQ2xlYXI9cn0sX2JsdXI6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzLl9waW5nUG9uZ1JlbmRlclRhcmdldDt0aGlzLl9oYWxmQmx1cihlLG8sdCxyLG4sXCJsYXRpdHVkaW5hbFwiLGkpO3RoaXMuX2hhbGZCbHVyKG8sZSxyLHIsbixcImxvbmdpdHVkaW5hbFwiLGkpfSxfaGFsZkJsdXI6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7dmFyIHM9dGhpcy5fcmVuZGVyZXIsdT10aGlzLl9ibHVyTWF0ZXJpYWw7XCJsYXRpdHVkaW5hbFwiIT09byYmXCJsb25naXR1ZGluYWxcIiE9PW8mJmNvbnNvbGUuZXJyb3IoXCJibHVyIGRpcmVjdGlvbiBtdXN0IGJlIGVpdGhlciBsYXRpdHVkaW5hbCBvciBsb25naXR1ZGluYWwhXCIpO3ZhciBjPW5ldyBJKEdjW25dLHUpO3U9dS51bmlmb3Jtczt2YXIgbD1WY1tyXS0xO2w9aXNGaW5pdGUoaSk/TWF0aC5QSS8oMipsKToyKk1hdGguUEkvMzk7dmFyIGg9aS9sLHA9aXNGaW5pdGUoaSk/MStNYXRoLmZsb29yKDMqaCk6MjA7MjA8cCYmY29uc29sZS53YXJuKFwic2lnbWFSYWRpYW5zLCBcIitpK1wiLCBpcyB0b28gbGFyZ2UgYW5kIHdpbGwgY2xpcCwgYXMgaXQgcmVxdWVzdGVkIFwiK3ArXCIgc2FtcGxlcyB3aGVuIHRoZSBtYXhpbXVtIGlzIHNldCB0byAyMFwiKTtpPVtdO2Zvcih2YXIgZj0wLGQ9MDsyMD5kOysrZCl7dmFyIHY9ZC9oO3Y9TWF0aC5leHAoLXYqdi8yKTtpLnB1c2godik7MD09ZD9mKz12OmQ8cCYmKGYrPTIqdil9Zm9yKGQ9MDtkPGkubGVuZ3RoO2QrKylpW2RdLz1mO3UuZW52TWFwLnZhbHVlPWUudGV4dHVyZTt1LnNhbXBsZXMudmFsdWU9cDt1LndlaWdodHMudmFsdWU9aTt1LmxhdGl0dWRpbmFsLnZhbHVlPVwibGF0aXR1ZGluYWxcIj09PW87YSYmKHUucG9sZUF4aXMudmFsdWU9YSk7dS5kVGhldGEudmFsdWU9bDt1Lm1pcEludC52YWx1ZT04LXI7dS5pbnB1dEVuY29kaW5nLnZhbHVlPUZjW2UudGV4dHVyZS5lbmNvZGluZ107dS5vdXRwdXRFbmNvZGluZy52YWx1ZT1GY1tlLnRleHR1cmUuZW5jb2RpbmddO2U9VmNbbl07dj0zKk1hdGgubWF4KDAsSWMtMiplKTtrbyh0LHYsKDA9PT1uPzA6MipJYykrMiplKig0PG4/bi04KzQ6MCksMyplLDIqZSk7cy5zZXRSZW5kZXJUYXJnZXQodCk7cy5yZW5kZXIoYyx6Yyl9fTtuaS5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyhcIlRIUkVFLkN1cnZlLmNyZWF0ZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWRcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuaS5wcm90b3R5cGUpO2UucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9dDtyZXR1cm4gZX07T2JqZWN0LmFzc2lnbihfaS5wcm90b3R5cGUse2NyZWF0ZVBvaW50c0dlb21ldHJ5OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZVBvaW50c0dlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO2U9dGhpcy5nZXRQb2ludHMoZSk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoZSl9LGNyZWF0ZVNwYWNlZFBvaW50c0dlb21ldHJ5OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZVNwYWNlZFBvaW50c0dlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO2U9dGhpcy5nZXRTcGFjZWRQb2ludHMoZSk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoZSl9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlUGF0aDogLmNyZWF0ZUdlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5HZW9tZXRyeSgpLnNldEZyb21Qb2ludHMoIHBvaW50cyApIGluc3RlYWQuXCIpO2Zvcih2YXIgdD1uZXcgRixyPTAsbj1lLmxlbmd0aDtyPG47cisrKXt2YXIgaT1lW3JdO3QudmVydGljZXMucHVzaChuZXcgVGUoaS54LGkueSxpLnp8fDApKX1yZXR1cm4gdH19KTtPYmplY3QuYXNzaWduKHlpLnByb3RvdHlwZSx7ZnJvbVBvaW50czpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXRoOiAuZnJvbVBvaW50cygpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21Qb2ludHMoKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbVBvaW50cyhlKX19KTtCby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzaS5wcm90b3R5cGUpO0ZvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHNpLnByb3RvdHlwZSk7em8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc2kucHJvdG90eXBlKTtPYmplY3QuYXNzaWduKHpvLnByb3RvdHlwZSx7aW5pdEZyb21BcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5pbml0RnJvbUFycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGdldENvbnRyb2xQb2ludHNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5nZXRDb250cm9sUG9pbnRzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scmVwYXJhbWV0cml6ZUJ5QXJjTGVuZ3RoOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNwbGluZTogLnJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO3hvLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuR3JpZEhlbHBlcjogc2V0Q29sb3JzKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGFzcyB0aGVtIGluIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkLlwiKX07X28ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Ta2VsZXRvbkhlbHBlcjogdXBkYXRlKCkgbm8gbG9uZ2VyIG5lZWRzIHRvIGJlIGNhbGxlZC5cIil9O09iamVjdC5hc3NpZ24oWW4ucHJvdG90eXBlLHtleHRyYWN0VXJsQmFzZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXI6IC5leHRyYWN0VXJsQmFzZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5Mb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSgpIGluc3RlYWQuXCIpO3JldHVybiBxdS5leHRyYWN0VXJsQmFzZShlKX19KTtZbi5IYW5kbGVycz17YWRkOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkxvYWRlcjogSGFuZGxlcnMuYWRkKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIExvYWRpbmdNYW5hZ2VyLmFkZEhhbmRsZXIoKSBpbnN0ZWFkLlwiKX0sZ2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkxvYWRlcjogSGFuZGxlcnMuZ2V0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIExvYWRpbmdNYW5hZ2VyLmdldEhhbmRsZXIoKSBpbnN0ZWFkLlwiKX19O09iamVjdC5hc3NpZ24oRmkucHJvdG90eXBlLHtzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IC5zZXRUZXh0dXJlUGF0aCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldFJlc291cmNlUGF0aCgpLlwiKTtyZXR1cm4gdGhpcy5zZXRSZXNvdXJjZVBhdGgoZSl9fSk7T2JqZWN0LmFzc2lnbihwby5wcm90b3R5cGUse2NlbnRlcjpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuY2VudGVyKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Q2VudGVyKCkuXCIpO3JldHVybiB0aGlzLmdldENlbnRlcihlKX0sZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpO3JldHVybiB0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGUpfSxzaXplOmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5zaXplKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0U2l6ZSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRTaXplKGUpfX0pO09iamVjdC5hc3NpZ24obi5wcm90b3R5cGUse2NlbnRlcjpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuY2VudGVyKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Q2VudGVyKCkuXCIpO3JldHVybiB0aGlzLmdldENlbnRlcihlKX0sZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpO3JldHVybiB0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGUpfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoZSl9LHNpemU6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLnNpemUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRTaXplKCkuXCIpO3JldHVybiB0aGlzLmdldFNpemUoZSl9fSk7T2JqZWN0LmFzc2lnbihsLnByb3RvdHlwZSx7ZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TcGhlcmU6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIik7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfX0pO0FlLnByb3RvdHlwZS5zZXRGcm9tTWF0cml4PWZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkZydXN0dW06IC5zZXRGcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbVByb2plY3Rpb25NYXRyaXgoZSl9O2ZvLnByb3RvdHlwZS5jZW50ZXI9ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGluZTM6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKGUpfTtPYmplY3QuYXNzaWduKFZvLHtyYW5kb20xNjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGg6IC5yYW5kb20xNigpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBNYXRoLnJhbmRvbSgpIGluc3RlYWQuXCIpO3JldHVybiBNYXRoLnJhbmRvbSgpfSxuZWFyZXN0UG93ZXJPZlR3bzpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRoOiAubmVhcmVzdFBvd2VyT2ZUd28oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mbG9vclBvd2VyT2ZUd28oKS5cIik7cmV0dXJuIFZvLmZsb29yUG93ZXJPZlR3byhlKX0sbmV4dFBvd2VyT2ZUd286ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLm5leHRQb3dlck9mVHdvKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY2VpbFBvd2VyT2ZUd28oKS5cIik7cmV0dXJuIFZvLmNlaWxQb3dlck9mVHdvKGUpfX0pO09iamVjdC5hc3NpZ24obS5wcm90b3R5cGUse2ZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC50b0FycmF5KCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudG9BcnJheShlLHQpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gZS5hcHBseU1hdHJpeDModGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhcHBseVRvQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGF0dHJpYnV0ZS5hcHBseU1hdHJpeDMoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBlLmFwcGx5TWF0cml4Myh0aGlzKX0sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzOiAuYXBwbHlUb1ZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO09iamVjdC5hc3NpZ24oRWUucHJvdG90eXBlLHtleHRyYWN0UG9zaXRpb246ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmV4dHJhY3RQb3NpdGlvbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmNvcHlQb3NpdGlvbigpLlwiKTtyZXR1cm4gdGhpcy5jb3B5UG9zaXRpb24oZSl9LGZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC50b0FycmF5KCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudG9BcnJheShlLHQpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRQb3NpdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuKG5ldyBUZSkuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDMpfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKS5cIik7cmV0dXJuIHRoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oZSl9LG11bHRpcGx5VG9BcnJheTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVRvQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGUuYXBwbHlNYXRyaXg0KHRoaXMpfSxtdWx0aXBseVZlY3RvcjQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yNCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gZS5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVBeGlzOmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMudHJhbnNmb3JtRGlyZWN0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtlLnRyYW5zZm9ybURpcmVjdGlvbih0aGlzKX0sY3Jvc3NWZWN0b3I6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmNyb3NzVmVjdG9yKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBlLmFwcGx5TWF0cml4NCh0aGlzKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVZOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVZKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVo6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVooKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlQnlBeGlzOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVCeUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhdHRyaWJ1dGUuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gZS5hcHBseU1hdHJpeDQodGhpcyl9LGFwcGx5VG9WZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLmFwcGx5VG9WZWN0b3IzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sbWFrZUZydXN0dW06ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlRnJ1c3R1bSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAubWFrZVBlcnNwZWN0aXZlKCBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20sIG5lYXIsIGZhciApIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLm1ha2VQZXJzcGVjdGl2ZShlLHQsbixyLGksbyl9fSk7Zy5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb25MaW5lPWZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLlBsYW5lOiAuaXNJbnRlcnNlY3Rpb25MaW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0xpbmUoKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c0xpbmUoZSl9O2QucHJvdG90eXBlLm11bHRpcGx5VmVjdG9yMz1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC5cIik7cmV0dXJuIGUuYXBwbHlRdWF0ZXJuaW9uKHRoaXMpfTtPYmplY3QuYXNzaWduKHMucHJvdG90eXBlLHtpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c0JveChlKX0saXNJbnRlcnNlY3Rpb25QbGFuZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1BsYW5lKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNQbGFuZShlKX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoZSl9fSk7T2JqZWN0LmFzc2lnbihiLnByb3RvdHlwZSx7YXJlYTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAuYXJlYSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldEFyZWEoKS5cIik7cmV0dXJuIHRoaXMuZ2V0QXJlYSgpfSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24oZSx0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmJhcnljb29yZEZyb21Qb2ludCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldEJhcnljb29yZCgpLlwiKTtyZXR1cm4gdGhpcy5nZXRCYXJ5Y29vcmQoZSx0KX0sbWlkcG9pbnQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5taWRwb2ludCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE1pZHBvaW50KCkuXCIpO3JldHVybiB0aGlzLmdldE1pZHBvaW50KGUpfSxub3JtYWw6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVHJpYW5nbGU6IC5ub3JtYWwoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXROb3JtYWwoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Tm9ybWFsKGUpfSxwbGFuZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLnBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0UGxhbmUoKS5cIik7cmV0dXJuIHRoaXMuZ2V0UGxhbmUoZSl9fSk7T2JqZWN0LmFzc2lnbihiLHtiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24oZSx0LHIsbixpKXtjb25zb2xlLndhcm4oXCJUSFJFRS5UcmlhbmdsZTogLmJhcnljb29yZEZyb21Qb2ludCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldEJhcnljb29yZCgpLlwiKTtyZXR1cm4gYi5nZXRCYXJ5Y29vcmQoZSx0LHIsbixpKX0sbm9ybWFsOmZ1bmN0aW9uKGUsdCxyLG4pe2NvbnNvbGUud2FybihcIlRIUkVFLlRyaWFuZ2xlOiAubm9ybWFsKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Tm9ybWFsKCkuXCIpO3JldHVybiBiLmdldE5vcm1hbChlLHQscixuKX19KTtPYmplY3QuYXNzaWduKGJpLnByb3RvdHlwZSx7ZXh0cmFjdEFsbFBvaW50czpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZTogLmV4dHJhY3RBbGxQb2ludHMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLmV4dHJhY3RQb2ludHMoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5leHRyYWN0UG9pbnRzKGUpfSxleHRydWRlOmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAuZXh0cnVkZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFeHRydWRlR2VvbWV0cnkoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHRuKHRoaXMsZSl9LG1ha2VHZW9tZXRyeTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFwZTogLm1ha2VHZW9tZXRyeSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBTaGFwZUdlb21ldHJ5KCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBmbih0aGlzLGUpfX0pO09iamVjdC5hc3NpZ24oTWUucHJvdG90eXBlLHtmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKGUsdCxyKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuZnJvbUF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIik7cmV0dXJuIHRoaXMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShlLHQscil9LGRpc3RhbmNlVG9NYW5oYXR0YW46ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLmRpc3RhbmNlVG9NYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5EaXN0YW5jZVRvKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkRpc3RhbmNlVG8oZSl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5sZW5ndGhNYW5oYXR0YW4oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYW5oYXR0YW5MZW5ndGgoKS5cIik7cmV0dXJuIHRoaXMubWFuaGF0dGFuTGVuZ3RoKCl9fSk7T2JqZWN0LmFzc2lnbihUZS5wcm90b3R5cGUse3NldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5zZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBpbnN0ZWFkLlwiKX0sc2V0RXVsZXJGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUXVhdGVybmlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUXVhdGVybmlvbigpIGluc3RlYWQuXCIpfSxnZXRQb3NpdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldFBvc2l0aW9uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhQb3NpdGlvbigpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oZSl9LGdldFNjYWxlRnJvbU1hdHJpeDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0U2NhbGVGcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFNjYWxlKCkuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhTY2FsZShlKX0sZ2V0Q29sdW1uRnJvbU1hdHJpeDpmdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRDb2x1bW5Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeENvbHVtbigpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHQsZSl9LGFwcGx5UHJvamVjdGlvbjpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuYXBwbHlQcm9qZWN0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5hcHBseU1hdHJpeDQoIG0gKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoZSl9LGZyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oZSx0LHIpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTtyZXR1cm4gdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKGUsdCxyKX0sZGlzdGFuY2VUb01hbmhhdHRhbjpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZGlzdGFuY2VUb01hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkRpc3RhbmNlVG8oKS5cIik7cmV0dXJuIHRoaXMubWFuaGF0dGFuRGlzdGFuY2VUbyhlKX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLlwiKTtyZXR1cm4gdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KTtPYmplY3QuYXNzaWduKENlLnByb3RvdHlwZSx7ZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihlLHQscil7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3JldHVybiB0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUoZSx0LHIpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pO09iamVjdC5hc3NpZ24oRi5wcm90b3R5cGUse2NvbXB1dGVUYW5nZW50czpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxjb21wdXRlTGluZURpc3RhbmNlczpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeTogLmNvbXB1dGVMaW5lRGlzdGFuY2VzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkxpbmUuY29tcHV0ZUxpbmVEaXN0YW5jZXMoKSBpbnN0ZWFkLlwiKX0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnk6IC5hcHBseU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmFwcGx5TWF0cml4NCgpLlwiKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoZSl9fSk7T2JqZWN0LmFzc2lnbihmLnByb3RvdHlwZSx7Z2V0Q2hpbGRCeU5hbWU6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRDaGlsZEJ5TmFtZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE9iamVjdEJ5TmFtZSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeU5hbWUoZSl9LHJlbmRlckRlcHRoOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5yZW5kZXJEZXB0aCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnJlbmRlck9yZGVyLCBpbnN0ZWFkLlwiKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLnRyYW5zbGF0ZU9uQXhpcyggYXhpcywgZGlzdGFuY2UgKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXModCxlKX0sZ2V0V29ybGRSb3RhdGlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRDogLmdldFdvcmxkUm90YXRpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuT2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKCB0YXJnZXQgKSBpbnN0ZWFkLlwiKX0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5hcHBseU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmFwcGx5TWF0cml4NCgpLlwiKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoZSl9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZi5wcm90b3R5cGUse2V1bGVyT3JkZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKTtyZXR1cm4gdGhpcy5yb3RhdGlvbi5vcmRlcn0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKTt0aGlzLnJvdGF0aW9uLm9yZGVyPWV9fSx1c2VRdWF0ZXJuaW9uOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAudXNlUXVhdGVybmlvbiBoYXMgYmVlbiByZW1vdmVkLiBUaGUgbGlicmFyeSBub3cgdXNlcyBxdWF0ZXJuaW9ucyBieSBkZWZhdWx0LlwiKX19fSk7T2JqZWN0LmFzc2lnbihJLnByb3RvdHlwZSx7c2V0RHJhd01vZGU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWVzaDogLnNldERyYXdNb2RlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIHJlbmRlcmVyIG5vdyBhbHdheXMgYXNzdW1lcyBUSFJFRS5UcmlhbmdsZXNEcmF3TW9kZS4gVHJhbnNmb3JtIHlvdXIgZ2VvbWV0cnkgdmlhIEJ1ZmZlckdlb21ldHJ5VXRpbHMudG9UcmlhbmdsZXNEcmF3TW9kZSgpIGlmIG5lY2Vzc2FyeS5cIil9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSS5wcm90b3R5cGUse2RyYXdNb2RlOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWVzaDogLmRyYXdNb2RlIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuXCIpO3JldHVybiAwfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWVzaDogLmRyYXdNb2RlIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSByZW5kZXJlciBub3cgYWx3YXlzIGFzc3VtZXMgVEhSRUUuVHJpYW5nbGVzRHJhd01vZGUuIFRyYW5zZm9ybSB5b3VyIGdlb21ldHJ5IHZpYSBCdWZmZXJHZW9tZXRyeVV0aWxzLnRvVHJpYW5nbGVzRHJhd01vZGUoKSBpZiBuZWNlc3NhcnkuXCIpfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhRdC5wcm90b3R5cGUse29iamVjdHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxPRDogLm9iamVjdHMgaGFzIGJlZW4gcmVuYW1lZCB0byAubGV2ZWxzLlwiKTtyZXR1cm4gdGhpcy5sZXZlbHN9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0ci5wcm90b3R5cGUsXCJ1c2VWZXJ0ZXhUZXh0dXJlXCIse2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlNrZWxldG9uOiB1c2VWZXJ0ZXhUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbjogdXNlVmVydGV4VGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtlci5wcm90b3R5cGUuaW5pdEJvbmVzPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNraW5uZWRNZXNoOiBpbml0Qm9uZXMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KG5pLnByb3RvdHlwZSxcIl9fYXJjTGVuZ3RoRGl2aXNpb25zXCIse2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuX19hcmNMZW5ndGhEaXZpc2lvbnMgaXMgbm93IC5hcmNMZW5ndGhEaXZpc2lvbnMuXCIpO3JldHVybiB0aGlzLmFyY0xlbmd0aERpdmlzaW9uc30sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiAuX19hcmNMZW5ndGhEaXZpc2lvbnMgaXMgbm93IC5hcmNMZW5ndGhEaXZpc2lvbnMuXCIpO3RoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPWV9fSk7SC5wcm90b3R5cGUuc2V0TGVucz1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnNldExlbnMgaXMgZGVwcmVjYXRlZC4gVXNlIC5zZXRGb2NhbExlbmd0aCBhbmQgLmZpbG1HYXVnZSBmb3IgYSBwaG90b2dyYXBoaWMgc2V0dXAuXCIpO3ZvaWQgMCE9PXQmJih0aGlzLmZpbG1HYXVnZT10KTt0aGlzLnNldEZvY2FsTGVuZ3RoKGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh4aS5wcm90b3R5cGUse29ubHlTaGFkb3c6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAub25seVNoYWRvdyBoYXMgYmVlbiByZW1vdmVkLlwiKX19LHNoYWRvd0NhbWVyYUZvdjp7c2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhRm92IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5mb3YuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5mb3Y9ZX19LHNoYWRvd0NhbWVyYUxlZnQ6e3NldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUxlZnQgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmxlZnQuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5sZWZ0PWV9fSxzaGFkb3dDYW1lcmFSaWdodDp7c2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhUmlnaHQgaXMgbm93IC5zaGFkb3cuY2FtZXJhLnJpZ2h0LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEucmlnaHQ9ZX19LHNoYWRvd0NhbWVyYVRvcDp7c2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVG9wIGlzIG5vdyAuc2hhZG93LmNhbWVyYS50b3AuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS50b3A9ZX19LHNoYWRvd0NhbWVyYUJvdHRvbTp7c2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhQm90dG9tIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5ib3R0b20uXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5ib3R0b209ZX19LHNoYWRvd0NhbWVyYU5lYXI6e3NldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYU5lYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLm5lYXIuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5uZWFyPWV9fSxzaGFkb3dDYW1lcmFGYXI6e3NldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZmFyLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEuZmFyPWV9fSxzaGFkb3dDYW1lcmFWaXNpYmxlOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVZpc2libGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5DYW1lcmFIZWxwZXIoIGxpZ2h0LnNoYWRvdy5jYW1lcmEgKSBpbnN0ZWFkLlwiKX19LHNoYWRvd0JpYXM6e3NldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0JpYXMgaXMgbm93IC5zaGFkb3cuYmlhcy5cIik7dGhpcy5zaGFkb3cuYmlhcz1lfX0sc2hhZG93RGFya25lc3M6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93RGFya25lc3MgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSxzaGFkb3dNYXBXaWR0aDp7c2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93TWFwV2lkdGggaXMgbm93IC5zaGFkb3cubWFwU2l6ZS53aWR0aC5cIik7dGhpcy5zaGFkb3cubWFwU2l6ZS53aWR0aD1lfX0sc2hhZG93TWFwSGVpZ2h0OntzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBIZWlnaHQgaXMgbm93IC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQuXCIpO3RoaXMuc2hhZG93Lm1hcFNpemUuaGVpZ2h0PWV9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEUucHJvdG90eXBlLHtsZW5ndGg6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmNvdW50IGluc3RlYWQuXCIpO3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aH19LGR5bmFtaWM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmR5bmFtaWMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKTtyZXR1cm4gMzUwNDg9PT10aGlzLnVzYWdlfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5keW5hbWljIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudXNhZ2UgaW5zdGVhZC5cIik7dGhpcy5zZXRVc2FnZSgzNTA0OCl9fX0pO09iamVjdC5hc3NpZ24oRS5wcm90b3R5cGUse3NldER5bmFtaWM6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAuc2V0RHluYW1pYygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2V0VXNhZ2UoKSBpbnN0ZWFkLlwiKTt0aGlzLnNldFVzYWdlKCEwPT09ZT8zNTA0ODozNTA0NCk7cmV0dXJuIHRoaXN9LGNvcHlJbmRpY2VzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAuY29weUluZGljZXNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXRBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IC5zZXRBcnJheSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgQnVmZmVyR2VvbWV0cnkgLnNldEF0dHJpYnV0ZSB0byByZXBsYWNlL3Jlc2l6ZSBhdHRyaWJ1dGUgYnVmZmVyc1wiKX19KTtPYmplY3QuYXNzaWduKE4ucHJvdG90eXBlLHthZGRJbmRleDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEluZGV4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0SW5kZXgoKS5cIik7dGhpcy5zZXRJbmRleChlKX0sYWRkQXR0cmlidXRlOmZ1bmN0aW9uKGUsdCxyKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEF0dHJpYnV0ZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEF0dHJpYnV0ZSgpLlwiKTtyZXR1cm4gdCYmdC5pc0J1ZmZlckF0dHJpYnV0ZXx8dCYmdC5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP1wiaW5kZXhcIj09PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5LmFkZEF0dHJpYnV0ZTogVXNlIC5zZXRJbmRleCgpIGZvciBpbmRleCBhdHRyaWJ1dGUuXCIpLHRoaXMuc2V0SW5kZXgodCksdGhpcyk6dGhpcy5zZXRBdHRyaWJ1dGUoZSx0KTooY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRBdHRyaWJ1dGUoKSBub3cgZXhwZWN0cyAoIG5hbWUsIGF0dHJpYnV0ZSApLlwiKSx0aGlzLnNldEF0dHJpYnV0ZShlLG5ldyBFKHQscikpKX0sYWRkRHJhd0NhbGw6ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMCE9PXImJmNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkRHJhd0NhbGwoKSBubyBsb25nZXIgc3VwcG9ydHMgaW5kZXhPZmZzZXQuXCIpO2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkRHJhd0NhbGwoKSBpcyBub3cgLmFkZEdyb3VwKCkuXCIpO3RoaXMuYWRkR3JvdXAoZSx0KX0sY2xlYXJEcmF3Q2FsbHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNsZWFyRHJhd0NhbGxzKCkgaXMgbm93IC5jbGVhckdyb3VwcygpLlwiKTt0aGlzLmNsZWFyR3JvdXBzKCl9LGNvbXB1dGVUYW5nZW50czpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZVRhbmdlbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGNvbXB1dGVPZmZzZXRzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jb21wdXRlT2Zmc2V0cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5yZW1vdmVBdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5kZWxldGVBdHRyaWJ1dGUoKS5cIik7cmV0dXJuIHRoaXMuZGVsZXRlQXR0cmlidXRlKGUpfSxhcHBseU1hdHJpeDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFwcGx5TWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuYXBwbHlNYXRyaXg0KCkuXCIpO3JldHVybiB0aGlzLmFwcGx5TWF0cml4NChlKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSx7ZHJhd2NhbGxzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5kcmF3Y2FsbHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKTtyZXR1cm4gdGhpcy5ncm91cHN9fSxvZmZzZXRzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLm9mZnNldHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKTtyZXR1cm4gdGhpcy5ncm91cHN9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKElpLnByb3RvdHlwZSx7bWF4SW5zdGFuY2VkQ291bnQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5OiAubWF4SW5zdGFuY2VkQ291bnQgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW5zdGFuY2VDb3VudC5cIik7cmV0dXJuIHRoaXMuaW5zdGFuY2VDb3VudH0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5OiAubWF4SW5zdGFuY2VkQ291bnQgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW5zdGFuY2VDb3VudC5cIik7dGhpcy5pbnN0YW5jZUNvdW50PWV9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNvLnByb3RvdHlwZSx7bGluZVByZWNpc2lvbjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyOiAubGluZVByZWNpc2lvbiBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnBhcmFtcy5MaW5lLnRocmVzaG9sZCBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5wYXJhbXMuTGluZS50aHJlc2hvbGR9LHNldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXI6IC5saW5lUHJlY2lzaW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAucGFyYW1zLkxpbmUudGhyZXNob2xkIGluc3RlYWQuXCIpO3RoaXMucGFyYW1zLkxpbmUudGhyZXNob2xkPWV9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFh0LnByb3RvdHlwZSx7ZHluYW1pYzp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI6IC5sZW5ndGggaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKTtyZXR1cm4gMzUwNDg9PT10aGlzLnVzYWdlfSxzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI6IC5sZW5ndGggaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC51c2FnZSBpbnN0ZWFkLlwiKTt0aGlzLnNldFVzYWdlKGUpfX19KTtPYmplY3QuYXNzaWduKFh0LnByb3RvdHlwZSx7c2V0RHluYW1pYzpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlcjogLnNldER5bmFtaWMoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNldFVzYWdlKCkgaW5zdGVhZC5cIik7dGhpcy5zZXRVc2FnZSghMD09PWU/MzUwNDg6MzUwNDQpO3JldHVybiB0aGlzfSxzZXRBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlcjogLnNldEFycmF5IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBCdWZmZXJHZW9tZXRyeSAuc2V0QXR0cmlidXRlIHRvIHJlcGxhY2UvcmVzaXplIGF0dHJpYnV0ZSBidWZmZXJzXCIpfX0pO09iamVjdC5hc3NpZ24ocm4ucHJvdG90eXBlLHtnZXRBcnJheXM6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5OiAuZ2V0QXJyYXlzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFkZFNoYXBlTGlzdDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlQnVmZmVyR2VvbWV0cnk6IC5hZGRTaGFwZUxpc3QoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkU2hhcGU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuRXh0cnVkZUJ1ZmZlckdlb21ldHJ5OiAuYWRkU2hhcGUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvby5wcm90b3R5cGUse2R5bmFtaWM6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IC5keW5hbWljIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBvYmplY3Qub25CZWZvcmVSZW5kZXIoKSBpbnN0ZWFkLlwiKX19LG9uVXBkYXRlOnt2YWx1ZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlVuaWZvcm06IC5vblVwZGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBvYmplY3Qub25CZWZvcmVSZW5kZXIoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpc319fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeS5wcm90b3R5cGUse3dyYXBBcm91bmQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwQXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sb3ZlcmRyYXc6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAub3ZlcmRyYXcgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAub3ZlcmRyYXcgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSx3cmFwUkdCOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLndyYXBSR0IgaGFzIGJlZW4gcmVtb3ZlZC5cIik7cmV0dXJuIG5ldyB2fX0sc2hhZGluZzp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLlwiKTt0aGlzLmZsYXRTaGFkaW5nPTE9PT1lfX0sc3RlbmNpbE1hc2s6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnN0ZW5jaWxNYXNrIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuc3RlbmNpbEZ1bmNNYXNrIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLnN0ZW5jaWxGdW5jTWFza30sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnN0ZW5jaWxNYXNrIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuc3RlbmNpbEZ1bmNNYXNrIGluc3RlYWQuXCIpO3RoaXMuc3RlbmNpbEZ1bmNNYXNrPWV9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEVuLnByb3RvdHlwZSx7bWV0YWw6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWQuXCIpO3JldHVybiExfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbDogLm1ldGFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCBpbnN0ZWFkXCIpfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhHLnByb3RvdHlwZSx7ZGVyaXZhdGl2ZXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiAuZGVyaXZhdGl2ZXMgaGFzIGJlZW4gbW92ZWQgdG8gLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXN9LHNldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS4gU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy5cIik7dGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzPWV9fX0pO09iamVjdC5hc3NpZ24oVXQucHJvdG90eXBlLHtjbGVhclRhcmdldDpmdW5jdGlvbihlLHQscixuKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuY2xlYXJUYXJnZXQoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNldFJlbmRlclRhcmdldCgpIGFuZCAuY2xlYXIoKSBpbnN0ZWFkLlwiKTt0aGlzLnNldFJlbmRlclRhcmdldChlKTt0aGlzLmNsZWFyKHQscixuKX0sYW5pbWF0ZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYW5pbWF0ZSgpIGlzIG5vdyAuc2V0QW5pbWF0aW9uTG9vcCgpLlwiKTt0aGlzLnNldEFuaW1hdGlvbkxvb3AoZSl9LGdldEN1cnJlbnRSZW5kZXJUYXJnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0Q3VycmVudFJlbmRlclRhcmdldCgpIGlzIG5vdyAuZ2V0UmVuZGVyVGFyZ2V0KCkuXCIpO3JldHVybiB0aGlzLmdldFJlbmRlclRhcmdldCgpfSxnZXRNYXhBbmlzb3Ryb3B5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldE1heEFuaXNvdHJvcHkoKSBpcyBub3cgLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCkuXCIpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCl9LGdldFByZWNpc2lvbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRQcmVjaXNpb24oKSBpcyBub3cgLmNhcGFiaWxpdGllcy5wcmVjaXNpb24uXCIpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy5wcmVjaXNpb259LHJlc2V0R0xTdGF0ZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5yZXNldEdMU3RhdGUoKSBpcyBub3cgLnN0YXRlLnJlc2V0KCkuXCIpO3JldHVybiB0aGlzLnN0YXRlLnJlc2V0KCl9LHN1cHBvcnRzRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0Zsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfZmxvYXQnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil9LHN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIil9LHN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKX0sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVQVlJUQzpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUFZSVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKX0sc3VwcG9ydHNCbGVuZE1pbk1heDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0JsZW5kTWluTWF4KCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0VYVF9ibGVuZF9taW5tYXgnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKX0sc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1ZlcnRleFRleHR1cmVzKCkgaXMgbm93IC5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXMuXCIpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlc30sc3VwcG9ydHNJbnN0YW5jZWRBcnJheXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNJbnN0YW5jZWRBcnJheXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpfSxlbmFibGVTY2lzc29yVGVzdDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZW5hYmxlU2Npc3NvclRlc3QoKSBpcyBub3cgLnNldFNjaXNzb3JUZXN0KCkuXCIpO3RoaXMuc2V0U2Npc3NvclRlc3QoZSl9LGluaXRNYXRlcmlhbDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5pbml0TWF0ZXJpYWwoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkUHJlUGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFByZVBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRQb3N0UGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFBvc3RQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sdXBkYXRlU2hhZG93TWFwOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnVwZGF0ZVNoYWRvd01hcCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXRGYWNlQ3VsbGluZzpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRGYWNlQ3VsbGluZygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhbGxvY1RleHR1cmVVbml0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFsbG9jVGV4dHVyZVVuaXQoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0VGV4dHVyZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldFRleHR1cmUyRDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlMkQoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0VGV4dHVyZUN1YmU6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZUN1YmUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sZ2V0QWN0aXZlTWlwTWFwTGV2ZWw6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0QWN0aXZlTWlwTWFwTGV2ZWwoKSBpcyBub3cgLmdldEFjdGl2ZU1pcG1hcExldmVsKCkuXCIpO3JldHVybiB0aGlzLmdldEFjdGl2ZU1pcG1hcExldmVsKCl9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVXQucHJvdG90eXBlLHtzaGFkb3dNYXBFbmFibGVkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAuZW5hYmxlZH0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBFbmFibGVkIGlzIG5vdyAuc2hhZG93TWFwLmVuYWJsZWQuXCIpO3RoaXMuc2hhZG93TWFwLmVuYWJsZWQ9ZX19LHNoYWRvd01hcFR5cGU6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC50eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcFR5cGUgaXMgbm93IC5zaGFkb3dNYXAudHlwZS5cIik7dGhpcy5zaGFkb3dNYXAudHlwZT1lfX0sc2hhZG93TWFwQ3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBDdWxsRmFjZSBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEN1bGxGYWNlIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfX0sY29udGV4dDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmNvbnRleHQgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5nZXRDb250ZXh0KCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpfX0sdnI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC52ciBoYXMgYmVlbiByZW5hbWVkIHRvIC54clwiKTtyZXR1cm4gdGhpcy54cn19LGdhbW1hSW5wdXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nYW1tYUlucHV0IGhhcyBiZWVuIHJlbW92ZWQuIFNldCB0aGUgZW5jb2RpbmcgZm9yIHRleHR1cmVzIHZpYSBUZXh0dXJlLmVuY29kaW5nIGluc3RlYWQuXCIpO3JldHVybiExfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2FtbWFJbnB1dCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgdGhlIGVuY29kaW5nIGZvciB0ZXh0dXJlcyB2aWEgVGV4dHVyZS5lbmNvZGluZyBpbnN0ZWFkLlwiKX19LGdhbW1hT3V0cHV0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2FtbWFPdXRwdXQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IFdlYkdMUmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgaW5zdGVhZC5cIik7cmV0dXJuITF9LHNldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2FtbWFPdXRwdXQgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IFdlYkdMUmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgaW5zdGVhZC5cIik7dGhpcy5vdXRwdXRFbmNvZGluZz0hMD09PWU/MzAwMTozZTN9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEl0LnByb3RvdHlwZSx7Y3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAuY3VsbEZhY2UgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAuY3VsbEZhY2UgaGFzIGJlZW4gcmVtb3ZlZC4gU2V0IE1hdGVyaWFsLnNoYWRvd1NpZGUgaW5zdGVhZC5cIil9fSxyZW5kZXJSZXZlcnNlU2lkZWQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAucmVuZGVyUmV2ZXJzZVNpZGVkIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLnJlbmRlclJldmVyc2VTaWRlZCBoYXMgYmVlbiByZW1vdmVkLiBTZXQgTWF0ZXJpYWwuc2hhZG93U2lkZSBpbnN0ZWFkLlwiKX19LHJlbmRlclNpbmdsZVNpZGVkOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLnJlbmRlclNpbmdsZVNpZGVkIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLnJlbmRlclNpbmdsZVNpZGVkIGhhcyBiZWVuIHJlbW92ZWQuIFNldCBNYXRlcmlhbC5zaGFkb3dTaWRlIGluc3RlYWQuXCIpfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhULnByb3RvdHlwZSx7d3JhcFM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFMgaXMgbm93IC50ZXh0dXJlLndyYXBTLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLndyYXBTfSxzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuXCIpO3RoaXMudGV4dHVyZS53cmFwUz1lfX0sd3JhcFQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLndyYXBUfSxzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuXCIpO3RoaXMudGV4dHVyZS53cmFwVD1lfX0sbWFnRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcn0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWFnRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5tYWdGaWx0ZXIuXCIpO3RoaXMudGV4dHVyZS5tYWdGaWx0ZXI9ZX19LG1pbkZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5taW5GaWx0ZXJ9LHNldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLlwiKTt0aGlzLnRleHR1cmUubWluRmlsdGVyPWV9fSxhbmlzb3Ryb3B5OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpO3JldHVybiB0aGlzLnRleHR1cmUuYW5pc290cm9weX0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS5cIik7dGhpcy50ZXh0dXJlLmFuaXNvdHJvcHk9ZX19LG9mZnNldDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5vZmZzZXR9LHNldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LlwiKTt0aGlzLnRleHR1cmUub2Zmc2V0PWV9fSxyZXBlYXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAucmVwZWF0IGlzIG5vdyAudGV4dHVyZS5yZXBlYXQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUucmVwZWF0fSxzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC5cIik7dGhpcy50ZXh0dXJlLnJlcGVhdD1lfX0sZm9ybWF0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmZvcm1hdH0sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuXCIpO3RoaXMudGV4dHVyZS5mb3JtYXQ9ZX19LHR5cGU6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS50eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC50eXBlIGlzIG5vdyAudGV4dHVyZS50eXBlLlwiKTt0aGlzLnRleHR1cmUudHlwZT1lfX0sZ2VuZXJhdGVNaXBtYXBzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmdlbmVyYXRlTWlwbWFwcyBpcyBub3cgLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwc30sc2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuXCIpO3RoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9ZX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoS2kucHJvdG90eXBlLHtsb2FkOnt2YWx1ZTpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogLmxvYWQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkF1ZGlvTG9hZGVyIGluc3RlYWQuXCIpO3ZhciB0PXRoaXM7KG5ldyBIaSkubG9hZChlLGZ1bmN0aW9uKGUpe3Quc2V0QnVmZmVyKGUpfSk7cmV0dXJuIHRoaXN9fSxzdGFydFRpbWU6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiAuc3RhcnRUaW1lIGlzIG5vdyAucGxheSggZGVsYXkgKS5cIil9fX0pO0ppLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW9BbmFseXNlcjogLmdldERhdGEoKSBpcyBub3cgLmdldEZyZXF1ZW5jeURhdGEoKS5cIik7cmV0dXJuIHRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpfTtVLnByb3RvdHlwZS51cGRhdGVDdWJlTWFwPWZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3ViZUNhbWVyYTogLnVwZGF0ZUN1YmVNYXAoKSBpcyBub3cgLnVwZGF0ZSgpLlwiKTtyZXR1cm4gdGhpcy51cGRhdGUoZSx0KX07VW8uY3Jvc3NPcmlnaW49dm9pZCAwO1VvLmxvYWRUZXh0dXJlPWZ1bmN0aW9uKGUsdCxyLG4pe2NvbnNvbGUud2FybihcIlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLlRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTt2YXIgaT1uZXcgcmk7aS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtlPWkubG9hZChlLHIsdm9pZCAwLG4pO3QmJihlLm1hcHBpbmc9dCk7cmV0dXJuIGV9O1VvLmxvYWRUZXh0dXJlQ3ViZT1mdW5jdGlvbihlLHQscixuKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTt2YXIgaT1uZXcgdGk7aS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtlPWkubG9hZChlLHIsdm9pZCAwLG4pO3QmJihlLm1hcHBpbmc9dCk7cmV0dXJuIGV9O1VvLmxvYWRDb21wcmVzc2VkVGV4dHVyZT1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRERTTG9hZGVyIGluc3RlYWQuXCIpfTtVby5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRERTTG9hZGVyIGluc3RlYWQuXCIpfTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIF9fVEhSRUVfREVWVE9PTFNfXyYmX19USFJFRV9ERVZUT09MU19fLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwicmVnaXN0ZXJcIix7ZGV0YWlsOntyZXZpc2lvbjpcIjExN1wifX0pKTtlLkFDRVNGaWxtaWNUb25lTWFwcGluZz01O2UuQWRkRXF1YXRpb249MTAwO2UuQWRkT3BlcmF0aW9uPTI7ZS5BZGRpdGl2ZUFuaW1hdGlvbkJsZW5kTW9kZT0yNTAxO2UuQWRkaXRpdmVCbGVuZGluZz0yO2UuQWxwaGFGb3JtYXQ9MTAyMTtlLkFsd2F5c0RlcHRoPTE7ZS5BbHdheXNTdGVuY2lsRnVuYz01MTk7ZS5BbWJpZW50TGlnaHQ9amk7ZS5BbWJpZW50TGlnaHRQcm9iZT1xaTtlLkFuaW1hdGlvbkNsaXA9VW47ZS5BbmltYXRpb25Mb2FkZXI9Wm47ZS5BbmltYXRpb25NaXhlcj1pbztlLkFuaW1hdGlvbk9iamVjdEdyb3VwPXJvO2UuQW5pbWF0aW9uVXRpbHM9RHU7ZS5BcmNDdXJ2ZT1vaTtlLkFycmF5Q2FtZXJhPXp0O2UuQXJyb3dIZWxwZXI9UG87ZS5BdWRpbz1LaTtlLkF1ZGlvQW5hbHlzZXI9Smk7ZS5BdWRpb0NvbnRleHQ9SnU7ZS5BdWRpb0xpc3RlbmVyPVlpO2UuQXVkaW9Mb2FkZXI9SGk7ZS5BeGVzSGVscGVyPUFvO2UuQXhpc0hlbHBlcj1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5BeGlzSGVscGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuQXhlc0hlbHBlci5cIik7cmV0dXJuIG5ldyBBbyhlKX07ZS5CYWNrU2lkZT0xO2UuQmFzaWNEZXB0aFBhY2tpbmc9MzIwMDtlLkJhc2ljU2hhZG93TWFwPTA7ZS5CaW5hcnlUZXh0dXJlTG9hZGVyPWZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLkJpbmFyeVRleHR1cmVMb2FkZXIgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5EYXRhVGV4dHVyZUxvYWRlci5cIik7cmV0dXJuIG5ldyBRbihlKX07ZS5Cb25lPXJyO2UuQm9vbGVhbktleWZyYW1lVHJhY2s9Qm47ZS5Cb3VuZGluZ0JveEhlbHBlcj1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkJvdW5kaW5nQm94SGVscGVyIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIENyZWF0aW5nIGEgVEhSRUUuQm94SGVscGVyIGluc3RlYWQuXCIpO3JldHVybiBuZXcgVG8oZSx0KX07ZS5Cb3gyPXBvO2UuQm94Mz1uO2UuQm94M0hlbHBlcj1FbztlLkJveEJ1ZmZlckdlb21ldHJ5PWpzO2UuQm94R2VvbWV0cnk9QXM7ZS5Cb3hIZWxwZXI9VG87ZS5CdWZmZXJBdHRyaWJ1dGU9RTtlLkJ1ZmZlckdlb21ldHJ5PU47ZS5CdWZmZXJHZW9tZXRyeUxvYWRlcj1CaTtlLkJ5dGVUeXBlPTEwMTA7ZS5DYWNoZT1CdTtlLkNhbWVyYT1WO2UuQ2FtZXJhSGVscGVyPU1vO2UuQ2FudmFzUmVuZGVyZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQ2FudmFzUmVuZGVyZXIgaGFzIGJlZW4gcmVtb3ZlZFwiKX07ZS5DYW52YXNUZXh0dXJlPWZyO2UuQ2F0bXVsbFJvbUN1cnZlMz1zaTtlLkNpbmVvblRvbmVNYXBwaW5nPTQ7ZS5DaXJjbGVCdWZmZXJHZW9tZXRyeT13bjtlLkNpcmNsZUdlb21ldHJ5PXhuO2UuQ2xhbXBUb0VkZ2VXcmFwcGluZz0xMDAxO2UuQ2xvY2s9WGk7ZS5DbG9zZWRTcGxpbmVDdXJ2ZTM9Qm87ZS5Db2xvcj12O2UuQ29sb3JLZXlmcmFtZVRyYWNrPUZuO2UuQ29tcHJlc3NlZFRleHR1cmU9cHI7ZS5Db21wcmVzc2VkVGV4dHVyZUxvYWRlcj1KbjtlLkNvbmVCdWZmZXJHZW9tZXRyeT1ibjtlLkNvbmVHZW9tZXRyeT15bjtlLkN1YmVDYW1lcmE9VTtlLkN1YmVHZW9tZXRyeT1BcztlLkN1YmVSZWZsZWN0aW9uTWFwcGluZz0zMDE7ZS5DdWJlUmVmcmFjdGlvbk1hcHBpbmc9MzAyO2UuQ3ViZVRleHR1cmU9SztlLkN1YmVUZXh0dXJlTG9hZGVyPXRpO2UuQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc9MzA2O2UuQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc9MzA3O2UuQ3ViaWNCZXppZXJDdXJ2ZT1oaTtlLkN1YmljQmV6aWVyQ3VydmUzPXBpO2UuQ3ViaWNJbnRlcnBvbGFudD1MbjtlLkN1bGxGYWNlQmFjaz0xO2UuQ3VsbEZhY2VGcm9udD0yO2UuQ3VsbEZhY2VGcm9udEJhY2s9MztlLkN1bGxGYWNlTm9uZT0wO2UuQ3VydmU9bmk7ZS5DdXJ2ZVBhdGg9X2k7ZS5DdXN0b21CbGVuZGluZz01O2UuQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeT1fbjtlLkN5bGluZGVyR2VvbWV0cnk9Z247ZS5DeWxpbmRyaWNhbD1obztlLkRhdGFUZXh0dXJlPVBlO2UuRGF0YVRleHR1cmUyREFycmF5PVo7ZS5EYXRhVGV4dHVyZTNEPUo7ZS5EYXRhVGV4dHVyZUxvYWRlcj1RbjtlLkRlY3JlbWVudFN0ZW5jaWxPcD03NjgzO2UuRGVjcmVtZW50V3JhcFN0ZW5jaWxPcD0zNDA1NjtlLkRlZmF1bHRMb2FkaW5nTWFuYWdlcj1GdTtlLkRlcHRoRm9ybWF0PTEwMjY7ZS5EZXB0aFN0ZW5jaWxGb3JtYXQ9MTAyNztlLkRlcHRoVGV4dHVyZT1kcjtlLkRpcmVjdGlvbmFsTGlnaHQ9QWk7ZS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyPVNvO2UuRGlyZWN0aW9uYWxMaWdodFNoYWRvdz1QaTtlLkRpc2NyZXRlSW50ZXJwb2xhbnQ9SW47ZS5Eb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeT1FcjtlLkRvZGVjYWhlZHJvbkdlb21ldHJ5PVRyO2UuRG91YmxlU2lkZT0yO2UuRHN0QWxwaGFGYWN0b3I9MjA2O2UuRHN0Q29sb3JGYWN0b3I9MjA4O2UuRHluYW1pY0J1ZmZlckF0dHJpYnV0ZT1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkR5bmFtaWNCdWZmZXJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoKS5zZXRVc2FnZSggVEhSRUUuRHluYW1pY0RyYXdVc2FnZSApIGluc3RlYWQuXCIpO3JldHVybiBuZXcgRShlLHQpLnNldFVzYWdlKDM1MDQ4KX07ZS5EeW5hbWljQ29weVVzYWdlPTM1MDUwO2UuRHluYW1pY0RyYXdVc2FnZT0zNTA0ODtlLkR5bmFtaWNSZWFkVXNhZ2U9MzUwNDk7ZS5FZGdlc0dlb21ldHJ5PW1uO2UuRWRnZXNIZWxwZXI9ZnVuY3Rpb24oZSx0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5FZGdlc0hlbHBlciBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuRWRnZXNHZW9tZXRyeSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IGFyKG5ldyBtbihlLmdlb21ldHJ5KSxuZXcgaXIoe2NvbG9yOnZvaWQgMCE9PXQ/dDoxNjc3NzIxNX0pKX07ZS5FbGxpcHNlQ3VydmU9aWk7ZS5FcXVhbERlcHRoPTQ7ZS5FcXVhbFN0ZW5jaWxGdW5jPTUxNDtlLkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nPTMwMztlLkVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nPTMwNDtlLkV1bGVyPWk7ZS5FdmVudERpc3BhdGNoZXI9dDtlLkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeT1ybjtlLkV4dHJ1ZGVHZW9tZXRyeT10bjtlLkZhY2UzPV87ZS5GYWNlND1mdW5jdGlvbihlLHQscixuLGksbyxhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5GYWNlNCBoYXMgYmVlbiByZW1vdmVkLiBBIFRIUkVFLkZhY2UzIHdpbGwgYmUgY3JlYXRlZCBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IF8oZSx0LHIsaSxvLGEpfTtlLkZhY2VDb2xvcnM9MTtlLkZpbGVMb2FkZXI9S247ZS5GbGF0U2hhZGluZz0xO2UuRmxvYXQzMkF0dHJpYnV0ZT1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBqKGUsdCl9O2UuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZT1qO2UuRmxvYXQ2NEF0dHJpYnV0ZT1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLkZsb2F0NjRBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5GbG9hdDY0QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBSKGUsdCl9O2UuRmxvYXQ2NEJ1ZmZlckF0dHJpYnV0ZT1SO2UuRmxvYXRUeXBlPTEwMTU7ZS5Gb2c9V3Q7ZS5Gb2dFeHAyPXF0O2UuRm9udD1HaTtlLkZvbnRMb2FkZXI9Vmk7ZS5Gcm9udEZhY2VEaXJlY3Rpb25DQ1c9MTtlLkZyb250RmFjZURpcmVjdGlvbkNXPTA7ZS5Gcm9udFNpZGU9MDtlLkZydXN0dW09QWU7ZS5HYW1tYUVuY29kaW5nPTMwMDc7ZS5HZW9tZXRyeT1GO2UuR2VvbWV0cnlVdGlscz17bWVyZ2U6ZnVuY3Rpb24oZSx0LHIpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5VXRpbHM6IC5tZXJnZSgpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkubWVyZ2UoIGdlb21ldHJ5MiwgbWF0cml4LCBtYXRlcmlhbEluZGV4T2Zmc2V0ICkgaW5zdGVhZC5cIik7aWYodC5pc01lc2gpe3QubWF0cml4QXV0b1VwZGF0ZSYmdC51cGRhdGVNYXRyaXgoKTt2YXIgbj10Lm1hdHJpeDt0PXQuZ2VvbWV0cnl9ZS5tZXJnZSh0LG4scil9LGNlbnRlcjpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeVV0aWxzOiAuY2VudGVyKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5jZW50ZXIoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gZS5jZW50ZXIoKX19O2UuR3JlYXRlckRlcHRoPTY7ZS5HcmVhdGVyRXF1YWxEZXB0aD01O2UuR3JlYXRlckVxdWFsU3RlbmNpbEZ1bmM9NTE4O2UuR3JlYXRlclN0ZW5jaWxGdW5jPTUxNjtlLkdyaWRIZWxwZXI9eG87ZS5Hcm91cD0kdDtlLkhhbGZGbG9hdFR5cGU9MTAxNjtlLkhlbWlzcGhlcmVMaWdodD13aTtlLkhlbWlzcGhlcmVMaWdodEhlbHBlcj1ibztlLkhlbWlzcGhlcmVMaWdodFByb2JlPVVpO2UuSWNvc2FoZWRyb25CdWZmZXJHZW9tZXRyeT1DcjtlLkljb3NhaGVkcm9uR2VvbWV0cnk9TXI7ZS5JbWFnZUJpdG1hcExvYWRlcj16aTtlLkltYWdlTG9hZGVyPWVpO2UuSW1hZ2VVdGlscz1VbztlLkltbWVkaWF0ZVJlbmRlck9iamVjdD12bztlLkluY3JlbWVudFN0ZW5jaWxPcD03NjgyO2UuSW5jcmVtZW50V3JhcFN0ZW5jaWxPcD0zNDA1NTtlLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZT1EaTtlLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PUlpO2UuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI9YW87ZS5JbnN0YW5jZWRNZXNoPW5yO2UuSW50MTZBdHRyaWJ1dGU9ZnVuY3Rpb24oZSx0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbnQxNkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDE2QnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBDKGUsdCl9O2UuSW50MTZCdWZmZXJBdHRyaWJ1dGU9QztlLkludDMyQXR0cmlidXRlPWZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50MzJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5JbnQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgUChlLHQpfTtlLkludDMyQnVmZmVyQXR0cmlidXRlPVA7ZS5JbnQ4QXR0cmlidXRlPWZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50OEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDhCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHcoZSx0KX07ZS5JbnQ4QnVmZmVyQXR0cmlidXRlPXc7ZS5JbnRUeXBlPTEwMTM7ZS5JbnRlcmxlYXZlZEJ1ZmZlcj1YdDtlLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlPVl0O2UuSW50ZXJwb2xhbnQ9a247ZS5JbnRlcnBvbGF0ZURpc2NyZXRlPTIzMDA7ZS5JbnRlcnBvbGF0ZUxpbmVhcj0yMzAxO2UuSW50ZXJwb2xhdGVTbW9vdGg9MjMwMjtlLkludmVydFN0ZW5jaWxPcD01Mzg2O2UuSlNPTkxvYWRlcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5KU09OTG9hZGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpfTtlLktlZXBTdGVuY2lsT3A9NzY4MDtlLktleWZyYW1lVHJhY2s9RG47ZS5MT0Q9UXQ7ZS5MYXRoZUJ1ZmZlckdlb21ldHJ5PXBuO2UuTGF0aGVHZW9tZXRyeT1objtlLkxheWVycz1vO2UuTGVuc0ZsYXJlPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkxlbnNGbGFyZSBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanNtL29iamVjdHMvTGVuc2ZsYXJlLmpzXCIpfTtlLkxlc3NEZXB0aD0yO2UuTGVzc0VxdWFsRGVwdGg9MztlLkxlc3NFcXVhbFN0ZW5jaWxGdW5jPTUxNTtlLkxlc3NTdGVuY2lsRnVuYz01MTM7ZS5MaWdodD14aTtlLkxpZ2h0UHJvYmU9TGk7ZS5MaWdodFNoYWRvdz1TaTtlLkxpbmU9b3I7ZS5MaW5lMz1mbztlLkxpbmVCYXNpY01hdGVyaWFsPWlyO2UuTGluZUN1cnZlPWZpO2UuTGluZUN1cnZlMz1kaTtlLkxpbmVEYXNoZWRNYXRlcmlhbD1SbjtlLkxpbmVMb29wPXNyO2UuTGluZVBpZWNlcz0xO2UuTGluZVNlZ21lbnRzPWFyO2UuTGluZVN0cmlwPTA7ZS5MaW5lYXJFbmNvZGluZz0zZTM7ZS5MaW5lYXJGaWx0ZXI9MTAwNjtlLkxpbmVhckludGVycG9sYW50PU5uO2UuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyPTEwMDg7ZS5MaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDc7ZS5MaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXI9MTAwODtlLkxpbmVhck1pcG1hcE5lYXJlc3RGaWx0ZXI9MTAwNztlLkxpbmVhclRvbmVNYXBwaW5nPTE7ZS5Mb2FkZXI9WW47ZS5Mb2FkZXJVdGlscz1xdTtlLkxvYWRpbmdNYW5hZ2VyPVhuO2UuTG9nTHV2RW5jb2Rpbmc9MzAwMztlLkxvb3BPbmNlPTIyMDA7ZS5Mb29wUGluZ1Bvbmc9MjIwMjtlLkxvb3BSZXBlYXQ9MjIwMTtlLkx1bWluYW5jZUFscGhhRm9ybWF0PTEwMjU7ZS5MdW1pbmFuY2VGb3JtYXQ9MTAyNDtlLk1PVVNFPXtMRUZUOjAsTUlERExFOjEsUklHSFQ6MixST1RBVEU6MCxET0xMWToxLFBBTjoyfTtlLk1hdGVyaWFsPXk7ZS5NYXRlcmlhbExvYWRlcj1OaTtlLk1hdGg9Vm87ZS5NYXRoVXRpbHM9Vm87ZS5NYXRyaXgzPW07ZS5NYXRyaXg0PUVlO2UuTWF4RXF1YXRpb249MTA0O2UuTWVzaD1JO2UuTWVzaEJhc2ljTWF0ZXJpYWw9eDtlLk1lc2hEZXB0aE1hdGVyaWFsPUx0O2UuTWVzaERpc3RhbmNlTWF0ZXJpYWw9TnQ7ZS5NZXNoRmFjZU1hdGVyaWFsPWZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGFuIEFycmF5IGluc3RlYWQuXCIpO3JldHVybiBlfTtlLk1lc2hMYW1iZXJ0TWF0ZXJpYWw9QW47ZS5NZXNoTWF0Y2FwTWF0ZXJpYWw9am47ZS5NZXNoTm9ybWFsTWF0ZXJpYWw9UG47ZS5NZXNoUGhvbmdNYXRlcmlhbD1FbjtlLk1lc2hQaHlzaWNhbE1hdGVyaWFsPVRuO2UuTWVzaFN0YW5kYXJkTWF0ZXJpYWw9Q247ZS5NZXNoVG9vbk1hdGVyaWFsPU9uO2UuTWluRXF1YXRpb249MTAzO2UuTWlycm9yZWRSZXBlYXRXcmFwcGluZz0xMDAyO2UuTWl4T3BlcmF0aW9uPTE7ZS5NdWx0aU1hdGVyaWFsPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPVtdKTtjb25zb2xlLndhcm4oXCJUSFJFRS5NdWx0aU1hdGVyaWFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhbiBBcnJheSBpbnN0ZWFkLlwiKTtlLmlzTXVsdGlNYXRlcmlhbD0hMDtlLm1hdGVyaWFscz1lO2UuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gZS5zbGljZSgpfTtyZXR1cm4gZX07ZS5NdWx0aXBseUJsZW5kaW5nPTQ7ZS5NdWx0aXBseU9wZXJhdGlvbj0wO2UuTmVhcmVzdEZpbHRlcj0xMDAzO2UuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcj0xMDA1O2UuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI9MTAwNDtlLk5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXI9MTAwNTtlLk5lYXJlc3RNaXBtYXBOZWFyZXN0RmlsdGVyPTEwMDQ7ZS5OZXZlckRlcHRoPTA7ZS5OZXZlclN0ZW5jaWxGdW5jPTUxMjtlLk5vQmxlbmRpbmc9MDtlLk5vQ29sb3JzPTA7ZS5Ob1RvbmVNYXBwaW5nPTA7ZS5Ob3JtYWxBbmltYXRpb25CbGVuZE1vZGU9MjUwMDtlLk5vcm1hbEJsZW5kaW5nPTE7ZS5Ob3RFcXVhbERlcHRoPTc7ZS5Ob3RFcXVhbFN0ZW5jaWxGdW5jPTUxNztlLk51bWJlcktleWZyYW1lVHJhY2s9em47ZS5PYmplY3QzRD1mO2UuT2JqZWN0TG9hZGVyPUZpO2UuT2JqZWN0U3BhY2VOb3JtYWxNYXA9MTtlLk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeT1TcjtlLk9jdGFoZWRyb25HZW9tZXRyeT13cjtlLk9uZUZhY3Rvcj0yMDE7ZS5PbmVNaW51c0RzdEFscGhhRmFjdG9yPTIwNztlLk9uZU1pbnVzRHN0Q29sb3JGYWN0b3I9MjA5O2UuT25lTWludXNTcmNBbHBoYUZhY3Rvcj0yMDU7ZS5PbmVNaW51c1NyY0NvbG9yRmFjdG9yPTIwMztlLk9ydGhvZ3JhcGhpY0NhbWVyYT1PaTtlLlBDRlNoYWRvd01hcD0xO2UuUENGU29mdFNoYWRvd01hcD0yO2UuUE1SRU1HZW5lcmF0b3I9am87ZS5QYXJhbWV0cmljQnVmZmVyR2VvbWV0cnk9Z3I7ZS5QYXJhbWV0cmljR2VvbWV0cnk9bXI7ZS5QYXJ0aWNsZT1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZSBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlNwcml0ZS5cIik7cmV0dXJuIG5ldyBadChlKX07ZS5QYXJ0aWNsZUJhc2ljTWF0ZXJpYWw9ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVCYXNpY01hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgdXIoZSl9O2UuUGFydGljbGVTeXN0ZW09ZnVuY3Rpb24oZSx0KXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZVN5c3RlbSBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50cy5cIik7cmV0dXJuIG5ldyBjcihlLHQpfTtlLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw9ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IHVyKGUpfTtlLlBhdGg9eWk7ZS5QZXJzcGVjdGl2ZUNhbWVyYT1IO2UuUGxhbmU9ZztlLlBsYW5lQnVmZmVyR2VvbWV0cnk9WDtlLlBsYW5lR2VvbWV0cnk9VztlLlBsYW5lSGVscGVyPU9vO2UuUG9pbnRDbG91ZD1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpO3JldHVybiBuZXcgY3IoZSx0KX07ZS5Qb2ludENsb3VkTWF0ZXJpYWw9ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZE1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgdXIoZSl9O2UuUG9pbnRMaWdodD1FaTtlLlBvaW50TGlnaHRIZWxwZXI9eW87ZS5Qb2ludHM9Y3I7ZS5Qb2ludHNNYXRlcmlhbD11cjtlLlBvbGFyR3JpZEhlbHBlcj13bztlLlBvbHloZWRyb25CdWZmZXJHZW9tZXRyeT15cjtlLlBvbHloZWRyb25HZW9tZXRyeT1fcjtlLlBvc2l0aW9uYWxBdWRpbz1aaTtlLlByb3BlcnR5QmluZGluZz10bztlLlByb3BlcnR5TWl4ZXI9UWk7ZS5RdWFkcmF0aWNCZXppZXJDdXJ2ZT12aTtlLlF1YWRyYXRpY0JlemllckN1cnZlMz1taTtlLlF1YXRlcm5pb249ZDtlLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrPUduO2UuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50PSRuO2UuUkVWSVNJT049XCIxMTdcIjtlLlJHQkFEZXB0aFBhY2tpbmc9MzIwMTtlLlJHQkFGb3JtYXQ9MTAyMztlLlJHQkFJbnRlZ2VyRm9ybWF0PTEwMzM7ZS5SR0JBX0FTVENfMTB4MTBfRm9ybWF0PTM3ODE5O2UuUkdCQV9BU1RDXzEweDVfRm9ybWF0PTM3ODE2O2UuUkdCQV9BU1RDXzEweDZfRm9ybWF0PTM3ODE3O2UuUkdCQV9BU1RDXzEweDhfRm9ybWF0PTM3ODE4O2UuUkdCQV9BU1RDXzEyeDEwX0Zvcm1hdD0zNzgyMDtlLlJHQkFfQVNUQ18xMngxMl9Gb3JtYXQ9Mzc4MjE7ZS5SR0JBX0FTVENfNHg0X0Zvcm1hdD0zNzgwODtlLlJHQkFfQVNUQ181eDRfRm9ybWF0PTM3ODA5O2UuUkdCQV9BU1RDXzV4NV9Gb3JtYXQ9Mzc4MTA7ZS5SR0JBX0FTVENfNng1X0Zvcm1hdD0zNzgxMTtlLlJHQkFfQVNUQ182eDZfRm9ybWF0PTM3ODEyO2UuUkdCQV9BU1RDXzh4NV9Gb3JtYXQ9Mzc4MTM7ZS5SR0JBX0FTVENfOHg2X0Zvcm1hdD0zNzgxNDtlLlJHQkFfQVNUQ184eDhfRm9ybWF0PTM3ODE1O2UuUkdCQV9CUFRDX0Zvcm1hdD0zNjQ5MjtlLlJHQkFfRVRDMl9FQUNfRm9ybWF0PTM3NDk2O2UuUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0PTM1ODQzO2UuUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0PTM1ODQyO2UuUkdCQV9TM1RDX0RYVDFfRm9ybWF0PTMzNzc3O2UuUkdCQV9TM1RDX0RYVDNfRm9ybWF0PTMzNzc4O2UuUkdCQV9TM1RDX0RYVDVfRm9ybWF0PTMzNzc5O2UuUkdCREVuY29kaW5nPTMwMDY7ZS5SR0JFRW5jb2Rpbmc9MzAwMjtlLlJHQkVGb3JtYXQ9MTAyMztlLlJHQkZvcm1hdD0xMDIyO2UuUkdCSW50ZWdlckZvcm1hdD0xMDMyO2UuUkdCTTE2RW5jb2Rpbmc9MzAwNTtlLlJHQk03RW5jb2Rpbmc9MzAwNDtlLlJHQl9FVEMxX0Zvcm1hdD0zNjE5NjtlLlJHQl9FVEMyX0Zvcm1hdD0zNzQ5MjtlLlJHQl9QVlJUQ18yQlBQVjFfRm9ybWF0PTM1ODQxO2UuUkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXQ9MzU4NDA7ZS5SR0JfUzNUQ19EWFQxX0Zvcm1hdD0zMzc3NjtlLlJHRm9ybWF0PTEwMzA7ZS5SR0ludGVnZXJGb3JtYXQ9MTAzMTtlLlJhd1NoYWRlck1hdGVyaWFsPU1uO2UuUmF5PXM7ZS5SYXljYXN0ZXI9c287ZS5SZWN0QXJlYUxpZ2h0PVJpO2UuUmVkRm9ybWF0PTEwMjg7ZS5SZWRJbnRlZ2VyRm9ybWF0PTEwMjk7ZS5SZWluaGFyZFRvbmVNYXBwaW5nPTI7ZS5SZXBlYXRXcmFwcGluZz0xZTM7ZS5SZXBsYWNlU3RlbmNpbE9wPTc2ODE7ZS5SZXZlcnNlU3VidHJhY3RFcXVhdGlvbj0xMDI7ZS5SaW5nQnVmZmVyR2VvbWV0cnk9bG47ZS5SaW5nR2VvbWV0cnk9Y247ZS5TUkdCOF9BTFBIQThfQVNUQ18xMHgxMF9Gb3JtYXQ9Mzc4NTE7ZS5TUkdCOF9BTFBIQThfQVNUQ18xMHg1X0Zvcm1hdD0zNzg0ODtlLlNSR0I4X0FMUEhBOF9BU1RDXzEweDZfRm9ybWF0PTM3ODQ5O2UuU1JHQjhfQUxQSEE4X0FTVENfMTB4OF9Gb3JtYXQ9Mzc4NTA7ZS5TUkdCOF9BTFBIQThfQVNUQ18xMngxMF9Gb3JtYXQ9Mzc4NTI7ZS5TUkdCOF9BTFBIQThfQVNUQ18xMngxMl9Gb3JtYXQ9Mzc4NTM7ZS5TUkdCOF9BTFBIQThfQVNUQ180eDRfRm9ybWF0PTM3ODQwO2UuU1JHQjhfQUxQSEE4X0FTVENfNXg0X0Zvcm1hdD0zNzg0MTtlLlNSR0I4X0FMUEhBOF9BU1RDXzV4NV9Gb3JtYXQ9Mzc4NDI7ZS5TUkdCOF9BTFBIQThfQVNUQ182eDVfRm9ybWF0PTM3ODQzO2UuU1JHQjhfQUxQSEE4X0FTVENfNng2X0Zvcm1hdD0zNzg0NDtlLlNSR0I4X0FMUEhBOF9BU1RDXzh4NV9Gb3JtYXQ9Mzc4NDU7ZS5TUkdCOF9BTFBIQThfQVNUQ184eDZfRm9ybWF0PTM3ODQ2O2UuU1JHQjhfQUxQSEE4X0FTVENfOHg4X0Zvcm1hdD0zNzg0NztlLlNjZW5lPU9lO2UuU2NlbmVVdGlscz17Y3JlYXRlTXVsdGlNYXRlcmlhbE9iamVjdDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TY2VuZVV0aWxzIGhhcyBiZWVuIG1vdmVkIHRvIC9leGFtcGxlcy9qc20vdXRpbHMvU2NlbmVVdGlscy5qc1wiKX0sZGV0YWNoOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNjZW5lVXRpbHMgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzbS91dGlscy9TY2VuZVV0aWxzLmpzXCIpfSxhdHRhY2g6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuU2NlbmVVdGlscyBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanNtL3V0aWxzL1NjZW5lVXRpbHMuanNcIil9fTtlLlNoYWRlckNodW5rPUlzO2UuU2hhZGVyTGliPURzO2UuU2hhZGVyTWF0ZXJpYWw9RztlLlNoYWRvd01hdGVyaWFsPVNuO2UuU2hhcGU9Ymk7ZS5TaGFwZUJ1ZmZlckdlb21ldHJ5PWRuO2UuU2hhcGVHZW9tZXRyeT1mbjtlLlNoYXBlUGF0aD0kaTtlLlNoYXBlVXRpbHM9a3U7ZS5TaG9ydFR5cGU9MTAxMTtlLlNrZWxldG9uPXRyO2UuU2tlbGV0b25IZWxwZXI9X287ZS5Ta2lubmVkTWVzaD1lcjtlLlNtb290aFNoYWRpbmc9MjtlLlNwaGVyZT1sO2UuU3BoZXJlQnVmZmVyR2VvbWV0cnk9dW47ZS5TcGhlcmVHZW9tZXRyeT1zbjtlLlNwaGVyaWNhbD1sbztlLlNwaGVyaWNhbEhhcm1vbmljczM9a2k7ZS5TcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZz0zMDU7ZS5TcGxpbmU9em87ZS5TcGxpbmVDdXJ2ZT1naTtlLlNwbGluZUN1cnZlMz1GbztlLlNwb3RMaWdodD1DaTtlLlNwb3RMaWdodEhlbHBlcj1tbztlLlNwb3RMaWdodFNoYWRvdz1NaTtlLlNwcml0ZT1adDtlLlNwcml0ZU1hdGVyaWFsPUt0O2UuU3JjQWxwaGFGYWN0b3I9MjA0O2UuU3JjQWxwaGFTYXR1cmF0ZUZhY3Rvcj0yMTA7ZS5TcmNDb2xvckZhY3Rvcj0yMDI7ZS5TdGF0aWNDb3B5VXNhZ2U9MzUwNDY7ZS5TdGF0aWNEcmF3VXNhZ2U9MzUwNDQ7ZS5TdGF0aWNSZWFkVXNhZ2U9MzUwNDU7ZS5TdGVyZW9DYW1lcmE9V2k7ZS5TdHJlYW1Db3B5VXNhZ2U9MzUwNDI7ZS5TdHJlYW1EcmF3VXNhZ2U9MzUwNDA7ZS5TdHJlYW1SZWFkVXNhZ2U9MzUwNDE7ZS5TdHJpbmdLZXlmcmFtZVRyYWNrPVZuO2UuU3VidHJhY3RFcXVhdGlvbj0xMDE7ZS5TdWJ0cmFjdGl2ZUJsZW5kaW5nPTM7ZS5UT1VDSD17Uk9UQVRFOjAsUEFOOjEsRE9MTFlfUEFOOjIsRE9MTFlfUk9UQVRFOjN9O2UuVGFuZ2VudFNwYWNlTm9ybWFsTWFwPTA7ZS5UZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5PXhyO2UuVGV0cmFoZWRyb25HZW9tZXRyeT1icjtlLlRleHRCdWZmZXJHZW9tZXRyeT1hbjtlLlRleHRHZW9tZXRyeT1vbjtlLlRleHR1cmU9cDtlLlRleHR1cmVMb2FkZXI9cmk7ZS5Ub3J1c0J1ZmZlckdlb21ldHJ5PWtyO2UuVG9ydXNHZW9tZXRyeT1ScjtlLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5PWpyO2UuVG9ydXNLbm90R2VvbWV0cnk9QXI7ZS5UcmlhbmdsZT1iO2UuVHJpYW5nbGVGYW5EcmF3TW9kZT0yO2UuVHJpYW5nbGVTdHJpcERyYXdNb2RlPTE7ZS5UcmlhbmdsZXNEcmF3TW9kZT0wO2UuVHViZUJ1ZmZlckdlb21ldHJ5PVByO2UuVHViZUdlb21ldHJ5PU9yO2UuVVZNYXBwaW5nPTMwMDtlLlVpbnQxNkF0dHJpYnV0ZT1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQxNkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQxNkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgTyhlLHQpfTtlLlVpbnQxNkJ1ZmZlckF0dHJpYnV0ZT1PO2UuVWludDMyQXR0cmlidXRlPWZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVWludDMyQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDMyQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBBKGUsdCl9O2UuVWludDMyQnVmZmVyQXR0cmlidXRlPUE7ZS5VaW50OEF0dHJpYnV0ZT1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQ4QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDhCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFMoZSx0KX07ZS5VaW50OEJ1ZmZlckF0dHJpYnV0ZT1TO2UuVWludDhDbGFtcGVkQXR0cmlidXRlPWZ1bmN0aW9uKGUsdCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVWludDhDbGFtcGVkQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBNKGUsdCl9O2UuVWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlPU07ZS5VbmNoYXJ0ZWQyVG9uZU1hcHBpbmc9MztlLlVuaWZvcm09b287ZS5Vbmlmb3Jtc0xpYj1OcztlLlVuaWZvcm1zVXRpbHM9UnM7ZS5VbnNpZ25lZEJ5dGVUeXBlPTEwMDk7ZS5VbnNpZ25lZEludDI0OFR5cGU9MTAyMDtlLlVuc2lnbmVkSW50VHlwZT0xMDE0O2UuVW5zaWduZWRTaG9ydDQ0NDRUeXBlPTEwMTc7ZS5VbnNpZ25lZFNob3J0NTU1MVR5cGU9MTAxODtlLlVuc2lnbmVkU2hvcnQ1NjVUeXBlPTEwMTk7ZS5VbnNpZ25lZFNob3J0VHlwZT0xMDEyO2UuVlNNU2hhZG93TWFwPTM7ZS5WZWN0b3IyPU1lO2UuVmVjdG9yMz1UZTtlLlZlY3RvcjQ9Q2U7ZS5WZWN0b3JLZXlmcmFtZVRyYWNrPUhuO2UuVmVydGV4PWZ1bmN0aW9uKGUsdCxyKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZXJ0ZXggaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLlZlY3RvcjMgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBUZShlLHQscil9O2UuVmVydGV4Q29sb3JzPTI7ZS5WaWRlb1RleHR1cmU9aHI7ZS5XZWJHTEN1YmVSZW5kZXJUYXJnZXQ9cTtlLldlYkdMTXVsdGlzYW1wbGVSZW5kZXJUYXJnZXQ9cjtlLldlYkdMUmVuZGVyVGFyZ2V0PVQ7ZS5XZWJHTFJlbmRlclRhcmdldEN1YmU9ZnVuY3Rpb24oZSx0LHIpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSggd2lkdGgsIGhlaWdodCwgb3B0aW9ucyApIGlzIG5vdyBXZWJHTEN1YmVSZW5kZXJUYXJnZXQoIHNpemUsIG9wdGlvbnMgKS5cIik7cmV0dXJuIG5ldyBxKGUscil9O2UuV2ViR0xSZW5kZXJlcj1VdDtlLldlYkdMVXRpbHM9RnQ7ZS5XaXJlZnJhbWVHZW9tZXRyeT12cjtlLldpcmVmcmFtZUhlbHBlcj1mdW5jdGlvbihlLHQpe2NvbnNvbGUud2FybihcIlRIUkVFLldpcmVmcmFtZUhlbHBlciBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuV2lyZWZyYW1lR2VvbWV0cnkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyBhcihuZXcgdnIoZS5nZW9tZXRyeSksbmV3IGlyKHtjb2xvcjp2b2lkIDAhPT10P3Q6MTY3NzcyMTV9KSl9O2UuV3JhcEFyb3VuZEVuZGluZz0yNDAyO2UuWEhSTG9hZGVyPWZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRIUkVFLlhIUkxvYWRlciBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLkZpbGVMb2FkZXIuXCIpO3JldHVybiBuZXcgS24oZSl9O2UuWmVyb0N1cnZhdHVyZUVuZGluZz0yNDAwO2UuWmVyb0ZhY3Rvcj0yMDA7ZS5aZXJvU2xvcGVFbmRpbmc9MjQwMTtlLlplcm9TdGVuY2lsT3A9MDtlLnNSR0JFbmNvZGluZz0zMDAxO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSl9LHt9XSwyNDM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9bjtmdW5jdGlvbiBuKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuKGUsdCk7dGhpcy5kYXRhPWV8fFtdO3RoaXMubGVuZ3RoPXRoaXMuZGF0YS5sZW5ndGg7dGhpcy5jb21wYXJlPXR8fGk7aWYodGhpcy5sZW5ndGg+MCl7Zm9yKHZhciByPXRoaXMubGVuZ3RoPj4xO3I+PTA7ci0tKXRoaXMuX2Rvd24ocil9fWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZTx0Py0xOmU+dD8xOjB9bi5wcm90b3R5cGU9e3B1c2g6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhLnB1c2goZSk7dGhpcy5sZW5ndGgrKzt0aGlzLl91cCh0aGlzLmxlbmd0aC0xKX0scG9wOmZ1bmN0aW9uKCl7aWYodGhpcy5sZW5ndGg9PT0wKXJldHVybiB1bmRlZmluZWQ7dmFyIGU9dGhpcy5kYXRhWzBdO3RoaXMubGVuZ3RoLS07aWYodGhpcy5sZW5ndGg+MCl7dGhpcy5kYXRhWzBdPXRoaXMuZGF0YVt0aGlzLmxlbmd0aF07dGhpcy5fZG93bigwKX10aGlzLmRhdGEucG9wKCk7cmV0dXJuIGV9LHBlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhWzBdfSxfdXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhO3ZhciByPXRoaXMuY29tcGFyZTt2YXIgbj10W2VdO3doaWxlKGU+MCl7dmFyIGk9ZS0xPj4xO3ZhciBvPXRbaV07aWYocihuLG8pPj0wKWJyZWFrO3RbZV09bztlPWl9dFtlXT1ufSxfZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGE7dmFyIHI9dGhpcy5jb21wYXJlO3ZhciBuPXRoaXMubGVuZ3RoO3ZhciBpPW4+PjE7dmFyIG89dFtlXTt3aGlsZShlPGkpe3ZhciBhPShlPDwxKSsxO3ZhciBzPWErMTt2YXIgdT10W2FdO2lmKHM8biYmcih0W3NdLHUpPDApe2E9czt1PXRbc119aWYocih1LG8pPj0wKWJyZWFrO3RbZV09dTtlPWF9dFtlXT1vfX19LHt9XSwyNDQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKFwiLi92ZG9tL2NyZWF0ZS1lbGVtZW50LmpzXCIpO3QuZXhwb3J0cz1ufSx7XCIuL3Zkb20vY3JlYXRlLWVsZW1lbnQuanNcIjoyNTB9XSwyNDU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKFwiLi92dHJlZS9kaWZmLmpzXCIpO3QuZXhwb3J0cz1ufSx7XCIuL3Z0cmVlL2RpZmYuanNcIjoyNzB9XSwyNDY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKFwiLi92aXJ0dWFsLWh5cGVyc2NyaXB0L2luZGV4LmpzXCIpO3QuZXhwb3J0cz1ufSx7XCIuL3ZpcnR1YWwtaHlwZXJzY3JpcHQvaW5kZXguanNcIjoyNTd9XSwyNDc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKFwiLi9kaWZmLmpzXCIpO3ZhciBpPWUoXCIuL3BhdGNoLmpzXCIpO3ZhciBvPWUoXCIuL2guanNcIik7dmFyIGE9ZShcIi4vY3JlYXRlLWVsZW1lbnQuanNcIik7dmFyIHM9ZShcIi4vdm5vZGUvdm5vZGUuanNcIik7dmFyIHU9ZShcIi4vdm5vZGUvdnRleHQuanNcIik7dC5leHBvcnRzPXtkaWZmOm4scGF0Y2g6aSxoOm8sY3JlYXRlOmEsVk5vZGU6cyxWVGV4dDp1fX0se1wiLi9jcmVhdGUtZWxlbWVudC5qc1wiOjI0NCxcIi4vZGlmZi5qc1wiOjI0NSxcIi4vaC5qc1wiOjI0NixcIi4vcGF0Y2guanNcIjoyNDgsXCIuL3Zub2RlL3Zub2RlLmpzXCI6MjY2LFwiLi92bm9kZS92dGV4dC5qc1wiOjI2OH1dLDI0ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoXCIuL3Zkb20vcGF0Y2guanNcIik7dC5leHBvcnRzPW59LHtcIi4vdmRvbS9wYXRjaC5qc1wiOjI1M31dLDI0OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBoPWUoXCJpcy1vYmplY3RcIik7dmFyIHM9ZShcIi4uL3Zub2RlL2lzLXZob29rLmpzXCIpO3QuZXhwb3J0cz1uO2Z1bmN0aW9uIG4oZSx0LHIpe2Zvcih2YXIgbiBpbiB0KXt2YXIgaT10W25dO2lmKGk9PT11bmRlZmluZWQpe28oZSxuLGkscil9ZWxzZSBpZihzKGkpKXtvKGUsbixpLHIpO2lmKGkuaG9vayl7aS5ob29rKGUsbixyP3Jbbl06dW5kZWZpbmVkKX19ZWxzZXtpZihoKGkpKXthKGUsdCxyLG4saSl9ZWxzZXtlW25dPWl9fX19ZnVuY3Rpb24gbyhlLHQscixuKXtpZihuKXt2YXIgaT1uW3RdO2lmKCFzKGkpKXtpZih0PT09XCJhdHRyaWJ1dGVzXCIpe2Zvcih2YXIgbyBpbiBpKXtlLnJlbW92ZUF0dHJpYnV0ZShvKX19ZWxzZSBpZih0PT09XCJzdHlsZVwiKXtmb3IodmFyIGEgaW4gaSl7ZS5zdHlsZVthXT1cIlwifX1lbHNlIGlmKHR5cGVvZiBpPT09XCJzdHJpbmdcIil7ZVt0XT1cIlwifWVsc2V7ZVt0XT1udWxsfX1lbHNlIGlmKGkudW5ob29rKXtpLnVuaG9vayhlLHQscil9fX1mdW5jdGlvbiBhKGUsdCxyLG4saSl7dmFyIG89cj9yW25dOnVuZGVmaW5lZDtpZihuPT09XCJhdHRyaWJ1dGVzXCIpe2Zvcih2YXIgYSBpbiBpKXt2YXIgcz1pW2FdO2lmKHM9PT11bmRlZmluZWQpe2UucmVtb3ZlQXR0cmlidXRlKGEpfWVsc2V7ZS5zZXRBdHRyaWJ1dGUoYSxzKX19cmV0dXJufWlmKG8mJmgobykmJnAobykhPT1wKGkpKXtlW25dPWk7cmV0dXJufWlmKCFoKGVbbl0pKXtlW25dPXt9fXZhciB1PW49PT1cInN0eWxlXCI/XCJcIjp1bmRlZmluZWQ7Zm9yKHZhciBjIGluIGkpe3ZhciBsPWlbY107ZVtuXVtjXT1sPT09dW5kZWZpbmVkP3U6bH19ZnVuY3Rpb24gcChlKXtpZihPYmplY3QuZ2V0UHJvdG90eXBlT2Ype3JldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9ZWxzZSBpZihlLl9fcHJvdG9fXyl7cmV0dXJuIGUuX19wcm90b19ffWVsc2UgaWYoZS5jb25zdHJ1Y3Rvcil7cmV0dXJuIGUuY29uc3RydWN0b3IucHJvdG90eXBlfX19LHtcIi4uL3Zub2RlL2lzLXZob29rLmpzXCI6MjYxLFwiaXMtb2JqZWN0XCI6MjB9XSwyNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgYz1lKFwiZ2xvYmFsL2RvY3VtZW50XCIpO3ZhciBsPWUoXCIuL2FwcGx5LXByb3BlcnRpZXNcIik7dmFyIGg9ZShcIi4uL3Zub2RlL2lzLXZub2RlLmpzXCIpO3ZhciBwPWUoXCIuLi92bm9kZS9pcy12dGV4dC5qc1wiKTt2YXIgZj1lKFwiLi4vdm5vZGUvaXMtd2lkZ2V0LmpzXCIpO3ZhciBkPWUoXCIuLi92bm9kZS9oYW5kbGUtdGh1bmsuanNcIik7dC5leHBvcnRzPXY7ZnVuY3Rpb24gdihlLHQpe3ZhciByPXQ/dC5kb2N1bWVudHx8YzpjO3ZhciBuPXQ/dC53YXJuOm51bGw7ZT1kKGUpLmE7aWYoZihlKSl7cmV0dXJuIGUuaW5pdCgpfWVsc2UgaWYocChlKSl7cmV0dXJuIHIuY3JlYXRlVGV4dE5vZGUoZS50ZXh0KX1lbHNlIGlmKCFoKGUpKXtpZihuKXtuKFwiSXRlbSBpcyBub3QgYSB2YWxpZCB2aXJ0dWFsIGRvbSBub2RlXCIsZSl9cmV0dXJuIG51bGx9dmFyIGk9ZS5uYW1lc3BhY2U9PT1udWxsP3IuY3JlYXRlRWxlbWVudChlLnRhZ05hbWUpOnIuY3JlYXRlRWxlbWVudE5TKGUubmFtZXNwYWNlLGUudGFnTmFtZSk7dmFyIG89ZS5wcm9wZXJ0aWVzO2woaSxvKTt2YXIgYT1lLmNoaWxkcmVuO2Zvcih2YXIgcz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgdT12KGFbc10sdCk7aWYodSl7aS5hcHBlbmRDaGlsZCh1KX19cmV0dXJuIGl9fSx7XCIuLi92bm9kZS9oYW5kbGUtdGh1bmsuanNcIjoyNTksXCIuLi92bm9kZS9pcy12bm9kZS5qc1wiOjI2MixcIi4uL3Zub2RlL2lzLXZ0ZXh0LmpzXCI6MjYzLFwiLi4vdm5vZGUvaXMtd2lkZ2V0LmpzXCI6MjY0LFwiLi9hcHBseS1wcm9wZXJ0aWVzXCI6MjQ5LFwiZ2xvYmFsL2RvY3VtZW50XCI6MTZ9XSwyNTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbD17fTt0LmV4cG9ydHM9bjtmdW5jdGlvbiBuKGUsdCxyLG4pe2lmKCFyfHxyLmxlbmd0aD09PTApe3JldHVybnt9fWVsc2V7ci5zb3J0KGkpO3JldHVybiBoKGUsdCxyLG4sMCl9fWZ1bmN0aW9uIGgoZSx0LHIsbixpKXtuPW58fHt9O2lmKGUpe2lmKHAocixpLGkpKXtuW2ldPWV9dmFyIG89dC5jaGlsZHJlbjtpZihvKXt2YXIgYT1lLmNoaWxkTm9kZXM7Zm9yKHZhciBzPTA7czx0LmNoaWxkcmVuLmxlbmd0aDtzKyspe2krPTE7dmFyIHU9b1tzXXx8bDt2YXIgYz1pKyh1LmNvdW50fHwwKTtpZihwKHIsaSxjKSl7aChhW3NdLHUscixuLGkpfWk9Y319fXJldHVybiBufWZ1bmN0aW9uIHAoZSx0LHIpe2lmKGUubGVuZ3RoPT09MCl7cmV0dXJuIGZhbHNlfXZhciBuPTA7dmFyIGk9ZS5sZW5ndGgtMTt2YXIgbzt2YXIgYTt3aGlsZShuPD1pKXtvPShpK24pLzI+PjA7YT1lW29dO2lmKG49PT1pKXtyZXR1cm4gYT49dCYmYTw9cn1lbHNlIGlmKGE8dCl7bj1vKzF9ZWxzZSBpZihhPnIpe2k9by0xfWVsc2V7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIGU+dD8xOi0xfX0se31dLDI1MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUoXCIuL2FwcGx5LXByb3BlcnRpZXNcIik7dmFyIG49ZShcIi4uL3Zub2RlL2lzLXdpZGdldC5qc1wiKTt2YXIgcz1lKFwiLi4vdm5vZGUvdnBhdGNoLmpzXCIpO3ZhciB1PWUoXCIuL3VwZGF0ZS13aWRnZXRcIik7dC5leHBvcnRzPWk7ZnVuY3Rpb24gaShlLHQscil7dmFyIG49ZS50eXBlO3ZhciBpPWUudk5vZGU7dmFyIG89ZS5wYXRjaDtzd2l0Y2gobil7Y2FzZSBzLlJFTU9WRTpyZXR1cm4gYyh0LGkpO2Nhc2Ugcy5JTlNFUlQ6cmV0dXJuIGwodCxvLHIpO2Nhc2Ugcy5WVEVYVDpyZXR1cm4gaCh0LGksbyxyKTtjYXNlIHMuV0lER0VUOnJldHVybiBwKHQsaSxvLHIpO2Nhc2Ugcy5WTk9ERTpyZXR1cm4gZih0LGksbyxyKTtjYXNlIHMuT1JERVI6dih0LG8pO3JldHVybiB0O2Nhc2Ugcy5QUk9QUzphKHQsbyxpLnByb3BlcnRpZXMpO3JldHVybiB0O2Nhc2Ugcy5USFVOSzpyZXR1cm4gbSh0LHIucGF0Y2godCxvLHIpKTtkZWZhdWx0OnJldHVybiB0fX1mdW5jdGlvbiBjKGUsdCl7dmFyIHI9ZS5wYXJlbnROb2RlO2lmKHIpe3IucmVtb3ZlQ2hpbGQoZSl9ZChlLHQpO3JldHVybiBudWxsfWZ1bmN0aW9uIGwoZSx0LHIpe3ZhciBuPXIucmVuZGVyKHQscik7aWYoZSl7ZS5hcHBlbmRDaGlsZChuKX1yZXR1cm4gZX1mdW5jdGlvbiBoKGUsdCxyLG4pe3ZhciBpO2lmKGUubm9kZVR5cGU9PT0zKXtlLnJlcGxhY2VEYXRhKDAsZS5sZW5ndGgsci50ZXh0KTtpPWV9ZWxzZXt2YXIgbz1lLnBhcmVudE5vZGU7aT1uLnJlbmRlcihyLG4pO2lmKG8mJmkhPT1lKXtvLnJlcGxhY2VDaGlsZChpLGUpfX1yZXR1cm4gaX1mdW5jdGlvbiBwKGUsdCxyLG4pe3ZhciBpPXUodCxyKTt2YXIgbztpZihpKXtvPXIudXBkYXRlKHQsZSl8fGV9ZWxzZXtvPW4ucmVuZGVyKHIsbil9dmFyIGE9ZS5wYXJlbnROb2RlO2lmKGEmJm8hPT1lKXthLnJlcGxhY2VDaGlsZChvLGUpfWlmKCFpKXtkKGUsdCl9cmV0dXJuIG99ZnVuY3Rpb24gZihlLHQscixuKXt2YXIgaT1lLnBhcmVudE5vZGU7dmFyIG89bi5yZW5kZXIocixuKTtpZihpJiZvIT09ZSl7aS5yZXBsYWNlQ2hpbGQobyxlKX1yZXR1cm4gb31mdW5jdGlvbiBkKGUsdCl7aWYodHlwZW9mIHQuZGVzdHJveT09PVwiZnVuY3Rpb25cIiYmbih0KSl7dC5kZXN0cm95KGUpfX1mdW5jdGlvbiB2KGUsdCl7dmFyIHI9ZS5jaGlsZE5vZGVzO3ZhciBuPXt9O3ZhciBpO3ZhciBvO3ZhciBhO2Zvcih2YXIgcz0wO3M8dC5yZW1vdmVzLmxlbmd0aDtzKyspe289dC5yZW1vdmVzW3NdO2k9cltvLmZyb21dO2lmKG8ua2V5KXtuW28ua2V5XT1pfWUucmVtb3ZlQ2hpbGQoaSl9dmFyIHU9ci5sZW5ndGg7Zm9yKHZhciBjPTA7Yzx0Lmluc2VydHMubGVuZ3RoO2MrKyl7YT10Lmluc2VydHNbY107aT1uW2Eua2V5XTtlLmluc2VydEJlZm9yZShpLGEudG8+PXUrKz9udWxsOnJbYS50b10pfX1mdW5jdGlvbiBtKGUsdCl7aWYoZSYmdCYmZSE9PXQmJmUucGFyZW50Tm9kZSl7ZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0LGUpfXJldHVybiB0fX0se1wiLi4vdm5vZGUvaXMtd2lkZ2V0LmpzXCI6MjY0LFwiLi4vdm5vZGUvdnBhdGNoLmpzXCI6MjY3LFwiLi9hcHBseS1wcm9wZXJ0aWVzXCI6MjQ5LFwiLi91cGRhdGUtd2lkZ2V0XCI6MjU0fV0sMjUzOltmdW5jdGlvbihlLHQscil7dmFyIHU9ZShcImdsb2JhbC9kb2N1bWVudFwiKTt2YXIgYT1lKFwieC1pcy1hcnJheVwiKTt2YXIgbj1lKFwiLi9jcmVhdGUtZWxlbWVudFwiKTt2YXIgYz1lKFwiLi9kb20taW5kZXhcIik7dmFyIHM9ZShcIi4vcGF0Y2gtb3BcIik7dC5leHBvcnRzPWk7ZnVuY3Rpb24gaShlLHQscil7cj1yfHx7fTtyLnBhdGNoPXIucGF0Y2gmJnIucGF0Y2ghPT1pP3IucGF0Y2g6bztyLnJlbmRlcj1yLnJlbmRlcnx8bjtyZXR1cm4gci5wYXRjaChlLHQscil9ZnVuY3Rpb24gbyhlLHQscil7dmFyIG49aCh0KTtpZihuLmxlbmd0aD09PTApe3JldHVybiBlfXZhciBpPWMoZSx0LmEsbik7dmFyIG89ZS5vd25lckRvY3VtZW50O2lmKCFyLmRvY3VtZW50JiZvIT09dSl7ci5kb2N1bWVudD1vfWZvcih2YXIgYT0wO2E8bi5sZW5ndGg7YSsrKXt2YXIgcz1uW2FdO2U9bChlLGlbc10sdFtzXSxyKX1yZXR1cm4gZX1mdW5jdGlvbiBsKGUsdCxyLG4pe2lmKCF0KXtyZXR1cm4gZX12YXIgaTtpZihhKHIpKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7aT1zKHJbb10sdCxuKTtpZih0PT09ZSl7ZT1pfX19ZWxzZXtpPXMocix0LG4pO2lmKHQ9PT1lKXtlPWl9fXJldHVybiBlfWZ1bmN0aW9uIGgoZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpe2lmKHIhPT1cImFcIil7dC5wdXNoKE51bWJlcihyKSl9fXJldHVybiB0fX0se1wiLi9jcmVhdGUtZWxlbWVudFwiOjI1MCxcIi4vZG9tLWluZGV4XCI6MjUxLFwiLi9wYXRjaC1vcFwiOjI1MixcImdsb2JhbC9kb2N1bWVudFwiOjE2LFwieC1pcy1hcnJheVwiOjI4OX1dLDI1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoXCIuLi92bm9kZS9pcy13aWRnZXQuanNcIik7dC5leHBvcnRzPWk7ZnVuY3Rpb24gaShlLHQpe2lmKG4oZSkmJm4odCkpe2lmKFwibmFtZVwiaW4gZSYmXCJuYW1lXCJpbiB0KXtyZXR1cm4gZS5pZD09PXQuaWR9ZWxzZXtyZXR1cm4gZS5pbml0PT09dC5pbml0fX1yZXR1cm4gZmFsc2V9fSx7XCIuLi92bm9kZS9pcy13aWRnZXQuanNcIjoyNjR9XSwyNTU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1lKFwiZXYtc3RvcmVcIik7dC5leHBvcnRzPW47ZnVuY3Rpb24gbihlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBuKSl7cmV0dXJuIG5ldyBuKGUpfXRoaXMudmFsdWU9ZX1uLnByb3RvdHlwZS5ob29rPWZ1bmN0aW9uKGUsdCl7dmFyIHI9aShlKTt2YXIgbj10LnN1YnN0cigzKTtyW25dPXRoaXMudmFsdWV9O24ucHJvdG90eXBlLnVuaG9vaz1mdW5jdGlvbihlLHQpe3ZhciByPWkoZSk7dmFyIG49dC5zdWJzdHIoMyk7cltuXT11bmRlZmluZWR9fSx7XCJldi1zdG9yZVwiOjl9XSwyNTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9bjtmdW5jdGlvbiBuKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXtyZXR1cm4gbmV3IG4oZSl9dGhpcy52YWx1ZT1lfW4ucHJvdG90eXBlLmhvb2s9ZnVuY3Rpb24oZSx0KXtpZihlW3RdIT09dGhpcy52YWx1ZSl7ZVt0XT10aGlzLnZhbHVlfX19LHt9XSwyNTc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbz1lKFwieC1pcy1hcnJheVwiKTt2YXIgdT1lKFwiLi4vdm5vZGUvdm5vZGUuanNcIik7dmFyIGE9ZShcIi4uL3Zub2RlL3Z0ZXh0LmpzXCIpO3ZhciBuPWUoXCIuLi92bm9kZS9pcy12bm9kZVwiKTt2YXIgaT1lKFwiLi4vdm5vZGUvaXMtdnRleHRcIik7dmFyIHM9ZShcIi4uL3Zub2RlL2lzLXdpZGdldFwiKTt2YXIgYz1lKFwiLi4vdm5vZGUvaXMtdmhvb2tcIik7dmFyIGw9ZShcIi4uL3Zub2RlL2lzLXRodW5rXCIpO3ZhciBoPWUoXCIuL3BhcnNlLXRhZy5qc1wiKTt2YXIgcD1lKFwiLi9ob29rcy9zb2Z0LXNldC1ob29rLmpzXCIpO3ZhciBmPWUoXCIuL2hvb2tzL2V2LWhvb2suanNcIik7dC5leHBvcnRzPWQ7ZnVuY3Rpb24gZChlLHQscil7dmFyIG49W107dmFyIGksbyxhLHM7aWYoIXImJl8odCkpe3I9dDtvPXt9fW89b3x8dHx8e307aT1oKGUsbyk7aWYoby5oYXNPd25Qcm9wZXJ0eShcImtleVwiKSl7YT1vLmtleTtvLmtleT11bmRlZmluZWR9aWYoby5oYXNPd25Qcm9wZXJ0eShcIm5hbWVzcGFjZVwiKSl7cz1vLm5hbWVzcGFjZTtvLm5hbWVzcGFjZT11bmRlZmluZWR9aWYoaT09PVwiSU5QVVRcIiYmIXMmJm8uaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSYmby52YWx1ZSE9PXVuZGVmaW5lZCYmIWMoby52YWx1ZSkpe28udmFsdWU9cChvLnZhbHVlKX1tKG8pO2lmKHIhPT11bmRlZmluZWQmJnIhPT1udWxsKXt2KHIsbixpLG8pfXJldHVybiBuZXcgdShpLG8sbixhLHMpfWZ1bmN0aW9uIHYoZSx0LHIsbil7aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0LnB1c2gobmV3IGEoZSkpfWVsc2UgaWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXt0LnB1c2gobmV3IGEoU3RyaW5nKGUpKSl9ZWxzZSBpZihnKGUpKXt0LnB1c2goZSl9ZWxzZSBpZihvKGUpKXtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dihlW2ldLHQscixuKX19ZWxzZSBpZihlPT09bnVsbHx8ZT09PXVuZGVmaW5lZCl7cmV0dXJufWVsc2V7dGhyb3cgeSh7Zm9yZWlnbk9iamVjdDplLHBhcmVudFZub2RlOnt0YWdOYW1lOnIscHJvcGVydGllczpufX0pfX1mdW5jdGlvbiBtKGUpe2Zvcih2YXIgdCBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KHQpKXt2YXIgcj1lW3RdO2lmKGMocikpe2NvbnRpbnVlfWlmKHQuc3Vic3RyKDAsMyk9PT1cImV2LVwiKXtlW3RdPWYocil9fX19ZnVuY3Rpb24gZyhlKXtyZXR1cm4gbihlKXx8aShlKXx8cyhlKXx8bChlKX1mdW5jdGlvbiBfKGUpe3JldHVybiB0eXBlb2YgZT09PVwic3RyaW5nXCJ8fG8oZSl8fGcoZSl9ZnVuY3Rpb24geShlKXt2YXIgdD1uZXcgRXJyb3I7dC50eXBlPVwidmlydHVhbC1oeXBlcnNjcmlwdC51bmV4cGVjdGVkLnZpcnR1YWwtZWxlbWVudFwiO3QubWVzc2FnZT1cIlVuZXhwZWN0ZWQgdmlydHVhbCBjaGlsZCBwYXNzZWQgdG8gaCgpLlxcblwiK1wiRXhwZWN0ZWQgYSBWTm9kZSAvIFZ0aHVuayAvIFZXaWRnZXQgLyBzdHJpbmcgYnV0OlxcblwiK1wiZ290OlxcblwiK2IoZS5mb3JlaWduT2JqZWN0KStcIi5cXG5cIitcIlRoZSBwYXJlbnQgdm5vZGUgaXM6XFxuXCIrYihlLnBhcmVudFZub2RlKTtcIlxcblwiK1wiU3VnZ2VzdGVkIGZpeDogY2hhbmdlIHlvdXIgYGgoLi4uLCBbIC4uLiBdKWAgY2FsbHNpdGUuXCI7dC5mb3JlaWduT2JqZWN0PWUuZm9yZWlnbk9iamVjdDt0LnBhcmVudFZub2RlPWUucGFyZW50Vm5vZGU7cmV0dXJuIHR9ZnVuY3Rpb24gYih0KXt0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQsbnVsbCxcIiAgICBcIil9Y2F0Y2goZSl7cmV0dXJuIFN0cmluZyh0KX19fSx7XCIuLi92bm9kZS9pcy10aHVua1wiOjI2MCxcIi4uL3Zub2RlL2lzLXZob29rXCI6MjYxLFwiLi4vdm5vZGUvaXMtdm5vZGVcIjoyNjIsXCIuLi92bm9kZS9pcy12dGV4dFwiOjI2MyxcIi4uL3Zub2RlL2lzLXdpZGdldFwiOjI2NCxcIi4uL3Zub2RlL3Zub2RlLmpzXCI6MjY2LFwiLi4vdm5vZGUvdnRleHQuanNcIjoyNjgsXCIuL2hvb2tzL2V2LWhvb2suanNcIjoyNTUsXCIuL2hvb2tzL3NvZnQtc2V0LWhvb2suanNcIjoyNTYsXCIuL3BhcnNlLXRhZy5qc1wiOjI1OCxcIngtaXMtYXJyYXlcIjoyODl9XSwyNTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgYz1lKFwiYnJvd3Nlci1zcGxpdFwiKTt2YXIgbD0vKFtcXC4jXT9bYS16QS1aMC05XFx1MDA3Ri1cXHVGRkZGXzotXSspLzt2YXIgaD0vXlxcLnwjLzt0LmV4cG9ydHM9bjtmdW5jdGlvbiBuKGUsdCl7aWYoIWUpe3JldHVyblwiRElWXCJ9dmFyIHI9IXQuaGFzT3duUHJvcGVydHkoXCJpZFwiKTt2YXIgbj1jKGUsbCk7dmFyIGk9bnVsbDtpZihoLnRlc3QoblsxXSkpe2k9XCJESVZcIn12YXIgbyxhLHMsdTtmb3IodT0wO3U8bi5sZW5ndGg7dSsrKXthPW5bdV07aWYoIWEpe2NvbnRpbnVlfXM9YS5jaGFyQXQoMCk7aWYoIWkpe2k9YX1lbHNlIGlmKHM9PT1cIi5cIil7bz1vfHxbXTtvLnB1c2goYS5zdWJzdHJpbmcoMSxhLmxlbmd0aCkpfWVsc2UgaWYocz09PVwiI1wiJiZyKXt0LmlkPWEuc3Vic3RyaW5nKDEsYS5sZW5ndGgpfX1pZihvKXtpZih0LmNsYXNzTmFtZSl7by5wdXNoKHQuY2xhc3NOYW1lKX10LmNsYXNzTmFtZT1vLmpvaW4oXCIgXCIpfXJldHVybiB0Lm5hbWVzcGFjZT9pOmkudG9VcHBlckNhc2UoKX19LHtcImJyb3dzZXItc3BsaXRcIjo1fV0sMjU5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZShcIi4vaXMtdm5vZGVcIik7dmFyIGk9ZShcIi4vaXMtdnRleHRcIik7dmFyIG89ZShcIi4vaXMtd2lkZ2V0XCIpO3ZhciBhPWUoXCIuL2lzLXRodW5rXCIpO3QuZXhwb3J0cz1zO2Z1bmN0aW9uIHMoZSx0KXt2YXIgcj1lO3ZhciBuPXQ7aWYoYSh0KSl7bj11KHQsZSl9aWYoYShlKSl7cj11KGUsbnVsbCl9cmV0dXJue2E6cixiOm59fWZ1bmN0aW9uIHUoZSx0KXt2YXIgcj1lLnZub2RlO2lmKCFyKXtyPWUudm5vZGU9ZS5yZW5kZXIodCl9aWYoIShuKHIpfHxpKHIpfHxvKHIpKSl7dGhyb3cgbmV3IEVycm9yKFwidGh1bmsgZGlkIG5vdCByZXR1cm4gYSB2YWxpZCBub2RlXCIpfXJldHVybiByfX0se1wiLi9pcy10aHVua1wiOjI2MCxcIi4vaXMtdm5vZGVcIjoyNjIsXCIuL2lzLXZ0ZXh0XCI6MjYzLFwiLi9pcy13aWRnZXRcIjoyNjR9XSwyNjA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9bjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLnR5cGU9PT1cIlRodW5rXCJ9fSx7fV0sMjYxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPW47ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmKHR5cGVvZiBlLmhvb2s9PT1cImZ1bmN0aW9uXCImJiFlLmhhc093blByb3BlcnR5KFwiaG9va1wiKXx8dHlwZW9mIGUudW5ob29rPT09XCJmdW5jdGlvblwiJiYhZS5oYXNPd25Qcm9wZXJ0eShcInVuaG9va1wiKSl9fSx7fV0sMjYyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZShcIi4vdmVyc2lvblwiKTt0LmV4cG9ydHM9aTtmdW5jdGlvbiBpKGUpe3JldHVybiBlJiZlLnR5cGU9PT1cIlZpcnR1YWxOb2RlXCImJmUudmVyc2lvbj09PW59fSx7XCIuL3ZlcnNpb25cIjoyNjV9XSwyNjM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKFwiLi92ZXJzaW9uXCIpO3QuZXhwb3J0cz1pO2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUmJmUudHlwZT09PVwiVmlydHVhbFRleHRcIiYmZS52ZXJzaW9uPT09bn19LHtcIi4vdmVyc2lvblwiOjI2NX1dLDI2NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1uO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUudHlwZT09PVwiV2lkZ2V0XCJ9fSx7fV0sMjY1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPVwiMlwifSx7fV0sMjY2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZShcIi4vdmVyc2lvblwiKTt2YXIgdj1lKFwiLi9pcy12bm9kZVwiKTt2YXIgbT1lKFwiLi9pcy13aWRnZXRcIik7dmFyIGc9ZShcIi4vaXMtdGh1bmtcIik7dmFyIF89ZShcIi4vaXMtdmhvb2tcIik7dC5leHBvcnRzPWk7dmFyIHk9e307dmFyIGI9W107ZnVuY3Rpb24gaShlLHQscixuLGkpe3RoaXMudGFnTmFtZT1lO3RoaXMucHJvcGVydGllcz10fHx5O3RoaXMuY2hpbGRyZW49cnx8Yjt0aGlzLmtleT1uIT1udWxsP1N0cmluZyhuKTp1bmRlZmluZWQ7dGhpcy5uYW1lc3BhY2U9dHlwZW9mIGk9PT1cInN0cmluZ1wiP2k6bnVsbDt2YXIgbz1yJiZyLmxlbmd0aHx8MDt2YXIgYT0wO3ZhciBzPWZhbHNlO3ZhciB1PWZhbHNlO3ZhciBjPWZhbHNlO3ZhciBsO2Zvcih2YXIgaCBpbiB0KXtpZih0Lmhhc093blByb3BlcnR5KGgpKXt2YXIgcD10W2hdO2lmKF8ocCkmJnAudW5ob29rKXtpZighbCl7bD17fX1sW2hdPXB9fX1mb3IodmFyIGY9MDtmPG87ZisrKXt2YXIgZD1yW2ZdO2lmKHYoZCkpe2ErPWQuY291bnR8fDA7aWYoIXMmJmQuaGFzV2lkZ2V0cyl7cz10cnVlfWlmKCF1JiZkLmhhc1RodW5rcyl7dT10cnVlfWlmKCFjJiYoZC5ob29rc3x8ZC5kZXNjZW5kYW50SG9va3MpKXtjPXRydWV9fWVsc2UgaWYoIXMmJm0oZCkpe2lmKHR5cGVvZiBkLmRlc3Ryb3k9PT1cImZ1bmN0aW9uXCIpe3M9dHJ1ZX19ZWxzZSBpZighdSYmZyhkKSl7dT10cnVlfX10aGlzLmNvdW50PW8rYTt0aGlzLmhhc1dpZGdldHM9czt0aGlzLmhhc1RodW5rcz11O3RoaXMuaG9va3M9bDt0aGlzLmRlc2NlbmRhbnRIb29rcz1jfWkucHJvdG90eXBlLnZlcnNpb249bjtpLnByb3RvdHlwZS50eXBlPVwiVmlydHVhbE5vZGVcIn0se1wiLi9pcy10aHVua1wiOjI2MCxcIi4vaXMtdmhvb2tcIjoyNjEsXCIuL2lzLXZub2RlXCI6MjYyLFwiLi9pcy13aWRnZXRcIjoyNjQsXCIuL3ZlcnNpb25cIjoyNjV9XSwyNjc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKFwiLi92ZXJzaW9uXCIpO2kuTk9ORT0wO2kuVlRFWFQ9MTtpLlZOT0RFPTI7aS5XSURHRVQ9MztpLlBST1BTPTQ7aS5PUkRFUj01O2kuSU5TRVJUPTY7aS5SRU1PVkU9NztpLlRIVU5LPTg7dC5leHBvcnRzPWk7ZnVuY3Rpb24gaShlLHQscil7dGhpcy50eXBlPU51bWJlcihlKTt0aGlzLnZOb2RlPXQ7dGhpcy5wYXRjaD1yfWkucHJvdG90eXBlLnZlcnNpb249bjtpLnByb3RvdHlwZS50eXBlPVwiVmlydHVhbFBhdGNoXCJ9LHtcIi4vdmVyc2lvblwiOjI2NX1dLDI2ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoXCIuL3ZlcnNpb25cIik7dC5leHBvcnRzPWk7ZnVuY3Rpb24gaShlKXt0aGlzLnRleHQ9U3RyaW5nKGUpfWkucHJvdG90eXBlLnZlcnNpb249bjtpLnByb3RvdHlwZS50eXBlPVwiVmlydHVhbFRleHRcIn0se1wiLi92ZXJzaW9uXCI6MjY1fV0sMjY5OltmdW5jdGlvbihlLHQscil7dmFyIHU9ZShcImlzLW9iamVjdFwiKTt2YXIgYz1lKFwiLi4vdm5vZGUvaXMtdmhvb2tcIik7dC5leHBvcnRzPWw7ZnVuY3Rpb24gbChlLHQpe3ZhciByO2Zvcih2YXIgbiBpbiBlKXtpZighKG4gaW4gdCkpe3I9cnx8e307cltuXT11bmRlZmluZWR9dmFyIGk9ZVtuXTt2YXIgbz10W25dO2lmKGk9PT1vKXtjb250aW51ZX1lbHNlIGlmKHUoaSkmJnUobykpe2lmKGgobykhPT1oKGkpKXtyPXJ8fHt9O3Jbbl09b31lbHNlIGlmKGMobykpe3I9cnx8e307cltuXT1vfWVsc2V7dmFyIGE9bChpLG8pO2lmKGEpe3I9cnx8e307cltuXT1hfX19ZWxzZXtyPXJ8fHt9O3Jbbl09b319Zm9yKHZhciBzIGluIHQpe2lmKCEocyBpbiBlKSl7cj1yfHx7fTtyW3NdPXRbc119fXJldHVybiByfWZ1bmN0aW9uIGgoZSl7aWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKXtyZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfWVsc2UgaWYoZS5fX3Byb3RvX18pe3JldHVybiBlLl9fcHJvdG9fX31lbHNlIGlmKGUuY29uc3RydWN0b3Ipe3JldHVybiBlLmNvbnN0cnVjdG9yLnByb3RvdHlwZX19fSx7XCIuLi92bm9kZS9pcy12aG9va1wiOjI2MSxcImlzLW9iamVjdFwiOjIwfV0sMjcwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZShcIngtaXMtYXJyYXlcIik7dmFyIGQ9ZShcIi4uL3Zub2RlL3ZwYXRjaFwiKTt2YXIgdj1lKFwiLi4vdm5vZGUvaXMtdm5vZGVcIik7dmFyIHM9ZShcIi4uL3Zub2RlL2lzLXZ0ZXh0XCIpO3ZhciB1PWUoXCIuLi92bm9kZS9pcy13aWRnZXRcIik7dmFyIGM9ZShcIi4uL3Zub2RlL2lzLXRodW5rXCIpO3ZhciBhPWUoXCIuLi92bm9kZS9oYW5kbGUtdGh1bmtcIik7dmFyIGw9ZShcIi4vZGlmZi1wcm9wc1wiKTt0LmV4cG9ydHM9aDtmdW5jdGlvbiBoKGUsdCl7dmFyIHI9e2E6ZX07bShlLHQsciwwKTtyZXR1cm4gcn1mdW5jdGlvbiBtKGUsdCxyLG4pe2lmKGU9PT10KXtyZXR1cm59dmFyIGk9cltuXTt2YXIgbz1mYWxzZTtpZihjKGUpfHxjKHQpKXtfKGUsdCxyLG4pfWVsc2UgaWYodD09bnVsbCl7aWYoIXUoZSkpe2YoZSxyLG4pO2k9cltuXX1pPVMoaSxuZXcgZChkLlJFTU9WRSxlLHQpKX1lbHNlIGlmKHYodCkpe2lmKHYoZSkpe2lmKGUudGFnTmFtZT09PXQudGFnTmFtZSYmZS5uYW1lc3BhY2U9PT10Lm5hbWVzcGFjZSYmZS5rZXk9PT10LmtleSl7dmFyIGE9bChlLnByb3BlcnRpZXMsdC5wcm9wZXJ0aWVzKTtpZihhKXtpPVMoaSxuZXcgZChkLlBST1BTLGUsYSkpfWk9cChlLHQscixpLG4pfWVsc2V7aT1TKGksbmV3IGQoZC5WTk9ERSxlLHQpKTtvPXRydWV9fWVsc2V7aT1TKGksbmV3IGQoZC5WTk9ERSxlLHQpKTtvPXRydWV9fWVsc2UgaWYocyh0KSl7aWYoIXMoZSkpe2k9UyhpLG5ldyBkKGQuVlRFWFQsZSx0KSk7bz10cnVlfWVsc2UgaWYoZS50ZXh0IT09dC50ZXh0KXtpPVMoaSxuZXcgZChkLlZURVhULGUsdCkpfX1lbHNlIGlmKHUodCkpe2lmKCF1KGUpKXtvPXRydWV9aT1TKGksbmV3IGQoZC5XSURHRVQsZSx0KSl9aWYoaSl7cltuXT1pfWlmKG8pe2YoZSxyLG4pfX1mdW5jdGlvbiBwKGUsdCxyLG4saSl7dmFyIG89ZS5jaGlsZHJlbjt2YXIgYT13KG8sdC5jaGlsZHJlbik7dmFyIHM9YS5jaGlsZHJlbjt2YXIgdT1vLmxlbmd0aDt2YXIgYz1zLmxlbmd0aDt2YXIgbD11PmM/dTpjO2Zvcih2YXIgaD0wO2g8bDtoKyspe3ZhciBwPW9baF07dmFyIGY9c1toXTtpKz0xO2lmKCFwKXtpZihmKXtuPVMobixuZXcgZChkLklOU0VSVCxudWxsLGYpKX19ZWxzZXttKHAsZixyLGkpfWlmKHYocCkmJnAuY291bnQpe2krPXAuY291bnR9fWlmKGEubW92ZXMpe249UyhuLG5ldyBkKGQuT1JERVIsZSxhLm1vdmVzKSl9cmV0dXJuIG59ZnVuY3Rpb24gZihlLHQscil7YihlLHQscik7ZyhlLHQscil9ZnVuY3Rpb24gZyhlLHQscil7aWYodShlKSl7aWYodHlwZW9mIGUuZGVzdHJveT09PVwiZnVuY3Rpb25cIil7dFtyXT1TKHRbcl0sbmV3IGQoZC5SRU1PVkUsZSxudWxsKSl9fWVsc2UgaWYodihlKSYmKGUuaGFzV2lkZ2V0c3x8ZS5oYXNUaHVua3MpKXt2YXIgbj1lLmNoaWxkcmVuO3ZhciBpPW4ubGVuZ3RoO2Zvcih2YXIgbz0wO288aTtvKyspe3ZhciBhPW5bb107cis9MTtnKGEsdCxyKTtpZih2KGEpJiZhLmNvdW50KXtyKz1hLmNvdW50fX19ZWxzZSBpZihjKGUpKXtfKGUsbnVsbCx0LHIpfX1mdW5jdGlvbiBfKGUsdCxyLG4pe3ZhciBpPWEoZSx0KTt2YXIgbz1oKGkuYSxpLmIpO2lmKHkobykpe3Jbbl09bmV3IGQoZC5USFVOSyxudWxsLG8pfX1mdW5jdGlvbiB5KGUpe2Zvcih2YXIgdCBpbiBlKXtpZih0IT09XCJhXCIpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gYihlLHQscil7aWYodihlKSl7aWYoZS5ob29rcyl7dFtyXT1TKHRbcl0sbmV3IGQoZC5QUk9QUyxlLHgoZS5ob29rcykpKX1pZihlLmRlc2NlbmRhbnRIb29rc3x8ZS5oYXNUaHVua3Mpe3ZhciBuPWUuY2hpbGRyZW47dmFyIGk9bi5sZW5ndGg7Zm9yKHZhciBvPTA7bzxpO28rKyl7dmFyIGE9bltvXTtyKz0xO2IoYSx0LHIpO2lmKHYoYSkmJmEuY291bnQpe3IrPWEuY291bnR9fX19ZWxzZSBpZihjKGUpKXtfKGUsbnVsbCx0LHIpfX1mdW5jdGlvbiB4KGUpe3ZhciB0PXt9O2Zvcih2YXIgciBpbiBlKXt0W3JdPXVuZGVmaW5lZH1yZXR1cm4gdH1mdW5jdGlvbiB3KGUsdCl7dmFyIHI9VCh0KTt2YXIgbj1yLmtleXM7dmFyIGk9ci5mcmVlO2lmKGkubGVuZ3RoPT09dC5sZW5ndGgpe3JldHVybntjaGlsZHJlbjp0LG1vdmVzOm51bGx9fXZhciBvPVQoZSk7dmFyIGE9by5rZXlzO3ZhciBzPW8uZnJlZTtpZihzLmxlbmd0aD09PWUubGVuZ3RoKXtyZXR1cm57Y2hpbGRyZW46dCxtb3ZlczpudWxsfX12YXIgdT1bXTt2YXIgYz0wO3ZhciBsPWkubGVuZ3RoO3ZhciBoPTA7Zm9yKHZhciBwPTA7cDxlLmxlbmd0aDtwKyspe3ZhciBmPWVbcF07dmFyIGQ7aWYoZi5rZXkpe2lmKG4uaGFzT3duUHJvcGVydHkoZi5rZXkpKXtkPW5bZi5rZXldO3UucHVzaCh0W2RdKX1lbHNle2Q9cC1oKys7dS5wdXNoKG51bGwpfX1lbHNle2lmKGM8bCl7ZD1pW2MrK107dS5wdXNoKHRbZF0pfWVsc2V7ZD1wLWgrKzt1LnB1c2gobnVsbCl9fX12YXIgdj1jPj1pLmxlbmd0aD90Lmxlbmd0aDppW2NdO2Zvcih2YXIgbT0wO208dC5sZW5ndGg7bSsrKXt2YXIgZz10W21dO2lmKGcua2V5KXtpZighYS5oYXNPd25Qcm9wZXJ0eShnLmtleSkpe3UucHVzaChnKX19ZWxzZSBpZihtPj12KXt1LnB1c2goZyl9fXZhciBfPXUuc2xpY2UoKTt2YXIgeT0wO3ZhciBiPVtdO3ZhciB4PVtdO3ZhciB3O2Zvcih2YXIgUz0wO1M8dC5sZW5ndGg7KXt2YXIgTT10W1NdO3c9X1t5XTt3aGlsZSh3PT09bnVsbCYmXy5sZW5ndGgpe2IucHVzaChDKF8seSxudWxsKSk7dz1fW3ldfWlmKCF3fHx3LmtleSE9PU0ua2V5KXtpZihNLmtleSl7aWYodyYmdy5rZXkpe2lmKG5bdy5rZXldIT09UysxKXtiLnB1c2goQyhfLHksdy5rZXkpKTt3PV9beV07aWYoIXd8fHcua2V5IT09TS5rZXkpe3gucHVzaCh7a2V5Ok0ua2V5LHRvOlN9KX1lbHNle3krK319ZWxzZXt4LnB1c2goe2tleTpNLmtleSx0bzpTfSl9fWVsc2V7eC5wdXNoKHtrZXk6TS5rZXksdG86U30pfVMrK31lbHNlIGlmKHcmJncua2V5KXtiLnB1c2goQyhfLHksdy5rZXkpKX19ZWxzZXt5Kys7UysrfX13aGlsZSh5PF8ubGVuZ3RoKXt3PV9beV07Yi5wdXNoKEMoXyx5LHcmJncua2V5KSl9aWYoYi5sZW5ndGg9PT1oJiYheC5sZW5ndGgpe3JldHVybntjaGlsZHJlbjp1LG1vdmVzOm51bGx9fXJldHVybntjaGlsZHJlbjp1LG1vdmVzOntyZW1vdmVzOmIsaW5zZXJ0czp4fX19ZnVuY3Rpb24gQyhlLHQscil7ZS5zcGxpY2UodCwxKTtyZXR1cm57ZnJvbTp0LGtleTpyfX1mdW5jdGlvbiBUKGUpe3ZhciB0PXt9O3ZhciByPVtdO3ZhciBuPWUubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bjtpKyspe3ZhciBvPWVbaV07aWYoby5rZXkpe3Rbby5rZXldPWl9ZWxzZXtyLnB1c2goaSl9fXJldHVybntrZXlzOnQsZnJlZTpyfX1mdW5jdGlvbiBTKGUsdCl7aWYoZSl7aWYobihlKSl7ZS5wdXNoKHQpfWVsc2V7ZT1bZSx0XX1yZXR1cm4gZX1lbHNle3JldHVybiB0fX19LHtcIi4uL3Zub2RlL2hhbmRsZS10aHVua1wiOjI1OSxcIi4uL3Zub2RlL2lzLXRodW5rXCI6MjYwLFwiLi4vdm5vZGUvaXMtdm5vZGVcIjoyNjIsXCIuLi92bm9kZS9pcy12dGV4dFwiOjI2MyxcIi4uL3Zub2RlL2lzLXdpZGdldFwiOjI2NCxcIi4uL3Zub2RlL3ZwYXRjaFwiOjI2NyxcIi4vZGlmZi1wcm9wc1wiOjI2OSxcIngtaXMtYXJyYXlcIjoyODl9XSwyNzE6W2Z1bmN0aW9uKHQscixlKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZShmdW5jdGlvbihlKXt2YXIgdD1lKFwiLi9tYWtlUHJvbWlzZVwiKTt2YXIgcj1lKFwiLi9TY2hlZHVsZXJcIik7dmFyIG49ZShcIi4vZW52XCIpLmFzYXA7cmV0dXJuIHQoe3NjaGVkdWxlcjpuZXcgcihuKX0pfSl9KSh0eXBlb2Ygbz09PVwiZnVuY3Rpb25cIiYmby5hbWQ/bzpmdW5jdGlvbihlKXtyLmV4cG9ydHM9ZSh0KX0pfSx7XCIuL1NjaGVkdWxlclwiOjI3MixcIi4vZW52XCI6Mjg0LFwiLi9tYWtlUHJvbWlzZVwiOjI4Nn1dLDI3MjpbZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9hc3luYz1lO3RoaXMuX3J1bm5pbmc9ZmFsc2U7dGhpcy5fcXVldWU9dGhpczt0aGlzLl9xdWV1ZUxlbj0wO3RoaXMuX2FmdGVyUXVldWU9e307dGhpcy5fYWZ0ZXJRdWV1ZUxlbj0wO3ZhciB0PXRoaXM7dGhpcy5kcmFpbj1mdW5jdGlvbigpe3QuX2RyYWluKCl9fWUucHJvdG90eXBlLmVucXVldWU9ZnVuY3Rpb24oZSl7dGhpcy5fcXVldWVbdGhpcy5fcXVldWVMZW4rK109ZTt0aGlzLnJ1bigpfTtlLnByb3RvdHlwZS5hZnRlclF1ZXVlPWZ1bmN0aW9uKGUpe3RoaXMuX2FmdGVyUXVldWVbdGhpcy5fYWZ0ZXJRdWV1ZUxlbisrXT1lO3RoaXMucnVuKCl9O2UucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe2lmKCF0aGlzLl9ydW5uaW5nKXt0aGlzLl9ydW5uaW5nPXRydWU7dGhpcy5fYXN5bmModGhpcy5kcmFpbil9fTtlLnByb3RvdHlwZS5fZHJhaW49ZnVuY3Rpb24oKXt2YXIgZT0wO2Zvcig7ZTx0aGlzLl9xdWV1ZUxlbjsrK2Upe3RoaXMuX3F1ZXVlW2VdLnJ1bigpO3RoaXMuX3F1ZXVlW2VdPXZvaWQgMH10aGlzLl9xdWV1ZUxlbj0wO3RoaXMuX3J1bm5pbmc9ZmFsc2U7Zm9yKGU9MDtlPHRoaXMuX2FmdGVyUXVldWVMZW47KytlKXt0aGlzLl9hZnRlclF1ZXVlW2VdLnJ1bigpO3RoaXMuX2FmdGVyUXVldWVbZV09dm9pZCAwfXRoaXMuX2FmdGVyUXVldWVMZW49MH07cmV0dXJuIGV9KX0pKHR5cGVvZiBvPT09XCJmdW5jdGlvblwiJiZvLmFtZD9vOmZ1bmN0aW9uKGUpe3QuZXhwb3J0cz1lKCl9KX0se31dLDI3MzpbZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtFcnJvci5jYWxsKHRoaXMpO3RoaXMubWVzc2FnZT1lO3RoaXMubmFtZT10Lm5hbWU7aWYodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlPT09XCJmdW5jdGlvblwiKXtFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHQpfX10LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7dC5wcm90b3R5cGUuY29uc3RydWN0b3I9dDtyZXR1cm4gdH0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjc0OltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oKXtlLnRyeUNhdGNoUmVzb2x2ZT10O3JldHVybiBlO2Z1bmN0aW9uIGUoYSxzKXtpZihhcmd1bWVudHMubGVuZ3RoPDIpe3M9dH1yZXR1cm4gZTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1hLl9kZWZlcigpO3ZhciBpPXIubGVuZ3RoO3ZhciBvPW5ldyBBcnJheShpKTt1KHtmOmUsdGhpc0FyZzp0LGFyZ3M6cixwYXJhbXM6byxpOmktMSxjYWxsOnN9LG4uX2hhbmRsZXIpO3JldHVybiBufWZ1bmN0aW9uIHUoZSx0KXtpZihlLmk8MCl7cmV0dXJuIHMoZS5mLGUudGhpc0FyZyxlLnBhcmFtcyx0KX12YXIgcj1hLl9oYW5kbGVyKGUuYXJnc1tlLmldKTtyLmZvbGQobixlLHZvaWQgMCx0KX1mdW5jdGlvbiBuKGUsdCxyKXtlLnBhcmFtc1tlLmldPXQ7ZS5pLT0xO3UoZSxyKX19ZnVuY3Rpb24gdChlLHQscixuKXt0cnl7bi5yZXNvbHZlKGUuYXBwbHkodCxyKSl9Y2F0Y2goZSl7bi5yZWplY3QoZSl9fX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjc1OltmdW5jdGlvbih0LHIsZSl7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oZSl7dmFyIF89ZShcIi4uL3N0YXRlXCIpO3ZhciB5PWUoXCIuLi9hcHBseVwiKTtyZXR1cm4gZnVuY3Rpb24gZShmKXt2YXIgaT15KGYpO3ZhciByPWYucmVzb2x2ZTt2YXIgbj1mLmFsbDt2YXIgbz1BcnJheS5wcm90b3R5cGUucmVkdWNlO3ZhciBhPUFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodDt2YXIgcz1BcnJheS5wcm90b3R5cGUuc2xpY2U7Zi5hbnk9dDtmLnNvbWU9dTtmLnNldHRsZT1wO2YubWFwPWM7Zi5maWx0ZXI9bDtmLnJlZHVjZT12O2YucmVkdWNlUmlnaHQ9bTtmLnByb3RvdHlwZS5zcHJlYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihuKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGx5KHRoaXMsZSl9KX07cmV0dXJuIGY7ZnVuY3Rpb24gdChlKXt2YXIgdD1mLl9kZWZlcigpO3ZhciByPXQuX2hhbmRsZXI7dmFyIG49ZS5sZW5ndGg+Pj4wO3ZhciBpPW47dmFyIG89W107Zm9yKHZhciBhLHMsdT0wO3U8bjsrK3Upe3M9ZVt1XTtpZihzPT09dm9pZCAwJiYhKHUgaW4gZSkpey0taTtjb250aW51ZX1hPWYuX2hhbmRsZXIocyk7aWYoYS5zdGF0ZSgpPjApe3IuYmVjb21lKGEpO2YuX3Zpc2l0UmVtYWluaW5nKGUsdSxhKTticmVha31lbHNle2EudmlzaXQocixjLGwpfX1pZihpPT09MCl7ci5yZWplY3QobmV3IFJhbmdlRXJyb3IoXCJhbnkoKTogYXJyYXkgbXVzdCBub3QgYmUgZW1wdHlcIikpfXJldHVybiB0O2Z1bmN0aW9uIGMoZSl7bz1udWxsO3RoaXMucmVzb2x2ZShlKX1mdW5jdGlvbiBsKGUpe2lmKHRoaXMucmVzb2x2ZWQpe3JldHVybn1vLnB1c2goZSk7aWYoLS1pPT09MCl7dGhpcy5yZWplY3Qobyl9fX1mdW5jdGlvbiB1KGUsdCl7dmFyIHI9Zi5fZGVmZXIoKTt2YXIgbj1yLl9oYW5kbGVyO3ZhciBpPVtdO3ZhciBvPVtdO3ZhciBhPWUubGVuZ3RoPj4+MDt2YXIgcz0wO3ZhciB1O3ZhciBjLGw7Zm9yKGw9MDtsPGE7KytsKXtjPWVbbF07aWYoYz09PXZvaWQgMCYmIShsIGluIGUpKXtjb250aW51ZX0rK3N9dD1NYXRoLm1heCh0LDApO3U9cy10KzE7cz1NYXRoLm1pbih0LHMpO2lmKHQ+cyl7bi5yZWplY3QobmV3IFJhbmdlRXJyb3IoXCJzb21lKCk6IGFycmF5IG11c3QgY29udGFpbiBhdCBsZWFzdCBcIit0K1wiIGl0ZW0ocyksIGJ1dCBoYWQgXCIrcykpfWVsc2UgaWYocz09PTApe24ucmVzb2x2ZShpKX1mb3IobD0wO2w8YTsrK2wpe2M9ZVtsXTtpZihjPT09dm9pZCAwJiYhKGwgaW4gZSkpe2NvbnRpbnVlfWYuX2hhbmRsZXIoYykudmlzaXQobixoLHAsbi5ub3RpZnkpfXJldHVybiByO2Z1bmN0aW9uIGgoZSl7aWYodGhpcy5yZXNvbHZlZCl7cmV0dXJufWkucHVzaChlKTtpZigtLXM9PT0wKXtvPW51bGw7dGhpcy5yZXNvbHZlKGkpfX1mdW5jdGlvbiBwKGUpe2lmKHRoaXMucmVzb2x2ZWQpe3JldHVybn1vLnB1c2goZSk7aWYoLS11PT09MCl7aT1udWxsO3RoaXMucmVqZWN0KG8pfX19ZnVuY3Rpb24gYyhlLHQpe3JldHVybiBmLl90cmF2ZXJzZSh0LGUpfWZ1bmN0aW9uIGwoZSx0KXt2YXIgcj1zLmNhbGwoZSk7cmV0dXJuIGYuX3RyYXZlcnNlKHQscikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gaChyLGUpfSl9ZnVuY3Rpb24gaChlLHQpe3ZhciByPXQubGVuZ3RoO3ZhciBuPW5ldyBBcnJheShyKTtmb3IodmFyIGk9MCxvPTA7aTxyOysraSl7aWYodFtpXSl7bltvKytdPWYuX2hhbmRsZXIoZVtpXSkudmFsdWV9fW4ubGVuZ3RoPW87cmV0dXJuIG59ZnVuY3Rpb24gcChlKXtyZXR1cm4gbihlLm1hcChkKSl9ZnVuY3Rpb24gZChlKXt2YXIgdDtpZihlIGluc3RhbmNlb2YgZil7dD1lLl9oYW5kbGVyLmpvaW4oKX1pZih0JiZ0LnN0YXRlKCk9PT0wfHwhdCl7cmV0dXJuIHIoZSkudGhlbihfLmZ1bGZpbGxlZCxfLnJlamVjdGVkKX10Ll91bnJlcG9ydCgpO3JldHVybiBfLmluc3BlY3QodCl9ZnVuY3Rpb24gdihlLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjI/by5jYWxsKGUsZyh0KSxhcmd1bWVudHNbMl0pOm8uY2FsbChlLGcodCkpfWZ1bmN0aW9uIG0oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4yP2EuY2FsbChlLGcodCksYXJndW1lbnRzWzJdKTphLmNhbGwoZSxnKHQpKX1mdW5jdGlvbiBnKG4pe3JldHVybiBmdW5jdGlvbihlLHQscil7cmV0dXJuIGkobix2b2lkIDAsW2UsdCxyXSl9fX19KX0pKHR5cGVvZiBvPT09XCJmdW5jdGlvblwiJiZvLmFtZD9vOmZ1bmN0aW9uKGUpe3IuZXhwb3J0cz1lKHQpfSl9LHtcIi4uL2FwcGx5XCI6Mjc0LFwiLi4vc3RhdGVcIjoyODd9XSwyNzY6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQpe3ZhciBuPXQucmVzb2x2ZTt2YXIgaT10LnJlamVjdDt2YXIgcj10LnByb3RvdHlwZVtcImNhdGNoXCJdO3QucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9oYW5kbGVyLnZpc2l0KHRoaXMuX2hhbmRsZXIucmVjZWl2ZXIsZSx0KX07dC5wcm90b3R5cGVbXCJjYXRjaFwiXT10LnByb3RvdHlwZS5vdGhlcndpc2U9ZnVuY3Rpb24oZSl7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtyZXR1cm4gci5jYWxsKHRoaXMsZSl9aWYodHlwZW9mIGUhPT1cImZ1bmN0aW9uXCIpe3JldHVybiB0aGlzLmVuc3VyZSh1KX1yZXR1cm4gci5jYWxsKHRoaXMsbyhhcmd1bWVudHNbMV0sZSkpfTtmdW5jdGlvbiBvKHQscil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBjKGUscik/dC5jYWxsKHRoaXMsZSk6aShlKX19dC5wcm90b3R5cGVbXCJmaW5hbGx5XCJdPXQucHJvdG90eXBlLmVuc3VyZT1mdW5jdGlvbih0KXtpZih0eXBlb2YgdCE9PVwiZnVuY3Rpb25cIil7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYSh0LHRoaXMsaCxlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGEodCx0aGlzLGksZSl9KX07ZnVuY3Rpb24gYShlLHQscixuKXt2YXIgaT1lLmNhbGwodCk7cmV0dXJuIGwoaSk/cyhpLHIsbik6cihuKX1mdW5jdGlvbiBzKGUsdCxyKXtyZXR1cm4gbihlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQocil9KX10LnByb3RvdHlwZVtcImVsc2VcIl09dC5wcm90b3R5cGUub3JFbHNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX07dC5wcm90b3R5cGVbXCJ5aWVsZFwiXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX07dC5wcm90b3R5cGUudGFwPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4oZSlbXCJ5aWVsZFwiXSh0aGlzKX07cmV0dXJuIHR9O2Z1bmN0aW9uIHUoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2F0Y2ggcHJlZGljYXRlIG11c3QgYmUgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBjKGUsdCl7cmV0dXJuIHIodCk/ZSBpbnN0YW5jZW9mIHQ6dChlKX1mdW5jdGlvbiByKGUpe3JldHVybiBlPT09RXJyb3J8fGUhPW51bGwmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgRXJyb3J9ZnVuY3Rpb24gbChlKXtyZXR1cm4odHlwZW9mIGU9PT1cIm9iamVjdFwifHx0eXBlb2YgZT09PVwiZnVuY3Rpb25cIikmJmUhPT1udWxsfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGV9fSl9KSh0eXBlb2Ygbz09PVwiZnVuY3Rpb25cIiYmby5hbWQ/bzpmdW5jdGlvbihlKXt0LmV4cG9ydHM9ZSgpfSl9LHt9XSwyNzc6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKGkpe2kucHJvdG90eXBlLmZvbGQ9ZnVuY3Rpb24obixlKXt2YXIgdD10aGlzLl9iZWdldCgpO3RoaXMuX2hhbmRsZXIuZm9sZChmdW5jdGlvbihlLHQscil7aS5faGFuZGxlcihlKS5mb2xkKGZ1bmN0aW9uKGUsdCxyKXtyLnJlc29sdmUobi5jYWxsKHRoaXMsdCxlKSl9LHQsdGhpcyxyKX0sZSx0Ll9oYW5kbGVyLnJlY2VpdmVyLHQuX2hhbmRsZXIpO3JldHVybiB0fTtyZXR1cm4gaX19KX0pKHR5cGVvZiBvPT09XCJmdW5jdGlvblwiJiZvLmFtZD9vOmZ1bmN0aW9uKGUpe3QuZXhwb3J0cz1lKCl9KX0se31dLDI3ODpbZnVuY3Rpb24odCxyLGUpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlKGZ1bmN0aW9uKGUpe3ZhciByPWUoXCIuLi9zdGF0ZVwiKS5pbnNwZWN0O3JldHVybiBmdW5jdGlvbiBlKHQpe3QucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gcih0Ll9oYW5kbGVyKHRoaXMpKX07cmV0dXJuIHR9fSl9KSh0eXBlb2Ygbz09PVwiZnVuY3Rpb25cIiYmby5hbWQ/bzpmdW5jdGlvbihlKXtyLmV4cG9ydHM9ZSh0KX0pfSx7XCIuLi9zdGF0ZVwiOjI4N31dLDI3OTpbZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGUodCl7dmFyIGE9dC5yZXNvbHZlO3QuaXRlcmF0ZT1yO3QudW5mb2xkPXM7cmV0dXJuIHQ7ZnVuY3Rpb24gcih0LGUscixuKXtyZXR1cm4gcyhmdW5jdGlvbihlKXtyZXR1cm5bZSx0KGUpXX0sZSxyLG4pfWZ1bmN0aW9uIHMocixuLGksZSl7cmV0dXJuIGEoZSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gYShuKHQpKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlP3Q6YShyKHQpKS5zcHJlYWQobyl9KX0pO2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm4gYShpKGUpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHMocixuLGksdCl9KX19fX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjgwOltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXt0LnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx2b2lkIDAsZSl9O3JldHVybiB0fX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjgxOltmdW5jdGlvbih0LHIsZSl7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oZSl7dmFyIGE9ZShcIi4uL2VudlwiKTt2YXIgaT1lKFwiLi4vVGltZW91dEVycm9yXCIpO2Z1bmN0aW9uIHMoZSx0LHIsbil7cmV0dXJuIGEuc2V0VGltZXIoZnVuY3Rpb24oKXtlKHIsbix0KX0sdCl9cmV0dXJuIGZ1bmN0aW9uIGUodCl7dC5wcm90b3R5cGUuZGVsYXk9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYmVnZXQoKTt0aGlzLl9oYW5kbGVyLmZvbGQocixlLHZvaWQgMCx0Ll9oYW5kbGVyKTtyZXR1cm4gdH07ZnVuY3Rpb24gcihlLHQscil7cyhuLGUsdCxyKX1mdW5jdGlvbiBuKGUsdCl7dC5yZXNvbHZlKGUpfXQucHJvdG90eXBlLnRpbWVvdXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9iZWdldCgpO3ZhciBuPXIuX2hhbmRsZXI7dmFyIGk9cyhvLGUsdCxyLl9oYW5kbGVyKTt0aGlzLl9oYW5kbGVyLnZpc2l0KG4sZnVuY3Rpb24gZSh0KXthLmNsZWFyVGltZXIoaSk7dGhpcy5yZXNvbHZlKHQpfSxmdW5jdGlvbiBlKHQpe2EuY2xlYXJUaW1lcihpKTt0aGlzLnJlamVjdCh0KX0sbi5ub3RpZnkpO3JldHVybiByfTtmdW5jdGlvbiBvKGUsdCxyKXt2YXIgbj10eXBlb2YgZT09PVwidW5kZWZpbmVkXCI/bmV3IGkoXCJ0aW1lZCBvdXQgYWZ0ZXIgXCIrcitcIm1zXCIpOmU7dC5yZWplY3Qobil9cmV0dXJuIHR9fSl9KSh0eXBlb2Ygbz09PVwiZnVuY3Rpb25cIiYmby5hbWQ/bzpmdW5jdGlvbihlKXtyLmV4cG9ydHM9ZSh0KX0pfSx7XCIuLi9UaW1lb3V0RXJyb3JcIjoyNzMsXCIuLi9lbnZcIjoyODR9XSwyODI6W2Z1bmN0aW9uKHQscixlKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZShmdW5jdGlvbihlKXt2YXIgcD1lKFwiLi4vZW52XCIpLnNldFRpbWVyO3ZhciBmPWUoXCIuLi9mb3JtYXRcIik7cmV0dXJuIGZ1bmN0aW9uIGUodCl7dmFyIHI9djt2YXIgbj12O3ZhciBpO2lmKHR5cGVvZiBjb25zb2xlIT09XCJ1bmRlZmluZWRcIil7aT1jb25zb2xlO3I9dHlwZW9mIGkuZXJyb3IhPT1cInVuZGVmaW5lZFwiP2Z1bmN0aW9uKGUpe2kuZXJyb3IoZSl9OmZ1bmN0aW9uKGUpe2kubG9nKGUpfTtuPXR5cGVvZiBpLmluZm8hPT1cInVuZGVmaW5lZFwiP2Z1bmN0aW9uKGUpe2kuaW5mbyhlKX06ZnVuY3Rpb24oZSl7aS5sb2coZSl9fXQub25Qb3RlbnRpYWxseVVuaGFuZGxlZFJlamVjdGlvbj1mdW5jdGlvbihlKXtsKHUsZSl9O3Qub25Qb3RlbnRpYWxseVVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQ9ZnVuY3Rpb24oZSl7bChjLGUpfTt0Lm9uRmF0YWxSZWplY3Rpb249ZnVuY3Rpb24oZSl7bChkLGUudmFsdWUpfTt2YXIgbz1bXTt2YXIgYT1bXTt2YXIgcz1udWxsO2Z1bmN0aW9uIHUoZSl7aWYoIWUuaGFuZGxlZCl7YS5wdXNoKGUpO3IoXCJQb3RlbnRpYWxseSB1bmhhbmRsZWQgcmVqZWN0aW9uIFtcIitlLmlkK1wiXSBcIitmLmZvcm1hdEVycm9yKGUudmFsdWUpKX19ZnVuY3Rpb24gYyhlKXt2YXIgdD1hLmluZGV4T2YoZSk7aWYodD49MCl7YS5zcGxpY2UodCwxKTtuKFwiSGFuZGxlZCBwcmV2aW91cyByZWplY3Rpb24gW1wiK2UuaWQrXCJdIFwiK2YuZm9ybWF0T2JqZWN0KGUudmFsdWUpKX19ZnVuY3Rpb24gbChlLHQpe28ucHVzaChlLHQpO2lmKHM9PT1udWxsKXtzPXAoaCwwKX19ZnVuY3Rpb24gaCgpe3M9bnVsbDt3aGlsZShvLmxlbmd0aD4wKXtvLnNoaWZ0KCkoby5zaGlmdCgpKX19cmV0dXJuIHR9O2Z1bmN0aW9uIGQoZSl7dGhyb3cgZX1mdW5jdGlvbiB2KCl7fX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7ci5leHBvcnRzPWUodCl9KX0se1wiLi4vZW52XCI6Mjg0LFwiLi4vZm9ybWF0XCI6Mjg1fV0sMjgzOltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0KXt0LnByb3RvdHlwZVtcIndpdGhcIl09dC5wcm90b3R5cGUud2l0aFRoaXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYmVnZXQoKTt2YXIgcj10Ll9oYW5kbGVyO3IucmVjZWl2ZXI9ZTt0aGlzLl9oYW5kbGVyLmNoYWluKHIsZSk7cmV0dXJuIHR9O3JldHVybiB0fX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjg0OltmdW5jdGlvbih0LHIsZSl7KGZ1bmN0aW9uKGgpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlKGZ1bmN0aW9uKGUpe3ZhciB0O3ZhciByPXR5cGVvZiBzZXRUaW1lb3V0IT09XCJ1bmRlZmluZWRcIiYmc2V0VGltZW91dDt2YXIgbj1mdW5jdGlvbihlLHQpe3JldHVybiBzZXRUaW1lb3V0KGUsdCl9O3ZhciBpPWZ1bmN0aW9uKGUpe3JldHVybiBjbGVhclRpbWVvdXQoZSl9O3ZhciBvPWZ1bmN0aW9uKGUpe3JldHVybiByKGUsMCl9O2lmKHUoKSl7bz1mdW5jdGlvbihlKXtyZXR1cm4gaC5uZXh0VGljayhlKX19ZWxzZSBpZih0PWMoKSl7bz1sKHQpfWVsc2UgaWYoIXIpe3ZhciBhPWU7dmFyIHM9YShcInZlcnR4XCIpO249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcy5zZXRUaW1lcih0LGUpfTtpPXMuY2FuY2VsVGltZXI7bz1zLnJ1bk9uTG9vcHx8cy5ydW5PbkNvbnRleHR9cmV0dXJue3NldFRpbWVyOm4sY2xlYXJUaW1lcjppLGFzYXA6b307ZnVuY3Rpb24gdSgpe3JldHVybiB0eXBlb2YgaCE9PVwidW5kZWZpbmVkXCImJk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChoKT09PVwiW29iamVjdCBwcm9jZXNzXVwifWZ1bmN0aW9uIGMoKXtyZXR1cm4gdHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIhPT1cInVuZGVmaW5lZFwiJiZNdXRhdGlvbk9ic2VydmVyfHx0eXBlb2YgV2ViS2l0TXV0YXRpb25PYnNlcnZlciE9PVwidW5kZWZpbmVkXCImJldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ9ZnVuY3Rpb24gbChlKXt2YXIgdDt2YXIgcj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTt2YXIgbj1uZXcgZShpKTtuLm9ic2VydmUocix7Y2hhcmFjdGVyRGF0YTp0cnVlfSk7ZnVuY3Rpb24gaSgpe3ZhciBlPXQ7dD12b2lkIDA7ZSgpfXZhciBvPTA7cmV0dXJuIGZ1bmN0aW9uKGUpe3Q9ZTtyLmRhdGE9b149MX19fSl9KSh0eXBlb2Ygbz09PVwiZnVuY3Rpb25cIiYmby5hbWQ/bzpmdW5jdGlvbihlKXtyLmV4cG9ydHM9ZSh0KX0pfSkuY2FsbCh0aGlzLHQoXCJfcHJvY2Vzc1wiKSl9LHtfcHJvY2Vzczo3fV0sMjg1OltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oKXtyZXR1cm57Zm9ybWF0RXJyb3I6ZSxmb3JtYXRPYmplY3Q6cix0cnlTdHJpbmdpZnk6bn07ZnVuY3Rpb24gZShlKXt2YXIgdD10eXBlb2YgZT09PVwib2JqZWN0XCImJmUhPT1udWxsJiYoZS5zdGFja3x8ZS5tZXNzYWdlKT9lLnN0YWNrfHxlLm1lc3NhZ2U6cihlKTtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yP3Q6dCtcIiAoV0FSTklORzogbm9uLUVycm9yIHVzZWQpXCJ9ZnVuY3Rpb24gcihlKXt2YXIgdD1TdHJpbmcoZSk7aWYodD09PVwiW29iamVjdCBPYmplY3RdXCImJnR5cGVvZiBKU09OIT09XCJ1bmRlZmluZWRcIil7dD1uKGUsdCl9cmV0dXJuIHR9ZnVuY3Rpb24gbihlLHQpe3RyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9Y2F0Y2goZSl7cmV0dXJuIHR9fX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjg2OltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKG5lKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQpe3ZhciByPXQuc2NoZWR1bGVyO3ZhciBuPXJlKCk7dmFyIGk9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe310LnByb3RvdHlwZT1lO3JldHVybiBuZXcgdH07ZnVuY3Rpb24gaChlLHQpe3RoaXMuX2hhbmRsZXI9ZT09PVM/dDpvKGUpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9bmV3IFQ7dHJ5e2UocixuLGkpfWNhdGNoKGUpe24oZSl9cmV0dXJuIHQ7ZnVuY3Rpb24gcihlKXt0LnJlc29sdmUoZSl9ZnVuY3Rpb24gbihlKXt0LnJlamVjdChlKX1mdW5jdGlvbiBpKGUpe3Qubm90aWZ5KGUpfX1oLnJlc29sdmU9YTtoLnJlamVjdD1zO2gubmV2ZXI9dTtoLl9kZWZlcj1jO2guX2hhbmRsZXI9YjtmdW5jdGlvbiBhKGUpe3JldHVybiBHKGUpP2U6bmV3IGgoUyxuZXcgRShiKGUpKSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gbmV3IGgoUyxuZXcgRShuZXcgaihlKSkpfWZ1bmN0aW9uIHUoKXtyZXR1cm4gTn1mdW5jdGlvbiBjKCl7cmV0dXJuIG5ldyBoKFMsbmV3IFQpfWgucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX2hhbmRsZXI7dmFyIGk9bi5qb2luKCkuc3RhdGUoKTtpZih0eXBlb2YgZSE9PVwiZnVuY3Rpb25cIiYmaT4wfHx0eXBlb2YgdCE9PVwiZnVuY3Rpb25cIiYmaTwwKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoUyxuKX12YXIgbz10aGlzLl9iZWdldCgpO3ZhciBhPW8uX2hhbmRsZXI7bi5jaGFpbihhLG4ucmVjZWl2ZXIsZSx0LHIpO3JldHVybiBvfTtoLnByb3RvdHlwZVtcImNhdGNoXCJdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfTtoLnByb3RvdHlwZS5fYmVnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbCh0aGlzLl9oYW5kbGVyLHRoaXMuY29uc3RydWN0b3IpfTtmdW5jdGlvbiBsKGUsdCl7dmFyIHI9bmV3IFQoZS5yZWNlaXZlcixlLmpvaW4oKS5jb250ZXh0KTtyZXR1cm4gbmV3IHQoUyxyKX1oLmFsbD1wO2gucmFjZT1fO2guX3RyYXZlcnNlPWY7ZnVuY3Rpb24gcChlKXtyZXR1cm4gZChKLG51bGwsZSl9ZnVuY3Rpb24gZihlLHQpe3JldHVybiBkKFcsZSx0KX1mdW5jdGlvbiBkKG4saSxvKXt2YXIgZT10eXBlb2YgaT09PVwiZnVuY3Rpb25cIj9jOmw7dmFyIHQ9bmV3IFQ7dmFyIGE9by5sZW5ndGg+Pj4wO3ZhciBzPW5ldyBBcnJheShhKTtmb3IodmFyIHI9MCx1O3I8by5sZW5ndGgmJiF0LnJlc29sdmVkOysrcil7dT1vW3JdO2lmKHU9PT12b2lkIDAmJiEociBpbiBvKSl7LS1hO2NvbnRpbnVlfXYobyxlLHIsdSx0KX1pZihhPT09MCl7dC5iZWNvbWUobmV3IFAocykpfXJldHVybiBuZXcgaChTLHQpO2Z1bmN0aW9uIGMoZSx0LHIpe2lmKCFyLnJlc29sdmVkKXt2KG8sbCxlLG4oaSx0LGUpLHIpfX1mdW5jdGlvbiBsKGUsdCxyKXtzW2VdPXQ7aWYoLS1hPT09MCl7ci5iZWNvbWUobmV3IFAocykpfX19ZnVuY3Rpb24gdihlLHQscixuLGkpe2lmKFYobikpe3ZhciBvPXgobik7dmFyIGE9by5zdGF0ZSgpO2lmKGE9PT0wKXtvLmZvbGQodCxyLHZvaWQgMCxpKX1lbHNlIGlmKGE+MCl7dChyLG8udmFsdWUsaSl9ZWxzZXtpLmJlY29tZShvKTttKGUscisxLG8pfX1lbHNle3QocixuLGkpfX1oLl92aXNpdFJlbWFpbmluZz1tO2Z1bmN0aW9uIG0oZSx0LHIpe2Zvcih2YXIgbj10O248ZS5sZW5ndGg7KytuKXtnKGIoZVtuXSkscil9fWZ1bmN0aW9uIGcoZSx0KXtpZihlPT09dCl7cmV0dXJufXZhciByPWUuc3RhdGUoKTtpZihyPT09MCl7ZS52aXNpdChlLHZvaWQgMCxlLl91bnJlcG9ydCl9ZWxzZSBpZihyPDApe2UuX3VucmVwb3J0KCl9fWZ1bmN0aW9uIF8oZSl7aWYodHlwZW9mIGUhPT1cIm9iamVjdFwifHxlPT09bnVsbCl7cmV0dXJuIHMobmV3IFR5cGVFcnJvcihcIm5vbi1pdGVyYWJsZSBwYXNzZWQgdG8gcmFjZSgpXCIpKX1yZXR1cm4gZS5sZW5ndGg9PT0wP3UoKTplLmxlbmd0aD09PTE/YShlWzBdKTp5KGUpfWZ1bmN0aW9uIHkoZSl7dmFyIHQ9bmV3IFQ7dmFyIHIsbixpO2ZvcihyPTA7cjxlLmxlbmd0aDsrK3Ipe249ZVtyXTtpZihuPT09dm9pZCAwJiYhKHIgaW4gZSkpe2NvbnRpbnVlfWk9YihuKTtpZihpLnN0YXRlKCkhPT0wKXt0LmJlY29tZShpKTttKGUscisxLGkpO2JyZWFrfWVsc2V7aS52aXNpdCh0LHQucmVzb2x2ZSx0LnJlamVjdCl9fXJldHVybiBuZXcgaChTLHQpfWZ1bmN0aW9uIGIoZSl7aWYoRyhlKSl7cmV0dXJuIGUuX2hhbmRsZXIuam9pbigpfXJldHVybiBWKGUpP3coZSk6bmV3IFAoZSl9ZnVuY3Rpb24geChlKXtyZXR1cm4gRyhlKT9lLl9oYW5kbGVyLmpvaW4oKTp3KGUpfWZ1bmN0aW9uIHcoZSl7dHJ5e3ZhciB0PWUudGhlbjtyZXR1cm4gdHlwZW9mIHQ9PT1cImZ1bmN0aW9uXCI/bmV3IE8odCxlKTpuZXcgUChlKX1jYXRjaChlKXtyZXR1cm4gbmV3IGooZSl9fWZ1bmN0aW9uIFMoKXt9Uy5wcm90b3R5cGUud2hlbj1TLnByb3RvdHlwZS5iZWNvbWU9Uy5wcm90b3R5cGUubm90aWZ5PVMucHJvdG90eXBlLmZhaWw9Uy5wcm90b3R5cGUuX3VucmVwb3J0PVMucHJvdG90eXBlLl9yZXBvcnQ9UTtTLnByb3RvdHlwZS5fc3RhdGU9MDtTLnByb3RvdHlwZS5zdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX07Uy5wcm90b3R5cGUuam9pbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5oYW5kbGVyIT09dm9pZCAwKXtlPWUuaGFuZGxlcn1yZXR1cm4gZX07Uy5wcm90b3R5cGUuY2hhaW49ZnVuY3Rpb24oZSx0LHIsbixpKXt0aGlzLndoZW4oe3Jlc29sdmVyOmUscmVjZWl2ZXI6dCxmdWxmaWxsZWQ6cixyZWplY3RlZDpuLHByb2dyZXNzOml9KX07Uy5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5jaGFpbihDLGUsdCxyLG4pfTtTLnByb3RvdHlwZS5mb2xkPWZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMud2hlbihuZXcgJChlLHQscixuKSl9O2Z1bmN0aW9uIE0oKXt9WihTLE0pO00ucHJvdG90eXBlLmJlY29tZT1mdW5jdGlvbihlKXtlLmZhaWwoKX07dmFyIEM9bmV3IE07ZnVuY3Rpb24gVChlLHQpe2guY3JlYXRlQ29udGV4dCh0aGlzLHQpO3RoaXMuY29uc3VtZXJzPXZvaWQgMDt0aGlzLnJlY2VpdmVyPWU7dGhpcy5oYW5kbGVyPXZvaWQgMDt0aGlzLnJlc29sdmVkPWZhbHNlfVooUyxUKTtULnByb3RvdHlwZS5fc3RhdGU9MDtULnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKGUpe3RoaXMuYmVjb21lKGIoZSkpfTtULnByb3RvdHlwZS5yZWplY3Q9ZnVuY3Rpb24oZSl7aWYodGhpcy5yZXNvbHZlZCl7cmV0dXJufXRoaXMuYmVjb21lKG5ldyBqKGUpKX07VC5wcm90b3R5cGUuam9pbj1mdW5jdGlvbigpe2lmKCF0aGlzLnJlc29sdmVkKXtyZXR1cm4gdGhpc312YXIgZT10aGlzO3doaWxlKGUuaGFuZGxlciE9PXZvaWQgMCl7ZT1lLmhhbmRsZXI7aWYoZT09PXRoaXMpe3JldHVybiB0aGlzLmhhbmRsZXI9SSgpfX1yZXR1cm4gZX07VC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb25zdW1lcnM7dmFyIHQ9dGhpcy5oYW5kbGVyO3RoaXMuaGFuZGxlcj10aGlzLmhhbmRsZXIuam9pbigpO3RoaXMuY29uc3VtZXJzPXZvaWQgMDtmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcil7dC53aGVuKGVbcl0pfX07VC5wcm90b3R5cGUuYmVjb21lPWZ1bmN0aW9uKGUpe2lmKHRoaXMucmVzb2x2ZWQpe3JldHVybn10aGlzLnJlc29sdmVkPXRydWU7dGhpcy5oYW5kbGVyPWU7aWYodGhpcy5jb25zdW1lcnMhPT12b2lkIDApe3IuZW5xdWV1ZSh0aGlzKX1pZih0aGlzLmNvbnRleHQhPT12b2lkIDApe2UuX3JlcG9ydCh0aGlzLmNvbnRleHQpfX07VC5wcm90b3R5cGUud2hlbj1mdW5jdGlvbihlKXtpZih0aGlzLnJlc29sdmVkKXtyLmVucXVldWUobmV3IEQoZSx0aGlzLmhhbmRsZXIpKX1lbHNle2lmKHRoaXMuY29uc3VtZXJzPT09dm9pZCAwKXt0aGlzLmNvbnN1bWVycz1bZV19ZWxzZXt0aGlzLmNvbnN1bWVycy5wdXNoKGUpfX19O1QucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbihlKXtpZighdGhpcy5yZXNvbHZlZCl7ci5lbnF1ZXVlKG5ldyBCKGUsdGhpcykpfX07VC5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZT09PVwidW5kZWZpbmVkXCI/dGhpcy5jb250ZXh0OmU7dGhpcy5yZXNvbHZlZCYmdGhpcy5oYW5kbGVyLmpvaW4oKS5mYWlsKHQpfTtULnByb3RvdHlwZS5fcmVwb3J0PWZ1bmN0aW9uKGUpe3RoaXMucmVzb2x2ZWQmJnRoaXMuaGFuZGxlci5qb2luKCkuX3JlcG9ydChlKX07VC5wcm90b3R5cGUuX3VucmVwb3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNvbHZlZCYmdGhpcy5oYW5kbGVyLmpvaW4oKS5fdW5yZXBvcnQoKX07ZnVuY3Rpb24gRShlKXt0aGlzLmhhbmRsZXI9ZX1aKFMsRSk7RS5wcm90b3R5cGUud2hlbj1mdW5jdGlvbihlKXtyLmVucXVldWUobmV3IEQoZSx0aGlzKSl9O0UucHJvdG90eXBlLl9yZXBvcnQ9ZnVuY3Rpb24oZSl7dGhpcy5qb2luKCkuX3JlcG9ydChlKX07RS5wcm90b3R5cGUuX3VucmVwb3J0PWZ1bmN0aW9uKCl7dGhpcy5qb2luKCkuX3VucmVwb3J0KCl9O2Z1bmN0aW9uIE8oZSx0KXtULmNhbGwodGhpcyk7ci5lbnF1ZXVlKG5ldyBGKGUsdCx0aGlzKSl9WihULE8pO2Z1bmN0aW9uIFAoZSl7aC5jcmVhdGVDb250ZXh0KHRoaXMpO3RoaXMudmFsdWU9ZX1aKFMsUCk7UC5wcm90b3R5cGUuX3N0YXRlPTE7UC5wcm90b3R5cGUuZm9sZD1mdW5jdGlvbihlLHQscixuKXtVKGUsdCx0aGlzLHIsbil9O1AucHJvdG90eXBlLndoZW49ZnVuY3Rpb24oZSl7SChlLmZ1bGZpbGxlZCx0aGlzLGUucmVjZWl2ZXIsZS5yZXNvbHZlcil9O3ZhciBBPTA7ZnVuY3Rpb24gaihlKXtoLmNyZWF0ZUNvbnRleHQodGhpcyk7dGhpcy5pZD0rK0E7dGhpcy52YWx1ZT1lO3RoaXMuaGFuZGxlZD1mYWxzZTt0aGlzLnJlcG9ydGVkPWZhbHNlO3RoaXMuX3JlcG9ydCgpfVooUyxqKTtqLnByb3RvdHlwZS5fc3RhdGU9LTE7ai5wcm90b3R5cGUuZm9sZD1mdW5jdGlvbihlLHQscixuKXtuLmJlY29tZSh0aGlzKX07ai5wcm90b3R5cGUud2hlbj1mdW5jdGlvbihlKXtpZih0eXBlb2YgZS5yZWplY3RlZD09PVwiZnVuY3Rpb25cIil7dGhpcy5fdW5yZXBvcnQoKX1IKGUucmVqZWN0ZWQsdGhpcyxlLnJlY2VpdmVyLGUucmVzb2x2ZXIpfTtqLnByb3RvdHlwZS5fcmVwb3J0PWZ1bmN0aW9uKGUpe3IuYWZ0ZXJRdWV1ZShuZXcgUih0aGlzLGUpKX07ai5wcm90b3R5cGUuX3VucmVwb3J0PWZ1bmN0aW9uKCl7aWYodGhpcy5oYW5kbGVkKXtyZXR1cm59dGhpcy5oYW5kbGVkPXRydWU7ci5hZnRlclF1ZXVlKG5ldyBrKHRoaXMpKX07ai5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlKXt0aGlzLnJlcG9ydGVkPXRydWU7bihcInVuaGFuZGxlZFJlamVjdGlvblwiLHRoaXMpO2gub25GYXRhbFJlamVjdGlvbih0aGlzLGU9PT12b2lkIDA/dGhpcy5jb250ZXh0OmUpfTtmdW5jdGlvbiBSKGUsdCl7dGhpcy5yZWplY3Rpb249ZTt0aGlzLmNvbnRleHQ9dH1SLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtpZighdGhpcy5yZWplY3Rpb24uaGFuZGxlZCYmIXRoaXMucmVqZWN0aW9uLnJlcG9ydGVkKXt0aGlzLnJlamVjdGlvbi5yZXBvcnRlZD10cnVlO24oXCJ1bmhhbmRsZWRSZWplY3Rpb25cIix0aGlzLnJlamVjdGlvbil8fGgub25Qb3RlbnRpYWxseVVuaGFuZGxlZFJlamVjdGlvbih0aGlzLnJlamVjdGlvbix0aGlzLmNvbnRleHQpfX07ZnVuY3Rpb24gayhlKXt0aGlzLnJlamVjdGlvbj1lfWsucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe2lmKHRoaXMucmVqZWN0aW9uLnJlcG9ydGVkKXtuKFwicmVqZWN0aW9uSGFuZGxlZFwiLHRoaXMucmVqZWN0aW9uKXx8aC5vblBvdGVudGlhbGx5VW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCh0aGlzLnJlamVjdGlvbil9fTtoLmNyZWF0ZUNvbnRleHQ9aC5lbnRlckNvbnRleHQ9aC5leGl0Q29udGV4dD1oLm9uUG90ZW50aWFsbHlVbmhhbmRsZWRSZWplY3Rpb249aC5vblBvdGVudGlhbGx5VW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZD1oLm9uRmF0YWxSZWplY3Rpb249UTt2YXIgTD1uZXcgUzt2YXIgTj1uZXcgaChTLEwpO2Z1bmN0aW9uIEkoKXtyZXR1cm4gbmV3IGoobmV3IFR5cGVFcnJvcihcIlByb21pc2UgY3ljbGVcIikpfWZ1bmN0aW9uIEQoZSx0KXt0aGlzLmNvbnRpbnVhdGlvbj1lO3RoaXMuaGFuZGxlcj10fUQucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuaGFuZGxlci5qb2luKCkud2hlbih0aGlzLmNvbnRpbnVhdGlvbil9O2Z1bmN0aW9uIEIoZSx0KXt0aGlzLmhhbmRsZXI9dDt0aGlzLnZhbHVlPWV9Qi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5oYW5kbGVyLmNvbnN1bWVycztpZihlPT09dm9pZCAwKXtyZXR1cm59Zm9yKHZhciB0LHI9MDtyPGUubGVuZ3RoOysrcil7dD1lW3JdO3EodC5wcm9ncmVzcyx0aGlzLnZhbHVlLHRoaXMuaGFuZGxlcix0LnJlY2VpdmVyLHQucmVzb2x2ZXIpfX07ZnVuY3Rpb24gRihlLHQscil7dGhpcy5fdGhlbj1lO3RoaXMudGhlbmFibGU9dDt0aGlzLnJlc29sdmVyPXJ9Ri5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZXNvbHZlcjt6KHRoaXMuX3RoZW4sdGhpcy50aGVuYWJsZSxlLHIsbik7ZnVuY3Rpb24gZShlKXt0LnJlc29sdmUoZSl9ZnVuY3Rpb24gcihlKXt0LnJlamVjdChlKX1mdW5jdGlvbiBuKGUpe3Qubm90aWZ5KGUpfX07ZnVuY3Rpb24geihlLHQscixuLGkpe3RyeXtlLmNhbGwodCxyLG4saSl9Y2F0Y2goZSl7bihlKX19ZnVuY3Rpb24gJChlLHQscixuKXt0aGlzLmY9ZTt0aGlzLno9dDt0aGlzLmM9cjt0aGlzLnRvPW47dGhpcy5yZXNvbHZlcj1DO3RoaXMucmVjZWl2ZXI9dGhpc30kLnByb3RvdHlwZS5mdWxmaWxsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5mLmNhbGwodGhpcy5jLHRoaXMueixlLHRoaXMudG8pfTskLnByb3RvdHlwZS5yZWplY3RlZD1mdW5jdGlvbihlKXt0aGlzLnRvLnJlamVjdChlKX07JC5wcm90b3R5cGUucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7dGhpcy50by5ub3RpZnkoZSl9O2Z1bmN0aW9uIEcoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBofWZ1bmN0aW9uIFYoZSl7cmV0dXJuKHR5cGVvZiBlPT09XCJvYmplY3RcInx8dHlwZW9mIGU9PT1cImZ1bmN0aW9uXCIpJiZlIT09bnVsbH1mdW5jdGlvbiBIKGUsdCxyLG4pe2lmKHR5cGVvZiBlIT09XCJmdW5jdGlvblwiKXtyZXR1cm4gbi5iZWNvbWUodCl9aC5lbnRlckNvbnRleHQodCk7WChlLHQudmFsdWUscixuKTtoLmV4aXRDb250ZXh0KCl9ZnVuY3Rpb24gVShlLHQscixuLGkpe2lmKHR5cGVvZiBlIT09XCJmdW5jdGlvblwiKXtyZXR1cm4gaS5iZWNvbWUocil9aC5lbnRlckNvbnRleHQocik7WShlLHQsci52YWx1ZSxuLGkpO2guZXhpdENvbnRleHQoKX1mdW5jdGlvbiBxKGUsdCxyLG4saSl7aWYodHlwZW9mIGUhPT1cImZ1bmN0aW9uXCIpe3JldHVybiBpLm5vdGlmeSh0KX1oLmVudGVyQ29udGV4dChyKTtLKGUsdCxuLGkpO2guZXhpdENvbnRleHQoKX1mdW5jdGlvbiBXKGUsdCxyKXt0cnl7cmV0dXJuIGUodCxyKX1jYXRjaChlKXtyZXR1cm4gcyhlKX19ZnVuY3Rpb24gWChlLHQscixuKXt0cnl7bi5iZWNvbWUoYihlLmNhbGwocix0KSkpfWNhdGNoKGUpe24uYmVjb21lKG5ldyBqKGUpKX19ZnVuY3Rpb24gWShlLHQscixuLGkpe3RyeXtlLmNhbGwobix0LHIsaSl9Y2F0Y2goZSl7aS5iZWNvbWUobmV3IGooZSkpfX1mdW5jdGlvbiBLKGUsdCxyLG4pe3RyeXtuLm5vdGlmeShlLmNhbGwocix0KSl9Y2F0Y2goZSl7bi5ub3RpZnkoZSl9fWZ1bmN0aW9uIFooZSx0KXt0LnByb3RvdHlwZT1pKGUucHJvdG90eXBlKTt0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10fWZ1bmN0aW9uIEooZSx0KXtyZXR1cm4gdH1mdW5jdGlvbiBRKCl7fWZ1bmN0aW9uIGVlKCl7aWYodHlwZW9mIEN1c3RvbUV2ZW50PT09XCJmdW5jdGlvblwiKXt0cnl7dmFyIGU9bmV3IEN1c3RvbUV2ZW50KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIpO3JldHVybiBlIGluc3RhbmNlb2YgQ3VzdG9tRXZlbnR9Y2F0Y2goZSl7fX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gdGUoKXtpZih0eXBlb2YgZG9jdW1lbnQhPT1cInVuZGVmaW5lZFwiJiZ0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQ9PT1cImZ1bmN0aW9uXCIpe3RyeXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO2UuaW5pdEN1c3RvbUV2ZW50KFwiZXZlbnRUeXBlXCIsZmFsc2UsdHJ1ZSx7fSk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7fX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gcmUoKXtpZih0eXBlb2YgbmUhPT1cInVuZGVmaW5lZFwiJiZuZSE9PW51bGwmJnR5cGVvZiBuZS5lbWl0PT09XCJmdW5jdGlvblwiKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PVwidW5oYW5kbGVkUmVqZWN0aW9uXCI/bmUuZW1pdChlLHQudmFsdWUsdCk6bmUuZW1pdChlLHQpfX1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIiYmZWUoKSl7cmV0dXJuIGZ1bmN0aW9uKG4saSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGkoZSx7ZGV0YWlsOntyZWFzb246dC52YWx1ZSxrZXk6dH0sYnViYmxlczpmYWxzZSxjYW5jZWxhYmxlOnRydWV9KTtyZXR1cm4hbi5kaXNwYXRjaEV2ZW50KHIpfX0oc2VsZixDdXN0b21FdmVudCl9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCImJnRlKCkpe3JldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiBmdW5jdGlvbihlLHQpe3ZhciByPWkuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtyLmluaXRDdXN0b21FdmVudChlLGZhbHNlLHRydWUse3JlYXNvbjp0LnZhbHVlLGtleTp0fSk7cmV0dXJuIW4uZGlzcGF0Y2hFdmVudChyKX19KHNlbGYsZG9jdW1lbnQpfXJldHVybiBRfXJldHVybiBofX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSkuY2FsbCh0aGlzLGUoXCJfcHJvY2Vzc1wiKSl9LHtfcHJvY2Vzczo3fV0sMjg3OltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oKXtyZXR1cm57cGVuZGluZzpyLGZ1bGZpbGxlZDppLHJlamVjdGVkOm4saW5zcGVjdDplfTtmdW5jdGlvbiByKCl7cmV0dXJue3N0YXRlOlwicGVuZGluZ1wifX1mdW5jdGlvbiBuKGUpe3JldHVybntzdGF0ZTpcInJlamVjdGVkXCIscmVhc29uOmV9fWZ1bmN0aW9uIGkoZSl7cmV0dXJue3N0YXRlOlwiZnVsZmlsbGVkXCIsdmFsdWU6ZX19ZnVuY3Rpb24gZShlKXt2YXIgdD1lLnN0YXRlKCk7cmV0dXJuIHQ9PT0wP3IoKTp0PjA/aShlLnZhbHVlKTpuKGUudmFsdWUpfX0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7dC5leHBvcnRzPWUoKX0pfSx7fV0sMjg4OltmdW5jdGlvbih0LHIsZSl7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2UoZnVuY3Rpb24oZSl7dmFyIHQ9ZShcIi4vbGliL2RlY29yYXRvcnMvdGltZWRcIik7dmFyIHI9ZShcIi4vbGliL2RlY29yYXRvcnMvYXJyYXlcIik7dmFyIG49ZShcIi4vbGliL2RlY29yYXRvcnMvZmxvd1wiKTt2YXIgaT1lKFwiLi9saWIvZGVjb3JhdG9ycy9mb2xkXCIpO3ZhciBvPWUoXCIuL2xpYi9kZWNvcmF0b3JzL2luc3BlY3RcIik7dmFyIGE9ZShcIi4vbGliL2RlY29yYXRvcnMvaXRlcmF0ZVwiKTt2YXIgcz1lKFwiLi9saWIvZGVjb3JhdG9ycy9wcm9ncmVzc1wiKTt2YXIgdT1lKFwiLi9saWIvZGVjb3JhdG9ycy93aXRoXCIpO3ZhciBjPWUoXCIuL2xpYi9kZWNvcmF0b3JzL3VuaGFuZGxlZFJlamVjdGlvblwiKTt2YXIgbD1lKFwiLi9saWIvVGltZW91dEVycm9yXCIpO3ZhciBoPVtyLG4saSxhLHMsbyx1LHQsY10ucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQoZSl9LGUoXCIuL2xpYi9Qcm9taXNlXCIpKTt2YXIgcD1lKFwiLi9saWIvYXBwbHlcIikoaCk7Zi5wcm9taXNlPWQ7Zi5yZXNvbHZlPWgucmVzb2x2ZTtmLnJlamVjdD1oLnJlamVjdDtmLmxpZnQ9djtmW1widHJ5XCJdPW07Zi5hdHRlbXB0PW07Zi5pdGVyYXRlPWguaXRlcmF0ZTtmLnVuZm9sZD1oLnVuZm9sZDtmLmpvaW49YjtmLmFsbD14O2Yuc2V0dGxlPXc7Zi5hbnk9dihoLmFueSk7Zi5zb21lPXYoaC5zb21lKTtmLnJhY2U9dihoLnJhY2UpO2YubWFwPVM7Zi5maWx0ZXI9TTtmLnJlZHVjZT12KGgucmVkdWNlKTtmLnJlZHVjZVJpZ2h0PXYoaC5yZWR1Y2VSaWdodCk7Zi5pc1Byb21pc2VMaWtlPXk7Zi5Qcm9taXNlPWg7Zi5kZWZlcj1nO2YuVGltZW91dEVycm9yPWw7ZnVuY3Rpb24gZihlLHQscixuKXt2YXIgaT1oLnJlc29sdmUoZSk7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtyZXR1cm4gaX1yZXR1cm4gaS50aGVuKHQscixuKX1mdW5jdGlvbiBkKGUpe3JldHVybiBuZXcgaChlKX1mdW5jdGlvbiB2KG4pe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheSh0KTtlPHQ7KytlKXtyW2VdPWFyZ3VtZW50c1tlXX1yZXR1cm4gcChuLHRoaXMscil9fWZ1bmN0aW9uIG0oZSl7Zm9yKHZhciB0PTAscj1hcmd1bWVudHMubGVuZ3RoLTEsbj1uZXcgQXJyYXkocik7dDxyOysrdCl7blt0XT1hcmd1bWVudHNbdCsxXX1yZXR1cm4gcChlLHRoaXMsbil9ZnVuY3Rpb24gZygpe3JldHVybiBuZXcgX31mdW5jdGlvbiBfKCl7dmFyIHQ9aC5fZGVmZXIoKTtmdW5jdGlvbiBlKGUpe3QuX2hhbmRsZXIucmVzb2x2ZShlKX1mdW5jdGlvbiByKGUpe3QuX2hhbmRsZXIucmVqZWN0KGUpfWZ1bmN0aW9uIG4oZSl7dC5faGFuZGxlci5ub3RpZnkoZSl9dGhpcy5wcm9taXNlPXQ7dGhpcy5yZXNvbHZlPWU7dGhpcy5yZWplY3Q9cjt0aGlzLm5vdGlmeT1uO3RoaXMucmVzb2x2ZXI9e3Jlc29sdmU6ZSxyZWplY3Q6cixub3RpZnk6bn19ZnVuY3Rpb24geShlKXtyZXR1cm4gZSYmdHlwZW9mIGUudGhlbj09PVwiZnVuY3Rpb25cIn1mdW5jdGlvbiBiKCl7cmV0dXJuIGguYWxsKGFyZ3VtZW50cyl9ZnVuY3Rpb24geChlKXtyZXR1cm4gZihlLGguYWxsKX1mdW5jdGlvbiB3KGUpe3JldHVybiBmKGUsaC5zZXR0bGUpfWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm4gZihlLGZ1bmN0aW9uKGUpe3JldHVybiBoLm1hcChlLHQpfSl9ZnVuY3Rpb24gTShlLHQpe3JldHVybiBmKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGguZmlsdGVyKGUsdCl9KX1yZXR1cm4gZn0pfSkodHlwZW9mIG89PT1cImZ1bmN0aW9uXCImJm8uYW1kP286ZnVuY3Rpb24oZSl7ci5leHBvcnRzPWUodCl9KX0se1wiLi9saWIvUHJvbWlzZVwiOjI3MSxcIi4vbGliL1RpbWVvdXRFcnJvclwiOjI3MyxcIi4vbGliL2FwcGx5XCI6Mjc0LFwiLi9saWIvZGVjb3JhdG9ycy9hcnJheVwiOjI3NSxcIi4vbGliL2RlY29yYXRvcnMvZmxvd1wiOjI3NixcIi4vbGliL2RlY29yYXRvcnMvZm9sZFwiOjI3NyxcIi4vbGliL2RlY29yYXRvcnMvaW5zcGVjdFwiOjI3OCxcIi4vbGliL2RlY29yYXRvcnMvaXRlcmF0ZVwiOjI3OSxcIi4vbGliL2RlY29yYXRvcnMvcHJvZ3Jlc3NcIjoyODAsXCIuL2xpYi9kZWNvcmF0b3JzL3RpbWVkXCI6MjgxLFwiLi9saWIvZGVjb3JhdG9ycy91bmhhbmRsZWRSZWplY3Rpb25cIjoyODIsXCIuL2xpYi9kZWNvcmF0b3JzL3dpdGhcIjoyODN9XSwyODk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1BcnJheS5pc0FycmF5O3ZhciBpPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dC5leHBvcnRzPW58fG87ZnVuY3Rpb24gbyhlKXtyZXR1cm4gaS5jYWxsKGUpPT09XCJbb2JqZWN0IEFycmF5XVwifX0se31dLDI5MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9OmZ1bmN0aW9uKGUsdCxyLG4pe2lmKG49PT11bmRlZmluZWQpbj1yO2Vbbl09dFtyXX0pO3ZhciBpPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiBlKWlmKHIhPT1cImRlZmF1bHRcIiYmIXQuaGFzT3duUHJvcGVydHkocikpbih0LGUscil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4vYXBpL0FQSXYzXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQVBJdjNcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBvLkFQSXYzfX0pO3ZhciBhPWUoXCIuL2FwaS9Nb2RlbENyZWF0b3JcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNb2RlbENyZWF0b3JcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBhLk1vZGVsQ3JlYXRvcn19KTtpKGUoXCIuL2FwaS9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIikscil9LHtcIi4vYXBpL0FQSXYzXCI6MzAzLFwiLi9hcGkvTW9kZWxDcmVhdG9yXCI6MzA0LFwiLi9hcGkvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCI6MzA1fV0sMjkxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxyLG4pe2lmKG49PT11bmRlZmluZWQpbj1yO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtyXX19KX06ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7ZVtuXT10W3JdfSk7dmFyIGk9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIGUpaWYociE9PVwiZGVmYXVsdFwiJiYhdC5oYXNPd25Qcm9wZXJ0eShyKSluKHQsZSxyKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkltYWdlQm91bmRhcnk9dm9pZCAwO3ZhciBvPWUoXCIuL2NvbXBvbmVudC9Db21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBvLkNvbXBvbmVudH19KTt2YXIgYT1lKFwiLi9jb21wb25lbnQvQ29tcG9uZW50U2VydmljZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNvbXBvbmVudFNlcnZpY2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBhLkNvbXBvbmVudFNlcnZpY2V9fSk7dmFyIHM9ZShcIi4vY29tcG9uZW50L3V0aWxzL0hhbmRsZXJCYXNlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSGFuZGxlckJhc2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBzLkhhbmRsZXJCYXNlfX0pO3ZhciB1PWUoXCIuL2NvbXBvbmVudC91dGlscy9NZXNoRmFjdG9yeVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIk1lc2hGYWN0b3J5XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS5NZXNoRmFjdG9yeX19KTt2YXIgYz1lKFwiLi9jb21wb25lbnQvdXRpbHMvTWVzaFNjZW5lXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTWVzaFNjZW5lXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5NZXNoU2NlbmV9fSk7dmFyIGw9ZShcIi4vY29tcG9uZW50L3V0aWxzL01vdXNlT3BlcmF0b3JcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNb3VzZU9wZXJhdG9yXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbC5Nb3VzZU9wZXJhdG9yfX0pO3ZhciBoPWUoXCIuL2NvbXBvbmVudC91dGlscy9Db21wb25lbnRTaXplXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ29tcG9uZW50U2l6ZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGguQ29tcG9uZW50U2l6ZX19KTt2YXIgcD1lKFwiLi9jb21wb25lbnQvQXR0cmlidXRpb25Db21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJBdHRyaWJ1dGlvbkNvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAuQXR0cmlidXRpb25Db21wb25lbnR9fSk7dmFyIGY9ZShcIi4vY29tcG9uZW50L0JhY2tncm91bmRDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJCYWNrZ3JvdW5kQ29tcG9uZW50XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZi5CYWNrZ3JvdW5kQ29tcG9uZW50fX0pO3ZhciBkPWUoXCIuL2NvbXBvbmVudC9CZWFyaW5nQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQmVhcmluZ0NvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGQuQmVhcmluZ0NvbXBvbmVudH19KTt2YXIgdj1lKFwiLi9jb21wb25lbnQvQ2FjaGVDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDYWNoZUNvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHYuQ2FjaGVDb21wb25lbnR9fSk7dmFyIG09ZShcIi4vY29tcG9uZW50L0NvdmVyQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ292ZXJDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBtLkNvdmVyQ29tcG9uZW50fX0pO3ZhciBnPWUoXCIuL2NvbXBvbmVudC9EZWJ1Z0NvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkRlYnVnQ29tcG9uZW50XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZy5EZWJ1Z0NvbXBvbmVudH19KTt2YXIgXz1lKFwiLi9jb21wb25lbnQvZGlyZWN0aW9uL0RpcmVjdGlvbkNvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkRpcmVjdGlvbkNvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF8uRGlyZWN0aW9uQ29tcG9uZW50fX0pO3ZhciB5PWUoXCIuL2NvbXBvbmVudC9kaXJlY3Rpb24vRGlyZWN0aW9uRE9NQ2FsY3VsYXRvclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkRpcmVjdGlvbkRPTUNhbGN1bGF0b3JcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB5LkRpcmVjdGlvbkRPTUNhbGN1bGF0b3J9fSk7dmFyIGI9ZShcIi4vY29tcG9uZW50L2RpcmVjdGlvbi9EaXJlY3Rpb25ET01SZW5kZXJlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkRpcmVjdGlvbkRPTVJlbmRlcmVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYi5EaXJlY3Rpb25ET01SZW5kZXJlcn19KTt2YXIgeD1lKFwiLi9jb21wb25lbnQvSW1hZ2VDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJJbWFnZUNvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHguSW1hZ2VDb21wb25lbnR9fSk7dmFyIHc9ZShcIi4vY29tcG9uZW50L2tleWJvYXJkL0tleWJvYXJkQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiS2V5Ym9hcmRDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB3LktleWJvYXJkQ29tcG9uZW50fX0pO3ZhciBTPWUoXCIuL2NvbXBvbmVudC9rZXlib2FyZC9LZXlQbGF5SGFuZGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIktleVBsYXlIYW5kbGVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUy5LZXlQbGF5SGFuZGxlcn19KTt2YXIgTT1lKFwiLi9jb21wb25lbnQva2V5Ym9hcmQvS2V5Wm9vbUhhbmRsZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJLZXlab29tSGFuZGxlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE0uS2V5Wm9vbUhhbmRsZXJ9fSk7dmFyIEM9ZShcIi4vY29tcG9uZW50L2tleWJvYXJkL0tleVNlcXVlbmNlTmF2aWdhdGlvbkhhbmRsZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJLZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5LZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyfX0pO3ZhciBUPWUoXCIuL2NvbXBvbmVudC9rZXlib2FyZC9LZXlTcGF0aWFsTmF2aWdhdGlvbkhhbmRsZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJLZXlTcGF0aWFsTmF2aWdhdGlvbkhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBULktleVNwYXRpYWxOYXZpZ2F0aW9uSGFuZGxlcn19KTt2YXIgRT1lKFwiLi9jb21wb25lbnQvTG9hZGluZ0NvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkxvYWRpbmdDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBFLkxvYWRpbmdDb21wb25lbnR9fSk7dmFyIE89ZShcIi4vY29tcG9uZW50L21hcmtlci9tYXJrZXIvTWFya2VyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTWFya2VyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTy5NYXJrZXJ9fSk7dmFyIFA9ZShcIi4vY29tcG9uZW50L21hcmtlci9NYXJrZXJDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNYXJrZXJDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBQLk1hcmtlckNvbXBvbmVudH19KTt2YXIgQT1lKFwiLi9jb21wb25lbnQvbWFya2VyL01hcmtlclNjZW5lXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTWFya2VyU2NlbmVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBBLk1hcmtlclNjZW5lfX0pO3ZhciBqPWUoXCIuL2NvbXBvbmVudC9tYXJrZXIvTWFya2VyU2V0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTWFya2VyU2V0XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gai5NYXJrZXJTZXR9fSk7dmFyIFI9ZShcIi4vY29tcG9uZW50L21vdXNlL01vdXNlQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTW91c2VDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBSLk1vdXNlQ29tcG9uZW50fX0pO2koZShcIi4vY29tcG9uZW50L21vdXNlL0hhbmRsZXJUeXBlc1wiKSxyKTt2YXIgaz1lKFwiLi9jb21wb25lbnQvbW91c2UvQm91bmNlSGFuZGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkJvdW5jZUhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBrLkJvdW5jZUhhbmRsZXJ9fSk7dmFyIEw9ZShcIi4vY29tcG9uZW50L21vdXNlL0RyYWdQYW5IYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRHJhZ1BhbkhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBMLkRyYWdQYW5IYW5kbGVyfX0pO3ZhciBOPWUoXCIuL2NvbXBvbmVudC9tb3VzZS9Eb3VibGVDbGlja1pvb21IYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRG91YmxlQ2xpY2tab29tSGFuZGxlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE4uRG91YmxlQ2xpY2tab29tSGFuZGxlcn19KTt2YXIgST1lKFwiLi9jb21wb25lbnQvbW91c2UvRWFydGhDb250cm9sSGFuZGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkVhcnRoQ29udHJvbEhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBJLkVhcnRoQ29udHJvbEhhbmRsZXJ9fSk7dmFyIEQ9ZShcIi4vY29tcG9uZW50L21vdXNlL1Njcm9sbFpvb21IYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2Nyb2xsWm9vbUhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBELlNjcm9sbFpvb21IYW5kbGVyfX0pO3ZhciBCPWUoXCIuL2NvbXBvbmVudC9tb3VzZS9Ub3VjaFpvb21IYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVG91Y2hab29tSGFuZGxlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEIuVG91Y2hab29tSGFuZGxlcn19KTt2YXIgRj1lKFwiLi9jb21wb25lbnQvbW91c2UvSW1hZ2VCb3VuZGFyeVwiKTtyLkltYWdlQm91bmRhcnk9Rjt2YXIgej1lKFwiLi9jb21wb25lbnQvcG9wdXAvcG9wdXAvUG9wdXBcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQb3B1cFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHouUG9wdXB9fSk7dmFyICQ9ZShcIi4vY29tcG9uZW50L3BvcHVwL1BvcHVwQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUG9wdXBDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiAkLlBvcHVwQ29tcG9uZW50fX0pO3ZhciBHPWUoXCIuL2NvbXBvbmVudC9OYXZpZ2F0aW9uQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTmF2aWdhdGlvbkNvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEcuTmF2aWdhdGlvbkNvbXBvbmVudH19KTt2YXIgVj1lKFwiLi9jb21wb25lbnQvUm91dGVDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJSb3V0ZUNvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFYuUm91dGVDb21wb25lbnR9fSk7dmFyIEg9ZShcIi4vY29tcG9uZW50L3NlcXVlbmNlL1NlcXVlbmNlQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2VxdWVuY2VDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBILlNlcXVlbmNlQ29tcG9uZW50fX0pO3ZhciBVPWUoXCIuL2NvbXBvbmVudC9zZXF1ZW5jZS9TZXF1ZW5jZURPTVJlbmRlcmVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2VxdWVuY2VET01SZW5kZXJlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFUuU2VxdWVuY2VET01SZW5kZXJlcn19KTt2YXIgcT1lKFwiLi9jb21wb25lbnQvc2VxdWVuY2UvU2VxdWVuY2VNb2RlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2VxdWVuY2VNb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcS5TZXF1ZW5jZU1vZGV9fSk7dmFyIFc9ZShcIi4vY29tcG9uZW50L3NwYXRpYWxkYXRhL1NwYXRpYWxEYXRhQ2FjaGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTcGF0aWFsRGF0YUNhY2hlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVy5TcGF0aWFsRGF0YUNhY2hlfX0pO3ZhciBYPWUoXCIuL2NvbXBvbmVudC9zcGF0aWFsZGF0YS9TcGF0aWFsRGF0YUNvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlNwYXRpYWxEYXRhQ29tcG9uZW50XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gWC5TcGF0aWFsRGF0YUNvbXBvbmVudH19KTt2YXIgWT1lKFwiLi9jb21wb25lbnQvc3BhdGlhbGRhdGEvU3BhdGlhbERhdGFTY2VuZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlNwYXRpYWxEYXRhU2NlbmVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBZLlNwYXRpYWxEYXRhU2NlbmV9fSk7dmFyIEs9ZShcIi4vY29tcG9uZW50L2ltYWdlcGxhbmUvSW1hZ2VQbGFuZUNvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkltYWdlUGxhbmVDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBLLkltYWdlUGxhbmVDb21wb25lbnR9fSk7dmFyIFo9ZShcIi4vY29tcG9uZW50L2ltYWdlcGxhbmUvSW1hZ2VQbGFuZUdMUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJJbWFnZVBsYW5lR0xSZW5kZXJlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFouSW1hZ2VQbGFuZUdMUmVuZGVyZXJ9fSk7dmFyIEo9ZShcIi4vY29tcG9uZW50L3NoYWRlcnMvU2hhZGVyc1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlNoYWRlcnNcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBKLlNoYWRlcnN9fSk7dmFyIFE9ZShcIi4vY29tcG9uZW50L21hcmtlci9tYXJrZXIvU2ltcGxlTWFya2VyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2ltcGxlTWFya2VyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5TaW1wbGVNYXJrZXJ9fSk7dmFyIGVlPWUoXCIuL2NvbXBvbmVudC9tYXJrZXIvbWFya2VyL0NpcmNsZU1hcmtlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNpcmNsZU1hcmtlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGVlLkNpcmNsZU1hcmtlcn19KTt2YXIgdGU9ZShcIi4vY29tcG9uZW50L3NsaWRlci9TbGlkZXJDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTbGlkZXJDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0ZS5TbGlkZXJDb21wb25lbnR9fSk7dmFyIHJlPWUoXCIuL2NvbXBvbmVudC9zbGlkZXIvU2xpZGVyRE9NUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTbGlkZXJET01SZW5kZXJlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHJlLlNsaWRlckRPTVJlbmRlcmVyfX0pO3ZhciBuZT1lKFwiLi9jb21wb25lbnQvc2xpZGVyL1NsaWRlckdMUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTbGlkZXJHTFJlbmRlcmVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmUuU2xpZGVyR0xSZW5kZXJlcn19KTt2YXIgaWU9ZShcIi4vY29tcG9uZW50L1N0YXRzQ29tcG9uZW50XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU3RhdHNDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBpZS5TdGF0c0NvbXBvbmVudH19KTt2YXIgb2U9ZShcIi4vY29tcG9uZW50L3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyQmFzZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRhZ0hhbmRsZXJCYXNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb2UuVGFnSGFuZGxlckJhc2V9fSk7dmFyIGFlPWUoXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlSGFuZGxlckJhc2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDcmVhdGVIYW5kbGVyQmFzZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGFlLkNyZWF0ZUhhbmRsZXJCYXNlfX0pO3ZhciBzZT1lKFwiLi9jb21wb25lbnQvdGFnL2hhbmRsZXJzL0NyZWF0ZVBvaW50SGFuZGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNyZWF0ZVBvaW50SGFuZGxlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHNlLkNyZWF0ZVBvaW50SGFuZGxlcn19KTt2YXIgdWU9ZShcIi4vY29tcG9uZW50L3RhZy9oYW5kbGVycy9DcmVhdGVWZXJ0ZXhIYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ3JlYXRlVmVydGV4SGFuZGxlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHVlLkNyZWF0ZVZlcnRleEhhbmRsZXJ9fSk7dmFyIGNlPWUoXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlUG9pbnRzSGFuZGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNyZWF0ZVBvaW50c0hhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBjZS5DcmVhdGVQb2ludHNIYW5kbGVyfX0pO3ZhciBsZT1lKFwiLi9jb21wb25lbnQvdGFnL2hhbmRsZXJzL0NyZWF0ZVBvbHlnb25IYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ3JlYXRlUG9seWdvbkhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBsZS5DcmVhdGVQb2x5Z29uSGFuZGxlcn19KTt2YXIgaGU9ZShcIi4vY29tcG9uZW50L3RhZy9oYW5kbGVycy9DcmVhdGVSZWN0SGFuZGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNyZWF0ZVJlY3RIYW5kbGVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaGUuQ3JlYXRlUmVjdEhhbmRsZXJ9fSk7dmFyIHBlPWUoXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlUmVjdERyYWdIYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ3JlYXRlUmVjdERyYWdIYW5kbGVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGUuQ3JlYXRlUmVjdERyYWdIYW5kbGVyfX0pO3ZhciBmZT1lKFwiLi9jb21wb25lbnQvdGFnL2hhbmRsZXJzL0VkaXRWZXJ0ZXhIYW5kbGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRWRpdFZlcnRleEhhbmRsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBmZS5FZGl0VmVydGV4SGFuZGxlcn19KTt2YXIgZGU9ZShcIi4vY29tcG9uZW50L3RhZy90YWcvVGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZGUuVGFnfX0pO3ZhciB2ZT1lKFwiLi9jb21wb25lbnQvdGFnL3RhZy9PdXRsaW5lVGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiT3V0bGluZVRhZ1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZlLk91dGxpbmVUYWd9fSk7dmFyIG1lPWUoXCIuL2NvbXBvbmVudC90YWcvdGFnL0V4dHJlbWVQb2ludFRhZ1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkV4dHJlbWVQb2ludFRhZ1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG1lLkV4dHJlbWVQb2ludFRhZ319KTt2YXIgZ2U9ZShcIi4vY29tcG9uZW50L3RhZy90YWcvUmVuZGVyVGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUmVuZGVyVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZ2UuUmVuZGVyVGFnfX0pO3ZhciBfZT1lKFwiLi9jb21wb25lbnQvdGFnL3RhZy9PdXRsaW5lUmVuZGVyVGFnQmFzZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIk91dGxpbmVSZW5kZXJUYWdCYXNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gX2UuT3V0bGluZVJlbmRlclRhZ0Jhc2V9fSk7dmFyIHllPWUoXCIuL2NvbXBvbmVudC90YWcvdGFnL091dGxpbmVSZW5kZXJUYWdcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJPdXRsaW5lUmVuZGVyVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geWUuT3V0bGluZVJlbmRlclRhZ319KTt2YXIgYmU9ZShcIi4vY29tcG9uZW50L3RhZy90YWcvRXh0cmVtZVBvaW50UmVuZGVyVGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRXh0cmVtZVBvaW50UmVuZGVyVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYmUuRXh0cmVtZVBvaW50UmVuZGVyVGFnfX0pO3ZhciB4ZT1lKFwiLi9jb21wb25lbnQvdGFnL3RhZy9TcG90VGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU3BvdFRhZ1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHhlLlNwb3RUYWd9fSk7dmFyIHdlPWUoXCIuL2NvbXBvbmVudC90YWcvdGFnL1Nwb3RSZW5kZXJUYWdcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTcG90UmVuZGVyVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd2UuU3BvdFJlbmRlclRhZ319KTt2YXIgU2U9ZShcIi4vY29tcG9uZW50L3RhZy90YWcvVGFnRG9tYWluXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVGFnRG9tYWluXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gU2UuVGFnRG9tYWlufX0pO3ZhciBNZT1lKFwiLi9jb21wb25lbnQvdGFnL1RhZ0NvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRhZ0NvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE1lLlRhZ0NvbXBvbmVudH19KTt2YXIgQ2U9ZShcIi4vY29tcG9uZW50L3RhZy9UYWdDcmVhdG9yXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVGFnQ3JlYXRvclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIENlLlRhZ0NyZWF0b3J9fSk7dmFyIFRlPWUoXCIuL2NvbXBvbmVudC90YWcvVGFnRE9NUmVuZGVyZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUYWdET01SZW5kZXJlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFRlLlRhZ0RPTVJlbmRlcmVyfX0pO3ZhciBFZT1lKFwiLi9jb21wb25lbnQvdGFnL1RhZ01vZGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUYWdNb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRWUuVGFnTW9kZX19KTt2YXIgT2U9ZShcIi4vY29tcG9uZW50L3RhZy9UYWdPcGVyYXRpb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUYWdPcGVyYXRpb25cIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBPZS5UYWdPcGVyYXRpb259fSk7dmFyIFBlPWUoXCIuL2NvbXBvbmVudC90YWcvVGFnU2NlbmVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUYWdTY2VuZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFBlLlRhZ1NjZW5lfX0pO3ZhciBBZT1lKFwiLi9jb21wb25lbnQvdGFnL1RhZ1NldFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRhZ1NldFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEFlLlRhZ1NldH19KTt2YXIgamU9ZShcIi4vY29tcG9uZW50L3RhZy9nZW9tZXRyeS9HZW9tZXRyeVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdlb21ldHJ5XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gamUuR2VvbWV0cnl9fSk7dmFyIFJlPWUoXCIuL2NvbXBvbmVudC90YWcvZ2VvbWV0cnkvVmVydGV4R2VvbWV0cnlcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJWZXJ0ZXhHZW9tZXRyeVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFJlLlZlcnRleEdlb21ldHJ5fX0pO3ZhciBrZT1lKFwiLi9jb21wb25lbnQvdGFnL2dlb21ldHJ5L1JlY3RHZW9tZXRyeVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlJlY3RHZW9tZXRyeVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGtlLlJlY3RHZW9tZXRyeX19KTt2YXIgTGU9ZShcIi4vY29tcG9uZW50L3RhZy9nZW9tZXRyeS9Qb2ludEdlb21ldHJ5XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUG9pbnRHZW9tZXRyeVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIExlLlBvaW50R2VvbWV0cnl9fSk7dmFyIE5lPWUoXCIuL2NvbXBvbmVudC90YWcvZ2VvbWV0cnkvUG9pbnRzR2VvbWV0cnlcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQb2ludHNHZW9tZXRyeVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE5lLlBvaW50c0dlb21ldHJ5fX0pO3ZhciBJZT1lKFwiLi9jb21wb25lbnQvdGFnL2dlb21ldHJ5L1BvbHlnb25HZW9tZXRyeVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlBvbHlnb25HZW9tZXRyeVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEllLlBvbHlnb25HZW9tZXRyeX19KTt2YXIgRGU9ZShcIi4vY29tcG9uZW50L3RhZy9lcnJvci9HZW9tZXRyeVRhZ0Vycm9yXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiR2VvbWV0cnlUYWdFcnJvclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIERlLkdlb21ldHJ5VGFnRXJyb3J9fSk7dmFyIEJlPWUoXCIuL2NvbXBvbmVudC96b29tL1pvb21Db21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJab29tQ29tcG9uZW50XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQmUuWm9vbUNvbXBvbmVudH19KTt2YXIgRmU9ZShcIi4vY29tcG9uZW50L3RhZy90YWcvQ3JlYXRlVGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ3JlYXRlVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRmUuQ3JlYXRlVGFnfX0pO3ZhciB6ZT1lKFwiLi9jb21wb25lbnQvdGFnL3RhZy9PdXRsaW5lQ3JlYXRlVGFnXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiT3V0bGluZUNyZWF0ZVRhZ1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHplLk91dGxpbmVDcmVhdGVUYWd9fSk7dmFyICRlPWUoXCIuL2NvbXBvbmVudC90YWcvdGFnL0V4dHJlbWVQb2ludENyZWF0ZVRhZ1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkV4dHJlbWVQb2ludENyZWF0ZVRhZ1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuICRlLkV4dHJlbWVQb2ludENyZWF0ZVRhZ319KTtpKGUoXCIuL2NvbXBvbmVudC9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIikscil9LHtcIi4vY29tcG9uZW50L0F0dHJpYnV0aW9uQ29tcG9uZW50XCI6MzA2LFwiLi9jb21wb25lbnQvQmFja2dyb3VuZENvbXBvbmVudFwiOjMwNyxcIi4vY29tcG9uZW50L0JlYXJpbmdDb21wb25lbnRcIjozMDgsXCIuL2NvbXBvbmVudC9DYWNoZUNvbXBvbmVudFwiOjMwOSxcIi4vY29tcG9uZW50L0NvbXBvbmVudFwiOjMxMCxcIi4vY29tcG9uZW50L0NvbXBvbmVudFNlcnZpY2VcIjozMTEsXCIuL2NvbXBvbmVudC9Db3ZlckNvbXBvbmVudFwiOjMxMixcIi4vY29tcG9uZW50L0RlYnVnQ29tcG9uZW50XCI6MzEzLFwiLi9jb21wb25lbnQvSW1hZ2VDb21wb25lbnRcIjozMTQsXCIuL2NvbXBvbmVudC9Mb2FkaW5nQ29tcG9uZW50XCI6MzE1LFwiLi9jb21wb25lbnQvTmF2aWdhdGlvbkNvbXBvbmVudFwiOjMxNixcIi4vY29tcG9uZW50L1JvdXRlQ29tcG9uZW50XCI6MzE3LFwiLi9jb21wb25lbnQvU3RhdHNDb21wb25lbnRcIjozMTgsXCIuL2NvbXBvbmVudC9kaXJlY3Rpb24vRGlyZWN0aW9uQ29tcG9uZW50XCI6MzE5LFwiLi9jb21wb25lbnQvZGlyZWN0aW9uL0RpcmVjdGlvbkRPTUNhbGN1bGF0b3JcIjozMjAsXCIuL2NvbXBvbmVudC9kaXJlY3Rpb24vRGlyZWN0aW9uRE9NUmVuZGVyZXJcIjozMjEsXCIuL2NvbXBvbmVudC9pbWFnZXBsYW5lL0ltYWdlUGxhbmVDb21wb25lbnRcIjozMjIsXCIuL2NvbXBvbmVudC9pbWFnZXBsYW5lL0ltYWdlUGxhbmVHTFJlbmRlcmVyXCI6MzIzLFwiLi9jb21wb25lbnQvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCI6MzI3LFwiLi9jb21wb25lbnQva2V5Ym9hcmQvS2V5UGxheUhhbmRsZXJcIjozMjgsXCIuL2NvbXBvbmVudC9rZXlib2FyZC9LZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyXCI6MzI5LFwiLi9jb21wb25lbnQva2V5Ym9hcmQvS2V5U3BhdGlhbE5hdmlnYXRpb25IYW5kbGVyXCI6MzMwLFwiLi9jb21wb25lbnQva2V5Ym9hcmQvS2V5Wm9vbUhhbmRsZXJcIjozMzEsXCIuL2NvbXBvbmVudC9rZXlib2FyZC9LZXlib2FyZENvbXBvbmVudFwiOjMzMixcIi4vY29tcG9uZW50L21hcmtlci9NYXJrZXJDb21wb25lbnRcIjozMzQsXCIuL2NvbXBvbmVudC9tYXJrZXIvTWFya2VyU2NlbmVcIjozMzUsXCIuL2NvbXBvbmVudC9tYXJrZXIvTWFya2VyU2V0XCI6MzM2LFwiLi9jb21wb25lbnQvbWFya2VyL21hcmtlci9DaXJjbGVNYXJrZXJcIjozMzgsXCIuL2NvbXBvbmVudC9tYXJrZXIvbWFya2VyL01hcmtlclwiOjMzOSxcIi4vY29tcG9uZW50L21hcmtlci9tYXJrZXIvU2ltcGxlTWFya2VyXCI6MzQwLFwiLi9jb21wb25lbnQvbW91c2UvQm91bmNlSGFuZGxlclwiOjM0MSxcIi4vY29tcG9uZW50L21vdXNlL0RvdWJsZUNsaWNrWm9vbUhhbmRsZXJcIjozNDIsXCIuL2NvbXBvbmVudC9tb3VzZS9EcmFnUGFuSGFuZGxlclwiOjM0MyxcIi4vY29tcG9uZW50L21vdXNlL0VhcnRoQ29udHJvbEhhbmRsZXJcIjozNDQsXCIuL2NvbXBvbmVudC9tb3VzZS9IYW5kbGVyVHlwZXNcIjozNDUsXCIuL2NvbXBvbmVudC9tb3VzZS9JbWFnZUJvdW5kYXJ5XCI6MzQ2LFwiLi9jb21wb25lbnQvbW91c2UvTW91c2VDb21wb25lbnRcIjozNDcsXCIuL2NvbXBvbmVudC9tb3VzZS9TY3JvbGxab29tSGFuZGxlclwiOjM0OCxcIi4vY29tcG9uZW50L21vdXNlL1RvdWNoWm9vbUhhbmRsZXJcIjozNDksXCIuL2NvbXBvbmVudC9wb3B1cC9Qb3B1cENvbXBvbmVudFwiOjM1MSxcIi4vY29tcG9uZW50L3BvcHVwL3BvcHVwL1BvcHVwXCI6MzUyLFwiLi9jb21wb25lbnQvc2VxdWVuY2UvU2VxdWVuY2VDb21wb25lbnRcIjozNTMsXCIuL2NvbXBvbmVudC9zZXF1ZW5jZS9TZXF1ZW5jZURPTVJlbmRlcmVyXCI6MzU0LFwiLi9jb21wb25lbnQvc2VxdWVuY2UvU2VxdWVuY2VNb2RlXCI6MzU1LFwiLi9jb21wb25lbnQvc2hhZGVycy9TaGFkZXJzXCI6MzU2LFwiLi9jb21wb25lbnQvc2xpZGVyL1NsaWRlckNvbXBvbmVudFwiOjM1NyxcIi4vY29tcG9uZW50L3NsaWRlci9TbGlkZXJET01SZW5kZXJlclwiOjM1OCxcIi4vY29tcG9uZW50L3NsaWRlci9TbGlkZXJHTFJlbmRlcmVyXCI6MzU5LFwiLi9jb21wb25lbnQvc3BhdGlhbGRhdGEvU3BhdGlhbERhdGFDYWNoZVwiOjM2MixcIi4vY29tcG9uZW50L3NwYXRpYWxkYXRhL1NwYXRpYWxEYXRhQ29tcG9uZW50XCI6MzYzLFwiLi9jb21wb25lbnQvc3BhdGlhbGRhdGEvU3BhdGlhbERhdGFTY2VuZVwiOjM2NCxcIi4vY29tcG9uZW50L3RhZy9UYWdDb21wb25lbnRcIjozNjcsXCIuL2NvbXBvbmVudC90YWcvVGFnQ3JlYXRvclwiOjM2OCxcIi4vY29tcG9uZW50L3RhZy9UYWdET01SZW5kZXJlclwiOjM2OSxcIi4vY29tcG9uZW50L3RhZy9UYWdNb2RlXCI6MzcwLFwiLi9jb21wb25lbnQvdGFnL1RhZ09wZXJhdGlvblwiOjM3MSxcIi4vY29tcG9uZW50L3RhZy9UYWdTY2VuZVwiOjM3MixcIi4vY29tcG9uZW50L3RhZy9UYWdTZXRcIjozNzMsXCIuL2NvbXBvbmVudC90YWcvZXJyb3IvR2VvbWV0cnlUYWdFcnJvclwiOjM3NCxcIi4vY29tcG9uZW50L3RhZy9nZW9tZXRyeS9HZW9tZXRyeVwiOjM3NSxcIi4vY29tcG9uZW50L3RhZy9nZW9tZXRyeS9Qb2ludEdlb21ldHJ5XCI6Mzc2LFwiLi9jb21wb25lbnQvdGFnL2dlb21ldHJ5L1BvaW50c0dlb21ldHJ5XCI6Mzc3LFwiLi9jb21wb25lbnQvdGFnL2dlb21ldHJ5L1BvbHlnb25HZW9tZXRyeVwiOjM3OCxcIi4vY29tcG9uZW50L3RhZy9nZW9tZXRyeS9SZWN0R2VvbWV0cnlcIjozNzksXCIuL2NvbXBvbmVudC90YWcvZ2VvbWV0cnkvVmVydGV4R2VvbWV0cnlcIjozODAsXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlSGFuZGxlckJhc2VcIjozODEsXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlUG9pbnRIYW5kbGVyXCI6MzgyLFwiLi9jb21wb25lbnQvdGFnL2hhbmRsZXJzL0NyZWF0ZVBvaW50c0hhbmRsZXJcIjozODMsXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlUG9seWdvbkhhbmRsZXJcIjozODQsXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvQ3JlYXRlUmVjdERyYWdIYW5kbGVyXCI6Mzg1LFwiLi9jb21wb25lbnQvdGFnL2hhbmRsZXJzL0NyZWF0ZVJlY3RIYW5kbGVyXCI6Mzg2LFwiLi9jb21wb25lbnQvdGFnL2hhbmRsZXJzL0NyZWF0ZVZlcnRleEhhbmRsZXJcIjozODcsXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvRWRpdFZlcnRleEhhbmRsZXJcIjozODgsXCIuL2NvbXBvbmVudC90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckJhc2VcIjozODksXCIuL2NvbXBvbmVudC90YWcvdGFnL0NyZWF0ZVRhZ1wiOjM5MSxcIi4vY29tcG9uZW50L3RhZy90YWcvRXh0cmVtZVBvaW50Q3JlYXRlVGFnXCI6MzkyLFwiLi9jb21wb25lbnQvdGFnL3RhZy9FeHRyZW1lUG9pbnRSZW5kZXJUYWdcIjozOTMsXCIuL2NvbXBvbmVudC90YWcvdGFnL0V4dHJlbWVQb2ludFRhZ1wiOjM5NCxcIi4vY29tcG9uZW50L3RhZy90YWcvT3V0bGluZUNyZWF0ZVRhZ1wiOjM5NSxcIi4vY29tcG9uZW50L3RhZy90YWcvT3V0bGluZVJlbmRlclRhZ1wiOjM5NixcIi4vY29tcG9uZW50L3RhZy90YWcvT3V0bGluZVJlbmRlclRhZ0Jhc2VcIjozOTcsXCIuL2NvbXBvbmVudC90YWcvdGFnL091dGxpbmVUYWdcIjozOTgsXCIuL2NvbXBvbmVudC90YWcvdGFnL1JlbmRlclRhZ1wiOjM5OSxcIi4vY29tcG9uZW50L3RhZy90YWcvU3BvdFJlbmRlclRhZ1wiOjQwMCxcIi4vY29tcG9uZW50L3RhZy90YWcvU3BvdFRhZ1wiOjQwMSxcIi4vY29tcG9uZW50L3RhZy90YWcvVGFnXCI6NDAyLFwiLi9jb21wb25lbnQvdGFnL3RhZy9UYWdEb21haW5cIjo0MDMsXCIuL2NvbXBvbmVudC91dGlscy9Db21wb25lbnRTaXplXCI6NDA0LFwiLi9jb21wb25lbnQvdXRpbHMvSGFuZGxlckJhc2VcIjo0MDUsXCIuL2NvbXBvbmVudC91dGlscy9NZXNoRmFjdG9yeVwiOjQwNixcIi4vY29tcG9uZW50L3V0aWxzL01lc2hTY2VuZVwiOjQwNyxcIi4vY29tcG9uZW50L3V0aWxzL01vdXNlT3BlcmF0b3JcIjo0MDgsXCIuL2NvbXBvbmVudC96b29tL1pvb21Db21wb25lbnRcIjo0MDl9XSwyOTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtlW25dPXRbcl19KTt2YXIgaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZSlpZihyIT09XCJkZWZhdWx0XCImJiF0Lmhhc093blByb3BlcnR5KHIpKW4odCxlLHIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuL2dyYXBoL2VkZ2UvRWRnZURpcmVjdGlvblwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkVkZ2VEaXJlY3Rpb25cIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBvLkVkZ2VEaXJlY3Rpb259fSk7dmFyIGE9ZShcIi4vZ3JhcGgvZWRnZS9FZGdlQ2FsY3VsYXRvclNldHRpbmdzXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRWRnZUNhbGN1bGF0b3JTZXR0aW5nc1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuRWRnZUNhbGN1bGF0b3JTZXR0aW5nc319KTt2YXIgcz1lKFwiLi9ncmFwaC9lZGdlL0VkZ2VDYWxjdWxhdG9yRGlyZWN0aW9uc1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkVkZ2VDYWxjdWxhdG9yRGlyZWN0aW9uc1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuRWRnZUNhbGN1bGF0b3JEaXJlY3Rpb25zfX0pO3ZhciB1PWUoXCIuL2dyYXBoL2VkZ2UvRWRnZUNhbGN1bGF0b3JDb2VmZmljaWVudHNcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJFZGdlQ2FsY3VsYXRvckNvZWZmaWNpZW50c1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuRWRnZUNhbGN1bGF0b3JDb2VmZmljaWVudHN9fSk7dmFyIGM9ZShcIi4vZ3JhcGgvZWRnZS9FZGdlQ2FsY3VsYXRvclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkVkZ2VDYWxjdWxhdG9yXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5FZGdlQ2FsY3VsYXRvcn19KTtpKGUoXCIuL2dyYXBoL2VkZ2UvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuL2dyYXBoL2VkZ2UvRWRnZUNhbGN1bGF0b3JcIjo0MzMsXCIuL2dyYXBoL2VkZ2UvRWRnZUNhbGN1bGF0b3JDb2VmZmljaWVudHNcIjo0MzQsXCIuL2dyYXBoL2VkZ2UvRWRnZUNhbGN1bGF0b3JEaXJlY3Rpb25zXCI6NDM1LFwiLi9ncmFwaC9lZGdlL0VkZ2VDYWxjdWxhdG9yU2V0dGluZ3NcIjo0MzYsXCIuL2dyYXBoL2VkZ2UvRWRnZURpcmVjdGlvblwiOjQzNyxcIi4vZ3JhcGgvZWRnZS9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjo0Mzh9XSwyOTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL2Vycm9yL0Fib3J0TWFwaWxsYXJ5RXJyb3JcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJBYm9ydE1hcGlsbGFyeUVycm9yXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5BYm9ydE1hcGlsbGFyeUVycm9yfX0pO3ZhciBpPWUoXCIuL2Vycm9yL0FyZ3VtZW50TWFwaWxsYXJ5RXJyb3JcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJBcmd1bWVudE1hcGlsbGFyeUVycm9yXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5Bcmd1bWVudE1hcGlsbGFyeUVycm9yfX0pO3ZhciBvPWUoXCIuL2Vycm9yL0dyYXBoTWFwaWxsYXJ5RXJyb3JcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJHcmFwaE1hcGlsbGFyeUVycm9yXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5HcmFwaE1hcGlsbGFyeUVycm9yfX0pO3ZhciBhPWUoXCIuL2Vycm9yL01hcGlsbGFyeUVycm9yXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTWFwaWxsYXJ5RXJyb3JcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBhLk1hcGlsbGFyeUVycm9yfX0pfSx7XCIuL2Vycm9yL0Fib3J0TWFwaWxsYXJ5RXJyb3JcIjo0MTAsXCIuL2Vycm9yL0FyZ3VtZW50TWFwaWxsYXJ5RXJyb3JcIjo0MTEsXCIuL2Vycm9yL0dyYXBoTWFwaWxsYXJ5RXJyb3JcIjo0MTIsXCIuL2Vycm9yL01hcGlsbGFyeUVycm9yXCI6NDEzfV0sMjk0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxyLG4pe2lmKG49PT11bmRlZmluZWQpbj1yO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtyXX19KX06ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7ZVtuXT10W3JdfSk7dmFyIGk9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIGUpaWYociE9PVwiZGVmYXVsdFwiJiYhdC5oYXNPd25Qcm9wZXJ0eShyKSluKHQsZSxyKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkxpbmVzPXIuR2VvPXZvaWQgMDt2YXIgbz1lKFwiLi9nZW8vQ2FtZXJhXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ2FtZXJhXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5DYW1lcmF9fSk7dmFyIGE9ZShcIi4vZ2VvL0dlb0Nvb3Jkc1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdlb0Nvb3Jkc1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuR2VvQ29vcmRzfX0pO3ZhciBzPWUoXCIuL2dlby9HZW9SQnVzaFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdlb1JCdXNoXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5HZW9SQnVzaH19KTt2YXIgdT1lKFwiLi9nZW8vVmlld3BvcnRDb29yZHNcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJWaWV3cG9ydENvb3Jkc1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuVmlld3BvcnRDb29yZHN9fSk7dmFyIGM9ZShcIi4vZ2VvL1NwYXRpYWxcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTcGF0aWFsXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5TcGF0aWFsfX0pO3ZhciBsPWUoXCIuL2dlby9UcmFuc2Zvcm1cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUcmFuc2Zvcm1cIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBsLlRyYW5zZm9ybX19KTtpKGUoXCIuL2dlby9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIikscik7dmFyIGg9ZShcIi4vZ2VvL0dlb1wiKTtyLkdlbz1oO3ZhciBwPWUoXCIuL2dlby9MaW5lc1wiKTtyLkxpbmVzPXB9LHtcIi4vZ2VvL0NhbWVyYVwiOjQxNCxcIi4vZ2VvL0dlb1wiOjQxNSxcIi4vZ2VvL0dlb0Nvb3Jkc1wiOjQxNixcIi4vZ2VvL0dlb1JCdXNoXCI6NDE3LFwiLi9nZW8vTGluZXNcIjo0MTgsXCIuL2dlby9TcGF0aWFsXCI6NDE5LFwiLi9nZW8vVHJhbnNmb3JtXCI6NDIwLFwiLi9nZW8vVmlld3BvcnRDb29yZHNcIjo0MjEsXCIuL2dlby9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjo0MjJ9XSwyOTU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtlW25dPXRbcl19KTt2YXIgaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZSlpZihyIT09XCJkZWZhdWx0XCImJiF0Lmhhc093blByb3BlcnR5KHIpKW4odCxlLHIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuL2dyYXBoL0ZpbHRlckNyZWF0b3JcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJGaWx0ZXJDcmVhdG9yXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5GaWx0ZXJDcmVhdG9yfX0pO3ZhciBhPWUoXCIuL2dyYXBoL0dyYXBoXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiR3JhcGhcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBhLkdyYXBofX0pO3ZhciBzPWUoXCIuL2dyYXBoL0dyYXBoQ2FsY3VsYXRvclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdyYXBoQ2FsY3VsYXRvclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuR3JhcGhDYWxjdWxhdG9yfX0pO3ZhciB1PWUoXCIuL2dyYXBoL0dyYXBoTW9kZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdyYXBoTW9kZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuR3JhcGhNb2RlfX0pO3ZhciBjPWUoXCIuL2dyYXBoL0dyYXBoU2VydmljZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdyYXBoU2VydmljZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuR3JhcGhTZXJ2aWNlfX0pO3ZhciBsPWUoXCIuL2dyYXBoL0ltYWdlTG9hZGluZ1NlcnZpY2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJJbWFnZUxvYWRpbmdTZXJ2aWNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbC5JbWFnZUxvYWRpbmdTZXJ2aWNlfX0pO3ZhciBoPWUoXCIuL2dyYXBoL01lc2hSZWFkZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNZXNoUmVhZGVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaC5NZXNoUmVhZGVyfX0pO3ZhciBwPWUoXCIuL2dyYXBoL05vZGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJOb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcC5Ob2RlfX0pO3ZhciBmPWUoXCIuL2dyYXBoL05vZGVDYWNoZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIk5vZGVDYWNoZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGYuTm9kZUNhY2hlfX0pO3ZhciBkPWUoXCIuL2dyYXBoL1NlcXVlbmNlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2VxdWVuY2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBkLlNlcXVlbmNlfX0pO2koZShcIi4vZ3JhcGgvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuL2dyYXBoL0ZpbHRlckNyZWF0b3JcIjo0MjMsXCIuL2dyYXBoL0dyYXBoXCI6NDI0LFwiLi9ncmFwaC9HcmFwaENhbGN1bGF0b3JcIjo0MjUsXCIuL2dyYXBoL0dyYXBoTW9kZVwiOjQyNixcIi4vZ3JhcGgvR3JhcGhTZXJ2aWNlXCI6NDI3LFwiLi9ncmFwaC9JbWFnZUxvYWRpbmdTZXJ2aWNlXCI6NDI4LFwiLi9ncmFwaC9NZXNoUmVhZGVyXCI6NDI5LFwiLi9ncmFwaC9Ob2RlXCI6NDMwLFwiLi9ncmFwaC9Ob2RlQ2FjaGVcIjo0MzEsXCIuL2dyYXBoL1NlcXVlbmNlXCI6NDMyLFwiLi9ncmFwaC9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjo0Mzl9XSwyOTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtlW25dPXRbcl19KTt2YXIgaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZSlpZihyIT09XCJkZWZhdWx0XCImJiF0Lmhhc093blByb3BlcnR5KHIpKW4odCxlLHIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU3BhdGlhbERhdGFDb21wb25lbnQ9ci5Qb3B1cENvbXBvbmVudD1yLk1hcmtlckNvbXBvbmVudD1yLlRhZ0NvbXBvbmVudD12b2lkIDA7aShlKFwiLi9TdXBwb3J0XCIpLHIpO3ZhciBvPWUoXCIuL0VkZ2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJFZGdlRGlyZWN0aW9uXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5FZGdlRGlyZWN0aW9ufX0pO3ZhciBhPWUoXCIuL0Vycm9yXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQWJvcnRNYXBpbGxhcnlFcnJvclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuQWJvcnRNYXBpbGxhcnlFcnJvcn19KTt2YXIgcz1lKFwiLi9SZW5kZXJcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJSZW5kZXJNb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5SZW5kZXJNb2RlfX0pO3ZhciB1PWUoXCIuL1N0YXRlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVHJhbnNpdGlvbk1vZGVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB1LlRyYW5zaXRpb25Nb2RlfX0pO3ZhciBjPWUoXCIuL1ZpZXdlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkFsaWdubWVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuQWxpZ25tZW50fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSW1hZ2VTaXplXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5JbWFnZVNpemV9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJWaWV3ZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBjLlZpZXdlcn19KTt2YXIgbD1lKFwiLi9Db21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTbGlkZXJNb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbC5TbGlkZXJNb2RlfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ29tcG9uZW50U2l6ZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGwuQ29tcG9uZW50U2l6ZX19KTt2YXIgaD1lKFwiLi9jb21wb25lbnQvdGFnL1RhZ1wiKTtyLlRhZ0NvbXBvbmVudD1oO3ZhciBwPWUoXCIuL2NvbXBvbmVudC9tYXJrZXIvTWFya2VyXCIpO3IuTWFya2VyQ29tcG9uZW50PXA7dmFyIGY9ZShcIi4vY29tcG9uZW50L3BvcHVwL1BvcHVwXCIpO3IuUG9wdXBDb21wb25lbnQ9Zjt2YXIgZD1lKFwiLi9jb21wb25lbnQvc3BhdGlhbGRhdGEvU3BhdGlhbERhdGFcIik7ci5TcGF0aWFsRGF0YUNvbXBvbmVudD1kfSx7XCIuL0NvbXBvbmVudFwiOjI5MSxcIi4vRWRnZVwiOjI5MixcIi4vRXJyb3JcIjoyOTMsXCIuL1JlbmRlclwiOjI5NyxcIi4vU3RhdGVcIjoyOTgsXCIuL1N1cHBvcnRcIjoyOTksXCIuL1ZpZXdlclwiOjMwMixcIi4vY29tcG9uZW50L21hcmtlci9NYXJrZXJcIjozMzMsXCIuL2NvbXBvbmVudC9wb3B1cC9Qb3B1cFwiOjM1MCxcIi4vY29tcG9uZW50L3NwYXRpYWxkYXRhL1NwYXRpYWxEYXRhXCI6MzYxLFwiLi9jb21wb25lbnQvdGFnL1RhZ1wiOjM2Nn1dLDI5NzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9OmZ1bmN0aW9uKGUsdCxyLG4pe2lmKG49PT11bmRlZmluZWQpbj1yO2Vbbl09dFtyXX0pO3ZhciBpPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiBlKWlmKHIhPT1cImRlZmF1bHRcIiYmIXQuaGFzT3duUHJvcGVydHkocikpbih0LGUscil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4vcmVuZGVyL0RPTVJlbmRlcmVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRE9NUmVuZGVyZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBvLkRPTVJlbmRlcmVyfX0pO3ZhciBhPWUoXCIuL3JlbmRlci9HTFJlbmRlcmVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiR0xSZW5kZXJlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuR0xSZW5kZXJlcn19KTt2YXIgcz1lKFwiLi9yZW5kZXIvR0xSZW5kZXJTdGFnZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdMUmVuZGVyU3RhZ2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBzLkdMUmVuZGVyU3RhZ2V9fSk7dmFyIHU9ZShcIi4vcmVuZGVyL1JlbmRlckNhbWVyYVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlJlbmRlckNhbWVyYVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuUmVuZGVyQ2FtZXJhfX0pO3ZhciBjPWUoXCIuL3JlbmRlci9SZW5kZXJNb2RlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUmVuZGVyTW9kZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuUmVuZGVyTW9kZX19KTt2YXIgbD1lKFwiLi9yZW5kZXIvUmVuZGVyU2VydmljZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlJlbmRlclNlcnZpY2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBsLlJlbmRlclNlcnZpY2V9fSk7aShlKFwiLi9yZW5kZXIvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuL3JlbmRlci9ET01SZW5kZXJlclwiOjQ0MCxcIi4vcmVuZGVyL0dMUmVuZGVyU3RhZ2VcIjo0NDEsXCIuL3JlbmRlci9HTFJlbmRlcmVyXCI6NDQyLFwiLi9yZW5kZXIvUmVuZGVyQ2FtZXJhXCI6NDQzLFwiLi9yZW5kZXIvUmVuZGVyTW9kZVwiOjQ0NCxcIi4vcmVuZGVyL1JlbmRlclNlcnZpY2VcIjo0NDUsXCIuL3JlbmRlci9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjo0NDZ9XSwyOTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtlW25dPXRbcl19KTt2YXIgaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZSlpZihyIT09XCJkZWZhdWx0XCImJiF0Lmhhc093blByb3BlcnR5KHIpKW4odCxlLHIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuL3N0YXRlL0ZyYW1lR2VuZXJhdG9yXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRnJhbWVHZW5lcmF0b3JcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBvLkZyYW1lR2VuZXJhdG9yfX0pO3ZhciBhPWUoXCIuL3N0YXRlL1JvdGF0aW9uRGVsdGFcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJSb3RhdGlvbkRlbHRhXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5Sb3RhdGlvbkRlbHRhfX0pO3ZhciBzPWUoXCIuL3N0YXRlL1N0YXRlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU3RhdGVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBzLlN0YXRlfX0pO3ZhciB1PWUoXCIuL3N0YXRlL3N0YXRlcy9TdGF0ZUJhc2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTdGF0ZUJhc2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB1LlN0YXRlQmFzZX19KTt2YXIgYz1lKFwiLi9zdGF0ZS9TdGF0ZUNvbnRleHRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTdGF0ZUNvbnRleHRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBjLlN0YXRlQ29udGV4dH19KTt2YXIgbD1lKFwiLi9zdGF0ZS9TdGF0ZVNlcnZpY2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTdGF0ZVNlcnZpY2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBsLlN0YXRlU2VydmljZX19KTt2YXIgaD1lKFwiLi9zdGF0ZS9UcmFuc2l0aW9uTW9kZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRyYW5zaXRpb25Nb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaC5UcmFuc2l0aW9uTW9kZX19KTt2YXIgcD1lKFwiLi9zdGF0ZS9zdGF0ZXMvRWFydGhTdGF0ZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkVhcnRoU3RhdGVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBwLkVhcnRoU3RhdGV9fSk7dmFyIGY9ZShcIi4vc3RhdGUvc3RhdGVzL0ludGVyYWN0aXZlU3RhdGVCYXNlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSW50ZXJhY3RpdmVTdGF0ZUJhc2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBmLkludGVyYWN0aXZlU3RhdGVCYXNlfX0pO3ZhciBkPWUoXCIuL3N0YXRlL3N0YXRlcy9JbnRlcmFjdGl2ZVdhaXRpbmdTdGF0ZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkludGVyYWN0aXZlV2FpdGluZ1N0YXRlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5JbnRlcmFjdGl2ZVdhaXRpbmdTdGF0ZX19KTt2YXIgdj1lKFwiLi9zdGF0ZS9zdGF0ZXMvVHJhdmVyc2luZ1N0YXRlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVHJhdmVyc2luZ1N0YXRlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdi5UcmF2ZXJzaW5nU3RhdGV9fSk7dmFyIG09ZShcIi4vc3RhdGUvc3RhdGVzL1dhaXRpbmdTdGF0ZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIldhaXRpbmdTdGF0ZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG0uV2FpdGluZ1N0YXRlfX0pO2koZShcIi4vc3RhdGUvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuL3N0YXRlL0ZyYW1lR2VuZXJhdG9yXCI6NDQ3LFwiLi9zdGF0ZS9Sb3RhdGlvbkRlbHRhXCI6NDQ4LFwiLi9zdGF0ZS9TdGF0ZVwiOjQ0OSxcIi4vc3RhdGUvU3RhdGVDb250ZXh0XCI6NDUwLFwiLi9zdGF0ZS9TdGF0ZVNlcnZpY2VcIjo0NTEsXCIuL3N0YXRlL1RyYW5zaXRpb25Nb2RlXCI6NDUyLFwiLi9zdGF0ZS9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjo0NTMsXCIuL3N0YXRlL3N0YXRlcy9FYXJ0aFN0YXRlXCI6NDU0LFwiLi9zdGF0ZS9zdGF0ZXMvSW50ZXJhY3RpdmVTdGF0ZUJhc2VcIjo0NTUsXCIuL3N0YXRlL3N0YXRlcy9JbnRlcmFjdGl2ZVdhaXRpbmdTdGF0ZVwiOjQ1NixcIi4vc3RhdGUvc3RhdGVzL1N0YXRlQmFzZVwiOjQ1NyxcIi4vc3RhdGUvc3RhdGVzL1RyYXZlcnNpbmdTdGF0ZVwiOjQ1OCxcIi4vc3RhdGUvc3RhdGVzL1dhaXRpbmdTdGF0ZVwiOjQ1OX1dLDI5OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5pc0ZhbGxiYWNrU3VwcG9ydGVkPXIuaXNTdXBwb3J0ZWQ9dm9pZCAwO3ZhciBuPWUoXCIuL3V0aWxzL1N1cHBvcnRcIik7ZnVuY3Rpb24gaSgpe3JldHVybiBvKCkmJm4uaXNXZWJHTFN1cHBvcnRlZENhY2hlZCgpfXIuaXNTdXBwb3J0ZWQ9aTtmdW5jdGlvbiBvKCl7cmV0dXJuIG4uaXNCcm93c2VyKCkmJm4uaXNCbG9iU3VwcG9ydGVkKCkmJm4uaXNBcnJheVN1cHBvcnRlZCgpJiZuLmlzRnVuY3Rpb25TdXBwb3J0ZWQoKSYmbi5pc0pTT05TdXBwb3J0ZWQoKSYmbi5pc09iamVjdFN1cHBvcnRlZCgpfXIuaXNGYWxsYmFja1N1cHBvcnRlZD1vfSx7XCIuL3V0aWxzL1N1cHBvcnRcIjo0Njh9XSwzMDA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtlW25dPXRbcl19KTt2YXIgaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZSlpZihyIT09XCJkZWZhdWx0XCImJiF0Lmhhc093blByb3BlcnR5KHIpKW4odCxlLHIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuL3RpbGVzL0ltYWdlVGlsZUxvYWRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkltYWdlVGlsZUxvYWRlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8uSW1hZ2VUaWxlTG9hZGVyfX0pO3ZhciBhPWUoXCIuL3RpbGVzL0ltYWdlVGlsZVN0b3JlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSW1hZ2VUaWxlU3RvcmVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBhLkltYWdlVGlsZVN0b3JlfX0pO3ZhciBzPWUoXCIuL3RpbGVzL1RleHR1cmVQcm92aWRlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRleHR1cmVQcm92aWRlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuVGV4dHVyZVByb3ZpZGVyfX0pO3ZhciB1PWUoXCIuL3RpbGVzL1JlZ2lvbk9mSW50ZXJlc3RDYWxjdWxhdG9yXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUmVnaW9uT2ZJbnRlcmVzdENhbGN1bGF0b3JcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB1LlJlZ2lvbk9mSW50ZXJlc3RDYWxjdWxhdG9yfX0pO2koZShcIi4vdGlsZXMvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuL3RpbGVzL0ltYWdlVGlsZUxvYWRlclwiOjQ2MCxcIi4vdGlsZXMvSW1hZ2VUaWxlU3RvcmVcIjo0NjEsXCIuL3RpbGVzL1JlZ2lvbk9mSW50ZXJlc3RDYWxjdWxhdG9yXCI6NDYyLFwiLi90aWxlcy9UZXh0dXJlUHJvdmlkZXJcIjo0NjMsXCIuL3RpbGVzL2ludGVyZmFjZXMvaW50ZXJmYWNlc1wiOjQ2NH1dLDMwMTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9OmZ1bmN0aW9uKGUsdCxyLG4pe2lmKG49PT11bmRlZmluZWQpbj1yO2Vbbl09dFtyXX0pO3ZhciBpPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiBlKWlmKHIhPT1cImRlZmF1bHRcIiYmIXQuaGFzT3duUHJvcGVydHkocikpbih0LGUscil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4vdXRpbHMvRE9NXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRE9NXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5ET019fSk7dmFyIGE9ZShcIi4vdXRpbHMvRXZlbnRFbWl0dGVyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiRXZlbnRFbWl0dGVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5FdmVudEVtaXR0ZXJ9fSk7dmFyIHM9ZShcIi4vdXRpbHMvU2V0dGluZ3NcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTZXR0aW5nc1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuU2V0dGluZ3N9fSk7aShlKFwiLi91dGlscy9TdXBwb3J0XCIpLHIpO3ZhciB1PWUoXCIuL3V0aWxzL1VybHNcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJVcmxzXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS5VcmxzfX0pfSx7XCIuL3V0aWxzL0RPTVwiOjQ2NSxcIi4vdXRpbHMvRXZlbnRFbWl0dGVyXCI6NDY2LFwiLi91dGlscy9TZXR0aW5nc1wiOjQ2NyxcIi4vdXRpbHMvU3VwcG9ydFwiOjQ2OCxcIi4vdXRpbHMvVXJsc1wiOjQ2OX1dLDMwMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9OmZ1bmN0aW9uKGUsdCxyLG4pe2lmKG49PT11bmRlZmluZWQpbj1yO2Vbbl09dFtyXX0pO3ZhciBpPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiBlKWlmKHIhPT1cImRlZmF1bHRcIiYmIXQuaGFzT3duUHJvcGVydHkocikpbih0LGUscil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG89ZShcIi4vdmlld2VyL0FsaWdubWVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkFsaWdubWVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8uQWxpZ25tZW50fX0pO3ZhciBhPWUoXCIuL3ZpZXdlci9DYWNoZVNlcnZpY2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDYWNoZVNlcnZpY2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBhLkNhY2hlU2VydmljZX19KTt2YXIgcz1lKFwiLi92aWV3ZXIvQ29tcG9uZW50Q29udHJvbGxlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNvbXBvbmVudENvbnRyb2xsZXJcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBzLkNvbXBvbmVudENvbnRyb2xsZXJ9fSk7dmFyIHU9ZShcIi4vdmlld2VyL0NvbnRhaW5lclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNvbnRhaW5lclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuQ29udGFpbmVyfX0pO3ZhciBjPWUoXCIuL3ZpZXdlci9PYnNlcnZlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIk9ic2VydmVyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5PYnNlcnZlcn19KTt2YXIgbD1lKFwiLi92aWV3ZXIvSW1hZ2VTaXplXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiSW1hZ2VTaXplXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbC5JbWFnZVNpemV9fSk7dmFyIGg9ZShcIi4vdmlld2VyL0tleWJvYXJkU2VydmljZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIktleWJvYXJkU2VydmljZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGguS2V5Ym9hcmRTZXJ2aWNlfX0pO3ZhciBwPWUoXCIuL3ZpZXdlci9Mb2FkaW5nU2VydmljZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkxvYWRpbmdTZXJ2aWNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcC5Mb2FkaW5nU2VydmljZX19KTt2YXIgZj1lKFwiLi92aWV3ZXIvTW91c2VTZXJ2aWNlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiTW91c2VTZXJ2aWNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZi5Nb3VzZVNlcnZpY2V9fSk7dmFyIGQ9ZShcIi4vdmlld2VyL05hdmlnYXRvclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIk5hdmlnYXRvclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGQuTmF2aWdhdG9yfX0pO3ZhciB2PWUoXCIuL3ZpZXdlci9QbGF5U2VydmljZVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlBsYXlTZXJ2aWNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdi5QbGF5U2VydmljZX19KTt2YXIgbT1lKFwiLi92aWV3ZXIvUHJvamVjdGlvblwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlByb2plY3Rpb25cIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBtLlByb2plY3Rpb259fSk7dmFyIGc9ZShcIi4vdmlld2VyL1Nwcml0ZVNlcnZpY2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJTcHJpdGVTZXJ2aWNlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZy5TcHJpdGVTZXJ2aWNlfX0pO3ZhciBfPWUoXCIuL3ZpZXdlci9Ub3VjaFNlcnZpY2VcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUb3VjaFNlcnZpY2VcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBfLlRvdWNoU2VydmljZX19KTt2YXIgeT1lKFwiLi92aWV3ZXIvVmlld2VyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiVmlld2VyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geS5WaWV3ZXJ9fSk7aShlKFwiLi92aWV3ZXIvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuL3ZpZXdlci9BbGlnbm1lbnRcIjo0NzAsXCIuL3ZpZXdlci9DYWNoZVNlcnZpY2VcIjo0NzEsXCIuL3ZpZXdlci9Db21wb25lbnRDb250cm9sbGVyXCI6NDcyLFwiLi92aWV3ZXIvQ29udGFpbmVyXCI6NDczLFwiLi92aWV3ZXIvSW1hZ2VTaXplXCI6NDc0LFwiLi92aWV3ZXIvS2V5Ym9hcmRTZXJ2aWNlXCI6NDc1LFwiLi92aWV3ZXIvTG9hZGluZ1NlcnZpY2VcIjo0NzYsXCIuL3ZpZXdlci9Nb3VzZVNlcnZpY2VcIjo0NzcsXCIuL3ZpZXdlci9OYXZpZ2F0b3JcIjo0NzgsXCIuL3ZpZXdlci9PYnNlcnZlclwiOjQ3OSxcIi4vdmlld2VyL1BsYXlTZXJ2aWNlXCI6NDgxLFwiLi92aWV3ZXIvUHJvamVjdGlvblwiOjQ4MixcIi4vdmlld2VyL1Nwcml0ZVNlcnZpY2VcIjo0ODMsXCIuL3ZpZXdlci9Ub3VjaFNlcnZpY2VcIjo0ODQsXCIuL3ZpZXdlci9WaWV3ZXJcIjo0ODUsXCIuL3ZpZXdlci9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjo0ODZ9XSwzMDM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQVBJdjM9dm9pZCAwO3ZhciBzPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbj1lKFwicnhqc1wiKTt2YXIgaT1lKFwiLi4vQVBJXCIpO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fY2xpZW50SWQ9ZTt0aGlzLl9tb2RlbENyZWF0b3I9ciE9bnVsbD9yOm5ldyBpLk1vZGVsQ3JlYXRvcjt0aGlzLl9tb2RlbD10aGlzLl9tb2RlbENyZWF0b3IuY3JlYXRlTW9kZWwoZSx0KTt0aGlzLl9wYWdlQ291bnQ9OTk5O3RoaXMuX3BhdGhJbWFnZUJ5S2V5PVwiaW1hZ2VCeUtleVwiO3RoaXMuX3BhdGhJbWFnZUNsb3NlVG89XCJpbWFnZUNsb3NlVG9cIjt0aGlzLl9wYXRoSW1hZ2VzQnlIPVwiaW1hZ2VzQnlIXCI7dGhpcy5fcGF0aEltYWdlVmlld0FkZD1cImltYWdlVmlld0FkZFwiO3RoaXMuX3BhdGhTZXF1ZW5jZUJ5S2V5PVwic2VxdWVuY2VCeUtleVwiO3RoaXMuX3BhdGhTZXF1ZW5jZVZpZXdBZGQ9XCJzZXF1ZW5jZVZpZXdBZGRcIjt0aGlzLl9wcm9wZXJ0aWVzQ29yZT1bXCJjbFwiLFwibFwiLFwic2VxdWVuY2Vfa2V5XCJdO3RoaXMuX3Byb3BlcnRpZXNGaWxsPVtcImNhcHR1cmVkX2F0XCIsXCJjYXB0dXJlZF93aXRoX2NhbWVyYV91dWlkXCIsXCJ1c2VyXCIsXCJvcmdhbml6YXRpb25fa2V5XCIsXCJwcml2YXRlXCIsXCJwcm9qZWN0XCJdO3RoaXMuX3Byb3BlcnRpZXNLZXk9W1wia2V5XCJdO3RoaXMuX3Byb3BlcnRpZXNTZXF1ZW5jZT1bXCJrZXlzXCJdO3RoaXMuX3Byb3BlcnRpZXNTcGF0aWFsPVtcImF0b21pY19zY2FsZVwiLFwiY2x1c3Rlcl9rZXlcIixcImNfcm90YXRpb25cIixcImNhXCIsXCJjYWx0XCIsXCJjYW1lcmFfcHJvamVjdGlvbl90eXBlXCIsXCJjY2FcIixcImNmb2NhbFwiLFwiY2sxXCIsXCJjazJcIixcImdwYW5vXCIsXCJoZWlnaHRcIixcIm1lcmdlX2NjXCIsXCJtZXJnZV92ZXJzaW9uXCIsXCJvcmllbnRhdGlvblwiLFwid2lkdGhcIl07dGhpcy5fcHJvcGVydGllc1VzZXI9W1widXNlcm5hbWVcIl19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2xpZW50SWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NsaWVudElkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuaW1hZ2VCeUtleUZpbGwkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jYXRjaEludmFsaWRhdGVHZXQkKHRoaXMuX3dyYXBNb2RlbFJlc3BvbnNlJCh0aGlzLl9tb2RlbC5nZXQoW3RoaXMuX3BhdGhJbWFnZUJ5S2V5LHQsdGhpcy5fcHJvcGVydGllc0tleS5jb25jYXQodGhpcy5fcHJvcGVydGllc0ZpbGwpLmNvbmNhdCh0aGlzLl9wcm9wZXJ0aWVzU3BhdGlhbCksdGhpcy5fcHJvcGVydGllc0tleS5jb25jYXQodGhpcy5fcHJvcGVydGllc1VzZXIpXSkpLnBpcGUocy5tYXAoZnVuY3Rpb24oZSl7aWYoIWUpe3Rocm93IG5ldyBFcnJvcihcIkltYWdlcyAoXCIrdC5qb2luKFwiLCBcIikrXCIpIGNvdWxkIG5vdCBiZSBmb3VuZC5cIil9cmV0dXJuIGUuanNvbi5pbWFnZUJ5S2V5fSkpLHRoaXMuX3BhdGhJbWFnZUJ5S2V5LHQpfTtlLnByb3RvdHlwZS5pbWFnZUJ5S2V5RnVsbCQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhdGNoSW52YWxpZGF0ZUdldCQodGhpcy5fd3JhcE1vZGVsUmVzcG9uc2UkKHRoaXMuX21vZGVsLmdldChbdGhpcy5fcGF0aEltYWdlQnlLZXksdCx0aGlzLl9wcm9wZXJ0aWVzS2V5LmNvbmNhdCh0aGlzLl9wcm9wZXJ0aWVzQ29yZSkuY29uY2F0KHRoaXMuX3Byb3BlcnRpZXNGaWxsKS5jb25jYXQodGhpcy5fcHJvcGVydGllc1NwYXRpYWwpLHRoaXMuX3Byb3BlcnRpZXNLZXkuY29uY2F0KHRoaXMuX3Byb3BlcnRpZXNVc2VyKV0pKS5waXBlKHMubWFwKGZ1bmN0aW9uKGUpe2lmKCFlKXt0aHJvdyBuZXcgRXJyb3IoXCJJbWFnZXMgKFwiK3Quam9pbihcIiwgXCIpK1wiKSBjb3VsZCBub3QgYmUgZm91bmQuXCIpfXJldHVybiBlLmpzb24uaW1hZ2VCeUtleX0pKSx0aGlzLl9wYXRoSW1hZ2VCeUtleSx0KX07ZS5wcm90b3R5cGUuaW1hZ2VDbG9zZVRvJD1mdW5jdGlvbihlLHQpe3ZhciByPXQrXCI6XCIrZTtyZXR1cm4gdGhpcy5fY2F0Y2hJbnZhbGlkYXRlR2V0JCh0aGlzLl93cmFwTW9kZWxSZXNwb25zZSQodGhpcy5fbW9kZWwuZ2V0KFt0aGlzLl9wYXRoSW1hZ2VDbG9zZVRvLFtyXSx0aGlzLl9wcm9wZXJ0aWVzS2V5LmNvbmNhdCh0aGlzLl9wcm9wZXJ0aWVzQ29yZSkuY29uY2F0KHRoaXMuX3Byb3BlcnRpZXNGaWxsKS5jb25jYXQodGhpcy5fcHJvcGVydGllc1NwYXRpYWwpLHRoaXMuX3Byb3BlcnRpZXNLZXkuY29uY2F0KHRoaXMuX3Byb3BlcnRpZXNVc2VyKV0pKS5waXBlKHMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsP2UuanNvbi5pbWFnZUNsb3NlVG9bcl06bnVsbH0pKSx0aGlzLl9wYXRoSW1hZ2VDbG9zZVRvLFtyXSl9O2UucHJvdG90eXBlLmltYWdlc0J5SCQ9ZnVuY3Rpb24obyl7dmFyIGE9dGhpcztyZXR1cm4gdGhpcy5fY2F0Y2hJbnZhbGlkYXRlR2V0JCh0aGlzLl93cmFwTW9kZWxSZXNwb25zZSQodGhpcy5fbW9kZWwuZ2V0KFt0aGlzLl9wYXRoSW1hZ2VzQnlILG8se2Zyb206MCx0bzp0aGlzLl9wYWdlQ291bnR9LHRoaXMuX3Byb3BlcnRpZXNLZXkuY29uY2F0KHRoaXMuX3Byb3BlcnRpZXNDb3JlKV0pKS5waXBlKHMubWFwKGZ1bmN0aW9uKGUpe2lmKCFlKXtlPXtqc29uOntpbWFnZXNCeUg6e319fTtmb3IodmFyIHQ9MCxyPW87dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07ZS5qc29uLmltYWdlc0J5SFtuXT17fTtmb3IodmFyIGk9MDtpPD1hLl9wYWdlQ291bnQ7aSsrKXtlLmpzb24uaW1hZ2VzQnlIW25dW2ldPW51bGx9fX1yZXR1cm4gZS5qc29uLmltYWdlc0J5SH0pKSx0aGlzLl9wYXRoSW1hZ2VzQnlILG8pfTtlLnByb3RvdHlwZS5pbWFnZVZpZXdBZGQkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYXRjaEludmFsaWRhdGVDYWxsJCh0aGlzLl93cmFwQ2FsbE1vZGVsUmVzcG9uc2UkKHRoaXMuX21vZGVsLmNhbGwoW3RoaXMuX3BhdGhJbWFnZVZpZXdBZGRdLFtlXSkpLHRoaXMuX3BhdGhJbWFnZVZpZXdBZGQsZSl9O2UucHJvdG90eXBlLmludmFsaWRhdGVJbWFnZUJ5S2V5PWZ1bmN0aW9uKGUpe3RoaXMuX2ludmFsaWRhdGVHZXQodGhpcy5fcGF0aEltYWdlQnlLZXksZSl9O2UucHJvdG90eXBlLmludmFsaWRhdGVJbWFnZXNCeUg9ZnVuY3Rpb24oZSl7dGhpcy5faW52YWxpZGF0ZUdldCh0aGlzLl9wYXRoSW1hZ2VzQnlILGUpfTtlLnByb3RvdHlwZS5pbnZhbGlkYXRlU2VxdWVuY2VCeUtleT1mdW5jdGlvbihlKXt0aGlzLl9pbnZhbGlkYXRlR2V0KHRoaXMuX3BhdGhTZXF1ZW5jZUJ5S2V5LGUpfTtlLnByb3RvdHlwZS5zZXRUb2tlbj1mdW5jdGlvbihlKXt0aGlzLl9tb2RlbC5pbnZhbGlkYXRlKFtdKTt0aGlzLl9tb2RlbD1udWxsO3RoaXMuX21vZGVsPXRoaXMuX21vZGVsQ3JlYXRvci5jcmVhdGVNb2RlbCh0aGlzLl9jbGllbnRJZCxlKX07ZS5wcm90b3R5cGUuc2VxdWVuY2VCeUtleSQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2NhdGNoSW52YWxpZGF0ZUdldCQodGhpcy5fd3JhcE1vZGVsUmVzcG9uc2UkKHRoaXMuX21vZGVsLmdldChbdGhpcy5fcGF0aFNlcXVlbmNlQnlLZXksaSx0aGlzLl9wcm9wZXJ0aWVzS2V5LmNvbmNhdCh0aGlzLl9wcm9wZXJ0aWVzU2VxdWVuY2UpXSkpLnBpcGUocy5tYXAoZnVuY3Rpb24oZSl7aWYoIWUpe2U9e2pzb246e3NlcXVlbmNlQnlLZXk6e319fX1mb3IodmFyIHQ9MCxyPWk7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYoIShuIGluIGUuanNvbi5zZXF1ZW5jZUJ5S2V5KSl7Y29uc29sZS53YXJuKFwiU2VxdWVuY2UgZGF0YSBtaXNzaW5nIChcIituK1wiKVwiKTtlLmpzb24uc2VxdWVuY2VCeUtleVtuXT17a2V5Om4sa2V5czpbXX19fXJldHVybiBlLmpzb24uc2VxdWVuY2VCeUtleX0pKSx0aGlzLl9wYXRoU2VxdWVuY2VCeUtleSxpKX07ZS5wcm90b3R5cGUuc2VxdWVuY2VWaWV3QWRkJD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2F0Y2hJbnZhbGlkYXRlQ2FsbCQodGhpcy5fd3JhcENhbGxNb2RlbFJlc3BvbnNlJCh0aGlzLl9tb2RlbC5jYWxsKFt0aGlzLl9wYXRoU2VxdWVuY2VWaWV3QWRkXSxbZV0pKSx0aGlzLl9wYXRoU2VxdWVuY2VWaWV3QWRkLGUpfTtlLnByb3RvdHlwZS5fY2F0Y2hJbnZhbGlkYXRlR2V0JD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gZS5waXBlKHMuY2F0Y2hFcnJvcihmdW5jdGlvbihlKXtuLl9pbnZhbGlkYXRlR2V0KHQscik7dGhyb3cgZX0pKX07ZS5wcm90b3R5cGUuX2NhdGNoSW52YWxpZGF0ZUNhbGwkPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBlLnBpcGUocy5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe24uX2ludmFsaWRhdGVDYWxsKHQscik7dGhyb3cgZX0pKX07ZS5wcm90b3R5cGUuX2ludmFsaWRhdGVHZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2RlbC5pbnZhbGlkYXRlKFtlLHRdKX07ZS5wcm90b3R5cGUuX2ludmFsaWRhdGVDYWxsPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZWwuaW52YWxpZGF0ZShbZV0sW3RdKX07ZS5wcm90b3R5cGUuX3dyYXBNb2RlbFJlc3BvbnNlJD1mdW5jdGlvbihlKXtyZXR1cm4gbi5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbih0KXtlLnRoZW4oZnVuY3Rpb24oZSl7dC5uZXh0KGUpO3QuY29tcGxldGUoKX0sZnVuY3Rpb24oZSl7dC5lcnJvcihlKX0pfSl9O2UucHJvdG90eXBlLl93cmFwQ2FsbE1vZGVsUmVzcG9uc2UkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl93cmFwTW9kZWxSZXNwb25zZSQoZSkucGlwZShzLm1hcChmdW5jdGlvbihlKXtyZXR1cm59KSl9O3JldHVybiBlfSgpO3IuQVBJdjM9bztyLmRlZmF1bHQ9b30se1wiLi4vQVBJXCI6MjkwLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDMwNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Nb2RlbENyZWF0b3I9dm9pZCAwO3ZhciBuPWUoXCJmYWxjb3JcIik7dmFyIGk9ZShcImZhbGNvci1odHRwLWRhdGFzb3VyY2VcIik7dmFyIG89ZShcIi4uL1V0aWxzXCIpO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31lLnByb3RvdHlwZS5jcmVhdGVNb2RlbD1mdW5jdGlvbihlLHQpe3ZhciByPXtjcm9zc0RvbWFpbjp0cnVlLHdpdGhDcmVkZW50aWFsczpmYWxzZX07aWYodCE9bnVsbCl7ci5oZWFkZXJzPXtBdXRob3JpemF0aW9uOlwiQmVhcmVyIFwiK3R9fXJldHVybiBuZXcgbi5Nb2RlbCh7bWF4U2l6ZToxNioxMDI0KjEwMjQsc291cmNlOm5ldyBpLmRlZmF1bHQoby5VcmxzLmZhbGNvck1vZGVsKGUpLHIpfSl9O3JldHVybiBlfSgpO3IuTW9kZWxDcmVhdG9yPWE7ci5kZWZhdWx0PWF9LHtcIi4uL1V0aWxzXCI6MzAxLGZhbGNvcjoxNSxcImZhbGNvci1odHRwLWRhdGFzb3VyY2VcIjoxMH1dLDMwNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSl9LHt9XSwzMDY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkF0dHJpYnV0aW9uQ29tcG9uZW50PXZvaWQgMDt2YXIgbz1lKFwicnhqc1wiKTt2YXIgYT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGQ9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBuPWUoXCIuLi9Db21wb25lbnRcIik7dmFyIHY9ZShcIi4uL1V0aWxzXCIpO3ZhciBzPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCxyKXtyZXR1cm4gbi5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzfWUucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciBuPXRoaXM7dGhpcy5fZGlzcG9zYWJsZT1vLmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQpLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJue25hbWU6bi5fbmFtZSx2bm9kZTpuLl9nZXRBdHRyaWJ1dGlvbk5vZGUodC51c2VybmFtZSx0LmtleSx0LmNhcHR1cmVkQXQsci53aWR0aCl9fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJCl9O2UucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zYWJsZS51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57fX07ZS5wcm90b3R5cGUuX2dldEF0dHJpYnV0aW9uTm9kZT1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1uPD02NDA7dmFyIG89ZC5oKFwiZGl2LkF0dHJpYnV0aW9uTWFwaWxsYXJ5TG9nb1wiLFtdKTt2YXIgYT1kLmgoXCJhLkF0dHJpYnV0aW9uSWNvbkNvbnRhaW5lclwiLHtocmVmOnYuVXJscy5leHBsb3JlLHRhcmdldDpcIl9ibGFua1wifSxbb10pO3ZhciBzPWk/XCJcIitlOlwiaW1hZ2UgYnkgXCIrZTt2YXIgdT1kLmgoXCJkaXYuQXR0cmlidXRpb25Vc2VybmFtZVwiLHt0ZXh0Q29udGVudDpzfSxbXSk7dmFyIGM9bmV3IERhdGUocikudG9EYXRlU3RyaW5nKCkuc3BsaXQoXCIgXCIpO3ZhciBsPShjLmxlbmd0aD4zP2k/W2NbM11dOltjWzFdLGNbMl0rXCIsXCIsY1szXV06Yykuam9pbihcIiBcIik7dmFyIGg9ZC5oKFwiZGl2LkF0dHJpYnV0aW9uRGF0ZVwiLHt0ZXh0Q29udGVudDpsfSxbXSk7dmFyIHA9ZC5oKFwiYS5BdHRyaWJ1dGlvbkltYWdlQ29udGFpbmVyXCIse2hyZWY6di5VcmxzLmV4cG9yZUltYWdlKHQpLHRhcmdldDpcIl9ibGFua1wifSxbdSxoXSk7dmFyIGY9aT9cIi5BdHRyaWJ1dGlvbkNvbXBhY3RcIjpcIlwiO3JldHVybiBkLmgoXCJkaXYuQXR0cmlidXRpb25Db250YWluZXJcIitmLHt9LFthLHBdKX07ZS5jb21wb25lbnROYW1lPVwiYXR0cmlidXRpb25cIjtyZXR1cm4gZX0obi5Db21wb25lbnQpO3IuQXR0cmlidXRpb25Db21wb25lbnQ9cztuLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIocyk7ci5kZWZhdWx0PXN9LHtcIi4uL0NvbXBvbmVudFwiOjI5MSxcIi4uL1V0aWxzXCI6MzAxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSxcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzA3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5CYWNrZ3JvdW5kQ29tcG9uZW50PXZvaWQgMDt2YXIgbz1lKFwidmlydHVhbC1kb21cIik7dmFyIG49ZShcIi4uL0NvbXBvbmVudFwiKTt2YXIgYT1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQscil7cmV0dXJuIG4uY2FsbCh0aGlzLGUsdCxyKXx8dGhpc31lLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJC5uZXh0KHtuYW1lOnRoaXMuX25hbWUsdm5vZGU6dGhpcy5fZ2V0QmFja2dyb3VuZE5vZGUoXCJUaGUgdmlld2VyIGNhbid0IGRpc3BsYXkgdGhlIGdpdmVuIGltYWdlLlwiKX0pfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3JldHVybn07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue319O2UucHJvdG90eXBlLl9nZXRCYWNrZ3JvdW5kTm9kZT1mdW5jdGlvbihlKXtyZXR1cm4gby5oKFwiZGl2LkJhY2tncm91bmRXcmFwcGVyXCIse30sW28uaChcInBcIix7dGV4dENvbnRlbnQ6ZX0sW10pXSl9O2UuY29tcG9uZW50TmFtZT1cImJhY2tncm91bmRcIjtyZXR1cm4gZX0obi5Db21wb25lbnQpO3IuQmFja2dyb3VuZENvbXBvbmVudD1hO24uQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihhKTtyLmRlZmF1bHQ9YX0se1wiLi4vQ29tcG9uZW50XCI6MjkxLFwidmlydHVhbC1kb21cIjoyNDd9XSwzMDg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkJlYXJpbmdDb21wb25lbnQ9dm9pZCAwO3ZhciBhPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgdj1lKFwidmlydHVhbC1kb21cIik7dmFyIG89ZShcIkBtYXBib3gvdW5pdGJlemllclwiKTt2YXIgcz1lKFwicnhqc1wiKTt2YXIgaT1lKFwiLi4vQ29tcG9uZW50XCIpO3ZhciB1PWUoXCIuLi9HZW9cIik7dmFyIGM9ZShcIi4uL2dlby9WaWV3cG9ydENvb3Jkc1wiKTt2YXIgZz1lKFwiLi91dGlscy9Db21wb25lbnRTaXplXCIpO3ZhciBsPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlLHQscil8fHRoaXM7bi5fc3BhdGlhbD1uZXcgdS5TcGF0aWFsO24uX3ZpZXdwb3J0Q29vcmRzPW5ldyBjLmRlZmF1bHQ7bi5fc3ZnTmFtZXNwYWNlPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtuLl9kaXN0aW5jdFRocmVzaG9sZD1NYXRoLlBJLzM2MDtuLl9hbmltYXRpb25TcGVlZD0uMDc1O24uX3VuaXRCZXppZXI9bmV3IG8oLjc0LC42NywuMzgsLjk2KTtyZXR1cm4gbn1lLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgbT10aGlzO3ZhciBlPXRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQucGlwZShhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1tLl9zcGF0aWFsLmRlZ1RvUmFkKGUucGVyc3BlY3RpdmUuZm92KTt2YXIgcj1lLnBlcnNwZWN0aXZlLmFzcGVjdD09PU51bWJlci5QT1NJVElWRV9JTkZJTklUWT9NYXRoLlBJOk1hdGguYXRhbihlLnBlcnNwZWN0aXZlLmFzcGVjdCpNYXRoLnRhbiguNSp0KSkqMjtyZXR1cm5bbS5fc3BhdGlhbC5hemltdXRoYWxUb0JlYXJpbmcoZS5yb3RhdGlvbi5waGkpLHJdfSksYS5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLmFicyh0WzBdLWVbMF0pPG0uX2Rpc3RpbmN0VGhyZXNob2xkJiZNYXRoLmFicyh0WzFdLWVbMV0pPG0uX2Rpc3RpbmN0VGhyZXNob2xkfSkpO3ZhciB0PXMuY29tYmluZUxhdGVzdCh0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZShhLmRpc3RpbmN0VW50aWxDaGFuZ2VkKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXl9KSksdGhpcy5fbmF2aWdhdG9yLnBhblNlcnZpY2UucGFuTm9kZXMkKS5waXBlKGEubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPXQuc3RhdGUuY3VycmVudE5vZGU7dmFyIGk9dC5zdGF0ZS5jdXJyZW50VHJhbnNmb3JtO2lmKG4ucGFubyl7dmFyIG89MipNYXRoLlBJKm4uZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzL24uZ3Bhbm8uRnVsbFBhbm9XaWR0aFBpeGVscztyZXR1cm5bby8yLG8vMl19dmFyIGE9bS5fY29tcHV0ZVByb2plY3RlZFBvaW50cyhpKTt2YXIgcz1tLl9zcGF0aWFsLmRlZ1RvUmFkKG0uX2NvbXB1dGVIb3Jpem9udGFsRm92KGEpKTt2YXIgdT1zLzI7dmFyIGM9cy8yO2Zvcih2YXIgbD0wLGg9cjtsPGgubGVuZ3RoO2wrKyl7dmFyIHA9aFtsXSxmPXBbMF0sZD1wWzJdO3ZhciB2PW0uX3NwYXRpYWwud3JhcChmLmNhLW4uY2EsLTE4MCwxODApO2lmKHY8MCl7dT1tLl9zcGF0aWFsLmRlZ1RvUmFkKE1hdGguYWJzKHYpKStkLzJ9ZWxzZXtjPW0uX3NwYXRpYWwuZGVnVG9SYWQoTWF0aC5hYnModikpK2QvMn19cmV0dXJuW3UsY119KSxhLmRpc3RpbmN0VW50aWxDaGFuZ2VkKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVswXSxuPWVbMV07dmFyIGk9dFswXSxvPXRbMV07cmV0dXJuIE1hdGguYWJzKGktcik8bS5fZGlzdGluY3RUaHJlc2hvbGQmJk1hdGguYWJzKG8tbik8bS5fZGlzdGluY3RUaHJlc2hvbGR9KSk7dmFyIHI9cy5jb21iaW5lTGF0ZXN0KHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKGEuZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmN1cnJlbnROb2RlLmtleX0pKSx0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5iZWFyaW5nJCkucGlwZShhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTt2YXIgbj1tLl9zcGF0aWFsLmRlZ1RvUmFkKHQuc3RhdGUuY3VycmVudE5vZGUuY2Etcik7cmV0dXJuIG59KSk7dmFyIG49bmV3IHMuU3ViamVjdDt2YXIgaT1uLnBpcGUoYS5zY2FuKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQoZSl9LHthbHBoYTowLGN1cnI6WzAsMCwwXSxwcmV2OlswLDAsMF19KSxhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1tLl91bml0QmV6aWVyLnNvbHZlKGUuYWxwaGEpO3ZhciByPWUuY3Vycjt2YXIgbj1lLnByZXY7cmV0dXJuW20uX2ludGVycG9sYXRlKG5bMF0sclswXSx0KSxtLl9pbnRlcnBvbGF0ZShuWzFdLHJbMV0sdCldfSkpO3RoaXMuX2ZvdlN1YnNjcmlwdGlvbj10LnBpcGUoYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PW0uX3VuaXRCZXppZXIuc29sdmUoZS5hbHBoYSk7dmFyIHI9ZS5jdXJyO3ZhciBuPWUucHJldjt2YXIgaT1bbS5faW50ZXJwb2xhdGUoblswXSxyWzBdLHQpLG0uX2ludGVycG9sYXRlKG5bMV0sclsxXSx0KV07dmFyIG89YS5zbGljZSgpO3JldHVybnthbHBoYTowLGN1cnI6byxwcmV2Oml9fX0pKS5zdWJzY3JpYmUobik7dGhpcy5fZm92QW5pbWF0aW9uU3Vic2NyaXB0aW9uPXQucGlwZShhLnN3aXRjaE1hcChmdW5jdGlvbigpe3JldHVybiBtLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmFGcmFtZSQucGlwZShhLnNraXAoMSksYS5zY2FuKGZ1bmN0aW9uKGUpe3JldHVybiBlK20uX2FuaW1hdGlvblNwZWVkfSwwKSxhLnRha2VXaGlsZShmdW5jdGlvbihlKXtyZXR1cm4gZTw9MSttLl9hbmltYXRpb25TcGVlZH0pLGEubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLm1pbihlLDEpfSkpfSksYS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybnthbHBoYTp0LGN1cnI6ZS5jdXJyLnNsaWNlKCkscHJldjplLnByZXYuc2xpY2UoKX19fSkpLnN1YnNjcmliZShuKTt2YXIgbz1zLmNvbWJpbmVMYXRlc3QocixpKS5waXBlKGEubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVyblt0LHJbMF0sclsxXV19KSk7dGhpcy5fcmVuZGVyU3Vic2NyaXB0aW9uPXMuY29tYmluZUxhdGVzdChlLG8sdGhpcy5fY29uZmlndXJhdGlvbiQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQpLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXSxvPWlbMF0sYT1pWzFdLHM9aVsyXSx1PWVbMl0sYz1lWzNdO3ZhciBsPW0uX2NyZWF0ZUJhY2tncm91bmQocik7dmFyIGg9bS5fY3JlYXRlRm92SW5kaWNhdG9yKGEscyxvKTt2YXIgcD1tLl9jcmVhdGVOb3J0aChyKTt2YXIgZj1tLl9jcmVhdGVDaXJjbGVTZWN0b3JDb21wYXNzKG0uX2NyZWF0ZUNpcmNsZVNlY3RvcihNYXRoLm1heChNYXRoLlBJLzIwLG4pLFwiI0ZGRlwiKSk7dmFyIGQ9dS5zaXplPT09Zy5kZWZhdWx0LlNtYWxsfHx1LnNpemU9PT1nLmRlZmF1bHQuQXV0b21hdGljJiZjLndpZHRoPDY0MD9cIi5CZWFyaW5nQ29tcGFjdFwiOlwiXCI7cmV0dXJue25hbWU6bS5fbmFtZSx2bm9kZTp2LmgoXCJkaXYuQmVhcmluZ0luZGljYXRvckNvbnRhaW5lclwiK2Qse29uY29udGV4dG1lbnU6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfX0sW2wsaCxwLGZdKX19KSkuc3Vic2NyaWJlKHRoaXMuX2NvbnRhaW5lci5kb21SZW5kZXJlci5yZW5kZXIkKX07ZS5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9mb3ZTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9mb3ZBbmltYXRpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue3NpemU6Zy5kZWZhdWx0LkF1dG9tYXRpY319O2UucHJvdG90eXBlLl9jcmVhdGVGb3ZJbmRpY2F0b3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX2NyZWF0ZUZvdkFyYyhlLHQpO3ZhciBpPXYuaChcImdcIix7YXR0cmlidXRlczp7dHJhbnNmb3JtOlwidHJhbnNsYXRlKDE4LDE4KVwifSxuYW1lc3BhY2U6dGhpcy5fc3ZnTmFtZXNwYWNlfSxbbl0pO3ZhciBvPXYuaChcInN2Z1wiLHthdHRyaWJ1dGVzOnt2aWV3Qm94OlwiMCAwIDM2IDM2XCJ9LG5hbWVzcGFjZTp0aGlzLl9zdmdOYW1lc3BhY2Usc3R5bGU6e2hlaWdodDpcIjM2cHhcIixsZWZ0OlwiMnB4XCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIjJweFwiLHRyYW5zZm9ybTpcInJvdGF0ZVooXCIrdGhpcy5fc3BhdGlhbC5yYWRUb0RlZyhyKStcImRlZylcIix3aWR0aDpcIjM2cHhcIn19LFtpXSk7cmV0dXJuIG99O2UucHJvdG90eXBlLl9jcmVhdGVGb3ZBcmM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0xNi43NTt2YXIgbj0yLjU7dmFyIGk9ZSt0O2lmKGk+MipNYXRoLlBJLU1hdGguUEkvOTApe3JldHVybiB2LmgoXCJjaXJjbGVcIix7YXR0cmlidXRlczp7Y3g6XCIwXCIsY3k6XCIwXCIsXCJmaWxsLW9wYWNpdHlcIjpcIjBcIixyOlwiXCIrcixzdHJva2U6XCIjRkZGXCIsXCJzdHJva2Utd2lkdGhcIjpcIlwiK259LG5hbWVzcGFjZTp0aGlzLl9zdmdOYW1lc3BhY2V9LFtdKX12YXIgbz0tTWF0aC5QSS8yLWU7dmFyIGE9bytpO3ZhciBzPXIqTWF0aC5jb3Mobyk7dmFyIHU9cipNYXRoLnNpbihvKTt2YXIgYz1yKk1hdGguY29zKGEpO3ZhciBsPXIqTWF0aC5zaW4oYSk7dmFyIGg9aT49TWF0aC5QST8xOjA7dmFyIHA9XCJNIFwiK3MrXCIgXCIrdStcIiBBIFwiK3IrXCIgXCIrcitcIiAwIFwiK2grXCIgMSBcIitjK1wiIFwiK2w7cmV0dXJuIHYuaChcInBhdGhcIix7YXR0cmlidXRlczp7ZDpwLFwiZmlsbC1vcGFjaXR5XCI6XCIwXCIsc3Ryb2tlOlwiI0ZGRlwiLFwic3Ryb2tlLXdpZHRoXCI6XCJcIitufSxuYW1lc3BhY2U6dGhpcy5fc3ZnTmFtZXNwYWNlfSxbXSl9O2UucHJvdG90eXBlLl9jcmVhdGVDaXJjbGVTZWN0b3JDb21wYXNzPWZ1bmN0aW9uKGUpe3ZhciB0PXYuaChcImdcIix7YXR0cmlidXRlczp7dHJhbnNmb3JtOlwidHJhbnNsYXRlKDEsMSlcIn0sbmFtZXNwYWNlOnRoaXMuX3N2Z05hbWVzcGFjZX0sW2VdKTt2YXIgcj12LmgoXCJzdmdcIix7YXR0cmlidXRlczp7dmlld0JveDpcIjAgMCAyIDJcIn0sbmFtZXNwYWNlOnRoaXMuX3N2Z05hbWVzcGFjZSxzdHlsZTp7aGVpZ2h0OlwiMjZweFwiLGxlZnQ6XCI3cHhcIixwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiN3B4XCIsd2lkdGg6XCIyNnB4XCJ9fSxbdF0pO3JldHVybiByfTtlLnByb3RvdHlwZS5fY3JlYXRlQ2lyY2xlU2VjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoZT4yKk1hdGguUEktTWF0aC5QSS85MCl7cmV0dXJuIHYuaChcImNpcmNsZVwiLHthdHRyaWJ1dGVzOntjeDpcIjBcIixjeTpcIjBcIixmaWxsOnQscjpcIjFcIn0sbmFtZXNwYWNlOnRoaXMuX3N2Z05hbWVzcGFjZX0sW10pfXZhciByPS1NYXRoLlBJLzItZS8yO3ZhciBuPXIrZTt2YXIgaT1NYXRoLmNvcyhyKTt2YXIgbz1NYXRoLnNpbihyKTt2YXIgYT1NYXRoLmNvcyhuKTt2YXIgcz1NYXRoLnNpbihuKTt2YXIgdT1lPj1NYXRoLlBJPzE6MDt2YXIgYz1cIk0gMCAwIFwiK2krXCIgXCIrbytcIiBBIDEgMSAwIFwiK3UrXCIgMSBcIithK1wiIFwiK3M7cmV0dXJuIHYuaChcInBhdGhcIix7YXR0cmlidXRlczp7ZDpjLGZpbGw6dH0sbmFtZXNwYWNlOnRoaXMuX3N2Z05hbWVzcGFjZX0sW10pfTtlLnByb3RvdHlwZS5fY3JlYXRlTm9ydGg9ZnVuY3Rpb24oZSl7dmFyIHQ9di5oKFwiZGl2LkJlYXJpbmdOb3J0aFwiLFtdKTt2YXIgcj12LmgoXCJkaXYuQmVhcmluZ05vcnRoQ29udGFpbmVyXCIse3N0eWxlOnt0cmFuc2Zvcm06XCJyb3RhdGVaKFwiK3RoaXMuX3NwYXRpYWwucmFkVG9EZWcoLWUpK1wiZGVnKVwifX0sW3RdKTtyZXR1cm4gcn07ZS5wcm90b3R5cGUuX2NyZWF0ZUJhY2tncm91bmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHYuaChcImRpdi5CZWFyaW5nSW5kaWNhdG9yQmFja2dyb3VuZFwiLHtzdHlsZTp7dHJhbnNmb3JtOlwicm90YXRlWihcIit0aGlzLl9zcGF0aWFsLnJhZFRvRGVnKC1lKStcImRlZylcIn19LFt2LmgoXCJkaXYuQmVhcmluZ0luZGljYXRvckJhY2tncm91bmRDaXJjbGVcIixbXSksdi5oKFwiZGl2LkJlYXJpbmdJbmRpY2F0b3JCYWNrZ3JvdW5kQXJyb3dDb250YWluZXJcIixbdi5oKFwiZGl2LkJlYXJpbmdJbmRpY2F0b3JCYWNrZ3JvdW5kQXJyb3dcIixbXSldKV0pfTtlLnByb3RvdHlwZS5fY29tcHV0ZVByb2plY3RlZFBvaW50cz1mdW5jdGlvbihlKXt2YXIgdD1bWzEsMF1dO3ZhciByPVtbMCwuNV1dO3ZhciBuPTEyO3JldHVybiB1Lkdlby5jb21wdXRlUHJvamVjdGVkUG9pbnRzKGUsdCxyLG4sdGhpcy5fdmlld3BvcnRDb29yZHMpfTtlLnByb3RvdHlwZS5fY29tcHV0ZUhvcml6b250YWxGb3Y9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2YXIgcj1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fY29vcmRUb0ZvdihlWzBdKX0pO3ZhciBuPU1hdGgubWluLmFwcGx5KE1hdGgscik7cmV0dXJuIG59O2UucHJvdG90eXBlLl9jb29yZFRvRm92PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zcGF0aWFsLnJhZFRvRGVnKDIqTWF0aC5hdGFuKGUpKX07ZS5wcm90b3R5cGUuX2ludGVycG9sYXRlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4oMS1yKSplK3IqdH07ZS5jb21wb25lbnROYW1lPVwiYmVhcmluZ1wiO3JldHVybiBlfShpLkNvbXBvbmVudCk7ci5CZWFyaW5nQ29tcG9uZW50PWw7aS5Db21wb25lbnRTZXJ2aWNlLnJlZ2lzdGVyKGwpO3IuZGVmYXVsdD1sfSx7XCIuLi9Db21wb25lbnRcIjoyOTEsXCIuLi9HZW9cIjoyOTQsXCIuLi9nZW8vVmlld3BvcnRDb29yZHNcIjo0MjEsXCIuL3V0aWxzL0NvbXBvbmVudFNpemVcIjo0MDQsXCJAbWFwYm94L3VuaXRiZXppZXJcIjoyLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSxcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzA5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DYWNoZUNvbXBvbmVudD12b2lkIDA7dmFyIHk9ZShcInJ4anNcIik7dmFyIGI9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciB4PWUoXCIuLi9FZGdlXCIpO3ZhciBuPWUoXCIuLi9Db21wb25lbnRcIik7dmFyIG89ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0LHIpe3JldHVybiBuLmNhbGwodGhpcyxlLHQscil8fHRoaXN9ZS5wcm90b3R5cGUuc2V0RGVwdGg9ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe2RlcHRoOmV9KX07ZS5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIF89dGhpczt0aGlzLl9zZXF1ZW5jZVN1YnNjcmlwdGlvbj15LmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQucGlwZShiLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zZXF1ZW5jZUVkZ2VzJH0pLGIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhY2hlZH0pKSx0aGlzLl9jb25maWd1cmF0aW9uJCkucGlwZShiLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3ZhciByPWVbMV07dmFyIG49TWF0aC5tYXgoMCxNYXRoLm1pbig0LHIuZGVwdGguc2VxdWVuY2UpKTt2YXIgaT1fLl9jYWNoZSQodC5lZGdlcyx4LkVkZ2VEaXJlY3Rpb24uTmV4dCxuKTt2YXIgbz1fLl9jYWNoZSQodC5lZGdlcyx4LkVkZ2VEaXJlY3Rpb24uUHJldixuKTtyZXR1cm4geS5tZXJnZShpLG8pLnBpcGUoYi5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjYWNoZSBzZXF1ZW5jZSBlZGdlcy5cIixlKTtyZXR1cm4geS5lbXB0eSgpfSkpfSkpLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3RoaXMuX3NwYXRpYWxTdWJzY3JpcHRpb249eS5jb21iaW5lTGF0ZXN0KHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUoYi5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY29tYmluZUxhdGVzdCh5Lm9mKGUpLGUuc3BhdGlhbEVkZ2VzJC5waXBlKGIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhY2hlZH0pKSl9KSksdGhpcy5fY29uZmlndXJhdGlvbiQpLnBpcGUoYi5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXTt2YXIgbz1uLmVkZ2VzO3ZhciBhPWkuZGVwdGg7dmFyIHM9TWF0aC5tYXgoMCxNYXRoLm1pbigyLGEucGFubykpO3ZhciB1PXIucGFubz8wOk1hdGgubWF4KDAsTWF0aC5taW4oMyxhLnN0ZXApKTt2YXIgYz1yLnBhbm8/MDpNYXRoLm1heCgwLE1hdGgubWluKDEsYS50dXJuKSk7dmFyIGw9Xy5fY2FjaGUkKG8seC5FZGdlRGlyZWN0aW9uLlBhbm8scyk7dmFyIGg9Xy5fY2FjaGUkKG8seC5FZGdlRGlyZWN0aW9uLlN0ZXBGb3J3YXJkLHUpO3ZhciBwPV8uX2NhY2hlJChvLHguRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmQsdSk7dmFyIGY9Xy5fY2FjaGUkKG8seC5FZGdlRGlyZWN0aW9uLlN0ZXBMZWZ0LHUpO3ZhciBkPV8uX2NhY2hlJChvLHguRWRnZURpcmVjdGlvbi5TdGVwUmlnaHQsdSk7dmFyIHY9Xy5fY2FjaGUkKG8seC5FZGdlRGlyZWN0aW9uLlR1cm5MZWZ0LGMpO3ZhciBtPV8uX2NhY2hlJChvLHguRWRnZURpcmVjdGlvbi5UdXJuUmlnaHQsYyk7dmFyIGc9Xy5fY2FjaGUkKG8seC5FZGdlRGlyZWN0aW9uLlR1cm5VLGMpO3JldHVybiB5Lm1lcmdlKGgscCxmLGQsbCx2LG0sZykucGlwZShiLmNhdGNoRXJyb3IoZnVuY3Rpb24oZSx0KXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNhY2hlIHNwYXRpYWwgZWRnZXMuXCIsZSk7cmV0dXJuIHkuZW1wdHkoKX0pKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KX07ZS5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9zZXF1ZW5jZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NwYXRpYWxTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue2RlcHRoOntwYW5vOjEsc2VxdWVuY2U6MixzdGVwOjEsdHVybjowfX19O2UucHJvdG90eXBlLl9jYWNoZSQ9ZnVuY3Rpb24oZSxzLHQpe3ZhciB1PXRoaXM7cmV0dXJuIHkuemlwKHkub2YoZSkseS5vZih0KSkucGlwZShiLmV4cGFuZChmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3ZhciByPWVbMV07dmFyIG49W107aWYocj4wKXtmb3IodmFyIGk9MCxvPXQ7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07aWYoYS5kYXRhLmRpcmVjdGlvbj09PXMpe24ucHVzaCh5LnppcCh1Ll9uYXZpZ2F0b3IuZ3JhcGhTZXJ2aWNlLmNhY2hlTm9kZSQoYS50bykucGlwZShiLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1Ll9ub2RlVG9FZGdlcyQoZSxzKX0pKSx5Lm9mKHItMSkpKX19fXJldHVybiB5LmZyb20obikucGlwZShiLm1lcmdlQWxsKCkpfSksYi5za2lwKDEpKX07ZS5wcm90b3R5cGUuX25vZGVUb0VkZ2VzJD1mdW5jdGlvbihlLHQpe3JldHVybihbeC5FZGdlRGlyZWN0aW9uLk5leHQseC5FZGdlRGlyZWN0aW9uLlByZXZdLmluZGV4T2YodCk+LTE/ZS5zZXF1ZW5jZUVkZ2VzJDplLnNwYXRpYWxFZGdlcyQpLnBpcGUoYi5maXJzdChmdW5jdGlvbihlKXtyZXR1cm4gZS5jYWNoZWR9KSxiLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5lZGdlc30pKX07ZS5jb21wb25lbnROYW1lPVwiY2FjaGVcIjtyZXR1cm4gZX0obi5Db21wb25lbnQpO3IuQ2FjaGVDb21wb25lbnQ9bztuLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIobyk7ci5kZWZhdWx0PW99LHtcIi4uL0NvbXBvbmVudFwiOjI5MSxcIi4uL0VkZ2VcIjoyOTIscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzEwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Db21wb25lbnQ9dm9pZCAwO3ZhciBvPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgYT1lKFwicnhqc1wiKTt2YXIgaT1lKFwiLi4vVXRpbHNcIik7dmFyIHM9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzKXx8dGhpcztuLl9hY3RpdmF0ZWQkPW5ldyBhLkJlaGF2aW9yU3ViamVjdChmYWxzZSk7bi5fY29uZmlndXJhdGlvblN1YmplY3QkPW5ldyBhLlN1YmplY3Q7bi5fYWN0aXZhdGVkPWZhbHNlO24uX2NvbnRhaW5lcj10O24uX25hbWU9ZTtuLl9uYXZpZ2F0b3I9cjtuLl9jb25maWd1cmF0aW9uJD1uLl9jb25maWd1cmF0aW9uU3ViamVjdCQucGlwZShvLnN0YXJ0V2l0aChuLmRlZmF1bHRDb25maWd1cmF0aW9uKSxvLnNjYW4oZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl7aWYodC5oYXNPd25Qcm9wZXJ0eShyKSl7ZVtyXT10W3JdfX1yZXR1cm4gZX0pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO24uX2NvbmZpZ3VyYXRpb24kLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3JldHVybiBufU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFjdGl2YXRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZhdGVkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYWN0aXZhdGVkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZhdGVkJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRlZmF1bHRDb25maWd1cmF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXREZWZhdWx0Q29uZmlndXJhdGlvbigpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29uZmlndXJhdGlvbiRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb24kfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2YXRlZCl7cmV0dXJufWlmKGUhPT11bmRlZmluZWQpe3RoaXMuX2NvbmZpZ3VyYXRpb25TdWJqZWN0JC5uZXh0KGUpfXRoaXMuX2FjdGl2YXRlZD10cnVlO3RoaXMuX2FjdGl2YXRlKCk7dGhpcy5fYWN0aXZhdGVkJC5uZXh0KHRydWUpfTtlLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24oZSl7dGhpcy5fY29uZmlndXJhdGlvblN1YmplY3QkLm5leHQoZSl9O2UucHJvdG90eXBlLmRlYWN0aXZhdGU9ZnVuY3Rpb24oKXtpZighdGhpcy5fYWN0aXZhdGVkKXtyZXR1cm59dGhpcy5fYWN0aXZhdGVkPWZhbHNlO3RoaXMuX2RlYWN0aXZhdGUoKTt0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIuY2xlYXIodGhpcy5fbmFtZSk7dGhpcy5fY29udGFpbmVyLmdsUmVuZGVyZXIuY2xlYXIodGhpcy5fbmFtZSk7dGhpcy5fYWN0aXZhdGVkJC5uZXh0KGZhbHNlKX07ZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7cmV0dXJufTtlLmNvbXBvbmVudE5hbWU9XCJub3Rfd29ydGh5XCI7cmV0dXJuIGV9KGkuRXZlbnRFbWl0dGVyKTtyLkNvbXBvbmVudD1zO3IuZGVmYXVsdD1zfSx7XCIuLi9VdGlsc1wiOjMwMSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzMTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQ29tcG9uZW50U2VydmljZT12b2lkIDA7dmFyIG49ZShcIi4uL0Vycm9yXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaShlLHQpe3RoaXMuX2NvbXBvbmVudHM9e307Zm9yKHZhciByIGluIGkucmVnaXN0ZXJlZENvbXBvbmVudHMpe2lmKCFpLnJlZ2lzdGVyZWRDb21wb25lbnRzLmhhc093blByb3BlcnR5KHIpKXtjb250aW51ZX12YXIgbj1pLnJlZ2lzdGVyZWRDb21wb25lbnRzW3JdO3RoaXMuX2NvbXBvbmVudHNbcl09e2FjdGl2ZTpmYWxzZSxjb21wb25lbnQ6bmV3IG4ocixlLHQpfX10aGlzLl9jb3ZlckNvbXBvbmVudD1uZXcgaS5yZWdpc3RlcmVkQ292ZXJDb21wb25lbnQoXCJjb3ZlclwiLGUsdCk7dGhpcy5fY292ZXJDb21wb25lbnQuYWN0aXZhdGUoKTt0aGlzLl9jb3ZlckFjdGl2YXRlZD10cnVlfWkucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7aWYoaS5yZWdpc3RlcmVkQ29tcG9uZW50c1tlLmNvbXBvbmVudE5hbWVdPT09dW5kZWZpbmVkKXtpLnJlZ2lzdGVyZWRDb21wb25lbnRzW2UuY29tcG9uZW50TmFtZV09ZX19O2kucmVnaXN0ZXJDb3Zlcj1mdW5jdGlvbihlKXtpLnJlZ2lzdGVyZWRDb3ZlckNvbXBvbmVudD1lfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJjb3ZlckFjdGl2YXRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY292ZXJBY3RpdmF0ZWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtpLnByb3RvdHlwZS5hY3RpdmF0ZUNvdmVyPWZ1bmN0aW9uKCl7aWYodGhpcy5fY292ZXJBY3RpdmF0ZWQpe3JldHVybn10aGlzLl9jb3ZlckFjdGl2YXRlZD10cnVlO2Zvcih2YXIgZSBpbiB0aGlzLl9jb21wb25lbnRzKXtpZighdGhpcy5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShlKSl7Y29udGludWV9dmFyIHQ9dGhpcy5fY29tcG9uZW50c1tlXTtpZih0LmFjdGl2ZSl7dC5jb21wb25lbnQuZGVhY3RpdmF0ZSgpfX19O2kucHJvdG90eXBlLmRlYWN0aXZhdGVDb3Zlcj1mdW5jdGlvbigpe2lmKCF0aGlzLl9jb3ZlckFjdGl2YXRlZCl7cmV0dXJufXRoaXMuX2NvdmVyQWN0aXZhdGVkPWZhbHNlO2Zvcih2YXIgZSBpbiB0aGlzLl9jb21wb25lbnRzKXtpZighdGhpcy5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShlKSl7Y29udGludWV9dmFyIHQ9dGhpcy5fY29tcG9uZW50c1tlXTtpZih0LmFjdGl2ZSl7dC5jb21wb25lbnQuYWN0aXZhdGUoKX19fTtpLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLl9jaGVja05hbWUoZSk7dGhpcy5fY29tcG9uZW50c1tlXS5hY3RpdmU9dHJ1ZTtpZighdGhpcy5fY292ZXJBY3RpdmF0ZWQpe3RoaXMuZ2V0KGUpLmFjdGl2YXRlKCl9fTtpLnByb3RvdHlwZS5jb25maWd1cmU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jaGVja05hbWUoZSk7dGhpcy5nZXQoZSkuY29uZmlndXJlKHQpfTtpLnByb3RvdHlwZS5kZWFjdGl2YXRlPWZ1bmN0aW9uKGUpe3RoaXMuX2NoZWNrTmFtZShlKTt0aGlzLl9jb21wb25lbnRzW2VdLmFjdGl2ZT1mYWxzZTtpZighdGhpcy5fY292ZXJBY3RpdmF0ZWQpe3RoaXMuZ2V0KGUpLmRlYWN0aXZhdGUoKX19O2kucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c1tlXS5jb21wb25lbnR9O2kucHJvdG90eXBlLmdldENvdmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvdmVyQ29tcG9uZW50fTtpLnByb3RvdHlwZS5fY2hlY2tOYW1lPWZ1bmN0aW9uKGUpe2lmKCEoZSBpbiB0aGlzLl9jb21wb25lbnRzKSl7dGhyb3cgbmV3IG4uQXJndW1lbnRNYXBpbGxhcnlFcnJvcihcIkNvbXBvbmVudCBkb2VzIG5vdCBleGlzdDogXCIrZSl9fTtpLnJlZ2lzdGVyZWRDb21wb25lbnRzPXt9O3JldHVybiBpfSgpO3IuQ29tcG9uZW50U2VydmljZT1pO3IuZGVmYXVsdD1pfSx7XCIuLi9FcnJvclwiOjI5M31dLDMxMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQ292ZXJDb21wb25lbnQ9dm9pZCAwO3ZhciBvPWUoXCJyeGpzXCIpO3ZhciBzPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgdT1lKFwidmlydHVhbC1kb21cIik7dmFyIGM9ZShcIi4uL0NvbXBvbmVudFwiKTt2YXIgYT1lKFwiLi4vVXRpbHNcIik7dmFyIGw9ZShcIi4uL1ZpZXdlclwiKTt2YXIgbj1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQscil7cmV0dXJuIG4uY2FsbCh0aGlzLGUsdCxyKXx8dGhpc31lLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuX2NvbmZpZ3VyYXRpb24kLnBpcGUocy5kaXN0aW5jdFVudGlsQ2hhbmdlZCh1bmRlZmluZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGV9KSxzLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gby5jb21iaW5lTGF0ZXN0KG8ub2YoZS5zdGF0ZSksYS5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQpfSkscy5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07dmFyIG49by5jb21iaW5lTGF0ZXN0KG8ub2Yoci5rZXkpLHIuaW1hZ2UkLnBpcGUocy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlfSkscy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3JjfSkpKTtyZXR1cm4gdD09PWMuQ292ZXJTdGF0ZS5WaXNpYmxlP24ucGlwZShzLmZpcnN0KCkpOm59KSxzLmRpc3RpbmN0VW50aWxDaGFuZ2VkKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVswXSxuPWVbMV07dmFyIGk9dFswXSxvPXRbMV07cmV0dXJuIHI9PT1pJiZuPT09b30pLHMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVybntrZXk6dCxzcmM6cn19KSkuc3Vic2NyaWJlKHRoaXMuX2NvbmZpZ3VyYXRpb25TdWJqZWN0JCk7dGhpcy5fcmVuZGVyU3Vic2NyaXB0aW9uPW8uY29tYmluZUxhdGVzdCh0aGlzLl9jb25maWd1cmF0aW9uJCx0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5zaXplJCkucGlwZShzLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtpZighdC5rZXkpe3JldHVybntuYW1lOmEuX25hbWUsdm5vZGU6dS5oKFwiZGl2XCIsW10pfX12YXIgbj1yLndpZHRoPD02NDB8fHIuaGVpZ2h0PD00ODA/XCIuQ292ZXJDb21wYWN0XCI6XCJcIjtpZih0LnN0YXRlPT09Yy5Db3ZlclN0YXRlLkhpZGRlbil7dmFyIGk9dS5oKFwiZGl2LkNvdmVyQ29udGFpbmVyLkNvdmVyRG9uZVwiK24sW2EuX2dldENvdmVyQmFja2dyb3VuZFZOb2RlKHQpXSk7cmV0dXJue25hbWU6YS5fbmFtZSx2bm9kZTppfX12YXIgbz11LmgoXCJkaXYuQ292ZXJDb250YWluZXJcIituLFthLl9nZXRDb3ZlckJ1dHRvblZOb2RlKHQpXSk7cmV0dXJue25hbWU6YS5fbmFtZSx2bm9kZTpvfX0pKS5zdWJzY3JpYmUodGhpcy5fY29udGFpbmVyLmRvbVJlbmRlcmVyLnJlbmRlciQpfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX3JlbmRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2tleVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57c3RhdGU6Yy5Db3ZlclN0YXRlLlZpc2libGV9fTtlLnByb3RvdHlwZS5fZ2V0Q292ZXJCdXR0b25WTm9kZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZhciByPWUuc3RhdGU9PT1jLkNvdmVyU3RhdGUuTG9hZGluZz9cImRpdi5Db3Zlci5Db3ZlckxvYWRpbmdcIjpcImRpdi5Db3ZlclwiO3ZhciBuPXUuaChcImRpdi5Db3ZlckJ1dHRvblwiLFt1LmgoXCJkaXYuQ292ZXJCdXR0b25JY29uXCIsW10pXSk7dmFyIGk9dS5oKFwiYS5Db3ZlckxvZ29cIix7aHJlZjphLlVybHMuZXhwbG9yZSx0YXJnZXQ6XCJfYmxhbmtcIn0sW10pO3ZhciBvPXUuaChcImRpdi5Db3ZlckluZGljYXRvclwiLHtvbmNsaWNrOmZ1bmN0aW9uKCl7dC5jb25maWd1cmUoe3N0YXRlOmMuQ292ZXJTdGF0ZS5Mb2FkaW5nfSl9fSxbXSk7cmV0dXJuIHUuaChyLFt0aGlzLl9nZXRDb3ZlckJhY2tncm91bmRWTm9kZShlKSxvLG4saV0pfTtlLnByb3RvdHlwZS5fZ2V0Q292ZXJCYWNrZ3JvdW5kVk5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcmMhPW51bGw/ZS5zcmM6YS5VcmxzLnRodW1ibmFpbChlLmtleSxsLkltYWdlU2l6ZS5TaXplNjQwKTt2YXIgcj17c3R5bGU6e2JhY2tncm91bmRJbWFnZTpcInVybChcIit0K1wiKVwifX07dmFyIG49W107aWYoZS5zdGF0ZT09PWMuQ292ZXJTdGF0ZS5Mb2FkaW5nKXtuLnB1c2godS5oKFwiZGl2LlNwaW5uZXJcIix7fSxbXSkpfXJldHVybiB1LmgoXCJkaXYuQ292ZXJCYWNrZ3JvdW5kXCIscixuKX07ZS5jb21wb25lbnROYW1lPVwiY292ZXJcIjtyZXR1cm4gZX0oYy5Db21wb25lbnQpO3IuQ292ZXJDb21wb25lbnQ9bjtjLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXJDb3ZlcihuKTtyLmRlZmF1bHQ9bn0se1wiLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vVXRpbHNcIjozMDEsXCIuLi9WaWV3ZXJcIjozMDIscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLFwidmlydHVhbC1kb21cIjoyNDd9XSwzMTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkRlYnVnQ29tcG9uZW50PXZvaWQgMDt2YXIgbz1lKFwicnhqc1wiKTt2YXIgYT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIHU9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBpPWUoXCIuLi9Db21wb25lbnRcIik7dmFyIHM9ZnVuY3Rpb24odCl7bihlLHQpO2Z1bmN0aW9uIGUoKXt2YXIgZT10IT09bnVsbCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7ZS5fb3BlbiQ9bmV3IG8uQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtyZXR1cm4gZX1lLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgaT10aGlzO3RoaXMuX2Rpc3Bvc2FibGU9by5jb21iaW5lTGF0ZXN0KHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJCx0aGlzLl9vcGVuJCx0aGlzLl9uYXZpZ2F0b3IuaW1hZ2VMb2FkaW5nU2VydmljZS5sb2Fkc3RhdHVzJCkucGlwZShhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07cmV0dXJue25hbWU6aS5fbmFtZSx2bm9kZTppLl9nZXREZWJ1Z1ZOb2RlKHIsaS5fZ2V0RGVidWdJbmZvKHQsbikpfX0pKS5zdWJzY3JpYmUodGhpcy5fY29udGFpbmVyLmRvbVJlbmRlcmVyLnJlbmRlciQpfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2FibGUudW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue319O2UucHJvdG90eXBlLl9nZXREZWJ1Z0luZm89ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXTtyLnB1c2godS5oKFwiaDJcIixcIk5vZGVcIikpO2lmKGUuc3RhdGUuY3VycmVudE5vZGUpe3IucHVzaCh1LmgoXCJwXCIsXCJjdXJyZW50Tm9kZTogXCIrZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXkpKX1pZihlLnN0YXRlLnByZXZpb3VzTm9kZSl7ci5wdXNoKHUuaChcInBcIixcInByZXZpb3VzTm9kZTogXCIrZS5zdGF0ZS5wcmV2aW91c05vZGUua2V5KSl9ci5wdXNoKHUuaChcImgyXCIsXCJMb2FkaW5nXCIpKTt2YXIgbj0wO3ZhciBpPTA7dmFyIG89MDtmb3IodmFyIGEgaW4gdCl7aWYoIXQuaGFzT3duUHJvcGVydHkoYSkpe2NvbnRpbnVlfXZhciBzPXRbYV07bis9cy5sb2FkZWQ7aWYocy5sb2FkZWQhPT1zLnRvdGFsKXtvKyt9ZWxzZXtpKyt9fXIucHVzaCh1LmgoXCJwXCIsXCJMb2FkZWQgSW1hZ2VzOiBcIitpKSk7ci5wdXNoKHUuaChcInBcIixcIkxvYWRpbmcgSW1hZ2VzOiBcIitvKSk7ci5wdXNoKHUuaChcInBcIixcIlRvdGFsIGJ5dGVzIGxvYWRlZDogXCIrbikpO3IucHVzaCh1LmgoXCJoMlwiLFwiQ2FtZXJhXCIpKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLnBvc2l0aW9uLng6IFwiK2Uuc3RhdGUuY2FtZXJhLnBvc2l0aW9uLngpKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLnBvc2l0aW9uLnk6IFwiK2Uuc3RhdGUuY2FtZXJhLnBvc2l0aW9uLnkpKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLnBvc2l0aW9uLno6IFwiK2Uuc3RhdGUuY2FtZXJhLnBvc2l0aW9uLnopKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLmxvb2thdC54OiBcIitlLnN0YXRlLmNhbWVyYS5sb29rYXQueCkpO3IucHVzaCh1LmgoXCJwXCIsXCJjYW1lcmEubG9va2F0Lnk6IFwiK2Uuc3RhdGUuY2FtZXJhLmxvb2thdC55KSk7ci5wdXNoKHUuaChcInBcIixcImNhbWVyYS5sb29rYXQuejogXCIrZS5zdGF0ZS5jYW1lcmEubG9va2F0LnopKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLnVwLng6IFwiK2Uuc3RhdGUuY2FtZXJhLnVwLngpKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLnVwLnk6IFwiK2Uuc3RhdGUuY2FtZXJhLnVwLnkpKTtyLnB1c2godS5oKFwicFwiLFwiY2FtZXJhLnVwLno6IFwiK2Uuc3RhdGUuY2FtZXJhLnVwLnopKTtyZXR1cm4gcn07ZS5wcm90b3R5cGUuX2dldERlYnVnVk5vZGU9ZnVuY3Rpb24oZSx0KXtpZihlKXtyZXR1cm4gdS5oKFwiZGl2LkRlYnVnXCIse30sW3UuaChcImgyXCIse30sW1wiRGVidWdcIl0pLHRoaXMuX2dldERlYnVnVk5vZGVCdXR0b24oZSksdS5oKFwicHJlXCIse30sdCldKX1lbHNle3JldHVybiB0aGlzLl9nZXREZWJ1Z1ZOb2RlQnV0dG9uKGUpfX07ZS5wcm90b3R5cGUuX2dldERlYnVnVk5vZGVCdXR0b249ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9cIkRpc2FibGUgRGVidWdcIjpcIkRcIjt2YXIgcj1lP1wiXCI6XCIuRGVidWdCdXR0b25GaXhlZFwiO2lmKGUpe3JldHVybiB1LmgoXCJidXR0b24uRGVidWdCdXR0b25cIityLHtvbmNsaWNrOnRoaXMuX2Nsb3NlRGVidWdFbGVtZW50LmJpbmQodGhpcyl9LFt0XSl9ZWxzZXtyZXR1cm4gdS5oKFwiYnV0dG9uLkRlYnVnQnV0dG9uXCIrcix7b25jbGljazp0aGlzLl9vcGVuRGVidWdFbGVtZW50LmJpbmQodGhpcyl9LFt0XSl9fTtlLnByb3RvdHlwZS5fY2xvc2VEZWJ1Z0VsZW1lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5fb3BlbiQubmV4dChmYWxzZSl9O2UucHJvdG90eXBlLl9vcGVuRGVidWdFbGVtZW50PWZ1bmN0aW9uKCl7dGhpcy5fb3BlbiQubmV4dCh0cnVlKX07ZS5jb21wb25lbnROYW1lPVwiZGVidWdcIjtyZXR1cm4gZX0oaS5Db21wb25lbnQpO3IuRGVidWdDb21wb25lbnQ9cztpLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIocyk7ci5kZWZhdWx0PXN9LHtcIi4uL0NvbXBvbmVudFwiOjI5MSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsXCJ2aXJ0dWFsLWRvbVwiOjI0N31dLDMxNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuSW1hZ2VDb21wb25lbnQ9dm9pZCAwO3ZhciBpPWUoXCJyeGpzXCIpO3ZhciBhPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgcz1lKFwidmlydHVhbC1kb21cIik7dmFyIG89ZShcIi4uL0NvbXBvbmVudFwiKTt2YXIgdT1lKFwiLi4vVXRpbHNcIik7dmFyIGM9ZnVuY3Rpb24obyl7bihlLG8pO2Z1bmN0aW9uIGUoZSx0LHIsbil7dmFyIGk9by5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO2kuX2NhbnZhc0lkPXQuaWQrXCItXCIraS5fbmFtZTtpLl9kb209ISFuP246bmV3IHUuRE9NO3JldHVybiBpfWUucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dmFyIGU9dGhpcy5fY29udGFpbmVyLmRvbVJlbmRlcmVyLmVsZW1lbnQkLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2RvbS5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0Ll9jYW52YXNJZCl9KSxhLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSxhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudEVsZW1lbnQ7dmFyIHI9dC5vZmZzZXRXaWR0aDt2YXIgbj10Lm9mZnNldEhlaWdodDtyZXR1cm5bZSx7aGVpZ2h0Om4sd2lkdGg6cn1dfSksYS5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3JldHVybiBlLmhlaWdodD09PXQuaGVpZ2h0JiZlLndpZHRoPT09dC53aWR0aH0sZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIHJ9KSk7dGhpcy5kcmF3U3Vic2NyaXB0aW9uPWkuY29tYmluZUxhdGVzdChlLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXTtyLndpZHRoPW4ud2lkdGg7ci5oZWlnaHQ9bi5oZWlnaHQ7ci5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGkuaW1hZ2UsMCwwLG4ud2lkdGgsbi5oZWlnaHQpfSk7dGhpcy5fY29udGFpbmVyLmRvbVJlbmRlcmVyLnJlbmRlckFkYXB0aXZlJC5uZXh0KHtuYW1lOnRoaXMuX25hbWUsdm5vZGU6cy5oKFwiY2FudmFzI1wiK3RoaXMuX2NhbnZhc0lkLFtdKX0pfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuZHJhd1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57fX07ZS5jb21wb25lbnROYW1lPVwiaW1hZ2VcIjtyZXR1cm4gZX0oby5Db21wb25lbnQpO3IuSW1hZ2VDb21wb25lbnQ9YztvLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIoYyk7ci5kZWZhdWx0PWN9LHtcIi4uL0NvbXBvbmVudFwiOjI5MSxcIi4uL1V0aWxzXCI6MzAxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSxcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzE1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Mb2FkaW5nQ29tcG9uZW50PXZvaWQgMDt2YXIgbz1lKFwicnhqc1wiKTt2YXIgcz1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGE9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBuPWUoXCIuLi9Db21wb25lbnRcIik7dmFyIHU9ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0LHIpe3JldHVybiBuLmNhbGwodGhpcyxlLHQscil8fHRoaXN9ZS5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLl9sb2FkaW5nU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5sb2FkaW5nU2VydmljZS5sb2FkaW5nJC5waXBlKHMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlP2EuX25hdmlnYXRvci5pbWFnZUxvYWRpbmdTZXJ2aWNlLmxvYWRzdGF0dXMkOm8ub2Yoe30pfSkscy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9MDt2YXIgcj0wO2Zvcih2YXIgbiBpbiBlKXtpZighZS5oYXNPd25Qcm9wZXJ0eShuKSl7Y29udGludWV9dmFyIGk9ZVtuXTtpZihpLmxvYWRlZCE9PWkudG90YWwpe3IrPWkubG9hZGVkO3QrPWkudG90YWx9fXZhciBvPTEwMDtpZih0IT09MCl7bz1yL3QqMTAwfXJldHVybntuYW1lOmEuX25hbWUsdm5vZGU6YS5fZ2V0QmFyVk5vZGUobyl9fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJCl9O2UucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fbG9hZGluZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57fX07ZS5wcm90b3R5cGUuX2dldEJhclZOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3ZhciByPXt9O2lmKGUhPT0xMDApe3Qud2lkdGg9ZS50b0ZpeGVkKDApK1wiJVwiO3Qub3BhY2l0eT1cIjFcIn1lbHNle3Qud2lkdGg9XCIxMDAlXCI7dC5vcGFjaXR5PVwiMFwifXJldHVybiBhLmgoXCJkaXYuTG9hZGluZ1wiLHtzdHlsZTpyfSxbYS5oKFwiZGl2LkxvYWRpbmdCYXJcIix7c3R5bGU6dH0sW10pXSl9O2UuY29tcG9uZW50TmFtZT1cImxvYWRpbmdcIjtyZXR1cm4gZX0obi5Db21wb25lbnQpO3IuTG9hZGluZ0NvbXBvbmVudD11O24uQ29tcG9uZW50U2VydmljZS5yZWdpc3Rlcih1KTtyLmRlZmF1bHQ9dX0se1wiLi4vQ29tcG9uZW50XCI6MjkxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSxcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzE2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5OYXZpZ2F0aW9uQ29tcG9uZW50PXZvaWQgMDt2YXIgbz1lKFwicnhqc1wiKTt2YXIgYT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGM9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBzPWUoXCIuLi9FZGdlXCIpO3ZhciB1PWUoXCIuLi9FcnJvclwiKTt2YXIgaT1lKFwiLi4vQ29tcG9uZW50XCIpO3ZhciBsPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlLHQscil8fHRoaXM7bi5fc2VxTmFtZXM9e307bi5fc2VxTmFtZXNbcy5FZGdlRGlyZWN0aW9uW3MuRWRnZURpcmVjdGlvbi5QcmV2XV09XCJQcmV2XCI7bi5fc2VxTmFtZXNbcy5FZGdlRGlyZWN0aW9uW3MuRWRnZURpcmVjdGlvbi5OZXh0XV09XCJOZXh0XCI7bi5fc3BhVG9wTmFtZXM9e307bi5fc3BhVG9wTmFtZXNbcy5FZGdlRGlyZWN0aW9uW3MuRWRnZURpcmVjdGlvbi5UdXJuTGVmdF1dPVwiVHVybmxlZnRcIjtuLl9zcGFUb3BOYW1lc1tzLkVkZ2VEaXJlY3Rpb25bcy5FZGdlRGlyZWN0aW9uLlN0ZXBMZWZ0XV09XCJMZWZ0XCI7bi5fc3BhVG9wTmFtZXNbcy5FZGdlRGlyZWN0aW9uW3MuRWRnZURpcmVjdGlvbi5TdGVwRm9yd2FyZF1dPVwiRm9yd2FyZFwiO24uX3NwYVRvcE5hbWVzW3MuRWRnZURpcmVjdGlvbltzLkVkZ2VEaXJlY3Rpb24uU3RlcFJpZ2h0XV09XCJSaWdodFwiO24uX3NwYVRvcE5hbWVzW3MuRWRnZURpcmVjdGlvbltzLkVkZ2VEaXJlY3Rpb24uVHVyblJpZ2h0XV09XCJUdXJucmlnaHRcIjtuLl9zcGFCb3R0b21OYW1lcz17fTtuLl9zcGFCb3R0b21OYW1lc1tzLkVkZ2VEaXJlY3Rpb25bcy5FZGdlRGlyZWN0aW9uLlR1cm5VXV09XCJUdXJuYXJvdW5kXCI7bi5fc3BhQm90dG9tTmFtZXNbcy5FZGdlRGlyZWN0aW9uW3MuRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmRdXT1cIkJhY2t3YXJkXCI7cmV0dXJuIG59ZS5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIHU9dGhpczt0aGlzLl9yZW5kZXJTdWJzY3JpcHRpb249by5jb21iaW5lTGF0ZXN0KHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLHRoaXMuX2NvbmZpZ3VyYXRpb24kKS5waXBlKGEuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPXIuc2VxdWVuY2U/dC5zZXF1ZW5jZUVkZ2VzJC5waXBlKGEubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmVkZ2VzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5kYXRhLmRpcmVjdGlvbn0pfSkpOm8ub2YoW10pO3ZhciBpPSF0LnBhbm8mJnIuc3BhdGlhbD90LnNwYXRpYWxFZGdlcyQucGlwZShhLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5lZGdlcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGF0YS5kaXJlY3Rpb259KX0pKTpvLm9mKFtdKTtyZXR1cm4gby5jb21iaW5lTGF0ZXN0KG4saSkucGlwZShhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gdC5jb25jYXQocil9KSl9KSxhLm1hcChmdW5jdGlvbihlKXt2YXIgdD11Ll9jcmVhdGVBcnJvd1Jvdyh1Ll9zZXFOYW1lcyxlKTt2YXIgcj11Ll9jcmVhdGVBcnJvd1Jvdyh1Ll9zcGFUb3BOYW1lcyxlKTt2YXIgbj11Ll9jcmVhdGVBcnJvd1Jvdyh1Ll9zcGFCb3R0b21OYW1lcyxlKTt2YXIgaT1jLmgoXCJkaXYuTmF2aWdhdGlvblNlcXVlbmNlXCIsdCk7dmFyIG89Yy5oKFwiZGl2Lk5hdmlnYXRpb25TcGF0aWFsVG9wXCIscik7dmFyIGE9Yy5oKFwiZGl2Lk5hdmlnYXRpb25TcGF0aWFsQm90dG9tXCIsbik7dmFyIHM9Yy5oKFwiZGl2Lk5hdmlnYXRpb25TcGF0aWFsXCIsW28sYV0pO3JldHVybntuYW1lOnUuX25hbWUsdm5vZGU6Yy5oKFwiZGl2Lk5hdmlnYXRpb25Db250YWluZXJcIixbaSxzXSl9fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJCl9O2UucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9nZXREZWZhdWx0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybntzZXF1ZW5jZTp0cnVlLHNwYXRpYWw6dHJ1ZX19O2UucHJvdG90eXBlLl9jcmVhdGVBcnJvd1Jvdz1mdW5jdGlvbihlLHQpe3ZhciByPVtdO2Zvcih2YXIgbiBpbiBlKXtpZighZS5oYXNPd25Qcm9wZXJ0eShuKSl7Y29udGludWV9dmFyIGk9cy5FZGdlRGlyZWN0aW9uW25dO2lmKHQuaW5kZXhPZihpKSE9PS0xKXtyLnB1c2godGhpcy5fY3JlYXRlVk5vZGUoaSxlW25dLFwidmlzaWJsZVwiKSl9ZWxzZXtyLnB1c2godGhpcy5fY3JlYXRlVk5vZGUoaSxlW25dLFwiaGlkZGVuXCIpKX19cmV0dXJuIHJ9O2UucHJvdG90eXBlLl9jcmVhdGVWTm9kZT1mdW5jdGlvbih0LGUscil7dmFyIG49dGhpcztyZXR1cm4gYy5oKFwic3Bhbi5EaXJlY3Rpb24uRGlyZWN0aW9uXCIrZSx7b25jbGljazpmdW5jdGlvbihlKXtuLl9uYXZpZ2F0b3IubW92ZURpciQodCkuc3Vic2NyaWJlKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtpZighKGUgaW5zdGFuY2VvZiB1LkFib3J0TWFwaWxsYXJ5RXJyb3IpKXtjb25zb2xlLmVycm9yKGUpfX0pfSxzdHlsZTp7dmlzaWJpbGl0eTpyfX0sW10pfTtlLmNvbXBvbmVudE5hbWU9XCJuYXZpZ2F0aW9uXCI7cmV0dXJuIGV9KGkuQ29tcG9uZW50KTtyLk5hdmlnYXRpb25Db21wb25lbnQ9bDtpLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIobCk7ci5kZWZhdWx0PWx9LHtcIi4uL0NvbXBvbmVudFwiOjI5MSxcIi4uL0VkZ2VcIjoyOTIsXCIuLi9FcnJvclwiOjI5MyxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsXCJ2aXJ0dWFsLWRvbVwiOjI0N31dLDMxNzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuUm91dGVDb21wb25lbnQ9dm9pZCAwO3ZhciBzPWUoXCJyeGpzXCIpO3ZhciBvPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgdT1lKFwidmlydHVhbC1kb21cIik7dmFyIG49ZShcIi4uL0NvbXBvbmVudFwiKTt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubm9kZUluc3RydWN0aW9ucz1bXTt0aGlzLm5vZGVJbnN0cnVjdGlvbnNPcmRlcmVkPVtdfXJldHVybiBlfSgpO3ZhciBhPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUsdCxyKXtyZXR1cm4gbi5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzfWUucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyZSh7cGxheWluZzp0cnVlfSl9O2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyZSh7cGxheWluZzpmYWxzZX0pfTtlLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3ZhciBlPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKG8uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkJTI9PT0wfSksby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUubm9kZXNBaGVhZDwxNX0pLG8uZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmxhc3ROb2RlLmtleX0pKTt2YXIgdD1zLmNvbWJpbmVMYXRlc3QodGhpcy5jb25maWd1cmF0aW9uJC5waXBlKG8ubWVyZ2VNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHMuZnJvbShlLnBhdGhzKX0pLG8uZGlzdGluY3QoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VxdWVuY2VLZXl9KSxvLm1lcmdlTWFwKGZ1bmN0aW9uKHQpe3JldHVybiBhLl9uYXZpZ2F0b3IuYXBpVjMuc2VxdWVuY2VCeUtleSQoW3Quc2VxdWVuY2VLZXldKS5waXBlKG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlW3Quc2VxdWVuY2VLZXldfSkpfSkpLHRoaXMuY29uZmlndXJhdGlvbiQpLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07dmFyIG49MDt2YXIgaT1bXTtmb3IodmFyIG89MCxhPXIucGF0aHM7bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107aWYocy5zZXF1ZW5jZUtleT09PXQua2V5KXt2YXIgdT1bXTt2YXIgYz1mYWxzZTtmb3IodmFyIGw9MCxoPXQua2V5cztsPGgubGVuZ3RoO2wrKyl7dmFyIHA9aFtsXTtpZihzLnN0YXJ0S2V5PT09cCl7Yz10cnVlfWlmKGMpe3ZhciBmPW51bGw7Zm9yKHZhciBkPTAsdj1zLmluZm9LZXlzO2Q8di5sZW5ndGg7ZCsrKXt2YXIgbT12W2RdO2lmKG0ua2V5PT09cCl7Zj1tLmRlc2NyaXB0aW9ufX11LnB1c2goe2Rlc2NyaXB0aW9uOmYsa2V5OnB9KX1pZihzLnN0b3BLZXk9PT1wKXtjPWZhbHNlfX1pLnB1c2goe25vZGVJbnN0cnVjdGlvbnM6dSxwbGFjZTpufSl9bisrfXJldHVybiBpfSksby5zY2FuKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsbj10O3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2Uubm9kZUluc3RydWN0aW9uc09yZGVyZWRbaS5wbGFjZV09aS5ub2RlSW5zdHJ1Y3Rpb25zfWZvcih2YXIgbyBpbiBlLm5vZGVJbnN0cnVjdGlvbnNPcmRlcmVkKXtpZighZS5ub2RlSW5zdHJ1Y3Rpb25zT3JkZXJlZC5oYXNPd25Qcm9wZXJ0eShvKSl7Y29udGludWV9dmFyIGE9ZS5ub2RlSW5zdHJ1Y3Rpb25zT3JkZXJlZFtvXTtmb3IodmFyIHM9MCx1PWE7czx1Lmxlbmd0aDtzKyspe3ZhciBjPXVbc107ZS5ub2RlSW5zdHJ1Y3Rpb25zLnB1c2goYyl9fXJldHVybiBlfSxuZXcgaCkpO3ZhciByPXMuY29tYmluZUxhdGVzdChlLHQsdGhpcy5jb25maWd1cmF0aW9uJCkucGlwZShvLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07cmV0dXJue2NvbmY6bixmcmFtZTp0LHJvdXRlVHJhY2s6cn19KSxvLnNjYW4oZnVuY3Rpb24oZSx0KXtpZih0LmNvbmYucGxheWluZz09PXVuZGVmaW5lZHx8dC5jb25mLnBsYXlpbmcpe2Uucm91dGVUcmFjaz10LnJvdXRlVHJhY2s7ZS5jdXJyZW50Tm9kZT10LmZyYW1lLnN0YXRlLmN1cnJlbnROb2RlO2UubGFzdE5vZGU9dC5mcmFtZS5zdGF0ZS5sYXN0Tm9kZTtlLnBsYXlpbmc9dHJ1ZX1lbHNle2EuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3V0Tm9kZXMoKTtlLnBsYXlpbmc9ZmFsc2V9cmV0dXJuIGV9LG5ldyBsKSxvLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5wbGF5aW5nfSksby5maWx0ZXIoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj1lLnJvdXRlVHJhY2subm9kZUluc3RydWN0aW9uczt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTtpZighbil7Y29udGludWV9aWYobi5rZXk9PT1lLmxhc3ROb2RlLmtleSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX0pLG8uZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLmxhc3ROb2RlLmtleX0pLG8ubWVyZ2VNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9MDtmb3IodmFyIHI9MCxuPWUucm91dGVUcmFjay5ub2RlSW5zdHJ1Y3Rpb25zO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKGkua2V5PT09ZS5sYXN0Tm9kZS5rZXkpe2JyZWFrfXQrK312YXIgbz1lLnJvdXRlVHJhY2subm9kZUluc3RydWN0aW9uc1t0KzFdO2lmKCFvKXtyZXR1cm4gcy5vZihudWxsKX1yZXR1cm4gYS5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5jYWNoZU5vZGUkKG8ua2V5KX0pKTt0aGlzLl9kaXNwb3NhYmxlPXMuY29tYmluZUxhdGVzdChyLHRoaXMuY29uZmlndXJhdGlvbiQpLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJue2NvbmY6cixub2RlOnR9fSksby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZSE9PW51bGwmJmUuY29uZi5wbGF5aW5nfSksby5wbHVjayhcIm5vZGVcIikpLnN1YnNjcmliZSh0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmFwcGVuZE5vZGUkKTt0aGlzLl9kaXNwb3NhYmxlRGVzY3JpcHRpb249cy5jb21iaW5lTGF0ZXN0KHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLHQsdGhpcy5jb25maWd1cmF0aW9uJCkucGlwZShvLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07aWYobi5wbGF5aW5nIT09dW5kZWZpbmVkJiYhbi5wbGF5aW5nKXtyZXR1cm5cInF1aXRcIn12YXIgaT1udWxsO2Zvcih2YXIgbz0wLGE9ci5ub2RlSW5zdHJ1Y3Rpb25zO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO2lmKHMua2V5PT09dC5rZXkpe2k9cy5kZXNjcmlwdGlvbjticmVha319cmV0dXJuIGl9KSxvLnNjYW4oZnVuY3Rpb24oZSx0KXtpZih0IT09ZS5kZXNjcmlwdGlvbiYmdCE9PW51bGwpe2UuZGVzY3JpcHRpb249dDtlLnNob3dzTGVmdD02fWVsc2V7ZS5zaG93c0xlZnQtLX1pZih0PT09XCJxdWl0XCIpe2UuZGVzY3JpcHRpb249bnVsbH1yZXR1cm4gZX0sbmV3IGMpLG8ubWFwKGZ1bmN0aW9uKGUpe2lmKGUuc2hvd3NMZWZ0PjAmJmUuZGVzY3JpcHRpb24pe3JldHVybntuYW1lOmEuX25hbWUsdm5vZGU6YS5fZ2V0Um91dGVBbm5vdGF0aW9uTm9kZShlLmRlc2NyaXB0aW9uKX19ZWxzZXtyZXR1cm57bmFtZTphLl9uYW1lLHZub2RlOnUuaChcImRpdlwiLFtdKX19fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJCl9O2UucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zYWJsZS51bnN1YnNjcmliZSgpO3RoaXMuX2Rpc3Bvc2FibGVEZXNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57fX07ZS5wcm90b3R5cGUuX2dldFJvdXRlQW5ub3RhdGlvbk5vZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHUuaChcImRpdi5Sb3V0ZUZyYW1lXCIse30sW3UuaChcInBcIix7dGV4dENvbnRlbnQ6ZX0sW10pXSl9O2UuY29tcG9uZW50TmFtZT1cInJvdXRlXCI7cmV0dXJuIGV9KG4uQ29tcG9uZW50KTtyLlJvdXRlQ29tcG9uZW50PWE7bi5Db21wb25lbnRTZXJ2aWNlLnJlZ2lzdGVyKGEpO3IuZGVmYXVsdD1hfSx7XCIuLi9Db21wb25lbnRcIjoyOTEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLFwidmlydHVhbC1kb21cIjoyNDd9XSwzMTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlN0YXRzQ29tcG9uZW50PXZvaWQgMDt2YXIgaT1lKFwicnhqc1wiKTt2YXIgYT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcIi4uL0NvbXBvbmVudFwiKTt2YXIgcz1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHQscil8fHRoaXM7aS5fc2NoZWR1bGVyPW47cmV0dXJuIGl9ZS5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9zZXF1ZW5jZVN1YnNjcmlwdGlvbj10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJC5waXBlKGEuc2NhbihmdW5jdGlvbihlLHQpe3ZhciByPXQuc2VxdWVuY2VLZXk7ZS5yZXBvcnQ9W107aWYoIShyIGluIGUucmVwb3J0ZWQpKXtlLnJlcG9ydD1bcl07ZS5yZXBvcnRlZFtyXT10cnVlfXJldHVybiBlfSx7cmVwb3J0OltdLHJlcG9ydGVkOnt9fSksYS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwb3J0Lmxlbmd0aD4wfSksYS5tZXJnZU1hcChmdW5jdGlvbihyKXtyZXR1cm4gZS5fbmF2aWdhdG9yLmFwaVYzLnNlcXVlbmNlVmlld0FkZCQoci5yZXBvcnQpLnBpcGUoYS5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byByZXBvcnQgc2VxdWVuY2Ugc3RhdHMgKFwiK3IucmVwb3J0K1wiKVwiLGUpO3JldHVybiBpLmVtcHR5KCl9KSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5faW1hZ2VTdWJzY3JpcHRpb249dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQucGlwZShhLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXl9KSkucGlwZShhLmJ1ZmZlcih0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJC5waXBlKGEuZGVib3VuY2VUaW1lKDVlMyx0aGlzLl9zY2hlZHVsZXIpKSksYS5zY2FuKGZ1bmN0aW9uKGUsdCl7ZS5yZXBvcnQ9W107Zm9yKHZhciByPTAsbj10O3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKCEoaSBpbiBlLnJlcG9ydGVkKSl7ZS5yZXBvcnQucHVzaChpKTtlLnJlcG9ydGVkW2ldPXRydWV9fXJldHVybiBlfSx7cmVwb3J0OltdLHJlcG9ydGVkOnt9fSksYS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwb3J0Lmxlbmd0aD4wfSksYS5tZXJnZU1hcChmdW5jdGlvbihyKXtyZXR1cm4gZS5fbmF2aWdhdG9yLmFwaVYzLmltYWdlVmlld0FkZCQoci5yZXBvcnQpLnBpcGUoYS5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byByZXBvcnQgaW1hZ2Ugc3RhdHMgKFwiK3IucmVwb3J0K1wiKVwiLGUpO3JldHVybiBpLmVtcHR5KCl9KSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSl9O2UucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fc2VxdWVuY2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9pbWFnZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57fX07ZS5jb21wb25lbnROYW1lPVwic3RhdHNcIjtyZXR1cm4gZX0oby5Db21wb25lbnQpO3IuU3RhdHNDb21wb25lbnQ9cztvLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIocyk7ci5kZWZhdWx0PXN9LHtcIi4uL0NvbXBvbmVudFwiOjI5MSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzMTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkRpcmVjdGlvbkNvbXBvbmVudD12b2lkIDA7dmFyIGk9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBhPWUoXCJyeGpzXCIpO3ZhciBzPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgdT1lKFwiLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBvPWZ1bmN0aW9uKG8pe24odCxvKTtmdW5jdGlvbiB0KGUsdCxyLG4pe3ZhciBpPW8uY2FsbCh0aGlzLGUsdCxyKXx8dGhpcztpLl9yZW5kZXJlcj0hIW4/bjpuZXcgdS5EaXJlY3Rpb25ET01SZW5kZXJlcihpLmRlZmF1bHRDb25maWd1cmF0aW9uLHtoZWlnaHQ6dC5lbGVtZW50Lm9mZnNldEhlaWdodCx3aWR0aDp0LmVsZW1lbnQub2Zmc2V0V2lkdGh9KTtpLl9ob3ZlcmVkS2V5U3ViamVjdCQ9bmV3IGEuU3ViamVjdDtpLl9ob3ZlcmVkS2V5JD1pLl9ob3ZlcmVkS2V5U3ViamVjdCQucGlwZShzLnNoYXJlKCkpO3JldHVybiBpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImhvdmVyZWRLZXkkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3ZlcmVkS2V5JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3QucHJvdG90eXBlLnNldEhpZ2hsaWdodEtleT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZ3VyZSh7aGlnaGxpZ2h0S2V5OmV9KX07dC5wcm90b3R5cGUuc2V0TWluV2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe21pbldpZHRoOmV9KX07dC5wcm90b3R5cGUuc2V0TWF4V2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe21heFdpZHRoOmV9KX07dC5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLl9jb25maWd1cmF0aW9uU3Vic2NyaXB0aW9uPXRoaXMuX2NvbmZpZ3VyYXRpb24kLnN1YnNjcmliZShmdW5jdGlvbihlKXtuLl9yZW5kZXJlci5zZXRDb25maWd1cmF0aW9uKGUpfSk7dGhpcy5fcmVzaXplU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkLnN1YnNjcmliZShmdW5jdGlvbihlKXtuLl9yZW5kZXJlci5yZXNpemUoZSl9KTt0aGlzLl9ub2RlU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUocy50YXAoZnVuY3Rpb24oZSl7bi5fY29udGFpbmVyLmRvbVJlbmRlcmVyLnJlbmRlciQubmV4dCh7bmFtZTpuLl9uYW1lLHZub2RlOmkuaChcImRpdlwiLHt9LFtdKX0pO24uX3JlbmRlcmVyLnNldE5vZGUoZSl9KSxzLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbmZpZ3VyYXRpb24kKSxzLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgcj1lWzBdLHQ9ZVsxXTtyZXR1cm4gYS5jb21iaW5lTGF0ZXN0KHIuc3BhdGlhbEVkZ2VzJCx0LmRpc3Rpbmd1aXNoU2VxdWVuY2U/bi5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5jYWNoZVNlcXVlbmNlJChyLnNlcXVlbmNlS2V5KS5waXBlKHMuY2F0Y2hFcnJvcihmdW5jdGlvbihlLHQpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2FjaGUgc2VxdWVuY2UgKFwiK3Iuc2VxdWVuY2VLZXkrXCIpXCIsZSk7cmV0dXJuIGEub2YobnVsbCl9KSk6YS5vZihudWxsKSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO24uX3JlbmRlcmVyLnNldEVkZ2VzKHQscil9KTt0aGlzLl9yZW5kZXJDYW1lcmFTdWJzY3JpcHRpb249dGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhRnJhbWUkLnBpcGUocy50YXAoZnVuY3Rpb24oZSl7bi5fcmVuZGVyZXIuc2V0UmVuZGVyQ2FtZXJhKGUpfSkscy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5fcmVuZGVyZXJ9KSxzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5uZWVkc1JlbmRlcn0pLHMubWFwKGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOm4uX25hbWUsdm5vZGU6ZS5yZW5kZXIobi5fbmF2aWdhdG9yKX19KSkuc3Vic2NyaWJlKHRoaXMuX2NvbnRhaW5lci5kb21SZW5kZXJlci5yZW5kZXIkKTt0aGlzLl9ob3ZlcmVkS2V5U3Vic2NyaXB0aW9uPWEuY29tYmluZUxhdGVzdCh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIuZWxlbWVudCQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLm1vdXNlTW92ZSQucGlwZShzLnN0YXJ0V2l0aChudWxsKSksdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZVVwJC5waXBlKHMuc3RhcnRXaXRoKG51bGwpKSkucGlwZShzLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3ZhciByPXQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIkRpcmVjdGlvbnNQZXJzcGVjdGl2ZVwiKTtmb3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyl7dmFyIGk9ci5pdGVtKG4pLnF1ZXJ5U2VsZWN0b3IoXCI6aG92ZXJcIik7aWYoaSE9bnVsbCYmaS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKSl7cmV0dXJuIGkuZ2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIil9fXJldHVybiBudWxsfSkscy5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUodGhpcy5faG92ZXJlZEtleVN1YmplY3QkKTt0aGlzLl9lbWl0SG92ZXJlZEtleVN1YnNjcmlwdGlvbj10aGlzLl9ob3ZlcmVkS2V5JC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7bi5maXJlKHQuaG92ZXJlZGtleWNoYW5nZWQsZSl9KX07dC5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9jb25maWd1cmF0aW9uU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZW1pdEhvdmVyZWRLZXlTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9ob3ZlcmVkS2V5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fbm9kZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3JlbmRlckNhbWVyYVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTt0LnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57ZGlzdGluZ3Vpc2hTZXF1ZW5jZTpmYWxzZSxtYXhXaWR0aDo0NjAsbWluV2lkdGg6MjYwfX07dC5jb21wb25lbnROYW1lPVwiZGlyZWN0aW9uXCI7dC5ob3ZlcmVka2V5Y2hhbmdlZD1cImhvdmVyZWRrZXljaGFuZ2VkXCI7cmV0dXJuIHR9KHUuQ29tcG9uZW50KTtyLkRpcmVjdGlvbkNvbXBvbmVudD1vO3UuQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihvKTtyLmRlZmF1bHQ9b30se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSxcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzIwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkRpcmVjdGlvbkRPTUNhbGN1bGF0b3I9dm9pZCAwO3ZhciBuPWUoXCIuLi8uLi9HZW9cIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fc3BhdGlhbD1uZXcgbi5TcGF0aWFsO3RoaXMuX21pblRocmVzaG9sZFdpZHRoPTMyMDt0aGlzLl9tYXhUaHJlc2hvbGRXaWR0aD0xNDgwO3RoaXMuX21pblRocmVzaG9sZEhlaWdodD0yNDA7dGhpcy5fbWF4VGhyZXNob2xkSGVpZ2h0PTgyMDt0aGlzLl9jb25maWd1cmUoZSk7dGhpcy5fcmVzaXplKHQpO3RoaXMuX3Jlc2V0KCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWluV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbldpZHRofSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWF4V2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heFdpZHRofSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGFpbmVyV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcldpZHRofSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGFpbmVyV2lkdGhDc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcldpZHRoQ3NzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGFpbmVyTWFyZ2luQ3NzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJNYXJnaW5Dc3N9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb250YWluZXJMZWZ0Q3NzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJMZWZ0Q3NzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGFpbmVySGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJIZWlnaHR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb250YWluZXJIZWlnaHRDc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lckhlaWdodENzc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbnRhaW5lckJvdHRvbUNzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyQm90dG9tQ3NzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3RlcENpcmNsZVNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0ZXBDaXJjbGVTaXplfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3RlcENpcmNsZVNpemVDc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0ZXBDaXJjbGVTaXplQ3NzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3RlcENpcmNsZU1hcmdpbkNzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RlcENpcmNsZU1hcmdpbkNzc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInR1cm5DaXJjbGVTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90dXJuQ2lyY2xlU2l6ZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInR1cm5DaXJjbGVTaXplQ3NzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90dXJuQ2lyY2xlU2l6ZUNzc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm91dGVyUmFkaXVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdXRlclJhZGl1c30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlubmVyUmFkaXVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbm5lclJhZGl1c30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNoYWRvd09mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhZG93T2Zmc2V0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuY29uZmlndXJlPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbmZpZ3VyZShlKTt0aGlzLl9yZXNldCgpfTtlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzaXplKGUpO3RoaXMuX3Jlc2V0KCl9O2UucHJvdG90eXBlLmFuZ2xlVG9Db29yZGluYXRlcz1mdW5jdGlvbihlKXtyZXR1cm5bTWF0aC5jb3MoZSksTWF0aC5zaW4oZSldfTtlLnByb3RvdHlwZS5yZWxhdGl2ZUFuZ2xlVG9Db29yZGlhbnRlcz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX3NwYXRpYWwud3JhcEFuZ2xlKGUtdCk7cmV0dXJuIHRoaXMuYW5nbGVUb0Nvb3JkaW5hdGVzKHIpfTtlLnByb3RvdHlwZS5fY29uZmlndXJlPWZ1bmN0aW9uKGUpe3RoaXMuX21pbldpZHRoPWUubWluV2lkdGg7dGhpcy5fbWF4V2lkdGg9dGhpcy5fZ2V0TWF4V2lkdGgoZS5taW5XaWR0aCxlLm1heFdpZHRoKX07ZS5wcm90b3R5cGUuX3Jlc2l6ZT1mdW5jdGlvbihlKXt0aGlzLl9lbGVtZW50V2lkdGg9ZS53aWR0aDt0aGlzLl9lbGVtZW50SGVpZ2h0PWUuaGVpZ2h0fTtlLnByb3RvdHlwZS5fcmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXJXaWR0aD10aGlzLl9nZXRDb250YWluZXJXaWR0aCh0aGlzLl9lbGVtZW50V2lkdGgsdGhpcy5fZWxlbWVudEhlaWdodCk7dGhpcy5fY29udGFpbmVySGVpZ2h0PXRoaXMuX2dldENvbnRhaW5lckhlaWdodCh0aGlzLmNvbnRhaW5lcldpZHRoKTt0aGlzLl9zdGVwQ2lyY2xlU2l6ZT10aGlzLl9nZXRTdGVwQ2lyY2xlRGlhbWV0ZXIodGhpcy5fY29udGFpbmVySGVpZ2h0KTt0aGlzLl90dXJuQ2lyY2xlU2l6ZT10aGlzLl9nZXRUdXJuQ2lyY2xlRGlhbWV0ZXIodGhpcy5jb250YWluZXJIZWlnaHQpO3RoaXMuX291dGVyUmFkaXVzPXRoaXMuX2dldE91dGVyUmFkaXVzKHRoaXMuX2NvbnRhaW5lckhlaWdodCk7dGhpcy5faW5uZXJSYWRpdXM9dGhpcy5fZ2V0SW5uZXJSYWRpdXModGhpcy5fY29udGFpbmVySGVpZ2h0KTt0aGlzLl9zaGFkb3dPZmZzZXQ9Mzt0aGlzLl9jb250YWluZXJXaWR0aENzcz10aGlzLl9udW1iZXJUb0Nzc1BpeGVscyh0aGlzLl9jb250YWluZXJXaWR0aCk7dGhpcy5fY29udGFpbmVyTWFyZ2luQ3NzPXRoaXMuX251bWJlclRvQ3NzUGl4ZWxzKC0uNSp0aGlzLl9jb250YWluZXJXaWR0aCk7dGhpcy5fY29udGFpbmVyTGVmdENzcz10aGlzLl9udW1iZXJUb0Nzc1BpeGVscyhNYXRoLmZsb29yKC41KnRoaXMuX2VsZW1lbnRXaWR0aCkpO3RoaXMuX2NvbnRhaW5lckhlaWdodENzcz10aGlzLl9udW1iZXJUb0Nzc1BpeGVscyh0aGlzLl9jb250YWluZXJIZWlnaHQpO3RoaXMuX2NvbnRhaW5lckJvdHRvbUNzcz10aGlzLl9udW1iZXJUb0Nzc1BpeGVscyhNYXRoLmZsb29yKC0uMDgqdGhpcy5fY29udGFpbmVySGVpZ2h0KSk7dGhpcy5fc3RlcENpcmNsZVNpemVDc3M9dGhpcy5fbnVtYmVyVG9Dc3NQaXhlbHModGhpcy5fc3RlcENpcmNsZVNpemUpO3RoaXMuX3N0ZXBDaXJjbGVNYXJnaW5Dc3M9dGhpcy5fbnVtYmVyVG9Dc3NQaXhlbHMoLS41KnRoaXMuX3N0ZXBDaXJjbGVTaXplKTt0aGlzLl90dXJuQ2lyY2xlU2l6ZUNzcz10aGlzLl9udW1iZXJUb0Nzc1BpeGVscyh0aGlzLl90dXJuQ2lyY2xlU2l6ZSl9O2UucHJvdG90eXBlLl9nZXRDb250YWluZXJXaWR0aD1mdW5jdGlvbihlLHQpe3ZhciByPShlLXRoaXMuX21pblRocmVzaG9sZFdpZHRoKS8odGhpcy5fbWF4VGhyZXNob2xkV2lkdGgtdGhpcy5fbWluVGhyZXNob2xkV2lkdGgpO3ZhciBuPSh0LXRoaXMuX21pblRocmVzaG9sZEhlaWdodCkvKHRoaXMuX21heFRocmVzaG9sZEhlaWdodC10aGlzLl9taW5UaHJlc2hvbGRIZWlnaHQpO3ZhciBpPU1hdGgubWF4KDAsTWF0aC5taW4oMSxNYXRoLm1pbihyLG4pKSk7aT0uMDQqTWF0aC5yb3VuZCgyNSppKTtyZXR1cm4gdGhpcy5fbWluV2lkdGgraSoodGhpcy5fbWF4V2lkdGgtdGhpcy5fbWluV2lkdGgpfTtlLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVySGVpZ2h0PWZ1bmN0aW9uKGUpe3JldHVybi43NyplfTtlLnByb3RvdHlwZS5fZ2V0U3RlcENpcmNsZURpYW1ldGVyPWZ1bmN0aW9uKGUpe3JldHVybi4zNCplfTtlLnByb3RvdHlwZS5fZ2V0VHVybkNpcmNsZURpYW1ldGVyPWZ1bmN0aW9uKGUpe3JldHVybi4zKmV9O2UucHJvdG90eXBlLl9nZXRPdXRlclJhZGl1cz1mdW5jdGlvbihlKXtyZXR1cm4uMzEqZX07ZS5wcm90b3R5cGUuX2dldElubmVyUmFkaXVzPWZ1bmN0aW9uKGUpe3JldHVybi4xMjUqZX07ZS5wcm90b3R5cGUuX251bWJlclRvQ3NzUGl4ZWxzPWZ1bmN0aW9uKGUpe3JldHVybiBlK1wicHhcIn07ZS5wcm90b3R5cGUuX2dldE1heFdpZHRoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU+dD9lOnR9O3JldHVybiBlfSgpO3IuRGlyZWN0aW9uRE9NQ2FsY3VsYXRvcj1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi9HZW9cIjoyOTR9XSwzMjE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuRGlyZWN0aW9uRE9NUmVuZGVyZXI9dm9pZCAwO3ZhciB4PWUoXCJ2aXJ0dWFsLWRvbVwiKTt2YXIgbj1lKFwiLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBmPWUoXCIuLi8uLi9FZGdlXCIpO3ZhciBjPWUoXCIuLi8uLi9FcnJvclwiKTt2YXIgaT1lKFwiLi4vLi4vR2VvXCIpO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX2lzRWRnZT1mYWxzZTt0aGlzLl9zcGF0aWFsPW5ldyBpLlNwYXRpYWw7dGhpcy5fY2FsY3VsYXRvcj1uZXcgbi5EaXJlY3Rpb25ET01DYWxjdWxhdG9yKGUsdCk7dGhpcy5fbm9kZT1udWxsO3RoaXMuX3JvdGF0aW9uPXtwaGk6MCx0aGV0YTowfTt0aGlzLl9lcHNpbG9uPS41Kk1hdGguUEkvMTgwO3RoaXMuX2hpZ2hsaWdodEtleT1udWxsO3RoaXMuX2Rpc3Rpbmd1aXNoU2VxdWVuY2U9ZmFsc2U7dGhpcy5fbmVlZHNSZW5kZXI9ZmFsc2U7dGhpcy5fc3RlcEVkZ2VzPVtdO3RoaXMuX3R1cm5FZGdlcz1bXTt0aGlzLl9wYW5vRWRnZXM9W107dGhpcy5fc2VxdWVuY2VFZGdlS2V5cz1bXTt0aGlzLl9zdGVwRGlyZWN0aW9ucz1bZi5FZGdlRGlyZWN0aW9uLlN0ZXBGb3J3YXJkLGYuRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmQsZi5FZGdlRGlyZWN0aW9uLlN0ZXBMZWZ0LGYuRWRnZURpcmVjdGlvbi5TdGVwUmlnaHRdO3RoaXMuX3R1cm5EaXJlY3Rpb25zPVtmLkVkZ2VEaXJlY3Rpb24uVHVybkxlZnQsZi5FZGdlRGlyZWN0aW9uLlR1cm5SaWdodCxmLkVkZ2VEaXJlY3Rpb24uVHVyblVdO3RoaXMuX3R1cm5OYW1lcz17fTt0aGlzLl90dXJuTmFtZXNbZi5FZGdlRGlyZWN0aW9uLlR1cm5MZWZ0XT1cIlR1cm5MZWZ0XCI7dGhpcy5fdHVybk5hbWVzW2YuRWRnZURpcmVjdGlvbi5UdXJuUmlnaHRdPVwiVHVyblJpZ2h0XCI7dGhpcy5fdHVybk5hbWVzW2YuRWRnZURpcmVjdGlvbi5UdXJuVV09XCJUdXJuQXJvdW5kXCI7dmFyIHI9ISFkb2N1bWVudC5kb2N1bWVudE1vZGU7dGhpcy5faXNFZGdlPSFyJiYhIXdpbmRvdy5TdHlsZU1lZGlhfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm5lZWRzUmVuZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZWVkc1JlbmRlcn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihlKXt0aGlzLl9uZWVkc1JlbmRlcj1mYWxzZTt2YXIgdD10aGlzLl9yb3RhdGlvbjt2YXIgcj1bXTt2YXIgbj1bXTtpZih0aGlzLl9ub2RlLnBhbm8pe3I9ci5jb25jYXQodGhpcy5fY3JlYXRlUGFub0Fycm93cyhlLHQpKX1lbHNle3I9ci5jb25jYXQodGhpcy5fY3JlYXRlUGVyc3BlY3RpdmVUb1Bhbm9BcnJvd3MoZSx0KSk7cj1yLmNvbmNhdCh0aGlzLl9jcmVhdGVTdGVwQXJyb3dzKGUsdCkpO249bi5jb25jYXQodGhpcy5fY3JlYXRlVHVybkFycm93cyhlKSl9cmV0dXJuIHRoaXMuX2dldENvbnRhaW5lcihyLG4sdCl9O2UucHJvdG90eXBlLnNldEVkZ2VzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fc2V0RWRnZXMoZSx0KTt0aGlzLl9zZXROZWVkc1JlbmRlcigpfTtlLnByb3RvdHlwZS5zZXROb2RlPWZ1bmN0aW9uKGUpe3RoaXMuX25vZGU9ZTt0aGlzLl9jbGVhckVkZ2VzKCk7dGhpcy5fc2V0TmVlZHNSZW5kZXIoKX07ZS5wcm90b3R5cGUuc2V0UmVuZGVyQ2FtZXJhPWZ1bmN0aW9uKGUpe3ZhciB0PWUucm90YXRpb247aWYoTWF0aC5hYnModC5waGktdGhpcy5fcm90YXRpb24ucGhpKTx0aGlzLl9lcHNpbG9uKXtyZXR1cm59dGhpcy5fcm90YXRpb249dDt0aGlzLl9zZXROZWVkc1JlbmRlcigpfTtlLnByb3RvdHlwZS5zZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PWZhbHNlO2lmKHRoaXMuX2hpZ2hsaWdodEtleSE9PWUuaGlnaGxpZ2h0S2V5fHx0aGlzLl9kaXN0aW5ndWlzaFNlcXVlbmNlIT09ZS5kaXN0aW5ndWlzaFNlcXVlbmNlKXt0aGlzLl9oaWdobGlnaHRLZXk9ZS5oaWdobGlnaHRLZXk7dGhpcy5fZGlzdGluZ3Vpc2hTZXF1ZW5jZT1lLmRpc3Rpbmd1aXNoU2VxdWVuY2U7dD10cnVlfWlmKHRoaXMuX2NhbGN1bGF0b3IubWluV2lkdGghPT1lLm1pbldpZHRofHx0aGlzLl9jYWxjdWxhdG9yLm1heFdpZHRoIT09ZS5tYXhXaWR0aCl7dGhpcy5fY2FsY3VsYXRvci5jb25maWd1cmUoZSk7dD10cnVlfWlmKHQpe3RoaXMuX3NldE5lZWRzUmVuZGVyKCl9fTtlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSl7dGhpcy5fY2FsY3VsYXRvci5yZXNpemUoZSk7dGhpcy5fc2V0TmVlZHNSZW5kZXIoKX07ZS5wcm90b3R5cGUuX3NldE5lZWRzUmVuZGVyPWZ1bmN0aW9uKCl7aWYodGhpcy5fbm9kZSE9bnVsbCl7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX19O2UucHJvdG90eXBlLl9jbGVhckVkZ2VzPWZ1bmN0aW9uKCl7dGhpcy5fc3RlcEVkZ2VzPVtdO3RoaXMuX3R1cm5FZGdlcz1bXTt0aGlzLl9wYW5vRWRnZXM9W107dGhpcy5fc2VxdWVuY2VFZGdlS2V5cz1bXX07ZS5wcm90b3R5cGUuX3NldEVkZ2VzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fc3RlcEVkZ2VzPVtdO3RoaXMuX3R1cm5FZGdlcz1bXTt0aGlzLl9wYW5vRWRnZXM9W107dGhpcy5fc2VxdWVuY2VFZGdlS2V5cz1bXTtmb3IodmFyIHI9MCxuPWUuZWRnZXM7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07dmFyIG89aS5kYXRhLmRpcmVjdGlvbjtpZih0aGlzLl9zdGVwRGlyZWN0aW9ucy5pbmRleE9mKG8pPi0xKXt0aGlzLl9zdGVwRWRnZXMucHVzaChpKTtjb250aW51ZX1pZih0aGlzLl90dXJuRGlyZWN0aW9ucy5pbmRleE9mKG8pPi0xKXt0aGlzLl90dXJuRWRnZXMucHVzaChpKTtjb250aW51ZX1pZihpLmRhdGEuZGlyZWN0aW9uPT09Zi5FZGdlRGlyZWN0aW9uLlBhbm8pe3RoaXMuX3Bhbm9FZGdlcy5wdXNoKGkpfX1pZih0aGlzLl9kaXN0aW5ndWlzaFNlcXVlbmNlJiZ0IT1udWxsKXt2YXIgYT10aGlzLl9wYW5vRWRnZXMuY29uY2F0KHRoaXMuX3N0ZXBFZGdlcykuY29uY2F0KHRoaXMuX3R1cm5FZGdlcyk7Zm9yKHZhciBzPTAsdT1hO3M8dS5sZW5ndGg7cysrKXt2YXIgaT11W3NdO3ZhciBjPWkudG87Zm9yKHZhciBsPTAsaD10LmtleXM7bDxoLmxlbmd0aDtsKyspe3ZhciBwPWhbbF07aWYocD09PWMpe3RoaXMuX3NlcXVlbmNlRWRnZUtleXMucHVzaChjKTticmVha319fX19O2UucHJvdG90eXBlLl9jcmVhdGVQYW5vQXJyb3dzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107Zm9yKHZhciBuPTAsaT10aGlzLl9wYW5vRWRnZXM7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07ci5wdXNoKHRoaXMuX2NyZWF0ZVZOb2RlQnlLZXkoZSxvLnRvLG8uZGF0YS53b3JsZE1vdGlvbkF6aW11dGgsdCx0aGlzLl9jYWxjdWxhdG9yLm91dGVyUmFkaXVzLFwiRGlyZWN0aW9uc0Fycm93UGFub1wiKSl9Zm9yKHZhciBhPTAscz10aGlzLl9zdGVwRWRnZXM7YTxzLmxlbmd0aDthKyspe3ZhciB1PXNbYV07ci5wdXNoKHRoaXMuX2NyZWF0ZVBhbm9Ub1BlcnNwZWN0aXZlQXJyb3coZSx1LnRvLHUuZGF0YS53b3JsZE1vdGlvbkF6aW11dGgsdCx1LmRhdGEuZGlyZWN0aW9uKSl9cmV0dXJuIHJ9O2UucHJvdG90eXBlLl9jcmVhdGVQYW5vVG9QZXJzcGVjdGl2ZUFycm93PWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89TWF0aC5QSS84O3ZhciBhPW4ucGhpO3N3aXRjaChpKXtjYXNlIGYuRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmQ6YT1uLnBoaS1NYXRoLlBJO2JyZWFrO2Nhc2UgZi5FZGdlRGlyZWN0aW9uLlN0ZXBMZWZ0OmE9bi5waGkrTWF0aC5QSS8yO2JyZWFrO2Nhc2UgZi5FZGdlRGlyZWN0aW9uLlN0ZXBSaWdodDphPW4ucGhpLU1hdGguUEkvMjticmVhaztkZWZhdWx0OmJyZWFrfWlmKE1hdGguYWJzKHRoaXMuX3NwYXRpYWwud3JhcEFuZ2xlKHItYSkpPG8pe3JldHVybiB0aGlzLl9jcmVhdGVWTm9kZUJ5S2V5KGUsdCxyLG4sdGhpcy5fY2FsY3VsYXRvci5vdXRlclJhZGl1cyxcIkRpcmVjdGlvbnNBcnJvd1N0ZXBcIil9cmV0dXJuIHRoaXMuX2NyZWF0ZVZOb2RlRGlzYWJsZWQodCxyLG4pfTtlLnByb3RvdHlwZS5fY3JlYXRlUGVyc3BlY3RpdmVUb1Bhbm9BcnJvd3M9ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXTtmb3IodmFyIG49MCxpPXRoaXMuX3Bhbm9FZGdlcztuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtyLnB1c2godGhpcy5fY3JlYXRlVk5vZGVCeUtleShlLG8udG8sby5kYXRhLndvcmxkTW90aW9uQXppbXV0aCx0LHRoaXMuX2NhbGN1bGF0b3IuaW5uZXJSYWRpdXMsXCJEaXJlY3Rpb25zQXJyb3dQYW5vXCIsdHJ1ZSkpfXJldHVybiByfTtlLnByb3RvdHlwZS5fY3JlYXRlU3RlcEFycm93cz1mdW5jdGlvbihlLHQpe3ZhciByPVtdO2Zvcih2YXIgbj0wLGk9dGhpcy5fc3RlcEVkZ2VzO248aS5sZW5ndGg7bisrKXt2YXIgbz1pW25dO3IucHVzaCh0aGlzLl9jcmVhdGVWTm9kZUJ5RGlyZWN0aW9uKGUsby50byxvLmRhdGEud29ybGRNb3Rpb25BemltdXRoLHQsby5kYXRhLmRpcmVjdGlvbikpfXJldHVybiByfTtlLnByb3RvdHlwZS5fY3JlYXRlVHVybkFycm93cz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHI9MCxuPXRoaXMuX3R1cm5FZGdlcztyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTt2YXIgbz1pLmRhdGEuZGlyZWN0aW9uO3ZhciBhPXRoaXMuX3R1cm5OYW1lc1tvXTt0LnB1c2godGhpcy5fY3JlYXRlVk5vZGVCeVR1cm4oZSxpLnRvLGEsbykpfXJldHVybiB0fTtlLnByb3RvdHlwZS5fY3JlYXRlVk5vZGVCeUtleT1mdW5jdGlvbih0LHIsZSxuLGksbyxhKXt2YXIgcz1mdW5jdGlvbihlKXt0Lm1vdmVUb0tleSQocikuc3Vic2NyaWJlKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtpZighKGUgaW5zdGFuY2VvZiBjLkFib3J0TWFwaWxsYXJ5RXJyb3IpKXtjb25zb2xlLmVycm9yKGUpfX0pfTtyZXR1cm4gdGhpcy5fY3JlYXRlVk5vZGUocixlLG4saSxvLFwiRGlyZWN0aW9uc0NpcmNsZVwiLHMsYSl9O2UucHJvdG90eXBlLl9jcmVhdGVWTm9kZUJ5RGlyZWN0aW9uPWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIG89ZnVuY3Rpb24oZSl7dC5tb3ZlRGlyJChpKS5zdWJzY3JpYmUodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIGMuQWJvcnRNYXBpbGxhcnlFcnJvcikpe2NvbnNvbGUuZXJyb3IoZSl9fSl9O3JldHVybiB0aGlzLl9jcmVhdGVWTm9kZShlLHIsbix0aGlzLl9jYWxjdWxhdG9yLm91dGVyUmFkaXVzLFwiRGlyZWN0aW9uc0Fycm93U3RlcFwiLFwiRGlyZWN0aW9uc0NpcmNsZVwiLG8pfTtlLnByb3RvdHlwZS5fY3JlYXRlVk5vZGVCeVR1cm49ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9ZnVuY3Rpb24oZSl7dC5tb3ZlRGlyJChuKS5zdWJzY3JpYmUodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIGMuQWJvcnRNYXBpbGxhcnlFcnJvcikpe2NvbnNvbGUuZXJyb3IoZSl9fSl9O3ZhciBvPXtoZWlnaHQ6dGhpcy5fY2FsY3VsYXRvci50dXJuQ2lyY2xlU2l6ZUNzcyx0cmFuc2Zvcm06XCJyb3RhdGUoMClcIix3aWR0aDp0aGlzLl9jYWxjdWxhdG9yLnR1cm5DaXJjbGVTaXplQ3NzfTtzd2l0Y2gobil7Y2FzZSBmLkVkZ2VEaXJlY3Rpb24uVHVybkxlZnQ6by5sZWZ0PVwiNXB4XCI7by50b3A9XCI1cHhcIjticmVhaztjYXNlIGYuRWRnZURpcmVjdGlvbi5UdXJuUmlnaHQ6by5yaWdodD1cIjVweFwiO28udG9wPVwiNXB4XCI7YnJlYWs7Y2FzZSBmLkVkZ2VEaXJlY3Rpb24uVHVyblU6by5sZWZ0PVwiNXB4XCI7by5ib3R0b209XCI1cHhcIjticmVhaztkZWZhdWx0OmJyZWFrfXZhciBhPXthdHRyaWJ1dGVzOntcImRhdGEta2V5XCI6ZX0sb25jbGljazppLHN0eWxlOm99O3ZhciBzPVwiVHVybkNpcmNsZVwiO2lmKHRoaXMuX3NlcXVlbmNlRWRnZUtleXMuaW5kZXhPZihlKT4tMSl7cys9XCJTZXF1ZW5jZVwifWlmKHRoaXMuX2hpZ2hsaWdodEtleT09PWUpe3MrPVwiSGlnaGxpZ2h0XCJ9dmFyIHU9eC5oKFwiZGl2LlwiK3Ise30sW10pO3JldHVybiB4LmgoXCJkaXYuXCIrcyxhLFt1XSl9O2UucHJvdG90eXBlLl9jcmVhdGVWTm9kZURpc2FibGVkPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5fY3JlYXRlVk5vZGUoZSx0LHIsdGhpcy5fY2FsY3VsYXRvci5vdXRlclJhZGl1cyxcIkRpcmVjdGlvbnNBcnJvd0Rpc2FibGVkXCIsXCJEaXJlY3Rpb25zQ2lyY2xlRGlzYWJsZWRcIil9O2UucHJvdG90eXBlLl9jcmVhdGVWTm9kZT1mdW5jdGlvbihlLHQscixuLGksbyxhLHMpe3ZhciB1PXRoaXMuX2NhbGN1bGF0b3IuYW5nbGVUb0Nvb3JkaW5hdGVzKHQtci5waGkpO3ZhciBjPU1hdGgucm91bmQoLW4qdVsxXSsuNSp0aGlzLl9jYWxjdWxhdG9yLmNvbnRhaW5lcldpZHRoKTt2YXIgbD1NYXRoLnJvdW5kKC1uKnVbMF0rLjUqdGhpcy5fY2FsY3VsYXRvci5jb250YWluZXJIZWlnaHQpO3ZhciBoPXRoaXMuX2NhbGN1bGF0b3IucmVsYXRpdmVBbmdsZVRvQ29vcmRpYW50ZXModCxyLnBoaSk7dmFyIHA9dGhpcy5fY2FsY3VsYXRvci5zaGFkb3dPZmZzZXQ7dmFyIGY9LXAqaFsxXTt2YXIgZD1wKmhbMF07dmFyIHY9XCJkcm9wLXNoYWRvdyhcIitmK1wicHggXCIrZCtcInB4IDFweCByZ2JhKDAsMCwwLDAuOCkpXCI7dmFyIG09e3N0eWxlOntcIi13ZWJraXQtZmlsdGVyXCI6dixmaWx0ZXI6dn19O3ZhciBnPXguaChcImRpdi5cIitpLG0sW10pO3ZhciBfPS10aGlzLl9zcGF0aWFsLnJhZFRvRGVnKHQtci5waGkpO3ZhciB5PXM/XCJ0cmFuc2xhdGUoXCIrYytcInB4LCBcIitsK1wicHgpIHJvdGF0ZShcIitfK1wiZGVnKSB0cmFuc2xhdGVaKC0wLjAxcHgpXCI6XCJ0cmFuc2xhdGUoXCIrYytcInB4LCBcIitsK1wicHgpIHJvdGF0ZShcIitfK1wiZGVnKVwiO3ZhciBiPXthdHRyaWJ1dGVzOntcImRhdGEta2V5XCI6ZX0sb25jbGljazphLHN0eWxlOntoZWlnaHQ6dGhpcy5fY2FsY3VsYXRvci5zdGVwQ2lyY2xlU2l6ZUNzcyxtYXJnaW5MZWZ0OnRoaXMuX2NhbGN1bGF0b3Iuc3RlcENpcmNsZU1hcmdpbkNzcyxtYXJnaW5Ub3A6dGhpcy5fY2FsY3VsYXRvci5zdGVwQ2lyY2xlTWFyZ2luQ3NzLHRyYW5zZm9ybTp5LHdpZHRoOnRoaXMuX2NhbGN1bGF0b3Iuc3RlcENpcmNsZVNpemVDc3N9fTtpZih0aGlzLl9zZXF1ZW5jZUVkZ2VLZXlzLmluZGV4T2YoZSk+LTEpe28rPVwiU2VxdWVuY2VcIn1pZih0aGlzLl9oaWdobGlnaHRLZXk9PT1lKXtvKz1cIkhpZ2hsaWdodFwifXJldHVybiB4LmgoXCJkaXYuXCIrbyxiLFtnXSl9O2UucHJvdG90eXBlLl9nZXRDb250YWluZXI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX2lzRWRnZT9cInJvdGF0ZVgoNjBkZWcpXCI6XCJwZXJzcGVjdGl2ZShcIit0aGlzLl9jYWxjdWxhdG9yLmNvbnRhaW5lcldpZHRoQ3NzK1wiKSByb3RhdGVYKDYwZGVnKVwiO3ZhciBpPXtvbmNvbnRleHRtZW51OmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0sc3R5bGU6e2JvdHRvbTp0aGlzLl9jYWxjdWxhdG9yLmNvbnRhaW5lckJvdHRvbUNzcyxoZWlnaHQ6dGhpcy5fY2FsY3VsYXRvci5jb250YWluZXJIZWlnaHRDc3MsbGVmdDp0aGlzLl9jYWxjdWxhdG9yLmNvbnRhaW5lckxlZnRDc3MsbWFyZ2luTGVmdDp0aGlzLl9jYWxjdWxhdG9yLmNvbnRhaW5lck1hcmdpbkNzcyx0cmFuc2Zvcm06bix3aWR0aDp0aGlzLl9jYWxjdWxhdG9yLmNvbnRhaW5lcldpZHRoQ3NzfX07cmV0dXJuIHguaChcImRpdi5EaXJlY3Rpb25zUGVyc3BlY3RpdmVcIixpLHQuY29uY2F0KGUpKX07cmV0dXJuIGV9KCk7ci5EaXJlY3Rpb25ET01SZW5kZXJlcj1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEsXCIuLi8uLi9FZGdlXCI6MjkyLFwiLi4vLi4vRXJyb3JcIjoyOTMsXCIuLi8uLi9HZW9cIjoyOTQsXCJ2aXJ0dWFsLWRvbVwiOjI0N31dLDMyMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuSW1hZ2VQbGFuZUNvbXBvbmVudD12b2lkIDA7dmFyIG09ZShcInJ4anNcIik7dmFyIGc9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBvPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIHM9ZShcIi4uLy4uL1ZpZXdlclwiKTt2YXIgdT1lKFwiLi4vLi4vUmVuZGVyXCIpO3ZhciBjPWUoXCIuLi8uLi9UaWxlc1wiKTt2YXIgbD1lKFwiLi4vLi4vVXRpbHNcIik7dmFyIF89ZShcIi4uLy4uL2dlby9WaWV3cG9ydENvb3Jkc1wiKTt2YXIgeT1lKFwiLi4vLi4vZ2VvL1NwYXRpYWxcIik7dmFyIGk9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUsdCxyKXx8dGhpcztuLl9pbWFnZVRpbGVMb2FkZXI9bmV3IGMuSW1hZ2VUaWxlTG9hZGVyKGwuVXJscy50aWxlU2NoZW1lLGwuVXJscy50aWxlRG9tYWluLGwuVXJscy5vcmlnaW4pO24uX3JvaUNhbGN1bGF0b3I9bmV3IGMuUmVnaW9uT2ZJbnRlcmVzdENhbGN1bGF0b3I7bi5fcmVuZGVyZXJPcGVyYXRpb24kPW5ldyBtLlN1YmplY3Q7bi5fcmVuZGVyZXJDcmVhdG9yJD1uZXcgbS5TdWJqZWN0O24uX3JlbmRlcmVyRGlzcG9zZXIkPW5ldyBtLlN1YmplY3Q7bi5fcmVuZGVyZXIkPW4uX3JlbmRlcmVyT3BlcmF0aW9uJC5waXBlKGcuc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSxudWxsKSxnLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZSE9bnVsbH0pLGcuZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZyYW1lSWR9KSk7bi5fcmVuZGVyZXJDcmVhdG9yJC5waXBlKGcubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGUhPW51bGwpe3Rocm93IG5ldyBFcnJvcihcIk11bHRpcGxlIGltYWdlIHBsYW5lIHN0YXRlcyBjYW4gbm90IGJlIGNyZWF0ZWQgYXQgdGhlIHNhbWUgdGltZVwiKX1yZXR1cm4gbmV3IG8uSW1hZ2VQbGFuZUdMUmVuZGVyZXJ9fSkpLnN1YnNjcmliZShuLl9yZW5kZXJlck9wZXJhdGlvbiQpO24uX3JlbmRlcmVyRGlzcG9zZXIkLnBpcGUoZy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5kaXNwb3NlKCk7cmV0dXJuIG51bGx9fSkpLnN1YnNjcmliZShuLl9yZW5kZXJlck9wZXJhdGlvbiQpO3JldHVybiBufWUucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciB2PXRoaXM7dGhpcy5fcmVuZGVyZXJTdWJzY3JpcHRpb249dGhpcy5fcmVuZGVyZXIkLnBpcGUoZy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9e25hbWU6di5fbmFtZSxyZW5kZXI6e2ZyYW1lSWQ6ZS5mcmFtZUlkLG5lZWRzUmVuZGVyOmUubmVlZHNSZW5kZXIscmVuZGVyOmUucmVuZGVyLmJpbmQoZSksc3RhZ2U6dS5HTFJlbmRlclN0YWdlLkJhY2tncm91bmR9fTtlLmNsZWFyTmVlZHNSZW5kZXIoKTtyZXR1cm4gdH0pKS5zdWJzY3JpYmUodGhpcy5fY29udGFpbmVyLmdsUmVuZGVyZXIucmVuZGVyJCk7dGhpcy5fcmVuZGVyZXJDcmVhdG9yJC5uZXh0KG51bGwpO3RoaXMuX3N0YXRlU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKGcubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLnVwZGF0ZUZyYW1lKHQpO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fcmVuZGVyZXJPcGVyYXRpb24kKTt2YXIgdD10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZShnLmRpc3RpbmN0VW50aWxDaGFuZ2VkKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXl9KSxnLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbnRhaW5lci5nbFJlbmRlcmVyLndlYkdMUmVuZGVyZXIkLHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkKSxnLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07dmFyIGk9dC5zdGF0ZTt2YXIgbz1NYXRoLm1heChuLndpZHRoLG4uaGVpZ2h0KTt2YXIgYT1pLmN1cnJlbnROb2RlO3ZhciBzPWkuY3VycmVudFRyYW5zZm9ybTt2YXIgdT1vPjIwNDg/MjA0ODpvPjEwMjQ/MTAyNDo1MTI7cmV0dXJuIG5ldyBjLlRleHR1cmVQcm92aWRlcihhLmtleSxzLmJhc2ljV2lkdGgscy5iYXNpY0hlaWdodCx1LGEuaW1hZ2Usdi5faW1hZ2VUaWxlTG9hZGVyLG5ldyBjLkltYWdlVGlsZVN0b3JlLHIpfSksZy5wdWJsaXNoUmVwbGF5KDEpLGcucmVmQ291bnQoKSk7dGhpcy5fdGV4dHVyZVByb3ZpZGVyU3Vic2NyaXB0aW9uPXQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fc2V0VGV4dHVyZVByb3ZpZGVyU3Vic2NyaXB0aW9uPXQucGlwZShnLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5zZXRUZXh0dXJlUHJvdmlkZXIodC5rZXksdCk7cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9yZW5kZXJlck9wZXJhdGlvbiQpO3RoaXMuX3NldFRpbGVTaXplU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkLnBpcGUoZy5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG0uY29tYmluZUxhdGVzdCh0LG0ub2YoZSkpLnBpcGUoZy5maXJzdCgpKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07dmFyIG49TWF0aC5tYXgoci53aWR0aCxyLmhlaWdodCk7dmFyIGk9bj4yMDQ4PzIwNDg6bj4xMDI0PzEwMjQ6NTEyO3Quc2V0VGlsZVNpemUoaSl9KTt0aGlzLl9hYm9ydFRleHR1cmVQcm92aWRlclN1YnNjcmlwdGlvbj10LnBpcGUoZy5wYWlyd2lzZSgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXTt0LmFib3J0KCl9KTt2YXIgZT1tLmNvbWJpbmVMYXRlc3QodGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhRnJhbWUkLHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkLnBpcGUoZy5kZWJvdW5jZVRpbWUoMjUwKSkpLnBpcGUoZy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuW3QuY2FtZXJhLnBvc2l0aW9uLmNsb25lKCksdC5jYW1lcmEubG9va2F0LmNsb25lKCksdC56b29tLnZhbHVlT2YoKSxyLmhlaWdodC52YWx1ZU9mKCksci53aWR0aC52YWx1ZU9mKCldfSksZy5wYWlyd2lzZSgpLGcuc2tpcFdoaWxlKGZ1bmN0aW9uKGUpe3JldHVybiBlWzFdWzJdLWVbMF1bMl08MHx8ZVsxXVsyXT09PTB9KSxnLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdWzBdLmVxdWFscyhlWzFdWzBdKTt2YXIgcj1lWzBdWzFdLmVxdWFscyhlWzFdWzFdKTt2YXIgbj1lWzBdWzJdPT09ZVsxXVsyXTt2YXIgaT1lWzBdWzNdPT09ZVsxXVszXTt2YXIgbz1lWzBdWzRdPT09ZVsxXVs0XTtyZXR1cm4gdCYmciYmbiYmaSYmb30pLGcuZGlzdGluY3RVbnRpbENoYW5nZWQoKSxnLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pLGcuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB2Ll9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmFGcmFtZSQucGlwZShnLmZpcnN0KCkpfSksZy53aXRoTGF0ZXN0RnJvbSh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5zaXplJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKSk7dGhpcy5fc2V0UmVnaW9uT2ZJbnRlcmVzdFN1YnNjcmlwdGlvbj10LnBpcGUoZy5zd2l0Y2hNYXAoZnVuY3Rpb24obyl7cmV0dXJuIGUucGlwZShnLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07dmFyIGk9KG5ldyBfLmRlZmF1bHQpLnZpZXdwb3J0VG9CYXNpYygwLDAsbix0LnBlcnNwZWN0aXZlKTtpZihpWzBdPDB8fGlbMV08MHx8aVswXT4xfHxpWzFdPjEpe3JldHVybiB1bmRlZmluZWR9cmV0dXJuW3YuX3JvaUNhbGN1bGF0b3IuY29tcHV0ZVJlZ2lvbk9mSW50ZXJlc3QodCxyLG4pLG9dfSksZy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlfSkpfSksZy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIWVbMV0uZGlzcG9zZWR9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07dmFyIHI9ZVsxXTtyLnNldFJlZ2lvbk9mSW50ZXJlc3QodCl9KTt2YXIgbj10LnBpcGUoZy5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGFzVGV4dHVyZSR9KSxnLnN0YXJ0V2l0aChmYWxzZSksZy5wdWJsaXNoUmVwbGF5KDEpLGcucmVmQ291bnQoKSk7dGhpcy5faGFzVGV4dHVyZVN1YnNjcmlwdGlvbj1uLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3ZhciByPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKGcuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm5vZGVzQWhlYWQ9PT0wfSksZy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudE5vZGV9KSxnLmRpc3RpbmN0VW50aWxDaGFuZ2VkKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXl9KSxnLmRlYm91bmNlVGltZSgxZTMpLGcud2l0aExhdGVzdEZyb20obiksZy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIWVbMV19KSxnLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZVswXX0pLGcuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhbm8/bC5TZXR0aW5ncy5tYXhJbWFnZVNpemU+bC5TZXR0aW5ncy5iYXNlUGFub3JhbWFTaXplOmwuU2V0dGluZ3MubWF4SW1hZ2VTaXplPmwuU2V0dGluZ3MuYmFzZUltYWdlU2l6ZX0pLGcuc3dpdGNoTWFwKGZ1bmN0aW9uKHIpe3ZhciBlPXIucGFubz9sLlNldHRpbmdzLmJhc2VQYW5vcmFtYVNpemU6bC5TZXR0aW5ncy5iYXNlSW1hZ2VTaXplO2lmKE1hdGgubWF4KHIuaW1hZ2Uud2lkdGgsci5pbWFnZS5oZWlnaHQpPmUpe3JldHVybiBtLmVtcHR5KCl9dmFyIHQ9ci5jYWNoZUltYWdlJChsLlNldHRpbmdzLm1heEltYWdlU2l6ZSkucGlwZShnLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bZS5pbWFnZSxlXX0pKTtyZXR1cm4gdC5waXBlKGcudGFrZVVudGlsKG4ucGlwZShnLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pKSksZy5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBoaWdoIHJlcyBpbWFnZSAoXCIrci5rZXkrXCIpXCIsZSk7cmV0dXJuIG0uZW1wdHkoKX0pKX0pKS5waXBlKGcucHVibGlzaCgpLGcucmVmQ291bnQoKSk7dGhpcy5fdXBkYXRlQmFja2dyb3VuZFN1YnNjcmlwdGlvbj1yLnBpcGUoZy53aXRoTGF0ZXN0RnJvbSh0KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2lmKGVbMF1bMV0ua2V5IT09ZVsxXS5rZXl8fGVbMV0uZGlzcG9zZWQpe3JldHVybn1lWzFdLnVwZGF0ZUJhY2tncm91bmQoZVswXVswXSl9KTt0aGlzLl91cGRhdGVUZXh0dXJlSW1hZ2VTdWJzY3JpcHRpb249ci5waXBlKGcubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLnVwZGF0ZVRleHR1cmVJbWFnZSh0WzBdLHRbMV0pO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fcmVuZGVyZXJPcGVyYXRpb24kKTt0aGlzLl9jbGVhclBlcmlwaGVyeVBsYW5lU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5wYW5TZXJ2aWNlLnBhbk5vZGVzJC5waXBlKGcuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aD09PTB9KSxnLm1hcChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtlLmNsZWFyUGVyaXBoZXJ5UGxhbmVzKCk7cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9yZW5kZXJlck9wZXJhdGlvbiQpO3ZhciBpPXRoaXMuX25hdmlnYXRvci5wYW5TZXJ2aWNlLnBhbk5vZGVzJC5waXBlKGcuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBtLmZyb20oZSkucGlwZShnLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVybiBtLmNvbWJpbmVMYXRlc3Qodi5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5jYWNoZU5vZGUkKHQua2V5KS5waXBlKGcuY2F0Y2hFcnJvcihmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNhY2hlIHBlcmlwaGVyeSBub2RlIChcIit0LmtleStcIilcIixlKTtyZXR1cm4gbS5lbXB0eSgpfSkpLG0ub2YocikpfSkpfSksZy5zaGFyZSgpKTt0aGlzLl9hZGRQZXJpcGhlcnlQbGFuZVN1YnNjcmlwdGlvbj1pLnBpcGUoZy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIGZ1bmN0aW9uKGUpe2UuYWRkUGVyaXBoZXJ5UGxhbmUodCxyKTtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKHRoaXMuX3JlbmRlcmVyT3BlcmF0aW9uJCk7dGhpcy5fdXBkYXRlUGVyaXBoZXJ5UGxhbmVUZXh0dXJlU3Vic2NyaXB0aW9uPWkucGlwZShnLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07cmV0dXJuIHMuSW1hZ2VTaXplLlNpemUyMDQ4Pk1hdGgubWF4KHQuaW1hZ2Uud2lkdGgsdC5pbWFnZS5oZWlnaHQpP3QuY2FjaGVJbWFnZSQocy5JbWFnZVNpemUuU2l6ZTIwNDgpLnBpcGUoZy5jYXRjaEVycm9yKGZ1bmN0aW9uKCl7cmV0dXJuIG0uZW1wdHkoKX0pKTptLmVtcHR5KCl9KSxnLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS51cGRhdGVUZXh0dXJlSW1hZ2UodC5pbWFnZSx0KTtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKHRoaXMuX3JlbmRlcmVyT3BlcmF0aW9uJCk7dmFyIG89dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLnBpcGUoZy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuYWxwaGE8MX0pLGcuZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7dmFyIGE9bS5jb21iaW5lTGF0ZXN0KHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuYWN0aXZlJCx0aGlzLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLmFjdGl2ZSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5pbk1vdGlvbiQsbykucGlwZShnLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl0saT1lWzNdO3JldHVybiEodHx8cnx8bnx8aSl9KSxnLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pKTt0aGlzLl9tb3ZlVG9QZXJpcGhlcnlOb2RlU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5wYW5TZXJ2aWNlLnBhbk5vZGVzJC5waXBlKGcuc3dpdGNoTWFwKGZ1bmN0aW9uKGkpe3JldHVybiBhLnBpcGUoZy53aXRoTGF0ZXN0RnJvbSh2Ll9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLHYuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLHYuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpLGcubWVyZ2VNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVsxXSxyPWVbMl0sbj1lWzNdO3JldHVybiBtLm9mKFt0LHIsbixpXSl9KSl9KSxnLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl0saT1lWzNdO3ZhciBvPXQuY2FtZXJhLmxvb2thdC5jbG9uZSgpLnN1Yih0LmNhbWVyYS5wb3NpdGlvbik7dmFyIGE9KG5ldyB5LmRlZmF1bHQpLnZpZXdpbmdEaXJlY3Rpb24oci5yb3RhdGlvbik7dmFyIHM9YS5hbmdsZVRvKG8pO3ZhciB1PVtzLHVuZGVmaW5lZF07dmFyIGM9KG5ldyBfLmRlZmF1bHQpLnZpZXdwb3J0VG9CYXNpYygwLDAsbix0LnBlcnNwZWN0aXZlKTtpZihjWzBdPj0wJiZjWzBdPD0xJiZjWzFdPj0wJiZjWzFdPD0xKXt1WzBdPU51bWJlci5ORUdBVElWRV9JTkZJTklUWX1mb3IodmFyIGw9MCxoPWk7bDxoLmxlbmd0aDtsKyspe3ZhciBwPWhbbF1bMF07dmFyIGY9KG5ldyB5LmRlZmF1bHQpLnZpZXdpbmdEaXJlY3Rpb24ocC5yb3RhdGlvbik7dmFyIGQ9Zi5hbmdsZVRvKG8pO2lmKGQ8dVswXSl7dVswXT1kO3VbMV09cC5rZXl9fWlmKCF1WzFdKXtyZXR1cm4gbS5lbXB0eSgpfXJldHVybiB2Ll9uYXZpZ2F0b3IubW92ZVRvS2V5JCh1WzFdKS5waXBlKGcuY2F0Y2hFcnJvcihmdW5jdGlvbigpe3JldHVybiBtLmVtcHR5KCl9KSl9KSkuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXJEaXNwb3NlciQubmV4dChudWxsKTt0aGlzLl9hYm9ydFRleHR1cmVQcm92aWRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2hhc1RleHR1cmVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9yZW5kZXJlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFJlZ2lvbk9mSW50ZXJlc3RTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXRUZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXRUaWxlU2l6ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3N0YXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdGV4dHVyZVByb3ZpZGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdXBkYXRlQmFja2dyb3VuZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3VwZGF0ZVRleHR1cmVJbWFnZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NsZWFyUGVyaXBoZXJ5UGxhbmVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9hZGRQZXJpcGhlcnlQbGFuZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3VwZGF0ZVBlcmlwaGVyeVBsYW5lVGV4dHVyZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX21vdmVUb1BlcmlwaGVyeU5vZGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue319O2UuY29tcG9uZW50TmFtZT1cImltYWdlUGxhbmVcIjtyZXR1cm4gZX0oby5Db21wb25lbnQpO3IuSW1hZ2VQbGFuZUNvbXBvbmVudD1pO28uQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihpKTtyLmRlZmF1bHQ9aX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vUmVuZGVyXCI6Mjk3LFwiLi4vLi4vVGlsZXNcIjozMDAsXCIuLi8uLi9VdGlsc1wiOjMwMSxcIi4uLy4uL1ZpZXdlclwiOjMwMixcIi4uLy4uL2dlby9TcGF0aWFsXCI6NDE5LFwiLi4vLi4vZ2VvL1ZpZXdwb3J0Q29vcmRzXCI6NDIxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDMyMzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5JbWFnZVBsYW5lR0xSZW5kZXJlcj12b2lkIDA7dmFyIG49ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9mYWN0b3J5PW5ldyBuLk1lc2hGYWN0b3J5O3RoaXMuX3NjZW5lPW5ldyBuLk1lc2hTY2VuZTt0aGlzLl9hbHBoYT0wO3RoaXMuX2FscGhhT2xkPTA7dGhpcy5fZmFkZU91dFNwZWVkPS4wNTt0aGlzLl9jdXJyZW50S2V5PW51bGw7dGhpcy5fcHJldmlvdXNLZXk9bnVsbDt0aGlzLl9wcm92aWRlckRpc3Bvc2Vycz17fTt0aGlzLl9mcmFtZUlkPTA7dGhpcy5fbmVlZHNSZW5kZXI9ZmFsc2V9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZnJhbWVJZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnJhbWVJZH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm5lZWRzUmVuZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZWVkc1JlbmRlcn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmluZGljYXRlTmVlZHNSZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS5hZGRQZXJpcGhlcnlQbGFuZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2ZhY3RvcnkuY3JlYXRlTWVzaChlLHQpO3ZhciBuPXt9O25bZS5rZXldPXI7dGhpcy5fc2NlbmUuYWRkUGVyaXBoZXJ5UGxhbmVzKG4pO3RoaXMuX25lZWRzUmVuZGVyPXRydWV9O2UucHJvdG90eXBlLmNsZWFyUGVyaXBoZXJ5UGxhbmVzPWZ1bmN0aW9uKCl7dGhpcy5fc2NlbmUuc2V0UGVyaXBoZXJ5UGxhbmVzKHt9KTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS51cGRhdGVGcmFtZT1mdW5jdGlvbihlKXt0aGlzLl91cGRhdGVGcmFtZUlkKGUuaWQpO3RoaXMuX25lZWRzUmVuZGVyPXRoaXMuX3VwZGF0ZUFscGhhKGUuc3RhdGUuYWxwaGEpfHx0aGlzLl9uZWVkc1JlbmRlcjt0aGlzLl9uZWVkc1JlbmRlcj10aGlzLl91cGRhdGVBbHBoYU9sZChlLnN0YXRlLmFscGhhKXx8dGhpcy5fbmVlZHNSZW5kZXI7dGhpcy5fbmVlZHNSZW5kZXI9dGhpcy5fdXBkYXRlSW1hZ2VQbGFuZXMoZS5zdGF0ZSl8fHRoaXMuX25lZWRzUmVuZGVyfTtlLnByb3RvdHlwZS5zZXRUZXh0dXJlUHJvdmlkZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKGUhPT10aGlzLl9jdXJyZW50S2V5KXtyZXR1cm59dmFyIG49dC50ZXh0dXJlQ3JlYXRlZCQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3IuX3VwZGF0ZVRleHR1cmUoZSl9KTt2YXIgaT10LnRleHR1cmVVcGRhdGVkJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ci5fbmVlZHNSZW5kZXI9dHJ1ZX0pO3ZhciBvPWZ1bmN0aW9uKCl7bi51bnN1YnNjcmliZSgpO2kudW5zdWJzY3JpYmUoKTt0LmRpc3Bvc2UoKX07aWYoZSBpbiB0aGlzLl9wcm92aWRlckRpc3Bvc2Vycyl7dmFyIGE9dGhpcy5fcHJvdmlkZXJEaXNwb3NlcnNbZV07YSgpO2RlbGV0ZSB0aGlzLl9wcm92aWRlckRpc3Bvc2Vyc1tlXX10aGlzLl9wcm92aWRlckRpc3Bvc2Vyc1tlXT1vfTtlLnByb3RvdHlwZS51cGRhdGVUZXh0dXJlSW1hZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9uZWVkc1JlbmRlcj10cnVlO3ZhciByPXRoaXMuX2V4dGVuZCh7fSx0aGlzLl9zY2VuZS5wbGFuZXMsdGhpcy5fc2NlbmUucGxhbmVzT2xkLHRoaXMuX3NjZW5lLnBsYW5lc1BlcmlwaGVyeSk7Zm9yKHZhciBuIGluIHIpe2lmKCFyLmhhc093blByb3BlcnR5KG4pKXtjb250aW51ZX1pZihuIT09dC5rZXkpe2NvbnRpbnVlfXZhciBpPXJbbl07dmFyIG89aS5tYXRlcmlhbDt2YXIgYT1vLnVuaWZvcm1zLnByb2plY3RvclRleC52YWx1ZTthLmltYWdlPWU7YS5uZWVkc1VwZGF0ZT10cnVlfX07ZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fc2NlbmUucGxhbmVzO3ZhciBuPXRoaXMuX3NjZW5lLnBsYW5lc09sZDt2YXIgaT10aGlzLl9zY2VuZS5wbGFuZXNQZXJpcGhlcnk7dmFyIG89T2JqZWN0LmtleXMobikubGVuZ3RoPzE6dGhpcy5fYWxwaGE7dmFyIGE9T2JqZWN0LmtleXMobikubGVuZ3RoPzE6TWF0aC5mbG9vcih0aGlzLl9hbHBoYSk7Zm9yKHZhciBzIGluIHIpe2lmKCFyLmhhc093blByb3BlcnR5KHMpKXtjb250aW51ZX12YXIgdT1yW3NdO3UubWF0ZXJpYWwudW5pZm9ybXMub3BhY2l0eS52YWx1ZT1vfWZvcih2YXIgcyBpbiBuKXtpZighbi5oYXNPd25Qcm9wZXJ0eShzKSl7Y29udGludWV9dmFyIHU9bltzXTt1Lm1hdGVyaWFsLnVuaWZvcm1zLm9wYWNpdHkudmFsdWU9dGhpcy5fYWxwaGFPbGR9Zm9yKHZhciBzIGluIGkpe2lmKCFpLmhhc093blByb3BlcnR5KHMpKXtjb250aW51ZX12YXIgdT1pW3NdO3UubWF0ZXJpYWwudW5pZm9ybXMub3BhY2l0eS52YWx1ZT1hfXQucmVuZGVyKHRoaXMuX3NjZW5lLnNjZW5lUGVyaXBoZXJ5LGUpO3QucmVuZGVyKHRoaXMuX3NjZW5lLnNjZW5lLGUpO3QucmVuZGVyKHRoaXMuX3NjZW5lLnNjZW5lT2xkLGUpO2Zvcih2YXIgcyBpbiByKXtpZighci5oYXNPd25Qcm9wZXJ0eShzKSl7Y29udGludWV9dmFyIHU9cltzXTt1Lm1hdGVyaWFsLnVuaWZvcm1zLm9wYWNpdHkudmFsdWU9dGhpcy5fYWxwaGF9dC5yZW5kZXIodGhpcy5fc2NlbmUuc2NlbmUsZSl9O2UucHJvdG90eXBlLmNsZWFyTmVlZHNSZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLl9uZWVkc1JlbmRlcj1mYWxzZX07ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX3NjZW5lLmNsZWFyKCl9O2UucHJvdG90eXBlLl91cGRhdGVGcmFtZUlkPWZ1bmN0aW9uKGUpe3RoaXMuX2ZyYW1lSWQ9ZX07ZS5wcm90b3R5cGUuX3VwZGF0ZUFscGhhPWZ1bmN0aW9uKGUpe2lmKGU9PT10aGlzLl9hbHBoYSl7cmV0dXJuIGZhbHNlfXRoaXMuX2FscGhhPWU7cmV0dXJuIHRydWV9O2UucHJvdG90eXBlLl91cGRhdGVBbHBoYU9sZD1mdW5jdGlvbihlKXtpZihlPDF8fHRoaXMuX2FscGhhT2xkPT09MCl7cmV0dXJuIGZhbHNlfXRoaXMuX2FscGhhT2xkPU1hdGgubWF4KDAsdGhpcy5fYWxwaGFPbGQtdGhpcy5fZmFkZU91dFNwZWVkKTtyZXR1cm4gdHJ1ZX07ZS5wcm90b3R5cGUuX3VwZGF0ZUltYWdlUGxhbmVzPWZ1bmN0aW9uKGUpe2lmKGUuY3VycmVudE5vZGU9PW51bGx8fGUuY3VycmVudE5vZGUua2V5PT09dGhpcy5fY3VycmVudEtleSl7cmV0dXJuIGZhbHNlfXZhciB0PWUucHJldmlvdXNOb2RlIT1udWxsP2UucHJldmlvdXNOb2RlLmtleTpudWxsO3ZhciByPWUuY3VycmVudE5vZGUua2V5O2lmKHRoaXMuX3ByZXZpb3VzS2V5IT09dCYmdGhpcy5fcHJldmlvdXNLZXkhPT1yJiZ0aGlzLl9wcmV2aW91c0tleSBpbiB0aGlzLl9wcm92aWRlckRpc3Bvc2Vycyl7dmFyIG49dGhpcy5fcHJvdmlkZXJEaXNwb3NlcnNbdGhpcy5fcHJldmlvdXNLZXldO24oKTtkZWxldGUgdGhpcy5fcHJvdmlkZXJEaXNwb3NlcnNbdGhpcy5fcHJldmlvdXNLZXldfWlmKHQhPW51bGwpe2lmKHQhPT10aGlzLl9jdXJyZW50S2V5JiZ0IT09dGhpcy5fcHJldmlvdXNLZXkpe3ZhciBpPXRoaXMuX2ZhY3RvcnkuY3JlYXRlTWVzaChlLnByZXZpb3VzTm9kZSxlLnByZXZpb3VzVHJhbnNmb3JtKTt2YXIgbz17fTtvW3RdPWk7dGhpcy5fc2NlbmUudXBkYXRlSW1hZ2VQbGFuZXMobyl9dGhpcy5fcHJldmlvdXNLZXk9dH10aGlzLl9jdXJyZW50S2V5PXI7dmFyIGE9dGhpcy5fZmFjdG9yeS5jcmVhdGVNZXNoKGUuY3VycmVudE5vZGUsZS5jdXJyZW50VHJhbnNmb3JtKTt2YXIgcz17fTtzW3JdPWE7dGhpcy5fc2NlbmUudXBkYXRlSW1hZ2VQbGFuZXMocyk7dGhpcy5fYWxwaGFPbGQ9MTtyZXR1cm4gdHJ1ZX07ZS5wcm90b3R5cGUuX3VwZGF0ZVRleHR1cmU9ZnVuY3Rpb24oZSl7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZTt2YXIgdD10aGlzLl9zY2VuZS5wbGFuZXM7Zm9yKHZhciByIGluIHQpe2lmKCF0Lmhhc093blByb3BlcnR5KHIpKXtjb250aW51ZX12YXIgbj10W3JdO3ZhciBpPW4ubWF0ZXJpYWw7dmFyIG89aS51bmlmb3Jtcy5wcm9qZWN0b3JUZXgudmFsdWU7aS51bmlmb3Jtcy5wcm9qZWN0b3JUZXgudmFsdWU9bnVsbDtvLmRpc3Bvc2UoKTtpLnVuaWZvcm1zLnByb2plY3RvclRleC52YWx1ZT1lfX07ZS5wcm90b3R5cGUuX2V4dGVuZD1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt0W3ItMV09YXJndW1lbnRzW3JdfWZvcih2YXIgbj0wLGk9dDtuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtmb3IodmFyIGEgaW4gbyl7aWYoIW8uaGFzT3duUHJvcGVydHkoYSkpe2NvbnRpbnVlfWVbYV09b1thXX19cmV0dXJuIGV9O3JldHVybiBlfSgpO3IuSW1hZ2VQbGFuZUdMUmVuZGVyZXI9aTtyLmRlZmF1bHQ9aX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxfV0sMzI0OltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDMyNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Db3ZlclN0YXRlPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiSGlkZGVuXCJdPTBdPVwiSGlkZGVuXCI7ZVtlW1wiTG9hZGluZ1wiXT0xXT1cIkxvYWRpbmdcIjtlW2VbXCJWaXNpYmxlXCJdPTJdPVwiVmlzaWJsZVwifSkobj1yLkNvdmVyU3RhdGV8fChyLkNvdmVyU3RhdGU9e30pKX0se31dLDMyNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TbGlkZXJNb2RlPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiTW90aW9uXCJdPTBdPVwiTW90aW9uXCI7ZVtlW1wiU3RhdGlvbmFyeVwiXT0xXT1cIlN0YXRpb25hcnlcIn0pKG49ci5TbGlkZXJNb2RlfHwoci5TbGlkZXJNb2RlPXt9KSl9LHt9XSwzMjc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbil7aWYobj09PXVuZGVmaW5lZCluPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiB0W3JdfX0pfTpmdW5jdGlvbihlLHQscixuKXtpZihuPT09dW5kZWZpbmVkKW49cjtlW25dPXRbcl19KTt2YXIgaT10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gZSlpZihyIT09XCJkZWZhdWx0XCImJiF0Lmhhc093blByb3BlcnR5KHIpKW4odCxlLHIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBvPWUoXCIuL0lDb3ZlckNvbmZpZ3VyYXRpb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJDb3ZlclN0YXRlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5Db3ZlclN0YXRlfX0pO3ZhciBhPWUoXCIuL0lTbGlkZXJDb25maWd1cmF0aW9uXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2xpZGVyTW9kZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuU2xpZGVyTW9kZX19KTtpKGUoXCIuLi9pbWFnZXBsYW5lL2ludGVyZmFjZXMvaW50ZXJmYWNlc1wiKSxyKTtpKGUoXCIuLi9tYXJrZXIvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpO2koZShcIi4uL3NwYXRpYWxkYXRhL2ludGVyZmFjZXMvaW50ZXJmYWNlc1wiKSxyKTtpKGUoXCIuLi90YWcvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpLHIpfSx7XCIuLi9pbWFnZXBsYW5lL2ludGVyZmFjZXMvaW50ZXJmYWNlc1wiOjMyNCxcIi4uL21hcmtlci9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjozMzcsXCIuLi9zcGF0aWFsZGF0YS9pbnRlcmZhY2VzL2ludGVyZmFjZXNcIjozNjUsXCIuLi90YWcvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCI6MzkwLFwiLi9JQ292ZXJDb25maWd1cmF0aW9uXCI6MzI1LFwiLi9JU2xpZGVyQ29uZmlndXJhdGlvblwiOjMyNn1dLDMyODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuS2V5UGxheUhhbmRsZXI9dm9pZCAwO3ZhciBpPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbz1lKFwiLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBoPWUoXCIuLi8uLi9FZGdlXCIpO3ZhciBhPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc310LnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dmFyIGw9dGhpczt0aGlzLl9rZXlEb3duU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5rZXlib2FyZFNlcnZpY2Uua2V5RG93biQucGlwZShpLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5wbGF5U2VydmljZS5wbGF5aW5nJCx0aGlzLl9uYXZpZ2F0b3IucGxheVNlcnZpY2UuZGlyZWN0aW9uJCx0aGlzLl9uYXZpZ2F0b3IucGxheVNlcnZpY2Uuc3BlZWQkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUoaS5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VxdWVuY2VFZGdlcyR9KSkpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdLGk9ZVszXSxvPWVbNF07aWYodC5hbHRLZXl8fHQuY3RybEtleXx8dC5tZXRhS2V5KXtyZXR1cm59c3dpdGNoKHQua2V5KXtjYXNlXCJEXCI6aWYoIXQuc2hpZnRLZXkpe3JldHVybn12YXIgYT1yP251bGw6bj09PWguRWRnZURpcmVjdGlvbi5OZXh0P2guRWRnZURpcmVjdGlvbi5QcmV2Om49PT1oLkVkZ2VEaXJlY3Rpb24uUHJldj9oLkVkZ2VEaXJlY3Rpb24uTmV4dDpudWxsO2lmKGEhPW51bGwpe2wuX25hdmlnYXRvci5wbGF5U2VydmljZS5zZXREaXJlY3Rpb24oYSl9YnJlYWs7Y2FzZVwiIFwiOmlmKHQuc2hpZnRLZXkpe3JldHVybn1pZihyKXtsLl9uYXZpZ2F0b3IucGxheVNlcnZpY2Uuc3RvcCgpfWVsc2V7Zm9yKHZhciBzPTAsdT1vLmVkZ2VzO3M8dS5sZW5ndGg7cysrKXt2YXIgYz11W3NdO2lmKGMuZGF0YS5kaXJlY3Rpb249PT1uKXtsLl9uYXZpZ2F0b3IucGxheVNlcnZpY2UucGxheSgpfX19YnJlYWs7Y2FzZVwiPFwiOmwuX25hdmlnYXRvci5wbGF5U2VydmljZS5zZXRTcGVlZChpLS4wNSk7YnJlYWs7Y2FzZVwiPlwiOmwuX25hdmlnYXRvci5wbGF5U2VydmljZS5zZXRTcGVlZChpKy4wNSk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dC5wcmV2ZW50RGVmYXVsdCgpfSl9O3QucHJvdG90eXBlLl9kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5fa2V5RG93blN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTt0LnByb3RvdHlwZS5fZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm57a2V5Wm9vbTplfX07cmV0dXJuIHR9KG8uSGFuZGxlckJhc2UpO3IuS2V5UGxheUhhbmRsZXI9YTtyLmRlZmF1bHQ9YX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vRWRnZVwiOjI5MixcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzI5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5LZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgdT1lKFwiLi4vLi4vRWRnZVwiKTt2YXIgYz1lKFwiLi4vLi4vRXJyb3JcIik7dmFyIGE9ZnVuY3Rpb24oZSl7bih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gZSE9PW51bGwmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXQucHJvdG90eXBlLl9lbmFibGU9ZnVuY3Rpb24oKXt2YXIgcz10aGlzO3ZhciBlPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUoaS5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VxdWVuY2VFZGdlcyR9KSk7dGhpcy5fa2V5RG93blN1YnNjcmlwdGlvbj10aGlzLl9jb250YWluZXIua2V5Ym9hcmRTZXJ2aWNlLmtleURvd24kLnBpcGUoaS53aXRoTGF0ZXN0RnJvbShlKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPW51bGw7c3dpdGNoKHQua2V5Q29kZSl7Y2FzZSAzODpuPXUuRWRnZURpcmVjdGlvbi5OZXh0O2JyZWFrO2Nhc2UgNDA6bj11LkVkZ2VEaXJlY3Rpb24uUHJldjticmVhaztkZWZhdWx0OnJldHVybn10LnByZXZlbnREZWZhdWx0KCk7aWYoIXQuYWx0S2V5fHx0LnNoaWZ0S2V5fHwhci5jYWNoZWQpe3JldHVybn1mb3IodmFyIGk9MCxvPXIuZWRnZXM7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07aWYoYS5kYXRhLmRpcmVjdGlvbj09PW4pe3MuX25hdmlnYXRvci5tb3ZlVG9LZXkkKGEudG8pLnN1YnNjcmliZSh1bmRlZmluZWQsZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2YgYy5BYm9ydE1hcGlsbGFyeUVycm9yKSl7Y29uc29sZS5lcnJvcihlKX19KTtyZXR1cm59fX0pfTt0LnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2tleURvd25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX07dC5wcm90b3R5cGUuX2dldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJue2tleVNlcXVlbmNlTmF2aWdhdGlvbjplfX07cmV0dXJuIHR9KG8uSGFuZGxlckJhc2UpO3IuS2V5U2VxdWVuY2VOYXZpZ2F0aW9uSGFuZGxlcj1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEsXCIuLi8uLi9FZGdlXCI6MjkyLFwiLi4vLi4vRXJyb3JcIjoyOTMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDMzMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuS2V5U3BhdGlhbE5hdmlnYXRpb25IYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgXz1lKFwiLi4vLi4vRWRnZVwiKTt2YXIgYT1lKFwiLi4vLi4vRXJyb3JcIik7dmFyIHM9ZnVuY3Rpb24obyl7bihlLG8pO2Z1bmN0aW9uIGUoZSx0LHIsbil7dmFyIGk9by5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO2kuX3NwYXRpYWw9bjtyZXR1cm4gaX1lLnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dmFyIGc9dGhpczt2YXIgZT10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJC5waXBlKGkuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNwYXRpYWxFZGdlcyR9KSk7dGhpcy5fa2V5RG93blN1YnNjcmlwdGlvbj10aGlzLl9jb250YWluZXIua2V5Ym9hcmRTZXJ2aWNlLmtleURvd24kLnBpcGUoaS53aXRoTGF0ZXN0RnJvbShlLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07dmFyIGk9bi5zdGF0ZS5jdXJyZW50Tm9kZS5wYW5vO3ZhciBvPW51bGw7c3dpdGNoKHQua2V5Q29kZSl7Y2FzZSAzNzpvPXQuc2hpZnRLZXkmJiFpP18uRWRnZURpcmVjdGlvbi5UdXJuTGVmdDpfLkVkZ2VEaXJlY3Rpb24uU3RlcExlZnQ7YnJlYWs7Y2FzZSAzODpvPXQuc2hpZnRLZXkmJiFpP18uRWRnZURpcmVjdGlvbi5QYW5vOl8uRWRnZURpcmVjdGlvbi5TdGVwRm9yd2FyZDticmVhaztjYXNlIDM5Om89dC5zaGlmdEtleSYmIWk/Xy5FZGdlRGlyZWN0aW9uLlR1cm5SaWdodDpfLkVkZ2VEaXJlY3Rpb24uU3RlcFJpZ2h0O2JyZWFrO2Nhc2UgNDA6bz10LnNoaWZ0S2V5JiYhaT9fLkVkZ2VEaXJlY3Rpb24uVHVyblU6Xy5FZGdlRGlyZWN0aW9uLlN0ZXBCYWNrd2FyZDticmVhaztkZWZhdWx0OnJldHVybn10LnByZXZlbnREZWZhdWx0KCk7aWYodC5hbHRLZXl8fCFyLmNhY2hlZHx8dC5zaGlmdEtleSYmaSl7cmV0dXJufWlmKCFpKXtnLl9tb3ZlRGlyKG8scil9ZWxzZXt2YXIgYT17fTthW18uRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmRdPU1hdGguUEk7YVtfLkVkZ2VEaXJlY3Rpb24uU3RlcEZvcndhcmRdPTA7YVtfLkVkZ2VEaXJlY3Rpb24uU3RlcExlZnRdPU1hdGguUEkvMjthW18uRWRnZURpcmVjdGlvbi5TdGVwUmlnaHRdPS1NYXRoLlBJLzI7dmFyIHM9Zy5fcm90YXRpb25Gcm9tQ2FtZXJhKG4uc3RhdGUuY2FtZXJhKS5waGk7dmFyIHU9Zy5fc3BhdGlhbC53cmFwQW5nbGUocythW29dKTt2YXIgYz1NYXRoLlBJLzQ7dmFyIGw9ci5lZGdlcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGF0YS5kaXJlY3Rpb249PT1fLkVkZ2VEaXJlY3Rpb24uUGFub3x8ZS5kYXRhLmRpcmVjdGlvbj09PW99KTt2YXIgaD1OdW1iZXIuTUFYX1ZBTFVFO3ZhciBwPW51bGw7Zm9yKHZhciBmPTAsZD1sO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgdj1kW2ZdO3ZhciBtPU1hdGguYWJzKGcuX3NwYXRpYWwud3JhcEFuZ2xlKHYuZGF0YS53b3JsZE1vdGlvbkF6aW11dGgtdSkpO2lmKG08TWF0aC5taW4oaCxjKSl7aD1tO3A9di50b319aWYocD09bnVsbCl7cmV0dXJufWcuX21vdmVUb0tleShwKX19KX07ZS5wcm90b3R5cGUuX2Rpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl9rZXlEb3duU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybntrZXlTcGF0aWFsTmF2aWdhdGlvbjplfX07ZS5wcm90b3R5cGUuX21vdmVEaXI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxuPXQuZWRnZXM7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07aWYoaS5kYXRhLmRpcmVjdGlvbj09PWUpe3RoaXMuX21vdmVUb0tleShpLnRvKTtyZXR1cm59fX07ZS5wcm90b3R5cGUuX21vdmVUb0tleT1mdW5jdGlvbihlKXt0aGlzLl9uYXZpZ2F0b3IubW92ZVRvS2V5JChlKS5zdWJzY3JpYmUodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIGEuQWJvcnRNYXBpbGxhcnlFcnJvcikpe2NvbnNvbGUuZXJyb3IoZSl9fSl9O2UucHJvdG90eXBlLl9yb3RhdGlvbkZyb21DYW1lcmE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sb29rYXQuY2xvbmUoKS5zdWIoZS5wb3NpdGlvbik7dmFyIHI9dC5jbG9uZSgpLmRvdChlLnVwKTt2YXIgbj10LmNsb25lKCkuc3ViKGUudXAuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihyKSk7dmFyIGk9TWF0aC5hdGFuMihuLnksbi54KTt2YXIgbz1NYXRoLlBJLzItdGhpcy5fc3BhdGlhbC5hbmdsZVRvUGxhbmUodC50b0FycmF5KCksWzAsMCwxXSk7cmV0dXJue3BoaTppLHRoZXRhOm99fTtyZXR1cm4gZX0oby5IYW5kbGVyQmFzZSk7ci5LZXlTcGF0aWFsTmF2aWdhdGlvbkhhbmRsZXI9cztyLmRlZmF1bHQ9c30se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vRWRnZVwiOjI5MixcIi4uLy4uL0Vycm9yXCI6MjkzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzMzE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLktleVpvb21IYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgYT1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHQscil8fHRoaXM7aS5fdmlld3BvcnRDb29yZHM9bjtyZXR1cm4gaX1lLnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dmFyIHM9dGhpczt0aGlzLl9rZXlEb3duU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5rZXlib2FyZFNlcnZpY2Uua2V5RG93biQucGlwZShpLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07aWYodC5hbHRLZXl8fHQuc2hpZnRLZXl8fHQuY3RybEtleXx8dC5tZXRhS2V5KXtyZXR1cm59dmFyIGk9MDtzd2l0Y2godC5rZXkpe2Nhc2VcIitcIjppPTE7YnJlYWs7Y2FzZVwiLVwiOmk9LTE7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBvPXMuX3ZpZXdwb3J0Q29vcmRzLnVucHJvamVjdEZyb21WaWV3cG9ydCgwLDAsci5wZXJzcGVjdGl2ZSk7dmFyIGE9bi5wcm9qZWN0QmFzaWMoby50b0FycmF5KCkpO3MuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuem9vbUluKGksYSl9KX07ZS5wcm90b3R5cGUuX2Rpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl9rZXlEb3duU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybntrZXlab29tOmV9fTtyZXR1cm4gZX0oby5IYW5kbGVyQmFzZSk7ci5LZXlab29tSGFuZGxlcj1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDMzMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuS2V5Ym9hcmRDb21wb25lbnQ9dm9pZCAwO3ZhciBvPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIGE9ZShcIi4uLy4uL0dlb1wiKTt2YXIgaT1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO24uX2tleVBsYXlIYW5kbGVyPW5ldyBvLktleVBsYXlIYW5kbGVyKG4sdCxyKTtuLl9rZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyPW5ldyBvLktleVNlcXVlbmNlTmF2aWdhdGlvbkhhbmRsZXIobix0LHIpO24uX2tleVNwYXRpYWxOYXZpZ2F0aW9uSGFuZGxlcj1uZXcgby5LZXlTcGF0aWFsTmF2aWdhdGlvbkhhbmRsZXIobix0LHIsbmV3IGEuU3BhdGlhbCk7bi5fa2V5Wm9vbUhhbmRsZXI9bmV3IG8uS2V5Wm9vbUhhbmRsZXIobix0LHIsbmV3IGEuVmlld3BvcnRDb29yZHMpO3JldHVybiBufU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImtleVBsYXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleVBsYXlIYW5kbGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwia2V5U2VxdWVuY2VOYXZpZ2F0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwia2V5U3BhdGlhbE5hdmlnYXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleVNwYXRpYWxOYXZpZ2F0aW9uSGFuZGxlcn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImtleVpvb21cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleVpvb21IYW5kbGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9jb25maWd1cmF0aW9uU3Vic2NyaXB0aW9uPXRoaXMuX2NvbmZpZ3VyYXRpb24kLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZihlLmtleVBsYXkpe3QuX2tleVBsYXlIYW5kbGVyLmVuYWJsZSgpfWVsc2V7dC5fa2V5UGxheUhhbmRsZXIuZGlzYWJsZSgpfWlmKGUua2V5U2VxdWVuY2VOYXZpZ2F0aW9uKXt0Ll9rZXlTZXF1ZW5jZU5hdmlnYXRpb25IYW5kbGVyLmVuYWJsZSgpfWVsc2V7dC5fa2V5U2VxdWVuY2VOYXZpZ2F0aW9uSGFuZGxlci5kaXNhYmxlKCl9aWYoZS5rZXlTcGF0aWFsTmF2aWdhdGlvbil7dC5fa2V5U3BhdGlhbE5hdmlnYXRpb25IYW5kbGVyLmVuYWJsZSgpfWVsc2V7dC5fa2V5U3BhdGlhbE5hdmlnYXRpb25IYW5kbGVyLmRpc2FibGUoKX1pZihlLmtleVpvb20pe3QuX2tleVpvb21IYW5kbGVyLmVuYWJsZSgpfWVsc2V7dC5fa2V5Wm9vbUhhbmRsZXIuZGlzYWJsZSgpfX0pfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2NvbmZpZ3VyYXRpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9rZXlQbGF5SGFuZGxlci5kaXNhYmxlKCk7dGhpcy5fa2V5U2VxdWVuY2VOYXZpZ2F0aW9uSGFuZGxlci5kaXNhYmxlKCk7dGhpcy5fa2V5U3BhdGlhbE5hdmlnYXRpb25IYW5kbGVyLmRpc2FibGUoKTt0aGlzLl9rZXlab29tSGFuZGxlci5kaXNhYmxlKCl9O2UucHJvdG90eXBlLl9nZXREZWZhdWx0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybntrZXlQbGF5OnRydWUsa2V5U2VxdWVuY2VOYXZpZ2F0aW9uOnRydWUsa2V5U3BhdGlhbE5hdmlnYXRpb246dHJ1ZSxrZXlab29tOnRydWV9fTtlLmNvbXBvbmVudE5hbWU9XCJrZXlib2FyZFwiO3JldHVybiBlfShvLkNvbXBvbmVudCk7ci5LZXlib2FyZENvbXBvbmVudD1pO28uQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihpKTtyLmRlZmF1bHQ9aX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vR2VvXCI6Mjk0fV0sMzMzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgbj1lKFwiLi9NYXJrZXJDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJNYXJrZXJDb21wb25lbnRcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBuLk1hcmtlckNvbXBvbmVudH19KTt2YXIgaT1lKFwiLi9tYXJrZXIvU2ltcGxlTWFya2VyXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiU2ltcGxlTWFya2VyXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5TaW1wbGVNYXJrZXJ9fSk7dmFyIG89ZShcIi4vbWFya2VyL0NpcmNsZU1hcmtlclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkNpcmNsZU1hcmtlclwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8uQ2lyY2xlTWFya2VyfX0pfSx7XCIuL01hcmtlckNvbXBvbmVudFwiOjMzNCxcIi4vbWFya2VyL0NpcmNsZU1hcmtlclwiOjMzOCxcIi4vbWFya2VyL1NpbXBsZU1hcmtlclwiOjM0MH1dLDMzNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuTWFya2VyQ29tcG9uZW50PXZvaWQgMDt2YXIgcD1lKFwicnhqc1wiKTt2YXIgZj1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIFQ9ZShcInRocmVlXCIpO3ZhciBvPWUoXCJ3aGVuXCIpO3ZhciBhPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIGQ9ZShcIi4uLy4uL1JlbmRlclwiKTt2YXIgcz1lKFwiLi4vLi4vR3JhcGhcIik7dmFyIHU9ZShcIi4uLy4uL0dlb1wiKTt2YXIgaT1mdW5jdGlvbihpKXtuKEMsaSk7ZnVuY3Rpb24gQyhlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO24uX3JlbGF0aXZlR3JvdW5kQWx0aXR1ZGU9LTI7bi5fZ2VvQ29vcmRzPW5ldyB1Lkdlb0Nvb3JkcztuLl9ncmFwaENhbGN1bGF0b3I9bmV3IHMuR3JhcGhDYWxjdWxhdG9yO24uX21hcmtlclNjZW5lPW5ldyBhLk1hcmtlclNjZW5lO24uX21hcmtlclNldD1uZXcgYS5NYXJrZXJTZXQ7bi5fdmlld3BvcnRDb29yZHM9bmV3IHUuVmlld3BvcnRDb29yZHM7cmV0dXJuIG59Qy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3RoaXMuX21hcmtlclNldC5hZGQoZSl9O0MucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFya2VyU2V0LmdldChlKX07Qy5wcm90b3R5cGUuZ2V0QWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcmtlclNldC5nZXRBbGwoKX07Qy5wcm90b3R5cGUuZ2V0TWFya2VySWRBdD1mdW5jdGlvbihuKXt2YXIgaT10aGlzO3JldHVybiBvLnByb21pc2UoZnVuY3Rpb24odCxyKXtpLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLnBpcGUoZi5maXJzdCgpLGYubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWkuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1RvVmlld3BvcnQoblswXSxuWzFdLGkuX2NvbnRhaW5lci5lbGVtZW50KTt2YXIgcj1pLl9tYXJrZXJTY2VuZS5pbnRlcnNlY3RPYmplY3RzKHQsZS5wZXJzcGVjdGl2ZSk7cmV0dXJuIHJ9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QoZSl9LGZ1bmN0aW9uKGUpe3IoZSl9KX0pfTtDLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcmtlclNldC5oYXMoZSl9O0MucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXt0aGlzLl9tYXJrZXJTZXQucmVtb3ZlKGUpfTtDLnByb3RvdHlwZS5yZW1vdmVBbGw9ZnVuY3Rpb24oKXt0aGlzLl9tYXJrZXJTZXQucmVtb3ZlQWxsKCl9O0MucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciBNPXRoaXM7dmFyIGU9dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLnBpcGUoZi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY2FtZXJhLnBvc2l0aW9uLnorTS5fcmVsYXRpdmVHcm91bmRBbHRpdHVkZX0pLGYuZGlzdGluY3RVbnRpbENoYW5nZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5hYnMoZS10KTwuMDF9KSxmLnB1Ymxpc2hSZXBsYXkoMSksZi5yZWZDb3VudCgpKTt2YXIgdD1wLmNvbWJpbmVMYXRlc3QoZSx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJlZmVyZW5jZSQpLnBpcGUoZi5maXJzdCgpLGYubWFwKGZ1bmN0aW9uKCl7fSksZi5wdWJsaXNoUmVwbGF5KDEpLGYucmVmQ291bnQoKSk7dmFyIHI9dGhpcy5fY29uZmlndXJhdGlvbiQucGlwZShmLm1hcChmdW5jdGlvbihlKXtyZXR1cm57dmlzaWJsZUJCb3hTaXplOk1hdGgubWF4KDEsTWF0aC5taW4oMjAwLGUudmlzaWJsZUJCb3hTaXplKSl9fSkpO3ZhciBuPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUoZi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGF0TG9ufSksZi5wdWJsaXNoUmVwbGF5KDEpLGYucmVmQ291bnQoKSk7dmFyIGk9cC5jb21iaW5lTGF0ZXN0KHIsbikucGlwZShmLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gTS5fZ3JhcGhDYWxjdWxhdG9yLmJvdW5kaW5nQm94Q29ybmVycyhyLHQudmlzaWJsZUJCb3hTaXplLzIpfSksZi5wdWJsaXNoUmVwbGF5KDEpLGYucmVmQ291bnQoKSk7dmFyIG89cC5jb21iaW5lTGF0ZXN0KHAuY29uY2F0KHAub2YodGhpcy5fbWFya2VyU2V0KSx0aGlzLl9tYXJrZXJTZXQuY2hhbmdlZCQpLGkpLnBpcGUoZi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIHQuc2VhcmNoKHIpfSkpO3RoaXMuX3NldENoYW5nZWRTdWJzY3JpcHRpb249dC5waXBlKGYuc3dpdGNoTWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG8ucGlwZShmLndpdGhMYXRlc3RGcm9tKE0uX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UucmVmZXJlbmNlJCxlKSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgaT1NLl9nZW9Db29yZHM7dmFyIG89TS5fbWFya2VyU2NlbmU7dmFyIGE9by5tYXJrZXJzO3ZhciBzPU9iamVjdC5hc3NpZ24oe30sYSk7Zm9yKHZhciB1PTAsYz10O3U8Yy5sZW5ndGg7dSsrKXt2YXIgbD1jW3VdO2lmKGwuaWQgaW4gYSl7ZGVsZXRlIHNbbC5pZF19ZWxzZXt2YXIgaD1pLmdlb2RldGljVG9FbnUobC5sYXRMb24ubGF0LGwubGF0TG9uLmxvbixyLmFsdCtuLHIubGF0LHIubG9uLHIuYWx0KTtvLmFkZChsLGgpfX1mb3IodmFyIHAgaW4gcyl7aWYoIXMuaGFzT3duUHJvcGVydHkocCkpe2NvbnRpbnVlfW8ucmVtb3ZlKHApfX0pO3RoaXMuX21hcmtlcnNVcGRhdGVkU3Vic2NyaXB0aW9uPXQucGlwZShmLnN3aXRjaE1hcChmdW5jdGlvbigpe3JldHVybiBNLl9tYXJrZXJTZXQudXBkYXRlZCQucGlwZShmLndpdGhMYXRlc3RGcm9tKGksTS5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5yZWZlcmVuY2UkLGUpKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1yWzBdLGk9clsxXSxvPWVbMl0sYT1lWzNdO3ZhciBzPU0uX2dlb0Nvb3Jkczt2YXIgdT1NLl9tYXJrZXJTY2VuZTtmb3IodmFyIGM9MCxsPXQ7YzxsLmxlbmd0aDtjKyspe3ZhciBoPWxbY107dmFyIHA9dS5oYXMoaC5pZCk7dmFyIGY9aC5sYXRMb24ubGF0Pm4ubGF0JiZoLmxhdExvbi5sYXQ8aS5sYXQmJmgubGF0TG9uLmxvbj5uLmxvbiYmaC5sYXRMb24ubG9uPGkubG9uO2lmKGYpe3ZhciBkPXMuZ2VvZGV0aWNUb0VudShoLmxhdExvbi5sYXQsaC5sYXRMb24ubG9uLG8uYWx0K2Esby5sYXQsby5sb24sby5hbHQpO3UuYWRkKGgsZCl9ZWxzZSBpZighZiYmcCl7dS5yZW1vdmUoaC5pZCl9fX0pO3RoaXMuX3JlZmVyZW5jZVN1YnNjcmlwdGlvbj10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJlZmVyZW5jZSQucGlwZShmLnNraXAoMSksZi53aXRoTGF0ZXN0RnJvbShlKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPU0uX2dlb0Nvb3Jkczt2YXIgaT1NLl9tYXJrZXJTY2VuZTtmb3IodmFyIG89MCxhPWkuZ2V0QWxsKCk7bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107dmFyIHU9bi5nZW9kZXRpY1RvRW51KHMubGF0TG9uLmxhdCxzLmxhdExvbi5sb24sdC5hbHQrcix0LmxhdCx0Lmxvbix0LmFsdCk7aS51cGRhdGUocy5pZCx1KX19KTt0aGlzLl9hZGp1c3RIZWlnaHRTdWJzY3JpcHRpb249ZS5waXBlKGYuc2tpcCgxKSxmLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UucmVmZXJlbmNlJCxuKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgaT1NLl9nZW9Db29yZHM7dmFyIG89TS5fbWFya2VyU2NlbmU7dmFyIGE9aS5nZW9kZXRpY1RvRW51KG4ubGF0LG4ubG9uLHIuYWx0K3Qsci5sYXQsci5sb24sci5hbHQpO2Zvcih2YXIgcz0wLHU9by5nZXRBbGwoKTtzPHUubGVuZ3RoO3MrKyl7dmFyIGM9dVtzXTt2YXIgbD1pLmdlb2RldGljVG9FbnUoYy5sYXRMb24ubGF0LGMubGF0TG9uLmxvbixyLmFsdCt0LHIubGF0LHIubG9uLHIuYWx0KTt2YXIgaD1sWzBdLWFbMF07dmFyIHA9bFsxXS1hWzFdO3ZhciBmPU1hdGguc3FydChoKmgrcCpwKTtpZihmPjUwKXtjb250aW51ZX1vLmxlcnBBbHRpdHVkZShjLmlkLHQsTWF0aC5taW4oMSxNYXRoLm1heCgwLDEuMi0xLjIqZi81MCkpKX19KTt0aGlzLl9yZW5kZXJTdWJzY3JpcHRpb249dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLnBpcGUoZi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9TS5fbWFya2VyU2NlbmU7cmV0dXJue25hbWU6TS5fbmFtZSxyZW5kZXI6e2ZyYW1lSWQ6ZS5pZCxuZWVkc1JlbmRlcjp0Lm5lZWRzUmVuZGVyLHJlbmRlcjp0LnJlbmRlci5iaW5kKHQpLHN0YWdlOmQuR0xSZW5kZXJTdGFnZS5Gb3JlZ3JvdW5kfX19KSkuc3Vic2NyaWJlKHRoaXMuX2NvbnRhaW5lci5nbFJlbmRlcmVyLnJlbmRlciQpO3ZhciBhPXAuY29tYmluZUxhdGVzdCh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VNb3ZlJCkucGlwZShmLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTt2YXIgbj1NLl9jb250YWluZXIuZWxlbWVudDt2YXIgaT1NLl92aWV3cG9ydENvb3Jkcy5jYW52YXNQb3NpdGlvbihyLG4pLG89aVswXSxhPWlbMV07dmFyIHM9TS5fdmlld3BvcnRDb29yZHMuY2FudmFzVG9WaWV3cG9ydChvLGEsbik7dmFyIHU9TS5fbWFya2VyU2NlbmUuaW50ZXJzZWN0T2JqZWN0cyhzLHQucGVyc3BlY3RpdmUpO3JldHVybiB1fSksZi5wdWJsaXNoUmVwbGF5KDEpLGYucmVmQ291bnQoKSk7dmFyIHM9dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5maWx0ZXJlZCQodGhpcy5fbmFtZSx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLm1vdXNlRHJhZ1N0YXJ0JCkucGlwZShmLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdHJ1ZX0pKTt2YXIgdT10aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkJCh0aGlzLl9uYW1lLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VEcmFnRW5kJCkucGlwZShmLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZmFsc2V9KSk7dmFyIGM9cC5tZXJnZShzLHUpLnBpcGUoZi5zdGFydFdpdGgoZmFsc2UpKTt0aGlzLl9kcmFnRXZlbnRTdWJzY3JpcHRpb249cC5tZXJnZShzLnBpcGUoZi53aXRoTGF0ZXN0RnJvbShhKSkscC5jb21iaW5lTGF0ZXN0KHUscC5vZihudWxsKSkpLnBpcGUoZi5zdGFydFdpdGgoW2ZhbHNlLG51bGxdKSxmLnBhaXJ3aXNlKCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTt2YXIgbj1yWzBdO3ZhciBpPW4/Qy5kcmFnc3RhcnQ6Qy5kcmFnZW5kO3ZhciBvPW4/clsxXTp0WzFdO3ZhciBhPU0uX21hcmtlclNjZW5lLmdldChvKTt2YXIgcz17bWFya2VyOmEsdGFyZ2V0Ok0sdHlwZTppfTtNLmZpcmUoaSxzKX0pO3ZhciBsPXAubWVyZ2UodGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZURvd24kLnBpcGUoZi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHRydWV9KSksdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kb2N1bWVudE1vdXNlVXAkLnBpcGUoZi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGZhbHNlfSkpKS5waXBlKGYuc3RhcnRXaXRoKGZhbHNlKSk7dGhpcy5fbW91c2VDbGFpbVN1YnNjcmlwdGlvbj1wLmNvbWJpbmVMYXRlc3QodGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5hY3RpdmUkLGEucGlwZShmLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLGwsYykucGlwZShmLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl0saT1lWzNdO3JldHVybiF0JiZyIT1udWxsJiZufHxpfSksZi5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoZSl7TS5fY29udGFpbmVyLm1vdXNlU2VydmljZS5jbGFpbU1vdXNlKE0uX25hbWUsMSk7TS5fY29udGFpbmVyLm1vdXNlU2VydmljZS5jbGFpbVdoZWVsKE0uX25hbWUsMSl9ZWxzZXtNLl9jb250YWluZXIubW91c2VTZXJ2aWNlLnVuY2xhaW1Nb3VzZShNLl9uYW1lKTtNLl9jb250YWluZXIubW91c2VTZXJ2aWNlLnVuY2xhaW1XaGVlbChNLl9uYW1lKX19KTt2YXIgaD10aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkJCh0aGlzLl9uYW1lLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VEcmFnU3RhcnQkKS5waXBlKGYud2l0aExhdGVzdEZyb20oYSx0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkKSxmLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07dmFyIGk9TS5fbWFya2VyU2NlbmUuZ2V0KHIpO3ZhciBvPU0uX2NvbnRhaW5lci5lbGVtZW50O3ZhciBhPU0uX3ZpZXdwb3J0Q29vcmRzLnByb2plY3RUb0NhbnZhcyhpLmdlb21ldHJ5LnBvc2l0aW9uLnRvQXJyYXkoKSxvLG4ucGVyc3BlY3RpdmUpLHM9YVswXSx1PWFbMV07dmFyIGM9TS5fdmlld3BvcnRDb29yZHMuY2FudmFzUG9zaXRpb24odCxvKSxsPWNbMF0saD1jWzFdO3ZhciBwPVtsLXMsaC11XTtyZXR1cm5baSxwLG5dfSksZi5wdWJsaXNoUmVwbGF5KDEpLGYucmVmQ291bnQoKSk7dGhpcy5fdXBkYXRlTWFya2VyU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZmlsdGVyZWQkKHRoaXMuX25hbWUsdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZURyYWckKS5waXBlKGYud2l0aExhdGVzdEZyb20oaCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJlZmVyZW5jZSQscikpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPXJbMF0saT1yWzFdLG89clsyXSxhPWVbMl0scz1lWzNdO2lmKCFNLl9tYXJrZXJTY2VuZS5oYXMobi5pZCkpe3JldHVybn12YXIgdT1NLl9jb250YWluZXIuZWxlbWVudDt2YXIgYz1NLl92aWV3cG9ydENvb3Jkcy5jYW52YXNQb3NpdGlvbih0LHUpLGw9Y1swXSxoPWNbMV07dmFyIHA9bC1pWzBdO3ZhciBmPWgtaVsxXTt2YXIgZD1NLl92aWV3cG9ydENvb3Jkcy5jYW52YXNUb1ZpZXdwb3J0KHAsZix1KSx2PWRbMF0sbT1kWzFdO3ZhciBnPW5ldyBULlZlY3RvcjModixtLDEpLnVucHJvamVjdChvLnBlcnNwZWN0aXZlKS5zdWIoby5wZXJzcGVjdGl2ZS5wb3NpdGlvbikubm9ybWFsaXplKCk7dmFyIF89TWF0aC5taW4oTS5fcmVsYXRpdmVHcm91bmRBbHRpdHVkZS9nLnoscy52aXNpYmxlQkJveFNpemUvMi0uMSk7aWYoXzwwKXtyZXR1cm59dmFyIHk9Zy5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKF8pLmFkZChvLnBlcnNwZWN0aXZlLnBvc2l0aW9uKTt5Lno9by5wZXJzcGVjdGl2ZS5wb3NpdGlvbi56K00uX3JlbGF0aXZlR3JvdW5kQWx0aXR1ZGU7dmFyIGI9TS5fZ2VvQ29vcmRzLmVudVRvR2VvZGV0aWMoeS54LHkueSx5LnosYS5sYXQsYS5sb24sYS5hbHQpLHg9YlswXSx3PWJbMV07TS5fbWFya2VyU2NlbmUudXBkYXRlKG4uaWQseS50b0FycmF5KCkse2xhdDp4LGxvbjp3fSk7TS5fbWFya2VyU2V0LnVwZGF0ZShuKTt2YXIgUz17bWFya2VyOm4sdGFyZ2V0Ok0sdHlwZTpDLmNoYW5nZWR9O00uZmlyZShDLmNoYW5nZWQsUyl9KX07Qy5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9hZGp1c3RIZWlnaHRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9kcmFnRXZlbnRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9tYXJrZXJzVXBkYXRlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX21vdXNlQ2xhaW1TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9yZWZlcmVuY2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9yZW5kZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXRDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdXBkYXRlTWFya2VyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fbWFya2VyU2NlbmUuY2xlYXIoKX07Qy5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue3Zpc2libGVCQm94U2l6ZToxMDB9fTtDLmNvbXBvbmVudE5hbWU9XCJtYXJrZXJcIjtDLmNoYW5nZWQ9XCJjaGFuZ2VkXCI7Qy5kcmFnc3RhcnQ9XCJkcmFnc3RhcnRcIjtDLmRyYWdlbmQ9XCJkcmFnZW5kXCI7cmV0dXJuIEN9KGEuQ29tcG9uZW50KTtyLk1hcmtlckNvbXBvbmVudD1pO2EuQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihpKTtyLmRlZmF1bHQ9aX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vR2VvXCI6Mjk0LFwiLi4vLi4vR3JhcGhcIjoyOTUsXCIuLi8uLi9SZW5kZXJcIjoyOTcscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLHRocmVlOjI0Mix3aGVuOjI4OH1dLDMzNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5NYXJrZXJTY2VuZT12b2lkIDA7dmFyIHU9ZShcInRocmVlXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX25lZWRzUmVuZGVyPWZhbHNlO3RoaXMuX2ludGVyYWN0aXZlT2JqZWN0cz1bXTt0aGlzLl9tYXJrZXJzPXt9O3RoaXMuX29iamVjdE1hcmtlcnM9e307dGhpcy5fcmF5Y2FzdGVyPSEhdD90Om5ldyB1LlJheWNhc3Rlcjt0aGlzLl9zY2VuZT0hIWU/ZTpuZXcgdS5TY2VuZX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYXJrZXJzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXJrZXJzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibmVlZHNSZW5kZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25lZWRzUmVuZGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsdCl7aWYoZS5pZCBpbiB0aGlzLl9tYXJrZXJzKXt0aGlzLl9kaXNwb3NlKGUuaWQpfWUuY3JlYXRlR2VvbWV0cnkodCk7dGhpcy5fc2NlbmUuYWRkKGUuZ2VvbWV0cnkpO3RoaXMuX21hcmtlcnNbZS5pZF09ZTtmb3IodmFyIHI9MCxuPWUuZ2V0SW50ZXJhY3RpdmVPYmplY3RzKCk7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07dGhpcy5faW50ZXJhY3RpdmVPYmplY3RzLnB1c2goaSk7dGhpcy5fb2JqZWN0TWFya2Vyc1tpLnV1aWRdPWUuaWR9dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5fbWFya2Vycyl7aWYoIXRoaXMuX21hcmtlcnMuaGFzT3duUHJvcGVydHkpe2NvbnRpbnVlfXRoaXMuX2Rpc3Bvc2UoZSl9dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXJrZXJzW2VdfTtlLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9tYXJrZXJzKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX21hcmtlcnNbZV19KX07ZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX21hcmtlcnN9O2UucHJvdG90eXBlLmludGVyc2VjdE9iamVjdHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lWzBdLG49ZVsxXTt0aGlzLl9yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShuZXcgdS5WZWN0b3IyKHIsbiksdCk7dmFyIGk9dGhpcy5fcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHModGhpcy5faW50ZXJhY3RpdmVPYmplY3RzKTtmb3IodmFyIG89MCxhPWk7bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107aWYocy5vYmplY3QudXVpZCBpbiB0aGlzLl9vYmplY3RNYXJrZXJzKXtyZXR1cm4gdGhpcy5fb2JqZWN0TWFya2Vyc1tzLm9iamVjdC51dWlkXX19cmV0dXJuIG51bGx9O2UucHJvdG90eXBlLmxlcnBBbHRpdHVkZT1mdW5jdGlvbihlLHQscil7aWYoIShlIGluIHRoaXMuX21hcmtlcnMpKXtyZXR1cm59dGhpcy5fbWFya2Vyc1tlXS5sZXJwQWx0aXR1ZGUodCxyKTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7aWYoIShlIGluIHRoaXMuX21hcmtlcnMpKXtyZXR1cm59dGhpcy5fZGlzcG9zZShlKTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oZSx0KXt0LnJlbmRlcih0aGlzLl9zY2VuZSxlKTt0aGlzLl9uZWVkc1JlbmRlcj1mYWxzZX07ZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsdCxyKXtpZighKGUgaW4gdGhpcy5fbWFya2Vycykpe3JldHVybn12YXIgbj10aGlzLl9tYXJrZXJzW2VdO24udXBkYXRlUG9zaXRpb24odCxyKTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS5fZGlzcG9zZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tYXJrZXJzW2VdO3RoaXMuX3NjZW5lLnJlbW92ZSh0Lmdlb21ldHJ5KTtmb3IodmFyIHI9MCxuPXQuZ2V0SW50ZXJhY3RpdmVPYmplY3RzKCk7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07dmFyIG89dGhpcy5faW50ZXJhY3RpdmVPYmplY3RzLmluZGV4T2YoaSk7aWYobyE9PS0xKXt0aGlzLl9pbnRlcmFjdGl2ZU9iamVjdHMuc3BsaWNlKG8sMSl9ZWxzZXtjb25zb2xlLndhcm4oXCJPYmplY3QgZG9lcyBub3QgZXhpc3QgKFwiK2kuaWQrXCIpIGZvciBcIitlKX1kZWxldGUgdGhpcy5fb2JqZWN0TWFya2Vyc1tpLnV1aWRdfXQuZGlzcG9zZUdlb21ldHJ5KCk7ZGVsZXRlIHRoaXMuX21hcmtlcnNbZV19O3JldHVybiBlfSgpO3IuTWFya2VyU2NlbmU9bjtyLmRlZmF1bHQ9bn0se3RocmVlOjI0Mn1dLDMzNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5NYXJrZXJTZXQ9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWUoXCIuLi8uLi9HZW9cIik7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5faGFzaD17fTt0aGlzLl9pbmRleD1uZXcgaS5HZW9SQnVzaCgxNik7dGhpcy5faW5kZXhDaGFuZ2VkJD1uZXcgbi5TdWJqZWN0O3RoaXMuX3VwZGF0ZWQkPW5ldyBuLlN1YmplY3R9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hhbmdlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGV4Q2hhbmdlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ1cGRhdGVkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9W107dmFyIHI9dGhpcy5faGFzaDt2YXIgbj10aGlzLl9pbmRleDtmb3IodmFyIGk9MCxvPWU7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07dmFyIHM9YS5pZDtpZihzIGluIHIpe24ucmVtb3ZlKHJbc10pO3QucHVzaChhKX12YXIgdT17bGF0OmEubGF0TG9uLmxhdCxsb246YS5sYXRMb24ubG9uLG1hcmtlcjphfTtyW3NdPXU7bi5pbnNlcnQodSl9aWYodC5sZW5ndGg+MCl7dGhpcy5fdXBkYXRlZCQubmV4dCh0KX1pZihlLmxlbmd0aD50Lmxlbmd0aCl7dGhpcy5faW5kZXhDaGFuZ2VkJC5uZXh0KHRoaXMpfX07ZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX2hhc2h9O2UucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXMoZSk/dGhpcy5faGFzaFtlXS5tYXJrZXI6dW5kZWZpbmVkfTtlLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5kZXguYWxsKCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcmtlcn0pfTtlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faGFzaDt2YXIgcj10aGlzLl9pbmRleDt2YXIgbj1mYWxzZTtmb3IodmFyIGk9MCxvPWU7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07aWYoIShhIGluIHQpKXtjb250aW51ZX12YXIgcz10W2FdO3IucmVtb3ZlKHMpO2RlbGV0ZSB0W2FdO249dHJ1ZX1pZihuKXt0aGlzLl9pbmRleENoYW5nZWQkLm5leHQodGhpcyl9fTtlLnByb3RvdHlwZS5yZW1vdmVBbGw9ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPXt9O3RoaXMuX2luZGV4LmNsZWFyKCk7dGhpcy5faW5kZXhDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5zZWFyY2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIHRoaXMuX2luZGV4LnNlYXJjaCh7bWF4WDpyLmxhdCxtYXhZOnIubG9uLG1pblg6dC5sYXQsbWluWTp0Lmxvbn0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXJrZXJ9KX07ZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2hhc2g7dmFyIHI9dGhpcy5faW5kZXg7dmFyIG49ZS5pZDtpZighKG4gaW4gdCkpe3JldHVybn1yLnJlbW92ZSh0W25dKTt2YXIgaT17bGF0OmUubGF0TG9uLmxhdCxsb246ZS5sYXRMb24ubG9uLG1hcmtlcjplfTt0W25dPWk7ci5pbnNlcnQoaSl9O3JldHVybiBlfSgpO3IuTWFya2VyU2V0PW87ci5kZWZhdWx0PW99LHtcIi4uLy4uL0dlb1wiOjI5NCxyeGpzOjQzfV0sMzM3OltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDMzODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQ2lyY2xlTWFya2VyPXZvaWQgMDt2YXIgbz1lKFwidGhyZWVcIik7dmFyIGk9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgYT1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsZSx0KXx8dGhpcztyPSEhcj9yOnt9O24uX2NvbG9yPXIuY29sb3IhPW51bGw/ci5jb2xvcjoxNjc3NzIxNTtuLl9vcGFjaXR5PXIub3BhY2l0eSE9bnVsbD9yLm9wYWNpdHk6LjQ7bi5fcmFkaXVzPXIucmFkaXVzIT1udWxsP3IucmFkaXVzOjE7cmV0dXJuIG59ZS5wcm90b3R5cGUuX2NyZWF0ZUdlb21ldHJ5PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBvLk1lc2gobmV3IG8uQ2lyY2xlR2VvbWV0cnkodGhpcy5fcmFkaXVzLDE2KSxuZXcgby5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6dGhpcy5fY29sb3Isb3BhY2l0eTp0aGlzLl9vcGFjaXR5LHRyYW5zcGFyZW50OnRydWV9KSk7dC51cC5mcm9tQXJyYXkoWzAsMCwxXSk7dC5yZW5kZXJPcmRlcj0tMTt2YXIgcj1uZXcgby5PYmplY3QzRDtyLmFkZCh0KTtyLnBvc2l0aW9uLmZyb21BcnJheShlKTt0aGlzLl9nZW9tZXRyeT1yfTtlLnByb3RvdHlwZS5fZGlzcG9zZUdlb21ldHJ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlzLl9nZW9tZXRyeS5jaGlsZHJlbjtlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTtyLmdlb21ldHJ5LmRpc3Bvc2UoKTtyLm1hdGVyaWFsLmRpc3Bvc2UoKX19O2UucHJvdG90eXBlLl9nZXRJbnRlcmFjdGl2ZU9iamVjdHM9ZnVuY3Rpb24oKXtyZXR1cm5bXX07cmV0dXJuIGV9KGkuTWFya2VyKTtyLkNpcmNsZU1hcmtlcj1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEsdGhyZWU6MjQyfV0sMzM5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLk1hcmtlcj12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5faWQ9ZTt0aGlzLl9sYXRMb249dH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJnZW9tZXRyeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2VvbWV0cnl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsYXRMb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdExvbn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmNyZWF0ZUdlb21ldHJ5PWZ1bmN0aW9uKGUpe2lmKCEhdGhpcy5fZ2VvbWV0cnkpe3JldHVybn10aGlzLl9jcmVhdGVHZW9tZXRyeShlKTt0aGlzLl9nZW9tZXRyeS51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKX07ZS5wcm90b3R5cGUuZGlzcG9zZUdlb21ldHJ5PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2dlb21ldHJ5KXtyZXR1cm59dGhpcy5fZGlzcG9zZUdlb21ldHJ5KCk7dGhpcy5fZ2VvbWV0cnk9dW5kZWZpbmVkfTtlLnByb3RvdHlwZS5nZXRJbnRlcmFjdGl2ZU9iamVjdHM9ZnVuY3Rpb24oKXtpZighdGhpcy5fZ2VvbWV0cnkpe3JldHVybltdfXJldHVybiB0aGlzLl9nZXRJbnRlcmFjdGl2ZU9iamVjdHMoKX07ZS5wcm90b3R5cGUubGVycEFsdGl0dWRlPWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuX2dlb21ldHJ5KXtyZXR1cm59dGhpcy5fZ2VvbWV0cnkucG9zaXRpb24uej0oMS10KSp0aGlzLl9nZW9tZXRyeS5wb3NpdGlvbi56K3QqZX07ZS5wcm90b3R5cGUudXBkYXRlUG9zaXRpb249ZnVuY3Rpb24oZSx0KXtpZighIXQpe3RoaXMuX2xhdExvbi5sYXQ9dC5sYXQ7dGhpcy5fbGF0TG9uLmxvbj10Lmxvbn1pZighdGhpcy5fZ2VvbWV0cnkpe3JldHVybn10aGlzLl9nZW9tZXRyeS5wb3NpdGlvbi5mcm9tQXJyYXkoZSk7dGhpcy5fZ2VvbWV0cnkudXBkYXRlTWF0cml4V29ybGQodHJ1ZSl9O3JldHVybiBlfSgpO3IuTWFya2VyPW47ci5kZWZhdWx0PW59LHt9XSwzNDA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNpbXBsZU1hcmtlcj12b2lkIDA7dmFyIHc9ZShcInRocmVlXCIpO3ZhciBpPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIG89ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUsdCl8fHRoaXM7cj0hIXI/cjp7fTtuLl9iYWxsQ29sb3I9ci5iYWxsQ29sb3IhPW51bGw/ci5iYWxsQ29sb3I6MTY3MTE2ODA7bi5fYmFsbE9wYWNpdHk9ci5iYWxsT3BhY2l0eSE9bnVsbD9yLmJhbGxPcGFjaXR5Oi44O24uX2NpcmNsZVRvUmF5QW5nbGU9MjtuLl9jb2xvcj1yLmNvbG9yIT1udWxsP3IuY29sb3I6MTY3MTE2ODA7bi5faW50ZXJhY3RpdmU9ISFyLmludGVyYWN0aXZlO24uX29wYWNpdHk9ci5vcGFjaXR5IT1udWxsP3Iub3BhY2l0eTouNDtuLl9yYWRpdXM9ci5yYWRpdXMhPW51bGw/ci5yYWRpdXM6MTtyZXR1cm4gbn1lLnByb3RvdHlwZS5fY3JlYXRlR2VvbWV0cnk9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcmFkaXVzO3ZhciByPW5ldyB3Lk1lc2godGhpcy5fbWFya2VyR2VvbWV0cnkodCw4LDgpLG5ldyB3Lk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjp0aGlzLl9jb2xvcixvcGFjaXR5OnRoaXMuX29wYWNpdHksdHJhbnNwYXJlbnQ6dHJ1ZX0pKTtyLnJlbmRlck9yZGVyPTE7dmFyIG49bmV3IHcuTWVzaChuZXcgdy5TcGhlcmVHZW9tZXRyeSh0LzIsOCw4KSxuZXcgdy5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6dGhpcy5fYmFsbENvbG9yLG9wYWNpdHk6dGhpcy5fYmFsbE9wYWNpdHksdHJhbnNwYXJlbnQ6dHJ1ZX0pKTtuLnBvc2l0aW9uLno9dGhpcy5fbWFya2VySGVpZ2h0KHQpO3ZhciBpPW5ldyB3Lk9iamVjdDNEO2kuYWRkKG4pO2kuYWRkKHIpO2kucG9zaXRpb24uZnJvbUFycmF5KGUpO3RoaXMuX2dlb21ldHJ5PWl9O2UucHJvdG90eXBlLl9kaXNwb3NlR2VvbWV0cnk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PXRoaXMuX2dlb21ldHJ5LmNoaWxkcmVuO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3IuZ2VvbWV0cnkuZGlzcG9zZSgpO3IubWF0ZXJpYWwuZGlzcG9zZSgpfX07ZS5wcm90b3R5cGUuX2dldEludGVyYWN0aXZlT2JqZWN0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcmFjdGl2ZT9bdGhpcy5fZ2VvbWV0cnkuY2hpbGRyZW5bMF1dOltdfTtlLnByb3RvdHlwZS5fbWFya2VySGVpZ2h0PWZ1bmN0aW9uKGUpe3ZhciB0PU1hdGgudGFuKE1hdGguUEktdGhpcy5fY2lyY2xlVG9SYXlBbmdsZSk7cmV0dXJuIGUqTWF0aC5zcXJ0KDErdCp0KX07ZS5wcm90b3R5cGUuX21hcmtlckdlb21ldHJ5PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1uZXcgdy5HZW9tZXRyeTt0PU1hdGgubWF4KDMsTWF0aC5mbG9vcih0KXx8OCk7cj1NYXRoLm1heCgyLE1hdGguZmxvb3Iocil8fDYpO3ZhciBpPXRoaXMuX21hcmtlckhlaWdodChlKTt2YXIgbz1bXTtmb3IodmFyIGE9MDthPD1yOysrYSl7dmFyIHM9W107Zm9yKHZhciB1PTA7dTw9dDsrK3Upe3ZhciBjPXUvdCpNYXRoLlBJKjI7dmFyIGw9YS9yKk1hdGguUEk7dmFyIGg9dm9pZCAwO2lmKGw8dGhpcy5fY2lyY2xlVG9SYXlBbmdsZSl7aD1lfWVsc2V7dmFyIHA9TWF0aC50YW4obC10aGlzLl9jaXJjbGVUb1JheUFuZ2xlKTtoPWUqTWF0aC5zcXJ0KDErcCpwKX12YXIgZj1uZXcgdy5WZWN0b3IzO2YueD1oKk1hdGguY29zKGMpKk1hdGguc2luKGwpO2YueT1oKk1hdGguc2luKGMpKk1hdGguc2luKGwpO2Yuej1oKk1hdGguY29zKGwpK2k7bi52ZXJ0aWNlcy5wdXNoKGYpO3MucHVzaChuLnZlcnRpY2VzLmxlbmd0aC0xKX1vLnB1c2gocyl9Zm9yKHZhciBhPTA7YTxyOysrYSl7Zm9yKHZhciB1PTA7dTx0OysrdSl7dmFyIGQ9b1thXVt1KzFdO3ZhciB2PW9bYV1bdV07dmFyIG09b1thKzFdW3VdO3ZhciBnPW9bYSsxXVt1KzFdO3ZhciBfPW4udmVydGljZXNbZF0uY2xvbmUoKS5ub3JtYWxpemUoKTt2YXIgeT1uLnZlcnRpY2VzW3ZdLmNsb25lKCkubm9ybWFsaXplKCk7dmFyIGI9bi52ZXJ0aWNlc1ttXS5jbG9uZSgpLm5vcm1hbGl6ZSgpO3ZhciB4PW4udmVydGljZXNbZ10uY2xvbmUoKS5ub3JtYWxpemUoKTtuLmZhY2VzLnB1c2gobmV3IHcuRmFjZTMoZCx2LGcsW18seSx4XSkpO24uZmFjZXMucHVzaChuZXcgdy5GYWNlMyh2LG0sZyxbeS5jbG9uZSgpLGIseC5jbG9uZSgpXSkpfX1uLmNvbXB1dGVGYWNlTm9ybWFscygpO24uYm91bmRpbmdTcGhlcmU9bmV3IHcuU3BoZXJlKG5ldyB3LlZlY3RvcjMsZStpKTtyZXR1cm4gbn07cmV0dXJuIGV9KGkuTWFya2VyKTtyLlNpbXBsZU1hcmtlcj1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEsdGhyZWU6MjQyfV0sMzQxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Cb3VuY2VIYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwicnhqc1wiKTt2YXIgbz1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIFM9ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgYT1mdW5jdGlvbihhKXtuKGUsYSk7ZnVuY3Rpb24gZShlLHQscixuLGkpe3ZhciBvPWEuY2FsbCh0aGlzLGUsdCxyKXx8dGhpcztvLl9zcGF0aWFsPWk7by5fdmlld3BvcnRDb29yZHM9bjtyZXR1cm4gb31lLnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dmFyIHc9dGhpczt2YXIgZT10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZShvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5hbHBoYTwxfSksby5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTt0aGlzLl9ib3VuY2VTdWJzY3JpcHRpb249aS5jb21iaW5lTGF0ZXN0KGUsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5pblRyYW5zbGF0aW9uJCx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmFjdGl2ZSQsdGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS5hY3RpdmUkKS5waXBlKG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfHxlWzFdfHxlWzJdfHxlWzNdfSksby5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLG8uc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlP2kuZW1wdHkoKTppLmNvbWJpbmVMYXRlc3Qody5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx3Ll9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kLnBpcGUoby5maXJzdCgpKSl9KSxvLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5wYW5TZXJ2aWNlLnBhbk5vZGVzJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT1lWzFdO2lmKCFuLmhhc1ZhbGlkU2NhbGUmJnIuY2FtZXJhLmZvY2FsPC4xKXtyZXR1cm59aWYoci5wZXJzcGVjdGl2ZS5hc3BlY3Q9PT0wfHxyLnBlcnNwZWN0aXZlLmFzcGVjdD09PU51bWJlci5QT1NJVElWRV9JTkZJTklUWSl7cmV0dXJufXZhciBvPVMuSW1hZ2VCb3VuZGFyeS52aWV3cG9ydERpc3RhbmNlcyhuLHIucGVyc3BlY3RpdmUsdy5fdmlld3BvcnRDb29yZHMpO3ZhciBhPXcuX3ZpZXdwb3J0Q29vcmRzLnZpZXdwb3J0VG9CYXNpYygwLDAsbixyLnBlcnNwZWN0aXZlKTtpZigoYVswXTwwfHxhWzBdPjEpJiZpLmxlbmd0aD4wKXtvWzBdPW9bMl09MH1mb3IodmFyIHM9MCx1PWk7czx1Lmxlbmd0aDtzKyspe3ZhciBjPXVbc10sbD1jWzFdO3ZhciBoPVMuSW1hZ2VCb3VuZGFyeS52aWV3cG9ydERpc3RhbmNlcyhsLHIucGVyc3BlY3RpdmUsdy5fdmlld3BvcnRDb29yZHMpO2Zvcih2YXIgcD0xO3A8by5sZW5ndGg7cCs9Mil7aWYoaFtwXTxvW3BdKXtvW3BdPWhbcF19fX1pZihNYXRoLm1heC5hcHBseShNYXRoLG8pPC4wMSl7cmV0dXJufXZhciBmPW9bMV0tb1szXTt2YXIgZD1vWzBdLW9bMl07dmFyIHY9dy5fdmlld3BvcnRDb29yZHMudW5wcm9qZWN0RnJvbVZpZXdwb3J0KDAsMCxyLnBlcnNwZWN0aXZlKS5zdWIoci5wZXJzcGVjdGl2ZS5wb3NpdGlvbik7dmFyIG09dy5fdmlld3BvcnRDb29yZHMudW5wcm9qZWN0RnJvbVZpZXdwb3J0KGYsMCxyLnBlcnNwZWN0aXZlKS5zdWIoci5wZXJzcGVjdGl2ZS5wb3NpdGlvbik7dmFyIGc9dy5fdmlld3BvcnRDb29yZHMudW5wcm9qZWN0RnJvbVZpZXdwb3J0KDAsZCxyLnBlcnNwZWN0aXZlKS5zdWIoci5wZXJzcGVjdGl2ZS5wb3NpdGlvbik7dmFyIF89KGY+MD8xOi0xKSptLmFuZ2xlVG8odik7dmFyIHk9KGQ+MD8xOi0xKSpnLmFuZ2xlVG8odik7dmFyIGI9TWF0aC5QSS82MDt2YXIgeD0uMTtfPXcuX3NwYXRpYWwuY2xhbXAoeCpfLC1iLGIpO3k9dy5fc3BhdGlhbC5jbGFtcCh4KnksLWIsYik7dy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5yb3RhdGVVbmJvdW5kZWQoe3BoaTpfLHRoZXRhOnl9KX0pfTtlLnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2JvdW5jZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybnt9fTtyZXR1cm4gZX0oUy5IYW5kbGVyQmFzZSk7ci5Cb3VuY2VIYW5kbGVyPWE7ci5kZWZhdWx0PWF9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzNDI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkRvdWJsZUNsaWNrWm9vbUhhbmRsZXI9dm9pZCAwO3ZhciBpPWUoXCJyeGpzXCIpO3ZhciBhPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbz1lKFwiLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBzPWZ1bmN0aW9uKG8pe24oZSxvKTtmdW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpPW8uY2FsbCh0aGlzLGUsdCxyKXx8dGhpcztpLl92aWV3cG9ydENvb3Jkcz1uO3JldHVybiBpfWUucHJvdG90eXBlLl9lbmFibGU9ZnVuY3Rpb24oKXt2YXIgaD10aGlzO3RoaXMuX3pvb21TdWJzY3JpcHRpb249aS5tZXJnZSh0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkJCh0aGlzLl9jb21wb25lbnQubmFtZSx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmRibENsaWNrJCksdGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS5kb3VibGVUYXAkLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3VjaGVzWzBdO3JldHVybntjbGllbnRYOnQuY2xpZW50WCxjbGllbnRZOnQuY2xpZW50WSxzaGlmdEtleTplLnNoaWZ0S2V5fX0pKSkucGlwZShhLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07dmFyIGk9aC5fY29udGFpbmVyLmVsZW1lbnQ7dmFyIG89aC5fdmlld3BvcnRDb29yZHMuY2FudmFzUG9zaXRpb24odCxpKSxhPW9bMF0scz1vWzFdO3ZhciB1PWguX3ZpZXdwb3J0Q29vcmRzLnVucHJvamVjdEZyb21DYW52YXMoYSxzLGksci5wZXJzcGVjdGl2ZSk7dmFyIGM9bi5wcm9qZWN0QmFzaWModS50b0FycmF5KCkpO3ZhciBsPSEhdC5zaGlmdEtleT8tMToxO2guX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuem9vbUluKGwsYyl9KX07ZS5wcm90b3R5cGUuX2Rpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl96b29tU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybntkb3VibGVDbGlja1pvb206ZX19O3JldHVybiBlfShvLkhhbmRsZXJCYXNlKTtyLkRvdWJsZUNsaWNrWm9vbUhhbmRsZXI9cztyLmRlZmF1bHQ9c30se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDM0MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuRHJhZ1BhbkhhbmRsZXI9dm9pZCAwO3ZhciBzPWUoXCJyeGpzXCIpO3ZhciB1PWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgVD1lKFwiLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBpPWZ1bmN0aW9uKGEpe24oZSxhKTtmdW5jdGlvbiBlKGUsdCxyLG4saSl7dmFyIG89YS5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO28uX3NwYXRpYWw9aTtvLl92aWV3cG9ydENvb3Jkcz1uO3JldHVybiBvfWUucHJvdG90eXBlLl9lbmFibGU9ZnVuY3Rpb24oKXt2YXIgQz10aGlzO3ZhciBlPXRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZmlsdGVyZWQkKHRoaXMuX2NvbXBvbmVudC5uYW1lLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VEcmFnU3RhcnQkKS5waXBlKHUubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9KSx1LnNoYXJlKCkpO3ZhciB0PXRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZmlsdGVyZWQkKHRoaXMuX2NvbXBvbmVudC5uYW1lLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VEcmFnRW5kJCkucGlwZSh1Lm1hcChmdW5jdGlvbigpe3JldHVybiBmYWxzZX0pLHUuc2hhcmUoKSk7dGhpcy5fYWN0aXZlTW91c2VTdWJzY3JpcHRpb249cy5tZXJnZShlLHQpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmFjdGl2YXRlJCk7dmFyIHI9cy5tZXJnZShlLHQpLnBpcGUodS5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU/Qy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kb2N1bWVudE1vdXNlTW92ZSQ6cy5lbXB0eSgpfSkpO3RoaXMuX3ByZXZlbnREZWZhdWx0U3Vic2NyaXB0aW9uPXMubWVyZ2Uocix0aGlzLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLnRvdWNoTW92ZSQpLnN1YnNjcmliZShmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KTt2YXIgbj10aGlzLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLnNpbmdsZVRvdWNoRHJhZ1N0YXJ0JC5waXBlKHUubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9KSk7dmFyIGk9dGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS5zaW5nbGVUb3VjaERyYWdFbmQkLnBpcGUodS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9KSk7dGhpcy5fYWN0aXZlVG91Y2hTdWJzY3JpcHRpb249cy5tZXJnZShuLGkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLmFjdGl2YXRlJCk7dmFyIG89dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLnBpcGUodS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudE5vZGUuZnVsbFBhbm98fGUuc3RhdGUubm9kZXNBaGVhZDwxfSksdS5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLHUuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe2lmKCFlKXtyZXR1cm4gcy5lbXB0eSgpfXZhciB0PVQuTW91c2VPcGVyYXRvci5maWx0ZXJlZFBhaXJ3aXNlTW91c2VEcmFnJChDLl9jb21wb25lbnQubmFtZSxDLl9jb250YWluZXIubW91c2VTZXJ2aWNlKTt2YXIgcj1zLm1lcmdlKEMuX2NvbnRhaW5lci50b3VjaFNlcnZpY2Uuc2luZ2xlVG91Y2hEcmFnU3RhcnQkLEMuX2NvbnRhaW5lci50b3VjaFNlcnZpY2Uuc2luZ2xlVG91Y2hEcmFnJCxDLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLnNpbmdsZVRvdWNoRHJhZ0VuZCQucGlwZSh1Lm1hcChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpKS5waXBlKHUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsJiZlLnRvdWNoZXMubGVuZ3RoPjA/ZS50b3VjaGVzWzBdOm51bGx9KSx1LnBhaXJ3aXNlKCksdS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF0hPW51bGwmJmVbMV0hPW51bGx9KSk7cmV0dXJuIHMubWVyZ2UodCxyKX0pLHUud2l0aExhdGVzdEZyb20odGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kLHRoaXMuX25hdmlnYXRvci5wYW5TZXJ2aWNlLnBhbk5vZGVzJCksdS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdLGk9ZVszXTt2YXIgbz10WzBdO3ZhciBhPXRbMV07dmFyIHM9YS5jbGllbnRYLW8uY2xpZW50WDt2YXIgdT1hLmNsaWVudFktby5jbGllbnRZO3ZhciBjPUMuX2NvbnRhaW5lci5lbGVtZW50O3ZhciBsPUMuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1Bvc2l0aW9uKGEsYyksaD1sWzBdLHA9bFsxXTt2YXIgZj1DLl92aWV3cG9ydENvb3Jkcy51bnByb2plY3RGcm9tQ2FudmFzKGgscCxjLHIucGVyc3BlY3RpdmUpLnN1YihyLnBlcnNwZWN0aXZlLnBvc2l0aW9uKTt2YXIgZD1DLl92aWV3cG9ydENvb3Jkcy51bnByb2plY3RGcm9tQ2FudmFzKGgtcyxwLGMsci5wZXJzcGVjdGl2ZSkuc3ViKHIucGVyc3BlY3RpdmUucG9zaXRpb24pO3ZhciB2PUMuX3ZpZXdwb3J0Q29vcmRzLnVucHJvamVjdEZyb21DYW52YXMoaCxwLXUsYyxyLnBlcnNwZWN0aXZlKS5zdWIoci5wZXJzcGVjdGl2ZS5wb3NpdGlvbik7dmFyIG09KHM+MD8xOi0xKSpkLmFuZ2xlVG8oZik7dmFyIGc9KHU+MD8tMToxKSp2LmFuZ2xlVG8oZik7dmFyIF89VC5JbWFnZUJvdW5kYXJ5LnZpZXdwb3J0RGlzdGFuY2VzKG4sci5wZXJzcGVjdGl2ZSxDLl92aWV3cG9ydENvb3Jkcyk7Zm9yKHZhciB5PTAsYj1pO3k8Yi5sZW5ndGg7eSsrKXt2YXIgeD1iW3ldLHc9eFsxXTt2YXIgUz1ULkltYWdlQm91bmRhcnkudmlld3BvcnREaXN0YW5jZXModyxyLnBlcnNwZWN0aXZlLEMuX3ZpZXdwb3J0Q29vcmRzKTtmb3IodmFyIE09MDtNPF8ubGVuZ3RoO00rKyl7aWYoU1tNXTxfW01dKXtfW01dPVNbTV19fX1pZihfWzBdPjAmJmc8MCl7Zy89TWF0aC5tYXgoMSwyMDAqX1swXSl9aWYoX1syXT4wJiZnPjApe2cvPU1hdGgubWF4KDEsMjAwKl9bMl0pfWlmKF9bMV0+MCYmbTwwKXttLz1NYXRoLm1heCgxLDIwMCpfWzFdKX1pZihfWzNdPjAmJm0+MCl7bS89TWF0aC5tYXgoMSwyMDAqX1szXSl9cmV0dXJue3BoaTptLHRoZXRhOmd9fSksdS5zaGFyZSgpKTt0aGlzLl9yb3RhdGVXaXRob3V0SW5lcnRpYVN1YnNjcmlwdGlvbj1vLnN1YnNjcmliZShmdW5jdGlvbihlKXtDLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJvdGF0ZVdpdGhvdXRJbmVydGlhKGUpfSk7dGhpcy5fcm90YXRlU3Vic2NyaXB0aW9uPW8ucGlwZSh1LnNjYW4oZnVuY3Rpb24oZSx0KXtDLl9kcmFpbkJ1ZmZlcihlKTtlLnB1c2goW0RhdGUubm93KCksdF0pO3JldHVybiBlfSxbXSksdS5zYW1wbGUocy5tZXJnZSh0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkJCh0aGlzLl9jb21wb25lbnQubmFtZSx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLm1vdXNlRHJhZ0VuZCQpLHRoaXMuX2NvbnRhaW5lci50b3VjaFNlcnZpY2Uuc2luZ2xlVG91Y2hEcmFnRW5kJCkpLHUubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PUMuX2RyYWluQnVmZmVyKGUuc2xpY2UoKSk7dmFyIHI9e3BoaTowLHRoZXRhOjB9O2Zvcih2YXIgbj0wLGk9dDtuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtyLnBoaSs9b1sxXS5waGk7ci50aGV0YSs9b1sxXS50aGV0YX12YXIgYT10Lmxlbmd0aDtpZihhPjApe3IucGhpLz1hO3IudGhldGEvPWF9dmFyIHM9TWF0aC5QSS8xODtyLnBoaT1DLl9zcGF0aWFsLmNsYW1wKHIucGhpLC1zLHMpO3IudGhldGE9Qy5fc3BhdGlhbC5jbGFtcChyLnRoZXRhLC1zLHMpO3JldHVybiByfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtDLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJvdGF0ZShlKX0pfTtlLnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2FjdGl2ZU1vdXNlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fYWN0aXZlVG91Y2hTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3JvdGF0ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3JvdGF0ZVdpdGhvdXRJbmVydGlhU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fYWN0aXZlTW91c2VTdWJzY3JpcHRpb249bnVsbDt0aGlzLl9hY3RpdmVUb3VjaFN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3ByZXZlbnREZWZhdWx0U3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fcm90YXRlU3Vic2NyaXB0aW9uPW51bGx9O2UucHJvdG90eXBlLl9nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybntkcmFnUGFuOmV9fTtlLnByb3RvdHlwZS5fZHJhaW5CdWZmZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9NTA7dmFyIHI9RGF0ZS5ub3coKTt3aGlsZShlLmxlbmd0aD4wJiZyLWVbMF1bMF0+dCl7ZS5zaGlmdCgpfXJldHVybiBlfTtyZXR1cm4gZX0oVC5IYW5kbGVyQmFzZSk7ci5EcmFnUGFuSGFuZGxlcj1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzQ0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5FYXJ0aENvbnRyb2xIYW5kbGVyPXZvaWQgMDt2YXIgZD1lKFwidGhyZWVcIik7dmFyIGk9ZShcInJ4anNcIik7dmFyIG89ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBzPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIHU9ZShcIi4uLy4uL1N0YXRlXCIpO3ZhciBhPWZ1bmN0aW9uKGEpe24oZSxhKTtmdW5jdGlvbiBlKGUsdCxyLG4saSl7dmFyIG89YS5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO28uX3NwYXRpYWw9aTtvLl92aWV3cG9ydENvb3Jkcz1uO3JldHVybiBvfWUucHJvdG90eXBlLl9lbmFibGU9ZnVuY3Rpb24oKXt2YXIgaD10aGlzO3ZhciBlPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuc3RhdGUkLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT11LlN0YXRlLkVhcnRofSksby5zaGFyZSgpKTt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbj1lLnBpcGUoby5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU/aC5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZVdoZWVsJDppLmVtcHR5KCl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pO3RoaXMuX3RydWNrU3Vic2NyaXB0aW9uPWUucGlwZShvLnN3aXRjaE1hcChmdW5jdGlvbihlKXtpZighZSl7cmV0dXJuIGkuZW1wdHkoKX1yZXR1cm4gcy5Nb3VzZU9wZXJhdG9yLmZpbHRlcmVkUGFpcndpc2VNb3VzZURyYWckKGguX2NvbXBvbmVudC5uYW1lLGguX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UpLnBpcGUoby5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuISh0LmN0cmxLZXkmJnIuY3RybEtleSl9KSl9KSxvLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCksby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXSxvPWVbMl07dmFyIGE9WzAsMCwxXTt2YXIgcz1vLnVucHJvamVjdEJhc2ljKFsuNSwuNV0sMCk7c1syXS09Mjt2YXIgdT1oLl9wbGFuZUludGVyc2VjdGlvbihuLGEscyxpLnBlcnNwZWN0aXZlLGguX2NvbnRhaW5lci5lbGVtZW50KTt2YXIgYz1oLl9wbGFuZUludGVyc2VjdGlvbihyLGEscyxpLnBlcnNwZWN0aXZlLGguX2NvbnRhaW5lci5lbGVtZW50KTtpZighdXx8IWMpe3JldHVybiBudWxsfXZhciBsPShuZXcgZC5WZWN0b3IzKS5zdWJWZWN0b3JzKHUsYykubXVsdGlwbHlTY2FsYXIoLTEpLnRvQXJyYXkoKTtyZXR1cm4gbH0pLG8uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aC5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS50cnVjayhlKX0pO3RoaXMuX29yYml0U3Vic2NyaXB0aW9uPWUucGlwZShvLnN3aXRjaE1hcChmdW5jdGlvbihlKXtpZighZSl7cmV0dXJuIGkuZW1wdHkoKX1yZXR1cm4gcy5Nb3VzZU9wZXJhdG9yLmZpbHRlcmVkUGFpcndpc2VNb3VzZURyYWckKGguX2NvbXBvbmVudC5uYW1lLGguX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UpLnBpcGUoby5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIHQuY3RybEtleSYmci5jdHJsS2V5fSkpfSksby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07dmFyIG49aC5fZXZlbnRUb1ZpZXdwb3J0KHIsaC5fY29udGFpbmVyLmVsZW1lbnQpLGk9blswXSxvPW5bMV07dmFyIGE9aC5fZXZlbnRUb1ZpZXdwb3J0KHQsaC5fY29udGFpbmVyLmVsZW1lbnQpLHM9YVswXSx1PWFbMV07dmFyIGM9KHMtaSkqTWF0aC5QSTt2YXIgbD0oby11KSpNYXRoLlBJLzI7cmV0dXJue3BoaTpjLHRoZXRhOmx9fSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtoLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLm9yYml0KGUpfSk7dGhpcy5fZG9sbHlTdWJzY3JpcHRpb249ZS5waXBlKG8uc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe2lmKCFlKXtyZXR1cm4gaS5lbXB0eSgpfXJldHVybiBoLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkV2hlZWwkKGguX2NvbXBvbmVudC5uYW1lLGguX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VXaGVlbCQpfSksby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kZWx0YVk7aWYoZS5kZWx0YU1vZGU9PT0xKXt0PTQwKnR9ZWxzZSBpZihlLmRlbHRhTW9kZT09PTIpe3Q9ODAwKnR9dmFyIHI9aC5fdmlld3BvcnRDb29yZHMuY29udGFpbmVyVG9DYW52YXMoaC5fY29udGFpbmVyLmVsZW1lbnQpO3JldHVybi10L3JbMV19KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2guX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuZG9sbHkoZSl9KX07ZS5wcm90b3R5cGUuX2Rpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl9kb2xseVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX29yYml0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fcHJldmVudERlZmF1bHRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl90cnVja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybnt9fTtlLnByb3RvdHlwZS5fZXZlbnRUb1ZpZXdwb3J0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fdmlld3BvcnRDb29yZHMuY2FudmFzUG9zaXRpb24oZSx0KTtyZXR1cm4gdGhpcy5fdmlld3BvcnRDb29yZHMuY2FudmFzVG9WaWV3cG9ydChyWzBdLHJbMV0sdCl9O2UucHJvdG90eXBlLl9wbGFuZUludGVyc2VjdGlvbj1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1Bvc2l0aW9uKGUsaSksYT1vWzBdLHM9b1sxXTt2YXIgdT10aGlzLl92aWV3cG9ydENvb3Jkcy51bnByb2plY3RGcm9tQ2FudmFzKGEscyxpLG4pLnN1YihuLnBvc2l0aW9uKS5ub3JtYWxpemUoKTtpZihNYXRoLmFicyh0aGlzLl9zcGF0aWFsLmFuZ2xlVG9QbGFuZSh1LnRvQXJyYXkoKSx0KSk8TWF0aC5QSS85MCl7cmV0dXJuIG51bGx9dmFyIGM9bi5wb3NpdGlvbi5jbG9uZSgpO3ZhciBsPShuZXcgZC5WZWN0b3IzKS5mcm9tQXJyYXkodCk7dmFyIGg9KG5ldyBkLlZlY3RvcjMpLmZyb21BcnJheShyKTt2YXIgcD0obmV3IGQuVmVjdG9yMykuc3ViVmVjdG9ycyhoLGMpLmRvdChsKS91LmNsb25lKCkuZG90KGwpO3ZhciBmPShuZXcgZC5WZWN0b3IzKS5hZGRWZWN0b3JzKGMsdS5tdWx0aXBseVNjYWxhcihwKSk7aWYodGhpcy5fdmlld3BvcnRDb29yZHMud29ybGRUb0NhbWVyYShmLnRvQXJyYXkoKSxuKVsyXT4wKXtyZXR1cm4gbnVsbH1yZXR1cm4gZn07cmV0dXJuIGV9KHMuSGFuZGxlckJhc2UpO3IuRWFydGhDb250cm9sSGFuZGxlcj1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEsXCIuLi8uLi9TdGF0ZVwiOjI5OCxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsdGhyZWU6MjQyfV0sMzQ1OltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDM0NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci52aWV3cG9ydERpc3RhbmNlcz12b2lkIDA7dmFyIHo9ZShcIi4uLy4uLy4uL3NyYy9HZW9cIik7ZnVuY3Rpb24gJChlKXt2YXIgdD1bXTt2YXIgcj1bWzAsMF0sWzEsMF0sWzEsMV0sWzAsMV1dO3ZhciBuPVtbMSwwXSxbMCwxXSxbLTEsMF0sWzAsLTFdXTtmb3IodmFyIGk9MDtpPDQ7KytpKXt2YXIgbz1yW2ldO3ZhciBhPW5baV07Zm9yKHZhciBzPTA7czxlOysrcyl7dC5wdXNoKFtvWzBdK2FbMF0qcy9lLG9bMV0rYVsxXSpzL2VdKX19cmV0dXJuIHR9ZnVuY3Rpb24gRyhlLHQpe3JldHVybiBlPj0tMSYmZTw9MSYmdD49LTEmJnQ8PTF9ZnVuY3Rpb24gVihlLHQpe3JldHVybiBlPj0wJiZlPD0xJiZ0Pj0wJiZ0PD0xfWZ1bmN0aW9uIG4odCxyLG4pe3ZhciBlPSQoMTAwKTt2YXIgaT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbi5iYXNpY1RvVmlld3BvcnRTYWZlKGVbMF0sZVsxXSx0LHIpfSk7dmFyIG89W107dmFyIGE9W3t4Oi0xLHk6MX0se3g6MSx5OjF9LHt4OjEseTotMX0se3g6LTEseTotMX1dO3ZhciBzPVtmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZV07Zm9yKHZhciB1PTA7dTxpLmxlbmd0aDt1Kyspe3ZhciBjPWlbdV07dmFyIGw9aVsodSsxKSVpLmxlbmd0aF07aWYoYz09PW51bGwpe2NvbnRpbnVlfWlmKGw9PT1udWxsKXtpZihHKGNbMF0sY1sxXSkpe28ucHVzaChjKX1jb250aW51ZX12YXIgaD1jWzBdLHA9Y1sxXTt2YXIgZj1sWzBdLGQ9bFsxXTtpZihHKGgscCkpe2lmKEcoZixkKSl7by5wdXNoKGMpfWVsc2V7Zm9yKHZhciB2PTA7djw0O3YrKyl7dmFyIG09e3AxOnt4OmgseTpwfSxwMjp7eDpmLHk6ZH19O3ZhciBnPXtwMTphW3ZdLHAyOmFbKHYrMSklNF19O3ZhciBfPXouTGluZXMuc2VnbWVudHNJbnRlcnNlY3QobSxnKTtpZihfKXt2YXIgeT16LkxpbmVzLnNlZ21lbnRJbnRlcnNlY3Rpb24obSxnKTtvLnB1c2goYyxbeS54LHkueV0pO3Nbdl09dHJ1ZX19fX19dmFyIGI9bi52aWV3cG9ydFRvQmFzaWMoLTEsMSx0LHIpLHg9YlswXSx3PWJbMV07dmFyIFM9bi52aWV3cG9ydFRvQmFzaWMoMSwxLHQsciksTT1TWzBdLEM9U1sxXTt2YXIgVD1uLnZpZXdwb3J0VG9CYXNpYygxLC0xLHQsciksRT1UWzBdLE89VFsxXTt2YXIgUD1uLnZpZXdwb3J0VG9CYXNpYygtMSwtMSx0LHIpLEE9UFswXSxqPVBbMV07aWYoVih4LHcpKXtzWzNdPXNbMF09dHJ1ZX1pZihWKE0sQykpe3NbMF09c1sxXT10cnVlfWlmKFYoRSxPKSl7c1sxXT1zWzJdPXRydWV9aWYoVihBLGopKXtzWzJdPXNbM109dHJ1ZX12YXIgUj1bLTEsLTEsMSwxXTtmb3IodmFyIGs9MCxMPW87azxMLmxlbmd0aDtrKyspe3ZhciBOPUxba107dmFyIEk9TlswXTt2YXIgRD1OWzFdO2lmKEk+UlsxXSl7UlsxXT1JfWlmKEk8UlszXSl7UlszXT1JfWlmKEQ+UlswXSl7UlswXT1EfWlmKEQ8UlsyXSl7UlsyXT1EfX12YXIgQj1bMSwxLC0xLC0xXTt2YXIgRj1bXTtmb3IodmFyIHY9MDt2PDQ7disrKXtpZihzW3ZdKXtGLnB1c2goMCk7Y29udGludWV9Ri5wdXNoKE1hdGguYWJzKEJbdl0tUlt2XSkpfXJldHVybiBGfXIudmlld3BvcnREaXN0YW5jZXM9bn0se1wiLi4vLi4vLi4vc3JjL0dlb1wiOjI5NH1dLDM0NzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuTW91c2VDb21wb25lbnQ9dm9pZCAwO3ZhciBzPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIHU9ZShcIi4uLy4uL0dlb1wiKTt2YXIgaT1mdW5jdGlvbihhKXtuKGUsYSk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49YS5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO3ZhciBpPW5ldyB1LlNwYXRpYWw7dmFyIG89bmV3IHUuVmlld3BvcnRDb29yZHM7bi5fYm91bmNlSGFuZGxlcj1uZXcgcy5Cb3VuY2VIYW5kbGVyKG4sdCxyLG8saSk7bi5fZG91YmxlQ2xpY2tab29tSGFuZGxlcj1uZXcgcy5Eb3VibGVDbGlja1pvb21IYW5kbGVyKG4sdCxyLG8pO24uX2RyYWdQYW5IYW5kbGVyPW5ldyBzLkRyYWdQYW5IYW5kbGVyKG4sdCxyLG8saSk7bi5fZWFydGhDb250cm9sSGFuZGxlcj1uZXcgcy5FYXJ0aENvbnRyb2xIYW5kbGVyKG4sdCxyLG8saSk7bi5fc2Nyb2xsWm9vbUhhbmRsZXI9bmV3IHMuU2Nyb2xsWm9vbUhhbmRsZXIobix0LHIsbyk7bi5fdG91Y2hab29tSGFuZGxlcj1uZXcgcy5Ub3VjaFpvb21IYW5kbGVyKG4sdCxyLG8pO3JldHVybiBufU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRvdWJsZUNsaWNrWm9vbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG91YmxlQ2xpY2tab29tSGFuZGxlcn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRyYWdQYW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyYWdQYW5IYW5kbGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2Nyb2xsWm9vbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsWm9vbUhhbmRsZXJ9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0b3VjaFpvb21cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvdWNoWm9vbUhhbmRsZXJ9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX2JvdW5jZUhhbmRsZXIuZW5hYmxlKCk7dGhpcy5fZWFydGhDb250cm9sSGFuZGxlci5lbmFibGUoKTt0aGlzLl9jb25maWd1cmF0aW9uU3Vic2NyaXB0aW9uPXRoaXMuX2NvbmZpZ3VyYXRpb24kLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZihlLmRvdWJsZUNsaWNrWm9vbSl7dC5fZG91YmxlQ2xpY2tab29tSGFuZGxlci5lbmFibGUoKX1lbHNle3QuX2RvdWJsZUNsaWNrWm9vbUhhbmRsZXIuZGlzYWJsZSgpfWlmKGUuZHJhZ1Bhbil7dC5fZHJhZ1BhbkhhbmRsZXIuZW5hYmxlKCl9ZWxzZXt0Ll9kcmFnUGFuSGFuZGxlci5kaXNhYmxlKCl9aWYoZS5zY3JvbGxab29tKXt0Ll9zY3JvbGxab29tSGFuZGxlci5lbmFibGUoKX1lbHNle3QuX3Njcm9sbFpvb21IYW5kbGVyLmRpc2FibGUoKX1pZihlLnRvdWNoWm9vbSl7dC5fdG91Y2hab29tSGFuZGxlci5lbmFibGUoKX1lbHNle3QuX3RvdWNoWm9vbUhhbmRsZXIuZGlzYWJsZSgpfX0pO3RoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuY2xhaW1Nb3VzZSh0aGlzLl9uYW1lLDApfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UudW5jbGFpbU1vdXNlKHRoaXMuX25hbWUpO3RoaXMuX2NvbmZpZ3VyYXRpb25TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9ib3VuY2VIYW5kbGVyLmRpc2FibGUoKTt0aGlzLl9kb3VibGVDbGlja1pvb21IYW5kbGVyLmRpc2FibGUoKTt0aGlzLl9kcmFnUGFuSGFuZGxlci5kaXNhYmxlKCk7dGhpcy5fZWFydGhDb250cm9sSGFuZGxlci5kaXNhYmxlKCk7dGhpcy5fc2Nyb2xsWm9vbUhhbmRsZXIuZGlzYWJsZSgpO3RoaXMuX3RvdWNoWm9vbUhhbmRsZXIuZGlzYWJsZSgpfTtlLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57ZG91YmxlQ2xpY2tab29tOmZhbHNlLGRyYWdQYW46dHJ1ZSxzY3JvbGxab29tOnRydWUsdG91Y2hab29tOnRydWV9fTtlLmNvbXBvbmVudE5hbWU9XCJtb3VzZVwiO3JldHVybiBlfShzLkNvbXBvbmVudCk7ci5Nb3VzZUNvbXBvbmVudD1pO3MuQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihpKTtyLmRlZmF1bHQ9aX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vR2VvXCI6Mjk0fV0sMzQ4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TY3JvbGxab29tSGFuZGxlcj12b2lkIDA7dmFyIGk9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBvPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIGE9ZnVuY3Rpb24obyl7bihlLG8pO2Z1bmN0aW9uIGUoZSx0LHIsbil7dmFyIGk9by5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO2kuX3ZpZXdwb3J0Q29vcmRzPW47cmV0dXJuIGl9ZS5wcm90b3R5cGUuX2VuYWJsZT1mdW5jdGlvbigpe3ZhciBmPXRoaXM7dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5jbGFpbVdoZWVsKHRoaXMuX2NvbXBvbmVudC5uYW1lLDApO3RoaXMuX3ByZXZlbnREZWZhdWx0U3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VXaGVlbCQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pO3RoaXMuX3pvb21TdWJzY3JpcHRpb249dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5maWx0ZXJlZFdoZWVsJCh0aGlzLl9jb21wb25lbnQubmFtZSx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLm1vdXNlV2hlZWwkKS5waXBlKGkud2l0aExhdGVzdEZyb20odGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLGZ1bmN0aW9uKGUsdCl7cmV0dXJuW2UsdF19KSxpLmZpbHRlcihmdW5jdGlvbihlKXt2YXIgdD1lWzFdLnN0YXRlO3JldHVybiB0LmN1cnJlbnROb2RlLmZ1bGxQYW5vfHx0Lm5vZGVzQWhlYWQ8MX0pLGkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSksaS53aXRoTGF0ZXN0RnJvbSh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQsZnVuY3Rpb24oZSx0LHIpe3JldHVybltlLHQscl19KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07dmFyIHI9ZVsxXTt2YXIgbj1lWzJdO3ZhciBpPWYuX2NvbnRhaW5lci5lbGVtZW50O3ZhciBvPWYuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1Bvc2l0aW9uKHQsaSksYT1vWzBdLHM9b1sxXTt2YXIgdT1mLl92aWV3cG9ydENvb3Jkcy51bnByb2plY3RGcm9tQ2FudmFzKGEscyxpLHIucGVyc3BlY3RpdmUpO3ZhciBjPW4ucHJvamVjdEJhc2ljKHUudG9BcnJheSgpKTt2YXIgbD10LmRlbHRhWTtpZih0LmRlbHRhTW9kZT09PTEpe2w9NDAqbH1lbHNlIGlmKHQuZGVsdGFNb2RlPT09Mil7bD04MDAqbH12YXIgaD1mLl92aWV3cG9ydENvb3Jkcy5jb250YWluZXJUb0NhbnZhcyhpKTt2YXIgcD0tMypsL2hbMV07Zi5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS56b29tSW4ocCxjKX0pfTtlLnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UudW5jbGFpbVdoZWVsKHRoaXMuX2NvbXBvbmVudC5uYW1lKTt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3pvb21TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3pvb21TdWJzY3JpcHRpb249bnVsbH07ZS5wcm90b3R5cGUuX2dldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJue3Njcm9sbFpvb206ZX19O3JldHVybiBlfShvLkhhbmRsZXJCYXNlKTtyLlNjcm9sbFpvb21IYW5kbGVyPWE7ci5kZWZhdWx0PWF9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzQ5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Ub3VjaFpvb21IYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwicnhqc1wiKTt2YXIgYT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgcz1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHQscil8fHRoaXM7aS5fdmlld3BvcnRDb29yZHM9bjtyZXR1cm4gaX1lLnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dmFyIGQ9dGhpczt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbj10aGlzLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLnBpbmNoJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ZS5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCl9KTt2YXIgZT10aGlzLl9jb250YWluZXIudG91Y2hTZXJ2aWNlLnBpbmNoU3RhcnQkLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHRydWV9KSk7dmFyIHQ9dGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS5waW5jaEVuZCQucGlwZShhLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZmFsc2V9KSk7dGhpcy5fYWN0aXZlU3Vic2NyaXB0aW9uPWkubWVyZ2UoZSx0KS5zdWJzY3JpYmUodGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS5hY3RpdmF0ZSQpO3RoaXMuX3pvb21TdWJzY3JpcHRpb249dGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS5waW5jaCQucGlwZShhLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJCksYS5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZVsxXS5zdGF0ZTtyZXR1cm4gdC5jdXJyZW50Tm9kZS5mdWxsUGFub3x8dC5ub2Rlc0FoZWFkPDF9KSxhLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZVswXX0pLGEud2l0aExhdGVzdEZyb20odGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgaT1kLl9jb250YWluZXIuZWxlbWVudDt2YXIgbz1kLl92aWV3cG9ydENvb3Jkcy5jYW52YXNQb3NpdGlvbih0LGkpLGE9b1swXSxzPW9bMV07dmFyIHU9ZC5fdmlld3BvcnRDb29yZHMudW5wcm9qZWN0RnJvbUNhbnZhcyhhLHMsaSxyLnBlcnNwZWN0aXZlKTt2YXIgYz1uLnByb2plY3RCYXNpYyh1LnRvQXJyYXkoKSk7dmFyIGw9ZC5fdmlld3BvcnRDb29yZHMuY29udGFpbmVyVG9DYW52YXMoaSksaD1sWzBdLHA9bFsxXTt2YXIgZj0zKnQuZGlzdGFuY2VDaGFuZ2UvTWF0aC5taW4oaCxwKTtkLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnpvb21JbihmLGMpfSl9O2UucHJvdG90eXBlLl9kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5fYWN0aXZlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fcHJldmVudERlZmF1bHRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl96b29tU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fcHJldmVudERlZmF1bHRTdWJzY3JpcHRpb249bnVsbDt0aGlzLl96b29tU3Vic2NyaXB0aW9uPW51bGx9O2UucHJvdG90eXBlLl9nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybnt0b3VjaFpvb206ZX19O3JldHVybiBlfShvLkhhbmRsZXJCYXNlKTtyLlRvdWNoWm9vbUhhbmRsZXI9cztyLmRlZmF1bHQ9c30se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDM1MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vcG9wdXAvUG9wdXBcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQb3B1cFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uUG9wdXB9fSk7dmFyIGk9ZShcIi4vUG9wdXBDb21wb25lbnRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQb3B1cENvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuUG9wdXBDb21wb25lbnR9fSl9LHtcIi4vUG9wdXBDb21wb25lbnRcIjozNTEsXCIuL3BvcHVwL1BvcHVwXCI6MzUyfV0sMzUxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Qb3B1cENvbXBvbmVudD12b2lkIDA7dmFyIGE9ZShcInJ4anNcIik7dmFyIGk9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBvPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIHM9ZShcIi4uLy4uL1V0aWxzXCIpO3ZhciB1PWZ1bmN0aW9uKG8pe24oZSxvKTtmdW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpPW8uY2FsbCh0aGlzLGUsdCxyKXx8dGhpcztpLl9kb209ISFuP246bmV3IHMuRE9NO2kuX3BvcHVwcz1bXTtpLl9hZGRlZCQ9bmV3IGEuU3ViamVjdDtpLl9wb3B1cHMkPW5ldyBhLlN1YmplY3Q7cmV0dXJuIGl9ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZTt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTtpZih0aGlzLl9wb3B1cHMuaW5kZXhPZihuKSE9PS0xKXtjb250aW51ZX10aGlzLl9wb3B1cHMucHVzaChuKTtpZih0aGlzLl9hY3RpdmF0ZWQpe24uc2V0UGFyZW50Q29udGFpbmVyKHRoaXMuX3BvcHVwQ29udGFpbmVyKX19dGhpcy5fYWRkZWQkLm5leHQoZSk7dGhpcy5fcG9wdXBzJC5uZXh0KHRoaXMuX3BvcHVwcyl9O2UucHJvdG90eXBlLmdldEFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3B1cHMuc2xpY2UoKX07ZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZTt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTt0aGlzLl9yZW1vdmUobil9dGhpcy5fcG9wdXBzJC5uZXh0KHRoaXMuX3BvcHVwcyl9O2UucHJvdG90eXBlLnJlbW92ZUFsbD1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9dGhpcy5fcG9wdXBzLnNsaWNlKCk7ZTx0Lmxlbmd0aDtlKyspe3ZhciByPXRbZV07dGhpcy5fcmVtb3ZlKHIpfXRoaXMuX3BvcHVwcyQubmV4dCh0aGlzLl9wb3B1cHMpfTtlLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgcz10aGlzO3RoaXMuX3BvcHVwQ29udGFpbmVyPXRoaXMuX2RvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsXCJtYXBpbGxhcnktanMtcG9wdXAtY29udGFpbmVyXCIsdGhpcy5fY29udGFpbmVyLmVsZW1lbnQpO2Zvcih2YXIgZT0wLHQ9dGhpcy5fcG9wdXBzO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3Iuc2V0UGFyZW50Q29udGFpbmVyKHRoaXMuX3BvcHVwQ29udGFpbmVyKX10aGlzLl91cGRhdGVBbGxTdWJzY3JpcHRpb249YS5jb21iaW5lTGF0ZXN0KHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTtmb3IodmFyIGk9MCxvPXMuX3BvcHVwcztpPG8ubGVuZ3RoO2krKyl7dmFyIGE9b1tpXTthLnVwZGF0ZSh0LHIsbil9fSk7dmFyIG49dGhpcy5fcG9wdXBzJC5waXBlKGkuc3RhcnRXaXRoKHRoaXMuX3BvcHVwcyksaS5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGEuZnJvbShlKS5waXBlKGkubWVyZ2VNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhbmdlZCR9KSl9KSxpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bZV19KSk7dGhpcy5fdXBkYXRlQWRkZWRDaGFuZ2VkU3Vic2NyaXB0aW9uPWEubWVyZ2UodGhpcy5fYWRkZWQkLG4pLnBpcGUoaS53aXRoTGF0ZXN0RnJvbSh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdLGk9ZVszXTtmb3IodmFyIG89MCxhPXQ7bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107cy51cGRhdGUocixuLGkpfX0pfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZUFsbFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3VwZGF0ZUFkZGVkQ2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO2Zvcih2YXIgZT0wLHQ9dGhpcy5fcG9wdXBzO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3IucmVtb3ZlKCl9dGhpcy5fY29udGFpbmVyLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fcG9wdXBDb250YWluZXIpO2RlbGV0ZSB0aGlzLl9wb3B1cENvbnRhaW5lcn07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue319O2UucHJvdG90eXBlLl9yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcG9wdXBzLmluZGV4T2YoZSk7aWYodD09PS0xKXtyZXR1cm59dmFyIHI9dGhpcy5fcG9wdXBzLnNwbGljZSh0LDEpWzBdO2lmKHRoaXMuX2FjdGl2YXRlZCl7ci5yZW1vdmUoKX19O2UuY29tcG9uZW50TmFtZT1cInBvcHVwXCI7cmV0dXJuIGV9KG8uQ29tcG9uZW50KTtyLlBvcHVwQ29tcG9uZW50PXU7by5Db21wb25lbnRTZXJ2aWNlLnJlZ2lzdGVyKHUpO3IuZGVmYXVsdD11fSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEsXCIuLi8uLi9VdGlsc1wiOjMwMSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzNTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuUG9wdXA9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWUoXCIuLi8uLi8uLi9HZW9cIik7dmFyIG89ZShcIi4uLy4uLy4uL1V0aWxzXCIpO3ZhciB4PWUoXCIuLi8uLi8uLi9WaWV3ZXJcIik7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9vcHRpb25zPXt9O2U9ISFlP2U6e307dGhpcy5fb3B0aW9ucy5jYXB0dXJlUG9pbnRlcj1lLmNhcHR1cmVQb2ludGVyPT09ZmFsc2U/ZS5jYXB0dXJlUG9pbnRlcjp0cnVlO3RoaXMuX29wdGlvbnMuY2xlYW49ZS5jbGVhbjt0aGlzLl9vcHRpb25zLmZsb2F0PWUuZmxvYXQ7dGhpcy5fb3B0aW9ucy5vZmZzZXQ9ZS5vZmZzZXQ7dGhpcy5fb3B0aW9ucy5vcGFjaXR5PWUub3BhY2l0eTt0aGlzLl9vcHRpb25zLnBvc2l0aW9uPWUucG9zaXRpb247dGhpcy5fZG9tPSEhcj9yOm5ldyBvLkRPTTt0aGlzLl92aWV3cG9ydENvb3Jkcz0hIXQ/dDpuZXcgaS5WaWV3cG9ydENvb3Jkczt0aGlzLl9ub3RpZnlDaGFuZ2VkJD1uZXcgbi5TdWJqZWN0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNoYW5nZWQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3RpZnlDaGFuZ2VkJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2lmKHRoaXMuX2NvbnRlbnQmJnRoaXMuX2NvbnRlbnQucGFyZW50Tm9kZSl7dGhpcy5fY29udGVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NvbnRlbnQpfWlmKHRoaXMuX2NvbnRhaW5lcil7dGhpcy5fY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fY29udGFpbmVyKTtkZWxldGUgdGhpcy5fY29udGFpbmVyfWlmKHRoaXMuX3BhcmVudENvbnRhaW5lcil7ZGVsZXRlIHRoaXMuX3BhcmVudENvbnRhaW5lcn19O2UucHJvdG90eXBlLnNldEJhc2ljUG9pbnQ9ZnVuY3Rpb24oZSl7dGhpcy5fcG9pbnQ9ZS5zbGljZSgpO3RoaXMuX3JlY3Q9bnVsbDt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5zZXRCYXNpY1JlY3Q9ZnVuY3Rpb24oZSl7dGhpcy5fcmVjdD1lLnNsaWNlKCk7dGhpcy5fcG9pbnQ9bnVsbDt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5zZXRET01Db250ZW50PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NvbnRlbnQmJnRoaXMuX2NvbnRlbnQucGFyZW50Tm9kZSl7dGhpcy5fY29udGVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NvbnRlbnQpfXZhciB0PVwibWFwaWxsYXJ5anMtcG9wdXAtY29udGVudFwiKyh0aGlzLl9vcHRpb25zLmNsZWFuPT09dHJ1ZT9cIi1jbGVhblwiOlwiXCIpKyh0aGlzLl9vcHRpb25zLmNhcHR1cmVQb2ludGVyPT09dHJ1ZT9cIiBtYXBpbGxhcnlqcy1wb3B1cC1jYXB0dXJlLXBvaW50ZXJcIjpcIlwiKTt0aGlzLl9jb250ZW50PXRoaXMuX2RvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsdCx0aGlzLl9jb250YWluZXIpO3RoaXMuX2NvbnRlbnQuYXBwZW5kQ2hpbGQoZSk7dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07ZS5wcm90b3R5cGUuc2V0SFRNTD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kb20uZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3ZhciByPXRoaXMuX2RvbS5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTt2YXIgbjtyLmlubmVySFRNTD1lO3doaWxlKHRydWUpe249ci5maXJzdENoaWxkO2lmKCFuKXticmVha310LmFwcGVuZENoaWxkKG4pfXRoaXMuc2V0RE9NQ29udGVudCh0KX07ZS5wcm90b3R5cGUuc2V0VGV4dD1mdW5jdGlvbihlKXt0aGlzLnNldERPTUNvbnRlbnQodGhpcy5fZG9tLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpKX07ZS5wcm90b3R5cGUuc2V0UGFyZW50Q29udGFpbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX3BhcmVudENvbnRhaW5lcj1lfTtlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2lmKCF0aGlzLl9wYXJlbnRDb250YWluZXJ8fCF0aGlzLl9jb250ZW50KXtyZXR1cm59aWYoIXRoaXMuX3BvaW50JiYhdGhpcy5fcmVjdCl7cmV0dXJufWlmKCF0aGlzLl9jb250YWluZXIpe3RoaXMuX2NvbnRhaW5lcj10aGlzLl9kb20uY3JlYXRlRWxlbWVudChcImRpdlwiLFwibWFwaWxsYXJ5anMtcG9wdXBcIix0aGlzLl9wYXJlbnRDb250YWluZXIpO3ZhciBpPXRoaXMuX29wdGlvbnMuY2xlYW4hPT10cnVlJiZ0aGlzLl9vcHRpb25zLmZsb2F0IT09eC5BbGlnbm1lbnQuQ2VudGVyO2lmKGkpe3ZhciBvPVwibWFwaWxsYXJ5anMtcG9wdXAtdGlwXCIrKHRoaXMuX29wdGlvbnMuY2FwdHVyZVBvaW50ZXI9PT10cnVlP1wiIG1hcGlsbGFyeWpzLXBvcHVwLWNhcHR1cmUtcG9pbnRlclwiOlwiXCIpO3RoaXMuX3RpcD10aGlzLl9kb20uY3JlYXRlRWxlbWVudChcImRpdlwiLG8sdGhpcy5fY29udGFpbmVyKTt0aGlzLl9kb20uY3JlYXRlRWxlbWVudChcImRpdlwiLFwibWFwaWxsYXJ5anMtcG9wdXAtdGlwLWlubmVyXCIsdGhpcy5fdGlwKX10aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY29udGVudCk7dGhpcy5fcGFyZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lcik7aWYodGhpcy5fb3B0aW9ucy5vcGFjaXR5IT1udWxsKXt0aGlzLl9jb250YWluZXIuc3R5bGUub3BhY2l0eT10aGlzLl9vcHRpb25zLm9wYWNpdHkudG9TdHJpbmcoKX19dmFyIGE9bnVsbDt2YXIgcz10aGlzLl9hbGlnbm1lbnRUb1BvcHVwQWxpZ21lbnQodGhpcy5fb3B0aW9ucy5wb3NpdGlvbik7dmFyIHU9dGhpcy5fYWxpZ25tZW50VG9Qb3B1cEFsaWdtZW50KHRoaXMuX29wdGlvbnMuZmxvYXQpO3ZhciBjPXRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3Q7aWYodGhpcy5fcG9pbnQhPW51bGwpe2E9dGhpcy5fdmlld3BvcnRDb29yZHMuYmFzaWNUb0NhbnZhc1NhZmUodGhpcy5fcG9pbnRbMF0sdGhpcy5fcG9pbnRbMV0se29mZnNldEhlaWdodDp0LmhlaWdodCxvZmZzZXRXaWR0aDp0LndpZHRofSxyLGUucGVyc3BlY3RpdmUpfWVsc2V7dmFyIGw9W1wiY2VudGVyXCIsXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIixcInRvcC1sZWZ0XCIsXCJ0b3AtcmlnaHRcIixcImJvdHRvbS1sZWZ0XCIsXCJib3R0b20tcmlnaHRcIl07dmFyIGg9bnVsbDtmb3IodmFyIHA9MCxmPWw7cDxmLmxlbmd0aDtwKyspe3ZhciBkPWZbcF07aWYoYy5jb250YWlucyhcIm1hcGlsbGFyeWpzLXBvcHVwLWZsb2F0LVwiK2QpKXtoPWQ7YnJlYWt9fW49dGhpcy5fcmVjdFRvUGl4ZWwodGhpcy5fcmVjdCxzLGgsZSx0LHIpLGE9blswXSxzPW5bMV07aWYoIXUpe3U9c319aWYoYT09bnVsbCl7dGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7cmV0dXJufXRoaXMuX2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5PVwiXCI7aWYoIXUpe3ZhciB2PXRoaXMuX2NvbnRhaW5lci5vZmZzZXRXaWR0aDt2YXIgbT10aGlzLl9jb250YWluZXIub2Zmc2V0SGVpZ2h0O3ZhciBnPXRoaXMuX3BpeGVsVG9GbG9hdHMoYSx0LHYsbSk7dT1nLmxlbmd0aD09PTA/XCJ0b3BcIjpnLmpvaW4oXCItXCIpfXZhciBfPXRoaXMuX25vcm1hbGl6ZU9mZnNldCh0aGlzLl9vcHRpb25zLm9mZnNldCk7YT1bYVswXStfW3VdWzBdLGFbMV0rX1t1XVsxXV07YT1bTWF0aC5yb3VuZChhWzBdKSxNYXRoLnJvdW5kKGFbMV0pXTt2YXIgeT17Ym90dG9tOlwidHJhbnNsYXRlKC01MCUsMClcIixcImJvdHRvbS1sZWZ0XCI6XCJ0cmFuc2xhdGUoLTEwMCUsMClcIixcImJvdHRvbS1yaWdodFwiOlwidHJhbnNsYXRlKDAsMClcIixjZW50ZXI6XCJ0cmFuc2xhdGUoLTUwJSwtNTAlKVwiLGxlZnQ6XCJ0cmFuc2xhdGUoLTEwMCUsLTUwJSlcIixyaWdodDpcInRyYW5zbGF0ZSgwLC01MCUpXCIsdG9wOlwidHJhbnNsYXRlKC01MCUsLTEwMCUpXCIsXCJ0b3AtbGVmdFwiOlwidHJhbnNsYXRlKC0xMDAlLC0xMDAlKVwiLFwidG9wLXJpZ2h0XCI6XCJ0cmFuc2xhdGUoMCwtMTAwJSlcIn07Zm9yKHZhciBiIGluIHkpe2lmKCF5Lmhhc093blByb3BlcnR5KGIpKXtjb250aW51ZX1jLnJlbW92ZShcIm1hcGlsbGFyeWpzLXBvcHVwLWZsb2F0LVwiK2IpfWMuYWRkKFwibWFwaWxsYXJ5anMtcG9wdXAtZmxvYXQtXCIrdSk7dGhpcy5fY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybT15W3VdK1wiIHRyYW5zbGF0ZShcIithWzBdK1wicHgsXCIrYVsxXStcInB4KVwifTtlLnByb3RvdHlwZS5fcmVjdFRvUGl4ZWw9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2lmKCF0KXt2YXIgYT10aGlzLl9jb250YWluZXIub2Zmc2V0V2lkdGg7dmFyIHM9dGhpcy5fY29udGFpbmVyLm9mZnNldEhlaWdodDt2YXIgdT17Ym90dG9tOlswLHMvMl0sXCJib3R0b20tbGVmdFwiOlstYS8yLHMvMl0sXCJib3R0b20tcmlnaHRcIjpbYS8yLHMvMl0sbGVmdDpbLWEvMiwwXSxyaWdodDpbYS8yLDBdLHRvcDpbMCwtcy8yXSxcInRvcC1sZWZ0XCI6Wy1hLzIsLXMvMl0sXCJ0b3AtcmlnaHRcIjpbYS8yLC1zLzJdfTt2YXIgYz1bXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIl07dmFyIGw9WzAsbnVsbCxudWxsXTtmb3IodmFyIGg9MCxwPWM7aDxwLmxlbmd0aDtoKyspe3ZhciBmPXBbaF07dmFyIGQ9dGhpcy5fcG9pbnRGcm9tUmVjdFBvc2l0aW9uKGUsZik7dmFyIHY9dGhpcy5fdmlld3BvcnRDb29yZHMuYmFzaWNUb0NhbnZhc1NhZmUoZFswXSxkWzFdLHtvZmZzZXRIZWlnaHQ6aS5oZWlnaHQsb2Zmc2V0V2lkdGg6aS53aWR0aH0sbyxuLnBlcnNwZWN0aXZlKTtpZih2PT1udWxsKXtjb250aW51ZX12YXIgbT11W2ZdO3ZhciBnPVt2WzBdK21bMF0sdlsxXSttWzFdXTt2YXIgXz1yIT1udWxsJiZyPT09Zj8xOi43O3ZhciB5PXRoaXMuX3BpeGVsVG9GbG9hdHMoZyxpLGEvXyxzLygyKl8pKTtpZih5Lmxlbmd0aD09PTAmJnZbMF0+MCYmdlswXTxpLndpZHRoJiZ2WzFdPjAmJnZbMV08aS5oZWlnaHQpe3JldHVyblt2LGZdfXZhciBiPU1hdGgubWF4KGdbMF0tYS8yLDApO3ZhciB4PU1hdGgubWluKGdbMF0rYS8yLGkud2lkdGgpO3ZhciB3PU1hdGgubWF4KGdbMV0tcy8yLDApO3ZhciBTPU1hdGgubWluKGdbMV0rcy8yLGkuaGVpZ2h0KTt2YXIgTT1NYXRoLm1heCgwLHgtYik7dmFyIEM9TWF0aC5tYXgoMCxTLXcpO3ZhciBUPV8qTSpDO2lmKFQ+bFswXSl7bFswXT1UO2xbMV09djtsWzJdPWZ9fWlmKGxbMF0+MCl7cmV0dXJuW2xbMV0sbFsyXV19fXZhciBFPXRoaXMuX3BvaW50RnJvbVJlY3RQb3NpdGlvbihlLHQpO3ZhciBPPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmJhc2ljVG9DYW52YXNTYWZlKEVbMF0sRVsxXSx7b2Zmc2V0SGVpZ2h0OmkuaGVpZ2h0LG9mZnNldFdpZHRoOmkud2lkdGh9LG8sbi5wZXJzcGVjdGl2ZSk7cmV0dXJuW08sdCE9bnVsbD90OlwidG9wXCJdfTtlLnByb3RvdHlwZS5fYWxpZ25tZW50VG9Qb3B1cEFsaWdtZW50PWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIHguQWxpZ25tZW50LkJvdHRvbTpyZXR1cm5cImJvdHRvbVwiO2Nhc2UgeC5BbGlnbm1lbnQuQm90dG9tTGVmdDpyZXR1cm5cImJvdHRvbS1sZWZ0XCI7Y2FzZSB4LkFsaWdubWVudC5Cb3R0b21SaWdodDpyZXR1cm5cImJvdHRvbS1yaWdodFwiO2Nhc2UgeC5BbGlnbm1lbnQuQ2VudGVyOnJldHVyblwiY2VudGVyXCI7Y2FzZSB4LkFsaWdubWVudC5MZWZ0OnJldHVyblwibGVmdFwiO2Nhc2UgeC5BbGlnbm1lbnQuUmlnaHQ6cmV0dXJuXCJyaWdodFwiO2Nhc2UgeC5BbGlnbm1lbnQuVG9wOnJldHVyblwidG9wXCI7Y2FzZSB4LkFsaWdubWVudC5Ub3BMZWZ0OnJldHVyblwidG9wLWxlZnRcIjtjYXNlIHguQWxpZ25tZW50LlRvcFJpZ2h0OnJldHVyblwidG9wLXJpZ2h0XCI7ZGVmYXVsdDpyZXR1cm4gbnVsbH19O2UucHJvdG90eXBlLl9ub3JtYWxpemVPZmZzZXQ9ZnVuY3Rpb24oZSl7aWYoZT09bnVsbCl7cmV0dXJuIHRoaXMuX25vcm1hbGl6ZU9mZnNldCgwKX1pZih0eXBlb2YgZT09PVwibnVtYmVyXCIpe3ZhciB0PWU7dmFyIHI9dD49MD8xOi0xO3ZhciBuPXIqTWF0aC5yb3VuZChNYXRoLnNxcnQoLjUqTWF0aC5wb3codCwyKSkpO3JldHVybntib3R0b206WzAsdF0sXCJib3R0b20tbGVmdFwiOlstbixuXSxcImJvdHRvbS1yaWdodFwiOltuLG5dLGNlbnRlcjpbMCwwXSxsZWZ0OlstdCwwXSxyaWdodDpbdCwwXSx0b3A6WzAsLXRdLFwidG9wLWxlZnRcIjpbLW4sLW5dLFwidG9wLXJpZ2h0XCI6W24sLW5dfX1lbHNle3JldHVybntib3R0b206ZS5ib3R0b218fFswLDBdLFwiYm90dG9tLWxlZnRcIjplLmJvdHRvbUxlZnR8fFswLDBdLFwiYm90dG9tLXJpZ2h0XCI6ZS5ib3R0b21SaWdodHx8WzAsMF0sY2VudGVyOmUuY2VudGVyfHxbMCwwXSxsZWZ0OmUubGVmdHx8WzAsMF0scmlnaHQ6ZS5yaWdodHx8WzAsMF0sdG9wOmUudG9wfHxbMCwwXSxcInRvcC1sZWZ0XCI6ZS50b3BMZWZ0fHxbMCwwXSxcInRvcC1yaWdodFwiOmUudG9wUmlnaHR8fFswLDBdfX19O2UucHJvdG90eXBlLl9waXhlbFRvRmxvYXRzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPVtdO2lmKGVbMV08bil7aS5wdXNoKFwiYm90dG9tXCIpfWVsc2UgaWYoZVsxXT50LmhlaWdodC1uKXtpLnB1c2goXCJ0b3BcIil9aWYoZVswXTxyLzIpe2kucHVzaChcInJpZ2h0XCIpfWVsc2UgaWYoZVswXT50LndpZHRoLXIvMil7aS5wdXNoKFwibGVmdFwiKX1yZXR1cm4gaX07ZS5wcm90b3R5cGUuX3BvaW50RnJvbVJlY3RQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPWVbMF07dmFyIG49ZVswXTxlWzJdP2VbMl06ZVsyXSsxO3ZhciBpPWVbMV07dmFyIG89ZVszXTtzd2l0Y2godCl7Y2FzZVwiYm90dG9tXCI6cmV0dXJuWyhyK24pLzIsb107Y2FzZVwiYm90dG9tLWxlZnRcIjpyZXR1cm5bcixvXTtjYXNlXCJib3R0b20tcmlnaHRcIjpyZXR1cm5bbixvXTtjYXNlXCJjZW50ZXJcIjpyZXR1cm5bKHIrbikvMiwoaStvKS8yXTtjYXNlXCJsZWZ0XCI6cmV0dXJuW3IsKGkrbykvMl07Y2FzZVwicmlnaHRcIjpyZXR1cm5bbiwoaStvKS8yXTtjYXNlXCJ0b3BcIjpyZXR1cm5bKHIrbikvMixpXTtjYXNlXCJ0b3AtbGVmdFwiOnJldHVybltyLGldO2Nhc2VcInRvcC1yaWdodFwiOnJldHVybltuLGldO2RlZmF1bHQ6cmV0dXJuWyhyK24pLzIsb119fTtyZXR1cm4gZX0oKTtyLlBvcHVwPWE7ci5kZWZhdWx0PWF9LHtcIi4uLy4uLy4uL0dlb1wiOjI5NCxcIi4uLy4uLy4uL1V0aWxzXCI6MzAxLFwiLi4vLi4vLi4vVmlld2VyXCI6MzAyLHJ4anM6NDN9XSwzNTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNlcXVlbmNlQ29tcG9uZW50PXZvaWQgMDt2YXIgYz1lKFwicnhqc1wiKTt2YXIgbD1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIHU9ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1lKFwiLi4vLi4vRWRnZVwiKTt2YXIgbz1lKFwiLi4vLi4vR3JhcGhcIik7dmFyIGE9ZnVuY3Rpb24oYSl7bihzLGEpO2Z1bmN0aW9uIHMoZSx0LHIsbixpKXt2YXIgbz1hLmNhbGwodGhpcyxlLHQscil8fHRoaXM7by5fc2VxdWVuY2VET01SZW5kZXJlcj0hIW4/bjpuZXcgdS5TZXF1ZW5jZURPTVJlbmRlcmVyKHQpO28uX3NjaGVkdWxlcj1pO28uX2NvbnRhaW5lcldpZHRoJD1uZXcgYy5TdWJqZWN0O28uX2hvdmVyZWRLZXlTdWJqZWN0JD1uZXcgYy5TdWJqZWN0O28uX2hvdmVyZWRLZXkkPW8uX2hvdmVyZWRLZXlTdWJqZWN0JC5waXBlKGwuc2hhcmUoKSk7by5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnBsYXlpbmckLnBpcGUobC5za2lwKDEpLGwud2l0aExhdGVzdEZyb20oby5fY29uZmlndXJhdGlvbiQpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07by5maXJlKHMucGxheWluZ2NoYW5nZWQsdCk7aWYodD09PXIucGxheWluZyl7cmV0dXJufWlmKHQpe28ucGxheSgpfWVsc2V7by5zdG9wKCl9fSk7by5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLmRpcmVjdGlvbiQucGlwZShsLnNraXAoMSksbC53aXRoTGF0ZXN0RnJvbShvLl9jb25maWd1cmF0aW9uJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtpZih0IT09ci5kaXJlY3Rpb24pe28uc2V0RGlyZWN0aW9uKHQpfX0pO3JldHVybiBvfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcImhvdmVyZWRLZXkkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3ZlcmVkS2V5JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3MucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyZSh7cGxheWluZzp0cnVlfSl9O3MucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyZSh7cGxheWluZzpmYWxzZX0pfTtzLnByb3RvdHlwZS5zZXREaXJlY3Rpb249ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe2RpcmVjdGlvbjplfSl9O3MucHJvdG90eXBlLnNldEhpZ2hsaWdodEtleT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZ3VyZSh7aGlnaGxpZ2h0S2V5OmV9KX07cy5wcm90b3R5cGUuc2V0TWF4V2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe21heFdpZHRoOmV9KX07cy5wcm90b3R5cGUuc2V0TWluV2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe21pbldpZHRoOmV9KX07cy5wcm90b3R5cGUuc2V0VmlzaWJsZT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZ3VyZSh7dmlzaWJsZTplfSl9O3MucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciB1PXRoaXM7dGhpcy5fc2VxdWVuY2VET01SZW5kZXJlci5hY3RpdmF0ZSgpO3ZhciB0PXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUobC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VxdWVuY2VFZGdlcyR9KSxsLnB1Ymxpc2hSZXBsYXkoMSksbC5yZWZDb3VudCgpKTt2YXIgZT10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJC5waXBlKGwuZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLnNlcXVlbmNlS2V5fSksbC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGMuY29uY2F0KGMub2YobnVsbCksdS5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5jYWNoZVNlcXVlbmNlJChlLnNlcXVlbmNlS2V5KS5waXBlKGwucmV0cnkoMyksbC5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2FjaGUgc2VxdWVuY2VcIixlKTtyZXR1cm4gYy5vZihudWxsKX0pKSl9KSxsLnN0YXJ0V2l0aChudWxsKSxsLnB1Ymxpc2hSZXBsYXkoMSksbC5yZWZDb3VudCgpKTt0aGlzLl9zZXF1ZW5jZVN1YnNjcmlwdGlvbj1lLnN1YnNjcmliZSgpO3ZhciBpPXRoaXMuX3NlcXVlbmNlRE9NUmVuZGVyZXIuaW5kZXgkLnBpcGUobC53aXRoTGF0ZXN0RnJvbShlKSxsLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gciE9bnVsbD9yLmtleXNbdF06bnVsbH0pLGwuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pLGwuZGlzdGluY3RVbnRpbENoYW5nZWQoKSxsLnB1Ymxpc2goKSxsLnJlZkNvdW50KCkpO3RoaXMuX21vdmVTdWJzY3JpcHRpb249Yy5tZXJnZShpLnBpcGUobC5kZWJvdW5jZVRpbWUoMTAwLHRoaXMuX3NjaGVkdWxlcikpLGkucGlwZShsLmF1ZGl0VGltZSg0MDAsdGhpcy5fc2NoZWR1bGVyKSkpLnBpcGUobC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLGwuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1Ll9uYXZpZ2F0b3IubW92ZVRvS2V5JChlKS5waXBlKGwuY2F0Y2hFcnJvcihmdW5jdGlvbihlKXtyZXR1cm4gYy5lbXB0eSgpfSkpfSkpLnN1YnNjcmliZSgpO3RoaXMuX3NldFNlcXVlbmNlR3JhcGhNb2RlU3Vic2NyaXB0aW9uPXRoaXMuX3NlcXVlbmNlRE9NUmVuZGVyZXIuY2hhbmdpbmdQb3NpdGlvbkNoYW5nZWQkLnBpcGUobC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7dS5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5zZXRHcmFwaE1vZGUoby5HcmFwaE1vZGUuU2VxdWVuY2UpfSk7dGhpcy5fc2V0U3BhdGlhbEdyYXBoTW9kZVN1YnNjcmlwdGlvbj10aGlzLl9zZXF1ZW5jZURPTVJlbmRlcmVyLmNoYW5naW5nUG9zaXRpb25DaGFuZ2VkJC5waXBlKGwuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlfSkpLnN1YnNjcmliZShmdW5jdGlvbigpe3UuX25hdmlnYXRvci5ncmFwaFNlcnZpY2Uuc2V0R3JhcGhNb2RlKG8uR3JhcGhNb2RlLlNwYXRpYWwpfSk7dGhpcy5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5ncmFwaE1vZGUkLnBpcGUobC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1vLkdyYXBoTW9kZS5TcGF0aWFsP3UuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUobC50YWtlKDIpKTpjLmVtcHR5KCl9KSxsLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hZS5zcGF0aWFsRWRnZXMuY2FjaGVkfSksbC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHUuX25hdmlnYXRvci5ncmFwaFNlcnZpY2UuY2FjaGVOb2RlJChlLmtleSkucGlwZShsLmNhdGNoRXJyb3IoZnVuY3Rpb24oZSl7cmV0dXJuIGMuZW1wdHkoKX0pKX0pKS5zdWJzY3JpYmUoKTt0aGlzLl9zdG9wU3Vic2NyaXB0aW9uPXRoaXMuX3NlcXVlbmNlRE9NUmVuZGVyZXIuY2hhbmdpbmdQb3NpdGlvbkNoYW5nZWQkLnBpcGUobC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7dS5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnN0b3AoKX0pO3RoaXMuX2NhY2hlU2VxdWVuY2VOb2Rlc1N1YnNjcmlwdGlvbj1jLmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5ncmFwaE1vZGUkLHRoaXMuX3NlcXVlbmNlRE9NUmVuZGVyZXIuY2hhbmdpbmdQb3NpdGlvbkNoYW5nZWQkLnBpcGUobC5zdGFydFdpdGgoZmFsc2UpLGwuZGlzdGluY3RVbnRpbENoYW5nZWQoKSkpLnBpcGUobC53aXRoTGF0ZXN0RnJvbSh0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJCksbC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXTtyZXR1cm4gbiYmcj09PW8uR3JhcGhNb2RlLlNlcXVlbmNlP3UuX25hdmlnYXRvci5ncmFwaFNlcnZpY2UuY2FjaGVTZXF1ZW5jZU5vZGVzJChpLnNlcXVlbmNlS2V5LGkua2V5KS5waXBlKGwucmV0cnkoMyksbC5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2FjaGUgc2VxdWVuY2Ugbm9kZXMuXCIsZSk7cmV0dXJuIGMuZW1wdHkoKX0pKTpjLmVtcHR5KCl9KSkuc3Vic2NyaWJlKCk7dmFyIHI9ZS5waXBlKGwuc3dpdGNoTWFwKGZ1bmN0aW9uKHIpe2lmKCFyKXtyZXR1cm4gYy5vZih7aW5kZXg6bnVsbCxtYXg6bnVsbH0pfXZhciBuPXRydWU7cmV0dXJuIHUuX3NlcXVlbmNlRE9NUmVuZGVyZXIuY2hhbmdpbmdQb3NpdGlvbkNoYW5nZWQkLnBpcGUobC5zdGFydFdpdGgoZmFsc2UpLGwuZGlzdGluY3RVbnRpbENoYW5nZWQoKSxsLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgdD0hZSYmbj8wOjE7bj1mYWxzZTtyZXR1cm4gZT9pOnUuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUobC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5fSksbC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLGwuc2tpcCh0KSl9KSxsLm1hcChmdW5jdGlvbihlKXt2YXIgdD1yLmtleXMuaW5kZXhPZihlKTtpZih0PT09LTEpe3JldHVybntpbmRleDpudWxsLG1heDpudWxsfX1yZXR1cm57aW5kZXg6dCxtYXg6ci5rZXlzLmxlbmd0aC0xfX0pKX0pKTt0aGlzLl9yZW5kZXJTdWJzY3JpcHRpb249Yy5jb21iaW5lTGF0ZXN0KHQsdGhpcy5fY29uZmlndXJhdGlvbiQsdGhpcy5fY29udGFpbmVyV2lkdGgkLHRoaXMuX3NlcXVlbmNlRE9NUmVuZGVyZXIuY2hhbmdlZCQucGlwZShsLnN0YXJ0V2l0aCh0aGlzLl9zZXF1ZW5jZURPTVJlbmRlcmVyKSksdGhpcy5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnNwZWVkJCxyKS5waXBlKGwubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXSxpPWVbM10sbz1lWzRdLGE9ZVs1XTt2YXIgcz11Ll9zZXF1ZW5jZURPTVJlbmRlcmVyLnJlbmRlcih0LHIsbixvLGEuaW5kZXgsYS5tYXgsdSx1Ll9uYXZpZ2F0b3IpO3JldHVybntuYW1lOnUuX25hbWUsdm5vZGU6c319KSkuc3Vic2NyaWJlKHRoaXMuX2NvbnRhaW5lci5kb21SZW5kZXJlci5yZW5kZXIkKTt0aGlzLl9zZXRTcGVlZFN1YnNjcmlwdGlvbj10aGlzLl9zZXF1ZW5jZURPTVJlbmRlcmVyLnNwZWVkJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dS5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnNldFNwZWVkKGUpfSk7dGhpcy5fc2V0RGlyZWN0aW9uU3Vic2NyaXB0aW9uPXRoaXMuX2NvbmZpZ3VyYXRpb24kLnBpcGUobC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlyZWN0aW9ufSksbC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dS5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnNldERpcmVjdGlvbihlKX0pO3RoaXMuX2NvbnRhaW5lcldpZHRoU3Vic2NyaXB0aW9uPWMuY29tYmluZUxhdGVzdCh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5zaXplJCx0aGlzLl9jb25maWd1cmF0aW9uJC5waXBlKGwuZGlzdGluY3RVbnRpbENoYW5nZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVswXT09PXRbMF0mJmVbMV09PT10WzFdfSxmdW5jdGlvbihlKXtyZXR1cm5bZS5taW5XaWR0aCxlLm1heFdpZHRoXX0pKSkucGlwZShsLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gdS5fc2VxdWVuY2VET01SZW5kZXJlci5nZXRDb250YWluZXJXaWR0aCh0LHIpfSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXJXaWR0aCQpO3RoaXMuX3BsYXlpbmdTdWJzY3JpcHRpb249dGhpcy5fY29uZmlndXJhdGlvbiQucGlwZShsLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5wbGF5aW5nfSksbC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoZSl7dS5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnBsYXkoKX1lbHNle3UuX25hdmlnYXRvci5wbGF5U2VydmljZS5zdG9wKCl9fSk7dGhpcy5faG92ZXJlZEtleVN1YnNjcmlwdGlvbj10aGlzLl9zZXF1ZW5jZURPTVJlbmRlcmVyLm1vdXNlRW50ZXJEaXJlY3Rpb24kLnBpcGUobC5zd2l0Y2hNYXAoZnVuY3Rpb24oaSl7dmFyIGU9dC5waXBlKGwubWFwKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZS5lZGdlczt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTtpZihuLmRhdGEuZGlyZWN0aW9uPT09aSl7cmV0dXJuIG4udG99fXJldHVybiBudWxsfSksbC50YWtlVW50aWwodS5fc2VxdWVuY2VET01SZW5kZXJlci5tb3VzZUxlYXZlRGlyZWN0aW9uJCkpO3JldHVybiBjLmNvbmNhdChlLGMub2YobnVsbCkpfSksbC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUodGhpcy5faG92ZXJlZEtleVN1YmplY3QkKTt0aGlzLl9lbWl0SG92ZXJlZEtleVN1YnNjcmlwdGlvbj10aGlzLl9ob3ZlcmVkS2V5JC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dS5maXJlKHMuaG92ZXJlZGtleWNoYW5nZWQsZSl9KX07cy5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9lbWl0SG92ZXJlZEtleVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3JlbmRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3BsYXlpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9jb250YWluZXJXaWR0aFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2hvdmVyZWRLZXlTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXRTcGVlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NldERpcmVjdGlvblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFNlcXVlbmNlR3JhcGhNb2RlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fc2V0U3BhdGlhbEdyYXBoTW9kZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NlcXVlbmNlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fbW92ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NhY2hlU2VxdWVuY2VOb2Rlc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3N0b3BTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXF1ZW5jZURPTVJlbmRlcmVyLmRlYWN0aXZhdGUoKX07cy5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue2RpcmVjdGlvbjppLkVkZ2VEaXJlY3Rpb24uTmV4dCxtYXhXaWR0aDoxMDgsbWluV2lkdGg6NzAscGxheWluZzpmYWxzZSx2aXNpYmxlOnRydWV9fTtzLmNvbXBvbmVudE5hbWU9XCJzZXF1ZW5jZVwiO3MucGxheWluZ2NoYW5nZWQ9XCJwbGF5aW5nY2hhbmdlZFwiO3MuaG92ZXJlZGtleWNoYW5nZWQ9XCJob3ZlcmVka2V5Y2hhbmdlZFwiO3JldHVybiBzfSh1LkNvbXBvbmVudCk7ci5TZXF1ZW5jZUNvbXBvbmVudD1hO3UuQ29tcG9uZW50U2VydmljZS5yZWdpc3RlcihhKTtyLmRlZmF1bHQ9YX0se1wiLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vRWRnZVwiOjI5MixcIi4uLy4uL0dyYXBoXCI6Mjk1LHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDM1NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TZXF1ZW5jZURPTVJlbmRlcmVyPXZvaWQgMDt2YXIgbj1lKFwicnhqc1wiKTt2YXIgaT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIHc9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBTPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIE09ZShcIi4uLy4uL0VkZ2VcIik7dmFyIGY9ZShcIi4uLy4uL0Vycm9yXCIpO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb250YWluZXI9ZTt0aGlzLl9taW5UaHJlc2hvbGRXaWR0aD0zMjA7dGhpcy5fbWF4VGhyZXNob2xkV2lkdGg9MTQ4MDt0aGlzLl9taW5UaHJlc2hvbGRIZWlnaHQ9MjQwO3RoaXMuX21heFRocmVzaG9sZEhlaWdodD04MjA7dGhpcy5fc3RlcHBlckRlZmF1bHRXaWR0aD0xMDg7dGhpcy5fY29udHJvbHNEZWZhdWx0V2lkdGg9ODg7dGhpcy5fZGVmYXVsdEhlaWdodD0zMDt0aGlzLl9leHBhbmRDb250cm9scz1mYWxzZTt0aGlzLl9tb2RlPVMuU2VxdWVuY2VNb2RlLkRlZmF1bHQ7dGhpcy5fc3BlZWQ9LjU7dGhpcy5fY2hhbmdpbmdTcGVlZD1mYWxzZTt0aGlzLl9pbmRleD1udWxsO3RoaXMuX2NoYW5naW5nUG9zaXRpb249ZmFsc2U7dGhpcy5fbW91c2VFbnRlckRpcmVjdGlvbiQ9bmV3IG4uU3ViamVjdDt0aGlzLl9tb3VzZUxlYXZlRGlyZWN0aW9uJD1uZXcgbi5TdWJqZWN0O3RoaXMuX25vdGlmeUNoYW5nZWQkPW5ldyBuLlN1YmplY3Q7dGhpcy5fbm90aWZ5Q2hhbmdpbmdQb3NpdGlvbkNoYW5nZWQkPW5ldyBuLlN1YmplY3Q7dGhpcy5fbm90aWZ5U3BlZWRDaGFuZ2VkJD1uZXcgbi5TdWJqZWN0O3RoaXMuX25vdGlmeUluZGV4Q2hhbmdlZCQ9bmV3IG4uU3ViamVjdH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGFuZ2VkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm90aWZ5Q2hhbmdlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGFuZ2luZ1Bvc2l0aW9uQ2hhbmdlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vdGlmeUNoYW5naW5nUG9zaXRpb25DaGFuZ2VkJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNwZWVkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm90aWZ5U3BlZWRDaGFuZ2VkJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImluZGV4JFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm90aWZ5SW5kZXhDaGFuZ2VkJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlRW50ZXJEaXJlY3Rpb24kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZUVudGVyRGlyZWN0aW9uJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlTGVhdmVEaXJlY3Rpb24kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZUxlYXZlRGlyZWN0aW9uJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighIXRoaXMuX2NoYW5naW5nU3Vic2NyaXB0aW9uKXtyZXR1cm59dGhpcy5fY2hhbmdpbmdTdWJzY3JpcHRpb249bi5tZXJnZSh0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmRvY3VtZW50TW91c2VVcCQsdGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS50b3VjaEVuZCQucGlwZShpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50b3VjaGVzLmxlbmd0aD09PTB9KSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZih0Ll9jaGFuZ2luZ1NwZWVkKXt0Ll9jaGFuZ2luZ1NwZWVkPWZhbHNlfWlmKHQuX2NoYW5naW5nUG9zaXRpb24pe3QuX3NldENoYW5naW5nUG9zaXRpb24oZmFsc2UpfX0pfTtlLnByb3RvdHlwZS5kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoYW5naW5nU3Vic2NyaXB0aW9uKXtyZXR1cm59dGhpcy5fY2hhbmdpbmdTcGVlZD1mYWxzZTt0aGlzLl9jaGFuZ2luZ1Bvc2l0aW9uPWZhbHNlO3RoaXMuX2V4cGFuZENvbnRyb2xzPWZhbHNlO3RoaXMuX21vZGU9Uy5TZXF1ZW5jZU1vZGUuRGVmYXVsdDt0aGlzLl9jaGFuZ2luZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NoYW5naW5nU3Vic2NyaXB0aW9uPW51bGx9O2UucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihlLHQscixuLGksbyxhLHMpe2lmKHQudmlzaWJsZT09PWZhbHNlKXtyZXR1cm4gdy5oKFwiZGl2LlNlcXVlbmNlQ29udGFpbmVyXCIse30sW10pfXZhciB1PXRoaXMuX2NyZWF0ZVN0ZXBwZXIoZSx0LHIsYSxzKTt2YXIgYz10aGlzLl9jcmVhdGVTZXF1ZW5jZUNvbnRyb2xzKHIpO3ZhciBsPXRoaXMuX2NyZWF0ZVBsYXliYWNrQ29udHJvbHMocixuLGEsdCk7dmFyIGg9dGhpcy5fY3JlYXRlVGltZWxpbmVDb250cm9scyhyLGksbyk7cmV0dXJuIHcuaChcImRpdi5TZXF1ZW5jZUNvbnRhaW5lclwiLFt1LGMsbCxoXSl9O2UucHJvdG90eXBlLmdldENvbnRhaW5lcldpZHRoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5taW5XaWR0aDt2YXIgbj10Lm1heFdpZHRoO2lmKG48cil7bj1yfXZhciBpPShlLndpZHRoLXRoaXMuX21pblRocmVzaG9sZFdpZHRoKS8odGhpcy5fbWF4VGhyZXNob2xkV2lkdGgtdGhpcy5fbWluVGhyZXNob2xkV2lkdGgpO3ZhciBvPShlLmhlaWdodC10aGlzLl9taW5UaHJlc2hvbGRIZWlnaHQpLyh0aGlzLl9tYXhUaHJlc2hvbGRIZWlnaHQtdGhpcy5fbWluVGhyZXNob2xkSGVpZ2h0KTt2YXIgYT1NYXRoLm1heCgwLE1hdGgubWluKDEsTWF0aC5taW4oaSxvKSkpO3JldHVybiByK2EqKG4tcil9O2UucHJvdG90eXBlLl9jcmVhdGVQb3NpdGlvbklucHV0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLl9pbmRleD1lO3ZhciBuPWZ1bmN0aW9uKGUpe3IuX2luZGV4PU51bWJlcihlLnRhcmdldC52YWx1ZSk7ci5fbm90aWZ5SW5kZXhDaGFuZ2VkJC5uZXh0KHIuX2luZGV4KX07dmFyIGk9dGhpcy5fY29udGFpbmVyLmRvbUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt2YXIgbz1NYXRoLm1heCgyNzYsTWF0aC5taW4oNDEwLDUrLjgqaS53aWR0aCkpLTY1O3ZhciBhPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7ci5fc2V0Q2hhbmdpbmdQb3NpdGlvbih0cnVlKX07dmFyIHM9ZnVuY3Rpb24oZSl7aWYoci5fY2hhbmdpbmdQb3NpdGlvbj09PXRydWUpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9fTt2YXIgdT1mdW5jdGlvbihlKXtpZihlLmtleT09PVwiQXJyb3dEb3duXCJ8fGUua2V5PT09XCJBcnJvd0xlZnRcInx8ZS5rZXk9PT1cIkFycm93UmlnaHRcInx8ZS5rZXk9PT1cIkFycm93VXBcIil7ZS5wcmV2ZW50RGVmYXVsdCgpfX07dmFyIGM9e21heDp0IT1udWxsP3Q6MSxtaW46MCxvbmNoYW5nZTpuLG9uaW5wdXQ6bixvbmtleWRvd246dSxvbm1vdXNlZG93bjphLG9ubW91c2Vtb3ZlOnMsb250b3VjaG1vdmU6cyxvbnRvdWNoc3RhcnQ6YSxzdHlsZTp7d2lkdGg6bytcInB4XCJ9LHR5cGU6XCJyYW5nZVwiLHZhbHVlOmUhPW51bGw/ZTowfTt2YXIgbD1lPT1udWxsfHx0PT1udWxsfHx0PD0xO2lmKGwpe2MuZGlzYWJsZWQ9XCJ0cnVlXCJ9dmFyIGg9dy5oKFwiaW5wdXQuU2VxdWVuY2VQb3NpdGlvblwiLGMsW10pO3ZhciBwPWw/XCIuU2VxdWVuY2VQb3NpdGlvbkNvbnRhaW5lckRpc2FibGVkXCI6XCIuU2VxdWVuY2VQb3NpdGlvbkNvbnRhaW5lclwiO3JldHVybiB3LmgoXCJkaXZcIitwLFtoXSl9O2UucHJvdG90eXBlLl9jcmVhdGVTcGVlZElucHV0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fc3BlZWQ9ZTt2YXIgcj1mdW5jdGlvbihlKXt0Ll9zcGVlZD1OdW1iZXIoZS50YXJnZXQudmFsdWUpLzFlMzt0Ll9ub3RpZnlTcGVlZENoYW5nZWQkLm5leHQodC5fc3BlZWQpfTt2YXIgbj10aGlzLl9jb250YWluZXIuZG9tQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciBpPU1hdGgubWF4KDI3NixNYXRoLm1pbig0MTAsNSsuOCpuLndpZHRoKSktMTYwO3ZhciBvPWZ1bmN0aW9uKGUpe3QuX2NoYW5naW5nU3BlZWQ9dHJ1ZTtlLnN0b3BQcm9wYWdhdGlvbigpfTt2YXIgYT1mdW5jdGlvbihlKXtpZih0Ll9jaGFuZ2luZ1NwZWVkPT09dHJ1ZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX19O3ZhciBzPWZ1bmN0aW9uKGUpe2lmKGUua2V5PT09XCJBcnJvd0Rvd25cInx8ZS5rZXk9PT1cIkFycm93TGVmdFwifHxlLmtleT09PVwiQXJyb3dSaWdodFwifHxlLmtleT09PVwiQXJyb3dVcFwiKXtlLnByZXZlbnREZWZhdWx0KCl9fTt2YXIgdT13LmgoXCJpbnB1dC5TZXF1ZW5jZVNwZWVkXCIse21heDoxZTMsbWluOjAsb25jaGFuZ2U6cixvbmlucHV0OnIsb25rZXlkb3duOnMsb25tb3VzZWRvd246byxvbm1vdXNlbW92ZTphLG9udG91Y2htb3ZlOmEsb250b3VjaHN0YXJ0Om8sc3R5bGU6e3dpZHRoOmkrXCJweFwifSx0eXBlOlwicmFuZ2VcIix2YWx1ZToxZTMqZX0sW10pO3JldHVybiB3LmgoXCJkaXYuU2VxdWVuY2VTcGVlZENvbnRhaW5lclwiLFt1XSl9O2UucHJvdG90eXBlLl9jcmVhdGVQbGF5YmFja0NvbnRyb2xzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXM7aWYodGhpcy5fbW9kZSE9PVMuU2VxdWVuY2VNb2RlLlBsYXliYWNrKXtyZXR1cm4gdy5oKFwiZGl2LlNlcXVlbmNlUGxheWJhY2tcIixbXSl9dmFyIG89dy5oKFwiZGl2LlNlcXVlbmNlU3dpdGNoSWNvbi5TZXF1ZW5jZUljb25WaXNpYmxlXCIsW10pO3ZhciBhPW4uZGlyZWN0aW9uPT09TS5FZGdlRGlyZWN0aW9uLk5leHQ/TS5FZGdlRGlyZWN0aW9uLlByZXY6TS5FZGdlRGlyZWN0aW9uLk5leHQ7dmFyIHM9bi5wbGF5aW5nO3ZhciB1PXtvbmNsaWNrOmZ1bmN0aW9uKCl7aWYoIXMpe3Iuc2V0RGlyZWN0aW9uKGEpfX19O3ZhciBjPW4ucGxheWluZz9cIi5TZXF1ZW5jZVN3aXRjaEJ1dHRvbkRpc2FibGVkXCI6XCIuU2VxdWVuY2VTd2l0Y2hCdXR0b25cIjt2YXIgbD13LmgoXCJkaXZcIitjLHUsW29dKTt2YXIgaD13LmgoXCJkaXYuU2VxdWVuY2VTbG93SWNvbi5TZXF1ZW5jZUljb25WaXNpYmxlXCIsW10pO3ZhciBwPXcuaChcImRpdi5TZXF1ZW5jZVNsb3dDb250YWluZXJcIixbaF0pO3ZhciBmPXcuaChcImRpdi5TZXF1ZW5jZUZhc3RJY29uLlNlcXVlbmNlSWNvblZpc2libGVcIixbXSk7dmFyIGQ9dy5oKFwiZGl2LlNlcXVlbmNlRmFzdENvbnRhaW5lclwiLFtmXSk7dmFyIHY9dy5oKFwiZGl2LlNlcXVlbmNlQ2xvc2VJY29uLlNlcXVlbmNlSWNvblZpc2libGVcIixbXSk7dmFyIG09e29uY2xpY2s6ZnVuY3Rpb24oKXtpLl9tb2RlPVMuU2VxdWVuY2VNb2RlLkRlZmF1bHQ7aS5fbm90aWZ5Q2hhbmdlZCQubmV4dChpKX19O3ZhciBnPXcuaChcImRpdi5TZXF1ZW5jZUNsb3NlQnV0dG9uXCIsbSxbdl0pO3ZhciBfPXRoaXMuX2NyZWF0ZVNwZWVkSW5wdXQodCk7dmFyIHk9W2wscCxfLGQsZ107dmFyIGI9TWF0aC5yb3VuZChlL3RoaXMuX3N0ZXBwZXJEZWZhdWx0V2lkdGgqdGhpcy5fZGVmYXVsdEhlaWdodCsxMCk7dmFyIHg9e3N0eWxlOnt0b3A6YitcInB4XCJ9fTtyZXR1cm4gdy5oKFwiZGl2LlNlcXVlbmNlUGxheWJhY2tcIix4LHkpfTtlLnByb3RvdHlwZS5fY3JlYXRlUGxheWluZ0J1dHRvbj1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1yLmRpcmVjdGlvbj09PU0uRWRnZURpcmVjdGlvbi5OZXh0JiZlIT1udWxsfHxyLmRpcmVjdGlvbj09PU0uRWRnZURpcmVjdGlvbi5QcmV2JiZ0IT1udWxsO3ZhciBvPXIucGxheWluZz9mdW5jdGlvbihlKXtuLnN0b3AoKX06aT9mdW5jdGlvbihlKXtuLnBsYXkoKX06bnVsbDt2YXIgYT17b25jbGljazpvfTt2YXIgcz1yLnBsYXlpbmc/XCJTdG9wXCI6aT9cIlBsYXlcIjpcIlBsYXlEaXNhYmxlZFwiO3ZhciB1PXtjbGFzc05hbWU6c307aWYoci5kaXJlY3Rpb249PT1NLkVkZ2VEaXJlY3Rpb24uUHJldil7dS5zdHlsZT17dHJhbnNmb3JtOlwicm90YXRlKDE4MGRlZykgdHJhbnNsYXRlKDUwJSwgNTAlKVwifX12YXIgYz13LmgoXCJkaXYuU2VxdWVuY2VDb21wb25lbnRJY29uXCIsdSxbXSk7dmFyIGw9aT9cIlNlcXVlbmNlUGxheVwiOlwiU2VxdWVuY2VQbGF5RGlzYWJsZWRcIjtyZXR1cm4gdy5oKFwiZGl2LlwiK2wsYSxbY10pfTtlLnByb3RvdHlwZS5fY3JlYXRlU2VxdWVuY2VDb250cm9scz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZhciByPU1hdGgucm91bmQoOC90aGlzLl9zdGVwcGVyRGVmYXVsdFdpZHRoKmUpO3ZhciBuPXtvbmNsaWNrOmZ1bmN0aW9uKCl7dC5fZXhwYW5kQ29udHJvbHM9IXQuX2V4cGFuZENvbnRyb2xzO3QuX21vZGU9Uy5TZXF1ZW5jZU1vZGUuRGVmYXVsdDt0Ll9ub3RpZnlDaGFuZ2VkJC5uZXh0KHQpfSxzdHlsZTp7XCJib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1c1wiOnIrXCJweFwiLFwiYm9yZGVyLXRvcC1yaWdodC1yYWRpdXNcIjpyK1wicHhcIn19O3ZhciBpPXcuaChcImRpdi5TZXF1ZW5jZUV4cGFuZGVyQmFyXCIsW10pO3ZhciBvPXcuaChcImRpdi5TZXF1ZW5jZUV4cGFuZGVyQnV0dG9uXCIsbixbaV0pO3ZhciBhPXRoaXMuX21vZGU9PT1TLlNlcXVlbmNlTW9kZS5QbGF5YmFjaz9cIi5TZXF1ZW5jZUZhc3RJY29uR3JleS5TZXF1ZW5jZUljb25WaXNpYmxlXCI6XCIuU2VxdWVuY2VGYXN0SWNvblwiO3ZhciBzPXcuaChcImRpdlwiK2EsW10pO3ZhciB1PXtvbmNsaWNrOmZ1bmN0aW9uKCl7dC5fbW9kZT10Ll9tb2RlPT09Uy5TZXF1ZW5jZU1vZGUuUGxheWJhY2s/Uy5TZXF1ZW5jZU1vZGUuRGVmYXVsdDpTLlNlcXVlbmNlTW9kZS5QbGF5YmFjazt0Ll9ub3RpZnlDaGFuZ2VkJC5uZXh0KHQpfX07dmFyIGM9dy5oKFwiZGl2LlNlcXVlbmNlUGxheWJhY2tCdXR0b25cIix1LFtzXSk7dmFyIGw9dGhpcy5fbW9kZT09PVMuU2VxdWVuY2VNb2RlLlRpbWVsaW5lP1wiLlNlcXVlbmNlVGltZWxpbmVJY29uR3JleS5TZXF1ZW5jZUljb25WaXNpYmxlXCI6XCIuU2VxdWVuY2VUaW1lbGluZUljb25cIjt2YXIgaD13LmgoXCJkaXZcIitsLFtdKTt2YXIgcD17b25jbGljazpmdW5jdGlvbigpe3QuX21vZGU9dC5fbW9kZT09PVMuU2VxdWVuY2VNb2RlLlRpbWVsaW5lP1MuU2VxdWVuY2VNb2RlLkRlZmF1bHQ6Uy5TZXF1ZW5jZU1vZGUuVGltZWxpbmU7dC5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0KX19O3ZhciBmPXcuaChcImRpdi5TZXF1ZW5jZVRpbWVsaW5lQnV0dG9uXCIscCxbaF0pO3ZhciBkPXtzdHlsZTp7aGVpZ2h0OnRoaXMuX2RlZmF1bHRIZWlnaHQvdGhpcy5fc3RlcHBlckRlZmF1bHRXaWR0aCplK1wicHhcIix0cmFuc2Zvcm06XCJ0cmFuc2xhdGUoXCIrKGUvMisyKStcInB4LCAwKVwiLHdpZHRoOnRoaXMuX2NvbnRyb2xzRGVmYXVsdFdpZHRoL3RoaXMuX3N0ZXBwZXJEZWZhdWx0V2lkdGgqZStcInB4XCJ9fTt2YXIgdj1cIi5TZXF1ZW5jZUNvbnRyb2xzXCIrKHRoaXMuX2V4cGFuZENvbnRyb2xzP1wiLlNlcXVlbmNlQ29udHJvbHNFeHBhbmRlZFwiOlwiXCIpO3JldHVybiB3LmgoXCJkaXZcIit2LGQsW2MsZixvXSl9O2UucHJvdG90eXBlLl9jcmVhdGVTZXF1ZW5jZUFycm93cz1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPXRoaXM7dmFyIGE9e29uY2xpY2s6ZSE9bnVsbD9mdW5jdGlvbihlKXtpLm1vdmVEaXIkKE0uRWRnZURpcmVjdGlvbi5OZXh0KS5zdWJzY3JpYmUodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIGYuQWJvcnRNYXBpbGxhcnlFcnJvcikpe2NvbnNvbGUuZXJyb3IoZSl9fSl9Om51bGwsb25tb3VzZWVudGVyOmZ1bmN0aW9uKGUpe28uX21vdXNlRW50ZXJEaXJlY3Rpb24kLm5leHQoTS5FZGdlRGlyZWN0aW9uLk5leHQpfSxvbm1vdXNlbGVhdmU6ZnVuY3Rpb24oZSl7by5fbW91c2VMZWF2ZURpcmVjdGlvbiQubmV4dChNLkVkZ2VEaXJlY3Rpb24uTmV4dCl9fTt2YXIgcz1NYXRoLnJvdW5kKDgvdGhpcy5fc3RlcHBlckRlZmF1bHRXaWR0aCpyKTt2YXIgdT17b25jbGljazp0IT1udWxsP2Z1bmN0aW9uKGUpe2kubW92ZURpciQoTS5FZGdlRGlyZWN0aW9uLlByZXYpLnN1YnNjcmliZSh1bmRlZmluZWQsZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2YgZi5BYm9ydE1hcGlsbGFyeUVycm9yKSl7Y29uc29sZS5lcnJvcihlKX19KX06bnVsbCxvbm1vdXNlZW50ZXI6ZnVuY3Rpb24oZSl7by5fbW91c2VFbnRlckRpcmVjdGlvbiQubmV4dChNLkVkZ2VEaXJlY3Rpb24uUHJldil9LG9ubW91c2VsZWF2ZTpmdW5jdGlvbihlKXtvLl9tb3VzZUxlYXZlRGlyZWN0aW9uJC5uZXh0KE0uRWRnZURpcmVjdGlvbi5QcmV2KX0sc3R5bGU6e1wiYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1c1wiOnMrXCJweFwiLFwiYm9yZGVyLXRvcC1sZWZ0LXJhZGl1c1wiOnMrXCJweFwifX07dmFyIGM9dGhpcy5fZ2V0U3RlcENsYXNzTmFtZShNLkVkZ2VEaXJlY3Rpb24uTmV4dCxlLG4uaGlnaGxpZ2h0S2V5KTt2YXIgbD10aGlzLl9nZXRTdGVwQ2xhc3NOYW1lKE0uRWRnZURpcmVjdGlvbi5QcmV2LHQsbi5oaWdobGlnaHRLZXkpO3ZhciBoPXcuaChcImRpdi5TZXF1ZW5jZUNvbXBvbmVudEljb25cIixbXSk7dmFyIHA9dy5oKFwiZGl2LlNlcXVlbmNlQ29tcG9uZW50SWNvblwiLFtdKTtyZXR1cm5bdy5oKFwiZGl2LlwiK2wsdSxbcF0pLHcuaChcImRpdi5cIitjLGEsW2hdKV19O2UucHJvdG90eXBlLl9jcmVhdGVTdGVwcGVyPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89bnVsbDt2YXIgYT1udWxsO2Zvcih2YXIgcz0wLHU9ZS5lZGdlcztzPHUubGVuZ3RoO3MrKyl7dmFyIGM9dVtzXTtpZihjLmRhdGEuZGlyZWN0aW9uPT09TS5FZGdlRGlyZWN0aW9uLk5leHQpe289Yy50b31pZihjLmRhdGEuZGlyZWN0aW9uPT09TS5FZGdlRGlyZWN0aW9uLlByZXYpe2E9Yy50b319dmFyIGw9dGhpcy5fY3JlYXRlUGxheWluZ0J1dHRvbihvLGEsdCxuKTt2YXIgaD10aGlzLl9jcmVhdGVTZXF1ZW5jZUFycm93cyhvLGEscix0LGkpO2guc3BsaWNlKDEsMCxsKTt2YXIgcD17b25jb250ZXh0bWVudTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9LHN0eWxlOntoZWlnaHQ6dGhpcy5fZGVmYXVsdEhlaWdodC90aGlzLl9zdGVwcGVyRGVmYXVsdFdpZHRoKnIrXCJweFwiLHdpZHRoOnIrXCJweFwifX07cmV0dXJuIHcuaChcImRpdi5TZXF1ZW5jZVN0ZXBwZXJcIixwLGgpfTtlLnByb3RvdHlwZS5fY3JlYXRlVGltZWxpbmVDb250cm9scz1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztpZih0aGlzLl9tb2RlIT09Uy5TZXF1ZW5jZU1vZGUuVGltZWxpbmUpe3JldHVybiB3LmgoXCJkaXYuU2VxdWVuY2VUaW1lbGluZVwiLFtdKX12YXIgaT10aGlzLl9jcmVhdGVQb3NpdGlvbklucHV0KHQscik7dmFyIG89dy5oKFwiZGl2LlNlcXVlbmNlQ2xvc2VJY29uLlNlcXVlbmNlSWNvblZpc2libGVcIixbXSk7dmFyIGE9e29uY2xpY2s6ZnVuY3Rpb24oKXtuLl9tb2RlPVMuU2VxdWVuY2VNb2RlLkRlZmF1bHQ7bi5fbm90aWZ5Q2hhbmdlZCQubmV4dChuKX19O3ZhciBzPXcuaChcImRpdi5TZXF1ZW5jZUNsb3NlQnV0dG9uXCIsYSxbb10pO3ZhciB1PU1hdGgucm91bmQoZS90aGlzLl9zdGVwcGVyRGVmYXVsdFdpZHRoKnRoaXMuX2RlZmF1bHRIZWlnaHQrMTApO3ZhciBjPXtzdHlsZTp7dG9wOnUrXCJweFwifX07cmV0dXJuIHcuaChcImRpdi5TZXF1ZW5jZVRpbWVsaW5lXCIsYyxbaSxzXSl9O2UucHJvdG90eXBlLl9nZXRTdGVwQ2xhc3NOYW1lPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1lPT09TS5FZGdlRGlyZWN0aW9uLk5leHQ/XCJTZXF1ZW5jZVN0ZXBOZXh0XCI6XCJTZXF1ZW5jZVN0ZXBQcmV2XCI7aWYodD09bnVsbCl7bis9XCJEaXNhYmxlZFwifWVsc2V7aWYocj09PXQpe24rPVwiSGlnaGxpZ2h0XCJ9fXJldHVybiBufTtlLnByb3RvdHlwZS5fc2V0Q2hhbmdpbmdQb3NpdGlvbj1mdW5jdGlvbihlKXt0aGlzLl9jaGFuZ2luZ1Bvc2l0aW9uPWU7dGhpcy5fbm90aWZ5Q2hhbmdpbmdQb3NpdGlvbkNoYW5nZWQkLm5leHQoZSl9O3JldHVybiBlfSgpO3IuU2VxdWVuY2VET01SZW5kZXJlcj1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEsXCIuLi8uLi9FZGdlXCI6MjkyLFwiLi4vLi4vRXJyb3JcIjoyOTMscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLFwidmlydHVhbC1kb21cIjoyNDd9XSwzNTU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU2VxdWVuY2VNb2RlPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiRGVmYXVsdFwiXT0wXT1cIkRlZmF1bHRcIjtlW2VbXCJQbGF5YmFja1wiXT0xXT1cIlBsYXliYWNrXCI7ZVtlW1wiVGltZWxpbmVcIl09Ml09XCJUaW1lbGluZVwifSkobj1yLlNlcXVlbmNlTW9kZXx8KHIuU2VxdWVuY2VNb2RlPXt9KSk7ci5kZWZhdWx0PW59LHt9XSwzNTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU2hhZGVycz12b2lkIDA7dmFyIG49ZShcInBhdGhcIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fWUuZXF1aXJlY3Rhbmd1bGFyPXtmcmFnbWVudDpcIiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZWxzZVxcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHByb2plY3RvclRleDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBwaGlMZW5ndGg7XFxudW5pZm9ybSBmbG9hdCBwaGlTaGlmdDtcXG51bmlmb3JtIGZsb2F0IHRoZXRhTGVuZ3RoO1xcbnVuaWZvcm0gZmxvYXQgdGhldGFTaGlmdDtcXG5cXG52YXJ5aW5nIHZlYzQgdlJzdHE7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICAgIHZlYzMgYiA9IG5vcm1hbGl6ZSh2UnN0cS54eXopO1xcbiAgICBmbG9hdCBsYXQgPSAtYXNpbihiLnkpO1xcbiAgICBmbG9hdCBsb24gPSBhdGFuKGIueCwgYi56KTtcXG4gICAgZmxvYXQgeCA9IChsb24gLSBwaGlTaGlmdCkgLyBwaGlMZW5ndGggKyAwLjU7XFxuICAgIGZsb2F0IHkgPSAobGF0IC0gdGhldGFTaGlmdCkgLyB0aGV0YUxlbmd0aCArIDAuNTtcXG4gICAgdmVjNCBiYXNlQ29sb3IgPSB0ZXh0dXJlMkQocHJvamVjdG9yVGV4LCB2ZWMyKHgsIHkpKTtcXG4gICAgYmFzZUNvbG9yLmEgPSBvcGFjaXR5O1xcbiAgICBnbF9GcmFnQ29sb3IgPSBiYXNlQ29sb3I7XFxufVwiLHZlcnRleDpcIiNpZmRlZiBHTF9FU1xcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIG1hdDQgcHJvamVjdG9yTWF0O1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgdlJzdHEgPSBwcm9qZWN0b3JNYXQgKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbn1cIn07ZS5lcXVpcmVjdGFuZ3VsYXJDdXJ0YWluPXtmcmFnbWVudDpcIiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZWxzZVxcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHByb2plY3RvclRleDtcXG51bmlmb3JtIGZsb2F0IGN1cnRhaW47XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgcGhpTGVuZ3RoO1xcbnVuaWZvcm0gZmxvYXQgcGhpU2hpZnQ7XFxudW5pZm9ybSBmbG9hdCB0aGV0YUxlbmd0aDtcXG51bmlmb3JtIGZsb2F0IHRoZXRhU2hpZnQ7XFxuXFxudmFyeWluZyB2ZWM0IHZSc3RxO1xcblxcbnZvaWQgbWFpbigpXFxue1xcbiAgICB2ZWMzIGIgPSBub3JtYWxpemUodlJzdHEueHl6KTtcXG4gICAgZmxvYXQgbGF0ID0gLWFzaW4oYi55KTtcXG4gICAgZmxvYXQgbG9uID0gYXRhbihiLngsIGIueik7XFxuICAgIGZsb2F0IHggPSAobG9uIC0gcGhpU2hpZnQpIC8gcGhpTGVuZ3RoICsgMC41O1xcbiAgICBmbG9hdCB5ID0gKGxhdCAtIHRoZXRhU2hpZnQpIC8gdGhldGFMZW5ndGggKyAwLjU7XFxuXFxuICAgIGJvb2wgaW52ZXJ0ZWQgPSBjdXJ0YWluIDwgMC41O1xcblxcbiAgICBmbG9hdCBjdXJ0YWluTWluID0gaW52ZXJ0ZWQgPyBjdXJ0YWluICsgMC41IDogY3VydGFpbiAtIDAuNTtcXG4gICAgZmxvYXQgY3VydGFpbk1heCA9IGN1cnRhaW47XFxuXFxuICAgIGJvb2wgaW5zaWRlQ3VydGFpbiA9IGludmVydGVkID9cXG4gICAgICAgIHggPiBjdXJ0YWluTWluIHx8IHggPCBjdXJ0YWluTWF4IDpcXG4gICAgICAgIHggPiBjdXJ0YWluTWluICYmIHggPCBjdXJ0YWluTWF4O1xcblxcbiAgICB2ZWM0IGJhc2VDb2xvcjtcXG4gICAgaWYgKGluc2lkZUN1cnRhaW4pIHtcXG4gICAgICAgIGJhc2VDb2xvciA9IHRleHR1cmUyRChwcm9qZWN0b3JUZXgsIHZlYzIoeCwgeSkpO1xcbiAgICAgICAgYmFzZUNvbG9yLmEgPSBvcGFjaXR5O1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgYmFzZUNvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAwLjApO1xcbiAgICB9XFxuXFxuICAgIGdsX0ZyYWdDb2xvciA9IGJhc2VDb2xvcjtcXG59XCIsdmVydGV4OlwiI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gbWF0NCBwcm9qZWN0b3JNYXQ7XFxuXFxudmFyeWluZyB2ZWM0IHZSc3RxO1xcblxcbnZvaWQgbWFpbigpXFxue1xcbiAgICB2UnN0cSA9IHByb2plY3Rvck1hdCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxuICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxufVwifTtlLnBlcnNwZWN0aXZlPXtmcmFnbWVudDpcIiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZWxzZVxcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHByb2plY3RvclRleDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBmb2NhbDtcXG51bmlmb3JtIGZsb2F0IGsxO1xcbnVuaWZvcm0gZmxvYXQgazI7XFxudW5pZm9ybSBmbG9hdCBzY2FsZV94O1xcbnVuaWZvcm0gZmxvYXQgc2NhbGVfeTtcXG51bmlmb3JtIGZsb2F0IHJhZGlhbF9wZWFrO1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgZmxvYXQgeCA9IHZSc3RxLnggLyB2UnN0cS56O1xcbiAgICBmbG9hdCB5ID0gdlJzdHEueSAvIHZSc3RxLno7XFxuICAgIGZsb2F0IHIyID0geCAqIHggKyB5ICogeTtcXG5cXG4gICAgaWYgKHJhZGlhbF9wZWFrID4gMC4gJiYgcjIgPiByYWRpYWxfcGVhayAqIHNxcnQocjIpKSB7XFxuICAgICAgICByMiA9IHJhZGlhbF9wZWFrICogcmFkaWFsX3BlYWs7XFxuICAgIH1cXG5cXG4gICAgZmxvYXQgZCA9IDEuMCArIGsxICogcjIgKyBrMiAqIHIyICogcjI7XFxuICAgIGZsb2F0IHUgPSBzY2FsZV94ICogZm9jYWwgKiBkICogeCArIDAuNTtcXG4gICAgZmxvYXQgdiA9IC0gc2NhbGVfeSAqIGZvY2FsICogZCAqIHkgKyAwLjU7XFxuXFxuICAgIHZlYzQgYmFzZUNvbG9yO1xcbiAgICBpZiAodSA+PSAwLiAmJiB1IDw9IDEuICYmIHYgPj0gMC4gJiYgdiA8PSAxLikge1xcbiAgICAgICAgYmFzZUNvbG9yID0gdGV4dHVyZTJEKHByb2plY3RvclRleCwgdmVjMih1LCB2KSk7XFxuICAgICAgICBiYXNlQ29sb3IuYSA9IG9wYWNpdHk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBiYXNlQ29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDAuMCk7XFxuICAgIH1cXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gYmFzZUNvbG9yO1xcbn1cIix2ZXJ0ZXg6XCIjaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2VuZGlmXFxuXFxudW5pZm9ybSBtYXQ0IHByb2plY3Rvck1hdDtcXG5cXG52YXJ5aW5nIHZlYzQgdlJzdHE7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICAgIHZSc3RxID0gcHJvamVjdG9yTWF0ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG59XCJ9O2UucGVyc3BlY3RpdmVDdXJ0YWluPXtmcmFnbWVudDpcIiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZWxzZVxcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHByb2plY3RvclRleDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBmb2NhbDtcXG51bmlmb3JtIGZsb2F0IGsxO1xcbnVuaWZvcm0gZmxvYXQgazI7XFxudW5pZm9ybSBmbG9hdCBzY2FsZV94O1xcbnVuaWZvcm0gZmxvYXQgc2NhbGVfeTtcXG51bmlmb3JtIGZsb2F0IHJhZGlhbF9wZWFrO1xcbnVuaWZvcm0gZmxvYXQgY3VydGFpbjtcXG5cXG52YXJ5aW5nIHZlYzQgdlJzdHE7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICAgIGZsb2F0IHggPSB2UnN0cS54IC8gdlJzdHEuejtcXG4gICAgZmxvYXQgeSA9IHZSc3RxLnkgLyB2UnN0cS56O1xcbiAgICBmbG9hdCByMiA9IHggKiB4ICsgeSAqIHk7XFxuXFxuICAgIGlmIChyYWRpYWxfcGVhayA+IDAuICYmIHIyID4gcmFkaWFsX3BlYWsgKiBzcXJ0KHIyKSkge1xcbiAgICAgICAgcjIgPSByYWRpYWxfcGVhayAqIHJhZGlhbF9wZWFrO1xcbiAgICB9XFxuXFxuICAgIGZsb2F0IGQgPSAxLjAgKyBrMSAqIHIyICsgazIgKiByMiAqIHIyO1xcbiAgICBmbG9hdCB1ID0gc2NhbGVfeCAqIGZvY2FsICogZCAqIHggKyAwLjU7XFxuICAgIGZsb2F0IHYgPSAtIHNjYWxlX3kgKiBmb2NhbCAqIGQgKiB5ICsgMC41O1xcblxcbiAgICB2ZWM0IGJhc2VDb2xvcjtcXG4gICAgaWYgKCh1IDwgY3VydGFpbiB8fCBjdXJ0YWluID49IDEuMCkgJiYgdSA+PSAwLiAmJiB1IDw9IDEuICYmIHYgPj0gMC4gJiYgdiA8PSAxLikge1xcbiAgICAgICAgYmFzZUNvbG9yID0gdGV4dHVyZTJEKHByb2plY3RvclRleCwgdmVjMih1LCB2KSk7XFxuICAgICAgICBiYXNlQ29sb3IuYSA9IG9wYWNpdHk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBiYXNlQ29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDAuMCk7XFxuICAgIH1cXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gYmFzZUNvbG9yO1xcbn1cXG5cIix2ZXJ0ZXg6XCIjaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2VuZGlmXFxuXFxudW5pZm9ybSBtYXQ0IHByb2plY3Rvck1hdDtcXG5cXG52YXJ5aW5nIHZlYzQgdlJzdHE7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICAgIHZSc3RxID0gcHJvamVjdG9yTWF0ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG59XCJ9O2UuZmlzaGV5ZT17ZnJhZ21lbnQ6XCIjaWZkZWYgR0xfRlJBR01FTlRfUFJFQ0lTSU9OX0hJR0hcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2Vsc2VcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCBwcm9qZWN0b3JUZXg7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZm9jYWw7XFxudW5pZm9ybSBmbG9hdCBrMTtcXG51bmlmb3JtIGZsb2F0IGsyO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGVfeDtcXG51bmlmb3JtIGZsb2F0IHNjYWxlX3k7XFxudW5pZm9ybSBmbG9hdCByYWRpYWxfcGVhaztcXG5cXG52YXJ5aW5nIHZlYzQgdlJzdHE7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICAgIGZsb2F0IHggPSB2UnN0cS54O1xcbiAgICBmbG9hdCB5ID0gdlJzdHEueTtcXG4gICAgZmxvYXQgeiA9IHZSc3RxLno7XFxuXFxuICAgIGZsb2F0IHIgPSBzcXJ0KHggKiB4ICsgeSAqIHkpO1xcbiAgICBmbG9hdCB0aGV0YSA9IGF0YW4ociwgeik7XFxuXFxuICAgIGlmIChyYWRpYWxfcGVhayA+IDAuICYmIHRoZXRhID4gcmFkaWFsX3BlYWspIHtcXG4gICAgICAgIHRoZXRhID0gcmFkaWFsX3BlYWs7XFxuICAgIH1cXG5cXG4gICAgZmxvYXQgdGhldGEyID0gdGhldGEgKiB0aGV0YTtcXG4gICAgZmxvYXQgdGhldGFfZCA9IHRoZXRhICogKDEuMCArIHRoZXRhMiAqIChrMSArIHRoZXRhMiAqIGsyKSk7XFxuICAgIGZsb2F0IHMgPSBmb2NhbCAqIHRoZXRhX2QgLyByO1xcblxcbiAgICBmbG9hdCB1ID0gc2NhbGVfeCAqIHMgKiB4ICsgMC41O1xcbiAgICBmbG9hdCB2ID0gLXNjYWxlX3kgKiBzICogeSArIDAuNTtcXG5cXG4gICAgdmVjNCBiYXNlQ29sb3I7XFxuICAgIGlmICh1ID49IDAuICYmIHUgPD0gMS4gJiYgdiA+PSAwLiAmJiB2IDw9IDEuKSB7XFxuICAgICAgICBiYXNlQ29sb3IgPSB0ZXh0dXJlMkQocHJvamVjdG9yVGV4LCB2ZWMyKHUsIHYpKTtcXG4gICAgICAgIGJhc2VDb2xvci5hID0gb3BhY2l0eTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGJhc2VDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMC4wKTtcXG4gICAgfVxcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBiYXNlQ29sb3I7XFxufVxcblwiLHZlcnRleDpcIiNpZmRlZiBHTF9FU1xcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIG1hdDQgcHJvamVjdG9yTWF0O1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgdlJzdHEgPSBwcm9qZWN0b3JNYXQgKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbn1cIn07ZS5maXNoZXllQ3VydGFpbj17ZnJhZ21lbnQ6XCIjaWZkZWYgR0xfRlJBR01FTlRfUFJFQ0lTSU9OX0hJR0hcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2Vsc2VcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCBwcm9qZWN0b3JUZXg7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZm9jYWw7XFxudW5pZm9ybSBmbG9hdCBrMTtcXG51bmlmb3JtIGZsb2F0IGsyO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGVfeDtcXG51bmlmb3JtIGZsb2F0IHNjYWxlX3k7XFxudW5pZm9ybSBmbG9hdCByYWRpYWxfcGVhaztcXG51bmlmb3JtIGZsb2F0IGN1cnRhaW47XFxuXFxudmFyeWluZyB2ZWM0IHZSc3RxO1xcblxcbnZvaWQgbWFpbigpXFxue1xcbiAgICBmbG9hdCB4ID0gdlJzdHEueDtcXG4gICAgZmxvYXQgeSA9IHZSc3RxLnk7XFxuICAgIGZsb2F0IHogPSB2UnN0cS56O1xcblxcbiAgICBmbG9hdCByMiA9IHNxcnQoeCAqIHggKyB5ICogeSk7XFxuICAgIGZsb2F0IHRoZXRhID0gYXRhbihyMiwgeik7XFxuXFxuICAgIGlmIChyYWRpYWxfcGVhayA+IDAuICYmIHRoZXRhID4gcmFkaWFsX3BlYWspIHtcXG4gICAgICAgIHRoZXRhID0gcmFkaWFsX3BlYWs7XFxuICAgIH1cXG5cXG4gICAgZmxvYXQgdGhldGEyID0gdGhldGEgKiB0aGV0YTtcXG4gICAgZmxvYXQgdGhldGFfZCA9IHRoZXRhICogKDEuMCArIHRoZXRhMiAqIChrMSArIHRoZXRhMiAqIGsyKSk7XFxuICAgIGZsb2F0IHMgPSBmb2NhbCAqIHRoZXRhX2QgLyByMjtcXG5cXG4gICAgZmxvYXQgdSA9IHNjYWxlX3ggKiBzICogeCArIDAuNTtcXG4gICAgZmxvYXQgdiA9IC1zY2FsZV95ICogcyAqIHkgKyAwLjU7XFxuXFxuICAgIHZlYzQgYmFzZUNvbG9yO1xcbiAgICBpZiAoKHUgPCBjdXJ0YWluIHx8IGN1cnRhaW4gPj0gMS4wKSAmJiB1ID49IDAuICYmIHUgPD0gMS4gJiYgdiA+PSAwLiAmJiB2IDw9IDEuKSB7XFxuICAgICAgICBiYXNlQ29sb3IgPSB0ZXh0dXJlMkQocHJvamVjdG9yVGV4LCB2ZWMyKHUsIHYpKTtcXG4gICAgICAgIGJhc2VDb2xvci5hID0gb3BhY2l0eTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGJhc2VDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMC4wKTtcXG4gICAgfVxcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBiYXNlQ29sb3I7XFxufVxcblwiLHZlcnRleDpcIiNpZmRlZiBHTF9FU1xcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIG1hdDQgcHJvamVjdG9yTWF0O1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgdlJzdHEgPSBwcm9qZWN0b3JNYXQgKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbn1cIn07ZS5wZXJzcGVjdGl2ZURpc3RvcnRlZD17ZnJhZ21lbnQ6XCIjaWZkZWYgR0xfRlJBR01FTlRfUFJFQ0lTSU9OX0hJR0hcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2Vsc2VcXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCBwcm9qZWN0b3JUZXg7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgZmxvYXQgdSA9IHZSc3RxLnggLyB2UnN0cS53O1xcbiAgICBmbG9hdCB2ID0gdlJzdHEueSAvIHZSc3RxLnc7XFxuXFxuICAgIHZlYzQgYmFzZUNvbG9yO1xcbiAgICBpZiAodSA+PSAwLiAmJiB1IDw9IDEuICYmIHYgPj0gMC4gJiYgdiA8PSAxLikge1xcbiAgICAgICAgYmFzZUNvbG9yID0gdGV4dHVyZTJEKHByb2plY3RvclRleCwgdmVjMih1LCB2KSk7XFxuICAgICAgICBiYXNlQ29sb3IuYSA9IG9wYWNpdHk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBiYXNlQ29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDAuMCk7XFxuICAgIH1cXG5cXG4gICAgZ2xfRnJhZ0NvbG9yID0gYmFzZUNvbG9yO1xcbn1cXG5cIix2ZXJ0ZXg6XCIjaWZkZWYgR0xfRVNcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuI2VuZGlmXFxuXFxudW5pZm9ybSBtYXQ0IHByb2plY3Rvck1hdDtcXG5cXG52YXJ5aW5nIHZlYzQgdlJzdHE7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICAgIHZSc3RxID0gcHJvamVjdG9yTWF0ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG59XFxuXCJ9O2UucGVyc3BlY3RpdmVEaXN0b3J0ZWRDdXJ0YWluPXtmcmFnbWVudDpcIiNpZmRlZiBHTF9GUkFHTUVOVF9QUkVDSVNJT05fSElHSFxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZWxzZVxcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gc2FtcGxlcjJEIHByb2plY3RvclRleDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSBmbG9hdCBjdXJ0YWluO1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgZmxvYXQgdSA9IHZSc3RxLnggLyB2UnN0cS53O1xcbiAgICBmbG9hdCB2ID0gdlJzdHEueSAvIHZSc3RxLnc7XFxuXFxuICAgIHZlYzQgYmFzZUNvbG9yO1xcbiAgICBpZiAoKHUgPCBjdXJ0YWluIHx8IGN1cnRhaW4gPj0gMS4wKSAmJiB1ID49IDAuICYmIHUgPD0gMS4gJiYgdiA+PSAwLiAmJiB2IDw9IDEuKSB7XFxuICAgICAgICBiYXNlQ29sb3IgPSB0ZXh0dXJlMkQocHJvamVjdG9yVGV4LCB2ZWMyKHUsIHYpKTtcXG4gICAgICAgIGJhc2VDb2xvci5hID0gb3BhY2l0eTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGJhc2VDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMC4wKTtcXG4gICAgfVxcblxcbiAgICBnbF9GcmFnQ29sb3IgPSBiYXNlQ29sb3I7XFxufVxcblwiLHZlcnRleDpcIiNpZmRlZiBHTF9FU1xcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG4jZW5kaWZcXG5cXG51bmlmb3JtIG1hdDQgcHJvamVjdG9yTWF0O1xcblxcbnZhcnlpbmcgdmVjNCB2UnN0cTtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gICAgdlJzdHEgPSBwcm9qZWN0b3JNYXQgKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbn1cXG5cIn07cmV0dXJuIGV9KCk7ci5TaGFkZXJzPWl9LHtwYXRoOjM5fV0sMzU3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TbGlkZXJDb21wb25lbnQ9dm9pZCAwO3ZhciBkPWUoXCJyeGpzXCIpO3ZhciB2PWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbT1lKFwiLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBhPWUoXCIuLi8uLi9HZW9cIik7dmFyIGc9ZShcIi4uLy4uL1N0YXRlXCIpO3ZhciBfPWUoXCIuLi8uLi9SZW5kZXJcIik7dmFyIHk9ZShcIi4uLy4uL1RpbGVzXCIpO3ZhciBiPWUoXCIuLi8uLi9VdGlsc1wiKTt2YXIgaT1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHQscil8fHRoaXM7aS5fdmlld3BvcnRDb29yZHM9ISFuP246bmV3IGEuVmlld3BvcnRDb29yZHM7aS5fZG9tUmVuZGVyZXI9bmV3IG0uU2xpZGVyRE9NUmVuZGVyZXIodCk7aS5faW1hZ2VUaWxlTG9hZGVyPW5ldyB5LkltYWdlVGlsZUxvYWRlcihiLlVybHMudGlsZVNjaGVtZSxiLlVybHMudGlsZURvbWFpbixiLlVybHMub3JpZ2luKTtpLl9yb2lDYWxjdWxhdG9yPW5ldyB5LlJlZ2lvbk9mSW50ZXJlc3RDYWxjdWxhdG9yO2kuX3NwYXRpYWw9bmV3IGEuU3BhdGlhbDtpLl9nbFJlbmRlcmVyT3BlcmF0aW9uJD1uZXcgZC5TdWJqZWN0O2kuX2dsUmVuZGVyZXJDcmVhdG9yJD1uZXcgZC5TdWJqZWN0O2kuX2dsUmVuZGVyZXJEaXNwb3NlciQ9bmV3IGQuU3ViamVjdDtpLl9nbFJlbmRlcmVyJD1pLl9nbFJlbmRlcmVyT3BlcmF0aW9uJC5waXBlKHYuc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSxudWxsKSx2LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZSE9bnVsbH0pLHYuZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZyYW1lSWR9KSk7aS5fZ2xSZW5kZXJlckNyZWF0b3IkLnBpcGUodi5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZSE9bnVsbCl7dGhyb3cgbmV3IEVycm9yKFwiTXVsdGlwbGUgc2xpZGVyIHN0YXRlcyBjYW4gbm90IGJlIGNyZWF0ZWQgYXQgdGhlIHNhbWUgdGltZVwiKX1yZXR1cm4gbmV3IG0uU2xpZGVyR0xSZW5kZXJlcn19KSkuc3Vic2NyaWJlKGkuX2dsUmVuZGVyZXJPcGVyYXRpb24kKTtpLl9nbFJlbmRlcmVyRGlzcG9zZXIkLnBpcGUodi5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5kaXNwb3NlKCk7cmV0dXJuIG51bGx9fSkpLnN1YnNjcmliZShpLl9nbFJlbmRlcmVyT3BlcmF0aW9uJCk7cmV0dXJuIGl9ZS5wcm90b3R5cGUuc2V0SW5pdGlhbFBvc2l0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuY29uZmlndXJlKHtpbml0aWFsUG9zaXRpb246ZX0pfTtlLnByb3RvdHlwZS5zZXRLZXlzPWZ1bmN0aW9uKGUpe3RoaXMuY29uZmlndXJlKHtrZXlzOmV9KX07ZS5wcm90b3R5cGUuc2V0U2xpZGVyTW9kZT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZ3VyZSh7bW9kZTplfSl9O2UucHJvdG90eXBlLnNldFNsaWRlclZpc2libGU9ZnVuY3Rpb24oZSl7dGhpcy5jb25maWd1cmUoe3NsaWRlclZpc2libGU6ZX0pfTtlLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgej10aGlzO3RoaXMuX21vZGVTdWJjcmlwdGlvbj10aGlzLl9kb21SZW5kZXJlci5tb2RlJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ei5zZXRTbGlkZXJNb2RlKGUpfSk7dGhpcy5fZ2xSZW5kZXJTdWJzY3JpcHRpb249dGhpcy5fZ2xSZW5kZXJlciQucGlwZSh2Lm1hcChmdW5jdGlvbihlKXt2YXIgdD17bmFtZTp6Ll9uYW1lLHJlbmRlcjp7ZnJhbWVJZDplLmZyYW1lSWQsbmVlZHNSZW5kZXI6ZS5uZWVkc1JlbmRlcixyZW5kZXI6ZS5yZW5kZXIuYmluZChlKSxzdGFnZTpfLkdMUmVuZGVyU3RhZ2UuQmFja2dyb3VuZH19O3JldHVybiB0fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZ2xSZW5kZXJlci5yZW5kZXIkKTt2YXIgZT1kLmNvbmNhdCh0aGlzLmNvbmZpZ3VyYXRpb24kLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5pdGlhbFBvc2l0aW9uIT1udWxsP2UuaW5pdGlhbFBvc2l0aW9uOjF9KSx2LmZpcnN0KCkpLHRoaXMuX2RvbVJlbmRlcmVyLnBvc2l0aW9uJCk7dmFyIHQ9dGhpcy5jb25maWd1cmF0aW9uJC5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1vZGV9KSx2LmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO3ZhciByPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm1vdGlvbmxlc3N9KSx2LmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO3ZhciBuPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmN1cnJlbnROb2RlLmZ1bGxQYW5vfSksdi5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTt2YXIgaT1kLmNvbWJpbmVMYXRlc3QodGhpcy5fY29uZmlndXJhdGlvbiQucGlwZSh2Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zbGlkZXJWaXNpYmxlfSkpLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiEoZS5zdGF0ZS5jdXJyZW50Tm9kZT09bnVsbHx8ZS5zdGF0ZS5wcmV2aW91c05vZGU9PW51bGx8fGUuc3RhdGUuY3VycmVudE5vZGUucGFubyYmIWUuc3RhdGUuY3VycmVudE5vZGUuZnVsbFBhbm98fGUuc3RhdGUucHJldmlvdXNOb2RlLnBhbm8mJiFlLnN0YXRlLnByZXZpb3VzTm9kZS5mdWxsUGFub3x8ZS5zdGF0ZS5jdXJyZW50Tm9kZS5mdWxsUGFubyYmIWUuc3RhdGUucHJldmlvdXNOb2RlLmZ1bGxQYW5vKX0pLHYuZGlzdGluY3RVbnRpbENoYW5nZWQoKSkpLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIHQmJnJ9KSx2LmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO3RoaXMuX3dhaXRTdWJzY3JpcHRpb249ZC5jb21iaW5lTGF0ZXN0KHQscixuLGkpLnBpcGUodi53aXRoTGF0ZXN0RnJvbSh0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnN0YXRlJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT10WzJdLG89dFszXSxhPWVbMV07dmFyIHM9byYmKG58fHI9PT1tLlNsaWRlck1vZGUuU3RhdGlvbmFyeXx8aSk7aWYocyYmYSE9PWcuU3RhdGUuV2FpdGluZ0ludGVyYWN0aXZlbHkpe3ouX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uud2FpdEludGVyYWN0aXZlbHkoKX1lbHNlIGlmKCFzJiZhIT09Zy5TdGF0ZS5XYWl0aW5nKXt6Ll9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLndhaXQoKX19KTt0aGlzLl9tb3ZlU3Vic2NyaXB0aW9uPWQuY29tYmluZUxhdGVzdChlLHQscixuLGkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl0saT1lWzNdLG89ZVs0XTtpZihufHxyPT09bS5TbGlkZXJNb2RlLlN0YXRpb25hcnl8fGkpe3ouX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UubW92ZVRvKDEpfWVsc2V7ei5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5tb3ZlVG8odCl9fSk7dGhpcy5fZG9tUmVuZGVyU3Vic2NyaXB0aW9uPWQuY29tYmluZUxhdGVzdChlLHQscixuLGksdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQpLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdLGk9ZVszXSxvPWVbNF0sYT1lWzVdO3JldHVybntuYW1lOnouX25hbWUsdm5vZGU6ei5fZG9tUmVuZGVyZXIucmVuZGVyKHQscixuLGksbyl9fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJCk7dGhpcy5fZ2xSZW5kZXJlckNyZWF0b3IkLm5leHQobnVsbCk7dGhpcy5fdXBkYXRlQ3VydGFpblN1YnNjcmlwdGlvbj1kLmNvbWJpbmVMYXRlc3QoZSxuLGksdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKS5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXSxpPWVbM10sbz1lWzRdO2lmKCFyKXtyZXR1cm4gbj90OjF9dmFyIGE9ei5fdmlld3BvcnRDb29yZHMudmlld3BvcnRUb0Jhc2ljKC0xLjE1LDAsbyxpLnBlcnNwZWN0aXZlKTt2YXIgcz16Ll92aWV3cG9ydENvb3Jkcy52aWV3cG9ydFRvQmFzaWMoMS4xNSwwLG8saS5wZXJzcGVjdGl2ZSk7dmFyIHU9c1swXTxhWzBdP3NbMF0rMTpzWzBdO3ZhciBjPWFbMF0rdCoodS1hWzBdKTtyZXR1cm4gYz4xP2MtMTpjfSksdi5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2UudXBkYXRlQ3VydGFpbih0KTtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKHRoaXMuX2dsUmVuZGVyZXJPcGVyYXRpb24kKTt0aGlzLl9zdGF0ZVN1YnNjcmlwdGlvbj1kLmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLHQpLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIGZ1bmN0aW9uKGUpe2UudXBkYXRlKHQscik7cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9nbFJlbmRlcmVyT3BlcmF0aW9uJCk7dGhpcy5fc2V0S2V5c1N1YnNjcmlwdGlvbj10aGlzLl9jb25maWd1cmF0aW9uJC5waXBlKHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmtleXMhPW51bGx9KSx2LnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gZC56aXAoZC56aXAoei5fY2F0Y2hDYWNoZU5vZGUkKGUua2V5cy5iYWNrZ3JvdW5kKSx6Ll9jYXRjaENhY2hlTm9kZSQoZS5rZXlzLmZvcmVncm91bmQpKS5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybntiYWNrZ3JvdW5kOmVbMF0sZm9yZWdyb3VuZDplWzFdfX0pKSx6Ll9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZSh2LmZpcnN0KCkpKS5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybntub2RlczplWzBdLHN0YXRlOmVbMV0uc3RhdGV9fSkpfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZihlLnN0YXRlLmN1cnJlbnROb2RlIT1udWxsJiZlLnN0YXRlLnByZXZpb3VzTm9kZSE9bnVsbCYmZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXk9PT1lLm5vZGVzLmZvcmVncm91bmQua2V5JiZlLnN0YXRlLnByZXZpb3VzTm9kZS5rZXk9PT1lLm5vZGVzLmJhY2tncm91bmQua2V5KXtyZXR1cm59aWYoZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXk9PT1lLm5vZGVzLmJhY2tncm91bmQua2V5KXt6Ll9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnNldE5vZGVzKFtlLm5vZGVzLmZvcmVncm91bmRdKTtyZXR1cm59aWYoZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXk9PT1lLm5vZGVzLmZvcmVncm91bmQua2V5JiZlLnN0YXRlLnRyYWplY3RvcnkubGVuZ3RoPT09MSl7ei5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5wcmVwZW5kTm9kZXMoW2Uubm9kZXMuYmFja2dyb3VuZF0pO3JldHVybn16Ll9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnNldE5vZGVzKFtlLm5vZGVzLmJhY2tncm91bmRdKTt6Ll9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnNldE5vZGVzKFtlLm5vZGVzLmZvcmVncm91bmRdKX0sZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKX0pO3ZhciBvPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLnByZXZpb3VzTm9kZX0pLHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsfSksdi5kaXN0aW5jdFVudGlsQ2hhbmdlZCh1bmRlZmluZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5fSkpO3ZhciBhPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHYuZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmN1cnJlbnROb2RlLmtleX0pLHYud2l0aExhdGVzdEZyb20odGhpcy5fY29udGFpbmVyLmdsUmVuZGVyZXIud2ViR0xSZW5kZXJlciQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQpLHYubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgaT10LnN0YXRlO3ZhciBvPU1hdGgubWF4KG4ud2lkdGgsbi5oZWlnaHQpO3ZhciBhPWkuY3VycmVudE5vZGU7dmFyIHM9aS5jdXJyZW50VHJhbnNmb3JtO3ZhciB1PW8+MjA0OD8yMDQ4Om8+MTAyND8xMDI0OjUxMjtyZXR1cm4gbmV3IHkuVGV4dHVyZVByb3ZpZGVyKGEua2V5LHMuYmFzaWNXaWR0aCxzLmJhc2ljSGVpZ2h0LHUsYS5pbWFnZSx6Ll9pbWFnZVRpbGVMb2FkZXIsbmV3IHkuSW1hZ2VUaWxlU3RvcmUscil9KSx2LnB1Ymxpc2hSZXBsYXkoMSksdi5yZWZDb3VudCgpKTt0aGlzLl90ZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb249YS5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9zZXRUZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb249YS5waXBlKHYubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLnNldFRleHR1cmVQcm92aWRlcih0LmtleSx0KTtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKHRoaXMuX2dsUmVuZGVyZXJPcGVyYXRpb24kKTt0aGlzLl9zZXRUaWxlU2l6ZVN1YnNjcmlwdGlvbj10aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5zaXplJC5waXBlKHYuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBkLmNvbWJpbmVMYXRlc3QoYSxkLm9mKGUpKS5waXBlKHYuZmlyc3QoKSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPU1hdGgubWF4KHIud2lkdGgsci5oZWlnaHQpO3ZhciBpPW4+MjA0OD8yMDQ4Om4+MTAyND8xMDI0OjUxMjt0LnNldFRpbGVTaXplKGkpfSk7dGhpcy5fYWJvcnRUZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb249YS5waXBlKHYucGFpcndpc2UoKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07dC5hYm9ydCgpfSk7dmFyIHM9ZC5jb21iaW5lTGF0ZXN0KHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYUZyYW1lJCx0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5zaXplJC5waXBlKHYuZGVib3VuY2VUaW1lKDI1MCkpKS5waXBlKHYubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVyblt0LmNhbWVyYS5wb3NpdGlvbi5jbG9uZSgpLHQuY2FtZXJhLmxvb2thdC5jbG9uZSgpLHQuem9vbS52YWx1ZU9mKCksci5oZWlnaHQudmFsdWVPZigpLHIud2lkdGgudmFsdWVPZigpXX0pLHYucGFpcndpc2UoKSx2LnNraXBXaGlsZShmdW5jdGlvbihlKXtyZXR1cm4gZVsxXVsyXS1lWzBdWzJdPDB8fGVbMV1bMl09PT0wfSksdi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXVswXS5lcXVhbHMoZVsxXVswXSk7dmFyIHI9ZVswXVsxXS5lcXVhbHMoZVsxXVsxXSk7dmFyIG49ZVswXVsyXT09PWVbMV1bMl07dmFyIGk9ZVswXVszXT09PWVbMV1bM107dmFyIG89ZVswXVs0XT09PWVbMV1bNF07cmV0dXJuIHQmJnImJm4mJmkmJm99KSx2LmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksdi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSx2LnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gei5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhRnJhbWUkLnBpcGUodi5maXJzdCgpKX0pLHYud2l0aExhdGVzdEZyb20odGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkpO3RoaXMuX3NldFJlZ2lvbk9mSW50ZXJlc3RTdWJzY3JpcHRpb249YS5waXBlKHYuc3dpdGNoTWFwKGZ1bmN0aW9uKGkpe3JldHVybiBzLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdO3JldHVyblt6Ll9yb2lDYWxjdWxhdG9yLmNvbXB1dGVSZWdpb25PZkludGVyZXN0KHQscixuKSxpXX0pKX0pLHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlWzFdLmRpc3Bvc2VkfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3ZhciByPWVbMV07ci5zZXRSZWdpb25PZkludGVyZXN0KHQpfSk7dmFyIHU9YS5waXBlKHYuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc1RleHR1cmUkfSksdi5zdGFydFdpdGgoZmFsc2UpLHYucHVibGlzaFJlcGxheSgxKSx2LnJlZkNvdW50KCkpO3RoaXMuX2hhc1RleHR1cmVTdWJzY3JpcHRpb249dS5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt2YXIgYz10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZSh2LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5ub2Rlc0FoZWFkPT09MH0pLHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmN1cnJlbnROb2RlfSksdi5kaXN0aW5jdFVudGlsQ2hhbmdlZCh1bmRlZmluZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5fSksdi5kZWJvdW5jZVRpbWUoMWUzKSx2LndpdGhMYXRlc3RGcm9tKHUpLHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlWzFdfSksdi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF19KSx2LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5wYW5vP2IuU2V0dGluZ3MubWF4SW1hZ2VTaXplPmIuU2V0dGluZ3MuYmFzZVBhbm9yYW1hU2l6ZTpiLlNldHRpbmdzLm1heEltYWdlU2l6ZT5iLlNldHRpbmdzLmJhc2VJbWFnZVNpemV9KSx2LnN3aXRjaE1hcChmdW5jdGlvbihyKXt2YXIgZT1yLnBhbm8/Yi5TZXR0aW5ncy5iYXNlUGFub3JhbWFTaXplOmIuU2V0dGluZ3MuYmFzZUltYWdlU2l6ZTtpZihNYXRoLm1heChyLmltYWdlLndpZHRoLHIuaW1hZ2UuaGVpZ2h0KT5lKXtyZXR1cm4gZC5lbXB0eSgpfXZhciB0PXIuY2FjaGVJbWFnZSQoYi5TZXR0aW5ncy5tYXhJbWFnZVNpemUpLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuW2UuaW1hZ2UsZV19KSk7cmV0dXJuIHQucGlwZSh2LnRha2VVbnRpbCh1LnBpcGUodi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSkpLHYuY2F0Y2hFcnJvcihmdW5jdGlvbihlLHQpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggaGlnaCByZXMgaW1hZ2UgKFwiK3Iua2V5K1wiKVwiLGUpO3JldHVybiBkLmVtcHR5KCl9KSl9KSkucGlwZSh2LnB1Ymxpc2goKSx2LnJlZkNvdW50KCkpO3RoaXMuX3VwZGF0ZUJhY2tncm91bmRTdWJzY3JpcHRpb249Yy5waXBlKHYud2l0aExhdGVzdEZyb20oYSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZihlWzBdWzFdLmtleSE9PWVbMV0ua2V5fHxlWzFdLmRpc3Bvc2VkKXtyZXR1cm59ZVsxXS51cGRhdGVCYWNrZ3JvdW5kKGVbMF1bMF0pfSk7dGhpcy5fdXBkYXRlVGV4dHVyZUltYWdlU3Vic2NyaXB0aW9uPWMucGlwZSh2Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS51cGRhdGVUZXh0dXJlSW1hZ2UodFswXSx0WzFdKTtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKHRoaXMuX2dsUmVuZGVyZXJPcGVyYXRpb24kKTt2YXIgbD10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZSh2LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUuc3RhdGUucHJldmlvdXNOb2RlfSksdi5kaXN0aW5jdFVudGlsQ2hhbmdlZCh1bmRlZmluZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUucHJldmlvdXNOb2RlLmtleX0pLHYud2l0aExhdGVzdEZyb20odGhpcy5fY29udGFpbmVyLmdsUmVuZGVyZXIud2ViR0xSZW5kZXJlciQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQpLHYubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgaT10LnN0YXRlO3ZhciBvPU1hdGgubWF4KG4ud2lkdGgsbi5oZWlnaHQpO3ZhciBhPWkucHJldmlvdXNOb2RlO3ZhciBzPWkucHJldmlvdXNUcmFuc2Zvcm07dmFyIHU9bz4yMDQ4PzIwNDg6bz4xMDI0PzEwMjQ6NTEyO3JldHVybiBuZXcgeS5UZXh0dXJlUHJvdmlkZXIoYS5rZXkscy5iYXNpY1dpZHRoLHMuYmFzaWNIZWlnaHQsdSxhLmltYWdlLHouX2ltYWdlVGlsZUxvYWRlcixuZXcgeS5JbWFnZVRpbGVTdG9yZSxyKX0pLHYucHVibGlzaFJlcGxheSgxKSx2LnJlZkNvdW50KCkpO3RoaXMuX3RleHR1cmVQcm92aWRlclN1YnNjcmlwdGlvblByZXY9bC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9zZXRUZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb25QcmV2PWwucGlwZSh2Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5zZXRUZXh0dXJlUHJvdmlkZXJQcmV2KHQua2V5LHQpO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fZ2xSZW5kZXJlck9wZXJhdGlvbiQpO3RoaXMuX3NldFRpbGVTaXplU3Vic2NyaXB0aW9uUHJldj10aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5zaXplJC5waXBlKHYuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBkLmNvbWJpbmVMYXRlc3QobCxkLm9mKGUpKS5waXBlKHYuZmlyc3QoKSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPU1hdGgubWF4KHIud2lkdGgsci5oZWlnaHQpO3ZhciBpPW4+MjA0OD8yMDQ4Om4+MTAyND8xMDI0OjUxMjt0LnNldFRpbGVTaXplKGkpfSk7dGhpcy5fYWJvcnRUZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb25QcmV2PWwucGlwZSh2LnBhaXJ3aXNlKCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3QuYWJvcnQoKX0pO3ZhciBoPWQuY29tYmluZUxhdGVzdCh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmFGcmFtZSQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQucGlwZSh2LmRlYm91bmNlVGltZSgyNTApKSkucGlwZSh2Lm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm5bdC5jYW1lcmEucG9zaXRpb24uY2xvbmUoKSx0LmNhbWVyYS5sb29rYXQuY2xvbmUoKSx0Lnpvb20udmFsdWVPZigpLHIuaGVpZ2h0LnZhbHVlT2YoKSxyLndpZHRoLnZhbHVlT2YoKV19KSx2LnBhaXJ3aXNlKCksdi5za2lwV2hpbGUoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV1bMl0tZVswXVsyXTwwfHxlWzFdWzJdPT09MH0pLHYubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF1bMF0uZXF1YWxzKGVbMV1bMF0pO3ZhciByPWVbMF1bMV0uZXF1YWxzKGVbMV1bMV0pO3ZhciBuPWVbMF1bMl09PT1lWzFdWzJdO3ZhciBpPWVbMF1bM109PT1lWzFdWzNdO3ZhciBvPWVbMF1bNF09PT1lWzFdWzRdO3JldHVybiB0JiZyJiZuJiZpJiZvfSksdi5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlfSksdi5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHouX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYUZyYW1lJC5waXBlKHYuZmlyc3QoKSl9KSx2LndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpKTt0aGlzLl9zZXRSZWdpb25PZkludGVyZXN0U3Vic2NyaXB0aW9uUHJldj1sLnBpcGUodi5zd2l0Y2hNYXAoZnVuY3Rpb24oaSl7cmV0dXJuIGgucGlwZSh2Lm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07cmV0dXJuW3ouX3JvaUNhbGN1bGF0b3IuY29tcHV0ZVJlZ2lvbk9mSW50ZXJlc3QodCxyLG4pLGldfSkpfSksdi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIWVbMV0uZGlzcG9zZWR9KSx2LndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT1lWzFdO3ZhciBvPW51bGw7aWYoaS5zdGF0ZS5wcmV2aW91c05vZGUuZnVsbFBhbm8pe2lmKGkuc3RhdGUuY3VycmVudE5vZGUuZnVsbFBhbm8pe3ZhciBhPXouX3NwYXRpYWwudmlld2luZ0RpcmVjdGlvbihpLnN0YXRlLmN1cnJlbnROb2RlLnJvdGF0aW9uKTt2YXIgcz16Ll9zcGF0aWFsLnZpZXdpbmdEaXJlY3Rpb24oaS5zdGF0ZS5wcmV2aW91c05vZGUucm90YXRpb24pO3ZhciB1PXouX3NwYXRpYWwuYW5nbGVCZXR3ZWVuVmVjdG9yMihhLngsYS55LHMueCxzLnkpO3ZhciBjPXUvKDIqTWF0aC5QSSk7dmFyIGw9e21heFg6ei5fc3BhdGlhbC53cmFwKHIuYmJveC5tYXhYK2MsMCwxKSxtYXhZOnIuYmJveC5tYXhZLG1pblg6ei5fc3BhdGlhbC53cmFwKHIuYmJveC5taW5YK2MsMCwxKSxtaW5ZOnIuYmJveC5taW5ZfTtvPXtiYm94OmwscGl4ZWxIZWlnaHQ6ci5waXhlbEhlaWdodCxwaXhlbFdpZHRoOnIucGl4ZWxXaWR0aH19ZWxzZXt2YXIgYT16Ll9zcGF0aWFsLnZpZXdpbmdEaXJlY3Rpb24oaS5zdGF0ZS5jdXJyZW50Tm9kZS5yb3RhdGlvbik7dmFyIHM9ei5fc3BhdGlhbC52aWV3aW5nRGlyZWN0aW9uKGkuc3RhdGUucHJldmlvdXNOb2RlLnJvdGF0aW9uKTt2YXIgdT16Ll9zcGF0aWFsLmFuZ2xlQmV0d2VlblZlY3RvcjIoYS54LGEueSxzLngscy55KTt2YXIgaD11LygyKk1hdGguUEkpO3ZhciBwPXouX3NwYXRpYWwuYW5nbGVUb1BsYW5lKGEudG9BcnJheSgpLFswLDAsMV0pO3ZhciBmPXouX3NwYXRpYWwuYW5nbGVUb1BsYW5lKHMudG9BcnJheSgpLFswLDAsMV0pO3ZhciBkPShmLXApLygyKk1hdGguUEkpO3ZhciB2PWkuc3RhdGUuY3VycmVudFRyYW5zZm9ybTt2YXIgbT1NYXRoLm1heCh2LmJhc2ljV2lkdGgsdi5iYXNpY0hlaWdodCk7dmFyIGc9bT4wPzIqTWF0aC5hdGFuKC41KnYuYmFzaWNXaWR0aC8obSp2LmZvY2FsKSk6TWF0aC5QSS8zO3ZhciBfPW0+MD8yKk1hdGguYXRhbiguNSp2LmJhc2ljSGVpZ2h0LyhtKnYuZm9jYWwpKTpNYXRoLlBJLzM7dmFyIHk9Zy8oMipNYXRoLlBJKTt2YXIgYj1fL01hdGguUEk7dmFyIHg9KHIuYmJveC5tYXhYLXIuYmJveC5taW5YKSp5O3ZhciB3PShyLmJib3gubWF4WS1yLmJib3gubWluWSkqYjt2YXIgUz1yLnBpeGVsV2lkdGgqeTt2YXIgTT1yLnBpeGVsSGVpZ2h0KmI7dmFyIEM9KHIuYmJveC5taW5YK3IuYmJveC5tYXhYKS8yLS41O3ZhciBUPShyLmJib3gubWluWStyLmJib3gubWF4WSkvMi0uNTt2YXIgRT0uNStoK3kqQy14LzI7dmFyIE89LjUraCt5KkMreC8yO3ZhciBQPS41K2QrYipULXcvMjt2YXIgQT0uNStkK2IqVCt3LzI7dmFyIGw9e21heFg6ei5fc3BhdGlhbC53cmFwKE8sMCwxKSxtYXhZOkEsbWluWDp6Ll9zcGF0aWFsLndyYXAoRSwwLDEpLG1pblk6UH07bz17YmJveDpsLHBpeGVsSGVpZ2h0Ok0scGl4ZWxXaWR0aDpTfX19ZWxzZXt2YXIgaj1pLnN0YXRlLmN1cnJlbnRUcmFuc2Zvcm0uYmFzaWNBc3BlY3Q7dmFyIFI9aS5zdGF0ZS5wcmV2aW91c1RyYW5zZm9ybS5iYXNpY0FzcGVjdDt2YXIgaz16Ll9nZXRCYXNpY0Nvcm5lcnMoaixSKSxMPWtbMF0sTj1MWzBdLEk9TFsxXSxEPWtbMV0sQj1EWzBdLEY9RFsxXTt2YXIgeD1CLU47dmFyIHc9Ri1JO3ZhciBTPXIucGl4ZWxXaWR0aC94O3ZhciBNPXIucGl4ZWxIZWlnaHQvdzt2YXIgRT0oeC0xKS8oMip4KStyLmJib3gubWluWC94O3ZhciBPPSh4LTEpLygyKngpK3IuYmJveC5tYXhYL3g7dmFyIFA9KHctMSkvKDIqdykrci5iYm94Lm1pblkvdzt2YXIgQT0ody0xKS8oMip3KStyLmJib3gubWF4WS93O3ZhciBsPXttYXhYOk8sbWF4WTpBLG1pblg6RSxtaW5ZOlB9O3ouX2NsaXBCb3VuZGluZ0JveChsKTtvPXtiYm94OmwscGl4ZWxIZWlnaHQ6TSxwaXhlbFdpZHRoOlN9fW4uc2V0UmVnaW9uT2ZJbnRlcmVzdChvKX0pO3ZhciBwPWwucGlwZSh2LnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5oYXNUZXh0dXJlJH0pLHYuc3RhcnRXaXRoKGZhbHNlKSx2LnB1Ymxpc2hSZXBsYXkoMSksdi5yZWZDb3VudCgpKTt0aGlzLl9oYXNUZXh0dXJlU3Vic2NyaXB0aW9uUHJldj1wLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3ZhciBmPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm5vZGVzQWhlYWQ9PT0wJiYhIWUuc3RhdGUucHJldmlvdXNOb2RlfSksdi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUucHJldmlvdXNOb2RlfSksdi5kaXN0aW5jdFVudGlsQ2hhbmdlZCh1bmRlZmluZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5fSksdi5kZWJvdW5jZVRpbWUoMWUzKSx2LndpdGhMYXRlc3RGcm9tKHApLHYuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlWzFdfSksdi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF19KSx2LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5wYW5vP2IuU2V0dGluZ3MubWF4SW1hZ2VTaXplPmIuU2V0dGluZ3MuYmFzZVBhbm9yYW1hU2l6ZTpiLlNldHRpbmdzLm1heEltYWdlU2l6ZT5iLlNldHRpbmdzLmJhc2VJbWFnZVNpemV9KSx2LnN3aXRjaE1hcChmdW5jdGlvbihyKXt2YXIgZT1yLnBhbm8/Yi5TZXR0aW5ncy5iYXNlUGFub3JhbWFTaXplOmIuU2V0dGluZ3MuYmFzZUltYWdlU2l6ZTtpZihNYXRoLm1heChyLmltYWdlLndpZHRoLHIuaW1hZ2UuaGVpZ2h0KT5lKXtyZXR1cm4gZC5lbXB0eSgpfXZhciB0PXIuY2FjaGVJbWFnZSQoYi5TZXR0aW5ncy5tYXhJbWFnZVNpemUpLnBpcGUodi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuW2UuaW1hZ2UsZV19KSk7cmV0dXJuIHQucGlwZSh2LnRha2VVbnRpbChwLnBpcGUodi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSkpLHYuY2F0Y2hFcnJvcihmdW5jdGlvbihlLHQpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggaGlnaCByZXMgaW1hZ2UgKFwiK3Iua2V5K1wiKVwiLGUpO3JldHVybiBkLmVtcHR5KCl9KSl9KSkucGlwZSh2LnB1Ymxpc2goKSx2LnJlZkNvdW50KCkpO3RoaXMuX3VwZGF0ZUJhY2tncm91bmRTdWJzY3JpcHRpb25QcmV2PWYucGlwZSh2LndpdGhMYXRlc3RGcm9tKGwpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoZVswXVsxXS5rZXkhPT1lWzFdLmtleXx8ZVsxXS5kaXNwb3NlZCl7cmV0dXJufWVbMV0udXBkYXRlQmFja2dyb3VuZChlWzBdWzBdKX0pO3RoaXMuX3VwZGF0ZVRleHR1cmVJbWFnZVN1YnNjcmlwdGlvblByZXY9Zi5waXBlKHYubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLnVwZGF0ZVRleHR1cmVJbWFnZSh0WzBdLHRbMV0pO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fZ2xSZW5kZXJlck9wZXJhdGlvbiQpfTtlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fd2FpdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuc3RhdGUkLnBpcGUodi5maXJzdCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoZSE9PWcuU3RhdGUuVHJhdmVyc2luZyl7dC5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS50cmF2ZXJzZSgpfX0pO3RoaXMuX2dsUmVuZGVyZXJEaXNwb3NlciQubmV4dChudWxsKTt0aGlzLl9kb21SZW5kZXJlci5kZWFjdGl2YXRlKCk7dGhpcy5fbW9kZVN1YmNyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fc2V0S2V5c1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3N0YXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZ2xSZW5kZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9kb21SZW5kZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9tb3ZlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdXBkYXRlQ3VydGFpblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3RleHR1cmVQcm92aWRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFRleHR1cmVQcm92aWRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFRpbGVTaXplU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fYWJvcnRUZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXRSZWdpb25PZkludGVyZXN0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5faGFzVGV4dHVyZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3VwZGF0ZUJhY2tncm91bmRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl91cGRhdGVUZXh0dXJlSW1hZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl90ZXh0dXJlUHJvdmlkZXJTdWJzY3JpcHRpb25QcmV2LnVuc3Vic2NyaWJlKCk7dGhpcy5fc2V0VGV4dHVyZVByb3ZpZGVyU3Vic2NyaXB0aW9uUHJldi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFRpbGVTaXplU3Vic2NyaXB0aW9uUHJldi51bnN1YnNjcmliZSgpO3RoaXMuX2Fib3J0VGV4dHVyZVByb3ZpZGVyU3Vic2NyaXB0aW9uUHJldi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFJlZ2lvbk9mSW50ZXJlc3RTdWJzY3JpcHRpb25QcmV2LnVuc3Vic2NyaWJlKCk7dGhpcy5faGFzVGV4dHVyZVN1YnNjcmlwdGlvblByZXYudW5zdWJzY3JpYmUoKTt0aGlzLl91cGRhdGVCYWNrZ3JvdW5kU3Vic2NyaXB0aW9uUHJldi51bnN1YnNjcmliZSgpO3RoaXMuX3VwZGF0ZVRleHR1cmVJbWFnZVN1YnNjcmlwdGlvblByZXYudW5zdWJzY3JpYmUoKTt0aGlzLmNvbmZpZ3VyZSh7a2V5czpudWxsfSl9O2UucHJvdG90eXBlLl9nZXREZWZhdWx0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybntpbml0aWFsUG9zaXRpb246MSxtb2RlOm0uU2xpZGVyTW9kZS5Nb3Rpb24sc2xpZGVyVmlzaWJsZTp0cnVlfX07ZS5wcm90b3R5cGUuX2NhdGNoQ2FjaGVOb2RlJD1mdW5jdGlvbihyKXtyZXR1cm4gdGhpcy5fbmF2aWdhdG9yLmdyYXBoU2VydmljZS5jYWNoZU5vZGUkKHIpLnBpcGUodi5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjYWNoZSBzbGlkZXIgbm9kZSAoXCIrcitcIilcIixlKTtyZXR1cm4gZC5lbXB0eSgpfSkpfTtlLnByb3RvdHlwZS5fZ2V0QmFzaWNDb3JuZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI7dmFyIG47aWYoZT50KXtyPS41O249LjUqZS90fWVsc2V7cj0uNSp0L2U7bj0uNX1yZXR1cm5bWy41LXIsLjUtbl0sWy41K3IsLjUrbl1dfTtlLnByb3RvdHlwZS5fY2xpcEJvdW5kaW5nQm94PWZ1bmN0aW9uKGUpe2UubWluWD1NYXRoLm1heCgwLE1hdGgubWluKDEsZS5taW5YKSk7ZS5tYXhYPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlLm1heFgpKTtlLm1pblk9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUubWluWSkpO2UubWF4WT1NYXRoLm1heCgwLE1hdGgubWluKDEsZS5tYXhZKSl9O2UuY29tcG9uZW50TmFtZT1cInNsaWRlclwiO3JldHVybiBlfShtLkNvbXBvbmVudCk7ci5TbGlkZXJDb21wb25lbnQ9aTttLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIoaSk7ci5kZWZhdWx0PWl9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4uLy4uL0dlb1wiOjI5NCxcIi4uLy4uL1JlbmRlclwiOjI5NyxcIi4uLy4uL1N0YXRlXCI6Mjk4LFwiLi4vLi4vVGlsZXNcIjozMDAsXCIuLi8uLi9VdGlsc1wiOjMwMSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzNTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU2xpZGVyRE9NUmVuZGVyZXI9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbD1lKFwidmlydHVhbC1kb21cIik7dmFyIG89ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29udGFpbmVyPWU7dGhpcy5faW50ZXJhY3Rpbmc9ZmFsc2U7dGhpcy5fbm90aWZ5TW9kZUNoYW5nZWQkPW5ldyBuLlN1YmplY3Q7dGhpcy5fbm90aWZ5UG9zaXRpb25DaGFuZ2VkJD1uZXcgbi5TdWJqZWN0O3RoaXMuX3N0b3BJbnRlcmFjdGlvblN1YnNjcmlwdGlvbj1udWxsfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vZGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3RpZnlNb2RlQ2hhbmdlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwb3NpdGlvbiRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vdGlmeVBvc2l0aW9uQ2hhbmdlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoISF0aGlzLl9zdG9wSW50ZXJhY3Rpb25TdWJzY3JpcHRpb24pe3JldHVybn10aGlzLl9zdG9wSW50ZXJhY3Rpb25TdWJzY3JpcHRpb249bi5tZXJnZSh0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmRvY3VtZW50TW91c2VVcCQsdGhpcy5fY29udGFpbmVyLnRvdWNoU2VydmljZS50b3VjaEVuZCQucGlwZShpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50b3VjaGVzLmxlbmd0aD09PTB9KSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZih0Ll9pbnRlcmFjdGluZyl7dC5faW50ZXJhY3Rpbmc9ZmFsc2V9fSl9O2UucHJvdG90eXBlLmRlYWN0aXZhdGU9ZnVuY3Rpb24oKXtpZighdGhpcy5fc3RvcEludGVyYWN0aW9uU3Vic2NyaXB0aW9uKXtyZXR1cm59dGhpcy5faW50ZXJhY3Rpbmc9ZmFsc2U7dGhpcy5fc3RvcEludGVyYWN0aW9uU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fc3RvcEludGVyYWN0aW9uU3Vic2NyaXB0aW9uPW51bGx9O2UucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPVtdO2lmKGkpe28ucHVzaChsLmgoXCJkaXYuU2xpZGVyQm9yZGVyXCIsW10pKTt2YXIgYT0hKHJ8fG4pO2lmKGEpe28ucHVzaCh0aGlzLl9jcmVhdGVNb2RlQnV0dG9uKHQpKTtvLnB1c2godGhpcy5fY3JlYXRlTW9kZUJ1dHRvbjJkKHQpKX1vLnB1c2godGhpcy5fY3JlYXRlUG9zaXRpb25JbnB1dChlLGEpKX12YXIgcz10aGlzLl9jb250YWluZXIuZG9tQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciB1PU1hdGgubWF4KDIxNSxNYXRoLm1pbig0MDAscy53aWR0aC0xMDApKTtyZXR1cm4gbC5oKFwiZGl2LlNsaWRlckNvbnRhaW5lclwiLHtzdHlsZTp7d2lkdGg6dStcInB4XCJ9fSxvKX07ZS5wcm90b3R5cGUuX2NyZWF0ZU1vZGVCdXR0b249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2YXIgcj17b25jbGljazpmdW5jdGlvbigpe2lmKGU9PT1vLlNsaWRlck1vZGUuTW90aW9uKXtyZXR1cm59dC5fbm90aWZ5TW9kZUNoYW5nZWQkLm5leHQoby5TbGlkZXJNb2RlLk1vdGlvbil9fTt2YXIgbj1lPT09by5TbGlkZXJNb2RlLlN0YXRpb25hcnk/XCJTbGlkZXJNb2RlQnV0dG9uRGlzYWJsZWRcIjpcIlNsaWRlck1vZGVCdXR0b25cIjtyZXR1cm4gbC5oKFwiZGl2LlwiK24scixbbC5oKFwiZGl2LlNsaWRlck1vZGVJY29uXCIsW10pXSl9O2UucHJvdG90eXBlLl9jcmVhdGVNb2RlQnV0dG9uMmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2YXIgcj17b25jbGljazpmdW5jdGlvbigpe2lmKGU9PT1vLlNsaWRlck1vZGUuU3RhdGlvbmFyeSl7cmV0dXJufXQuX25vdGlmeU1vZGVDaGFuZ2VkJC5uZXh0KG8uU2xpZGVyTW9kZS5TdGF0aW9uYXJ5KX19O3ZhciBuPWU9PT1vLlNsaWRlck1vZGUuTW90aW9uP1wiU2xpZGVyTW9kZUJ1dHRvbjJkRGlzYWJsZWRcIjpcIlNsaWRlck1vZGVCdXR0b24yZFwiO3JldHVybiBsLmgoXCJkaXYuXCIrbixyLFtsLmgoXCJkaXYuU2xpZGVyTW9kZUljb24yZFwiLFtdKV0pfTtlLnByb3RvdHlwZS5fY3JlYXRlUG9zaXRpb25JbnB1dD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dmFyIG49ZnVuY3Rpb24oZSl7ci5fbm90aWZ5UG9zaXRpb25DaGFuZ2VkJC5uZXh0KE51bWJlcihlLnRhcmdldC52YWx1ZSkvMWUzKX07dmFyIGk9ZnVuY3Rpb24oZSl7ci5faW50ZXJhY3Rpbmc9dHJ1ZTtlLnN0b3BQcm9wYWdhdGlvbigpfTt2YXIgbz1mdW5jdGlvbihlKXtpZihyLl9pbnRlcmFjdGluZyl7ZS5zdG9wUHJvcGFnYXRpb24oKX19O3ZhciBhPWZ1bmN0aW9uKGUpe2lmKGUua2V5PT09XCJBcnJvd0Rvd25cInx8ZS5rZXk9PT1cIkFycm93TGVmdFwifHxlLmtleT09PVwiQXJyb3dSaWdodFwifHxlLmtleT09PVwiQXJyb3dVcFwiKXtlLnByZXZlbnREZWZhdWx0KCl9fTt2YXIgcz10aGlzLl9jb250YWluZXIuZG9tQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciB1PU1hdGgubWF4KDIxNSxNYXRoLm1pbig0MDAscy53aWR0aC0xMDUpKS04NCsodD8wOjUyKTt2YXIgYz1sLmgoXCJpbnB1dC5TbGlkZXJQb3NpdGlvblwiLHttYXg6MWUzLG1pbjowLG9uY2hhbmdlOm4sb25pbnB1dDpuLG9ua2V5ZG93bjphLG9ubW91c2Vkb3duOmksb25tb3VzZW1vdmU6byxvbnRvdWNobW92ZTpvLG9udG91Y2hzdGFydDppLHN0eWxlOnt3aWR0aDp1K1wicHhcIn0sdHlwZTpcInJhbmdlXCIsdmFsdWU6MWUzKmV9LFtdKTtyZXR1cm4gbC5oKFwiZGl2LlNsaWRlclBvc2l0aW9uQ29udGFpbmVyXCIsW2NdKX07cmV0dXJuIGV9KCk7ci5TbGlkZXJET01SZW5kZXJlcj1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9Db21wb25lbnRcIjoyOTEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLFwidmlydHVhbC1kb21cIjoyNDd9XSwzNTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU2xpZGVyR0xSZW5kZXJlcj12b2lkIDA7dmFyIFQ9ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgRT1lKFwiLi4vLi4vR2VvXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2ZhY3Rvcnk9bmV3IFQuTWVzaEZhY3Rvcnk7dGhpcy5fc2NlbmU9bmV3IFQuTWVzaFNjZW5lO3RoaXMuX3NwYXRpYWw9bmV3IEUuU3BhdGlhbDt0aGlzLl9jdXJyZW50S2V5PW51bGw7dGhpcy5fcHJldmlvdXNLZXk9bnVsbDt0aGlzLl9kaXNhYmxlZD1mYWxzZTt0aGlzLl9jdXJ0YWluPTE7dGhpcy5fZnJhbWVJZD0wO3RoaXMuX25lZWRzUmVuZGVyPWZhbHNlO3RoaXMuX21vZGU9bnVsbDt0aGlzLl9jdXJyZW50UHJvdmlkZXJEaXNwb3NlcnM9e307dGhpcy5fcHJldmlvdXNQcm92aWRlckRpc3Bvc2Vycz17fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkaXNhYmxlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzYWJsZWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmcmFtZUlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcmFtZUlkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibmVlZHNSZW5kZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25lZWRzUmVuZGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuc2V0VGV4dHVyZVByb3ZpZGVyPWZ1bmN0aW9uKGUsdCl7dGhpcy5fc2V0VGV4dHVyZVByb3ZpZGVyKGUsdGhpcy5fY3VycmVudEtleSx0LHRoaXMuX2N1cnJlbnRQcm92aWRlckRpc3Bvc2Vycyx0aGlzLl91cGRhdGVUZXh0dXJlLmJpbmQodGhpcykpfTtlLnByb3RvdHlwZS5zZXRUZXh0dXJlUHJvdmlkZXJQcmV2PWZ1bmN0aW9uKGUsdCl7dGhpcy5fc2V0VGV4dHVyZVByb3ZpZGVyKGUsdGhpcy5fcHJldmlvdXNLZXksdCx0aGlzLl9wcmV2aW91c1Byb3ZpZGVyRGlzcG9zZXJzLHRoaXMuX3VwZGF0ZVRleHR1cmVQcmV2LmJpbmQodGhpcykpfTtlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl91cGRhdGVGcmFtZUlkKGUuaWQpO3RoaXMuX3VwZGF0ZUltYWdlUGxhbmVzKGUuc3RhdGUsdCl9O2UucHJvdG90eXBlLnVwZGF0ZUN1cnRhaW49ZnVuY3Rpb24oZSl7aWYodGhpcy5fY3VydGFpbj09PWUpe3JldHVybn10aGlzLl9jdXJ0YWluPWU7dGhpcy5fdXBkYXRlQ3VydGFpbigpO3RoaXMuX25lZWRzUmVuZGVyPXRydWV9O2UucHJvdG90eXBlLnVwZGF0ZVRleHR1cmU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmtleT09PXRoaXMuX2N1cnJlbnRLZXk/dGhpcy5fc2NlbmUucGxhbmVzOnQua2V5PT09dGhpcy5fcHJldmlvdXNLZXk/dGhpcy5fc2NlbmUucGxhbmVzT2xkOnt9O2lmKE9iamVjdC5rZXlzKHIpLmxlbmd0aD09PTApe3JldHVybn10aGlzLl9uZWVkc1JlbmRlcj10cnVlO2Zvcih2YXIgbiBpbiByKXtpZighci5oYXNPd25Qcm9wZXJ0eShuKSl7Y29udGludWV9dmFyIGk9cltuXTt2YXIgbz1pLm1hdGVyaWFsO3ZhciBhPW8udW5pZm9ybXMucHJvamVjdG9yVGV4LnZhbHVlO2EuaW1hZ2U9ZTthLm5lZWRzVXBkYXRlPXRydWV9fTtlLnByb3RvdHlwZS51cGRhdGVUZXh0dXJlSW1hZ2U9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9jdXJyZW50S2V5IT09dC5rZXkpe3JldHVybn10aGlzLl9uZWVkc1JlbmRlcj10cnVlO3ZhciByPXRoaXMuX3NjZW5lLnBsYW5lcztmb3IodmFyIG4gaW4gcil7aWYoIXIuaGFzT3duUHJvcGVydHkobikpe2NvbnRpbnVlfXZhciBpPXJbbl07dmFyIG89aS5tYXRlcmlhbDt2YXIgYT1vLnVuaWZvcm1zLnByb2plY3RvclRleC52YWx1ZTthLmltYWdlPWU7YS5uZWVkc1VwZGF0ZT10cnVlfX07ZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuZGlzYWJsZWQpe3QucmVuZGVyKHRoaXMuX3NjZW5lLnNjZW5lT2xkLGUpfXQucmVuZGVyKHRoaXMuX3NjZW5lLnNjZW5lLGUpO3RoaXMuX25lZWRzUmVuZGVyPWZhbHNlfTtlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fc2NlbmUuY2xlYXIoKTtmb3IodmFyIGUgaW4gdGhpcy5fY3VycmVudFByb3ZpZGVyRGlzcG9zZXJzKXtpZighdGhpcy5fY3VycmVudFByb3ZpZGVyRGlzcG9zZXJzLmhhc093blByb3BlcnR5KGUpKXtjb250aW51ZX10aGlzLl9jdXJyZW50UHJvdmlkZXJEaXNwb3NlcnNbZV0oKX1mb3IodmFyIGUgaW4gdGhpcy5fcHJldmlvdXNQcm92aWRlckRpc3Bvc2Vycyl7aWYoIXRoaXMuX3ByZXZpb3VzUHJvdmlkZXJEaXNwb3NlcnMuaGFzT3duUHJvcGVydHkoZSkpe2NvbnRpbnVlfXRoaXMuX3ByZXZpb3VzUHJvdmlkZXJEaXNwb3NlcnNbZV0oKX10aGlzLl9jdXJyZW50UHJvdmlkZXJEaXNwb3NlcnM9e307dGhpcy5fcHJldmlvdXNQcm92aWRlckRpc3Bvc2Vycz17fX07ZS5wcm90b3R5cGUuX2dldEJhc2ljQ29ybmVycz1mdW5jdGlvbihlLHQpe3ZhciByO3ZhciBuO2lmKGU+dCl7cj0uNTtuPS41KmUvdH1lbHNle3I9LjUqdC9lO249LjV9cmV0dXJuW1suNS1yLC41LW5dLFsuNStyLC41K25dXX07ZS5wcm90b3R5cGUuX3NldERpc2FibGVkPWZ1bmN0aW9uKGUpe3RoaXMuX2Rpc2FibGVkPWUuY3VycmVudE5vZGU9PW51bGx8fGUucHJldmlvdXNOb2RlPT1udWxsfHxlLmN1cnJlbnROb2RlLnBhbm8mJiFlLmN1cnJlbnROb2RlLmZ1bGxQYW5vfHxlLnByZXZpb3VzTm9kZS5wYW5vJiYhZS5wcmV2aW91c05vZGUuZnVsbFBhbm98fGUuY3VycmVudE5vZGUuZnVsbFBhbm8mJiFlLnByZXZpb3VzTm9kZS5mdWxsUGFub307ZS5wcm90b3R5cGUuX3NldFRleHR1cmVQcm92aWRlcj1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPXRoaXM7aWYoZSE9PXQpe3JldHVybn12YXIgYT1yLnRleHR1cmVDcmVhdGVkJC5zdWJzY3JpYmUoaSk7dmFyIHM9ci50ZXh0dXJlVXBkYXRlZCQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe28uX25lZWRzUmVuZGVyPXRydWV9KTt2YXIgdT1mdW5jdGlvbigpe2EudW5zdWJzY3JpYmUoKTtzLnVuc3Vic2NyaWJlKCk7ci5kaXNwb3NlKCl9O2lmKGUgaW4gbil7dmFyIGM9bltlXTtjKCk7ZGVsZXRlIG5bZV19bltlXT11fTtlLnByb3RvdHlwZS5fdXBkYXRlQ3VydGFpbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3NjZW5lLnBsYW5lcztmb3IodmFyIHQgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkodCkpe2NvbnRpbnVlfXZhciByPWVbdF07dmFyIG49ci5tYXRlcmlhbDtpZighIW4udW5pZm9ybXMuY3VydGFpbil7bi51bmlmb3Jtcy5jdXJ0YWluLnZhbHVlPXRoaXMuX2N1cnRhaW59fX07ZS5wcm90b3R5cGUuX3VwZGF0ZUZyYW1lSWQ9ZnVuY3Rpb24oZSl7dGhpcy5fZnJhbWVJZD1lfTtlLnByb3RvdHlwZS5fdXBkYXRlSW1hZ2VQbGFuZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmN1cnJlbnROb2RlIT1udWxsJiZ0aGlzLl9jdXJyZW50S2V5IT09ZS5jdXJyZW50Tm9kZS5rZXk7dmFyIG49ZS5wcmV2aW91c05vZGUhPW51bGwmJnRoaXMuX3ByZXZpb3VzS2V5IT09ZS5wcmV2aW91c05vZGUua2V5O3ZhciBpPXRoaXMuX21vZGUhPT10O2lmKCEocnx8bnx8aSkpe3JldHVybn10aGlzLl9zZXREaXNhYmxlZChlKTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlO3RoaXMuX21vZGU9dDt2YXIgbz1lLm1vdGlvbmxlc3N8fHQ9PT1ULlNsaWRlck1vZGUuU3RhdGlvbmFyeXx8ZS5jdXJyZW50Tm9kZS5wYW5vO2lmKHRoaXMuZGlzYWJsZWR8fG4pe2lmKHRoaXMuX3ByZXZpb3VzS2V5IGluIHRoaXMuX3ByZXZpb3VzUHJvdmlkZXJEaXNwb3NlcnMpe3RoaXMuX3ByZXZpb3VzUHJvdmlkZXJEaXNwb3NlcnNbdGhpcy5fcHJldmlvdXNLZXldKCk7ZGVsZXRlIHRoaXMuX3ByZXZpb3VzUHJvdmlkZXJEaXNwb3NlcnNbdGhpcy5fcHJldmlvdXNLZXldfX1pZih0aGlzLmRpc2FibGVkKXt0aGlzLl9zY2VuZS5zZXRJbWFnZVBsYW5lc09sZCh7fSl9ZWxzZXtpZihufHxpKXt2YXIgYT1lLnByZXZpb3VzTm9kZTt0aGlzLl9wcmV2aW91c0tleT1hLmtleTt2YXIgcz1lLmN1cnJlbnRUcmFuc2Zvcm0ucnQuZWxlbWVudHM7dmFyIHU9W3NbMTJdLHNbMTNdLHNbMTRdXTt2YXIgYz1lLmN1cnJlbnRUcmFuc2Zvcm0uYmFzaWNBc3BlY3Q7dmFyIGw9ZS5wcmV2aW91c1RyYW5zZm9ybS5iYXNpY0FzcGVjdDt2YXIgaD1jPmw/WzEsbC9jXTpbYy9sLDFdO3ZhciBwPWUuY3VycmVudE5vZGUucm90YXRpb247dmFyIGY9ZS5jdXJyZW50Tm9kZS53aWR0aDt2YXIgZD1lLmN1cnJlbnROb2RlLmhlaWdodDtpZihhLmZ1bGxQYW5vKXtwPWUucHJldmlvdXNOb2RlLnJvdGF0aW9uO3U9dGhpcy5fc3BhdGlhbC5yb3RhdGUodGhpcy5fc3BhdGlhbC5vcHRpY2FsQ2VudGVyKGUuY3VycmVudE5vZGUucm90YXRpb24sdSkudG9BcnJheSgpLHApLm11bHRpcGx5U2NhbGFyKC0xKS50b0FycmF5KCk7Zj1lLnByZXZpb3VzTm9kZS53aWR0aDtkPWUucHJldmlvdXNOb2RlLmhlaWdodH12YXIgdj1uZXcgRS5UcmFuc2Zvcm0oZS5jdXJyZW50Tm9kZS5vcmllbnRhdGlvbixmLGQsZS5jdXJyZW50Tm9kZS5mb2NhbCxlLmN1cnJlbnROb2RlLnNjYWxlLGEuZ3Bhbm8scCx1LGEuaW1hZ2UsaCk7dmFyIG09dW5kZWZpbmVkO2lmKGEuZnVsbFBhbm8pe209dGhpcy5fZmFjdG9yeS5jcmVhdGVNZXNoKGEsb3x8ZS5jdXJyZW50Tm9kZS5mdWxsUGFubz92OmUucHJldmlvdXNUcmFuc2Zvcm0pfWVsc2V7aWYobyl7dmFyIGc9dGhpcy5fZ2V0QmFzaWNDb3JuZXJzKGMsbCksXz1nWzBdLHk9X1swXSxiPV9bMV0seD1nWzFdLHc9eFswXSxTPXhbMV07bT10aGlzLl9mYWN0b3J5LmNyZWF0ZUZsYXRNZXNoKGUucHJldmlvdXNOb2RlLHYseSx3LGIsUyl9ZWxzZXttPXRoaXMuX2ZhY3RvcnkuY3JlYXRlTWVzaChlLnByZXZpb3VzTm9kZSxlLnByZXZpb3VzVHJhbnNmb3JtKX19dmFyIE09e307TVthLmtleV09bTt0aGlzLl9zY2VuZS5zZXRJbWFnZVBsYW5lc09sZChNKX19aWYocnx8aSl7aWYodGhpcy5fY3VycmVudEtleSBpbiB0aGlzLl9jdXJyZW50UHJvdmlkZXJEaXNwb3NlcnMpe3RoaXMuX2N1cnJlbnRQcm92aWRlckRpc3Bvc2Vyc1t0aGlzLl9jdXJyZW50S2V5XSgpO2RlbGV0ZSB0aGlzLl9jdXJyZW50UHJvdmlkZXJEaXNwb3NlcnNbdGhpcy5fY3VycmVudEtleV19dGhpcy5fY3VycmVudEtleT1lLmN1cnJlbnROb2RlLmtleTt2YXIgQz17fTtpZihlLmN1cnJlbnROb2RlLmZ1bGxQYW5vKXtDW2UuY3VycmVudE5vZGUua2V5XT10aGlzLl9mYWN0b3J5LmNyZWF0ZUN1cnRhaW5NZXNoKGUuY3VycmVudE5vZGUsZS5jdXJyZW50VHJhbnNmb3JtKX1lbHNlIGlmKGUuY3VycmVudE5vZGUucGFubyYmIWUuY3VycmVudE5vZGUuZnVsbFBhbm8pe0NbZS5jdXJyZW50Tm9kZS5rZXldPXRoaXMuX2ZhY3RvcnkuY3JlYXRlTWVzaChlLmN1cnJlbnROb2RlLGUuY3VycmVudFRyYW5zZm9ybSl9ZWxzZXtpZihvKXtDW2UuY3VycmVudE5vZGUua2V5XT10aGlzLl9mYWN0b3J5LmNyZWF0ZURpc3RvcnRlZEN1cnRhaW5NZXNoKGUuY3VycmVudE5vZGUsZS5jdXJyZW50VHJhbnNmb3JtKX1lbHNle0NbZS5jdXJyZW50Tm9kZS5rZXldPXRoaXMuX2ZhY3RvcnkuY3JlYXRlQ3VydGFpbk1lc2goZS5jdXJyZW50Tm9kZSxlLmN1cnJlbnRUcmFuc2Zvcm0pfX10aGlzLl9zY2VuZS5zZXRJbWFnZVBsYW5lcyhDKTt0aGlzLl91cGRhdGVDdXJ0YWluKCl9fTtlLnByb3RvdHlwZS5fdXBkYXRlVGV4dHVyZT1mdW5jdGlvbihlKXt0aGlzLl9uZWVkc1JlbmRlcj10cnVlO3ZhciB0PXRoaXMuX3NjZW5lLnBsYW5lcztmb3IodmFyIHIgaW4gdCl7aWYoIXQuaGFzT3duUHJvcGVydHkocikpe2NvbnRpbnVlfXZhciBuPXRbcl07dmFyIGk9bi5tYXRlcmlhbDt2YXIgbz1pLnVuaWZvcm1zLnByb2plY3RvclRleC52YWx1ZTtpLnVuaWZvcm1zLnByb2plY3RvclRleC52YWx1ZT1udWxsO28uZGlzcG9zZSgpO2kudW5pZm9ybXMucHJvamVjdG9yVGV4LnZhbHVlPWV9fTtlLnByb3RvdHlwZS5fdXBkYXRlVGV4dHVyZVByZXY9ZnVuY3Rpb24oZSl7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZTt2YXIgdD10aGlzLl9zY2VuZS5wbGFuZXNPbGQ7Zm9yKHZhciByIGluIHQpe2lmKCF0Lmhhc093blByb3BlcnR5KHIpKXtjb250aW51ZX12YXIgbj10W3JdO3ZhciBpPW4ubWF0ZXJpYWw7dmFyIG89aS51bmlmb3Jtcy5wcm9qZWN0b3JUZXgudmFsdWU7aS51bmlmb3Jtcy5wcm9qZWN0b3JUZXgudmFsdWU9bnVsbDtvLmRpc3Bvc2UoKTtpLnVuaWZvcm1zLnByb2plY3RvclRleC52YWx1ZT1lfX07cmV0dXJuIGV9KCk7ci5TbGlkZXJHTFJlbmRlcmVyPW47ci5kZWZhdWx0PW59LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4uLy4uL0dlb1wiOjI5NH1dLDM2MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DYW1lcmFWaXN1YWxpemF0aW9uTW9kZT12b2lkIDA7dmFyIG47KGZ1bmN0aW9uKGUpe2VbZVtcIkRlZmF1bHRcIl09MF09XCJEZWZhdWx0XCI7ZVtlW1wiQ2x1c3RlclwiXT0xXT1cIkNsdXN0ZXJcIjtlW2VbXCJDb25uZWN0ZWRDb21wb25lbnRcIl09Ml09XCJDb25uZWN0ZWRDb21wb25lbnRcIjtlW2VbXCJTZXF1ZW5jZVwiXT0zXT1cIlNlcXVlbmNlXCJ9KShuPXIuQ2FtZXJhVmlzdWFsaXphdGlvbk1vZGV8fChyLkNhbWVyYVZpc3VhbGl6YXRpb25Nb2RlPXt9KSk7ci5kZWZhdWx0PW59LHt9XSwzNjE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBuPWUoXCIuL0NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiQ2FtZXJhVmlzdWFsaXphdGlvbk1vZGVcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBuLkNhbWVyYVZpc3VhbGl6YXRpb25Nb2RlfX0pfSx7XCIuL0NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlXCI6MzYwfV0sMzYyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNwYXRpYWxEYXRhQ2FjaGU9dm9pZCAwO3ZhciBvPWUoXCJsYXRsb24tZ2VvaGFzaFwiKTt2YXIgYT1lKFwicGFrb1wiKTt2YXIgcz1lKFwicnhqc1wiKTt2YXIgdT1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGM9ZShcIi4uLy4uL0Vycm9yXCIpO3ZhciBsPWUoXCIuLi8uLi9VdGlsc1wiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fZ3JhcGhTZXJ2aWNlPWU7dGhpcy5fdGlsZXM9e307dGhpcy5fY2FjaGVSZXF1ZXN0cz17fTt0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zPXt9O3RoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvblRpbGVzPXt9O3RoaXMuX3RpbGVDbHVzdGVycz17fTt0aGlzLl9jYWNoaW5nVGlsZXMkPXt9O3RoaXMuX2NhY2hpbmdDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zJD17fX1lLnByb3RvdHlwZS5jYWNoZUNsdXN0ZXJSZWNvbnN0cnVjdGlvbnMkPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7aWYoIXRoaXMuaGFzVGlsZSh0KSl7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNhY2hlIHJlY29uc3RydWN0aW9ucyBvZiBhIG5vbi1leGlzdGluZyB0aWxlLlwiKX1pZih0aGlzLmhhc0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnModCkpe3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjYWNoZSByZWNvbnN0cnVjdGlvbnMgdGhhdCBhbHJlYWR5IGV4aXN0cy5cIil9aWYodGhpcy5pc0NhY2hpbmdDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zKHQpKXtyZXR1cm4gdGhpcy5fY2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnMkW3RdfXZhciBlPXRoaXMuZ2V0VGlsZSh0KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNsdXN0ZXJLZXl9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2x1c3RlcktleX0pLmZpbHRlcihmdW5jdGlvbihlLHQscil7cmV0dXJuIHIuaW5kZXhPZihlKT09PXR9KTt0aGlzLl90aWxlQ2x1c3RlcnNbdF09ZTt0aGlzLl9jYWNoZVJlcXVlc3RzW3RdPVtdO3RoaXMuX2NhY2hpbmdDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zJFt0XT1zLmZyb20oZSkucGlwZSh1Lm1lcmdlTWFwKGZ1bmN0aW9uKGUpe2lmKHIuX2hhc0NsdXN0ZXJSZWNvbnN0cnVjdGlvbihlKSl7cmV0dXJuIHMub2Yoci5fZ2V0Q2x1c3RlclJlY29uc3RydWN0aW9uKGUpKX1yZXR1cm4gci5fZ2V0Q2x1c3RlclJlY29uc3RydWN0aW9uJChlLHIuX2NhY2hlUmVxdWVzdHNbdF0pLnBpcGUodS5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBjLkFib3J0TWFwaWxsYXJ5RXJyb3Ipe3JldHVybiBzLmVtcHR5KCl9Y29uc29sZS5lcnJvcihlKTtyZXR1cm4gcy5lbXB0eSgpfSkpfSw2KSx1LmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0IGluIHIuX3RpbGVDbHVzdGVyc30pLHUudGFwKGZ1bmN0aW9uKGUpe2lmKCFyLl9oYXNDbHVzdGVyUmVjb25zdHJ1Y3Rpb24oZS5rZXkpKXtyLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW2Uua2V5XT1lfWlmKCEoZS5rZXkgaW4gci5fY2x1c3RlclJlY29uc3RydWN0aW9uVGlsZXMpKXtyLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25UaWxlc1tlLmtleV09W119aWYoci5fY2x1c3RlclJlY29uc3RydWN0aW9uVGlsZXNbZS5rZXldLmluZGV4T2YodCk9PT0tMSl7ci5fY2x1c3RlclJlY29uc3RydWN0aW9uVGlsZXNbZS5rZXldLnB1c2godCl9fSksdS5maW5hbGl6ZShmdW5jdGlvbigpe2lmKHQgaW4gci5fY2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnMkKXtkZWxldGUgci5fY2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnMkW3RdfWlmKHQgaW4gci5fY2FjaGVSZXF1ZXN0cyl7ZGVsZXRlIHIuX2NhY2hlUmVxdWVzdHNbdF19fSksdS5wdWJsaXNoKCksdS5yZWZDb3VudCgpKTtyZXR1cm4gdGhpcy5fY2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnMkW3RdfTtlLnByb3RvdHlwZS5jYWNoZVRpbGUkPWZ1bmN0aW9uKHIpe3ZhciBuPXRoaXM7aWYoci5sZW5ndGghPT04KXt0aHJvdyBuZXcgRXJyb3IoXCJIYXNoIG5lZWRzIHRvIGJlIGxldmVsIDguXCIpfWlmKHRoaXMuaGFzVGlsZShyKSl7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNhY2hlIHRpbGUgdGhhdCBhbHJlYWR5IGV4aXN0cy5cIil9aWYodGhpcy5pc0NhY2hpbmdUaWxlKHIpKXtyZXR1cm4gdGhpcy5fY2FjaGluZ1RpbGVzJFtyXX12YXIgZT1vLmJvdW5kcyhyKTt2YXIgdD17bGF0OmUuc3cubGF0LGxvbjplLnN3Lmxvbn07dmFyIGk9e2xhdDplLm5lLmxhdCxsb246ZS5uZS5sb259O3RoaXMuX2NhY2hpbmdUaWxlcyRbcl09dGhpcy5fZ3JhcGhTZXJ2aWNlLmNhY2hlQm91bmRpbmdCb3gkKHQsaSkucGlwZSh1LmNhdGNoRXJyb3IoZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKTtyZXR1cm4gcy5lbXB0eSgpfSksdS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9jcmVhdGVOb2RlRGF0YShlKX0pfSksdS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hKHIgaW4gbi5fdGlsZXMpfSksdS50YXAoZnVuY3Rpb24oZSl7dmFyIHQ7bi5fdGlsZXNbcl09W107KHQ9bi5fdGlsZXNbcl0pLnB1c2guYXBwbHkodCxlKTtkZWxldGUgbi5fY2FjaGluZ1RpbGVzJFtyXX0pLHUuZmluYWxpemUoZnVuY3Rpb24oKXtpZihyIGluIG4uX2NhY2hpbmdUaWxlcyQpe2RlbGV0ZSBuLl9jYWNoaW5nVGlsZXMkW3JdfX0pLHUucHVibGlzaCgpLHUucmVmQ291bnQoKSk7cmV0dXJuIHRoaXMuX2NhY2hpbmdUaWxlcyRbcl19O2UucHJvdG90eXBlLmlzQ2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW4gdGhpcy5fY2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnMkfTtlLnByb3RvdHlwZS5pc0NhY2hpbmdUaWxlPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX2NhY2hpbmdUaWxlcyR9O2UucHJvdG90eXBlLmhhc0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnM9ZnVuY3Rpb24oZSl7aWYoZSBpbiB0aGlzLl9jYWNoaW5nQ2x1c3RlclJlY29uc3RydWN0aW9ucyR8fCEoZSBpbiB0aGlzLl90aWxlQ2x1c3RlcnMpKXtyZXR1cm4gZmFsc2V9Zm9yKHZhciB0PTAscj10aGlzLl90aWxlQ2x1c3RlcnNbZV07dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYoIShuIGluIHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnMpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTtlLnByb3RvdHlwZS5oYXNUaWxlPWZ1bmN0aW9uKGUpe3JldHVybiEoZSBpbiB0aGlzLl9jYWNoaW5nVGlsZXMkKSYmZSBpbiB0aGlzLl90aWxlc307ZS5wcm90b3R5cGUuZ2V0Q2x1c3RlclJlY29uc3RydWN0aW9ucz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlIGluIHRoaXMuX3RpbGVDbHVzdGVycz90aGlzLl90aWxlQ2x1c3RlcnNbZV0ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW2VdfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pOltdfTtlLnByb3RvdHlwZS5nZXRUaWxlPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX3RpbGVzP3RoaXMuX3RpbGVzW2VdOltdfTtlLnByb3RvdHlwZS51bmNhY2hlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9T2JqZWN0LmtleXModGhpcy5fY2FjaGVSZXF1ZXN0cyk7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYoISFlJiZlLmluZGV4T2YobikhPT0tMSl7Y29udGludWV9Zm9yKHZhciBpPTAsbz10aGlzLl9jYWNoZVJlcXVlc3RzW25dO2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldO2EuYWJvcnQoKX1kZWxldGUgdGhpcy5fY2FjaGVSZXF1ZXN0c1tuXX1mb3IodmFyIHM9MCx1PU9iamVjdC5rZXlzKHRoaXMuX3RpbGVDbHVzdGVycyk7czx1Lmxlbmd0aDtzKyspe3ZhciBuPXVbc107aWYoISFlJiZlLmluZGV4T2YobikhPT0tMSl7Y29udGludWV9Zm9yKHZhciBjPTAsbD10aGlzLl90aWxlQ2x1c3RlcnNbbl07YzxsLmxlbmd0aDtjKyspe3ZhciBoPWxbY107aWYoIShoIGluIHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvblRpbGVzKSl7Y29udGludWV9dmFyIHA9dGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uVGlsZXNbaF0uaW5kZXhPZihuKTtpZihwPT09LTEpe2NvbnRpbnVlfXRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvblRpbGVzW2hdLnNwbGljZShwLDEpO2lmKHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvblRpbGVzW2hdLmxlbmd0aD4wKXtjb250aW51ZX1kZWxldGUgdGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uVGlsZXNbaF07ZGVsZXRlIHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbaF19ZGVsZXRlIHRoaXMuX3RpbGVDbHVzdGVyc1tuXX1mb3IodmFyIGY9MCxkPU9iamVjdC5rZXlzKHRoaXMuX3RpbGVzKTtmPGQubGVuZ3RoO2YrKyl7dmFyIG49ZFtmXTtpZighIWUmJmUuaW5kZXhPZihuKSE9PS0xKXtjb250aW51ZX1kZWxldGUgdGhpcy5fdGlsZXNbbl19fTtlLnByb3RvdHlwZS5fY3JlYXRlTm9kZURhdGE9ZnVuY3Rpb24oZSl7cmV0dXJue2FsdDplLmFsdCxjYW1lcmFQcm9qZWN0aW9uOmUuY2FtZXJhUHJvamVjdGlvbixjbHVzdGVyS2V5OmUuY2x1c3RlcktleSxmb2NhbDplLmZvY2FsLGdwYW5vOmUuZ3Bhbm8saGVpZ2h0OmUuaGVpZ2h0LGsxOmUuY2sxLGsyOmUuY2syLGtleTplLmtleSxsYXQ6ZS5sYXRMb24ubGF0LGxvbjplLmxhdExvbi5sb24sbWVyZ2VDQzplLm1lcmdlQ0Msb3JpZW50YXRpb246ZS5vcmllbnRhdGlvbixvcmlnaW5hbExhdDplLm9yaWdpbmFsTGF0TG9uLmxhdCxvcmlnaW5hbExvbjplLm9yaWdpbmFsTGF0TG9uLmxvbixyb3RhdGlvbjpbZS5yb3RhdGlvblswXSxlLnJvdGF0aW9uWzFdLGUucm90YXRpb25bMl1dLHNjYWxlOmUuc2NhbGUsc2VxdWVuY2VLZXk6ZS5zZXF1ZW5jZUtleSx3aWR0aDplLndpZHRofX07ZS5wcm90b3R5cGUuX2dldENsdXN0ZXJSZWNvbnN0cnVjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1tlXX07ZS5wcm90b3R5cGUuX2dldENsdXN0ZXJSZWNvbnN0cnVjdGlvbiQ9ZnVuY3Rpb24obyxlKXtyZXR1cm4gcy5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbihuKXt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7aS5vcGVuKFwiR0VUXCIsbC5VcmxzLmNsdXN0ZXJSZWNvbnN0cnVjdGlvbihvKSx0cnVlKTtpLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7aS50aW1lb3V0PTE1ZTM7aS5vbmxvYWQ9ZnVuY3Rpb24oKXtpZighaS5yZXNwb25zZSl7bi5lcnJvcihuZXcgRXJyb3IoXCJDbHVzdGVyIHJlY29uc3RydWN0aW9uIHJldHJlaXZhbCBmYWlsZWQgKFwiK28rXCIpXCIpKX1lbHNle3ZhciBlPWEuaW5mbGF0ZShpLnJlc3BvbnNlLHt0bzpcInN0cmluZ1wifSk7dmFyIHQ9SlNPTi5wYXJzZShlKTtpZih0Lmxlbmd0aDwxKXtuLmVycm9yKG5ldyBFcnJvcihcIk5vIGNsdXN0ZXIgcmVjb25zdHJ1Y3Rpb24gZXhpc3RzIChcIitvK1wiKVwiKSl9dmFyIHI9dFswXTtyLmtleT1vO24ubmV4dChyKTtuLmNvbXBsZXRlKCl9fTtpLm9uZXJyb3I9ZnVuY3Rpb24oKXtuLmVycm9yKG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgY2x1c3RlciByZWNvbnN0cnVjdGlvbiAoXCIrbytcIilcIikpfTtpLm9udGltZW91dD1mdW5jdGlvbigpe24uZXJyb3IobmV3IEVycm9yKFwiQ2x1c3RlciByZWNvbnN0cnVjdGlvbiByZXF1ZXN0IHRpbWVkIG91dCAoXCIrbytcIilcIikpfTtpLm9uYWJvcnQ9ZnVuY3Rpb24oKXtuLmVycm9yKG5ldyBjLkFib3J0TWFwaWxsYXJ5RXJyb3IoXCJDbHVzdGVyIHJlY29uc3RydWN0aW9uIHJlcXVlc3Qgd2FzIGFib3J0ZWQgKFwiK28rXCIpXCIpKX07ZS5wdXNoKGkpO2kuc2VuZChudWxsKX0pfTtlLnByb3RvdHlwZS5faGFzQ2x1c3RlclJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnN9O3JldHVybiBlfSgpO3IuU3BhdGlhbERhdGFDYWNoZT1uO3IuZGVmYXVsdD1ufSx7XCIuLi8uLi9FcnJvclwiOjI5MyxcIi4uLy4uL1V0aWxzXCI6MzAxLFwibGF0bG9uLWdlb2hhc2hcIjoyMSxwYWtvOjIzLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDM2MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU3BhdGlhbERhdGFDb21wb25lbnQ9dm9pZCAwO3ZhciBkPWUoXCJsYXRsb24tZ2VvaGFzaFwiKTt2YXIgbD1lKFwicnhqc1wiKTt2YXIgaD1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgYT1lKFwiLi4vLi4vR2VvXCIpO3ZhciBzPWUoXCIuLi8uLi9SZW5kZXJcIik7dmFyIHU9ZShcIi4uLy4uL3ZpZXdlci9QbGF5U2VydmljZVwiKTt2YXIgcD1lKFwiLi4vLi4vc3RhdGUvU3RhdGVcIik7dmFyIGY9ZShcIi4vQ2FtZXJhVmlzdWFsaXphdGlvbk1vZGVcIik7dmFyIGk9ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUsdCxyKXx8dGhpcztuLl9jYWNoZT1uZXcgby5TcGF0aWFsRGF0YUNhY2hlKHIuZ3JhcGhTZXJ2aWNlKTtuLl9zY2VuZT1uZXcgby5TcGF0aWFsRGF0YVNjZW5lKG4uX2dldERlZmF1bHRDb25maWd1cmF0aW9uKCkpO24uX3ZpZXdwb3J0Q29vcmRzPW5ldyBhLlZpZXdwb3J0Q29vcmRzO24uX2dlb0Nvb3Jkcz1uZXcgYS5HZW9Db29yZHM7cmV0dXJuIG59ZS5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dmFyIGM9dGhpczt0aGlzLl9lYXJ0aENvbnRyb2xzU3Vic2NyaXB0aW9uPXRoaXMuX2NvbmZpZ3VyYXRpb24kLnBpcGUoaC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZWFydGhDb250cm9sc30pLGguZGlzdGluY3RVbnRpbENoYW5nZWQoKSxoLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuc3RhdGUkKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO2lmKHQmJnIhPT1wLmRlZmF1bHQuRWFydGgpe2MuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuZWFydGgoKX1lbHNlIGlmKCF0JiZyPT09cC5kZWZhdWx0LkVhcnRoKXtjLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnRyYXZlcnNlKCl9fSk7dmFyIGU9dGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UuYmVhcmluZyQucGlwZShoLm1hcChmdW5jdGlvbihlKXt2YXIgdD1cIlwiO2lmKGU+MjkyLjV8fGU8PTY3LjUpe3QrPVwiblwifWlmKGU+MTEyLjUmJmU8PTI0Ny41KXt0Kz1cInNcIn1pZihlPjIyLjUmJmU8PTE1Ny41KXt0Kz1cImVcIn1pZihlPjIwMi41JiZlPD0zMzcuNSl7dCs9XCJ3XCJ9cmV0dXJuIHR9KSxoLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksaC5wdWJsaXNoUmVwbGF5KDEpLGgucmVmQ291bnQoKSk7dmFyIHQ9dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5yZWZlcmVuY2UkLnBpcGUoaC50YXAoZnVuY3Rpb24oKXtjLl9zY2VuZS51bmNhY2hlKCl9KSxoLnN3aXRjaE1hcChmdW5jdGlvbigpe3JldHVybiBjLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJC5waXBlKGgubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBkLmVuY29kZShlLmxhdExvbi5sYXQsZS5sYXRMb24ubG9uLDgpfSksaC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKX0pLGgucHVibGlzaFJlcGxheSgxKSxoLnJlZkNvdW50KCkpO3ZhciByPWwuY29tYmluZUxhdGVzdCh0aGlzLl9uYXZpZ2F0b3IucGxheVNlcnZpY2UucGxheWluZyQsdGhpcy5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnNwZWVkJCkucGlwZShoLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gdCYmcj51LmRlZmF1bHQuc2VxdWVuY2VTcGVlZH0pLGguZGlzdGluY3RVbnRpbENoYW5nZWQoKSxoLnB1Ymxpc2hSZXBsYXkoMSksaC5yZWZDb3VudCgpKTt2YXIgbj1sLmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5zdGF0ZSQucGlwZShoLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXAuZGVmYXVsdC5FYXJ0aH0pLGguZGlzdGluY3RVbnRpbENoYW5nZWQoKSksdCxyLGUpLnBpcGUoaC5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3ZhciByPWVbMF0sbj1lWzFdLGk9ZVsyXSxvPWVbM107dmFyIGE9dFswXSxzPXRbMV0sdT10WzJdLGM9dFszXTtpZihyIT09YSl7cmV0dXJuIGZhbHNlfWlmKHIpe3JldHVybiBuPT09cyYmaT09PXV9cmV0dXJuIG49PT1zJiZpPT09dSYmbz09PWN9KSxoLmNvbmNhdE1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl0saT1lWzNdO2lmKHQpe3JldHVybiBuP2wub2YoW3JdKTpsLm9mKGMuX2FkamFjZW50Q29tcG9uZW50KHIsNCkpfXJldHVybiBuP2wub2YoW3IsZC5uZWlnaGJvdXJzKHIpW2ldXSk6bC5vZihjLl9jb21wdXRlVGlsZXMocixpKSl9KSxoLnB1Ymxpc2goKSxoLnJlZkNvdW50KCkpO3ZhciBpPW4ucGlwZShoLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gbC5mcm9tKGUpLnBpcGUoaC5tZXJnZU1hcChmdW5jdGlvbihlKXt2YXIgdD1jLl9jYWNoZS5oYXNUaWxlKGUpP2wub2YoYy5fY2FjaGUuZ2V0VGlsZShlKSk6Yy5fY2FjaGUuY2FjaGVUaWxlJChlKTtyZXR1cm4gbC5jb21iaW5lTGF0ZXN0KGwub2YoZSksdCl9LDYpKX0pLGgucHVibGlzaCgpLGgucmVmQ291bnQoKSk7dGhpcy5fYWRkVGlsZVN1YnNjcmlwdGlvbj1pLnBpcGUoaC53aXRoTGF0ZXN0RnJvbSh0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJlZmVyZW5jZSQpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXVswXSxyPWVbMV07aWYoYy5fc2NlbmUuaGFzVGlsZSh0KSl7cmV0dXJufWMuX3NjZW5lLmFkZFRpbGUoYy5fY29tcHV0ZVRpbGVCQm94KHQsciksdCl9KTt0aGlzLl9hZGROb2RlU3Vic2NyaXB0aW9uPWkucGlwZShoLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UucmVmZXJlbmNlJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT1lWzFdO2Zvcih2YXIgbz0wLGE9bjtvPGEubGVuZ3RoO28rKyl7dmFyIHM9YVtvXTtpZihjLl9zY2VuZS5oYXNOb2RlKHMua2V5LHIpKXtjb250aW51ZX1jLl9zY2VuZS5hZGROb2RlKHMsYy5fY3JlYXRlVHJhbnNmb3JtKHMsaSksYy5fY29tcHV0ZU9yaWdpbmFsUG9zaXRpb24ocyxpKSxyKX19KTt0aGlzLl9hZGRSZWNvbnN0cnVjdGlvblN1YnNjcmlwdGlvbj1pLnBpcGUoaC5jb25jYXRNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXTt2YXIgcjtpZihjLl9jYWNoZS5oYXNDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zKHQpKXtyPWwuZnJvbShjLl9jYWNoZS5nZXRDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zKHQpKX1lbHNlIGlmKGMuX2NhY2hlLmlzQ2FjaGluZ0NsdXN0ZXJSZWNvbnN0cnVjdGlvbnModCkpe3I9Yy5fY2FjaGUuY2FjaGVDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zJCh0KS5waXBlKGgubGFzdChudWxsLHt9KSxoLnN3aXRjaE1hcChmdW5jdGlvbigpe3JldHVybiBsLmZyb20oYy5fY2FjaGUuZ2V0Q2x1c3RlclJlY29uc3RydWN0aW9ucyh0KSl9KSl9ZWxzZSBpZihjLl9jYWNoZS5oYXNUaWxlKHQpKXtyPWMuX2NhY2hlLmNhY2hlQ2x1c3RlclJlY29uc3RydWN0aW9ucyQodCl9ZWxzZXtyPWwuZW1wdHkoKX1yZXR1cm4gbC5jb21iaW5lTGF0ZXN0KGwub2YodCkscil9KSxoLndpdGhMYXRlc3RGcm9tKHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UucmVmZXJlbmNlJCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT1lWzFdO2lmKGMuX3NjZW5lLmhhc0NsdXN0ZXJSZWNvbnN0cnVjdGlvbihuLmtleSxyKSl7cmV0dXJufWMuX3NjZW5lLmFkZENsdXN0ZXJSZWNvbnN0cnVjdGlvbihuLGMuX2NvbXB1dGVUcmFuc2xhdGlvbihuLGkpLHIpfSk7dGhpcy5fY2FtZXJhVmlzaWJpbGl0eVN1YnNjcmlwdGlvbj10aGlzLl9jb25maWd1cmF0aW9uJC5waXBlKGgubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhbWVyYXNWaXNpYmxlfSksaC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7Yy5fc2NlbmUuc2V0Q2FtZXJhVmlzaWJpbGl0eShlKX0pO3RoaXMuX3BvaW50VmlzaWJpbGl0eVN1YnNjcmlwdGlvbj10aGlzLl9jb25maWd1cmF0aW9uJC5waXBlKGgubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBvaW50c1Zpc2libGV9KSxoLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtjLl9zY2VuZS5zZXRQb2ludFZpc2liaWxpdHkoZSl9KTt0aGlzLl9wb3NpdGlvblZpc2liaWxpdHlTdWJzY3JpcHRpb249dGhpcy5fY29uZmlndXJhdGlvbiQucGlwZShoLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5wb3NpdGlvbnNWaXNpYmxlfSksaC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7Yy5fc2NlbmUuc2V0UG9zaXRpb25WaXNpYmlsaXR5KGUpfSk7dGhpcy5fdGlsZVZpc2liaWxpdHlTdWJzY3JpcHRpb249dGhpcy5fY29uZmlndXJhdGlvbiQucGlwZShoLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50aWxlc1Zpc2libGV9KSxoLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtjLl9zY2VuZS5zZXRUaWxlVmlzaWJpbGl0eShlKX0pO3RoaXMuX2NjVG9Nb2RlU3Vic2NyaXB0aW9uPXRoaXMuX2NvbmZpZ3VyYXRpb24kLnBpcGUoaC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29ubmVjdGVkQ29tcG9uZW50cz09PXRydWU/Zi5kZWZhdWx0LkNvbm5lY3RlZENvbXBvbmVudDpmLmRlZmF1bHQuRGVmYXVsdH0pLGguZGlzdGluY3RVbnRpbENoYW5nZWQoKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2MuY29uZmlndXJlKHtjYW1lcmFWaXN1YWxpemF0aW9uTW9kZTplfSl9KTt0aGlzLl9jYW1lcmFWaXN1YWxpemF0aW9uTW9kZVN1YnNjcmlwdGlvbj10aGlzLl9jb25maWd1cmF0aW9uJC5waXBlKGgubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhbWVyYVZpc3VhbGl6YXRpb25Nb2RlfSksaC5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7Yy5fc2NlbmUuc2V0Q2FtZXJhVmlzdWFsaXphdGlvbk1vZGUoZSl9KTt0aGlzLl91bmNhY2hlU3Vic2NyaXB0aW9uPXQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWMuX2FkamFjZW50Q29tcG9uZW50KGUsNCk7Yy5fc2NlbmUudW5jYWNoZSh0KTtjLl9jYWNoZS51bmNhY2hlKHQpfSk7dGhpcy5fbW92ZVN1YnNjcmlwdGlvbj10aGlzLl9uYXZpZ2F0b3IucGxheVNlcnZpY2UucGxheWluZyQucGlwZShoLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gZT9sLmVtcHR5KCk6Yy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kYmxDbGljayR9KSxoLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQpLGguc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3ZhciBuPWMuX2NvbnRhaW5lci5lbGVtZW50O3ZhciBpPWMuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1Bvc2l0aW9uKHQsbiksbz1pWzBdLGE9aVsxXTt2YXIgcz1jLl92aWV3cG9ydENvb3Jkcy5jYW52YXNUb1ZpZXdwb3J0KG8sYSxuKTt2YXIgdT1jLl9zY2VuZS5pbnRlcnNlY3RPYmplY3RzKHMsci5wZXJzcGVjdGl2ZSk7cmV0dXJuISF1P2MuX25hdmlnYXRvci5tb3ZlVG9LZXkkKHUpLnBpcGUoaC5jYXRjaEVycm9yKGZ1bmN0aW9uKCl7cmV0dXJuIGwuZW1wdHkoKX0pKTpsLmVtcHR5KCl9KSkuc3Vic2NyaWJlKCk7dGhpcy5fcmVuZGVyU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKGgubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWMuX3NjZW5lO3JldHVybntuYW1lOmMuX25hbWUscmVuZGVyOntmcmFtZUlkOmUuaWQsbmVlZHNSZW5kZXI6dC5uZWVkc1JlbmRlcixyZW5kZXI6dC5yZW5kZXIuYmluZCh0KSxzdGFnZTpzLkdMUmVuZGVyU3RhZ2UuRm9yZWdyb3VuZH19fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZ2xSZW5kZXJlci5yZW5kZXIkKX07ZS5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX2NhY2hlLnVuY2FjaGUoKTt0aGlzLl9zY2VuZS51bmNhY2hlKCk7dGhpcy5fYWRkTm9kZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2FkZFJlY29uc3RydWN0aW9uU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fYWRkVGlsZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NhbWVyYVZpc2liaWxpdHlTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9lYXJ0aENvbnRyb2xzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fbW92ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3BvaW50VmlzaWJpbGl0eVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3Bvc2l0aW9uVmlzaWJpbGl0eVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3JlbmRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3RpbGVWaXNpYmlsaXR5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdW5jYWNoZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fY2NUb01vZGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnN0YXRlJC5waXBlKGguZmlyc3QoKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2lmKGU9PT1wLmRlZmF1bHQuRWFydGgpe3QuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UudHJhdmVyc2UoKX19KX07ZS5wcm90b3R5cGUuX2dldERlZmF1bHRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlOmYuZGVmYXVsdC5EZWZhdWx0LGNhbWVyYXNWaXNpYmxlOmZhbHNlLGNvbm5lY3RlZENvbXBvbmVudHM6ZmFsc2UscG9pbnRzVmlzaWJsZTp0cnVlLHBvc2l0aW9uc1Zpc2libGU6ZmFsc2UsdGlsZXNWaXNpYmxlOmZhbHNlfX07ZS5wcm90b3R5cGUuX2FkamFjZW50Q29tcG9uZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFNldDtyLmFkZChlKTt0aGlzLl9hZGphY2VudENvbXBvbmVudFJlY3Vyc2l2ZShyLFtlXSwwLHQpO3JldHVybiB0aGlzLl9zZXRUb0FycmF5KHIpfTtlLnByb3RvdHlwZS5fYWRqYWNlbnRDb21wb25lbnRSZWN1cnNpdmU9ZnVuY3Rpb24oZSx0LHIsbil7aWYocj09PW4pe3JldHVybn12YXIgaT1bXTtmb3IodmFyIG89MCxhPXQ7bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107dmFyIHU9ZC5uZWlnaGJvdXJzKHMpO2Zvcih2YXIgYyBpbiB1KXtpZighdS5oYXNPd25Qcm9wZXJ0eShjKSl7Y29udGludWV9aS5wdXNoKHVbY10pfX12YXIgbD1bXTtmb3IodmFyIGg9MCxwPWk7aDxwLmxlbmd0aDtoKyspe3ZhciBmPXBbaF07aWYoIWUuaGFzKGYpKXtlLmFkZChmKTtsLnB1c2goZil9fXRoaXMuX2FkamFjZW50Q29tcG9uZW50UmVjdXJzaXZlKGUsbCxyKzEsbil9O2UucHJvdG90eXBlLl9jb21wdXRlT3JpZ2luYWxQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9nZW9Db29yZHMuZ2VvZGV0aWNUb0VudShlLm9yaWdpbmFsTGF0LGUub3JpZ2luYWxMb24sZS5hbHQsdC5sYXQsdC5sb24sdC5hbHQpfTtlLnByb3RvdHlwZS5fY29tcHV0ZVRpbGVCQm94PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZC5ib3VuZHMoZSk7dmFyIG49dGhpcy5fZ2VvQ29vcmRzLmdlb2RldGljVG9FbnUoci5zdy5sYXQsci5zdy5sb24sMCx0LmxhdCx0Lmxvbix0LmFsdCk7dmFyIGk9dGhpcy5fZ2VvQ29vcmRzLmdlb2RldGljVG9FbnUoci5uZS5sYXQsci5uZS5sb24sMCx0LmxhdCx0Lmxvbix0LmFsdCk7cmV0dXJuW24saV19O2UucHJvdG90eXBlLl9jcmVhdGVUcmFuc2Zvcm09ZnVuY3Rpb24oZSx0KXt2YXIgcj1hLkdlby5jb21wdXRlVHJhbnNsYXRpb24oe2FsdDplLmFsdCxsYXQ6ZS5sYXQsbG9uOmUubG9ufSxlLnJvdGF0aW9uLHQpO3ZhciBuPW5ldyBhLlRyYW5zZm9ybShlLm9yaWVudGF0aW9uLGUud2lkdGgsZS5oZWlnaHQsZS5mb2NhbCxlLnNjYWxlLGUuZ3Bhbm8sZS5yb3RhdGlvbixyLHVuZGVmaW5lZCx1bmRlZmluZWQsZS5rMSxlLmsyLGUuY2FtZXJhUHJvamVjdGlvbik7cmV0dXJuIG59O2UucHJvdG90eXBlLl9jb21wdXRlVGlsZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgU2V0O3ZhciBuPVtcIm5cIixcIm5lXCIsXCJlXCIsXCJzZVwiLFwic1wiLFwic3dcIixcIndcIixcIm53XCJdO3RoaXMuX2NvbXB1dGVUaWxlc1JlY3Vyc2l2ZShyLGUsdCxuLDAsMik7cmV0dXJuIHRoaXMuX3NldFRvQXJyYXkocil9O2UucHJvdG90eXBlLl9jb21wdXRlVGlsZXNSZWN1cnNpdmU9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2UuYWRkKHQpO2lmKGk9PT1vKXtyZXR1cm59dmFyIGE9ZC5uZWlnaGJvdXJzKHQpO3ZhciBzPW4uaW5kZXhPZihyKTt2YXIgdT1uLmxlbmd0aDt2YXIgYz1bYVtuW3RoaXMuX21vZHVsbyhzLTEsdSldXSxhW3JdLGFbblt0aGlzLl9tb2R1bG8ocysxLHUpXV1dO2Zvcih2YXIgbD0wLGg9YztsPGgubGVuZ3RoO2wrKyl7dmFyIHA9aFtsXTt0aGlzLl9jb21wdXRlVGlsZXNSZWN1cnNpdmUoZSxwLHIsbixpKzEsbyl9fTtlLnByb3RvdHlwZS5fY29tcHV0ZVRyYW5zbGF0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2dlb0Nvb3Jkcy5nZW9kZXRpY1RvRW51KGUucmVmZXJlbmNlX2xsYS5sYXRpdHVkZSxlLnJlZmVyZW5jZV9sbGEubG9uZ2l0dWRlLGUucmVmZXJlbmNlX2xsYS5hbHRpdHVkZSx0LmxhdCx0Lmxvbix0LmFsdCl9O2UucHJvdG90eXBlLl9tb2R1bG89ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZSV0K3QpJXR9O2UucHJvdG90eXBlLl9zZXRUb0FycmF5PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXt0LnB1c2goZSl9KTtyZXR1cm4gdH07ZS5jb21wb25lbnROYW1lPVwic3BhdGlhbERhdGFcIjtyZXR1cm4gZX0oby5Db21wb25lbnQpO3IuU3BhdGlhbERhdGFDb21wb25lbnQ9aTtvLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIoaSk7ci5kZWZhdWx0PWl9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4uLy4uL0dlb1wiOjI5NCxcIi4uLy4uL1JlbmRlclwiOjI5NyxcIi4uLy4uL3N0YXRlL1N0YXRlXCI6NDQ5LFwiLi4vLi4vdmlld2VyL1BsYXlTZXJ2aWNlXCI6NDgxLFwiLi9DYW1lcmFWaXN1YWxpemF0aW9uTW9kZVwiOjM2MCxcImxhdGxvbi1nZW9oYXNoXCI6MjEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzY0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNwYXRpYWxEYXRhU2NlbmU9dm9pZCAwO3ZhciBkPWUoXCJ0aHJlZVwiKTt2YXIgaD1lKFwiLi9DYW1lcmFWaXN1YWxpemF0aW9uTW9kZVwiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX3NjZW5lPSEhdD90Om5ldyBkLlNjZW5lO3RoaXMuX3JheWNhc3Rlcj0hIXI/cjpuZXcgZC5SYXljYXN0ZXIodW5kZWZpbmVkLHVuZGVmaW5lZCwuOCk7dGhpcy5fY2FtZXJhQ29sb3JzPXt9O3RoaXMuX25lZWRzUmVuZGVyPWZhbHNlO3RoaXMuX2ludGVyYWN0aXZlT2JqZWN0cz1bXTt0aGlzLl9ub2Rlcz17fTt0aGlzLl90aWxlcz17fTt0aGlzLl90aWxlQ2x1c3RlclJlY29uc3RydWN0aW9ucz17fTt0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zPXt9O3RoaXMuX2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlPSEhZS5jYW1lcmFWaXN1YWxpemF0aW9uTW9kZT9lLmNhbWVyYVZpc3VhbGl6YXRpb25Nb2RlOmguZGVmYXVsdC5EZWZhdWx0O2lmKHRoaXMuX2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlPT09aC5kZWZhdWx0LkRlZmF1bHQmJmUuY29ubmVjdGVkQ29tcG9uZW50cz09PXRydWUpe3RoaXMuX2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlPWguZGVmYXVsdC5Db25uZWN0ZWRDb21wb25lbnR9dGhpcy5fY2FtZXJhc1Zpc2libGU9ZS5jYW1lcmFzVmlzaWJsZTt0aGlzLl9wb2ludHNWaXNpYmxlPWUucG9pbnRzVmlzaWJsZTt0aGlzLl9wb3NpdGlvbnNWaXNpYmxlPWUucG9zaXRpb25zVmlzaWJsZTt0aGlzLl90aWxlc1Zpc2libGU9ZS50aWxlc1Zpc2libGV9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibmVlZHNSZW5kZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25lZWRzUmVuZGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuYWRkQ2x1c3RlclJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLmhhc0NsdXN0ZXJSZWNvbnN0cnVjdGlvbihlLmtleSxyKSl7cmV0dXJufXZhciBuPWUua2V5O2lmKCEobiBpbiB0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zKSl7dGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1tuXT17cG9pbnRzOm5ldyBkLk9iamVjdDNELHRpbGVzOltdfTt0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW25dLnBvaW50cy52aXNpYmxlPXRoaXMuX3BvaW50c1Zpc2libGU7dGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1tuXS5wb2ludHMuYWRkKHRoaXMuX2NyZWF0ZUNsdXN0ZXJQb2ludHMoZSx0KSk7dGhpcy5fc2NlbmUuYWRkKHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbbl0ucG9pbnRzKX1pZih0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW25dLnRpbGVzLmluZGV4T2Yocik9PT0tMSl7dGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1tuXS50aWxlcy5wdXNoKHIpfWlmKCEociBpbiB0aGlzLl90aWxlQ2x1c3RlclJlY29uc3RydWN0aW9ucykpe3RoaXMuX3RpbGVDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW3JdPXtrZXlzOltdfX1pZih0aGlzLl90aWxlQ2x1c3RlclJlY29uc3RydWN0aW9uc1tyXS5rZXlzLmluZGV4T2Yobik9PT0tMSl7dGhpcy5fdGlsZUNsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbcl0ua2V5cy5wdXNoKG4pfXRoaXMuX25lZWRzUmVuZGVyPXRydWV9O2UucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9ZS5rZXk7dmFyIG89ZS5jbHVzdGVyS2V5O3ZhciBhPWUuc2VxdWVuY2VLZXk7dmFyIHM9ISFlLm1lcmdlQ0M/ZS5tZXJnZUNDLnRvU3RyaW5nKCk6XCJcIjtpZih0aGlzLmhhc05vZGUoaSxuKSl7cmV0dXJufWlmKCEobiBpbiB0aGlzLl9ub2Rlcykpe3RoaXMuX25vZGVzW25dPXtjYW1lcmFLZXlzOnt9LGNhbWVyYXM6bmV3IGQuT2JqZWN0M0QsY2x1c3RlcnM6e30sY29ubmVjdGVkQ29tcG9uZW50czp7fSxrZXlzOltdLHBvc2l0aW9uczpuZXcgZC5PYmplY3QzRCxzZXF1ZW5jZXM6e319O3RoaXMuX25vZGVzW25dLmNhbWVyYXMudmlzaWJsZT10aGlzLl9jYW1lcmFzVmlzaWJsZTt0aGlzLl9ub2Rlc1tuXS5wb3NpdGlvbnMudmlzaWJsZT10aGlzLl9wb3NpdGlvbnNWaXNpYmxlO3RoaXMuX3NjZW5lLmFkZCh0aGlzLl9ub2Rlc1tuXS5jYW1lcmFzLHRoaXMuX25vZGVzW25dLnBvc2l0aW9ucyl9aWYoIShzIGluIHRoaXMuX25vZGVzW25dLmNvbm5lY3RlZENvbXBvbmVudHMpKXt0aGlzLl9ub2Rlc1tuXS5jb25uZWN0ZWRDb21wb25lbnRzW3NdPVtdfWlmKCEobyBpbiB0aGlzLl9ub2Rlc1tuXS5jbHVzdGVycykpe3RoaXMuX25vZGVzW25dLmNsdXN0ZXJzW29dPVtdfWlmKCEoYSBpbiB0aGlzLl9ub2Rlc1tuXS5zZXF1ZW5jZXMpKXt0aGlzLl9ub2Rlc1tuXS5zZXF1ZW5jZXNbYV09W119dmFyIHU9dGhpcy5fY3JlYXRlQ2FtZXJhKHQpO3RoaXMuX25vZGVzW25dLmNhbWVyYXMuYWRkKHUpO2Zvcih2YXIgYz0wLGw9dS5jaGlsZHJlbjtjPGwubGVuZ3RoO2MrKyl7dmFyIGg9bFtjXTt0aGlzLl9ub2Rlc1tuXS5jYW1lcmFLZXlzW2gudXVpZF09aTt0aGlzLl9pbnRlcmFjdGl2ZU9iamVjdHMucHVzaChoKX10aGlzLl9ub2Rlc1tuXS5jb25uZWN0ZWRDb21wb25lbnRzW3NdLnB1c2godSk7dGhpcy5fbm9kZXNbbl0uY2x1c3RlcnNbb10ucHVzaCh1KTt0aGlzLl9ub2Rlc1tuXS5zZXF1ZW5jZXNbYV0ucHVzaCh1KTt2YXIgcD10aGlzLl9nZXRJZChvLHMsYSx0aGlzLl9jYW1lcmFWaXN1YWxpemF0aW9uTW9kZSk7dmFyIGY9dGhpcy5fZ2V0Q29sb3IocCx0aGlzLl9jYW1lcmFWaXN1YWxpemF0aW9uTW9kZSk7dGhpcy5fc2V0Q2FtZXJhQ29sb3IoZix1KTt0aGlzLl9ub2Rlc1tuXS5wb3NpdGlvbnMuYWRkKHRoaXMuX2NyZWF0ZVBvc2l0aW9uKHQscikpO3RoaXMuX25vZGVzW25dLmtleXMucHVzaChpKTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS5hZGRUaWxlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5oYXNUaWxlKHQpKXtyZXR1cm59dmFyIHI9ZVswXTt2YXIgbj1lWzFdO3ZhciBpPW5ldyBkLkdlb21ldHJ5O2kudmVydGljZXMucHVzaCgobmV3IGQuVmVjdG9yMykuZnJvbUFycmF5KHIpLG5ldyBkLlZlY3RvcjMoclswXSxuWzFdLChyWzJdK25bMl0pLzIpLChuZXcgZC5WZWN0b3IzKS5mcm9tQXJyYXkobiksbmV3IGQuVmVjdG9yMyhuWzBdLHJbMV0sKHJbMl0rblsyXSkvMiksKG5ldyBkLlZlY3RvcjMpLmZyb21BcnJheShyKSk7dmFyIG89bmV3IGQuTGluZShpLG5ldyBkLkxpbmVCYXNpY01hdGVyaWFsKTt0aGlzLl90aWxlc1t0XT1uZXcgZC5PYmplY3QzRDt0aGlzLl90aWxlc1t0XS52aXNpYmxlPXRoaXMuX3RpbGVzVmlzaWJsZTt0aGlzLl90aWxlc1t0XS5hZGQobyk7dGhpcy5fc2NlbmUuYWRkKHRoaXMuX3RpbGVzW3RdKTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS51bmNhY2hlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9T2JqZWN0LmtleXModGhpcy5fdGlsZUNsdXN0ZXJSZWNvbnN0cnVjdGlvbnMpO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO2lmKCEhZSYmZS5pbmRleE9mKG4pIT09LTEpe2NvbnRpbnVlfXRoaXMuX2Rpc3Bvc2VSZWNvbnN0cnVjdGlvbihuKX1mb3IodmFyIGk9MCxvPU9iamVjdC5rZXlzKHRoaXMuX25vZGVzKTtpPG8ubGVuZ3RoO2krKyl7dmFyIG49b1tpXTtpZighIWUmJmUuaW5kZXhPZihuKSE9PS0xKXtjb250aW51ZX10aGlzLl9kaXNwb3NlTm9kZXMobil9Zm9yKHZhciBhPTAscz1PYmplY3Qua2V5cyh0aGlzLl90aWxlcyk7YTxzLmxlbmd0aDthKyspe3ZhciBuPXNbYV07aWYoISFlJiZlLmluZGV4T2YobikhPT0tMSl7Y29udGludWV9dGhpcy5fZGlzcG9zZVRpbGUobil9dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuaGFzQ2x1c3RlclJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUgaW4gdGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9ucyYmdGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1tlXS50aWxlcy5pbmRleE9mKHQpIT09LTF9O2UucHJvdG90eXBlLmhhc1RpbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW4gdGhpcy5fdGlsZXN9O2UucHJvdG90eXBlLmhhc05vZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCBpbiB0aGlzLl9ub2RlcyYmdGhpcy5fbm9kZXNbdF0ua2V5cy5pbmRleE9mKGUpIT09LTF9O2UucHJvdG90eXBlLmludGVyc2VjdE9iamVjdHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lWzBdLG49ZVsxXTtpZighdGhpcy5fY2FtZXJhc1Zpc2libGUpe3JldHVybiBudWxsfXRoaXMuX3JheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG5ldyBkLlZlY3RvcjIocixuKSx0KTt2YXIgaT10aGlzLl9yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyh0aGlzLl9pbnRlcmFjdGl2ZU9iamVjdHMpO2Zvcih2YXIgbz0wLGE9aTtvPGEubGVuZ3RoO28rKyl7dmFyIHM9YVtvXTtmb3IodmFyIHUgaW4gdGhpcy5fbm9kZXMpe2lmKCF0aGlzLl9ub2Rlcy5oYXNPd25Qcm9wZXJ0eSh1KSl7Y29udGludWV9aWYocy5vYmplY3QudXVpZCBpbiB0aGlzLl9ub2Rlc1t1XS5jYW1lcmFLZXlzKXtyZXR1cm4gdGhpcy5fbm9kZXNbdV0uY2FtZXJhS2V5c1tzLm9iamVjdC51dWlkXX19fXJldHVybiBudWxsfTtlLnByb3RvdHlwZS5zZXRDYW1lcmFWaXNpYmlsaXR5PWZ1bmN0aW9uKGUpe2lmKGU9PT10aGlzLl9jYW1lcmFzVmlzaWJsZSl7cmV0dXJufWZvcih2YXIgdCBpbiB0aGlzLl9ub2Rlcyl7aWYoIXRoaXMuX25vZGVzLmhhc093blByb3BlcnR5KHQpKXtjb250aW51ZX10aGlzLl9ub2Rlc1t0XS5jYW1lcmFzLnZpc2libGU9ZX10aGlzLl9jYW1lcmFzVmlzaWJsZT1lO3RoaXMuX25lZWRzUmVuZGVyPXRydWV9O2UucHJvdG90eXBlLnNldFBvaW50VmlzaWJpbGl0eT1mdW5jdGlvbihlKXtpZihlPT09dGhpcy5fcG9pbnRzVmlzaWJsZSl7cmV0dXJufWZvcih2YXIgdCBpbiB0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zKXtpZighdGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9ucy5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9dGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1t0XS5wb2ludHMudmlzaWJsZT1lfXRoaXMuX3BvaW50c1Zpc2libGU9ZTt0aGlzLl9uZWVkc1JlbmRlcj10cnVlfTtlLnByb3RvdHlwZS5zZXRQb3NpdGlvblZpc2liaWxpdHk9ZnVuY3Rpb24oZSl7aWYoZT09PXRoaXMuX3Bvc2l0aW9uc1Zpc2libGUpe3JldHVybn1mb3IodmFyIHQgaW4gdGhpcy5fbm9kZXMpe2lmKCF0aGlzLl9ub2Rlcy5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9dGhpcy5fbm9kZXNbdF0ucG9zaXRpb25zLnZpc2libGU9ZX10aGlzLl9wb3NpdGlvbnNWaXNpYmxlPWU7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuc2V0VGlsZVZpc2liaWxpdHk9ZnVuY3Rpb24oZSl7aWYoZT09PXRoaXMuX3RpbGVzVmlzaWJsZSl7cmV0dXJufWZvcih2YXIgdCBpbiB0aGlzLl90aWxlcyl7aWYoIXRoaXMuX3RpbGVzLmhhc093blByb3BlcnR5KHQpKXtjb250aW51ZX10aGlzLl90aWxlc1t0XS52aXNpYmxlPWV9dGhpcy5fdGlsZXNWaXNpYmxlPWU7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuc2V0Q2FtZXJhVmlzdWFsaXphdGlvbk1vZGU9ZnVuY3Rpb24oZSl7aWYoZT09PXRoaXMuX2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlKXtyZXR1cm59Zm9yKHZhciB0IGluIHRoaXMuX25vZGVzKXtpZighdGhpcy5fbm9kZXMuaGFzT3duUHJvcGVydHkodCkpe2NvbnRpbnVlfXZhciByPXVuZGVmaW5lZDtpZihlPT09aC5kZWZhdWx0LkNsdXN0ZXIpe3I9dGhpcy5fbm9kZXNbdF0uY2x1c3RlcnN9ZWxzZSBpZihlPT09aC5kZWZhdWx0LkNvbm5lY3RlZENvbXBvbmVudCl7cj10aGlzLl9ub2Rlc1t0XS5jb25uZWN0ZWRDb21wb25lbnRzfWVsc2UgaWYoZT09PWguZGVmYXVsdC5TZXF1ZW5jZSl7cj10aGlzLl9ub2Rlc1t0XS5zZXF1ZW5jZXN9ZWxzZXtmb3IodmFyIG49MCxpPXRoaXMuX25vZGVzW3RdLmNhbWVyYXMuY2hpbGRyZW47bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07dmFyIGE9dGhpcy5fZ2V0Q29sb3IoXCJcIixlKTt0aGlzLl9zZXRDYW1lcmFDb2xvcihhLG8pfWNvbnRpbnVlfWZvcih2YXIgcyBpbiByKXtpZighci5oYXNPd25Qcm9wZXJ0eShzKSl7Y29udGludWV9dmFyIGE9dGhpcy5fZ2V0Q29sb3IocyxlKTtmb3IodmFyIHU9MCxjPXJbc107dTxjLmxlbmd0aDt1Kyspe3ZhciBsPWNbdV07dGhpcy5fc2V0Q2FtZXJhQ29sb3IoYSxsKX19fXRoaXMuX2NhbWVyYVZpc3VhbGl6YXRpb25Nb2RlPWU7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCl7dC5yZW5kZXIodGhpcy5fc2NlbmUsZSk7dGhpcy5fbmVlZHNSZW5kZXI9ZmFsc2V9O2UucHJvdG90eXBlLl9hcnJheVRvRmxvYXRBcnJheT1mdW5jdGlvbihlLHQpe3ZhciByPWUubGVuZ3RoO3ZhciBuPW5ldyBGbG9hdDMyQXJyYXkocip0KTtmb3IodmFyIGk9MDtpPHI7aSsrKXt2YXIgbz1lW2ldO3ZhciBhPTMqaTtuW2ErMF09b1swXTtuW2ErMV09b1sxXTtuW2ErMl09b1syXX1yZXR1cm4gbn07ZS5wcm90b3R5cGUuX2NyZWF0ZUF4aXM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS51bnByb2plY3RCYXNpYyhbLjUsMF0sLjIyKTt2YXIgcj1lLnVucHJvamVjdEJhc2ljKFsuNSwxXSwuMTYpO3ZhciBuPW5ldyBkLkJ1ZmZlckdlb21ldHJ5O24uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgZC5CdWZmZXJBdHRyaWJ1dGUodGhpcy5fYXJyYXlUb0Zsb2F0QXJyYXkoW3Qscl0sMyksMykpO3JldHVybiBuZXcgZC5MaW5lKG4sbmV3IGQuTGluZUJhc2ljTWF0ZXJpYWwpfTtlLnByb3RvdHlwZS5fY3JlYXRlQ2FtZXJhPWZ1bmN0aW9uKGUpe3JldHVybiEhZS5ncGFubz90aGlzLl9jcmVhdGVQYW5vQ2FtZXJhKGUpOnRoaXMuX2NyZWF0ZVByZXNwZWN0aXZlQ2FtZXJhKGUpfTtlLnByb3RvdHlwZS5fY3JlYXRlRGlhZ29uYWxzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS51bnByb2plY3RCYXNpYyhbMCwwXSwwLHRydWUpO3ZhciBuPWUudW5wcm9qZWN0QmFzaWMoWzAsMF0sdCx0cnVlKTt2YXIgaT1lLnVucHJvamVjdEJhc2ljKFsxLDBdLHQsdHJ1ZSk7dmFyIG89ZS51bnByb2plY3RCYXNpYyhbMSwxXSx0LHRydWUpO3ZhciBhPWUudW5wcm9qZWN0QmFzaWMoWzAsMV0sdCx0cnVlKTt2YXIgcz1bcixuLHIsaSxyLG8scixhXTt2YXIgdT1uZXcgZC5CdWZmZXJHZW9tZXRyeTt1LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGQuQnVmZmVyQXR0cmlidXRlKHRoaXMuX2FycmF5VG9GbG9hdEFycmF5KHMsMyksMykpO3JldHVybiBuZXcgZC5MaW5lU2VnbWVudHModSxuZXcgZC5MaW5lQmFzaWNNYXRlcmlhbCl9O2UucHJvdG90eXBlLl9jcmVhdGVGcmFtZT1mdW5jdGlvbih0LHIpe3ZhciBlPVtdO2UucHVzaC5hcHBseShlLHRoaXMuX3N1YnNhbXBsZShbMCwxXSxbMCwwXSwyMCkpO2UucHVzaC5hcHBseShlLHRoaXMuX3N1YnNhbXBsZShbMCwwXSxbMSwwXSwyMCkpO2UucHVzaC5hcHBseShlLHRoaXMuX3N1YnNhbXBsZShbMSwwXSxbMSwxXSwyMCkpO3ZhciBuPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnVucHJvamVjdEJhc2ljKGUscix0cnVlKX0pO3ZhciBpPW5ldyBkLkJ1ZmZlckdlb21ldHJ5O2kuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgZC5CdWZmZXJBdHRyaWJ1dGUodGhpcy5fYXJyYXlUb0Zsb2F0QXJyYXkobiwzKSwzKSk7cmV0dXJuIG5ldyBkLkxpbmUoaSxuZXcgZC5MaW5lQmFzaWNNYXRlcmlhbCl9O2UucHJvdG90eXBlLl9jcmVhdGVMYXRpdHVkZT1mdW5jdGlvbihlLHQscil7dmFyIG49bmV3IEZsb2F0MzJBcnJheSgodCsxKSozKTtmb3IodmFyIGk9MDtpPD10O2krKyl7dmFyIG89ci51bnByb2plY3RCYXNpYyhbaS90LGVdLC4xNik7dmFyIGE9MyppO25bYSswXT1vWzBdO25bYSsxXT1vWzFdO25bYSsyXT1vWzJdfXZhciBzPW5ldyBkLkJ1ZmZlckdlb21ldHJ5O3Muc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgZC5CdWZmZXJBdHRyaWJ1dGUobiwzKSk7cmV0dXJuIG5ldyBkLkxpbmUocyxuZXcgZC5MaW5lQmFzaWNNYXRlcmlhbCl9O2UucHJvdG90eXBlLl9jcmVhdGVMb25naXR1ZGU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW5ldyBGbG9hdDMyQXJyYXkoKHQrMSkqMyk7Zm9yKHZhciBpPTA7aTw9dDtpKyspe3ZhciBvPXIudW5wcm9qZWN0QmFzaWMoW2UsaS90XSwuMTYpO3ZhciBhPTMqaTtuW2ErMF09b1swXTtuW2ErMV09b1sxXTtuW2ErMl09b1syXX12YXIgcz1uZXcgZC5CdWZmZXJHZW9tZXRyeTtzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGQuQnVmZmVyQXR0cmlidXRlKG4sMykpO3JldHVybiBuZXcgZC5MaW5lKHMsbmV3IGQuTGluZUJhc2ljTWF0ZXJpYWwpfTtlLnByb3RvdHlwZS5fY3JlYXRlUGFub0NhbWVyYT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgZC5PYmplY3QzRDt0LmNoaWxkcmVuLnB1c2godGhpcy5fY3JlYXRlQXhpcyhlKSk7dC5jaGlsZHJlbi5wdXNoKHRoaXMuX2NyZWF0ZUxhdGl0dWRlKC41LDEwLGUpKTt0LmNoaWxkcmVuLnB1c2godGhpcy5fY3JlYXRlTG9uZ2l0dWRlKDAsNixlKSk7dC5jaGlsZHJlbi5wdXNoKHRoaXMuX2NyZWF0ZUxvbmdpdHVkZSguMjUsNixlKSk7dC5jaGlsZHJlbi5wdXNoKHRoaXMuX2NyZWF0ZUxvbmdpdHVkZSguNSw2LGUpKTt0LmNoaWxkcmVuLnB1c2godGhpcy5fY3JlYXRlTG9uZ2l0dWRlKC43NSw2LGUpKTtyZXR1cm4gdH07ZS5wcm90b3R5cGUuX2NyZWF0ZUNsdXN0ZXJQb2ludHM9ZnVuY3Rpb24odCxlKXt2YXIgcj1PYmplY3Qua2V5cyh0LnBvaW50cykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBvaW50c1tlXX0pO3ZhciBuPXIubGVuZ3RoO3ZhciBpPW5ldyBGbG9hdDMyQXJyYXkobiozKTt2YXIgbz1uZXcgRmxvYXQzMkFycmF5KG4qMyk7Zm9yKHZhciBhPTA7YTxuO2ErKyl7dmFyIHM9MyphO3ZhciB1PXJbYV0uY29vcmRpbmF0ZXM7dmFyIGM9bmV3IGQuVmVjdG9yMyh1WzBdLHVbMV0sdVsyXSkuYWRkKChuZXcgZC5WZWN0b3IzKS5mcm9tQXJyYXkoZSkpO2lbcyswXT1jLng7aVtzKzFdPWMueTtpW3MrMl09Yy56O3ZhciBsPXJbYV0uY29sb3I7b1tzKzBdPWxbMF0vMjU1O29bcysxXT1sWzFdLzI1NTtvW3MrMl09bFsyXS8yNTV9dmFyIGg9bmV3IGQuQnVmZmVyR2VvbWV0cnk7aC5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBkLkJ1ZmZlckF0dHJpYnV0ZShpLDMpKTtoLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IGQuQnVmZmVyQXR0cmlidXRlKG8sMykpO3ZhciBwPW5ldyBkLlBvaW50c01hdGVyaWFsKHtzaXplOi4xLHZlcnRleENvbG9yczp0cnVlfSk7cmV0dXJuIG5ldyBkLlBvaW50cyhoLHApfTtlLnByb3RvdHlwZS5fY3JlYXRlUG9zaXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnVucHJvamVjdEJhc2ljKFswLDBdLDApO3ZhciBuPVt0LHJdO3ZhciBpPW5ldyBkLkJ1ZmZlckdlb21ldHJ5O2kuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgZC5CdWZmZXJBdHRyaWJ1dGUodGhpcy5fYXJyYXlUb0Zsb2F0QXJyYXkobiwzKSwzKSk7cmV0dXJuIG5ldyBkLkxpbmUoaSxuZXcgZC5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6bmV3IGQuQ29sb3IoMSwwLDApfSkpfTtlLnByb3RvdHlwZS5fY3JlYXRlUHJlc3BlY3RpdmVDYW1lcmE9ZnVuY3Rpb24oZSl7dmFyIHQ9LjI7dmFyIHI9bmV3IGQuT2JqZWN0M0Q7ci5jaGlsZHJlbi5wdXNoKHRoaXMuX2NyZWF0ZURpYWdvbmFscyhlLHQpKTtyLmNoaWxkcmVuLnB1c2godGhpcy5fY3JlYXRlRnJhbWUoZSx0KSk7cmV0dXJuIHJ9O2UucHJvdG90eXBlLl9kaXNwb3NlQ2FtZXJhcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9ub2Rlc1tlXS5jYW1lcmFzO2Zvcih2YXIgcj0wLG49dC5jaGlsZHJlbi5zbGljZSgpO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2Zvcih2YXIgbz0wLGE9aS5jaGlsZHJlbjtvPGEubGVuZ3RoO28rKyl7dmFyIHM9YVtvXTtzLmdlb21ldHJ5LmRpc3Bvc2UoKTtzLm1hdGVyaWFsLmRpc3Bvc2UoKTt2YXIgdT10aGlzLl9pbnRlcmFjdGl2ZU9iamVjdHMuaW5kZXhPZihzKTtpZih1IT09LTEpe3RoaXMuX2ludGVyYWN0aXZlT2JqZWN0cy5zcGxpY2UodSwxKX1lbHNle2NvbnNvbGUud2FybihcIk9iamVjdCBkb2VzIG5vdCBleGlzdCAoXCIrcy5pZCtcIikgZm9yIFwiK2UpfX10LnJlbW92ZShpKX10aGlzLl9zY2VuZS5yZW1vdmUodCl9O2UucHJvdG90eXBlLl9kaXNwb3NlUG9pbnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9dGhpcy5fdGlsZUNsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbZV0ua2V5czt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTtpZighKG4gaW4gdGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9ucykpe2NvbnRpbnVlfXZhciBpPXRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbbl0udGlsZXMuaW5kZXhPZihlKTtpZihpPT09LTEpe2NvbnRpbnVlfXRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbbl0udGlsZXMuc3BsaWNlKGksMSk7aWYodGhpcy5fY2x1c3RlclJlY29uc3RydWN0aW9uc1tuXS50aWxlcy5sZW5ndGg+MCl7Y29udGludWV9Zm9yKHZhciBvPTAsYT10aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW25dLnBvaW50cy5jaGlsZHJlbi5zbGljZSgpO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO3MuZ2VvbWV0cnkuZGlzcG9zZSgpO3MubWF0ZXJpYWwuZGlzcG9zZSgpfXRoaXMuX3NjZW5lLnJlbW92ZSh0aGlzLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW25dLnBvaW50cyk7ZGVsZXRlIHRoaXMuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbnNbbl19fTtlLnByb3RvdHlwZS5fZGlzcG9zZVBvc2l0aW9ucz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9ub2Rlc1tlXS5wb3NpdGlvbnM7Zm9yKHZhciByPTAsbj10LmNoaWxkcmVuLnNsaWNlKCk7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07aS5nZW9tZXRyeS5kaXNwb3NlKCk7aS5tYXRlcmlhbC5kaXNwb3NlKCk7dC5yZW1vdmUoaSl9dGhpcy5fc2NlbmUucmVtb3ZlKHQpfTtlLnByb3RvdHlwZS5fZGlzcG9zZU5vZGVzPWZ1bmN0aW9uKGUpe3RoaXMuX2Rpc3Bvc2VDYW1lcmFzKGUpO3RoaXMuX2Rpc3Bvc2VQb3NpdGlvbnMoZSk7ZGVsZXRlIHRoaXMuX25vZGVzW2VdfTtlLnByb3RvdHlwZS5fZGlzcG9zZVJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuX2Rpc3Bvc2VQb2ludHMoZSk7ZGVsZXRlIHRoaXMuX3RpbGVDbHVzdGVyUmVjb25zdHJ1Y3Rpb25zW2VdfTtlLnByb3RvdHlwZS5fZGlzcG9zZVRpbGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdGlsZXNbZV07Zm9yKHZhciByPTAsbj10LmNoaWxkcmVuLnNsaWNlKCk7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07aS5nZW9tZXRyeS5kaXNwb3NlKCk7aS5tYXRlcmlhbC5kaXNwb3NlKCk7dC5yZW1vdmUoaSl9dGhpcy5fc2NlbmUucmVtb3ZlKHQpO2RlbGV0ZSB0aGlzLl90aWxlc1tlXX07ZS5wcm90b3R5cGUuX2dldENvbG9yPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQhPT1oLmRlZmF1bHQuRGVmYXVsdCYmZS5sZW5ndGg+MD90aGlzLl9nZXRDYW1lcmFDb2xvcihlKTpcIiNGRkZGRkZcIn07ZS5wcm90b3R5cGUuX2dldENhbWVyYUNvbG9yPWZ1bmN0aW9uKGUpe2lmKCEoZSBpbiB0aGlzLl9jYW1lcmFDb2xvcnMpKXt0aGlzLl9jYW1lcmFDb2xvcnNbZV09dGhpcy5fcmFuZG9tQ29sb3IoKX1yZXR1cm4gdGhpcy5fY2FtZXJhQ29sb3JzW2VdfTtlLnByb3RvdHlwZS5fZ2V0SWQ9ZnVuY3Rpb24oZSx0LHIsbil7c3dpdGNoKG4pe2Nhc2UgaC5kZWZhdWx0LkNsdXN0ZXI6cmV0dXJuIGU7Y2FzZSBoLmRlZmF1bHQuQ29ubmVjdGVkQ29tcG9uZW50OnJldHVybiB0O2Nhc2UgaC5kZWZhdWx0LlNlcXVlbmNlOnJldHVybiByO2RlZmF1bHQ6cmV0dXJuXCJcIn19O2UucHJvdG90eXBlLl9pbnRlcnBvbGF0ZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGUrcioodC1lKX07ZS5wcm90b3R5cGUuX3JhbmRvbUNvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuXCJoc2woXCIrTWF0aC5mbG9vcigzNjAqTWF0aC5yYW5kb20oKSkrXCIsIDEwMCUsIDY1JSlcIn07ZS5wcm90b3R5cGUuX3NldENhbWVyYUNvbG9yPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsbj10LmNoaWxkcmVuO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2kubWF0ZXJpYWwuY29sb3I9bmV3IGQuQ29sb3IoZSl9fTtlLnByb3RvdHlwZS5fc3Vic2FtcGxlPWZ1bmN0aW9uKGUsdCxyKXtpZihyPDEpe3JldHVybltlLHRdfXZhciBuPVtdO2Zvcih2YXIgaT0wO2k8PXIrMTtpKyspe3ZhciBvPVtdO2Zvcih2YXIgYT0wO2E8MzthKyspe28ucHVzaCh0aGlzLl9pbnRlcnBvbGF0ZShlW2FdLHRbYV0saS8ocisxKSkpfW4ucHVzaChvKX1yZXR1cm4gbn07cmV0dXJuIGV9KCk7ci5TcGF0aWFsRGF0YVNjZW5lPW47ci5kZWZhdWx0PW59LHtcIi4vQ2FtZXJhVmlzdWFsaXphdGlvbk1vZGVcIjozNjAsdGhyZWU6MjQyfV0sMzY1OltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDM2NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIG49ZShcIi4vZXJyb3IvR2VvbWV0cnlUYWdFcnJvclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIkdlb21ldHJ5VGFnRXJyb3JcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBuLkdlb21ldHJ5VGFnRXJyb3J9fSk7dmFyIGk9ZShcIi4vZ2VvbWV0cnkvUG9pbnRHZW9tZXRyeVwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlBvaW50R2VvbWV0cnlcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBpLlBvaW50R2VvbWV0cnl9fSk7dmFyIG89ZShcIi4vZ2VvbWV0cnkvUG9pbnRzR2VvbWV0cnlcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJQb2ludHNHZW9tZXRyeVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8uUG9pbnRzR2VvbWV0cnl9fSk7dmFyIGE9ZShcIi4vZ2VvbWV0cnkvUmVjdEdlb21ldHJ5XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUmVjdEdlb21ldHJ5XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5SZWN0R2VvbWV0cnl9fSk7dmFyIHM9ZShcIi4vZ2VvbWV0cnkvUG9seWdvbkdlb21ldHJ5XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiUG9seWdvbkdlb21ldHJ5XCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5Qb2x5Z29uR2VvbWV0cnl9fSk7dmFyIHU9ZShcIi4vdGFnL091dGxpbmVUYWdcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJPdXRsaW5lVGFnXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS5PdXRsaW5lVGFnfX0pO3ZhciBjPWUoXCIuL3RhZy9FeHRyZW1lUG9pbnRUYWdcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJFeHRyZW1lUG9pbnRUYWdcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBjLkV4dHJlbWVQb2ludFRhZ319KTt2YXIgbD1lKFwiLi90YWcvU3BvdFRhZ1wiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlNwb3RUYWdcIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBsLlNwb3RUYWd9fSk7dmFyIGg9ZShcIi4vdGFnL1RhZ0RvbWFpblwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRhZ0RvbWFpblwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGguVGFnRG9tYWlufX0pO3ZhciBwPWUoXCIuL1RhZ0NvbXBvbmVudFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIlRhZ0NvbXBvbmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAuVGFnQ29tcG9uZW50fX0pO3ZhciBmPWUoXCIuL1RhZ01vZGVcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJUYWdNb2RlXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZi5UYWdNb2RlfX0pfSx7XCIuL1RhZ0NvbXBvbmVudFwiOjM2NyxcIi4vVGFnTW9kZVwiOjM3MCxcIi4vZXJyb3IvR2VvbWV0cnlUYWdFcnJvclwiOjM3NCxcIi4vZ2VvbWV0cnkvUG9pbnRHZW9tZXRyeVwiOjM3NixcIi4vZ2VvbWV0cnkvUG9pbnRzR2VvbWV0cnlcIjozNzcsXCIuL2dlb21ldHJ5L1BvbHlnb25HZW9tZXRyeVwiOjM3OCxcIi4vZ2VvbWV0cnkvUmVjdEdlb21ldHJ5XCI6Mzc5LFwiLi90YWcvRXh0cmVtZVBvaW50VGFnXCI6Mzk0LFwiLi90YWcvT3V0bGluZVRhZ1wiOjM5OCxcIi4vdGFnL1Nwb3RUYWdcIjo0MDEsXCIuL3RhZy9UYWdEb21haW5cIjo0MDN9XSwzNjc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlRhZ0NvbXBvbmVudD12b2lkIDA7dmFyIHM9ZShcInJ4anNcIik7dmFyIHU9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBhPWUoXCJ3aGVuXCIpO3ZhciBjPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIGw9ZShcIi4uLy4uL0dlb1wiKTt2YXIgaD1lKFwiLi4vLi4vUmVuZGVyXCIpO3ZhciBpPWZ1bmN0aW9uKGkpe24obyxpKTtmdW5jdGlvbiBvKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlLHQscil8fHRoaXM7bi5fdGFnRG9tUmVuZGVyZXI9bmV3IGMuVGFnRE9NUmVuZGVyZXI7bi5fdGFnU2NlbmU9bmV3IGMuVGFnU2NlbmU7bi5fdGFnU2V0PW5ldyBjLlRhZ1NldDtuLl90YWdDcmVhdG9yPW5ldyBjLlRhZ0NyZWF0b3IobixyKTtuLl92aWV3cG9ydENvb3Jkcz1uZXcgbC5WaWV3cG9ydENvb3JkcztuLl9jcmVhdGVIYW5kbGVycz17Q3JlYXRlUG9pbnQ6bmV3IGMuQ3JlYXRlUG9pbnRIYW5kbGVyKG4sdCxyLG4uX3ZpZXdwb3J0Q29vcmRzLG4uX3RhZ0NyZWF0b3IpLENyZWF0ZVBvaW50czpuZXcgYy5DcmVhdGVQb2ludHNIYW5kbGVyKG4sdCxyLG4uX3ZpZXdwb3J0Q29vcmRzLG4uX3RhZ0NyZWF0b3IpLENyZWF0ZVBvbHlnb246bmV3IGMuQ3JlYXRlUG9seWdvbkhhbmRsZXIobix0LHIsbi5fdmlld3BvcnRDb29yZHMsbi5fdGFnQ3JlYXRvciksQ3JlYXRlUmVjdDpuZXcgYy5DcmVhdGVSZWN0SGFuZGxlcihuLHQscixuLl92aWV3cG9ydENvb3JkcyxuLl90YWdDcmVhdG9yKSxDcmVhdGVSZWN0RHJhZzpuZXcgYy5DcmVhdGVSZWN0RHJhZ0hhbmRsZXIobix0LHIsbi5fdmlld3BvcnRDb29yZHMsbi5fdGFnQ3JlYXRvciksRGVmYXVsdDp1bmRlZmluZWR9O24uX2VkaXRWZXJ0ZXhIYW5kbGVyPW5ldyBjLkVkaXRWZXJ0ZXhIYW5kbGVyKG4sdCxyLG4uX3ZpZXdwb3J0Q29vcmRzLG4uX3RhZ1NldCk7bi5fcmVuZGVyVGFncyQ9bi5fdGFnU2V0LmNoYW5nZWQkLnBpcGUodS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRBbGwoKTt0LnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnRhZy5pZDt2YXIgbj10LnRhZy5pZDtpZihyPG4pe3JldHVybi0xfWlmKHI+bil7cmV0dXJuIDF9cmV0dXJuIDB9KTtyZXR1cm4gdH0pLHUuc2hhcmUoKSk7bi5fdGFnQ2hhbmdlZCQ9bi5fcmVuZGVyVGFncyQucGlwZSh1LnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gcy5mcm9tKGUpLnBpcGUodS5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gcy5tZXJnZShlLnRhZy5jaGFuZ2VkJCxlLnRhZy5nZW9tZXRyeUNoYW5nZWQkKX0pKX0pLHUuc2hhcmUoKSk7bi5fcmVuZGVyVGFnR0xDaGFuZ2VkJD1uLl9yZW5kZXJUYWdzJC5waXBlKHUuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBzLmZyb20oZSkucGlwZSh1Lm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdsT2JqZWN0c0NoYW5nZWQkfSkpfSksdS5zaGFyZSgpKTtuLl9jcmVhdGVHZW9tZXRyeUNoYW5nZWQkPW4uX3RhZ0NyZWF0b3IudGFnJC5waXBlKHUuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsP2UuZ2VvbWV0cnlDaGFuZ2VkJDpzLmVtcHR5KCl9KSx1LnNoYXJlKCkpO24uX2NyZWF0ZUdMT2JqZWN0c0NoYW5nZWQkPW4uX3RhZ0NyZWF0b3IudGFnJC5waXBlKHUuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsP2UuZ2xPYmplY3RzQ2hhbmdlZCQ6cy5lbXB0eSgpfSksdS5zaGFyZSgpKTtuLl9jcmVhdGluZ0NvbmZpZ3VyYXRpb24kPW4uX2NvbmZpZ3VyYXRpb24kLnBpcGUodS5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3JldHVybiBlLm1vZGU9PT10Lm1vZGV9LGZ1bmN0aW9uKGUpe3JldHVybntjcmVhdGVDb2xvcjplLmNyZWF0ZUNvbG9yLG1vZGU6ZS5tb2RlfX0pLHUucHVibGlzaFJlcGxheSgxKSx1LnJlZkNvdW50KCkpO24uX2NyZWF0aW5nQ29uZmlndXJhdGlvbiQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe24uZmlyZShvLm1vZGVjaGFuZ2VkLGUubW9kZSl9KTtyZXR1cm4gbn1vLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24ocil7dmFyIG49dGhpcztpZih0aGlzLl9hY3RpdmF0ZWQpe3RoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQucGlwZSh1LmZpcnN0KCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtuLl90YWdTZXQuYWRkKHIsZSk7dmFyIHQ9ci5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX3RhZ1NldC5nZXQoZS5pZCl9KTtuLl90YWdTY2VuZS5hZGQodCl9KX1lbHNle3RoaXMuX3RhZ1NldC5hZGREZWFjdGl2YXRlZChyKX19O28ucHJvdG90eXBlLmNhbGN1bGF0ZVJlY3Q9ZnVuY3Rpb24obil7dmFyIGU9dGhpcztyZXR1cm4gYS5wcm9taXNlKGZ1bmN0aW9uKHQscil7ZS5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJC5waXBlKHUuZmlyc3QoKSx1Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbi5nZXRSZWN0MmQoZSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QoZSl9LGZ1bmN0aW9uKGUpe3IoZSl9KX0pfTtvLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90YWdDcmVhdG9yLnJlcGxheWVkVGFnJC5waXBlKHUuZmlyc3QoKSx1LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2UuY3JlYXRlKCl9KX07by5wcm90b3R5cGUuY2hhbmdlTW9kZT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZ3VyZSh7bW9kZTplfSl9O28ucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmF0ZWQpe3ZhciB0PXRoaXMuX3RhZ1NldC5nZXQoZSk7cmV0dXJuIHQhPT11bmRlZmluZWQ/dC50YWc6dW5kZWZpbmVkfWVsc2V7cmV0dXJuIHRoaXMuX3RhZ1NldC5nZXREZWFjdGl2YXRlZChlKX19O28ucHJvdG90eXBlLmdldEFsbD1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZhdGVkKXtyZXR1cm4gdGhpcy5fdGFnU2V0LmdldEFsbCgpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50YWd9KX1lbHNle3JldHVybiB0aGlzLl90YWdTZXQuZ2V0QWxsRGVhY3RpdmF0ZWQoKX19O28ucHJvdG90eXBlLmdldFRhZ0lkc0F0PWZ1bmN0aW9uKG4pe3ZhciBpPXRoaXM7cmV0dXJuIGEucHJvbWlzZShmdW5jdGlvbih0LHIpe2kuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQucGlwZSh1LmZpcnN0KCksdS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9aS5fdmlld3BvcnRDb29yZHMuY2FudmFzVG9WaWV3cG9ydChuWzBdLG5bMV0saS5fY29udGFpbmVyLmVsZW1lbnQpO3ZhciByPWkuX3RhZ1NjZW5lLmludGVyc2VjdE9iamVjdHModCxlLnBlcnNwZWN0aXZlKTtyZXR1cm4gcn0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dChlKX0sZnVuY3Rpb24oZSl7cihlKX0pfSl9O28ucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWN0aXZhdGVkP3RoaXMuX3RhZ1NldC5oYXMoZSk6dGhpcy5fdGFnU2V0Lmhhc0RlYWN0aXZhdGVkKGUpfTtvLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZhdGVkKXt0aGlzLl90YWdTZXQucmVtb3ZlKGUpO3RoaXMuX3RhZ1NjZW5lLnJlbW92ZShlKX1lbHNle3RoaXMuX3RhZ1NldC5yZW1vdmVEZWFjdGl2YXRlZChlKX19O28ucHJvdG90eXBlLnJlbW92ZUFsbD1mdW5jdGlvbigpe2lmKHRoaXMuX2FjdGl2YXRlZCl7dGhpcy5fdGFnU2V0LnJlbW92ZUFsbCgpO3RoaXMuX3RhZ1NjZW5lLnJlbW92ZUFsbCgpfWVsc2V7dGhpcy5fdGFnU2V0LnJlbW92ZUFsbERlYWN0aXZhdGVkKCl9fTtvLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuX2VkaXRWZXJ0ZXhIYW5kbGVyLmVuYWJsZSgpO3ZhciBlPXMuZnJvbShPYmplY3Qua2V5cyh0aGlzLl9jcmVhdGVIYW5kbGVycykpLnBpcGUodS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGEuX2NyZWF0ZUhhbmRsZXJzW2VdfSksdS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlfSksdS5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5nZW9tZXRyeUNyZWF0ZWQkfSksdS5zaGFyZSgpKTt0aGlzLl9maXJlR2VvbWV0cnlDcmVhdGVkU3Vic2NyaXB0aW9uPWUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2EuZmlyZShvLmdlb21ldHJ5Y3JlYXRlZCxlKX0pO3RoaXMuX2ZpcmVDcmVhdGVHZW9tZXRyeUV2ZW50U3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKHUuc2tpcFdoaWxlKGZ1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsfSksdS5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZSE9bnVsbD9vLmNyZWF0ZWdlb21ldHJ5c3RhcnQ6by5jcmVhdGVnZW9tZXRyeWVuZDthLmZpcmUodCxhKX0pO3RoaXMuX2hhbmRsZXJTdG9wQ3JlYXRlU3Vic2NyaXB0aW9uPWUuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7YS5jaGFuZ2VNb2RlKGMuVGFnTW9kZS5EZWZhdWx0KX0pO3RoaXMuX2hhbmRsZXJFbmFibGVyU3Vic2NyaXB0aW9uPXRoaXMuX2NyZWF0aW5nQ29uZmlndXJhdGlvbiQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2EuX2Rpc2FibGVDcmVhdGVIYW5kbGVycygpO3ZhciB0PWMuVGFnTW9kZVtlLm1vZGVdO3ZhciByPWEuX2NyZWF0ZUhhbmRsZXJzW3RdO2lmKCEhcil7ci5lbmFibGUoKX19KTt0aGlzLl9maXJlVGFnc0NoYW5nZWRTdWJzY3JpcHRpb249dGhpcy5fcmVuZGVyVGFncyQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7YS5maXJlKG8udGFnc2NoYW5nZWQsYSl9KTt0aGlzLl9zdG9wQ3JlYXRlU3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKHUuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsP2UuYWJvcnRlZCQucGlwZSh1Lm1hcChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpOnMuZW1wdHkoKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oKXthLmNoYW5nZU1vZGUoYy5UYWdNb2RlLkRlZmF1bHQpfSk7dGhpcy5fc2V0R0xDcmVhdGVUYWdTdWJzY3JpcHRpb249dGhpcy5fdGFnQ3JlYXRvci50YWckLnN1YnNjcmliZShmdW5jdGlvbihlKXtpZihhLl90YWdTY2VuZS5oYXNDcmVhdGVUYWcoKSl7YS5fdGFnU2NlbmUucmVtb3ZlQ3JlYXRlVGFnKCl9aWYoZSE9bnVsbCl7YS5fdGFnU2NlbmUuYWRkQ3JlYXRlVGFnKGUpfX0pO3RoaXMuX2NyZWF0ZUdMT2JqZWN0c0NoYW5nZWRTdWJzY3JpcHRpb249dGhpcy5fY3JlYXRlR0xPYmplY3RzQ2hhbmdlZCQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2EuX3RhZ1NjZW5lLnVwZGF0ZUNyZWF0ZVRhZ09iamVjdHMoZSl9KTt0aGlzLl91cGRhdGVHTE9iamVjdHNTdWJzY3JpcHRpb249dGhpcy5fcmVuZGVyVGFnR0xDaGFuZ2VkJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7YS5fdGFnU2NlbmUudXBkYXRlT2JqZWN0cyhlKX0pO3RoaXMuX3VwZGF0ZVRhZ1NjZW5lU3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NoYW5nZWQkLnN1YnNjcmliZShmdW5jdGlvbigpe2EuX3RhZ1NjZW5lLnVwZGF0ZSgpfSk7dGhpcy5fZG9tU3Vic2NyaXB0aW9uPXMuY29tYmluZUxhdGVzdCh0aGlzLl9yZW5kZXJUYWdzJC5waXBlKHUuc3RhcnRXaXRoKFtdKSx1LnRhcChmdW5jdGlvbigpe2EuX2NvbnRhaW5lci5kb21SZW5kZXJlci5yZW5kZXIkLm5leHQoe25hbWU6YS5fbmFtZSx2bm9kZTphLl90YWdEb21SZW5kZXJlci5jbGVhcigpfSl9KSksdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9jb250YWluZXIuc3ByaXRlU2VydmljZS5zcHJpdGVBdGxhcyQsdGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2Uuc2l6ZSQsdGhpcy5fdGFnQ2hhbmdlZCQucGlwZSh1LnN0YXJ0V2l0aChudWxsKSkscy5tZXJnZSh0aGlzLl90YWdDcmVhdG9yLnRhZyQsdGhpcy5fY3JlYXRlR2VvbWV0cnlDaGFuZ2VkJCkucGlwZSh1LnN0YXJ0V2l0aChudWxsKSkpLnBpcGUodS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdLGk9ZVszXSxvPWVbNV07cmV0dXJue25hbWU6YS5fbmFtZSx2bm9kZTphLl90YWdEb21SZW5kZXJlci5yZW5kZXIodCxvLG4sci5wZXJzcGVjdGl2ZSxpKX19KSkuc3Vic2NyaWJlKHRoaXMuX2NvbnRhaW5lci5kb21SZW5kZXJlci5yZW5kZXIkKTt0aGlzLl9nbFN1YnNjcmlwdGlvbj10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZSh1Lm1hcChmdW5jdGlvbihlKXt2YXIgdD1hLl90YWdTY2VuZTtyZXR1cm57bmFtZTphLl9uYW1lLHJlbmRlcjp7ZnJhbWVJZDplLmlkLG5lZWRzUmVuZGVyOnQubmVlZHNSZW5kZXIscmVuZGVyOnQucmVuZGVyLmJpbmQodCksc3RhZ2U6aC5HTFJlbmRlclN0YWdlLkZvcmVncm91bmR9fX0pKS5zdWJzY3JpYmUodGhpcy5fY29udGFpbmVyLmdsUmVuZGVyZXIucmVuZGVyJCk7dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJC5waXBlKHUuZmlyc3QoKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2EuX3RhZ1NldC5hY3RpdmF0ZShlKTthLl90YWdTY2VuZS5hZGQoYS5fdGFnU2V0LmdldEFsbCgpKX0pfTtvLnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2VkaXRWZXJ0ZXhIYW5kbGVyLmRpc2FibGUoKTt0aGlzLl9kaXNhYmxlQ3JlYXRlSGFuZGxlcnMoKTt0aGlzLl90YWdTY2VuZS5jbGVhcigpO3RoaXMuX3RhZ1NldC5kZWFjdGl2YXRlKCk7dGhpcy5fdGFnQ3JlYXRvci5kZWxldGUkLm5leHQobnVsbCk7dGhpcy5fdXBkYXRlR0xPYmplY3RzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdXBkYXRlVGFnU2NlbmVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zdG9wQ3JlYXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fc2V0R0xDcmVhdGVUYWdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9jcmVhdGVHTE9iamVjdHNDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZG9tU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZ2xTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9maXJlQ3JlYXRlR2VvbWV0cnlFdmVudFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2ZpcmVHZW9tZXRyeUNyZWF0ZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9maXJlVGFnc0NoYW5nZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9oYW5kbGVyU3RvcENyZWF0ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2hhbmRsZXJFbmFibGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fY29udGFpbmVyLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBvbmVudC10YWctY3JlYXRlXCIpfTtvLnByb3RvdHlwZS5fZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm57Y3JlYXRlQ29sb3I6MTY3NzcyMTUsaW5kaWNhdGVQb2ludHNDb21wbGV0ZXI6dHJ1ZSxtb2RlOmMuVGFnTW9kZS5EZWZhdWx0fX07by5wcm90b3R5cGUuX2Rpc2FibGVDcmVhdGVIYW5kbGVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NyZWF0ZUhhbmRsZXJzO2Zvcih2YXIgdCBpbiBlKXtpZighZS5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9dmFyIHI9ZVt0XTtpZighIXIpe3IuZGlzYWJsZSgpfX19O28uY29tcG9uZW50TmFtZT1cInRhZ1wiO28uY3JlYXRlZ2VvbWV0cnllbmQ9XCJjcmVhdGVnZW9tZXRyeWVuZFwiO28uY3JlYXRlZ2VvbWV0cnlzdGFydD1cImNyZWF0ZWdlb21ldHJ5c3RhcnRcIjtvLm1vZGVjaGFuZ2VkPVwibW9kZWNoYW5nZWRcIjtvLmdlb21ldHJ5Y3JlYXRlZD1cImdlb21ldHJ5Y3JlYXRlZFwiO28udGFnc2NoYW5nZWQ9XCJ0YWdzY2hhbmdlZFwiO3JldHVybiBvfShjLkNvbXBvbmVudCk7ci5UYWdDb21wb25lbnQ9aTtjLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIoaSk7ci5kZWZhdWx0PWl9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4uLy4uL0dlb1wiOjI5NCxcIi4uLy4uL1JlbmRlclwiOjI5NyxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsd2hlbjoyODh9XSwzNjg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuVGFnQ3JlYXRvcj12b2lkIDA7dmFyIG49ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBpPWUoXCJyeGpzXCIpO3ZhciBvPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fY29tcG9uZW50PWU7dGhpcy5fbmF2aWdhdG9yPXQ7dGhpcy5fdGFnT3BlcmF0aW9uJD1uZXcgaS5TdWJqZWN0O3RoaXMuX2NyZWF0ZVBvaW50cyQ9bmV3IGkuU3ViamVjdDt0aGlzLl9jcmVhdGVQb2x5Z29uJD1uZXcgaS5TdWJqZWN0O3RoaXMuX2NyZWF0ZVJlY3QkPW5ldyBpLlN1YmplY3Q7dGhpcy5fZGVsZXRlJD1uZXcgaS5TdWJqZWN0O3RoaXMuX3RhZyQ9dGhpcy5fdGFnT3BlcmF0aW9uJC5waXBlKG4uc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSxudWxsKSxuLnNoYXJlKCkpO3RoaXMuX3JlcGxheWVkVGFnJD10aGlzLl90YWckLnBpcGUobi5wdWJsaXNoUmVwbGF5KDEpLG4ucmVmQ291bnQoKSk7dGhpcy5fcmVwbGF5ZWRUYWckLnN1YnNjcmliZSgpO3RoaXMuX2NyZWF0ZVBvaW50cyQucGlwZShuLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbXBvbmVudC5jb25maWd1cmF0aW9uJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKSxuLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9bmV3IG8uUG9pbnRzR2VvbWV0cnkoW1t0WzBdLHRbMV1dLFt0WzBdLHRbMV1dXSk7cmV0dXJuIG5ldyBvLkV4dHJlbWVQb2ludENyZWF0ZVRhZyhlLHtjb2xvcjpyLmNyZWF0ZUNvbG9yLGluZGljYXRlQ29tcGxldGVyOnIuaW5kaWNhdGVQb2ludHNDb21wbGV0ZXJ9LG4pfX0pKS5zdWJzY3JpYmUodGhpcy5fdGFnT3BlcmF0aW9uJCk7dGhpcy5fY3JlYXRlUmVjdCQucGlwZShuLndpdGhMYXRlc3RGcm9tKHRoaXMuX2NvbXBvbmVudC5jb25maWd1cmF0aW9uJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKSxuLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9bmV3IG8uUmVjdEdlb21ldHJ5KFt0WzBdLHRbMV0sdFswXSx0WzFdXSk7cmV0dXJuIG5ldyBvLk91dGxpbmVDcmVhdGVUYWcoZSx7Y29sb3I6ci5jcmVhdGVDb2xvcn0sbil9fSkpLnN1YnNjcmliZSh0aGlzLl90YWdPcGVyYXRpb24kKTt0aGlzLl9jcmVhdGVQb2x5Z29uJC5waXBlKG4ud2l0aExhdGVzdEZyb20odGhpcy5fY29tcG9uZW50LmNvbmZpZ3VyYXRpb24kLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpLG4ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1uZXcgby5Qb2x5Z29uR2VvbWV0cnkoW1t0WzBdLHRbMV1dLFt0WzBdLHRbMV1dLFt0WzBdLHRbMV1dXSk7cmV0dXJuIG5ldyBvLk91dGxpbmVDcmVhdGVUYWcoZSx7Y29sb3I6ci5jcmVhdGVDb2xvcn0sbil9fSkpLnN1YnNjcmliZSh0aGlzLl90YWdPcGVyYXRpb24kKTt0aGlzLl9kZWxldGUkLnBpcGUobi5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19KSkuc3Vic2NyaWJlKHRoaXMuX3RhZ09wZXJhdGlvbiQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNyZWF0ZVJlY3QkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcmVhdGVSZWN0JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNyZWF0ZVBvbHlnb24kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcmVhdGVQb2x5Z29uJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNyZWF0ZVBvaW50cyRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NyZWF0ZVBvaW50cyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkZWxldGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxldGUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGFnJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFnJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlcGxheWVkVGFnJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwbGF5ZWRUYWckfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7cmV0dXJuIGV9KCk7ci5UYWdDcmVhdG9yPWE7ci5kZWZhdWx0PWF9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzNjk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuVGFnRE9NUmVuZGVyZXI9dm9pZCAwO3ZhciBjPWUoXCJ2aXJ0dWFsLWRvbVwiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9ZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89W107Zm9yKHZhciBhPTAscz1lO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdO289by5jb25jYXQodS5nZXRET01PYmplY3RzKHIsbixpKSl9aWYodCE9bnVsbCl7bz1vLmNvbmNhdCh0LmdldERPTU9iamVjdHMobixpKSl9cmV0dXJuIGMuaChcImRpdi5UYWdDb250YWluZXJcIix7fSxvKX07ZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gYy5oKFwiZGl2XCIse30sW10pfTtyZXR1cm4gZX0oKTtyLlRhZ0RPTVJlbmRlcmVyPW59LHtcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzcwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlRhZ01vZGU9dm9pZCAwO3ZhciBuOyhmdW5jdGlvbihlKXtlW2VbXCJEZWZhdWx0XCJdPTBdPVwiRGVmYXVsdFwiO2VbZVtcIkNyZWF0ZVBvaW50XCJdPTFdPVwiQ3JlYXRlUG9pbnRcIjtlW2VbXCJDcmVhdGVQb2ludHNcIl09Ml09XCJDcmVhdGVQb2ludHNcIjtlW2VbXCJDcmVhdGVQb2x5Z29uXCJdPTNdPVwiQ3JlYXRlUG9seWdvblwiO2VbZVtcIkNyZWF0ZVJlY3RcIl09NF09XCJDcmVhdGVSZWN0XCI7ZVtlW1wiQ3JlYXRlUmVjdERyYWdcIl09NV09XCJDcmVhdGVSZWN0RHJhZ1wifSkobj1yLlRhZ01vZGV8fChyLlRhZ01vZGU9e30pKTtyLmRlZmF1bHQ9bn0se31dLDM3MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5UYWdPcGVyYXRpb249dm9pZCAwO3ZhciBuOyhmdW5jdGlvbihlKXtlW2VbXCJOb25lXCJdPTBdPVwiTm9uZVwiO2VbZVtcIkNlbnRyb2lkXCJdPTFdPVwiQ2VudHJvaWRcIjtlW2VbXCJWZXJ0ZXhcIl09Ml09XCJWZXJ0ZXhcIn0pKG49ci5UYWdPcGVyYXRpb258fChyLlRhZ09wZXJhdGlvbj17fSkpO3IuZGVmYXVsdD1ufSx7fV0sMzcyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlRhZ1NjZW5lPXZvaWQgMDt2YXIgYz1lKFwidGhyZWVcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fY3JlYXRlVGFnPW51bGw7dGhpcy5fbmVlZHNSZW5kZXI9ZmFsc2U7dGhpcy5fcmF5Y2FzdGVyPSEhdD90Om5ldyBjLlJheWNhc3Rlcjt0aGlzLl9zY2VuZT0hIWU/ZTpuZXcgYy5TY2VuZTt0aGlzLl9vYmplY3RUYWdzPXt9O3RoaXMuX3JldHJpZXZhYmxlT2JqZWN0cz1bXTt0aGlzLl90YWdzPXt9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm5lZWRzUmVuZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZWVkc1JlbmRlcn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWU7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYobi50YWcuaWQgaW4gdGhpcy5fdGFncyl7dGhpcy5fcmVtb3ZlKG4udGFnLmlkKX10aGlzLl9hZGQobil9dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuYWRkQ3JlYXRlVGFnPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZS5nbE9iamVjdHM7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07dGhpcy5fc2NlbmUuYWRkKG4pfXRoaXMuX2NyZWF0ZVRhZz17dGFnOmUsb2JqZWN0czplLmdsT2JqZWN0c307dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PU9iamVjdC5rZXlzKHRoaXMuX3RhZ3MpO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3RoaXMuX3JlbW92ZShyKX10aGlzLl9uZWVkc1JlbmRlcj1mYWxzZX07ZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhcyhlKT90aGlzLl90YWdzW2VdLnRhZzp1bmRlZmluZWR9O2UucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbiB0aGlzLl90YWdzfTtlLnByb3RvdHlwZS5oYXNDcmVhdGVUYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3JlYXRlVGFnIT1udWxsfTtlLnByb3RvdHlwZS5pbnRlcnNlY3RPYmplY3RzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVswXSxuPWVbMV07dGhpcy5fcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobmV3IGMuVmVjdG9yMihyLG4pLHQpO3ZhciBpPXRoaXMuX3JheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHRoaXMuX3JldHJpZXZhYmxlT2JqZWN0cyk7dmFyIG89W107Zm9yKHZhciBhPTAscz1pO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdO2lmKHUub2JqZWN0LnV1aWQgaW4gdGhpcy5fb2JqZWN0VGFncyl7by5wdXNoKHRoaXMuX29iamVjdFRhZ3NbdS5vYmplY3QudXVpZF0pfX1yZXR1cm4gb307ZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZTt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTt0aGlzLl9yZW1vdmUobil9dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1PYmplY3Qua2V5cyh0aGlzLl90YWdzKTtlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTt0aGlzLl9yZW1vdmUocil9dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUucmVtb3ZlQ3JlYXRlVGFnPWZ1bmN0aW9uKCl7aWYodGhpcy5fY3JlYXRlVGFnPT1udWxsKXtyZXR1cm59Zm9yKHZhciBlPTAsdD10aGlzLl9jcmVhdGVUYWcub2JqZWN0cztlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTt0aGlzLl9zY2VuZS5yZW1vdmUocil9dGhpcy5fY3JlYXRlVGFnLnRhZy5kaXNwb3NlKCk7dGhpcy5fY3JlYXRlVGFnPW51bGw7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCl7dC5yZW5kZXIodGhpcy5fc2NlbmUsZSk7dGhpcy5fbmVlZHNSZW5kZXI9ZmFsc2V9O2UucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX25lZWRzUmVuZGVyPXRydWV9O2UucHJvdG90eXBlLnVwZGF0ZUNyZWF0ZVRhZ09iamVjdHM9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY3JlYXRlVGFnLnRhZyE9PWUpe3Rocm93IG5ldyBFcnJvcihcIkNyZWF0ZSB0YWdzIGRvIG5vdCBoYXZlIHRoZSBzYW1lIHJlZmVyZW5jZS5cIil9Zm9yKHZhciB0PTAscj10aGlzLl9jcmVhdGVUYWcub2JqZWN0czt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTt0aGlzLl9zY2VuZS5yZW1vdmUobil9Zm9yKHZhciBpPTAsbz1lLmdsT2JqZWN0cztpPG8ubGVuZ3RoO2krKyl7dmFyIG49b1tpXTt0aGlzLl9zY2VuZS5hZGQobil9dGhpcy5fY3JlYXRlVGFnLm9iamVjdHM9ZS5nbE9iamVjdHM7dGhpcy5fbmVlZHNSZW5kZXI9dHJ1ZX07ZS5wcm90b3R5cGUudXBkYXRlT2JqZWN0cz1mdW5jdGlvbihlKXt2YXIgdD1lLnRhZy5pZDtpZih0aGlzLl90YWdzW3RdLnRhZyE9PWUpe3Rocm93IG5ldyBFcnJvcihcIlRhZ3MgZG8gbm90IGhhdmUgdGhlIHNhbWUgcmVmZXJlbmNlLlwiKX12YXIgcj10aGlzLl90YWdzW3RdO3RoaXMuX3JlbW92ZU9iamVjdHMocik7ZGVsZXRlIHRoaXMuX3RhZ3NbdF07dGhpcy5fYWRkKGUpO3RoaXMuX25lZWRzUmVuZGVyPXRydWV9O2UucHJvdG90eXBlLl9hZGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YWcuaWQ7dmFyIHI9e3RhZzplLG9iamVjdHM6W10scmV0cmlldmFibGVPYmplY3RzOltdfTt0aGlzLl90YWdzW3RdPXI7Zm9yKHZhciBuPTAsaT1lLmdldEdMT2JqZWN0cygpO248aS5sZW5ndGg7bisrKXt2YXIgbz1pW25dO3Iub2JqZWN0cy5wdXNoKG8pO3RoaXMuX3NjZW5lLmFkZChvKX1mb3IodmFyIGE9MCxzPWUuZ2V0UmV0cmlldmFibGVPYmplY3RzKCk7YTxzLmxlbmd0aDthKyspe3ZhciB1PXNbYV07ci5yZXRyaWV2YWJsZU9iamVjdHMucHVzaCh1KTt0aGlzLl9yZXRyaWV2YWJsZU9iamVjdHMucHVzaCh1KTt0aGlzLl9vYmplY3RUYWdzW3UudXVpZF09ZS50YWcuaWR9fTtlLnByb3RvdHlwZS5fcmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3RhZ3NbZV07dGhpcy5fcmVtb3ZlT2JqZWN0cyh0KTt0LnRhZy5kaXNwb3NlKCk7ZGVsZXRlIHRoaXMuX3RhZ3NbZV19O2UucHJvdG90eXBlLl9yZW1vdmVPYmplY3RzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZS5vYmplY3RzO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO3RoaXMuX3NjZW5lLnJlbW92ZShuKX1mb3IodmFyIGk9MCxvPWUucmV0cmlldmFibGVPYmplY3RzO2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldO3ZhciBzPXRoaXMuX3JldHJpZXZhYmxlT2JqZWN0cy5pbmRleE9mKGEpO2lmKHMhPT0tMSl7dGhpcy5fcmV0cmlldmFibGVPYmplY3RzLnNwbGljZShzLDEpfX19O3JldHVybiBlfSgpO3IuVGFnU2NlbmU9bjtyLmRlZmF1bHQ9bn0se3RocmVlOjI0Mn1dLDM3MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5UYWdTZXQ9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIG89ZShcIi4vdGFnL0V4dHJlbWVQb2ludFRhZ1wiKTt2YXIgYT1lKFwiLi90YWcvRXh0cmVtZVBvaW50UmVuZGVyVGFnXCIpO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2FjdGl2ZT1mYWxzZTt0aGlzLl9oYXNoPXt9O3RoaXMuX2hhc2hEZWFjdGl2YXRlZD17fTt0aGlzLl9ub3RpZnlDaGFuZ2VkJD1uZXcgbi5TdWJqZWN0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFjdGl2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hhbmdlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vdGlmeUNoYW5nZWQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlKXtyZXR1cm59Zm9yKHZhciB0IGluIHRoaXMuX2hhc2hEZWFjdGl2YXRlZCl7aWYoIXRoaXMuX2hhc2hEZWFjdGl2YXRlZC5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9dmFyIHI9dGhpcy5faGFzaERlYWN0aXZhdGVkW3RdO3RoaXMuX2FkZChyLGUpfXRoaXMuX2hhc2hEZWFjdGl2YXRlZD17fTt0aGlzLl9hY3RpdmU9dHJ1ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2FjdGl2ZSl7cmV0dXJufWZvcih2YXIgZSBpbiB0aGlzLl9oYXNoKXtpZighdGhpcy5faGFzaC5oYXNPd25Qcm9wZXJ0eShlKSl7Y29udGludWV9dGhpcy5faGFzaERlYWN0aXZhdGVkW2VdPXRoaXMuX2hhc2hbZV0udGFnfXRoaXMuX2hhc2g9e307dGhpcy5fYWN0aXZlPWZhbHNlfTtlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9hc3NlcnRBY3RpdmF0aW9uU3RhdGUodHJ1ZSk7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO3RoaXMuX2FkZChpLHQpfXRoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9O2UucHJvdG90eXBlLmFkZERlYWN0aXZhdGVkPWZ1bmN0aW9uKGUpe3RoaXMuX2Fzc2VydEFjdGl2YXRpb25TdGF0ZShmYWxzZSk7Zm9yKHZhciB0PTAscj1lO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO2lmKCEobiBpbnN0YW5jZW9mIGkuT3V0bGluZVRhZ3x8biBpbnN0YW5jZW9mIGkuU3BvdFRhZ3x8biBpbnN0YW5jZW9mIG8uZGVmYXVsdCkpe3Rocm93IG5ldyBFcnJvcihcIlRhZyB0eXBlIG5vdCBzdXBwb3J0ZWRcIil9dGhpcy5faGFzaERlYWN0aXZhdGVkW24uaWRdPW59fTtlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaGFzKGUpP3RoaXMuX2hhc2hbZV06dW5kZWZpbmVkfTtlLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oYXNoO3JldHVybiBPYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KX07ZS5wcm90b3R5cGUuZ2V0QWxsRGVhY3RpdmF0ZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9oYXNoRGVhY3RpdmF0ZWQ7cmV0dXJuIE9iamVjdC5rZXlzKHQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfTtlLnByb3RvdHlwZS5nZXREZWFjdGl2YXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNEZWFjdGl2YXRlZChlKT90aGlzLl9oYXNoRGVhY3RpdmF0ZWRbZV06dW5kZWZpbmVkfTtlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW4gdGhpcy5faGFzaH07ZS5wcm90b3R5cGUuaGFzRGVhY3RpdmF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW4gdGhpcy5faGFzaERlYWN0aXZhdGVkfTtlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dGhpcy5fYXNzZXJ0QWN0aXZhdGlvblN0YXRlKHRydWUpO3ZhciB0PXRoaXMuX2hhc2g7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKCEoaSBpbiB0KSl7Y29udGludWV9ZGVsZXRlIHRbaV19dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07ZS5wcm90b3R5cGUucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7dGhpcy5fYXNzZXJ0QWN0aXZhdGlvblN0YXRlKHRydWUpO3RoaXMuX2hhc2g9e307dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07ZS5wcm90b3R5cGUucmVtb3ZlQWxsRGVhY3RpdmF0ZWQ9ZnVuY3Rpb24oKXt0aGlzLl9hc3NlcnRBY3RpdmF0aW9uU3RhdGUoZmFsc2UpO3RoaXMuX2hhc2hEZWFjdGl2YXRlZD17fX07ZS5wcm90b3R5cGUucmVtb3ZlRGVhY3RpdmF0ZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fYXNzZXJ0QWN0aXZhdGlvblN0YXRlKGZhbHNlKTt2YXIgdD10aGlzLl9oYXNoRGVhY3RpdmF0ZWQ7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKCEoaSBpbiB0KSl7Y29udGludWV9ZGVsZXRlIHRbaV19fTtlLnByb3RvdHlwZS5fYWRkPWZ1bmN0aW9uKGUsdCl7aWYoZSBpbnN0YW5jZW9mIGkuT3V0bGluZVRhZyl7dGhpcy5faGFzaFtlLmlkXT1uZXcgaS5PdXRsaW5lUmVuZGVyVGFnKGUsdCl9ZWxzZSBpZihlIGluc3RhbmNlb2YgaS5TcG90VGFnKXt0aGlzLl9oYXNoW2UuaWRdPW5ldyBpLlNwb3RSZW5kZXJUYWcoZSx0KX1lbHNlIGlmKGUgaW5zdGFuY2VvZiBvLmRlZmF1bHQpe3RoaXMuX2hhc2hbZS5pZF09bmV3IGEuZGVmYXVsdChlLHQpfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiVGFnIHR5cGUgbm90IHN1cHBvcnRlZFwiKX19O2UucHJvdG90eXBlLl9hc3NlcnRBY3RpdmF0aW9uU3RhdGU9ZnVuY3Rpb24oZSl7aWYoZSE9PXRoaXMuX2FjdGl2ZSl7dGhyb3cgbmV3IEVycm9yKFwiVGFnIHNldCBub3QgaW4gY29ycmVjdCBzdGF0ZSBmb3Igb3BlcmF0aW9uLlwiKX19O3JldHVybiBlfSgpO3IuVGFnU2V0PXM7ci5kZWZhdWx0PXN9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4vdGFnL0V4dHJlbWVQb2ludFJlbmRlclRhZ1wiOjM5MyxcIi4vdGFnL0V4dHJlbWVQb2ludFRhZ1wiOjM5NCxyeGpzOjQzfV0sMzc0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5HZW9tZXRyeVRhZ0Vycm9yPXZvaWQgMDt2YXIgbj1lKFwiLi4vLi4vLi4vRXJyb3JcIik7dmFyIG89ZnVuY3Rpb24ocil7aShuLHIpO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSE9bnVsbD9lOlwiVGhlIHByb3ZpZGVkIGdlb21ldHJ5IHZhbHVlIGlzIGluY29ycmVjdFwiKXx8dGhpcztPYmplY3Quc2V0UHJvdG90eXBlT2YodCxuLnByb3RvdHlwZSk7dC5uYW1lPVwiR2VvbWV0cnlUYWdFcnJvclwiO3JldHVybiB0fXJldHVybiBufShuLk1hcGlsbGFyeUVycm9yKTtyLkdlb21ldHJ5VGFnRXJyb3I9bztyLmRlZmF1bHQ9bi5NYXBpbGxhcnlFcnJvcn0se1wiLi4vLi4vLi4vRXJyb3JcIjoyOTN9XSwzNzU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR2VvbWV0cnk9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX25vdGlmeUNoYW5nZWQkPW5ldyBuLlN1YmplY3R9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hhbmdlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vdGlmeUNoYW5nZWQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7cmV0dXJuIGV9KCk7ci5HZW9tZXRyeT1pO3IuZGVmYXVsdD1pfSx7cnhqczo0M31dLDM3NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuUG9pbnRHZW9tZXRyeT12b2lkIDA7dmFyIG89ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlKXt2YXIgdD1pLmNhbGwodGhpcyl8fHRoaXM7dmFyIHI9ZVswXTt2YXIgbj1lWzFdO2lmKHI8MHx8cj4xfHxuPDB8fG4+MSl7dGhyb3cgbmV3IG8uR2VvbWV0cnlUYWdFcnJvcihcIkJhc2ljIGNvb3JkaW5hdGVzIG11c3QgYmUgb24gdGhlIGludGVydmFsIFswLCAxXS5cIil9dC5fcG9pbnQ9ZS5zbGljZSgpO3JldHVybiB0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBvaW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2ludH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmdldENlbnRyb2lkMmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9pbnQuc2xpY2UoKX07ZS5wcm90b3R5cGUuZ2V0Q2VudHJvaWQzZD1mdW5jdGlvbihlKXtyZXR1cm4gZS51bnByb2plY3RCYXNpYyh0aGlzLl9wb2ludCwyMDApfTtlLnByb3RvdHlwZS5zZXRDZW50cm9pZDJkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W01hdGgubWF4KDAsTWF0aC5taW4oMSxlWzBdKSksTWF0aC5tYXgoMCxNYXRoLm1pbigxLGVbMV0pKV07dGhpcy5fcG9pbnRbMF09clswXTt0aGlzLl9wb2ludFsxXT1yWzFdO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9O3JldHVybiBlfShvLkdlb21ldHJ5KTtyLlBvaW50R2VvbWV0cnk9aTtyLmRlZmF1bHQ9aX0se1wiLi4vLi4vLi4vQ29tcG9uZW50XCI6MjkxfV0sMzc3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Qb2ludHNHZW9tZXRyeT12b2lkIDA7dmFyIHU9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1mdW5jdGlvbihhKXtuKGUsYSk7ZnVuY3Rpb24gZShlKXt2YXIgdD1hLmNhbGwodGhpcyl8fHRoaXM7dmFyIHI9ZS5sZW5ndGg7aWYocjwyKXt0aHJvdyBuZXcgdS5HZW9tZXRyeVRhZ0Vycm9yKFwiQSBwb2ludHMgZ2VvbWV0cnkgbXVzdCBoYXZlIHR3byBvciBtb3JlIHBvc2l0aW9ucy5cIil9dC5fcG9pbnRzPVtdO2Zvcih2YXIgbj0wLGk9ZTtuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtpZihvWzBdPDB8fG9bMF0+MXx8b1sxXTwwfHxvWzFdPjEpe3Rocm93IG5ldyB1Lkdlb21ldHJ5VGFnRXJyb3IoXCJCYXNpYyBjb29yZGluYXRlcyBvZiBwb2ludHMgbXVzdCBiZSBvbiB0aGUgaW50ZXJ2YWwgWzAsIDFdLlwiKX10Ll9wb2ludHMucHVzaChvLnNsaWNlKCkpfXJldHVybiB0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBvaW50c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9pbnRzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuYWRkUG9pbnQyZD1mdW5jdGlvbihlKXt2YXIgdD1bTWF0aC5tYXgoMCxNYXRoLm1pbigxLGVbMF0pKSxNYXRoLm1heCgwLE1hdGgubWluKDEsZVsxXSkpXTt0aGlzLl9wb2ludHMucHVzaCh0KTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5nZXRQb2ludDJkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wb2ludHNbZV0uc2xpY2UoKX07ZS5wcm90b3R5cGUucmVtb3ZlUG9pbnQyZD1mdW5jdGlvbihlKXtpZihlPDB8fGU+PXRoaXMuX3BvaW50cy5sZW5ndGh8fHRoaXMuX3BvaW50cy5sZW5ndGg8Myl7dGhyb3cgbmV3IHUuR2VvbWV0cnlUYWdFcnJvcihcIkluZGV4IGZvciByZW1vdmVkIHBvaW50IG11c3QgYmUgdmFsaWQuXCIpfXRoaXMuX3BvaW50cy5zcGxpY2UoZSwxKTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5zZXRWZXJ0ZXgyZD1mdW5jdGlvbihlLHQscil7dGhpcy5zZXRQb2ludDJkKGUsdCxyKX07ZS5wcm90b3R5cGUuc2V0UG9pbnQyZD1mdW5jdGlvbihlLHQscil7dmFyIG49W01hdGgubWF4KDAsTWF0aC5taW4oMSx0WzBdKSksTWF0aC5tYXgoMCxNYXRoLm1pbigxLHRbMV0pKV07dGhpcy5fcG9pbnRzW2VdPW47dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07ZS5wcm90b3R5cGUuZ2V0UG9pbnRzM2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dldFBvaW50czNkKHRoaXMuX3BvaW50cyxlKX07ZS5wcm90b3R5cGUuZ2V0UG9pbnQzZD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnVucHJvamVjdEJhc2ljKHRoaXMuX3BvaW50c1tlXSwyMDApfTtlLnByb3RvdHlwZS5nZXRQb2ludHMyZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2ludHMuc2xpY2UoKX07ZS5wcm90b3R5cGUuZ2V0Q2VudHJvaWQyZD1mdW5jdGlvbihlKXtpZighZSl7dGhyb3cgbmV3IHUuR2VvbWV0cnlUYWdFcnJvcihcIkdldCBjZW50cm9pZCBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgdHJhbnNmb3JtIGZvciBwb2ludHMgZ2VvbWV0cmllcy5cIil9dmFyIHQ9dGhpcy5nZXRSZWN0MmQoZSkscj10WzBdLG49dFsxXSxpPXRbMl0sbz10WzNdO3ZhciBhPXI8aT8ocitpKS8yOihyK2krMSkvMiUxO3ZhciBzPShuK28pLzI7cmV0dXJuW2Esc119O2UucHJvdG90eXBlLmdldENlbnRyb2lkM2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRDZW50cm9pZDJkKCk7cmV0dXJuIGUudW5wcm9qZWN0QmFzaWModCwyMDApfTtlLnByb3RvdHlwZS5nZXRSZWN0MmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9MTt2YXIgcj0wO3ZhciBuPTE7dmFyIGk9MDt2YXIgbz10aGlzLl9wb2ludHM7Zm9yKHZhciBhPTAscz1vO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdO2lmKHVbMF08dCl7dD11WzBdfWlmKHVbMF0+cil7cj11WzBdfWlmKHVbMV08bil7bj11WzFdfWlmKHVbMV0+aSl7aT11WzFdfX1pZihlLmZ1bGxQYW5vKXt2YXIgYz1bXTtmb3IodmFyIGw9MDtsPG8ubGVuZ3RoO2wrKyl7Y1tsXT1sfWMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBvW2VdWzBdPG9bdF1bMF0/LTE6b1tlXVswXT5vW3RdWzBdPzE6ZTx0Py0xOjF9KTt2YXIgaD1vW2NbMF1dWzBdKzEtb1tjW2MubGVuZ3RoLTFdXVswXTt2YXIgcD0wO2Zvcih2YXIgbD0wO2w8Yy5sZW5ndGgtMTtsKyspe3ZhciBmPWNbbF07dmFyIGQ9Y1tsKzFdO3ZhciB2PW9bZF1bMF0tb1tmXVswXTtpZih2Pmgpe2g9djtwPWwrMX19aWYocD4wKXt0PW9bY1twXV1bMF07cj1vW2NbcC0xXV1bMF19fXJldHVyblt0LG4scixpXX07ZS5wcm90b3R5cGUuc2V0Q2VudHJvaWQyZD1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX07ZS5wcm90b3R5cGUuX2dldFBvaW50czNkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnVucHJvamVjdEJhc2ljKGUsMjAwKX0pfTtyZXR1cm4gZX0odS5HZW9tZXRyeSk7ci5Qb2ludHNHZW9tZXRyeT1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTF9XSwzNzg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlBvbHlnb25HZW9tZXRyeT12b2lkIDA7dmFyIGY9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1mdW5jdGlvbihwKXtuKGUscCk7ZnVuY3Rpb24gZShlLHQpe3ZhciByPXAuY2FsbCh0aGlzKXx8dGhpczt2YXIgbj1lLmxlbmd0aDtpZihuPDMpe3Rocm93IG5ldyBmLkdlb21ldHJ5VGFnRXJyb3IoXCJBIHBvbHlnb24gbXVzdCBoYXZlIHRocmVlIG9yIG1vcmUgcG9zaXRpb25zLlwiKX1pZihlWzBdWzBdIT09ZVtuLTFdWzBdfHxlWzBdWzFdIT09ZVtuLTFdWzFdKXt0aHJvdyBuZXcgZi5HZW9tZXRyeVRhZ0Vycm9yKFwiRmlyc3QgYW5kIGxhc3QgcG9zaXRpb25zIG11c3QgYmUgZXF1aXZhbGVudC5cIil9ci5fcG9seWdvbj1bXTtmb3IodmFyIGk9MCxvPWU7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV07aWYoYVswXTwwfHxhWzBdPjF8fGFbMV08MHx8YVsxXT4xKXt0aHJvdyBuZXcgZi5HZW9tZXRyeVRhZ0Vycm9yKFwiQmFzaWMgY29vcmRpbmF0ZXMgb2YgcG9seWdvbiBtdXN0IGJlIG9uIHRoZSBpbnRlcnZhbCBbMCwgMV0uXCIpfXIuX3BvbHlnb24ucHVzaChhLnNsaWNlKCkpfXIuX2hvbGVzPVtdO2lmKHQ9PW51bGwpe3JldHVybiByfWZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXt2YXIgdT10W3NdO3ZhciBjPXUubGVuZ3RoO2lmKGM8Myl7dGhyb3cgbmV3IGYuR2VvbWV0cnlUYWdFcnJvcihcIkEgcG9seWdvbiBob2xlIG11c3QgaGF2ZSB0aHJlZSBvciBtb3JlIHBvc2l0aW9ucy5cIil9aWYodVswXVswXSE9PXVbYy0xXVswXXx8dVswXVsxXSE9PXVbYy0xXVsxXSl7dGhyb3cgbmV3IGYuR2VvbWV0cnlUYWdFcnJvcihcIkZpcnN0IGFuZCBsYXN0IHBvc2l0aW9ucyBvZiBob2xlIG11c3QgYmUgZXF1aXZhbGVudC5cIil9ci5faG9sZXMucHVzaChbXSk7Zm9yKHZhciBsPTAsaD11O2w8aC5sZW5ndGg7bCsrKXt2YXIgYT1oW2xdO2lmKGFbMF08MHx8YVswXT4xfHxhWzFdPDB8fGFbMV0+MSl7dGhyb3cgbmV3IGYuR2VvbWV0cnlUYWdFcnJvcihcIkJhc2ljIGNvb3JkaW5hdGVzIG9mIGhvbGUgbXVzdCBiZSBvbiB0aGUgaW50ZXJ2YWwgWzAsIDFdLlwiKX1yLl9ob2xlc1tzXS5wdXNoKGEuc2xpY2UoKSl9fXJldHVybiByfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBvbHlnb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvbHlnb259LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob2xlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faG9sZXN9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5hZGRWZXJ0ZXgyZD1mdW5jdGlvbihlKXt2YXIgdD1bTWF0aC5tYXgoMCxNYXRoLm1pbigxLGVbMF0pKSxNYXRoLm1heCgwLE1hdGgubWluKDEsZVsxXSkpXTt0aGlzLl9wb2x5Z29uLnNwbGljZSh0aGlzLl9wb2x5Z29uLmxlbmd0aC0xLDAsdCk7dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07ZS5wcm90b3R5cGUuZ2V0VmVydGV4MmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3BvbHlnb25bZV0uc2xpY2UoKX07ZS5wcm90b3R5cGUucmVtb3ZlVmVydGV4MmQ9ZnVuY3Rpb24oZSl7aWYoZTwwfHxlPj10aGlzLl9wb2x5Z29uLmxlbmd0aHx8dGhpcy5fcG9seWdvbi5sZW5ndGg8NCl7dGhyb3cgbmV3IGYuR2VvbWV0cnlUYWdFcnJvcihcIkluZGV4IGZvciByZW1vdmVkIHZlcnRleCBtdXN0IGJlIHZhbGlkLlwiKX1pZihlPjAmJmU8dGhpcy5fcG9seWdvbi5sZW5ndGgtMSl7dGhpcy5fcG9seWdvbi5zcGxpY2UoZSwxKX1lbHNle3RoaXMuX3BvbHlnb24uc3BsaWNlKDAsMSk7dGhpcy5fcG9seWdvbi5wb3AoKTt2YXIgdD10aGlzLl9wb2x5Z29uWzBdLnNsaWNlKCk7dGhpcy5fcG9seWdvbi5wdXNoKHQpfXRoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9O2UucHJvdG90eXBlLnNldFZlcnRleDJkPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1bTWF0aC5tYXgoMCxNYXRoLm1pbigxLHRbMF0pKSxNYXRoLm1heCgwLE1hdGgubWluKDEsdFsxXSkpXTtpZihlPT09MHx8ZT09PXRoaXMuX3BvbHlnb24ubGVuZ3RoLTEpe3RoaXMuX3BvbHlnb25bMF09bi5zbGljZSgpO3RoaXMuX3BvbHlnb25bdGhpcy5fcG9seWdvbi5sZW5ndGgtMV09bi5zbGljZSgpfWVsc2V7dGhpcy5fcG9seWdvbltlXT1uLnNsaWNlKCl9dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07ZS5wcm90b3R5cGUuc2V0Q2VudHJvaWQyZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX3BvbHlnb24ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSk7dmFyIG49dGhpcy5fcG9seWdvbi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV19KTt2YXIgaT1NYXRoLm1pbi5hcHBseShNYXRoLHIpO3ZhciBvPU1hdGgubWF4LmFwcGx5KE1hdGgscik7dmFyIGE9TWF0aC5taW4uYXBwbHkoTWF0aCxuKTt2YXIgcz1NYXRoLm1heC5hcHBseShNYXRoLG4pO3ZhciB1PXRoaXMuZ2V0Q2VudHJvaWQyZCgpO3ZhciBjPS1pO3ZhciBsPTEtbzt2YXIgaD0tYTt2YXIgcD0xLXM7dmFyIGY9TWF0aC5tYXgoYyxNYXRoLm1pbihsLGVbMF0tdVswXSkpO3ZhciBkPU1hdGgubWF4KGgsTWF0aC5taW4ocCxlWzFdLXVbMV0pKTtmb3IodmFyIHY9MCxtPXRoaXMuX3BvbHlnb247djxtLmxlbmd0aDt2Kyspe3ZhciBnPW1bdl07Z1swXSs9ZjtnWzFdKz1kfXRoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9O2UucHJvdG90eXBlLmdldFBvaW50czNkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9nZXRQb2ludHMzZCh0aGlzLl9zdWJzYW1wbGUodGhpcy5fcG9seWdvbiksZSl9O2UucHJvdG90eXBlLmdldFZlcnRleDNkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudW5wcm9qZWN0QmFzaWModGhpcy5fcG9seWdvbltlXSwyMDApfTtlLnByb3RvdHlwZS5nZXRWZXJ0aWNlczJkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvbHlnb24uc2xpY2UoKX07ZS5wcm90b3R5cGUuZ2V0VmVydGljZXMzZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ2V0UG9pbnRzM2QodGhpcy5fcG9seWdvbixlKX07ZS5wcm90b3R5cGUuZ2V0SG9sZVBvaW50czNkPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7cmV0dXJuIHRoaXMuX2hvbGVzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5fZ2V0UG9pbnRzM2Qoci5fc3Vic2FtcGxlKGUpLHQpfSl9O2UucHJvdG90eXBlLmdldEhvbGVWZXJ0aWNlczNkPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7cmV0dXJuIHRoaXMuX2hvbGVzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5fZ2V0UG9pbnRzM2QoZSx0KX0pfTtlLnByb3RvdHlwZS5nZXRDZW50cm9pZDJkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcG9seWdvbjt2YXIgdD0wO3ZhciByPTA7dmFyIG49MDtmb3IodmFyIGk9MDtpPGUubGVuZ3RoLTE7aSsrKXt2YXIgbz1lW2ldWzBdO3ZhciBhPWVbaV1bMV07dmFyIHM9ZVtpKzFdWzBdO3ZhciB1PWVbaSsxXVsxXTt2YXIgYz1vKnUtcyphO3QrPWM7cis9KG8rcykqYztuKz0oYSt1KSpjfXQvPTI7ci89Nip0O24vPTYqdDtyZXR1cm5bcixuXX07ZS5wcm90b3R5cGUuZ2V0Q2VudHJvaWQzZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldENlbnRyb2lkMmQoKTtyZXR1cm4gZS51bnByb2plY3RCYXNpYyh0LDIwMCl9O2UucHJvdG90eXBlLmdldDNkRG9tYWluVHJpYW5nbGVzM2Q9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztyZXR1cm4gdGhpcy5fdHJpYW5ndWxhdGUodGhpcy5fcHJvamVjdCh0aGlzLl9wb2x5Z29uLHQpLHRoaXMuZ2V0VmVydGljZXMzZCh0KSx0aGlzLl9ob2xlcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX3Byb2plY3QoZSx0KX0pLHRoaXMuZ2V0SG9sZVZlcnRpY2VzM2QodCkpfTtlLnByb3RvdHlwZS5nZXRUcmlhbmdsZXMzZD1mdW5jdGlvbih0KXt2YXIgcj10aGlzO2lmKHQuZnVsbFBhbm8pe3JldHVybiB0aGlzLl90cmlhbmd1bGF0ZVBhbm8odGhpcy5fcG9seWdvbi5zbGljZSgpLHRoaXMuaG9sZXMuc2xpY2UoKSx0KX12YXIgZT10aGlzLl9wcm9qZWN0KHRoaXMuX3N1YnNhbXBsZSh0aGlzLl9wb2x5Z29uKSx0KTt2YXIgbj10aGlzLmdldFBvaW50czNkKHQpO3ZhciBpPXRoaXMuX2hvbGVzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5fcHJvamVjdChyLl9zdWJzYW1wbGUoZSksdCl9KTt2YXIgbz10aGlzLmdldEhvbGVQb2ludHMzZCh0KTtyZXR1cm4gdGhpcy5fdHJpYW5ndWxhdGUoZSxuLGksbyl9O2UucHJvdG90eXBlLmdldFBvbGVPZkluYWNjZXNzaWJpbGl0eTJkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFBvbGVPZkluYWNjZXNzaWJpbGl0eTJkKHRoaXMuX3BvbHlnb24uc2xpY2UoKSl9O2UucHJvdG90eXBlLmdldFBvbGVPZkluYWNjZXNzaWJpbGl0eTNkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldFBvbGVPZkluYWNjZXNzaWJpbGl0eTJkKHRoaXMuX3BvbHlnb24uc2xpY2UoKSk7cmV0dXJuIGUudW5wcm9qZWN0QmFzaWModCwyMDApfTtlLnByb3RvdHlwZS5fZ2V0UG9pbnRzM2Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHQudW5wcm9qZWN0QmFzaWMoZSwyMDApfSl9O3JldHVybiBlfShmLlZlcnRleEdlb21ldHJ5KTtyLlBvbHlnb25HZW9tZXRyeT1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTF9XSwzNzk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlJlY3RHZW9tZXRyeT12b2lkIDA7dmFyIGE9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlKXt2YXIgdD1vLmNhbGwodGhpcyl8fHRoaXM7aWYoZVsxXT5lWzNdKXt0aHJvdyBuZXcgYS5HZW9tZXRyeVRhZ0Vycm9yKFwiQmFzaWMgWSBjb29yZGluYXRlcyB2YWx1ZXMgY2FuIG5vdCBiZSBpbnZlcnRlZC5cIil9Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKGk8MHx8aT4xKXt0aHJvdyBuZXcgYS5HZW9tZXRyeVRhZ0Vycm9yKFwiQmFzaWMgY29vcmRpbmF0ZXMgbXVzdCBiZSBvbiB0aGUgaW50ZXJ2YWwgWzAsIDFdLlwiKX19dC5fYW5jaG9ySW5kZXg9dW5kZWZpbmVkO3QuX3JlY3Q9ZS5zbGljZSgwLDQpO3QuX2ludmVydGVkPXQuX3JlY3RbMF0+dC5fcmVjdFsyXTtyZXR1cm4gdH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhbmNob3JJbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5jaG9ySW5kZXh9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpbnZlcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW52ZXJ0ZWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWN0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuaW5pdGlhbGl6ZUFuY2hvckluZGV4aW5nPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FuY2hvckluZGV4IT09dW5kZWZpbmVkKXt0aHJvdyBuZXcgRXJyb3IoXCJBbmNob3IgaW5kZXhpbmcgaXMgYWxyZWFkeSBpbml0aWFsaXplZC5cIil9aWYoZTwwfHxlPjMpe3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgYW5jaG9yIGluZGV4OiBcIitlK1wiLlwiKX10aGlzLl9hbmNob3JJbmRleD1lPT09dW5kZWZpbmVkPzA6ZX07ZS5wcm90b3R5cGUudGVybWluYXRlQW5jaG9ySW5kZXhpbmc9ZnVuY3Rpb24oKXt0aGlzLl9hbmNob3JJbmRleD11bmRlZmluZWR9O2UucHJvdG90eXBlLnNldE9wcG9zaXRlVmVydGV4MmQ9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9hbmNob3JJbmRleD09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKFwiQW5jaG9yIGluZGV4aW5nIG5lZWRzIHRvIGJlIGluaXRpYWxpemVkLlwiKX12YXIgcj1bTWF0aC5tYXgoMCxNYXRoLm1pbigxLGVbMF0pKSxNYXRoLm1heCgwLE1hdGgubWluKDEsZVsxXSkpXTt2YXIgbj10aGlzLl9yZWN0LnNsaWNlKCk7dmFyIGk9dGhpcy5fYW5jaG9ySW5kZXg9PT0wP1tuWzBdLG5bM11dOnRoaXMuX2FuY2hvckluZGV4PT09MT9bblswXSxuWzFdXTp0aGlzLl9hbmNob3JJbmRleD09PTI/W25bMl0sblsxXV06W25bMl0sblszXV07aWYodC5mdWxsUGFubyl7dmFyIG89dGhpcy5fYW5jaG9ySW5kZXg8Mj9yWzBdLW5bMl06clswXS1uWzBdO2lmKCF0aGlzLl9pbnZlcnRlZCYmdGhpcy5fYW5jaG9ySW5kZXg8MiYmclswXTwuMjUmJm5bMl0+Ljc1JiZvPC0uNSl7dGhpcy5faW52ZXJ0ZWQ9dHJ1ZTt0aGlzLl9hbmNob3JJbmRleD1pWzFdPnJbMV0/MDoxfWVsc2UgaWYoIXRoaXMuX2ludmVydGVkJiZ0aGlzLl9hbmNob3JJbmRleD49MiYmclswXTwuMjUmJm5bMl0+Ljc1JiZvPC0uNSl7dGhpcy5faW52ZXJ0ZWQ9dHJ1ZTt0aGlzLl9hbmNob3JJbmRleD1pWzFdPnJbMV0/MDoxfWVsc2UgaWYodGhpcy5faW52ZXJ0ZWQmJnRoaXMuX2FuY2hvckluZGV4Pj0yJiZyWzBdPC4yNSYmblswXT4uNzUmJm88LS41KXt0aGlzLl9pbnZlcnRlZD1mYWxzZTtpZihpWzBdPnJbMF0pe3RoaXMuX2FuY2hvckluZGV4PWlbMV0+clsxXT8zOjJ9ZWxzZXt0aGlzLl9hbmNob3JJbmRleD1pWzFdPnJbMV0/MDoxfX1lbHNlIGlmKCF0aGlzLl9pbnZlcnRlZCYmdGhpcy5fYW5jaG9ySW5kZXg+PTImJnJbMF0+Ljc1JiZuWzBdPC4yNSYmbz4uNSl7dGhpcy5faW52ZXJ0ZWQ9dHJ1ZTt0aGlzLl9hbmNob3JJbmRleD1pWzFdPnJbMV0/MzoyfWVsc2UgaWYoIXRoaXMuX2ludmVydGVkJiZ0aGlzLl9hbmNob3JJbmRleDwyJiZyWzBdPi43NSYmblswXTwuMjUmJm8+LjUpe3RoaXMuX2ludmVydGVkPXRydWU7dGhpcy5fYW5jaG9ySW5kZXg9aVsxXT5yWzFdPzM6Mn1lbHNlIGlmKHRoaXMuX2ludmVydGVkJiZ0aGlzLl9hbmNob3JJbmRleDwyJiZyWzBdPi43NSYmblsyXTwuMjUmJm8+LjUpe3RoaXMuX2ludmVydGVkPWZhbHNlO2lmKGlbMF0+clswXSl7dGhpcy5fYW5jaG9ySW5kZXg9aVsxXT5yWzFdPzM6Mn1lbHNle3RoaXMuX2FuY2hvckluZGV4PWlbMV0+clsxXT8wOjF9fWVsc2UgaWYodGhpcy5faW52ZXJ0ZWQmJnRoaXMuX2FuY2hvckluZGV4PDImJnJbMF0+blswXSl7dGhpcy5faW52ZXJ0ZWQ9ZmFsc2U7dGhpcy5fYW5jaG9ySW5kZXg9aVsxXT5yWzFdPzA6MX1lbHNlIGlmKHRoaXMuX2ludmVydGVkJiZ0aGlzLl9hbmNob3JJbmRleD49MiYmclswXTxuWzJdKXt0aGlzLl9pbnZlcnRlZD1mYWxzZTt0aGlzLl9hbmNob3JJbmRleD1pWzFdPnJbMV0/MzoyfWVsc2UgaWYodGhpcy5faW52ZXJ0ZWQpe2lmKHRoaXMuX2FuY2hvckluZGV4PDIpe3RoaXMuX2FuY2hvckluZGV4PWlbMV0+clsxXT8wOjF9ZWxzZXt0aGlzLl9hbmNob3JJbmRleD1pWzFdPnJbMV0/MzoyfX1lbHNle2lmKGlbMF08PXJbMF0mJmlbMV0+clsxXSl7dGhpcy5fYW5jaG9ySW5kZXg9MH1lbHNlIGlmKGlbMF08PXJbMF0mJmlbMV08PXJbMV0pe3RoaXMuX2FuY2hvckluZGV4PTF9ZWxzZSBpZihpWzBdPnJbMF0mJmlbMV08PXJbMV0pe3RoaXMuX2FuY2hvckluZGV4PTJ9ZWxzZXt0aGlzLl9hbmNob3JJbmRleD0zfX12YXIgYT1bXTtpZih0aGlzLl9hbmNob3JJbmRleD09PTApe2FbMF09aVswXTthWzFdPXJbMV07YVsyXT1yWzBdO2FbM109aVsxXX1lbHNlIGlmKHRoaXMuX2FuY2hvckluZGV4PT09MSl7YVswXT1pWzBdO2FbMV09aVsxXTthWzJdPXJbMF07YVszXT1yWzFdfWVsc2UgaWYodGhpcy5fYW5jaG9ySW5kZXg9PT0yKXthWzBdPXJbMF07YVsxXT1pWzFdO2FbMl09aVswXTthWzNdPXJbMV19ZWxzZXthWzBdPXJbMF07YVsxXT1yWzFdO2FbMl09aVswXTthWzNdPWlbMV19aWYoIXRoaXMuX2ludmVydGVkJiZhWzBdPmFbMl18fHRoaXMuX2ludmVydGVkJiZhWzBdPGFbMl0pe2FbMF09blswXTthWzJdPW5bMl19aWYoYVsxXT5hWzNdKXthWzFdPW5bMV07YVszXT1uWzNdfXRoaXMuX3JlY3RbMF09YVswXTt0aGlzLl9yZWN0WzFdPWFbMV07dGhpcy5fcmVjdFsyXT1hWzJdO3RoaXMuX3JlY3RbM109YVszXX1lbHNle2lmKGlbMF08PXJbMF0mJmlbMV0+clsxXSl7dGhpcy5fYW5jaG9ySW5kZXg9MH1lbHNlIGlmKGlbMF08PXJbMF0mJmlbMV08PXJbMV0pe3RoaXMuX2FuY2hvckluZGV4PTF9ZWxzZSBpZihpWzBdPnJbMF0mJmlbMV08PXJbMV0pe3RoaXMuX2FuY2hvckluZGV4PTJ9ZWxzZXt0aGlzLl9hbmNob3JJbmRleD0zfXZhciBhPVtdO2lmKHRoaXMuX2FuY2hvckluZGV4PT09MCl7YVswXT1pWzBdO2FbMV09clsxXTthWzJdPXJbMF07YVszXT1pWzFdfWVsc2UgaWYodGhpcy5fYW5jaG9ySW5kZXg9PT0xKXthWzBdPWlbMF07YVsxXT1pWzFdO2FbMl09clswXTthWzNdPXJbMV19ZWxzZSBpZih0aGlzLl9hbmNob3JJbmRleD09PTIpe2FbMF09clswXTthWzFdPWlbMV07YVsyXT1pWzBdO2FbM109clsxXX1lbHNle2FbMF09clswXTthWzFdPXJbMV07YVsyXT1pWzBdO2FbM109aVsxXX1pZihhWzBdPmFbMl0pe2FbMF09blswXTthWzJdPW5bMl19aWYoYVsxXT5hWzNdKXthWzFdPW5bMV07YVszXT1uWzNdfXRoaXMuX3JlY3RbMF09YVswXTt0aGlzLl9yZWN0WzFdPWFbMV07dGhpcy5fcmVjdFsyXT1hWzJdO3RoaXMuX3JlY3RbM109YVszXX10aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5zZXRWZXJ0ZXgyZD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fcmVjdC5zbGljZSgpO3ZhciBpPVtNYXRoLm1heCgwLE1hdGgubWluKDEsdFswXSkpLE1hdGgubWF4KDAsTWF0aC5taW4oMSx0WzFdKSldO3ZhciBvPVtdO2lmKGU9PT0wKXtvWzBdPWlbMF07b1sxXT1uWzFdO29bMl09blsyXTtvWzNdPWlbMV19ZWxzZSBpZihlPT09MSl7b1swXT1pWzBdO29bMV09aVsxXTtvWzJdPW5bMl07b1szXT1uWzNdfWVsc2UgaWYoZT09PTIpe29bMF09blswXTtvWzFdPWlbMV07b1syXT1pWzBdO29bM109blszXX1lbHNlIGlmKGU9PT0zKXtvWzBdPW5bMF07b1sxXT1uWzFdO29bMl09aVswXTtvWzNdPWlbMV19aWYoci5mdWxsUGFubyl7dmFyIGE9ZTwyJiZpWzBdPi43NSYmblswXTwuMjV8fGU+PTImJnRoaXMuX2ludmVydGVkJiZpWzBdPi43NSYmblsyXTwuMjU7dmFyIHM9ZTwyJiZ0aGlzLl9pbnZlcnRlZCYmaVswXTwuMjUmJm5bMF0+Ljc1fHxlPj0yJiZpWzBdPC4yNSYmblsyXT4uNzU7aWYoYXx8cyl7dGhpcy5faW52ZXJ0ZWQ9IXRoaXMuX2ludmVydGVkfWVsc2V7aWYob1swXS1uWzBdPC0uMjUpe29bMF09blswXX1pZihvWzJdLW5bMl0+LjI1KXtvWzJdPW5bMl19fWlmKCF0aGlzLl9pbnZlcnRlZCYmb1swXT5vWzJdfHx0aGlzLl9pbnZlcnRlZCYmb1swXTxvWzJdKXtvWzBdPW5bMF07b1syXT1uWzJdfX1lbHNle2lmKG9bMF0+b1syXSl7b1swXT1uWzBdO29bMl09blsyXX19aWYob1sxXT5vWzNdKXtvWzFdPW5bMV07b1szXT1uWzNdfXRoaXMuX3JlY3RbMF09b1swXTt0aGlzLl9yZWN0WzFdPW9bMV07dGhpcy5fcmVjdFsyXT1vWzJdO3RoaXMuX3JlY3RbM109b1szXTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5zZXRDZW50cm9pZDJkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fcmVjdC5zbGljZSgpO3ZhciBuPXJbMF07dmFyIGk9dGhpcy5faW52ZXJ0ZWQ/clsyXSsxOnJbMl07dmFyIG89clsxXTt2YXIgYT1yWzNdO3ZhciBzPW4rKGktbikvMjt2YXIgdT1vKyhhLW8pLzI7dmFyIGM9MDtpZih0LmdwYW5vIT1udWxsJiZ0LmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscz09PXQuZ3Bhbm8uRnVsbFBhbm9XaWR0aFBpeGVscyl7Yz10aGlzLl9pbnZlcnRlZD9lWzBdKzEtczplWzBdLXN9ZWxzZXt2YXIgbD0tbjt2YXIgaD0xLWk7Yz1NYXRoLm1heChsLE1hdGgubWluKGgsZVswXS1zKSl9dmFyIHA9LW87dmFyIGY9MS1hO3ZhciBkPU1hdGgubWF4KHAsTWF0aC5taW4oZixlWzFdLXUpKTt0aGlzLl9yZWN0WzBdPXJbMF0rYzt0aGlzLl9yZWN0WzFdPXJbMV0rZDt0aGlzLl9yZWN0WzJdPXJbMl0rYzt0aGlzLl9yZWN0WzNdPXJbM10rZDtpZih0aGlzLl9yZWN0WzBdPDApe3RoaXMuX3JlY3RbMF0rPTE7dGhpcy5faW52ZXJ0ZWQ9IXRoaXMuX2ludmVydGVkfWVsc2UgaWYodGhpcy5fcmVjdFswXT4xKXt0aGlzLl9yZWN0WzBdLT0xO3RoaXMuX2ludmVydGVkPSF0aGlzLl9pbnZlcnRlZH1pZih0aGlzLl9yZWN0WzJdPDApe3RoaXMuX3JlY3RbMl0rPTE7dGhpcy5faW52ZXJ0ZWQ9IXRoaXMuX2ludmVydGVkfWVsc2UgaWYodGhpcy5fcmVjdFsyXT4xKXt0aGlzLl9yZWN0WzJdLT0xO3RoaXMuX2ludmVydGVkPSF0aGlzLl9pbnZlcnRlZH10aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtlLnByb3RvdHlwZS5nZXRQb2ludHMzZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZ2V0UG9pbnRzMmQoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHQudW5wcm9qZWN0QmFzaWMoZSwyMDApfSl9O2UucHJvdG90eXBlLmdldFZlcnRleDJkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9yZWN0VG9WZXJ0aWNlczJkKHRoaXMuX3JlY3QpW2VdfTtlLnByb3RvdHlwZS5nZXROb25BZGp1c3RlZFZlcnRleDJkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9yZWN0VG9Ob25BZGp1c3RlZFZlcnRpY2VzMmQodGhpcy5fcmVjdClbZV19O2UucHJvdG90eXBlLmdldFZlcnRleDNkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudW5wcm9qZWN0QmFzaWModGhpcy5fcmVjdFRvVmVydGljZXMyZCh0aGlzLl9yZWN0KVtlXSwyMDApfTtlLnByb3RvdHlwZS5nZXRWZXJ0aWNlczJkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlY3RUb1ZlcnRpY2VzMmQodGhpcy5fcmVjdCl9O2UucHJvdG90eXBlLmdldFZlcnRpY2VzM2Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JlY3RUb1ZlcnRpY2VzMmQodGhpcy5fcmVjdCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnVucHJvamVjdEJhc2ljKGUsMjAwKX0pfTtlLnByb3RvdHlwZS5nZXRDZW50cm9pZDJkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmVjdDt2YXIgdD1lWzBdO3ZhciByPXRoaXMuX2ludmVydGVkP2VbMl0rMTplWzJdO3ZhciBuPWVbMV07dmFyIGk9ZVszXTt2YXIgbz0odCtyKS8yO3ZhciBhPShuK2kpLzI7cmV0dXJuW28sYV19O2UucHJvdG90eXBlLmdldENlbnRyb2lkM2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRDZW50cm9pZDJkKCk7cmV0dXJuIGUudW5wcm9qZWN0QmFzaWModCwyMDApfTtlLnByb3RvdHlwZS5nZXRQb2xlT2ZJbmFjY2Vzc2liaWxpdHkyZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQb2xlT2ZJbmFjY2Vzc2liaWxpdHkyZCh0aGlzLl9yZWN0VG9WZXJ0aWNlczJkKHRoaXMuX3JlY3QpKX07ZS5wcm90b3R5cGUuZ2V0UG9sZU9mSW5hY2Nlc3NpYmlsaXR5M2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0UG9sZU9mSW5hY2Nlc3NpYmlsaXR5MmQodGhpcy5fcmVjdFRvVmVydGljZXMyZCh0aGlzLl9yZWN0KSk7cmV0dXJuIGUudW5wcm9qZWN0QmFzaWModCwyMDApfTtlLnByb3RvdHlwZS5nZXRUcmlhbmdsZXMzZD1mdW5jdGlvbihlKXtyZXR1cm4gZS5mdWxsUGFubz9bXTp0aGlzLl90cmlhbmd1bGF0ZSh0aGlzLl9wcm9qZWN0KHRoaXMuX2dldFBvaW50czJkKCksZSksdGhpcy5nZXRQb2ludHMzZChlKSl9O2UucHJvdG90eXBlLnZhbGlkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3JlY3Q7aWYoIXRoaXMuX2ludmVydGVkJiZlWzBdPHRbMF18fGVbMF0tdFsyXT4uMjV8fGVbMV08dFsxXSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTtlLnByb3RvdHlwZS5fZ2V0UG9pbnRzMmQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9yZWN0VG9WZXJ0aWNlczJkKHRoaXMuX3JlY3QpO3ZhciB0PWUubGVuZ3RoLTE7dmFyIHI9MTA7dmFyIG49W107Zm9yKHZhciBpPTA7aTx0OysraSl7dmFyIG89ZVtpXVswXTt2YXIgYT1lW2ldWzFdO3ZhciBzPWVbaSsxXVswXTt2YXIgdT1lW2krMV1bMV07dmFyIGM9KHMtbykvKHItMSk7dmFyIGw9KHUtYSkvKHItMSk7Zm9yKHZhciBoPTA7aDxyOysraCl7dmFyIHA9W28raCpjLGEraCpsXTtuLnB1c2gocCl9fXJldHVybiBufTtlLnByb3RvdHlwZS5fcmVjdFRvVmVydGljZXMyZD1mdW5jdGlvbihlKXtyZXR1cm5bW2VbMF0sZVszXV0sW2VbMF0sZVsxXV0sW3RoaXMuX2ludmVydGVkP2VbMl0rMTplWzJdLGVbMV1dLFt0aGlzLl9pbnZlcnRlZD9lWzJdKzE6ZVsyXSxlWzNdXSxbZVswXSxlWzNdXV19O2UucHJvdG90eXBlLl9yZWN0VG9Ob25BZGp1c3RlZFZlcnRpY2VzMmQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1tlWzBdLGVbM11dLFtlWzBdLGVbMV1dLFtlWzJdLGVbMV1dLFtlWzJdLGVbM11dLFtlWzBdLGVbM11dXX07cmV0dXJuIGV9KGEuVmVydGV4R2VvbWV0cnkpO3IuUmVjdEdlb21ldHJ5PWk7ci5kZWZhdWx0PWl9LHtcIi4uLy4uLy4uL0NvbXBvbmVudFwiOjI5MX1dLDM4MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTt2YXIgeD10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXlzfHxmdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9MCxyPWFyZ3VtZW50cy5sZW5ndGg7dDxyO3QrKyllKz1hcmd1bWVudHNbdF0ubGVuZ3RoO2Zvcih2YXIgbj1BcnJheShlKSxpPTAsdD0wO3Q8cjt0KyspZm9yKHZhciBvPWFyZ3VtZW50c1t0XSxhPTAscz1vLmxlbmd0aDthPHM7YSsrLGkrKyluW2ldPW9bYV07cmV0dXJuIG59O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5WZXJ0ZXhHZW9tZXRyeT12b2lkIDA7dmFyIGc9ZShcImVhcmN1dFwiKTt2YXIgdz1lKFwibWFydGluZXotcG9seWdvbi1jbGlwcGluZ1wiKTt2YXIgaT1lKFwiQG1hcGJveC9wb2x5bGFiZWxcIik7dmFyIG89ZShcInRocmVlXCIpO3ZhciBhPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIHM9ZnVuY3Rpb24odCl7bihlLHQpO2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7ZS5fc3Vic2FtcGxlVGhyZXNob2xkPS4wMDU7cmV0dXJuIGV9ZS5wcm90b3R5cGUuX2dldFBvbGVPZkluYWNjZXNzaWJpbGl0eTJkPWZ1bmN0aW9uKGUpe3ZhciB0PWkoW2VdLC4wMyk7cmV0dXJuIHR9O2UucHJvdG90eXBlLl9wcm9qZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fY3JlYXRlQ2FtZXJhKHQudXBWZWN0b3IoKS50b0FycmF5KCksdC51bnByb2plY3RTZk0oWzAsMF0sMCksdC51bnByb2plY3RTZk0oWzAsMF0sMTApKTtyZXR1cm4gdGhpcy5fZGV1bnByb2plY3QoZSx0LHIpfTtlLnByb3RvdHlwZS5fc3Vic2FtcGxlPWZ1bmN0aW9uKGUsdCl7aWYodD09PXZvaWQgMCl7dD10aGlzLl9zdWJzYW1wbGVUaHJlc2hvbGR9dmFyIHI9W107dmFyIG49ZS5sZW5ndGg7Zm9yKHZhciBpPTA7aTxuO2krKyl7dmFyIG89ZVtpXTt2YXIgYT1lWyhpKzEpJW5dO3IucHVzaChvKTt2YXIgcz1NYXRoLnNxcnQoTWF0aC5wb3coYVswXS1vWzBdLDIpK01hdGgucG93KGFbMV0tb1sxXSwyKSk7dmFyIHU9TWF0aC5mbG9vcihzL3QpO3ZhciBjPTEvKHUrMSk7Zm9yKHZhciBsPTE7bDw9dTtsKyspe3ZhciBoPWwqYzt2YXIgcD1bKDEtaCkqb1swXStoKmFbMF0sKDEtaCkqb1sxXStoKmFbMV1dO3IucHVzaChwKX19cmV0dXJuIHJ9O2UucHJvdG90eXBlLl90cmlhbmd1bGF0ZT1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1bZS5zbGljZSgwLC0xKV07Zm9yKHZhciBvPTAsYT1yIT1udWxsP3I6W107bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107aS5wdXNoKHMuc2xpY2UoMCwtMSkpfXZhciB1PXQuc2xpY2UoMCwtMSk7Zm9yKHZhciBjPTAsbD1uIT1udWxsP246W107YzxsLmxlbmd0aDtjKyspe3ZhciBoPWxbY107dT11LmNvbmNhdChoLnNsaWNlKDAsLTEpKX12YXIgcD1nLmRlZmF1bHQuZmxhdHRlbihpKTt2YXIgZj1nLmRlZmF1bHQocC52ZXJ0aWNlcyxwLmhvbGVzLHAuZGltZW5zaW9ucyk7dmFyIGQ9W107Zm9yKHZhciB2PTA7djxmLmxlbmd0aDsrK3Ype3ZhciBtPXVbZlt2XV07ZC5wdXNoKG1bMF0pO2QucHVzaChtWzFdKTtkLnB1c2gobVsyXSl9cmV0dXJuIGR9O2UucHJvdG90eXBlLl90cmlhbmd1bGF0ZVBhbm89ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVtdO3ZhciBpPTFlLTk7dmFyIG89Mzt2YXIgYT0zO2Zvcih2YXIgcz0wO3M8bztzKyspe2Zvcih2YXIgdT0wO3U8YTt1Kyspe3ZhciBjPXM9PT0wPy1pOmk7dmFyIGw9dT09PTA/LWk6aTt2YXIgaD1zL28rYzt2YXIgcD11L2ErbDt2YXIgZj0ocysxKS9vK2k7dmFyIGQ9KHUrMSkvYStpO3ZhciB2PVtbaCxwXSxbaCxkXSxbZixkXSxbZixwXSxbaCxwXV07dmFyIG09WygyKnMrMSkvKDIqbyksKDIqdSsxKS8oMiphKV07bi5wdXNoLmFwcGx5KG4sdGhpcy5fdHJpYW5ndWxhdGVTdWJhcmVhKGUsdCx2LG0scikpfX1yZXR1cm4gbn07ZS5wcm90b3R5cGUuX3VucHJvamVjdD1mdW5jdGlvbihlLHQscil7aWYocj09PXZvaWQgMCl7cj0yMDB9cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnVucHJvamVjdEJhc2ljKGUscil9KX07ZS5wcm90b3R5cGUuX2NyZWF0ZUNhbWVyYT1mdW5jdGlvbihlLHQscil7dmFyIG49bmV3IG8uQ2FtZXJhO24udXAuY29weSgobmV3IG8uVmVjdG9yMykuZnJvbUFycmF5KGUpKTtuLnBvc2l0aW9uLmNvcHkoKG5ldyBvLlZlY3RvcjMpLmZyb21BcnJheSh0KSk7bi5sb29rQXQoKG5ldyBvLlZlY3RvcjMpLmZyb21BcnJheShyKSk7bi51cGRhdGVNYXRyaXgoKTtuLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO3JldHVybiBufTtlLnByb3RvdHlwZS5fZGV1bnByb2plY3Q9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXt2YXIgdD1uLnVucHJvamVjdEJhc2ljKGUsMWU0KTt2YXIgcj1uZXcgby5WZWN0b3IzKHRbMF0sdFsxXSx0WzJdKS5hcHBseU1hdHJpeDQoaS5tYXRyaXhXb3JsZEludmVyc2UpO3JldHVybltyLngvci56LHIueS9yLnpdfSl9O2UucHJvdG90eXBlLl90cmlhbmd1bGF0ZVN1YmFyZWE9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz13LmludGVyc2VjdGlvbih4KFtlXSx0KSxbcl0pO2lmKCFvKXtyZXR1cm5bXX12YXIgYT1bXTt2YXIgcz10aGlzLl9zdWJzYW1wbGVUaHJlc2hvbGQ7dmFyIHU9dGhpcy5fY3JlYXRlQ2FtZXJhKGkudXBWZWN0b3IoKS50b0FycmF5KCksaS51bnByb2plY3RTZk0oWzAsMF0sMCksaS51bnByb2plY3RCYXNpYyhuLDEwKSk7Zm9yKHZhciBjPTAsbD1vO2M8bC5sZW5ndGg7YysrKXt2YXIgaD1sW2NdO3ZhciBwPXRoaXMuX3N1YnNhbXBsZShoWzBdLHMpO3ZhciBmPXRoaXMuX2RldW5wcm9qZWN0KHAsaSx1KTt2YXIgZD10aGlzLl91bnByb2plY3QocCxpKTt2YXIgdj1bXTt2YXIgbT1bXTtmb3IodmFyIGc9MTtnPGgubGVuZ3RoO2crKyl7dmFyIF89dGhpcy5fc3Vic2FtcGxlKGhbZ10scyk7dmFyIHk9dGhpcy5fZGV1bnByb2plY3QoXyxpLHUpO3ZhciBiPXRoaXMuX3VucHJvamVjdChfLGkpO3YucHVzaCh5KTttLnB1c2goYil9YS5wdXNoLmFwcGx5KGEsdGhpcy5fdHJpYW5ndWxhdGUoZixkLHYsbSkpfXJldHVybiBhfTtyZXR1cm4gZX0oYS5HZW9tZXRyeSk7ci5WZXJ0ZXhHZW9tZXRyeT1zO3IuZGVmYXVsdD1zfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEsXCJAbWFwYm94L3BvbHlsYWJlbFwiOjEsZWFyY3V0OjgsXCJtYXJ0aW5lei1wb2x5Z29uLWNsaXBwaW5nXCI6MjIsdGhyZWU6MjQyfV0sMzgxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DcmVhdGVIYW5kbGVyQmFzZT12b2lkIDA7dmFyIG89ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBzPWUoXCJyeGpzXCIpO3ZhciBpPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIGE9ZnVuY3Rpb24oYSl7bihlLGEpO2Z1bmN0aW9uIGUoZSx0LHIsbixpKXt2YXIgbz1hLmNhbGwodGhpcyxlLHQscixuKXx8dGhpcztvLl90YWdDcmVhdG9yPWk7by5fZ2VvbWV0cnlDcmVhdGVkJD1uZXcgcy5TdWJqZWN0O3JldHVybiBvfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImdlb21ldHJ5Q3JlYXRlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb21ldHJ5Q3JlYXRlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5fZW5hYmxlQ3JlYXRlKCk7dGhpcy5fY29udGFpbmVyLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbXBvbmVudC10YWctY3JlYXRlXCIpfTtlLnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjb21wb25lbnQtdGFnLWNyZWF0ZVwiKTt0aGlzLl9kaXNhYmxlQ3JlYXRlKCl9O2UucHJvdG90eXBlLl92YWxpZGF0ZUJhc2ljPWZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07dmFyIHI9ZVsxXTtyZXR1cm4gMDw9dCYmdDw9MSYmMDw9ciYmcjw9MX07ZS5wcm90b3R5cGUuX21vdXNlRXZlbnRUb0Jhc2ljJD1mdW5jdGlvbihlKXt2YXIgaT10aGlzO3JldHVybiBlLnBpcGUoby53aXRoTGF0ZXN0RnJvbSh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpLG8ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTtyZXR1cm4gaS5fbW91c2VFdmVudFRvQmFzaWModCxpLl9jb250YWluZXIuZWxlbWVudCxyLG4pfSkpfTtyZXR1cm4gZX0oaS5UYWdIYW5kbGVyQmFzZSk7ci5DcmVhdGVIYW5kbGVyQmFzZT1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzgyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DcmVhdGVQb2ludEhhbmRsZXI9dm9pZCAwO3ZhciBpPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbz1lKFwiLi4vLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBhPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc310LnByb3RvdHlwZS5fZW5hYmxlQ3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kZWZlclBpeGVscyh0aGlzLl9uYW1lLDQpO3RoaXMuX2dlb21ldHJ5Q3JlYXRlZFN1YnNjcmlwdGlvbj10aGlzLl9tb3VzZUV2ZW50VG9CYXNpYyQodGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5wcm94aW1hdGVDbGljayQpLnBpcGUoaS5maWx0ZXIodGhpcy5fdmFsaWRhdGVCYXNpYyksaS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvLlBvaW50R2VvbWV0cnkoZSl9KSkuc3Vic2NyaWJlKHRoaXMuX2dlb21ldHJ5Q3JlYXRlZCQpfTt0LnByb3RvdHlwZS5fZGlzYWJsZUNyZWF0ZT1mdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UudW5kZWZlclBpeGVscyh0aGlzLl9uYW1lKTt0aGlzLl9nZW9tZXRyeUNyZWF0ZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX07dC5wcm90b3R5cGUuX2dldE5hbWVFeHRlbnNpb249ZnVuY3Rpb24oKXtyZXR1cm5cImNyZWF0ZS1wb2ludFwifTtyZXR1cm4gdH0oby5DcmVhdGVIYW5kbGVyQmFzZSk7ci5DcmVhdGVQb2ludEhhbmRsZXI9YTtyLmRlZmF1bHQ9YX0se1wiLi4vLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSwzODM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkNyZWF0ZVBvaW50c0hhbmRsZXI9dm9pZCAwO3ZhciBpPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIG89ZnVuY3Rpb24oZSl7bih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gZSE9PW51bGwmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIl9jcmVhdGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YWdDcmVhdG9yLmNyZWF0ZVBvaW50cyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTt0LnByb3RvdHlwZS5fYWRkUG9pbnQ9ZnVuY3Rpb24oZSx0KXtlLmdlb21ldHJ5LmFkZFBvaW50MmQodCl9O3QucHJvdG90eXBlLl9nZXROYW1lRXh0ZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuXCJjcmVhdGUtcG9pbnRzXCJ9O3QucHJvdG90eXBlLl9zZXRWZXJ0ZXgyZD1mdW5jdGlvbihlLHQscil7ZS5nZW9tZXRyeS5zZXRQb2ludDJkKGUuZ2VvbWV0cnkucG9pbnRzLmxlbmd0aC0xLHQscil9O3JldHVybiB0fShpLkNyZWF0ZVZlcnRleEhhbmRsZXIpO3IuQ3JlYXRlUG9pbnRzSGFuZGxlcj1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTF9XSwzODQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkNyZWF0ZVBvbHlnb25IYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwiLi4vLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBvPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31PYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJfY3JlYXRlJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFnQ3JlYXRvci5jcmVhdGVQb2x5Z29uJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3QucHJvdG90eXBlLl9hZGRQb2ludD1mdW5jdGlvbihlLHQpe2UuYWRkUG9pbnQodCl9O3QucHJvdG90eXBlLl9nZXROYW1lRXh0ZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuXCJjcmVhdGUtcG9seWdvblwifTt0LnByb3RvdHlwZS5fc2V0VmVydGV4MmQ9ZnVuY3Rpb24oZSx0LHIpe2UuZ2VvbWV0cnkuc2V0VmVydGV4MmQoZS5nZW9tZXRyeS5wb2x5Z29uLmxlbmd0aC0yLHQscil9O3JldHVybiB0fShpLkNyZWF0ZVZlcnRleEhhbmRsZXIpO3IuQ3JlYXRlUG9seWdvbkhhbmRsZXI9bztyLmRlZmF1bHQ9b30se1wiLi4vLi4vLi4vQ29tcG9uZW50XCI6MjkxfV0sMzg1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DcmVhdGVSZWN0RHJhZ0hhbmRsZXI9dm9pZCAwO3ZhciBpPWUoXCJyeGpzXCIpO3ZhciBhPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbz1lKFwiLi4vLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBzPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc310LnByb3RvdHlwZS5fZW5hYmxlQ3JlYXRlPWZ1bmN0aW9uKCl7dmFyIG89dGhpczt0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmNsYWltTW91c2UodGhpcy5fbmFtZSwyKTt0aGlzLl9kZWxldGVTdWJzY3JpcHRpb249dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJC5waXBlKGEubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsfSksYS5za2lwKDEpKS5zdWJzY3JpYmUodGhpcy5fdGFnQ3JlYXRvci5kZWxldGUkKTt0aGlzLl9jcmVhdGVTdWJzY3JpcHRpb249dGhpcy5fbW91c2VFdmVudFRvQmFzaWMkKHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZmlsdGVyZWQkKHRoaXMuX25hbWUsdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZURyYWdTdGFydCQpKS5waXBlKGEuZmlsdGVyKHRoaXMuX3ZhbGlkYXRlQmFzaWMpKS5zdWJzY3JpYmUodGhpcy5fdGFnQ3JlYXRvci5jcmVhdGVSZWN0JCk7dGhpcy5faW5pdGlhbGl6ZUFuY2hvckluZGV4aW5nU3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKGEuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ZS5nZW9tZXRyeS5pbml0aWFsaXplQW5jaG9ySW5kZXhpbmcoKX0pO3ZhciB0PWkuY29tYmluZUxhdGVzdChpLm1lcmdlKHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZmlsdGVyZWQkKHRoaXMuX25hbWUsdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZU1vdmUkKSx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkJCh0aGlzLl9uYW1lLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZG9tTW91c2VNb3ZlJCkpLHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQpLnBpcGUoYS53aXRoTGF0ZXN0RnJvbSh0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKSxhLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT1lWzFdO3JldHVybiBvLl9tb3VzZUV2ZW50VG9CYXNpYyhyLG8uX2NvbnRhaW5lci5lbGVtZW50LG4saSl9KSk7dGhpcy5fc2V0VmVydGV4U3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKGEuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiEhZT9pLmNvbWJpbmVMYXRlc3QoaS5vZihlKSx0LG8uX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpOmkuZW1wdHkoKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdO3QuZ2VvbWV0cnkuc2V0T3Bwb3NpdGVWZXJ0ZXgyZChyLG4pfSk7dmFyIHI9dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZURyYWdFbmQkLnBpcGUoYS53aXRoTGF0ZXN0RnJvbSh0aGlzLl9tb3VzZUV2ZW50VG9CYXNpYyQodGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5maWx0ZXJlZCQodGhpcy5fbmFtZSx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLm1vdXNlRHJhZyQpKS5waXBlKGEuZmlsdGVyKHRoaXMuX3ZhbGlkYXRlQmFzaWMpKSxmdW5jdGlvbihlLHQpe3JldHVybiB0fSksYS5zaGFyZSgpKTt0aGlzLl9hZGRQb2ludFN1YnNjcmlwdGlvbj10aGlzLl90YWdDcmVhdG9yLnRhZyQucGlwZShhLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4hIWU/aS5jb21iaW5lTGF0ZXN0KGkub2YoZSkscik6aS5lbXB0eSgpfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTt2YXIgbj10Lmdlb21ldHJ5O2lmKCFuLnZhbGlkYXRlKHIpKXtyPW4uZ2V0Tm9uQWRqdXN0ZWRWZXJ0ZXgyZCgzKX10LmFkZFBvaW50KHIpfSk7dGhpcy5fZ2VvbWV0cnlDcmVhdGVkU3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKGEuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiEhZT9lLmNyZWF0ZWQkLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2VvbWV0cnl9KSk6aS5lbXB0eSgpfSkpLnN1YnNjcmliZSh0aGlzLl9nZW9tZXRyeUNyZWF0ZWQkKX07dC5wcm90b3R5cGUuX2Rpc2FibGVDcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLnVuY2xhaW1Nb3VzZSh0aGlzLl9uYW1lKTt0aGlzLl90YWdDcmVhdG9yLmRlbGV0ZSQubmV4dChudWxsKTt0aGlzLl9hZGRQb2ludFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NyZWF0ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2RlbGV0ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2dlb21ldHJ5Q3JlYXRlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2luaXRpYWxpemVBbmNob3JJbmRleGluZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NldFZlcnRleFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTt0LnByb3RvdHlwZS5fZ2V0TmFtZUV4dGVuc2lvbj1mdW5jdGlvbigpe3JldHVyblwiY3JlYXRlLXJlY3QtZHJhZ1wifTtyZXR1cm4gdH0oby5DcmVhdGVIYW5kbGVyQmFzZSk7ci5DcmVhdGVSZWN0RHJhZ0hhbmRsZXI9cztyLmRlZmF1bHQ9c30se1wiLi4vLi4vLi4vQ29tcG9uZW50XCI6MjkxLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDM4NjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQ3JlYXRlUmVjdEhhbmRsZXI9dm9pZCAwO3ZhciBpPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgbz1lKFwiLi4vLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBhPWZ1bmN0aW9uKGUpe24odCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31PYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJfY3JlYXRlJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFnQ3JlYXRvci5jcmVhdGVSZWN0JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3QucHJvdG90eXBlLl9hZGRQb2ludD1mdW5jdGlvbihlLHQpe3ZhciByPWUuZ2VvbWV0cnk7aWYoIXIudmFsaWRhdGUodCkpe3Q9ci5nZXROb25BZGp1c3RlZFZlcnRleDJkKDMpfWUuYWRkUG9pbnQodCl9O3QucHJvdG90eXBlLl9lbmFibGU9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5fZW5hYmxlLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZUFuY2hvckluZGV4aW5nU3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKGkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ZS5nZW9tZXRyeS5pbml0aWFsaXplQW5jaG9ySW5kZXhpbmcoKX0pfTt0LnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLl9kaXNhYmxlLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZUFuY2hvckluZGV4aW5nU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O3QucHJvdG90eXBlLl9nZXROYW1lRXh0ZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuXCJjcmVhdGUtcmVjdFwifTt0LnByb3RvdHlwZS5fc2V0VmVydGV4MmQ9ZnVuY3Rpb24oZSx0LHIpe2UuZ2VvbWV0cnkuc2V0T3Bwb3NpdGVWZXJ0ZXgyZCh0LHIpfTtyZXR1cm4gdH0oby5DcmVhdGVWZXJ0ZXhIYW5kbGVyKTtyLkNyZWF0ZVJlY3RIYW5kbGVyPWE7ci5kZWZhdWx0PWF9LHtcIi4uLy4uLy4uL0NvbXBvbmVudFwiOjI5MSxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzg3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DcmVhdGVWZXJ0ZXhIYW5kbGVyPXZvaWQgMDt2YXIgaT1lKFwicnhqc1wiKTt2YXIgbz1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGE9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgcz1mdW5jdGlvbihlKXtuKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiBlIT09bnVsbCYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9dC5wcm90b3R5cGUuX2VuYWJsZUNyZWF0ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kZWZlclBpeGVscyh0aGlzLl9uYW1lLDQpO3ZhciBlPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQucGlwZShvLm1hcChmdW5jdGlvbigpe30pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX2RlbGV0ZVN1YnNjcmlwdGlvbj1lLnBpcGUoby5za2lwKDEpKS5zdWJzY3JpYmUodGhpcy5fdGFnQ3JlYXRvci5kZWxldGUkKTt2YXIgdD10aGlzLl9tb3VzZUV2ZW50VG9CYXNpYyQodGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5wcm94aW1hdGVDbGljayQpLnBpcGUoby5zaGFyZSgpKTt0aGlzLl9jcmVhdGVTdWJzY3JpcHRpb249ZS5waXBlKG8uc3dpdGNoTWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHQucGlwZShvLmZpbHRlcihhLl92YWxpZGF0ZUJhc2ljKSxvLnRha2UoMSkpfSkpLnN1YnNjcmliZSh0aGlzLl9jcmVhdGUkKTt0aGlzLl9zZXRWZXJ0ZXhTdWJzY3JpcHRpb249dGhpcy5fdGFnQ3JlYXRvci50YWckLnBpcGUoby5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuISFlP2kuY29tYmluZUxhdGVzdChpLm9mKGUpLGkubWVyZ2UoYS5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZU1vdmUkLGEuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZG9tTW91c2VNb3ZlJCksYS5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCxhLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRUcmFuc2Zvcm0kKTppLmVtcHR5KCl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXSxpPWVbM107dmFyIG89YS5fbW91c2VFdmVudFRvQmFzaWMocixhLl9jb250YWluZXIuZWxlbWVudCxuLGkpO2EuX3NldFZlcnRleDJkKHQsbyxpKX0pO3RoaXMuX2FkZFBvaW50U3Vic2NyaXB0aW9uPXRoaXMuX3RhZ0NyZWF0b3IudGFnJC5waXBlKG8uc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiEhZT9pLmNvbWJpbmVMYXRlc3QoaS5vZihlKSx0KTppLmVtcHR5KCl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO2EuX2FkZFBvaW50KHQscil9KTt0aGlzLl9nZW9tZXRyeUNyZWF0ZVN1YnNjcmlwdGlvbj10aGlzLl90YWdDcmVhdG9yLnRhZyQucGlwZShvLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4hIWU/ZS5jcmVhdGVkJC5waXBlKG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdlb21ldHJ5fSkpOmkuZW1wdHkoKX0pKS5zdWJzY3JpYmUodGhpcy5fZ2VvbWV0cnlDcmVhdGVkJCl9O3QucHJvdG90eXBlLl9kaXNhYmxlQ3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS51bmRlZmVyUGl4ZWxzKHRoaXMuX25hbWUpO3RoaXMuX3RhZ0NyZWF0b3IuZGVsZXRlJC5uZXh0KG51bGwpO3RoaXMuX2FkZFBvaW50U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fY3JlYXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZGVsZXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZ2VvbWV0cnlDcmVhdGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zZXRWZXJ0ZXhTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX07cmV0dXJuIHR9KGEuQ3JlYXRlSGFuZGxlckJhc2UpO3IuQ3JlYXRlVmVydGV4SGFuZGxlcj1zO3IuZGVmYXVsdD1zfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzg4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5FZGl0VmVydGV4SGFuZGxlcj12b2lkIDA7dmFyIGk9ZShcInJ4anNcIik7dmFyIG89ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciB1PWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIGE9ZnVuY3Rpb24oYSl7bihlLGEpO2Z1bmN0aW9uIGUoZSx0LHIsbixpKXt2YXIgbz1hLmNhbGwodGhpcyxlLHQscixuKXx8dGhpcztvLl90YWdTZXQ9aTtyZXR1cm4gb31lLnByb3RvdHlwZS5fZW5hYmxlPWZ1bmN0aW9uKCl7dmFyIHM9dGhpczt2YXIgZT10aGlzLl90YWdTZXQuY2hhbmdlZCQucGlwZShvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBbGwoKX0pLG8uc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBpLmZyb20oZSkucGlwZShvLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmludGVyYWN0JH0pKX0pLG8uc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBpLmNvbmNhdChpLm9mKGUpLHMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZG9jdW1lbnRNb3VzZVVwJC5waXBlKG8ubWFwKGZ1bmN0aW9uKCl7cmV0dXJue29mZnNldFg6MCxvZmZzZXRZOjAsb3BlcmF0aW9uOnUuVGFnT3BlcmF0aW9uLk5vbmUsdGFnOm51bGx9fSksby5maXJzdCgpKSl9KSxvLnNoYXJlKCkpO3ZhciB0PWkubWVyZ2UodGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZU1vdmUkLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZG9tTW91c2VNb3ZlJCkucGlwZShvLnNoYXJlKCkpO3RoaXMuX2NsYWltTW91c2VTdWJzY3JpcHRpb249ZS5waXBlKG8uc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiEhZS50YWc/cy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kb21Nb3VzZURyYWdTdGFydCQ6aS5lbXB0eSgpfSkpLnN1YnNjcmliZShmdW5jdGlvbigpe3MuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuY2xhaW1Nb3VzZShzLl9uYW1lLDMpfSk7dGhpcy5fY3Vyc29yU3Vic2NyaXB0aW9uPWUucGlwZShvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJzb3J9KSxvLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1bXCJjcm9zc2hhaXJcIixcIm1vdmVcIixcIm5lc3ctcmVzaXplXCIsXCJud3NlLXJlc2l6ZVwiXTtmb3IodmFyIHI9MCxuPXQ7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07cy5fY29udGFpbmVyLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBvbmVudC10YWctZWRpdC1cIitpKX1pZighIWUpe3MuX2NvbnRhaW5lci5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb21wb25lbnQtdGFnLWVkaXQtXCIrZSl9fSk7dGhpcy5fdW5jbGFpbU1vdXNlU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZmlsdGVyZWQkKHRoaXMuX25hbWUsdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5kb21Nb3VzZURyYWdFbmQkKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7cy5fY29udGFpbmVyLm1vdXNlU2VydmljZS51bmNsYWltTW91c2Uocy5fbmFtZSl9KTt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbj1lLnBpcGUoby5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnRhZz9zLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmRvY3VtZW50TW91c2VNb3ZlJDppLmVtcHR5KCl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pO3RoaXMuX3VwZGF0ZUdlb21ldHJ5U3Vic2NyaXB0aW9uPWUucGlwZShvLnN3aXRjaE1hcChmdW5jdGlvbihlKXtpZihlLm9wZXJhdGlvbj09PXUuVGFnT3BlcmF0aW9uLk5vbmV8fCFlLnRhZyl7cmV0dXJuIGkuZW1wdHkoKX12YXIgdD1zLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmZpbHRlcmVkJChzLl9uYW1lLHMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuZG9tTW91c2VEcmFnJCkucGlwZShvLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gcy5fdmlld3BvcnRDb29yZHMuaW5zaWRlRWxlbWVudChlLHMuX2NvbnRhaW5lci5lbGVtZW50KX0pKTtyZXR1cm4gaS5jb21iaW5lTGF0ZXN0KHQscy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCkucGlwZShvLndpdGhMYXRlc3RGcm9tKGkub2YoZSkscy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCxmdW5jdGlvbihlLHQscil7dmFyIG49ZVswXSxpPWVbMV07cmV0dXJuW24saSx0LHJdfSkpfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl0saT1lWzNdO3ZhciBvPXMuX21vdXNlRXZlbnRUb0Jhc2ljKHQscy5fY29udGFpbmVyLmVsZW1lbnQscixpLG4ub2Zmc2V0WCxuLm9mZnNldFkpO3ZhciBhPW4udGFnLmdlb21ldHJ5O2lmKG4ub3BlcmF0aW9uPT09dS5UYWdPcGVyYXRpb24uQ2VudHJvaWQpe2Euc2V0Q2VudHJvaWQyZChvLGkpfWVsc2UgaWYobi5vcGVyYXRpb249PT11LlRhZ09wZXJhdGlvbi5WZXJ0ZXgpe2Euc2V0VmVydGV4MmQobi52ZXJ0ZXhJbmRleCxvLGkpfX0pfTtlLnByb3RvdHlwZS5fZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuX2NsYWltTW91c2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9jdXJzb3JTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9wcmV2ZW50RGVmYXVsdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3VuY2xhaW1Nb3VzZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3VwZGF0ZUdlb21ldHJ5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9nZXROYW1lRXh0ZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuXCJlZGl0LXZlcnRleFwifTtyZXR1cm4gZX0odS5UYWdIYW5kbGVyQmFzZSk7ci5FZGl0VmVydGV4SGFuZGxlcj1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sMzg5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5UYWdIYW5kbGVyQmFzZT12b2lkIDA7dmFyIGk9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgbz1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHQscil8fHRoaXM7aS5fbmFtZT1pLl9jb21wb25lbnQubmFtZStcIi1cIitpLl9nZXROYW1lRXh0ZW5zaW9uKCk7aS5fdmlld3BvcnRDb29yZHM9bjtyZXR1cm4gaX1lLnByb3RvdHlwZS5fZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm57fX07ZS5wcm90b3R5cGUuX21vdXNlRXZlbnRUb0Jhc2ljPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtpPWkhPW51bGw/aTowO289byE9bnVsbD9vOjA7dmFyIGE9dGhpcy5fdmlld3BvcnRDb29yZHMuY2FudmFzUG9zaXRpb24oZSx0KSxzPWFbMF0sdT1hWzFdO3ZhciBjPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1RvQmFzaWMocy1pLHUtbyx0LG4sci5wZXJzcGVjdGl2ZSk7cmV0dXJuIGN9O3JldHVybiBlfShpLkhhbmRsZXJCYXNlKTtyLlRhZ0hhbmRsZXJCYXNlPW87ci5kZWZhdWx0PW99LHtcIi4uLy4uLy4uL0NvbXBvbmVudFwiOjI5MX1dLDM5MDpbZnVuY3Rpb24oZSx0LHIpe2FyZ3VtZW50c1s0XVszMDVdWzBdLmFwcGx5KHIsYXJndW1lbnRzKX0se2R1cDozMDV9XSwzOTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQ3JlYXRlVGFnPXZvaWQgMDt2YXIgbj1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG89ZShcInRocmVlXCIpO3ZhciBpPWUoXCJyeGpzXCIpO3ZhciBhPWUoXCIuLi8uLi8uLi9HZW9cIik7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj10aGlzO3RoaXMuX2dlb21ldHJ5PWU7dGhpcy5fdHJhbnNmb3JtPXQ7dGhpcy5fdmlld3BvcnRDb29yZHM9ISFyP3I6bmV3IGEuVmlld3BvcnRDb29yZHM7dGhpcy5fYWJvcnRlZCQ9bmV3IGkuU3ViamVjdDt0aGlzLl9jcmVhdGVkJD1uZXcgaS5TdWJqZWN0O3RoaXMuX2dsT2JqZWN0c0NoYW5nZWQkPW5ldyBpLlN1YmplY3Q7dGhpcy5fZ2VvbWV0cnlDaGFuZ2VkU3Vic2NyaXB0aW9uPXRoaXMuX2dlb21ldHJ5LmNoYW5nZWQkLnN1YnNjcmliZShmdW5jdGlvbigpe24uX29uR2VvbWV0cnlDaGFuZ2VkKCk7bi5fZ2xPYmplY3RzQ2hhbmdlZCQubmV4dChuKX0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImdlb21ldHJ5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZW9tZXRyeX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImdsT2JqZWN0c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2xPYmplY3RzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYWJvcnRlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Fib3J0ZWQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY3JlYXRlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NyZWF0ZWQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZ2xPYmplY3RzQ2hhbmdlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dsT2JqZWN0c0NoYW5nZWQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZ2VvbWV0cnlDaGFuZ2VkJFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9nZW9tZXRyeS5jaGFuZ2VkJC5waXBlKG4ubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KSl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZ2VvbWV0cnlDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9jYW52YXNUb1RyYW5zZm9ybT1mdW5jdGlvbihlKXt2YXIgdD1NYXRoLnJvdW5kKGVbMF0pO3ZhciByPU1hdGgucm91bmQoZVsxXSk7dmFyIG49XCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSB0cmFuc2xhdGUoXCIrdCtcInB4LFwiK3IrXCJweClcIjtyZXR1cm4gbn07ZS5wcm90b3R5cGUuX2NvbG9yVG9CYWNrZ3JvdW5kPWZ1bmN0aW9uKGUpe3JldHVyblwiI1wiKyhcIjAwMDAwMFwiK2UudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpfTtlLnByb3RvdHlwZS5fY3JlYXRlT3V0aW5lPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZ2V0TGluZVBvc2l0aW9ucyhlKTt2YXIgbj1uZXcgby5CdWZmZXJHZW9tZXRyeTtuLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IG8uQnVmZmVyQXR0cmlidXRlKHIsMykpO3ZhciBpPW5ldyBvLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjp0LGxpbmV3aWR0aDoxfSk7cmV0dXJuIG5ldyBvLkxpbmUobixpKX07ZS5wcm90b3R5cGUuX2Rpc3Bvc2VMaW5lPWZ1bmN0aW9uKGUpe2lmKGU9PW51bGwpe3JldHVybn1lLmdlb21ldHJ5LmRpc3Bvc2UoKTtlLm1hdGVyaWFsLmRpc3Bvc2UoKX07ZS5wcm90b3R5cGUuX2dldExpbmVQb3NpdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7dmFyIHI9bmV3IEZsb2F0MzJBcnJheSh0KjMpO2Zvcih2YXIgbj0wO248dDsrK24pe3ZhciBpPTMqbjt2YXIgbz1lW25dO3JbaV09b1swXTtyW2krMV09b1sxXTtyW2krMl09b1syXX1yZXR1cm4gcn07cmV0dXJuIGV9KCk7ci5DcmVhdGVUYWc9cztyLmRlZmF1bHQ9c30se1wiLi4vLi4vLi4vR2VvXCI6Mjk0LHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSx0aHJlZToyNDJ9XSwzOTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkV4dHJlbWVQb2ludENyZWF0ZVRhZz12b2lkIDA7dmFyIHk9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBhPWUoXCIuLi9UYWdcIik7dmFyIGk9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgbz1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHIsbil8fHRoaXM7aS5fb3B0aW9ucz17Y29sb3I6dC5jb2xvcj09bnVsbD8xNjc3NzIxNTp0LmNvbG9yLGluZGljYXRlQ29tcGxldGVyOnQuaW5kaWNhdGVDb21wbGV0ZXI9PW51bGw/dHJ1ZTp0LmluZGljYXRlQ29tcGxldGVyfTtpLl9yZWN0R2VvbWV0cnk9bmV3IGEuUmVjdEdlb21ldHJ5KGkuX2dlb21ldHJ5LmdldFJlY3QyZChyKSk7aS5fY3JlYXRlR2xPYmplY3RzKCk7cmV0dXJuIGl9ZS5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5fZ2VvbWV0cnkucG9pbnRzLmxlbmd0aDwzKXtyZXR1cm59dGhpcy5fZ2VvbWV0cnkucmVtb3ZlUG9pbnQyZCh0aGlzLl9nZW9tZXRyeS5wb2ludHMubGVuZ3RoLTEpO3RoaXMuX2NyZWF0ZWQkLm5leHQodGhpcyl9O2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtvLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7dGhpcy5fZGlzcG9zZU9iamVjdHMoKX07ZS5wcm90b3R5cGUuZ2V0RE9NT2JqZWN0cz1mdW5jdGlvbihwLGUpe3ZhciBmPXRoaXM7dmFyIGQ9e29mZnNldEhlaWdodDplLmhlaWdodCxvZmZzZXRXaWR0aDplLndpZHRofTt2YXIgdj1bXTt2YXIgbT10aGlzLl9nZW9tZXRyeS5nZXRQb2ludHMyZCgpO3ZhciBnPW0ubGVuZ3RoO3ZhciB0PWZ1bmN0aW9uKGUpe3ZhciB0PWU7dmFyIHI9bVtlXSxuPXJbMF0saT1yWzFdO3ZhciBvPV8uX3ZpZXdwb3J0Q29vcmRzLmJhc2ljVG9DYW52YXNTYWZlKG4saSxkLF8uX3RyYW5zZm9ybSxwKTtpZighbyl7cmV0dXJuXCJjb250aW51ZVwifXZhciBhPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7Zi5fYWJvcnRlZCQubmV4dChmKX07dmFyIHM9ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTtmLl9nZW9tZXRyeS5yZW1vdmVQb2ludDJkKHQpfTt2YXIgdT1fLl9jYW52YXNUb1RyYW5zZm9ybShvKTt2YXIgYz17b25jbGljazplPT09MCYmZzwzP2E6cyxzdHlsZTp7dHJhbnNmb3JtOnV9fTt2LnB1c2goeS5oKFwiZGl2LlRhZ0ludGVyYWN0b3JcIixjLFtdKSk7dmFyIGw9Xy5fY29sb3JUb0JhY2tncm91bmQoXy5fb3B0aW9ucy5jb2xvcik7dmFyIGg9e3N0eWxlOntiYWNrZ3JvdW5kOmwsdHJhbnNmb3JtOnV9fTt2LnB1c2goeS5oKFwiZGl2LlRhZ1ZlcnRleFwiLGgsW10pKX07dmFyIF89dGhpcztmb3IodmFyIHI9MDtyPGctMTtyKyspe3Qocil9aWYoZz4yJiZ0aGlzLl9vcHRpb25zLmluZGljYXRlQ29tcGxldGVyPT09dHJ1ZSl7dmFyIG49dGhpcy5fZ2VvbWV0cnkuZ2V0Q2VudHJvaWQyZCh0aGlzLl90cmFuc2Zvcm0pLGk9blswXSxvPW5bMV07dmFyIGE9dGhpcy5fdmlld3BvcnRDb29yZHMuYmFzaWNUb0NhbnZhc1NhZmUoaSxvLGQsdGhpcy5fdHJhbnNmb3JtLHApO2lmKCEhYSl7dmFyIHM9ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTtmLl9nZW9tZXRyeS5yZW1vdmVQb2ludDJkKGYuX2dlb21ldHJ5LnBvaW50cy5sZW5ndGgtMSk7Zi5fY3JlYXRlZCQubmV4dChmKX07dmFyIHU9dGhpcy5fY2FudmFzVG9UcmFuc2Zvcm0oYSk7dmFyIGM9e29uY2xpY2s6cyxzdHlsZTp7dHJhbnNmb3JtOnV9fTt2LnB1c2goeS5oKFwiZGl2LlRhZ0NvbXBsZXRlci5UYWdMYXJnZXJcIixjLFtdKSk7dmFyIGw9e3N0eWxlOntiYWNrZ3JvdW5kOnRoaXMuX2NvbG9yVG9CYWNrZ3JvdW5kKHRoaXMuX29wdGlvbnMuY29sb3IpLHRyYW5zZm9ybTp1fX07di5wdXNoKHkuaChcImRpdi5UYWdWZXJ0ZXguVGFnTGFyZ2VyXCIsbCxbXSkpO3ZhciBoPXtzdHlsZTp7dHJhbnNmb3JtOnV9fTt2LnB1c2goeS5oKFwiZGl2LlRhZ0RvdFwiLGgsW10pKX19cmV0dXJuIHZ9O2UucHJvdG90eXBlLl9vbkdlb21ldHJ5Q2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2VPYmplY3RzKCk7dGhpcy5fcmVjdEdlb21ldHJ5PW5ldyBhLlJlY3RHZW9tZXRyeSh0aGlzLl9nZW9tZXRyeS5nZXRSZWN0MmQodGhpcy5fdHJhbnNmb3JtKSk7dGhpcy5fY3JlYXRlR2xPYmplY3RzKCl9O2UucHJvdG90eXBlLl9jcmVhdGVHbE9iamVjdHM9ZnVuY3Rpb24oKXt0aGlzLl9nbE9iamVjdHM9W107dmFyIGU9dGhpcy5fcmVjdEdlb21ldHJ5LmdldFBvaW50czNkKHRoaXMuX3RyYW5zZm9ybSk7dGhpcy5fb3V0bGluZT10aGlzLl9jcmVhdGVPdXRpbmUoZSx0aGlzLl9vcHRpb25zLmNvbG9yKTt0aGlzLl9nbE9iamVjdHMucHVzaCh0aGlzLl9vdXRsaW5lKX07ZS5wcm90b3R5cGUuX2Rpc3Bvc2VPYmplY3RzPWZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zZUxpbmUodGhpcy5fb3V0bGluZSk7dGhpcy5fb3V0bGluZT1udWxsO3RoaXMuX2dsT2JqZWN0cz1udWxsfTtyZXR1cm4gZX0oaS5DcmVhdGVUYWcpO3IuRXh0cmVtZVBvaW50Q3JlYXRlVGFnPW99LHtcIi4uLy4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4uL1RhZ1wiOjM2NixcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzkzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5FeHRyZW1lUG9pbnRSZW5kZXJUYWc9dm9pZCAwO3ZhciBvPWUoXCJ0aHJlZVwiKTt2YXIgeT1lKFwidmlydHVhbC1kb21cIik7dmFyIGI9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgbj1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUsdCl8fHRoaXM7ci5fcmVjdEdlb21ldHJ5PW5ldyBiLlJlY3RHZW9tZXRyeShyLl90YWcuZ2VvbWV0cnkuZ2V0UmVjdDJkKHQpKTtyLl9maWxsPSF0LmdwYW5vP3IuX2NyZWF0ZUZpbGwoKTpudWxsO3IuX291dGxpbmU9ci5fdGFnLmxpbmVXaWR0aD49MT9yLl9jcmVhdGVPdXRsaW5lKCk6bnVsbDtyZXR1cm4gcn1lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7bi5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO3RoaXMuX2Rpc3Bvc2VGaWxsKCk7dGhpcy5fZGlzcG9zZU91dGxpbmUoKX07ZS5wcm90b3R5cGUuZ2V0RE9NT2JqZWN0cz1mdW5jdGlvbihlLHQscil7dmFyIG49W107dmFyIGk9e29mZnNldEhlaWdodDpyLmhlaWdodCxvZmZzZXRXaWR0aDpyLndpZHRofTtpZighdGhpcy5fdGFnLmVkaXRhYmxlKXtyZXR1cm4gbn12YXIgbz10aGlzLl9jb2xvclRvQ3NzKHRoaXMuX3RhZy5saW5lQ29sb3IpO3ZhciBhPXRoaXMuX3RhZy5nZW9tZXRyeS5nZXRQb2ludHMyZCgpO2Zvcih2YXIgcz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgdT1hW3NdLGM9dVswXSxsPXVbMV07dmFyIGg9dGhpcy5fdmlld3BvcnRDb29yZHMuYmFzaWNUb0NhbnZhc1NhZmUoYyxsLGksdGhpcy5fdHJhbnNmb3JtLHQpO2lmKGg9PW51bGwpe2NvbnRpbnVlfXZhciBwPVwiY3Jvc3NoYWlyXCI7dmFyIGY9dGhpcy5faW50ZXJhY3QoYi5UYWdPcGVyYXRpb24uVmVydGV4LHAscyk7dmFyIGQ9TWF0aC5yb3VuZChoWzBdKTt2YXIgdj1NYXRoLnJvdW5kKGhbMV0pO3ZhciBtPVwidHJhbnNsYXRlKC01MCUsIC01MCUpIHRyYW5zbGF0ZShcIitkK1wicHgsXCIrditcInB4KVwiO3ZhciBnPXtvbm1vdXNlZG93bjpmLHN0eWxlOntiYWNrZ3JvdW5kOm8sdHJhbnNmb3JtOm0sY3Vyc29yOnB9fTtuLnB1c2goeS5oKFwiZGl2LlRhZ1Jlc2l6ZXJcIixnLFtdKSk7aWYoIXRoaXMuX3RhZy5pbmRpY2F0ZVZlcnRpY2VzKXtjb250aW51ZX12YXIgXz17c3R5bGU6e2JhY2tncm91bmQ6byx0cmFuc2Zvcm06bX19O24ucHVzaCh5LmgoXCJkaXYuVGFnVmVydGV4XCIsXyxbXSkpfXJldHVybiBufTtlLnByb3RvdHlwZS5nZXRHTE9iamVjdHM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtpZih0aGlzLl9maWxsIT1udWxsKXtlLnB1c2godGhpcy5fZmlsbCl9aWYodGhpcy5fb3V0bGluZSE9bnVsbCl7ZS5wdXNoKHRoaXMuX291dGxpbmUpfXJldHVybiBlfTtlLnByb3RvdHlwZS5nZXRSZXRyaWV2YWJsZU9iamVjdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbCE9bnVsbD9bdGhpcy5fZmlsbF06W119O2UucHJvdG90eXBlLl9vbkdlb21ldHJ5Q2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3JlY3RHZW9tZXRyeT1uZXcgYi5SZWN0R2VvbWV0cnkodGhpcy5fdGFnLmdlb21ldHJ5LmdldFJlY3QyZCh0aGlzLl90cmFuc2Zvcm0pKTtpZih0aGlzLl9maWxsIT1udWxsKXt0aGlzLl91cGRhdGVGaWxsR2VvbWV0cnkoKX1pZih0aGlzLl9vdXRsaW5lIT1udWxsKXt0aGlzLl91cGRhdGVPdWxpbmVHZW9tZXRyeSgpfX07ZS5wcm90b3R5cGUuX29uVGFnQ2hhbmdlZD1mdW5jdGlvbigpe3ZhciBlPWZhbHNlO2lmKHRoaXMuX2ZpbGwhPW51bGwpe3RoaXMuX3VwZGF0ZUZpbGxNYXRlcmlhbCh0aGlzLl9maWxsLm1hdGVyaWFsKX1pZih0aGlzLl9vdXRsaW5lPT1udWxsKXtpZih0aGlzLl90YWcubGluZVdpZHRoPj0xKXt0aGlzLl9vdXRsaW5lPXRoaXMuX2NyZWF0ZU91dGxpbmUoKTtlPXRydWV9fWVsc2V7dGhpcy5fdXBkYXRlT3V0bGluZU1hdGVyaWFsKCl9cmV0dXJuIGV9O2UucHJvdG90eXBlLl9nZXRQb2ludHMzZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWN0R2VvbWV0cnkuZ2V0UG9pbnRzM2QodGhpcy5fdHJhbnNmb3JtKX07ZS5wcm90b3R5cGUuX2dldFRyaWFuZ2xlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWN0R2VvbWV0cnkuZ2V0VHJpYW5nbGVzM2QodGhpcy5fdHJhbnNmb3JtKX07ZS5wcm90b3R5cGUuX3VwZGF0ZUZpbGxNYXRlcmlhbD1mdW5jdGlvbihlKXtlLmNvbG9yPW5ldyBvLkNvbG9yKHRoaXMuX3RhZy5maWxsQ29sb3IpO2Uub3BhY2l0eT10aGlzLl90YWcuZmlsbE9wYWNpdHk7ZS5uZWVkc1VwZGF0ZT10cnVlfTtlLnByb3RvdHlwZS5fdXBkYXRlTGluZUJhc2ljTWF0ZXJpYWw9ZnVuY3Rpb24oZSl7ZS5jb2xvcj1uZXcgby5Db2xvcih0aGlzLl90YWcubGluZUNvbG9yKTtlLmxpbmV3aWR0aD1NYXRoLm1heCh0aGlzLl90YWcubGluZVdpZHRoLDEpO2UudmlzaWJsZT10aGlzLl90YWcubGluZVdpZHRoPj0xJiZ0aGlzLl90YWcubGluZU9wYWNpdHk+MDtlLm9wYWNpdHk9dGhpcy5fdGFnLmxpbmVPcGFjaXR5O2UudHJhbnNwYXJlbnQ9dGhpcy5fdGFnLmxpbmVPcGFjaXR5PDE7ZS5uZWVkc1VwZGF0ZT10cnVlfTtlLnByb3RvdHlwZS5fdXBkYXRlT3V0bGluZU1hdGVyaWFsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fb3V0bGluZS5tYXRlcmlhbDt0aGlzLl91cGRhdGVMaW5lQmFzaWNNYXRlcmlhbChlKX07cmV0dXJuIGV9KGIuT3V0bGluZVJlbmRlclRhZ0Jhc2UpO3IuRXh0cmVtZVBvaW50UmVuZGVyVGFnPW47ci5kZWZhdWx0PW59LHtcIi4uLy4uLy4uL0NvbXBvbmVudFwiOjI5MSx0aHJlZToyNDIsXCJ2aXJ0dWFsLWRvbVwiOjI0N31dLDM5NDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuRXh0cmVtZVBvaW50VGFnPXZvaWQgMDt2YXIgaT1lKFwiLi4vLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBvPWZ1bmN0aW9uKGkpe24oZSxpKTtmdW5jdGlvbiBlKGUsdCxyKXt2YXIgbj1pLmNhbGwodGhpcyxlLHQpfHx0aGlzO3I9ISFyP3I6e307bi5fZWRpdGFibGU9ci5lZGl0YWJsZT09bnVsbD9mYWxzZTpyLmVkaXRhYmxlO24uX2ZpbGxDb2xvcj1yLmZpbGxDb2xvcj09bnVsbD8xNjc3NzIxNTpyLmZpbGxDb2xvcjtuLl9maWxsT3BhY2l0eT1yLmZpbGxPcGFjaXR5PT1udWxsPzA6ci5maWxsT3BhY2l0eTtuLl9pbmRpY2F0ZVZlcnRpY2VzPXIuaW5kaWNhdGVWZXJ0aWNlcz09bnVsbD90cnVlOnIuaW5kaWNhdGVWZXJ0aWNlcztuLl9saW5lQ29sb3I9ci5saW5lQ29sb3I9PW51bGw/MTY3NzcyMTU6ci5saW5lQ29sb3I7bi5fbGluZU9wYWNpdHk9ci5saW5lT3BhY2l0eT09bnVsbD8xOnIubGluZU9wYWNpdHk7bi5fbGluZVdpZHRoPXIubGluZVdpZHRoPT1udWxsPzE6ci5saW5lV2lkdGg7cmV0dXJuIG59T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZWRpdGFibGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VkaXRhYmxlfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGU9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZmlsbENvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsQ29sb3J9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9maWxsQ29sb3I9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZmlsbE9wYWNpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGxPcGFjaXR5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fZmlsbE9wYWNpdHk9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZ2VvbWV0cnlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb21ldHJ5fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaW5kaWNhdGVWZXJ0aWNlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5kaWNhdGVWZXJ0aWNlc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2luZGljYXRlVmVydGljZXM9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGluZUNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lQ29sb3J9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9saW5lQ29sb3I9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGluZU9wYWNpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVPcGFjaXR5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbGluZU9wYWNpdHk9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGluZVdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lV2lkdGh9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9saW5lV2lkdGg9ZTt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZT1lLmVkaXRhYmxlPT1udWxsP3RoaXMuX2VkaXRhYmxlOmUuZWRpdGFibGU7dGhpcy5faW5kaWNhdGVWZXJ0aWNlcz1lLmluZGljYXRlVmVydGljZXM9PW51bGw/dGhpcy5faW5kaWNhdGVWZXJ0aWNlczplLmluZGljYXRlVmVydGljZXM7dGhpcy5fbGluZUNvbG9yPWUubGluZUNvbG9yPT1udWxsP3RoaXMuX2xpbmVDb2xvcjplLmxpbmVDb2xvcjt0aGlzLl9saW5lV2lkdGg9ZS5saW5lV2lkdGg9PW51bGw/dGhpcy5fbGluZVdpZHRoOmUubGluZVdpZHRoO3RoaXMuX2ZpbGxDb2xvcj1lLmZpbGxDb2xvcj09bnVsbD90aGlzLl9maWxsQ29sb3I6ZS5maWxsQ29sb3I7dGhpcy5fZmlsbE9wYWNpdHk9ZS5maWxsT3BhY2l0eT09bnVsbD90aGlzLl9maWxsT3BhY2l0eTplLmZpbGxPcGFjaXR5O3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9O3JldHVybiBlfShpLlRhZyk7ci5FeHRyZW1lUG9pbnRUYWc9bztyLmRlZmF1bHQ9b30se1wiLi4vLi4vLi4vQ29tcG9uZW50XCI6MjkxfV0sMzk1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5PdXRsaW5lQ3JlYXRlVGFnPXZvaWQgMDt2YXIgaz1lKFwidmlydHVhbC1kb21cIik7dmFyIEw9ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgaT1mdW5jdGlvbihvKXtuKGUsbyk7ZnVuY3Rpb24gZShlLHQscixuKXt2YXIgaT1vLmNhbGwodGhpcyxlLHIsbil8fHRoaXM7aS5fb3B0aW9ucz17Y29sb3I6dC5jb2xvcj09bnVsbD8xNjc3NzIxNTp0LmNvbG9yfTtpLl9jcmVhdGVHbE9iamVjdHMoKTtyZXR1cm4gaX1lLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oKXtpZih0aGlzLl9nZW9tZXRyeSBpbnN0YW5jZW9mIEwuUmVjdEdlb21ldHJ5KXt0aGlzLl9jcmVhdGVkJC5uZXh0KHRoaXMpfWVsc2UgaWYodGhpcy5fZ2VvbWV0cnkgaW5zdGFuY2VvZiBMLlBvbHlnb25HZW9tZXRyeSl7dmFyIGU9dGhpcy5fZ2VvbWV0cnk7ZS5yZW1vdmVWZXJ0ZXgyZChlLnBvbHlnb24ubGVuZ3RoLTIpO3RoaXMuX2NyZWF0ZWQkLm5leHQodGhpcyl9fTtlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7by5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO3RoaXMuX2Rpc3Bvc2VMaW5lKHRoaXMuX291dGxpbmUpO3RoaXMuX2Rpc3Bvc2VPYmplY3RzKCl9O2UucHJvdG90eXBlLmdldERPTU9iamVjdHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3ZhciBuPVtdO3ZhciBpPXtvZmZzZXRIZWlnaHQ6dC5oZWlnaHQsb2Zmc2V0V2lkdGg6dC53aWR0aH07dmFyIG89ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTtyLl9hYm9ydGVkJC5uZXh0KHIpfTtpZih0aGlzLl9nZW9tZXRyeSBpbnN0YW5jZW9mIEwuUmVjdEdlb21ldHJ5KXt2YXIgYT10aGlzLl9nZW9tZXRyeS5hbmNob3JJbmRleDt2YXIgcz1hPT09dW5kZWZpbmVkPzE6YTt2YXIgdT10aGlzLl9nZW9tZXRyeS5nZXRWZXJ0ZXgyZChzKSxjPXVbMF0sbD11WzFdO3ZhciBoPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmJhc2ljVG9DYW52YXNTYWZlKGMsbCxpLHRoaXMuX3RyYW5zZm9ybSxlKTtpZihoIT1udWxsKXt2YXIgcD10aGlzLl9jb2xvclRvQmFja2dyb3VuZCh0aGlzLl9vcHRpb25zLmNvbG9yKTt2YXIgZj10aGlzLl9jYW52YXNUb1RyYW5zZm9ybShoKTt2YXIgZD17c3R5bGU6e2JhY2tncm91bmQ6cCx0cmFuc2Zvcm06Zn19O3ZhciB2PXtvbmNsaWNrOm8sc3R5bGU6e3RyYW5zZm9ybTpmfX07bi5wdXNoKGsuaChcImRpdi5UYWdJbnRlcmFjdG9yXCIsdixbXSkpO24ucHVzaChrLmgoXCJkaXYuVGFnVmVydGV4XCIsZCxbXSkpfX1lbHNlIGlmKHRoaXMuX2dlb21ldHJ5IGluc3RhbmNlb2YgTC5Qb2x5Z29uR2VvbWV0cnkpe3ZhciBtPXRoaXMuX2dlb21ldHJ5O3ZhciBnPW0uZ2V0VmVydGV4MmQoMCksXz1nWzBdLHk9Z1sxXTt2YXIgYj10aGlzLl92aWV3cG9ydENvb3Jkcy5iYXNpY1RvQ2FudmFzU2FmZShfLHksaSx0aGlzLl90cmFuc2Zvcm0sZSk7aWYoYiE9bnVsbCl7dmFyIHg9bS5wb2x5Z29uLmxlbmd0aD40P2Z1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7bS5yZW1vdmVWZXJ0ZXgyZChtLnBvbHlnb24ubGVuZ3RoLTIpO3IuX2NyZWF0ZWQkLm5leHQocil9Om87dmFyIGY9dGhpcy5fY2FudmFzVG9UcmFuc2Zvcm0oYik7dmFyIHY9e29uY2xpY2s6eCxzdHlsZTp7dHJhbnNmb3JtOmZ9fTt2YXIgdz1tLnBvbHlnb24ubGVuZ3RoPjQ/XCJUYWdDb21wbGV0ZXJcIjpcIlRhZ0ludGVyYWN0b3JcIjtuLnB1c2goay5oKFwiZGl2LlwiK3csdixbXSkpfWlmKG0ucG9seWdvbi5sZW5ndGg+Myl7dmFyIFM9bS5nZXRWZXJ0ZXgyZChtLnBvbHlnb24ubGVuZ3RoLTMpLE09U1swXSxDPVNbMV07dmFyIFQ9dGhpcy5fdmlld3BvcnRDb29yZHMuYmFzaWNUb0NhbnZhc1NhZmUoTSxDLGksdGhpcy5fdHJhbnNmb3JtLGUpO2lmKFQhPW51bGwpe3ZhciBFPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7bS5yZW1vdmVWZXJ0ZXgyZChtLnBvbHlnb24ubGVuZ3RoLTMpfTt2YXIgZj10aGlzLl9jYW52YXNUb1RyYW5zZm9ybShUKTt2YXIgdj17b25jbGljazpFLHN0eWxlOnt0cmFuc2Zvcm06Zn19O24ucHVzaChrLmgoXCJkaXYuVGFnSW50ZXJhY3RvclwiLHYsW10pKX19dmFyIE89bS5wb2x5Z29uLnNsaWNlKCk7Ty5zcGxpY2UoLTIsMik7Zm9yKHZhciBQPTAsQT1PO1A8QS5sZW5ndGg7UCsrKXt2YXIgaj1BW1BdO3ZhciBSPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmJhc2ljVG9DYW52YXNTYWZlKGpbMF0salsxXSxpLHRoaXMuX3RyYW5zZm9ybSxlKTtpZihSIT1udWxsKXt2YXIgcD10aGlzLl9jb2xvclRvQmFja2dyb3VuZCh0aGlzLl9vcHRpb25zLmNvbG9yKTt2YXIgZj10aGlzLl9jYW52YXNUb1RyYW5zZm9ybShSKTt2YXIgZD17c3R5bGU6e2JhY2tncm91bmQ6cCx0cmFuc2Zvcm06Zn19O24ucHVzaChrLmgoXCJkaXYuVGFnVmVydGV4XCIsZCxbXSkpfX19cmV0dXJuIG59O2UucHJvdG90eXBlLmFkZFBvaW50PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2dlb21ldHJ5IGluc3RhbmNlb2YgTC5SZWN0R2VvbWV0cnkpe3ZhciB0PXRoaXMuX2dlb21ldHJ5O2lmKCF0LnZhbGlkYXRlKGUpKXtyZXR1cm59dGhpcy5fY3JlYXRlZCQubmV4dCh0aGlzKX1lbHNlIGlmKHRoaXMuX2dlb21ldHJ5IGluc3RhbmNlb2YgTC5Qb2x5Z29uR2VvbWV0cnkpe3ZhciByPXRoaXMuX2dlb21ldHJ5O3IuYWRkVmVydGV4MmQoZSl9fTtlLnByb3RvdHlwZS5fb25HZW9tZXRyeUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl9kaXNwb3NlTGluZSh0aGlzLl9vdXRsaW5lKTt0aGlzLl9kaXNwb3NlT2JqZWN0cygpO3RoaXMuX2NyZWF0ZUdsT2JqZWN0cygpfTtlLnByb3RvdHlwZS5fZGlzcG9zZU9iamVjdHM9ZnVuY3Rpb24oKXt0aGlzLl9vdXRsaW5lPW51bGw7dGhpcy5fZ2xPYmplY3RzPVtdfTtlLnByb3RvdHlwZS5fY3JlYXRlR2xPYmplY3RzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2VvbWV0cnkgaW5zdGFuY2VvZiBMLlJlY3RHZW9tZXRyeT90aGlzLl9nZW9tZXRyeS5nZXRQb2ludHMzZCh0aGlzLl90cmFuc2Zvcm0pOnRoaXMuX2dlb21ldHJ5LmdldFZlcnRpY2VzM2QodGhpcy5fdHJhbnNmb3JtKTt0aGlzLl9vdXRsaW5lPXRoaXMuX2NyZWF0ZU91dGluZShlLHRoaXMuX29wdGlvbnMuY29sb3IpO3RoaXMuX2dsT2JqZWN0cz1bdGhpcy5fb3V0bGluZV19O3JldHVybiBlfShMLkNyZWF0ZVRhZyk7ci5PdXRsaW5lQ3JlYXRlVGFnPWk7ci5kZWZhdWx0PWl9LHtcIi4uLy4uLy4uL0NvbXBvbmVudFwiOjI5MSxcInZpcnR1YWwtZG9tXCI6MjQ3fV0sMzk2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5PdXRsaW5lUmVuZGVyVGFnPXZvaWQgMDt2YXIgbz1lKFwidGhyZWVcIik7dmFyIEc9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBWPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIG49ZnVuY3Rpb24obil7aShlLG4pO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1uLmNhbGwodGhpcyxlLHQpfHx0aGlzO3IuX2ZpbGw9IXQuZ3Bhbm8/ci5fY3JlYXRlRmlsbCgpOnQuZnVsbFBhbm8mJmUuZG9tYWluPT09Vi5UYWdEb21haW4uVHdvRGltZW5zaW9uYWwmJmUuZ2VvbWV0cnkgaW5zdGFuY2VvZiBWLlBvbHlnb25HZW9tZXRyeT9yLl9jcmVhdGVGaWxsKCk6bnVsbDtyLl9ob2xlcz1yLl90YWcubGluZVdpZHRoPj0xP3IuX2NyZWF0ZUhvbGVzKCk6W107ci5fb3V0bGluZT1yLl90YWcubGluZVdpZHRoPj0xP3IuX2NyZWF0ZU91dGxpbmUoKTpudWxsO3JldHVybiByfWUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtuLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7dGhpcy5fZGlzcG9zZUZpbGwoKTt0aGlzLl9kaXNwb3NlSG9sZXMoKTt0aGlzLl9kaXNwb3NlT3V0bGluZSgpfTtlLnByb3RvdHlwZS5nZXRET01PYmplY3RzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3ZhciBpPVtdO3ZhciBvPXRoaXMuX3RhZy5nZW9tZXRyeSBpbnN0YW5jZW9mIFYuUmVjdEdlb21ldHJ5O3ZhciBhPSF0aGlzLl90cmFuc2Zvcm0uZ3Bhbm87dmFyIHM9e29mZnNldEhlaWdodDpyLmhlaWdodCxvZmZzZXRXaWR0aDpyLndpZHRofTtpZih0aGlzLl90YWcuaWNvbiE9bnVsbCYmKG98fGEpKXt2YXIgdT10aGlzLl90YWcuZ2VvbWV0cnkgaW5zdGFuY2VvZiBWLlJlY3RHZW9tZXRyeT90aGlzLl90YWcuZ2VvbWV0cnkuZ2V0VmVydGV4MmQodGhpcy5fdGFnLmljb25JbmRleCk6dGhpcy5fdGFnLmdlb21ldHJ5LmdldFBvbGVPZkluYWNjZXNzaWJpbGl0eTJkKCksYz11WzBdLGw9dVsxXTt2YXIgaD10aGlzLl92aWV3cG9ydENvb3Jkcy5iYXNpY1RvQ2FudmFzU2FmZShjLGwscyx0aGlzLl90cmFuc2Zvcm0sdCk7aWYoaCE9bnVsbCl7dmFyIHA9ZnVuY3Rpb24oKXtuLl9pbnRlcmFjdCQubmV4dCh7b2Zmc2V0WDowLG9mZnNldFk6MCxvcGVyYXRpb246Vi5UYWdPcGVyYXRpb24uTm9uZSx0YWc6bi5fdGFnfSl9O2lmKGUubG9hZGVkKXt2YXIgZj1lLmdldERPTVNwcml0ZSh0aGlzLl90YWcuaWNvbix0aGlzLl90YWcuaWNvbkZsb2F0KTt2YXIgZD1NYXRoLnJvdW5kKGhbMF0pO3ZhciB2PU1hdGgucm91bmQoaFsxXSk7dmFyIG09XCJ0cmFuc2xhdGUoXCIrZCtcInB4LFwiK3YrXCJweClcIjt2YXIgZz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO24uX3RhZy5jbGljayQubmV4dChuLl90YWcpfTt2YXIgXz17b25jbGljazpnLG9ubW91c2Vkb3duOnAsc3R5bGU6e3RyYW5zZm9ybTptfX07aS5wdXNoKEcuaChcImRpdi5UYWdTeW1ib2xcIixfLFtmXSkpfX19ZWxzZSBpZih0aGlzLl90YWcudGV4dCE9bnVsbCYmKG98fGEpKXt2YXIgeT10aGlzLl90YWcuZ2VvbWV0cnkgaW5zdGFuY2VvZiBWLlJlY3RHZW9tZXRyeT90aGlzLl90YWcuZ2VvbWV0cnkuZ2V0VmVydGV4MmQoMyk6dGhpcy5fdGFnLmdlb21ldHJ5LmdldFBvbGVPZkluYWNjZXNzaWJpbGl0eTJkKCksYj15WzBdLHg9eVsxXTt2YXIgdz10aGlzLl92aWV3cG9ydENvb3Jkcy5iYXNpY1RvQ2FudmFzU2FmZShiLHgscyx0aGlzLl90cmFuc2Zvcm0sdCk7aWYodyE9bnVsbCl7dmFyIFM9TWF0aC5yb3VuZCh3WzBdKTt2YXIgTT1NYXRoLnJvdW5kKHdbMV0pO3ZhciBtPXRoaXMuX3RhZy5nZW9tZXRyeSBpbnN0YW5jZW9mIFYuUmVjdEdlb21ldHJ5P1widHJhbnNsYXRlKFwiK1MrXCJweCxcIitNK1wicHgpXCI6XCJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkgdHJhbnNsYXRlKFwiK1MrXCJweCxcIitNK1wicHgpXCI7dmFyIHA9ZnVuY3Rpb24oKXtuLl9pbnRlcmFjdCQubmV4dCh7b2Zmc2V0WDowLG9mZnNldFk6MCxvcGVyYXRpb246Vi5UYWdPcGVyYXRpb24uTm9uZSx0YWc6bi5fdGFnfSl9O3ZhciBfPXtvbm1vdXNlZG93bjpwLHN0eWxlOntjb2xvcjp0aGlzLl9jb2xvclRvQ3NzKHRoaXMuX3RhZy50ZXh0Q29sb3IpLHRyYW5zZm9ybTptfSx0ZXh0Q29udGVudDp0aGlzLl90YWcudGV4dH07aS5wdXNoKEcuaChcInNwYW4uVGFnU3ltYm9sXCIsXyxbXSkpfX1pZighdGhpcy5fdGFnLmVkaXRhYmxlKXtyZXR1cm4gaX12YXIgQz10aGlzLl9jb2xvclRvQ3NzKHRoaXMuX3RhZy5saW5lQ29sb3IpO2lmKHRoaXMuX3RhZy5nZW9tZXRyeSBpbnN0YW5jZW9mIFYuUmVjdEdlb21ldHJ5KXt2YXIgVD10aGlzLl90YWcuZ2VvbWV0cnkuZ2V0Q2VudHJvaWQyZCgpLEU9VFswXSxPPVRbMV07dmFyIFA9dGhpcy5fdmlld3BvcnRDb29yZHMuYmFzaWNUb0NhbnZhc1NhZmUoRSxPLHMsdGhpcy5fdHJhbnNmb3JtLHQpO2lmKFAhPW51bGwpe3ZhciBwPXRoaXMuX2ludGVyYWN0KFYuVGFnT3BlcmF0aW9uLkNlbnRyb2lkLFwibW92ZVwiKTt2YXIgQT1NYXRoLnJvdW5kKFBbMF0pO3ZhciBqPU1hdGgucm91bmQoUFsxXSk7dmFyIG09XCJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkgdHJhbnNsYXRlKFwiK0ErXCJweCxcIitqK1wicHgpXCI7dmFyIF89e29ubW91c2Vkb3duOnAsc3R5bGU6e2JhY2tncm91bmQ6Qyx0cmFuc2Zvcm06bX19O2kucHVzaChHLmgoXCJkaXYuVGFnTW92ZXJcIixfLFtdKSl9fXZhciBSPXRoaXMuX3RhZy5nZW9tZXRyeS5nZXRWZXJ0aWNlczJkKCk7Zm9yKHZhciBrPTA7azxSLmxlbmd0aC0xO2srKyl7aWYobyYmKHRoaXMuX3RhZy5pY29uIT1udWxsJiZrPT09dGhpcy5fdGFnLmljb25JbmRleHx8dGhpcy5fdGFnLmljb249PW51bGwmJnRoaXMuX3RhZy50ZXh0IT1udWxsJiZrPT09Mykpe2NvbnRpbnVlfXZhciBMPVJba10sTj1MWzBdLEk9TFsxXTt2YXIgRD10aGlzLl92aWV3cG9ydENvb3Jkcy5iYXNpY1RvQ2FudmFzU2FmZShOLEkscyx0aGlzLl90cmFuc2Zvcm0sdCk7aWYoRD09bnVsbCl7Y29udGludWV9dmFyIEI9bz9rJTI9PT0wP1wibmVzdy1yZXNpemVcIjpcIm53c2UtcmVzaXplXCI6XCJjcm9zc2hhaXJcIjt2YXIgcD10aGlzLl9pbnRlcmFjdChWLlRhZ09wZXJhdGlvbi5WZXJ0ZXgsQixrKTt2YXIgRj1NYXRoLnJvdW5kKERbMF0pO3ZhciB6PU1hdGgucm91bmQoRFsxXSk7dmFyIG09XCJ0cmFuc2xhdGUoLTUwJSwgLTUwJSkgdHJhbnNsYXRlKFwiK0YrXCJweCxcIit6K1wicHgpXCI7dmFyIF89e29ubW91c2Vkb3duOnAsc3R5bGU6e2JhY2tncm91bmQ6Qyx0cmFuc2Zvcm06bSxjdXJzb3I6Qn19O2kucHVzaChHLmgoXCJkaXYuVGFnUmVzaXplclwiLF8sW10pKTtpZighdGhpcy5fdGFnLmluZGljYXRlVmVydGljZXMpe2NvbnRpbnVlfXZhciAkPXtzdHlsZTp7YmFja2dyb3VuZDpDLHRyYW5zZm9ybTptfX07aS5wdXNoKEcuaChcImRpdi5UYWdWZXJ0ZXhcIiwkLFtdKSl9cmV0dXJuIGl9O2UucHJvdG90eXBlLmdldEdMT2JqZWN0cz1mdW5jdGlvbigpe3ZhciBlPVtdO2lmKHRoaXMuX2ZpbGwhPW51bGwpe2UucHVzaCh0aGlzLl9maWxsKX1mb3IodmFyIHQ9MCxyPXRoaXMuX2hvbGVzO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO2UucHVzaChuKX1pZih0aGlzLl9vdXRsaW5lIT1udWxsKXtlLnB1c2godGhpcy5fb3V0bGluZSl9cmV0dXJuIGV9O2UucHJvdG90eXBlLmdldFJldHJpZXZhYmxlT2JqZWN0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsIT1udWxsP1t0aGlzLl9maWxsXTpbXX07ZS5wcm90b3R5cGUuX29uR2VvbWV0cnlDaGFuZ2VkPWZ1bmN0aW9uKCl7aWYodGhpcy5fZmlsbCE9bnVsbCl7dGhpcy5fdXBkYXRlRmlsbEdlb21ldHJ5KCl9aWYodGhpcy5faG9sZXMubGVuZ3RoPjApe3RoaXMuX3VwZGF0ZUhvbGVHZW9tZXRyaWVzKCl9aWYodGhpcy5fb3V0bGluZSE9bnVsbCl7dGhpcy5fdXBkYXRlT3VsaW5lR2VvbWV0cnkoKX19O2UucHJvdG90eXBlLl9vblRhZ0NoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT1mYWxzZTtpZih0aGlzLl9maWxsIT1udWxsKXt0aGlzLl91cGRhdGVGaWxsTWF0ZXJpYWwodGhpcy5fZmlsbC5tYXRlcmlhbCl9aWYodGhpcy5fb3V0bGluZT09bnVsbCl7aWYodGhpcy5fdGFnLmxpbmVXaWR0aD49MSl7dGhpcy5faG9sZXM9dGhpcy5fY3JlYXRlSG9sZXMoKTt0aGlzLl9vdXRsaW5lPXRoaXMuX2NyZWF0ZU91dGxpbmUoKTtlPXRydWV9fWVsc2V7dGhpcy5fdXBkYXRlSG9sZU1hdGVyaWFscygpO3RoaXMuX3VwZGF0ZU91dGxpbmVNYXRlcmlhbCgpfXJldHVybiBlfTtlLnByb3RvdHlwZS5fZ2V0UG9pbnRzM2Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW4zZERvbWFpbigpP3RoaXMuX3RhZy5nZW9tZXRyeS5nZXRWZXJ0aWNlczNkKHRoaXMuX3RyYW5zZm9ybSk6dGhpcy5fdGFnLmdlb21ldHJ5LmdldFBvaW50czNkKHRoaXMuX3RyYW5zZm9ybSl9O2UucHJvdG90eXBlLl9nZXRUcmlhbmdsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW4zZERvbWFpbigpP3RoaXMuX3RhZy5nZW9tZXRyeS5nZXQzZERvbWFpblRyaWFuZ2xlczNkKHRoaXMuX3RyYW5zZm9ybSk6dGhpcy5fdGFnLmdlb21ldHJ5LmdldFRyaWFuZ2xlczNkKHRoaXMuX3RyYW5zZm9ybSl9O2UucHJvdG90eXBlLl91cGRhdGVGaWxsTWF0ZXJpYWw9ZnVuY3Rpb24oZSl7ZS5jb2xvcj1uZXcgby5Db2xvcih0aGlzLl90YWcuZmlsbENvbG9yKTtlLm9wYWNpdHk9dGhpcy5fdGFnLmZpbGxPcGFjaXR5O2UubmVlZHNVcGRhdGU9dHJ1ZX07ZS5wcm90b3R5cGUuX3VwZGF0ZUxpbmVCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGUpe2UuY29sb3I9bmV3IG8uQ29sb3IodGhpcy5fdGFnLmxpbmVDb2xvcik7ZS5saW5ld2lkdGg9TWF0aC5tYXgodGhpcy5fdGFnLmxpbmVXaWR0aCwxKTtlLnZpc2libGU9dGhpcy5fdGFnLmxpbmVXaWR0aD49MSYmdGhpcy5fdGFnLmxpbmVPcGFjaXR5PjA7ZS5vcGFjaXR5PXRoaXMuX3RhZy5saW5lT3BhY2l0eTtlLnRyYW5zcGFyZW50PXRoaXMuX3RhZy5saW5lT3BhY2l0eTwxO2UubmVlZHNVcGRhdGU9dHJ1ZX07ZS5wcm90b3R5cGUuX2NyZWF0ZUhvbGVzPWZ1bmN0aW9uKCl7dmFyIGU9W107aWYodGhpcy5fdGFnLmdlb21ldHJ5IGluc3RhbmNlb2YgVi5Qb2x5Z29uR2VvbWV0cnkpe3ZhciB0PXRoaXMuX2dldEhvbGVzM2QoKTtmb3IodmFyIHI9MCxuPXQ7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07dmFyIG89dGhpcy5fY3JlYXRlTGluZShpKTtlLnB1c2gobyl9fXJldHVybiBlfTtlLnByb3RvdHlwZS5fZGlzcG9zZUhvbGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlzLl9ob2xlcztlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTtyLmdlb21ldHJ5LmRpc3Bvc2UoKTtyLm1hdGVyaWFsLmRpc3Bvc2UoKX10aGlzLl9ob2xlcz1bXX07ZS5wcm90b3R5cGUuX2dldEhvbGVzM2Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90YWcuZ2VvbWV0cnk7cmV0dXJuIHRoaXMuX2luM2REb21haW4oKT9lLmdldEhvbGVWZXJ0aWNlczNkKHRoaXMuX3RyYW5zZm9ybSk6ZS5nZXRIb2xlUG9pbnRzM2QodGhpcy5fdHJhbnNmb3JtKX07ZS5wcm90b3R5cGUuX2luM2REb21haW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFnLmdlb21ldHJ5IGluc3RhbmNlb2YgVi5Qb2x5Z29uR2VvbWV0cnkmJnRoaXMuX3RhZy5kb21haW49PT1WLlRhZ0RvbWFpbi5UaHJlZURpbWVuc2lvbmFsfTtlLnByb3RvdHlwZS5fdXBkYXRlSG9sZUdlb21ldHJpZXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9nZXRIb2xlczNkKCk7aWYoZS5sZW5ndGghPT10aGlzLl9ob2xlcy5sZW5ndGgpe3Rocm93IG5ldyBFcnJvcihcIkNoYW5naW5nIHRoZSBudW1iZXIgb2YgaG9sZXMgaXMgbm90IHN1cHBvcnRlZC5cIil9Zm9yKHZhciB0PTA7dDx0aGlzLl9ob2xlcy5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3ZhciBuPXRoaXMuX2hvbGVzW3RdO3RoaXMuX3VwZGF0ZUxpbmUobixyKX19O2UucHJvdG90eXBlLl91cGRhdGVIb2xlTWF0ZXJpYWxzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlzLl9ob2xlcztlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTt0aGlzLl91cGRhdGVMaW5lQmFzaWNNYXRlcmlhbChyLm1hdGVyaWFsKX19O2UucHJvdG90eXBlLl91cGRhdGVPdXRsaW5lTWF0ZXJpYWw9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVMaW5lQmFzaWNNYXRlcmlhbCh0aGlzLl9vdXRsaW5lLm1hdGVyaWFsKX07cmV0dXJuIGV9KFYuT3V0bGluZVJlbmRlclRhZ0Jhc2UpO3IuT3V0bGluZVJlbmRlclRhZz1ufSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEsdGhyZWU6MjQyLFwidmlydHVhbC1kb21cIjoyNDd9XSwzOTc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLk91dGxpbmVSZW5kZXJUYWdCYXNlPXZvaWQgMDt2YXIgbz1lKFwidGhyZWVcIik7dmFyIG49ZShcIi4uLy4uLy4uL0NvbXBvbmVudFwiKTt2YXIgYT1mdW5jdGlvbihuKXtpKGUsbik7ZnVuY3Rpb24gZShlLHQpe3ZhciByPW4uY2FsbCh0aGlzLGUsdCl8fHRoaXM7ci5fZ2VvbWV0cnlDaGFuZ2VkU3Vic2NyaXB0aW9uPXIuX3RhZy5nZW9tZXRyeS5jaGFuZ2VkJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXtyLl9vbkdlb21ldHJ5Q2hhbmdlZCgpfSk7ci5fY2hhbmdlZFN1YnNjcmlwdGlvbj1yLl90YWcuY2hhbmdlZCQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7dmFyIGU9ci5fb25UYWdDaGFuZ2VkKCk7aWYoZSl7ci5fZ2xPYmplY3RzQ2hhbmdlZCQubmV4dChyKX19KTtyZXR1cm4gcn1lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2dlb21ldHJ5Q2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTtlLnByb3RvdHlwZS5fY29sb3JUb0Nzcz1mdW5jdGlvbihlKXtyZXR1cm5cIiNcIisoXCIwMDAwMDBcIitlLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KX07ZS5wcm90b3R5cGUuX2NyZWF0ZUZpbGw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9nZXRUcmlhbmdsZXMoKTt2YXIgdD1uZXcgRmxvYXQzMkFycmF5KGUpO3ZhciByPW5ldyBvLkJ1ZmZlckdlb21ldHJ5O3Iuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgby5CdWZmZXJBdHRyaWJ1dGUodCwzKSk7ci5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt2YXIgbj1uZXcgby5NZXNoQmFzaWNNYXRlcmlhbCh7c2lkZTpvLkRvdWJsZVNpZGUsdHJhbnNwYXJlbnQ6dHJ1ZX0pO3RoaXMuX3VwZGF0ZUZpbGxNYXRlcmlhbChuKTtyZXR1cm4gbmV3IG8uTWVzaChyLG4pfTtlLnByb3RvdHlwZS5fY3JlYXRlTGluZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRMaW5lUG9zaXRpb25zKGUpO3ZhciByPW5ldyBvLkJ1ZmZlckdlb21ldHJ5O3Iuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgby5CdWZmZXJBdHRyaWJ1dGUodCwzKSk7ci5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt2YXIgbj1uZXcgby5MaW5lQmFzaWNNYXRlcmlhbDt0aGlzLl91cGRhdGVMaW5lQmFzaWNNYXRlcmlhbChuKTt2YXIgaT1uZXcgby5MaW5lKHIsbik7aS5yZW5kZXJPcmRlcj0xO3JldHVybiBpfTtlLnByb3RvdHlwZS5fY3JlYXRlT3V0bGluZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcmVhdGVMaW5lKHRoaXMuX2dldFBvaW50czNkKCkpfTtlLnByb3RvdHlwZS5fZGlzcG9zZUZpbGw9ZnVuY3Rpb24oKXtpZih0aGlzLl9maWxsPT1udWxsKXtyZXR1cm59dGhpcy5fZmlsbC5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5fZmlsbC5tYXRlcmlhbC5kaXNwb3NlKCk7dGhpcy5fZmlsbD1udWxsfTtlLnByb3RvdHlwZS5fZGlzcG9zZU91dGxpbmU9ZnVuY3Rpb24oKXtpZih0aGlzLl9vdXRsaW5lPT1udWxsKXtyZXR1cm59dGhpcy5fb3V0bGluZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5fb3V0bGluZS5tYXRlcmlhbC5kaXNwb3NlKCk7dGhpcy5fb3V0bGluZT1udWxsfTtlLnByb3RvdHlwZS5fZ2V0TGluZVBvc2l0aW9ucz1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDt2YXIgcj1uZXcgRmxvYXQzMkFycmF5KHQqMyk7Zm9yKHZhciBuPTA7bjx0Oysrbil7dmFyIGk9MypuO3ZhciBvPWVbbl07cltpKzBdPW9bMF07cltpKzFdPW9bMV07cltpKzJdPW9bMl19cmV0dXJuIHJ9O2UucHJvdG90eXBlLl9pbnRlcmFjdD1mdW5jdGlvbihuLGksbyl7dmFyIGE9dGhpcztyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vZmZzZXRYLWUudGFyZ2V0Lm9mZnNldFdpZHRoLzI7dmFyIHI9ZS5vZmZzZXRZLWUudGFyZ2V0Lm9mZnNldEhlaWdodC8yO2EuX2ludGVyYWN0JC5uZXh0KHtjdXJzb3I6aSxvZmZzZXRYOnQsb2Zmc2V0WTpyLG9wZXJhdGlvbjpuLHRhZzphLl90YWcsdmVydGV4SW5kZXg6b30pfX07ZS5wcm90b3R5cGUuX3VwZGF0ZUZpbGxHZW9tZXRyeT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldFRyaWFuZ2xlcygpO3ZhciB0PW5ldyBGbG9hdDMyQXJyYXkoZSk7dmFyIHI9dGhpcy5fZmlsbC5nZW9tZXRyeTt2YXIgbj1yLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO2lmKG4uYXJyYXkubGVuZ3RoPT09dC5sZW5ndGgpe24uc2V0KHQpO24ubmVlZHNVcGRhdGU9dHJ1ZX1lbHNle3IucmVtb3ZlQXR0cmlidXRlKFwicG9zaXRpb25cIik7ci5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBvLkJ1ZmZlckF0dHJpYnV0ZSh0LDMpKX1yLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfTtlLnByb3RvdHlwZS5fdXBkYXRlTGluZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2dldExpbmVQb3NpdGlvbnModCk7dmFyIG49ZS5nZW9tZXRyeTt2YXIgaT1uLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO2kuc2V0KHIpO2kubmVlZHNVcGRhdGU9dHJ1ZTtuLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfTtlLnByb3RvdHlwZS5fdXBkYXRlT3VsaW5lR2VvbWV0cnk9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVMaW5lKHRoaXMuX291dGxpbmUsdGhpcy5fZ2V0UG9pbnRzM2QoKSl9O3JldHVybiBlfShuLlJlbmRlclRhZyk7ci5PdXRsaW5lUmVuZGVyVGFnQmFzZT1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEsdGhyZWU6MjQyfV0sMzk4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5PdXRsaW5lVGFnPXZvaWQgMDt2YXIgdT1lKFwicnhqc1wiKTt2YXIgYz1lKFwiLi4vLi4vLi4vQ29tcG9uZW50XCIpO3ZhciBsPWUoXCIuLi8uLi8uLi9WaWV3ZXJcIik7dmFyIGk9ZnVuY3Rpb24oYSl7bihzLGEpO2Z1bmN0aW9uIHMoZSx0LHIpe3ZhciBuPWEuY2FsbCh0aGlzLGUsdCl8fHRoaXM7cj0hIXI/cjp7fTt2YXIgaT1yLmRvbWFpbiE9bnVsbCYmdCBpbnN0YW5jZW9mIGMuUG9seWdvbkdlb21ldHJ5P3IuZG9tYWluOmMuVGFnRG9tYWluLlR3b0RpbWVuc2lvbmFsO3ZhciBvPW4uX3R3b0RpbWVuc2lvbmFsUG9seWdvbihpLHQpO24uX2RvbWFpbj1pO24uX2VkaXRhYmxlPXIuZWRpdGFibGU9PW51bGx8fG8/ZmFsc2U6ci5lZGl0YWJsZTtuLl9maWxsQ29sb3I9ci5maWxsQ29sb3I9PW51bGw/MTY3NzcyMTU6ci5maWxsQ29sb3I7bi5fZmlsbE9wYWNpdHk9ci5maWxsT3BhY2l0eT09bnVsbD8wOnIuZmlsbE9wYWNpdHk7bi5faWNvbj1yLmljb249PT11bmRlZmluZWQ/bnVsbDpyLmljb247bi5faWNvbkZsb2F0PXIuaWNvbkZsb2F0PT1udWxsP2wuQWxpZ25tZW50LkNlbnRlcjpyLmljb25GbG9hdDtuLl9pY29uSW5kZXg9ci5pY29uSW5kZXg9PW51bGw/MzpyLmljb25JbmRleDtuLl9pbmRpY2F0ZVZlcnRpY2VzPXIuaW5kaWNhdGVWZXJ0aWNlcz09bnVsbD90cnVlOnIuaW5kaWNhdGVWZXJ0aWNlcztuLl9saW5lQ29sb3I9ci5saW5lQ29sb3I9PW51bGw/MTY3NzcyMTU6ci5saW5lQ29sb3I7bi5fbGluZU9wYWNpdHk9ci5saW5lT3BhY2l0eT09bnVsbD8xOnIubGluZU9wYWNpdHk7bi5fbGluZVdpZHRoPXIubGluZVdpZHRoPT1udWxsPzE6ci5saW5lV2lkdGg7bi5fdGV4dD1yLnRleHQ9PT11bmRlZmluZWQ/bnVsbDpyLnRleHQ7bi5fdGV4dENvbG9yPXIudGV4dENvbG9yPT1udWxsPzE2Nzc3MjE1OnIudGV4dENvbG9yO24uX2NsaWNrJD1uZXcgdS5TdWJqZWN0O24uX2NsaWNrJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7bi5maXJlKHMuY2xpY2ssbil9KTtyZXR1cm4gbn1PYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJjbGljayRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NsaWNrJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcImRvbWFpblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tYWlufSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiZWRpdGFibGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VkaXRhYmxlfSxzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5fdHdvRGltZW5zaW9uYWxQb2x5Z29uKHRoaXMuX2RvbWFpbix0aGlzLl9nZW9tZXRyeSkpe3JldHVybn10aGlzLl9lZGl0YWJsZT1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJmaWxsQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGxDb2xvcn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2ZpbGxDb2xvcj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJmaWxsT3BhY2l0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbE9wYWNpdHl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9maWxsT3BhY2l0eT1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJnZW9tZXRyeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2VvbWV0cnl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJpY29uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pY29ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faWNvbj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJpY29uRmxvYXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ljb25GbG9hdH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2ljb25GbG9hdD1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJpY29uSW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ljb25JbmRleH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2ljb25JbmRleD1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJpbmRpY2F0ZVZlcnRpY2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmRpY2F0ZVZlcnRpY2VzfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faW5kaWNhdGVWZXJ0aWNlcz1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJsaW5lQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVDb2xvcn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2xpbmVDb2xvcj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJsaW5lT3BhY2l0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZU9wYWNpdHl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9saW5lT3BhY2l0eT1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJsaW5lV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVXaWR0aH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2xpbmVXaWR0aD1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJ0ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdGV4dD1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJ0ZXh0Q29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHRDb2xvcn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3RleHRDb2xvcj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtzLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3R3b0RpbWVuc2lvbmFsUG9seWdvbih0aGlzLl9kb21haW4sdGhpcy5fZ2VvbWV0cnkpO3RoaXMuX2VkaXRhYmxlPXR8fGUuZWRpdGFibGU9PW51bGw/dGhpcy5fZWRpdGFibGU6ZS5lZGl0YWJsZTt0aGlzLl9pY29uPWUuaWNvbj09PXVuZGVmaW5lZD90aGlzLl9pY29uOmUuaWNvbjt0aGlzLl9pY29uRmxvYXQ9ZS5pY29uRmxvYXQ9PW51bGw/dGhpcy5faWNvbkZsb2F0OmUuaWNvbkZsb2F0O3RoaXMuX2ljb25JbmRleD1lLmljb25JbmRleD09bnVsbD90aGlzLl9pY29uSW5kZXg6ZS5pY29uSW5kZXg7dGhpcy5faW5kaWNhdGVWZXJ0aWNlcz1lLmluZGljYXRlVmVydGljZXM9PW51bGw/dGhpcy5faW5kaWNhdGVWZXJ0aWNlczplLmluZGljYXRlVmVydGljZXM7dGhpcy5fbGluZUNvbG9yPWUubGluZUNvbG9yPT1udWxsP3RoaXMuX2xpbmVDb2xvcjplLmxpbmVDb2xvcjt0aGlzLl9saW5lV2lkdGg9ZS5saW5lV2lkdGg9PW51bGw/dGhpcy5fbGluZVdpZHRoOmUubGluZVdpZHRoO3RoaXMuX2ZpbGxDb2xvcj1lLmZpbGxDb2xvcj09bnVsbD90aGlzLl9maWxsQ29sb3I6ZS5maWxsQ29sb3I7dGhpcy5fZmlsbE9wYWNpdHk9ZS5maWxsT3BhY2l0eT09bnVsbD90aGlzLl9maWxsT3BhY2l0eTplLmZpbGxPcGFjaXR5O3RoaXMuX3RleHQ9ZS50ZXh0PT09dW5kZWZpbmVkP3RoaXMuX3RleHQ6ZS50ZXh0O3RoaXMuX3RleHRDb2xvcj1lLnRleHRDb2xvcj09bnVsbD90aGlzLl90ZXh0Q29sb3I6ZS50ZXh0Q29sb3I7dGhpcy5fbm90aWZ5Q2hhbmdlZCQubmV4dCh0aGlzKX07cy5wcm90b3R5cGUuX3R3b0RpbWVuc2lvbmFsUG9seWdvbj1mdW5jdGlvbihlLHQpe3JldHVybiBlIT09Yy5UYWdEb21haW4uVGhyZWVEaW1lbnNpb25hbCYmdCBpbnN0YW5jZW9mIGMuUG9seWdvbkdlb21ldHJ5fTtzLmNsaWNrPVwiY2xpY2tcIjtyZXR1cm4gc30oYy5UYWcpO3IuT3V0bGluZVRhZz1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTEsXCIuLi8uLi8uLi9WaWV3ZXJcIjozMDIscnhqczo0M31dLDM5OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5SZW5kZXJUYWc9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWUoXCIuLi8uLi8uLi9HZW9cIik7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl90YWc9ZTt0aGlzLl90cmFuc2Zvcm09dDt0aGlzLl92aWV3cG9ydENvb3Jkcz0hIXI/cjpuZXcgaS5WaWV3cG9ydENvb3Jkczt0aGlzLl9nbE9iamVjdHNDaGFuZ2VkJD1uZXcgbi5TdWJqZWN0O3RoaXMuX2ludGVyYWN0JD1uZXcgbi5TdWJqZWN0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImdsT2JqZWN0c0NoYW5nZWQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nbE9iamVjdHNDaGFuZ2VkJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImludGVyYWN0JFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW50ZXJhY3QkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGFnXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YWd9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtyZXR1cm4gZX0oKTtyLlJlbmRlclRhZz1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi8uLi9HZW9cIjoyOTQscnhqczo0M31dLDQwMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU3BvdFJlbmRlclRhZz12b2lkIDA7dmFyIFM9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBNPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIEM9ZShcIi4uLy4uLy4uL1ZpZXdlclwiKTt2YXIgaT1mdW5jdGlvbihlKXtuKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiBlIT09bnVsbCYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9dC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe307dC5wcm90b3R5cGUuZ2V0RE9NT2JqZWN0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpczt2YXIgaT10aGlzLl90YWc7dmFyIG89e29mZnNldEhlaWdodDpyLmhlaWdodCxvZmZzZXRXaWR0aDpyLndpZHRofTt2YXIgYT1bXTt2YXIgcz1pLmdlb21ldHJ5LmdldENlbnRyb2lkMmQoKSx1PXNbMF0sYz1zWzFdO3ZhciBsPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmJhc2ljVG9DYW52YXNTYWZlKHUsYyxvLHRoaXMuX3RyYW5zZm9ybSx0KTtpZihsIT1udWxsKXt2YXIgaD1mdW5jdGlvbihlKXtuLl9pbnRlcmFjdCQubmV4dCh7b2Zmc2V0WDowLG9mZnNldFk6MCxvcGVyYXRpb246TS5UYWdPcGVyYXRpb24uTm9uZSx0YWc6aX0pfTt2YXIgcD1NYXRoLnJvdW5kKGxbMF0pO3ZhciBmPU1hdGgucm91bmQobFsxXSk7aWYoaS5pY29uIT1udWxsKXtpZihlLmxvYWRlZCl7dmFyIGQ9ZS5nZXRET01TcHJpdGUoaS5pY29uLEMuQWxpZ25tZW50LkJvdHRvbSk7dmFyIHY9XCJ0cmFuc2xhdGUoXCIrcCtcInB4LFwiKyhmKzgpK1wicHgpXCI7dmFyIG09e29ubW91c2Vkb3duOmgsc3R5bGU6e3BvaW50ZXJFdmVudHM6XCJhbGxcIix0cmFuc2Zvcm06dn19O2EucHVzaChTLmgoXCJkaXZcIixtLFtkXSkpfX1lbHNlIGlmKGkudGV4dCE9bnVsbCl7dmFyIGc9XCJ0cmFuc2xhdGUoLTUwJSwwJSkgdHJhbnNsYXRlKFwiK3ArXCJweCxcIisoZis4KStcInB4KVwiO3ZhciBtPXtvbm1vdXNlZG93bjpoLHN0eWxlOntjb2xvcjp0aGlzLl9jb2xvclRvQ3NzKGkudGV4dENvbG9yKSx0cmFuc2Zvcm06Z30sdGV4dENvbnRlbnQ6aS50ZXh0fTthLnB1c2goUy5oKFwic3Bhbi5UYWdTeW1ib2xcIixtLFtdKSl9dmFyIF89dGhpcy5faW50ZXJhY3QoTS5UYWdPcGVyYXRpb24uQ2VudHJvaWQsaSxcIm1vdmVcIik7dmFyIHk9dGhpcy5fY29sb3JUb0NzcyhpLmNvbG9yKTt2YXIgYj1cInRyYW5zbGF0ZSgtNTAlLC01MCUpIHRyYW5zbGF0ZShcIitwK1wicHgsXCIrZitcInB4KVwiO2lmKGkuZWRpdGFibGUpe3ZhciB4PXtvbm1vdXNlZG93bjpfLHN0eWxlOntiYWNrZ3JvdW5kOnksdHJhbnNmb3JtOmJ9fTthLnB1c2goUy5oKFwiZGl2LlRhZ1Nwb3RJbnRlcmFjdG9yXCIseCxbXSkpfXZhciB3PXtzdHlsZTp7YmFja2dyb3VuZDp5LHRyYW5zZm9ybTpifX07YS5wdXNoKFMuaChcImRpdi5UYWdWZXJ0ZXhcIix3LFtdKSl9cmV0dXJuIGF9O3QucHJvdG90eXBlLmdldEdMT2JqZWN0cz1mdW5jdGlvbigpe3JldHVybltdfTt0LnByb3RvdHlwZS5nZXRSZXRyaWV2YWJsZU9iamVjdHM9ZnVuY3Rpb24oKXtyZXR1cm5bXX07dC5wcm90b3R5cGUuX2NvbG9yVG9Dc3M9ZnVuY3Rpb24oZSl7cmV0dXJuXCIjXCIrKFwiMDAwMDAwXCIrZS50b1N0cmluZygxNikpLnN1YnN0cigtNil9O3QucHJvdG90eXBlLl9pbnRlcmFjdD1mdW5jdGlvbihuLGksbyxhKXt2YXIgcz10aGlzO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldFgtZS50YXJnZXQub2Zmc2V0V2lkdGgvMjt2YXIgcj1lLm9mZnNldFktZS50YXJnZXQub2Zmc2V0SGVpZ2h0LzI7cy5faW50ZXJhY3QkLm5leHQoe2N1cnNvcjpvLG9mZnNldFg6dCxvZmZzZXRZOnIsb3BlcmF0aW9uOm4sdGFnOmksdmVydGV4SW5kZXg6YX0pfX07cmV0dXJuIHR9KE0uUmVuZGVyVGFnKTtyLlNwb3RSZW5kZXJUYWc9aX0se1wiLi4vLi4vLi4vQ29tcG9uZW50XCI6MjkxLFwiLi4vLi4vLi4vVmlld2VyXCI6MzAyLFwidmlydHVhbC1kb21cIjoyNDd9XSw0MDE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNwb3RUYWc9dm9pZCAwO3ZhciBpPWUoXCIuLi8uLi8uLi9Db21wb25lbnRcIik7dmFyIG89ZnVuY3Rpb24oaSl7bihlLGkpO2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPWkuY2FsbCh0aGlzLGUsdCl8fHRoaXM7cj0hIXI/cjp7fTtuLl9jb2xvcj1yLmNvbG9yPT1udWxsPzE2Nzc3MjE1OnIuY29sb3I7bi5fZWRpdGFibGU9ci5lZGl0YWJsZT09bnVsbD9mYWxzZTpyLmVkaXRhYmxlO24uX2ljb249ci5pY29uPT09dW5kZWZpbmVkP251bGw6ci5pY29uO24uX3RleHQ9ci50ZXh0PT09dW5kZWZpbmVkP251bGw6ci50ZXh0O24uX3RleHRDb2xvcj1yLnRleHRDb2xvcj09bnVsbD8xNjc3NzIxNTpyLnRleHRDb2xvcjtyZXR1cm4gbn1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sb3J9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9jb2xvcj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJlZGl0YWJsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWRpdGFibGV9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZT1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpY29uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pY29ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faWNvbj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdGV4dD1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0Q29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHRDb2xvcn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3RleHRDb2xvcj1lO3RoaXMuX25vdGlmeUNoYW5nZWQkLm5leHQodGhpcyl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbG9yPWUuY29sb3I9PW51bGw/dGhpcy5fY29sb3I6ZS5jb2xvcjt0aGlzLl9lZGl0YWJsZT1lLmVkaXRhYmxlPT1udWxsP3RoaXMuX2VkaXRhYmxlOmUuZWRpdGFibGU7dGhpcy5faWNvbj1lLmljb249PT11bmRlZmluZWQ/dGhpcy5faWNvbjplLmljb247dGhpcy5fdGV4dD1lLnRleHQ9PT11bmRlZmluZWQ/dGhpcy5fdGV4dDplLnRleHQ7dGhpcy5fdGV4dENvbG9yPWUudGV4dENvbG9yPT1udWxsP3RoaXMuX3RleHRDb2xvcjplLnRleHRDb2xvcjt0aGlzLl9ub3RpZnlDaGFuZ2VkJC5uZXh0KHRoaXMpfTtyZXR1cm4gZX0oaS5UYWcpO3IuU3BvdFRhZz1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi8uLi9Db21wb25lbnRcIjoyOTF9XSw0MDI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlRhZz12b2lkIDA7dmFyIGE9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBzPWUoXCJyeGpzXCIpO3ZhciBuPWUoXCIuLi8uLi8uLi9VdGlsc1wiKTt2YXIgaT1mdW5jdGlvbihuKXtvKGksbik7ZnVuY3Rpb24gaShlLHQpe3ZhciByPW4uY2FsbCh0aGlzKXx8dGhpcztyLl9pZD1lO3IuX2dlb21ldHJ5PXQ7ci5fbm90aWZ5Q2hhbmdlZCQ9bmV3IHMuU3ViamVjdDtyLl9ub3RpZnlDaGFuZ2VkJC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ci5maXJlKGkuY2hhbmdlZCxyKX0pO3IuX2dlb21ldHJ5LmNoYW5nZWQkLnN1YnNjcmliZShmdW5jdGlvbihlKXtyLmZpcmUoaS5nZW9tZXRyeWNoYW5nZWQscil9KTtyZXR1cm4gcn1PYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJnZW9tZXRyeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2VvbWV0cnl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJjaGFuZ2VkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm90aWZ5Q2hhbmdlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJnZW9tZXRyeUNoYW5nZWQkXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX2dlb21ldHJ5LmNoYW5nZWQkLnBpcGUoYS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHR9KSxhLnNoYXJlKCkpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7aS5jaGFuZ2VkPVwiY2hhbmdlZFwiO2kuZ2VvbWV0cnljaGFuZ2VkPVwiZ2VvbWV0cnljaGFuZ2VkXCI7cmV0dXJuIGl9KG4uRXZlbnRFbWl0dGVyKTtyLlRhZz1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi8uLi9VdGlsc1wiOjMwMSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSw0MDM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuVGFnRG9tYWluPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiVHdvRGltZW5zaW9uYWxcIl09MF09XCJUd29EaW1lbnNpb25hbFwiO2VbZVtcIlRocmVlRGltZW5zaW9uYWxcIl09MV09XCJUaHJlZURpbWVuc2lvbmFsXCJ9KShuPXIuVGFnRG9tYWlufHwoci5UYWdEb21haW49e30pKTtyLmRlZmF1bHQ9bn0se31dLDQwNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Db21wb25lbnRTaXplPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiQXV0b21hdGljXCJdPTBdPVwiQXV0b21hdGljXCI7ZVtlW1wiTGFyZ2VcIl09MV09XCJMYXJnZVwiO2VbZVtcIlNtYWxsXCJdPTJdPVwiU21hbGxcIn0pKG49ci5Db21wb25lbnRTaXplfHwoci5Db21wb25lbnRTaXplPXt9KSk7ci5kZWZhdWx0PW59LHt9XSw0MDU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuSGFuZGxlckJhc2U9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fY29tcG9uZW50PWU7dGhpcy5fY29udGFpbmVyPXQ7dGhpcy5fbmF2aWdhdG9yPXI7dGhpcy5fZW5hYmxlZD1mYWxzZX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0VuYWJsZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXtpZih0aGlzLl9lbmFibGVkfHwhdGhpcy5fY29tcG9uZW50LmFjdGl2YXRlZCl7cmV0dXJufXRoaXMuX2VuYWJsZSgpO3RoaXMuX2VuYWJsZWQ9dHJ1ZTt0aGlzLl9jb21wb25lbnQuY29uZmlndXJlKHRoaXMuX2dldENvbmZpZ3VyYXRpb24odHJ1ZSkpfTtlLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2VuYWJsZWQpe3JldHVybn10aGlzLl9kaXNhYmxlKCk7dGhpcy5fZW5hYmxlZD1mYWxzZTtpZih0aGlzLl9jb21wb25lbnQuYWN0aXZhdGVkKXt0aGlzLl9jb21wb25lbnQuY29uZmlndXJlKHRoaXMuX2dldENvbmZpZ3VyYXRpb24oZmFsc2UpKX19O3JldHVybiBlfSgpO3IuSGFuZGxlckJhc2U9bjtyLmRlZmF1bHQ9bn0se31dLDQwNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5NZXNoRmFjdG9yeT12b2lkIDA7dmFyIGI9ZShcInRocmVlXCIpO3ZhciBsPWUoXCIuLi8uLi9Db21wb25lbnRcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5faW1hZ2VQbGFuZURlcHRoPWUhPW51bGw/ZToyMDA7dGhpcy5faW1hZ2VTcGhlcmVSYWRpdXM9dCE9bnVsbD90OjIwMH1lLnByb3RvdHlwZS5jcmVhdGVNZXNoPWZ1bmN0aW9uKGUsdCl7aWYoZS5wYW5vKXtyZXR1cm4gdGhpcy5fY3JlYXRlSW1hZ2VTcGhlcmUoZSx0KX1lbHNlIGlmKHQuY2FtZXJhUHJvamVjdGlvbj09PVwiZmlzaGV5ZVwiKXtyZXR1cm4gdGhpcy5fY3JlYXRlSW1hZ2VQbGFuZUZpc2hleWUoZSx0KX1lbHNle3JldHVybiB0aGlzLl9jcmVhdGVJbWFnZVBsYW5lKGUsdCl9fTtlLnByb3RvdHlwZS5jcmVhdGVGbGF0TWVzaD1mdW5jdGlvbihlLHQscixuLGksbyl7dmFyIGE9dGhpcy5fY3JlYXRlVGV4dHVyZShlLmltYWdlKTt2YXIgcz10aGlzLl9jcmVhdGVEaXN0b3J0ZWRQbGFuZU1hdGVyaWFsUGFyYW1ldGVycyh0LGEpO3ZhciB1PW5ldyBiLlNoYWRlck1hdGVyaWFsKHMpO3ZhciBjPXRoaXMuX2dldEZsYXRJbWFnZVBsYW5lR2VvRnJvbUJhc2ljKHQscixuLGksbyk7cmV0dXJuIG5ldyBiLk1lc2goYyx1KX07ZS5wcm90b3R5cGUuY3JlYXRlQ3VydGFpbk1lc2g9ZnVuY3Rpb24oZSx0KXtpZihlLnBhbm8mJiFlLmZ1bGxQYW5vKXt0aHJvdyBuZXcgRXJyb3IoXCJDcm9wcGVkIHBhbm9yYW1hcyBjYW5ub3QgaGF2ZSBjdXJ0YWluLlwiKX1pZihlLnBhbm8pe3JldHVybiB0aGlzLl9jcmVhdGVTcGhlcmVDdXJ0YWluTWVzaChlLHQpfWVsc2UgaWYodC5jYW1lcmFQcm9qZWN0aW9uPT09XCJmaXNoZXllXCIpe3JldHVybiB0aGlzLl9jcmVhdGVDdXJ0YWluTWVzaEZpc2hleWUoZSx0KX1lbHNle3JldHVybiB0aGlzLl9jcmVhdGVDdXJ0YWluTWVzaChlLHQpfX07ZS5wcm90b3R5cGUuY3JlYXRlRGlzdG9ydGVkQ3VydGFpbk1lc2g9ZnVuY3Rpb24oZSx0KXtpZihlLnBhbm8pe3Rocm93IG5ldyBFcnJvcihcIkNyb3BwZWQgcGFub3JhbWFzIGNhbm5vdCBoYXZlIGN1cnRhaW4uXCIpfXJldHVybiB0aGlzLl9jcmVhdGVEaXN0b3J0ZWRDdXJ0YWluTWVzaChlLHQpfTtlLnByb3RvdHlwZS5fY3JlYXRlQ3VydGFpbk1lc2g9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9jcmVhdGVUZXh0dXJlKGUuaW1hZ2UpO3ZhciBuPXRoaXMuX2NyZWF0ZUN1cnRhaW5QbGFuZU1hdGVyaWFsUGFyYW1ldGVycyh0LHIpO3ZhciBpPW5ldyBiLlNoYWRlck1hdGVyaWFsKG4pO3ZhciBvPXRoaXMuX3VzZU1lc2godCxlKT90aGlzLl9nZXRJbWFnZVBsYW5lR2VvKHQsZSk6dGhpcy5fZ2V0UmVndWxhckZsYXRJbWFnZVBsYW5lR2VvKHQpO3JldHVybiBuZXcgYi5NZXNoKG8saSl9O2UucHJvdG90eXBlLl9jcmVhdGVDdXJ0YWluTWVzaEZpc2hleWU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9jcmVhdGVUZXh0dXJlKGUuaW1hZ2UpO3ZhciBuPXRoaXMuX2NyZWF0ZUN1cnRhaW5QbGFuZU1hdGVyaWFsUGFyYW1ldGVyc0Zpc2hleWUodCxyKTt2YXIgaT1uZXcgYi5TaGFkZXJNYXRlcmlhbChuKTt2YXIgbz10aGlzLl91c2VNZXNoKHQsZSk/dGhpcy5fZ2V0SW1hZ2VQbGFuZUdlb0Zpc2hleWUodCxlKTp0aGlzLl9nZXRSZWd1bGFyRmxhdEltYWdlUGxhbmVHZW8odCk7cmV0dXJuIG5ldyBiLk1lc2gobyxpKX07ZS5wcm90b3R5cGUuX2NyZWF0ZURpc3RvcnRlZEN1cnRhaW5NZXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fY3JlYXRlVGV4dHVyZShlLmltYWdlKTt2YXIgbj10aGlzLl9jcmVhdGVEaXN0b3J0ZWRDdXJ0YWluUGxhbmVNYXRlcmlhbFBhcmFtZXRlcnModCxyKTt2YXIgaT1uZXcgYi5TaGFkZXJNYXRlcmlhbChuKTt2YXIgbz10aGlzLl9nZXRSZWd1bGFyRmxhdEltYWdlUGxhbmVHZW8odCk7cmV0dXJuIG5ldyBiLk1lc2gobyxpKX07ZS5wcm90b3R5cGUuX2NyZWF0ZVNwaGVyZUN1cnRhaW5NZXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fY3JlYXRlVGV4dHVyZShlLmltYWdlKTt2YXIgbj10aGlzLl9jcmVhdGVDdXJ0YWluU3BoZXJlTWF0ZXJpYWxQYXJhbWV0ZXJzKHQscik7dmFyIGk9bmV3IGIuU2hhZGVyTWF0ZXJpYWwobik7cmV0dXJuIHRoaXMuX3VzZU1lc2godCxlKT9uZXcgYi5NZXNoKHRoaXMuX2dldEltYWdlU3BoZXJlR2VvKHQsZSksaSk6bmV3IGIuTWVzaCh0aGlzLl9nZXRGbGF0SW1hZ2VTcGhlcmVHZW8odCksaSl9O2UucHJvdG90eXBlLl9jcmVhdGVJbWFnZVNwaGVyZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NyZWF0ZVRleHR1cmUoZS5pbWFnZSk7dmFyIG49dGhpcy5fY3JlYXRlU3BoZXJlTWF0ZXJpYWxQYXJhbWV0ZXJzKHQscik7dmFyIGk9bmV3IGIuU2hhZGVyTWF0ZXJpYWwobik7dmFyIG89dGhpcy5fdXNlTWVzaCh0LGUpP25ldyBiLk1lc2godGhpcy5fZ2V0SW1hZ2VTcGhlcmVHZW8odCxlKSxpKTpuZXcgYi5NZXNoKHRoaXMuX2dldEZsYXRJbWFnZVNwaGVyZUdlbyh0KSxpKTtyZXR1cm4gb307ZS5wcm90b3R5cGUuX2NyZWF0ZUltYWdlUGxhbmU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9jcmVhdGVUZXh0dXJlKGUuaW1hZ2UpO3ZhciBuPXRoaXMuX2NyZWF0ZVBsYW5lTWF0ZXJpYWxQYXJhbWV0ZXJzKHQscik7dmFyIGk9bmV3IGIuU2hhZGVyTWF0ZXJpYWwobik7dmFyIG89dGhpcy5fdXNlTWVzaCh0LGUpP3RoaXMuX2dldEltYWdlUGxhbmVHZW8odCxlKTp0aGlzLl9nZXRSZWd1bGFyRmxhdEltYWdlUGxhbmVHZW8odCk7cmV0dXJuIG5ldyBiLk1lc2gobyxpKX07ZS5wcm90b3R5cGUuX2NyZWF0ZUltYWdlUGxhbmVGaXNoZXllPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fY3JlYXRlVGV4dHVyZShlLmltYWdlKTt2YXIgbj10aGlzLl9jcmVhdGVQbGFuZU1hdGVyaWFsUGFyYW1ldGVyc0Zpc2hleWUodCxyKTt2YXIgaT1uZXcgYi5TaGFkZXJNYXRlcmlhbChuKTt2YXIgbz10aGlzLl91c2VNZXNoKHQsZSk/dGhpcy5fZ2V0SW1hZ2VQbGFuZUdlb0Zpc2hleWUodCxlKTp0aGlzLl9nZXRSZWd1bGFyRmxhdEltYWdlUGxhbmVHZW9GaXNoZXllKHQpO3JldHVybiBuZXcgYi5NZXNoKG8saSl9O2UucHJvdG90eXBlLl9jcmVhdGVTcGhlcmVNYXRlcmlhbFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmdwYW5vO3ZhciBuPShyLkZ1bGxQYW5vV2lkdGhQaXhlbHMtci5Dcm9wcGVkQXJlYUltYWdlV2lkdGhQaXhlbHMpLzI7dmFyIGk9MipNYXRoLlBJKihyLkNyb3BwZWRBcmVhTGVmdFBpeGVscy1uKS9yLkZ1bGxQYW5vV2lkdGhQaXhlbHM7dmFyIG89MipNYXRoLlBJKnIuQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzL3IuRnVsbFBhbm9XaWR0aFBpeGVsczt2YXIgYT0oci5GdWxsUGFub0hlaWdodFBpeGVscy1yLkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHMpLzI7dmFyIHM9TWF0aC5QSSooYS1yLkNyb3BwZWRBcmVhVG9wUGl4ZWxzKS9yLkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzO3ZhciB1PU1hdGguUEkqci5Dcm9wcGVkQXJlYUltYWdlSGVpZ2h0UGl4ZWxzL3IuRnVsbFBhbm9IZWlnaHRQaXhlbHM7dmFyIGM9e2RlcHRoV3JpdGU6ZmFsc2UsZnJhZ21lbnRTaGFkZXI6bC5TaGFkZXJzLmVxdWlyZWN0YW5ndWxhci5mcmFnbWVudCxzaWRlOmIuRG91YmxlU2lkZSx0cmFuc3BhcmVudDp0cnVlLHVuaWZvcm1zOntvcGFjaXR5Ont2YWx1ZToxfSxwaGlMZW5ndGg6e3ZhbHVlOm99LHBoaVNoaWZ0Ont2YWx1ZTppfSxwcm9qZWN0b3JNYXQ6e3ZhbHVlOmUucnR9LHByb2plY3RvclRleDp7dmFsdWU6dH0sdGhldGFMZW5ndGg6e3ZhbHVlOnV9LHRoZXRhU2hpZnQ6e3ZhbHVlOnN9fSx2ZXJ0ZXhTaGFkZXI6bC5TaGFkZXJzLmVxdWlyZWN0YW5ndWxhci52ZXJ0ZXh9O3JldHVybiBjfTtlLnByb3RvdHlwZS5fY3JlYXRlQ3VydGFpblNwaGVyZU1hdGVyaWFsUGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3ZhciByPWUuZ3Bhbm87dmFyIG49KHIuRnVsbFBhbm9XaWR0aFBpeGVscy1yLkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscykvMjt2YXIgaT0yKk1hdGguUEkqKHIuQ3JvcHBlZEFyZWFMZWZ0UGl4ZWxzLW4pL3IuRnVsbFBhbm9XaWR0aFBpeGVsczt2YXIgbz0yKk1hdGguUEkqci5Dcm9wcGVkQXJlYUltYWdlV2lkdGhQaXhlbHMvci5GdWxsUGFub1dpZHRoUGl4ZWxzO3ZhciBhPShyLkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzLXIuQ3JvcHBlZEFyZWFJbWFnZUhlaWdodFBpeGVscykvMjt2YXIgcz1NYXRoLlBJKihhLXIuQ3JvcHBlZEFyZWFUb3BQaXhlbHMpL3IuRnVsbFBhbm9IZWlnaHRQaXhlbHM7dmFyIHU9TWF0aC5QSSpyLkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHMvci5GdWxsUGFub0hlaWdodFBpeGVsczt2YXIgYz17ZGVwdGhXcml0ZTpmYWxzZSxmcmFnbWVudFNoYWRlcjpsLlNoYWRlcnMuZXF1aXJlY3Rhbmd1bGFyQ3VydGFpbi5mcmFnbWVudCxzaWRlOmIuRG91YmxlU2lkZSx0cmFuc3BhcmVudDp0cnVlLHVuaWZvcm1zOntjdXJ0YWluOnt2YWx1ZToxfSxvcGFjaXR5Ont2YWx1ZToxfSxwaGlMZW5ndGg6e3ZhbHVlOm99LHBoaVNoaWZ0Ont2YWx1ZTppfSxwcm9qZWN0b3JNYXQ6e3ZhbHVlOmUucnR9LHByb2plY3RvclRleDp7dmFsdWU6dH0sdGhldGFMZW5ndGg6e3ZhbHVlOnV9LHRoZXRhU2hpZnQ6e3ZhbHVlOnN9fSx2ZXJ0ZXhTaGFkZXI6bC5TaGFkZXJzLmVxdWlyZWN0YW5ndWxhckN1cnRhaW4udmVydGV4fTtyZXR1cm4gY307ZS5wcm90b3R5cGUuX2NyZWF0ZVBsYW5lTWF0ZXJpYWxQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e2RlcHRoV3JpdGU6ZmFsc2UsZnJhZ21lbnRTaGFkZXI6bC5TaGFkZXJzLnBlcnNwZWN0aXZlLmZyYWdtZW50LHNpZGU6Yi5Eb3VibGVTaWRlLHRyYW5zcGFyZW50OnRydWUsdW5pZm9ybXM6e2ZvY2FsOnt2YWx1ZTplLmZvY2FsfSxrMTp7dmFsdWU6ZS5jazF9LGsyOnt2YWx1ZTplLmNrMn0sb3BhY2l0eTp7dmFsdWU6MX0scHJvamVjdG9yTWF0Ont2YWx1ZTplLmJhc2ljUnR9LHByb2plY3RvclRleDp7dmFsdWU6dH0scmFkaWFsX3BlYWs6e3ZhbHVlOiEhZS5yYWRpYWxQZWFrP2UucmFkaWFsUGVhazowfSxzY2FsZV94Ont2YWx1ZTpNYXRoLm1heChlLmJhc2ljSGVpZ2h0LGUuYmFzaWNXaWR0aCkvZS5iYXNpY1dpZHRofSxzY2FsZV95Ont2YWx1ZTpNYXRoLm1heChlLmJhc2ljV2lkdGgsZS5iYXNpY0hlaWdodCkvZS5iYXNpY0hlaWdodH19LHZlcnRleFNoYWRlcjpsLlNoYWRlcnMucGVyc3BlY3RpdmUudmVydGV4fTtyZXR1cm4gcn07ZS5wcm90b3R5cGUuX2NyZWF0ZVBsYW5lTWF0ZXJpYWxQYXJhbWV0ZXJzRmlzaGV5ZT1mdW5jdGlvbihlLHQpe3ZhciByPXtkZXB0aFdyaXRlOmZhbHNlLGZyYWdtZW50U2hhZGVyOmwuU2hhZGVycy5maXNoZXllLmZyYWdtZW50LHNpZGU6Yi5Eb3VibGVTaWRlLHRyYW5zcGFyZW50OnRydWUsdW5pZm9ybXM6e2ZvY2FsOnt2YWx1ZTplLmZvY2FsfSxrMTp7dmFsdWU6ZS5jazF9LGsyOnt2YWx1ZTplLmNrMn0sb3BhY2l0eTp7dmFsdWU6MX0scHJvamVjdG9yTWF0Ont2YWx1ZTplLmJhc2ljUnR9LHByb2plY3RvclRleDp7dmFsdWU6dH0scmFkaWFsX3BlYWs6e3ZhbHVlOiEhZS5yYWRpYWxQZWFrP2UucmFkaWFsUGVhazowfSxzY2FsZV94Ont2YWx1ZTpNYXRoLm1heChlLmJhc2ljSGVpZ2h0LGUuYmFzaWNXaWR0aCkvZS5iYXNpY1dpZHRofSxzY2FsZV95Ont2YWx1ZTpNYXRoLm1heChlLmJhc2ljV2lkdGgsZS5iYXNpY0hlaWdodCkvZS5iYXNpY0hlaWdodH19LHZlcnRleFNoYWRlcjpsLlNoYWRlcnMuZmlzaGV5ZS52ZXJ0ZXh9O3JldHVybiByfTtlLnByb3RvdHlwZS5fY3JlYXRlQ3VydGFpblBsYW5lTWF0ZXJpYWxQYXJhbWV0ZXJzRmlzaGV5ZT1mdW5jdGlvbihlLHQpe3ZhciByPXtkZXB0aFdyaXRlOmZhbHNlLGZyYWdtZW50U2hhZGVyOmwuU2hhZGVycy5maXNoZXllQ3VydGFpbi5mcmFnbWVudCxzaWRlOmIuRG91YmxlU2lkZSx0cmFuc3BhcmVudDp0cnVlLHVuaWZvcm1zOntjdXJ0YWluOnt2YWx1ZToxfSxmb2NhbDp7dmFsdWU6ZS5mb2NhbH0sazE6e3ZhbHVlOmUuY2sxfSxrMjp7dmFsdWU6ZS5jazJ9LG9wYWNpdHk6e3ZhbHVlOjF9LHByb2plY3Rvck1hdDp7dmFsdWU6ZS5iYXNpY1J0fSxwcm9qZWN0b3JUZXg6e3ZhbHVlOnR9LHJhZGlhbF9wZWFrOnt2YWx1ZTohIWUucmFkaWFsUGVhaz9lLnJhZGlhbFBlYWs6MH0sc2NhbGVfeDp7dmFsdWU6TWF0aC5tYXgoZS5iYXNpY0hlaWdodCxlLmJhc2ljV2lkdGgpL2UuYmFzaWNXaWR0aH0sc2NhbGVfeTp7dmFsdWU6TWF0aC5tYXgoZS5iYXNpY1dpZHRoLGUuYmFzaWNIZWlnaHQpL2UuYmFzaWNIZWlnaHR9fSx2ZXJ0ZXhTaGFkZXI6bC5TaGFkZXJzLmZpc2hleWVDdXJ0YWluLnZlcnRleH07cmV0dXJuIHJ9O2UucHJvdG90eXBlLl9jcmVhdGVDdXJ0YWluUGxhbmVNYXRlcmlhbFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgcj17ZGVwdGhXcml0ZTpmYWxzZSxmcmFnbWVudFNoYWRlcjpsLlNoYWRlcnMucGVyc3BlY3RpdmVDdXJ0YWluLmZyYWdtZW50LHNpZGU6Yi5Eb3VibGVTaWRlLHRyYW5zcGFyZW50OnRydWUsdW5pZm9ybXM6e2N1cnRhaW46e3ZhbHVlOjF9LGZvY2FsOnt2YWx1ZTplLmZvY2FsfSxrMTp7dmFsdWU6ZS5jazF9LGsyOnt2YWx1ZTplLmNrMn0sb3BhY2l0eTp7dmFsdWU6MX0scHJvamVjdG9yTWF0Ont2YWx1ZTplLmJhc2ljUnR9LHByb2plY3RvclRleDp7dmFsdWU6dH0scmFkaWFsX3BlYWs6e3ZhbHVlOiEhZS5yYWRpYWxQZWFrP2UucmFkaWFsUGVhazowfSxzY2FsZV94Ont2YWx1ZTpNYXRoLm1heChlLmJhc2ljSGVpZ2h0LGUuYmFzaWNXaWR0aCkvZS5iYXNpY1dpZHRofSxzY2FsZV95Ont2YWx1ZTpNYXRoLm1heChlLmJhc2ljV2lkdGgsZS5iYXNpY0hlaWdodCkvZS5iYXNpY0hlaWdodH19LHZlcnRleFNoYWRlcjpsLlNoYWRlcnMucGVyc3BlY3RpdmVDdXJ0YWluLnZlcnRleH07cmV0dXJuIHJ9O2UucHJvdG90eXBlLl9jcmVhdGVEaXN0b3J0ZWRDdXJ0YWluUGxhbmVNYXRlcmlhbFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgcj17ZGVwdGhXcml0ZTpmYWxzZSxmcmFnbWVudFNoYWRlcjpsLlNoYWRlcnMucGVyc3BlY3RpdmVEaXN0b3J0ZWRDdXJ0YWluLmZyYWdtZW50LHNpZGU6Yi5Eb3VibGVTaWRlLHRyYW5zcGFyZW50OnRydWUsdW5pZm9ybXM6e2N1cnRhaW46e3ZhbHVlOjF9LG9wYWNpdHk6e3ZhbHVlOjF9LHByb2plY3Rvck1hdDp7dmFsdWU6ZS5wcm9qZWN0b3JNYXRyaXgoKX0scHJvamVjdG9yVGV4Ont2YWx1ZTp0fX0sdmVydGV4U2hhZGVyOmwuU2hhZGVycy5wZXJzcGVjdGl2ZURpc3RvcnRlZEN1cnRhaW4udmVydGV4fTtyZXR1cm4gcn07ZS5wcm90b3R5cGUuX2NyZWF0ZURpc3RvcnRlZFBsYW5lTWF0ZXJpYWxQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e2RlcHRoV3JpdGU6ZmFsc2UsZnJhZ21lbnRTaGFkZXI6bC5TaGFkZXJzLnBlcnNwZWN0aXZlRGlzdG9ydGVkLmZyYWdtZW50LHNpZGU6Yi5Eb3VibGVTaWRlLHRyYW5zcGFyZW50OnRydWUsdW5pZm9ybXM6e29wYWNpdHk6e3ZhbHVlOjF9LHByb2plY3Rvck1hdDp7dmFsdWU6ZS5wcm9qZWN0b3JNYXRyaXgoKX0scHJvamVjdG9yVGV4Ont2YWx1ZTp0fX0sdmVydGV4U2hhZGVyOmwuU2hhZGVycy5wZXJzcGVjdGl2ZURpc3RvcnRlZC52ZXJ0ZXh9O3JldHVybiByfTtlLnByb3RvdHlwZS5fY3JlYXRlVGV4dHVyZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgYi5UZXh0dXJlKGUpO3QubWluRmlsdGVyPWIuTGluZWFyRmlsdGVyO3QubmVlZHNVcGRhdGU9dHJ1ZTtyZXR1cm4gdH07ZS5wcm90b3R5cGUuX3VzZU1lc2g9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tZXNoLnZlcnRpY2VzLmxlbmd0aCYmZS5oYXNWYWxpZFNjYWxlfTtlLnByb3RvdHlwZS5fZ2V0SW1hZ2VTcGhlcmVHZW89ZnVuY3Rpb24oZSx0KXt2YXIgcj0obmV3IGIuTWF0cml4NCkuZ2V0SW52ZXJzZShlLnNydCk7dmFyIG49NSplLnNjYWxlO3ZhciBpPXRoaXMuX2ltYWdlU3BoZXJlUmFkaXVzKmUuc2NhbGU7dmFyIG89dC5tZXNoLnZlcnRpY2VzO3ZhciBhPW8ubGVuZ3RoLzM7dmFyIHM9bmV3IEZsb2F0MzJBcnJheShvLmxlbmd0aCk7Zm9yKHZhciB1PTA7dTxhOysrdSl7dmFyIGM9Myp1O3ZhciBsPW9bYyswXTt2YXIgaD1vW2MrMV07dmFyIHA9b1tjKzJdO3ZhciBmPU1hdGguc3FydChsKmwraCpoK3AqcCk7dmFyIGQ9TWF0aC5tYXgobixNYXRoLm1pbihmLGkpKTt2YXIgdj1kL2Y7dmFyIG09bmV3IGIuVmVjdG9yMyhsKnYsaCp2LHAqdik7bS5hcHBseU1hdHJpeDQocik7c1tjKzBdPW0ueDtzW2MrMV09bS55O3NbYysyXT1tLnp9dmFyIGc9dC5tZXNoLmZhY2VzO3ZhciBfPW5ldyBVaW50MTZBcnJheShnLmxlbmd0aCk7Zm9yKHZhciB1PTA7dTxnLmxlbmd0aDsrK3Upe19bdV09Z1t1XX12YXIgeT1uZXcgYi5CdWZmZXJHZW9tZXRyeTt5LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGIuQnVmZmVyQXR0cmlidXRlKHMsMykpO3kuc2V0SW5kZXgobmV3IGIuQnVmZmVyQXR0cmlidXRlKF8sMSkpO3JldHVybiB5fTtlLnByb3RvdHlwZS5fZ2V0SW1hZ2VQbGFuZUdlbz1mdW5jdGlvbihlLHQpe3ZhciByPTM7dmFyIG49KG5ldyBiLk1hdHJpeDQpLmdldEludmVyc2UoZS5zcnQpO3ZhciBpPTUqZS5zY2FsZTt2YXIgbz10aGlzLl9pbWFnZVBsYW5lRGVwdGgqZS5zY2FsZTt2YXIgYT10Lm1lc2gudmVydGljZXM7dmFyIHM9YS5sZW5ndGgvMzt2YXIgdT1uZXcgRmxvYXQzMkFycmF5KGEubGVuZ3RoKTtmb3IodmFyIGM9MDtjPHM7KytjKXt2YXIgbD0zKmM7dmFyIGg9YVtsKzBdO3ZhciBwPWFbbCsxXTt2YXIgZj1hW2wrMl07aWYoYzw0KXtoKj1yO3AqPXJ9dmFyIGQ9TWF0aC5tYXgoaSxNYXRoLm1pbihmLG8pKTt2YXIgdj1kL2Y7dmFyIG09bmV3IGIuVmVjdG9yMyhoKnYscCp2LGQpO20uYXBwbHlNYXRyaXg0KG4pO3VbbCswXT1tLng7dVtsKzFdPW0ueTt1W2wrMl09bS56fXZhciBnPXQubWVzaC5mYWNlczt2YXIgXz1uZXcgVWludDE2QXJyYXkoZy5sZW5ndGgpO2Zvcih2YXIgYz0wO2M8Zy5sZW5ndGg7KytjKXtfW2NdPWdbY119dmFyIHk9bmV3IGIuQnVmZmVyR2VvbWV0cnk7eS5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBiLkJ1ZmZlckF0dHJpYnV0ZSh1LDMpKTt5LnNldEluZGV4KG5ldyBiLkJ1ZmZlckF0dHJpYnV0ZShfLDEpKTtyZXR1cm4geX07ZS5wcm90b3R5cGUuX2dldEltYWdlUGxhbmVHZW9GaXNoZXllPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG5ldyBiLk1hdHJpeDQpLmdldEludmVyc2UoZS5zcnQpO3ZhciBuPTUqZS5zY2FsZTt2YXIgaT10aGlzLl9pbWFnZVBsYW5lRGVwdGgqZS5zY2FsZTt2YXIgbz10Lm1lc2gudmVydGljZXM7dmFyIGE9by5sZW5ndGgvMzt2YXIgcz1uZXcgRmxvYXQzMkFycmF5KG8ubGVuZ3RoKTtmb3IodmFyIHU9MDt1PGE7Kyt1KXt2YXIgYz0zKnU7dmFyIGw9b1tjKzBdO3ZhciBoPW9bYysxXTt2YXIgcD1vW2MrMl07dmFyIGY9TWF0aC5zcXJ0KGwqbCtoKmgrcCpwKTt2YXIgZD1NYXRoLm1heChuLE1hdGgubWluKGYsaSkpO3ZhciB2PWQvZjt2YXIgbT1uZXcgYi5WZWN0b3IzKGwqdixoKnYscCp2KTttLmFwcGx5TWF0cml4NChyKTtzW2MrMF09bS54O3NbYysxXT1tLnk7c1tjKzJdPW0uen12YXIgZz10Lm1lc2guZmFjZXM7dmFyIF89bmV3IFVpbnQxNkFycmF5KGcubGVuZ3RoKTtmb3IodmFyIHU9MDt1PGcubGVuZ3RoOysrdSl7X1t1XT1nW3VdfXZhciB5PW5ldyBiLkJ1ZmZlckdlb21ldHJ5O3kuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgYi5CdWZmZXJBdHRyaWJ1dGUocywzKSk7eS5zZXRJbmRleChuZXcgYi5CdWZmZXJBdHRyaWJ1dGUoXywxKSk7cmV0dXJuIHl9O2UucHJvdG90eXBlLl9nZXRGbGF0SW1hZ2VTcGhlcmVHZW89ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncGFubzt2YXIgcj0yKk1hdGguUEkqdC5Dcm9wcGVkQXJlYUxlZnRQaXhlbHMvdC5GdWxsUGFub1dpZHRoUGl4ZWxzO3ZhciBuPTIqTWF0aC5QSSp0LkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscy90LkZ1bGxQYW5vV2lkdGhQaXhlbHM7dmFyIGk9TWF0aC5QSSoodC5GdWxsUGFub0hlaWdodFBpeGVscy10LkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHMtdC5Dcm9wcGVkQXJlYVRvcFBpeGVscykvdC5GdWxsUGFub0hlaWdodFBpeGVsczt2YXIgbz1NYXRoLlBJKnQuQ3JvcHBlZEFyZWFJbWFnZUhlaWdodFBpeGVscy90LkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzO3ZhciBhPW5ldyBiLlNwaGVyZUdlb21ldHJ5KHRoaXMuX2ltYWdlU3BoZXJlUmFkaXVzLDIwLDQwLHItTWF0aC5QSS8yLG4saSxvKTthLmFwcGx5TWF0cml4NCgobmV3IGIuTWF0cml4NCkuZ2V0SW52ZXJzZShlLnJ0KSk7cmV0dXJuIGF9O2UucHJvdG90eXBlLl9nZXRSZWd1bGFyRmxhdEltYWdlUGxhbmVHZW89ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aWR0aDt2YXIgcj1lLmhlaWdodDt2YXIgbj1NYXRoLm1heCh0LHIpO3ZhciBpPXQvMi9uO3ZhciBvPXIvMi9uO3JldHVybiB0aGlzLl9nZXRGbGF0SW1hZ2VQbGFuZUdlbyhlLGksbyl9O2UucHJvdG90eXBlLl9nZXRGbGF0SW1hZ2VQbGFuZUdlbz1mdW5jdGlvbihlLHQscil7dmFyIG49W107bi5wdXNoKGUudW5wcm9qZWN0U2ZNKFstdCwtcl0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7bi5wdXNoKGUudW5wcm9qZWN0U2ZNKFt0LC1yXSx0aGlzLl9pbWFnZVBsYW5lRGVwdGgpKTtuLnB1c2goZS51bnByb2plY3RTZk0oW3Qscl0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7bi5wdXNoKGUudW5wcm9qZWN0U2ZNKFstdCxyXSx0aGlzLl9pbWFnZVBsYW5lRGVwdGgpKTtyZXR1cm4gdGhpcy5fY3JlYXRlRmxhdEdlb21ldHJ5KG4pfTtlLnByb3RvdHlwZS5fZ2V0UmVndWxhckZsYXRJbWFnZVBsYW5lR2VvRmlzaGV5ZT1mdW5jdGlvbihlKXt2YXIgdD1lLndpZHRoO3ZhciByPWUuaGVpZ2h0O3ZhciBuPU1hdGgubWF4KHQscik7dmFyIGk9dC8yL247dmFyIG89ci8yL247cmV0dXJuIHRoaXMuX2dldEZsYXRJbWFnZVBsYW5lR2VvRmlzaGV5ZShlLGksbyl9O2UucHJvdG90eXBlLl9nZXRGbGF0SW1hZ2VQbGFuZUdlb0Zpc2hleWU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVtdO24ucHVzaChlLnVucHJvamVjdFNmTShbLXQsLXJdLHRoaXMuX2ltYWdlUGxhbmVEZXB0aCkpO24ucHVzaChlLnVucHJvamVjdFNmTShbdCwtcl0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7bi5wdXNoKGUudW5wcm9qZWN0U2ZNKFt0LHJdLHRoaXMuX2ltYWdlUGxhbmVEZXB0aCkpO24ucHVzaChlLnVucHJvamVjdFNmTShbLXQscl0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7cmV0dXJuIHRoaXMuX2NyZWF0ZUZsYXRHZW9tZXRyeShuKX07ZS5wcm90b3R5cGUuX2dldEZsYXRJbWFnZVBsYW5lR2VvRnJvbUJhc2ljPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89W107by5wdXNoKGUudW5wcm9qZWN0QmFzaWMoW3Qsbl0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7by5wdXNoKGUudW5wcm9qZWN0QmFzaWMoW3Isbl0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7by5wdXNoKGUudW5wcm9qZWN0QmFzaWMoW3IsaV0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7by5wdXNoKGUudW5wcm9qZWN0QmFzaWMoW3QsaV0sdGhpcy5faW1hZ2VQbGFuZURlcHRoKSk7cmV0dXJuIHRoaXMuX2NyZWF0ZUZsYXRHZW9tZXRyeShvKX07ZS5wcm90b3R5cGUuX2NyZWF0ZUZsYXRHZW9tZXRyeT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgRmxvYXQzMkFycmF5KDEyKTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49MypyO3RbbiswXT1lW3JdWzBdO3RbbisxXT1lW3JdWzFdO3RbbisyXT1lW3JdWzJdfXZhciBpPW5ldyBVaW50MTZBcnJheSg2KTtpWzBdPTA7aVsxXT0xO2lbMl09MztpWzNdPTE7aVs0XT0yO2lbNV09Mzt2YXIgbz1uZXcgYi5CdWZmZXJHZW9tZXRyeTtvLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGIuQnVmZmVyQXR0cmlidXRlKHQsMykpO28uc2V0SW5kZXgobmV3IGIuQnVmZmVyQXR0cmlidXRlKGksMSkpO3JldHVybiBvfTtyZXR1cm4gZX0oKTtyLk1lc2hGYWN0b3J5PW47ci5kZWZhdWx0PW59LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSx0aHJlZToyNDJ9XSw0MDc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuTWVzaFNjZW5lPXZvaWQgMDt2YXIgbj1lKFwidGhyZWVcIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fcGxhbmVzPXt9O3RoaXMuX3BsYW5lc09sZD17fTt0aGlzLl9wbGFuZXNQZXJpcGhlcnk9e307dGhpcy5fc2NlbmU9bmV3IG4uU2NlbmU7dGhpcy5fc2NlbmVPbGQ9bmV3IG4uU2NlbmU7dGhpcy5fc2NlbmVQZXJpcGhlcnk9bmV3IG4uU2NlbmV9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGxhbmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGFuZXN9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwbGFuZXNPbGRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYW5lc09sZH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBsYW5lc1BlcmlwaGVyeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxhbmVzUGVyaXBoZXJ5fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2NlbmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjZW5lfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2NlbmVPbGRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjZW5lT2xkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2NlbmVQZXJpcGhlcnlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjZW5lUGVyaXBoZXJ5fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUudXBkYXRlSW1hZ2VQbGFuZXM9ZnVuY3Rpb24oZSl7dGhpcy5fZGlzcG9zZSh0aGlzLl9wbGFuZXNPbGQsdGhpcy5zY2VuZU9sZCk7Zm9yKHZhciB0IGluIHRoaXMuX3BsYW5lcyl7aWYoIXRoaXMuX3BsYW5lcy5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9dmFyIHI9dGhpcy5fcGxhbmVzW3RdO3RoaXMuX3NjZW5lLnJlbW92ZShyKTt0aGlzLl9zY2VuZU9sZC5hZGQocil9Zm9yKHZhciB0IGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHQpKXtjb250aW51ZX10aGlzLl9zY2VuZS5hZGQoZVt0XSl9dGhpcy5fcGxhbmVzT2xkPXRoaXMuX3BsYW5lczt0aGlzLl9wbGFuZXM9ZX07ZS5wcm90b3R5cGUuYWRkSW1hZ2VQbGFuZXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHQpKXtjb250aW51ZX12YXIgcj1lW3RdO3RoaXMuX3NjZW5lLmFkZChyKTt0aGlzLl9wbGFuZXNbdF09cn19O2UucHJvdG90eXBlLmFkZEltYWdlUGxhbmVzT2xkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXtpZighZS5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9dmFyIHI9ZVt0XTt0aGlzLl9zY2VuZU9sZC5hZGQocik7dGhpcy5fcGxhbmVzT2xkW3RdPXJ9fTtlLnByb3RvdHlwZS5zZXRJbWFnZVBsYW5lcz1mdW5jdGlvbihlKXt0aGlzLl9jbGVhcigpO3RoaXMuYWRkSW1hZ2VQbGFuZXMoZSl9O2UucHJvdG90eXBlLmFkZFBlcmlwaGVyeVBsYW5lcz1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkodCkpe2NvbnRpbnVlfXZhciByPWVbdF07dGhpcy5fc2NlbmVQZXJpcGhlcnkuYWRkKHIpO3RoaXMuX3BsYW5lc1BlcmlwaGVyeVt0XT1yfX07ZS5wcm90b3R5cGUuc2V0UGVyaXBoZXJ5UGxhbmVzPWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyUGVyaXBoZXJ5KCk7dGhpcy5hZGRQZXJpcGhlcnlQbGFuZXMoZSl9O2UucHJvdG90eXBlLnNldEltYWdlUGxhbmVzT2xkPWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyT2xkKCk7dGhpcy5hZGRJbWFnZVBsYW5lc09sZChlKX07ZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhcigpO3RoaXMuX2NsZWFyT2xkKCl9O2UucHJvdG90eXBlLl9jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2UodGhpcy5fcGxhbmVzLHRoaXMuX3NjZW5lKTt0aGlzLl9wbGFuZXM9e319O2UucHJvdG90eXBlLl9jbGVhck9sZD1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2UodGhpcy5fcGxhbmVzT2xkLHRoaXMuX3NjZW5lT2xkKTt0aGlzLl9wbGFuZXNPbGQ9e319O2UucHJvdG90eXBlLl9jbGVhclBlcmlwaGVyeT1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2UodGhpcy5fcGxhbmVzUGVyaXBoZXJ5LHRoaXMuX3NjZW5lUGVyaXBoZXJ5KTt0aGlzLl9wbGFuZXNQZXJpcGhlcnk9e319O2UucHJvdG90eXBlLl9kaXNwb3NlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHIpKXtjb250aW51ZX12YXIgbj1lW3JdO3QucmVtb3ZlKG4pO24uZ2VvbWV0cnkuZGlzcG9zZSgpO24ubWF0ZXJpYWwuZGlzcG9zZSgpO3ZhciBpPW4ubWF0ZXJpYWwudW5pZm9ybXMucHJvamVjdG9yVGV4LnZhbHVlO2lmKGkhPW51bGwpe2kuZGlzcG9zZSgpfX19O3JldHVybiBlfSgpO3IuTWVzaFNjZW5lPWk7ci5kZWZhdWx0PWl9LHt0aHJlZToyNDJ9XSw0MDg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuTW91c2VPcGVyYXRvcj12b2lkIDA7dmFyIG89ZShcInJ4anNcIik7dmFyIGE9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31lLmZpbHRlcmVkUGFpcndpc2VNb3VzZURyYWckPWZ1bmN0aW9uKG4saSl7cmV0dXJuIGkuZmlsdGVyZWQkKG4saS5tb3VzZURyYWdTdGFydCQpLnBpcGUoYS5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9by5jb25jYXQoby5vZihlKSxpLmZpbHRlcmVkJChuLGkubW91c2VEcmFnJCkpO3ZhciByPWkuZmlsdGVyZWQkKG4saS5tb3VzZURyYWdFbmQkKS5waXBlKGEubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9KSk7cmV0dXJuIG8ubWVyZ2UodCxyKS5waXBlKGEudGFrZVdoaWxlKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pLGEuc3RhcnRXaXRoKG51bGwpKX0pLGEucGFpcndpc2UoKSxhLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZVswXSE9bnVsbCYmZVsxXSE9bnVsbH0pKX07cmV0dXJuIGV9KCk7ci5Nb3VzZU9wZXJhdG9yPW47ci5kZWZhdWx0PW59LHtyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSw0MDk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlpvb21Db21wb25lbnQ9dm9pZCAwO3ZhciBvPWUoXCJyeGpzXCIpO3ZhciBhPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgcD1lKFwidmlydHVhbC1kb21cIik7dmFyIGk9ZShcIi4uLy4uL0NvbXBvbmVudFwiKTt2YXIgcz1lKFwiLi4vLi4vR2VvXCIpO3ZhciBmPWUoXCIuLi8uLi9TdGF0ZVwiKTt2YXIgZD1lKFwiLi4vdXRpbHMvQ29tcG9uZW50U2l6ZVwiKTt2YXIgdT1mdW5jdGlvbihpKXtuKGUsaSk7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49aS5jYWxsKHRoaXMsZSx0LHIpfHx0aGlzO24uX3ZpZXdwb3J0Q29vcmRzPW5ldyBzLlZpZXdwb3J0Q29vcmRzO24uX3pvb21EZWx0YSQ9bmV3IG8uU3ViamVjdDtyZXR1cm4gbn1lLnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt2YXIgaD10aGlzO3RoaXMuX3JlbmRlclN1YnNjcmlwdGlvbj1vLmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuc3RhdGUkLHRoaXMuX2NvbmZpZ3VyYXRpb24kLHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnNpemUkKS5waXBlKGEubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXSxpPWVbM107dmFyIG89dC5zdGF0ZS56b29tO3ZhciBhPXAuaChcImRpdi5ab29tSW5JY29uXCIsW10pO3ZhciBzPW8+PTN8fHI9PT1mLlN0YXRlLldhaXRpbmc/cC5oKFwiZGl2Llpvb21JbkJ1dHRvbkRpc2FibGVkXCIsW2FdKTpwLmgoXCJkaXYuWm9vbUluQnV0dG9uXCIse29uY2xpY2s6ZnVuY3Rpb24oKXtoLl96b29tRGVsdGEkLm5leHQoMSl9fSxbYV0pO3ZhciB1PXAuaChcImRpdi5ab29tT3V0SWNvblwiLFtdKTt2YXIgYz1vPD0wfHxyPT09Zi5TdGF0ZS5XYWl0aW5nP3AuaChcImRpdi5ab29tT3V0QnV0dG9uRGlzYWJsZWRcIixbdV0pOnAuaChcImRpdi5ab29tT3V0QnV0dG9uXCIse29uY2xpY2s6ZnVuY3Rpb24oKXtoLl96b29tRGVsdGEkLm5leHQoLTEpfX0sW3VdKTt2YXIgbD1uLnNpemU9PT1kLmRlZmF1bHQuU21hbGx8fG4uc2l6ZT09PWQuZGVmYXVsdC5BdXRvbWF0aWMmJmkud2lkdGg8NjQwP1wiLlpvb21Db21wYWN0XCI6XCJcIjtyZXR1cm57bmFtZTpoLl9uYW1lLHZub2RlOnAuaChcImRpdi5ab29tQ29udGFpbmVyXCIrbCx7b25jb250ZXh0bWVudTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9fSxbcyxjXSl9fSkpLnN1YnNjcmliZSh0aGlzLl9jb250YWluZXIuZG9tUmVuZGVyZXIucmVuZGVyJCk7dGhpcy5fem9vbVN1YnNjcmlwdGlvbj10aGlzLl96b29tRGVsdGEkLnBpcGUoYS53aXRoTGF0ZXN0RnJvbSh0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLHRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudFRyYW5zZm9ybSQpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdO3ZhciBpPWguX3ZpZXdwb3J0Q29vcmRzLnVucHJvamVjdEZyb21WaWV3cG9ydCgwLDAsci5wZXJzcGVjdGl2ZSk7dmFyIG89bi5wcm9qZWN0QmFzaWMoaS50b0FycmF5KCkpO2guX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuem9vbUluKHQsbyl9KX07ZS5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl96b29tU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCl9O2UucHJvdG90eXBlLl9nZXREZWZhdWx0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybntzaXplOmQuZGVmYXVsdC5BdXRvbWF0aWN9fTtlLmNvbXBvbmVudE5hbWU9XCJ6b29tXCI7cmV0dXJuIGV9KGkuQ29tcG9uZW50KTtyLlpvb21Db21wb25lbnQ9dTtpLkNvbXBvbmVudFNlcnZpY2UucmVnaXN0ZXIodSk7ci5kZWZhdWx0PXV9LHtcIi4uLy4uL0NvbXBvbmVudFwiOjI5MSxcIi4uLy4uL0dlb1wiOjI5NCxcIi4uLy4uL1N0YXRlXCI6Mjk4LFwiLi4vdXRpbHMvQ29tcG9uZW50U2l6ZVwiOjQwNCxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsXCJ2aXJ0dWFsLWRvbVwiOjI0N31dLDQxMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuQWJvcnRNYXBpbGxhcnlFcnJvcj12b2lkIDA7dmFyIG49ZShcIi4vTWFwaWxsYXJ5RXJyb3JcIik7dmFyIG89ZnVuY3Rpb24ocil7aShuLHIpO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSE9bnVsbD9lOlwiVGhlIHJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpfHx0aGlzO09iamVjdC5zZXRQcm90b3R5cGVPZih0LG4ucHJvdG90eXBlKTt0Lm5hbWU9XCJBYm9ydE1hcGlsbGFyeUVycm9yXCI7cmV0dXJuIHR9cmV0dXJuIG59KG4uTWFwaWxsYXJ5RXJyb3IpO3IuQWJvcnRNYXBpbGxhcnlFcnJvcj1vO3IuZGVmYXVsdD1vfSx7XCIuL01hcGlsbGFyeUVycm9yXCI6NDEzfV0sNDExOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Bcmd1bWVudE1hcGlsbGFyeUVycm9yPXZvaWQgMDt2YXIgbj1lKFwiLi9NYXBpbGxhcnlFcnJvclwiKTt2YXIgbz1mdW5jdGlvbihyKXtpKG4scik7ZnVuY3Rpb24gbihlKXt2YXIgdD1yLmNhbGwodGhpcyxlIT1udWxsP2U6XCJUaGUgYXJndW1lbnQgaXMgbm90IHZhbGlkLlwiKXx8dGhpcztPYmplY3Quc2V0UHJvdG90eXBlT2YodCxuLnByb3RvdHlwZSk7dC5uYW1lPVwiQXJndW1lbnRNYXBpbGxhcnlFcnJvclwiO3JldHVybiB0fXJldHVybiBufShuLk1hcGlsbGFyeUVycm9yKTtyLkFyZ3VtZW50TWFwaWxsYXJ5RXJyb3I9bztyLmRlZmF1bHQ9b30se1wiLi9NYXBpbGxhcnlFcnJvclwiOjQxM31dLDQxMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR3JhcGhNYXBpbGxhcnlFcnJvcj12b2lkIDA7dmFyIG49ZShcIi4vTWFwaWxsYXJ5RXJyb3JcIik7dmFyIG89ZnVuY3Rpb24ocil7aShuLHIpO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSl8fHRoaXM7T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsbi5wcm90b3R5cGUpO3QubmFtZT1cIkdyYXBoTWFwaWxsYXJ5RXJyb3JcIjtyZXR1cm4gdH1yZXR1cm4gbn0obi5NYXBpbGxhcnlFcnJvcik7ci5HcmFwaE1hcGlsbGFyeUVycm9yPW87ci5kZWZhdWx0PW99LHtcIi4vTWFwaWxsYXJ5RXJyb3JcIjo0MTN9XSw0MTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLk1hcGlsbGFyeUVycm9yPXZvaWQgMDt2YXIgbj1mdW5jdGlvbihyKXtpKG4scik7ZnVuY3Rpb24gbihlKXt2YXIgdD1yLmNhbGwodGhpcyxlKXx8dGhpcztPYmplY3Quc2V0UHJvdG90eXBlT2YodCxuLnByb3RvdHlwZSk7dC5uYW1lPVwiTWFwaWxsYXJ5RXJyb3JcIjtyZXR1cm4gdH1yZXR1cm4gbn0oRXJyb3IpO3IuTWFwaWxsYXJ5RXJyb3I9bjtyLmRlZmF1bHQ9bn0se31dLDQxNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5DYW1lcmE9dm9pZCAwO3ZhciBuPWUoXCJ0aHJlZVwiKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSE9bnVsbCl7dGhpcy5fcG9zaXRpb249KG5ldyBuLlZlY3RvcjMpLmZyb21BcnJheShlLnVucHJvamVjdFNmTShbMCwwXSwwKSk7dGhpcy5fbG9va2F0PShuZXcgbi5WZWN0b3IzKS5mcm9tQXJyYXkoZS51bnByb2plY3RTZk0oWzAsMF0sMTApKTt0aGlzLl91cD1lLnVwVmVjdG9yKCk7dGhpcy5fZm9jYWw9dGhpcy5fZ2V0Rm9jYWwoZSl9ZWxzZXt0aGlzLl9wb3NpdGlvbj1uZXcgbi5WZWN0b3IzKDAsMCwwKTt0aGlzLl9sb29rYXQ9bmV3IG4uVmVjdG9yMygwLDAsMSk7dGhpcy5fdXA9bmV3IG4uVmVjdG9yMygwLC0xLDApO3RoaXMuX2ZvY2FsPTF9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImxvb2thdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9va2F0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidXBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VwfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9jYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvY2FsfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fZm9jYWw9ZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3QucHJvdG90eXBlLmxlcnBDYW1lcmFzPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9wb3NpdGlvbi5zdWJWZWN0b3JzKHQucG9zaXRpb24sZS5wb3NpdGlvbikubXVsdGlwbHlTY2FsYXIocikuYWRkKGUucG9zaXRpb24pO3RoaXMuX2xvb2thdC5zdWJWZWN0b3JzKHQubG9va2F0LGUubG9va2F0KS5tdWx0aXBseVNjYWxhcihyKS5hZGQoZS5sb29rYXQpO3RoaXMuX3VwLnN1YlZlY3RvcnModC51cCxlLnVwKS5tdWx0aXBseVNjYWxhcihyKS5hZGQoZS51cCk7dGhpcy5fZm9jYWw9KDEtcikqZS5mb2NhbCtyKnQuZm9jYWx9O3QucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSl7dGhpcy5fcG9zaXRpb24uY29weShlLnBvc2l0aW9uKTt0aGlzLl9sb29rYXQuY29weShlLmxvb2thdCk7dGhpcy5fdXAuY29weShlLnVwKTt0aGlzLl9mb2NhbD1lLmZvY2FsfTt0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPW5ldyB0O2UucG9zaXRpb24uY29weSh0aGlzLl9wb3NpdGlvbik7ZS5sb29rYXQuY29weSh0aGlzLl9sb29rYXQpO2UudXAuY29weSh0aGlzLl91cCk7ZS5mb2NhbD10aGlzLl9mb2NhbDtyZXR1cm4gZX07dC5wcm90b3R5cGUuZGlmZj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9wb3NpdGlvbi5kaXN0YW5jZVRvU3F1YXJlZChlLnBvc2l0aW9uKTt2YXIgcj10aGlzLl9sb29rYXQuZGlzdGFuY2VUb1NxdWFyZWQoZS5sb29rYXQpO3ZhciBuPXRoaXMuX3VwLmRpc3RhbmNlVG9TcXVhcmVkKGUudXApO3ZhciBpPTEwMCpNYXRoLmFicyh0aGlzLl9mb2NhbC1lLmZvY2FsKTtyZXR1cm4gTWF0aC5tYXgodCxyLG4saSl9O3QucHJvdG90eXBlLl9nZXRGb2NhbD1mdW5jdGlvbihlKXtpZihlLmdwYW5vPT1udWxsKXtyZXR1cm4gZS5mb2NhbH12YXIgdD1NYXRoLlBJKmUuZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZUhlaWdodFBpeGVscy9lLmdwYW5vLkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzO3ZhciByPS41L01hdGgudGFuKHQvMik7cmV0dXJuIE1hdGgubWluKDEvKDIqKE1hdGguc3FydCgyKS0xKSksTWF0aC5tYXgoLjUscikpfTtyZXR1cm4gdH0oKTtyLkNhbWVyYT1pfSx7dGhyZWU6MjQyfV0sNDE1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLmNvbXB1dGVQcm9qZWN0ZWRQb2ludHM9ci5jb21wdXRlVHJhbnNsYXRpb249dm9pZCAwO3ZhciBwPWUoXCJ0aHJlZVwiKTt2YXIgbj1lKFwiLi4vR2VvXCIpO3ZhciBhPW5ldyBuLkdlb0Nvb3Jkczt2YXIgcz1uZXcgbi5TcGF0aWFsO2Z1bmN0aW9uIGkoZSx0LHIpe3ZhciBuPWEuZ2VvZGV0aWNUb0VudShlLmxhdCxlLmxvbixlLmFsdCxyLmxhdCxyLmxvbixyLmFsdCk7dmFyIGk9cy5yb3RhdGUobix0KTt2YXIgbz1bLWkueCwtaS55LC1pLnpdO3JldHVybiBvfXIuY29tcHV0ZVRyYW5zbGF0aW9uPWk7ZnVuY3Rpb24gbyhuLGUsdCxyLGkpe3ZhciBvPVtdO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7KythKXt2YXIgcz1lW2FdO3ZhciB1PXRbYV07Zm9yKHZhciBjPTA7Yzw9cjsrK2Mpe28ucHVzaChbc1swXSt1WzBdKmMvcixzWzFdK3VbMV0qYy9yXSl9fXZhciBsPW5ldyBwLkNhbWVyYTtsLnVwLmNvcHkobi51cFZlY3RvcigpKTtsLnBvc2l0aW9uLmNvcHkoKG5ldyBwLlZlY3RvcjMpLmZyb21BcnJheShuLnVucHJvamVjdFNmTShbMCwwXSwwKSkpO2wubG9va0F0KChuZXcgcC5WZWN0b3IzKS5mcm9tQXJyYXkobi51bnByb2plY3RTZk0oWzAsMF0sMTApKSk7bC51cGRhdGVNYXRyaXgoKTtsLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO3ZhciBoPW8ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PW4udW5wcm9qZWN0QmFzaWMoZSwxZTQpO3ZhciByPWkud29ybGRUb0NhbWVyYSh0LGwpO3JldHVybltNYXRoLmFicyhyWzBdL3JbMl0pLE1hdGguYWJzKHJbMV0vclsyXSldfSk7cmV0dXJuIGh9ci5jb21wdXRlUHJvamVjdGVkUG9pbnRzPW99LHtcIi4uL0dlb1wiOjI5NCx0aHJlZToyNDJ9XSw0MTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR2VvQ29vcmRzPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl93Z3M4NGE9NjM3ODEzNzt0aGlzLl93Z3M4NGI9NjM1Njc1Mi4zMTQyNDUxOH1lLnByb3RvdHlwZS5nZW9kZXRpY1RvRW51PWZ1bmN0aW9uKGUsdCxyLG4saSxvKXt2YXIgYT10aGlzLmdlb2RldGljVG9FY2VmKGUsdCxyKTtyZXR1cm4gdGhpcy5lY2VmVG9FbnUoYVswXSxhWzFdLGFbMl0sbixpLG8pfTtlLnByb3RvdHlwZS5lbnVUb0dlb2RldGljPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXt2YXIgYT10aGlzLmVudVRvRWNlZihlLHQscixuLGksbyk7cmV0dXJuIHRoaXMuZWNlZlRvR2VvZGV0aWMoYVswXSxhWzFdLGFbMl0pfTtlLnByb3RvdHlwZS5lY2VmVG9FbnU9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe3ZhciBhPXRoaXMuZ2VvZGV0aWNUb0VjZWYobixpLG8pO3ZhciBzPVtlLWFbMF0sdC1hWzFdLHItYVsyXV07bj1uKk1hdGguUEkvMTgwO2k9aSpNYXRoLlBJLzE4MDt2YXIgdT1NYXRoLmNvcyhuKTt2YXIgYz1NYXRoLnNpbihuKTt2YXIgbD1NYXRoLmNvcyhpKTt2YXIgaD1NYXRoLnNpbihpKTt2YXIgcD0taCpzWzBdK2wqc1sxXTt2YXIgZj0tYypsKnNbMF0tYypoKnNbMV0rdSpzWzJdO3ZhciBkPXUqbCpzWzBdK3UqaCpzWzFdK2Mqc1syXTtyZXR1cm5bcCxmLGRdfTtlLnByb3RvdHlwZS5lbnVUb0VjZWY9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe3ZhciBhPXRoaXMuZ2VvZGV0aWNUb0VjZWYobixpLG8pO249bipNYXRoLlBJLzE4MDtpPWkqTWF0aC5QSS8xODA7dmFyIHM9TWF0aC5jb3Mobik7dmFyIHU9TWF0aC5zaW4obik7dmFyIGM9TWF0aC5jb3MoaSk7dmFyIGw9TWF0aC5zaW4oaSk7dmFyIGg9LWwqZS11KmMqdCtzKmMqcithWzBdO3ZhciBwPWMqZS11KmwqdCtzKmwqcithWzFdO3ZhciBmPXMqdCt1KnIrYVsyXTtyZXR1cm5baCxwLGZdfTtlLnByb3RvdHlwZS5nZW9kZXRpY1RvRWNlZj1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fd2dzODRhO3ZhciBpPXRoaXMuX3dnczg0YjtlPWUqTWF0aC5QSS8xODA7dD10Kk1hdGguUEkvMTgwO3ZhciBvPU1hdGguY29zKGUpO3ZhciBhPU1hdGguc2luKGUpO3ZhciBzPU1hdGguY29zKHQpO3ZhciB1PU1hdGguc2luKHQpO3ZhciBjPW4qbjt2YXIgbD1pKmk7dmFyIGg9MS9NYXRoLnNxcnQoYypvKm8rbCphKmEpO3ZhciBwPShjKmgrcikqbzt2YXIgZj1wKnM7dmFyIGQ9cCp1O3ZhciB2PShsKmgrcikqYTtyZXR1cm5bZixkLHZdfTtlLnByb3RvdHlwZS5lY2VmVG9HZW9kZXRpYz1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fd2dzODRhO3ZhciBpPXRoaXMuX3dnczg0Yjt2YXIgbz1uKm47dmFyIGE9aSppO3ZhciBzPW8tYTt2YXIgdT1NYXRoLnNxcnQocy9vKTt2YXIgYz1NYXRoLnNxcnQocy9hKTt2YXIgbD1NYXRoLnNxcnQoZSplK3QqdCk7dmFyIGg9TWF0aC5hdGFuMihyKm4sbCppKTt2YXIgcD1NYXRoLnNpbihoKTt2YXIgZj1NYXRoLmNvcyhoKTt2YXIgZD1NYXRoLmF0YW4yKHQsZSk7dmFyIHY9TWF0aC5hdGFuMihyK2MqYyppKnAqcCpwLGwtdSp1Km4qZipmKmYpO3ZhciBtPU1hdGguc2luKHYpO3ZhciBnPU1hdGguY29zKHYpO3ZhciBfPW4vTWF0aC5zcXJ0KDEtdSp1Km0qbSk7dmFyIHk9bC9nLV87cmV0dXJuW3YqMTgwL01hdGguUEksZCoxODAvTWF0aC5QSSx5XX07cmV0dXJuIGV9KCk7ci5HZW9Db29yZHM9bjtyLmRlZmF1bHQ9bn0se31dLDQxNzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR2VvUkJ1c2g9dm9pZCAwO3ZhciBpPWUoXCJyYnVzaFwiKTt2YXIgbz1mdW5jdGlvbihlKXtuKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiBlIT09bnVsbCYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9dC5wcm90b3R5cGUuY29tcGFyZU1pblg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5sYXQtdC5sYXR9O3QucHJvdG90eXBlLmNvbXBhcmVNaW5ZPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubG9uLXQubG9ufTt0LnByb3RvdHlwZS50b0JCb3g9ZnVuY3Rpb24oZSl7cmV0dXJue21pblg6ZS5sYXQsbWluWTplLmxvbixtYXhYOmUubGF0LG1heFk6ZS5sb259fTtyZXR1cm4gdH0oaSk7ci5HZW9SQnVzaD1vO3IuZGVmYXVsdD1vfSx7cmJ1c2g6NDJ9XSw0MTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3Iuc2VnbWVudEludGVyc2VjdGlvbj1yLnNlZ21lbnRzSW50ZXJzZWN0PXZvaWQgMDtmdW5jdGlvbiBpKGUpe3JldHVybiBlPjA/MTplPDA/LTE6MH1mdW5jdGlvbiBhKGUsdCl7cmV0dXJuIGUueDw9TWF0aC5tYXgodC5wMS54LHQucDIueCkmJmUueD49TWF0aC5taW4odC5wMS54LHQucDIueCkmJmUueT49TWF0aC5tYXgodC5wMS55LHQucDIueSkmJmUueT49TWF0aC5taW4odC5wMS55LHQucDIueSl9ZnVuY3Rpb24gZihlLHQpe3ZhciByPWUucDIueC1lLnAxLng7dmFyIG49ZS5wMi55LWUucDEueTt2YXIgaT10LnAyLngtdC5wMS54O3ZhciBvPXQucDIueS10LnAxLnk7dmFyIGE9cipvLW4qaTt2YXIgcz1yKnIrbipuO3ZhciB1PWkqaStvKm87dmFyIGM9MWUtMTA7cmV0dXJuIGEqYTxjKnMqdX1mdW5jdGlvbiBzKGUsdCxyKXt2YXIgbj0odC55LWUueSkqKHIueC10LngpLShyLnktdC55KSoodC54LWUueCk7cmV0dXJuIGkobil9ZnVuY3Rpb24gbihlLHQpe2lmKGYoZSx0KSl7cmV0dXJuIGZhbHNlfXZhciByPXMoZS5wMSxlLnAyLHQucDEpO3ZhciBuPXMoZS5wMSxlLnAyLHQucDIpO3ZhciBpPXModC5wMSx0LnAyLGUucDEpO3ZhciBvPXModC5wMSx0LnAyLGUucDIpO2lmKHIhPT1uJiZpIT09byl7cmV0dXJuIHRydWV9aWYocj09PTAmJmEodC5wMSxlKSl7cmV0dXJuIHRydWV9aWYobj09PTAmJmEodC5wMixlKSl7cmV0dXJuIHRydWV9aWYoaT09PTAmJmEoZS5wMSx0KSl7cmV0dXJuIHRydWV9aWYobz09PTAmJmEoZS5wMix0KSl7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfXIuc2VnbWVudHNJbnRlcnNlY3Q9bjtmdW5jdGlvbiBvKGUsdCl7aWYoZihlLHQpKXtyZXR1cm4gdW5kZWZpbmVkfXZhciByPWUucDEueDt2YXIgbj1lLnAyLng7dmFyIGk9ZS5wMS55O3ZhciBvPWUucDIueTt2YXIgYT10LnAxLng7dmFyIHM9dC5wMi54O3ZhciB1PXQucDEueTt2YXIgYz10LnAyLnk7dmFyIGw9KHItbikqKHUtYyktKGktbykqKGEtcyk7dmFyIGg9KHIqby1pKm4pKihhLXMpLShyLW4pKihhKmMtdSpzKTt2YXIgcD0ocipvLWkqbikqKHUtYyktKGktbykqKGEqYy11KnMpO3JldHVybnt4OmgvbCx5OnAvbH19ci5zZWdtZW50SW50ZXJzZWN0aW9uPW99LHt9XSw0MTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU3BhdGlhbD12b2lkIDA7dmFyIGE9ZShcInRocmVlXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2Vwc2lsb249MWUtOX1lLnByb3RvdHlwZS5hemltdXRoYWxUb0JlYXJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuLWUrTWF0aC5QSS8yfTtlLnByb3RvdHlwZS5kZWdUb1JhZD1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5QSSplLzE4MH07ZS5wcm90b3R5cGUucmFkVG9EZWc9ZnVuY3Rpb24oZSl7cmV0dXJuIDE4MCplL01hdGguUEl9O2UucHJvdG90eXBlLnJvdGF0aW9uTWF0cml4PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBhLlZlY3RvcjMoZVswXSxlWzFdLGVbMl0pO3ZhciByPXQubGVuZ3RoKCk7aWYocj4wKXt0Lm5vcm1hbGl6ZSgpfXJldHVybihuZXcgYS5NYXRyaXg0KS5tYWtlUm90YXRpb25BeGlzKHQscil9O2UucHJvdG90eXBlLnJvdGF0ZT1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBhLlZlY3RvcjMoZVswXSxlWzFdLGVbMl0pO3ZhciBuPXRoaXMucm90YXRpb25NYXRyaXgodCk7ci5hcHBseU1hdHJpeDQobik7cmV0dXJuIHJ9O2UucHJvdG90eXBlLm9wdGljYWxDZW50ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj1bLWVbMF0sLWVbMV0sLWVbMl1dO3ZhciBuPVstdFswXSwtdFsxXSwtdFsyXV07cmV0dXJuIHRoaXMucm90YXRlKG4scil9O2UucHJvdG90eXBlLnZpZXdpbmdEaXJlY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9Wy1lWzBdLC1lWzFdLC1lWzJdXTtyZXR1cm4gdGhpcy5yb3RhdGUoWzAsMCwxXSx0KX07ZS5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihlLHQscil7aWYocjx0KXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50czogbWF4IG11c3QgYmUgbGFyZ2VyIHRoYW4gbWluLlwiKX12YXIgbj1yLXQ7d2hpbGUoZT5yfHxlPHQpe2lmKGU+cil7ZT1lLW59ZWxzZSBpZihlPHQpe2U9ZStufX1yZXR1cm4gZX07ZS5wcm90b3R5cGUud3JhcEFuZ2xlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLndyYXAoZSwtTWF0aC5QSSxNYXRoLlBJKX07ZS5wcm90b3R5cGUuY2xhbXA9ZnVuY3Rpb24oZSx0LHIpe2lmKGU8dCl7cmV0dXJuIHR9aWYoZT5yKXtyZXR1cm4gcn1yZXR1cm4gZX07ZS5wcm90b3R5cGUuYW5nbGVCZXR3ZWVuVmVjdG9yMj1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1NYXRoLmF0YW4yKG4sciktTWF0aC5hdGFuMih0LGUpO3JldHVybiB0aGlzLndyYXBBbmdsZShpKX07ZS5wcm90b3R5cGUuYW5nbGVEaWZmZXJlbmNlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC1lO3JldHVybiB0aGlzLndyYXBBbmdsZShyKX07ZS5wcm90b3R5cGUucmVsYXRpdmVSb3RhdGlvbkFuZ2xlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5yb3RhdGlvbk1hdHJpeChbLWVbMF0sLWVbMV0sLWVbMl1dKTt2YXIgbj10aGlzLnJvdGF0aW9uTWF0cml4KHQpO3ZhciBpPXIubXVsdGlwbHkobik7dmFyIG89aS5lbGVtZW50czt2YXIgYT1vWzBdK29bNV0rb1sxMF07dmFyIHM9TWF0aC5hY29zKE1hdGgubWF4KE1hdGgubWluKChhLTEpLzIsMSksLTEpKTtyZXR1cm4gc307ZS5wcm90b3R5cGUuYW5nbGVUb1BsYW5lPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG5ldyBhLlZlY3RvcjMpLmZyb21BcnJheShlKTt2YXIgbj1yLmxlbmd0aCgpO2lmKG48dGhpcy5fZXBzaWxvbil7cmV0dXJuIDB9dmFyIGk9ci5kb3QoKG5ldyBhLlZlY3RvcjMpLmZyb21BcnJheSh0KSk7cmV0dXJuIE1hdGguYXNpbihpL24pfTtlLnByb3RvdHlwZS5hemltdXRoYWw9ZnVuY3Rpb24oZSx0KXt2YXIgcj0obmV3IGEuVmVjdG9yMykuZnJvbUFycmF5KGUpO3ZhciBuPShuZXcgYS5WZWN0b3IzKS5mcm9tQXJyYXkodCk7dmFyIGk9ci5jbG9uZSgpLmRvdChuKTt2YXIgbz1yLmNsb25lKCkuc3ViKG4uY2xvbmUoKS5tdWx0aXBseVNjYWxhcihpKSk7cmV0dXJuIE1hdGguYXRhbjIoby55LG8ueCl9O2UucHJvdG90eXBlLmRpc3RhbmNlRnJvbUxhdExvbj1mdW5jdGlvbihlLHQscixuKXt2YXIgaT02MzcxZTM7dmFyIG89dGhpcy5kZWdUb1JhZChyLWUpO3ZhciBhPXRoaXMuZGVnVG9SYWQobi10KTt2YXIgcz1NYXRoLnNpbihvLzIpKk1hdGguc2luKG8vMikrTWF0aC5jb3ModGhpcy5kZWdUb1JhZChlKSkqTWF0aC5jb3ModGhpcy5kZWdUb1JhZChyKSkqTWF0aC5zaW4oYS8yKSpNYXRoLnNpbihhLzIpO3ZhciB1PTIqaSpNYXRoLmF0YW4yKE1hdGguc3FydChzKSxNYXRoLnNxcnQoMS1zKSk7cmV0dXJuIHV9O3JldHVybiBlfSgpO3IuU3BhdGlhbD1uO3IuZGVmYXVsdD1ufSx7dGhyZWU6MjQyfV0sNDIwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlRyYW5zZm9ybT12b2lkIDA7dmFyIGI9ZShcInRocmVlXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuLGksbyxhLHMsdSxjLGwsaCxwKXt0aGlzLl9vcmllbnRhdGlvbj10aGlzLl9nZXRWYWx1ZShlLDEpO3ZhciBmPXUhPW51bGw/dS53aWR0aDo0O3ZhciBkPXUhPW51bGw/dS5oZWlnaHQ6Mzt2YXIgdj10aGlzLl9vcmllbnRhdGlvbjw1O3RoaXMuX3dpZHRoPXRoaXMuX2dldFZhbHVlKHQsdj9mOmQpO3RoaXMuX2hlaWdodD10aGlzLl9nZXRWYWx1ZShyLHY/ZDpmKTt0aGlzLl9iYXNpY0FzcGVjdD12P3RoaXMuX3dpZHRoL3RoaXMuX2hlaWdodDp0aGlzLl9oZWlnaHQvdGhpcy5fd2lkdGg7dGhpcy5fYmFzaWNXaWR0aD12P3Q6cjt0aGlzLl9iYXNpY0hlaWdodD12P3I6dDt0aGlzLl9mb2NhbD10aGlzLl9nZXRWYWx1ZShuLDEpO3RoaXMuX3NjYWxlPXRoaXMuX2dldFZhbHVlKGksMCk7dGhpcy5fZ3Bhbm89byE9bnVsbD9vOm51bGw7dGhpcy5fcnQ9dGhpcy5fZ2V0UnQoYSxzKTt0aGlzLl9zcnQ9dGhpcy5fZ2V0U3J0KHRoaXMuX3J0LHRoaXMuX3NjYWxlKTt0aGlzLl9iYXNpY1J0PXRoaXMuX2dldEJhc2ljUnQodGhpcy5fcnQsZSk7dGhpcy5fdGV4dHVyZVNjYWxlPSEhYz9jOlsxLDFdO3RoaXMuX2NrMT0hIWw/bDowO3RoaXMuX2NrMj0hIWg/aDowO3RoaXMuX2NhbWVyYVByb2plY3Rpb249ISFwP3A6ISFvP1wiZXF1aXJlY3Rhbmd1bGFyXCI6XCJwZXJzcGVjdGl2ZVwiO3RoaXMuX3JhZGlhbFBlYWs9dGhpcy5fZ2V0UmFkaWFsUGVhayh0aGlzLl9jazEsdGhpcy5fY2syKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjazFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NrMX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNrMlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2syfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2FtZXJhUHJvamVjdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FtZXJhUHJvamVjdGlvbn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhc2ljQXNwZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNpY0FzcGVjdH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhc2ljSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNpY0hlaWdodH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhc2ljUnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Jhc2ljUnR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYXNpY1dpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNpY1dpZHRofSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZm9jYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvY2FsfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZnVsbFBhbm9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dwYW5vIT1udWxsJiZ0aGlzLl9ncGFuby5Dcm9wcGVkQXJlYUxlZnRQaXhlbHM9PT0wJiZ0aGlzLl9ncGFuby5Dcm9wcGVkQXJlYVRvcFBpeGVscz09PTAmJnRoaXMuX2dwYW5vLkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscz09PXRoaXMuX2dwYW5vLkZ1bGxQYW5vV2lkdGhQaXhlbHMmJnRoaXMuX2dwYW5vLkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHM9PT10aGlzLl9ncGFuby5GdWxsUGFub0hlaWdodFBpeGVsc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImdwYW5vXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncGFub30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVpZ2h0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwib3JpZW50YXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9ufSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3J0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zcnR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzY2FsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoYXNWYWxpZFNjYWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZT4uMDEmJnRoaXMuX3NjYWxlPDUwfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmFkaWFsUGVha1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmFkaWFsUGVha30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIndpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLnVwVmVjdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcnQuZWxlbWVudHM7c3dpdGNoKHRoaXMuX29yaWVudGF0aW9uKXtjYXNlIDE6cmV0dXJuIG5ldyBiLlZlY3RvcjMoLWVbMV0sLWVbNV0sLWVbOV0pO2Nhc2UgMzpyZXR1cm4gbmV3IGIuVmVjdG9yMyhlWzFdLGVbNV0sZVs5XSk7Y2FzZSA2OnJldHVybiBuZXcgYi5WZWN0b3IzKC1lWzBdLC1lWzRdLC1lWzhdKTtjYXNlIDg6cmV0dXJuIG5ldyBiLlZlY3RvcjMoZVswXSxlWzRdLGVbOF0pO2RlZmF1bHQ6cmV0dXJuIG5ldyBiLlZlY3RvcjMoLWVbMV0sLWVbNV0sLWVbOV0pfX07ZS5wcm90b3R5cGUucHJvamVjdG9yTWF0cml4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbm9ybWFsaXplZFRvVGV4dHVyZU1hdHJpeCgpO3ZhciB0PXRoaXMuX2ZvY2FsO3ZhciByPShuZXcgYi5NYXRyaXg0KS5zZXQodCwwLDAsMCwwLHQsMCwwLDAsMCwwLDAsMCwwLDEsMCk7ZS5tdWx0aXBseShyKTtlLm11bHRpcGx5KHRoaXMuX3J0KTtyZXR1cm4gZX07ZS5wcm90b3R5cGUucHJvamVjdEJhc2ljPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucHJvamVjdFNmTShlKTtyZXR1cm4gdGhpcy5fc2ZtVG9CYXNpYyh0KX07ZS5wcm90b3R5cGUudW5wcm9qZWN0QmFzaWM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX2Jhc2ljVG9TZm0oZSk7cmV0dXJuIHRoaXMudW5wcm9qZWN0U2ZNKG4sdCxyKX07ZS5wcm90b3R5cGUucHJvamVjdFNmTT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgYi5WZWN0b3I0KGVbMF0sZVsxXSxlWzJdLDEpO3QuYXBwbHlNYXRyaXg0KHRoaXMuX3J0KTtyZXR1cm4gdGhpcy5fYmVhcmluZ1RvU2ZtKFt0LngsdC55LHQuel0pfTtlLnByb3RvdHlwZS51bnByb2plY3RTZk09ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuX3NmbVRvQmVhcmluZyhlKTt2YXIgaT1yJiYhdGhpcy5ncGFubz9uZXcgYi5WZWN0b3I0KHQqblswXS9uWzJdLHQqblsxXS9uWzJdLHQsMSk6bmV3IGIuVmVjdG9yNCh0Km5bMF0sdCpuWzFdLHQqblsyXSwxKTtpLmFwcGx5TWF0cml4NCgobmV3IGIuTWF0cml4NCkuZ2V0SW52ZXJzZSh0aGlzLl9ydCkpO3JldHVybltpLngvaS53LGkueS9pLncsaS56L2kud119O2UucHJvdG90eXBlLl9zZm1Ub0JlYXJpbmc9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZnVsbFBhbm8oKSl7dmFyIHQ9ZVswXSoyKk1hdGguUEk7dmFyIHI9LWVbMV0qMipNYXRoLlBJO3ZhciBuPU1hdGguY29zKHIpKk1hdGguc2luKHQpO3ZhciBpPS1NYXRoLnNpbihyKTt2YXIgbz1NYXRoLmNvcyhyKSpNYXRoLmNvcyh0KTtyZXR1cm5bbixpLG9dfWVsc2UgaWYodGhpcy5fZ3Bhbm8pe3ZhciBhPU1hdGgubWF4KHRoaXMuZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzLHRoaXMuZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZUhlaWdodFBpeGVscyk7dmFyIHM9W2VbMF0qYSt0aGlzLmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscy8yK3RoaXMuZ3Bhbm8uQ3JvcHBlZEFyZWFMZWZ0UGl4ZWxzLGVbMV0qYSt0aGlzLmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHMvMit0aGlzLmdwYW5vLkNyb3BwZWRBcmVhVG9wUGl4ZWxzXTt2YXIgdD0yKk1hdGguUEkqKHNbMF0vdGhpcy5ncGFuby5GdWxsUGFub1dpZHRoUGl4ZWxzLS41KTt2YXIgcj0tTWF0aC5QSSooc1sxXS90aGlzLmdwYW5vLkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzLS41KTt2YXIgbj1NYXRoLmNvcyhyKSpNYXRoLnNpbih0KTt2YXIgaT0tTWF0aC5zaW4ocik7dmFyIG89TWF0aC5jb3MocikqTWF0aC5jb3ModCk7cmV0dXJuW24saSxvXX1lbHNlIGlmKHRoaXMuX2NhbWVyYVByb2plY3Rpb249PT1cImZpc2hleWVcIil7dmFyIHU9W2VbMF0vdGhpcy5fZm9jYWwsZVsxXS90aGlzLl9mb2NhbF0sYz11WzBdLGw9dVsxXTt2YXIgaD1NYXRoLnNxcnQoYypjK2wqbCk7dmFyIHA9dGhpcy5fZGlzdG9ydGlvbkZyb21EaXN0b3J0ZWRSYWRpdXMoaCx0aGlzLl9jazEsdGhpcy5fY2syLHRoaXMuX3JhZGlhbFBlYWspO3ZhciBmPWgvcDt2YXIgbz1NYXRoLmNvcyhmKTt2YXIgZD1NYXRoLnNpbihmKTt2YXIgbj1kKmMvaDt2YXIgaT1kKmwvaDtyZXR1cm5bbixpLG9dfWVsc2V7dmFyIHY9W2VbMF0vdGhpcy5fZm9jYWwsZVsxXS90aGlzLl9mb2NhbF0sYz12WzBdLGw9dlsxXTt2YXIgbT1NYXRoLnNxcnQoYypjK2wqbCk7dmFyIHA9dGhpcy5fZGlzdG9ydGlvbkZyb21EaXN0b3J0ZWRSYWRpdXMobSx0aGlzLl9jazEsdGhpcy5fY2syLHRoaXMuX3JhZGlhbFBlYWspO3ZhciBnPWMvcDt2YXIgXz1sL3A7dmFyIHk9bmV3IGIuVmVjdG9yMyhnLF8sMSk7eS5ub3JtYWxpemUoKTtyZXR1cm5beS54LHkueSx5LnpdfX07ZS5wcm90b3R5cGUuX2Rpc3RvcnRpb25Gcm9tRGlzdG9ydGVkUmFkaXVzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPTE7Zm9yKHZhciBvPTA7bzwxMDtvKyspe3ZhciBhPWUvaTtpZihhPm4pe2E9bn1pPTErdCpNYXRoLnBvdyhhLDIpK3IqTWF0aC5wb3coYSw0KX1yZXR1cm4gaX07ZS5wcm90b3R5cGUuX2JlYXJpbmdUb1NmbT1mdW5jdGlvbihlKXtpZih0aGlzLl9mdWxsUGFubygpKXt2YXIgdD1lWzBdO3ZhciByPWVbMV07dmFyIG49ZVsyXTt2YXIgaT1NYXRoLmF0YW4yKHQsbik7dmFyIG89TWF0aC5hdGFuMigtcixNYXRoLnNxcnQodCp0K24qbikpO3JldHVybltpLygyKk1hdGguUEkpLC1vLygyKk1hdGguUEkpXX1lbHNlIGlmKHRoaXMuX2dwYW5vKXt2YXIgdD1lWzBdO3ZhciByPWVbMV07dmFyIG49ZVsyXTt2YXIgaT1NYXRoLmF0YW4yKHQsbik7dmFyIG89TWF0aC5hdGFuMigtcixNYXRoLnNxcnQodCp0K24qbikpO3ZhciBhPVsoaS8oMipNYXRoLlBJKSsuNSkqdGhpcy5ncGFuby5GdWxsUGFub1dpZHRoUGl4ZWxzLCgtby9NYXRoLlBJKy41KSp0aGlzLmdwYW5vLkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzXTt2YXIgcz1NYXRoLm1heCh0aGlzLmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscyx0aGlzLmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHMpO3JldHVyblsoYVswXS10aGlzLmdwYW5vLkNyb3BwZWRBcmVhTGVmdFBpeGVscy10aGlzLmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VXaWR0aFBpeGVscy8yKS9zLChhWzFdLXRoaXMuZ3Bhbm8uQ3JvcHBlZEFyZWFUb3BQaXhlbHMtdGhpcy5ncGFuby5Dcm9wcGVkQXJlYUltYWdlSGVpZ2h0UGl4ZWxzLzIpL3NdfWVsc2UgaWYodGhpcy5fY2FtZXJhUHJvamVjdGlvbj09PVwiZmlzaGV5ZVwiKXtpZihlWzJdPjApe3ZhciB0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgdT1NYXRoLnNxcnQodCp0K3Iqcik7dmFyIGM9TWF0aC5hdGFuMih1LG4pO2lmKGM+dGhpcy5fcmFkaWFsUGVhayl7Yz10aGlzLl9yYWRpYWxQZWFrfXZhciBsPTErTWF0aC5wb3coYywyKSoodGhpcy5fY2sxK01hdGgucG93KGMsMikqdGhpcy5fY2syKTt2YXIgaD10aGlzLl9mb2NhbCpsKmMvdTtyZXR1cm5baCp0LGgqcl19ZWxzZXtyZXR1cm5bZVswXTwwP051bWJlci5ORUdBVElWRV9JTkZJTklUWTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksZVsxXTwwP051bWJlci5ORUdBVElWRV9JTkZJTklUWTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldfX1lbHNle2lmKGVbMl0+MCl7dmFyIHA9W2VbMF0vZVsyXSxlWzFdL2VbMl1dLGY9cFswXSxkPXBbMV07dmFyIHY9ZipmK2QqZDt2YXIgbT1NYXRoLnBvdyh0aGlzLl9yYWRpYWxQZWFrLDIpO2lmKHY+bSl7dj1tfXZhciBnPTErdGhpcy5fY2sxKnYrdGhpcy5fY2syKk1hdGgucG93KHYsMik7cmV0dXJuW3RoaXMuX2ZvY2FsKmcqZix0aGlzLl9mb2NhbCpnKmRdfWVsc2V7cmV0dXJuW2VbMF08MD9OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGVbMV08MD9OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXX19fTtlLnByb3RvdHlwZS5fYmFzaWNUb1NmbT1mdW5jdGlvbihlKXt2YXIgdDt2YXIgcjtzd2l0Y2godGhpcy5fb3JpZW50YXRpb24pe2Nhc2UgMTp0PWVbMF07cj1lWzFdO2JyZWFrO2Nhc2UgMzp0PTEtZVswXTtyPTEtZVsxXTticmVhaztjYXNlIDY6dD1lWzFdO3I9MS1lWzBdO2JyZWFrO2Nhc2UgODp0PTEtZVsxXTtyPWVbMF07YnJlYWs7ZGVmYXVsdDp0PWVbMF07cj1lWzFdO2JyZWFrfXZhciBuPXRoaXMuX3dpZHRoO3ZhciBpPXRoaXMuX2hlaWdodDt2YXIgbz1NYXRoLm1heChuLGkpO3ZhciBhPXQqbi9vLW4vby8yO3ZhciBzPXIqaS9vLWkvby8yO3JldHVyblthLHNdfTtlLnByb3RvdHlwZS5fc2ZtVG9CYXNpYz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl93aWR0aDt2YXIgcj10aGlzLl9oZWlnaHQ7dmFyIG49TWF0aC5tYXgodCxyKTt2YXIgaT0oZVswXSt0L24vMikvdCpuO3ZhciBvPShlWzFdK3Ivbi8yKS9yKm47dmFyIGE7dmFyIHM7c3dpdGNoKHRoaXMuX29yaWVudGF0aW9uKXtjYXNlIDE6YT1pO3M9bzticmVhaztjYXNlIDM6YT0xLWk7cz0xLW87YnJlYWs7Y2FzZSA2OmE9MS1vO3M9aTticmVhaztjYXNlIDg6YT1vO3M9MS1pO2JyZWFrO2RlZmF1bHQ6YT1pO3M9bzticmVha31yZXR1cm5bYSxzXX07ZS5wcm90b3R5cGUuX2Z1bGxQYW5vPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3Bhbm8hPW51bGwmJnRoaXMuZ3Bhbm8uQ3JvcHBlZEFyZWFMZWZ0UGl4ZWxzPT09MCYmdGhpcy5ncGFuby5Dcm9wcGVkQXJlYVRvcFBpeGVscz09PTAmJnRoaXMuZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzPT09dGhpcy5ncGFuby5GdWxsUGFub1dpZHRoUGl4ZWxzJiZ0aGlzLmdwYW5vLkNyb3BwZWRBcmVhSW1hZ2VIZWlnaHRQaXhlbHM9PT10aGlzLmdwYW5vLkZ1bGxQYW5vSGVpZ2h0UGl4ZWxzfTtlLnByb3RvdHlwZS5fZ2V0VmFsdWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSE9bnVsbCYmZT4wP2U6dH07ZS5wcm90b3R5cGUuX2dldFJ0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGIuVmVjdG9yMyhlWzBdLGVbMV0sZVsyXSk7dmFyIG49ci5sZW5ndGgoKTtpZihuPjApe3Iubm9ybWFsaXplKCl9dmFyIGk9bmV3IGIuTWF0cml4NDtpLm1ha2VSb3RhdGlvbkF4aXMocixuKTtpLnNldFBvc2l0aW9uKG5ldyBiLlZlY3RvcjModFswXSx0WzFdLHRbMl0pKTtyZXR1cm4gaX07ZS5wcm90b3R5cGUuX2dldFNydD1mdW5jdGlvbihlLHQpe3ZhciByPWUuY2xvbmUoKTt2YXIgbj1yLmVsZW1lbnRzO25bMTJdPXQqblsxMl07blsxM109dCpuWzEzXTtuWzE0XT10Km5bMTRdO3Iuc2NhbGUobmV3IGIuVmVjdG9yMyh0LHQsdCkpO3JldHVybiByfTtlLnByb3RvdHlwZS5fZ2V0QmFzaWNSdD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBiLlZlY3RvcjMoMCwwLDEpO3ZhciBuPTA7c3dpdGNoKHQpe2Nhc2UgMzpuPU1hdGguUEk7YnJlYWs7Y2FzZSA2Om49TWF0aC5QSS8yO2JyZWFrO2Nhc2UgODpuPTMqTWF0aC5QSS8yO2JyZWFrO2RlZmF1bHQ6YnJlYWt9cmV0dXJuKG5ldyBiLk1hdHJpeDQpLm1ha2VSb3RhdGlvbkF4aXMocixuKS5tdWx0aXBseShlKX07ZS5wcm90b3R5cGUuX2dldFJhZGlhbFBlYWs9ZnVuY3Rpb24oZSx0KXt2YXIgcj01KnQ7dmFyIG49MyplO3ZhciBpPTE7dmFyIG89TWF0aC5wb3cobiwyKS00KnIqaTtpZihvPDApe3JldHVybiB1bmRlZmluZWR9dmFyIGE9KC1uLU1hdGguc3FydChvKSkvMi9yO3ZhciBzPSgtbitNYXRoLnNxcnQobykpLzIvcjt2YXIgdT1NYXRoLm1pbihhLHMpO3ZhciBjPU1hdGgubWF4KGEscyk7cmV0dXJuIHU+MD9NYXRoLnNxcnQodSk6Yz4wP01hdGguc3FydChjKTp1bmRlZmluZWR9O2UucHJvdG90eXBlLl9ub3JtYWxpemVkVG9UZXh0dXJlTWF0cml4PWZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5tYXgodGhpcy5fd2lkdGgsdGhpcy5faGVpZ2h0KTt2YXIgdD10aGlzLl9vcmllbnRhdGlvbjw1P3RoaXMuX3RleHR1cmVTY2FsZVswXTp0aGlzLl90ZXh0dXJlU2NhbGVbMV07dmFyIHI9dGhpcy5fb3JpZW50YXRpb248NT90aGlzLl90ZXh0dXJlU2NhbGVbMV06dGhpcy5fdGV4dHVyZVNjYWxlWzBdO3ZhciBuPWUvdGhpcy5fd2lkdGgqdDt2YXIgaT1lL3RoaXMuX2hlaWdodCpyO3N3aXRjaCh0aGlzLl9vcmllbnRhdGlvbil7Y2FzZSAxOnJldHVybihuZXcgYi5NYXRyaXg0KS5zZXQobiwwLDAsLjUsMCwtaSwwLC41LDAsMCwxLDAsMCwwLDAsMSk7Y2FzZSAzOnJldHVybihuZXcgYi5NYXRyaXg0KS5zZXQoLW4sMCwwLC41LDAsaSwwLC41LDAsMCwxLDAsMCwwLDAsMSk7Y2FzZSA2OnJldHVybihuZXcgYi5NYXRyaXg0KS5zZXQoMCwtaSwwLC41LC1uLDAsMCwuNSwwLDAsMSwwLDAsMCwwLDEpO2Nhc2UgODpyZXR1cm4obmV3IGIuTWF0cml4NCkuc2V0KDAsaSwwLC41LG4sMCwwLC41LDAsMCwxLDAsMCwwLDAsMSk7ZGVmYXVsdDpyZXR1cm4obmV3IGIuTWF0cml4NCkuc2V0KG4sMCwwLC41LDAsLWksMCwuNSwwLDAsMSwwLDAsMCwwLDEpfX07cmV0dXJuIGV9KCk7ci5UcmFuc2Zvcm09bn0se3RocmVlOjI0Mn1dLDQyMTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5WaWV3cG9ydENvb3Jkcz12b2lkIDA7dmFyIGE9ZShcInRocmVlXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3VucHJvamVjdERlcHRoPTIwMH1lLnByb3RvdHlwZS5iYXNpY1RvQ2FudmFzPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89bi51bnByb2plY3RCYXNpYyhbZSx0XSx0aGlzLl91bnByb2plY3REZXB0aCk7dmFyIGE9dGhpcy5wcm9qZWN0VG9DYW52YXMobyxyLGkpO3JldHVybiBhfTtlLnByb3RvdHlwZS5iYXNpY1RvQ2FudmFzU2FmZT1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPXRoaXMuYmFzaWNUb1ZpZXdwb3J0U2FmZShlLHQsbixpKTtpZihvPT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGE9dGhpcy52aWV3cG9ydFRvQ2FudmFzKG9bMF0sb1sxXSxyKTtyZXR1cm4gYX07ZS5wcm90b3R5cGUuYmFzaWNUb1ZpZXdwb3J0PWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXIudW5wcm9qZWN0QmFzaWMoW2UsdF0sdGhpcy5fdW5wcm9qZWN0RGVwdGgpO3ZhciBvPXRoaXMucHJvamVjdFRvVmlld3BvcnQoaSxuKTtyZXR1cm4gb307ZS5wcm90b3R5cGUuYmFzaWNUb1ZpZXdwb3J0U2FmZT1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1yLnVucHJvamVjdEJhc2ljKFtlLHRdLHRoaXMuX3VucHJvamVjdERlcHRoKTt2YXIgbz10aGlzLndvcmxkVG9DYW1lcmEoaSxuKTtpZihvWzJdPjApe3JldHVybiBudWxsfXZhciBhPXRoaXMucHJvamVjdFRvVmlld3BvcnQoaSxuKTtyZXR1cm4gYX07ZS5wcm90b3R5cGUuY2FtZXJhVG9WaWV3cG9ydD1mdW5jdGlvbihlLHQpe3ZhciByPShuZXcgYS5WZWN0b3IzKS5mcm9tQXJyYXkoZSkuYXBwbHlNYXRyaXg0KHQucHJvamVjdGlvbk1hdHJpeCk7cmV0dXJuW3IueCxyLnldfTtlLnByb3RvdHlwZS5jYW52YXNQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIG49ZS5jbGllbnRYLXIubGVmdC10LmNsaWVudExlZnQ7dmFyIGk9ZS5jbGllbnRZLXIudG9wLXQuY2xpZW50VG9wO3JldHVybltuLGldfTtlLnByb3RvdHlwZS5jYW52YXNUb0Jhc2ljPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89dGhpcy51bnByb2plY3RGcm9tQ2FudmFzKGUsdCxyLGkpLnRvQXJyYXkoKTt2YXIgYT1uLnByb2plY3RCYXNpYyhvKTtyZXR1cm4gYX07ZS5wcm90b3R5cGUuY2FudmFzVG9WaWV3cG9ydD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5jb250YWluZXJUb0NhbnZhcyhyKSxpPW5bMF0sbz1uWzFdO3ZhciBhPTIqZS9pLTE7dmFyIHM9MS0yKnQvbztyZXR1cm5bYSxzXX07ZS5wcm90b3R5cGUuY29udGFpbmVyVG9DYW52YXM9ZnVuY3Rpb24oZSl7cmV0dXJuW2Uub2Zmc2V0V2lkdGgsZS5vZmZzZXRIZWlnaHRdfTtlLnByb3RvdHlwZS5nZXRCYXNpY0Rpc3RhbmNlcz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMudmlld3BvcnRUb0Jhc2ljKC0xLDEsZSx0KTt2YXIgbj10aGlzLnZpZXdwb3J0VG9CYXNpYygxLDEsZSx0KTt2YXIgaT10aGlzLnZpZXdwb3J0VG9CYXNpYygxLC0xLGUsdCk7dmFyIG89dGhpcy52aWV3cG9ydFRvQmFzaWMoLTEsLTEsZSx0KTt2YXIgYT0wO3ZhciBzPTA7dmFyIHU9MDt2YXIgYz0wO2lmKHJbMV08MCYmblsxXTwwKXthPXJbMV0+blsxXT8tclsxXTotblsxXX1pZihuWzBdPjEmJmlbMF0+MSl7cz1uWzBdPGlbMF0/blswXS0xOmlbMF0tMX1pZihpWzFdPjEmJm9bMV0+MSl7dT1pWzFdPG9bMV0/aVsxXS0xOm9bMV0tMX1pZihvWzBdPDAmJnJbMF08MCl7Yz1vWzBdPnJbMF0/LW9bMF06LXJbMF19cmV0dXJuW2Escyx1LGNdfTtlLnByb3RvdHlwZS5nZXRQaXhlbERpc3RhbmNlcz1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy52aWV3cG9ydFRvQmFzaWMoLTEsMSx0LHIpO3ZhciBpPXRoaXMudmlld3BvcnRUb0Jhc2ljKDEsMSx0LHIpO3ZhciBvPXRoaXMudmlld3BvcnRUb0Jhc2ljKDEsLTEsdCxyKTt2YXIgYT10aGlzLnZpZXdwb3J0VG9CYXNpYygtMSwtMSx0LHIpO3ZhciBzPTA7dmFyIHU9MDt2YXIgYz0wO3ZhciBsPTA7dmFyIGg9dGhpcy5jb250YWluZXJUb0NhbnZhcyhlKSxwPWhbMF0sZj1oWzFdO2lmKG5bMV08MCYmaVsxXTwwKXt2YXIgZD1uWzFdPmlbMV0/blswXTppWzBdO3ZhciB2PXRoaXMuYmFzaWNUb0NhbnZhcyhkLDAsZSx0LHIpO3M9dlsxXT4wP3ZbMV06MH1pZihpWzBdPjEmJm9bMF0+MSl7dmFyIG09aVswXTxvWzBdP2lbMV06b1sxXTt2YXIgdj10aGlzLmJhc2ljVG9DYW52YXMoMSxtLGUsdCxyKTt1PXZbMF08cD9wLXZbMF06MH1pZihvWzFdPjEmJmFbMV0+MSl7dmFyIGQ9b1sxXTxhWzFdP29bMF06YVswXTt2YXIgdj10aGlzLmJhc2ljVG9DYW52YXMoZCwxLGUsdCxyKTtjPXZbMV08Zj9mLXZbMV06MH1pZihhWzBdPDAmJm5bMF08MCl7dmFyIG09YVswXT5uWzBdP2FbMV06blsxXTt2YXIgdj10aGlzLmJhc2ljVG9DYW52YXMoMCxtLGUsdCxyKTtsPXZbMF0+MD92WzBdOjB9cmV0dXJuW3MsdSxjLGxdfTtlLnByb3RvdHlwZS5pbnNpZGVFbGVtZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt2YXIgbj1yLmxlZnQrdC5jbGllbnRMZWZ0O3ZhciBpPW4rdC5jbGllbnRXaWR0aDt2YXIgbz1yLnRvcCt0LmNsaWVudFRvcDt2YXIgYT1vK3QuY2xpZW50SGVpZ2h0O3JldHVybiBlLmNsaWVudFg+biYmZS5jbGllbnRYPGkmJmUuY2xpZW50WT5vJiZlLmNsaWVudFk8YX07ZS5wcm90b3R5cGUucHJvamVjdFRvQ2FudmFzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLnByb2plY3RUb1ZpZXdwb3J0KGUscik7dmFyIGk9dGhpcy52aWV3cG9ydFRvQ2FudmFzKG5bMF0sblsxXSx0KTtyZXR1cm4gaX07ZS5wcm90b3R5cGUucHJvamVjdFRvQ2FudmFzU2FmZT1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy53b3JsZFRvQ2FtZXJhKGUscik7aWYoblsyXT4wKXtyZXR1cm4gbnVsbH12YXIgaT10aGlzLnByb2plY3RUb1ZpZXdwb3J0KGUscik7dmFyIG89dGhpcy52aWV3cG9ydFRvQ2FudmFzKGlbMF0saVsxXSx0KTtyZXR1cm4gb307ZS5wcm90b3R5cGUucHJvamVjdFRvVmlld3BvcnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgYS5WZWN0b3IzKGVbMF0sZVsxXSxlWzJdKS5wcm9qZWN0KHQpO3JldHVybltyLngsci55XX07ZS5wcm90b3R5cGUudW5wcm9qZWN0RnJvbUNhbnZhcz1mdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLmNhbnZhc1RvVmlld3BvcnQoZSx0LHIpO3ZhciBvPXRoaXMudW5wcm9qZWN0RnJvbVZpZXdwb3J0KGlbMF0saVsxXSxuKTtyZXR1cm4gb307ZS5wcm90b3R5cGUudW5wcm9qZWN0RnJvbVZpZXdwb3J0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1uZXcgYS5WZWN0b3IzKGUsdCwxKS51bnByb2plY3Qocik7cmV0dXJuIG59O2UucHJvdG90eXBlLnZpZXdwb3J0VG9CYXNpYz1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1uZXcgYS5WZWN0b3IzKGUsdCwxKS51bnByb2plY3QobikudG9BcnJheSgpO3ZhciBvPXIucHJvamVjdEJhc2ljKGkpO3JldHVybiBvfTtlLnByb3RvdHlwZS52aWV3cG9ydFRvQ2FudmFzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLmNvbnRhaW5lclRvQ2FudmFzKHIpLGk9blswXSxvPW5bMV07dmFyIGE9aSooZSsxKS8yO3ZhciBzPS1vKih0LTEpLzI7cmV0dXJuW2Esc119O2UucHJvdG90eXBlLndvcmxkVG9DYW1lcmE9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgYS5WZWN0b3IzKGVbMF0sZVsxXSxlWzJdKS5hcHBseU1hdHJpeDQodC5tYXRyaXhXb3JsZEludmVyc2UpO3JldHVybiByLnRvQXJyYXkoKX07cmV0dXJuIGV9KCk7ci5WaWV3cG9ydENvb3Jkcz1uO3IuZGVmYXVsdD1ufSx7dGhyZWU6MjQyfV0sNDIyOltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDQyMzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5GaWx0ZXJDcmVhdG9yPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9ZS5wcm90b3R5cGUuY3JlYXRlRmlsdGVyPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRnVuY3Rpb24oXCJub2RlXCIsXCJyZXR1cm4gXCIrdGhpcy5fY29tcGlsZShlKStcIjtcIil9O2UucHJvdG90eXBlLl9jb21waWxlPWZ1bmN0aW9uKGUpe2lmKGU9PW51bGx8fGUubGVuZ3RoPD0xKXtyZXR1cm5cInRydWVcIn12YXIgdD1lWzBdO3ZhciByPXQ9PT1cIj09XCI/dGhpcy5fY29tcGlsZUNvbXBhcmlzb25PcChcIj09PVwiLGVbMV0sZVsyXSxmYWxzZSk6dD09PVwiIT1cIj90aGlzLl9jb21waWxlQ29tcGFyaXNvbk9wKFwiIT09XCIsZVsxXSxlWzJdLGZhbHNlKTp0PT09XCI+XCJ8fHQ9PT1cIj49XCJ8fHQ9PT1cIjxcInx8dD09PVwiPD1cIj90aGlzLl9jb21waWxlQ29tcGFyaXNvbk9wKHQsZVsxXSxlWzJdLHRydWUpOnQ9PT1cImluXCI/dGhpcy5fY29tcGlsZUluT3AoZVsxXSxlLnNsaWNlKDIpKTp0PT09XCIhaW5cIj90aGlzLl9jb21waWxlTmVnYXRpb24odGhpcy5fY29tcGlsZUluT3AoZVsxXSxlLnNsaWNlKDIpKSk6dD09PVwiYWxsXCI/dGhpcy5fY29tcGlsZUxvZ2ljYWxPcChlLnNsaWNlKDEpLFwiJiZcIik6XCJ0cnVlXCI7cmV0dXJuXCIoXCIrcitcIilcIn07ZS5wcm90b3R5cGUuX2NvbXBhcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZTx0Py0xOmU+dD8xOjB9O2UucHJvdG90eXBlLl9jb21waWxlQ29tcGFyaXNvbk9wPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMuX2NvbXBpbGVQcm9wZXJ0eVJlZmVyZW5jZSh0KTt2YXIgbz1KU09OLnN0cmluZ2lmeShyKTtyZXR1cm4obj9cInR5cGVvZiBcIitpK1wiPT09dHlwZW9mIFwiK28rXCImJlwiOlwiXCIpK2krZStvfTtlLnByb3RvdHlwZS5fY29tcGlsZUluT3A9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9jb21wYXJlO3ZhciBuPUpTT04uc3RyaW5naWZ5KHQuc29ydChyKSk7dmFyIGk9dGhpcy5fY29tcGlsZVByb3BlcnR5UmVmZXJlbmNlKGUpO3JldHVybiBuK1wiLmluZGV4T2YoXCIraStcIikhPT0tMVwifTtlLnByb3RvdHlwZS5fY29tcGlsZUxvZ2ljYWxPcD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NvbXBpbGUuYmluZCh0aGlzKTtyZXR1cm4gZS5tYXAocikuam9pbih0KX07ZS5wcm90b3R5cGUuX2NvbXBpbGVOZWdhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm5cIiEoXCIrZStcIilcIn07ZS5wcm90b3R5cGUuX2NvbXBpbGVQcm9wZXJ0eVJlZmVyZW5jZT1mdW5jdGlvbihlKXtyZXR1cm5cIm5vZGVbXCIrSlNPTi5zdHJpbmdpZnkoZSkrXCJdXCJ9O3JldHVybiBlfSgpO3IuRmlsdGVyQ3JlYXRvcj1uO3IuZGVmYXVsdD1ufSx7fV0sNDI0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkdyYXBoPXZvaWQgMDt2YXIgZD1lKFwicnhqc1wiKTt2YXIgdj1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGE9ZShcIi4uL0VkZ2VcIik7dmFyIGY9ZShcIi4uL0Vycm9yXCIpO3ZhciBwPWUoXCIuLi9HcmFwaFwiKTt2YXIgcz1lKFwiLi4vR2VvXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuLGksbyl7dGhpcy5fYXBpVjM9ZTt0aGlzLl9jYWNoZWROb2Rlcz17fTt0aGlzLl9jYWNoZWROb2RlVGlsZXM9e307dGhpcy5fY2FjaGVkU2VxdWVuY2VOb2Rlcz17fTt0aGlzLl9jYWNoZWRTcGF0aWFsRWRnZXM9e307dGhpcy5fY2FjaGVkVGlsZXM9e307dGhpcy5fY2FjaGluZ0ZpbGwkPXt9O3RoaXMuX2NhY2hpbmdGdWxsJD17fTt0aGlzLl9jYWNoaW5nU2VxdWVuY2VOb2RlcyQ9e307dGhpcy5fY2FjaGluZ1NlcXVlbmNlcyQ9e307dGhpcy5fY2FjaGluZ1NwYXRpYWxBcmVhJD17fTt0aGlzLl9jYWNoaW5nVGlsZXMkPXt9O3RoaXMuX2NoYW5nZWQkPW5ldyBkLlN1YmplY3Q7dGhpcy5fZGVmYXVsdEFsdD0yO3RoaXMuX2VkZ2VDYWxjdWxhdG9yPW4hPW51bGw/bjpuZXcgYS5FZGdlQ2FsY3VsYXRvcjt0aGlzLl9maWx0ZXJDcmVhdG9yPWkhPW51bGw/aTpuZXcgcC5GaWx0ZXJDcmVhdG9yO3RoaXMuX2ZpbHRlcj10aGlzLl9maWx0ZXJDcmVhdG9yLmNyZWF0ZUZpbHRlcih1bmRlZmluZWQpO3RoaXMuX2dyYXBoQ2FsY3VsYXRvcj1yIT1udWxsP3I6bmV3IHAuR3JhcGhDYWxjdWxhdG9yO3RoaXMuX2NvbmZpZ3VyYXRpb249byE9bnVsbD9vOnttYXhTZXF1ZW5jZXM6NTAsbWF4VW51c2VkTm9kZXM6MTAwLG1heFVudXNlZFByZVN0b3JlZE5vZGVzOjMwLG1heFVudXNlZFRpbGVzOjIwfTt0aGlzLl9ub2Rlcz17fTt0aGlzLl9ub2RlSW5kZXg9dCE9bnVsbD90Om5ldyBzLkdlb1JCdXNoKDE2KTt0aGlzLl9ub2RlSW5kZXhUaWxlcz17fTt0aGlzLl9ub2RlVG9UaWxlPXt9O3RoaXMuX3ByZVN0b3JlZD17fTt0aGlzLl9yZXF1aXJlZE5vZGVUaWxlcz17fTt0aGlzLl9yZXF1aXJlZFNwYXRpYWxBcmVhPXt9O3RoaXMuX3NlcXVlbmNlcz17fTt0aGlzLl90aWxlUHJlY2lzaW9uPTc7dGhpcy5fdGlsZVRocmVzaG9sZD0yMH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGFuZ2VkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhbmdlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5jYWNoZUJvdW5kaW5nQm94JD1mdW5jdGlvbihoLHApe3ZhciBmPXRoaXM7dmFyIGU9dGhpcy5fZ3JhcGhDYWxjdWxhdG9yLmVuY29kZUhzRnJvbUJvdW5kaW5nQm94KGgscCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEoZSBpbiBmLl9jYWNoZWRUaWxlcyl9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW4gZi5fY2FjaGluZ1RpbGVzJD9mLl9jYWNoaW5nVGlsZXMkW2VdOmYuX2NhY2hlVGlsZSQoZSl9KTtpZihlLmxlbmd0aD09PTApe2UucHVzaChkLm9mKHRoaXMpKX1yZXR1cm4gZC5mcm9tKGUpLnBpcGUodi5tZXJnZUFsbCgpLHYubGFzdCgpLHYubWVyZ2VNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9Zi5fbm9kZUluZGV4LnNlYXJjaCh7bWF4WDpwLmxhdCxtYXhZOnAubG9uLG1pblg6aC5sYXQsbWluWTpoLmxvbn0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlfSk7dmFyIHI9W107dmFyIG49W107Zm9yKHZhciBpPTAsbz10O2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldO2lmKGEuZnVsbCl7ci5wdXNoKGEpfWVsc2V7bi5wdXNoKGEua2V5KX19dmFyIHM9W107dmFyIHU9MjAwO3doaWxlKG4ubGVuZ3RoPjApe3MucHVzaChuLnNwbGljZSgwLHUpKX12YXIgYz1kLm9mKHIpO3ZhciBsPXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9hcGlWMy5pbWFnZUJ5S2V5RmlsbCQoZSkucGlwZSh2Lm1hcChmdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkocikpe2NvbnRpbnVlfWlmKGYuaGFzTm9kZShyKSl7dmFyIG49Zi5nZXROb2RlKHIpO2lmKCFuLmZ1bGwpe2YuX21ha2VGdWxsKG4sZVtyXSl9dC5wdXNoKG4pfX1yZXR1cm4gdH0pKX0pO3JldHVybiBkLm1lcmdlKGMsZC5mcm9tKGwpLnBpcGUodi5tZXJnZUFsbCgpKSl9KSx2LnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbmNhdCh0KX0pKX07ZS5wcm90b3R5cGUuY2FjaGVGaWxsJD1mdW5jdGlvbih0KXt2YXIgcj10aGlzO2lmKHQgaW4gdGhpcy5fY2FjaGluZ0Z1bGwkKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiQ2Fubm90IGZpbGwgbm9kZSB3aGlsZSBjYWNoaW5nIGZ1bGwgKFwiK3QrXCIpLlwiKX1pZighdGhpcy5oYXNOb2RlKHQpKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiQ2Fubm90IGZpbGwgbm9kZSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIGdyYXBoIChcIit0K1wiKS5cIil9aWYodCBpbiB0aGlzLl9jYWNoaW5nRmlsbCQpe3JldHVybiB0aGlzLl9jYWNoaW5nRmlsbCRbdF19dmFyIG49dGhpcy5nZXROb2RlKHQpO2lmKG4uZnVsbCl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIkNhbm5vdCBmaWxsIG5vZGUgdGhhdCBpcyBhbHJlYWR5IGZ1bGwgKFwiK3QrXCIpLlwiKX10aGlzLl9jYWNoaW5nRmlsbCRbdF09dGhpcy5fYXBpVjMuaW1hZ2VCeUtleUZpbGwkKFt0XSkucGlwZSh2LnRhcChmdW5jdGlvbihlKXtpZighbi5mdWxsKXtyLl9tYWtlRnVsbChuLGVbdF0pfWRlbGV0ZSByLl9jYWNoaW5nRmlsbCRbdF19KSx2Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcn0pLHYuZmluYWxpemUoZnVuY3Rpb24oKXtpZih0IGluIHIuX2NhY2hpbmdGaWxsJCl7ZGVsZXRlIHIuX2NhY2hpbmdGaWxsJFt0XX1yLl9jaGFuZ2VkJC5uZXh0KHIpfSksdi5wdWJsaXNoKCksdi5yZWZDb3VudCgpKTtyZXR1cm4gdGhpcy5fY2FjaGluZ0ZpbGwkW3RdfTtlLnByb3RvdHlwZS5jYWNoZUZ1bGwkPWZ1bmN0aW9uKGkpe3ZhciBvPXRoaXM7aWYoaSBpbiB0aGlzLl9jYWNoaW5nRnVsbCQpe3JldHVybiB0aGlzLl9jYWNoaW5nRnVsbCRbaV19aWYodGhpcy5oYXNOb2RlKGkpKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiQ2Fubm90IGNhY2hlIGZ1bGwgbm9kZSB0aGF0IGFscmVhZHkgZXhpc3QgaW4gZ3JhcGggKFwiK2krXCIpLlwiKX10aGlzLl9jYWNoaW5nRnVsbCRbaV09dGhpcy5fYXBpVjMuaW1hZ2VCeUtleUZ1bGwkKFtpXSkucGlwZSh2LnRhcChmdW5jdGlvbihlKXt2YXIgdD1lW2ldO2lmKG8uaGFzTm9kZShpKSl7dmFyIHI9by5nZXROb2RlKGkpO2lmKCFyLmZ1bGwpe28uX21ha2VGdWxsKHIsdCl9fWVsc2V7aWYodC5zZXF1ZW5jZV9rZXk9PW51bGwpe3Rocm93IG5ldyBmLkdyYXBoTWFwaWxsYXJ5RXJyb3IoXCJOb2RlIGhhcyBubyBzZXF1ZW5jZSBrZXkgKFwiK2krXCIpLlwiKX12YXIgcj1uZXcgcC5Ob2RlKHQpO28uX21ha2VGdWxsKHIsdCk7dmFyIG49by5fZ3JhcGhDYWxjdWxhdG9yLmVuY29kZUgoci5vcmlnaW5hbExhdExvbixvLl90aWxlUHJlY2lzaW9uKTtvLl9wcmVTdG9yZShuLHIpO28uX3NldE5vZGUocik7ZGVsZXRlIG8uX2NhY2hpbmdGdWxsJFtpXX19KSx2Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gb30pLHYuZmluYWxpemUoZnVuY3Rpb24oKXtpZihpIGluIG8uX2NhY2hpbmdGdWxsJCl7ZGVsZXRlIG8uX2NhY2hpbmdGdWxsJFtpXX1vLl9jaGFuZ2VkJC5uZXh0KG8pfSksdi5wdWJsaXNoKCksdi5yZWZDb3VudCgpKTtyZXR1cm4gdGhpcy5fY2FjaGluZ0Z1bGwkW2ldfTtlLnByb3RvdHlwZS5jYWNoZU5vZGVTZXF1ZW5jZSQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaGFzTm9kZShlKSl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIkNhbm5vdCBjYWNoZSBzZXF1ZW5jZSBlZGdlcyBvZiBub2RlIHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gZ3JhcGggKFwiK2UrXCIpLlwiKX12YXIgdD10aGlzLmdldE5vZGUoZSk7aWYodC5zZXF1ZW5jZUtleSBpbiB0aGlzLl9zZXF1ZW5jZXMpe3Rocm93IG5ldyBmLkdyYXBoTWFwaWxsYXJ5RXJyb3IoXCJTZXF1ZW5jZSBhbHJlYWR5IGNhY2hlZCAoXCIrZStcIiksIChcIit0LnNlcXVlbmNlS2V5K1wiKS5cIil9cmV0dXJuIHRoaXMuX2NhY2hlU2VxdWVuY2UkKHQuc2VxdWVuY2VLZXkpfTtlLnByb3RvdHlwZS5jYWNoZVNlcXVlbmNlJD1mdW5jdGlvbihlKXtpZihlIGluIHRoaXMuX3NlcXVlbmNlcyl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIlNlcXVlbmNlIGFscmVhZHkgY2FjaGVkIChcIitlK1wiKVwiKX1yZXR1cm4gdGhpcy5fY2FjaGVTZXF1ZW5jZSQoZSl9O2UucHJvdG90eXBlLmNhY2hlU2VxdWVuY2VFZGdlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE5vZGUoZSk7aWYoISh0LnNlcXVlbmNlS2V5IGluIHRoaXMuX3NlcXVlbmNlcykpe3Rocm93IG5ldyBmLkdyYXBoTWFwaWxsYXJ5RXJyb3IoXCJTZXF1ZW5jZSBpcyBub3QgY2FjaGVkIChcIitlK1wiKSwgKFwiK3Quc2VxdWVuY2VLZXkrXCIpXCIpfXZhciByPXRoaXMuX3NlcXVlbmNlc1t0LnNlcXVlbmNlS2V5XS5zZXF1ZW5jZTt2YXIgbj10aGlzLl9lZGdlQ2FsY3VsYXRvci5jb21wdXRlU2VxdWVuY2VFZGdlcyh0LHIpO3QuY2FjaGVTZXF1ZW5jZUVkZ2VzKG4pfTtlLnByb3RvdHlwZS5jYWNoZVNlcXVlbmNlTm9kZXMkPWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpcztpZighdGhpcy5oYXNTZXF1ZW5jZShlKSl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIkNhbm5vdCBjYWNoZSBzZXF1ZW5jZSBub2RlcyBvZiBzZXF1ZW5jZSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIGdyYXBoIChcIitlK1wiKS5cIil9aWYodGhpcy5oYXNTZXF1ZW5jZU5vZGVzKGUpKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiU2VxdWVuY2Ugbm9kZXMgYWxyZWFkeSBjYWNoZWQgKFwiK2UrXCIpLlwiKX12YXIgcj10aGlzLmdldFNlcXVlbmNlKGUpO2lmKHIua2V5IGluIHRoaXMuX2NhY2hpbmdTZXF1ZW5jZU5vZGVzJCl7cmV0dXJuIHRoaXMuX2NhY2hpbmdTZXF1ZW5jZU5vZGVzJFtyLmtleV19dmFyIG49W107dmFyIGk9ci5rZXlzLnNsaWNlKCk7dmFyIGE9NTA7aWYoISF0JiZpLmxlbmd0aD5hKXt2YXIgcz1pLmluZGV4T2YodCk7dmFyIHU9TWF0aC5tYXgoMCxNYXRoLm1pbihzLWEvMixpLmxlbmd0aC1hKSk7bi5wdXNoKGkuc3BsaWNlKHUsYSkpfXZhciBjPTIwMDt3aGlsZShpLmxlbmd0aD4wKXtuLnB1c2goaS5zcGxpY2UoMCxjKSl9dmFyIGw9bi5sZW5ndGg7dmFyIGg9ZC5mcm9tKG4pLnBpcGUodi5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gby5fYXBpVjMuaW1hZ2VCeUtleUZ1bGwkKGUpLnBpcGUodi50YXAoZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHQpKXtjb250aW51ZX12YXIgcj1lW3RdO2lmKG8uaGFzTm9kZSh0KSl7dmFyIG49by5nZXROb2RlKHIua2V5KTtpZighbi5mdWxsKXtvLl9tYWtlRnVsbChuLHIpfX1lbHNle2lmKHIuc2VxdWVuY2Vfa2V5PT1udWxsKXtjb25zb2xlLndhcm4oXCJTZXF1ZW5jZSBtaXNzaW5nLCBkaXNjYXJkaW5nIG5vZGUgKFwiK3Iua2V5K1wiKVwiKX12YXIgbj1uZXcgcC5Ob2RlKHIpO28uX21ha2VGdWxsKG4scik7dmFyIGk9by5fZ3JhcGhDYWxjdWxhdG9yLmVuY29kZUgobi5vcmlnaW5hbExhdExvbixvLl90aWxlUHJlY2lzaW9uKTtvLl9wcmVTdG9yZShpLG4pO28uX3NldE5vZGUobil9fWwtLX0pLHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBvfSkpfSw2KSx2Lmxhc3QoKSx2LmZpbmFsaXplKGZ1bmN0aW9uKCl7ZGVsZXRlIG8uX2NhY2hpbmdTZXF1ZW5jZU5vZGVzJFtyLmtleV07aWYobD09PTApe28uX2NhY2hlZFNlcXVlbmNlTm9kZXNbci5rZXldPXRydWV9fSksdi5wdWJsaXNoKCksdi5yZWZDb3VudCgpKTt0aGlzLl9jYWNoaW5nU2VxdWVuY2VOb2RlcyRbci5rZXldPWg7cmV0dXJuIGh9O2UucHJvdG90eXBlLmNhY2hlU3BhdGlhbEFyZWEkPWZ1bmN0aW9uKG8pe3ZhciBhPXRoaXM7aWYoIXRoaXMuaGFzTm9kZShvKSl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIkNhbm5vdCBjYWNoZSBzcGF0aWFsIGFyZWEgb2Ygbm9kZSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIGdyYXBoIChcIitvK1wiKS5cIil9aWYobyBpbiB0aGlzLl9jYWNoZWRTcGF0aWFsRWRnZXMpe3Rocm93IG5ldyBmLkdyYXBoTWFwaWxsYXJ5RXJyb3IoXCJOb2RlIGFscmVhZHkgc3BhdGlhbGx5IGNhY2hlZCAoXCIrbytcIikuXCIpfWlmKCEobyBpbiB0aGlzLl9yZXF1aXJlZFNwYXRpYWxBcmVhKSl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIlNwYXRpYWwgYXJlYSBub3QgZGV0ZXJtaW5lZCAoXCIrbytcIikuXCIpfXZhciBzPXRoaXMuX3JlcXVpcmVkU3BhdGlhbEFyZWFbb107aWYoT2JqZWN0LmtleXMocy5jYWNoZU5vZGVzKS5sZW5ndGg9PT0wKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiU3BhdGlhbCBub2RlcyBhbHJlYWR5IGNhY2hlZCAoXCIrbytcIikuXCIpfWlmKG8gaW4gdGhpcy5fY2FjaGluZ1NwYXRpYWxBcmVhJCl7cmV0dXJuIHRoaXMuX2NhY2hpbmdTcGF0aWFsQXJlYSRbb119dmFyIGU9W107d2hpbGUocy5jYWNoZUtleXMubGVuZ3RoPjApe2UucHVzaChzLmNhY2hlS2V5cy5zcGxpY2UoMCwyMDApKX12YXIgdT1lLmxlbmd0aDt2YXIgdD1bXTt2YXIgcj1mdW5jdGlvbihpKXt2YXIgZT1uLl9hcGlWMy5pbWFnZUJ5S2V5RmlsbCQoaSkucGlwZSh2LnRhcChmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkodCkpe2NvbnRpbnVlfXZhciByPXMuY2FjaGVOb2Rlc1t0XTtpZihyLmZ1bGwpe2RlbGV0ZSBzLmNhY2hlTm9kZXNbdF07Y29udGludWV9dmFyIG49ZVt0XTthLl9tYWtlRnVsbChyLG4pO2RlbGV0ZSBzLmNhY2hlTm9kZXNbdF19aWYoLS11PT09MCl7ZGVsZXRlIGEuX2NhY2hpbmdTcGF0aWFsQXJlYSRbb119fSksdi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGF9KSx2LmNhdGNoRXJyb3IoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj1pO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO2lmKG4gaW4gcy5hbGwpe2RlbGV0ZSBzLmFsbFtuXX1pZihuIGluIHMuY2FjaGVOb2Rlcyl7ZGVsZXRlIHMuY2FjaGVOb2Rlc1tuXX19aWYoLS11PT09MCl7ZGVsZXRlIGEuX2NhY2hpbmdTcGF0aWFsQXJlYSRbb119dGhyb3cgZX0pLHYuZmluYWxpemUoZnVuY3Rpb24oKXtpZihPYmplY3Qua2V5cyhzLmNhY2hlTm9kZXMpLmxlbmd0aD09PTApe2EuX2NoYW5nZWQkLm5leHQoYSl9fSksdi5wdWJsaXNoKCksdi5yZWZDb3VudCgpKTt0LnB1c2goZSl9O3ZhciBuPXRoaXM7Zm9yKHZhciBpPTAsYz1lO2k8Yy5sZW5ndGg7aSsrKXt2YXIgbD1jW2ldO3IobCl9dGhpcy5fY2FjaGluZ1NwYXRpYWxBcmVhJFtvXT10O3JldHVybiB0fTtlLnByb3RvdHlwZS5jYWNoZVNwYXRpYWxFZGdlcz1mdW5jdGlvbihlKXtpZihlIGluIHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlcyl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIlNwYXRpYWwgZWRnZXMgYWxyZWFkeSBjYWNoZWQgKFwiK2UrXCIpLlwiKX12YXIgdD10aGlzLmdldE5vZGUoZSk7dmFyIHI9dGhpcy5fc2VxdWVuY2VzW3Quc2VxdWVuY2VLZXldLnNlcXVlbmNlO3ZhciBuPVtdO3ZhciBpPXIuZmluZFByZXZLZXkodC5rZXkpO2lmKGkhPW51bGwpe24ucHVzaChpKX12YXIgbz1yLmZpbmROZXh0S2V5KHQua2V5KTtpZihvIT1udWxsKXtuLnB1c2gobyl9dmFyIGE9dGhpcy5fcmVxdWlyZWRTcGF0aWFsQXJlYVtlXS5hbGw7dmFyIHM9W107dmFyIHU9dGhpcy5fZmlsdGVyO2Zvcih2YXIgYyBpbiBhKXtpZighYS5oYXNPd25Qcm9wZXJ0eShjKSl7Y29udGludWV9dmFyIGw9YVtjXTtpZih1KGwpKXtzLnB1c2gobCl9fXZhciBoPXRoaXMuX2VkZ2VDYWxjdWxhdG9yLmdldFBvdGVudGlhbEVkZ2VzKHQscyxuKTt2YXIgcD10aGlzLl9lZGdlQ2FsY3VsYXRvci5jb21wdXRlU3RlcEVkZ2VzKHQsaCxpLG8pO3A9cC5jb25jYXQodGhpcy5fZWRnZUNhbGN1bGF0b3IuY29tcHV0ZVR1cm5FZGdlcyh0LGgpKTtwPXAuY29uY2F0KHRoaXMuX2VkZ2VDYWxjdWxhdG9yLmNvbXB1dGVQYW5vRWRnZXModCxoKSk7cD1wLmNvbmNhdCh0aGlzLl9lZGdlQ2FsY3VsYXRvci5jb21wdXRlUGVyc3BlY3RpdmVUb1Bhbm9FZGdlcyh0LGgpKTtwPXAuY29uY2F0KHRoaXMuX2VkZ2VDYWxjdWxhdG9yLmNvbXB1dGVTaW1pbGFyRWRnZXModCxoKSk7dC5jYWNoZVNwYXRpYWxFZGdlcyhwKTt0aGlzLl9jYWNoZWRTcGF0aWFsRWRnZXNbZV09dDtkZWxldGUgdGhpcy5fcmVxdWlyZWRTcGF0aWFsQXJlYVtlXTtkZWxldGUgdGhpcy5fY2FjaGVkTm9kZVRpbGVzW2VdfTtlLnByb3RvdHlwZS5jYWNoZVRpbGVzJD1mdW5jdGlvbihuKXt2YXIgaT10aGlzO2lmKG4gaW4gdGhpcy5fY2FjaGVkTm9kZVRpbGVzKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiVGlsZXMgYWxyZWFkeSBjYWNoZWQgKFwiK24rXCIpLlwiKX1pZihuIGluIHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlcyl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIlNwYXRpYWwgZWRnZXMgYWxyZWFkeSBjYWNoZWQgc28gdGlsZXMgY29uc2lkZXJlZCBjYWNoZWQgKFwiK24rXCIpLlwiKX1pZighKG4gaW4gdGhpcy5fcmVxdWlyZWROb2RlVGlsZXMpKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiVGlsZXMgaGF2ZSBub3QgYmVlbiBkZXRlcm1pbmVkIChcIituK1wiKS5cIil9dmFyIG89dGhpcy5fcmVxdWlyZWROb2RlVGlsZXNbbl07aWYoby5jYWNoZS5sZW5ndGg9PT0wJiZvLmNhY2hpbmcubGVuZ3RoPT09MCl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIlRpbGVzIGFscmVhZHkgY2FjaGVkIChcIituK1wiKS5cIil9aWYoIXRoaXMuaGFzTm9kZShuKSl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIkNhbm5vdCBjYWNoZSB0aWxlcyBvZiBub2RlIHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gZ3JhcGggKFwiK24rXCIpLlwiKX12YXIgZT1vLmNhY2hlLnNsaWNlKCk7by5jYWNoaW5nPXRoaXMuX3JlcXVpcmVkTm9kZVRpbGVzW25dLmNhY2hpbmcuY29uY2F0KGUpO28uY2FjaGU9W107dmFyIHQ9W107dmFyIHI9ZnVuY3Rpb24ocil7dmFyIGU9ciBpbiBhLl9jYWNoaW5nVGlsZXMkP2EuX2NhY2hpbmdUaWxlcyRbcl06YS5fY2FjaGVUaWxlJChyKTt0LnB1c2goZS5waXBlKHYudGFwKGZ1bmN0aW9uKGUpe3ZhciB0PW8uY2FjaGluZy5pbmRleE9mKHIpO2lmKHQ+LTEpe28uY2FjaGluZy5zcGxpY2UodCwxKX1pZihvLmNhY2hpbmcubGVuZ3RoPT09MCYmby5jYWNoZS5sZW5ndGg9PT0wKXtkZWxldGUgaS5fcmVxdWlyZWROb2RlVGlsZXNbbl07aS5fY2FjaGVkTm9kZVRpbGVzW25dPXRydWV9fSksdi5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe3ZhciB0PW8uY2FjaGluZy5pbmRleE9mKHIpO2lmKHQ+LTEpe28uY2FjaGluZy5zcGxpY2UodCwxKX1pZihvLmNhY2hpbmcubGVuZ3RoPT09MCYmby5jYWNoZS5sZW5ndGg9PT0wKXtkZWxldGUgaS5fcmVxdWlyZWROb2RlVGlsZXNbbl07aS5fY2FjaGVkTm9kZVRpbGVzW25dPXRydWV9dGhyb3cgZX0pLHYuZmluYWxpemUoZnVuY3Rpb24oKXtpLl9jaGFuZ2VkJC5uZXh0KGkpfSksdi5wdWJsaXNoKCksdi5yZWZDb3VudCgpKSl9O3ZhciBhPXRoaXM7Zm9yKHZhciBzPTAsdT1vLmNhY2hpbmc7czx1Lmxlbmd0aDtzKyspe3ZhciBjPXVbc107cihjKX1yZXR1cm4gdH07ZS5wcm90b3R5cGUuaW5pdGlhbGl6ZUNhY2hlPWZ1bmN0aW9uKGUpe2lmKGUgaW4gdGhpcy5fY2FjaGVkTm9kZXMpe3Rocm93IG5ldyBmLkdyYXBoTWFwaWxsYXJ5RXJyb3IoXCJOb2RlIGFscmVhZHkgaW4gY2FjaGUgKFwiK2UrXCIpLlwiKX12YXIgdD10aGlzLmdldE5vZGUoZSk7dC5pbml0aWFsaXplQ2FjaGUobmV3IHAuTm9kZUNhY2hlKTt2YXIgcj0obmV3IERhdGUpLmdldFRpbWUoKTt0aGlzLl9jYWNoZWROb2Rlc1tlXT17YWNjZXNzZWQ6cixub2RlOnR9O3RoaXMuX3VwZGF0ZUNhY2hlZFRpbGVBY2Nlc3MoZSxyKX07ZS5wcm90b3R5cGUuaXNDYWNoaW5nRmlsbD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbiB0aGlzLl9jYWNoaW5nRmlsbCR9O2UucHJvdG90eXBlLmlzQ2FjaGluZ0Z1bGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW4gdGhpcy5fY2FjaGluZ0Z1bGwkfTtlLnByb3RvdHlwZS5pc0NhY2hpbmdOb2RlU2VxdWVuY2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXROb2RlKGUpO3JldHVybiB0LnNlcXVlbmNlS2V5IGluIHRoaXMuX2NhY2hpbmdTZXF1ZW5jZXMkfTtlLnByb3RvdHlwZS5pc0NhY2hpbmdTZXF1ZW5jZT1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbiB0aGlzLl9jYWNoaW5nU2VxdWVuY2VzJH07ZS5wcm90b3R5cGUuaXNDYWNoaW5nU2VxdWVuY2VOb2Rlcz1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbiB0aGlzLl9jYWNoaW5nU2VxdWVuY2VOb2RlcyR9O2UucHJvdG90eXBlLmlzQ2FjaGluZ1RpbGVzPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX3JlcXVpcmVkTm9kZVRpbGVzJiZ0aGlzLl9yZXF1aXJlZE5vZGVUaWxlc1tlXS5jYWNoZS5sZW5ndGg9PT0wJiZ0aGlzLl9yZXF1aXJlZE5vZGVUaWxlc1tlXS5jYWNoaW5nLmxlbmd0aD4wfTtlLnByb3RvdHlwZS5oYXNJbml0aWFsaXplZENhY2hlPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHRoaXMuX2NhY2hlZE5vZGVzfTtlLnByb3RvdHlwZS5oYXNOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpO3RoaXMuX3VwZGF0ZUNhY2hlZE5vZGVBY2Nlc3MoZSx0KTt0aGlzLl91cGRhdGVDYWNoZWRUaWxlQWNjZXNzKGUsdCk7cmV0dXJuIGUgaW4gdGhpcy5fbm9kZXN9O2UucHJvdG90eXBlLmhhc05vZGVTZXF1ZW5jZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE5vZGUoZSk7dmFyIHI9dC5zZXF1ZW5jZUtleTt2YXIgbj1yIGluIHRoaXMuX3NlcXVlbmNlcztpZihuKXt0aGlzLl9zZXF1ZW5jZXNbcl0uYWNjZXNzZWQ9KG5ldyBEYXRlKS5nZXRUaW1lKCl9cmV0dXJuIG59O2UucHJvdG90eXBlLmhhc1NlcXVlbmNlPWZ1bmN0aW9uKGUpe3ZhciB0PWUgaW4gdGhpcy5fc2VxdWVuY2VzO2lmKHQpe3RoaXMuX3NlcXVlbmNlc1tlXS5hY2Nlc3NlZD0obmV3IERhdGUpLmdldFRpbWUoKX1yZXR1cm4gdH07ZS5wcm90b3R5cGUuaGFzU2VxdWVuY2VOb2Rlcz1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbiB0aGlzLl9jYWNoZWRTZXF1ZW5jZU5vZGVzfTtlLnByb3RvdHlwZS5oYXNTcGF0aWFsQXJlYT1mdW5jdGlvbihlKXtpZighdGhpcy5oYXNOb2RlKGUpKXt0aHJvdyBuZXcgZi5HcmFwaE1hcGlsbGFyeUVycm9yKFwiU3BhdGlhbCBhcmVhIG5vZGVzIGNhbm5vdCBiZSBkZXRlcm1pbmVkIGlmIG5vZGUgbm90IGluIGdyYXBoIChcIitlK1wiKS5cIil9aWYoZSBpbiB0aGlzLl9jYWNoZWRTcGF0aWFsRWRnZXMpe3JldHVybiB0cnVlfWlmKGUgaW4gdGhpcy5fcmVxdWlyZWRTcGF0aWFsQXJlYSl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3JlcXVpcmVkU3BhdGlhbEFyZWFbZV0uY2FjaGVOb2RlcykubGVuZ3RoPT09MH12YXIgdD10aGlzLmdldE5vZGUoZSk7dmFyIHI9dGhpcy5fZ3JhcGhDYWxjdWxhdG9yLmJvdW5kaW5nQm94Q29ybmVycyh0LmxhdExvbix0aGlzLl90aWxlVGhyZXNob2xkKTt2YXIgbj10aGlzLl9ub2RlSW5kZXguc2VhcmNoKHttYXhYOnJbMV0ubGF0LG1heFk6clsxXS5sb24sbWluWDpyWzBdLmxhdCxtaW5ZOnJbMF0ubG9ufSk7dmFyIGk9e2FsbDp7fSxjYWNoZUtleXM6W10sY2FjaGVOb2Rlczp7fX07Zm9yKHZhciBvPTAsYT1uO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO2kuYWxsW3Mubm9kZS5rZXldPXMubm9kZTtpZighcy5ub2RlLmZ1bGwpe2kuY2FjaGVLZXlzLnB1c2gocy5ub2RlLmtleSk7aS5jYWNoZU5vZGVzW3Mubm9kZS5rZXldPXMubm9kZX19dGhpcy5fcmVxdWlyZWRTcGF0aWFsQXJlYVtlXT1pO3JldHVybiBpLmNhY2hlS2V5cy5sZW5ndGg9PT0wfTtlLnByb3RvdHlwZS5oYXNUaWxlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGUgaW4gdGhpcy5fY2FjaGVkTm9kZVRpbGVzKXtyZXR1cm4gdHJ1ZX1pZihlIGluIHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlcyl7cmV0dXJuIHRydWV9aWYoIXRoaXMuaGFzTm9kZShlKSl7dGhyb3cgbmV3IGYuR3JhcGhNYXBpbGxhcnlFcnJvcihcIk5vZGUgZG9lcyBub3QgZXhpc3QgaW4gZ3JhcGggKFwiK2UrXCIpLlwiKX12YXIgcj17Y2FjaGU6W10sY2FjaGluZzpbXX07aWYoIShlIGluIHRoaXMuX3JlcXVpcmVkTm9kZVRpbGVzKSl7dmFyIG49dGhpcy5nZXROb2RlKGUpO3IuY2FjaGU9dGhpcy5fZ3JhcGhDYWxjdWxhdG9yLmVuY29kZUhzKG4ubGF0TG9uLHRoaXMuX3RpbGVQcmVjaXNpb24sdGhpcy5fdGlsZVRocmVzaG9sZCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEoZSBpbiB0Ll9jYWNoZWRUaWxlcyl9KTtpZihyLmNhY2hlLmxlbmd0aD4wKXt0aGlzLl9yZXF1aXJlZE5vZGVUaWxlc1tlXT1yfX1lbHNle3I9dGhpcy5fcmVxdWlyZWROb2RlVGlsZXNbZV19cmV0dXJuIHIuY2FjaGUubGVuZ3RoPT09MCYmci5jYWNoaW5nLmxlbmd0aD09PTB9O2UucHJvdG90eXBlLmdldE5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy5fdXBkYXRlQ2FjaGVkTm9kZUFjY2VzcyhlLHQpO3RoaXMuX3VwZGF0ZUNhY2hlZFRpbGVBY2Nlc3MoZSx0KTtyZXR1cm4gdGhpcy5fbm9kZXNbZV19O2UucHJvdG90eXBlLmdldFNlcXVlbmNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3NlcXVlbmNlc1tlXTt0LmFjY2Vzc2VkPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiB0LnNlcXVlbmNlfTtlLnByb3RvdHlwZS5yZXNldFNwYXRpYWxFZGdlcz1mdW5jdGlvbigpe3ZhciBlPU9iamVjdC5rZXlzKHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlcyk7Zm9yKHZhciB0PTAscj1lO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO3ZhciBpPXRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlc1tuXTtpLnJlc2V0U3BhdGlhbEVkZ2VzKCk7ZGVsZXRlIHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlc1tuXX19O2UucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgcj0wLG49ZTtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTtpZighdGhpcy5oYXNOb2RlKGkpKXt0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIGRvZXMgbm90IGV4aXN0IFwiK2kpfXZhciBvPXRoaXMuZ2V0Tm9kZShpKTtvLnJlc2V0U2VxdWVuY2VFZGdlcygpO28ucmVzZXRTcGF0aWFsRWRnZXMoKTt0LnB1c2gobyl9Zm9yKHZhciBhPTAscz1PYmplY3Qua2V5cyh0aGlzLl9jYWNoZWROb2Rlcyk7YTxzLmxlbmd0aDthKyspe3ZhciB1PXNbYV07aWYoZS5pbmRleE9mKHUpIT09LTEpe2NvbnRpbnVlfXRoaXMuX2NhY2hlZE5vZGVzW3VdLm5vZGUuZGlzcG9zZSgpO2RlbGV0ZSB0aGlzLl9jYWNoZWROb2Rlc1t1XX10aGlzLl9jYWNoZWROb2RlVGlsZXM9e307dGhpcy5fY2FjaGVkU3BhdGlhbEVkZ2VzPXt9O3RoaXMuX2NhY2hlZFRpbGVzPXt9O3RoaXMuX2NhY2hpbmdGaWxsJD17fTt0aGlzLl9jYWNoaW5nRnVsbCQ9e307dGhpcy5fY2FjaGluZ1NlcXVlbmNlcyQ9e307dGhpcy5fY2FjaGluZ1NwYXRpYWxBcmVhJD17fTt0aGlzLl9jYWNoaW5nVGlsZXMkPXt9O3RoaXMuX25vZGVzPXt9O3RoaXMuX25vZGVUb1RpbGU9e307dGhpcy5fcHJlU3RvcmVkPXt9O2Zvcih2YXIgYz0wLGw9dDtjPGwubGVuZ3RoO2MrKyl7dmFyIG89bFtjXTt0aGlzLl9ub2Rlc1tvLmtleV09bzt2YXIgaD10aGlzLl9ncmFwaENhbGN1bGF0b3IuZW5jb2RlSChvLm9yaWdpbmFsTGF0TG9uLHRoaXMuX3RpbGVQcmVjaXNpb24pO3RoaXMuX3ByZVN0b3JlKGgsbyl9dGhpcy5fcmVxdWlyZWROb2RlVGlsZXM9e307dGhpcy5fcmVxdWlyZWRTcGF0aWFsQXJlYT17fTt0aGlzLl9zZXF1ZW5jZXM9e307dGhpcy5fbm9kZUluZGV4VGlsZXM9e307dGhpcy5fbm9kZUluZGV4LmNsZWFyKCl9O2UucHJvdG90eXBlLnNldEZpbHRlcj1mdW5jdGlvbihlKXt0aGlzLl9maWx0ZXI9dGhpcy5fZmlsdGVyQ3JlYXRvci5jcmVhdGVGaWx0ZXIoZSl9O2UucHJvdG90eXBlLnVuY2FjaGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTt0aGlzLl9hZGROZXdLZXlzKHIsdGhpcy5fY2FjaGluZ0Z1bGwkKTt0aGlzLl9hZGROZXdLZXlzKHIsdGhpcy5fY2FjaGluZ0ZpbGwkKTt0aGlzLl9hZGROZXdLZXlzKHIsdGhpcy5fY2FjaGluZ1NwYXRpYWxBcmVhJCk7dGhpcy5fYWRkTmV3S2V5cyhyLHRoaXMuX3JlcXVpcmVkTm9kZVRpbGVzKTt0aGlzLl9hZGROZXdLZXlzKHIsdGhpcy5fcmVxdWlyZWRTcGF0aWFsQXJlYSk7Zm9yKHZhciBuPTAsaT1lO248aS5sZW5ndGg7bisrKXt2YXIgbz1pW25dO2lmKG8gaW4gcil7Y29udGludWV9cltvXT10cnVlfXZhciBhPXt9O2Zvcih2YXIgbyBpbiByKXtpZighci5oYXNPd25Qcm9wZXJ0eShvKSl7Y29udGludWV9dmFyIHM9dGhpcy5fbm9kZXNbb107dmFyIHU9dGhpcy5fZ3JhcGhDYWxjdWxhdG9yLmVuY29kZUhzKHMubGF0TG9uKTtmb3IodmFyIGM9MCxsPXU7YzxsLmxlbmd0aDtjKyspe3ZhciBoPWxbY107aWYoIShoIGluIGEpKXthW2hdPXRydWV9fX12YXIgcD1bXTtmb3IodmFyIGYgaW4gdGhpcy5fY2FjaGVkVGlsZXMpe2lmKCF0aGlzLl9jYWNoZWRUaWxlcy5oYXNPd25Qcm9wZXJ0eShmKXx8ZiBpbiBhKXtjb250aW51ZX1wLnB1c2goW2YsdGhpcy5fY2FjaGVkVGlsZXNbZl1dKX12YXIgZD1wLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFsxXS5hY2Nlc3NlZC1lWzFdLmFjY2Vzc2VkfSkuc2xpY2UodGhpcy5fY29uZmlndXJhdGlvbi5tYXhVbnVzZWRUaWxlcykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSk7Zm9yKHZhciB2PTAsbT1kO3Y8bS5sZW5ndGg7disrKXt2YXIgZz1tW3ZdO3RoaXMuX3VuY2FjaGVUaWxlKGcsdCl9dmFyIF89W107dmFyIHk9W107Zm9yKHZhciBmIGluIHRoaXMuX3ByZVN0b3JlZCl7aWYoIXRoaXMuX3ByZVN0b3JlZC5oYXNPd25Qcm9wZXJ0eShmKXx8ZiBpbiB0aGlzLl9jYWNoaW5nVGlsZXMkKXtjb250aW51ZX12YXIgYj10aGlzLl9wcmVTdG9yZWRbZl07Zm9yKHZhciBvIGluIGIpe2lmKCFiLmhhc093blByb3BlcnR5KG8pfHxvIGluIHIpe2NvbnRpbnVlfWlmKGJbb10uc2VxdWVuY2VLZXk9PT10KXtjb250aW51ZX1pZihvIGluIHRoaXMuX2NhY2hlZE5vZGVzKXtfLnB1c2goW3RoaXMuX2NhY2hlZE5vZGVzW29dLGZdKX1lbHNle3kucHVzaChbbyxmXSl9fX12YXIgeD1fLnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgcj1lWzBdLG49ZVsxXTt2YXIgaT10WzBdLG89dFsxXTtyZXR1cm4gaS5hY2Nlc3NlZC1yLmFjY2Vzc2VkfSkuc2xpY2UodGhpcy5fY29uZmlndXJhdGlvbi5tYXhVbnVzZWRQcmVTdG9yZWROb2RlcykubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVyblt0Lm5vZGUua2V5LHJdfSk7dGhpcy5fdW5jYWNoZVByZVN0b3JlZCh5KTt0aGlzLl91bmNhY2hlUHJlU3RvcmVkKHgpO3ZhciB3PVtdO2Zvcih2YXIgbyBpbiB0aGlzLl9jYWNoZWROb2Rlcyl7aWYoIXRoaXMuX2NhY2hlZE5vZGVzLmhhc093blByb3BlcnR5KG8pfHxvIGluIHIpe2NvbnRpbnVlfXcucHVzaCh0aGlzLl9jYWNoZWROb2Rlc1tvXSl9dmFyIFM9dy5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuYWNjZXNzZWQtZS5hY2Nlc3NlZH0pLnNsaWNlKHRoaXMuX2NvbmZpZ3VyYXRpb24ubWF4VW51c2VkTm9kZXMpO2Zvcih2YXIgTT0wLEM9UztNPEMubGVuZ3RoO00rKyl7dmFyIFQ9Q1tNXTtULm5vZGUudW5jYWNoZSgpO3ZhciBvPVQubm9kZS5rZXk7ZGVsZXRlIHRoaXMuX2NhY2hlZE5vZGVzW29dO2lmKG8gaW4gdGhpcy5fY2FjaGVkTm9kZVRpbGVzKXtkZWxldGUgdGhpcy5fY2FjaGVkTm9kZVRpbGVzW29dfWlmKG8gaW4gdGhpcy5fY2FjaGVkU3BhdGlhbEVkZ2VzKXtkZWxldGUgdGhpcy5fY2FjaGVkU3BhdGlhbEVkZ2VzW29dfX12YXIgRT1bXTtmb3IodmFyIE8gaW4gdGhpcy5fc2VxdWVuY2VzKXtpZighdGhpcy5fc2VxdWVuY2VzLmhhc093blByb3BlcnR5KE8pfHxPIGluIHRoaXMuX2NhY2hpbmdTZXF1ZW5jZXMkfHxPPT09dCl7Y29udGludWV9RS5wdXNoKHRoaXMuX3NlcXVlbmNlc1tPXSl9dmFyIFA9RS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuYWNjZXNzZWQtZS5hY2Nlc3NlZH0pLnNsaWNlKHRoaXMuX2NvbmZpZ3VyYXRpb24ubWF4U2VxdWVuY2VzKTtmb3IodmFyIEE9MCxqPVA7QTxqLmxlbmd0aDtBKyspe3ZhciBSPWpbQV07dmFyIE89Ui5zZXF1ZW5jZS5rZXk7ZGVsZXRlIHRoaXMuX3NlcXVlbmNlc1tPXTtpZihPIGluIHRoaXMuX2NhY2hlZFNlcXVlbmNlTm9kZXMpe2RlbGV0ZSB0aGlzLl9jYWNoZWRTZXF1ZW5jZU5vZGVzW09dfVIuc2VxdWVuY2UuZGlzcG9zZSgpfX07ZS5wcm90b3R5cGUuX2FkZE5ld0tleXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl7aWYoIXQuaGFzT3duUHJvcGVydHkocil8fCF0aGlzLmhhc05vZGUocikpe2NvbnRpbnVlfWlmKCEociBpbiBlKSl7ZVtyXT10cnVlfX19O2UucHJvdG90eXBlLl9jYWNoZVNlcXVlbmNlJD1mdW5jdGlvbih0KXt2YXIgcj10aGlzO2lmKHQgaW4gdGhpcy5fY2FjaGluZ1NlcXVlbmNlcyQpe3JldHVybiB0aGlzLl9jYWNoaW5nU2VxdWVuY2VzJFt0XX10aGlzLl9jYWNoaW5nU2VxdWVuY2VzJFt0XT10aGlzLl9hcGlWMy5zZXF1ZW5jZUJ5S2V5JChbdF0pLnBpcGUodi50YXAoZnVuY3Rpb24oZSl7aWYoISh0IGluIHIuX3NlcXVlbmNlcykpe3IuX3NlcXVlbmNlc1t0XT17YWNjZXNzZWQ6KG5ldyBEYXRlKS5nZXRUaW1lKCksc2VxdWVuY2U6bmV3IHAuU2VxdWVuY2UoZVt0XSl9fWRlbGV0ZSByLl9jYWNoaW5nU2VxdWVuY2VzJFt0XX0pLHYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByfSksdi5maW5hbGl6ZShmdW5jdGlvbigpe2lmKHQgaW4gci5fY2FjaGluZ1NlcXVlbmNlcyQpe2RlbGV0ZSByLl9jYWNoaW5nU2VxdWVuY2VzJFt0XX1yLl9jaGFuZ2VkJC5uZXh0KHIpfSksdi5wdWJsaXNoKCksdi5yZWZDb3VudCgpKTtyZXR1cm4gdGhpcy5fY2FjaGluZ1NlcXVlbmNlcyRbdF19O2UucHJvdG90eXBlLl9jYWNoZVRpbGUkPWZ1bmN0aW9uKGwpe3ZhciBoPXRoaXM7dGhpcy5fY2FjaGluZ1RpbGVzJFtsXT10aGlzLl9hcGlWMy5pbWFnZXNCeUgkKFtsXSkucGlwZSh2LnRhcChmdW5jdGlvbihlKXt2YXIgdD1lW2xdO2lmKGwgaW4gaC5fY2FjaGVkVGlsZXMpe3JldHVybn1oLl9ub2RlSW5kZXhUaWxlc1tsXT1bXTtoLl9jYWNoZWRUaWxlc1tsXT17YWNjZXNzZWQ6KG5ldyBEYXRlKS5nZXRUaW1lKCksbm9kZXM6W119O3ZhciByPWguX2NhY2hlZFRpbGVzW2xdLm5vZGVzO3ZhciBuPWguX3JlbW92ZUZyb21QcmVTdG9yZShsKTtmb3IodmFyIGkgaW4gdCl7aWYoIXQuaGFzT3duUHJvcGVydHkoaSkpe2NvbnRpbnVlfXZhciBvPXRbaV07aWYobz09bnVsbCl7YnJlYWt9aWYoby5zZXF1ZW5jZV9rZXk9PW51bGwpe2NvbnNvbGUud2FybihcIlNlcXVlbmNlIG1pc3NpbmcsIGRpc2NhcmRpbmcgbm9kZSAoXCIrby5rZXkrXCIpXCIpO2NvbnRpbnVlfWlmKG4hPW51bGwmJm8ua2V5IGluIG4pe3ZhciBhPW5bby5rZXldO2RlbGV0ZSBuW28ua2V5XTtyLnB1c2goYSk7dmFyIHM9e2xhdDphLmxhdExvbi5sYXQsbG9uOmEubGF0TG9uLmxvbixub2RlOmF9O2guX25vZGVJbmRleC5pbnNlcnQocyk7aC5fbm9kZUluZGV4VGlsZXNbbF0ucHVzaChzKTtoLl9ub2RlVG9UaWxlW2Eua2V5XT1sO2NvbnRpbnVlfXZhciB1PW5ldyBwLk5vZGUobyk7ci5wdXNoKHUpO3ZhciBjPXtsYXQ6dS5sYXRMb24ubGF0LGxvbjp1LmxhdExvbi5sb24sbm9kZTp1fTtoLl9ub2RlSW5kZXguaW5zZXJ0KGMpO2guX25vZGVJbmRleFRpbGVzW2xdLnB1c2goYyk7aC5fbm9kZVRvVGlsZVt1LmtleV09bDtoLl9zZXROb2RlKHUpfWRlbGV0ZSBoLl9jYWNoaW5nVGlsZXMkW2xdfSksdi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGh9KSx2LmNhdGNoRXJyb3IoZnVuY3Rpb24oZSl7ZGVsZXRlIGguX2NhY2hpbmdUaWxlcyRbbF07dGhyb3cgZX0pLHYucHVibGlzaCgpLHYucmVmQ291bnQoKSk7cmV0dXJuIHRoaXMuX2NhY2hpbmdUaWxlcyRbbF19O2UucHJvdG90eXBlLl9tYWtlRnVsbD1mdW5jdGlvbihlLHQpe2lmKHQuY2FsdD09bnVsbCl7dC5jYWx0PXRoaXMuX2RlZmF1bHRBbHR9aWYodC5jX3JvdGF0aW9uPT1udWxsKXt0LmNfcm90YXRpb249dGhpcy5fZ3JhcGhDYWxjdWxhdG9yLnJvdGF0aW9uRnJvbUNvbXBhc3ModC5jYSx0Lm9yaWVudGF0aW9uKX1lLm1ha2VGdWxsKHQpfTtlLnByb3RvdHlwZS5fcHJlU3RvcmU9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW4gdGhpcy5fcHJlU3RvcmVkKSl7dGhpcy5fcHJlU3RvcmVkW2VdPXt9fXRoaXMuX3ByZVN0b3JlZFtlXVt0LmtleV09dH07ZS5wcm90b3R5cGUuX3JlbW92ZUZyb21QcmVTdG9yZT1mdW5jdGlvbihlKXt2YXIgdD1udWxsO2lmKGUgaW4gdGhpcy5fcHJlU3RvcmVkKXt0PXRoaXMuX3ByZVN0b3JlZFtlXTtkZWxldGUgdGhpcy5fcHJlU3RvcmVkW2VdfXJldHVybiB0fTtlLnByb3RvdHlwZS5fc2V0Tm9kZT1mdW5jdGlvbihlKXt2YXIgdD1lLmtleTtpZih0aGlzLmhhc05vZGUodCkpe3Rocm93IG5ldyBmLkdyYXBoTWFwaWxsYXJ5RXJyb3IoXCJOb2RlIGFscmVhZHkgZXhpc3QgKFwiK3QrXCIpLlwiKX10aGlzLl9ub2Rlc1t0XT1lfTtlLnByb3RvdHlwZS5fdW5jYWNoZVRpbGU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxuPXRoaXMuX2NhY2hlZFRpbGVzW2VdLm5vZGVzO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO3ZhciBvPWkua2V5O2RlbGV0ZSB0aGlzLl9ub2RlVG9UaWxlW29dO2lmKG8gaW4gdGhpcy5fY2FjaGVkTm9kZXMpe2RlbGV0ZSB0aGlzLl9jYWNoZWROb2Rlc1tvXX1pZihvIGluIHRoaXMuX2NhY2hlZE5vZGVUaWxlcyl7ZGVsZXRlIHRoaXMuX2NhY2hlZE5vZGVUaWxlc1tvXX1pZihvIGluIHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlcyl7ZGVsZXRlIHRoaXMuX2NhY2hlZFNwYXRpYWxFZGdlc1tvXX1pZihpLnNlcXVlbmNlS2V5PT09dCl7dGhpcy5fcHJlU3RvcmUoZSxpKTtpLnVuY2FjaGUoKX1lbHNle2RlbGV0ZSB0aGlzLl9ub2Rlc1tvXTtpZihpLnNlcXVlbmNlS2V5IGluIHRoaXMuX2NhY2hlZFNlcXVlbmNlTm9kZXMpe2RlbGV0ZSB0aGlzLl9jYWNoZWRTZXF1ZW5jZU5vZGVzW2kuc2VxdWVuY2VLZXldfWkuZGlzcG9zZSgpfX1mb3IodmFyIGE9MCxzPXRoaXMuX25vZGVJbmRleFRpbGVzW2VdO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdO3RoaXMuX25vZGVJbmRleC5yZW1vdmUodSl9ZGVsZXRlIHRoaXMuX25vZGVJbmRleFRpbGVzW2VdO2RlbGV0ZSB0aGlzLl9jYWNoZWRUaWxlc1tlXX07ZS5wcm90b3R5cGUuX3VuY2FjaGVQcmVTdG9yZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdLG89aVswXSxhPWlbMV07aWYobyBpbiB0aGlzLl9ub2Rlcyl7ZGVsZXRlIHRoaXMuX25vZGVzW29dfWlmKG8gaW4gdGhpcy5fY2FjaGVkTm9kZXMpe2RlbGV0ZSB0aGlzLl9jYWNoZWROb2Rlc1tvXX12YXIgcz10aGlzLl9wcmVTdG9yZWRbYV1bb107aWYocy5zZXF1ZW5jZUtleSBpbiB0aGlzLl9jYWNoZWRTZXF1ZW5jZU5vZGVzKXtkZWxldGUgdGhpcy5fY2FjaGVkU2VxdWVuY2VOb2Rlc1tzLnNlcXVlbmNlS2V5XX1kZWxldGUgdGhpcy5fcHJlU3RvcmVkW2FdW29dO3MuZGlzcG9zZSgpO3RbYV09dHJ1ZX1mb3IodmFyIGEgaW4gdCl7aWYoIXQuaGFzT3duUHJvcGVydHkoYSkpe2NvbnRpbnVlfWlmKE9iamVjdC5rZXlzKHRoaXMuX3ByZVN0b3JlZFthXSkubGVuZ3RoPT09MCl7ZGVsZXRlIHRoaXMuX3ByZVN0b3JlZFthXX19fTtlLnByb3RvdHlwZS5fdXBkYXRlQ2FjaGVkVGlsZUFjY2Vzcz1mdW5jdGlvbihlLHQpe2lmKGUgaW4gdGhpcy5fbm9kZVRvVGlsZSl7dGhpcy5fY2FjaGVkVGlsZXNbdGhpcy5fbm9kZVRvVGlsZVtlXV0uYWNjZXNzZWQ9dH19O2UucHJvdG90eXBlLl91cGRhdGVDYWNoZWROb2RlQWNjZXNzPWZ1bmN0aW9uKGUsdCl7aWYoZSBpbiB0aGlzLl9jYWNoZWROb2Rlcyl7dGhpcy5fY2FjaGVkTm9kZXNbZV0uYWNjZXNzZWQ9dH19O3JldHVybiBlfSgpO3IuR3JhcGg9bjtyLmRlZmF1bHQ9bn0se1wiLi4vRWRnZVwiOjI5MixcIi4uL0Vycm9yXCI6MjkzLFwiLi4vR2VvXCI6Mjk0LFwiLi4vR3JhcGhcIjoyOTUscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDI1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkdyYXBoQ2FsY3VsYXRvcj12b2lkIDA7dmFyIGI9ZShcImxhdGxvbi1nZW9oYXNoXCIpO3ZhciBjPWUoXCJ0aHJlZVwiKTt2YXIgcz1lKFwiLi4vRXJyb3JcIik7dmFyIG49ZShcIi4uL0dlb1wiKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fZ2VvQ29vcmRzPWUhPW51bGw/ZTpuZXcgbi5HZW9Db29yZHN9ZS5wcm90b3R5cGUuZW5jb2RlSD1mdW5jdGlvbihlLHQpe2lmKHQ9PT12b2lkIDApe3Q9N31yZXR1cm4gYi5lbmNvZGUoZS5sYXQsZS5sb24sdCl9O2UucHJvdG90eXBlLmVuY29kZUhzPWZ1bmN0aW9uKGUsdCxyKXtpZih0PT09dm9pZCAwKXt0PTd9aWYocj09PXZvaWQgMCl7cj0yMH12YXIgbj1iLmVuY29kZShlLmxhdCxlLmxvbix0KTt2YXIgaT1iLmJvdW5kcyhuKTt2YXIgbz1pLm5lO3ZhciBhPWkuc3c7dmFyIHM9Yi5uZWlnaGJvdXJzKG4pO3ZhciB1PVswLDAsMF07dmFyIGM9dGhpcy5fZ2VvQ29vcmRzLmdlb2RldGljVG9FbnUoby5sYXQsby5sb24sMCxhLmxhdCxhLmxvbiwwKTt2YXIgbD10aGlzLl9nZW9Db29yZHMuZ2VvZGV0aWNUb0VudShlLmxhdCxlLmxvbiwwLGEubGF0LGEubG9uLDApO3ZhciBoPWxbMF0tdVswXTt2YXIgcD1jWzBdLWxbMF07dmFyIGY9bFsxXS11WzFdO3ZhciBkPWNbMV0tbFsxXTt2YXIgdj1oPHI7dmFyIG09cDxyO3ZhciBnPWY8cjt2YXIgXz1kPHI7dmFyIHk9W25dO2lmKF8pe3kucHVzaChzLm4pfWlmKF8mJnYpe3kucHVzaChzLm53KX1pZih2KXt5LnB1c2gocy53KX1pZih2JiZnKXt5LnB1c2gocy5zdyl9aWYoZyl7eS5wdXNoKHMucyl9aWYoZyYmbSl7eS5wdXNoKHMuc2UpfWlmKG0pe3kucHVzaChzLmUpfWlmKG0mJl8pe3kucHVzaChzLm5lKX1yZXR1cm4geX07ZS5wcm90b3R5cGUuZW5jb2RlSHNGcm9tQm91bmRpbmdCb3g9ZnVuY3Rpb24oZSx0LHIpe2lmKHI9PT12b2lkIDApe3I9N31pZih0LmxhdDw9ZS5sYXR8fHQubG9uPD1lLmxvbil7dGhyb3cgbmV3IHMuR3JhcGhNYXBpbGxhcnlFcnJvcihcIk5vcnRoIGVhc3QgbmVlZHMgdG8gYmUgdG9wIHJpZ2h0IG9mIHNvdXRoIHdlc3RcIil9dmFyIG49KGUubGF0K3QubGF0KS8yO3ZhciBpPShlLmxvbit0LmxvbikvMjt2YXIgbz10aGlzLl9nZW9Db29yZHMuZ2VvZGV0aWNUb0VudSh0LmxhdCx0LmxvbiwwLG4saSwwKTt2YXIgYT1NYXRoLm1heChvWzBdLG9bMV0pO3JldHVybiB0aGlzLmVuY29kZUhzKHtsYXQ6bixsb246aX0scixhKX07ZS5wcm90b3R5cGUuYm91bmRpbmdCb3hDb3JuZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZ2VvQ29vcmRzLmVudVRvR2VvZGV0aWMoLXQsLXQsMCxlLmxhdCxlLmxvbiwwKTt2YXIgbj10aGlzLl9nZW9Db29yZHMuZW51VG9HZW9kZXRpYyh0LHQsMCxlLmxhdCxlLmxvbiwwKTtyZXR1cm5be2xhdDpyWzBdLGxvbjpyWzFdfSx7bGF0Om5bMF0sbG9uOm5bMV19XX07ZS5wcm90b3R5cGUucm90YXRpb25Gcm9tQ29tcGFzcz1mdW5jdGlvbihlLHQpe3ZhciByPTA7dmFyIG49MDt2YXIgaT0wO3N3aXRjaCh0KXtjYXNlIDE6cj1NYXRoLlBJLzI7YnJlYWs7Y2FzZSAzOnI9LU1hdGguUEkvMjtpPU1hdGguUEk7YnJlYWs7Y2FzZSA2Om49LU1hdGguUEkvMjtpPS1NYXRoLlBJLzI7YnJlYWs7Y2FzZSA4Om49TWF0aC5QSS8yO2k9TWF0aC5QSS8yO2JyZWFrO2RlZmF1bHQ6YnJlYWt9dmFyIG89KG5ldyBjLk1hdHJpeDQpLm1ha2VSb3RhdGlvblooaSk7dmFyIGE9bmV3IGMuRXVsZXIocixuLGUqTWF0aC5QSS8xODAsXCJYWVpcIik7dmFyIHM9KG5ldyBjLk1hdHJpeDQpLm1ha2VSb3RhdGlvbkZyb21FdWxlcihhKTt2YXIgdT0obmV3IGMuVmVjdG9yNCkuc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4KHMubXVsdGlwbHkobykpO3JldHVybiB1Lm11bHRpcGx5U2NhbGFyKHUudykudG9BcnJheSgpLnNsaWNlKDAsMyl9O3JldHVybiBlfSgpO3IuR3JhcGhDYWxjdWxhdG9yPWk7ci5kZWZhdWx0PWl9LHtcIi4uL0Vycm9yXCI6MjkzLFwiLi4vR2VvXCI6Mjk0LFwibGF0bG9uLWdlb2hhc2hcIjoyMSx0aHJlZToyNDJ9XSw0MjY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR3JhcGhNb2RlPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiU2VxdWVuY2VcIl09MF09XCJTZXF1ZW5jZVwiO2VbZVtcIlNwYXRpYWxcIl09MV09XCJTcGF0aWFsXCJ9KShuPXIuR3JhcGhNb2RlfHwoci5HcmFwaE1vZGU9e30pKTtyLmRlZmF1bHQ9bn0se31dLDQyNzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5HcmFwaFNlcnZpY2U9dm9pZCAwO3ZhciBjPWUoXCJyeGpzXCIpO3ZhciBsPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgaD1lKFwiLi4vR3JhcGhcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fZ3JhcGgkPWMuY29uY2F0KGMub2YoZSksZS5jaGFuZ2VkJCkucGlwZShsLnB1Ymxpc2hSZXBsYXkoMSksbC5yZWZDb3VudCgpKTt0aGlzLl9ncmFwaCQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fZ3JhcGhNb2RlPWguR3JhcGhNb2RlLlNwYXRpYWw7dGhpcy5fZ3JhcGhNb2RlU3ViamVjdCQ9bmV3IGMuU3ViamVjdDt0aGlzLl9ncmFwaE1vZGUkPXRoaXMuX2dyYXBoTW9kZVN1YmplY3QkLnBpcGUobC5zdGFydFdpdGgodGhpcy5fZ3JhcGhNb2RlKSxsLnB1Ymxpc2hSZXBsYXkoMSksbC5yZWZDb3VudCgpKTt0aGlzLl9ncmFwaE1vZGUkLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3RoaXMuX2ltYWdlTG9hZGluZ1NlcnZpY2U9dDt0aGlzLl9maXJzdEdyYXBoU3ViamVjdHMkPVtdO3RoaXMuX2luaXRpYWxpemVDYWNoZVN1YnNjcmlwdGlvbnM9W107dGhpcy5fc2VxdWVuY2VTdWJzY3JpcHRpb25zPVtdO3RoaXMuX3NwYXRpYWxTdWJzY3JpcHRpb25zPVtdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImdyYXBoTW9kZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dyYXBoTW9kZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5jYWNoZUJvdW5kaW5nQm94JD1mdW5jdGlvbih0LHIpe3JldHVybiB0aGlzLl9ncmFwaCQucGlwZShsLmZpcnN0KCksbC5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5jYWNoZUJvdW5kaW5nQm94JCh0LHIpfSkpfTtlLnByb3RvdHlwZS5jYWNoZU5vZGUkPWZ1bmN0aW9uKHIpe3ZhciB0PXRoaXM7dmFyIG49bmV3IGMuU3ViamVjdDt0aGlzLl9maXJzdEdyYXBoU3ViamVjdHMkLnB1c2gobik7dmFyIGU9bi5waXBlKGwucHVibGlzaFJlcGxheSgxKSxsLnJlZkNvdW50KCkpO3ZhciBpPWUucGlwZShsLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXROb2RlKHIpfSksbC5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5hc3NldHNDYWNoZWQ/Yy5vZihlKTplLmNhY2hlQXNzZXRzJCgpfSksbC5wdWJsaXNoUmVwbGF5KDEpLGwucmVmQ291bnQoKSk7aS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dC5faW1hZ2VMb2FkaW5nU2VydmljZS5sb2Fkbm9kZSQubmV4dChlKX0sZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjYWNoZSBub2RlIChcIityK1wiKVwiLGUpfSk7dmFyIG89dGhpcy5fZ3JhcGgkLnBpcGUobC5maXJzdCgpLGwubWVyZ2VNYXAoZnVuY3Rpb24oZSl7aWYoZS5pc0NhY2hpbmdGdWxsKHIpfHwhZS5oYXNOb2RlKHIpKXtyZXR1cm4gZS5jYWNoZUZ1bGwkKHIpfWlmKGUuaXNDYWNoaW5nRmlsbChyKXx8IWUuZ2V0Tm9kZShyKS5mdWxsKXtyZXR1cm4gZS5jYWNoZUZpbGwkKHIpfXJldHVybiBjLm9mKGUpfSksbC50YXAoZnVuY3Rpb24oZSl7aWYoIWUuaGFzSW5pdGlhbGl6ZWRDYWNoZShyKSl7ZS5pbml0aWFsaXplQ2FjaGUocil9fSksbC5maW5hbGl6ZShmdW5jdGlvbigpe2lmKG89PW51bGwpe3JldHVybn10Ll9yZW1vdmVGcm9tQXJyYXkobyx0Ll9pbml0aWFsaXplQ2FjaGVTdWJzY3JpcHRpb25zKTt0Ll9yZW1vdmVGcm9tQXJyYXkobix0Ll9maXJzdEdyYXBoU3ViamVjdHMkKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7bi5uZXh0KGUpO24uY29tcGxldGUoKX0sZnVuY3Rpb24oZSl7bi5lcnJvcihlKX0pO2lmKCFvLmNsb3NlZCl7dGhpcy5faW5pdGlhbGl6ZUNhY2hlU3Vic2NyaXB0aW9ucy5wdXNoKG8pfXZhciBhPWUucGlwZShsLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe2lmKGUuaXNDYWNoaW5nTm9kZVNlcXVlbmNlKHIpfHwhZS5oYXNOb2RlU2VxdWVuY2Uocikpe3JldHVybiBlLmNhY2hlTm9kZVNlcXVlbmNlJChyKX1yZXR1cm4gYy5vZihlKX0pLGwucHVibGlzaFJlcGxheSgxKSxsLnJlZkNvdW50KCkpO3ZhciBzPWEucGlwZShsLnRhcChmdW5jdGlvbihlKXtpZighZS5nZXROb2RlKHIpLnNlcXVlbmNlRWRnZXMuY2FjaGVkKXtlLmNhY2hlU2VxdWVuY2VFZGdlcyhyKX19KSxsLmZpbmFsaXplKGZ1bmN0aW9uKCl7aWYocz09bnVsbCl7cmV0dXJufXQuX3JlbW92ZUZyb21BcnJheShzLHQuX3NlcXVlbmNlU3Vic2NyaXB0aW9ucyl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3JldHVybn0sZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjYWNoZSBzZXF1ZW5jZSBlZGdlcyAoXCIrcitcIikuXCIsZSl9KTtpZighcy5jbG9zZWQpe3RoaXMuX3NlcXVlbmNlU3Vic2NyaXB0aW9ucy5wdXNoKHMpfWlmKHRoaXMuX2dyYXBoTW9kZT09PWguR3JhcGhNb2RlLlNwYXRpYWwpe3ZhciB1PWUucGlwZShsLmV4cGFuZChmdW5jdGlvbihlKXtpZihlLmhhc1RpbGVzKHIpKXtyZXR1cm4gYy5lbXB0eSgpfXJldHVybiBjLmZyb20oZS5jYWNoZVRpbGVzJChyKSkucGlwZShsLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBpcGUobC5tZXJnZU1hcChmdW5jdGlvbihlKXtpZihlLmlzQ2FjaGluZ1RpbGVzKHIpKXtyZXR1cm4gYy5lbXB0eSgpfXJldHVybiBjLm9mKGUpfSksbC5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjYWNoZSB0aWxlIGRhdGEgKFwiK3IrXCIpLlwiLGUpO3JldHVybiBjLmVtcHR5KCl9KSl9KSl9KSxsLmxhc3QoKSxsLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe2lmKGUuaGFzU3BhdGlhbEFyZWEocikpe3JldHVybiBjLm9mKGUpfXJldHVybiBjLmZyb20oZS5jYWNoZVNwYXRpYWxBcmVhJChyKSkucGlwZShsLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBpcGUobC5jYXRjaEVycm9yKGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjYWNoZSBzcGF0aWFsIG5vZGVzIChcIityK1wiKS5cIixlKTtyZXR1cm4gYy5lbXB0eSgpfSkpfSkpfSksbC5sYXN0KCksbC5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5oYXNOb2RlU2VxdWVuY2Uocik/Yy5vZihlKTplLmNhY2hlTm9kZVNlcXVlbmNlJChyKX0pLGwudGFwKGZ1bmN0aW9uKGUpe2lmKCFlLmdldE5vZGUocikuc3BhdGlhbEVkZ2VzLmNhY2hlZCl7ZS5jYWNoZVNwYXRpYWxFZGdlcyhyKX19KSxsLmZpbmFsaXplKGZ1bmN0aW9uKCl7aWYodT09bnVsbCl7cmV0dXJufXQuX3JlbW92ZUZyb21BcnJheSh1LHQuX3NwYXRpYWxTdWJzY3JpcHRpb25zKX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7cmV0dXJufSxmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNhY2hlIHNwYXRpYWwgZWRnZXMgKFwiK3IrXCIpLlwiLGUpfSk7aWYoIXUuY2xvc2VkKXt0aGlzLl9zcGF0aWFsU3Vic2NyaXB0aW9ucy5wdXNoKHUpfX1yZXR1cm4gaS5waXBlKGwuZmlyc3QoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXNzZXRzQ2FjaGVkfSkpfTtlLnByb3RvdHlwZS5jYWNoZVNlcXVlbmNlJD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZ3JhcGgkLnBpcGUobC5maXJzdCgpLGwubWVyZ2VNYXAoZnVuY3Rpb24oZSl7aWYoZS5pc0NhY2hpbmdTZXF1ZW5jZSh0KXx8IWUuaGFzU2VxdWVuY2UodCkpe3JldHVybiBlLmNhY2hlU2VxdWVuY2UkKHQpfXJldHVybiBjLm9mKGUpfSksbC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0U2VxdWVuY2UodCl9KSl9O2UucHJvdG90eXBlLmNhY2hlU2VxdWVuY2VOb2RlcyQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdGhpcy5fZ3JhcGgkLnBpcGUobC5maXJzdCgpLGwubWVyZ2VNYXAoZnVuY3Rpb24oZSl7aWYoZS5pc0NhY2hpbmdTZXF1ZW5jZSh0KXx8IWUuaGFzU2VxdWVuY2UodCkpe3JldHVybiBlLmNhY2hlU2VxdWVuY2UkKHQpfXJldHVybiBjLm9mKGUpfSksbC5tZXJnZU1hcChmdW5jdGlvbihlKXtpZihlLmlzQ2FjaGluZ1NlcXVlbmNlTm9kZXModCl8fCFlLmhhc1NlcXVlbmNlTm9kZXModCkpe3JldHVybiBlLmNhY2hlU2VxdWVuY2VOb2RlcyQodCxyKX1yZXR1cm4gYy5vZihlKX0pLGwubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldFNlcXVlbmNlKHQpfSkpfTtlLnByb3RvdHlwZS5zZXRGaWx0ZXIkPWZ1bmN0aW9uKHQpe3RoaXMuX3Jlc2V0U3Vic2NyaXB0aW9ucyh0aGlzLl9zcGF0aWFsU3Vic2NyaXB0aW9ucyk7cmV0dXJuIHRoaXMuX2dyYXBoJC5waXBlKGwuZmlyc3QoKSxsLnRhcChmdW5jdGlvbihlKXtlLnJlc2V0U3BhdGlhbEVkZ2VzKCk7ZS5zZXRGaWx0ZXIodCl9KSxsLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdW5kZWZpbmVkfSkpfTtlLnByb3RvdHlwZS5zZXRHcmFwaE1vZGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZ3JhcGhNb2RlPT09ZSl7cmV0dXJufWlmKGU9PT1oLkdyYXBoTW9kZS5TZXF1ZW5jZSl7dGhpcy5fcmVzZXRTdWJzY3JpcHRpb25zKHRoaXMuX3NwYXRpYWxTdWJzY3JpcHRpb25zKX10aGlzLl9ncmFwaE1vZGU9ZTt0aGlzLl9ncmFwaE1vZGVTdWJqZWN0JC5uZXh0KHRoaXMuX2dyYXBoTW9kZSl9O2UucHJvdG90eXBlLnJlc2V0JD1mdW5jdGlvbih0KXt0aGlzLl9hYm9ydFN1YmplY3RzKHRoaXMuX2ZpcnN0R3JhcGhTdWJqZWN0cyQpO3RoaXMuX3Jlc2V0U3Vic2NyaXB0aW9ucyh0aGlzLl9pbml0aWFsaXplQ2FjaGVTdWJzY3JpcHRpb25zKTt0aGlzLl9yZXNldFN1YnNjcmlwdGlvbnModGhpcy5fc2VxdWVuY2VTdWJzY3JpcHRpb25zKTt0aGlzLl9yZXNldFN1YnNjcmlwdGlvbnModGhpcy5fc3BhdGlhbFN1YnNjcmlwdGlvbnMpO3JldHVybiB0aGlzLl9ncmFwaCQucGlwZShsLmZpcnN0KCksbC50YXAoZnVuY3Rpb24oZSl7ZS5yZXNldCh0KX0pLGwubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1bmRlZmluZWR9KSl9O2UucHJvdG90eXBlLnVuY2FjaGUkPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXMuX2dyYXBoJC5waXBlKGwuZmlyc3QoKSxsLnRhcChmdW5jdGlvbihlKXtlLnVuY2FjaGUodCxyKX0pLGwubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1bmRlZmluZWR9KSl9O2UucHJvdG90eXBlLl9hYm9ydFN1YmplY3RzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZS5zbGljZSgpO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO3RoaXMuX3JlbW92ZUZyb21BcnJheShuLGUpO24uZXJyb3IobmV3IEVycm9yKFwiQ2FjaGUgbm9kZSByZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKSl9fTtlLnByb3RvdHlwZS5fcmVtb3ZlRnJvbUFycmF5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5pbmRleE9mKGUpO2lmKHIhPT0tMSl7dC5zcGxpY2UociwxKX19O2UucHJvdG90eXBlLl9yZXNldFN1YnNjcmlwdGlvbnM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj1lLnNsaWNlKCk7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07dGhpcy5fcmVtb3ZlRnJvbUFycmF5KG4sZSk7aWYoIW4uY2xvc2VkKXtuLnVuc3Vic2NyaWJlKCl9fX07cmV0dXJuIGV9KCk7ci5HcmFwaFNlcnZpY2U9bjtyLmRlZmF1bHQ9bn0se1wiLi4vR3JhcGhcIjoyOTUscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDI4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkltYWdlTG9hZGluZ1NlcnZpY2U9dm9pZCAwO3ZhciBuPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgaT1lKFwicnhqc1wiKTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9sb2Fkbm9kZSQ9bmV3IGkuU3ViamVjdDt0aGlzLl9sb2Fkc3RhdHVzJD10aGlzLl9sb2Fkbm9kZSQucGlwZShuLnNjYW4oZnVuY3Rpb24oZSx0KXt2YXIgcj1lWzBdO3ZhciBuPWZhbHNlO2lmKHQubG9hZFN0YXR1cy50b3RhbD09PTB8fHQubG9hZFN0YXR1cy5sb2FkZWQ9PT10LmxvYWRTdGF0dXMudG90YWwpe2lmKHQua2V5IGluIHIpe2RlbGV0ZSByW3Qua2V5XTtuPXRydWV9fWVsc2V7clt0LmtleV09dC5sb2FkU3RhdHVzO249dHJ1ZX1yZXR1cm5bcixuXX0sW3t9LGZhbHNlXSksbi5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIHJ9KSxuLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3JldHVybiB0fSksbi5wdWJsaXNoUmVwbGF5KDEpLG4ucmVmQ291bnQoKSk7dGhpcy5fbG9hZHN0YXR1cyQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibG9hZG5vZGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2Fkbm9kZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsb2Fkc3RhdHVzJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZHN0YXR1cyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtyZXR1cm4gZX0oKTtyLkltYWdlTG9hZGluZ1NlcnZpY2U9b30se3J4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQyOTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5NZXNoUmVhZGVyPXZvaWQgMDt2YXIgbj1lKFwicGJmXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe31yLnJlYWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IG4oZSk7cmV0dXJuIHQucmVhZEZpZWxkcyhyLl9yZWFkTWVzaEZpZWxkLHtmYWNlczpbXSx2ZXJ0aWNlczpbXX0pfTtyLl9yZWFkTWVzaEZpZWxkPWZ1bmN0aW9uKGUsdCxyKXtpZihlPT09MSl7dC52ZXJ0aWNlcy5wdXNoKHIucmVhZEZsb2F0KCkpfWVsc2UgaWYoZT09PTIpe3QuZmFjZXMucHVzaChyLnJlYWRWYXJpbnQoKSl9fTtyZXR1cm4gcn0oKTtyLk1lc2hSZWFkZXI9aX0se3BiZjo0MH1dLDQzMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Ob2RlPXZvaWQgMDt2YXIgbj1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NhY2hlPW51bGw7dGhpcy5fY29yZT1lO3RoaXMuX2ZpbGw9bnVsbH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhc3NldHNDYWNoZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUhPW51bGwmJnRoaXMuX2ZpbGwhPW51bGwmJnRoaXMuX2NhY2hlIT1udWxsJiZ0aGlzLl9jYWNoZS5pbWFnZSE9bnVsbCYmdGhpcy5fY2FjaGUubWVzaCE9bnVsbH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFsdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5jYWx0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2FcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwuY2NhIT1udWxsP3RoaXMuX2ZpbGwuY2NhOnRoaXMuX2ZpbGwuY2F9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYW1lcmFQcm9qZWN0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsLmNhbWVyYV9wcm9qZWN0aW9uX3R5cGV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYXB0dXJlZEF0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsLmNhcHR1cmVkX2F0fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2FtZXJhVXVpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5jYXB0dXJlZF93aXRoX2NhbWVyYV91dWlkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2x1c3RlcktleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5jbHVzdGVyX2tleX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNrMVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5jazF9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjazJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwuY2syfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29tcHV0ZWRDQVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5jY2F9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb21wdXRlZExhdExvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5jbH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZvY2FsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsLmNmb2NhbH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZ1bGxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwhPW51bGx9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmdWxsUGFub1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5ncGFubyE9bnVsbCYmdGhpcy5fZmlsbC5ncGFuby5Dcm9wcGVkQXJlYUxlZnRQaXhlbHM9PT0wJiZ0aGlzLl9maWxsLmdwYW5vLkNyb3BwZWRBcmVhVG9wUGl4ZWxzPT09MCYmdGhpcy5fZmlsbC5ncGFuby5Dcm9wcGVkQXJlYUltYWdlV2lkdGhQaXhlbHM9PT10aGlzLl9maWxsLmdwYW5vLkZ1bGxQYW5vV2lkdGhQaXhlbHMmJnRoaXMuX2ZpbGwuZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZUhlaWdodFBpeGVscz09PXRoaXMuX2ZpbGwuZ3Bhbm8uRnVsbFBhbm9IZWlnaHRQaXhlbHN9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJncGFub1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5ncGFub30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5oZWlnaHR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGUuaW1hZ2V9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpbWFnZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhY2hlLmltYWdlJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImtleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5rZXl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsYXRMb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuY2whPW51bGw/dGhpcy5fY29yZS5jbDp0aGlzLl9jb3JlLmx9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsb2FkU3RhdHVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYWNoZS5sb2FkU3RhdHVzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWVyZ2VkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsIT1udWxsJiZ0aGlzLl9maWxsLm1lcmdlX3ZlcnNpb24hPW51bGwmJnRoaXMuX2ZpbGwubWVyZ2VfdmVyc2lvbj4wfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWVyZ2VDQ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5tZXJnZV9jY30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1lcmdlVmVyc2lvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5tZXJnZV92ZXJzaW9ufSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWVzaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGUubWVzaH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm9yZ2FuaXphdGlvbktleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5vcmdhbml6YXRpb25fa2V5fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwib3JpZW50YXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwub3JpZW50YXRpb259LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJvcmlnaW5hbENBXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWxsLmNhfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwib3JpZ2luYWxMYXRMb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUubH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBhbm9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwuZ3Bhbm8hPW51bGwmJnRoaXMuX2ZpbGwuZ3Bhbm8uRnVsbFBhbm9XaWR0aFBpeGVscyE9bnVsbH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInByaXZhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwucHJpdmF0ZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInByb2plY3RLZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwucHJvamVjdCE9bnVsbD90aGlzLl9maWxsLnByb2plY3Qua2V5Om51bGx9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyb3RhdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC5jX3JvdGF0aW9ufSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2NhbGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwuYXRvbWljX3NjYWxlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2VxdWVuY2VLZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuc2VxdWVuY2Vfa2V5fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2VxdWVuY2VFZGdlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGUuc2VxdWVuY2VFZGdlc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNlcXVlbmNlRWRnZXMkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYWNoZS5zZXF1ZW5jZUVkZ2VzJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNwYXRpYWxFZGdlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGUuc3BhdGlhbEVkZ2VzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3BhdGlhbEVkZ2VzJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGUuc3BhdGlhbEVkZ2VzJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInVzZXJLZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwudXNlci5rZXl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ1c2VybmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsbC51c2VyLnVzZXJuYW1lfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbGwud2lkdGh9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5jYWNoZUFzc2V0cyQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9jYWNoZS5jYWNoZUFzc2V0cyQodGhpcy5rZXksdGhpcy5wYW5vLHRoaXMubWVyZ2VkKS5waXBlKG4ubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KSl9O2UucHJvdG90eXBlLmNhY2hlSW1hZ2UkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX2NhY2hlLmNhY2hlSW1hZ2UkKHRoaXMua2V5LGUpLnBpcGUobi5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdH0pKX07ZS5wcm90b3R5cGUuY2FjaGVTZXF1ZW5jZUVkZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuX2NhY2hlLmNhY2hlU2VxdWVuY2VFZGdlcyhlKX07ZS5wcm90b3R5cGUuY2FjaGVTcGF0aWFsRWRnZXM9ZnVuY3Rpb24oZSl7dGhpcy5fY2FjaGUuY2FjaGVTcGF0aWFsRWRnZXMoZSl9O2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtpZih0aGlzLl9jYWNoZSE9bnVsbCl7dGhpcy5fY2FjaGUuZGlzcG9zZSgpO3RoaXMuX2NhY2hlPW51bGx9dGhpcy5fY29yZT1udWxsO3RoaXMuX2ZpbGw9bnVsbH07ZS5wcm90b3R5cGUuaW5pdGlhbGl6ZUNhY2hlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NhY2hlIT1udWxsKXt0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIGNhY2hlIGFscmVhZHkgaW5pdGlhbGl6ZWQgKFwiK3RoaXMua2V5K1wiKS5cIil9dGhpcy5fY2FjaGU9ZX07ZS5wcm90b3R5cGUubWFrZUZ1bGw9ZnVuY3Rpb24oZSl7aWYoZT09bnVsbCl7dGhyb3cgbmV3IEVycm9yKFwiRmlsbCBjYW4gbm90IGJlIG51bGwuXCIpfXRoaXMuX2ZpbGw9ZX07ZS5wcm90b3R5cGUucmVzZXRTZXF1ZW5jZUVkZ2VzPWZ1bmN0aW9uKCl7dGhpcy5fY2FjaGUucmVzZXRTZXF1ZW5jZUVkZ2VzKCl9O2UucHJvdG90eXBlLnJlc2V0U3BhdGlhbEVkZ2VzPWZ1bmN0aW9uKCl7dGhpcy5fY2FjaGUucmVzZXRTcGF0aWFsRWRnZXMoKX07ZS5wcm90b3R5cGUudW5jYWNoZT1mdW5jdGlvbigpe2lmKHRoaXMuX2NhY2hlPT1udWxsKXtyZXR1cm59dGhpcy5fY2FjaGUuZGlzcG9zZSgpO3RoaXMuX2NhY2hlPW51bGx9O3JldHVybiBlfSgpO3IuTm9kZT1pO3IuZGVmYXVsdD1pfSx7XCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQzMTpbZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihvKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuTm9kZUNhY2hlPXZvaWQgMDt2YXIgcz10KFwicnhqc1wiKTt2YXIgYT10KFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIHU9dChcIi4uL0dyYXBoXCIpO3ZhciBjPXQoXCIuLi9VdGlsc1wiKTt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9kaXNwb3NlZD1mYWxzZTt0aGlzLl9pbWFnZT1udWxsO3RoaXMuX2xvYWRTdGF0dXM9e2xvYWRlZDowLHRvdGFsOjB9O3RoaXMuX21lc2g9bnVsbDt0aGlzLl9zZXF1ZW5jZUVkZ2VzPXtjYWNoZWQ6ZmFsc2UsZWRnZXM6W119O3RoaXMuX3NwYXRpYWxFZGdlcz17Y2FjaGVkOmZhbHNlLGVkZ2VzOltdfTt0aGlzLl9pbWFnZUNoYW5nZWQkPW5ldyBzLlN1YmplY3Q7dGhpcy5faW1hZ2UkPXRoaXMuX2ltYWdlQ2hhbmdlZCQucGlwZShhLnN0YXJ0V2l0aChudWxsKSxhLnB1Ymxpc2hSZXBsYXkoMSksYS5yZWZDb3VudCgpKTt0aGlzLl9pYW1nZVN1YnNjcmlwdGlvbj10aGlzLl9pbWFnZSQuc3Vic2NyaWJlKCk7dGhpcy5fc2VxdWVuY2VFZGdlc0NoYW5nZWQkPW5ldyBzLlN1YmplY3Q7dGhpcy5fc2VxdWVuY2VFZGdlcyQ9dGhpcy5fc2VxdWVuY2VFZGdlc0NoYW5nZWQkLnBpcGUoYS5zdGFydFdpdGgodGhpcy5fc2VxdWVuY2VFZGdlcyksYS5wdWJsaXNoUmVwbGF5KDEpLGEucmVmQ291bnQoKSk7dGhpcy5fc2VxdWVuY2VFZGdlc1N1YnNjcmlwdGlvbj10aGlzLl9zZXF1ZW5jZUVkZ2VzJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9zcGF0aWFsRWRnZXNDaGFuZ2VkJD1uZXcgcy5TdWJqZWN0O3RoaXMuX3NwYXRpYWxFZGdlcyQ9dGhpcy5fc3BhdGlhbEVkZ2VzQ2hhbmdlZCQucGlwZShhLnN0YXJ0V2l0aCh0aGlzLl9zcGF0aWFsRWRnZXMpLGEucHVibGlzaFJlcGxheSgxKSxhLnJlZkNvdW50KCkpO3RoaXMuX3NwYXRpYWxFZGdlc1N1YnNjcmlwdGlvbj10aGlzLl9zcGF0aWFsRWRnZXMkLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3RoaXMuX2NhY2hpbmdBc3NldHMkPW51bGx9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltYWdlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaW1hZ2UkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbWFnZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsb2FkU3RhdHVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkU3RhdHVzfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWVzaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzaH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNlcXVlbmNlRWRnZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlcXVlbmNlRWRnZXN9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzZXF1ZW5jZUVkZ2VzJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VxdWVuY2VFZGdlcyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzcGF0aWFsRWRnZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NwYXRpYWxFZGdlc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNwYXRpYWxFZGdlcyRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NwYXRpYWxFZGdlcyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5jYWNoZUFzc2V0cyQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7aWYodGhpcy5fY2FjaGluZ0Fzc2V0cyQhPW51bGwpe3JldHVybiB0aGlzLl9jYWNoaW5nQXNzZXRzJH12YXIgaT10P2MuU2V0dGluZ3MuYmFzZVBhbm9yYW1hU2l6ZTpjLlNldHRpbmdzLmJhc2VJbWFnZVNpemU7dGhpcy5fY2FjaGluZ0Fzc2V0cyQ9cy5jb21iaW5lTGF0ZXN0KHRoaXMuX2NhY2hlSW1hZ2UkKGUsaSksdGhpcy5fY2FjaGVNZXNoJChlLHIpKS5waXBlKGEubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO24uX2xvYWRTdGF0dXMubG9hZGVkPTA7bi5fbG9hZFN0YXR1cy50b3RhbD0wO2lmKHIpe24uX21lc2g9ci5vYmplY3Q7bi5fbG9hZFN0YXR1cy5sb2FkZWQrPXIubG9hZGVkLmxvYWRlZDtuLl9sb2FkU3RhdHVzLnRvdGFsKz1yLmxvYWRlZC50b3RhbH1pZih0KXtuLl9pbWFnZT10Lm9iamVjdDtuLl9sb2FkU3RhdHVzLmxvYWRlZCs9dC5sb2FkZWQubG9hZGVkO24uX2xvYWRTdGF0dXMudG90YWwrPXQubG9hZGVkLnRvdGFsfXJldHVybiBufSksYS5maW5hbGl6ZShmdW5jdGlvbigpe24uX2NhY2hpbmdBc3NldHMkPW51bGx9KSxhLnB1Ymxpc2hSZXBsYXkoMSksYS5yZWZDb3VudCgpKTt0aGlzLl9jYWNoaW5nQXNzZXRzJC5waXBlKGEuZmlyc3QoZnVuY3Rpb24oZSl7cmV0dXJuISFlLl9pbWFnZX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7bi5faW1hZ2VDaGFuZ2VkJC5uZXh0KG4uX2ltYWdlKX0sZnVuY3Rpb24oZSl7fSk7cmV0dXJuIHRoaXMuX2NhY2hpbmdBc3NldHMkfTtlLnByb3RvdHlwZS5jYWNoZUltYWdlJD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYodGhpcy5faW1hZ2UhPW51bGwmJnQ8PU1hdGgubWF4KHRoaXMuX2ltYWdlLndpZHRoLHRoaXMuX2ltYWdlLmhlaWdodCkpe3JldHVybiBzLm9mKHRoaXMpfXZhciBuPXRoaXMuX2NhY2hlSW1hZ2UkKGUsdCkucGlwZShhLmZpcnN0KGZ1bmN0aW9uKGUpe3JldHVybiBlLm9iamVjdCE9bnVsbH0pLGEudGFwKGZ1bmN0aW9uKGUpe3IuX2Rpc3Bvc2VJbWFnZSgpO3IuX2ltYWdlPWUub2JqZWN0fSksYS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHJ9KSxhLnB1Ymxpc2hSZXBsYXkoMSksYS5yZWZDb3VudCgpKTtuLnN1YnNjcmliZShmdW5jdGlvbihlKXtyLl9pbWFnZUNoYW5nZWQkLm5leHQoci5faW1hZ2UpfSxmdW5jdGlvbihlKXt9KTtyZXR1cm4gbn07ZS5wcm90b3R5cGUuY2FjaGVTZXF1ZW5jZUVkZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuX3NlcXVlbmNlRWRnZXM9e2NhY2hlZDp0cnVlLGVkZ2VzOmV9O3RoaXMuX3NlcXVlbmNlRWRnZXNDaGFuZ2VkJC5uZXh0KHRoaXMuX3NlcXVlbmNlRWRnZXMpfTtlLnByb3RvdHlwZS5jYWNoZVNwYXRpYWxFZGdlcz1mdW5jdGlvbihlKXt0aGlzLl9zcGF0aWFsRWRnZXM9e2NhY2hlZDp0cnVlLGVkZ2VzOmV9O3RoaXMuX3NwYXRpYWxFZGdlc0NoYW5nZWQkLm5leHQodGhpcy5fc3BhdGlhbEVkZ2VzKX07ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2lhbWdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fc2VxdWVuY2VFZGdlc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NwYXRpYWxFZGdlc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2Rpc3Bvc2VJbWFnZSgpO3RoaXMuX21lc2g9bnVsbDt0aGlzLl9sb2FkU3RhdHVzLmxvYWRlZD0wO3RoaXMuX2xvYWRTdGF0dXMudG90YWw9MDt0aGlzLl9zZXF1ZW5jZUVkZ2VzPXtjYWNoZWQ6ZmFsc2UsZWRnZXM6W119O3RoaXMuX3NwYXRpYWxFZGdlcz17Y2FjaGVkOmZhbHNlLGVkZ2VzOltdfTt0aGlzLl9pbWFnZUNoYW5nZWQkLm5leHQobnVsbCk7dGhpcy5fc2VxdWVuY2VFZGdlc0NoYW5nZWQkLm5leHQodGhpcy5fc2VxdWVuY2VFZGdlcyk7dGhpcy5fc3BhdGlhbEVkZ2VzQ2hhbmdlZCQubmV4dCh0aGlzLl9zcGF0aWFsRWRnZXMpO3RoaXMuX2Rpc3Bvc2VkPXRydWU7aWYodGhpcy5faW1hZ2VSZXF1ZXN0IT1udWxsKXt0aGlzLl9pbWFnZVJlcXVlc3QuYWJvcnQoKX1pZih0aGlzLl9tZXNoUmVxdWVzdCE9bnVsbCl7dGhpcy5fbWVzaFJlcXVlc3QuYWJvcnQoKX19O2UucHJvdG90eXBlLnJlc2V0U2VxdWVuY2VFZGdlcz1mdW5jdGlvbigpe3RoaXMuX3NlcXVlbmNlRWRnZXM9e2NhY2hlZDpmYWxzZSxlZGdlczpbXX07dGhpcy5fc2VxdWVuY2VFZGdlc0NoYW5nZWQkLm5leHQodGhpcy5fc2VxdWVuY2VFZGdlcyl9O2UucHJvdG90eXBlLnJlc2V0U3BhdGlhbEVkZ2VzPWZ1bmN0aW9uKCl7dGhpcy5fc3BhdGlhbEVkZ2VzPXtjYWNoZWQ6ZmFsc2UsZWRnZXM6W119O3RoaXMuX3NwYXRpYWxFZGdlc0NoYW5nZWQkLm5leHQodGhpcy5fc3BhdGlhbEVkZ2VzKX07ZS5wcm90b3R5cGUuX2NhY2hlSW1hZ2UkPWZ1bmN0aW9uKG8sZSl7dmFyIGE9dGhpcztyZXR1cm4gcy5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbihuKXt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7aS5vcGVuKFwiR0VUXCIsYy5VcmxzLnRodW1ibmFpbChvLGUsYy5VcmxzLm9yaWdpbiksdHJ1ZSk7aS5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiO2kudGltZW91dD0xNWUzO2kub25sb2FkPWZ1bmN0aW9uKHQpe2lmKGkuc3RhdHVzIT09MjAwKXthLl9pbWFnZVJlcXVlc3Q9bnVsbDtuLmVycm9yKG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBpbWFnZSAoXCIrbytcIikuIFN0YXR1czogXCIraS5zdGF0dXMrXCIsIFwiK2kuc3RhdHVzVGV4dCkpO3JldHVybn12YXIgcj1uZXcgSW1hZ2U7ci5jcm9zc09yaWdpbj1cIkFub255bW91c1wiO3Iub25sb2FkPWZ1bmN0aW9uKGUpe2EuX2ltYWdlUmVxdWVzdD1udWxsO2lmKGEuX2Rpc3Bvc2VkKXt3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChyLnNyYyk7bi5lcnJvcihuZXcgRXJyb3IoXCJJbWFnZSBsb2FkIHdhcyBhYm9ydGVkIChcIitvK1wiKVwiKSk7cmV0dXJufW4ubmV4dCh7bG9hZGVkOntsb2FkZWQ6dC5sb2FkZWQsdG90YWw6dC50b3RhbH0sb2JqZWN0OnJ9KTtuLmNvbXBsZXRlKCl9O3Iub25lcnJvcj1mdW5jdGlvbihlKXthLl9pbWFnZVJlcXVlc3Q9bnVsbDtuLmVycm9yKG5ldyBFcnJvcihcIkZhaWxlZCB0byBsb2FkIGltYWdlIChcIitvK1wiKVwiKSl9O3ZhciBlPW5ldyBCbG9iKFtpLnJlc3BvbnNlXSk7ci5zcmM9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZSl9O2kub25wcm9ncmVzcz1mdW5jdGlvbihlKXtpZihhLl9kaXNwb3NlZCl7cmV0dXJufW4ubmV4dCh7bG9hZGVkOntsb2FkZWQ6ZS5sb2FkZWQsdG90YWw6ZS50b3RhbH0sb2JqZWN0Om51bGx9KX07aS5vbmVycm9yPWZ1bmN0aW9uKGUpe2EuX2ltYWdlUmVxdWVzdD1udWxsO24uZXJyb3IobmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGltYWdlIChcIitvK1wiKVwiKSl9O2kub250aW1lb3V0PWZ1bmN0aW9uKGUpe2EuX2ltYWdlUmVxdWVzdD1udWxsO24uZXJyb3IobmV3IEVycm9yKFwiSW1hZ2UgcmVxdWVzdCB0aW1lZCBvdXQgKFwiK28rXCIpXCIpKX07aS5vbmFib3J0PWZ1bmN0aW9uKGUpe2EuX2ltYWdlUmVxdWVzdD1udWxsO24uZXJyb3IobmV3IEVycm9yKFwiSW1hZ2UgcmVxdWVzdCB3YXMgYWJvcnRlZCAoXCIrbytcIilcIikpfTthLl9pbWFnZVJlcXVlc3Q9aTtpLnNlbmQobnVsbCl9KX07ZS5wcm90b3R5cGUuX2NhY2hlTWVzaCQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3JldHVybiBzLk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uKHIpe2lmKCFlKXtyLm5leHQoaS5fY3JlYXRlRW1wdHlNZXNoTG9hZFN0YXR1cygpKTtyLmNvbXBsZXRlKCk7cmV0dXJufXZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9wZW4oXCJHRVRcIixjLlVybHMucHJvdG9NZXNoKHQpLHRydWUpO24ucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjtuLnRpbWVvdXQ9MTVlMztuLm9ubG9hZD1mdW5jdGlvbihlKXtpLl9tZXNoUmVxdWVzdD1udWxsO2lmKGkuX2Rpc3Bvc2VkKXtyZXR1cm59dmFyIHQ9bi5zdGF0dXM9PT0yMDA/dS5NZXNoUmVhZGVyLnJlYWQobmV3IG8obi5yZXNwb25zZSkpOntmYWNlczpbXSx2ZXJ0aWNlczpbXX07ci5uZXh0KHtsb2FkZWQ6e2xvYWRlZDplLmxvYWRlZCx0b3RhbDplLnRvdGFsfSxvYmplY3Q6dH0pO3IuY29tcGxldGUoKX07bi5vbnByb2dyZXNzPWZ1bmN0aW9uKGUpe2lmKGkuX2Rpc3Bvc2VkKXtyZXR1cm59ci5uZXh0KHtsb2FkZWQ6e2xvYWRlZDplLmxvYWRlZCx0b3RhbDplLnRvdGFsfSxvYmplY3Q6bnVsbH0pfTtuLm9uZXJyb3I9ZnVuY3Rpb24oZSl7aS5fbWVzaFJlcXVlc3Q9bnVsbDtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNhY2hlIG1lc2ggKFwiK3QrXCIpXCIpO3IubmV4dChpLl9jcmVhdGVFbXB0eU1lc2hMb2FkU3RhdHVzKCkpO3IuY29tcGxldGUoKX07bi5vbnRpbWVvdXQ9ZnVuY3Rpb24oZSl7aS5fbWVzaFJlcXVlc3Q9bnVsbDtjb25zb2xlLmVycm9yKFwiTWVzaCByZXF1ZXN0IHRpbWVkIG91dCAoXCIrdCtcIilcIik7ci5uZXh0KGkuX2NyZWF0ZUVtcHR5TWVzaExvYWRTdGF0dXMoKSk7ci5jb21wbGV0ZSgpfTtuLm9uYWJvcnQ9ZnVuY3Rpb24oZSl7aS5fbWVzaFJlcXVlc3Q9bnVsbDtyLmVycm9yKG5ldyBFcnJvcihcIk1lc2ggcmVxdWVzdCB3YXMgYWJvcnRlZCAoXCIrdCtcIilcIikpfTtpLl9tZXNoUmVxdWVzdD1uO24uc2VuZChudWxsKX0pfTtlLnByb3RvdHlwZS5fY3JlYXRlRW1wdHlNZXNoTG9hZFN0YXR1cz1mdW5jdGlvbigpe3JldHVybntsb2FkZWQ6e2xvYWRlZDowLHRvdGFsOjB9LG9iamVjdDp7ZmFjZXM6W10sdmVydGljZXM6W119fX07ZS5wcm90b3R5cGUuX2Rpc3Bvc2VJbWFnZT1mdW5jdGlvbigpe2lmKHRoaXMuX2ltYWdlIT1udWxsKXt3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLl9pbWFnZS5zcmMpfXRoaXMuX2ltYWdlPW51bGx9O3JldHVybiBlfSgpO3IuTm9kZUNhY2hlPWU7ci5kZWZhdWx0PWV9KS5jYWxsKHRoaXMsdChcImJ1ZmZlclwiKS5CdWZmZXIpfSx7XCIuLi9HcmFwaFwiOjI5NSxcIi4uL1V0aWxzXCI6MzAxLGJ1ZmZlcjo2LHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQzMjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TZXF1ZW5jZT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2tleT1lLmtleTt0aGlzLl9rZXlzPWUua2V5c31PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJrZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImtleXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleXN9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fa2V5PW51bGw7dGhpcy5fa2V5cz1udWxsfTtlLnByb3RvdHlwZS5maW5kTmV4dEtleT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9rZXlzLmluZGV4T2YoZSk7aWYodCsxPj10aGlzLl9rZXlzLmxlbmd0aHx8dD09PS0xKXtyZXR1cm4gbnVsbH1lbHNle3JldHVybiB0aGlzLl9rZXlzW3QrMV19fTtlLnByb3RvdHlwZS5maW5kUHJldktleT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9rZXlzLmluZGV4T2YoZSk7aWYodD09PTB8fHQ9PT0tMSl7cmV0dXJuIG51bGx9ZWxzZXtyZXR1cm4gdGhpcy5fa2V5c1t0LTFdfX07cmV0dXJuIGV9KCk7ci5TZXF1ZW5jZT1uO3IuZGVmYXVsdD1ufSx7fV0sNDMzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkVkZ2VDYWxjdWxhdG9yPXZvaWQgMDt2YXIgTT1lKFwidGhyZWVcIik7dmFyIFY9ZShcIi4uLy4uL0VkZ2VcIik7dmFyIEg9ZShcIi4uLy4uL0Vycm9yXCIpO3ZhciBuPWUoXCIuLi8uLi9HZW9cIik7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9zcGF0aWFsPW5ldyBuLlNwYXRpYWw7dGhpcy5fZ2VvQ29vcmRzPW5ldyBuLkdlb0Nvb3Jkczt0aGlzLl9zZXR0aW5ncz1lIT1udWxsP2U6bmV3IFYuRWRnZUNhbGN1bGF0b3JTZXR0aW5nczt0aGlzLl9kaXJlY3Rpb25zPXQhPW51bGw/dDpuZXcgVi5FZGdlQ2FsY3VsYXRvckRpcmVjdGlvbnM7dGhpcy5fY29lZmZpY2llbnRzPXIhPW51bGw/cjpuZXcgVi5FZGdlQ2FsY3VsYXRvckNvZWZmaWNpZW50c31lLnByb3RvdHlwZS5nZXRQb3RlbnRpYWxFZGdlcz1mdW5jdGlvbihlLHQscil7aWYoIWUuZnVsbCl7dGhyb3cgbmV3IEguQXJndW1lbnRNYXBpbGxhcnlFcnJvcihcIk5vZGUgaGFzIHRvIGJlIGZ1bGwuXCIpfWlmKCFlLm1lcmdlZCl7cmV0dXJuW119dmFyIG49dGhpcy5fc3BhdGlhbC52aWV3aW5nRGlyZWN0aW9uKGUucm90YXRpb24pO3ZhciBpPXRoaXMuX3NwYXRpYWwuYW5nbGVUb1BsYW5lKG4udG9BcnJheSgpLFswLDAsMV0pO3ZhciBvPVtdO2Zvcih2YXIgYT0wLHM9dDthPHMubGVuZ3RoO2ErKyl7dmFyIHU9c1thXTtpZighdS5tZXJnZWR8fHUua2V5PT09ZS5rZXkpe2NvbnRpbnVlfXZhciBjPXRoaXMuX2dlb0Nvb3Jkcy5nZW9kZXRpY1RvRW51KHUubGF0TG9uLmxhdCx1LmxhdExvbi5sb24sdS5hbHQsZS5sYXRMb24ubGF0LGUubGF0TG9uLmxvbixlLmFsdCk7dmFyIGw9bmV3IE0uVmVjdG9yMyhjWzBdLGNbMV0sY1syXSk7dmFyIGg9bC5sZW5ndGgoKTtpZihoPnRoaXMuX3NldHRpbmdzLm1heERpc3RhbmNlJiZyLmluZGV4T2YodS5rZXkpPDApe2NvbnRpbnVlfXZhciBwPXRoaXMuX3NwYXRpYWwuYW5nbGVCZXR3ZWVuVmVjdG9yMihuLngsbi55LGwueCxsLnkpO3ZhciBmPXRoaXMuX3NwYXRpYWwuYW5nbGVUb1BsYW5lKGwudG9BcnJheSgpLFswLDAsMV0pO3ZhciBkPXRoaXMuX3NwYXRpYWwudmlld2luZ0RpcmVjdGlvbih1LnJvdGF0aW9uKTt2YXIgdj10aGlzLl9zcGF0aWFsLmFuZ2xlQmV0d2VlblZlY3RvcjIobi54LG4ueSxkLngsZC55KTt2YXIgbT10aGlzLl9zcGF0aWFsLmFuZ2xlVG9QbGFuZShkLnRvQXJyYXkoKSxbMCwwLDFdKTt2YXIgZz1tLWk7dmFyIF89dGhpcy5fc3BhdGlhbC5yZWxhdGl2ZVJvdGF0aW9uQW5nbGUoZS5yb3RhdGlvbix1LnJvdGF0aW9uKTt2YXIgeT10aGlzLl9zcGF0aWFsLmFuZ2xlQmV0d2VlblZlY3RvcjIoMSwwLGwueCxsLnkpO3ZhciBiPXUuc2VxdWVuY2VLZXkhPW51bGwmJmUuc2VxdWVuY2VLZXkhPW51bGwmJnUuc2VxdWVuY2VLZXk9PT1lLnNlcXVlbmNlS2V5O3ZhciB4PXUubWVyZ2VDQz09bnVsbCYmZS5tZXJnZUNDPT1udWxsfHx1Lm1lcmdlQ0M9PT1lLm1lcmdlQ0M7dmFyIHc9dS51c2VyS2V5PT09ZS51c2VyS2V5O3ZhciBTPXtjYXB0dXJlZEF0OnUuY2FwdHVyZWRBdCxjcm9wcGVkUGFubzp1LnBhbm8mJiF1LmZ1bGxQYW5vLGRpcmVjdGlvbkNoYW5nZTp2LGRpc3RhbmNlOmgsZnVsbFBhbm86dS5mdWxsUGFubyxrZXk6dS5rZXksbW90aW9uQ2hhbmdlOnAscm90YXRpb246XyxzYW1lTWVyZ2VDQzp4LHNhbWVTZXF1ZW5jZTpiLHNhbWVVc2VyOncsc2VxdWVuY2VLZXk6dS5zZXF1ZW5jZUtleSx2ZXJ0aWNhbERpcmVjdGlvbkNoYW5nZTpnLHZlcnRpY2FsTW90aW9uOmYsd29ybGRNb3Rpb25BemltdXRoOnl9O28ucHVzaChTKX1yZXR1cm4gb307ZS5wcm90b3R5cGUuY29tcHV0ZVNlcXVlbmNlRWRnZXM9ZnVuY3Rpb24oZSx0KXtpZighZS5mdWxsKXt0aHJvdyBuZXcgSC5Bcmd1bWVudE1hcGlsbGFyeUVycm9yKFwiTm9kZSBoYXMgdG8gYmUgZnVsbC5cIil9aWYoZS5zZXF1ZW5jZUtleSE9PXQua2V5KXt0aHJvdyBuZXcgSC5Bcmd1bWVudE1hcGlsbGFyeUVycm9yKFwiTm9kZSBhbmQgc2VxdWVuY2UgZG9lcyBub3QgY29ycmVzcG9uZC5cIil9dmFyIHI9W107dmFyIG49dC5maW5kTmV4dEtleShlLmtleSk7aWYobiE9bnVsbCl7ci5wdXNoKHtkYXRhOntkaXJlY3Rpb246Vi5FZGdlRGlyZWN0aW9uLk5leHQsd29ybGRNb3Rpb25BemltdXRoOk51bWJlci5OYU59LGZyb206ZS5rZXksdG86bn0pfXZhciBpPXQuZmluZFByZXZLZXkoZS5rZXkpO2lmKGkhPW51bGwpe3IucHVzaCh7ZGF0YTp7ZGlyZWN0aW9uOlYuRWRnZURpcmVjdGlvbi5QcmV2LHdvcmxkTW90aW9uQXppbXV0aDpOdW1iZXIuTmFOfSxmcm9tOmUua2V5LHRvOml9KX1yZXR1cm4gcn07ZS5wcm90b3R5cGUuY29tcHV0ZVNpbWlsYXJFZGdlcz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7aWYoIXQuZnVsbCl7dGhyb3cgbmV3IEguQXJndW1lbnRNYXBpbGxhcnlFcnJvcihcIk5vZGUgaGFzIHRvIGJlIGZ1bGwuXCIpfXZhciBuPXQuZnVsbFBhbm87dmFyIGk9e307Zm9yKHZhciBvPTAsYT1lO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO2lmKHMuc2VxdWVuY2VLZXk9PW51bGwpe2NvbnRpbnVlfWlmKHMuc2FtZVNlcXVlbmNlKXtjb250aW51ZX1pZihuKXtpZighcy5mdWxsUGFubyl7Y29udGludWV9fWVsc2V7aWYoIXMuZnVsbFBhbm8mJk1hdGguYWJzKHMuZGlyZWN0aW9uQ2hhbmdlKT50aGlzLl9zZXR0aW5ncy5zaW1pbGFyTWF4RGlyZWN0aW9uQ2hhbmdlKXtjb250aW51ZX19aWYocy5kaXN0YW5jZT50aGlzLl9zZXR0aW5ncy5zaW1pbGFyTWF4RGlzdGFuY2Upe2NvbnRpbnVlfWlmKHMuc2FtZVVzZXImJk1hdGguYWJzKHMuY2FwdHVyZWRBdC10LmNhcHR1cmVkQXQpPHRoaXMuX3NldHRpbmdzLnNpbWlsYXJNaW5UaW1lRGlmZmVyZW5jZSl7Y29udGludWV9aWYoaVtzLnNlcXVlbmNlS2V5XT09bnVsbCl7aVtzLnNlcXVlbmNlS2V5XT1bXX1pW3Muc2VxdWVuY2VLZXldLnB1c2gocyl9dmFyIHU9W107dmFyIGM9dC5mdWxsUGFubz9mdW5jdGlvbihlKXtyZXR1cm4gZS5kaXN0YW5jZX06ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2NvZWZmaWNpZW50cy5zaW1pbGFyRGlzdGFuY2UqZS5kaXN0YW5jZStyLl9jb2VmZmljaWVudHMuc2ltaWxhclJvdGF0aW9uKmUucm90YXRpb259O2Zvcih2YXIgbCBpbiBpKXtpZighaS5oYXNPd25Qcm9wZXJ0eShsKSl7Y29udGludWV9dmFyIGg9TnVtYmVyLk1BWF9WQUxVRTt2YXIgcD1udWxsO2Zvcih2YXIgZj0wLGQ9aVtsXTtmPGQubGVuZ3RoO2YrKyl7dmFyIHM9ZFtmXTt2YXIgdj1jKHMpO2lmKHY8aCl7aD12O3A9c319aWYocD09bnVsbCl7Y29udGludWV9dS5wdXNoKHApfXJldHVybiB1Lm1hcChmdW5jdGlvbihlKXtyZXR1cm57ZGF0YTp7ZGlyZWN0aW9uOlYuRWRnZURpcmVjdGlvbi5TaW1pbGFyLHdvcmxkTW90aW9uQXppbXV0aDplLndvcmxkTW90aW9uQXppbXV0aH0sZnJvbTp0LmtleSx0bzplLmtleX19KX07ZS5wcm90b3R5cGUuY29tcHV0ZVN0ZXBFZGdlcz1mdW5jdGlvbihlLHQscixuKXtpZighZS5mdWxsKXt0aHJvdyBuZXcgSC5Bcmd1bWVudE1hcGlsbGFyeUVycm9yKFwiTm9kZSBoYXMgdG8gYmUgZnVsbC5cIil9dmFyIGk9W107aWYoZS5wYW5vKXtyZXR1cm4gaX1mb3IodmFyIG8gaW4gdGhpcy5fZGlyZWN0aW9ucy5zdGVwcyl7aWYoIXRoaXMuX2RpcmVjdGlvbnMuc3RlcHMuaGFzT3duUHJvcGVydHkobykpe2NvbnRpbnVlfXZhciBhPXRoaXMuX2RpcmVjdGlvbnMuc3RlcHNbb107dmFyIHM9TnVtYmVyLk1BWF9WQUxVRTt2YXIgdT1udWxsO3ZhciBjPW51bGw7Zm9yKHZhciBsPTAsaD10O2w8aC5sZW5ndGg7bCsrKXt2YXIgcD1oW2xdO2lmKHAuY3JvcHBlZFBhbm98fHAuZnVsbFBhbm8pe2NvbnRpbnVlfWlmKE1hdGguYWJzKHAuZGlyZWN0aW9uQ2hhbmdlKT50aGlzLl9zZXR0aW5ncy5zdGVwTWF4RGlyZWN0aW9uQ2hhbmdlKXtjb250aW51ZX12YXIgZj10aGlzLl9zcGF0aWFsLmFuZ2xlRGlmZmVyZW5jZShhLm1vdGlvbkNoYW5nZSxwLm1vdGlvbkNoYW5nZSk7dmFyIGQ9dGhpcy5fc3BhdGlhbC5hbmdsZURpZmZlcmVuY2UocC5kaXJlY3Rpb25DaGFuZ2UsZik7dmFyIHY9TWF0aC5tYXgoTWF0aC5hYnMoZiksTWF0aC5hYnMoZCkpO2lmKE1hdGguYWJzKHYpPnRoaXMuX3NldHRpbmdzLnN0ZXBNYXhEcmlmdCl7Y29udGludWV9dmFyIG09cC5rZXk7aWYoYS51c2VGYWxsYmFjayYmKG09PT1yfHxtPT09bikpe2M9cH1pZihwLmRpc3RhbmNlPnRoaXMuX3NldHRpbmdzLnN0ZXBNYXhEaXN0YW5jZSl7Y29udGludWV9Zj1NYXRoLnNxcnQoZipmK3AudmVydGljYWxNb3Rpb24qcC52ZXJ0aWNhbE1vdGlvbik7dmFyIGc9dGhpcy5fY29lZmZpY2llbnRzLnN0ZXBQcmVmZXJyZWREaXN0YW5jZSpNYXRoLmFicyhwLmRpc3RhbmNlLXRoaXMuX3NldHRpbmdzLnN0ZXBQcmVmZXJyZWREaXN0YW5jZSkvdGhpcy5fc2V0dGluZ3Muc3RlcE1heERpc3RhbmNlK3RoaXMuX2NvZWZmaWNpZW50cy5zdGVwTW90aW9uKmYvdGhpcy5fc2V0dGluZ3Muc3RlcE1heERyaWZ0K3RoaXMuX2NvZWZmaWNpZW50cy5zdGVwUm90YXRpb24qcC5yb3RhdGlvbi90aGlzLl9zZXR0aW5ncy5zdGVwTWF4RGlyZWN0aW9uQ2hhbmdlK3RoaXMuX2NvZWZmaWNpZW50cy5zdGVwU2VxdWVuY2VQZW5hbHR5KihwLnNhbWVTZXF1ZW5jZT8wOjEpK3RoaXMuX2NvZWZmaWNpZW50cy5zdGVwTWVyZ2VDQ1BlbmFsdHkqKHAuc2FtZU1lcmdlQ0M/MDoxKTtpZihnPHMpe3M9Zzt1PXB9fXU9dT09bnVsbD9jOnU7aWYodSE9bnVsbCl7aS5wdXNoKHtkYXRhOntkaXJlY3Rpb246YS5kaXJlY3Rpb24sd29ybGRNb3Rpb25BemltdXRoOnUud29ybGRNb3Rpb25BemltdXRofSxmcm9tOmUua2V5LHRvOnUua2V5fSl9fXJldHVybiBpfTtlLnByb3RvdHlwZS5jb21wdXRlVHVybkVkZ2VzPWZ1bmN0aW9uKGUsdCl7aWYoIWUuZnVsbCl7dGhyb3cgbmV3IEguQXJndW1lbnRNYXBpbGxhcnlFcnJvcihcIk5vZGUgaGFzIHRvIGJlIGZ1bGwuXCIpfXZhciByPVtdO2lmKGUucGFubyl7cmV0dXJuIHJ9Zm9yKHZhciBuIGluIHRoaXMuX2RpcmVjdGlvbnMudHVybnMpe2lmKCF0aGlzLl9kaXJlY3Rpb25zLnR1cm5zLmhhc093blByb3BlcnR5KG4pKXtjb250aW51ZX12YXIgaT10aGlzLl9kaXJlY3Rpb25zLnR1cm5zW25dO3ZhciBvPU51bWJlci5NQVhfVkFMVUU7dmFyIGE9bnVsbDtmb3IodmFyIHM9MCx1PXQ7czx1Lmxlbmd0aDtzKyspe3ZhciBjPXVbc107aWYoYy5jcm9wcGVkUGFub3x8Yy5mdWxsUGFubyl7Y29udGludWV9aWYoYy5kaXN0YW5jZT50aGlzLl9zZXR0aW5ncy50dXJuTWF4RGlzdGFuY2Upe2NvbnRpbnVlfXZhciBsPWkuZGlyZWN0aW9uIT09Vi5FZGdlRGlyZWN0aW9uLlR1cm5VJiZjLmRpc3RhbmNlPHRoaXMuX3NldHRpbmdzLnR1cm5NYXhSaWdEaXN0YW5jZSYmTWF0aC5hYnMoYy5kaXJlY3Rpb25DaGFuZ2UpPnRoaXMuX3NldHRpbmdzLnR1cm5NaW5SaWdEaXJlY3Rpb25DaGFuZ2U7dmFyIGg9dGhpcy5fc3BhdGlhbC5hbmdsZURpZmZlcmVuY2UoaS5kaXJlY3Rpb25DaGFuZ2UsYy5kaXJlY3Rpb25DaGFuZ2UpO3ZhciBwPXZvaWQgMDtpZihsJiZjLmRpcmVjdGlvbkNoYW5nZSppLmRpcmVjdGlvbkNoYW5nZT4wJiZNYXRoLmFicyhjLmRpcmVjdGlvbkNoYW5nZSk8TWF0aC5hYnMoaS5kaXJlY3Rpb25DaGFuZ2UpKXtwPS1NYXRoLlBJLzIrTWF0aC5hYnMoYy5kaXJlY3Rpb25DaGFuZ2UpfWVsc2V7aWYoTWF0aC5hYnMoaCk+dGhpcy5fc2V0dGluZ3MudHVybk1heERpcmVjdGlvbkNoYW5nZSl7Y29udGludWV9dmFyIGY9aS5tb3Rpb25DaGFuZ2U/dGhpcy5fc3BhdGlhbC5hbmdsZURpZmZlcmVuY2UoaS5tb3Rpb25DaGFuZ2UsYy5tb3Rpb25DaGFuZ2UpOjA7Zj1NYXRoLnNxcnQoZipmK2MudmVydGljYWxNb3Rpb24qYy52ZXJ0aWNhbE1vdGlvbik7cD10aGlzLl9jb2VmZmljaWVudHMudHVybkRpc3RhbmNlKmMuZGlzdGFuY2UvdGhpcy5fc2V0dGluZ3MudHVybk1heERpc3RhbmNlK3RoaXMuX2NvZWZmaWNpZW50cy50dXJuTW90aW9uKmYvTWF0aC5QSSt0aGlzLl9jb2VmZmljaWVudHMudHVyblNlcXVlbmNlUGVuYWx0eSooYy5zYW1lU2VxdWVuY2U/MDoxKSt0aGlzLl9jb2VmZmljaWVudHMudHVybk1lcmdlQ0NQZW5hbHR5KihjLnNhbWVNZXJnZUNDPzA6MSl9aWYocDxvKXtvPXA7YT1jfX1pZihhIT1udWxsKXtyLnB1c2goe2RhdGE6e2RpcmVjdGlvbjppLmRpcmVjdGlvbix3b3JsZE1vdGlvbkF6aW11dGg6YS53b3JsZE1vdGlvbkF6aW11dGh9LGZyb206ZS5rZXksdG86YS5rZXl9KX19cmV0dXJuIHJ9O2UucHJvdG90eXBlLmNvbXB1dGVQZXJzcGVjdGl2ZVRvUGFub0VkZ2VzPWZ1bmN0aW9uKGUsdCl7aWYoIWUuZnVsbCl7dGhyb3cgbmV3IEguQXJndW1lbnRNYXBpbGxhcnlFcnJvcihcIk5vZGUgaGFzIHRvIGJlIGZ1bGwuXCIpfWlmKGUucGFubyl7cmV0dXJuW119dmFyIHI9TnVtYmVyLk1BWF9WQUxVRTt2YXIgbj1udWxsO2Zvcih2YXIgaT0wLG89dDtpPG8ubGVuZ3RoO2krKyl7dmFyIGE9b1tpXTtpZighYS5mdWxsUGFubyl7Y29udGludWV9dmFyIHM9dGhpcy5fY29lZmZpY2llbnRzLnBhbm9QcmVmZXJyZWREaXN0YW5jZSpNYXRoLmFicyhhLmRpc3RhbmNlLXRoaXMuX3NldHRpbmdzLnBhbm9QcmVmZXJyZWREaXN0YW5jZSkvdGhpcy5fc2V0dGluZ3MucGFub01heERpc3RhbmNlK3RoaXMuX2NvZWZmaWNpZW50cy5wYW5vTW90aW9uKk1hdGguYWJzKGEubW90aW9uQ2hhbmdlKS9NYXRoLlBJK3RoaXMuX2NvZWZmaWNpZW50cy5wYW5vTWVyZ2VDQ1BlbmFsdHkqKGEuc2FtZU1lcmdlQ0M/MDoxKTtpZihzPHIpe3I9cztuPWF9fWlmKG49PW51bGwpe3JldHVybltdfXJldHVyblt7ZGF0YTp7ZGlyZWN0aW9uOlYuRWRnZURpcmVjdGlvbi5QYW5vLHdvcmxkTW90aW9uQXppbXV0aDpuLndvcmxkTW90aW9uQXppbXV0aH0sZnJvbTplLmtleSx0bzpuLmtleX1dfTtlLnByb3RvdHlwZS5jb21wdXRlUGFub0VkZ2VzPWZ1bmN0aW9uKGUsdCl7aWYoIWUuZnVsbCl7dGhyb3cgbmV3IEguQXJndW1lbnRNYXBpbGxhcnlFcnJvcihcIk5vZGUgaGFzIHRvIGJlIGZ1bGwuXCIpfWlmKCFlLmZ1bGxQYW5vKXtyZXR1cm5bXX12YXIgcj1bXTt2YXIgbj1bXTt2YXIgaT1bXTtmb3IodmFyIG89MCxhPXQ7bzxhLmxlbmd0aDtvKyspe3ZhciBzPWFbb107aWYocy5kaXN0YW5jZT50aGlzLl9zZXR0aW5ncy5wYW5vTWF4RGlzdGFuY2Upe2NvbnRpbnVlfWlmKHMuZnVsbFBhbm8pe2lmKHMuZGlzdGFuY2U8dGhpcy5fc2V0dGluZ3MucGFub01pbkRpc3RhbmNlKXtjb250aW51ZX1uLnB1c2gocyl9ZWxzZXtpZihzLmNyb3BwZWRQYW5vKXtjb250aW51ZX1mb3IodmFyIHUgaW4gdGhpcy5fZGlyZWN0aW9ucy5wYW5vcyl7aWYoIXRoaXMuX2RpcmVjdGlvbnMucGFub3MuaGFzT3duUHJvcGVydHkodSkpe2NvbnRpbnVlfXZhciBjPXRoaXMuX2RpcmVjdGlvbnMucGFub3NbdV07dmFyIGw9dGhpcy5fc3BhdGlhbC5hbmdsZURpZmZlcmVuY2Uocy5kaXJlY3Rpb25DaGFuZ2Uscy5tb3Rpb25DaGFuZ2UpO3ZhciBoPXRoaXMuX3NwYXRpYWwuYW5nbGVEaWZmZXJlbmNlKGMuZGlyZWN0aW9uQ2hhbmdlLGwpO2lmKE1hdGguYWJzKGgpPnRoaXMuX3NldHRpbmdzLnBhbm9NYXhTdGVwVHVybkNoYW5nZSl7Y29udGludWV9aS5wdXNoKFtjLmRpcmVjdGlvbixzXSk7YnJlYWt9fX12YXIgcD1NYXRoLlBJL3RoaXMuX3NldHRpbmdzLnBhbm9NYXhJdGVtczt2YXIgZj1bXTt2YXIgZD1bXTtmb3IodmFyIHY9MDt2PHRoaXMuX3NldHRpbmdzLnBhbm9NYXhJdGVtczt2Kyspe3ZhciBtPXYvdGhpcy5fc2V0dGluZ3MucGFub01heEl0ZW1zKjIqTWF0aC5QSTt2YXIgZz1OdW1iZXIuTUFYX1ZBTFVFO3ZhciBfPW51bGw7Zm9yKHZhciB5PTAsYj1uO3k8Yi5sZW5ndGg7eSsrKXt2YXIgcz1iW3ldO3ZhciB4PXRoaXMuX3NwYXRpYWwuYW5nbGVEaWZmZXJlbmNlKG0scy5tb3Rpb25DaGFuZ2UpO2lmKE1hdGguYWJzKHgpPnApe2NvbnRpbnVlfXZhciB3PU51bWJlci5NQVhfVkFMVUU7Zm9yKHZhciBTPTAsTT1mO1M8TS5sZW5ndGg7UysrKXt2YXIgQz1NW1NdO3ZhciBUPU1hdGguYWJzKHRoaXMuX3NwYXRpYWwuYW5nbGVEaWZmZXJlbmNlKEMscy5tb3Rpb25DaGFuZ2UpKTtpZihUPHcpe3c9VH19aWYodzw9cCl7Y29udGludWV9dmFyIEU9dGhpcy5fY29lZmZpY2llbnRzLnBhbm9QcmVmZXJyZWREaXN0YW5jZSpNYXRoLmFicyhzLmRpc3RhbmNlLXRoaXMuX3NldHRpbmdzLnBhbm9QcmVmZXJyZWREaXN0YW5jZSkvdGhpcy5fc2V0dGluZ3MucGFub01heERpc3RhbmNlK3RoaXMuX2NvZWZmaWNpZW50cy5wYW5vTW90aW9uKk1hdGguYWJzKHgpL3ArdGhpcy5fY29lZmZpY2llbnRzLnBhbm9TZXF1ZW5jZVBlbmFsdHkqKHMuc2FtZVNlcXVlbmNlPzA6MSkrdGhpcy5fY29lZmZpY2llbnRzLnBhbm9NZXJnZUNDUGVuYWx0eSoocy5zYW1lTWVyZ2VDQz8wOjEpO2lmKEU8Zyl7Zz1FO189c319aWYoXyE9bnVsbCl7Zi5wdXNoKF8ubW90aW9uQ2hhbmdlKTtyLnB1c2goe2RhdGE6e2RpcmVjdGlvbjpWLkVkZ2VEaXJlY3Rpb24uUGFubyx3b3JsZE1vdGlvbkF6aW11dGg6Xy53b3JsZE1vdGlvbkF6aW11dGh9LGZyb206ZS5rZXksdG86Xy5rZXl9KX1lbHNle2QucHVzaChtKX19dmFyIE89e307T1tWLkVkZ2VEaXJlY3Rpb24uUGFub109ZjtPW1YuRWRnZURpcmVjdGlvbi5TdGVwRm9yd2FyZF09W107T1tWLkVkZ2VEaXJlY3Rpb24uU3RlcExlZnRdPVtdO09bVi5FZGdlRGlyZWN0aW9uLlN0ZXBCYWNrd2FyZF09W107T1tWLkVkZ2VEaXJlY3Rpb24uU3RlcFJpZ2h0XT1bXTtmb3IodmFyIFA9MCxBPWQ7UDxBLmxlbmd0aDtQKyspe3ZhciBqPUFbUF07dmFyIFI9W107Zm9yKHZhciB1IGluIHRoaXMuX2RpcmVjdGlvbnMucGFub3Mpe2lmKCF0aGlzLl9kaXJlY3Rpb25zLnBhbm9zLmhhc093blByb3BlcnR5KHUpKXtjb250aW51ZX12YXIgYz10aGlzLl9kaXJlY3Rpb25zLnBhbm9zW3VdO3ZhciBrPU9bVi5FZGdlRGlyZWN0aW9uLlBhbm9dLmNvbmNhdChPW2MuZGlyZWN0aW9uXSkuY29uY2F0KE9bYy5wcmV2XSkuY29uY2F0KE9bYy5uZXh0XSk7dmFyIGc9TnVtYmVyLk1BWF9WQUxVRTt2YXIgXz1udWxsO2Zvcih2YXIgTD0wLE49aTtMPE4ubGVuZ3RoO0wrKyl7dmFyIHM9TltMXTtpZihzWzBdIT09Yy5kaXJlY3Rpb24pe2NvbnRpbnVlfXZhciBJPXRoaXMuX3NwYXRpYWwuYW5nbGVEaWZmZXJlbmNlKGosc1sxXS5tb3Rpb25DaGFuZ2UpO2lmKE1hdGguYWJzKEkpPnApe2NvbnRpbnVlfXZhciBEPU51bWJlci5NQVhfVkFMVUU7Zm9yKHZhciBCPTAsRj1rO0I8Ri5sZW5ndGg7QisrKXt2YXIgQz1GW0JdO3ZhciB3PU1hdGguYWJzKHRoaXMuX3NwYXRpYWwuYW5nbGVEaWZmZXJlbmNlKEMsc1sxXS5tb3Rpb25DaGFuZ2UpKTtpZih3PEQpe0Q9d319aWYoRDw9cCl7Y29udGludWV9dmFyIEU9dGhpcy5fY29lZmZpY2llbnRzLnBhbm9QcmVmZXJyZWREaXN0YW5jZSpNYXRoLmFicyhzWzFdLmRpc3RhbmNlLXRoaXMuX3NldHRpbmdzLnBhbm9QcmVmZXJyZWREaXN0YW5jZSkvdGhpcy5fc2V0dGluZ3MucGFub01heERpc3RhbmNlK3RoaXMuX2NvZWZmaWNpZW50cy5wYW5vTW90aW9uKk1hdGguYWJzKEkpL3ArdGhpcy5fY29lZmZpY2llbnRzLnBhbm9NZXJnZUNDUGVuYWx0eSooc1sxXS5zYW1lTWVyZ2VDQz8wOjEpO2lmKEU8Zyl7Zz1FO189c319aWYoXyE9bnVsbCl7Ui5wdXNoKF8pO3IucHVzaCh7ZGF0YTp7ZGlyZWN0aW9uOl9bMF0sd29ybGRNb3Rpb25BemltdXRoOl9bMV0ud29ybGRNb3Rpb25BemltdXRofSxmcm9tOmUua2V5LHRvOl9bMV0ua2V5fSl9fWZvcih2YXIgej0wLCQ9Ujt6PCQubGVuZ3RoO3orKyl7dmFyIEc9JFt6XTtPW0dbMF1dLnB1c2goR1sxXS5tb3Rpb25DaGFuZ2UpfX1yZXR1cm4gcn07cmV0dXJuIGV9KCk7ci5FZGdlQ2FsY3VsYXRvcj1pO3IuZGVmYXVsdD1pfSx7XCIuLi8uLi9FZGdlXCI6MjkyLFwiLi4vLi4vRXJyb3JcIjoyOTMsXCIuLi8uLi9HZW9cIjoyOTQsdGhyZWU6MjQyfV0sNDM0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkVkZ2VDYWxjdWxhdG9yQ29lZmZpY2llbnRzPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLnBhbm9QcmVmZXJyZWREaXN0YW5jZT0yO3RoaXMucGFub01vdGlvbj0yO3RoaXMucGFub1NlcXVlbmNlUGVuYWx0eT0xO3RoaXMucGFub01lcmdlQ0NQZW5hbHR5PTQ7dGhpcy5zdGVwUHJlZmVycmVkRGlzdGFuY2U9NDt0aGlzLnN0ZXBNb3Rpb249Mzt0aGlzLnN0ZXBSb3RhdGlvbj00O3RoaXMuc3RlcFNlcXVlbmNlUGVuYWx0eT0yO3RoaXMuc3RlcE1lcmdlQ0NQZW5hbHR5PTY7dGhpcy5zaW1pbGFyRGlzdGFuY2U9Mjt0aGlzLnNpbWlsYXJSb3RhdGlvbj0zO3RoaXMudHVybkRpc3RhbmNlPTQ7dGhpcy50dXJuTW90aW9uPTI7dGhpcy50dXJuU2VxdWVuY2VQZW5hbHR5PTE7dGhpcy50dXJuTWVyZ2VDQ1BlbmFsdHk9NH1yZXR1cm4gZX0oKTtyLkVkZ2VDYWxjdWxhdG9yQ29lZmZpY2llbnRzPW47ci5kZWZhdWx0PW59LHt9XSw0MzU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuRWRnZUNhbGN1bGF0b3JEaXJlY3Rpb25zPXZvaWQgMDt2YXIgbj1lKFwiLi4vLi4vRWRnZVwiKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLnN0ZXBzPXt9O3RoaXMudHVybnM9e307dGhpcy5wYW5vcz17fTt0aGlzLnN0ZXBzW24uRWRnZURpcmVjdGlvbi5TdGVwRm9yd2FyZF09e2RpcmVjdGlvbjpuLkVkZ2VEaXJlY3Rpb24uU3RlcEZvcndhcmQsbW90aW9uQ2hhbmdlOjAsdXNlRmFsbGJhY2s6dHJ1ZX07dGhpcy5zdGVwc1tuLkVkZ2VEaXJlY3Rpb24uU3RlcEJhY2t3YXJkXT17ZGlyZWN0aW9uOm4uRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmQsbW90aW9uQ2hhbmdlOk1hdGguUEksdXNlRmFsbGJhY2s6dHJ1ZX07dGhpcy5zdGVwc1tuLkVkZ2VEaXJlY3Rpb24uU3RlcExlZnRdPXtkaXJlY3Rpb246bi5FZGdlRGlyZWN0aW9uLlN0ZXBMZWZ0LG1vdGlvbkNoYW5nZTpNYXRoLlBJLzIsdXNlRmFsbGJhY2s6ZmFsc2V9O3RoaXMuc3RlcHNbbi5FZGdlRGlyZWN0aW9uLlN0ZXBSaWdodF09e2RpcmVjdGlvbjpuLkVkZ2VEaXJlY3Rpb24uU3RlcFJpZ2h0LG1vdGlvbkNoYW5nZTotTWF0aC5QSS8yLHVzZUZhbGxiYWNrOmZhbHNlfTt0aGlzLnR1cm5zW24uRWRnZURpcmVjdGlvbi5UdXJuTGVmdF09e2RpcmVjdGlvbjpuLkVkZ2VEaXJlY3Rpb24uVHVybkxlZnQsZGlyZWN0aW9uQ2hhbmdlOk1hdGguUEkvMixtb3Rpb25DaGFuZ2U6TWF0aC5QSS80fTt0aGlzLnR1cm5zW24uRWRnZURpcmVjdGlvbi5UdXJuUmlnaHRdPXtkaXJlY3Rpb246bi5FZGdlRGlyZWN0aW9uLlR1cm5SaWdodCxkaXJlY3Rpb25DaGFuZ2U6LU1hdGguUEkvMixtb3Rpb25DaGFuZ2U6LU1hdGguUEkvNH07dGhpcy50dXJuc1tuLkVkZ2VEaXJlY3Rpb24uVHVyblVdPXtkaXJlY3Rpb246bi5FZGdlRGlyZWN0aW9uLlR1cm5VLGRpcmVjdGlvbkNoYW5nZTpNYXRoLlBJLG1vdGlvbkNoYW5nZTpudWxsfTt0aGlzLnBhbm9zW24uRWRnZURpcmVjdGlvbi5TdGVwRm9yd2FyZF09e2RpcmVjdGlvbjpuLkVkZ2VEaXJlY3Rpb24uU3RlcEZvcndhcmQsZGlyZWN0aW9uQ2hhbmdlOjAsbmV4dDpuLkVkZ2VEaXJlY3Rpb24uU3RlcExlZnQscHJldjpuLkVkZ2VEaXJlY3Rpb24uU3RlcFJpZ2h0fTt0aGlzLnBhbm9zW24uRWRnZURpcmVjdGlvbi5TdGVwQmFja3dhcmRdPXtkaXJlY3Rpb246bi5FZGdlRGlyZWN0aW9uLlN0ZXBCYWNrd2FyZCxkaXJlY3Rpb25DaGFuZ2U6TWF0aC5QSSxuZXh0Om4uRWRnZURpcmVjdGlvbi5TdGVwUmlnaHQscHJldjpuLkVkZ2VEaXJlY3Rpb24uU3RlcExlZnR9O3RoaXMucGFub3Nbbi5FZGdlRGlyZWN0aW9uLlN0ZXBMZWZ0XT17ZGlyZWN0aW9uOm4uRWRnZURpcmVjdGlvbi5TdGVwTGVmdCxkaXJlY3Rpb25DaGFuZ2U6TWF0aC5QSS8yLG5leHQ6bi5FZGdlRGlyZWN0aW9uLlN0ZXBCYWNrd2FyZCxwcmV2Om4uRWRnZURpcmVjdGlvbi5TdGVwRm9yd2FyZH07dGhpcy5wYW5vc1tuLkVkZ2VEaXJlY3Rpb24uU3RlcFJpZ2h0XT17ZGlyZWN0aW9uOm4uRWRnZURpcmVjdGlvbi5TdGVwUmlnaHQsZGlyZWN0aW9uQ2hhbmdlOi1NYXRoLlBJLzIsbmV4dDpuLkVkZ2VEaXJlY3Rpb24uU3RlcEZvcndhcmQscHJldjpuLkVkZ2VEaXJlY3Rpb24uU3RlcEJhY2t3YXJkfX1yZXR1cm4gZX0oKTtyLkVkZ2VDYWxjdWxhdG9yRGlyZWN0aW9ucz1pfSx7XCIuLi8uLi9FZGdlXCI6MjkyfV0sNDM2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkVkZ2VDYWxjdWxhdG9yU2V0dGluZ3M9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucGFub01pbkRpc3RhbmNlPS4xO3RoaXMucGFub01heERpc3RhbmNlPTIwO3RoaXMucGFub1ByZWZlcnJlZERpc3RhbmNlPTU7dGhpcy5wYW5vTWF4SXRlbXM9NDt0aGlzLnBhbm9NYXhTdGVwVHVybkNoYW5nZT1NYXRoLlBJLzg7dGhpcy5yb3RhdGlvbk1heERpc3RhbmNlPXRoaXMudHVybk1heFJpZ0Rpc3RhbmNlO3RoaXMucm90YXRpb25NYXhEaXJlY3Rpb25DaGFuZ2U9TWF0aC5QSS82O3RoaXMucm90YXRpb25NYXhWZXJ0aWNhbERpcmVjdGlvbkNoYW5nZT1NYXRoLlBJLzg7dGhpcy5zaW1pbGFyTWF4RGlyZWN0aW9uQ2hhbmdlPU1hdGguUEkvODt0aGlzLnNpbWlsYXJNYXhEaXN0YW5jZT0xMjt0aGlzLnNpbWlsYXJNaW5UaW1lRGlmZmVyZW5jZT0xMiozNjAwKjFlMzt0aGlzLnN0ZXBNYXhEaXN0YW5jZT0yMDt0aGlzLnN0ZXBNYXhEaXJlY3Rpb25DaGFuZ2U9TWF0aC5QSS82O3RoaXMuc3RlcE1heERyaWZ0PU1hdGguUEkvNjt0aGlzLnN0ZXBQcmVmZXJyZWREaXN0YW5jZT00O3RoaXMudHVybk1heERpc3RhbmNlPTE1O3RoaXMudHVybk1heERpcmVjdGlvbkNoYW5nZT0yKk1hdGguUEkvOTt0aGlzLnR1cm5NYXhSaWdEaXN0YW5jZT0uNjU7dGhpcy50dXJuTWluUmlnRGlyZWN0aW9uQ2hhbmdlPU1hdGguUEkvNn1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYXhEaXN0YW5jZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgodGhpcy5wYW5vTWF4RGlzdGFuY2UsdGhpcy5zaW1pbGFyTWF4RGlzdGFuY2UsdGhpcy5zdGVwTWF4RGlzdGFuY2UsdGhpcy50dXJuTWF4RGlzdGFuY2UpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7cmV0dXJuIGV9KCk7ci5FZGdlQ2FsY3VsYXRvclNldHRpbmdzPW47ci5kZWZhdWx0PW59LHt9XSw0Mzc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuRWRnZURpcmVjdGlvbj12b2lkIDA7dmFyIG47KGZ1bmN0aW9uKGUpe2VbZVtcIk5leHRcIl09MF09XCJOZXh0XCI7ZVtlW1wiUHJldlwiXT0xXT1cIlByZXZcIjtlW2VbXCJTdGVwTGVmdFwiXT0yXT1cIlN0ZXBMZWZ0XCI7ZVtlW1wiU3RlcFJpZ2h0XCJdPTNdPVwiU3RlcFJpZ2h0XCI7ZVtlW1wiU3RlcEZvcndhcmRcIl09NF09XCJTdGVwRm9yd2FyZFwiO2VbZVtcIlN0ZXBCYWNrd2FyZFwiXT01XT1cIlN0ZXBCYWNrd2FyZFwiO2VbZVtcIlR1cm5MZWZ0XCJdPTZdPVwiVHVybkxlZnRcIjtlW2VbXCJUdXJuUmlnaHRcIl09N109XCJUdXJuUmlnaHRcIjtlW2VbXCJUdXJuVVwiXT04XT1cIlR1cm5VXCI7ZVtlW1wiUGFub1wiXT05XT1cIlBhbm9cIjtlW2VbXCJTaW1pbGFyXCJdPTEwXT1cIlNpbWlsYXJcIn0pKG49ci5FZGdlRGlyZWN0aW9ufHwoci5FZGdlRGlyZWN0aW9uPXt9KSl9LHt9XSw0Mzg6W2Z1bmN0aW9uKGUsdCxyKXthcmd1bWVudHNbNF1bMzA1XVswXS5hcHBseShyLGFyZ3VtZW50cyl9LHtkdXA6MzA1fV0sNDM5OltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDQ0MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5ET01SZW5kZXJlcj12b2lkIDA7dmFyIGk9ZShcInJ4anNcIik7dmFyIG89ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBhPWUoXCJ2aXJ0dWFsLWRvbVwiKTt2YXIgcz1lKFwicnhqc1wiKTt2YXIgdT1lKFwiLi4vUmVuZGVyXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fYWRhcHRpdmVPcGVyYXRpb24kPW5ldyBzLlN1YmplY3Q7dGhpcy5fcmVuZGVyJD1uZXcgcy5TdWJqZWN0O3RoaXMuX3JlbmRlckFkYXB0aXZlJD1uZXcgcy5TdWJqZWN0O3RoaXMuX3JlbmRlclNlcnZpY2U9dDt0aGlzLl9jdXJyZW50RnJhbWUkPXI7dmFyIG49YS5jcmVhdGUoYS5oKFwiZGl2LmRvbVJlbmRlcmVyXCIsW10pKTtlLmFwcGVuZENoaWxkKG4pO3RoaXMuX29mZnNldCQ9dGhpcy5fYWRhcHRpdmVPcGVyYXRpb24kLnBpcGUoby5zY2FuKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQoZSl9LHtlbGVtZW50SGVpZ2h0OmUub2Zmc2V0SGVpZ2h0LGVsZW1lbnRXaWR0aDplLm9mZnNldFdpZHRoLGltYWdlQXNwZWN0OjAscmVuZGVyTW9kZTp1LlJlbmRlck1vZGUuRmlsbH0pLG8uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmltYWdlQXNwZWN0PjAmJmUuZWxlbWVudFdpZHRoPjAmJmUuZWxlbWVudEhlaWdodD4wfSksby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbGVtZW50V2lkdGgvZS5lbGVtZW50SGVpZ2h0O3ZhciByPWUuaW1hZ2VBc3BlY3QvdDt2YXIgbj0wO3ZhciBpPTA7aWYoZS5yZW5kZXJNb2RlPT09dS5SZW5kZXJNb2RlLkxldHRlcmJveCl7aWYoZS5pbWFnZUFzcGVjdD50KXtuPWUuZWxlbWVudEhlaWdodCooMS0xL3IpLzJ9ZWxzZXtpPWUuZWxlbWVudFdpZHRoKigxLXIpLzJ9fWVsc2V7aWYoZS5pbWFnZUFzcGVjdD50KXtpPS1lLmVsZW1lbnRXaWR0aCooci0xKS8yfWVsc2V7bj0tZS5lbGVtZW50SGVpZ2h0KigxL3ItMSkvMn19cmV0dXJue2JvdHRvbTpuLGxlZnQ6aSxyaWdodDppLHRvcDpufX0pKTt0aGlzLl9jdXJyZW50RnJhbWUkLnBpcGUoby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudE5vZGUhPW51bGx9KSxvLmRpc3RpbmN0VW50aWxDaGFuZ2VkKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10fSxmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXl9KSxvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5jdXJyZW50VHJhbnNmb3JtLmJhc2ljQXNwZWN0fSksby5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2UuaW1hZ2VBc3BlY3Q9dDtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKHRoaXMuX2FkYXB0aXZlT3BlcmF0aW9uJCk7aS5jb21iaW5lTGF0ZXN0KHRoaXMuX3JlbmRlckFkYXB0aXZlJC5waXBlKG8uc2NhbihmdW5jdGlvbihlLHQpe2lmKHQudm5vZGU9PW51bGwpe2RlbGV0ZSBlW3QubmFtZV19ZWxzZXtlW3QubmFtZV09dC52bm9kZX1yZXR1cm4gZX0se30pKSx0aGlzLl9vZmZzZXQkKS5waXBlKG8ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PVtdO3ZhciByPWVbMF07Zm9yKHZhciBuIGluIHIpe2lmKCFyLmhhc093blByb3BlcnR5KG4pKXtjb250aW51ZX10LnB1c2gocltuXSl9dmFyIGk9ZVsxXTt2YXIgbz17c3R5bGU6e2JvdHRvbTppLmJvdHRvbStcInB4XCIsbGVmdDppLmxlZnQrXCJweFwiLFwicG9pbnRlci1ldmVudHNcIjpcIm5vbmVcIixwb3NpdGlvbjpcImFic29sdXRlXCIscmlnaHQ6aS5yaWdodCtcInB4XCIsdG9wOmkudG9wK1wicHhcIn19O3JldHVybntuYW1lOlwiYWRhcHRpdmVEb21SZW5kZXJlclwiLHZub2RlOmEuaChcImRpdi5hZGFwdGl2ZURvbVJlbmRlcmVyXCIsbyx0KX19KSkuc3Vic2NyaWJlKHRoaXMuX3JlbmRlciQpO3RoaXMuX3ZOb2RlJD10aGlzLl9yZW5kZXIkLnBpcGUoby5zY2FuKGZ1bmN0aW9uKGUsdCl7aWYodC52bm9kZT09bnVsbCl7ZGVsZXRlIGVbdC5uYW1lXX1lbHNle2VbdC5uYW1lXT10LnZub2RlfXJldHVybiBlfSx7fSksby5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KHIpKXtjb250aW51ZX10LnB1c2goZVtyXSl9cmV0dXJuIGEuaChcImRpdi5kb21SZW5kZXJlclwiLHQpfSkpO3RoaXMuX3ZQYXRjaCQ9dGhpcy5fdk5vZGUkLnBpcGUoby5zY2FuKGZ1bmN0aW9uKGUsdCl7ZS52cGF0Y2g9YS5kaWZmKGUudm5vZGUsdCk7ZS52bm9kZT10O3JldHVybiBlfSx7dm5vZGU6YS5oKFwiZGl2LmRvbVJlbmRlcmVyXCIsW10pLHZwYXRjaDpudWxsfSksby5wbHVjayhcInZwYXRjaFwiKSk7dGhpcy5fZWxlbWVudCQ9dGhpcy5fdlBhdGNoJC5waXBlKG8uc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiBhLnBhdGNoKGUsdCl9LG4pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX2VsZW1lbnQkLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3RoaXMuX3JlbmRlclNlcnZpY2Uuc2l6ZSQucGlwZShvLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5lbGVtZW50V2lkdGg9dC53aWR0aDtlLmVsZW1lbnRIZWlnaHQ9dC5oZWlnaHQ7cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9hZGFwdGl2ZU9wZXJhdGlvbiQpO3RoaXMuX3JlbmRlclNlcnZpY2UucmVuZGVyTW9kZSQucGlwZShvLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5yZW5kZXJNb2RlPXQ7cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9hZGFwdGl2ZU9wZXJhdGlvbiQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImVsZW1lbnQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlbmRlciRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlciR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyZW5kZXJBZGFwdGl2ZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlckFkYXB0aXZlJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKGUpe3RoaXMuX3JlbmRlckFkYXB0aXZlJC5uZXh0KHtuYW1lOmUsdm5vZGU6bnVsbH0pO3RoaXMuX3JlbmRlciQubmV4dCh7bmFtZTplLHZub2RlOm51bGx9KX07cmV0dXJuIGV9KCk7ci5ET01SZW5kZXJlcj1uO3IuZGVmYXVsdD1ufSx7XCIuLi9SZW5kZXJcIjoyOTcscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLFwidmlydHVhbC1kb21cIjoyNDd9XSw0NDE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR0xSZW5kZXJTdGFnZT12b2lkIDA7dmFyIG47KGZ1bmN0aW9uKGUpe2VbZVtcIkJhY2tncm91bmRcIl09MF09XCJCYWNrZ3JvdW5kXCI7ZVtlW1wiRm9yZWdyb3VuZFwiXT0xXT1cIkZvcmVncm91bmRcIn0pKG49ci5HTFJlbmRlclN0YWdlfHwoci5HTFJlbmRlclN0YWdlPXt9KSk7ci5kZWZhdWx0PW59LHt9XSw0NDI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuR0xSZW5kZXJlcj12b2lkIDA7dmFyIGw9ZShcInJ4anNcIik7dmFyIGg9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBwPWUoXCJ0aHJlZVwiKTt2YXIgZj1lKFwiLi4vUmVuZGVyXCIpO3ZhciBkPWUoXCIuLi9VdGlsc1wiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoaSxvLGUpe3ZhciBhPXRoaXM7dGhpcy5fcmVuZGVyRnJhbWUkPW5ldyBsLlN1YmplY3Q7dGhpcy5fcmVuZGVyQ2FtZXJhT3BlcmF0aW9uJD1uZXcgbC5TdWJqZWN0O3RoaXMuX3JlbmRlciQ9bmV3IGwuU3ViamVjdDt0aGlzLl9jbGVhciQ9bmV3IGwuU3ViamVjdDt0aGlzLl9yZW5kZXJPcGVyYXRpb24kPW5ldyBsLlN1YmplY3Q7dGhpcy5fcmVuZGVyZXJPcGVyYXRpb24kPW5ldyBsLlN1YmplY3Q7dGhpcy5fZXJhc2VyT3BlcmF0aW9uJD1uZXcgbC5TdWJqZWN0O3RoaXMuX3JlbmRlclNlcnZpY2U9bzt0aGlzLl9kb209ISFlP2U6bmV3IGQuRE9NO3RoaXMuX3JlbmRlcmVyJD10aGlzLl9yZW5kZXJlck9wZXJhdGlvbiQucGlwZShoLnNjYW4oZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChlKX0se25lZWRzUmVuZGVyOmZhbHNlLHJlbmRlcmVyOm51bGx9KSxoLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUucmVuZGVyZXJ9KSk7dGhpcy5fcmVuZGVyQ29sbGVjdGlvbiQ9dGhpcy5fcmVuZGVyT3BlcmF0aW9uJC5waXBlKGguc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSx7fSksaC5zaGFyZSgpKTt0aGlzLl9yZW5kZXJDYW1lcmEkPXRoaXMuX3JlbmRlckNhbWVyYU9wZXJhdGlvbiQucGlwZShoLnNjYW4oZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChlKX0se2ZyYW1lSWQ6LTEsbmVlZHNSZW5kZXI6ZmFsc2UscGVyc3BlY3RpdmU6bnVsbH0pKTt0aGlzLl9lcmFzZXIkPXRoaXMuX2VyYXNlck9wZXJhdGlvbiQucGlwZShoLnN0YXJ0V2l0aChmdW5jdGlvbihlKXtyZXR1cm4gZX0pLGguc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSx7bmVlZHNSZW5kZXI6ZmFsc2V9KSk7bC5jb21iaW5lTGF0ZXN0KHRoaXMuX3JlbmRlcmVyJCx0aGlzLl9yZW5kZXJDb2xsZWN0aW9uJCx0aGlzLl9yZW5kZXJDYW1lcmEkLHRoaXMuX2VyYXNlciQpLnBpcGUoaC5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdLGk9ZVszXTt2YXIgbz1PYmplY3Qua2V5cyhyKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHJbZV19KTtyZXR1cm57Y2FtZXJhOm4sZXJhc2VyOmkscmVuZGVyZXI6dCxyZW5kZXJzOm99fSksaC5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZW5kZXJlci5uZWVkc1JlbmRlcnx8ZS5jYW1lcmEubmVlZHNSZW5kZXJ8fGUuZXJhc2VyLm5lZWRzUmVuZGVyO3ZhciByPWUuY2FtZXJhLmZyYW1lSWQ7Zm9yKHZhciBuPTAsaT1lLnJlbmRlcnM7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07aWYoby5mcmFtZUlkIT09cil7cmV0dXJuIGZhbHNlfXQ9dHx8by5uZWVkc1JlbmRlcn1yZXR1cm4gdH0pLGguZGlzdGluY3RVbnRpbENoYW5nZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR9LGZ1bmN0aW9uKGUpe3JldHVybiBlLmVyYXNlci5uZWVkc1JlbmRlcj8tMTplLmNhbWVyYS5mcmFtZUlkfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtlLnJlbmRlcmVyLm5lZWRzUmVuZGVyPWZhbHNlO2UuY2FtZXJhLm5lZWRzUmVuZGVyPWZhbHNlO2UuZXJhc2VyLm5lZWRzUmVuZGVyPWZhbHNlO3ZhciB0PWUuY2FtZXJhLnBlcnNwZWN0aXZlO3ZhciByPVtdO3ZhciBuPVtdO2Zvcih2YXIgaT0wLG89ZS5yZW5kZXJzO2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldO2lmKGEuc3RhZ2U9PT1mLkdMUmVuZGVyU3RhZ2UuQmFja2dyb3VuZCl7ci5wdXNoKGEucmVuZGVyKX1lbHNlIGlmKGEuc3RhZ2U9PT1mLkdMUmVuZGVyU3RhZ2UuRm9yZWdyb3VuZCl7bi5wdXNoKGEucmVuZGVyKX19dmFyIHM9ZS5yZW5kZXJlci5yZW5kZXJlcjtzLmNsZWFyKCk7Zm9yKHZhciB1PTAsYz1yO3U8Yy5sZW5ndGg7dSsrKXt2YXIgYT1jW3VdO2EodCxzKX1zLmNsZWFyRGVwdGgoKTtmb3IodmFyIGw9MCxoPW47bDxoLmxlbmd0aDtsKyspe3ZhciBhPWhbbF07YSh0LHMpfX0pO3RoaXMuX3JlbmRlckZyYW1lJC5waXBlKGgubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLmZyYW1lSWQ9dC5mcmFtZUlkO2UucGVyc3BlY3RpdmU9dC5wZXJzcGVjdGl2ZTtpZih0LmNoYW5nZWQ9PT10cnVlKXtlLm5lZWRzUmVuZGVyPXRydWV9cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9yZW5kZXJDYW1lcmFPcGVyYXRpb24kKTt0aGlzLl9yZW5kZXJGcmFtZVN1YnNjcmliZSgpO3ZhciB0PXRoaXMuX3JlbmRlciQucGlwZShoLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZVt0Lm5hbWVdPXQucmVuZGVyO3JldHVybiBlfX0pKTt2YXIgcj10aGlzLl9jbGVhciQucGlwZShoLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZGVsZXRlIGVbdF07cmV0dXJuIGV9fSkpO2wubWVyZ2UodCxyKS5zdWJzY3JpYmUodGhpcy5fcmVuZGVyT3BlcmF0aW9uJCk7dGhpcy5fd2ViR0xSZW5kZXJlciQ9dGhpcy5fcmVuZGVyJC5waXBlKGguZmlyc3QoKSxoLm1hcChmdW5jdGlvbihlKXt2YXIgdD1hLl9kb20uY3JlYXRlRWxlbWVudChcImNhbnZhc1wiLFwibWFwaWxsYXJ5LWpzLWNhbnZhc1wiKTt0LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjt0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCIwXCIpO2kuYXBwZW5kQ2hpbGQodCk7dmFyIHI9by5lbGVtZW50O3ZhciBuPW5ldyBwLldlYkdMUmVuZGVyZXIoe2NhbnZhczp0fSk7bi5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtuLnNldFNpemUoci5vZmZzZXRXaWR0aCxyLm9mZnNldEhlaWdodCk7bi5zZXRDbGVhckNvbG9yKG5ldyBwLkNvbG9yKDIxMDUzNzYpLDEpO24uYXV0b0NsZWFyPWZhbHNlO3JldHVybiBufSksaC5wdWJsaXNoUmVwbGF5KDEpLGgucmVmQ291bnQoKSk7dGhpcy5fd2ViR0xSZW5kZXJlciQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dmFyIG49dGhpcy5fd2ViR0xSZW5kZXJlciQucGlwZShoLmZpcnN0KCksaC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2UubmVlZHNSZW5kZXI9dHJ1ZTtlLnJlbmRlcmVyPXQ7cmV0dXJuIGV9fSkpO3ZhciBzPXRoaXMuX3JlbmRlclNlcnZpY2Uuc2l6ZSQucGlwZShoLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZS5yZW5kZXJlcj09bnVsbCl7cmV0dXJuIGV9ZS5yZW5kZXJlci5zZXRTaXplKHQud2lkdGgsdC5oZWlnaHQpO2UubmVlZHNSZW5kZXI9dHJ1ZTtyZXR1cm4gZX19KSk7dmFyIHU9dGhpcy5fY2xlYXIkLnBpcGUoaC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGUucmVuZGVyZXI9PW51bGwpe3JldHVybiBlfWUubmVlZHNSZW5kZXI9dHJ1ZTtyZXR1cm4gZX19KSk7bC5tZXJnZShuLHMsdSkuc3Vic2NyaWJlKHRoaXMuX3JlbmRlcmVyT3BlcmF0aW9uJCk7dmFyIGM9dGhpcy5fcmVuZGVyQ29sbGVjdGlvbiQucGlwZShoLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkubGVuZ3RoPT09MH0pLGguc2hhcmUoKSk7Yy5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aWYoYS5fcmVuZGVyRnJhbWVTdWJzY3JpcHRpb249PW51bGwpe3JldHVybn1hLl9yZW5kZXJGcmFtZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO2EuX3JlbmRlckZyYW1lU3Vic2NyaXB0aW9uPW51bGw7YS5fcmVuZGVyRnJhbWVTdWJzY3JpYmUoKX0pO2MucGlwZShoLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5uZWVkc1JlbmRlcj10cnVlO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fZXJhc2VyT3BlcmF0aW9uJCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVuZGVyJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIndlYkdMUmVuZGVyZXIkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93ZWJHTFJlbmRlcmVyJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyJC5uZXh0KGUpfTtlLnByb3RvdHlwZS5fcmVuZGVyRnJhbWVTdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3JlbmRlciQucGlwZShoLmZpcnN0KCksaC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2UubmVlZHNSZW5kZXI9dHJ1ZTtyZXR1cm4gZX19KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QuX3JlbmRlckNhbWVyYU9wZXJhdGlvbiQubmV4dChlKX0pO3RoaXMuX3JlbmRlckZyYW1lU3Vic2NyaXB0aW9uPXRoaXMuX3JlbmRlciQucGlwZShoLmZpcnN0KCksaC5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fcmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmFGcmFtZSR9KSkuc3Vic2NyaWJlKHRoaXMuX3JlbmRlckZyYW1lJCl9O3JldHVybiBlfSgpO3IuR0xSZW5kZXJlcj1uO3IuZGVmYXVsdD1ufSx7XCIuLi9SZW5kZXJcIjoyOTcsXCIuLi9VdGlsc1wiOjMwMSxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsdGhyZWU6MjQyfV0sNDQzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlJlbmRlckNhbWVyYT12b2lkIDA7dmFyIG49ZShcInRocmVlXCIpO3ZhciBpPWUoXCIuLi9HZW9cIik7dmFyIHM9ZShcIi4uL1JlbmRlclwiKTt2YXIgdT1lKFwiLi4vU3RhdGVcIik7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9zcGF0aWFsPW5ldyBpLlNwYXRpYWw7dGhpcy5fdmlld3BvcnRDb29yZHM9bmV3IGkuVmlld3BvcnRDb29yZHM7dGhpcy5faW5pdGlhbEZvdj01MDt0aGlzLl9hbHBoYT0tMTt0aGlzLl9yZW5kZXJNb2RlPXI7dGhpcy5fem9vbT0wO3RoaXMuX2ZyYW1lSWQ9LTE7dGhpcy5fY2hhbmdlZD1mYWxzZTt0aGlzLl9jaGFuZ2VkRm9yRnJhbWU9LTE7dGhpcy5fY3VycmVudE5vZGVJZD1udWxsO3RoaXMuX3ByZXZpb3VzTm9kZUlkPW51bGw7dGhpcy5fY3VycmVudFBhbm89ZmFsc2U7dGhpcy5fcHJldmlvdXNQYW5vPWZhbHNlO3RoaXMuX3N0YXRlPW51bGw7dGhpcy5fY3VycmVudFByb2plY3RlZFBvaW50cz1bXTt0aGlzLl9wcmV2aW91c1Byb2plY3RlZFBvaW50cz1bXTt0aGlzLl9jdXJyZW50Rm92PXRoaXMuX2luaXRpYWxGb3Y7dGhpcy5fcHJldmlvdXNGb3Y9dGhpcy5faW5pdGlhbEZvdjt0aGlzLl9jYW1lcmE9bmV3IGkuQ2FtZXJhO3RoaXMuX3BlcnNwZWN0aXZlPW5ldyBuLlBlcnNwZWN0aXZlQ2FtZXJhKHRoaXMuX2luaXRpYWxGb3YsdGhpcy5fY29tcHV0ZUFzcGVjdChlLHQpLC4xNiwxZTQpO3RoaXMuX3BlcnNwZWN0aXZlLm1hdHJpeEF1dG9VcGRhdGU9ZmFsc2U7dGhpcy5fcm90YXRpb249e3BoaTowLHRoZXRhOjB9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFscGhhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHBoYX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNhbWVyYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FtZXJhfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hhbmdlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnJhbWVJZD09PXRoaXMuX2NoYW5nZWRGb3JGcmFtZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZyYW1lSWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZyYW1lSWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwZXJzcGVjdGl2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGVyc3BlY3RpdmV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyZW5kZXJNb2RlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJNb2RlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicm90YXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdGF0aW9ufSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiem9vbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9vbX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmdldFRpbHQ9ZnVuY3Rpb24oKXtyZXR1cm4gOTAtdGhpcy5fc3BhdGlhbC5yYWRUb0RlZyh0aGlzLl9yb3RhdGlvbi50aGV0YSl9O2UucHJvdG90eXBlLmZvdlRvWm9vbT1mdW5jdGlvbihlKXtlPU1hdGgubWluKDkwLE1hdGgubWF4KDAsZSkpO3ZhciB0PXRoaXMuX2NvbXB1dGVDdXJyZW50Rm92KDApO3ZhciByPXRoaXMuX2FscGhhPT09MT90OnRoaXMuX2ludGVycG9sYXRlRm92KHQsdGhpcy5fY29tcHV0ZVByZXZpb3VzRm92KDApLHRoaXMuX2FscGhhKTt2YXIgbj1NYXRoLnRhbihyLzIqTWF0aC5QSS8xODApO3ZhciBpPU1hdGgudGFuKGUvMipNYXRoLlBJLzE4MCk7dmFyIG89TWF0aC5sb2cobi9pKS9NYXRoLmxvZygyKTtyZXR1cm4gb307ZS5wcm90b3R5cGUuc2V0RnJhbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGF0ZTtpZih0LnN0YXRlIT09dGhpcy5fc3RhdGUpe3RoaXMuX3N0YXRlPXQuc3RhdGU7dGhpcy5fY2hhbmdlZD10cnVlfXZhciByPXQuY3VycmVudE5vZGUua2V5O3ZhciBuPSEhdC5wcmV2aW91c05vZGU/dC5wcmV2aW91c05vZGUua2V5Om51bGw7aWYociE9PXRoaXMuX2N1cnJlbnROb2RlSWQpe3RoaXMuX2N1cnJlbnROb2RlSWQ9cjt0aGlzLl9jdXJyZW50UGFubz0hIXQuY3VycmVudFRyYW5zZm9ybS5ncGFubzt0aGlzLl9jdXJyZW50UHJvamVjdGVkUG9pbnRzPXRoaXMuX2NvbXB1dGVQcm9qZWN0ZWRQb2ludHModC5jdXJyZW50VHJhbnNmb3JtKTt0aGlzLl9jaGFuZ2VkPXRydWV9aWYobiE9PXRoaXMuX3ByZXZpb3VzTm9kZUlkKXt0aGlzLl9wcmV2aW91c05vZGVJZD1uO3RoaXMuX3ByZXZpb3VzUGFubz0hIXQucHJldmlvdXNUcmFuc2Zvcm0uZ3Bhbm87dGhpcy5fcHJldmlvdXNQcm9qZWN0ZWRQb2ludHM9dGhpcy5fY29tcHV0ZVByb2plY3RlZFBvaW50cyh0LnByZXZpb3VzVHJhbnNmb3JtKTt0aGlzLl9jaGFuZ2VkPXRydWV9dmFyIGk9dC56b29tO2lmKGkhPT10aGlzLl96b29tKXt0aGlzLl96b29tPWk7dGhpcy5fY2hhbmdlZD10cnVlfWlmKHRoaXMuX2NoYW5nZWQpe3RoaXMuX2N1cnJlbnRGb3Y9dGhpcy5fY29tcHV0ZUN1cnJlbnRGb3YodGhpcy56b29tKTt0aGlzLl9wcmV2aW91c0Zvdj10aGlzLl9jb21wdXRlUHJldmlvdXNGb3YodGhpcy5fem9vbSl9dmFyIG89dC5hbHBoYTtpZih0aGlzLl9jaGFuZ2VkfHxvIT09dGhpcy5fYWxwaGEpe3RoaXMuX2FscGhhPW87dGhpcy5fcGVyc3BlY3RpdmUuZm92PXRoaXMuX3N0YXRlPT09dS5TdGF0ZS5FYXJ0aD82MDp0aGlzLl9pbnRlcnBvbGF0ZUZvdih0aGlzLl9jdXJyZW50Rm92LHRoaXMuX3ByZXZpb3VzRm92LHRoaXMuX2FscGhhKTt0aGlzLl9jaGFuZ2VkPXRydWV9dmFyIGE9dC5jYW1lcmE7aWYodGhpcy5fY2FtZXJhLmRpZmYoYSk+MWUtOSl7dGhpcy5fY2FtZXJhLmNvcHkoYSk7dGhpcy5fcm90YXRpb249dGhpcy5fY29tcHV0ZVJvdGF0aW9uKGEpO3RoaXMuX3BlcnNwZWN0aXZlLnVwLmNvcHkoYS51cCk7dGhpcy5fcGVyc3BlY3RpdmUucG9zaXRpb24uY29weShhLnBvc2l0aW9uKTt0aGlzLl9wZXJzcGVjdGl2ZS5tYXRyaXhBdXRvVXBkYXRlPXRydWU7dGhpcy5fcGVyc3BlY3RpdmUubG9va0F0KGEubG9va2F0KTt0aGlzLl9wZXJzcGVjdGl2ZS5tYXRyaXhBdXRvVXBkYXRlPWZhbHNlO3RoaXMuX3BlcnNwZWN0aXZlLnVwZGF0ZU1hdHJpeCgpO3RoaXMuX3BlcnNwZWN0aXZlLnVwZGF0ZU1hdHJpeFdvcmxkKGZhbHNlKTt0aGlzLl9jaGFuZ2VkPXRydWV9aWYodGhpcy5fY2hhbmdlZCl7dGhpcy5fcGVyc3BlY3RpdmUudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfXRoaXMuX3NldEZyYW1lSWQoZS5pZCl9O2UucHJvdG90eXBlLnNldFJlbmRlck1vZGU9ZnVuY3Rpb24oZSl7dGhpcy5fcmVuZGVyTW9kZT1lO3RoaXMuX3BlcnNwZWN0aXZlLmZvdj10aGlzLl9jb21wdXRlRm92KCk7dGhpcy5fcGVyc3BlY3RpdmUudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO3RoaXMuX2NoYW5nZWQ9dHJ1ZX07ZS5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbihlKXt0aGlzLl9wZXJzcGVjdGl2ZS5hc3BlY3Q9dGhpcy5fY29tcHV0ZUFzcGVjdChlLndpZHRoLGUuaGVpZ2h0KTt0aGlzLl9wZXJzcGVjdGl2ZS5mb3Y9dGhpcy5fY29tcHV0ZUZvdigpO3RoaXMuX3BlcnNwZWN0aXZlLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTt0aGlzLl9jaGFuZ2VkPXRydWV9O2UucHJvdG90eXBlLl9jb21wdXRlQXNwZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT0wPzA6ZS90fTtlLnByb3RvdHlwZS5fY29tcHV0ZUN1cnJlbnRGb3Y9ZnVuY3Rpb24oZSl7aWYodGhpcy5fcGVyc3BlY3RpdmUuYXNwZWN0PT09MCl7cmV0dXJuIDB9aWYoIXRoaXMuX2N1cnJlbnROb2RlSWQpe3JldHVybiB0aGlzLl9pbml0aWFsRm92fXJldHVybiB0aGlzLl9jdXJyZW50UGFubz90aGlzLl95VG9Gb3YoMSxlKTp0aGlzLl9jb21wdXRlVmVydGljYWxGb3YodGhpcy5fY3VycmVudFByb2plY3RlZFBvaW50cyx0aGlzLl9yZW5kZXJNb2RlLGUsdGhpcy5wZXJzcGVjdGl2ZS5hc3BlY3QpfTtlLnByb3RvdHlwZS5fY29tcHV0ZUZvdj1mdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRGb3Y9dGhpcy5fY29tcHV0ZUN1cnJlbnRGb3YodGhpcy5fem9vbSk7dGhpcy5fcHJldmlvdXNGb3Y9dGhpcy5fY29tcHV0ZVByZXZpb3VzRm92KHRoaXMuX3pvb20pO3JldHVybiB0aGlzLl9pbnRlcnBvbGF0ZUZvdih0aGlzLl9jdXJyZW50Rm92LHRoaXMuX3ByZXZpb3VzRm92LHRoaXMuX2FscGhhKX07ZS5wcm90b3R5cGUuX2NvbXB1dGVQcmV2aW91c0Zvdj1mdW5jdGlvbihlKXtpZih0aGlzLl9wZXJzcGVjdGl2ZS5hc3BlY3Q9PT0wKXtyZXR1cm4gMH1pZighdGhpcy5fY3VycmVudE5vZGVJZCl7cmV0dXJuIHRoaXMuX2luaXRpYWxGb3Z9cmV0dXJuIXRoaXMuX3ByZXZpb3VzTm9kZUlkP3RoaXMuX2N1cnJlbnRGb3Y6dGhpcy5fcHJldmlvdXNQYW5vP3RoaXMuX3lUb0ZvdigxLGUpOnRoaXMuX2NvbXB1dGVWZXJ0aWNhbEZvdih0aGlzLl9wcmV2aW91c1Byb2plY3RlZFBvaW50cyx0aGlzLl9yZW5kZXJNb2RlLGUsdGhpcy5wZXJzcGVjdGl2ZS5hc3BlY3QpfTtlLnByb3RvdHlwZS5fY29tcHV0ZVByb2plY3RlZFBvaW50cz1mdW5jdGlvbihlKXt2YXIgdD1bWy41LDBdLFsxLDBdXTt2YXIgcj1bWy41LDBdLFswLC41XV07dmFyIG49MTAwO3JldHVybiBpLkdlby5jb21wdXRlUHJvamVjdGVkUG9pbnRzKGUsdCxyLG4sdGhpcy5fdmlld3BvcnRDb29yZHMpfTtlLnByb3RvdHlwZS5fY29tcHV0ZVJlcXVpcmVkVmVydGljYWxGb3Y9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGgubWF4KGVbMF0vcixlWzFdKTtyZXR1cm4gdGhpcy5feVRvRm92KG4sdCl9O2UucHJvdG90eXBlLl9jb21wdXRlUm90YXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sb29rYXQuY2xvbmUoKS5zdWIoZS5wb3NpdGlvbik7dmFyIHI9ZS51cC5jbG9uZSgpO3ZhciBuPXRoaXMuX3NwYXRpYWwuYXppbXV0aGFsKHQudG9BcnJheSgpLHIudG9BcnJheSgpKTt2YXIgaT1NYXRoLlBJLzItdGhpcy5fc3BhdGlhbC5hbmdsZVRvUGxhbmUodC50b0FycmF5KCksWzAsMCwxXSk7cmV0dXJue3BoaTpuLHRoZXRhOml9fTtlLnByb3RvdHlwZS5fY29tcHV0ZVZlcnRpY2FsRm92PWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXM7dmFyIG89ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX2NvbXB1dGVSZXF1aXJlZFZlcnRpY2FsRm92KGUscixuKX0pO3ZhciBhPXQ9PT1zLlJlbmRlck1vZGUuRmlsbD9NYXRoLm1pbi5hcHBseShNYXRoLG8pKi45OTU6TWF0aC5tYXguYXBwbHkoTWF0aCxvKTtyZXR1cm4gYX07ZS5wcm90b3R5cGUuX3lUb0Zvdj1mdW5jdGlvbihlLHQpe3JldHVybiAyKk1hdGguYXRhbihlL01hdGgucG93KDIsdCkpKjE4MC9NYXRoLlBJfTtlLnByb3RvdHlwZS5faW50ZXJwb2xhdGVGb3Y9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByKmUrKDEtcikqdH07ZS5wcm90b3R5cGUuX3NldEZyYW1lSWQ9ZnVuY3Rpb24oZSl7dGhpcy5fZnJhbWVJZD1lO2lmKHRoaXMuX2NoYW5nZWQpe3RoaXMuX2NoYW5nZWQ9ZmFsc2U7dGhpcy5fY2hhbmdlZEZvckZyYW1lPWV9fTtyZXR1cm4gZX0oKTtyLlJlbmRlckNhbWVyYT1vO3IuZGVmYXVsdD1vfSx7XCIuLi9HZW9cIjoyOTQsXCIuLi9SZW5kZXJcIjoyOTcsXCIuLi9TdGF0ZVwiOjI5OCx0aHJlZToyNDJ9XSw0NDQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuUmVuZGVyTW9kZT12b2lkIDA7dmFyIG47KGZ1bmN0aW9uKGUpe2VbZVtcIkxldHRlcmJveFwiXT0wXT1cIkxldHRlcmJveFwiO2VbZVtcIkZpbGxcIl09MV09XCJGaWxsXCJ9KShuPXIuUmVuZGVyTW9kZXx8KHIuUmVuZGVyTW9kZT17fSkpO3IuZGVmYXVsdD1ufSx7fV0sNDQ1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlJlbmRlclNlcnZpY2U9dm9pZCAwO3ZhciBvPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgYT1lKFwicnhqc1wiKTt2YXIgcz1lKFwiLi4vR2VvXCIpO3ZhciB1PWUoXCIuLi9SZW5kZXJcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpPXRoaXM7dGhpcy5fZWxlbWVudD1lO3RoaXMuX2N1cnJlbnRGcmFtZSQ9dDt0aGlzLl9zcGF0aWFsPW5ldyBzLlNwYXRpYWw7cj1yIT1udWxsP3I6dS5SZW5kZXJNb2RlLkZpbGw7dGhpcy5fcmVzaXplJD1uZXcgYS5TdWJqZWN0O3RoaXMuX3JlbmRlckNhbWVyYU9wZXJhdGlvbiQ9bmV3IGEuU3ViamVjdDt0aGlzLl9zaXplJD1uZXcgYS5CZWhhdmlvclN1YmplY3Qoe2hlaWdodDp0aGlzLl9lbGVtZW50Lm9mZnNldEhlaWdodCx3aWR0aDp0aGlzLl9lbGVtZW50Lm9mZnNldFdpZHRofSk7dGhpcy5fcmVzaXplJC5waXBlKG8ubWFwKGZ1bmN0aW9uKCl7cmV0dXJue2hlaWdodDppLl9lbGVtZW50Lm9mZnNldEhlaWdodCx3aWR0aDppLl9lbGVtZW50Lm9mZnNldFdpZHRofX0pKS5zdWJzY3JpYmUodGhpcy5fc2l6ZSQpO3RoaXMuX3JlbmRlck1vZGUkPW5ldyBhLkJlaGF2aW9yU3ViamVjdChyKTt0aGlzLl9yZW5kZXJDYW1lcmFIb2xkZXIkPXRoaXMuX3JlbmRlckNhbWVyYU9wZXJhdGlvbiQucGlwZShvLnN0YXJ0V2l0aChmdW5jdGlvbihlKXtyZXR1cm4gZX0pLG8uc2NhbihmdW5jdGlvbihlLHQpe3JldHVybiB0KGUpfSwhIW4/bjpuZXcgdS5SZW5kZXJDYW1lcmEodGhpcy5fZWxlbWVudC5vZmZzZXRXaWR0aCx0aGlzLl9lbGVtZW50Lm9mZnNldEhlaWdodCxyKSksby5wdWJsaXNoUmVwbGF5KDEpLG8ucmVmQ291bnQoKSk7dGhpcy5fcmVuZGVyQ2FtZXJhRnJhbWUkPXRoaXMuX2N1cnJlbnRGcmFtZSQucGlwZShvLndpdGhMYXRlc3RGcm9tKHRoaXMuX3JlbmRlckNhbWVyYUhvbGRlciQpLG8udGFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3Iuc2V0RnJhbWUodCl9KSxvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZVsxXX0pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX3JlbmRlckNhbWVyYSQ9dGhpcy5fcmVuZGVyQ2FtZXJhRnJhbWUkLnBpcGUoby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhbmdlZH0pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX2JlYXJpbmckPXRoaXMuX3JlbmRlckNhbWVyYSQucGlwZShvLm1hcChmdW5jdGlvbihlKXt2YXIgdD1pLl9zcGF0aWFsLnJhZFRvRGVnKGkuX3NwYXRpYWwuYXppbXV0aGFsVG9CZWFyaW5nKGUucm90YXRpb24ucGhpKSk7cmV0dXJuIGkuX3NwYXRpYWwud3JhcCh0LDAsMzYwKX0pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX3NpemUkLnBpcGUoby5za2lwKDEpLG8ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLnNldFNpemUodCk7cmV0dXJuIGV9fSkpLnN1YnNjcmliZSh0aGlzLl9yZW5kZXJDYW1lcmFPcGVyYXRpb24kKTt0aGlzLl9yZW5kZXJNb2RlJC5waXBlKG8uc2tpcCgxKSxvLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZS5zZXRSZW5kZXJNb2RlKHQpO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fcmVuZGVyQ2FtZXJhT3BlcmF0aW9uJCk7dGhpcy5fYmVhcmluZyQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fcmVuZGVyQ2FtZXJhSG9sZGVyJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9zaXplJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9yZW5kZXJNb2RlJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9yZW5kZXJDYW1lcmEkLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3RoaXMuX3JlbmRlckNhbWVyYUZyYW1lJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiZWFyaW5nJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmVhcmluZyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJlbGVtZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVzaXplJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzaXplJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNpemUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlbmRlck1vZGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJNb2RlJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlbmRlckNhbWVyYUZyYW1lJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyQ2FtZXJhRnJhbWUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVuZGVyQ2FtZXJhJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyQ2FtZXJhJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3JldHVybiBlfSgpO3IuUmVuZGVyU2VydmljZT1uO3IuZGVmYXVsdD1ufSx7XCIuLi9HZW9cIjoyOTQsXCIuLi9SZW5kZXJcIjoyOTcscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDQ2OltmdW5jdGlvbihlLHQscil7YXJndW1lbnRzWzRdWzMwNV1bMF0uYXBwbHkocixhcmd1bWVudHMpfSx7ZHVwOjMwNX1dLDQ0NzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5GcmFtZUdlbmVyYXRvcj12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2lmKHQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKXt0aGlzLl9jYW5jZWxBbmltYXRpb25GcmFtZT10LmNhbmNlbEFuaW1hdGlvbkZyYW1lLmJpbmQodCk7dGhpcy5fcmVxdWVzdEFuaW1hdGlvbkZyYW1lPXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQodCl9ZWxzZSBpZih0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSl7dGhpcy5fY2FuY2VsQW5pbWF0aW9uRnJhbWU9dC5tb3pDYW5jZWxBbmltYXRpb25GcmFtZS5iaW5kKHQpO3RoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZT10Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHQpfWVsc2UgaWYodC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpe3RoaXMuX2NhbmNlbEFuaW1hdGlvbkZyYW1lPXQud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUuYmluZCh0KTt0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9dC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh0KX1lbHNlIGlmKHQubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpe3RoaXMuX2NhbmNlbEFuaW1hdGlvbkZyYW1lPXQubXNDYW5jZWxBbmltYXRpb25GcmFtZS5iaW5kKHQpO3RoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZT10Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQodCl9ZWxzZSBpZih0Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUpe3RoaXMuX2NhbmNlbEFuaW1hdGlvbkZyYW1lPXQub0NhbmNlbEFuaW1hdGlvbkZyYW1lLmJpbmQodCk7dGhpcy5fcmVxdWVzdEFuaW1hdGlvbkZyYW1lPXQub1JlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHQpfWVsc2V7dGhpcy5fY2FuY2VsQW5pbWF0aW9uRnJhbWU9dC5jbGVhclRpbWVvdXQuYmluZCh0KTt0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2V0VGltZW91dChlLDFlMy82MCl9fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYW5jZWxBbmltYXRpb25GcmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FuY2VsQW5pbWF0aW9uRnJhbWV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3JldHVybiBlfSgpO3IuRnJhbWVHZW5lcmF0b3I9bjtyLmRlZmF1bHQ9bn0se31dLDQ0ODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Sb3RhdGlvbkRlbHRhPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9waGk9ZTt0aGlzLl90aGV0YT10fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBoaVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhpfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcGhpPWV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aGV0YVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGhldGF9LHNldDpmdW5jdGlvbihlKXt0aGlzLl90aGV0YT1lfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNaZXJvXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waGk9PT0wJiZ0aGlzLl90aGV0YT09PTB9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUpe3RoaXMuX3BoaT1lLnBoaTt0aGlzLl90aGV0YT1lLnRoZXRhfTtlLnByb3RvdHlwZS5sZXJwPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcGhpPSgxLXQpKnRoaXMuX3BoaSt0KmUucGhpO3RoaXMuX3RoZXRhPSgxLXQpKnRoaXMuX3RoZXRhK3QqZS50aGV0YX07ZS5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24oZSl7dGhpcy5fcGhpKj1lO3RoaXMuX3RoZXRhKj1lfTtlLnByb3RvdHlwZS50aHJlc2hvbGQ9ZnVuY3Rpb24oZSl7dGhpcy5fcGhpPU1hdGguYWJzKHRoaXMuX3BoaSk+ZT90aGlzLl9waGk6MDt0aGlzLl90aGV0YT1NYXRoLmFicyh0aGlzLl90aGV0YSk+ZT90aGlzLl90aGV0YTowfTtlLnByb3RvdHlwZS5sZW5ndGhTcXVhcmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BoaSp0aGlzLl9waGkrdGhpcy5fdGhldGEqdGhpcy5fdGhldGF9O2UucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fcGhpPTA7dGhpcy5fdGhldGE9MH07cmV0dXJuIGV9KCk7ci5Sb3RhdGlvbkRlbHRhPW47ci5kZWZhdWx0PW59LHt9XSw0NDk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuU3RhdGU9dm9pZCAwO3ZhciBuOyhmdW5jdGlvbihlKXtlW2VbXCJFYXJ0aFwiXT0wXT1cIkVhcnRoXCI7ZVtlW1wiVHJhdmVyc2luZ1wiXT0xXT1cIlRyYXZlcnNpbmdcIjtlW2VbXCJXYWl0aW5nXCJdPTJdPVwiV2FpdGluZ1wiO2VbZVtcIldhaXRpbmdJbnRlcmFjdGl2ZWx5XCJdPTNdPVwiV2FpdGluZ0ludGVyYWN0aXZlbHlcIn0pKG49ci5TdGF0ZXx8KHIuU3RhdGU9e30pKTtyLmRlZmF1bHQ9bn0se31dLDQ1MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TdGF0ZUNvbnRleHQ9dm9pZCAwO3ZhciBuPWUoXCIuLi9TdGF0ZVwiKTt2YXIgaT1lKFwiLi4vR2VvXCIpO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9zdGF0ZT1uZXcgbi5UcmF2ZXJzaW5nU3RhdGUoe2FscGhhOjEsY2FtZXJhOm5ldyBpLkNhbWVyYSxjdXJyZW50SW5kZXg6LTEscmVmZXJlbmNlOnthbHQ6MCxsYXQ6MCxsb246MH0sdHJhamVjdG9yeTpbXSx0cmFuc2l0aW9uTW9kZTplPT1udWxsP24uVHJhbnNpdGlvbk1vZGUuRGVmYXVsdDplLHpvb206MH0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX3N0YXRlIGluc3RhbmNlb2Ygbi5FYXJ0aFN0YXRlKXtyZXR1cm4gbi5TdGF0ZS5FYXJ0aH1lbHNlIGlmKHRoaXMuX3N0YXRlIGluc3RhbmNlb2Ygbi5UcmF2ZXJzaW5nU3RhdGUpe3JldHVybiBuLlN0YXRlLlRyYXZlcnNpbmd9ZWxzZSBpZih0aGlzLl9zdGF0ZSBpbnN0YW5jZW9mIG4uV2FpdGluZ1N0YXRlKXtyZXR1cm4gbi5TdGF0ZS5XYWl0aW5nfWVsc2UgaWYodGhpcy5fc3RhdGUgaW5zdGFuY2VvZiBuLkludGVyYWN0aXZlV2FpdGluZ1N0YXRlKXtyZXR1cm4gbi5TdGF0ZS5XYWl0aW5nSW50ZXJhY3RpdmVseX10aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXRlXCIpfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVmZXJlbmNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5yZWZlcmVuY2V9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhbHBoYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuYWxwaGF9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYW1lcmFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmNhbWVyYX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInpvb21cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLnpvb219LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50Tm9kZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuY3VycmVudE5vZGV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwcmV2aW91c05vZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLnByZXZpb3VzTm9kZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImN1cnJlbnRDYW1lcmFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmN1cnJlbnRDYW1lcmF9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50VHJhbnNmb3JtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5jdXJyZW50VHJhbnNmb3JtfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicHJldmlvdXNUcmFuc2Zvcm1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLnByZXZpb3VzVHJhbnNmb3JtfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidHJhamVjdG9yeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUudHJhamVjdG9yeX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImN1cnJlbnRJbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuY3VycmVudEluZGV4fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGFzdE5vZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLnRyYWplY3RvcnlbdGhpcy5fc3RhdGUudHJhamVjdG9yeS5sZW5ndGgtMV19LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJub2Rlc0FoZWFkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS50cmFqZWN0b3J5Lmxlbmd0aC0xLXRoaXMuX3N0YXRlLmN1cnJlbnRJbmRleH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdGlvbmxlc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLm1vdGlvbmxlc3N9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5lYXJ0aD1mdW5jdGlvbigpe3RoaXMuX3N0YXRlPXRoaXMuX3N0YXRlLmVhcnRoKCl9O2UucHJvdG90eXBlLnRyYXZlcnNlPWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGU9dGhpcy5fc3RhdGUudHJhdmVyc2UoKX07ZS5wcm90b3R5cGUud2FpdD1mdW5jdGlvbigpe3RoaXMuX3N0YXRlPXRoaXMuX3N0YXRlLndhaXQoKX07ZS5wcm90b3R5cGUud2FpdEludGVyYWN0aXZlbHk9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZT10aGlzLl9zdGF0ZS53YWl0SW50ZXJhY3RpdmVseSgpfTtlLnByb3RvdHlwZS5nZXRDZW50ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZ2V0Q2VudGVyKCl9O2UucHJvdG90eXBlLnNldENlbnRlcj1mdW5jdGlvbihlKXt0aGlzLl9zdGF0ZS5zZXRDZW50ZXIoZSl9O2UucHJvdG90eXBlLnNldFpvb209ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUuc2V0Wm9vbShlKX07ZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLnVwZGF0ZShlKX07ZS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLmFwcGVuZChlKX07ZS5wcm90b3R5cGUucHJlcGVuZD1mdW5jdGlvbihlKXt0aGlzLl9zdGF0ZS5wcmVwZW5kKGUpfTtlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUucmVtb3ZlKGUpfTtlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX3N0YXRlLmNsZWFyKCl9O2UucHJvdG90eXBlLmNsZWFyUHJpb3I9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZS5jbGVhclByaW9yKCl9O2UucHJvdG90eXBlLmN1dD1mdW5jdGlvbigpe3RoaXMuX3N0YXRlLmN1dCgpfTtlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUuc2V0KGUpfTtlLnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUucm90YXRlKGUpfTtlLnByb3RvdHlwZS5yb3RhdGVVbmJvdW5kZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUucm90YXRlVW5ib3VuZGVkKGUpfTtlLnByb3RvdHlwZS5yb3RhdGVXaXRob3V0SW5lcnRpYT1mdW5jdGlvbihlKXt0aGlzLl9zdGF0ZS5yb3RhdGVXaXRob3V0SW5lcnRpYShlKX07ZS5wcm90b3R5cGUucm90YXRlQmFzaWM9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUucm90YXRlQmFzaWMoZSl9O2UucHJvdG90eXBlLnJvdGF0ZUJhc2ljVW5ib3VuZGVkPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLnJvdGF0ZUJhc2ljVW5ib3VuZGVkKGUpfTtlLnByb3RvdHlwZS5yb3RhdGVCYXNpY1dpdGhvdXRJbmVydGlhPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLnJvdGF0ZUJhc2ljV2l0aG91dEluZXJ0aWEoZSl9O2UucHJvdG90eXBlLnJvdGF0ZVRvQmFzaWM9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUucm90YXRlVG9CYXNpYyhlKX07ZS5wcm90b3R5cGUubW92ZT1mdW5jdGlvbihlKXt0aGlzLl9zdGF0ZS5tb3ZlKGUpfTtlLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUubW92ZVRvKGUpfTtlLnByb3RvdHlwZS56b29tSW49ZnVuY3Rpb24oZSx0KXt0aGlzLl9zdGF0ZS56b29tSW4oZSx0KX07ZS5wcm90b3R5cGUuc2V0U3BlZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUuc2V0U3BlZWQoZSl9O2UucHJvdG90eXBlLnNldFRyYW5zaXRpb25Nb2RlPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLnNldFRyYW5zaXRpb25Nb2RlKGUpfTtlLnByb3RvdHlwZS5kb2xseT1mdW5jdGlvbihlKXt0aGlzLl9zdGF0ZS5kb2xseShlKX07ZS5wcm90b3R5cGUub3JiaXQ9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGUub3JiaXQoZSl9O2UucHJvdG90eXBlLnRydWNrPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXRlLnRydWNrKGUpfTtyZXR1cm4gZX0oKTtyLlN0YXRlQ29udGV4dD1vfSx7XCIuLi9HZW9cIjoyOTQsXCIuLi9TdGF0ZVwiOjI5OH1dLDQ1MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5TdGF0ZVNlcnZpY2U9dm9pZCAwO3ZhciBpPWUoXCJyeGpzXCIpO3ZhciBvPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgYT1lKFwiLi4vU3RhdGVcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7dGhpcy5fYXBwZW5kTm9kZSQ9bmV3IGkuU3ViamVjdDt0aGlzLl9zdGFydCQ9bmV3IGkuU3ViamVjdDt0aGlzLl9mcmFtZSQ9bmV3IGkuU3ViamVjdDt0aGlzLl9mcHNTYW1wbGVSYXRlPTMwO3RoaXMuX2NvbnRleHRPcGVyYXRpb24kPW5ldyBpLkJlaGF2aW9yU3ViamVjdChmdW5jdGlvbihlKXtyZXR1cm4gZX0pO3RoaXMuX2NvbnRleHQkPXRoaXMuX2NvbnRleHRPcGVyYXRpb24kLnBpcGUoby5zY2FuKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQoZSl9LG5ldyBhLlN0YXRlQ29udGV4dChlKSksby5wdWJsaXNoUmVwbGF5KDEpLG8ucmVmQ291bnQoKSk7dGhpcy5fc3RhdGUkPXRoaXMuX2NvbnRleHQkLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGV9KSxvLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksby5wdWJsaXNoUmVwbGF5KDEpLG8ucmVmQ291bnQoKSk7dGhpcy5fZnBzJD10aGlzLl9zdGFydCQucGlwZShvLnN3aXRjaE1hcChmdW5jdGlvbigpe3JldHVybiB0Ll9mcmFtZSQucGlwZShvLmJ1ZmZlckNvdW50KDEsdC5fZnBzU2FtcGxlUmF0ZSksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9KSxvLnBhaXJ3aXNlKCksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgubWF4KDIwLDFlMyp0Ll9mcHNTYW1wbGVSYXRlLyhlWzFdLWVbMF0pKX0pLG8uc3RhcnRXaXRoKDYwKSl9KSxvLnNoYXJlKCkpO3RoaXMuX2N1cnJlbnRTdGF0ZSQ9dGhpcy5fZnJhbWUkLnBpcGUoby53aXRoTGF0ZXN0RnJvbSh0aGlzLl9mcHMkLHRoaXMuX2NvbnRleHQkLGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm5bZSx0LHJdfSksby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMl0uY3VycmVudE5vZGUhPW51bGx9KSxvLnRhcChmdW5jdGlvbihlKXtlWzJdLnVwZGF0ZShlWzFdKX0pLG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybntmcHM6ZVsxXSxpZDplWzBdLHN0YXRlOmVbMl19fSksby5zaGFyZSgpKTt0aGlzLl9sYXN0U3RhdGUkPXRoaXMuX2N1cnJlbnRTdGF0ZSQucGlwZShvLnB1Ymxpc2hSZXBsYXkoMSksby5yZWZDb3VudCgpKTt2YXIgcj10aGlzLl9jdXJyZW50U3RhdGUkLnBpcGUoby5kaXN0aW5jdFVudGlsQ2hhbmdlZCh1bmRlZmluZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudE5vZGUua2V5fSksby5wdWJsaXNoUmVwbGF5KDEpLG8ucmVmQ291bnQoKSk7dmFyIG49bmV3IGkuU3ViamVjdDtyLnN1YnNjcmliZShuKTt0aGlzLl9jdXJyZW50S2V5JD1uZXcgaS5CZWhhdmlvclN1YmplY3QobnVsbCk7bi5waXBlKG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmN1cnJlbnROb2RlLmtleX0pKS5zdWJzY3JpYmUodGhpcy5fY3VycmVudEtleSQpO3RoaXMuX2N1cnJlbnROb2RlJD1uLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudE5vZGV9KSxvLnB1Ymxpc2hSZXBsYXkoMSksby5yZWZDb3VudCgpKTt0aGlzLl9jdXJyZW50Q2FtZXJhJD1uLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudENhbWVyYX0pLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX2N1cnJlbnRUcmFuc2Zvcm0kPW4ucGlwZShvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5jdXJyZW50VHJhbnNmb3JtfSksby5wdWJsaXNoUmVwbGF5KDEpLG8ucmVmQ291bnQoKSk7dGhpcy5fcmVmZXJlbmNlJD1uLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUucmVmZXJlbmNlfSksby5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3JldHVybiBlLmxhdD09PXQubGF0JiZlLmxvbj09PXQubG9ufSxmdW5jdGlvbihlKXtyZXR1cm57bGF0OmUubGF0LGxvbjplLmxvbn19KSxvLnB1Ymxpc2hSZXBsYXkoMSksby5yZWZDb3VudCgpKTt0aGlzLl9jdXJyZW50Tm9kZUV4dGVybmFsJD1yLnBpcGUoby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY3VycmVudE5vZGV9KSxvLnB1Ymxpc2hSZXBsYXkoMSksby5yZWZDb3VudCgpKTt0aGlzLl9hcHBlbmROb2RlJC5waXBlKG8ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtlLmFwcGVuZChbdF0pO3JldHVybiBlfX0pKS5zdWJzY3JpYmUodGhpcy5fY29udGV4dE9wZXJhdGlvbiQpO3RoaXMuX2luTW90aW9uT3BlcmF0aW9uJD1uZXcgaS5TdWJqZWN0O3IucGlwZShvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdHJ1ZX0pKS5zdWJzY3JpYmUodGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kKTt0aGlzLl9pbk1vdGlvbk9wZXJhdGlvbiQucGlwZShvLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxvLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fY3VycmVudFN0YXRlJC5waXBlKG8uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm5vZGVzQWhlYWQ9PT0wfSksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuW2Uuc3RhdGUuY2FtZXJhLmNsb25lKCksZS5zdGF0ZS56b29tXX0pLG8ucGFpcndpc2UoKSxvLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdWzBdO3ZhciByPWVbMV1bMF07dmFyIG49ZVswXVsxXTt2YXIgaT1lWzFdWzFdO3JldHVybiB0LmRpZmYocik+MWUtNXx8TWF0aC5hYnMobi1pKT4xZS01fSksby5maXJzdChmdW5jdGlvbihlKXtyZXR1cm4hZX0pKX0pKS5zdWJzY3JpYmUodGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kKTt0aGlzLl9pbk1vdGlvbiQ9dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLnBpcGUoby5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX2luVHJhbnNsYXRpb25PcGVyYXRpb24kPW5ldyBpLlN1YmplY3Q7ci5waXBlKG8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0cnVlfSkpLnN1YnNjcmliZSh0aGlzLl9pblRyYW5zbGF0aW9uT3BlcmF0aW9uJCk7dGhpcy5faW5UcmFuc2xhdGlvbk9wZXJhdGlvbiQucGlwZShvLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksby5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxvLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fY3VycmVudFN0YXRlJC5waXBlKG8uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm5vZGVzQWhlYWQ9PT0wfSksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuY2FtZXJhLnBvc2l0aW9uLmNsb25lKCl9KSxvLnBhaXJ3aXNlKCksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF0uZGlzdGFuY2VUb1NxdWFyZWQoZVsxXSkhPT0wfSksby5maXJzdChmdW5jdGlvbihlKXtyZXR1cm4hZX0pKX0pKS5zdWJzY3JpYmUodGhpcy5faW5UcmFuc2xhdGlvbk9wZXJhdGlvbiQpO3RoaXMuX2luVHJhbnNsYXRpb24kPXRoaXMuX2luVHJhbnNsYXRpb25PcGVyYXRpb24kLnBpcGUoby5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX3N0YXRlJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9jdXJyZW50Tm9kZSQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fY3VycmVudENhbWVyYSQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fY3VycmVudFRyYW5zZm9ybSQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fcmVmZXJlbmNlJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9jdXJyZW50Tm9kZUV4dGVybmFsJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9sYXN0U3RhdGUkLnN1YnNjcmliZShmdW5jdGlvbigpe30pO3RoaXMuX2luTW90aW9uJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9pblRyYW5zbGF0aW9uJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9mcmFtZUlkPW51bGw7dGhpcy5fZnJhbWVHZW5lcmF0b3I9bmV3IGEuRnJhbWVHZW5lcmF0b3Iod2luZG93KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50U3RhdGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50U3RhdGUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY3VycmVudE5vZGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50Tm9kZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50S2V5JFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudEtleSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50Tm9kZUV4dGVybmFsJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudE5vZGVFeHRlcm5hbCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50Q2FtZXJhJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudENhbWVyYSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50VHJhbnNmb3JtJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRyYW5zZm9ybSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzdGF0ZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlZmVyZW5jZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlZmVyZW5jZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpbk1vdGlvbiRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luTW90aW9uJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImluVHJhbnNsYXRpb24kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pblRyYW5zbGF0aW9uJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFwcGVuZE5vZGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBlbmROb2RlJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmVhcnRoPWZ1bmN0aW9uKCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLmVhcnRoKCl9KX07ZS5wcm90b3R5cGUudHJhdmVyc2U9ZnVuY3Rpb24oKXt0aGlzLl9pbk1vdGlvbk9wZXJhdGlvbiQubmV4dCh0cnVlKTt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2UudHJhdmVyc2UoKX0pfTtlLnByb3RvdHlwZS53YWl0PWZ1bmN0aW9uKCl7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLndhaXQoKX0pfTtlLnByb3RvdHlwZS53YWl0SW50ZXJhY3RpdmVseT1mdW5jdGlvbigpe3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS53YWl0SW50ZXJhY3RpdmVseSgpfSl9O2UucHJvdG90eXBlLmFwcGVuZE5vZGVzPWZ1bmN0aW9uKHQpe3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5hcHBlbmQodCl9KX07ZS5wcm90b3R5cGUucHJlcGVuZE5vZGVzPWZ1bmN0aW9uKHQpe3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5wcmVwZW5kKHQpfSl9O2UucHJvdG90eXBlLnJlbW92ZU5vZGVzPWZ1bmN0aW9uKHQpe3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5yZW1vdmUodCl9KX07ZS5wcm90b3R5cGUuY2xlYXJOb2Rlcz1mdW5jdGlvbigpe3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5jbGVhcigpfSl9O2UucHJvdG90eXBlLmNsZWFyUHJpb3JOb2Rlcz1mdW5jdGlvbigpe3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5jbGVhclByaW9yKCl9KX07ZS5wcm90b3R5cGUuY3V0Tm9kZXM9ZnVuY3Rpb24oKXt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2UuY3V0KCl9KX07ZS5wcm90b3R5cGUuc2V0Tm9kZXM9ZnVuY3Rpb24odCl7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnNldCh0KX0pfTtlLnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnJvdGF0ZSh0KX0pfTtlLnByb3RvdHlwZS5yb3RhdGVVbmJvdW5kZWQ9ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnJvdGF0ZVVuYm91bmRlZCh0KX0pfTtlLnByb3RvdHlwZS5yb3RhdGVXaXRob3V0SW5lcnRpYT1mdW5jdGlvbih0KXt0aGlzLl9pbk1vdGlvbk9wZXJhdGlvbiQubmV4dCh0cnVlKTt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2Uucm90YXRlV2l0aG91dEluZXJ0aWEodCl9KX07ZS5wcm90b3R5cGUucm90YXRlQmFzaWM9ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnJvdGF0ZUJhc2ljKHQpfSl9O2UucHJvdG90eXBlLnJvdGF0ZUJhc2ljVW5ib3VuZGVkPWZ1bmN0aW9uKHQpe3RoaXMuX2luTW90aW9uT3BlcmF0aW9uJC5uZXh0KHRydWUpO3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5yb3RhdGVCYXNpY1VuYm91bmRlZCh0KX0pfTtlLnByb3RvdHlwZS5yb3RhdGVCYXNpY1dpdGhvdXRJbmVydGlhPWZ1bmN0aW9uKHQpe3RoaXMuX2luTW90aW9uT3BlcmF0aW9uJC5uZXh0KHRydWUpO3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS5yb3RhdGVCYXNpY1dpdGhvdXRJbmVydGlhKHQpfSl9O2UucHJvdG90eXBlLnJvdGF0ZVRvQmFzaWM9ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnJvdGF0ZVRvQmFzaWModCl9KX07ZS5wcm90b3R5cGUubW92ZT1mdW5jdGlvbih0KXt0aGlzLl9pbk1vdGlvbk9wZXJhdGlvbiQubmV4dCh0cnVlKTt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2UubW92ZSh0KX0pfTtlLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLm1vdmVUbyh0KX0pfTtlLnByb3RvdHlwZS5kb2xseT1mdW5jdGlvbih0KXt0aGlzLl9pbk1vdGlvbk9wZXJhdGlvbiQubmV4dCh0cnVlKTt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2UuZG9sbHkodCl9KX07ZS5wcm90b3R5cGUub3JiaXQ9ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLm9yYml0KHQpfSl9O2UucHJvdG90eXBlLnRydWNrPWZ1bmN0aW9uKHQpe3RoaXMuX2luTW90aW9uT3BlcmF0aW9uJC5uZXh0KHRydWUpO3RoaXMuX2ludm9rZUNvbnRleHRPcGVyYXRpb24oZnVuY3Rpb24oZSl7ZS50cnVjayh0KX0pfTtlLnByb3RvdHlwZS56b29tSW49ZnVuY3Rpb24odCxyKXt0aGlzLl9pbk1vdGlvbk9wZXJhdGlvbiQubmV4dCh0cnVlKTt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2Uuem9vbUluKHQscil9KX07ZS5wcm90b3R5cGUuZ2V0Q2VudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhc3RTdGF0ZSQucGlwZShvLmZpcnN0KCksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUuZ2V0Q2VudGVyKCl9KSl9O2UucHJvdG90eXBlLmdldFpvb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFzdFN0YXRlJC5waXBlKG8uZmlyc3QoKSxvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS56b29tfSkpfTtlLnByb3RvdHlwZS5zZXRDZW50ZXI9ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnNldENlbnRlcih0KX0pfTtlLnByb3RvdHlwZS5zZXRTcGVlZD1mdW5jdGlvbih0KXt0aGlzLl9pbnZva2VDb250ZXh0T3BlcmF0aW9uKGZ1bmN0aW9uKGUpe2Uuc2V0U3BlZWQodCl9KX07ZS5wcm90b3R5cGUuc2V0VHJhbnNpdGlvbk1vZGU9ZnVuY3Rpb24odCl7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnNldFRyYW5zaXRpb25Nb2RlKHQpfSl9O2UucHJvdG90eXBlLnNldFpvb209ZnVuY3Rpb24odCl7dGhpcy5faW5Nb3Rpb25PcGVyYXRpb24kLm5leHQodHJ1ZSk7dGhpcy5faW52b2tlQ29udGV4dE9wZXJhdGlvbihmdW5jdGlvbihlKXtlLnNldFpvb20odCl9KX07ZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9mcmFtZUlkPT1udWxsKXt0aGlzLl9zdGFydCQubmV4dChudWxsKTt0aGlzLl9mcmFtZUlkPXRoaXMuX2ZyYW1lR2VuZXJhdG9yLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9mcmFtZS5iaW5kKHRoaXMpKTt0aGlzLl9mcmFtZSQubmV4dCh0aGlzLl9mcmFtZUlkKX19O2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZih0aGlzLl9mcmFtZUlkIT1udWxsKXt0aGlzLl9mcmFtZUdlbmVyYXRvci5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9mcmFtZUlkKTt0aGlzLl9mcmFtZUlkPW51bGx9fTtlLnByb3RvdHlwZS5faW52b2tlQ29udGV4dE9wZXJhdGlvbj1mdW5jdGlvbih0KXt0aGlzLl9jb250ZXh0T3BlcmF0aW9uJC5uZXh0KGZ1bmN0aW9uKGUpe3QoZSk7cmV0dXJuIGV9KX07ZS5wcm90b3R5cGUuX2ZyYW1lPWZ1bmN0aW9uKGUpe3RoaXMuX2ZyYW1lSWQ9dGhpcy5fZnJhbWVHZW5lcmF0b3IucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2ZyYW1lLmJpbmQodGhpcykpO3RoaXMuX2ZyYW1lJC5uZXh0KHRoaXMuX2ZyYW1lSWQpfTtyZXR1cm4gZX0oKTtyLlN0YXRlU2VydmljZT1ufSx7XCIuLi9TdGF0ZVwiOjI5OCxyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDF9XSw0NTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuVHJhbnNpdGlvbk1vZGU9dm9pZCAwO3ZhciBuOyhmdW5jdGlvbihlKXtlW2VbXCJEZWZhdWx0XCJdPTBdPVwiRGVmYXVsdFwiO2VbZVtcIkluc3RhbnRhbmVvdXNcIl09MV09XCJJbnN0YW50YW5lb3VzXCJ9KShuPXIuVHJhbnNpdGlvbk1vZGV8fChyLlRyYW5zaXRpb25Nb2RlPXt9KSk7ci5kZWZhdWx0PW59LHt9XSw0NTM6W2Z1bmN0aW9uKGUsdCxyKXthcmd1bWVudHNbNF1bMzA1XVswXS5hcHBseShyLGFyZ3VtZW50cyl9LHtkdXA6MzA1fV0sNDU0OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5FYXJ0aFN0YXRlPXZvaWQgMDt2YXIgdT1lKFwidGhyZWVcIik7dmFyIG89ZShcIi4uLy4uL1N0YXRlXCIpO3ZhciBuPWZ1bmN0aW9uKG4pe2koZSxuKTtmdW5jdGlvbiBlKGUpe3ZhciB0PW4uY2FsbCh0aGlzLGUpfHx0aGlzO3ZhciByPXQuX2NhbWVyYS5sb29rYXQuY2xvbmUoKS5zdWIodC5fY2FtZXJhLnBvc2l0aW9uKS5ub3JtYWxpemUoKTt0Ll9jYW1lcmEubG9va2F0LmNvcHkodC5fY2FtZXJhLnBvc2l0aW9uKTt0Ll9jYW1lcmEucG9zaXRpb24uej1lLmNhbWVyYS5wb3NpdGlvbi56KzIwO3QuX2NhbWVyYS5wb3NpdGlvbi54PWUuY2FtZXJhLnBvc2l0aW9uLngtMTYqci54O3QuX2NhbWVyYS5wb3NpdGlvbi55PWUuY2FtZXJhLnBvc2l0aW9uLnktMTYqci55O3QuX2NhbWVyYS51cC5zZXQoMCwwLDEpO3JldHVybiB0fWUucHJvdG90eXBlLnRyYXZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLlRyYXZlcnNpbmdTdGF0ZSh0aGlzKX07ZS5wcm90b3R5cGUud2FpdD1mdW5jdGlvbigpe3JldHVybiBuZXcgby5XYWl0aW5nU3RhdGUodGhpcyl9O2UucHJvdG90eXBlLndhaXRJbnRlcmFjdGl2ZWx5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLkludGVyYWN0aXZlV2FpdGluZ1N0YXRlKHRoaXMpfTtlLnByb3RvdHlwZS5kb2xseT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jYW1lcmE7dmFyIHI9KG5ldyB1LlZlY3RvcjMpLmNvcHkodC5wb3NpdGlvbikuc3ViKHQubG9va2F0KTt2YXIgbj1yLmxlbmd0aCgpO3ZhciBpPW4qTWF0aC5wb3coMiwtZSk7dmFyIG89TWF0aC5tYXgoMSxNYXRoLm1pbihpLDFlMykpO3Iubm9ybWFsaXplKCk7ci5tdWx0aXBseVNjYWxhcihvKTt0LnBvc2l0aW9uLmNvcHkodC5sb29rYXQpLmFkZChyKX07ZS5wcm90b3R5cGUub3JiaXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY2FtZXJhO3ZhciByPShuZXcgdS5RdWF0ZXJuaW9uKS5zZXRGcm9tVW5pdFZlY3RvcnModC51cCxuZXcgdS5WZWN0b3IzKDAsMCwxKSk7dmFyIG49ci5jbG9uZSgpLmludmVyc2UoKTt2YXIgaT1uZXcgdS5WZWN0b3IzO2kuY29weSh0LnBvc2l0aW9uKS5zdWIodC5sb29rYXQpO2kuYXBwbHlRdWF0ZXJuaW9uKHIpO3ZhciBvPWkubGVuZ3RoKCk7dmFyIGE9TWF0aC5hdGFuMihpLnksaS54KTthKz1lLnBoaTt2YXIgcz1NYXRoLmF0YW4yKE1hdGguc3FydChpLngqaS54K2kueSppLnkpLGkueik7cys9ZS50aGV0YTtzPU1hdGgubWF4KC4xLE1hdGgubWluKE1hdGguUEktLjEscykpO2kueD1NYXRoLnNpbihzKSpNYXRoLmNvcyhhKTtpLnk9TWF0aC5zaW4ocykqTWF0aC5zaW4oYSk7aS56PU1hdGguY29zKHMpO2kuYXBwbHlRdWF0ZXJuaW9uKG4pO3QucG9zaXRpb24uY29weSh0Lmxvb2thdCkuYWRkKGkubXVsdGlwbHlTY2FsYXIobykpfTtlLnByb3RvdHlwZS50cnVjaz1mdW5jdGlvbihlKXt0aGlzLl9jYW1lcmEucG9zaXRpb24uYWRkKChuZXcgdS5WZWN0b3IzKS5mcm9tQXJyYXkoZSkpO3RoaXMuX2NhbWVyYS5sb29rYXQuYWRkKChuZXcgdS5WZWN0b3IzKS5mcm9tQXJyYXkoZSkpfTtlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt9O3JldHVybiBlfShvLlN0YXRlQmFzZSk7ci5FYXJ0aFN0YXRlPW47ci5kZWZhdWx0PW59LHtcIi4uLy4uL1N0YXRlXCI6Mjk4LHRocmVlOjI0Mn1dLDQ1NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7bj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHIpKWVbcl09dFtyXX07cmV0dXJuIG4oZSx0KX07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7bihlLHQpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9ZS5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuSW50ZXJhY3RpdmVTdGF0ZUJhc2U9dm9pZCAwO3ZhciBwPWUoXCJ0aHJlZVwiKTt2YXIgaT1lKFwiLi4vLi4vU3RhdGVcIik7dmFyIG89ZnVuY3Rpb24ocil7bihlLHIpO2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSl8fHRoaXM7dC5fYW5pbWF0aW9uU3BlZWQ9MS80MDt0Ll9yb3RhdGlvbkRlbHRhPW5ldyBpLlJvdGF0aW9uRGVsdGEoMCwwKTt0Ll9yZXF1ZXN0ZWRSb3RhdGlvbkRlbHRhPW51bGw7dC5fYmFzaWNSb3RhdGlvbj1bMCwwXTt0Ll9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uPW51bGw7dC5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvblVuYm91bmRlZD1udWxsO3QuX3JvdGF0aW9uQWNjZWxlcmF0aW9uPS44Njt0Ll9yb3RhdGlvbkluY3JlYXNlQWxwaGE9Ljk3O3QuX3JvdGF0aW9uRGVjcmVhc2VBbHBoYT0uOTt0Ll9yb3RhdGlvblRocmVzaG9sZD0uMDAxO3QuX3VuYm91bmRlZFJvdGF0aW9uQWxwaGE9Ljg7dC5fZGVzaXJlZFpvb209ZS56b29tO3QuX21pblpvb209MDt0Ll9tYXhab29tPTM7dC5fbG9va2F0RGVwdGg9MTA7dC5fZGVzaXJlZExvb2thdD1udWxsO3QuX2Rlc2lyZWRDZW50ZXI9bnVsbDtyZXR1cm4gdH1lLnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY3VycmVudE5vZGU9PW51bGwpe3JldHVybn1pZihlLnBoaT09PTAmJmUudGhldGE9PT0wKXtyZXR1cm59dGhpcy5fZGVzaXJlZFpvb209dGhpcy5fem9vbTt0aGlzLl9kZXNpcmVkTG9va2F0PW51bGw7dGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvbj1udWxsO2lmKHRoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGEhPW51bGwpe3RoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGEucGhpPXRoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGEucGhpK2UucGhpO3RoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGEudGhldGE9dGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YS50aGV0YStlLnRoZXRhfWVsc2V7dGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YT1uZXcgaS5Sb3RhdGlvbkRlbHRhKGUucGhpLGUudGhldGEpfX07ZS5wcm90b3R5cGUucm90YXRlVW5ib3VuZGVkPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2N1cnJlbnROb2RlPT1udWxsKXtyZXR1cm59dGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvbj1udWxsO3RoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGE9bnVsbDt0aGlzLl9hcHBseVJvdGF0aW9uKGUsdGhpcy5fY3VycmVudENhbWVyYSk7dGhpcy5fYXBwbHlSb3RhdGlvbihlLHRoaXMuX3ByZXZpb3VzQ2FtZXJhKTtpZighdGhpcy5fZGVzaXJlZExvb2thdCl7cmV0dXJufXZhciB0PShuZXcgcC5RdWF0ZXJuaW9uKS5zZXRGcm9tVW5pdFZlY3RvcnModGhpcy5fY3VycmVudENhbWVyYS51cCxuZXcgcC5WZWN0b3IzKDAsMCwxKSk7dmFyIHI9dC5jbG9uZSgpLmludmVyc2UoKTt2YXIgbj0obmV3IHAuVmVjdG9yMykuY29weSh0aGlzLl9kZXNpcmVkTG9va2F0KS5zdWIodGhpcy5fY2FtZXJhLnBvc2l0aW9uKS5hcHBseVF1YXRlcm5pb24odCk7dmFyIGk9bi5sZW5ndGgoKTt2YXIgbz1NYXRoLmF0YW4yKG4ueSxuLngpO28rPWUucGhpO3ZhciBhPU1hdGguYXRhbjIoTWF0aC5zcXJ0KG4ueCpuLngrbi55Km4ueSksbi56KTthKz1lLnRoZXRhO2E9TWF0aC5tYXgoLjEsTWF0aC5taW4oTWF0aC5QSS0uMSxhKSk7bi54PU1hdGguc2luKGEpKk1hdGguY29zKG8pO24ueT1NYXRoLnNpbihhKSpNYXRoLnNpbihvKTtuLno9TWF0aC5jb3MoYSk7bi5hcHBseVF1YXRlcm5pb24ocik7dGhpcy5fZGVzaXJlZExvb2thdC5jb3B5KHRoaXMuX2NhbWVyYS5wb3NpdGlvbikuYWRkKG4ubXVsdGlwbHlTY2FsYXIoaSkpfTtlLnByb3RvdHlwZS5yb3RhdGVXaXRob3V0SW5lcnRpYT1mdW5jdGlvbihlKXtpZih0aGlzLl9jdXJyZW50Tm9kZT09bnVsbCl7cmV0dXJufXRoaXMuX2Rlc2lyZWRab29tPXRoaXMuX3pvb207dGhpcy5fZGVzaXJlZExvb2thdD1udWxsO3RoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb249bnVsbDt0aGlzLl9yZXF1ZXN0ZWRSb3RhdGlvbkRlbHRhPW51bGw7dmFyIHQ9TWF0aC5QSS8oMTAqTWF0aC5wb3coMix0aGlzLl96b29tKSk7dmFyIHI9e3BoaTp0aGlzLl9zcGF0aWFsLmNsYW1wKGUucGhpLC10LHQpLHRoZXRhOnRoaXMuX3NwYXRpYWwuY2xhbXAoZS50aGV0YSwtdCx0KX07dGhpcy5fYXBwbHlSb3RhdGlvbihyLHRoaXMuX2N1cnJlbnRDYW1lcmEpO3RoaXMuX2FwcGx5Um90YXRpb24ocix0aGlzLl9wcmV2aW91c0NhbWVyYSl9O2UucHJvdG90eXBlLnJvdGF0ZUJhc2ljPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2N1cnJlbnROb2RlPT1udWxsKXtyZXR1cm59dGhpcy5fZGVzaXJlZFpvb209dGhpcy5fem9vbTt0aGlzLl9kZXNpcmVkTG9va2F0PW51bGw7dGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YT1udWxsO2lmKHRoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb24hPW51bGwpe3RoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb25bMF0rPWVbMF07dGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvblsxXSs9ZVsxXTt2YXIgdD0uMDUvTWF0aC5wb3coMix0aGlzLl96b29tKTt0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uWzBdPXRoaXMuX3NwYXRpYWwuY2xhbXAodGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvblswXSwtdCx0KTt0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uWzFdPXRoaXMuX3NwYXRpYWwuY2xhbXAodGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvblsxXSwtdCx0KX1lbHNle3RoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb249ZS5zbGljZSgpfX07ZS5wcm90b3R5cGUucm90YXRlQmFzaWNVbmJvdW5kZWQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY3VycmVudE5vZGU9PW51bGwpe3JldHVybn1pZih0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uVW5ib3VuZGVkIT1udWxsKXt0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uVW5ib3VuZGVkWzBdKz1lWzBdO3RoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb25VbmJvdW5kZWRbMV0rPWVbMV19ZWxzZXt0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uVW5ib3VuZGVkPWUuc2xpY2UoKX19O2UucHJvdG90eXBlLnJvdGF0ZUJhc2ljV2l0aG91dEluZXJ0aWE9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY3VycmVudE5vZGU9PW51bGwpe3JldHVybn10aGlzLl9kZXNpcmVkWm9vbT10aGlzLl96b29tO3RoaXMuX2Rlc2lyZWRMb29rYXQ9bnVsbDt0aGlzLl9yZXF1ZXN0ZWRSb3RhdGlvbkRlbHRhPW51bGw7dGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvbj1udWxsO3ZhciB0PS4wNS9NYXRoLnBvdygyLHRoaXMuX3pvb20pO3ZhciByPWUuc2xpY2UoKTtyWzBdPXRoaXMuX3NwYXRpYWwuY2xhbXAoclswXSwtdCx0KTtyWzFdPXRoaXMuX3NwYXRpYWwuY2xhbXAoclsxXSwtdCx0KTt0aGlzLl9hcHBseVJvdGF0aW9uQmFzaWMocil9O2UucHJvdG90eXBlLnJvdGF0ZVRvQmFzaWM9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY3VycmVudE5vZGU9PW51bGwpe3JldHVybn10aGlzLl9kZXNpcmVkWm9vbT10aGlzLl96b29tO3RoaXMuX2Rlc2lyZWRMb29rYXQ9bnVsbDtlWzBdPXRoaXMuX3NwYXRpYWwuY2xhbXAoZVswXSwwLDEpO2VbMV09dGhpcy5fc3BhdGlhbC5jbGFtcChlWzFdLDAsMSk7dmFyIHQ9dGhpcy5jdXJyZW50VHJhbnNmb3JtLnVucHJvamVjdEJhc2ljKGUsdGhpcy5fbG9va2F0RGVwdGgpO3RoaXMuX2N1cnJlbnRDYW1lcmEubG9va2F0LmZyb21BcnJheSh0KX07ZS5wcm90b3R5cGUuem9vbUluPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fY3VycmVudE5vZGU9PW51bGwpe3JldHVybn10aGlzLl9kZXNpcmVkWm9vbT1NYXRoLm1heCh0aGlzLl9taW5ab29tLE1hdGgubWluKHRoaXMuX21heFpvb20sdGhpcy5fZGVzaXJlZFpvb20rZSkpO3ZhciByPXRoaXMuY3VycmVudFRyYW5zZm9ybS5wcm9qZWN0QmFzaWModGhpcy5fY3VycmVudENhbWVyYS5sb29rYXQudG9BcnJheSgpKTt2YXIgbj1yWzBdO3ZhciBpPXJbMV07dmFyIG89TWF0aC5wb3coMix0aGlzLl96b29tKTt2YXIgYT1NYXRoLnBvdygyLHRoaXMuX2Rlc2lyZWRab29tKTt2YXIgcz10WzBdO3ZhciB1PXRbMV07aWYodGhpcy5jdXJyZW50VHJhbnNmb3JtLmdwYW5vIT1udWxsJiZ0aGlzLmN1cnJlbnRUcmFuc2Zvcm0uZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzPT09dGhpcy5jdXJyZW50VHJhbnNmb3JtLmdwYW5vLkZ1bGxQYW5vV2lkdGhQaXhlbHMpe2lmKHMtbj4uNSl7cz1zLTF9ZWxzZSBpZihuLXM+LjUpe3M9MStzfX12YXIgYz1zLW8vYSoocy1uKTt2YXIgbD11LW8vYSoodS1pKTt2YXIgaD10aGlzLmN1cnJlbnRUcmFuc2Zvcm0uZ3Bhbm87aWYodGhpcy5fY3VycmVudE5vZGUuZnVsbFBhbm8pe2M9dGhpcy5fc3BhdGlhbC53cmFwKGMrdGhpcy5fYmFzaWNSb3RhdGlvblswXSwwLDEpO2w9dGhpcy5fc3BhdGlhbC5jbGFtcChsK3RoaXMuX2Jhc2ljUm90YXRpb25bMV0sLjA1LC45NSl9ZWxzZSBpZihoIT1udWxsJiZ0aGlzLmN1cnJlbnRUcmFuc2Zvcm0uZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzPT09dGhpcy5jdXJyZW50VHJhbnNmb3JtLmdwYW5vLkZ1bGxQYW5vV2lkdGhQaXhlbHMpe2M9dGhpcy5fc3BhdGlhbC53cmFwKGMrdGhpcy5fYmFzaWNSb3RhdGlvblswXSwwLDEpO2w9dGhpcy5fc3BhdGlhbC5jbGFtcChsK3RoaXMuX2Jhc2ljUm90YXRpb25bMV0sMCwxKX1lbHNle2M9dGhpcy5fc3BhdGlhbC5jbGFtcChjLDAsMSk7bD10aGlzLl9zcGF0aWFsLmNsYW1wKGwsMCwxKX10aGlzLl9kZXNpcmVkTG9va2F0PShuZXcgcC5WZWN0b3IzKS5mcm9tQXJyYXkodGhpcy5jdXJyZW50VHJhbnNmb3JtLnVucHJvamVjdEJhc2ljKFtjLGxdLHRoaXMuX2xvb2thdERlcHRoKSl9O2UucHJvdG90eXBlLnNldENlbnRlcj1mdW5jdGlvbihlKXt0aGlzLl9kZXNpcmVkTG9va2F0PW51bGw7dGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YT1udWxsO3RoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb249bnVsbDt0aGlzLl9kZXNpcmVkWm9vbT10aGlzLl96b29tO3ZhciB0PVt0aGlzLl9zcGF0aWFsLmNsYW1wKGVbMF0sMCwxKSx0aGlzLl9zcGF0aWFsLmNsYW1wKGVbMV0sMCwxKV07aWYodGhpcy5fY3VycmVudE5vZGU9PW51bGwpe3RoaXMuX2Rlc2lyZWRDZW50ZXI9dDtyZXR1cm59dGhpcy5fZGVzaXJlZENlbnRlcj1udWxsO3ZhciByPShuZXcgcC5WZWN0b3IzKS5mcm9tQXJyYXkodGhpcy5jdXJyZW50VHJhbnNmb3JtLnVucHJvamVjdEJhc2ljKHQsdGhpcy5fbG9va2F0RGVwdGgpKTt2YXIgbj10aGlzLnByZXZpb3VzVHJhbnNmb3JtIT1udWxsP3RoaXMucHJldmlvdXNUcmFuc2Zvcm06dGhpcy5jdXJyZW50VHJhbnNmb3JtO3ZhciBpPShuZXcgcC5WZWN0b3IzKS5mcm9tQXJyYXkobi51bnByb2plY3RCYXNpYyh0LHRoaXMuX2xvb2thdERlcHRoKSk7dGhpcy5fY3VycmVudENhbWVyYS5sb29rYXQuY29weShyKTt0aGlzLl9wcmV2aW91c0NhbWVyYS5sb29rYXQuY29weShpKX07ZS5wcm90b3R5cGUuc2V0Wm9vbT1mdW5jdGlvbihlKXt0aGlzLl9kZXNpcmVkTG9va2F0PW51bGw7dGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YT1udWxsO3RoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb249bnVsbDt0aGlzLl96b29tPXRoaXMuX3NwYXRpYWwuY2xhbXAoZSx0aGlzLl9taW5ab29tLHRoaXMuX21heFpvb20pO3RoaXMuX2Rlc2lyZWRab29tPXRoaXMuX3pvb219O2UucHJvdG90eXBlLl9hcHBseVJvdGF0aW9uPWZ1bmN0aW9uKGUsdCl7aWYodD09bnVsbCl7cmV0dXJufXZhciByPShuZXcgcC5RdWF0ZXJuaW9uKS5zZXRGcm9tVW5pdFZlY3RvcnModC51cCxuZXcgcC5WZWN0b3IzKDAsMCwxKSk7dmFyIG49ci5jbG9uZSgpLmludmVyc2UoKTt2YXIgaT1uZXcgcC5WZWN0b3IzO2kuY29weSh0Lmxvb2thdCkuc3ViKHQucG9zaXRpb24pO2kuYXBwbHlRdWF0ZXJuaW9uKHIpO3ZhciBvPWkubGVuZ3RoKCk7dmFyIGE9TWF0aC5hdGFuMihpLnksaS54KTthKz1lLnBoaTt2YXIgcz1NYXRoLmF0YW4yKE1hdGguc3FydChpLngqaS54K2kueSppLnkpLGkueik7cys9ZS50aGV0YTtzPU1hdGgubWF4KC4xLE1hdGgubWluKE1hdGguUEktLjEscykpO2kueD1NYXRoLnNpbihzKSpNYXRoLmNvcyhhKTtpLnk9TWF0aC5zaW4ocykqTWF0aC5zaW4oYSk7aS56PU1hdGguY29zKHMpO2kuYXBwbHlRdWF0ZXJuaW9uKG4pO3QubG9va2F0LmNvcHkodC5wb3NpdGlvbikuYWRkKGkubXVsdGlwbHlTY2FsYXIobykpfTtlLnByb3RvdHlwZS5fYXBwbHlSb3RhdGlvbkJhc2ljPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2N1cnJlbnROb2RlO3ZhciByPXRoaXMuX3ByZXZpb3VzTm9kZSE9bnVsbD90aGlzLnByZXZpb3VzTm9kZTp0aGlzLmN1cnJlbnROb2RlO3ZhciBuPXRoaXMuX2N1cnJlbnRDYW1lcmE7dmFyIGk9dGhpcy5fcHJldmlvdXNDYW1lcmE7dmFyIG89dGhpcy5jdXJyZW50VHJhbnNmb3JtO3ZhciBhPXRoaXMucHJldmlvdXNUcmFuc2Zvcm0hPW51bGw/dGhpcy5wcmV2aW91c1RyYW5zZm9ybTp0aGlzLmN1cnJlbnRUcmFuc2Zvcm07dmFyIHM9by5wcm9qZWN0QmFzaWMobi5sb29rYXQudG9BcnJheSgpKTt2YXIgdT1hLnByb2plY3RCYXNpYyhpLmxvb2thdC50b0FycmF5KCkpO3ZhciBjPW8uZ3Bhbm87dmFyIGw9YS5ncGFubztpZih0LmZ1bGxQYW5vKXtzWzBdPXRoaXMuX3NwYXRpYWwud3JhcChzWzBdK2VbMF0sMCwxKTtzWzFdPXRoaXMuX3NwYXRpYWwuY2xhbXAoc1sxXStlWzFdLC4wNSwuOTUpfWVsc2UgaWYoYyE9bnVsbCYmby5ncGFuby5Dcm9wcGVkQXJlYUltYWdlV2lkdGhQaXhlbHM9PT1vLmdwYW5vLkZ1bGxQYW5vV2lkdGhQaXhlbHMpe3NbMF09dGhpcy5fc3BhdGlhbC53cmFwKHNbMF0rZVswXSwwLDEpO3NbMV09dGhpcy5fc3BhdGlhbC5jbGFtcChzWzFdK2VbMV0sMCwxKX1lbHNle3NbMF09dGhpcy5fc3BhdGlhbC5jbGFtcChzWzBdK2VbMF0sMCwxKTtzWzFdPXRoaXMuX3NwYXRpYWwuY2xhbXAoc1sxXStlWzFdLDAsMSl9aWYoci5mdWxsUGFubyl7dVswXT10aGlzLl9zcGF0aWFsLndyYXAodVswXStlWzBdLDAsMSk7dVsxXT10aGlzLl9zcGF0aWFsLmNsYW1wKHVbMV0rZVsxXSwuMDUsLjk1KX1lbHNlIGlmKGwhPW51bGwmJmEuZ3Bhbm8uQ3JvcHBlZEFyZWFJbWFnZVdpZHRoUGl4ZWxzPT09YS5ncGFuby5GdWxsUGFub1dpZHRoUGl4ZWxzKXt1WzBdPXRoaXMuX3NwYXRpYWwud3JhcCh1WzBdK2VbMF0sMCwxKTt1WzFdPXRoaXMuX3NwYXRpYWwuY2xhbXAodVsxXStlWzFdLDAsMSl9ZWxzZXt1WzBdPXRoaXMuX3NwYXRpYWwuY2xhbXAodVswXStlWzBdLDAsMSk7dVsxXT10aGlzLl9zcGF0aWFsLmNsYW1wKHNbMV0rZVsxXSwwLDEpfXZhciBoPW8udW5wcm9qZWN0QmFzaWMocyx0aGlzLl9sb29rYXREZXB0aCk7bi5sb29rYXQuZnJvbUFycmF5KGgpO3ZhciBwPWEudW5wcm9qZWN0QmFzaWModSx0aGlzLl9sb29rYXREZXB0aCk7aS5sb29rYXQuZnJvbUFycmF5KHApfTtlLnByb3RvdHlwZS5fdXBkYXRlWm9vbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kZXNpcmVkWm9vbS10aGlzLl96b29tO3ZhciByPXQ+MD8xOnQ8MD8tMTowO2lmKHQ9PT0wKXtyZXR1cm59ZWxzZSBpZihNYXRoLmFicyh0KTwuMDAyKXt0aGlzLl96b29tPXRoaXMuX2Rlc2lyZWRab29tO2lmKHRoaXMuX2Rlc2lyZWRMb29rYXQhPW51bGwpe3RoaXMuX2Rlc2lyZWRMb29rYXQ9bnVsbH19ZWxzZXt0aGlzLl96b29tKz1yKk1hdGgubWF4KE1hdGguYWJzKDUqZSp0KSwuMDAyKX19O2UucHJvdG90eXBlLl91cGRhdGVMb29rYXQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZGVzaXJlZExvb2thdD09PW51bGwpe3JldHVybn12YXIgdD10aGlzLl9kZXNpcmVkTG9va2F0LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuX2N1cnJlbnRDYW1lcmEubG9va2F0KTtpZihNYXRoLmFicyh0KTwxZS02KXt0aGlzLl9jdXJyZW50Q2FtZXJhLmxvb2thdC5jb3B5KHRoaXMuX2Rlc2lyZWRMb29rYXQpO3RoaXMuX2Rlc2lyZWRMb29rYXQ9bnVsbH1lbHNle3RoaXMuX2N1cnJlbnRDYW1lcmEubG9va2F0LmxlcnAodGhpcy5fZGVzaXJlZExvb2thdCw1KmUpfX07ZS5wcm90b3R5cGUuX3VwZGF0ZVJvdGF0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YSE9bnVsbCl7dmFyIGU9dGhpcy5fcm90YXRpb25EZWx0YS5sZW5ndGhTcXVhcmVkKCk7dmFyIHQ9dGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YS5sZW5ndGhTcXVhcmVkKCk7aWYodD5lKXt0aGlzLl9yb3RhdGlvbkRlbHRhLmxlcnAodGhpcy5fcmVxdWVzdGVkUm90YXRpb25EZWx0YSx0aGlzLl9yb3RhdGlvbkluY3JlYXNlQWxwaGEpfWVsc2V7dGhpcy5fcm90YXRpb25EZWx0YS5sZXJwKHRoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGEsdGhpcy5fcm90YXRpb25EZWNyZWFzZUFscGhhKX10aGlzLl9yZXF1ZXN0ZWRSb3RhdGlvbkRlbHRhPW51bGw7cmV0dXJufWlmKHRoaXMuX3JvdGF0aW9uRGVsdGEuaXNaZXJvKXtyZXR1cm59dmFyIHI9dGhpcy5jdXJyZW50Tm9kZS5mdWxsUGFubz8xOnRoaXMuX2FscGhhO3RoaXMuX3JvdGF0aW9uRGVsdGEubXVsdGlwbHkodGhpcy5fcm90YXRpb25BY2NlbGVyYXRpb24qcik7dGhpcy5fcm90YXRpb25EZWx0YS50aHJlc2hvbGQodGhpcy5fcm90YXRpb25UaHJlc2hvbGQpfTtlLnByb3RvdHlwZS5fdXBkYXRlUm90YXRpb25CYXNpYz1mdW5jdGlvbigpe2lmKHRoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb24hPW51bGwpe3ZhciBlPXRoaXMuX2Jhc2ljUm90YXRpb25bMF07dmFyIHQ9dGhpcy5fYmFzaWNSb3RhdGlvblsxXTt2YXIgcj10aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uWzBdO3ZhciBuPXRoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb25bMV07aWYoTWF0aC5hYnMocik+TWF0aC5hYnMoZSkpe3RoaXMuX2Jhc2ljUm90YXRpb25bMF09KDEtdGhpcy5fcm90YXRpb25JbmNyZWFzZUFscGhhKSplK3RoaXMuX3JvdGF0aW9uSW5jcmVhc2VBbHBoYSpyfWVsc2V7dGhpcy5fYmFzaWNSb3RhdGlvblswXT0oMS10aGlzLl9yb3RhdGlvbkRlY3JlYXNlQWxwaGEpKmUrdGhpcy5fcm90YXRpb25EZWNyZWFzZUFscGhhKnJ9aWYoTWF0aC5hYnMobik+TWF0aC5hYnModCkpe3RoaXMuX2Jhc2ljUm90YXRpb25bMV09KDEtdGhpcy5fcm90YXRpb25JbmNyZWFzZUFscGhhKSp0K3RoaXMuX3JvdGF0aW9uSW5jcmVhc2VBbHBoYSpufWVsc2V7dGhpcy5fYmFzaWNSb3RhdGlvblsxXT0oMS10aGlzLl9yb3RhdGlvbkRlY3JlYXNlQWxwaGEpKnQrdGhpcy5fcm90YXRpb25EZWNyZWFzZUFscGhhKm59dGhpcy5fcmVxdWVzdGVkQmFzaWNSb3RhdGlvbj1udWxsO3JldHVybn1pZih0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uVW5ib3VuZGVkIT1udWxsKXt2YXIgcj10aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uVW5ib3VuZGVkWzBdO3ZhciBuPXRoaXMuX3JlcXVlc3RlZEJhc2ljUm90YXRpb25VbmJvdW5kZWRbMV07aWYoTWF0aC5hYnMocik+MCl7dGhpcy5fYmFzaWNSb3RhdGlvblswXT0oMS10aGlzLl91bmJvdW5kZWRSb3RhdGlvbkFscGhhKSp0aGlzLl9iYXNpY1JvdGF0aW9uWzBdK3RoaXMuX3VuYm91bmRlZFJvdGF0aW9uQWxwaGEqcn1pZihNYXRoLmFicyhuKT4wKXt0aGlzLl9iYXNpY1JvdGF0aW9uWzFdPSgxLXRoaXMuX3VuYm91bmRlZFJvdGF0aW9uQWxwaGEpKnRoaXMuX2Jhc2ljUm90YXRpb25bMV0rdGhpcy5fdW5ib3VuZGVkUm90YXRpb25BbHBoYSpufWlmKHRoaXMuX2Rlc2lyZWRMb29rYXQhPW51bGwpe3ZhciBpPXRoaXMuY3VycmVudFRyYW5zZm9ybS5wcm9qZWN0QmFzaWModGhpcy5fZGVzaXJlZExvb2thdC50b0FycmF5KCkpO2lbMF0rPXI7aVsxXSs9bjt0aGlzLl9kZXNpcmVkTG9va2F0PShuZXcgcC5WZWN0b3IzKS5mcm9tQXJyYXkodGhpcy5jdXJyZW50VHJhbnNmb3JtLnVucHJvamVjdEJhc2ljKGksdGhpcy5fbG9va2F0RGVwdGgpKX10aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uVW5ib3VuZGVkPW51bGx9aWYodGhpcy5fYmFzaWNSb3RhdGlvblswXT09PTAmJnRoaXMuX2Jhc2ljUm90YXRpb25bMV09PT0wKXtyZXR1cm59dGhpcy5fYmFzaWNSb3RhdGlvblswXT10aGlzLl9yb3RhdGlvbkFjY2VsZXJhdGlvbip0aGlzLl9iYXNpY1JvdGF0aW9uWzBdO3RoaXMuX2Jhc2ljUm90YXRpb25bMV09dGhpcy5fcm90YXRpb25BY2NlbGVyYXRpb24qdGhpcy5fYmFzaWNSb3RhdGlvblsxXTtpZihNYXRoLmFicyh0aGlzLl9iYXNpY1JvdGF0aW9uWzBdKTx0aGlzLl9yb3RhdGlvblRocmVzaG9sZC9NYXRoLnBvdygyLHRoaXMuX3pvb20pJiZNYXRoLmFicyh0aGlzLl9iYXNpY1JvdGF0aW9uWzFdKTx0aGlzLl9yb3RhdGlvblRocmVzaG9sZC9NYXRoLnBvdygyLHRoaXMuX3pvb20pKXt0aGlzLl9iYXNpY1JvdGF0aW9uPVswLDBdfX07ZS5wcm90b3R5cGUuX2NsZWFyUm90YXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9jdXJyZW50Tm9kZS5mdWxsUGFubyl7cmV0dXJufWlmKHRoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGEhPW51bGwpe3RoaXMuX3JlcXVlc3RlZFJvdGF0aW9uRGVsdGE9bnVsbH1pZighdGhpcy5fcm90YXRpb25EZWx0YS5pc1plcm8pe3RoaXMuX3JvdGF0aW9uRGVsdGEucmVzZXQoKX1pZih0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uIT1udWxsKXt0aGlzLl9yZXF1ZXN0ZWRCYXNpY1JvdGF0aW9uPW51bGx9aWYodGhpcy5fYmFzaWNSb3RhdGlvblswXT4wfHx0aGlzLl9iYXNpY1JvdGF0aW9uWzFdPjApe3RoaXMuX2Jhc2ljUm90YXRpb249WzAsMF19fTtlLnByb3RvdHlwZS5fc2V0RGVzaXJlZENlbnRlcj1mdW5jdGlvbigpe2lmKHRoaXMuX2Rlc2lyZWRDZW50ZXI9PW51bGwpe3JldHVybn12YXIgZT0obmV3IHAuVmVjdG9yMykuZnJvbUFycmF5KHRoaXMuY3VycmVudFRyYW5zZm9ybS51bnByb2plY3RCYXNpYyh0aGlzLl9kZXNpcmVkQ2VudGVyLHRoaXMuX2xvb2thdERlcHRoKSkuc3ViKHRoaXMuX2N1cnJlbnRDYW1lcmEucG9zaXRpb24pO3RoaXMuX2N1cnJlbnRDYW1lcmEubG9va2F0LmNvcHkodGhpcy5fY3VycmVudENhbWVyYS5wb3NpdGlvbi5jbG9uZSgpLmFkZChlKSk7dGhpcy5fcHJldmlvdXNDYW1lcmEubG9va2F0LmNvcHkodGhpcy5fcHJldmlvdXNDYW1lcmEucG9zaXRpb24uY2xvbmUoKS5hZGQoZSkpO3RoaXMuX2Rlc2lyZWRDZW50ZXI9bnVsbH07ZS5wcm90b3R5cGUuX3NldERlc2lyZWRab29tPWZ1bmN0aW9uKCl7dGhpcy5fZGVzaXJlZFpvb209dGhpcy5fY3VycmVudE5vZGUuZnVsbFBhbm98fHRoaXMuX3ByZXZpb3VzTm9kZT09bnVsbD90aGlzLl96b29tOjB9O3JldHVybiBlfShpLlN0YXRlQmFzZSk7ci5JbnRlcmFjdGl2ZVN0YXRlQmFzZT1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi9TdGF0ZVwiOjI5OCx0aHJlZToyNDJ9XSw0NTY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkludGVyYWN0aXZlV2FpdGluZ1N0YXRlPXZvaWQgMDt2YXIgaT1lKFwiLi4vLi4vU3RhdGVcIik7dmFyIG89ZnVuY3Rpb24ocil7bihlLHIpO2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSl8fHRoaXM7dC5fYWRqdXN0Q2FtZXJhcygpO3QuX21vdGlvbmxlc3M9dC5fbW90aW9ubGVzc1RyYW5zaXRpb24oKTtyZXR1cm4gdH1lLnByb3RvdHlwZS50cmF2ZXJzZT1mdW5jdGlvbigpe3JldHVybiBuZXcgaS5UcmF2ZXJzaW5nU3RhdGUodGhpcyl9O2UucHJvdG90eXBlLndhaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkuV2FpdGluZ1N0YXRlKHRoaXMpfTtlLnByb3RvdHlwZS5wcmVwZW5kPWZ1bmN0aW9uKGUpe3IucHJvdG90eXBlLnByZXBlbmQuY2FsbCh0aGlzLGUpO3RoaXMuX21vdGlvbmxlc3M9dGhpcy5fbW90aW9ubGVzc1RyYW5zaXRpb24oKX07ZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUpe3IucHJvdG90eXBlLnNldC5jYWxsKHRoaXMsZSk7dGhpcy5fbW90aW9ubGVzcz10aGlzLl9tb3Rpb25sZXNzVHJhbnNpdGlvbigpfTtlLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKGUpe3RoaXMuX2FscGhhPU1hdGgubWF4KDAsTWF0aC5taW4oMSx0aGlzLl9hbHBoYStlKSl9O2UucHJvdG90eXBlLm1vdmVUbz1mdW5jdGlvbihlKXt0aGlzLl9hbHBoYT1NYXRoLm1heCgwLE1hdGgubWluKDEsZSkpfTtlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fdXBkYXRlUm90YXRpb24oKTtpZighdGhpcy5fcm90YXRpb25EZWx0YS5pc1plcm8pe3RoaXMuX2FwcGx5Um90YXRpb24odGhpcy5fcm90YXRpb25EZWx0YSx0aGlzLl9wcmV2aW91c0NhbWVyYSk7dGhpcy5fYXBwbHlSb3RhdGlvbih0aGlzLl9yb3RhdGlvbkRlbHRhLHRoaXMuX2N1cnJlbnRDYW1lcmEpfXRoaXMuX3VwZGF0ZVJvdGF0aW9uQmFzaWMoKTtpZih0aGlzLl9iYXNpY1JvdGF0aW9uWzBdIT09MHx8dGhpcy5fYmFzaWNSb3RhdGlvblsxXSE9PTApe3RoaXMuX2FwcGx5Um90YXRpb25CYXNpYyh0aGlzLl9iYXNpY1JvdGF0aW9uKX12YXIgdD10aGlzLl9hbmltYXRpb25TcGVlZCooNjAvZSk7dGhpcy5fdXBkYXRlWm9vbSh0KTt0aGlzLl91cGRhdGVMb29rYXQodCk7dGhpcy5fY2FtZXJhLmxlcnBDYW1lcmFzKHRoaXMuX3ByZXZpb3VzQ2FtZXJhLHRoaXMuX2N1cnJlbnRDYW1lcmEsdGhpcy5hbHBoYSl9O2UucHJvdG90eXBlLl9nZXRBbHBoYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3Rpb25sZXNzP01hdGgucm91bmQodGhpcy5fYWxwaGEpOnRoaXMuX2FscGhhfTtlLnByb3RvdHlwZS5fc2V0Q3VycmVudENhbWVyYT1mdW5jdGlvbigpe3IucHJvdG90eXBlLl9zZXRDdXJyZW50Q2FtZXJhLmNhbGwodGhpcyk7dGhpcy5fYWRqdXN0Q2FtZXJhcygpfTtlLnByb3RvdHlwZS5fYWRqdXN0Q2FtZXJhcz1mdW5jdGlvbigpe2lmKHRoaXMuX3ByZXZpb3VzTm9kZT09bnVsbCl7cmV0dXJufWlmKHRoaXMuX2N1cnJlbnROb2RlLmZ1bGxQYW5vKXt2YXIgZT10aGlzLl9jYW1lcmEubG9va2F0LmNsb25lKCkuc3ViKHRoaXMuX2NhbWVyYS5wb3NpdGlvbik7dGhpcy5fY3VycmVudENhbWVyYS5sb29rYXQuY29weShlLmNsb25lKCkuYWRkKHRoaXMuX2N1cnJlbnRDYW1lcmEucG9zaXRpb24pKX1pZih0aGlzLl9wcmV2aW91c05vZGUuZnVsbFBhbm8pe3ZhciBlPXRoaXMuX2N1cnJlbnRDYW1lcmEubG9va2F0LmNsb25lKCkuc3ViKHRoaXMuX2N1cnJlbnRDYW1lcmEucG9zaXRpb24pO3RoaXMuX3ByZXZpb3VzQ2FtZXJhLmxvb2thdC5jb3B5KGUuY2xvbmUoKS5hZGQodGhpcy5fcHJldmlvdXNDYW1lcmEucG9zaXRpb24pKX19O3JldHVybiBlfShpLkludGVyYWN0aXZlU3RhdGVCYXNlKTtyLkludGVyYWN0aXZlV2FpdGluZ1N0YXRlPW87ci5kZWZhdWx0PW99LHtcIi4uLy4uL1N0YXRlXCI6Mjk4fV0sNDU3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlN0YXRlQmFzZT12b2lkIDA7dmFyIGE9ZShcIi4uLy4uL0Vycm9yXCIpO3ZhciBzPWUoXCIuLi8uLi9HZW9cIik7dmFyIG49ZShcIi4uLy4uL1N0YXRlXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9zcGF0aWFsPW5ldyBzLlNwYXRpYWw7dGhpcy5fZ2VvQ29vcmRzPW5ldyBzLkdlb0Nvb3Jkczt0aGlzLl9yZWZlcmVuY2VUaHJlc2hvbGQ9LjAxO3RoaXMuX3RyYW5zaXRpb25Nb2RlPWUudHJhbnNpdGlvbk1vZGU7dGhpcy5fcmVmZXJlbmNlPWUucmVmZXJlbmNlO3RoaXMuX2FscGhhPWUuYWxwaGE7dGhpcy5fY2FtZXJhPWUuY2FtZXJhLmNsb25lKCk7dGhpcy5fem9vbT1lLnpvb207dGhpcy5fY3VycmVudEluZGV4PWUuY3VycmVudEluZGV4O3RoaXMuX3RyYWplY3Rvcnk9ZS50cmFqZWN0b3J5LnNsaWNlKCk7dGhpcy5fdHJhamVjdG9yeVRyYW5zZm9ybXM9W107dGhpcy5fdHJhamVjdG9yeUNhbWVyYXM9W107Zm9yKHZhciB0PTAscj10aGlzLl90cmFqZWN0b3J5O3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO3ZhciBpPXRoaXMuX25vZGVUb1RyYW5zbGF0aW9uKG4sdGhpcy5fcmVmZXJlbmNlKTt2YXIgbz1uZXcgcy5UcmFuc2Zvcm0obi5vcmllbnRhdGlvbixuLndpZHRoLG4uaGVpZ2h0LG4uZm9jYWwsbi5zY2FsZSxuLmdwYW5vLG4ucm90YXRpb24saSxuLmltYWdlLHVuZGVmaW5lZCxuLmNrMSxuLmNrMixuLmNhbWVyYVByb2plY3Rpb24pO3RoaXMuX3RyYWplY3RvcnlUcmFuc2Zvcm1zLnB1c2gobyk7dGhpcy5fdHJhamVjdG9yeUNhbWVyYXMucHVzaChuZXcgcy5DYW1lcmEobykpfXRoaXMuX2N1cnJlbnROb2RlPXRoaXMuX3RyYWplY3RvcnkubGVuZ3RoPjA/dGhpcy5fdHJhamVjdG9yeVt0aGlzLl9jdXJyZW50SW5kZXhdOm51bGw7dGhpcy5fcHJldmlvdXNOb2RlPXRoaXMuX3RyYWplY3RvcnkubGVuZ3RoPjEmJnRoaXMuY3VycmVudEluZGV4PjA/dGhpcy5fdHJhamVjdG9yeVt0aGlzLl9jdXJyZW50SW5kZXgtMV06bnVsbDt0aGlzLl9jdXJyZW50Q2FtZXJhPXRoaXMuX3RyYWplY3RvcnlDYW1lcmFzLmxlbmd0aD4wP3RoaXMuX3RyYWplY3RvcnlDYW1lcmFzW3RoaXMuX2N1cnJlbnRJbmRleF0uY2xvbmUoKTpuZXcgcy5DYW1lcmE7dGhpcy5fcHJldmlvdXNDYW1lcmE9dGhpcy5fdHJhamVjdG9yeUNhbWVyYXMubGVuZ3RoPjEmJnRoaXMuY3VycmVudEluZGV4PjA/dGhpcy5fdHJhamVjdG9yeUNhbWVyYXNbdGhpcy5fY3VycmVudEluZGV4LTFdLmNsb25lKCk6dGhpcy5fY3VycmVudENhbWVyYS5jbG9uZSgpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlZmVyZW5jZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVmZXJlbmNlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYWxwaGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldEFscGhhKCl9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYW1lcmFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhbWVyYX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInpvb21cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3pvb219LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0cmFqZWN0b3J5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFqZWN0b3J5fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY3VycmVudEluZGV4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50SW5kZXh9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50Tm9kZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudE5vZGV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwcmV2aW91c05vZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ByZXZpb3VzTm9kZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImN1cnJlbnRDYW1lcmFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRDYW1lcmF9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50VHJhbnNmb3JtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFqZWN0b3J5VHJhbnNmb3Jtcy5sZW5ndGg+MD90aGlzLl90cmFqZWN0b3J5VHJhbnNmb3Jtc1t0aGlzLmN1cnJlbnRJbmRleF06bnVsbH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInByZXZpb3VzVHJhbnNmb3JtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFqZWN0b3J5VHJhbnNmb3Jtcy5sZW5ndGg+MSYmdGhpcy5jdXJyZW50SW5kZXg+MD90aGlzLl90cmFqZWN0b3J5VHJhbnNmb3Jtc1t0aGlzLmN1cnJlbnRJbmRleC0xXTpudWxsfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibW90aW9ubGVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW90aW9ubGVzc30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRyYW5zaXRpb25Nb2RlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFuc2l0aW9uTW9kZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmVhcnRoPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfTtlLnByb3RvdHlwZS50cmF2ZXJzZT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX07ZS5wcm90b3R5cGUud2FpdD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX07ZS5wcm90b3R5cGUud2FpdEludGVyYWN0aXZlbHk9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIil9O2UucHJvdG90eXBlLm1vdmU9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5yb3RhdGVVbmJvdW5kZWQ9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5yb3RhdGVXaXRob3V0SW5lcnRpYT1mdW5jdGlvbihlKXt9O2UucHJvdG90eXBlLnJvdGF0ZUJhc2ljPWZ1bmN0aW9uKGUpe307ZS5wcm90b3R5cGUucm90YXRlQmFzaWNVbmJvdW5kZWQ9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5yb3RhdGVCYXNpY1dpdGhvdXRJbmVydGlhPWZ1bmN0aW9uKGUpe307ZS5wcm90b3R5cGUucm90YXRlVG9CYXNpYz1mdW5jdGlvbihlKXt9O2UucHJvdG90eXBlLnNldFNwZWVkPWZ1bmN0aW9uKGUpe307ZS5wcm90b3R5cGUuem9vbUluPWZ1bmN0aW9uKGUsdCl7fTtlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5zZXRDZW50ZXI9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5zZXRab29tPWZ1bmN0aW9uKGUpe307ZS5wcm90b3R5cGUuZG9sbHk9ZnVuY3Rpb24oZSl7fTtlLnByb3RvdHlwZS5vcmJpdD1mdW5jdGlvbihlKXt9O2UucHJvdG90eXBlLnRydWNrPWZ1bmN0aW9uKGUpe307ZS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoPDEpe3Rocm93IEVycm9yKFwiVHJhamVjdG9yeSBjYW4gbm90IGJlIGVtcHR5XCIpfWlmKHRoaXMuX2N1cnJlbnRJbmRleDwwKXt0aGlzLnNldChlKX1lbHNle3RoaXMuX3RyYWplY3Rvcnk9dGhpcy5fdHJhamVjdG9yeS5jb25jYXQoZSk7dGhpcy5fYXBwZW5kVG9UcmFqZWN0b3JpZXMoZSl9fTtlLnByb3RvdHlwZS5wcmVwZW5kPWZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoPDEpe3Rocm93IEVycm9yKFwiVHJhamVjdG9yeSBjYW4gbm90IGJlIGVtcHR5XCIpfXRoaXMuX3RyYWplY3Rvcnk9ZS5zbGljZSgpLmNvbmNhdCh0aGlzLl90cmFqZWN0b3J5KTt0aGlzLl9jdXJyZW50SW5kZXgrPWUubGVuZ3RoO3RoaXMuX3NldEN1cnJlbnROb2RlKCk7dmFyIHQ9dGhpcy5fc2V0UmVmZXJlbmNlKHRoaXMuX2N1cnJlbnROb2RlKTtpZih0KXt0aGlzLl9zZXRUcmFqZWN0b3JpZXMoKX1lbHNle3RoaXMuX3ByZXBlbmRUb1RyYWplY3RvcmllcyhlKX10aGlzLl9zZXRDdXJyZW50Q2FtZXJhKCl9O2UucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXtpZihlPDApe3Rocm93IEVycm9yKFwibiBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKX1pZih0aGlzLl9jdXJyZW50SW5kZXgtMTxlKXt0aHJvdyBFcnJvcihcIkN1cnJlbnQgYW5kIHByZXZpb3VzIG5vZGVzIGNhbiBub3QgYmUgcmVtb3ZlZFwiKX1mb3IodmFyIHQ9MDt0PGU7dCsrKXt0aGlzLl90cmFqZWN0b3J5LnNoaWZ0KCk7dGhpcy5fdHJhamVjdG9yeVRyYW5zZm9ybXMuc2hpZnQoKTt0aGlzLl90cmFqZWN0b3J5Q2FtZXJhcy5zaGlmdCgpO3RoaXMuX2N1cnJlbnRJbmRleC0tfXRoaXMuX3NldEN1cnJlbnROb2RlKCl9O2UucHJvdG90eXBlLmNsZWFyUHJpb3I9ZnVuY3Rpb24oKXtpZih0aGlzLl9jdXJyZW50SW5kZXg+MCl7dGhpcy5yZW1vdmUodGhpcy5fY3VycmVudEluZGV4LTEpfX07ZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmN1dCgpO2lmKHRoaXMuX2N1cnJlbnRJbmRleD4wKXt0aGlzLnJlbW92ZSh0aGlzLl9jdXJyZW50SW5kZXgtMSl9fTtlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24oKXt3aGlsZSh0aGlzLl90cmFqZWN0b3J5Lmxlbmd0aC0xPnRoaXMuX2N1cnJlbnRJbmRleCl7dGhpcy5fdHJhamVjdG9yeS5wb3AoKTt0aGlzLl90cmFqZWN0b3J5VHJhbnNmb3Jtcy5wb3AoKTt0aGlzLl90cmFqZWN0b3J5Q2FtZXJhcy5wb3AoKX19O2UucHJvdG90eXBlLnNldD1mdW5jdGlvbihlKXt0aGlzLl9zZXRUcmFqZWN0b3J5KGUpO3RoaXMuX3NldEN1cnJlbnROb2RlKCk7dGhpcy5fc2V0UmVmZXJlbmNlKHRoaXMuX2N1cnJlbnROb2RlKTt0aGlzLl9zZXRUcmFqZWN0b3JpZXMoKTt0aGlzLl9zZXRDdXJyZW50Q2FtZXJhKCl9O2UucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50Tm9kZSE9bnVsbD90aGlzLmN1cnJlbnRUcmFuc2Zvcm0ucHJvamVjdEJhc2ljKHRoaXMuX2NhbWVyYS5sb29rYXQudG9BcnJheSgpKTpbLjUsLjVdfTtlLnByb3RvdHlwZS5zZXRUcmFuc2l0aW9uTW9kZT1mdW5jdGlvbihlKXt0aGlzLl90cmFuc2l0aW9uTW9kZT1lfTtlLnByb3RvdHlwZS5fZ2V0QWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gMX07ZS5wcm90b3R5cGUuX3NldEN1cnJlbnQ9ZnVuY3Rpb24oKXt0aGlzLl9zZXRDdXJyZW50Tm9kZSgpO3ZhciBlPXRoaXMuX3NldFJlZmVyZW5jZSh0aGlzLl9jdXJyZW50Tm9kZSk7aWYoZSl7dGhpcy5fc2V0VHJhamVjdG9yaWVzKCl9dGhpcy5fc2V0Q3VycmVudENhbWVyYSgpfTtlLnByb3RvdHlwZS5fc2V0Q3VycmVudENhbWVyYT1mdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRDYW1lcmE9dGhpcy5fdHJhamVjdG9yeUNhbWVyYXNbdGhpcy5fY3VycmVudEluZGV4XS5jbG9uZSgpO3RoaXMuX3ByZXZpb3VzQ2FtZXJhPXRoaXMuX2N1cnJlbnRJbmRleD4wP3RoaXMuX3RyYWplY3RvcnlDYW1lcmFzW3RoaXMuX2N1cnJlbnRJbmRleC0xXS5jbG9uZSgpOnRoaXMuX2N1cnJlbnRDYW1lcmEuY2xvbmUoKX07ZS5wcm90b3R5cGUuX21vdGlvbmxlc3NUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY3VycmVudE5vZGUhPW51bGwmJnRoaXMuX3ByZXZpb3VzTm9kZSE9bnVsbDtyZXR1cm4gZSYmKHRoaXMuX3RyYW5zaXRpb25Nb2RlPT09bi5UcmFuc2l0aW9uTW9kZS5JbnN0YW50YW5lb3VzfHwhKHRoaXMuX2N1cnJlbnROb2RlLm1lcmdlZCYmdGhpcy5fcHJldmlvdXNOb2RlLm1lcmdlZCYmdGhpcy5fd2l0aGluT3JpZ2luYWxEaXN0YW5jZSgpJiZ0aGlzLl9zYW1lQ29ubmVjdGVkQ29tcG9uZW50KCkpKX07ZS5wcm90b3R5cGUuX3NldFJlZmVyZW5jZT1mdW5jdGlvbihlKXtpZihNYXRoLmFicyhlLmxhdExvbi5sYXQtdGhpcy5yZWZlcmVuY2UubGF0KTx0aGlzLl9yZWZlcmVuY2VUaHJlc2hvbGQmJk1hdGguYWJzKGUubGF0TG9uLmxvbi10aGlzLnJlZmVyZW5jZS5sb24pPHRoaXMuX3JlZmVyZW5jZVRocmVzaG9sZCl7cmV0dXJuIGZhbHNlfWlmKHRoaXMuX3ByZXZpb3VzTm9kZSE9bnVsbCYmIXRoaXMuX21vdGlvbmxlc3NUcmFuc2l0aW9uKCkpe3JldHVybiBmYWxzZX10aGlzLl9yZWZlcmVuY2UubGF0PWUubGF0TG9uLmxhdDt0aGlzLl9yZWZlcmVuY2UubG9uPWUubGF0TG9uLmxvbjt0aGlzLl9yZWZlcmVuY2UuYWx0PWUuYWx0O3JldHVybiB0cnVlfTtlLnByb3RvdHlwZS5fc2V0Q3VycmVudE5vZGU9ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50Tm9kZT10aGlzLl90cmFqZWN0b3J5Lmxlbmd0aD4wP3RoaXMuX3RyYWplY3RvcnlbdGhpcy5fY3VycmVudEluZGV4XTpudWxsO3RoaXMuX3ByZXZpb3VzTm9kZT10aGlzLl9jdXJyZW50SW5kZXg+MD90aGlzLl90cmFqZWN0b3J5W3RoaXMuX2N1cnJlbnRJbmRleC0xXTpudWxsfTtlLnByb3RvdHlwZS5fc2V0VHJhamVjdG9yeT1mdW5jdGlvbihlKXtpZihlLmxlbmd0aDwxKXt0aHJvdyBuZXcgYS5Bcmd1bWVudE1hcGlsbGFyeUVycm9yKFwiVHJhamVjdG9yeSBjYW4gbm90IGJlIGVtcHR5XCIpfWlmKHRoaXMuX2N1cnJlbnROb2RlIT1udWxsKXt0aGlzLl90cmFqZWN0b3J5PVt0aGlzLl9jdXJyZW50Tm9kZV0uY29uY2F0KGUpO3RoaXMuX2N1cnJlbnRJbmRleD0xfWVsc2V7dGhpcy5fdHJhamVjdG9yeT1lLnNsaWNlKCk7dGhpcy5fY3VycmVudEluZGV4PTB9fTtlLnByb3RvdHlwZS5fc2V0VHJhamVjdG9yaWVzPWZ1bmN0aW9uKCl7dGhpcy5fdHJhamVjdG9yeVRyYW5zZm9ybXMubGVuZ3RoPTA7dGhpcy5fdHJhamVjdG9yeUNhbWVyYXMubGVuZ3RoPTA7dGhpcy5fYXBwZW5kVG9UcmFqZWN0b3JpZXModGhpcy5fdHJhamVjdG9yeSl9O2UucHJvdG90eXBlLl9hcHBlbmRUb1RyYWplY3Rvcmllcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWU7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYoIW4uYXNzZXRzQ2FjaGVkKXt0aHJvdyBuZXcgYS5Bcmd1bWVudE1hcGlsbGFyeUVycm9yKFwiQXNzZXRzIG11c3QgYmUgY2FjaGVkIHdoZW4gbm9kZSBpcyBhZGRlZCB0byB0cmFqZWN0b3J5XCIpfXZhciBpPXRoaXMuX25vZGVUb1RyYW5zbGF0aW9uKG4sdGhpcy5yZWZlcmVuY2UpO3ZhciBvPW5ldyBzLlRyYW5zZm9ybShuLm9yaWVudGF0aW9uLG4ud2lkdGgsbi5oZWlnaHQsbi5mb2NhbCxuLnNjYWxlLG4uZ3Bhbm8sbi5yb3RhdGlvbixpLG4uaW1hZ2UsdW5kZWZpbmVkLG4uY2sxLG4uY2syLG4uY2FtZXJhUHJvamVjdGlvbik7dGhpcy5fdHJhamVjdG9yeVRyYW5zZm9ybXMucHVzaChvKTt0aGlzLl90cmFqZWN0b3J5Q2FtZXJhcy5wdXNoKG5ldyBzLkNhbWVyYShvKSl9fTtlLnByb3RvdHlwZS5fcHJlcGVuZFRvVHJhamVjdG9yaWVzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZS5yZXZlcnNlKCk7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYoIW4uYXNzZXRzQ2FjaGVkKXt0aHJvdyBuZXcgYS5Bcmd1bWVudE1hcGlsbGFyeUVycm9yKFwiQXNzZXRzIG11c3QgYmUgY2FjaGVkIHdoZW4gYWRkZWQgdG8gdHJhamVjdG9yeVwiKX12YXIgaT10aGlzLl9ub2RlVG9UcmFuc2xhdGlvbihuLHRoaXMucmVmZXJlbmNlKTt2YXIgbz1uZXcgcy5UcmFuc2Zvcm0obi5vcmllbnRhdGlvbixuLndpZHRoLG4uaGVpZ2h0LG4uZm9jYWwsbi5zY2FsZSxuLmdwYW5vLG4ucm90YXRpb24saSxuLmltYWdlLHVuZGVmaW5lZCxuLmNrMSxuLmNrMixuLmNhbWVyYVByb2plY3Rpb24pO3RoaXMuX3RyYWplY3RvcnlUcmFuc2Zvcm1zLnVuc2hpZnQobyk7dGhpcy5fdHJhamVjdG9yeUNhbWVyYXMudW5zaGlmdChuZXcgcy5DYW1lcmEobykpfX07ZS5wcm90b3R5cGUuX25vZGVUb1RyYW5zbGF0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMuR2VvLmNvbXB1dGVUcmFuc2xhdGlvbih7YWx0OmUuYWx0LGxhdDplLmxhdExvbi5sYXQsbG9uOmUubGF0TG9uLmxvbn0sZS5yb3RhdGlvbix0KX07ZS5wcm90b3R5cGUuX3NhbWVDb25uZWN0ZWRDb21wb25lbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jdXJyZW50Tm9kZTt2YXIgdD10aGlzLl9wcmV2aW91c05vZGU7cmV0dXJuISFlJiYhIXQmJmUubWVyZ2VDQz09PXQubWVyZ2VDQ307ZS5wcm90b3R5cGUuX3dpdGhpbk9yaWdpbmFsRGlzdGFuY2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jdXJyZW50Tm9kZTt2YXIgdD10aGlzLl9wcmV2aW91c05vZGU7aWYoIWV8fCF0KXtyZXR1cm4gdHJ1ZX12YXIgcj10aGlzLl9zcGF0aWFsLmRpc3RhbmNlRnJvbUxhdExvbihlLm9yaWdpbmFsTGF0TG9uLmxhdCxlLm9yaWdpbmFsTGF0TG9uLmxvbix0Lm9yaWdpbmFsTGF0TG9uLmxhdCx0Lm9yaWdpbmFsTGF0TG9uLmxvbik7cmV0dXJuIHI8MjV9O3JldHVybiBlfSgpO3IuU3RhdGVCYXNlPWl9LHtcIi4uLy4uL0Vycm9yXCI6MjkzLFwiLi4vLi4vR2VvXCI6Mjk0LFwiLi4vLi4vU3RhdGVcIjoyOTh9XSw0NTg6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlRyYXZlcnNpbmdTdGF0ZT12b2lkIDA7dmFyIGk9ZShcIkBtYXBib3gvdW5pdGJlemllclwiKTt2YXIgbz1lKFwiLi4vLi4vU3RhdGVcIik7dmFyIGE9ZnVuY3Rpb24ocil7bihlLHIpO2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ci5jYWxsKHRoaXMsZSl8fHRoaXM7dC5fYWRqdXN0Q2FtZXJhcygpO3QuX21vdGlvbmxlc3M9dC5fbW90aW9ubGVzc1RyYW5zaXRpb24oKTt0Ll9iYXNlQWxwaGE9dC5fYWxwaGE7dC5fc3BlZWRDb2VmZmljaWVudD0xO3QuX3VuaXRCZXppZXI9bmV3IGkoLjc0LC42NywuMzgsLjk2KTt0Ll91c2VCZXppZXI9ZmFsc2U7cmV0dXJuIHR9ZS5wcm90b3R5cGUuZWFydGg9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uRWFydGhTdGF0ZSh0aGlzKX07ZS5wcm90b3R5cGUud2FpdD1mdW5jdGlvbigpe3JldHVybiBuZXcgby5XYWl0aW5nU3RhdGUodGhpcyl9O2UucHJvdG90eXBlLndhaXRJbnRlcmFjdGl2ZWx5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLkludGVyYWN0aXZlV2FpdGluZ1N0YXRlKHRoaXMpfTtlLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdHJhamVjdG9yeS5sZW5ndGg9PT0wO2lmKHQpe3RoaXMuX3Jlc2V0VHJhbnNpdGlvbigpfXIucHJvdG90eXBlLmFwcGVuZC5jYWxsKHRoaXMsZSk7aWYodCl7dGhpcy5fc2V0RGVzaXJlZENlbnRlcigpO3RoaXMuX3NldERlc2lyZWRab29tKCl9fTtlLnByb3RvdHlwZS5wcmVwZW5kPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3RyYWplY3RvcnkubGVuZ3RoPT09MDtpZih0KXt0aGlzLl9yZXNldFRyYW5zaXRpb24oKX1yLnByb3RvdHlwZS5wcmVwZW5kLmNhbGwodGhpcyxlKTtpZih0KXt0aGlzLl9zZXREZXNpcmVkQ2VudGVyKCk7dGhpcy5fc2V0RGVzaXJlZFpvb20oKX19O2UucHJvdG90eXBlLnNldD1mdW5jdGlvbihlKXtyLnByb3RvdHlwZS5zZXQuY2FsbCh0aGlzLGUpO3RoaXMuX2Rlc2lyZWRMb29rYXQ9bnVsbDt0aGlzLl9yZXNldFRyYW5zaXRpb24oKTt0aGlzLl9jbGVhclJvdGF0aW9uKCk7dGhpcy5fc2V0RGVzaXJlZENlbnRlcigpO3RoaXMuX3NldERlc2lyZWRab29tKCk7aWYodGhpcy5fdHJhamVjdG9yeS5sZW5ndGg8Myl7dGhpcy5fdXNlQmV6aWVyPXRydWV9fTtlLnByb3RvdHlwZS5zZXRTcGVlZD1mdW5jdGlvbihlKXt0aGlzLl9zcGVlZENvZWZmaWNpZW50PXRoaXMuX3NwYXRpYWwuY2xhbXAoZSwwLDEwKX07ZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FscGhhPT09MSYmdGhpcy5fY3VycmVudEluZGV4K3RoaXMuX2FscGhhPHRoaXMuX3RyYWplY3RvcnkubGVuZ3RoKXt0aGlzLl9jdXJyZW50SW5kZXgrPTE7dGhpcy5fdXNlQmV6aWVyPXRoaXMuX3RyYWplY3RvcnkubGVuZ3RoPDMmJnRoaXMuX2N1cnJlbnRJbmRleCsxPT09dGhpcy5fdHJhamVjdG9yeS5sZW5ndGg7dGhpcy5fc2V0Q3VycmVudCgpO3RoaXMuX3Jlc2V0VHJhbnNpdGlvbigpO3RoaXMuX2NsZWFyUm90YXRpb24oKTt0aGlzLl9kZXNpcmVkWm9vbT10aGlzLl9jdXJyZW50Tm9kZS5mdWxsUGFubz90aGlzLl96b29tOjA7dGhpcy5fZGVzaXJlZExvb2thdD1udWxsfXZhciB0PXRoaXMuX2FuaW1hdGlvblNwZWVkKig2MC9lKTt0aGlzLl9iYXNlQWxwaGE9TWF0aC5taW4oMSx0aGlzLl9iYXNlQWxwaGErdGhpcy5fc3BlZWRDb2VmZmljaWVudCp0KTtpZih0aGlzLl91c2VCZXppZXIpe3RoaXMuX2FscGhhPXRoaXMuX3VuaXRCZXppZXIuc29sdmUodGhpcy5fYmFzZUFscGhhKX1lbHNle3RoaXMuX2FscGhhPXRoaXMuX2Jhc2VBbHBoYX10aGlzLl91cGRhdGVSb3RhdGlvbigpO2lmKCF0aGlzLl9yb3RhdGlvbkRlbHRhLmlzWmVybyl7dGhpcy5fYXBwbHlSb3RhdGlvbih0aGlzLl9yb3RhdGlvbkRlbHRhLHRoaXMuX3ByZXZpb3VzQ2FtZXJhKTt0aGlzLl9hcHBseVJvdGF0aW9uKHRoaXMuX3JvdGF0aW9uRGVsdGEsdGhpcy5fY3VycmVudENhbWVyYSl9dGhpcy5fdXBkYXRlUm90YXRpb25CYXNpYygpO2lmKHRoaXMuX2Jhc2ljUm90YXRpb25bMF0hPT0wfHx0aGlzLl9iYXNpY1JvdGF0aW9uWzFdIT09MCl7dGhpcy5fYXBwbHlSb3RhdGlvbkJhc2ljKHRoaXMuX2Jhc2ljUm90YXRpb24pfXRoaXMuX3VwZGF0ZVpvb20odCk7dGhpcy5fdXBkYXRlTG9va2F0KHQpO3RoaXMuX2NhbWVyYS5sZXJwQ2FtZXJhcyh0aGlzLl9wcmV2aW91c0NhbWVyYSx0aGlzLl9jdXJyZW50Q2FtZXJhLHRoaXMuYWxwaGEpfTtlLnByb3RvdHlwZS5fZ2V0QWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW90aW9ubGVzcz9NYXRoLmNlaWwodGhpcy5fYWxwaGEpOnRoaXMuX2FscGhhfTtlLnByb3RvdHlwZS5fc2V0Q3VycmVudENhbWVyYT1mdW5jdGlvbigpe3IucHJvdG90eXBlLl9zZXRDdXJyZW50Q2FtZXJhLmNhbGwodGhpcyk7dGhpcy5fYWRqdXN0Q2FtZXJhcygpfTtlLnByb3RvdHlwZS5fYWRqdXN0Q2FtZXJhcz1mdW5jdGlvbigpe2lmKHRoaXMuX3ByZXZpb3VzTm9kZT09bnVsbCl7cmV0dXJufXZhciBlPXRoaXMuX2NhbWVyYS5sb29rYXQuY2xvbmUoKS5zdWIodGhpcy5fY2FtZXJhLnBvc2l0aW9uKTt0aGlzLl9wcmV2aW91c0NhbWVyYS5sb29rYXQuY29weShlLmNsb25lKCkuYWRkKHRoaXMuX3ByZXZpb3VzQ2FtZXJhLnBvc2l0aW9uKSk7aWYodGhpcy5fY3VycmVudE5vZGUuZnVsbFBhbm8pe3RoaXMuX2N1cnJlbnRDYW1lcmEubG9va2F0LmNvcHkoZS5jbG9uZSgpLmFkZCh0aGlzLl9jdXJyZW50Q2FtZXJhLnBvc2l0aW9uKSl9fTtlLnByb3RvdHlwZS5fcmVzZXRUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5fYWxwaGE9MDt0aGlzLl9iYXNlQWxwaGE9MDt0aGlzLl9tb3Rpb25sZXNzPXRoaXMuX21vdGlvbmxlc3NUcmFuc2l0aW9uKCl9O3JldHVybiBlfShvLkludGVyYWN0aXZlU3RhdGVCYXNlKTtyLlRyYXZlcnNpbmdTdGF0ZT1hO3IuZGVmYXVsdD1hfSx7XCIuLi8uLi9TdGF0ZVwiOjI5OCxcIkBtYXBib3gvdW5pdGJlemllclwiOjJ9XSw0NTk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgbj1mdW5jdGlvbihlLHQpe249T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShyKSllW3JdPXRbcl19O3JldHVybiBuKGUsdCl9O3JldHVybiBmdW5jdGlvbihlLHQpe24oZSx0KTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXQ9PT1udWxsP09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLldhaXRpbmdTdGF0ZT12b2lkIDA7dmFyIGk9ZShcIi4uLy4uL1N0YXRlXCIpO3ZhciBvPWZ1bmN0aW9uKHIpe24oZSxyKTtmdW5jdGlvbiBlKGUpe3ZhciB0PXIuY2FsbCh0aGlzLGUpfHx0aGlzO3QuX3pvb209MDt0Ll9hZGp1c3RDYW1lcmFzKCk7dC5fbW90aW9ubGVzcz10Ll9tb3Rpb25sZXNzVHJhbnNpdGlvbigpO3JldHVybiB0fWUucHJvdG90eXBlLnRyYXZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpLlRyYXZlcnNpbmdTdGF0ZSh0aGlzKX07ZS5wcm90b3R5cGUud2FpdEludGVyYWN0aXZlbHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkuSW50ZXJhY3RpdmVXYWl0aW5nU3RhdGUodGhpcyl9O2UucHJvdG90eXBlLnByZXBlbmQ9ZnVuY3Rpb24oZSl7ci5wcm90b3R5cGUucHJlcGVuZC5jYWxsKHRoaXMsZSk7dGhpcy5fbW90aW9ubGVzcz10aGlzLl9tb3Rpb25sZXNzVHJhbnNpdGlvbigpfTtlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSl7ci5wcm90b3R5cGUuc2V0LmNhbGwodGhpcyxlKTt0aGlzLl9tb3Rpb25sZXNzPXRoaXMuX21vdGlvbmxlc3NUcmFuc2l0aW9uKCl9O2UucHJvdG90eXBlLm1vdmU9ZnVuY3Rpb24oZSl7dGhpcy5fYWxwaGE9TWF0aC5tYXgoMCxNYXRoLm1pbigxLHRoaXMuX2FscGhhK2UpKX07ZS5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKGUpe3RoaXMuX2FscGhhPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlKSl9O2UucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlKXt0aGlzLl9jYW1lcmEubGVycENhbWVyYXModGhpcy5fcHJldmlvdXNDYW1lcmEsdGhpcy5fY3VycmVudENhbWVyYSx0aGlzLmFscGhhKX07ZS5wcm90b3R5cGUuX2dldEFscGhhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdGlvbmxlc3M/TWF0aC5yb3VuZCh0aGlzLl9hbHBoYSk6dGhpcy5fYWxwaGF9O2UucHJvdG90eXBlLl9zZXRDdXJyZW50Q2FtZXJhPWZ1bmN0aW9uKCl7ci5wcm90b3R5cGUuX3NldEN1cnJlbnRDYW1lcmEuY2FsbCh0aGlzKTt0aGlzLl9hZGp1c3RDYW1lcmFzKCl9O2UucHJvdG90eXBlLl9hZGp1c3RDYW1lcmFzPWZ1bmN0aW9uKCl7aWYodGhpcy5fcHJldmlvdXNOb2RlPT1udWxsKXtyZXR1cm59aWYodGhpcy5fY3VycmVudE5vZGUuZnVsbFBhbm8pe3ZhciBlPXRoaXMuX2NhbWVyYS5sb29rYXQuY2xvbmUoKS5zdWIodGhpcy5fY2FtZXJhLnBvc2l0aW9uKTt0aGlzLl9jdXJyZW50Q2FtZXJhLmxvb2thdC5jb3B5KGUuY2xvbmUoKS5hZGQodGhpcy5fY3VycmVudENhbWVyYS5wb3NpdGlvbikpfWlmKHRoaXMuX3ByZXZpb3VzTm9kZS5mdWxsUGFubyl7dmFyIGU9dGhpcy5fY3VycmVudENhbWVyYS5sb29rYXQuY2xvbmUoKS5zdWIodGhpcy5fY3VycmVudENhbWVyYS5wb3NpdGlvbik7dGhpcy5fcHJldmlvdXNDYW1lcmEubG9va2F0LmNvcHkoZS5jbG9uZSgpLmFkZCh0aGlzLl9wcmV2aW91c0NhbWVyYS5wb3NpdGlvbikpfX07cmV0dXJuIGV9KGkuU3RhdGVCYXNlKTtyLldhaXRpbmdTdGF0ZT1vO3IuZGVmYXVsdD1vfSx7XCIuLi8uLi9TdGF0ZVwiOjI5OH1dLDQ2MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5JbWFnZVRpbGVMb2FkZXI9dm9pZCAwO3ZhciBuPWUoXCJyeGpzXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fc2NoZW1lPWU7dGhpcy5faG9zdD10O3RoaXMuX29yaWdpbj1yIT1udWxsP1wiP29yaWdpbj1cIityOlwiXCJ9ZS5wcm90b3R5cGUuZ2V0VGlsZT1mdW5jdGlvbihpLG8sYSxzLHUsZSx0KXt2YXIgcj1cIi9cIitpK1wiL1wiK28rXCIsXCIrYStcIixcIitzK1wiLFwiK3UrXCIvXCIrZStcIixcIit0K1wiLzAvZGVmYXVsdC5qcGdcIjt2YXIgYz10aGlzLl9zY2hlbWUrXCI6Ly9cIit0aGlzLl9ob3N0K3IrdGhpcy5fb3JpZ2luO3ZhciBsPW51bGw7cmV0dXJuW24uT2JzZXJ2YWJsZS5jcmVhdGUoZnVuY3Rpb24obil7bD1uZXcgWE1MSHR0cFJlcXVlc3Q7bC5vcGVuKFwiR0VUXCIsYyx0cnVlKTtsLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7bC50aW1lb3V0PTE1ZTM7bC5vbmxvYWQ9ZnVuY3Rpb24oZSl7aWYobC5zdGF0dXMhPT0yMDApe24uZXJyb3IobmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHRpbGUgKFwiK2krXCI6IFwiK28rXCIsXCIrYStcIixcIitzK1wiLFwiK3UrXCIpLiBcIisoXCJTdGF0dXM6IFwiK2wuc3RhdHVzK1wiLCBcIitsLnN0YXR1c1RleHQpKSk7cmV0dXJufXZhciB0PW5ldyBJbWFnZTt0LmNyb3NzT3JpZ2luPVwiQW5vbnltb3VzXCI7dC5vbmxvYWQ9ZnVuY3Rpb24oZSl7bi5uZXh0KHQpO24uY29tcGxldGUoKX07dC5vbmVycm9yPWZ1bmN0aW9uKGUpe24uZXJyb3IobmV3IEVycm9yKFwiRmFpbGVkIHRvIGxvYWQgdGlsZSBpbWFnZSAoXCIraStcIjogXCIrbytcIixcIithK1wiLFwiK3MrXCIsXCIrdStcIilcIikpfTt2YXIgcj1uZXcgQmxvYihbbC5yZXNwb25zZV0pO3Quc3JjPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHIpfTtsLm9uZXJyb3I9ZnVuY3Rpb24oZSl7bi5lcnJvcihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdGlsZSAoXCIraStcIjogXCIrbytcIixcIithK1wiLFwiK3MrXCIsXCIrdStcIilcIikpfTtsLm9udGltZW91dD1mdW5jdGlvbihlKXtuLmVycm9yKG5ldyBFcnJvcihcIlRpbGUgcmVxdWVzdCB0aW1lZCBvdXQgKFwiK2krXCI6IFwiK28rXCIsXCIrYStcIixcIitzK1wiLFwiK3UrXCIpXCIpKX07bC5vbmFib3J0PWZ1bmN0aW9uKGUpe24uZXJyb3IobmV3IEVycm9yKFwiVGlsZSByZXF1ZXN0IHdhcyBhYm9ydGVkIChcIitpK1wiOiBcIitvK1wiLFwiK2ErXCIsXCIrcytcIixcIit1K1wiKVwiKSl9O2wuc2VuZChudWxsKX0pLGZ1bmN0aW9uKCl7aWYobCE9bnVsbCl7bC5hYm9ydCgpfX1dfTtyZXR1cm4gZX0oKTtyLkltYWdlVGlsZUxvYWRlcj1pO3IuZGVmYXVsdD1pfSx7cnhqczo0M31dLDQ2MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5JbWFnZVRpbGVTdG9yZT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5faW1hZ2VzPXt9fWUucHJvdG90eXBlLmFkZEltYWdlPWZ1bmN0aW9uKGUsdCxyKXtpZighKHIgaW4gdGhpcy5faW1hZ2VzKSl7dGhpcy5faW1hZ2VzW3JdPXt9fXRoaXMuX2ltYWdlc1tyXVt0XT1lfTtlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1PYmplY3Qua2V5cyh0aGlzLl9pbWFnZXMpO2U8dC5sZW5ndGg7ZSsrKXt2YXIgcj10W2VdO3ZhciBuPXRoaXMuX2ltYWdlc1tyXTtmb3IodmFyIGk9MCxvPU9iamVjdC5rZXlzKG4pO2k8by5sZW5ndGg7aSsrKXt2YXIgYT1vW2ldO3dpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKG5bYV0uc3JjKTtkZWxldGUgblthXX1kZWxldGUgdGhpcy5faW1hZ2VzW3JdfX07ZS5wcm90b3R5cGUuZ2V0SW1hZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5faW1hZ2VzW3RdW2VdfTtlLnByb3RvdHlwZS5oYXNJbWFnZT1mdW5jdGlvbihlLHQpe3JldHVybiB0IGluIHRoaXMuX2ltYWdlcyYmZSBpbiB0aGlzLl9pbWFnZXNbdF19O3JldHVybiBlfSgpO3IuSW1hZ2VUaWxlU3RvcmU9bjtyLmRlZmF1bHQ9bn0se31dLDQ2MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5SZWdpb25PZkludGVyZXN0Q2FsY3VsYXRvcj12b2lkIDA7dmFyIG49ZShcIi4uL0dlb1wiKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl92aWV3cG9ydENvb3Jkcz1uZXcgbi5WaWV3cG9ydENvb3Jkc31lLnByb3RvdHlwZS5jb21wdXRlUmVnaW9uT2ZJbnRlcmVzdD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fdmlld3BvcnRCb3VuZGFyeVBvaW50cyg0KTt2YXIgaT10aGlzLl92aWV3cG9ydFBvaW50c0JvdW5kaW5nQm94KG4sZSxyKTt0aGlzLl9jbGlwQm91bmRpbmdCb3goaSk7dmFyIG89Mi90LndpZHRoO3ZhciBhPTIvdC5oZWlnaHQ7dmFyIHM9W1stLjUqbywuNSphXSxbLjUqbywuNSphXSxbLjUqbywtLjUqYV0sWy0uNSpvLC0uNSphXV07dmFyIHU9dGhpcy5fdmlld3BvcnRQb2ludHNCb3VuZGluZ0JveChzLGUscik7cmV0dXJue2Jib3g6aSxwaXhlbEhlaWdodDp1Lm1heFktdS5taW5ZLHBpeGVsV2lkdGg6dS5tYXhYLXUubWluWCsodS5taW5YPHUubWF4WD8wOjEpfX07ZS5wcm90b3R5cGUuX3ZpZXdwb3J0Qm91bmRhcnlQb2ludHM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107dmFyIHI9W1stMSwxXSxbMSwxXSxbMSwtMV0sWy0xLC0xXV07dmFyIG49W1syLDBdLFswLC0yXSxbLTIsMF0sWzAsMl1dO2Zvcih2YXIgaT0wO2k8NDsrK2kpe3ZhciBvPXJbaV07dmFyIGE9bltpXTtmb3IodmFyIHM9MDtzPGU7KytzKXt0LnB1c2goW29bMF0rYVswXSpzL2Usb1sxXSthWzFdKnMvZV0pfX1yZXR1cm4gdH07ZS5wcm90b3R5cGUuX3ZpZXdwb3J0UG9pbnRzQm91bmRpbmdCb3g9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7dmFyIGk9ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX3ZpZXdwb3J0Q29vcmRzLnZpZXdwb3J0VG9CYXNpYyhlWzBdLGVbMV0scix0LnBlcnNwZWN0aXZlKX0pO2lmKHIuZ3Bhbm8hPW51bGwpe3JldHVybiB0aGlzLl9ib3VuZGluZ0JveFBhbm8oaSl9ZWxzZXtyZXR1cm4gdGhpcy5fYm91bmRpbmdCb3goaSl9fTtlLnByb3RvdHlwZS5fYm91bmRpbmdCb3g9ZnVuY3Rpb24oZSl7dmFyIHQ9e21heFg6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heFk6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1pblg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pblk6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcil7dC5taW5YPU1hdGgubWluKHQubWluWCxlW3JdWzBdKTt0Lm1heFg9TWF0aC5tYXgodC5tYXhYLGVbcl1bMF0pO3QubWluWT1NYXRoLm1pbih0Lm1pblksZVtyXVsxXSk7dC5tYXhZPU1hdGgubWF4KHQubWF4WSxlW3JdWzFdKX1yZXR1cm4gdH07ZS5wcm90b3R5cGUuX2JvdW5kaW5nQm94UGFubz1mdW5jdGlvbihlKXt2YXIgcj10aGlzO3ZhciB0PVtdO3ZhciBuPVtdO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7KytpKXt0LnB1c2goZVtpXVswXSk7bi5wdXNoKGVbaV1bMV0pfXQuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiByLl9zaWduKGUtdCl9KTtuLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5fc2lnbihlLXQpfSk7dmFyIG89dGhpcy5faW50ZXJ2YWxQYW5vKHQpO3JldHVybnttYXhYOm9bMV0sbWF4WTpuW24ubGVuZ3RoLTFdLG1pblg6b1swXSxtaW5ZOm5bMF19fTtlLnByb3RvdHlwZS5faW50ZXJ2YWxQYW5vPWZ1bmN0aW9uKGUpe3ZhciB0PTA7dmFyIHI9LTE7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aC0xOysrbil7dmFyIGk9ZVtuKzFdLWVbbl07aWYoaT50KXt0PWk7cj1ufX12YXIgbz1lWzBdKzEtZVtlLmxlbmd0aC0xXTtpZihvPnQpe3JldHVybltlWzBdLGVbZS5sZW5ndGgtMV1dfWVsc2V7cmV0dXJuW2VbcisxXSxlW3JdXX19O2UucHJvdG90eXBlLl9jbGlwQm91bmRpbmdCb3g9ZnVuY3Rpb24oZSl7ZS5taW5YPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlLm1pblgpKTtlLm1heFg9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUubWF4WCkpO2UubWluWT1NYXRoLm1heCgwLE1hdGgubWluKDEsZS5taW5ZKSk7ZS5tYXhZPU1hdGgubWF4KDAsTWF0aC5taW4oMSxlLm1heFkpKX07ZS5wcm90b3R5cGUuX3NpZ249ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD8xOmU8MD8tMTowfTtyZXR1cm4gZX0oKTtyLlJlZ2lvbk9mSW50ZXJlc3RDYWxjdWxhdG9yPWk7ci5kZWZhdWx0PWl9LHtcIi4uL0dlb1wiOjI5NH1dLDQ2MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5UZXh0dXJlUHJvdmlkZXI9dm9pZCAwO3ZhciB1PWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgZz1lKFwidGhyZWVcIik7dmFyIGM9ZShcInJ4anNcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG4saSxvLGEscyl7dGhpcy5fZGlzcG9zZWQ9ZmFsc2U7dGhpcy5fa2V5PWU7aWYodDw9MHx8cjw9MCl7Y29uc29sZS53YXJuKFwiT3JpZ2luYWwgaW1hZ2Ugc2l6ZSAoXCIrdCtcIiwgXCIrcitcIikgaXMgaW52YWxpZCAoXCIrZStcIikuIFRpbGVzIHdpbGwgbm90IGJlIGxvYWRlZC5cIil9dGhpcy5fd2lkdGg9dDt0aGlzLl9oZWlnaHQ9cjt0aGlzLl9tYXhMZXZlbD1NYXRoLmNlaWwoTWF0aC5sb2coTWF0aC5tYXgocix0KSkvTWF0aC5sb2coMikpO3RoaXMuX2N1cnJlbnRMZXZlbD0tMTt0aGlzLl90aWxlU2l6ZT1uO3RoaXMuX3VwZGF0ZWQkPW5ldyBjLlN1YmplY3Q7dGhpcy5fY3JlYXRlZFN1YmplY3QkPW5ldyBjLlN1YmplY3Q7dGhpcy5fY3JlYXRlZCQ9dGhpcy5fY3JlYXRlZFN1YmplY3QkLnBpcGUodS5wdWJsaXNoUmVwbGF5KDEpLHUucmVmQ291bnQoKSk7dGhpcy5fY3JlYXRlZFN1YnNjcmlwdGlvbj10aGlzLl9jcmVhdGVkJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9oYXNTdWJqZWN0JD1uZXcgYy5TdWJqZWN0O3RoaXMuX2hhcyQ9dGhpcy5faGFzU3ViamVjdCQucGlwZSh1LnN0YXJ0V2l0aChmYWxzZSksdS5wdWJsaXNoUmVwbGF5KDEpLHUucmVmQ291bnQoKSk7dGhpcy5faGFzU3Vic2NyaXB0aW9uPXRoaXMuX2hhcyQuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fYWJvcnRGdW5jdGlvbnM9W107dGhpcy5fdGlsZVN1YnNjcmlwdGlvbnM9e307dGhpcy5fcmVuZGVyZWRDdXJyZW50TGV2ZWxUaWxlcz17fTt0aGlzLl9yZW5kZXJlZFRpbGVzPXt9O3RoaXMuX2JhY2tncm91bmQ9aTt0aGlzLl9jYW1lcmE9bnVsbDt0aGlzLl9pbWFnZVRpbGVMb2FkZXI9bzt0aGlzLl9pbWFnZVRpbGVTdG9yZT1hO3RoaXMuX3JlbmRlcmVyPXM7dGhpcy5fcmVuZGVyVGFyZ2V0PW51bGw7dGhpcy5fcm9pPW51bGx9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGlzcG9zZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3Bvc2VkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGFzVGV4dHVyZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhcyR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJrZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHR1cmVVcGRhdGVkJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0dXJlQ3JlYXRlZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NyZWF0ZWQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5fdGlsZVN1YnNjcmlwdGlvbnMpe2lmKCF0aGlzLl90aWxlU3Vic2NyaXB0aW9ucy5oYXNPd25Qcm9wZXJ0eShlKSl7Y29udGludWV9dGhpcy5fdGlsZVN1YnNjcmlwdGlvbnNbZV0udW5zdWJzY3JpYmUoKX10aGlzLl90aWxlU3Vic2NyaXB0aW9ucz17fTtmb3IodmFyIHQ9MCxyPXRoaXMuX2Fib3J0RnVuY3Rpb25zO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO24oKX10aGlzLl9hYm9ydEZ1bmN0aW9ucz1bXX07ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2lmKHRoaXMuX2Rpc3Bvc2VkKXtjb25zb2xlLndhcm4oXCJUZXh0dXJlIGFscmVhZHkgZGlzcG9zZWQgKFwiK3RoaXMuX2tleStcIilcIik7cmV0dXJufXRoaXMuYWJvcnQoKTtpZih0aGlzLl9yZW5kZXJUYXJnZXQhPW51bGwpe3RoaXMuX3JlbmRlclRhcmdldC5kaXNwb3NlKCk7dGhpcy5fcmVuZGVyVGFyZ2V0PW51bGx9dGhpcy5faW1hZ2VUaWxlU3RvcmUuZGlzcG9zZSgpO3RoaXMuX2ltYWdlVGlsZVN0b3JlPW51bGw7dGhpcy5fYmFja2dyb3VuZD1udWxsO3RoaXMuX2NhbWVyYT1udWxsO3RoaXMuX2ltYWdlVGlsZUxvYWRlcj1udWxsO3RoaXMuX3JlbmRlcmVyPW51bGw7dGhpcy5fcm9pPW51bGw7dGhpcy5fY3JlYXRlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2hhc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2Rpc3Bvc2VkPXRydWV9O2UucHJvdG90eXBlLnNldFJlZ2lvbk9mSW50ZXJlc3Q9ZnVuY3Rpb24oZSl7aWYodGhpcy5fd2lkdGg8PTB8fHRoaXMuX2hlaWdodDw9MCl7cmV0dXJufXRoaXMuX3JvaT1lO3ZhciB0PTEvdGhpcy5fcm9pLnBpeGVsV2lkdGg7dmFyIHI9MS90aGlzLl9yb2kucGl4ZWxIZWlnaHQ7dmFyIG49TWF0aC5tYXgocix0KTt2YXIgaT1NYXRoLm1heCgwLE1hdGgubWluKHRoaXMuX21heExldmVsLE1hdGguY2VpbChNYXRoLmxvZyhuKS9NYXRoLmxvZygyKSkpKTtpZihpIT09dGhpcy5fY3VycmVudExldmVsKXt0aGlzLmFib3J0KCk7dGhpcy5fY3VycmVudExldmVsPWk7aWYoISh0aGlzLl9jdXJyZW50TGV2ZWwgaW4gdGhpcy5fcmVuZGVyZWRUaWxlcykpe3RoaXMuX3JlbmRlcmVkVGlsZXNbdGhpcy5fY3VycmVudExldmVsXT1bXX10aGlzLl9yZW5kZXJlZEN1cnJlbnRMZXZlbFRpbGVzPXt9O2Zvcih2YXIgbz0wLGE9dGhpcy5fcmVuZGVyZWRUaWxlc1t0aGlzLl9jdXJyZW50TGV2ZWxdO288YS5sZW5ndGg7bysrKXt2YXIgcz1hW29dO3RoaXMuX3JlbmRlcmVkQ3VycmVudExldmVsVGlsZXNbdGhpcy5fdGlsZUtleSh0aGlzLl90aWxlU2l6ZSxzKV09dHJ1ZX19dmFyIHU9dGhpcy5fZ2V0VGlsZUNvb3JkcyhbdGhpcy5fcm9pLmJib3gubWluWCx0aGlzLl9yb2kuYmJveC5taW5ZXSk7dmFyIGM9dGhpcy5fZ2V0VGlsZUNvb3JkcyhbdGhpcy5fcm9pLmJib3gubWF4WCx0aGlzLl9yb2kuYmJveC5tYXhZXSk7dmFyIGw9dGhpcy5fZ2V0VGlsZXModSxjKTtpZih0aGlzLl9jYW1lcmE9PW51bGwpe3RoaXMuX2NhbWVyYT1uZXcgZy5PcnRob2dyYXBoaWNDYW1lcmEoLXRoaXMuX3dpZHRoLzIsdGhpcy5fd2lkdGgvMix0aGlzLl9oZWlnaHQvMiwtdGhpcy5faGVpZ2h0LzIsLTEsMSk7dGhpcy5fY2FtZXJhLnBvc2l0aW9uLno9MTt2YXIgaD10aGlzLl9yZW5kZXJlci5nZXRDb250ZXh0KCk7dmFyIHA9aC5nZXRQYXJhbWV0ZXIoaC5NQVhfVEVYVFVSRV9TSVpFKTt2YXIgZj1NYXRoLm1heCh0aGlzLl93aWR0aCx0aGlzLl9oZWlnaHQpO3ZhciBkPXA+Zj8xOnAvZjt2YXIgdj1NYXRoLmZsb29yKGQqdGhpcy5fd2lkdGgpO3ZhciBtPU1hdGguZmxvb3IoZCp0aGlzLl9oZWlnaHQpO3RoaXMuX3JlbmRlclRhcmdldD1uZXcgZy5XZWJHTFJlbmRlclRhcmdldCh2LG0se2RlcHRoQnVmZmVyOmZhbHNlLGZvcm1hdDpnLlJHQkZvcm1hdCxtYWdGaWx0ZXI6Zy5MaW5lYXJGaWx0ZXIsbWluRmlsdGVyOmcuTGluZWFyRmlsdGVyLHN0ZW5jaWxCdWZmZXI6ZmFsc2V9KTt0aGlzLl9yZW5kZXJUb1RhcmdldCgwLDAsdGhpcy5fd2lkdGgsdGhpcy5faGVpZ2h0LHRoaXMuX2JhY2tncm91bmQpO3RoaXMuX2NyZWF0ZWRTdWJqZWN0JC5uZXh0KHRoaXMuX3JlbmRlclRhcmdldC50ZXh0dXJlKTt0aGlzLl9oYXNTdWJqZWN0JC5uZXh0KHRydWUpfXRoaXMuX2ZldGNoVGlsZXMobCl9O2UucHJvdG90eXBlLnNldFRpbGVTaXplPWZ1bmN0aW9uKGUpe3RoaXMuX3RpbGVTaXplPWV9O2UucHJvdG90eXBlLnVwZGF0ZUJhY2tncm91bmQ9ZnVuY3Rpb24oZSl7dGhpcy5fYmFja2dyb3VuZD1lfTtlLnByb3RvdHlwZS5fZmV0Y2hUaWxlPWZ1bmN0aW9uKHQscixuLGksbyxhLGUscyl7dmFyIHU9dGhpczt2YXIgYz10aGlzLl9pbWFnZVRpbGVMb2FkZXIuZ2V0VGlsZSh0aGlzLl9rZXksbixpLG8sYSxlLHMpO3ZhciBsPWNbMF07dmFyIGg9Y1sxXTt0aGlzLl9hYm9ydEZ1bmN0aW9ucy5wdXNoKGgpO3ZhciBwPXRoaXMuX3RpbGVLZXkodGhpcy5fdGlsZVNpemUsdCk7dmFyIGY9bC5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dS5fcmVuZGVyVG9UYXJnZXQobixpLG8sYSxlKTt1Ll9yZW1vdmVGcm9tRGljdGlvbmFyeShwLHUuX3RpbGVTdWJzY3JpcHRpb25zKTt1Ll9yZW1vdmVGcm9tQXJyYXkoaCx1Ll9hYm9ydEZ1bmN0aW9ucyk7dS5fc2V0VGlsZVJlbmRlcmVkKHQsdS5fY3VycmVudExldmVsKTt1Ll9pbWFnZVRpbGVTdG9yZS5hZGRJbWFnZShlLHAscik7dS5fdXBkYXRlZCQubmV4dCh0cnVlKX0sZnVuY3Rpb24oZSl7dS5fcmVtb3ZlRnJvbURpY3Rpb25hcnkocCx1Ll90aWxlU3Vic2NyaXB0aW9ucyk7dS5fcmVtb3ZlRnJvbUFycmF5KGgsdS5fYWJvcnRGdW5jdGlvbnMpO2NvbnNvbGUuZXJyb3IoZSl9KTtpZighZi5jbG9zZWQpe3RoaXMuX3RpbGVTdWJzY3JpcHRpb25zW3BdPWZ9fTtlLnByb3RvdHlwZS5fZmV0Y2hUaWxlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl90aWxlU2l6ZSpNYXRoLnBvdygyLHRoaXMuX21heExldmVsLXRoaXMuX2N1cnJlbnRMZXZlbCk7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO3ZhciBvPXRoaXMuX3RpbGVLZXkodGhpcy5fdGlsZVNpemUsaSk7aWYobyBpbiB0aGlzLl9yZW5kZXJlZEN1cnJlbnRMZXZlbFRpbGVzfHxvIGluIHRoaXMuX3RpbGVTdWJzY3JpcHRpb25zKXtjb250aW51ZX12YXIgYT10KmlbMF07dmFyIHM9dCppWzFdO3ZhciB1PWErdD50aGlzLl93aWR0aD90aGlzLl93aWR0aC1hOnQ7dmFyIGM9cyt0PnRoaXMuX2hlaWdodD90aGlzLl9oZWlnaHQtczp0O2lmKHRoaXMuX2ltYWdlVGlsZVN0b3JlLmhhc0ltYWdlKG8sdGhpcy5fY3VycmVudExldmVsKSl7dGhpcy5fcmVuZGVyVG9UYXJnZXQoYSxzLHUsYyx0aGlzLl9pbWFnZVRpbGVTdG9yZS5nZXRJbWFnZShvLHRoaXMuX2N1cnJlbnRMZXZlbCkpO3RoaXMuX3NldFRpbGVSZW5kZXJlZChpLHRoaXMuX2N1cnJlbnRMZXZlbCk7dGhpcy5fdXBkYXRlZCQubmV4dCh0cnVlKTtjb250aW51ZX12YXIgbD1NYXRoLmZsb29yKHUvdCp0aGlzLl90aWxlU2l6ZSk7dmFyIGg9TWF0aC5mbG9vcihjL3QqdGhpcy5fdGlsZVNpemUpO3RoaXMuX2ZldGNoVGlsZShpLHRoaXMuX2N1cnJlbnRMZXZlbCxhLHMsdSxjLGwsaCl9fTtlLnByb3RvdHlwZS5fZ2V0VGlsZUNvb3Jkcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl90aWxlU2l6ZSpNYXRoLnBvdygyLHRoaXMuX21heExldmVsLXRoaXMuX2N1cnJlbnRMZXZlbCk7dmFyIHI9TWF0aC5jZWlsKHRoaXMuX3dpZHRoL3QpLTE7dmFyIG49TWF0aC5jZWlsKHRoaXMuX2hlaWdodC90KS0xO3JldHVybltNYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuX3dpZHRoKmVbMF0vdCksciksTWF0aC5taW4oTWF0aC5mbG9vcih0aGlzLl9oZWlnaHQqZVsxXS90KSxuKV19O2UucHJvdG90eXBlLl9nZXRUaWxlcz1mdW5jdGlvbihlLHQpe3ZhciByPVtdO2lmKGVbMF0+dFswXSl7dmFyIG49dGhpcy5fdGlsZVNpemUqTWF0aC5wb3coMix0aGlzLl9tYXhMZXZlbC10aGlzLl9jdXJyZW50TGV2ZWwpO3ZhciBpPU1hdGguY2VpbCh0aGlzLl93aWR0aC9uKS0xO2Zvcih2YXIgbz1lWzBdO288PWk7bysrKXtyLnB1c2gobyl9Zm9yKHZhciBvPTA7bzw9dFswXTtvKyspe3IucHVzaChvKX19ZWxzZXtmb3IodmFyIG89ZVswXTtvPD10WzBdO28rKyl7ci5wdXNoKG8pfX12YXIgYT1bXTtmb3IodmFyIHM9MCx1PXI7czx1Lmxlbmd0aDtzKyspe3ZhciBvPXVbc107Zm9yKHZhciBjPWVbMV07Yzw9dFsxXTtjKyspe2EucHVzaChbbyxjXSl9fXJldHVybiBhfTtlLnByb3RvdHlwZS5fcmVtb3ZlRnJvbUFycmF5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5pbmRleE9mKGUpO2lmKHIhPT0tMSl7dC5zcGxpY2UociwxKX19O2UucHJvdG90eXBlLl9yZW1vdmVGcm9tRGljdGlvbmFyeT1mdW5jdGlvbihlLHQpe2lmKGUgaW4gdCl7ZGVsZXRlIHRbZV19fTtlLnByb3RvdHlwZS5fcmVuZGVyVG9UYXJnZXQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz1uZXcgZy5UZXh0dXJlKGkpO28ubWluRmlsdGVyPWcuTGluZWFyRmlsdGVyO28ubmVlZHNVcGRhdGU9dHJ1ZTt2YXIgYT1uZXcgZy5QbGFuZUdlb21ldHJ5KHIsbik7dmFyIHM9bmV3IGcuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDpvLHNpZGU6Zy5Gcm9udFNpZGV9KTt2YXIgdT1uZXcgZy5NZXNoKGEscyk7dS5wb3NpdGlvbi54PS10aGlzLl93aWR0aC8yK2Urci8yO3UucG9zaXRpb24ueT10aGlzLl9oZWlnaHQvMi10LW4vMjt2YXIgYz1uZXcgZy5TY2VuZTtjLmFkZCh1KTt2YXIgbD10aGlzLl9yZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTt0aGlzLl9yZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQodGhpcy5fcmVuZGVyVGFyZ2V0KTt0aGlzLl9yZW5kZXJlci5yZW5kZXIoYyx0aGlzLl9jYW1lcmEpO3RoaXMuX3JlbmRlcmVyLnNldFJlbmRlclRhcmdldChsKTtjLnJlbW92ZSh1KTthLmRpc3Bvc2UoKTtzLmRpc3Bvc2UoKTtvLmRpc3Bvc2UoKX07ZS5wcm90b3R5cGUuX3NldFRpbGVSZW5kZXJlZD1mdW5jdGlvbihlLHQpe3ZhciByPU9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkVGlsZXMpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT10fSk7Zm9yKHZhciBuPTAsaT1yO248aS5sZW5ndGg7bisrKXt2YXIgbz1pW25dO3ZhciBhPU1hdGgucG93KDIsby10KTtpZihvPHQpe3ZhciBzPU1hdGguZmxvb3IoYSplWzBdKTt2YXIgdT1NYXRoLmZsb29yKGEqZVsxXSk7Zm9yKHZhciBjPTAsbD10aGlzLl9yZW5kZXJlZFRpbGVzW29dLnNsaWNlKCk7YzxsLmxlbmd0aDtjKyspe3ZhciBoPWxbY107aWYoaFswXT09PXMmJmhbMV09PT11KXt2YXIgcD10aGlzLl9yZW5kZXJlZFRpbGVzW29dLmluZGV4T2YoaCk7dGhpcy5fcmVuZGVyZWRUaWxlc1tvXS5zcGxpY2UocCwxKX19fWVsc2V7dmFyIGY9YSplWzBdO3ZhciBkPWYrYS0xO3ZhciB2PWEqZVsxXTt2YXIgbT12K2EtMTtmb3IodmFyIGc9MCxfPXRoaXMuX3JlbmRlcmVkVGlsZXNbb10uc2xpY2UoKTtnPF8ubGVuZ3RoO2crKyl7dmFyIGg9X1tnXTtpZihoWzBdPj1mJiZoWzBdPD1kJiZoWzFdPj12JiZoWzFdPD1tKXt2YXIgcD10aGlzLl9yZW5kZXJlZFRpbGVzW29dLmluZGV4T2YoaCk7dGhpcy5fcmVuZGVyZWRUaWxlc1tvXS5zcGxpY2UocCwxKX19fWlmKHRoaXMuX3JlbmRlcmVkVGlsZXNbb10ubGVuZ3RoPT09MCl7ZGVsZXRlIHRoaXMuX3JlbmRlcmVkVGlsZXNbb119fXRoaXMuX3JlbmRlcmVkVGlsZXNbdF0ucHVzaChlKTt0aGlzLl9yZW5kZXJlZEN1cnJlbnRMZXZlbFRpbGVzW3RoaXMuX3RpbGVLZXkodGhpcy5fdGlsZVNpemUsZSldPXRydWV9O2UucHJvdG90eXBlLl90aWxlS2V5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrXCItXCIrdFswXStcIi1cIit0WzFdfTtyZXR1cm4gZX0oKTtyLlRleHR1cmVQcm92aWRlcj1uO3IuZGVmYXVsdD1ufSx7cnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxLHRocmVlOjI0Mn1dLDQ2NDpbZnVuY3Rpb24oZSx0LHIpe2FyZ3VtZW50c1s0XVszMDVdWzBdLmFwcGx5KHIsYXJndW1lbnRzKX0se2R1cDozMDV9XSw0NjU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuRE9NPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fZG9jdW1lbnQ9ISFlP2U6ZG9jdW1lbnR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZG9jdW1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvY3VtZW50fSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuY3JlYXRlRWxlbWVudD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKTtpZighIXQpe24uY2xhc3NOYW1lPXR9aWYoISFyKXtyLmFwcGVuZENoaWxkKG4pfXJldHVybiBufTtyZXR1cm4gZX0oKTtyLkRPTT1uO3IuZGVmYXVsdD1ufSx7fV0sNDY2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkV2ZW50RW1pdHRlcj12b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fZXZlbnRzPXt9fWUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZXZlbnRzW2VdPXRoaXMuX2V2ZW50c1tlXXx8W107dGhpcy5fZXZlbnRzW2VdLnB1c2godCk7cmV0dXJufTtlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSx0KXtpZighZSl7dGhpcy5fZXZlbnRzPXt9O3JldHVybn1pZighdGhpcy5fbGlzdGVucyhlKSl7dmFyIHI9dGhpcy5fZXZlbnRzW2VdLmluZGV4T2YodCk7aWYocj49MCl7dGhpcy5fZXZlbnRzW2VdLnNwbGljZShyLDEpfWlmKHRoaXMuX2V2ZW50c1tlXS5sZW5ndGgpe2RlbGV0ZSB0aGlzLl9ldmVudHNbZV19fWVsc2V7ZGVsZXRlIHRoaXMuX2V2ZW50c1tlXX1yZXR1cm59O2UucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24oZSx0KXtpZighdGhpcy5fbGlzdGVucyhlKSl7cmV0dXJufWZvcih2YXIgcj0wLG49dGhpcy5fZXZlbnRzW2VdO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2kuY2FsbCh0aGlzLHQpfXJldHVybn07ZS5wcm90b3R5cGUuX2xpc3RlbnM9ZnVuY3Rpb24oZSl7cmV0dXJuISEodGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbZV0pfTtyZXR1cm4gZX0oKTtyLkV2ZW50RW1pdHRlcj1uO3IuZGVmYXVsdD1ufSx7fV0sNDY3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNldHRpbmdzPXZvaWQgMDt2YXIgbj1lKFwiLi4vVmlld2VyXCIpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImJhc2VJbWFnZVNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX2Jhc2VJbWFnZVNpemV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImJhc2VQYW5vcmFtYVNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX2Jhc2VQYW5vcmFtYVNpemV9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIm1heEltYWdlU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fbWF4SW1hZ2VTaXplfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7dC5zZXRPcHRpb25zPWZ1bmN0aW9uKGUpe3QuX2Jhc2VJbWFnZVNpemU9ZS5iYXNlSW1hZ2VTaXplIT1udWxsP2UuYmFzZUltYWdlU2l6ZTpuLkltYWdlU2l6ZS5TaXplNjQwO3QuX2Jhc2VQYW5vcmFtYVNpemU9ZS5iYXNlUGFub3JhbWFTaXplIT1udWxsP2UuYmFzZVBhbm9yYW1hU2l6ZTpuLkltYWdlU2l6ZS5TaXplMjA0ODt0Ll9tYXhJbWFnZVNpemU9ZS5tYXhJbWFnZVNpemUhPW51bGw/ZS5tYXhJbWFnZVNpemU6bi5JbWFnZVNpemUuU2l6ZTIwNDh9O3JldHVybiB0fSgpO3IuU2V0dGluZ3M9aTtyLmRlZmF1bHQ9aX0se1wiLi4vVmlld2VyXCI6MzAyfV0sNDY4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLmlzV2ViR0xTdXBwb3J0ZWQ9ci5pc1dlYkdMU3VwcG9ydGVkQ2FjaGVkPXIuaXNCbG9iU3VwcG9ydGVkPXIuaXNPYmplY3RTdXBwb3J0ZWQ9ci5pc0pTT05TdXBwb3J0ZWQ9ci5pc0Z1bmN0aW9uU3VwcG9ydGVkPXIuaXNBcnJheVN1cHBvcnRlZD1yLmlzQnJvd3Nlcj12b2lkIDA7ZnVuY3Rpb24gbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIGRvY3VtZW50IT09XCJ1bmRlZmluZWRcIn1yLmlzQnJvd3Nlcj1uO2Z1bmN0aW9uIGkoKXtyZXR1cm4hIShBcnJheS5wcm90b3R5cGUmJkFycmF5LnByb3RvdHlwZS5maWx0ZXImJkFycmF5LnByb3RvdHlwZS5pbmRleE9mJiZBcnJheS5wcm90b3R5cGUubWFwJiZBcnJheS5wcm90b3R5cGUucmV2ZXJzZSl9ci5pc0FycmF5U3VwcG9ydGVkPWk7ZnVuY3Rpb24gbygpe3JldHVybiEhKEZ1bmN0aW9uLnByb3RvdHlwZSYmRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpfXIuaXNGdW5jdGlvblN1cHBvcnRlZD1vO2Z1bmN0aW9uIGEoKXtyZXR1cm5cIkpTT05cImluIHdpbmRvdyYmXCJwYXJzZVwiaW4gSlNPTiYmXCJzdHJpbmdpZnlcImluIEpTT059ci5pc0pTT05TdXBwb3J0ZWQ9YTtmdW5jdGlvbiBzKCl7cmV0dXJuISEoT2JqZWN0LmtleXMmJk9iamVjdC5hc3NpZ24pfXIuaXNPYmplY3RTdXBwb3J0ZWQ9cztmdW5jdGlvbiB1KCl7cmV0dXJuXCJCbG9iXCJpbiB3aW5kb3cmJlwiVVJMXCJpbiB3aW5kb3d9ci5pc0Jsb2JTdXBwb3J0ZWQ9dTt2YXIgYz11bmRlZmluZWQ7ZnVuY3Rpb24gbCgpe2lmKGM9PT11bmRlZmluZWQpe2M9aCgpfXJldHVybiBjfXIuaXNXZWJHTFN1cHBvcnRlZENhY2hlZD1sO2Z1bmN0aW9uIGgoKXt2YXIgZT17YWxwaGE6ZmFsc2UsYW50aWFsaWFzOmZhbHNlLGRlcHRoOnRydWUsZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDpmYWxzZSxwcmVtdWx0aXBsaWVkQWxwaGE6dHJ1ZSxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6ZmFsc2Usc3RlbmNpbDp0cnVlfTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3ZhciByPXQuZ2V0Q29udGV4dChcIndlYmdsXCIsZSl8fHQuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLGUpO2lmKCFyKXtyZXR1cm4gZmFsc2V9dmFyIG49W1wiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCJdO3ZhciBpPXIuZ2V0U3VwcG9ydGVkRXh0ZW5zaW9ucygpO2Zvcih2YXIgbz0wLGE9bjtvPGEubGVuZ3RoO28rKyl7dmFyIHM9YVtvXTtpZihpLmluZGV4T2Yocyk9PT0tMSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1yLmlzV2ViR0xTdXBwb3J0ZWQ9aH0se31dLDQ2OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5VcmxzPXZvaWQgMDt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXt9T2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCJleHBsb3JlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBpLl9zY2hlbWUrXCI6Ly9cIitpLl9leHBsb3JlSG9zdH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwib3JpZ2luXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBpLl9vcmlnaW59LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcInRpbGVTY2hlbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuX3NjaGVtZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwidGlsZURvbWFpblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5faW1hZ2VUaWxlSG9zdH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2kuY2x1c3RlclJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBpLl9zY2hlbWUrXCI6Ly9cIitpLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25Ib3N0K1wiL1wiK2UrXCIvdjEuMC9hbGlnbmVkLmpzb256XCJ9O2kuZXhwb3JlSW1hZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuX3NjaGVtZStcIjovL1wiK2kuX2V4cGxvcmVIb3N0K1wiL2FwcC8/cEtleT1cIitlK1wiJmZvY3VzPXBob3RvXCJ9O2kuZXhwb3JlVXNlcj1mdW5jdGlvbihlKXtyZXR1cm4gaS5fc2NoZW1lK1wiOi8vXCIraS5fZXhwbG9yZUhvc3QrXCIvYXBwL3VzZXIvXCIrZX07aS5mYWxjb3JNb2RlbD1mdW5jdGlvbihlKXtyZXR1cm4gaS5fc2NoZW1lK1wiOi8vXCIraS5fYXBpSG9zdCtcIi92My9tb2RlbC5qc29uP2NsaWVudF9pZD1cIitlfTtpLnByb3RvTWVzaD1mdW5jdGlvbihlKXtyZXR1cm4gaS5fc2NoZW1lK1wiOi8vXCIraS5fbWVzaEhvc3QrXCIvdjIvbWVzaC9cIitlfTtpLnRodW1ibmFpbD1mdW5jdGlvbihlLHQscil7dmFyIG49ISFyP1wiP29yaWdpbj1cIityOlwiXCI7cmV0dXJuIGkuX3NjaGVtZStcIjovL1wiK2kuX2ltYWdlSG9zdCtcIi9cIitlK1wiL3RodW1iLVwiK3QrXCIuanBnXCIrbn07aS5zZXRPcHRpb25zPWZ1bmN0aW9uKGUpe2lmKCFlKXtyZXR1cm59aWYoISFlLmFwaUhvc3Qpe2kuX2FwaUhvc3Q9ZS5hcGlIb3N0fWlmKCEhZS5jbHVzdGVyUmVjb25zdHJ1Y3Rpb25Ib3N0KXtpLl9jbHVzdGVyUmVjb25zdHJ1Y3Rpb25Ib3N0PWUuY2x1c3RlclJlY29uc3RydWN0aW9uSG9zdH1pZighIWUuZXhwbG9yZUhvc3Qpe2kuX2V4cGxvcmVIb3N0PWUuZXhwbG9yZUhvc3R9aWYoISFlLmltYWdlSG9zdCl7aS5faW1hZ2VIb3N0PWUuaW1hZ2VIb3N0fWlmKCEhZS5pbWFnZVRpbGVIb3N0KXtpLl9pbWFnZVRpbGVIb3N0PWUuaW1hZ2VUaWxlSG9zdH1pZighIWUubWVzaEhvc3Qpe2kuX21lc2hIb3N0PWUubWVzaEhvc3R9aWYoISFlLnNjaGVtZSl7aS5fc2NoZW1lPWUuc2NoZW1lfX07aS5fYXBpSG9zdD1cImEubWFwaWxsYXJ5LmNvbVwiO2kuX2NsdXN0ZXJSZWNvbnN0cnVjdGlvbkhvc3Q9XCJjbHVzdGVyLXJlY29uc3RydWN0aW9ucy5tYXBpbGxhcnkuY29tXCI7aS5fZXhwbG9yZUhvc3Q9XCJ3d3cubWFwaWxsYXJ5LmNvbVwiO2kuX2ltYWdlSG9zdD1cImltYWdlcy5tYXBpbGxhcnkuY29tXCI7aS5faW1hZ2VUaWxlSG9zdD1cImxvcmlzLm1hcGlsbGFyeS5jb21cIjtpLl9tZXNoSG9zdD1cIm1lc2hlcy5tYXBpbGxhcnkuY29tXCI7aS5fb3JpZ2luPVwibWFwaWxsYXJ5LndlYmdsXCI7aS5fc2NoZW1lPVwiaHR0cHNcIjtyZXR1cm4gaX0oKTtyLlVybHM9bjtyLmRlZmF1bHQ9bn0se31dLDQ3MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5BbGlnbm1lbnQ9dm9pZCAwO3ZhciBuOyhmdW5jdGlvbihlKXtlW2VbXCJCb3R0b21cIl09MF09XCJCb3R0b21cIjtlW2VbXCJCb3R0b21MZWZ0XCJdPTFdPVwiQm90dG9tTGVmdFwiO2VbZVtcIkJvdHRvbVJpZ2h0XCJdPTJdPVwiQm90dG9tUmlnaHRcIjtlW2VbXCJDZW50ZXJcIl09M109XCJDZW50ZXJcIjtlW2VbXCJMZWZ0XCJdPTRdPVwiTGVmdFwiO2VbZVtcIlJpZ2h0XCJdPTVdPVwiUmlnaHRcIjtlW2VbXCJUb3BcIl09Nl09XCJUb3BcIjtlW2VbXCJUb3BMZWZ0XCJdPTddPVwiVG9wTGVmdFwiO2VbZVtcIlRvcFJpZ2h0XCJdPThdPVwiVG9wUmlnaHRcIn0pKG49ci5BbGlnbm1lbnR8fChyLkFsaWdubWVudD17fSkpO3IuZGVmYXVsdD1ufSx7fV0sNDcxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkNhY2hlU2VydmljZT12b2lkIDA7dmFyIG49ZShcInJ4anNcIik7dmFyIGk9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBhPWUoXCIuLi9HcmFwaFwiKTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9ncmFwaFNlcnZpY2U9ZTt0aGlzLl9zdGF0ZVNlcnZpY2U9dDt0aGlzLl9zdGFydGVkPWZhbHNlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0YXJ0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0ZWR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciBvPXRoaXM7aWYodGhpcy5fc3RhcnRlZCl7cmV0dXJufXRoaXMuX3VuY2FjaGVTdWJzY3JpcHRpb249dGhpcy5fc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZShpLmRpc3RpbmN0VW50aWxDaGFuZ2VkKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZS5jdXJyZW50Tm9kZS5rZXl9KSxpLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnN0YXRlLnRyYWplY3Rvcnk7dmFyIHI9dC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5fSk7dmFyIG49dFt0Lmxlbmd0aC0xXS5zZXF1ZW5jZUtleTtyZXR1cm5bcixuXX0pLGkuYnVmZmVyQ291bnQoMSw1KSxpLndpdGhMYXRlc3RGcm9tKHRoaXMuX2dyYXBoU2VydmljZS5ncmFwaE1vZGUkKSxpLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTt2YXIgbj10WzBdWzBdO3ZhciBpPXI9PT1hLkdyYXBoTW9kZS5TZXF1ZW5jZT90WzBdWzFdOnVuZGVmaW5lZDtyZXR1cm4gby5fZ3JhcGhTZXJ2aWNlLnVuY2FjaGUkKG4saSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fY2FjaGVOb2RlU3Vic2NyaXB0aW9uPXRoaXMuX2dyYXBoU2VydmljZS5ncmFwaE1vZGUkLnBpcGUoaS5za2lwKDEpLGkud2l0aExhdGVzdEZyb20odGhpcy5fc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQpLGkuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVybiB0PT09YS5HcmFwaE1vZGUuU2VxdWVuY2U/by5fa2V5VG9FZGdlcyhyLnN0YXRlLmN1cnJlbnROb2RlLmtleSxmdW5jdGlvbihlKXtyZXR1cm4gZS5zZXF1ZW5jZUVkZ2VzJH0pOm4uZnJvbShyLnN0YXRlLnRyYWplY3RvcnkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmtleX0pLnNsaWNlKHIuc3RhdGUuY3VycmVudEluZGV4KSkucGlwZShpLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBvLl9rZXlUb0VkZ2VzKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BhdGlhbEVkZ2VzJH0pfSw2KSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7fSk7dGhpcy5fc3RhcnRlZD10cnVlfTtlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX3N0YXJ0ZWQpe3JldHVybn10aGlzLl91bmNhY2hlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fdW5jYWNoZVN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX2NhY2hlTm9kZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2NhY2hlTm9kZVN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3N0YXJ0ZWQ9ZmFsc2V9O2UucHJvdG90eXBlLl9rZXlUb0VkZ2VzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2dyYXBoU2VydmljZS5jYWNoZU5vZGUkKHQpLnBpcGUoaS5zd2l0Y2hNYXAoZSksaS5maXJzdChmdW5jdGlvbihlKXtyZXR1cm4gZS5jYWNoZWR9KSxpLnRpbWVvdXQoMTVlMyksaS5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY2FjaGUgZWRnZXMgKFwiK3QrXCIpLlwiLGUpO3JldHVybiBuLmVtcHR5KCl9KSl9O3JldHVybiBlfSgpO3IuQ2FjaGVTZXJ2aWNlPW87ci5kZWZhdWx0PW99LHtcIi4uL0dyYXBoXCI6Mjk1LHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQ3MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Db21wb25lbnRDb250cm9sbGVyPXZvaWQgMDt2YXIgcz1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIHU9ZShcIi4uL0NvbXBvbmVudFwiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbixpLG8pe3ZhciBhPXRoaXM7dGhpcy5fY29udGFpbmVyPWU7dGhpcy5fb2JzZXJ2ZXI9cjt0aGlzLl9uYXZpZ2F0b3I9dDt0aGlzLl9vcHRpb25zPWkhPW51bGw/aTp7fTt0aGlzLl9rZXk9bjt0aGlzLl9uYXZpZ2FibGU9bj09bnVsbDt0aGlzLl9jb21wb25lbnRTZXJ2aWNlPSEhbz9vOm5ldyB1LkNvbXBvbmVudFNlcnZpY2UodGhpcy5fY29udGFpbmVyLHRoaXMuX25hdmlnYXRvcik7dGhpcy5fY292ZXJDb21wb25lbnQ9dGhpcy5fY29tcG9uZW50U2VydmljZS5nZXRDb3ZlcigpO3RoaXMuX2luaXRpYWxpemVDb21wb25lbnRzKCk7aWYobil7dGhpcy5faW5pdGlsaXplQ292ZXJDb21wb25lbnQoKTt0aGlzLl9zdWJzY3JpYmVDb3ZlckNvbXBvbmVudCgpfWVsc2V7dGhpcy5fbmF2aWdhdG9yLm1vdmVkVG9LZXkkLnBpcGUocy5maXJzdChmdW5jdGlvbihlKXtyZXR1cm4gZSE9bnVsbH0pKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7YS5fa2V5PWU7YS5fY29tcG9uZW50U2VydmljZS5kZWFjdGl2YXRlQ292ZXIoKTthLl9jb3ZlckNvbXBvbmVudC5jb25maWd1cmUoe2tleTphLl9rZXksc3RhdGU6dS5Db3ZlclN0YXRlLkhpZGRlbn0pO2EuX3N1YnNjcmliZUNvdmVyQ29tcG9uZW50KCk7YS5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5zdGFydCgpO2EuX25hdmlnYXRvci5jYWNoZVNlcnZpY2Uuc3RhcnQoKTthLl9uYXZpZ2F0b3IucGFuU2VydmljZS5zdGFydCgpO2EuX29ic2VydmVyLnN0YXJ0RW1pdCgpfSl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm5hdmlnYWJsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmF2aWdhYmxlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb21wb25lbnRTZXJ2aWNlLmdldChlKX07ZS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fY29tcG9uZW50U2VydmljZS5hY3RpdmF0ZShlKX07ZS5wcm90b3R5cGUuYWN0aXZhdGVDb3Zlcj1mdW5jdGlvbigpe3RoaXMuX2NvdmVyQ29tcG9uZW50LmNvbmZpZ3VyZSh7c3RhdGU6dS5Db3ZlclN0YXRlLlZpc2libGV9KX07ZS5wcm90b3R5cGUuZGVhY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLl9jb21wb25lbnRTZXJ2aWNlLmRlYWN0aXZhdGUoZSl9O2UucHJvdG90eXBlLmRlYWN0aXZhdGVDb3Zlcj1mdW5jdGlvbigpe3RoaXMuX2NvdmVyQ29tcG9uZW50LmNvbmZpZ3VyZSh7c3RhdGU6dS5Db3ZlclN0YXRlLkxvYWRpbmd9KX07ZS5wcm90b3R5cGUuX2luaXRpYWxpemVDb21wb25lbnRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fb3B0aW9uczt0aGlzLl91RmFsc2UoZS5iYWNrZ3JvdW5kLFwiYmFja2dyb3VuZFwiKTt0aGlzLl91RmFsc2UoZS5kZWJ1ZyxcImRlYnVnXCIpO3RoaXMuX3VGYWxzZShlLmltYWdlLFwiaW1hZ2VcIik7dGhpcy5fdUZhbHNlKGUubWFya2VyLFwibWFya2VyXCIpO3RoaXMuX3VGYWxzZShlLm5hdmlnYXRpb24sXCJuYXZpZ2F0aW9uXCIpO3RoaXMuX3VGYWxzZShlLnBvcHVwLFwicG9wdXBcIik7dGhpcy5fdUZhbHNlKGUucm91dGUsXCJyb3V0ZVwiKTt0aGlzLl91RmFsc2UoZS5zbGlkZXIsXCJzbGlkZXJcIik7dGhpcy5fdUZhbHNlKGUuc3BhdGlhbERhdGEsXCJzcGF0aWFsRGF0YVwiKTt0aGlzLl91RmFsc2UoZS50YWcsXCJ0YWdcIik7dGhpcy5fdVRydWUoZS5hdHRyaWJ1dGlvbixcImF0dHJpYnV0aW9uXCIpO3RoaXMuX3VUcnVlKGUuYmVhcmluZyxcImJlYXJpbmdcIik7dGhpcy5fdVRydWUoZS5jYWNoZSxcImNhY2hlXCIpO3RoaXMuX3VUcnVlKGUuZGlyZWN0aW9uLFwiZGlyZWN0aW9uXCIpO3RoaXMuX3VUcnVlKGUuaW1hZ2VQbGFuZSxcImltYWdlUGxhbmVcIik7dGhpcy5fdVRydWUoZS5rZXlib2FyZCxcImtleWJvYXJkXCIpO3RoaXMuX3VUcnVlKGUubG9hZGluZyxcImxvYWRpbmdcIik7dGhpcy5fdVRydWUoZS5tb3VzZSxcIm1vdXNlXCIpO3RoaXMuX3VUcnVlKGUuc2VxdWVuY2UsXCJzZXF1ZW5jZVwiKTt0aGlzLl91VHJ1ZShlLnN0YXRzLFwic3RhdHNcIik7dGhpcy5fdVRydWUoZS56b29tLFwiem9vbVwiKX07ZS5wcm90b3R5cGUuX2luaXRpbGl6ZUNvdmVyQ29tcG9uZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fb3B0aW9uczt0aGlzLl9jb3ZlckNvbXBvbmVudC5jb25maWd1cmUoe2tleTp0aGlzLl9rZXl9KTtpZihlLmNvdmVyPT09dW5kZWZpbmVkfHxlLmNvdmVyKXt0aGlzLmFjdGl2YXRlQ292ZXIoKX1lbHNle3RoaXMuZGVhY3RpdmF0ZUNvdmVyKCl9fTtlLnByb3RvdHlwZS5fc2V0TmF2aWdhYmxlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX25hdmlnYWJsZT09PWUpe3JldHVybn10aGlzLl9uYXZpZ2FibGU9ZTt0aGlzLl9vYnNlcnZlci5uYXZpZ2FibGUkLm5leHQoZSl9O2UucHJvdG90eXBlLl9zdWJzY3JpYmVDb3ZlckNvbXBvbmVudD1mdW5jdGlvbigpe3ZhciBuPXRoaXM7dGhpcy5fY292ZXJDb21wb25lbnQuY29uZmlndXJhdGlvbiQucGlwZShzLmRpc3RpbmN0VW50aWxDaGFuZ2VkKHVuZGVmaW5lZCxmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0ZX0pKS5zdWJzY3JpYmUoZnVuY3Rpb24ocil7aWYoci5zdGF0ZT09PXUuQ292ZXJTdGF0ZS5Mb2FkaW5nKXtuLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnRLZXkkLnBpcGUocy5maXJzdCgpLHMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWU9PW51bGx8fGUhPT1yLmtleTtpZih0KXtuLl9zZXROYXZpZ2FibGUoZmFsc2UpfXJldHVybiB0P24uX25hdmlnYXRvci5tb3ZlVG9LZXkkKHIua2V5KTpuLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlJC5waXBlKHMuZmlyc3QoKSl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7bi5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5zdGFydCgpO24uX25hdmlnYXRvci5jYWNoZVNlcnZpY2Uuc3RhcnQoKTtuLl9uYXZpZ2F0b3IucGFuU2VydmljZS5zdGFydCgpO24uX29ic2VydmVyLnN0YXJ0RW1pdCgpO24uX2NvdmVyQ29tcG9uZW50LmNvbmZpZ3VyZSh7c3RhdGU6dS5Db3ZlclN0YXRlLkhpZGRlbn0pO24uX2NvbXBvbmVudFNlcnZpY2UuZGVhY3RpdmF0ZUNvdmVyKCk7bi5fc2V0TmF2aWdhYmxlKHRydWUpfSxmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGRlYWN0aXZhdGUgY292ZXIuXCIsZSk7bi5fY292ZXJDb21wb25lbnQuY29uZmlndXJlKHtzdGF0ZTp1LkNvdmVyU3RhdGUuVmlzaWJsZX0pfSl9ZWxzZSBpZihyLnN0YXRlPT09dS5Db3ZlclN0YXRlLlZpc2libGUpe24uX29ic2VydmVyLnN0b3BFbWl0KCk7bi5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5zdG9wKCk7bi5fbmF2aWdhdG9yLmNhY2hlU2VydmljZS5zdG9wKCk7bi5fbmF2aWdhdG9yLnBsYXlTZXJ2aWNlLnN0b3AoKTtuLl9uYXZpZ2F0b3IucGFuU2VydmljZS5zdG9wKCk7bi5fY29tcG9uZW50U2VydmljZS5hY3RpdmF0ZUNvdmVyKCk7bi5fc2V0TmF2aWdhYmxlKHIua2V5PT1udWxsKX19KX07ZS5wcm90b3R5cGUuX3VGYWxzZT1mdW5jdGlvbihlLHQpe2lmKGU9PT11bmRlZmluZWQpe3RoaXMuX2NvbXBvbmVudFNlcnZpY2UuZGVhY3RpdmF0ZSh0KTtyZXR1cm59aWYodHlwZW9mIGU9PT1cImJvb2xlYW5cIil7aWYoZSl7dGhpcy5fY29tcG9uZW50U2VydmljZS5hY3RpdmF0ZSh0KX1lbHNle3RoaXMuX2NvbXBvbmVudFNlcnZpY2UuZGVhY3RpdmF0ZSh0KX1yZXR1cm59dGhpcy5fY29tcG9uZW50U2VydmljZS5jb25maWd1cmUodCxlKTt0aGlzLl9jb21wb25lbnRTZXJ2aWNlLmFjdGl2YXRlKHQpfTtlLnByb3RvdHlwZS5fdVRydWU9ZnVuY3Rpb24oZSx0KXtpZihlPT09dW5kZWZpbmVkKXt0aGlzLl9jb21wb25lbnRTZXJ2aWNlLmFjdGl2YXRlKHQpO3JldHVybn1pZih0eXBlb2YgZT09PVwiYm9vbGVhblwiKXtpZihlKXt0aGlzLl9jb21wb25lbnRTZXJ2aWNlLmFjdGl2YXRlKHQpfWVsc2V7dGhpcy5fY29tcG9uZW50U2VydmljZS5kZWFjdGl2YXRlKHQpfXJldHVybn10aGlzLl9jb21wb25lbnRTZXJ2aWNlLmNvbmZpZ3VyZSh0LGUpO3RoaXMuX2NvbXBvbmVudFNlcnZpY2UuYWN0aXZhdGUodCl9O3JldHVybiBlfSgpO3IuQ29tcG9uZW50Q29udHJvbGxlcj1ufSx7XCIuLi9Db21wb25lbnRcIjoyOTEsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQ3MzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Db250YWluZXI9dm9pZCAwO3ZhciBpPWUoXCIuLi9SZW5kZXJcIik7dmFyIG89ZShcIi4uL1V0aWxzXCIpO3ZhciBhPWUoXCIuLi9WaWV3ZXJcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG4pe3RoaXMuX2RvbT0hIW4/bjpuZXcgby5ET007aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0aGlzLl9jb250YWluZXI9dGhpcy5fZG9tLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCF0aGlzLl9jb250YWluZXIpe3Rocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lciAnXCIrZStcIicgbm90IGZvdW5kLlwiKX19ZWxzZSBpZihlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe3RoaXMuX2NvbnRhaW5lcj1lfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlOiAnY29udGFpbmVyJyBtdXN0IGJlIGEgU3RyaW5nIG9yIEhUTUxFbGVtZW50LlwiKX10aGlzLmlkPSEhdGhpcy5fY29udGFpbmVyLmlkP3RoaXMuX2NvbnRhaW5lci5pZDpcIm1hcGlsbGFyeS1qcy1mYWxsYmFjay1jb250YWluZXItaWRcIjt0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1hcGlsbGFyeS1qc1wiKTt0aGlzLl9jYW52YXNDb250YWluZXI9dGhpcy5fZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixcIm1hcGlsbGFyeS1qcy1pbnRlcmFjdGl2ZVwiLHRoaXMuX2NvbnRhaW5lcik7dGhpcy5fZG9tQ29udGFpbmVyPXRoaXMuX2RvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsXCJtYXBpbGxhcnktanMtZG9tXCIsdGhpcy5fY29udGFpbmVyKTt0aGlzLnJlbmRlclNlcnZpY2U9bmV3IGkuUmVuZGVyU2VydmljZSh0aGlzLl9jb250YWluZXIsdC5jdXJyZW50U3RhdGUkLHIucmVuZGVyTW9kZSk7dGhpcy5nbFJlbmRlcmVyPW5ldyBpLkdMUmVuZGVyZXIodGhpcy5fY2FudmFzQ29udGFpbmVyLHRoaXMucmVuZGVyU2VydmljZSx0aGlzLl9kb20pO3RoaXMuZG9tUmVuZGVyZXI9bmV3IGkuRE9NUmVuZGVyZXIodGhpcy5fZG9tQ29udGFpbmVyLHRoaXMucmVuZGVyU2VydmljZSx0LmN1cnJlbnRTdGF0ZSQpO3RoaXMua2V5Ym9hcmRTZXJ2aWNlPW5ldyBhLktleWJvYXJkU2VydmljZSh0aGlzLl9jYW52YXNDb250YWluZXIpO3RoaXMubW91c2VTZXJ2aWNlPW5ldyBhLk1vdXNlU2VydmljZSh0aGlzLl9jb250YWluZXIsdGhpcy5fY2FudmFzQ29udGFpbmVyLHRoaXMuX2RvbUNvbnRhaW5lcixkb2N1bWVudCk7dGhpcy50b3VjaFNlcnZpY2U9bmV3IGEuVG91Y2hTZXJ2aWNlKHRoaXMuX2NhbnZhc0NvbnRhaW5lcix0aGlzLl9kb21Db250YWluZXIpO3RoaXMuc3ByaXRlU2VydmljZT1uZXcgYS5TcHJpdGVTZXJ2aWNlKHIuc3ByaXRlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJlbGVtZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJ9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYW52YXNDb250YWluZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhbnZhc0NvbnRhaW5lcn0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRvbUNvbnRhaW5lclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tQ29udGFpbmVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7cmV0dXJuIGV9KCk7ci5Db250YWluZXI9bjtyLmRlZmF1bHQ9bn0se1wiLi4vUmVuZGVyXCI6Mjk3LFwiLi4vVXRpbHNcIjozMDEsXCIuLi9WaWV3ZXJcIjozMDJ9XSw0NzQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuSW1hZ2VTaXplPXZvaWQgMDt2YXIgbjsoZnVuY3Rpb24oZSl7ZVtlW1wiU2l6ZTMyMFwiXT0zMjBdPVwiU2l6ZTMyMFwiO2VbZVtcIlNpemU2NDBcIl09NjQwXT1cIlNpemU2NDBcIjtlW2VbXCJTaXplMTAyNFwiXT0xMDI0XT1cIlNpemUxMDI0XCI7ZVtlW1wiU2l6ZTIwNDhcIl09MjA0OF09XCJTaXplMjA0OFwifSkobj1yLkltYWdlU2l6ZXx8KHIuSW1hZ2VTaXplPXt9KSl9LHt9XSw0NzU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuS2V5Ym9hcmRTZXJ2aWNlPXZvaWQgMDt2YXIgbj1lKFwicnhqc1wiKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fa2V5RG93biQ9bi5mcm9tRXZlbnQoZSxcImtleWRvd25cIik7dGhpcy5fa2V5VXAkPW4uZnJvbUV2ZW50KGUsXCJrZXl1cFwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJrZXlEb3duJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa2V5RG93biR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJrZXlVcCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleVVwJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO3JldHVybiBlfSgpO3IuS2V5Ym9hcmRTZXJ2aWNlPWk7ci5kZWZhdWx0PWl9LHtyeGpzOjQzfV0sNDc2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLkxvYWRpbmdTZXJ2aWNlPXZvaWQgMDt2YXIgbj1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGk9ZShcInJ4anNcIik7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fbG9hZGVyc1N1YmplY3QkPW5ldyBpLlN1YmplY3Q7dGhpcy5fbG9hZGVycyQ9dGhpcy5fbG9hZGVyc1N1YmplY3QkLnBpcGUobi5zY2FuKGZ1bmN0aW9uKGUsdCl7aWYodC50YXNrIT09dW5kZWZpbmVkKXtlW3QudGFza109dC5sb2FkaW5nfXJldHVybiBlfSx7fSksbi5zdGFydFdpdGgoe30pLG4ucHVibGlzaFJlcGxheSgxKSxuLnJlZkNvdW50KCkpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImxvYWRpbmckXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkZXJzJC5waXBlKG4ubWFwKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXtpZighZS5oYXNPd25Qcm9wZXJ0eSh0KSl7Y29udGludWV9aWYoZVt0XSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX0pLG4uZGVib3VuY2VUaW1lKDEwMCksbi5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpKX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLnRhc2tMb2FkaW5nJD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbG9hZGVycyQucGlwZShuLm1hcChmdW5jdGlvbihlKXtyZXR1cm4hIWVbdF19KSxuLmRlYm91bmNlVGltZSgxMDApLG4uZGlzdGluY3RVbnRpbENoYW5nZWQoKSl9O2UucHJvdG90eXBlLnN0YXJ0TG9hZGluZz1mdW5jdGlvbihlKXt0aGlzLl9sb2FkZXJzU3ViamVjdCQubmV4dCh7bG9hZGluZzp0cnVlLHRhc2s6ZX0pfTtlLnByb3RvdHlwZS5zdG9wTG9hZGluZz1mdW5jdGlvbihlKXt0aGlzLl9sb2FkZXJzU3ViamVjdCQubmV4dCh7bG9hZGluZzpmYWxzZSx0YXNrOmV9KX07cmV0dXJuIGV9KCk7ci5Mb2FkaW5nU2VydmljZT1vO3IuZGVmYXVsdD1vfSx7cnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDc3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLk1vdXNlU2VydmljZT12b2lkIDA7dmFyIHU9ZShcInJ4anNcIik7dmFyIGM9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLGksdCxyKXt2YXIgbj10aGlzO3RoaXMuX2FjdGl2ZVN1YmplY3QkPW5ldyB1LkJlaGF2aW9yU3ViamVjdChmYWxzZSk7dGhpcy5fYWN0aXZlJD10aGlzLl9hY3RpdmVTdWJqZWN0JC5waXBlKGMuZGlzdGluY3RVbnRpbENoYW5nZWQoKSxjLnB1Ymxpc2hSZXBsYXkoMSksYy5yZWZDb3VudCgpKTt0aGlzLl9jbGFpbU1vdXNlJD1uZXcgdS5TdWJqZWN0O3RoaXMuX2NsYWltV2hlZWwkPW5ldyB1LlN1YmplY3Q7dGhpcy5fZGVmZXJQaXhlbENsYWltcyQ9bmV3IHUuU3ViamVjdDt0aGlzLl9kZWZlclBpeGVscyQ9dGhpcy5fZGVmZXJQaXhlbENsYWltcyQucGlwZShjLnNjYW4oZnVuY3Rpb24oZSx0KXtpZih0LmRlZmVyUGl4ZWxzPT1udWxsKXtkZWxldGUgZVt0Lm5hbWVdfWVsc2V7ZVt0Lm5hbWVdPXQuZGVmZXJQaXhlbHN9cmV0dXJuIGV9LHt9KSxjLm1hcChmdW5jdGlvbihlKXt2YXIgdD0tMTtmb3IodmFyIHIgaW4gZSl7aWYoIWUuaGFzT3duUHJvcGVydHkocikpe2NvbnRpbnVlfXZhciBuPWVbcl07aWYobj50KXt0PW59fXJldHVybiB0fSksYy5zdGFydFdpdGgoLTEpLGMucHVibGlzaFJlcGxheSgxKSxjLnJlZkNvdW50KCkpO3RoaXMuX2RlZmVyUGl4ZWxzJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl9kb2N1bWVudE1vdXNlTW92ZSQ9dS5mcm9tRXZlbnQocixcIm1vdXNlbW92ZVwiKTt0aGlzLl9kb2N1bWVudE1vdXNlVXAkPXUuZnJvbUV2ZW50KHIsXCJtb3VzZXVwXCIpO3RoaXMuX21vdXNlRG93biQ9dS5mcm9tRXZlbnQoaSxcIm1vdXNlZG93blwiKTt0aGlzLl9tb3VzZUxlYXZlJD11LmZyb21FdmVudChpLFwibW91c2VsZWF2ZVwiKTt0aGlzLl9tb3VzZU1vdmUkPXUuZnJvbUV2ZW50KGksXCJtb3VzZW1vdmVcIik7dGhpcy5fbW91c2VVcCQ9dS5mcm9tRXZlbnQoaSxcIm1vdXNldXBcIik7dGhpcy5fbW91c2VPdXQkPXUuZnJvbUV2ZW50KGksXCJtb3VzZW91dFwiKTt0aGlzLl9tb3VzZU92ZXIkPXUuZnJvbUV2ZW50KGksXCJtb3VzZW92ZXJcIik7dGhpcy5fZG9tTW91c2VEb3duJD11LmZyb21FdmVudCh0LFwibW91c2Vkb3duXCIpO3RoaXMuX2RvbU1vdXNlTW92ZSQ9dS5mcm9tRXZlbnQodCxcIm1vdXNlbW92ZVwiKTt0aGlzLl9jbGljayQ9dS5mcm9tRXZlbnQoaSxcImNsaWNrXCIpO3RoaXMuX2NvbnRleHRNZW51JD11LmZyb21FdmVudChpLFwiY29udGV4dG1lbnVcIik7dGhpcy5fZGJsQ2xpY2skPXUubWVyZ2UodS5mcm9tRXZlbnQoZSxcImNsaWNrXCIpLHUuZnJvbUV2ZW50KGksXCJkYmxjbGlja1wiKSkucGlwZShjLmJ1ZmZlckNvdW50KDMsMSksYy5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXTt2YXIgcj1lWzFdO3ZhciBuPWVbMl07cmV0dXJuIHQudHlwZT09PVwiY2xpY2tcIiYmci50eXBlPT09XCJjbGlja1wiJiZuLnR5cGU9PT1cImRibGNsaWNrXCImJnQudGFyZ2V0LnBhcmVudE5vZGU9PT1pJiZyLnRhcmdldC5wYXJlbnROb2RlPT09aX0pLGMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlWzJdfSksYy5zaGFyZSgpKTt1Lm1lcmdlKHRoaXMuX2RvbU1vdXNlRG93biQsdGhpcy5fZG9tTW91c2VNb3ZlJCx0aGlzLl9kYmxDbGljayQsdGhpcy5fY29udGV4dE1lbnUkKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSk7dGhpcy5fbW91c2VXaGVlbCQ9dS5tZXJnZSh1LmZyb21FdmVudChpLFwid2hlZWxcIiksdS5mcm9tRXZlbnQodCxcIndoZWVsXCIpKS5waXBlKGMuc2hhcmUoKSk7dGhpcy5fY29uc2lzdGVudENvbnRleHRNZW51JD11Lm1lcmdlKHRoaXMuX21vdXNlRG93biQsdGhpcy5fbW91c2VNb3ZlJCx0aGlzLl9tb3VzZU91dCQsdGhpcy5fbW91c2VVcCQsdGhpcy5fY29udGV4dE1lbnUkKS5waXBlKGMuYnVmZmVyQ291bnQoMywxKSxjLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZVswXS50eXBlPT09XCJtb3VzZWRvd25cIiYmZVsxXS50eXBlPT09XCJjb250ZXh0bWVudVwiJiZlWzJdLnR5cGU9PT1cIm1vdXNldXBcIn0pLGMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlWzFdfSksYy5zaGFyZSgpKTt2YXIgbz11Lm1lcmdlKHUuZnJvbUV2ZW50KHdpbmRvdyxcImJsdXJcIiksdGhpcy5fZG9jdW1lbnRNb3VzZVVwJC5waXBlKGMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmJ1dHRvbj09PTB9KSkpLnBpcGUoYy5zaGFyZSgpKTt2YXIgYT10aGlzLl9jcmVhdGVNb3VzZURyYWdJbml0aWF0ZSQodGhpcy5fbW91c2VEb3duJCxvLHRydWUpLnBpcGUoYy5zaGFyZSgpKTt0aGlzLl9tb3VzZURyYWdTdGFydCQ9dGhpcy5fY3JlYXRlTW91c2VEcmFnU3RhcnQkKGEpLnBpcGUoYy5zaGFyZSgpKTt0aGlzLl9tb3VzZURyYWckPXRoaXMuX2NyZWF0ZU1vdXNlRHJhZyQoYSxvKS5waXBlKGMuc2hhcmUoKSk7dGhpcy5fbW91c2VEcmFnRW5kJD10aGlzLl9jcmVhdGVNb3VzZURyYWdFbmQkKHRoaXMuX21vdXNlRHJhZ1N0YXJ0JCxvKS5waXBlKGMuc2hhcmUoKSk7dmFyIHM9dGhpcy5fY3JlYXRlTW91c2VEcmFnSW5pdGlhdGUkKHRoaXMuX2RvbU1vdXNlRG93biQsbyxmYWxzZSkucGlwZShjLnNoYXJlKCkpO3RoaXMuX2RvbU1vdXNlRHJhZ1N0YXJ0JD10aGlzLl9jcmVhdGVNb3VzZURyYWdTdGFydCQocykucGlwZShjLnNoYXJlKCkpO3RoaXMuX2RvbU1vdXNlRHJhZyQ9dGhpcy5fY3JlYXRlTW91c2VEcmFnJChzLG8pLnBpcGUoYy5zaGFyZSgpKTt0aGlzLl9kb21Nb3VzZURyYWdFbmQkPXRoaXMuX2NyZWF0ZU1vdXNlRHJhZ0VuZCQodGhpcy5fZG9tTW91c2VEcmFnU3RhcnQkLG8pLnBpcGUoYy5zaGFyZSgpKTt0aGlzLl9wcm94aW1hdGVDbGljayQ9dGhpcy5fbW91c2VEb3duJC5waXBlKGMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9jbGljayQucGlwZShjLnRha2VVbnRpbChuLl9jcmVhdGVEZWZlcnJlZE1vdXNlTW92ZSQoZSxuLl9kb2N1bWVudE1vdXNlTW92ZSQpKSxjLnRha2UoMSkpfSksYy5zaGFyZSgpKTt0aGlzLl9zdGF0aWNDbGljayQ9dGhpcy5fbW91c2VEb3duJC5waXBlKGMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9jbGljayQucGlwZShjLnRha2VVbnRpbChuLl9kb2N1bWVudE1vdXNlTW92ZSQpLGMudGFrZSgxKSl9KSxjLnNoYXJlKCkpO3RoaXMuX21vdXNlRHJhZ1N0YXJ0JC5zdWJzY3JpYmUoKTt0aGlzLl9tb3VzZURyYWckLnN1YnNjcmliZSgpO3RoaXMuX21vdXNlRHJhZ0VuZCQuc3Vic2NyaWJlKCk7dGhpcy5fZG9tTW91c2VEcmFnU3RhcnQkLnN1YnNjcmliZSgpO3RoaXMuX2RvbU1vdXNlRHJhZyQuc3Vic2NyaWJlKCk7dGhpcy5fZG9tTW91c2VEcmFnRW5kJC5zdWJzY3JpYmUoKTt0aGlzLl9zdGF0aWNDbGljayQuc3Vic2NyaWJlKCk7dGhpcy5fbW91c2VPd25lciQ9dGhpcy5fY3JlYXRlT3duZXIkKHRoaXMuX2NsYWltTW91c2UkKS5waXBlKGMucHVibGlzaFJlcGxheSgxKSxjLnJlZkNvdW50KCkpO3RoaXMuX3doZWVsT3duZXIkPXRoaXMuX2NyZWF0ZU93bmVyJCh0aGlzLl9jbGFpbVdoZWVsJCkucGlwZShjLnB1Ymxpc2hSZXBsYXkoMSksYy5yZWZDb3VudCgpKTt0aGlzLl9tb3VzZU93bmVyJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTt0aGlzLl93aGVlbE93bmVyJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhY3RpdmUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYWN0aXZhdGUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVTdWJqZWN0JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRvY3VtZW50TW91c2VNb3ZlJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9jdW1lbnRNb3VzZU1vdmUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZG9jdW1lbnRNb3VzZVVwJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9jdW1lbnRNb3VzZVVwJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRvbU1vdXNlRHJhZ1N0YXJ0JFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tTW91c2VEcmFnU3RhcnQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZG9tTW91c2VEcmFnJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tTW91c2VEcmFnJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRvbU1vdXNlRHJhZ0VuZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbU1vdXNlRHJhZ0VuZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkb21Nb3VzZURvd24kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21Nb3VzZURvd24kfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZG9tTW91c2VNb3ZlJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tTW91c2VNb3ZlJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlT3duZXIkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZU93bmVyJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlRG93biRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdXNlRG93biR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtb3VzZU1vdmUkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZU1vdmUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibW91c2VMZWF2ZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdXNlTGVhdmUkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibW91c2VPdXQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZU91dCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtb3VzZU92ZXIkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZU92ZXIkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibW91c2VVcCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdXNlVXAkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2xpY2skXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGljayR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkYmxDbGljayRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RibENsaWNrJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbnRleHRNZW51JFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uc2lzdGVudENvbnRleHRNZW51JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlV2hlZWwkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3VzZVdoZWVsJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlRHJhZ1N0YXJ0JFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW91c2VEcmFnU3RhcnQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibW91c2VEcmFnJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW91c2VEcmFnJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1vdXNlRHJhZ0VuZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdXNlRHJhZ0VuZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwcm94aW1hdGVDbGljayRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3hpbWF0ZUNsaWNrJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0YXRpY0NsaWNrJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGljQ2xpY2skfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuY2xhaW1Nb3VzZT1mdW5jdGlvbihlLHQpe3RoaXMuX2NsYWltTW91c2UkLm5leHQoe25hbWU6ZSx6aW5kZXg6dH0pfTtlLnByb3RvdHlwZS51bmNsYWltTW91c2U9ZnVuY3Rpb24oZSl7dGhpcy5fY2xhaW1Nb3VzZSQubmV4dCh7bmFtZTplLHppbmRleDpudWxsfSl9O2UucHJvdG90eXBlLmRlZmVyUGl4ZWxzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZGVmZXJQaXhlbENsYWltcyQubmV4dCh7bmFtZTplLGRlZmVyUGl4ZWxzOnR9KX07ZS5wcm90b3R5cGUudW5kZWZlclBpeGVscz1mdW5jdGlvbihlKXt0aGlzLl9kZWZlclBpeGVsQ2xhaW1zJC5uZXh0KHtuYW1lOmUsZGVmZXJQaXhlbHM6bnVsbH0pfTtlLnByb3RvdHlwZS5jbGFpbVdoZWVsPWZ1bmN0aW9uKGUsdCl7dGhpcy5fY2xhaW1XaGVlbCQubmV4dCh7bmFtZTplLHppbmRleDp0fSl9O2UucHJvdG90eXBlLnVuY2xhaW1XaGVlbD1mdW5jdGlvbihlKXt0aGlzLl9jbGFpbVdoZWVsJC5uZXh0KHtuYW1lOmUsemluZGV4Om51bGx9KX07ZS5wcm90b3R5cGUuZmlsdGVyZWQkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2ZpbHRlcmVkKGUsdCx0aGlzLl9tb3VzZU93bmVyJCl9O2UucHJvdG90eXBlLmZpbHRlcmVkV2hlZWwkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2ZpbHRlcmVkKGUsdCx0aGlzLl93aGVlbE93bmVyJCl9O2UucHJvdG90eXBlLl9jcmVhdGVEZWZlcnJlZE1vdXNlTW92ZSQ9ZnVuY3Rpb24obixlKXtyZXR1cm4gZS5waXBlKGMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY2xpZW50WC1uLmNsaWVudFg7dmFyIHI9ZS5jbGllbnRZLW4uY2xpZW50WTtyZXR1cm5bZSxNYXRoLnNxcnQodCp0K3IqcildfSksYy53aXRoTGF0ZXN0RnJvbSh0aGlzLl9kZWZlclBpeGVscyQpLGMuZmlsdGVyKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj10WzBdLG49dFsxXSxpPWVbMV07cmV0dXJuIG4+aX0pLGMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj10WzBdLG49dFsxXSxpPWVbMV07cmV0dXJuIHJ9KSl9O2UucHJvdG90eXBlLl9jcmVhdGVNb3VzZURyYWckPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gZS5waXBlKGMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVybiByfSksYy5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHUuY29uY2F0KHUub2YoZSksci5fZG9jdW1lbnRNb3VzZU1vdmUkKS5waXBlKGMudGFrZVVudGlsKHQpKX0pKX07ZS5wcm90b3R5cGUuX2NyZWF0ZU1vdXNlRHJhZ0VuZCQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5waXBlKGMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBpcGUoYy5maXJzdCgpKX0pKX07ZS5wcm90b3R5cGUuX2NyZWF0ZU1vdXNlRHJhZ1N0YXJ0JD1mdW5jdGlvbihlKXtyZXR1cm4gZS5waXBlKGMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO3JldHVybiB0fSkpfTtlLnByb3RvdHlwZS5fY3JlYXRlTW91c2VEcmFnSW5pdGlhdGUkPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBlLnBpcGUoYy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYnV0dG9uPT09MH0pLGMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1LmNvbWJpbmVMYXRlc3QodS5vZihlKSxyP24uX2NyZWF0ZURlZmVycmVkTW91c2VNb3ZlJChlLG4uX2RvY3VtZW50TW91c2VNb3ZlJCk6bi5fZG9jdW1lbnRNb3VzZU1vdmUkKS5waXBlKGMudGFrZVVudGlsKHQpLGMudGFrZSgxKSl9KSl9O2UucHJvdG90eXBlLl9jcmVhdGVPd25lciQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGlwZShjLnNjYW4oZnVuY3Rpb24oZSx0KXtpZih0LnppbmRleD09bnVsbCl7ZGVsZXRlIGVbdC5uYW1lXX1lbHNle2VbdC5uYW1lXT10LnppbmRleH1yZXR1cm4gZX0se30pLGMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7dmFyIHI9LTE7Zm9yKHZhciBuIGluIGUpe2lmKCFlLmhhc093blByb3BlcnR5KG4pKXtjb250aW51ZX1pZihlW25dPnIpe3I9ZVtuXTt0PW59fXJldHVybiB0fSksYy5zdGFydFdpdGgobnVsbCkpfTtlLnByb3RvdHlwZS5fZmlsdGVyZWQ9ZnVuY3Rpb24obixlLHQpe3JldHVybiBlLnBpcGUoYy53aXRoTGF0ZXN0RnJvbSh0KSxjLmZpbHRlcihmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gcj09PW59KSxjLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gdH0pKX07cmV0dXJuIGV9KCk7ci5Nb3VzZVNlcnZpY2U9bjtyLmRlZmF1bHQ9bn0se3J4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQ3ODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5OYXZpZ2F0b3I9dm9pZCAwO3ZhciBoPWUoXCJyeGpzXCIpO3ZhciBvPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgcD1lKFwiLi4vQVBJXCIpO3ZhciBmPWUoXCIuLi9HcmFwaFwiKTt2YXIgbj1lKFwiLi4vRWRnZVwiKTt2YXIgaT1lKFwiLi4vRXJyb3JcIik7dmFyIGQ9ZShcIi4uL1N0YXRlXCIpO3ZhciB2PWUoXCIuLi9WaWV3ZXJcIik7dmFyIG09ZShcIi4vUGFuU2VydmljZVwiKTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbixpLG8sYSxzLHUsYyxsKXt0aGlzLl9hcGlWMz1uIT1udWxsP246bmV3IHAuQVBJdjMoZSxyKTt0aGlzLl9pbWFnZUxvYWRpbmdTZXJ2aWNlPW8hPW51bGw/bzpuZXcgZi5JbWFnZUxvYWRpbmdTZXJ2aWNlO3RoaXMuX2dyYXBoU2VydmljZT1pIT1udWxsP2k6bmV3IGYuR3JhcGhTZXJ2aWNlKG5ldyBmLkdyYXBoKHRoaXMuYXBpVjMpLHRoaXMuX2ltYWdlTG9hZGluZ1NlcnZpY2UpO3RoaXMuX2xvYWRpbmdTZXJ2aWNlPWEhPW51bGw/YTpuZXcgdi5Mb2FkaW5nU2VydmljZTt0aGlzLl9sb2FkaW5nTmFtZT1cIm5hdmlnYXRvclwiO3RoaXMuX3N0YXRlU2VydmljZT1zIT1udWxsP3M6bmV3IGQuU3RhdGVTZXJ2aWNlKHQudHJhbnNpdGlvbk1vZGUpO3RoaXMuX2NhY2hlU2VydmljZT11IT1udWxsP3U6bmV3IHYuQ2FjaGVTZXJ2aWNlKHRoaXMuX2dyYXBoU2VydmljZSx0aGlzLl9zdGF0ZVNlcnZpY2UpO3RoaXMuX3BsYXlTZXJ2aWNlPWMhPW51bGw/YzpuZXcgdi5QbGF5U2VydmljZSh0aGlzLl9ncmFwaFNlcnZpY2UsdGhpcy5fc3RhdGVTZXJ2aWNlKTt0aGlzLl9wYW5TZXJ2aWNlPWwhPW51bGw/bDpuZXcgbS5QYW5TZXJ2aWNlKHRoaXMuX2dyYXBoU2VydmljZSx0aGlzLl9zdGF0ZVNlcnZpY2UsdC5jb21iaW5lZFBhbm5pbmcpO3RoaXMuX2tleVJlcXVlc3RlZCQ9bmV3IGguQmVoYXZpb3JTdWJqZWN0KG51bGwpO3RoaXMuX21vdmVkVG9LZXkkPW5ldyBoLkJlaGF2aW9yU3ViamVjdChudWxsKTt0aGlzLl9yZXF1ZXN0JD1udWxsO3RoaXMuX3JlcXVlc3RTdWJzY3JpcHRpb249bnVsbDt0aGlzLl9ub2RlUmVxdWVzdFN1YnNjcmlwdGlvbj1udWxsfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFwaVYzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcGlWM30sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNhY2hlU2VydmljZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGVTZXJ2aWNlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZ3JhcGhTZXJ2aWNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncmFwaFNlcnZpY2V9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpbWFnZUxvYWRpbmdTZXJ2aWNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbWFnZUxvYWRpbmdTZXJ2aWNlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibG9hZGluZ1NlcnZpY2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRpbmdTZXJ2aWNlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibW92ZWRUb0tleSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdmVkVG9LZXkkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGFuU2VydmljZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuU2VydmljZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBsYXlTZXJ2aWNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5U2VydmljZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0YXRlU2VydmljZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVTZXJ2aWNlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUubW92ZVRvS2V5JD1mdW5jdGlvbihlKXt0aGlzLl9hYm9ydFJlcXVlc3QoXCJ0byBrZXkgXCIrZSk7dGhpcy5fbG9hZGluZ1NlcnZpY2Uuc3RhcnRMb2FkaW5nKHRoaXMuX2xvYWRpbmdOYW1lKTt2YXIgdD10aGlzLl9tb3ZlVG9LZXkkKGUpO3JldHVybiB0aGlzLl9tYWtlUmVxdWVzdCQodCl9O2UucHJvdG90eXBlLm1vdmVEaXIkPWZ1bmN0aW9uKGkpe3ZhciB0PXRoaXM7dGhpcy5fYWJvcnRSZXF1ZXN0KFwiaW4gZGlyIFwiK24uRWRnZURpcmVjdGlvbltpXSk7dGhpcy5fbG9hZGluZ1NlcnZpY2Uuc3RhcnRMb2FkaW5nKHRoaXMuX2xvYWRpbmdOYW1lKTt2YXIgZT10aGlzLnN0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQucGlwZShvLmZpcnN0KCksby5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4oW24uRWRnZURpcmVjdGlvbi5OZXh0LG4uRWRnZURpcmVjdGlvbi5QcmV2XS5pbmRleE9mKGkpPi0xP2Uuc2VxdWVuY2VFZGdlcyQ6ZS5zcGF0aWFsRWRnZXMkKS5waXBlKG8uZmlyc3QoKSxvLm1hcChmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWUuZWRnZXM7dDxyLmxlbmd0aDt0Kyspe3ZhciBuPXJbdF07aWYobi5kYXRhLmRpcmVjdGlvbj09PWkpe3JldHVybiBuLnRvfX1yZXR1cm4gbnVsbH0pKX0pLG8ubWVyZ2VNYXAoZnVuY3Rpb24oZSl7aWYoZT09bnVsbCl7dC5fbG9hZGluZ1NlcnZpY2Uuc3RvcExvYWRpbmcodC5fbG9hZGluZ05hbWUpO3JldHVybiBoLnRocm93RXJyb3IobmV3IEVycm9yKFwiRGlyZWN0aW9uIChcIitpK1wiKSBkb2VzIG5vdCBleGlzdCBmb3IgY3VycmVudCBub2RlLlwiKSl9cmV0dXJuIHQuX21vdmVUb0tleSQoZSl9KSk7cmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0JChlKX07ZS5wcm90b3R5cGUubW92ZUNsb3NlVG8kPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpczt0aGlzLl9hYm9ydFJlcXVlc3QoXCJ0byBsYXQgXCIrdCtcIiwgbG9uIFwiK3IpO3RoaXMuX2xvYWRpbmdTZXJ2aWNlLnN0YXJ0TG9hZGluZyh0aGlzLl9sb2FkaW5nTmFtZSk7dmFyIGU9dGhpcy5hcGlWMy5pbWFnZUNsb3NlVG8kKHQscikucGlwZShvLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe2lmKGU9PW51bGwpe24uX2xvYWRpbmdTZXJ2aWNlLnN0b3BMb2FkaW5nKG4uX2xvYWRpbmdOYW1lKTtyZXR1cm4gaC50aHJvd0Vycm9yKG5ldyBFcnJvcihcIk5vIGltYWdlIGZvdW5kIGNsb3NlIHRvIGxhdCBcIit0K1wiLCBsb24gXCIrcitcIi5cIikpfXJldHVybiBuLl9tb3ZlVG9LZXkkKGUua2V5KX0pKTtyZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QkKGUpfTtlLnByb3RvdHlwZS5zZXRGaWx0ZXIkPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7dGhpcy5fc3RhdGVTZXJ2aWNlLmNsZWFyTm9kZXMoKTtyZXR1cm4gdGhpcy5fbW92ZWRUb0tleSQucGlwZShvLmZpcnN0KCksby5tZXJnZU1hcChmdW5jdGlvbihlKXtpZihlIT1udWxsKXtyZXR1cm4gci5fdHJhamVjdG9yeUtleXMkKCkucGlwZShvLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLl9ncmFwaFNlcnZpY2Uuc2V0RmlsdGVyJCh0KS5waXBlKG8ubWVyZ2VNYXAoZnVuY3Rpb24oKXtyZXR1cm4gci5fY2FjaGVLZXlzJChlKX0pKX0pLG8ubGFzdCgpKX1yZXR1cm4gci5fa2V5UmVxdWVzdGVkJC5waXBlKG8uZmlyc3QoKSxvLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe2lmKGUhPW51bGwpe3JldHVybiByLl9ncmFwaFNlcnZpY2Uuc2V0RmlsdGVyJCh0KS5waXBlKG8ubWVyZ2VNYXAoZnVuY3Rpb24oKXtyZXR1cm4gci5fZ3JhcGhTZXJ2aWNlLmNhY2hlTm9kZSQoZSl9KSl9cmV0dXJuIHIuX2dyYXBoU2VydmljZS5zZXRGaWx0ZXIkKHQpLnBpcGUoby5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfSkpfSkpfSksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHVuZGVmaW5lZH0pKX07ZS5wcm90b3R5cGUuc2V0VG9rZW4kPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7dGhpcy5fYWJvcnRSZXF1ZXN0KFwidG8gc2V0IHRva2VuXCIpO3RoaXMuX3N0YXRlU2VydmljZS5jbGVhck5vZGVzKCk7cmV0dXJuIHRoaXMuX21vdmVkVG9LZXkkLnBpcGUoby5maXJzdCgpLG8udGFwKGZ1bmN0aW9uKGUpe3IuX2FwaVYzLnNldFRva2VuKHQpfSksby5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gZT09bnVsbD9yLl9ncmFwaFNlcnZpY2UucmVzZXQkKFtdKTpyLl90cmFqZWN0b3J5S2V5cyQoKS5waXBlKG8ubWVyZ2VNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2dyYXBoU2VydmljZS5yZXNldCQoZSkucGlwZShvLm1lcmdlTWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2NhY2hlS2V5cyQoZSl9KSl9KSxvLmxhc3QoKSxvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdW5kZWZpbmVkfSkpfSkpfTtlLnByb3RvdHlwZS5fY2FjaGVLZXlzJD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZhciByPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncmFwaFNlcnZpY2UuY2FjaGVOb2RlJChlKX0pO3JldHVybiBoLmZyb20ocikucGlwZShvLm1lcmdlQWxsKCkpfTtlLnByb3RvdHlwZS5fYWJvcnRSZXF1ZXN0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX3JlcXVlc3RTdWJzY3JpcHRpb24hPW51bGwpe3RoaXMuX3JlcXVlc3RTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9yZXF1ZXN0U3Vic2NyaXB0aW9uPW51bGx9aWYodGhpcy5fbm9kZVJlcXVlc3RTdWJzY3JpcHRpb24hPW51bGwpe3RoaXMuX25vZGVSZXF1ZXN0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fbm9kZVJlcXVlc3RTdWJzY3JpcHRpb249bnVsbH1pZih0aGlzLl9yZXF1ZXN0JCE9bnVsbCl7aWYoISh0aGlzLl9yZXF1ZXN0JC5pc1N0b3BwZWR8fHRoaXMuX3JlcXVlc3QkLmhhc0Vycm9yKSl7dGhpcy5fcmVxdWVzdCQuZXJyb3IobmV3IGkuQWJvcnRNYXBpbGxhcnlFcnJvcihcIlJlcXVlc3QgYWJvcnRlZCBieSBhIHN1YnNlcXVlbnQgcmVxdWVzdCBcIitlK1wiLlwiKSl9dGhpcy5fcmVxdWVzdCQ9bnVsbH19O2UucHJvdG90eXBlLl9tYWtlUmVxdWVzdCQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2YXIgcj1uZXcgaC5SZXBsYXlTdWJqZWN0KDEpO3RoaXMuX3JlcXVlc3RTdWJzY3JpcHRpb249ci5zdWJzY3JpYmUodW5kZWZpbmVkLGZ1bmN0aW9uKCl7fSk7dGhpcy5fcmVxdWVzdCQ9cjt0aGlzLl9ub2RlUmVxdWVzdFN1YnNjcmlwdGlvbj1lLnN1YnNjcmliZShmdW5jdGlvbihlKXt0Ll9yZXF1ZXN0JD1udWxsO3IubmV4dChlKTtyLmNvbXBsZXRlKCl9LGZ1bmN0aW9uKGUpe3QuX3JlcXVlc3QkPW51bGw7ci5lcnJvcihlKX0pO3JldHVybiByfTtlLnByb3RvdHlwZS5fbW92ZVRvS2V5JD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2tleVJlcXVlc3RlZCQubmV4dChlKTtyZXR1cm4gdGhpcy5fZ3JhcGhTZXJ2aWNlLmNhY2hlTm9kZSQoZSkucGlwZShvLnRhcChmdW5jdGlvbihlKXt0Ll9zdGF0ZVNlcnZpY2Uuc2V0Tm9kZXMoW2VdKTt0Ll9tb3ZlZFRvS2V5JC5uZXh0KGUua2V5KX0pLG8uZmluYWxpemUoZnVuY3Rpb24oKXt0Ll9sb2FkaW5nU2VydmljZS5zdG9wTG9hZGluZyh0Ll9sb2FkaW5nTmFtZSl9KSl9O2UucHJvdG90eXBlLl90cmFqZWN0b3J5S2V5cyQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVTZXJ2aWNlLmN1cnJlbnRTdGF0ZSQucGlwZShvLmZpcnN0KCksby5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdGUudHJhamVjdG9yeS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5fSl9KSl9O3JldHVybiBlfSgpO3IuTmF2aWdhdG9yPWE7ci5kZWZhdWx0PWF9LHtcIi4uL0FQSVwiOjI5MCxcIi4uL0VkZ2VcIjoyOTIsXCIuLi9FcnJvclwiOjI5MyxcIi4uL0dyYXBoXCI6Mjk1LFwiLi4vU3RhdGVcIjoyOTgsXCIuLi9WaWV3ZXJcIjozMDIsXCIuL1BhblNlcnZpY2VcIjo0ODAscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDc5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLk9ic2VydmVyPXZvaWQgMDt2YXIgcz1lKFwicnhqc1wiKTt2YXIgYz1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIGk9ZShcIi4uL1ZpZXdlclwiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3ZhciBuPXRoaXM7dGhpcy5fY29udGFpbmVyPXI7dGhpcy5fZXZlbnRFbWl0dGVyPWU7dGhpcy5fbmF2aWdhdG9yPXQ7dGhpcy5fcHJvamVjdGlvbj1uZXcgaS5Qcm9qZWN0aW9uO3RoaXMuX3N0YXJ0ZWQ9ZmFsc2U7dGhpcy5fbmF2aWdhYmxlJD1uZXcgcy5TdWJqZWN0O3RoaXMuX25hdmlnYWJsZSQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe24uX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLm5hdmlnYWJsZWNoYW5nZWQsZSl9KTt0aGlzLl9uYXZpZ2F0b3IubG9hZGluZ1NlcnZpY2UubG9hZGluZyQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe24uX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLmxvYWRpbmdjaGFuZ2VkLGUpfSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3RhcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnRlZH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm5hdmlnYWJsZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25hdmlnYWJsZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwcm9qZWN0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9qZWN0aW9ufSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUucHJvamVjdCQ9ZnVuY3Rpb24obyl7dmFyIGE9dGhpcztyZXR1cm4gcy5jb21iaW5lTGF0ZXN0KHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5yZWZlcmVuY2UkKS5waXBlKGMuZmlyc3QoKSxjLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXSxuPWVbMl07aWYoYS5fcHJvamVjdGlvbi5kaXN0YW5jZUJldHdlZW5MYXRMb25zKG8sci5sYXRMb24pPjFlMyl7cmV0dXJuIG51bGx9dmFyIGk9YS5fcHJvamVjdGlvbi5sYXRMb25Ub0NhbnZhcyhvLGEuX2NvbnRhaW5lci5lbGVtZW50LHQsbik7cmV0dXJuISFpP1tNYXRoLnJvdW5kKGlbMF0pLE1hdGgucm91bmQoaVsxXSldOm51bGx9KSl9O2UucHJvdG90eXBlLnByb2plY3RCYXNpYyQ9ZnVuY3Rpb24oaSl7dmFyIG89dGhpcztyZXR1cm4gcy5jb21iaW5lTGF0ZXN0KHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkucGlwZShjLmZpcnN0KCksYy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07dmFyIG49by5fcHJvamVjdGlvbi5iYXNpY1RvQ2FudmFzKGksby5fY29udGFpbmVyLmVsZW1lbnQsdCxyKTtyZXR1cm4hIW4/W01hdGgucm91bmQoblswXSksTWF0aC5yb3VuZChuWzFdKV06bnVsbH0pKX07ZS5wcm90b3R5cGUuc3RhcnRFbWl0PWZ1bmN0aW9uKCl7dmFyIHU9dGhpcztpZih0aGlzLl9zdGFydGVkKXtyZXR1cm59dGhpcy5fc3RhcnRlZD10cnVlO3RoaXMuX2N1cnJlbnROb2RlU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGVFeHRlcm5hbCQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3UuX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLm5vZGVjaGFuZ2VkLGUpfSk7dGhpcy5fc2VxdWVuY2VFZGdlc1N1YnNjcmlwdGlvbj10aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmN1cnJlbnROb2RlRXh0ZXJuYWwkLnBpcGUoYy5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VxdWVuY2VFZGdlcyR9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3UuX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLnNlcXVlbmNlZWRnZXNjaGFuZ2VkLGUpfSk7dGhpcy5fc3BhdGlhbEVkZ2VzU3Vic2NyaXB0aW9uPXRoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGVFeHRlcm5hbCQucGlwZShjLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5zcGF0aWFsRWRnZXMkfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt1Ll9ldmVudEVtaXR0ZXIuZmlyZShpLlZpZXdlci5zcGF0aWFsZWRnZXNjaGFuZ2VkLGUpfSk7dGhpcy5fbW92ZVN1YnNjcmlwdGlvbj1zLmNvbWJpbmVMYXRlc3QodGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5pbk1vdGlvbiQsdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5hY3RpdmUkLHRoaXMuX2NvbnRhaW5lci50b3VjaFNlcnZpY2UuYWN0aXZlJCkucGlwZShjLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZVswXXx8ZVsxXXx8ZVsyXX0pLGMuZGlzdGluY3RVbnRpbENoYW5nZWQoKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2lmKGUpe3UuX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLm1vdmVzdGFydCxudWxsKX1lbHNle3UuX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLm1vdmVlbmQsbnVsbCl9fSk7dGhpcy5fYmVhcmluZ1N1YnNjcmlwdGlvbj10aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5iZWFyaW5nJC5waXBlKGMuYXVkaXRUaW1lKDEwMCksYy5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLmFicyh0LWUpPDF9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3UuX2V2ZW50RW1pdHRlci5maXJlKGkuVmlld2VyLmJlYXJpbmdjaGFuZ2VkLGUpfSk7dmFyIGU9dGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5hY3RpdmUkLnBpcGUoYy5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU/cy5lbXB0eSgpOnUuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VNb3ZlJH0pKTt0aGlzLl92aWV3ZXJNb3VzZUV2ZW50U3Vic2NyaXB0aW9uPXMubWVyZ2UodGhpcy5fbWFwTW91c2VFdmVudCQoaS5WaWV3ZXIuY2xpY2ssdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5zdGF0aWNDbGljayQpLHRoaXMuX21hcE1vdXNlRXZlbnQkKGkuVmlld2VyLmNvbnRleHRtZW51LHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UuY29udGV4dE1lbnUkKSx0aGlzLl9tYXBNb3VzZUV2ZW50JChpLlZpZXdlci5kYmxjbGljayx0aGlzLl9jb250YWluZXIubW91c2VTZXJ2aWNlLmRibENsaWNrJCksdGhpcy5fbWFwTW91c2VFdmVudCQoaS5WaWV3ZXIubW91c2Vkb3duLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VEb3duJCksdGhpcy5fbWFwTW91c2VFdmVudCQoaS5WaWV3ZXIubW91c2Vtb3ZlLGUpLHRoaXMuX21hcE1vdXNlRXZlbnQkKGkuVmlld2VyLm1vdXNlb3V0LHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VPdXQkKSx0aGlzLl9tYXBNb3VzZUV2ZW50JChpLlZpZXdlci5tb3VzZW92ZXIsdGhpcy5fY29udGFpbmVyLm1vdXNlU2VydmljZS5tb3VzZU92ZXIkKSx0aGlzLl9tYXBNb3VzZUV2ZW50JChpLlZpZXdlci5tb3VzZXVwLHRoaXMuX2NvbnRhaW5lci5tb3VzZVNlcnZpY2UubW91c2VVcCQpKS5waXBlKGMud2l0aExhdGVzdEZyb20odGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJlZmVyZW5jZSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCksYy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXSxvPWVbMl0sYT1lWzNdO3ZhciBzPXUuX3Byb2plY3Rpb24uZXZlbnRUb1VucHJvamVjdGlvbihuLHUuX2NvbnRhaW5lci5lbGVtZW50LGksbyxhKTtyZXR1cm57YmFzaWNQb2ludDpzLmJhc2ljUG9pbnQsbGF0TG9uOnMubGF0TG9uLG9yaWdpbmFsRXZlbnQ6bixwaXhlbFBvaW50OnMucGl4ZWxQb2ludCx0YXJnZXQ6dS5fZXZlbnRFbWl0dGVyLHR5cGU6cn19KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3UuX2V2ZW50RW1pdHRlci5maXJlKGUudHlwZSxlKX0pO3RoaXMuX3Bvc2l0aW9uU3Vic2NyaXB0aW9uPXRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQucGlwZShjLmRpc3RpbmN0VW50aWxDaGFuZ2VkKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVswXSxuPWVbMV07dmFyIGk9dFswXSxvPXRbMV07cmV0dXJuIHUuX2Nsb3NlVG8ocixpLC4wMSkmJnUuX2Nsb3NlVG8obixvLC4wMSl9LGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhbWVyYS5wb3NpdGlvbi50b0FycmF5KCl9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7dS5fZXZlbnRFbWl0dGVyLmZpcmUoaS5WaWV3ZXIucG9zaXRpb25jaGFuZ2VkLHt0YXJnZXQ6dS5fZXZlbnRFbWl0dGVyLHR5cGU6aS5WaWV3ZXIucG9zaXRpb25jaGFuZ2VkfSl9KTt0aGlzLl9wb3ZTdWJzY3JpcHRpb249dGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJC5waXBlKGMuZGlzdGluY3RVbnRpbENoYW5nZWQoZnVuY3Rpb24oZSx0KXt2YXIgcj1lWzBdLG49ZVsxXTt2YXIgaT10WzBdLG89dFsxXTtyZXR1cm4gdS5fY2xvc2VUbyhyLGksLjAwMSkmJnUuX2Nsb3NlVG8obixvLC4wMDEpfSxmdW5jdGlvbihlKXtyZXR1cm5bZS5yb3RhdGlvbi5waGksZS5yb3RhdGlvbi50aGV0YV19KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7dS5fZXZlbnRFbWl0dGVyLmZpcmUoaS5WaWV3ZXIucG92Y2hhbmdlZCx7dGFyZ2V0OnUuX2V2ZW50RW1pdHRlcix0eXBlOmkuVmlld2VyLnBvdmNoYW5nZWR9KX0pO3RoaXMuX2ZvdlN1YnNjcmlwdGlvbj10aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJDYW1lcmEkLnBpcGUoYy5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3JldHVybiB1Ll9jbG9zZVRvKGUsdCwuMDEpfSxmdW5jdGlvbihlKXtyZXR1cm4gZS5wZXJzcGVjdGl2ZS5mb3Z9KSkuc3Vic2NyaWJlKGZ1bmN0aW9uKCl7dS5fZXZlbnRFbWl0dGVyLmZpcmUoaS5WaWV3ZXIuZm92Y2hhbmdlZCx7dGFyZ2V0OnUuX2V2ZW50RW1pdHRlcix0eXBlOmkuVmlld2VyLmZvdmNoYW5nZWR9KX0pfTtlLnByb3RvdHlwZS5zdG9wRW1pdD1mdW5jdGlvbigpe2lmKCF0aGlzLnN0YXJ0ZWQpe3JldHVybn10aGlzLl9zdGFydGVkPWZhbHNlO3RoaXMuX2JlYXJpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9jdXJyZW50Tm9kZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX2ZvdlN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX21vdmVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9wb3NpdGlvblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3BvdlN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3NlcXVlbmNlRWRnZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9zcGF0aWFsRWRnZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl92aWV3ZXJNb3VzZUV2ZW50U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fYmVhcmluZ1N1YnNjcmlwdGlvbj1udWxsO3RoaXMuX2N1cnJlbnROb2RlU3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fZm92U3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fbW92ZVN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3Bvc2l0aW9uU3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fcG92U3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fc2VxdWVuY2VFZGdlc1N1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3NwYXRpYWxFZGdlc1N1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3ZpZXdlck1vdXNlRXZlbnRTdWJzY3JpcHRpb249bnVsbH07ZS5wcm90b3R5cGUudW5wcm9qZWN0JD1mdW5jdGlvbihvKXt2YXIgYT10aGlzO3JldHVybiBzLmNvbWJpbmVMYXRlc3QodGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVuZGVyQ2FtZXJhJCx0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnJlZmVyZW5jZSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkucGlwZShjLmZpcnN0KCksYy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV0sbj1lWzJdO3ZhciBpPWEuX3Byb2plY3Rpb24uY2FudmFzVG9VbnByb2plY3Rpb24obyxhLl9jb250YWluZXIuZWxlbWVudCx0LHIsbik7cmV0dXJuIGkubGF0TG9ufSkpfTtlLnByb3RvdHlwZS51bnByb2plY3RCYXNpYyQ9ZnVuY3Rpb24obil7dmFyIGk9dGhpcztyZXR1cm4gcy5jb21iaW5lTGF0ZXN0KHRoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsdGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5jdXJyZW50VHJhbnNmb3JtJCkucGlwZShjLmZpcnN0KCksYy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07cmV0dXJuIGkuX3Byb2plY3Rpb24uY2FudmFzVG9CYXNpYyhuLGkuX2NvbnRhaW5lci5lbGVtZW50LHQscil9KSl9O2UucHJvdG90eXBlLl9jbG9zZVRvPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gTWF0aC5hYnMoZS10KTw9cn07ZS5wcm90b3R5cGUuX21hcE1vdXNlRXZlbnQkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucGlwZShjLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bdCxlXX0pKX07cmV0dXJuIGV9KCk7ci5PYnNlcnZlcj1uO3IuZGVmYXVsdD1ufSx7XCIuLi9WaWV3ZXJcIjozMDIscnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDgwOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlBhblNlcnZpY2U9dm9pZCAwO3ZhciBzPWUoXCJyeGpzXCIpO3ZhciB1PWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgTD1lKFwiLi4vZ2VvL0dlb1wiKTt2YXIgYz1lKFwiLi4vZ2VvL0dlb0Nvb3Jkc1wiKTt2YXIgbD1lKFwiLi4vZ3JhcGgvR3JhcGhDYWxjdWxhdG9yXCIpO3ZhciBoPWUoXCIuLi9nZW8vU3BhdGlhbFwiKTt2YXIgbj1lKFwiLi4vZ2VvL1RyYW5zZm9ybVwiKTt2YXIgcD1lKFwiLi4vZ2VvL1ZpZXdwb3J0Q29vcmRzXCIpO3ZhciBmOyhmdW5jdGlvbihlKXtlW2VbXCJEaXNhYmxlZFwiXT0wXT1cIkRpc2FibGVkXCI7ZVtlW1wiRW5hYmxlZFwiXT0xXT1cIkVuYWJsZWRcIjtlW2VbXCJTdGFydGVkXCJdPTJdPVwiU3RhcnRlZFwifSkoZnx8KGY9e30pKTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbixpLG8sYSl7dGhpcy5fZ3JhcGhTZXJ2aWNlPWU7dGhpcy5fc3RhdGVTZXJ2aWNlPXQ7dGhpcy5fZ2VvQ29vcmRzPSEhbj9uOm5ldyBjLmRlZmF1bHQ7dGhpcy5fZ3JhcGhDYWxjdWxhdG9yPSEhaT9pOm5ldyBsLmRlZmF1bHQodGhpcy5fZ2VvQ29vcmRzKTt0aGlzLl9zcGF0aWFsPSEhbz9vOm5ldyBoLmRlZmF1bHQ7dGhpcy5fdmlld3BvcnRDb29yZHM9ISFhP2E6bmV3IHAuZGVmYXVsdDt0aGlzLl9tb2RlPXIhPT1mYWxzZT9mLkVuYWJsZWQ6Zi5EaXNhYmxlZDt0aGlzLl9wYW5Ob2Rlc1N1YmplY3QkPW5ldyBzLlN1YmplY3Q7dGhpcy5fcGFuTm9kZXMkPXRoaXMuX3Bhbk5vZGVzU3ViamVjdCQucGlwZSh1LnN0YXJ0V2l0aChbXSksdS5wdWJsaXNoUmVwbGF5KDEpLHUucmVmQ291bnQoKSk7dGhpcy5fcGFuTm9kZXMkLnN1YnNjcmliZSgpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBhbk5vZGVzJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuTm9kZXMkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7aWYodGhpcy5fbW9kZSE9PWYuRGlzYWJsZWQpe3JldHVybn10aGlzLl9tb2RlPWYuRW5hYmxlZDt0aGlzLnN0YXJ0KCl9O2UucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXtpZih0aGlzLl9tb2RlPT09Zi5EaXNhYmxlZCl7cmV0dXJufXRoaXMuc3RvcCgpO3RoaXMuX21vZGU9Zi5EaXNhYmxlZH07ZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt2YXIgaz10aGlzO2lmKHRoaXMuX21vZGUhPT1mLkVuYWJsZWQpe3JldHVybn12YXIgdD10aGlzLl9zdGF0ZVNlcnZpY2UuY3VycmVudE5vZGUkLnBpcGUodS5zd2l0Y2hNYXAoZnVuY3Rpb24obyl7aWYoIW8ubWVyZ2VkKXtyZXR1cm4gcy5vZihbXSl9dmFyIGU9cy5vZihvKTt2YXIgdD1rLl9ncmFwaENhbGN1bGF0b3IuYm91bmRpbmdCb3hDb3JuZXJzKG8ubGF0TG9uLDIwKTt2YXIgcj1rLl9ncmFwaFNlcnZpY2UuY2FjaGVCb3VuZGluZ0JveCQodFswXSx0WzFdKS5waXBlKHUuY2F0Y2hFcnJvcihmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNhY2hlIHBlcmlwaGVyeSBib3VuZGluZyBib3ggKFwiK28ua2V5K1wiKVwiLGUpO3JldHVybiBzLmVtcHR5KCl9KSx1Lm1hcChmdW5jdGlvbihlKXtpZihvLnBhbm8pe3JldHVybltdfXZhciB0PVtdO2Zvcih2YXIgcj0wLG49ZTtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTtpZihpLmtleT09PW8ua2V5KXtjb250aW51ZX1pZihpLm1lcmdlQ0MhPT1vLm1lcmdlQ0Mpe2NvbnRpbnVlfWlmKGkucGFubyl7Y29udGludWV9aWYoay5fZGlzdGFuY2UoaSxvKT40KXtjb250aW51ZX10LnB1c2goaSl9cmV0dXJuIHR9KSk7cmV0dXJuIHMuY29tYmluZUxhdGVzdChlLHIpLnBpcGUodS53aXRoTGF0ZXN0RnJvbShrLl9zdGF0ZVNlcnZpY2UucmVmZXJlbmNlJCksdS5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPXRbMF0sbj10WzFdLGk9ZVsxXTt2YXIgbz1rLl9zcGF0aWFsLnZpZXdpbmdEaXJlY3Rpb24oci5yb3RhdGlvbik7dmFyIGE9TC5jb21wdXRlVHJhbnNsYXRpb24oe2xhdDpyLmxhdExvbi5sYXQsbG9uOnIubGF0TG9uLmxvbixhbHQ6ci5hbHR9LHIucm90YXRpb24saSk7dmFyIHM9ay5fY3JlYXRlVHJhbnNmb3JtKHIsYSk7dmFyIHU9ay5fc3BhdGlhbC53cmFwKGsuX3NwYXRpYWwuYXppbXV0aGFsKG8udG9BcnJheSgpLHMudXBWZWN0b3IoKS50b0FycmF5KCkpLDAsMipNYXRoLlBJKTt2YXIgYz1rLl9jb21wdXRlUHJvamVjdGVkUG9pbnRzKHMpO3ZhciBsPWsuX2NvbXB1dGVIb3Jpem9udGFsRm92KGMpLzE4MCpNYXRoLlBJO3ZhciBoPU1hdGguUEkvODt2YXIgcD11bmRlZmluZWQ7dmFyIGY9dW5kZWZpbmVkO2Zvcih2YXIgZD0wLHY9bjtkPHYubGVuZ3RoO2QrKyl7dmFyIG09dltkXTt2YXIgZz1MLmNvbXB1dGVUcmFuc2xhdGlvbih7bGF0Om0ubGF0TG9uLmxhdCxsb246bS5sYXRMb24ubG9uLGFsdDptLmFsdH0sbS5yb3RhdGlvbixpKTt2YXIgXz1rLl9jcmVhdGVUcmFuc2Zvcm0obSxnKTt2YXIgeT1rLl9jb21wdXRlUHJvamVjdGVkUG9pbnRzKF8pO3ZhciBiPWsuX2NvbXB1dGVIb3Jpem9udGFsRm92KHkpLzE4MCpNYXRoLlBJO3ZhciB4PWsuX3NwYXRpYWwudmlld2luZ0RpcmVjdGlvbihtLnJvdGF0aW9uKTt2YXIgdz1rLl9zcGF0aWFsLndyYXAoay5fc3BhdGlhbC5hemltdXRoYWwoeC50b0FycmF5KCksXy51cFZlY3RvcigpLnRvQXJyYXkoKSksMCwyKk1hdGguUEkpO3ZhciBTPWsuX3NwYXRpYWwuYW5nbGVCZXR3ZWVuVmVjdG9yMihvLngsby55LHgueCx4LnkpO3ZhciBNPU51bWJlci5ORUdBVElWRV9JTkZJTklUWTtpZihTPjApe2lmKHU+dyl7TT11LTIqTWF0aC5QSStsLzItKHctYi8yKX1lbHNle009dStsLzItKHctYi8yKX19ZWxzZXtpZih1PHcpe009dytiLzItKHUrMipNYXRoLlBJLWwvMil9ZWxzZXtNPXcrYi8yLSh1LWwvMil9fXZhciBDPU1hdGguYWJzKGItTSk7dmFyIFQ9ay5fZGlzdGFuY2UobSxyKTt2YXIgRT1NYXRoLm1pbihrLl90aW1lRGlmZmVyZW5jZShtLHIpLDQpO3ZhciBPPTIwKk1hdGguYWJzKE0taCk7dmFyIFA9TWF0aC5taW4oNSwxL01hdGgubWluKGIvbCwxKSk7dmFyIEE9TT4wPy0yKkM6MDt2YXIgaj1UK0UrTytQK0E7aWYoTT4wJiZNPC41KmwmJk08LjUqYiYmQz4uNSpsKXtpZihTPjApe2lmKCFwKXtwPVtqLG0sXyxiXX1lbHNle2lmKGo8cFswXSl7cD1baixtLF8sYl19fX1lbHNle2lmKCFmKXtmPVtqLG0sXyxiXX1lbHNle2lmKGo8ZlswXSl7Zj1baixtLF8sYl19fX19fXZhciBSPVtdO2lmKCEhcCl7Ui5wdXNoKFtwWzFdLHBbMl0scFszXV0pfWlmKCEhZil7Ui5wdXNoKFtmWzFdLGZbMl0sZlszXV0pfXJldHVybiBSfSksdS5zdGFydFdpdGgoW10pKX0pKTt0aGlzLl9wYW5Ob2Rlc1N1YnNjcmlwdGlvbj10aGlzLl9zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm5vZGVzQWhlYWQ+MH0pLHUuZGlzdGluY3RVbnRpbENoYW5nZWQoKSx1LnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gZT9zLm9mKFtdKTp0fSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtrLl9wYW5Ob2Rlc1N1YmplY3QkLm5leHQoZSl9KTt0aGlzLl9tb2RlPWYuU3RhcnRlZH07ZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKHRoaXMuX21vZGUhPT1mLlN0YXJ0ZWQpe3JldHVybn10aGlzLl9wYW5Ob2Rlc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO3RoaXMuX3Bhbk5vZGVzU3ViamVjdCQubmV4dChbXSk7dGhpcy5fbW9kZT1mLkVuYWJsZWR9O2UucHJvdG90eXBlLl9kaXN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2dlb0Nvb3Jkcy5nZW9kZXRpY1RvRW51KGUubGF0TG9uLmxhdCxlLmxhdExvbi5sb24sZS5hbHQsdC5sYXRMb24ubGF0LHQubGF0TG9uLmxvbix0LmFsdCksbj1yWzBdLGk9clsxXSxvPXJbMl07cmV0dXJuIE1hdGguc3FydChuKm4raSppK28qbyl9O2UucHJvdG90eXBlLl90aW1lRGlmZmVyZW5jZT1mdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLmFicyhlLmNhcHR1cmVkQXQtdC5jYXB0dXJlZEF0KS8oMWUzKjYwKjYwKjI0KjMwKX07ZS5wcm90b3R5cGUuX2NyZWF0ZVRyYW5zZm9ybT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgbi5UcmFuc2Zvcm0oZS5vcmllbnRhdGlvbixlLndpZHRoLGUuaGVpZ2h0LGUuZm9jYWwsZS5zY2FsZSxlLmdwYW5vLGUucm90YXRpb24sdCxlLmFzc2V0c0NhY2hlZD9lLmltYWdlOnVuZGVmaW5lZCx1bmRlZmluZWQsZS5jazEsZS5jazIsZS5jYW1lcmFQcm9qZWN0aW9uKX07ZS5wcm90b3R5cGUuX2NvbXB1dGVQcm9qZWN0ZWRQb2ludHM9ZnVuY3Rpb24oZSl7dmFyIHQ9W1sxLDBdXTt2YXIgcj1bWzAsLjVdXTt2YXIgbj0yMDtyZXR1cm4gTC5jb21wdXRlUHJvamVjdGVkUG9pbnRzKGUsdCxyLG4sdGhpcy5fdmlld3BvcnRDb29yZHMpfTtlLnByb3RvdHlwZS5fY29tcHV0ZUhvcml6b250YWxGb3Y9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2YXIgcj1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fY29vcmRUb0ZvdihlWzBdKX0pO3ZhciBuPU1hdGgubWluLmFwcGx5KE1hdGgscik7cmV0dXJuIG59O2UucHJvdG90eXBlLl9jb29yZFRvRm92PWZ1bmN0aW9uKGUpe3JldHVybiAyKk1hdGguYXRhbihlKSoxODAvTWF0aC5QSX07cmV0dXJuIGV9KCk7ci5QYW5TZXJ2aWNlPWl9LHtcIi4uL2dlby9HZW9cIjo0MTUsXCIuLi9nZW8vR2VvQ29vcmRzXCI6NDE2LFwiLi4vZ2VvL1NwYXRpYWxcIjo0MTksXCIuLi9nZW8vVHJhbnNmb3JtXCI6NDIwLFwiLi4vZ2VvL1ZpZXdwb3J0Q29vcmRzXCI6NDIxLFwiLi4vZ3JhcGgvR3JhcGhDYWxjdWxhdG9yXCI6NDI1LHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQ4MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5QbGF5U2VydmljZT12b2lkIDA7dmFyIGM9ZShcInJ4anNcIik7dmFyIHA9ZShcInJ4anMvb3BlcmF0b3JzXCIpO3ZhciBzPWUoXCIuLi9FZGdlXCIpO3ZhciB1PWUoXCIuLi9HcmFwaFwiKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSx0LHIpe3RoaXMuX2dyYXBoU2VydmljZT1lO3RoaXMuX3N0YXRlU2VydmljZT10O3RoaXMuX2dyYXBoQ2FsY3VsYXRvcj0hIXI/cjpuZXcgdS5HcmFwaENhbGN1bGF0b3I7dGhpcy5fZGlyZWN0aW9uU3ViamVjdCQ9bmV3IGMuU3ViamVjdDt0aGlzLl9kaXJlY3Rpb24kPXRoaXMuX2RpcmVjdGlvblN1YmplY3QkLnBpcGUocC5zdGFydFdpdGgocy5FZGdlRGlyZWN0aW9uLk5leHQpLHAucHVibGlzaFJlcGxheSgxKSxwLnJlZkNvdW50KCkpO3RoaXMuX2RpcmVjdGlvbiQuc3Vic2NyaWJlKCk7dGhpcy5fcGxheWluZz1mYWxzZTt0aGlzLl9wbGF5aW5nU3ViamVjdCQ9bmV3IGMuU3ViamVjdDt0aGlzLl9wbGF5aW5nJD10aGlzLl9wbGF5aW5nU3ViamVjdCQucGlwZShwLnN0YXJ0V2l0aCh0aGlzLl9wbGF5aW5nKSxwLnB1Ymxpc2hSZXBsYXkoMSkscC5yZWZDb3VudCgpKTt0aGlzLl9wbGF5aW5nJC5zdWJzY3JpYmUoKTt0aGlzLl9zcGVlZD0uNTt0aGlzLl9zcGVlZFN1YmplY3QkPW5ldyBjLlN1YmplY3Q7dGhpcy5fc3BlZWQkPXRoaXMuX3NwZWVkU3ViamVjdCQucGlwZShwLnN0YXJ0V2l0aCh0aGlzLl9zcGVlZCkscC5wdWJsaXNoUmVwbGF5KDEpLHAucmVmQ291bnQoKSk7dGhpcy5fc3BlZWQkLnN1YnNjcmliZSgpO3RoaXMuX25vZGVzQWhlYWQ9dGhpcy5fbWFwTm9kZXNBaGVhZCh0aGlzLl9tYXBTcGVlZCh0aGlzLl9zcGVlZCkpO3RoaXMuX2JyaWRnaW5nJD1udWxsfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInBsYXlpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXlpbmd9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJkaXJlY3Rpb24kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXJlY3Rpb24kfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwicGxheWluZyRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXlpbmckfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwic3BlZWQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zcGVlZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtyLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7dmFyIGg9dGhpcztpZih0aGlzLl9wbGF5aW5nKXtyZXR1cm59dGhpcy5fc3RhdGVTZXJ2aWNlLmN1dE5vZGVzKCk7dmFyIGU9dGhpcy5fc2V0U3BlZWQodGhpcy5fc3BlZWQpO3RoaXMuX3N0YXRlU2VydmljZS5zZXRTcGVlZChlKTt0aGlzLl9ncmFwaE1vZGVTdWJzY3JpcHRpb249dGhpcy5fc3BlZWQkLnBpcGUocC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGU+ci5zZXF1ZW5jZVNwZWVkP3UuR3JhcGhNb2RlLlNlcXVlbmNlOnUuR3JhcGhNb2RlLlNwYXRpYWx9KSxwLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtoLl9ncmFwaFNlcnZpY2Uuc2V0R3JhcGhNb2RlKGUpfSk7dGhpcy5fY2FjaGVTdWJzY3JpcHRpb249Yy5jb21iaW5lTGF0ZXN0KHRoaXMuX3N0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQucGlwZShwLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bZS5zZXF1ZW5jZUtleSxlLmtleV19KSxwLmRpc3RpbmN0VW50aWxDaGFuZ2VkKHVuZGVmaW5lZCxmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gdH0pKSx0aGlzLl9ncmFwaFNlcnZpY2UuZ3JhcGhNb2RlJCx0aGlzLl9kaXJlY3Rpb24kKS5waXBlKHAuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj10WzBdLG49dFsxXSxpPWVbMV0sbz1lWzJdO2lmKG8hPT1zLkVkZ2VEaXJlY3Rpb24uTmV4dCYmbyE9PXMuRWRnZURpcmVjdGlvbi5QcmV2KXtyZXR1cm4gYy5vZihbdW5kZWZpbmVkLG9dKX12YXIgYT0oaT09PXUuR3JhcGhNb2RlLlNlcXVlbmNlP2guX2dyYXBoU2VydmljZS5jYWNoZVNlcXVlbmNlTm9kZXMkKHIsbik6aC5fZ3JhcGhTZXJ2aWNlLmNhY2hlU2VxdWVuY2UkKHIpKS5waXBlKHAucmV0cnkoMykscC5jYXRjaEVycm9yKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoZSk7cmV0dXJuIGMub2YodW5kZWZpbmVkKX0pKTtyZXR1cm4gYy5jb21iaW5lTGF0ZXN0KGEsYy5vZihvKSl9KSxwLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtpZih0PT09dW5kZWZpbmVkKXtyZXR1cm4gYy5lbXB0eSgpfXZhciBsPXQua2V5cy5zbGljZSgpO2lmKHI9PT1zLkVkZ2VEaXJlY3Rpb24uUHJldil7bC5yZXZlcnNlKCl9cmV0dXJuIGguX3N0YXRlU2VydmljZS5jdXJyZW50U3RhdGUkLnBpcGUocC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuW2Uuc3RhdGUudHJhamVjdG9yeVtlLnN0YXRlLnRyYWplY3RvcnkubGVuZ3RoLTFdLmtleSxlLnN0YXRlLm5vZGVzQWhlYWRdfSkscC5zY2FuKGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVswXSxuPWVbMV07dmFyIGk9dFswXSxvPXRbMV07aWYocj09PXVuZGVmaW5lZCl7cj1pfXZhciBhPWwubGVuZ3RoLTE7aWYobz49aC5fbm9kZXNBaGVhZHx8bFthXT09PXIpe3JldHVybltyLFtdXX12YXIgcz1sLmluZGV4T2YoaSk7dmFyIHU9bC5pbmRleE9mKHIpKzE7dmFyIGM9TWF0aC5taW4oYSxzK2guX25vZGVzQWhlYWQtbykrMTtpZihjPD11KXtyZXR1cm5bcixbXV19cmV0dXJuW2xbYy0xXSxsLnNsaWNlKHUsYyldfSxbdW5kZWZpbmVkLFtdXSkscC5tZXJnZU1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9ZVsxXTtyZXR1cm4gYy5mcm9tKHIpfSkpfSkscC5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gaC5fZ3JhcGhTZXJ2aWNlLmNhY2hlTm9kZSQoZSkucGlwZShwLmNhdGNoRXJyb3IoZnVuY3Rpb24oKXtyZXR1cm4gYy5lbXB0eSgpfSkpfSw2KSkuc3Vic2NyaWJlKCk7dGhpcy5fcGxheWluZ1N1YnNjcmlwdGlvbj10aGlzLl9zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHAuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLm5vZGVzQWhlYWQ8aC5fbm9kZXNBaGVhZH0pLHAuZGlzdGluY3RVbnRpbENoYW5nZWQodW5kZWZpbmVkLGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlLmxhc3ROb2RlLmtleX0pLHAubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhdGUubGFzdE5vZGU7dmFyIHI9ZS5zdGF0ZS50cmFqZWN0b3J5O3ZhciBuPXVuZGVmaW5lZDtmb3IodmFyIGk9ci5sZW5ndGgtMjtpPj0wO2ktLSl7dmFyIG89cltpXTtpZihvLnNlcXVlbmNlS2V5IT09dC5zZXF1ZW5jZUtleSl7YnJlYWt9aWYoby5jYXB0dXJlZEF0IT09dC5jYXB0dXJlZEF0KXtuPW8uY2FwdHVyZWRBdDx0LmNhcHR1cmVkQXQ7YnJlYWt9fXJldHVybltlLnN0YXRlLmxhc3ROb2RlLG5dfSkscC53aXRoTGF0ZXN0RnJvbSh0aGlzLl9kaXJlY3Rpb24kKSxwLnN3aXRjaE1hcChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9dFswXSxuPXRbMV0saT1lWzFdO3JldHVybiBjLnppcCgoW3MuRWRnZURpcmVjdGlvbi5OZXh0LHMuRWRnZURpcmVjdGlvbi5QcmV2XS5pbmRleE9mKGkpPi0xP3Iuc2VxdWVuY2VFZGdlcyQ6ci5zcGF0aWFsRWRnZXMkKS5waXBlKHAuZmlyc3QoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2FjaGVkfSkscC50aW1lb3V0KDE1ZTMpKSxjLm9mKGkpKS5waXBlKHAubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO2Zvcih2YXIgbj0wLGk9dC5lZGdlcztuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtpZihvLmRhdGEuZGlyZWN0aW9uPT09cil7cmV0dXJuIG8udG99fXJldHVybiBudWxsfSkscC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPW51bGw/aC5fZ3JhcGhTZXJ2aWNlLmNhY2hlTm9kZSQoZSk6aC5fYnJpZGdlJChyLG4pLnBpcGUocC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlfSkpfSkpfSkpLnN1YnNjcmliZShmdW5jdGlvbihlKXtoLl9zdGF0ZVNlcnZpY2UuYXBwZW5kTm9kZXMoW2VdKX0sZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKTtoLnN0b3AoKX0pO3RoaXMuX2NsZWFyU3Vic2NyaXB0aW9uPXRoaXMuX3N0YXRlU2VydmljZS5jdXJyZW50Tm9kZSQucGlwZShwLmJ1ZmZlckNvdW50KDEsMTApKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7aC5fc3RhdGVTZXJ2aWNlLmNsZWFyUHJpb3JOb2RlcygpfSk7dGhpcy5fc2V0UGxheWluZyh0cnVlKTt2YXIgdD10aGlzLl9zdGF0ZVNlcnZpY2UuY3VycmVudFN0YXRlJC5waXBlKHAubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXRlfSkscC5kaXN0aW5jdFVudGlsQ2hhbmdlZChmdW5jdGlvbihlLHQpe3ZhciByPWVbMF0sbj1lWzFdO3ZhciBpPXRbMF0sbz10WzFdO3JldHVybiByPT09aSYmbj09PW99LGZ1bmN0aW9uKGUpe3JldHVybltlLmN1cnJlbnROb2RlLmtleSxlLmxhc3ROb2RlLmtleV19KSxwLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50Tm9kZS5rZXk9PT1lLmxhc3ROb2RlLmtleSYmZS5jdXJyZW50SW5kZXg9PT1lLnRyYWplY3RvcnkubGVuZ3RoLTF9KSxwLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50Tm9kZX0pKTt0aGlzLl9zdG9wU3Vic2NyaXB0aW9uPWMuY29tYmluZUxhdGVzdCh0LHRoaXMuX2RpcmVjdGlvbiQpLnBpcGUocC5zd2l0Y2hNYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07dmFyIG49KFtzLkVkZ2VEaXJlY3Rpb24uTmV4dCxzLkVkZ2VEaXJlY3Rpb24uUHJldl0uaW5kZXhPZihyKT4tMT90LnNlcXVlbmNlRWRnZXMkOnQuc3BhdGlhbEVkZ2VzJCkucGlwZShwLmZpcnN0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhY2hlZH0pLHAudGltZW91dCgxNWUzKSxwLmNhdGNoRXJyb3IoZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKTtyZXR1cm4gYy5vZih7Y2FjaGVkOmZhbHNlLGVkZ2VzOltdfSl9KSk7cmV0dXJuIGMuY29tYmluZUxhdGVzdChjLm9mKHIpLG4pLnBpcGUocC5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07Zm9yKHZhciBuPTAsaT1yLmVkZ2VzO248aS5sZW5ndGg7bisrKXt2YXIgbz1pW25dO2lmKG8uZGF0YS5kaXJlY3Rpb249PT10KXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSkpfSkscC5tZXJnZU1hcChmdW5jdGlvbihlKXtpZihlfHwhaC5fYnJpZGdpbmckKXtyZXR1cm4gYy5vZihlKX1yZXR1cm4gaC5fYnJpZGdpbmckLnBpcGUocC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPW51bGx9KSxwLmNhdGNoRXJyb3IoZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKTtyZXR1cm4gYy5vZihmYWxzZSl9KSl9KSxwLmZpcnN0KGZ1bmN0aW9uKGUpe3JldHVybiFlfSkpLnN1YnNjcmliZSh1bmRlZmluZWQsdW5kZWZpbmVkLGZ1bmN0aW9uKCl7aC5zdG9wKCl9KTtpZih0aGlzLl9zdG9wU3Vic2NyaXB0aW9uLmNsb3NlZCl7dGhpcy5fc3RvcFN1YnNjcmlwdGlvbj1udWxsfX07ci5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuX2RpcmVjdGlvblN1YmplY3QkLm5leHQoZSl9O3IucHJvdG90eXBlLnNldFNwZWVkPWZ1bmN0aW9uKGUpe2U9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGUpKTtpZihlPT09dGhpcy5fc3BlZWQpe3JldHVybn12YXIgdD10aGlzLl9zZXRTcGVlZChlKTtpZih0aGlzLl9wbGF5aW5nKXt0aGlzLl9zdGF0ZVNlcnZpY2Uuc2V0U3BlZWQodCl9dGhpcy5fc3BlZWRTdWJqZWN0JC5uZXh0KHRoaXMuX3NwZWVkKX07ci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKCF0aGlzLl9wbGF5aW5nKXtyZXR1cm59aWYoISF0aGlzLl9zdG9wU3Vic2NyaXB0aW9uKXtpZighdGhpcy5fc3RvcFN1YnNjcmlwdGlvbi5jbG9zZWQpe3RoaXMuX3N0b3BTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX10aGlzLl9zdG9wU3Vic2NyaXB0aW9uPW51bGx9dGhpcy5fZ3JhcGhNb2RlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7dGhpcy5fZ3JhcGhNb2RlU3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fY2FjaGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9jYWNoZVN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3BsYXlpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9wbGF5aW5nU3Vic2NyaXB0aW9uPW51bGw7dGhpcy5fY2xlYXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTt0aGlzLl9jbGVhclN1YnNjcmlwdGlvbj1udWxsO3RoaXMuX3N0YXRlU2VydmljZS5zZXRTcGVlZCgxKTt0aGlzLl9zdGF0ZVNlcnZpY2UuY3V0Tm9kZXMoKTt0aGlzLl9ncmFwaFNlcnZpY2Uuc2V0R3JhcGhNb2RlKHUuR3JhcGhNb2RlLlNwYXRpYWwpO3RoaXMuX3NldFBsYXlpbmcoZmFsc2UpfTtyLnByb3RvdHlwZS5fYnJpZGdlJD1mdW5jdGlvbihhLHMpe3ZhciB1PXRoaXM7aWYocz09PXVuZGVmaW5lZCl7cmV0dXJuIGMub2YobnVsbCl9dmFyIGU9dGhpcy5fZ3JhcGhDYWxjdWxhdG9yLmJvdW5kaW5nQm94Q29ybmVycyhhLmxhdExvbiwyNSk7dGhpcy5fYnJpZGdpbmckPXRoaXMuX2dyYXBoU2VydmljZS5jYWNoZUJvdW5kaW5nQm94JChlWzBdLGVbMV0pLnBpcGUocC5tZXJnZU1hcChmdW5jdGlvbihlKXt2YXIgdD1udWxsO2Zvcih2YXIgcj0wLG49ZTtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTtpZihpLnNlcXVlbmNlS2V5PT09YS5zZXF1ZW5jZUtleXx8IWkuY2FtZXJhVXVpZHx8aS5jYW1lcmFVdWlkIT09YS5jYW1lcmFVdWlkfHxpLmNhcHR1cmVkQXQ9PT1hLmNhcHR1cmVkQXR8fGkuY2FwdHVyZWRBdD5hLmNhcHR1cmVkQXQhPT1zKXtjb250aW51ZX12YXIgbz1NYXRoLmFicyhpLmNhcHR1cmVkQXQtYS5jYXB0dXJlZEF0KTtpZihvPjE1ZTMpe2NvbnRpbnVlfWlmKCF0fHxvPE1hdGguYWJzKHQuY2FwdHVyZWRBdC1hLmNhcHR1cmVkQXQpKXt0PWl9fXJldHVybiEhdD91Ll9ncmFwaFNlcnZpY2UuY2FjaGVOb2RlJCh0LmtleSk6Yy5vZihudWxsKX0pLHAuZmluYWxpemUoZnVuY3Rpb24oKXt1Ll9icmlkZ2luZyQ9bnVsbH0pLHAucHVibGlzaCgpLHAucmVmQ291bnQoKSk7cmV0dXJuIHRoaXMuX2JyaWRnaW5nJH07ci5wcm90b3R5cGUuX21hcFNwZWVkPWZ1bmN0aW9uKGUpe3ZhciB0PTIqZS0xO3JldHVybiBNYXRoLnBvdygxMCx0KS0uMip0fTtyLnByb3RvdHlwZS5fbWFwTm9kZXNBaGVhZD1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLm1heCgxMCxNYXRoLm1pbig1MCw4KzYqZSkpKX07ci5wcm90b3R5cGUuX3NldFBsYXlpbmc9ZnVuY3Rpb24oZSl7dGhpcy5fcGxheWluZz1lO3RoaXMuX3BsYXlpbmdTdWJqZWN0JC5uZXh0KGUpfTtyLnByb3RvdHlwZS5fc2V0U3BlZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fc3BlZWQ9ZTt2YXIgdD10aGlzLl9tYXBTcGVlZCh0aGlzLl9zcGVlZCk7dGhpcy5fbm9kZXNBaGVhZD10aGlzLl9tYXBOb2Rlc0FoZWFkKHQpO3JldHVybiB0fTtyLnNlcXVlbmNlU3BlZWQ9LjU0O3JldHVybiByfSgpO3IuUGxheVNlcnZpY2U9bjtyLmRlZmF1bHQ9bn0se1wiLi4vRWRnZVwiOjI5MixcIi4uL0dyYXBoXCI6Mjk1LHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MX1dLDQ4MjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5Qcm9qZWN0aW9uPXZvaWQgMDt2YXIgXz1lKFwidGhyZWVcIik7dmFyIG49ZShcIi4uL0dlb1wiKTt2YXIgaT1lKFwiLi4vZ2VvL1NwYXRpYWxcIik7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9nZW9Db29yZHM9ISFlP2U6bmV3IG4uR2VvQ29vcmRzO3RoaXMuX3NwYXRpYWw9ISFyP3I6bmV3IGkuZGVmYXVsdDt0aGlzLl92aWV3cG9ydENvb3Jkcz0hIXQ/dDpuZXcgbi5WaWV3cG9ydENvb3Jkc31lLnByb3RvdHlwZS5iYXNpY1RvQ2FudmFzPWZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiB0aGlzLl92aWV3cG9ydENvb3Jkcy5iYXNpY1RvQ2FudmFzU2FmZShlWzBdLGVbMV0sdCxuLHIucGVyc3BlY3RpdmUpfTtlLnByb3RvdHlwZS5jYW52YXNUb0Jhc2ljPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1RvQmFzaWMoZVswXSxlWzFdLHQsbixyLnBlcnNwZWN0aXZlKTtpZihpWzBdPDB8fGlbMF0+MXx8aVsxXTwwfHxpWzFdPjEpe2k9bnVsbH1yZXR1cm4gaX07ZS5wcm90b3R5cGUuZXZlbnRUb1VucHJvamVjdGlvbj1mdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPXRoaXMuX3ZpZXdwb3J0Q29vcmRzLmNhbnZhc1Bvc2l0aW9uKGUsdCk7cmV0dXJuIHRoaXMuY2FudmFzVG9VbnByb2plY3Rpb24obyx0LHIsbixpKX07ZS5wcm90b3R5cGUuY2FudmFzVG9VbnByb2plY3Rpb249ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz1lWzBdO3ZhciBhPWVbMV07dmFyIHM9dGhpcy5fdmlld3BvcnRDb29yZHMuY2FudmFzVG9WaWV3cG9ydChvLGEsdCksdT1zWzBdLGM9c1sxXTt2YXIgbD1uZXcgXy5WZWN0b3IzKHUsYywxKS51bnByb2plY3Qoci5wZXJzcGVjdGl2ZSk7dmFyIGg9aS5wcm9qZWN0QmFzaWMobC50b0FycmF5KCkpO2lmKGhbMF08MHx8aFswXT4xfHxoWzFdPDB8fGhbMV0+MSl7aD1udWxsfXZhciBwPWwuY2xvbmUoKS5zdWIoci5jYW1lcmEucG9zaXRpb24pLm5vcm1hbGl6ZSgpO3ZhciBmPS0yL3Auejt2YXIgZD1udWxsO2lmKGY+MCYmZjwxMDAmJiEhaCl7dmFyIHY9cC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGYpLmFkZChyLmNhbWVyYS5wb3NpdGlvbik7dmFyIG09dGhpcy5fZ2VvQ29vcmRzLmVudVRvR2VvZGV0aWModi54LHYueSx2Lnosbi5sYXQsbi5sb24sbi5hbHQpLnNsaWNlKDAsMik7ZD17bGF0Om1bMF0sbG9uOm1bMV19fXZhciBnPXtiYXNpY1BvaW50OmgsbGF0TG9uOmQscGl4ZWxQb2ludDpbbyxhXX07cmV0dXJuIGd9O2UucHJvdG90eXBlLmNhbWVyYVRvTGF0TG9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5jYW1lcmEucG9zaXRpb247dmFyIG49dGhpcy5fZ2VvQ29vcmRzLmVudVRvR2VvZGV0aWMoci54LHIueSxyLnosdC5sYXQsdC5sb24sdC5hbHQpLGk9blswXSxvPW5bMV07cmV0dXJue2xhdDppLGxvbjpvfX07ZS5wcm90b3R5cGUubGF0TG9uVG9DYW52YXM9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5fZ2VvQ29vcmRzLmdlb2RldGljVG9FbnUoZS5sYXQsZS5sb24sMCxuLmxhdCxuLmxvbixuLmFsdCk7dmFyIG89dGhpcy5fdmlld3BvcnRDb29yZHMucHJvamVjdFRvQ2FudmFzU2FmZShpLHQsci5wZXJzcGVjdGl2ZSk7cmV0dXJuIG99O2UucHJvdG90eXBlLmRpc3RhbmNlQmV0d2VlbkxhdExvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fc3BhdGlhbC5kaXN0YW5jZUZyb21MYXRMb24oZS5sYXQsZS5sb24sdC5sYXQsdC5sb24pfTtyZXR1cm4gZX0oKTtyLlByb2plY3Rpb249bztyLmRlZmF1bHQ9b30se1wiLi4vR2VvXCI6Mjk0LFwiLi4vZ2VvL1NwYXRpYWxcIjo0MTksdGhyZWU6MjQyfV0sNDgzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtyLlNwcml0ZVNlcnZpY2U9dm9pZCAwO3ZhciBvPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgYT1lKFwidGhyZWVcIik7dmFyIGY9ZShcInZpcnR1YWwtZG9tXCIpO3ZhciBzPWUoXCJyeGpzXCIpO3ZhciBkPWUoXCIuLi9WaWV3ZXJcIik7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImpzb25cIix7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2pzb249ZX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImltYWdlXCIse3NldDpmdW5jdGlvbihlKXt0aGlzLl9pbWFnZT1lO3RoaXMuX3RleHR1cmU9bmV3IGEuVGV4dHVyZSh0aGlzLl9pbWFnZSk7dGhpcy5fdGV4dHVyZS5taW5GaWx0ZXI9YS5OZWFyZXN0RmlsdGVyfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiEhKHRoaXMuX2ltYWdlJiZ0aGlzLl9qc29uKX0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO2UucHJvdG90eXBlLmdldEdMU3ByaXRlPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmxvYWRlZCl7dGhyb3cgbmV3IEVycm9yKFwiU3ByaXRlcyBjYW5ub3QgYmUgcmV0cmlldmVkIGJlZm9yZSB0aGUgYXRsYXMgaXMgbG9hZGVkLlwiKX12YXIgdD10aGlzLl9qc29uW2VdO2lmKCF0KXtjb25zb2xlLndhcm4oXCJTcHJpdGUgd2l0aCBrZXlcIitlK1wiZG9lcyBub3QgZXhpc3QgaW4gc3ByaXRlIGRlZmluaXRpb24uXCIpO3JldHVybiBuZXcgYS5PYmplY3QzRH12YXIgcj10aGlzLl90ZXh0dXJlLmNsb25lKCk7ci5uZWVkc1VwZGF0ZT10cnVlO3ZhciBuPXRoaXMuX2ltYWdlLndpZHRoO3ZhciBpPXRoaXMuX2ltYWdlLmhlaWdodDtyLm9mZnNldC54PXQueC9uO3Iub2Zmc2V0Lnk9KGktdC55LXQuaGVpZ2h0KS9pO3IucmVwZWF0Lng9dC53aWR0aC9uO3IucmVwZWF0Lnk9dC5oZWlnaHQvaTt2YXIgbz1uZXcgYS5TcHJpdGVNYXRlcmlhbCh7bWFwOnJ9KTtyZXR1cm4gbmV3IGEuU3ByaXRlKG8pfTtlLnByb3RvdHlwZS5nZXRET01TcHJpdGU9ZnVuY3Rpb24oZSx0KXtpZighdGhpcy5sb2FkZWQpe3Rocm93IG5ldyBFcnJvcihcIlNwcml0ZXMgY2Fubm90IGJlIHJldHJpZXZlZCBiZWZvcmUgdGhlIGF0bGFzIGlzIGxvYWRlZC5cIil9aWYodD09bnVsbCl7dD1kLkFsaWdubWVudC5DZW50ZXJ9dmFyIHI9dGhpcy5fanNvbltlXTtpZighcil7Y29uc29sZS53YXJuKFwiU3ByaXRlIHdpdGgga2V5XCIrZStcImRvZXMgbm90IGV4aXN0IGluIHNwcml0ZSBkZWZpbml0aW9uLlwiKTtyZXR1cm4gZi5oKFwiZGl2XCIse30sW10pfXZhciBuPXIueTt2YXIgaT1yLngrci53aWR0aDt2YXIgbz1yLnkrci5oZWlnaHQ7dmFyIGE9ci54O3ZhciBzPS1yLng7dmFyIHU9LXIueTt2YXIgYz10aGlzLl9pbWFnZS5oZWlnaHQ7dmFyIGw9dGhpcy5faW1hZ2Uud2lkdGg7c3dpdGNoKHQpe2Nhc2UgZC5BbGlnbm1lbnQuQm90dG9tOmNhc2UgZC5BbGlnbm1lbnQuQ2VudGVyOmNhc2UgZC5BbGlnbm1lbnQuVG9wOnMtPXIud2lkdGgvMjticmVhaztjYXNlIGQuQWxpZ25tZW50LkJvdHRvbUxlZnQ6Y2FzZSBkLkFsaWdubWVudC5MZWZ0OmNhc2UgZC5BbGlnbm1lbnQuVG9wTGVmdDpzLT1yLndpZHRoO2JyZWFrO2Nhc2UgZC5BbGlnbm1lbnQuQm90dG9tUmlnaHQ6Y2FzZSBkLkFsaWdubWVudC5SaWdodDpjYXNlIGQuQWxpZ25tZW50LlRvcFJpZ2h0OmRlZmF1bHQ6YnJlYWt9c3dpdGNoKHQpe2Nhc2UgZC5BbGlnbm1lbnQuQ2VudGVyOmNhc2UgZC5BbGlnbm1lbnQuTGVmdDpjYXNlIGQuQWxpZ25tZW50LlJpZ2h0OnUtPXIuaGVpZ2h0LzI7YnJlYWs7Y2FzZSBkLkFsaWdubWVudC5Ub3A6Y2FzZSBkLkFsaWdubWVudC5Ub3BMZWZ0OmNhc2UgZC5BbGlnbm1lbnQuVG9wUmlnaHQ6dS09ci5oZWlnaHQ7YnJlYWs7Y2FzZSBkLkFsaWdubWVudC5Cb3R0b206Y2FzZSBkLkFsaWdubWVudC5Cb3R0b21MZWZ0OmNhc2UgZC5BbGlnbm1lbnQuQm90dG9tUmlnaHQ6ZGVmYXVsdDpicmVha312YXIgaD0xL3IucGl4ZWxSYXRpbztuKj1oO2kqPWg7byo9aDthKj1oO3MqPWg7dSo9aDtjKj1oO2wqPWg7dmFyIHA9e3NyYzp0aGlzLl9pbWFnZS5zcmMsc3R5bGU6e2NsaXA6XCJyZWN0KFwiK24rXCJweCwgXCIraStcInB4LCBcIitvK1wicHgsIFwiK2ErXCJweClcIixoZWlnaHQ6YytcInB4XCIsbGVmdDpzK1wicHhcIixwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOnUrXCJweFwiLHdpZHRoOmwrXCJweFwifX07cmV0dXJuIGYuaChcImltZ1wiLHAsW10pfTtyZXR1cm4gZX0oKTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dmFyIHI9dGhpczt0aGlzLl9yZXRpbmE9d2luZG93LmRldmljZVBpeGVsUmF0aW8+MTt0aGlzLl9zcHJpdGVBdGxhc09wZXJhdGlvbiQ9bmV3IHMuU3ViamVjdDt0aGlzLl9zcHJpdGVBdGxhcyQ9dGhpcy5fc3ByaXRlQXRsYXNPcGVyYXRpb24kLnBpcGUoby5zdGFydFdpdGgoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxvLnNjYW4oZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChlKX0sbmV3IHUpLG8ucHVibGlzaFJlcGxheSgxKSxvLnJlZkNvdW50KCkpO3RoaXMuX3Nwcml0ZUF0bGFzJC5zdWJzY3JpYmUoZnVuY3Rpb24oKXt9KTtpZih0PT1udWxsKXtyZXR1cm59dmFyIG49dGhpcy5fcmV0aW5hP1wiQDJ4XCI6XCJcIjt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7aS5vcGVuKFwiR0VUXCIsdCtuK1wiLnBuZ1wiLHRydWUpO2kucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjtpLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PW5ldyBJbWFnZTt0Lm9ubG9hZD1mdW5jdGlvbigpe3IuX3Nwcml0ZUF0bGFzT3BlcmF0aW9uJC5uZXh0KGZ1bmN0aW9uKGUpe2UuaW1hZ2U9dDtyZXR1cm4gZX0pfTt2YXIgZT1uZXcgQmxvYihbaS5yZXNwb25zZV0pO3Quc3JjPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGUpfTtpLm9uZXJyb3I9ZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggc3ByaXRlIHNoZWV0IChcIit0K24rXCIucG5nKVwiKSl9O2kuc2VuZCgpO3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJHRVRcIix0K24rXCIuanNvblwiLHRydWUpO2UucmVzcG9uc2VUeXBlPVwidGV4dFwiO2Uub25sb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9SlNPTi5wYXJzZShlLnJlc3BvbnNlKTtyLl9zcHJpdGVBdGxhc09wZXJhdGlvbiQubmV4dChmdW5jdGlvbihlKXtlLmpzb249dDtyZXR1cm4gZX0pfTtlLm9uZXJyb3I9ZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggc2hlZXQgKFwiK3QrbitcIi5qc29uKVwiKSl9O2Uuc2VuZCgpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNwcml0ZUF0bGFzJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3ByaXRlQXRsYXMkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7cmV0dXJuIGV9KCk7ci5TcHJpdGVTZXJ2aWNlPW47ci5kZWZhdWx0PW59LHtcIi4uL1ZpZXdlclwiOjMwMixyeGpzOjQzLFwicnhqcy9vcGVyYXRvcnNcIjoyNDEsdGhyZWU6MjQyLFwidmlydHVhbC1kb21cIjoyNDd9XSw0ODQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3IuVG91Y2hTZXJ2aWNlPXZvaWQgMDt2YXIgdT1lKFwicnhqc1wiKTt2YXIgYz1lKFwicnhqcy9vcGVyYXRvcnNcIik7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9dGhpczt0aGlzLl9hY3RpdmVTdWJqZWN0JD1uZXcgdS5CZWhhdmlvclN1YmplY3QoZmFsc2UpO3RoaXMuX2FjdGl2ZSQ9dGhpcy5fYWN0aXZlU3ViamVjdCQucGlwZShjLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksYy5wdWJsaXNoUmVwbGF5KDEpLGMucmVmQ291bnQoKSk7dS5mcm9tRXZlbnQodCxcInRvdWNobW92ZVwiKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSk7dGhpcy5fdG91Y2hTdGFydCQ9dS5mcm9tRXZlbnQoZSxcInRvdWNoc3RhcnRcIik7dGhpcy5fdG91Y2hNb3ZlJD11LmZyb21FdmVudChlLFwidG91Y2htb3ZlXCIpO3RoaXMuX3RvdWNoRW5kJD11LmZyb21FdmVudChlLFwidG91Y2hlbmRcIik7dGhpcy5fdG91Y2hDYW5jZWwkPXUuZnJvbUV2ZW50KGUsXCJ0b3VjaGNhbmNlbFwiKTt2YXIgbj10aGlzLl90b3VjaFN0YXJ0JC5waXBlKGMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvdWNoZXMubGVuZ3RoPT09MSYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aD09PTF9KSxjLnNoYXJlKCkpO3RoaXMuX2RvdWJsZVRhcCQ9bi5waXBlKGMuYnVmZmVyV2hlbihmdW5jdGlvbigpe3JldHVybiBuLnBpcGUoYy5maXJzdCgpLGMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1Lm1lcmdlKHUudGltZXIoMzAwKSxuKS5waXBlKGMudGFrZSgxKSl9KSl9KSxjLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGg9PT0yfSksYy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbZS5sZW5ndGgtMV19KSxjLnNoYXJlKCkpO3RoaXMuX2RvdWJsZVRhcCQuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pO3RoaXMuX3NpbmdsZVRvdWNoTW92ZSQ9dGhpcy5fdG91Y2hNb3ZlJC5waXBlKGMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvdWNoZXMubGVuZ3RoPT09MSYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aD09PTF9KSxjLnNoYXJlKCkpO3ZhciBpPXUubWVyZ2UodGhpcy5fdG91Y2hTdGFydCQsdGhpcy5fdG91Y2hFbmQkLHRoaXMuX3RvdWNoQ2FuY2VsJCkucGlwZShjLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50b3VjaGVzLmxlbmd0aD09PTEmJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg9PT0xfSkpO3ZhciBvPXUubWVyZ2UodGhpcy5fdG91Y2hTdGFydCQsdGhpcy5fdG91Y2hFbmQkLHRoaXMuX3RvdWNoQ2FuY2VsJCkucGlwZShjLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50b3VjaGVzLmxlbmd0aD49MX0pKTt2YXIgYT11Lm1lcmdlKHRoaXMuX3RvdWNoRW5kJCx0aGlzLl90b3VjaENhbmNlbCQpLnBpcGUoYy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG91Y2hlcy5sZW5ndGg9PT0wfSkpO3RoaXMuX3NpbmdsZVRvdWNoRHJhZ1N0YXJ0JD1pLnBpcGUoYy5tZXJnZU1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5fc2luZ2xlVG91Y2hNb3ZlJC5waXBlKGMudGFrZVVudGlsKHUubWVyZ2UoYSxvKSksYy50YWtlKDEpKX0pKTt0aGlzLl9zaW5nbGVUb3VjaERyYWdFbmQkPWkucGlwZShjLm1lcmdlTWFwKGZ1bmN0aW9uKGUpe3JldHVybiB1Lm1lcmdlKGEsbykucGlwZShjLmZpcnN0KCkpfSkpO3RoaXMuX3NpbmdsZVRvdWNoRHJhZyQ9aS5waXBlKGMuc3dpdGNoTWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLl9zaW5nbGVUb3VjaE1vdmUkLnBpcGUoYy5za2lwKDEpLGMudGFrZVVudGlsKHUubWVyZ2UobyxhKSkpfSkpO3ZhciBzPXUubWVyZ2UodGhpcy5fdG91Y2hTdGFydCQsdGhpcy5fdG91Y2hFbmQkLHRoaXMuX3RvdWNoQ2FuY2VsJCk7dGhpcy5fcGluY2hTdGFydCQ9cy5waXBlKGMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvdWNoZXMubGVuZ3RoPT09MiYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aD09PTJ9KSk7dGhpcy5fcGluY2hFbmQkPXMucGlwZShjLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50b3VjaGVzLmxlbmd0aCE9PTJ8fGUudGFyZ2V0VG91Y2hlcy5sZW5ndGghPT0yfSkpO3RoaXMuX3BpbmNoT3BlcmF0aW9uJD1uZXcgdS5TdWJqZWN0O3RoaXMuX3BpbmNoJD10aGlzLl9waW5jaE9wZXJhdGlvbiQucGlwZShjLnNjYW4oZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChlKX0se2NoYW5nZVg6MCxjaGFuZ2VZOjAsY2xpZW50WDowLGNsaWVudFk6MCxkaXN0YW5jZTowLGRpc3RhbmNlQ2hhbmdlOjAsZGlzdGFuY2VYOjAsZGlzdGFuY2VZOjAsb3JpZ2luYWxFdmVudDpudWxsLHBhZ2VYOjAscGFnZVk6MCxzY3JlZW5YOjAsc2NyZWVuWTowLHRvdWNoMTpudWxsLHRvdWNoMjpudWxsfSkpO3RoaXMuX3RvdWNoTW92ZSQucGlwZShjLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS50b3VjaGVzLmxlbmd0aD09PTImJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg9PT0yfSksYy5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWIudG91Y2hlc1swXTt2YXIgcj1iLnRvdWNoZXNbMV07dmFyIG49TWF0aC5taW4odC5jbGllbnRYLHIuY2xpZW50WCk7dmFyIGk9TWF0aC5tYXgodC5jbGllbnRYLHIuY2xpZW50WCk7dmFyIG89TWF0aC5taW4odC5jbGllbnRZLHIuY2xpZW50WSk7dmFyIGE9TWF0aC5tYXgodC5jbGllbnRZLHIuY2xpZW50WSk7dmFyIHM9bisoaS1uKS8yO3ZhciB1PW8rKGEtbykvMjt2YXIgYz1zK3QucGFnZVgtdC5jbGllbnRYO3ZhciBsPXUrdC5wYWdlWS10LmNsaWVudFk7dmFyIGg9cyt0LnNjcmVlblgtdC5jbGllbnRYO3ZhciBwPXUrdC5zY3JlZW5ZLXQuY2xpZW50WTt2YXIgZj1NYXRoLmFicyh0LmNsaWVudFgtci5jbGllbnRYKTt2YXIgZD1NYXRoLmFicyh0LmNsaWVudFktci5jbGllbnRZKTt2YXIgdj1NYXRoLnNxcnQoZipmK2QqZCk7dmFyIG09di1lLmRpc3RhbmNlO3ZhciBnPWYtZS5kaXN0YW5jZVg7dmFyIF89ZC1lLmRpc3RhbmNlWTt2YXIgeT17Y2hhbmdlWDpnLGNoYW5nZVk6XyxjbGllbnRYOnMsY2xpZW50WTp1LGRpc3RhbmNlOnYsZGlzdGFuY2VDaGFuZ2U6bSxkaXN0YW5jZVg6ZixkaXN0YW5jZVk6ZCxvcmlnaW5hbEV2ZW50OmIscGFnZVg6YyxwYWdlWTpsLHNjcmVlblg6aCxzY3JlZW5ZOnAsdG91Y2gxOnQsdG91Y2gyOnJ9O3JldHVybiB5fX0pKS5zdWJzY3JpYmUodGhpcy5fcGluY2hPcGVyYXRpb24kKTt0aGlzLl9waW5jaENoYW5nZSQ9dGhpcy5fcGluY2hTdGFydCQucGlwZShjLnN3aXRjaE1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5fcGluY2gkLnBpcGUoYy5za2lwKDEpLGMudGFrZVVudGlsKHIuX3BpbmNoRW5kJCkpfSkpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFjdGl2ZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhY3RpdmF0ZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZVN1YmplY3QkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZG91YmxlVGFwJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG91YmxlVGFwJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRvdWNoU3RhcnQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3VjaFN0YXJ0JH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRvdWNoTW92ZSRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvdWNoTW92ZSR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0b3VjaEVuZCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvdWNoRW5kJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRvdWNoQ2FuY2VsJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG91Y2hDYW5jZWwkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2luZ2xlVG91Y2hEcmFnU3RhcnQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaW5nbGVUb3VjaERyYWdTdGFydCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzaW5nbGVUb3VjaERyYWckXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaW5nbGVUb3VjaERyYWckfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2luZ2xlVG91Y2hEcmFnRW5kJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2luZ2xlVG91Y2hEcmFnRW5kJH0sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBpbmNoJFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGluY2hDaGFuZ2UkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGluY2hTdGFydCRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpbmNoU3RhcnQkfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGluY2hFbmQkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waW5jaEVuZCR9LGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtyZXR1cm4gZX0oKTtyLlRvdWNoU2VydmljZT1ufSx7cnhqczo0MyxcInJ4anMvb3BlcmF0b3JzXCI6MjQxfV0sNDg1OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikpZVtyXT10W3JdfTtyZXR1cm4gbihlLHQpfTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtuKGUsdCk7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1lLnByb3RvdHlwZT10PT09bnVsbD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ci5WaWV3ZXI9dm9pZCAwO3ZhciBvPWUoXCJyeGpzXCIpO3ZhciBzPWUoXCJyeGpzL29wZXJhdG9yc1wiKTt2YXIgdT1lKFwid2hlblwiKTt2YXIgYz1lKFwiLi4vVmlld2VyXCIpO3ZhciBsPWUoXCIuLi9VdGlsc1wiKTt2YXIgaT1mdW5jdGlvbihhKXtuKGUsYSk7ZnVuY3Rpb24gZShlLHQscixuLGkpe3ZhciBvPWEuY2FsbCh0aGlzKXx8dGhpcztuPW4hPW51bGw/bjp7fTtsLlNldHRpbmdzLnNldE9wdGlvbnMobik7bC5VcmxzLnNldE9wdGlvbnMobi51cmwpO28uX25hdmlnYXRvcj1uZXcgYy5OYXZpZ2F0b3IodCxuLGkpO28uX2NvbnRhaW5lcj1uZXcgYy5Db250YWluZXIoZSxvLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLG4pO28uX29ic2VydmVyPW5ldyBjLk9ic2VydmVyKG8sby5fbmF2aWdhdG9yLG8uX2NvbnRhaW5lcik7by5fY29tcG9uZW50Q29udHJvbGxlcj1uZXcgYy5Db21wb25lbnRDb250cm9sbGVyKG8uX2NvbnRhaW5lcixvLl9uYXZpZ2F0b3Isby5fb2JzZXJ2ZXIscixuLmNvbXBvbmVudCk7cmV0dXJuIG99T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNOYXZpZ2FibGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudENvbnRyb2xsZXIubmF2aWdhYmxlfSxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7ZS5wcm90b3R5cGUuYWN0aXZhdGVDb21iaW5lZFBhbm5pbmc9ZnVuY3Rpb24oKXt0aGlzLl9uYXZpZ2F0b3IucGFuU2VydmljZS5lbmFibGUoKX07ZS5wcm90b3R5cGUuYWN0aXZhdGVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5fY29tcG9uZW50Q29udHJvbGxlci5hY3RpdmF0ZShlKX07ZS5wcm90b3R5cGUuYWN0aXZhdGVDb3Zlcj1mdW5jdGlvbigpe3RoaXMuX2NvbXBvbmVudENvbnRyb2xsZXIuYWN0aXZhdGVDb3ZlcigpfTtlLnByb3RvdHlwZS5kZWFjdGl2YXRlQ29tYmluZWRQYW5uaW5nPWZ1bmN0aW9uKCl7dGhpcy5fbmF2aWdhdG9yLnBhblNlcnZpY2UuZGlzYWJsZSgpfTtlLnByb3RvdHlwZS5kZWFjdGl2YXRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3RoaXMuX2NvbXBvbmVudENvbnRyb2xsZXIuZGVhY3RpdmF0ZShlKX07ZS5wcm90b3R5cGUuZGVhY3RpdmF0ZUNvdmVyPWZ1bmN0aW9uKCl7dGhpcy5fY29tcG9uZW50Q29udHJvbGxlci5kZWFjdGl2YXRlQ292ZXIoKX07ZS5wcm90b3R5cGUuZ2V0QmVhcmluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe2UuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLmJlYXJpbmckLnBpcGUocy5maXJzdCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dChlKX0sZnVuY3Rpb24oZSl7cihlKX0pfSl9O2UucHJvdG90eXBlLmdldENhbnZhc0NvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXIuY2FudmFzQ29udGFpbmVyfTtlLnByb3RvdHlwZS5nZXRDZW50ZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB1LnByb21pc2UoZnVuY3Rpb24odCxyKXtlLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmdldENlbnRlcigpLnN1YnNjcmliZShmdW5jdGlvbihlKXt0KGUpfSxmdW5jdGlvbihlKXtyKGUpfSl9KX07ZS5wcm90b3R5cGUuZ2V0Q29tcG9uZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb21wb25lbnRDb250cm9sbGVyLmdldChlKX07ZS5wcm90b3R5cGUuZ2V0Q29udGFpbmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lci5lbGVtZW50fTtlLnByb3RvdHlwZS5nZXRGaWVsZE9mVmlldz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe2UuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQucGlwZShzLmZpcnN0KCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt0KGUucGVyc3BlY3RpdmUuZm92KX0sZnVuY3Rpb24oZSl7cihlKX0pfSl9O2UucHJvdG90eXBlLmdldFBvaW50T2ZWaWV3PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdS5wcm9taXNlKGZ1bmN0aW9uKG4sdCl7by5jb21iaW5lTGF0ZXN0KGUuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsZS5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UuYmVhcmluZyQpLnBpcGUocy5maXJzdCgpKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWVbMV07bih7YmVhcmluZzpyLHRpbHQ6dC5nZXRUaWx0KCl9KX0sZnVuY3Rpb24oZSl7dChlKX0pfSl9O2UucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcztyZXR1cm4gdS5wcm9taXNlKGZ1bmN0aW9uKG4sdCl7by5jb21iaW5lTGF0ZXN0KGkuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQsaS5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5yZWZlcmVuY2UkKS5waXBlKHMuZmlyc3QoKSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1lWzFdO24oaS5fb2JzZXJ2ZXIucHJvamVjdGlvbi5jYW1lcmFUb0xhdExvbih0LHIpKX0sZnVuY3Rpb24oZSl7dChlKX0pfSl9O2UucHJvdG90eXBlLmdldFpvb209ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB1LnByb21pc2UoZnVuY3Rpb24odCxyKXtlLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLmdldFpvb20oKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dChlKX0sZnVuY3Rpb24oZSl7cihlKX0pfSl9O2UucHJvdG90eXBlLm1vdmVDbG9zZVRvPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5pc05hdmlnYWJsZT90aGlzLl9uYXZpZ2F0b3IubW92ZUNsb3NlVG8kKGUsdCk6by50aHJvd0Vycm9yKG5ldyBFcnJvcihcIkNhbGxpbmcgbW92ZUNsb3NlVG8gaXMgbm90IHN1cHBvcnRlZCB3aGVuIHZpZXdlciBpcyBub3QgbmF2aWdhYmxlLlwiKSk7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe24uc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QoZSl9LGZ1bmN0aW9uKGUpe3IoZSl9KX0pfTtlLnByb3RvdHlwZS5tb3ZlRGlyPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuaXNOYXZpZ2FibGU/dGhpcy5fbmF2aWdhdG9yLm1vdmVEaXIkKGUpOm8udGhyb3dFcnJvcihuZXcgRXJyb3IoXCJDYWxsaW5nIG1vdmVEaXIgaXMgbm90IHN1cHBvcnRlZCB3aGVuIHZpZXdlciBpcyBub3QgbmF2aWdhYmxlLlwiKSk7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe24uc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QoZSl9LGZ1bmN0aW9uKGUpe3IoZSl9KX0pfTtlLnByb3RvdHlwZS5tb3ZlVG9LZXk9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5pc05hdmlnYWJsZT90aGlzLl9uYXZpZ2F0b3IubW92ZVRvS2V5JChlKTpvLnRocm93RXJyb3IobmV3IEVycm9yKFwiQ2FsbGluZyBtb3ZlVG9LZXkgaXMgbm90IHN1cHBvcnRlZCB3aGVuIHZpZXdlciBpcyBub3QgbmF2aWdhYmxlLlwiKSk7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe24uc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QoZSl9LGZ1bmN0aW9uKGUpe3IoZSl9KX0pfTtlLnByb3RvdHlwZS5wcm9qZWN0PWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe24uX29ic2VydmVyLnByb2plY3QkKGUpLnN1YnNjcmliZShmdW5jdGlvbihlKXt0KGUpfSxmdW5jdGlvbihlKXtyKGUpfSl9KX07ZS5wcm90b3R5cGUucHJvamVjdEZyb21CYXNpYz1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiB1LnByb21pc2UoZnVuY3Rpb24odCxyKXtuLl9vYnNlcnZlci5wcm9qZWN0QmFzaWMkKGUpLnN1YnNjcmliZShmdW5jdGlvbihlKXt0KGUpfSxmdW5jdGlvbihlKXtyKGUpfSl9KX07ZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLnJlbmRlclNlcnZpY2UucmVzaXplJC5uZXh0KG51bGwpfTtlLnByb3RvdHlwZS5zZXRBdXRoVG9rZW49ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy5pc05hdmlnYWJsZT90aGlzLl9uYXZpZ2F0b3Iuc2V0VG9rZW4kKGUpOm8udGhyb3dFcnJvcihuZXcgRXJyb3IoXCJDYWxsaW5nIHNldEF1dGhUb2tlbiBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdmlld2VyIGlzIG5vdCBuYXZpZ2FibGUuXCIpKTtyZXR1cm4gdS5wcm9taXNlKGZ1bmN0aW9uKGUsdCl7ci5zdWJzY3JpYmUoZnVuY3Rpb24oKXtlKHVuZGVmaW5lZCl9LGZ1bmN0aW9uKGUpe3QoZSl9KX0pfTtlLnByb3RvdHlwZS5zZXRDZW50ZXI9ZnVuY3Rpb24oZSl7dGhpcy5fbmF2aWdhdG9yLnN0YXRlU2VydmljZS5zZXRDZW50ZXIoZSl9O2UucHJvdG90eXBlLnNldEZpbHRlcj1mdW5jdGlvbihyKXt2YXIgbj10aGlzO3JldHVybiB1LnByb21pc2UoZnVuY3Rpb24oZSx0KXtuLl9uYXZpZ2F0b3Iuc2V0RmlsdGVyJChyKS5zdWJzY3JpYmUoZnVuY3Rpb24oKXtlKHVuZGVmaW5lZCl9LGZ1bmN0aW9uKGUpe3QoZSl9KX0pfTtlLnByb3RvdHlwZS5zZXRGaWVsZE9mVmlldz1mdW5jdGlvbihyKXt2YXIgbj10aGlzO3RoaXMuX2NvbnRhaW5lci5yZW5kZXJTZXJ2aWNlLnJlbmRlckNhbWVyYSQucGlwZShzLmZpcnN0KCkpLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lLmZvdlRvWm9vbShyKTtuLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnNldFpvb20odCl9KX07ZS5wcm90b3R5cGUuc2V0UmVuZGVyTW9kZT1mdW5jdGlvbihlKXt0aGlzLl9jb250YWluZXIucmVuZGVyU2VydmljZS5yZW5kZXJNb2RlJC5uZXh0KGUpfTtlLnByb3RvdHlwZS5zZXRUcmFuc2l0aW9uTW9kZT1mdW5jdGlvbihlKXt0aGlzLl9uYXZpZ2F0b3Iuc3RhdGVTZXJ2aWNlLnNldFRyYW5zaXRpb25Nb2RlKGUpfTtlLnByb3RvdHlwZS5zZXRab29tPWZ1bmN0aW9uKGUpe3RoaXMuX25hdmlnYXRvci5zdGF0ZVNlcnZpY2Uuc2V0Wm9vbShlKX07ZS5wcm90b3R5cGUudW5wcm9qZWN0PWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe24uX29ic2VydmVyLnVucHJvamVjdCQoZSkuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3QoZSl9LGZ1bmN0aW9uKGUpe3IoZSl9KX0pfTtlLnByb3RvdHlwZS51bnByb2plY3RUb0Jhc2ljPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIHUucHJvbWlzZShmdW5jdGlvbih0LHIpe24uX29ic2VydmVyLnVucHJvamVjdEJhc2ljJChlKS5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dChlKX0sZnVuY3Rpb24oZSl7cihlKX0pfSl9O2UuYmVhcmluZ2NoYW5nZWQ9XCJiZWFyaW5nY2hhbmdlZFwiO2UuY2xpY2s9XCJjbGlja1wiO2UuY29udGV4dG1lbnU9XCJjb250ZXh0bWVudVwiO2UuZGJsY2xpY2s9XCJkYmxjbGlja1wiO2UuZm92Y2hhbmdlZD1cImZvdmNoYW5nZWRcIjtlLmxvYWRpbmdjaGFuZ2VkPVwibG9hZGluZ2NoYW5nZWRcIjtlLm1vdXNlZG93bj1cIm1vdXNlZG93blwiO2UubW91c2Vtb3ZlPVwibW91c2Vtb3ZlXCI7ZS5tb3VzZW91dD1cIm1vdXNlb3V0XCI7ZS5tb3VzZW92ZXI9XCJtb3VzZW92ZXJcIjtlLm1vdXNldXA9XCJtb3VzZXVwXCI7ZS5tb3ZlZW5kPVwibW92ZWVuZFwiO2UubW92ZXN0YXJ0PVwibW92ZXN0YXJ0XCI7ZS5uYXZpZ2FibGVjaGFuZ2VkPVwibmF2aWdhYmxlY2hhbmdlZFwiO2Uubm9kZWNoYW5nZWQ9XCJub2RlY2hhbmdlZFwiO2UucG9zaXRpb25jaGFuZ2VkPVwicG9zaXRpb25jaGFuZ2VkXCI7ZS5wb3ZjaGFuZ2VkPVwicG92Y2hhbmdlZFwiO2Uuc2VxdWVuY2VlZGdlc2NoYW5nZWQ9XCJzZXF1ZW5jZWVkZ2VzY2hhbmdlZFwiO2Uuc3BhdGlhbGVkZ2VzY2hhbmdlZD1cInNwYXRpYWxlZGdlc2NoYW5nZWRcIjtyZXR1cm4gZX0obC5FdmVudEVtaXR0ZXIpO3IuVmlld2VyPWl9LHtcIi4uL1V0aWxzXCI6MzAxLFwiLi4vVmlld2VyXCI6MzAyLHJ4anM6NDMsXCJyeGpzL29wZXJhdG9yc1wiOjI0MSx3aGVuOjI4OH1dLDQ4NjpbZnVuY3Rpb24oZSx0LHIpe2FyZ3VtZW50c1s0XVszMDVdWzBdLmFwcGx5KHIsYXJndW1lbnRzKX0se2R1cDozMDV9XX0se30sWzI5Nl0pKDI5Nil9KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7Ozs7OztBIiwic291cmNlUm9vdCI6IiJ9